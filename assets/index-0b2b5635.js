function _mergeNamespaces(_e,et){for(var b=0;b<et.length;b++){const tt=et[b];if(typeof tt!="string"&&!Array.isArray(tt)){for(const nt in tt)if(nt!=="default"&&!(nt in _e)){const rt=Object.getOwnPropertyDescriptor(tt,nt);rt&&Object.defineProperty(_e,nt,rt.get?rt:{enumerable:!0,get:()=>tt[nt]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const et=document.createElement("link").relList;if(et&&et.supports&&et.supports("modulepreload"))return;for(const nt of document.querySelectorAll('link[rel="modulepreload"]'))tt(nt);new MutationObserver(nt=>{for(const rt of nt)if(rt.type==="childList")for(const it of rt.addedNodes)it.tagName==="LINK"&&it.rel==="modulepreload"&&tt(it)}).observe(document,{childList:!0,subtree:!0});function b(nt){const rt={};return nt.integrity&&(rt.integrity=nt.integrity),nt.referrerPolicy&&(rt.referrerPolicy=nt.referrerPolicy),nt.crossOrigin==="use-credentials"?rt.credentials="include":nt.crossOrigin==="anonymous"?rt.credentials="omit":rt.credentials="same-origin",rt}function tt(nt){if(nt.ep)return;nt.ep=!0;const rt=b(nt);fetch(nt.href,rt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}var jsxRuntimeExports={},jsxRuntime={get exports(){return jsxRuntimeExports},set exports(_e){jsxRuntimeExports=_e}},reactJsxRuntime_production_min={},reactExports={},react={get exports(){return reactExports},set exports(_e){reactExports=_e}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(_e){return _e===null||typeof _e!="object"?null:(_e=z$2&&_e[z$2]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$1={};function E$2(_e,et,b){this.props=_e,this.context=et,this.refs=D$1,this.updater=b||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_e,et){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,et,"setState")};E$2.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1(_e,et,b){this.props=_e,this.context=et,this.refs=D$1,this.updater=b||B$2}var H$2=G$1.prototype=new F;H$2.constructor=G$1;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(_e,et,b){var tt,nt={},rt=null,it=null;if(et!=null)for(tt in et.ref!==void 0&&(it=et.ref),et.key!==void 0&&(rt=""+et.key),et)J.call(et,tt)&&!L$2.hasOwnProperty(tt)&&(nt[tt]=et[tt]);var ot=arguments.length-2;if(ot===1)nt.children=b;else if(1<ot){for(var st=Array(ot),at=0;at<ot;at++)st[at]=arguments[at+2];nt.children=st}if(_e&&_e.defaultProps)for(tt in ot=_e.defaultProps,ot)nt[tt]===void 0&&(nt[tt]=ot[tt]);return{$$typeof:l$4,type:_e,key:rt,ref:it,props:nt,_owner:K$1.current}}function N$2(_e,et){return{$$typeof:l$4,type:_e.type,key:et,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$1(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$4}function escape$1(_e){var et={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(b){return et[b]})}var P$2=/\/+/g;function Q$1(_e,et){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):et.toString(36)}function R$2(_e,et,b,tt,nt){var rt=typeof _e;(rt==="undefined"||rt==="boolean")&&(_e=null);var it=!1;if(_e===null)it=!0;else switch(rt){case"string":case"number":it=!0;break;case"object":switch(_e.$$typeof){case l$4:case n$5:it=!0}}if(it)return it=_e,nt=nt(it),_e=tt===""?"."+Q$1(it,0):tt,I$2(nt)?(b="",_e!=null&&(b=_e.replace(P$2,"$&/")+"/"),R$2(nt,et,b,"",function(at){return at})):nt!=null&&(O$1(nt)&&(nt=N$2(nt,b+(!nt.key||it&&it.key===nt.key?"":(""+nt.key).replace(P$2,"$&/")+"/")+_e)),et.push(nt)),1;if(it=0,tt=tt===""?".":tt+":",I$2(_e))for(var ot=0;ot<_e.length;ot++){rt=_e[ot];var st=tt+Q$1(rt,ot);it+=R$2(rt,et,b,st,nt)}else if(st=A$2(_e),typeof st=="function")for(_e=st.call(_e),ot=0;!(rt=_e.next()).done;)rt=rt.value,st=tt+Q$1(rt,ot++),it+=R$2(rt,et,b,st,nt);else if(rt==="object")throw et=String(_e),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.");return it}function S$3(_e,et,b){if(_e==null)return _e;var tt=[],nt=0;return R$2(_e,tt,"","",function(rt){return et.call(b,rt,nt++)}),tt}function T$2(_e){if(_e._status===-1){var et=_e._result;et=et(),et.then(function(b){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=b)},function(b){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=b)}),_e._status===-1&&(_e._status=0,_e._result=et)}if(_e._status===1)return _e._result.default;throw _e._result}var U$1={current:null},V$2={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};react_production_min.Children={map:S$3,forEach:function(_e,et,b){S$3(_e,function(){et.apply(this,arguments)},b)},count:function(_e){var et=0;return S$3(_e,function(){et++}),et},toArray:function(_e){return S$3(_e,function(et){return et})||[]},only:function(_e){if(!O$1(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(_e,et,b){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var tt=C$2({},_e.props),nt=_e.key,rt=_e.ref,it=_e._owner;if(et!=null){if(et.ref!==void 0&&(rt=et.ref,it=K$1.current),et.key!==void 0&&(nt=""+et.key),_e.type&&_e.type.defaultProps)var ot=_e.type.defaultProps;for(st in et)J.call(et,st)&&!L$2.hasOwnProperty(st)&&(tt[st]=et[st]===void 0&&ot!==void 0?ot[st]:et[st])}var st=arguments.length-2;if(st===1)tt.children=b;else if(1<st){ot=Array(st);for(var at=0;at<st;at++)ot[at]=arguments[at+2];tt.children=ot}return{$$typeof:l$4,type:_e.type,key:nt,ref:rt,props:tt,_owner:it}};react_production_min.createContext=function(_e){return _e={$$typeof:u$1,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$2,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$2;react_production_min.createFactory=function(_e){var et=M$2.bind(null,_e);return et.type=_e,et};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$2,render:_e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(_e){return{$$typeof:y$1,_payload:{_status:-1,_result:_e},_init:T$2}};react_production_min.memo=function(_e,et){return{$$typeof:x$1,type:_e,compare:et===void 0?null:et}};react_production_min.startTransition=function(_e){var et=V$2.transition;V$2.transition={};try{_e()}finally{V$2.transition=et}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(_e,et){return U$1.current.useCallback(_e,et)};react_production_min.useContext=function(_e){return U$1.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$1.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,et){return U$1.current.useEffect(_e,et)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(_e,et,b){return U$1.current.useImperativeHandle(_e,et,b)};react_production_min.useInsertionEffect=function(_e,et){return U$1.current.useInsertionEffect(_e,et)};react_production_min.useLayoutEffect=function(_e,et){return U$1.current.useLayoutEffect(_e,et)};react_production_min.useMemo=function(_e,et){return U$1.current.useMemo(_e,et)};react_production_min.useReducer=function(_e,et,b){return U$1.current.useReducer(_e,et,b)};react_production_min.useRef=function(_e){return U$1.current.useRef(_e)};react_production_min.useState=function(_e){return U$1.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,et,b){return U$1.current.useSyncExternalStore(_e,et,b)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";(function(_e){_e.exports=react_production_min})(react);const index$1=getDefaultExportFromCjs(reactExports),React=_mergeNamespaces({__proto__:null,default:index$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$4=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(_e,et,b){var tt,nt={},rt=null,it=null;b!==void 0&&(rt=""+b),et.key!==void 0&&(rt=""+et.key),et.ref!==void 0&&(it=et.ref);for(tt in et)m$2.call(et,tt)&&!p$2.hasOwnProperty(tt)&&(nt[tt]=et[tt]);if(_e&&_e.defaultProps)for(tt in et=_e.defaultProps,et)nt[tt]===void 0&&(nt[tt]=et[tt]);return{$$typeof:k$1,type:_e,key:rt,ref:it,props:nt,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;(function(_e){_e.exports=reactJsxRuntime_production_min})(jsxRuntime);var client={},reactDomExports={},reactDom={get exports(){return reactDomExports},set exports(_e){reactDomExports=_e}},reactDom_production_min={},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports(_e){schedulerExports=_e}},scheduler_production_min={};(function(_e){/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function et(on,yn){var fn=on.length;on.push(yn);e:for(;0<fn;){var sn=fn-1>>>1,un=on[sn];if(0<nt(un,yn))on[sn]=yn,on[fn]=un,fn=sn;else break e}}function b(on){return on.length===0?null:on[0]}function tt(on){if(on.length===0)return null;var yn=on[0],fn=on.pop();if(fn!==yn){on[0]=fn;e:for(var sn=0,un=on.length,Ln=un>>>1;sn<Ln;){var Xn=2*(sn+1)-1,pn=on[Xn],Vn=Xn+1,Tn=on[Vn];if(0>nt(pn,fn))Vn<un&&0>nt(Tn,pn)?(on[sn]=Tn,on[Vn]=fn,sn=Vn):(on[sn]=pn,on[Xn]=fn,sn=Xn);else if(Vn<un&&0>nt(Tn,fn))on[sn]=Tn,on[Vn]=fn,sn=Vn;else break e}}return yn}function nt(on,yn){var fn=on.sortIndex-yn.sortIndex;return fn!==0?fn:on.id-yn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var rt=performance;_e.unstable_now=function(){return rt.now()}}else{var it=Date,ot=it.now();_e.unstable_now=function(){return it.now()-ot}}var st=[],at=[],ct=1,ut=null,lt=3,dt=!1,ft=!1,St=!1,Tt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,gt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function yt(on){for(var yn=b(at);yn!==null;){if(yn.callback===null)tt(at);else if(yn.startTime<=on)tt(at),yn.sortIndex=yn.expirationTime,et(st,yn);else break;yn=b(at)}}function Et(on){if(St=!1,yt(on),!ft)if(b(st)!==null)ft=!0,an(It);else{var yn=b(at);yn!==null&&mn(Et,yn.startTime-on)}}function It(on,yn){ft=!1,St&&(St=!1,pt(At),At=-1),dt=!0;var fn=lt;try{for(yt(yn),ut=b(st);ut!==null&&(!(ut.expirationTime>yn)||on&&!Nt());){var sn=ut.callback;if(typeof sn=="function"){ut.callback=null,lt=ut.priorityLevel;var un=sn(ut.expirationTime<=yn);yn=_e.unstable_now(),typeof un=="function"?ut.callback=un:ut===b(st)&&tt(st),yt(yn)}else tt(st);ut=b(st)}if(ut!==null)var Ln=!0;else{var Xn=b(at);Xn!==null&&mn(Et,Xn.startTime-yn),Ln=!1}return Ln}finally{ut=null,lt=fn,dt=!1}}var Gt=!1,Wt=null,At=-1,kt=5,Vt=-1;function Nt(){return!(_e.unstable_now()-Vt<kt)}function tn(){if(Wt!==null){var on=_e.unstable_now();Vt=on;var yn=!0;try{yn=Wt(!0,on)}finally{yn?_t():(Gt=!1,Wt=null)}}else Gt=!1}var _t;if(typeof gt=="function")_t=function(){gt(tn)};else if(typeof MessageChannel<"u"){var Kt=new MessageChannel,cn=Kt.port2;Kt.port1.onmessage=tn,_t=function(){cn.postMessage(null)}}else _t=function(){Tt(tn,0)};function an(on){Wt=on,Gt||(Gt=!0,_t())}function mn(on,yn){At=Tt(function(){on(_e.unstable_now())},yn)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(on){on.callback=null},_e.unstable_continueExecution=function(){ft||dt||(ft=!0,an(It))},_e.unstable_forceFrameRate=function(on){0>on||125<on?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):kt=0<on?Math.floor(1e3/on):5},_e.unstable_getCurrentPriorityLevel=function(){return lt},_e.unstable_getFirstCallbackNode=function(){return b(st)},_e.unstable_next=function(on){switch(lt){case 1:case 2:case 3:var yn=3;break;default:yn=lt}var fn=lt;lt=yn;try{return on()}finally{lt=fn}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(on,yn){switch(on){case 1:case 2:case 3:case 4:case 5:break;default:on=3}var fn=lt;lt=on;try{return yn()}finally{lt=fn}},_e.unstable_scheduleCallback=function(on,yn,fn){var sn=_e.unstable_now();switch(typeof fn=="object"&&fn!==null?(fn=fn.delay,fn=typeof fn=="number"&&0<fn?sn+fn:sn):fn=sn,on){case 1:var un=-1;break;case 2:un=250;break;case 5:un=1073741823;break;case 4:un=1e4;break;default:un=5e3}return un=fn+un,on={id:ct++,callback:yn,priorityLevel:on,startTime:fn,expirationTime:un,sortIndex:-1},fn>sn?(on.sortIndex=fn,et(at,on),b(st)===null&&on===b(at)&&(St?(pt(At),At=-1):St=!0,mn(Et,fn-sn))):(on.sortIndex=un,et(st,on),ft||dt||(ft=!0,an(It))),on},_e.unstable_shouldYield=Nt,_e.unstable_wrapCallback=function(on){var yn=lt;return function(){var fn=lt;lt=yn;try{return on.apply(this,arguments)}finally{lt=fn}}}})(scheduler_production_min);(function(_e){_e.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(_e){for(var et="https://reactjs.org/docs/error-decoder.html?invariant="+_e,b=1;b<arguments.length;b++)et+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+_e+"; visit "+et+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,et){ha(_e,et),ha(_e+"Capture",et)}function ha(_e,et){for(ea[_e]=et,_e=0;_e<et.length;_e++)da.add(et[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,et,b,tt){if(b!==null&&b.type===0)return!1;switch(typeof et){case"function":case"symbol":return!0;case"boolean":return tt?!1:b!==null?!b.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,et,b,tt){if(et===null||typeof et>"u"||pa(_e,et,b,tt))return!0;if(tt)return!1;if(b!==null)switch(b.type){case 3:return!et;case 4:return et===!1;case 5:return isNaN(et);case 6:return isNaN(et)||1>et}return!1}function v$1(_e,et,b,tt,nt,rt,it){this.acceptsBooleans=et===2||et===3||et===4,this.attributeName=tt,this.attributeNamespace=nt,this.mustUseProperty=b,this.propertyName=_e,this.type=et,this.sanitizeURL=rt,this.removeEmptyString=it}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$1[_e]=new v$1(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var et=_e[0];z$1[et]=new v$1(et,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$1[_e]=new v$1(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$1[_e]=new v$1(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$1[_e]=new v$1(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$1[_e]=new v$1(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$1[_e]=new v$1(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$1[_e]=new v$1(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$1[_e]=new v$1(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var et=_e.replace(ra,sa);z$1[et]=new v$1(et,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var et=_e.replace(ra,sa);z$1[et]=new v$1(et,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var et=_e.replace(ra,sa);z$1[et]=new v$1(et,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$1[_e]=new v$1(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$1[_e]=new v$1(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,et,b,tt){var nt=z$1.hasOwnProperty(et)?z$1[et]:null;(nt!==null?nt.type!==0:tt||!(2<et.length)||et[0]!=="o"&&et[0]!=="O"||et[1]!=="n"&&et[1]!=="N")&&(qa(et,b,nt,tt)&&(b=null),tt||nt===null?oa(et)&&(b===null?_e.removeAttribute(et):_e.setAttribute(et,""+b)):nt.mustUseProperty?_e[nt.propertyName]=b===null?nt.type===3?!1:"":b:(et=nt.attributeName,tt=nt.attributeNamespace,b===null?_e.removeAttribute(et):(nt=nt.type,b=nt===3||nt===4&&b===!0?"":""+b,tt?_e.setAttributeNS(tt,et,b):_e.setAttribute(et,b))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$1=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(b){var et=b.stack.trim().match(/\n( *(at )?)/);La=et&&et[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,et){if(!_e||Na)return"";Na=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(et)if(et=function(){throw Error()},Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(at){var tt=at}Reflect.construct(_e,[],et)}else{try{et.call()}catch(at){tt=at}_e.call(et.prototype)}else{try{throw Error()}catch(at){tt=at}_e()}}catch(at){if(at&&tt&&typeof at.stack=="string"){for(var nt=at.stack.split(`
`),rt=tt.stack.split(`
`),it=nt.length-1,ot=rt.length-1;1<=it&&0<=ot&&nt[it]!==rt[ot];)ot--;for(;1<=it&&0<=ot;it--,ot--)if(nt[it]!==rt[ot]){if(it!==1||ot!==1)do if(it--,ot--,0>ot||nt[it]!==rt[ot]){var st=`
`+nt[it].replace(" at new "," at ");return _e.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",_e.displayName)),st}while(1<=it&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=b}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var et=_e.render;return _e=_e.displayName,_e||(_e=et.displayName||et.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return et=_e.displayName||null,et!==null?et:Qa(_e.type)||"Memo";case Ha:et=_e._payload,_e=_e._init;try{return Qa(_e(et))}catch{}}return null}function Ra(_e){var et=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(et.displayName||"Context")+".Consumer";case 10:return(et._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=et.render,_e=_e.displayName||_e.name||"",et.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return et;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(et);case 8:return et===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var et=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(et==="checkbox"||et==="radio")}function Ua(_e){var et=Ta(_e)?"checked":"value",b=Object.getOwnPropertyDescriptor(_e.constructor.prototype,et),tt=""+_e[et];if(!_e.hasOwnProperty(et)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var nt=b.get,rt=b.set;return Object.defineProperty(_e,et,{configurable:!0,get:function(){return nt.call(this)},set:function(it){tt=""+it,rt.call(this,it)}}),Object.defineProperty(_e,et,{enumerable:b.enumerable}),{getValue:function(){return tt},setValue:function(it){tt=""+it},stopTracking:function(){_e._valueTracker=null,delete _e[et]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var et=_e._valueTracker;if(!et)return!0;var b=et.getValue(),tt="";return _e&&(tt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=tt,_e!==b?(et.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,et){var b=et.checked;return A$1({},et,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??_e._wrapperState.initialChecked})}function Za(_e,et){var b=et.defaultValue==null?"":et.defaultValue,tt=et.checked!=null?et.checked:et.defaultChecked;b=Sa(et.value!=null?et.value:b),_e._wrapperState={initialChecked:tt,initialValue:b,controlled:et.type==="checkbox"||et.type==="radio"?et.checked!=null:et.value!=null}}function ab(_e,et){et=et.checked,et!=null&&ta(_e,"checked",et,!1)}function bb(_e,et){ab(_e,et);var b=Sa(et.value),tt=et.type;if(b!=null)tt==="number"?(b===0&&_e.value===""||_e.value!=b)&&(_e.value=""+b):_e.value!==""+b&&(_e.value=""+b);else if(tt==="submit"||tt==="reset"){_e.removeAttribute("value");return}et.hasOwnProperty("value")?cb(_e,et.type,b):et.hasOwnProperty("defaultValue")&&cb(_e,et.type,Sa(et.defaultValue)),et.checked==null&&et.defaultChecked!=null&&(_e.defaultChecked=!!et.defaultChecked)}function db(_e,et,b){if(et.hasOwnProperty("value")||et.hasOwnProperty("defaultValue")){var tt=et.type;if(!(tt!=="submit"&&tt!=="reset"||et.value!==void 0&&et.value!==null))return;et=""+_e._wrapperState.initialValue,b||et===_e.value||(_e.value=et),_e.defaultValue=et}b=_e.name,b!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,b!==""&&(_e.name=b)}function cb(_e,et,b){(et!=="number"||Xa(_e.ownerDocument)!==_e)&&(b==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+b&&(_e.defaultValue=""+b))}var eb=Array.isArray;function fb(_e,et,b,tt){if(_e=_e.options,et){et={};for(var nt=0;nt<b.length;nt++)et["$"+b[nt]]=!0;for(b=0;b<_e.length;b++)nt=et.hasOwnProperty("$"+_e[b].value),_e[b].selected!==nt&&(_e[b].selected=nt),nt&&tt&&(_e[b].defaultSelected=!0)}else{for(b=""+Sa(b),et=null,nt=0;nt<_e.length;nt++){if(_e[nt].value===b){_e[nt].selected=!0,tt&&(_e[nt].defaultSelected=!0);return}et!==null||_e[nt].disabled||(et=_e[nt])}et!==null&&(et.selected=!0)}}function gb(_e,et){if(et.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},et,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,et){var b=et.value;if(b==null){if(b=et.children,et=et.defaultValue,b!=null){if(et!=null)throw Error(p$1(92));if(eb(b)){if(1<b.length)throw Error(p$1(93));b=b[0]}et=b}et==null&&(et=""),b=et}_e._wrapperState={initialValue:Sa(b)}}function ib(_e,et){var b=Sa(et.value),tt=Sa(et.defaultValue);b!=null&&(b=""+b,b!==_e.value&&(_e.value=b),et.defaultValue==null&&_e.defaultValue!==b&&(_e.defaultValue=b)),tt!=null&&(_e.defaultValue=""+tt)}function jb(_e){var et=_e.textContent;et===_e._wrapperState.initialValue&&et!==""&&et!==null&&(_e.value=et)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,et){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(et):_e==="http://www.w3.org/2000/svg"&&et==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(et,b,tt,nt){MSApp.execUnsafeLocalFunction(function(){return _e(et,b,tt,nt)})}:_e}(function(_e,et){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=et;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+et.valueOf().toString()+"</svg>",et=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;et.firstChild;)_e.appendChild(et.firstChild)}});function ob(_e,et){if(et){var b=_e.firstChild;if(b&&b===_e.lastChild&&b.nodeType===3){b.nodeValue=et;return}}_e.textContent=et}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(et){et=et+_e.charAt(0).toUpperCase()+_e.substring(1),pb[et]=pb[_e]})});function rb(_e,et,b){return et==null||typeof et=="boolean"||et===""?"":b||typeof et!="number"||et===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+et).trim():et+"px"}function sb(_e,et){_e=_e.style;for(var b in et)if(et.hasOwnProperty(b)){var tt=b.indexOf("--")===0,nt=rb(b,et[b],tt);b==="float"&&(b="cssFloat"),tt?_e.setProperty(b,nt):_e[b]=nt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,et){if(et){if(tb[_e]&&(et.children!=null||et.dangerouslySetInnerHTML!=null))throw Error(p$1(137,_e));if(et.dangerouslySetInnerHTML!=null){if(et.children!=null)throw Error(p$1(60));if(typeof et.dangerouslySetInnerHTML!="object"||!("__html"in et.dangerouslySetInnerHTML))throw Error(p$1(61))}if(et.style!=null&&typeof et.style!="object")throw Error(p$1(62))}}function vb(_e,et){if(_e.indexOf("-")===-1)return typeof et.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$1(280));var et=_e.stateNode;et&&(et=Db(et),yb(_e.stateNode,_e.type,et))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,et=Ab;if(Ab=zb=null,Bb(_e),et)for(_e=0;_e<et.length;_e++)Bb(et[_e])}}function Gb(_e,et){return _e(et)}function Hb(){}var Ib=!1;function Jb(_e,et,b){if(Ib)return _e(et,b);Ib=!0;try{return Gb(_e,et,b)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,et){var b=_e.stateNode;if(b===null)return null;var tt=Db(b);if(tt===null)return null;b=tt[et];e:switch(et){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(_e=_e.type,tt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!tt;break e;default:_e=!1}if(_e)return null;if(b&&typeof b!="function")throw Error(p$1(231,et,typeof b));return b}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,et,b,tt,nt,rt,it,ot,st){var at=Array.prototype.slice.call(arguments,3);try{et.apply(b,at)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,et,b,tt,nt,rt,it,ot,st){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,et,b,tt,nt,rt,it,ot,st){if(Tb.apply(this,arguments),Ob){if(Ob){var at=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=at)}}function Vb(_e){var et=_e,b=_e;if(_e.alternate)for(;et.return;)et=et.return;else{_e=et;do et=_e,et.flags&4098&&(b=et.return),_e=et.return;while(_e)}return et.tag===3?b:null}function Wb(_e){if(_e.tag===13){var et=_e.memoizedState;if(et===null&&(_e=_e.alternate,_e!==null&&(et=_e.memoizedState)),et!==null)return et.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$1(188))}function Yb(_e){var et=_e.alternate;if(!et){if(et=Vb(_e),et===null)throw Error(p$1(188));return et!==_e?null:_e}for(var b=_e,tt=et;;){var nt=b.return;if(nt===null)break;var rt=nt.alternate;if(rt===null){if(tt=nt.return,tt!==null){b=tt;continue}break}if(nt.child===rt.child){for(rt=nt.child;rt;){if(rt===b)return Xb(nt),_e;if(rt===tt)return Xb(nt),et;rt=rt.sibling}throw Error(p$1(188))}if(b.return!==tt.return)b=nt,tt=rt;else{for(var it=!1,ot=nt.child;ot;){if(ot===b){it=!0,b=nt,tt=rt;break}if(ot===tt){it=!0,tt=nt,b=rt;break}ot=ot.sibling}if(!it){for(ot=rt.child;ot;){if(ot===b){it=!0,b=rt,tt=nt;break}if(ot===tt){it=!0,tt=rt,b=nt;break}ot=ot.sibling}if(!it)throw Error(p$1(189))}}if(b.alternate!==tt)throw Error(p$1(190))}if(b.tag!==3)throw Error(p$1(188));return b.stateNode.current===b?_e:et}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var et=$b(_e);if(et!==null)return et;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,et){var b=_e.pendingLanes;if(b===0)return 0;var tt=0,nt=_e.suspendedLanes,rt=_e.pingedLanes,it=b&268435455;if(it!==0){var ot=it&~nt;ot!==0?tt=tc(ot):(rt&=it,rt!==0&&(tt=tc(rt)))}else it=b&~nt,it!==0?tt=tc(it):rt!==0&&(tt=tc(rt));if(tt===0)return 0;if(et!==0&&et!==tt&&!(et&nt)&&(nt=tt&-tt,rt=et&-et,nt>=rt||nt===16&&(rt&4194240)!==0))return et;if(tt&4&&(tt|=b&16),et=_e.entangledLanes,et!==0)for(_e=_e.entanglements,et&=tt;0<et;)b=31-oc(et),nt=1<<b,tt|=_e[b],et&=~nt;return tt}function vc(_e,et){switch(_e){case 1:case 2:case 4:return et+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,et){for(var b=_e.suspendedLanes,tt=_e.pingedLanes,nt=_e.expirationTimes,rt=_e.pendingLanes;0<rt;){var it=31-oc(rt),ot=1<<it,st=nt[it];st===-1?(!(ot&b)||ot&tt)&&(nt[it]=vc(ot,et)):st<=et&&(_e.expiredLanes|=ot),rt&=~ot}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var et=[],b=0;31>b;b++)et.push(_e);return et}function Ac(_e,et,b){_e.pendingLanes|=et,et!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,et=31-oc(et),_e[et]=b}function Bc(_e,et){var b=_e.pendingLanes&~et;_e.pendingLanes=et,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=et,_e.mutableReadLanes&=et,_e.entangledLanes&=et,et=_e.entanglements;var tt=_e.eventTimes;for(_e=_e.expirationTimes;0<b;){var nt=31-oc(b),rt=1<<nt;et[nt]=0,tt[nt]=-1,_e[nt]=-1,b&=~rt}}function Cc(_e,et){var b=_e.entangledLanes|=et;for(_e=_e.entanglements;b;){var tt=31-oc(b),nt=1<<tt;nt&et|_e[tt]&et&&(_e[tt]|=et),b&=~nt}}var C$1=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,et){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(et.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(et.pointerId)}}function Tc(_e,et,b,tt,nt,rt){return _e===null||_e.nativeEvent!==rt?(_e={blockedOn:et,domEventName:b,eventSystemFlags:tt,nativeEvent:rt,targetContainers:[nt]},et!==null&&(et=Cb(et),et!==null&&Fc(et)),_e):(_e.eventSystemFlags|=tt,et=_e.targetContainers,nt!==null&&et.indexOf(nt)===-1&&et.push(nt),_e)}function Uc(_e,et,b,tt,nt){switch(et){case"focusin":return Lc=Tc(Lc,_e,et,b,tt,nt),!0;case"dragenter":return Mc=Tc(Mc,_e,et,b,tt,nt),!0;case"mouseover":return Nc=Tc(Nc,_e,et,b,tt,nt),!0;case"pointerover":var rt=nt.pointerId;return Oc.set(rt,Tc(Oc.get(rt)||null,_e,et,b,tt,nt)),!0;case"gotpointercapture":return rt=nt.pointerId,Pc.set(rt,Tc(Pc.get(rt)||null,_e,et,b,tt,nt)),!0}return!1}function Vc(_e){var et=Wc(_e.target);if(et!==null){var b=Vb(et);if(b!==null){if(et=b.tag,et===13){if(et=Wb(b),et!==null){_e.blockedOn=et,Ic(_e.priority,function(){Gc(b)});return}}else if(et===3&&b.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var et=_e.targetContainers;0<et.length;){var b=Yc(_e.domEventName,_e.eventSystemFlags,et[0],_e.nativeEvent);if(b===null){b=_e.nativeEvent;var tt=new b.constructor(b.type,b);wb=tt,b.target.dispatchEvent(tt),wb=null}else return et=Cb(b),et!==null&&Fc(et),_e.blockedOn=b,!1;et.shift()}return!0}function Zc(_e,et,b){Xc(_e)&&b.delete(et)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,et){_e.blockedOn===et&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function et(nt){return ad(nt,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var b=1;b<Kc.length;b++){var tt=Kc[b];tt.blockedOn===_e&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(et),Pc.forEach(et),b=0;b<Qc.length;b++)tt=Qc[b],tt.blockedOn===_e&&(tt.blockedOn=null);for(;0<Qc.length&&(b=Qc[0],b.blockedOn===null);)Vc(b),b.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_e,et,b,tt){var nt=C$1,rt=cd.transition;cd.transition=null;try{C$1=1,fd(_e,et,b,tt)}finally{C$1=nt,cd.transition=rt}}function gd(_e,et,b,tt){var nt=C$1,rt=cd.transition;cd.transition=null;try{C$1=4,fd(_e,et,b,tt)}finally{C$1=nt,cd.transition=rt}}function fd(_e,et,b,tt){if(dd){var nt=Yc(_e,et,b,tt);if(nt===null)hd(_e,et,tt,id,b),Sc(_e,tt);else if(Uc(nt,_e,et,b,tt))tt.stopPropagation();else if(Sc(_e,tt),et&4&&-1<Rc.indexOf(_e)){for(;nt!==null;){var rt=Cb(nt);if(rt!==null&&Ec(rt),rt=Yc(_e,et,b,tt),rt===null&&hd(_e,et,tt,id,b),rt===nt)break;nt=rt}nt!==null&&tt.stopPropagation()}else hd(_e,et,tt,null,b)}}var id=null;function Yc(_e,et,b,tt){if(id=null,_e=xb(tt),_e=Wc(_e),_e!==null)if(et=Vb(_e),et===null)_e=null;else if(b=et.tag,b===13){if(_e=Wb(et),_e!==null)return _e;_e=null}else if(b===3){if(et.stateNode.current.memoizedState.isDehydrated)return et.tag===3?et.stateNode.containerInfo:null;_e=null}else et!==_e&&(_e=null);return id=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,et=ld,b=et.length,tt,nt="value"in kd?kd.value:kd.textContent,rt=nt.length;for(_e=0;_e<b&&et[_e]===nt[_e];_e++);var it=b-_e;for(tt=1;tt<=it&&et[b-tt]===nt[rt-tt];tt++);return md=nt.slice(_e,1<tt?1-tt:void 0)}function od(_e){var et=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&et===13&&(_e=13)):_e=et,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function et(b,tt,nt,rt,it){this._reactName=b,this._targetInst=nt,this.type=tt,this.nativeEvent=rt,this.target=it,this.currentTarget=null;for(var ot in _e)_e.hasOwnProperty(ot)&&(b=_e[ot],this[ot]=b?b(rt):rt[ot]);return this.isDefaultPrevented=(rt.defaultPrevented!=null?rt.defaultPrevented:rt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(et.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),et}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var et=this.nativeEvent;return et.getModifierState?et.getModifierState(_e):(_e=Od[_e])?!!et[_e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_e){if(_e.key){var et=Md[_e.key]||_e.key;if(et!=="Unidentified")return et}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(_e,et){switch(_e){case"keyup":return $d.indexOf(et.keyCode)!==-1;case"keydown":return et.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,et){switch(_e){case"compositionend":return he(et);case"keypress":return et.which!==32?null:(fe=!0,ee);case"textInput":return _e=et.data,_e===ee&&fe?null:_e;default:return null}}function ke(_e,et){if(ie)return _e==="compositionend"||!ae&&ge(_e,et)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(et.ctrlKey||et.altKey||et.metaKey)||et.ctrlKey&&et.altKey){if(et.char&&1<et.char.length)return et.char;if(et.which)return String.fromCharCode(et.which)}return null;case"compositionend":return de&&et.locale!=="ko"?null:et.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var et=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return et==="input"?!!le[_e.type]:et==="textarea"}function ne(_e,et,b,tt){Eb(tt),et=oe(et,"onChange"),0<et.length&&(b=new td("onChange","change",null,b,tt),_e.push({event:b,listeners:et}))}var pe=null,qe=null;function re(_e){se(_e,0)}function te(_e){var et=ue(_e);if(Wa(et))return _e}function ve(_e,et){if(_e==="change")return et}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_e){if(_e.propertyName==="value"&&te(qe)){var et=[];ne(et,qe,_e,xb(_e)),Jb(re,et)}}function Ce(_e,et,b){_e==="focusin"?(Ae(),pe=et,qe=b,pe.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te(qe)}function Ee(_e,et){if(_e==="click")return te(et)}function Fe(_e,et){if(_e==="input"||_e==="change")return te(et)}function Ge(_e,et){return _e===et&&(_e!==0||1/_e===1/et)||_e!==_e&&et!==et}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,et){if(He(_e,et))return!0;if(typeof _e!="object"||_e===null||typeof et!="object"||et===null)return!1;var b=Object.keys(_e),tt=Object.keys(et);if(b.length!==tt.length)return!1;for(tt=0;tt<b.length;tt++){var nt=b[tt];if(!ja.call(et,nt)||!He(_e[nt],et[nt]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,et){var b=Je(_e);_e=0;for(var tt;b;){if(b.nodeType===3){if(tt=_e+b.textContent.length,_e<=et&&tt>=et)return{node:b,offset:et-_e};_e=tt}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Je(b)}}function Le(_e,et){return _e&&et?_e===et?!0:_e&&_e.nodeType===3?!1:et&&et.nodeType===3?Le(_e,et.parentNode):"contains"in _e?_e.contains(et):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(et)&16):!1:!1}function Me(){for(var _e=window,et=Xa();et instanceof _e.HTMLIFrameElement;){try{var b=typeof et.contentWindow.location.href=="string"}catch{b=!1}if(b)_e=et.contentWindow;else break;et=Xa(_e.document)}return et}function Ne(_e){var et=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return et&&(et==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||et==="textarea"||_e.contentEditable==="true")}function Oe(_e){var et=Me(),b=_e.focusedElem,tt=_e.selectionRange;if(et!==b&&b&&b.ownerDocument&&Le(b.ownerDocument.documentElement,b)){if(tt!==null&&Ne(b)){if(et=tt.start,_e=tt.end,_e===void 0&&(_e=et),"selectionStart"in b)b.selectionStart=et,b.selectionEnd=Math.min(_e,b.value.length);else if(_e=(et=b.ownerDocument||document)&&et.defaultView||window,_e.getSelection){_e=_e.getSelection();var nt=b.textContent.length,rt=Math.min(tt.start,nt);tt=tt.end===void 0?rt:Math.min(tt.end,nt),!_e.extend&&rt>tt&&(nt=tt,tt=rt,rt=nt),nt=Ke(b,rt);var it=Ke(b,tt);nt&&it&&(_e.rangeCount!==1||_e.anchorNode!==nt.node||_e.anchorOffset!==nt.offset||_e.focusNode!==it.node||_e.focusOffset!==it.offset)&&(et=et.createRange(),et.setStart(nt.node,nt.offset),_e.removeAllRanges(),rt>tt?(_e.addRange(et),_e.extend(it.node,it.offset)):(et.setEnd(it.node,it.offset),_e.addRange(et)))}}for(et=[],_e=b;_e=_e.parentNode;)_e.nodeType===1&&et.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<et.length;b++)_e=et[b],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_e,et,b){var tt=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(et=new td("onSelect","select",null,et,b),_e.push({event:et,listeners:tt}),et.target=Qe)))}function Ve(_e,et){var b={};return b[_e.toLowerCase()]=et.toLowerCase(),b["Webkit"+_e]="webkit"+et,b["Moz"+_e]="moz"+et,b}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var et=We[_e],b;for(b in et)if(et.hasOwnProperty(b)&&b in Ye)return Xe[_e]=et[b];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,et){df.set(_e,et),fa(et,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,et,b){var tt=_e.type||"unknown-event";_e.currentTarget=b,Ub(tt,et,void 0,_e),_e.currentTarget=null}function se(_e,et){et=(et&4)!==0;for(var b=0;b<_e.length;b++){var tt=_e[b],nt=tt.event;tt=tt.listeners;e:{var rt=void 0;if(et)for(var it=tt.length-1;0<=it;it--){var ot=tt[it],st=ot.instance,at=ot.currentTarget;if(ot=ot.listener,st!==rt&&nt.isPropagationStopped())break e;nf(nt,ot,at),rt=st}else for(it=0;it<tt.length;it++){if(ot=tt[it],st=ot.instance,at=ot.currentTarget,ot=ot.listener,st!==rt&&nt.isPropagationStopped())break e;nf(nt,ot,at),rt=st}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D(_e,et){var b=et[of];b===void 0&&(b=et[of]=new Set);var tt=_e+"__bubble";b.has(tt)||(pf(et,_e,2,!1),b.add(tt))}function qf(_e,et,b){var tt=0;et&&(tt|=4),pf(b,_e,tt,et)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(b){b!=="selectionchange"&&(mf.has(b)||qf(b,!1,_e),qf(b,!0,_e))});var et=_e.nodeType===9?_e:_e.ownerDocument;et===null||et[rf]||(et[rf]=!0,qf("selectionchange",!1,et))}}function pf(_e,et,b,tt){switch(jd(et)){case 1:var nt=ed;break;case 4:nt=gd;break;default:nt=fd}b=nt.bind(null,et,b,_e),nt=void 0,!Lb||et!=="touchstart"&&et!=="touchmove"&&et!=="wheel"||(nt=!0),tt?nt!==void 0?_e.addEventListener(et,b,{capture:!0,passive:nt}):_e.addEventListener(et,b,!0):nt!==void 0?_e.addEventListener(et,b,{passive:nt}):_e.addEventListener(et,b,!1)}function hd(_e,et,b,tt,nt){var rt=tt;if(!(et&1)&&!(et&2)&&tt!==null)e:for(;;){if(tt===null)return;var it=tt.tag;if(it===3||it===4){var ot=tt.stateNode.containerInfo;if(ot===nt||ot.nodeType===8&&ot.parentNode===nt)break;if(it===4)for(it=tt.return;it!==null;){var st=it.tag;if((st===3||st===4)&&(st=it.stateNode.containerInfo,st===nt||st.nodeType===8&&st.parentNode===nt))return;it=it.return}for(;ot!==null;){if(it=Wc(ot),it===null)return;if(st=it.tag,st===5||st===6){tt=rt=it;continue e}ot=ot.parentNode}}tt=tt.return}Jb(function(){var at=rt,ct=xb(b),ut=[];e:{var lt=df.get(_e);if(lt!==void 0){var dt=td,ft=_e;switch(_e){case"keypress":if(od(b)===0)break e;case"keydown":case"keyup":dt=Rd;break;case"focusin":ft="focus",dt=Fd;break;case"focusout":ft="blur",dt=Fd;break;case"beforeblur":case"afterblur":dt=Fd;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Vd;break;case $e:case af:case bf:dt=Hd;break;case cf:dt=Xd;break;case"scroll":dt=vd;break;case"wheel":dt=Zd;break;case"copy":case"cut":case"paste":dt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=Td}var St=(et&4)!==0,Tt=!St&&_e==="scroll",pt=St?lt!==null?lt+"Capture":null:lt;St=[];for(var gt=at,yt;gt!==null;){yt=gt;var Et=yt.stateNode;if(yt.tag===5&&Et!==null&&(yt=Et,pt!==null&&(Et=Kb(gt,pt),Et!=null&&St.push(tf(gt,Et,yt)))),Tt)break;gt=gt.return}0<St.length&&(lt=new dt(lt,ft,null,b,ct),ut.push({event:lt,listeners:St}))}}if(!(et&7)){e:{if(lt=_e==="mouseover"||_e==="pointerover",dt=_e==="mouseout"||_e==="pointerout",lt&&b!==wb&&(ft=b.relatedTarget||b.fromElement)&&(Wc(ft)||ft[uf]))break e;if((dt||lt)&&(lt=ct.window===ct?ct:(lt=ct.ownerDocument)?lt.defaultView||lt.parentWindow:window,dt?(ft=b.relatedTarget||b.toElement,dt=at,ft=ft?Wc(ft):null,ft!==null&&(Tt=Vb(ft),ft!==Tt||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(dt=null,ft=at),dt!==ft)){if(St=Bd,Et="onMouseLeave",pt="onMouseEnter",gt="mouse",(_e==="pointerout"||_e==="pointerover")&&(St=Td,Et="onPointerLeave",pt="onPointerEnter",gt="pointer"),Tt=dt==null?lt:ue(dt),yt=ft==null?lt:ue(ft),lt=new St(Et,gt+"leave",dt,b,ct),lt.target=Tt,lt.relatedTarget=yt,Et=null,Wc(ct)===at&&(St=new St(pt,gt+"enter",ft,b,ct),St.target=yt,St.relatedTarget=Tt,Et=St),Tt=Et,dt&&ft)t:{for(St=dt,pt=ft,gt=0,yt=St;yt;yt=vf(yt))gt++;for(yt=0,Et=pt;Et;Et=vf(Et))yt++;for(;0<gt-yt;)St=vf(St),gt--;for(;0<yt-gt;)pt=vf(pt),yt--;for(;gt--;){if(St===pt||pt!==null&&St===pt.alternate)break t;St=vf(St),pt=vf(pt)}St=null}else St=null;dt!==null&&wf(ut,lt,dt,St,!1),ft!==null&&Tt!==null&&wf(ut,Tt,ft,St,!0)}}e:{if(lt=at?ue(at):window,dt=lt.nodeName&&lt.nodeName.toLowerCase(),dt==="select"||dt==="input"&&lt.type==="file")var It=ve;else if(me(lt))if(we)It=Fe;else{It=De;var Gt=Ce}else(dt=lt.nodeName)&&dt.toLowerCase()==="input"&&(lt.type==="checkbox"||lt.type==="radio")&&(It=Ee);if(It&&(It=It(_e,at))){ne(ut,It,b,ct);break e}Gt&&Gt(_e,lt,at),_e==="focusout"&&(Gt=lt._wrapperState)&&Gt.controlled&&lt.type==="number"&&cb(lt,"number",lt.value)}switch(Gt=at?ue(at):window,_e){case"focusin":(me(Gt)||Gt.contentEditable==="true")&&(Qe=Gt,Re=at,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ut,b,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ut,b,ct)}var Wt;if(ae)e:{switch(_e){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else ie?ge(_e,b)&&(At="onCompositionEnd"):_e==="keydown"&&b.keyCode===229&&(At="onCompositionStart");At&&(de&&b.locale!=="ko"&&(ie||At!=="onCompositionStart"?At==="onCompositionEnd"&&ie&&(Wt=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Gt=oe(at,At),0<Gt.length&&(At=new Ld(At,_e,null,b,ct),ut.push({event:At,listeners:Gt}),Wt?At.data=Wt:(Wt=he(b),Wt!==null&&(At.data=Wt)))),(Wt=ce?je(_e,b):ke(_e,b))&&(at=oe(at,"onBeforeInput"),0<at.length&&(ct=new Ld("onBeforeInput","beforeinput",null,b,ct),ut.push({event:ct,listeners:at}),ct.data=Wt))}se(ut,et)})}function tf(_e,et,b){return{instance:_e,listener:et,currentTarget:b}}function oe(_e,et){for(var b=et+"Capture",tt=[];_e!==null;){var nt=_e,rt=nt.stateNode;nt.tag===5&&rt!==null&&(nt=rt,rt=Kb(_e,b),rt!=null&&tt.unshift(tf(_e,rt,nt)),rt=Kb(_e,et),rt!=null&&tt.push(tf(_e,rt,nt))),_e=_e.return}return tt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,et,b,tt,nt){for(var rt=et._reactName,it=[];b!==null&&b!==tt;){var ot=b,st=ot.alternate,at=ot.stateNode;if(st!==null&&st===tt)break;ot.tag===5&&at!==null&&(ot=at,nt?(st=Kb(b,rt),st!=null&&it.unshift(tf(b,st,ot))):nt||(st=Kb(b,rt),st!=null&&it.push(tf(b,st,ot)))),b=b.return}it.length!==0&&_e.push({event:et,listeners:it})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,et,b){if(et=zf(et),zf(_e)!==et&&b)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,et){return _e==="textarea"||_e==="noscript"||typeof et.children=="string"||typeof et.children=="number"||typeof et.dangerouslySetInnerHTML=="object"&&et.dangerouslySetInnerHTML!==null&&et.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,et){var b=et,tt=0;do{var nt=b.nextSibling;if(_e.removeChild(b),nt&&nt.nodeType===8)if(b=nt.data,b==="/$"){if(tt===0){_e.removeChild(nt),bd(et);return}tt--}else b!=="$"&&b!=="$?"&&b!=="$!"||tt++;b=nt}while(b);bd(et)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var et=_e.nodeType;if(et===1||et===3)break;if(et===8){if(et=_e.data,et==="$"||et==="$!"||et==="$?")break;if(et==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var et=0;_e;){if(_e.nodeType===8){var b=_e.data;if(b==="$"||b==="$!"||b==="$?"){if(et===0)return _e;et--}else b==="/$"&&et++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var et=_e[Of];if(et)return et;for(var b=_e.parentNode;b;){if(et=b[uf]||b[Of]){if(b=et.alternate,et.child!==null||b!==null&&b.child!==null)for(_e=Mf(_e);_e!==null;){if(b=_e[Of])return b;_e=Mf(_e)}return et}_e=b,b=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$1(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$1(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(_e,et){Tf++,Sf[Tf]=_e.current,_e.current=et}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,et){var b=_e.type.contextTypes;if(!b)return Vf;var tt=_e.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===et)return tt.__reactInternalMemoizedMaskedChildContext;var nt={},rt;for(rt in b)nt[rt]=et[rt];return tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=et,_e.__reactInternalMemoizedMaskedChildContext=nt),nt}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(_e,et,b){if(H$1.current!==Vf)throw Error(p$1(168));G(H$1,et),G(Wf,b)}function bg(_e,et,b){var tt=_e.stateNode;if(et=et.childContextTypes,typeof tt.getChildContext!="function")return b;tt=tt.getChildContext();for(var nt in tt)if(!(nt in et))throw Error(p$1(108,Ra(_e)||"Unknown",nt));return A$1({},b,tt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,_e),G(Wf,Wf.current),!0}function dg(_e,et,b){var tt=_e.stateNode;if(!tt)throw Error(p$1(169));b?(_e=bg(_e,et,Xf),tt.__reactInternalMemoizedMergedChildContext=_e,E$1(Wf),E$1(H$1),G(H$1,_e)):E$1(Wf),G(Wf,b)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,et=C$1;try{var b=eg;for(C$1=1;_e<b.length;_e++){var tt=b[_e];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(nt){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),nt}finally{C$1=et,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,et){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=et}function ug(_e,et,b){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var tt=rg;_e=sg;var nt=32-oc(tt)-1;tt&=~(1<<nt),b+=1;var rt=32-oc(et)+nt;if(30<rt){var it=nt-nt%5;rt=(tt&(1<<it)-1).toString(32),tt>>=it,nt-=it,rg=1<<32-oc(et)+nt|b<<nt|tt,sg=rt+_e}else rg=1<<rt|b<<nt|tt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(_e,et){var b=Bg(5,null,null,0);b.elementType="DELETED",b.stateNode=et,b.return=_e,et=_e.deletions,et===null?(_e.deletions=[b],_e.flags|=16):et.push(b)}function Cg(_e,et){switch(_e.tag){case 5:var b=_e.type;return et=et.nodeType!==1||b.toLowerCase()!==et.nodeName.toLowerCase()?null:et,et!==null?(_e.stateNode=et,xg=_e,yg=Lf(et.firstChild),!0):!1;case 6:return et=_e.pendingProps===""||et.nodeType!==3?null:et,et!==null?(_e.stateNode=et,xg=_e,yg=null,!0):!1;case 13:return et=et.nodeType!==8?null:et,et!==null?(b=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:et,treeContext:b,retryLane:1073741824},b=Bg(18,null,null,0),b.stateNode=et,b.return=_e,_e.child=b,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$1){var et=yg;if(et){var b=et;if(!Cg(_e,et)){if(Dg(_e))throw Error(p$1(418));et=Lf(b.nextSibling);var tt=xg;et&&Cg(_e,et)?Ag(tt,b):(_e.flags=_e.flags&-4097|2,I$1=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$1(418));_e.flags=_e.flags&-4097|2,I$1=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$1)return Fg(_e),I$1=!0,!1;var et;if((et=_e.tag!==3)&&!(et=_e.tag!==5)&&(et=_e.type,et=et!=="head"&&et!=="body"&&!Ef(_e.type,_e.memoizedProps)),et&&(et=yg)){if(Dg(_e))throw Hg(),Error(p$1(418));for(;et;)Ag(_e,et),et=Lf(et.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$1(317));e:{for(_e=_e.nextSibling,et=0;_e;){if(_e.nodeType===8){var b=_e.data;if(b==="/$"){if(et===0){yg=Lf(_e.nextSibling);break e}et--}else b!=="$"&&b!=="$!"&&b!=="$?"||et++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_e,et){if(_e&&_e.defaultProps){et=A$1({},et),_e=_e.defaultProps;for(var b in _e)et[b]===void 0&&(et[b]=_e[b]);return et}return et}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(_e){var et=Mg.current;E$1(Mg),_e._currentValue=et}function Sg(_e,et,b){for(;_e!==null;){var tt=_e.alternate;if((_e.childLanes&et)!==et?(_e.childLanes|=et,tt!==null&&(tt.childLanes|=et)):tt!==null&&(tt.childLanes&et)!==et&&(tt.childLanes|=et),_e===b)break;_e=_e.return}}function Tg(_e,et){Ng=_e,Pg=Og=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&et&&(Ug=!0),_e.firstContext=null)}function Vg(_e){var et=_e._currentValue;if(Pg!==_e)if(_e={context:_e,memoizedValue:et,next:null},Og===null){if(Ng===null)throw Error(p$1(308));Og=_e,Ng.dependencies={lanes:0,firstContext:_e}}else Og=Og.next=_e;return et}var Wg=null;function Xg(_e){Wg===null?Wg=[_e]:Wg.push(_e)}function Yg(_e,et,b,tt){var nt=et.interleaved;return nt===null?(b.next=b,Xg(et)):(b.next=nt.next,nt.next=b),et.interleaved=b,Zg(_e,tt)}function Zg(_e,et){_e.lanes|=et;var b=_e.alternate;for(b!==null&&(b.lanes|=et),b=_e,_e=_e.return;_e!==null;)_e.childLanes|=et,b=_e.alternate,b!==null&&(b.childLanes|=et),b=_e,_e=_e.return;return b.tag===3?b.stateNode:null}var $g=!1;function ah(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(_e,et){_e=_e.updateQueue,et.updateQueue===_e&&(et.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function ch(_e,et){return{eventTime:_e,lane:et,tag:0,payload:null,callback:null,next:null}}function dh(_e,et,b){var tt=_e.updateQueue;if(tt===null)return null;if(tt=tt.shared,K&2){var nt=tt.pending;return nt===null?et.next=et:(et.next=nt.next,nt.next=et),tt.pending=et,Zg(_e,b)}return nt=tt.interleaved,nt===null?(et.next=et,Xg(tt)):(et.next=nt.next,nt.next=et),tt.interleaved=et,Zg(_e,b)}function eh(_e,et,b){if(et=et.updateQueue,et!==null&&(et=et.shared,(b&4194240)!==0)){var tt=et.lanes;tt&=_e.pendingLanes,b|=tt,et.lanes=b,Cc(_e,b)}}function fh(_e,et){var b=_e.updateQueue,tt=_e.alternate;if(tt!==null&&(tt=tt.updateQueue,b===tt)){var nt=null,rt=null;if(b=b.firstBaseUpdate,b!==null){do{var it={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};rt===null?nt=rt=it:rt=rt.next=it,b=b.next}while(b!==null);rt===null?nt=rt=et:rt=rt.next=et}else nt=rt=et;b={baseState:tt.baseState,firstBaseUpdate:nt,lastBaseUpdate:rt,shared:tt.shared,effects:tt.effects},_e.updateQueue=b;return}_e=b.lastBaseUpdate,_e===null?b.firstBaseUpdate=et:_e.next=et,b.lastBaseUpdate=et}function gh(_e,et,b,tt){var nt=_e.updateQueue;$g=!1;var rt=nt.firstBaseUpdate,it=nt.lastBaseUpdate,ot=nt.shared.pending;if(ot!==null){nt.shared.pending=null;var st=ot,at=st.next;st.next=null,it===null?rt=at:it.next=at,it=st;var ct=_e.alternate;ct!==null&&(ct=ct.updateQueue,ot=ct.lastBaseUpdate,ot!==it&&(ot===null?ct.firstBaseUpdate=at:ot.next=at,ct.lastBaseUpdate=st))}if(rt!==null){var ut=nt.baseState;it=0,ct=at=st=null,ot=rt;do{var lt=ot.lane,dt=ot.eventTime;if((tt&lt)===lt){ct!==null&&(ct=ct.next={eventTime:dt,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var ft=_e,St=ot;switch(lt=et,dt=b,St.tag){case 1:if(ft=St.payload,typeof ft=="function"){ut=ft.call(dt,ut,lt);break e}ut=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=St.payload,lt=typeof ft=="function"?ft.call(dt,ut,lt):ft,lt==null)break e;ut=A$1({},ut,lt);break e;case 2:$g=!0}}ot.callback!==null&&ot.lane!==0&&(_e.flags|=64,lt=nt.effects,lt===null?nt.effects=[ot]:lt.push(ot))}else dt={eventTime:dt,lane:lt,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},ct===null?(at=ct=dt,st=ut):ct=ct.next=dt,it|=lt;if(ot=ot.next,ot===null){if(ot=nt.shared.pending,ot===null)break;lt=ot,ot=lt.next,lt.next=null,nt.lastBaseUpdate=lt,nt.shared.pending=null}}while(1);if(ct===null&&(st=ut),nt.baseState=st,nt.firstBaseUpdate=at,nt.lastBaseUpdate=ct,et=nt.shared.interleaved,et!==null){nt=et;do it|=nt.lane,nt=nt.next;while(nt!==et)}else rt===null&&(nt.shared.lanes=0);hh|=it,_e.lanes=it,_e.memoizedState=ut}}function ih(_e,et,b){if(_e=et.effects,et.effects=null,_e!==null)for(et=0;et<_e.length;et++){var tt=_e[et],nt=tt.callback;if(nt!==null){if(tt.callback=null,tt=b,typeof nt!="function")throw Error(p$1(191,nt));nt.call(tt)}}}var jh=new aa.Component().refs;function kh(_e,et,b,tt){et=_e.memoizedState,b=b(tt,et),b=b==null?et:A$1({},et,b),_e.memoizedState=b,_e.lanes===0&&(_e.updateQueue.baseState=b)}var nh={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,et,b){_e=_e._reactInternals;var tt=L$1(),nt=lh(_e),rt=ch(tt,nt);rt.payload=et,b!=null&&(rt.callback=b),et=dh(_e,rt,nt),et!==null&&(mh(et,_e,nt,tt),eh(et,_e,nt))},enqueueReplaceState:function(_e,et,b){_e=_e._reactInternals;var tt=L$1(),nt=lh(_e),rt=ch(tt,nt);rt.tag=1,rt.payload=et,b!=null&&(rt.callback=b),et=dh(_e,rt,nt),et!==null&&(mh(et,_e,nt,tt),eh(et,_e,nt))},enqueueForceUpdate:function(_e,et){_e=_e._reactInternals;var b=L$1(),tt=lh(_e),nt=ch(b,tt);nt.tag=2,et!=null&&(nt.callback=et),et=dh(_e,nt,tt),et!==null&&(mh(et,_e,tt,b),eh(et,_e,tt))}};function oh(_e,et,b,tt,nt,rt,it){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(tt,rt,it):et.prototype&&et.prototype.isPureReactComponent?!Ie(b,tt)||!Ie(nt,rt):!0}function ph(_e,et,b){var tt=!1,nt=Vf,rt=et.contextType;return typeof rt=="object"&&rt!==null?rt=Vg(rt):(nt=Zf(et)?Xf:H$1.current,tt=et.contextTypes,rt=(tt=tt!=null)?Yf(_e,nt):Vf),et=new et(b,rt),_e.memoizedState=et.state!==null&&et.state!==void 0?et.state:null,et.updater=nh,_e.stateNode=et,et._reactInternals=_e,tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=nt,_e.__reactInternalMemoizedMaskedChildContext=rt),et}function qh(_e,et,b,tt){_e=et.state,typeof et.componentWillReceiveProps=="function"&&et.componentWillReceiveProps(b,tt),typeof et.UNSAFE_componentWillReceiveProps=="function"&&et.UNSAFE_componentWillReceiveProps(b,tt),et.state!==_e&&nh.enqueueReplaceState(et,et.state,null)}function rh(_e,et,b,tt){var nt=_e.stateNode;nt.props=b,nt.state=_e.memoizedState,nt.refs=jh,ah(_e);var rt=et.contextType;typeof rt=="object"&&rt!==null?nt.context=Vg(rt):(rt=Zf(et)?Xf:H$1.current,nt.context=Yf(_e,rt)),nt.state=_e.memoizedState,rt=et.getDerivedStateFromProps,typeof rt=="function"&&(kh(_e,et,rt,b),nt.state=_e.memoizedState),typeof et.getDerivedStateFromProps=="function"||typeof nt.getSnapshotBeforeUpdate=="function"||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||(et=nt.state,typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount(),et!==nt.state&&nh.enqueueReplaceState(nt,nt.state,null),gh(_e,b,nt,tt),nt.state=_e.memoizedState),typeof nt.componentDidMount=="function"&&(_e.flags|=4194308)}function sh(_e,et,b){if(_e=b.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(p$1(309));var tt=b.stateNode}if(!tt)throw Error(p$1(147,_e));var nt=tt,rt=""+_e;return et!==null&&et.ref!==null&&typeof et.ref=="function"&&et.ref._stringRef===rt?et.ref:(et=function(it){var ot=nt.refs;ot===jh&&(ot=nt.refs={}),it===null?delete ot[rt]:ot[rt]=it},et._stringRef=rt,et)}if(typeof _e!="string")throw Error(p$1(284));if(!b._owner)throw Error(p$1(290,_e))}return _e}function th(_e,et){throw _e=Object.prototype.toString.call(et),Error(p$1(31,_e==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":_e))}function uh(_e){var et=_e._init;return et(_e._payload)}function vh(_e){function et(pt,gt){if(_e){var yt=pt.deletions;yt===null?(pt.deletions=[gt],pt.flags|=16):yt.push(gt)}}function b(pt,gt){if(!_e)return null;for(;gt!==null;)et(pt,gt),gt=gt.sibling;return null}function tt(pt,gt){for(pt=new Map;gt!==null;)gt.key!==null?pt.set(gt.key,gt):pt.set(gt.index,gt),gt=gt.sibling;return pt}function nt(pt,gt){return pt=wh(pt,gt),pt.index=0,pt.sibling=null,pt}function rt(pt,gt,yt){return pt.index=yt,_e?(yt=pt.alternate,yt!==null?(yt=yt.index,yt<gt?(pt.flags|=2,gt):yt):(pt.flags|=2,gt)):(pt.flags|=1048576,gt)}function it(pt){return _e&&pt.alternate===null&&(pt.flags|=2),pt}function ot(pt,gt,yt,Et){return gt===null||gt.tag!==6?(gt=xh(yt,pt.mode,Et),gt.return=pt,gt):(gt=nt(gt,yt),gt.return=pt,gt)}function st(pt,gt,yt,Et){var It=yt.type;return It===ya?ct(pt,gt,yt.props.children,Et,yt.key):gt!==null&&(gt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Ha&&uh(It)===gt.type)?(Et=nt(gt,yt.props),Et.ref=sh(pt,gt,yt),Et.return=pt,Et):(Et=yh(yt.type,yt.key,yt.props,null,pt.mode,Et),Et.ref=sh(pt,gt,yt),Et.return=pt,Et)}function at(pt,gt,yt,Et){return gt===null||gt.tag!==4||gt.stateNode.containerInfo!==yt.containerInfo||gt.stateNode.implementation!==yt.implementation?(gt=zh(yt,pt.mode,Et),gt.return=pt,gt):(gt=nt(gt,yt.children||[]),gt.return=pt,gt)}function ct(pt,gt,yt,Et,It){return gt===null||gt.tag!==7?(gt=Ah(yt,pt.mode,Et,It),gt.return=pt,gt):(gt=nt(gt,yt),gt.return=pt,gt)}function ut(pt,gt,yt){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return gt=xh(""+gt,pt.mode,yt),gt.return=pt,gt;if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case va:return yt=yh(gt.type,gt.key,gt.props,null,pt.mode,yt),yt.ref=sh(pt,null,gt),yt.return=pt,yt;case wa:return gt=zh(gt,pt.mode,yt),gt.return=pt,gt;case Ha:var Et=gt._init;return ut(pt,Et(gt._payload),yt)}if(eb(gt)||Ka(gt))return gt=Ah(gt,pt.mode,yt,null),gt.return=pt,gt;th(pt,gt)}return null}function lt(pt,gt,yt,Et){var It=gt!==null?gt.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number")return It!==null?null:ot(pt,gt,""+yt,Et);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return yt.key===It?st(pt,gt,yt,Et):null;case wa:return yt.key===It?at(pt,gt,yt,Et):null;case Ha:return It=yt._init,lt(pt,gt,It(yt._payload),Et)}if(eb(yt)||Ka(yt))return It!==null?null:ct(pt,gt,yt,Et,null);th(pt,yt)}return null}function dt(pt,gt,yt,Et,It){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return pt=pt.get(yt)||null,ot(gt,pt,""+Et,It);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:return pt=pt.get(Et.key===null?yt:Et.key)||null,st(gt,pt,Et,It);case wa:return pt=pt.get(Et.key===null?yt:Et.key)||null,at(gt,pt,Et,It);case Ha:var Gt=Et._init;return dt(pt,gt,yt,Gt(Et._payload),It)}if(eb(Et)||Ka(Et))return pt=pt.get(yt)||null,ct(gt,pt,Et,It,null);th(gt,Et)}return null}function ft(pt,gt,yt,Et){for(var It=null,Gt=null,Wt=gt,At=gt=0,kt=null;Wt!==null&&At<yt.length;At++){Wt.index>At?(kt=Wt,Wt=null):kt=Wt.sibling;var Vt=lt(pt,Wt,yt[At],Et);if(Vt===null){Wt===null&&(Wt=kt);break}_e&&Wt&&Vt.alternate===null&&et(pt,Wt),gt=rt(Vt,gt,At),Gt===null?It=Vt:Gt.sibling=Vt,Gt=Vt,Wt=kt}if(At===yt.length)return b(pt,Wt),I$1&&tg(pt,At),It;if(Wt===null){for(;At<yt.length;At++)Wt=ut(pt,yt[At],Et),Wt!==null&&(gt=rt(Wt,gt,At),Gt===null?It=Wt:Gt.sibling=Wt,Gt=Wt);return I$1&&tg(pt,At),It}for(Wt=tt(pt,Wt);At<yt.length;At++)kt=dt(Wt,pt,At,yt[At],Et),kt!==null&&(_e&&kt.alternate!==null&&Wt.delete(kt.key===null?At:kt.key),gt=rt(kt,gt,At),Gt===null?It=kt:Gt.sibling=kt,Gt=kt);return _e&&Wt.forEach(function(Nt){return et(pt,Nt)}),I$1&&tg(pt,At),It}function St(pt,gt,yt,Et){var It=Ka(yt);if(typeof It!="function")throw Error(p$1(150));if(yt=It.call(yt),yt==null)throw Error(p$1(151));for(var Gt=It=null,Wt=gt,At=gt=0,kt=null,Vt=yt.next();Wt!==null&&!Vt.done;At++,Vt=yt.next()){Wt.index>At?(kt=Wt,Wt=null):kt=Wt.sibling;var Nt=lt(pt,Wt,Vt.value,Et);if(Nt===null){Wt===null&&(Wt=kt);break}_e&&Wt&&Nt.alternate===null&&et(pt,Wt),gt=rt(Nt,gt,At),Gt===null?It=Nt:Gt.sibling=Nt,Gt=Nt,Wt=kt}if(Vt.done)return b(pt,Wt),I$1&&tg(pt,At),It;if(Wt===null){for(;!Vt.done;At++,Vt=yt.next())Vt=ut(pt,Vt.value,Et),Vt!==null&&(gt=rt(Vt,gt,At),Gt===null?It=Vt:Gt.sibling=Vt,Gt=Vt);return I$1&&tg(pt,At),It}for(Wt=tt(pt,Wt);!Vt.done;At++,Vt=yt.next())Vt=dt(Wt,pt,At,Vt.value,Et),Vt!==null&&(_e&&Vt.alternate!==null&&Wt.delete(Vt.key===null?At:Vt.key),gt=rt(Vt,gt,At),Gt===null?It=Vt:Gt.sibling=Vt,Gt=Vt);return _e&&Wt.forEach(function(tn){return et(pt,tn)}),I$1&&tg(pt,At),It}function Tt(pt,gt,yt,Et){if(typeof yt=="object"&&yt!==null&&yt.type===ya&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:e:{for(var It=yt.key,Gt=gt;Gt!==null;){if(Gt.key===It){if(It=yt.type,It===ya){if(Gt.tag===7){b(pt,Gt.sibling),gt=nt(Gt,yt.props.children),gt.return=pt,pt=gt;break e}}else if(Gt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Ha&&uh(It)===Gt.type){b(pt,Gt.sibling),gt=nt(Gt,yt.props),gt.ref=sh(pt,Gt,yt),gt.return=pt,pt=gt;break e}b(pt,Gt);break}else et(pt,Gt);Gt=Gt.sibling}yt.type===ya?(gt=Ah(yt.props.children,pt.mode,Et,yt.key),gt.return=pt,pt=gt):(Et=yh(yt.type,yt.key,yt.props,null,pt.mode,Et),Et.ref=sh(pt,gt,yt),Et.return=pt,pt=Et)}return it(pt);case wa:e:{for(Gt=yt.key;gt!==null;){if(gt.key===Gt)if(gt.tag===4&&gt.stateNode.containerInfo===yt.containerInfo&&gt.stateNode.implementation===yt.implementation){b(pt,gt.sibling),gt=nt(gt,yt.children||[]),gt.return=pt,pt=gt;break e}else{b(pt,gt);break}else et(pt,gt);gt=gt.sibling}gt=zh(yt,pt.mode,Et),gt.return=pt,pt=gt}return it(pt);case Ha:return Gt=yt._init,Tt(pt,gt,Gt(yt._payload),Et)}if(eb(yt))return ft(pt,gt,yt,Et);if(Ka(yt))return St(pt,gt,yt,Et);th(pt,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"?(yt=""+yt,gt!==null&&gt.tag===6?(b(pt,gt.sibling),gt=nt(gt,yt),gt.return=pt,pt=gt):(b(pt,gt),gt=xh(yt,pt.mode,Et),gt.return=pt,pt=gt),it(pt)):b(pt,gt)}return Tt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(_e){if(_e===Dh)throw Error(p$1(174));return _e}function Ih(_e,et){switch(G(Gh,et),G(Fh,_e),G(Eh,Dh),_e=et.nodeType,_e){case 9:case 11:et=(et=et.documentElement)?et.namespaceURI:lb(null,"");break;default:_e=_e===8?et.parentNode:et,et=_e.namespaceURI||null,_e=_e.tagName,et=lb(et,_e)}E$1(Eh),G(Eh,et)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(_e){Hh(Gh.current);var et=Hh(Eh.current),b=lb(et,_e.type);et!==b&&(G(Fh,_e),G(Eh,b))}function Lh(_e){Fh.current===_e&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(_e){for(var et=_e;et!==null;){if(et.tag===13){var b=et.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return et}else if(et.tag===19&&et.memoizedProps.revealOrder!==void 0){if(et.flags&128)return et}else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return null;et=et.return}et.sibling.return=et.return,et=et.sibling}return null}var Nh=[];function Oh(){for(var _e=0;_e<Nh.length;_e++)Nh[_e]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$1(321))}function Wh(_e,et){if(et===null)return!1;for(var b=0;b<et.length&&b<_e.length;b++)if(!He(_e[b],et[b]))return!1;return!0}function Xh(_e,et,b,tt,nt,rt){if(Rh=rt,N$1=et,et.memoizedState=null,et.updateQueue=null,et.lanes=0,Ph.current=_e===null||_e.memoizedState===null?Yh:Zh,_e=b(tt,nt),Th){rt=0;do{if(Th=!1,Uh=0,25<=rt)throw Error(p$1(301));rt+=1,P$1=O=null,et.updateQueue=null,Ph.current=$h,_e=b(tt,nt)}while(Th)}if(Ph.current=ai,et=O!==null&&O.next!==null,Rh=0,P$1=O=N$1=null,Sh=!1,et)throw Error(p$1(300));return _e}function bi(){var _e=Uh!==0;return Uh=0,_e}function ci(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=_e:P$1=P$1.next=_e,P$1}function di(){if(O===null){var _e=N$1.alternate;_e=_e!==null?_e.memoizedState:null}else _e=O.next;var et=P$1===null?N$1.memoizedState:P$1.next;if(et!==null)P$1=et,O=_e;else{if(_e===null)throw Error(p$1(310));O=_e,_e={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P$1===null?N$1.memoizedState=P$1=_e:P$1=P$1.next=_e}return P$1}function ei(_e,et){return typeof et=="function"?et(_e):et}function fi(_e){var et=di(),b=et.queue;if(b===null)throw Error(p$1(311));b.lastRenderedReducer=_e;var tt=O,nt=tt.baseQueue,rt=b.pending;if(rt!==null){if(nt!==null){var it=nt.next;nt.next=rt.next,rt.next=it}tt.baseQueue=nt=rt,b.pending=null}if(nt!==null){rt=nt.next,tt=tt.baseState;var ot=it=null,st=null,at=rt;do{var ct=at.lane;if((Rh&ct)===ct)st!==null&&(st=st.next={lane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),tt=at.hasEagerState?at.eagerState:_e(tt,at.action);else{var ut={lane:ct,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};st===null?(ot=st=ut,it=tt):st=st.next=ut,N$1.lanes|=ct,hh|=ct}at=at.next}while(at!==null&&at!==rt);st===null?it=tt:st.next=ot,He(tt,et.memoizedState)||(Ug=!0),et.memoizedState=tt,et.baseState=it,et.baseQueue=st,b.lastRenderedState=tt}if(_e=b.interleaved,_e!==null){nt=_e;do rt=nt.lane,N$1.lanes|=rt,hh|=rt,nt=nt.next;while(nt!==_e)}else nt===null&&(b.lanes=0);return[et.memoizedState,b.dispatch]}function gi(_e){var et=di(),b=et.queue;if(b===null)throw Error(p$1(311));b.lastRenderedReducer=_e;var tt=b.dispatch,nt=b.pending,rt=et.memoizedState;if(nt!==null){b.pending=null;var it=nt=nt.next;do rt=_e(rt,it.action),it=it.next;while(it!==nt);He(rt,et.memoizedState)||(Ug=!0),et.memoizedState=rt,et.baseQueue===null&&(et.baseState=rt),b.lastRenderedState=rt}return[rt,tt]}function hi(){}function ii(_e,et){var b=N$1,tt=di(),nt=et(),rt=!He(tt.memoizedState,nt);if(rt&&(tt.memoizedState=nt,Ug=!0),tt=tt.queue,ji(ki.bind(null,b,tt,_e),[_e]),tt.getSnapshot!==et||rt||P$1!==null&&P$1.memoizedState.tag&1){if(b.flags|=2048,li(9,mi.bind(null,b,tt,nt,et),void 0,null),R$1===null)throw Error(p$1(349));Rh&30||ni(b,et,nt)}return nt}function ni(_e,et,b){_e.flags|=16384,_e={getSnapshot:et,value:b},et=N$1.updateQueue,et===null?(et={lastEffect:null,stores:null},N$1.updateQueue=et,et.stores=[_e]):(b=et.stores,b===null?et.stores=[_e]:b.push(_e))}function mi(_e,et,b,tt){et.value=b,et.getSnapshot=tt,oi(et)&&pi(_e)}function ki(_e,et,b){return b(function(){oi(et)&&pi(_e)})}function oi(_e){var et=_e.getSnapshot;_e=_e.value;try{var b=et();return!He(_e,b)}catch{return!0}}function pi(_e){var et=Zg(_e,1);et!==null&&mh(et,_e,1,-1)}function qi(_e){var et=ci();return typeof _e=="function"&&(_e=_e()),et.memoizedState=et.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:_e},et.queue=_e,_e=_e.dispatch=ri.bind(null,N$1,_e),[et.memoizedState,_e]}function li(_e,et,b,tt){return _e={tag:_e,create:et,destroy:b,deps:tt,next:null},et=N$1.updateQueue,et===null?(et={lastEffect:null,stores:null},N$1.updateQueue=et,et.lastEffect=_e.next=_e):(b=et.lastEffect,b===null?et.lastEffect=_e.next=_e:(tt=b.next,b.next=_e,_e.next=tt,et.lastEffect=_e)),_e}function si(){return di().memoizedState}function ti(_e,et,b,tt){var nt=ci();N$1.flags|=_e,nt.memoizedState=li(1|et,b,void 0,tt===void 0?null:tt)}function ui(_e,et,b,tt){var nt=di();tt=tt===void 0?null:tt;var rt=void 0;if(O!==null){var it=O.memoizedState;if(rt=it.destroy,tt!==null&&Wh(tt,it.deps)){nt.memoizedState=li(et,b,rt,tt);return}}N$1.flags|=_e,nt.memoizedState=li(1|et,b,rt,tt)}function vi(_e,et){return ti(8390656,8,_e,et)}function ji(_e,et){return ui(2048,8,_e,et)}function wi(_e,et){return ui(4,2,_e,et)}function xi(_e,et){return ui(4,4,_e,et)}function yi(_e,et){if(typeof et=="function")return _e=_e(),et(_e),function(){et(null)};if(et!=null)return _e=_e(),et.current=_e,function(){et.current=null}}function zi(_e,et,b){return b=b!=null?b.concat([_e]):null,ui(4,4,yi.bind(null,et,_e),b)}function Ai(){}function Bi(_e,et){var b=di();et=et===void 0?null:et;var tt=b.memoizedState;return tt!==null&&et!==null&&Wh(et,tt[1])?tt[0]:(b.memoizedState=[_e,et],_e)}function Ci(_e,et){var b=di();et=et===void 0?null:et;var tt=b.memoizedState;return tt!==null&&et!==null&&Wh(et,tt[1])?tt[0]:(_e=_e(),b.memoizedState=[_e,et],_e)}function Di(_e,et,b){return Rh&21?(He(b,et)||(b=yc(),N$1.lanes|=b,hh|=b,_e.baseState=!0),et):(_e.baseState&&(_e.baseState=!1,Ug=!0),_e.memoizedState=b)}function Ei(_e,et){var b=C$1;C$1=b!==0&&4>b?b:4,_e(!0);var tt=Qh.transition;Qh.transition={};try{_e(!1),et()}finally{C$1=b,Qh.transition=tt}}function Fi(){return di().memoizedState}function Gi(_e,et,b){var tt=lh(_e);if(b={lane:tt,action:b,hasEagerState:!1,eagerState:null,next:null},Hi(_e))Ii(et,b);else if(b=Yg(_e,et,b,tt),b!==null){var nt=L$1();mh(b,_e,tt,nt),Ji(b,et,tt)}}function ri(_e,et,b){var tt=lh(_e),nt={lane:tt,action:b,hasEagerState:!1,eagerState:null,next:null};if(Hi(_e))Ii(et,nt);else{var rt=_e.alternate;if(_e.lanes===0&&(rt===null||rt.lanes===0)&&(rt=et.lastRenderedReducer,rt!==null))try{var it=et.lastRenderedState,ot=rt(it,b);if(nt.hasEagerState=!0,nt.eagerState=ot,He(ot,it)){var st=et.interleaved;st===null?(nt.next=nt,Xg(et)):(nt.next=st.next,st.next=nt),et.interleaved=nt;return}}catch{}finally{}b=Yg(_e,et,nt,tt),b!==null&&(nt=L$1(),mh(b,_e,tt,nt),Ji(b,et,tt))}}function Hi(_e){var et=_e.alternate;return _e===N$1||et!==null&&et===N$1}function Ii(_e,et){Th=Sh=!0;var b=_e.pending;b===null?et.next=et:(et.next=b.next,b.next=et),_e.pending=et}function Ji(_e,et,b){if(b&4194240){var tt=et.lanes;tt&=_e.pendingLanes,b|=tt,et.lanes=b,Cc(_e,b)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(_e,et){return ci().memoizedState=[_e,et===void 0?null:et],_e},useContext:Vg,useEffect:vi,useImperativeHandle:function(_e,et,b){return b=b!=null?b.concat([_e]):null,ti(4194308,4,yi.bind(null,et,_e),b)},useLayoutEffect:function(_e,et){return ti(4194308,4,_e,et)},useInsertionEffect:function(_e,et){return ti(4,2,_e,et)},useMemo:function(_e,et){var b=ci();return et=et===void 0?null:et,_e=_e(),b.memoizedState=[_e,et],_e},useReducer:function(_e,et,b){var tt=ci();return et=b!==void 0?b(et):et,tt.memoizedState=tt.baseState=et,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:et},tt.queue=_e,_e=_e.dispatch=Gi.bind(null,N$1,_e),[tt.memoizedState,_e]},useRef:function(_e){var et=ci();return _e={current:_e},et.memoizedState=_e},useState:qi,useDebugValue:Ai,useDeferredValue:function(_e){return ci().memoizedState=_e},useTransition:function(){var _e=qi(!1),et=_e[0];return _e=Ei.bind(null,_e[1]),ci().memoizedState=_e,[et,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,et,b){var tt=N$1,nt=ci();if(I$1){if(b===void 0)throw Error(p$1(407));b=b()}else{if(b=et(),R$1===null)throw Error(p$1(349));Rh&30||ni(tt,et,b)}nt.memoizedState=b;var rt={value:b,getSnapshot:et};return nt.queue=rt,vi(ki.bind(null,tt,rt,_e),[_e]),tt.flags|=2048,li(9,mi.bind(null,tt,rt,b,et),void 0,null),b},useId:function(){var _e=ci(),et=R$1.identifierPrefix;if(I$1){var b=sg,tt=rg;b=(tt&~(1<<32-oc(tt)-1)).toString(32)+b,et=":"+et+"R"+b,b=Uh++,0<b&&(et+="H"+b.toString(32)),et+=":"}else b=Vh++,et=":"+et+"r"+b.toString(32)+":";return _e.memoizedState=et},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(_e){var et=di();return Di(et,O.memoizedState,_e)},useTransition:function(){var _e=fi(ei)[0],et=di().memoizedState;return[_e,et]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(_e){var et=di();return O===null?et.memoizedState=_e:Di(et,O.memoizedState,_e)},useTransition:function(){var _e=gi(ei)[0],et=di().memoizedState;return[_e,et]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(_e,et){try{var b="",tt=et;do b+=Pa(tt),tt=tt.return;while(tt);var nt=b}catch(rt){nt=`
Error generating stack: `+rt.message+`
`+rt.stack}return{value:_e,source:et,stack:nt,digest:null}}function Li(_e,et,b){return{value:_e,source:null,stack:b??null,digest:et??null}}function Mi(_e,et){try{console.error(et.value)}catch(b){setTimeout(function(){throw b})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(_e,et,b){b=ch(-1,b),b.tag=3,b.payload={element:null};var tt=et.value;return b.callback=function(){Pi||(Pi=!0,Qi=tt),Mi(_e,et)},b}function Ri(_e,et,b){b=ch(-1,b),b.tag=3;var tt=_e.type.getDerivedStateFromError;if(typeof tt=="function"){var nt=et.value;b.payload=function(){return tt(nt)},b.callback=function(){Mi(_e,et)}}var rt=_e.stateNode;return rt!==null&&typeof rt.componentDidCatch=="function"&&(b.callback=function(){Mi(_e,et),typeof tt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var it=et.stack;this.componentDidCatch(et.value,{componentStack:it!==null?it:""})}),b}function Ti(_e,et,b){var tt=_e.pingCache;if(tt===null){tt=_e.pingCache=new Ni;var nt=new Set;tt.set(et,nt)}else nt=tt.get(et),nt===void 0&&(nt=new Set,tt.set(et,nt));nt.has(b)||(nt.add(b),_e=Ui.bind(null,_e,et,b),et.then(_e,_e))}function Vi(_e){do{var et;if((et=_e.tag===13)&&(et=_e.memoizedState,et=et!==null?et.dehydrated!==null:!0),et)return _e;_e=_e.return}while(_e!==null);return null}function Wi(_e,et,b,tt,nt){return _e.mode&1?(_e.flags|=65536,_e.lanes=nt,_e):(_e===et?_e.flags|=65536:(_e.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(et=ch(-1,1),et.tag=2,dh(b,et,1))),b.lanes|=1),_e)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(_e,et,b,tt){et.child=_e===null?Ch(et,null,b,tt):Bh(et,_e.child,b,tt)}function Zi(_e,et,b,tt,nt){b=b.render;var rt=et.ref;return Tg(et,nt),tt=Xh(_e,et,b,tt,rt,nt),b=bi(),_e!==null&&!Ug?(et.updateQueue=_e.updateQueue,et.flags&=-2053,_e.lanes&=~nt,$i(_e,et,nt)):(I$1&&b&&vg(et),et.flags|=1,Yi(_e,et,tt,nt),et.child)}function aj(_e,et,b,tt,nt){if(_e===null){var rt=b.type;return typeof rt=="function"&&!bj(rt)&&rt.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(et.tag=15,et.type=rt,cj(_e,et,rt,tt,nt)):(_e=yh(b.type,null,tt,et,et.mode,nt),_e.ref=et.ref,_e.return=et,et.child=_e)}if(rt=_e.child,!(_e.lanes&nt)){var it=rt.memoizedProps;if(b=b.compare,b=b!==null?b:Ie,b(it,tt)&&_e.ref===et.ref)return $i(_e,et,nt)}return et.flags|=1,_e=wh(rt,tt),_e.ref=et.ref,_e.return=et,et.child=_e}function cj(_e,et,b,tt,nt){if(_e!==null){var rt=_e.memoizedProps;if(Ie(rt,tt)&&_e.ref===et.ref)if(Ug=!1,et.pendingProps=tt=rt,(_e.lanes&nt)!==0)_e.flags&131072&&(Ug=!0);else return et.lanes=_e.lanes,$i(_e,et,nt)}return dj(_e,et,b,tt,nt)}function ej(_e,et,b){var tt=et.pendingProps,nt=tt.children,rt=_e!==null?_e.memoizedState:null;if(tt.mode==="hidden")if(!(et.mode&1))et.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=b;else{if(!(b&1073741824))return _e=rt!==null?rt.baseLanes|b:b,et.lanes=et.childLanes=1073741824,et.memoizedState={baseLanes:_e,cachePool:null,transitions:null},et.updateQueue=null,G(fj,gj),gj|=_e,null;et.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=rt!==null?rt.baseLanes:b,G(fj,gj),gj|=tt}else rt!==null?(tt=rt.baseLanes|b,et.memoizedState=null):tt=b,G(fj,gj),gj|=tt;return Yi(_e,et,nt,b),et.child}function hj(_e,et){var b=et.ref;(_e===null&&b!==null||_e!==null&&_e.ref!==b)&&(et.flags|=512,et.flags|=2097152)}function dj(_e,et,b,tt,nt){var rt=Zf(b)?Xf:H$1.current;return rt=Yf(et,rt),Tg(et,nt),b=Xh(_e,et,b,tt,rt,nt),tt=bi(),_e!==null&&!Ug?(et.updateQueue=_e.updateQueue,et.flags&=-2053,_e.lanes&=~nt,$i(_e,et,nt)):(I$1&&tt&&vg(et),et.flags|=1,Yi(_e,et,b,nt),et.child)}function ij(_e,et,b,tt,nt){if(Zf(b)){var rt=!0;cg(et)}else rt=!1;if(Tg(et,nt),et.stateNode===null)jj(_e,et),ph(et,b,tt),rh(et,b,tt,nt),tt=!0;else if(_e===null){var it=et.stateNode,ot=et.memoizedProps;it.props=ot;var st=it.context,at=b.contextType;typeof at=="object"&&at!==null?at=Vg(at):(at=Zf(b)?Xf:H$1.current,at=Yf(et,at));var ct=b.getDerivedStateFromProps,ut=typeof ct=="function"||typeof it.getSnapshotBeforeUpdate=="function";ut||typeof it.UNSAFE_componentWillReceiveProps!="function"&&typeof it.componentWillReceiveProps!="function"||(ot!==tt||st!==at)&&qh(et,it,tt,at),$g=!1;var lt=et.memoizedState;it.state=lt,gh(et,tt,it,nt),st=et.memoizedState,ot!==tt||lt!==st||Wf.current||$g?(typeof ct=="function"&&(kh(et,b,ct,tt),st=et.memoizedState),(ot=$g||oh(et,b,ot,tt,lt,st,at))?(ut||typeof it.UNSAFE_componentWillMount!="function"&&typeof it.componentWillMount!="function"||(typeof it.componentWillMount=="function"&&it.componentWillMount(),typeof it.UNSAFE_componentWillMount=="function"&&it.UNSAFE_componentWillMount()),typeof it.componentDidMount=="function"&&(et.flags|=4194308)):(typeof it.componentDidMount=="function"&&(et.flags|=4194308),et.memoizedProps=tt,et.memoizedState=st),it.props=tt,it.state=st,it.context=at,tt=ot):(typeof it.componentDidMount=="function"&&(et.flags|=4194308),tt=!1)}else{it=et.stateNode,bh(_e,et),ot=et.memoizedProps,at=et.type===et.elementType?ot:Lg(et.type,ot),it.props=at,ut=et.pendingProps,lt=it.context,st=b.contextType,typeof st=="object"&&st!==null?st=Vg(st):(st=Zf(b)?Xf:H$1.current,st=Yf(et,st));var dt=b.getDerivedStateFromProps;(ct=typeof dt=="function"||typeof it.getSnapshotBeforeUpdate=="function")||typeof it.UNSAFE_componentWillReceiveProps!="function"&&typeof it.componentWillReceiveProps!="function"||(ot!==ut||lt!==st)&&qh(et,it,tt,st),$g=!1,lt=et.memoizedState,it.state=lt,gh(et,tt,it,nt);var ft=et.memoizedState;ot!==ut||lt!==ft||Wf.current||$g?(typeof dt=="function"&&(kh(et,b,dt,tt),ft=et.memoizedState),(at=$g||oh(et,b,at,tt,lt,ft,st)||!1)?(ct||typeof it.UNSAFE_componentWillUpdate!="function"&&typeof it.componentWillUpdate!="function"||(typeof it.componentWillUpdate=="function"&&it.componentWillUpdate(tt,ft,st),typeof it.UNSAFE_componentWillUpdate=="function"&&it.UNSAFE_componentWillUpdate(tt,ft,st)),typeof it.componentDidUpdate=="function"&&(et.flags|=4),typeof it.getSnapshotBeforeUpdate=="function"&&(et.flags|=1024)):(typeof it.componentDidUpdate!="function"||ot===_e.memoizedProps&&lt===_e.memoizedState||(et.flags|=4),typeof it.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&lt===_e.memoizedState||(et.flags|=1024),et.memoizedProps=tt,et.memoizedState=ft),it.props=tt,it.state=ft,it.context=st,tt=at):(typeof it.componentDidUpdate!="function"||ot===_e.memoizedProps&&lt===_e.memoizedState||(et.flags|=4),typeof it.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&lt===_e.memoizedState||(et.flags|=1024),tt=!1)}return kj(_e,et,b,tt,rt,nt)}function kj(_e,et,b,tt,nt,rt){hj(_e,et);var it=(et.flags&128)!==0;if(!tt&&!it)return nt&&dg(et,b,!1),$i(_e,et,rt);tt=et.stateNode,Xi.current=et;var ot=it&&typeof b.getDerivedStateFromError!="function"?null:tt.render();return et.flags|=1,_e!==null&&it?(et.child=Bh(et,_e.child,null,rt),et.child=Bh(et,null,ot,rt)):Yi(_e,et,ot,rt),et.memoizedState=tt.state,nt&&dg(et,b,!0),et.child}function lj(_e){var et=_e.stateNode;et.pendingContext?ag(_e,et.pendingContext,et.pendingContext!==et.context):et.context&&ag(_e,et.context,!1),Ih(_e,et.containerInfo)}function mj(_e,et,b,tt,nt){return Ig(),Jg(nt),et.flags|=256,Yi(_e,et,b,tt),et.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function pj(_e,et,b){var tt=et.pendingProps,nt=M$1.current,rt=!1,it=(et.flags&128)!==0,ot;if((ot=it)||(ot=_e!==null&&_e.memoizedState===null?!1:(nt&2)!==0),ot?(rt=!0,et.flags&=-129):(_e===null||_e.memoizedState!==null)&&(nt|=1),G(M$1,nt&1),_e===null)return Eg(et),_e=et.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(et.mode&1?_e.data==="$!"?et.lanes=8:et.lanes=1073741824:et.lanes=1,null):(it=tt.children,_e=tt.fallback,rt?(tt=et.mode,rt=et.child,it={mode:"hidden",children:it},!(tt&1)&&rt!==null?(rt.childLanes=0,rt.pendingProps=it):rt=qj(it,tt,0,null),_e=Ah(_e,tt,b,null),rt.return=et,_e.return=et,rt.sibling=_e,et.child=rt,et.child.memoizedState=oj(b),et.memoizedState=nj,_e):rj(et,it));if(nt=_e.memoizedState,nt!==null&&(ot=nt.dehydrated,ot!==null))return sj(_e,et,it,tt,ot,nt,b);if(rt){rt=tt.fallback,it=et.mode,nt=_e.child,ot=nt.sibling;var st={mode:"hidden",children:tt.children};return!(it&1)&&et.child!==nt?(tt=et.child,tt.childLanes=0,tt.pendingProps=st,et.deletions=null):(tt=wh(nt,st),tt.subtreeFlags=nt.subtreeFlags&14680064),ot!==null?rt=wh(ot,rt):(rt=Ah(rt,it,b,null),rt.flags|=2),rt.return=et,tt.return=et,tt.sibling=rt,et.child=tt,tt=rt,rt=et.child,it=_e.child.memoizedState,it=it===null?oj(b):{baseLanes:it.baseLanes|b,cachePool:null,transitions:it.transitions},rt.memoizedState=it,rt.childLanes=_e.childLanes&~b,et.memoizedState=nj,tt}return rt=_e.child,_e=rt.sibling,tt=wh(rt,{mode:"visible",children:tt.children}),!(et.mode&1)&&(tt.lanes=b),tt.return=et,tt.sibling=null,_e!==null&&(b=et.deletions,b===null?(et.deletions=[_e],et.flags|=16):b.push(_e)),et.child=tt,et.memoizedState=null,tt}function rj(_e,et){return et=qj({mode:"visible",children:et},_e.mode,0,null),et.return=_e,_e.child=et}function tj(_e,et,b,tt){return tt!==null&&Jg(tt),Bh(et,_e.child,null,b),_e=rj(et,et.pendingProps.children),_e.flags|=2,et.memoizedState=null,_e}function sj(_e,et,b,tt,nt,rt,it){if(b)return et.flags&256?(et.flags&=-257,tt=Li(Error(p$1(422))),tj(_e,et,it,tt)):et.memoizedState!==null?(et.child=_e.child,et.flags|=128,null):(rt=tt.fallback,nt=et.mode,tt=qj({mode:"visible",children:tt.children},nt,0,null),rt=Ah(rt,nt,it,null),rt.flags|=2,tt.return=et,rt.return=et,tt.sibling=rt,et.child=tt,et.mode&1&&Bh(et,_e.child,null,it),et.child.memoizedState=oj(it),et.memoizedState=nj,rt);if(!(et.mode&1))return tj(_e,et,it,null);if(nt.data==="$!"){if(tt=nt.nextSibling&&nt.nextSibling.dataset,tt)var ot=tt.dgst;return tt=ot,rt=Error(p$1(419)),tt=Li(rt,tt,void 0),tj(_e,et,it,tt)}if(ot=(it&_e.childLanes)!==0,Ug||ot){if(tt=R$1,tt!==null){switch(it&-it){case 4:nt=2;break;case 16:nt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nt=32;break;case 536870912:nt=268435456;break;default:nt=0}nt=nt&(tt.suspendedLanes|it)?0:nt,nt!==0&&nt!==rt.retryLane&&(rt.retryLane=nt,Zg(_e,nt),mh(tt,_e,nt,-1))}return uj(),tt=Li(Error(p$1(421))),tj(_e,et,it,tt)}return nt.data==="$?"?(et.flags|=128,et.child=_e.child,et=vj.bind(null,_e),nt._reactRetry=et,null):(_e=rt.treeContext,yg=Lf(nt.nextSibling),xg=et,I$1=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=et),et=rj(et,tt.children),et.flags|=4096,et)}function wj(_e,et,b){_e.lanes|=et;var tt=_e.alternate;tt!==null&&(tt.lanes|=et),Sg(_e.return,et,b)}function xj(_e,et,b,tt,nt){var rt=_e.memoizedState;rt===null?_e.memoizedState={isBackwards:et,rendering:null,renderingStartTime:0,last:tt,tail:b,tailMode:nt}:(rt.isBackwards=et,rt.rendering=null,rt.renderingStartTime=0,rt.last=tt,rt.tail=b,rt.tailMode=nt)}function yj(_e,et,b){var tt=et.pendingProps,nt=tt.revealOrder,rt=tt.tail;if(Yi(_e,et,tt.children,b),tt=M$1.current,tt&2)tt=tt&1|2,et.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=et.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&wj(_e,b,et);else if(_e.tag===19)wj(_e,b,et);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===et)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}tt&=1}if(G(M$1,tt),!(et.mode&1))et.memoizedState=null;else switch(nt){case"forwards":for(b=et.child,nt=null;b!==null;)_e=b.alternate,_e!==null&&Mh(_e)===null&&(nt=b),b=b.sibling;b=nt,b===null?(nt=et.child,et.child=null):(nt=b.sibling,b.sibling=null),xj(et,!1,nt,b,rt);break;case"backwards":for(b=null,nt=et.child,et.child=null;nt!==null;){if(_e=nt.alternate,_e!==null&&Mh(_e)===null){et.child=nt;break}_e=nt.sibling,nt.sibling=b,b=nt,nt=_e}xj(et,!0,b,null,rt);break;case"together":xj(et,!1,null,null,void 0);break;default:et.memoizedState=null}return et.child}function jj(_e,et){!(et.mode&1)&&_e!==null&&(_e.alternate=null,et.alternate=null,et.flags|=2)}function $i(_e,et,b){if(_e!==null&&(et.dependencies=_e.dependencies),hh|=et.lanes,!(b&et.childLanes))return null;if(_e!==null&&et.child!==_e.child)throw Error(p$1(153));if(et.child!==null){for(_e=et.child,b=wh(_e,_e.pendingProps),et.child=b,b.return=et;_e.sibling!==null;)_e=_e.sibling,b=b.sibling=wh(_e,_e.pendingProps),b.return=et;b.sibling=null}return et.child}function zj(_e,et,b){switch(et.tag){case 3:lj(et),Ig();break;case 5:Kh(et);break;case 1:Zf(et.type)&&cg(et);break;case 4:Ih(et,et.stateNode.containerInfo);break;case 10:var tt=et.type._context,nt=et.memoizedProps.value;G(Mg,tt._currentValue),tt._currentValue=nt;break;case 13:if(tt=et.memoizedState,tt!==null)return tt.dehydrated!==null?(G(M$1,M$1.current&1),et.flags|=128,null):b&et.child.childLanes?pj(_e,et,b):(G(M$1,M$1.current&1),_e=$i(_e,et,b),_e!==null?_e.sibling:null);G(M$1,M$1.current&1);break;case 19:if(tt=(b&et.childLanes)!==0,_e.flags&128){if(tt)return yj(_e,et,b);et.flags|=128}if(nt=et.memoizedState,nt!==null&&(nt.rendering=null,nt.tail=null,nt.lastEffect=null),G(M$1,M$1.current),tt)break;return null;case 22:case 23:return et.lanes=0,ej(_e,et,b)}return $i(_e,et,b)}var Aj,Bj,Cj,Dj;Aj=function(_e,et){for(var b=et.child;b!==null;){if(b.tag===5||b.tag===6)_e.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===et)break;for(;b.sibling===null;){if(b.return===null||b.return===et)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};Bj=function(){};Cj=function(_e,et,b,tt){var nt=_e.memoizedProps;if(nt!==tt){_e=et.stateNode,Hh(Eh.current);var rt=null;switch(b){case"input":nt=Ya(_e,nt),tt=Ya(_e,tt),rt=[];break;case"select":nt=A$1({},nt,{value:void 0}),tt=A$1({},tt,{value:void 0}),rt=[];break;case"textarea":nt=gb(_e,nt),tt=gb(_e,tt),rt=[];break;default:typeof nt.onClick!="function"&&typeof tt.onClick=="function"&&(_e.onclick=Bf)}ub(b,tt);var it;b=null;for(at in nt)if(!tt.hasOwnProperty(at)&&nt.hasOwnProperty(at)&&nt[at]!=null)if(at==="style"){var ot=nt[at];for(it in ot)ot.hasOwnProperty(it)&&(b||(b={}),b[it]="")}else at!=="dangerouslySetInnerHTML"&&at!=="children"&&at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&at!=="autoFocus"&&(ea.hasOwnProperty(at)?rt||(rt=[]):(rt=rt||[]).push(at,null));for(at in tt){var st=tt[at];if(ot=nt!=null?nt[at]:void 0,tt.hasOwnProperty(at)&&st!==ot&&(st!=null||ot!=null))if(at==="style")if(ot){for(it in ot)!ot.hasOwnProperty(it)||st&&st.hasOwnProperty(it)||(b||(b={}),b[it]="");for(it in st)st.hasOwnProperty(it)&&ot[it]!==st[it]&&(b||(b={}),b[it]=st[it])}else b||(rt||(rt=[]),rt.push(at,b)),b=st;else at==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,ot=ot?ot.__html:void 0,st!=null&&ot!==st&&(rt=rt||[]).push(at,st)):at==="children"?typeof st!="string"&&typeof st!="number"||(rt=rt||[]).push(at,""+st):at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&(ea.hasOwnProperty(at)?(st!=null&&at==="onScroll"&&D("scroll",_e),rt||ot===st||(rt=[])):(rt=rt||[]).push(at,st))}b&&(rt=rt||[]).push("style",b);var at=rt;(et.updateQueue=at)&&(et.flags|=4)}};Dj=function(_e,et,b,tt){b!==tt&&(et.flags|=4)};function Ej(_e,et){if(!I$1)switch(_e.tailMode){case"hidden":et=_e.tail;for(var b=null;et!==null;)et.alternate!==null&&(b=et),et=et.sibling;b===null?_e.tail=null:b.sibling=null;break;case"collapsed":b=_e.tail;for(var tt=null;b!==null;)b.alternate!==null&&(tt=b),b=b.sibling;tt===null?et||_e.tail===null?_e.tail=null:_e.tail.sibling=null:tt.sibling=null}}function S$2(_e){var et=_e.alternate!==null&&_e.alternate.child===_e.child,b=0,tt=0;if(et)for(var nt=_e.child;nt!==null;)b|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags&14680064,tt|=nt.flags&14680064,nt.return=_e,nt=nt.sibling;else for(nt=_e.child;nt!==null;)b|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags,tt|=nt.flags,nt.return=_e,nt=nt.sibling;return _e.subtreeFlags|=tt,_e.childLanes=b,et}function Fj(_e,et,b){var tt=et.pendingProps;switch(wg(et),et.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(et),null;case 1:return Zf(et.type)&&$f(),S$2(et),null;case 3:return tt=et.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(_e===null||_e.child===null)&&(Gg(et)?et.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(et.flags&256)||(et.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(_e,et),S$2(et),null;case 5:Lh(et);var nt=Hh(Gh.current);if(b=et.type,_e!==null&&et.stateNode!=null)Cj(_e,et,b,tt,nt),_e.ref!==et.ref&&(et.flags|=512,et.flags|=2097152);else{if(!tt){if(et.stateNode===null)throw Error(p$1(166));return S$2(et),null}if(_e=Hh(Eh.current),Gg(et)){tt=et.stateNode,b=et.type;var rt=et.memoizedProps;switch(tt[Of]=et,tt[Pf]=rt,_e=(et.mode&1)!==0,b){case"dialog":D("cancel",tt),D("close",tt);break;case"iframe":case"object":case"embed":D("load",tt);break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D(lf[nt],tt);break;case"source":D("error",tt);break;case"img":case"image":case"link":D("error",tt),D("load",tt);break;case"details":D("toggle",tt);break;case"input":Za(tt,rt),D("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!rt.multiple},D("invalid",tt);break;case"textarea":hb(tt,rt),D("invalid",tt)}ub(b,rt),nt=null;for(var it in rt)if(rt.hasOwnProperty(it)){var ot=rt[it];it==="children"?typeof ot=="string"?tt.textContent!==ot&&(rt.suppressHydrationWarning!==!0&&Af(tt.textContent,ot,_e),nt=["children",ot]):typeof ot=="number"&&tt.textContent!==""+ot&&(rt.suppressHydrationWarning!==!0&&Af(tt.textContent,ot,_e),nt=["children",""+ot]):ea.hasOwnProperty(it)&&ot!=null&&it==="onScroll"&&D("scroll",tt)}switch(b){case"input":Va(tt),db(tt,rt,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof rt.onClick=="function"&&(tt.onclick=Bf)}tt=nt,et.updateQueue=tt,tt!==null&&(et.flags|=4)}else{it=nt.nodeType===9?nt:nt.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(b)),_e==="http://www.w3.org/1999/xhtml"?b==="script"?(_e=it.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof tt.is=="string"?_e=it.createElement(b,{is:tt.is}):(_e=it.createElement(b),b==="select"&&(it=_e,tt.multiple?it.multiple=!0:tt.size&&(it.size=tt.size))):_e=it.createElementNS(_e,b),_e[Of]=et,_e[Pf]=tt,Aj(_e,et,!1,!1),et.stateNode=_e;e:{switch(it=vb(b,tt),b){case"dialog":D("cancel",_e),D("close",_e),nt=tt;break;case"iframe":case"object":case"embed":D("load",_e),nt=tt;break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D(lf[nt],_e);nt=tt;break;case"source":D("error",_e),nt=tt;break;case"img":case"image":case"link":D("error",_e),D("load",_e),nt=tt;break;case"details":D("toggle",_e),nt=tt;break;case"input":Za(_e,tt),nt=Ya(_e,tt),D("invalid",_e);break;case"option":nt=tt;break;case"select":_e._wrapperState={wasMultiple:!!tt.multiple},nt=A$1({},tt,{value:void 0}),D("invalid",_e);break;case"textarea":hb(_e,tt),nt=gb(_e,tt),D("invalid",_e);break;default:nt=tt}ub(b,nt),ot=nt;for(rt in ot)if(ot.hasOwnProperty(rt)){var st=ot[rt];rt==="style"?sb(_e,st):rt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&nb(_e,st)):rt==="children"?typeof st=="string"?(b!=="textarea"||st!=="")&&ob(_e,st):typeof st=="number"&&ob(_e,""+st):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?st!=null&&rt==="onScroll"&&D("scroll",_e):st!=null&&ta(_e,rt,st,it))}switch(b){case"input":Va(_e),db(_e,tt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":tt.value!=null&&_e.setAttribute("value",""+Sa(tt.value));break;case"select":_e.multiple=!!tt.multiple,rt=tt.value,rt!=null?fb(_e,!!tt.multiple,rt,!1):tt.defaultValue!=null&&fb(_e,!!tt.multiple,tt.defaultValue,!0);break;default:typeof nt.onClick=="function"&&(_e.onclick=Bf)}switch(b){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(et.flags|=4)}et.ref!==null&&(et.flags|=512,et.flags|=2097152)}return S$2(et),null;case 6:if(_e&&et.stateNode!=null)Dj(_e,et,_e.memoizedProps,tt);else{if(typeof tt!="string"&&et.stateNode===null)throw Error(p$1(166));if(b=Hh(Gh.current),Hh(Eh.current),Gg(et)){if(tt=et.stateNode,b=et.memoizedProps,tt[Of]=et,(rt=tt.nodeValue!==b)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(tt.nodeValue,b,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,b,(_e.mode&1)!==0)}rt&&(et.flags|=4)}else tt=(b.nodeType===9?b:b.ownerDocument).createTextNode(tt),tt[Of]=et,et.stateNode=tt}return S$2(et),null;case 13:if(E$1(M$1),tt=et.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&et.mode&1&&!(et.flags&128))Hg(),Ig(),et.flags|=98560,rt=!1;else if(rt=Gg(et),tt!==null&&tt.dehydrated!==null){if(_e===null){if(!rt)throw Error(p$1(318));if(rt=et.memoizedState,rt=rt!==null?rt.dehydrated:null,!rt)throw Error(p$1(317));rt[Of]=et}else Ig(),!(et.flags&128)&&(et.memoizedState=null),et.flags|=4;S$2(et),rt=!1}else zg!==null&&(Gj(zg),zg=null),rt=!0;if(!rt)return et.flags&65536?et:null}return et.flags&128?(et.lanes=b,et):(tt=tt!==null,tt!==(_e!==null&&_e.memoizedState!==null)&&tt&&(et.child.flags|=8192,et.mode&1&&(_e===null||M$1.current&1?T$1===0&&(T$1=3):uj())),et.updateQueue!==null&&(et.flags|=4),S$2(et),null);case 4:return Jh(),Bj(_e,et),_e===null&&sf(et.stateNode.containerInfo),S$2(et),null;case 10:return Rg(et.type._context),S$2(et),null;case 17:return Zf(et.type)&&$f(),S$2(et),null;case 19:if(E$1(M$1),rt=et.memoizedState,rt===null)return S$2(et),null;if(tt=(et.flags&128)!==0,it=rt.rendering,it===null)if(tt)Ej(rt,!1);else{if(T$1!==0||_e!==null&&_e.flags&128)for(_e=et.child;_e!==null;){if(it=Mh(_e),it!==null){for(et.flags|=128,Ej(rt,!1),tt=it.updateQueue,tt!==null&&(et.updateQueue=tt,et.flags|=4),et.subtreeFlags=0,tt=b,b=et.child;b!==null;)rt=b,_e=tt,rt.flags&=14680066,it=rt.alternate,it===null?(rt.childLanes=0,rt.lanes=_e,rt.child=null,rt.subtreeFlags=0,rt.memoizedProps=null,rt.memoizedState=null,rt.updateQueue=null,rt.dependencies=null,rt.stateNode=null):(rt.childLanes=it.childLanes,rt.lanes=it.lanes,rt.child=it.child,rt.subtreeFlags=0,rt.deletions=null,rt.memoizedProps=it.memoizedProps,rt.memoizedState=it.memoizedState,rt.updateQueue=it.updateQueue,rt.type=it.type,_e=it.dependencies,rt.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),b=b.sibling;return G(M$1,M$1.current&1|2),et.child}_e=_e.sibling}rt.tail!==null&&B$1()>Hj&&(et.flags|=128,tt=!0,Ej(rt,!1),et.lanes=4194304)}else{if(!tt)if(_e=Mh(it),_e!==null){if(et.flags|=128,tt=!0,b=_e.updateQueue,b!==null&&(et.updateQueue=b,et.flags|=4),Ej(rt,!0),rt.tail===null&&rt.tailMode==="hidden"&&!it.alternate&&!I$1)return S$2(et),null}else 2*B$1()-rt.renderingStartTime>Hj&&b!==1073741824&&(et.flags|=128,tt=!0,Ej(rt,!1),et.lanes=4194304);rt.isBackwards?(it.sibling=et.child,et.child=it):(b=rt.last,b!==null?b.sibling=it:et.child=it,rt.last=it)}return rt.tail!==null?(et=rt.tail,rt.rendering=et,rt.tail=et.sibling,rt.renderingStartTime=B$1(),et.sibling=null,b=M$1.current,G(M$1,tt?b&1|2:b&1),et):(S$2(et),null);case 22:case 23:return Ij(),tt=et.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==tt&&(et.flags|=8192),tt&&et.mode&1?gj&1073741824&&(S$2(et),et.subtreeFlags&6&&(et.flags|=8192)):S$2(et),null;case 24:return null;case 25:return null}throw Error(p$1(156,et.tag))}function Jj(_e,et){switch(wg(et),et.tag){case 1:return Zf(et.type)&&$f(),_e=et.flags,_e&65536?(et.flags=_e&-65537|128,et):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),_e=et.flags,_e&65536&&!(_e&128)?(et.flags=_e&-65537|128,et):null;case 5:return Lh(et),null;case 13:if(E$1(M$1),_e=et.memoizedState,_e!==null&&_e.dehydrated!==null){if(et.alternate===null)throw Error(p$1(340));Ig()}return _e=et.flags,_e&65536?(et.flags=_e&-65537|128,et):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(et.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(_e,et){var b=_e.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(tt){W(_e,et,tt)}else b.current=null}function Nj(_e,et,b){try{b()}catch(tt){W(_e,et,tt)}}var Oj=!1;function Pj(_e,et){if(Cf=dd,_e=Me(),Ne(_e)){if("selectionStart"in _e)var b={start:_e.selectionStart,end:_e.selectionEnd};else e:{b=(b=_e.ownerDocument)&&b.defaultView||window;var tt=b.getSelection&&b.getSelection();if(tt&&tt.rangeCount!==0){b=tt.anchorNode;var nt=tt.anchorOffset,rt=tt.focusNode;tt=tt.focusOffset;try{b.nodeType,rt.nodeType}catch{b=null;break e}var it=0,ot=-1,st=-1,at=0,ct=0,ut=_e,lt=null;t:for(;;){for(var dt;ut!==b||nt!==0&&ut.nodeType!==3||(ot=it+nt),ut!==rt||tt!==0&&ut.nodeType!==3||(st=it+tt),ut.nodeType===3&&(it+=ut.nodeValue.length),(dt=ut.firstChild)!==null;)lt=ut,ut=dt;for(;;){if(ut===_e)break t;if(lt===b&&++at===nt&&(ot=it),lt===rt&&++ct===tt&&(st=it),(dt=ut.nextSibling)!==null)break;ut=lt,lt=ut.parentNode}ut=dt}b=ot===-1||st===-1?null:{start:ot,end:st}}else b=null}b=b||{start:0,end:0}}else b=null;for(Df={focusedElem:_e,selectionRange:b},dd=!1,V$1=et;V$1!==null;)if(et=V$1,_e=et.child,(et.subtreeFlags&1028)!==0&&_e!==null)_e.return=et,V$1=_e;else for(;V$1!==null;){et=V$1;try{var ft=et.alternate;if(et.flags&1024)switch(et.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var St=ft.memoizedProps,Tt=ft.memoizedState,pt=et.stateNode,gt=pt.getSnapshotBeforeUpdate(et.elementType===et.type?St:Lg(et.type,St),Tt);pt.__reactInternalSnapshotBeforeUpdate=gt}break;case 3:var yt=et.stateNode.containerInfo;yt.nodeType===1?yt.textContent="":yt.nodeType===9&&yt.documentElement&&yt.removeChild(yt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Et){W(et,et.return,Et)}if(_e=et.sibling,_e!==null){_e.return=et.return,V$1=_e;break}V$1=et.return}return ft=Oj,Oj=!1,ft}function Qj(_e,et,b){var tt=et.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var nt=tt=tt.next;do{if((nt.tag&_e)===_e){var rt=nt.destroy;nt.destroy=void 0,rt!==void 0&&Nj(et,b,rt)}nt=nt.next}while(nt!==tt)}}function Rj(_e,et){if(et=et.updateQueue,et=et!==null?et.lastEffect:null,et!==null){var b=et=et.next;do{if((b.tag&_e)===_e){var tt=b.create;b.destroy=tt()}b=b.next}while(b!==et)}}function Sj(_e){var et=_e.ref;if(et!==null){var b=_e.stateNode;switch(_e.tag){case 5:_e=b;break;default:_e=b}typeof et=="function"?et(_e):et.current=_e}}function Tj(_e){var et=_e.alternate;et!==null&&(_e.alternate=null,Tj(et)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(et=_e.stateNode,et!==null&&(delete et[Of],delete et[Pf],delete et[of],delete et[Qf],delete et[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Uj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Vj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Uj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Wj(_e,et,b){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,et?b.nodeType===8?b.parentNode.insertBefore(_e,et):b.insertBefore(_e,et):(b.nodeType===8?(et=b.parentNode,et.insertBefore(_e,b)):(et=b,et.appendChild(_e)),b=b._reactRootContainer,b!=null||et.onclick!==null||(et.onclick=Bf));else if(tt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,et,b),_e=_e.sibling;_e!==null;)Wj(_e,et,b),_e=_e.sibling}function Xj(_e,et,b){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,et?b.insertBefore(_e,et):b.appendChild(_e);else if(tt!==4&&(_e=_e.child,_e!==null))for(Xj(_e,et,b),_e=_e.sibling;_e!==null;)Xj(_e,et,b),_e=_e.sibling}var X=null,Yj=!1;function Zj(_e,et,b){for(b=b.child;b!==null;)ak(_e,et,b),b=b.sibling}function ak(_e,et,b){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,b)}catch{}switch(b.tag){case 5:U||Mj(b,et);case 6:var tt=X,nt=Yj;X=null,Zj(_e,et,b),X=tt,Yj=nt,X!==null&&(Yj?(_e=X,b=b.stateNode,_e.nodeType===8?_e.parentNode.removeChild(b):_e.removeChild(b)):X.removeChild(b.stateNode));break;case 18:X!==null&&(Yj?(_e=X,b=b.stateNode,_e.nodeType===8?Kf(_e.parentNode,b):_e.nodeType===1&&Kf(_e,b),bd(_e)):Kf(X,b.stateNode));break;case 4:tt=X,nt=Yj,X=b.stateNode.containerInfo,Yj=!0,Zj(_e,et,b),X=tt,Yj=nt;break;case 0:case 11:case 14:case 15:if(!U&&(tt=b.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){nt=tt=tt.next;do{var rt=nt,it=rt.destroy;rt=rt.tag,it!==void 0&&(rt&2||rt&4)&&Nj(b,et,it),nt=nt.next}while(nt!==tt)}Zj(_e,et,b);break;case 1:if(!U&&(Mj(b,et),tt=b.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=b.memoizedProps,tt.state=b.memoizedState,tt.componentWillUnmount()}catch(ot){W(b,et,ot)}Zj(_e,et,b);break;case 21:Zj(_e,et,b);break;case 22:b.mode&1?(U=(tt=U)||b.memoizedState!==null,Zj(_e,et,b),U=tt):Zj(_e,et,b);break;default:Zj(_e,et,b)}}function bk(_e){var et=_e.updateQueue;if(et!==null){_e.updateQueue=null;var b=_e.stateNode;b===null&&(b=_e.stateNode=new Lj),et.forEach(function(tt){var nt=ck.bind(null,_e,tt);b.has(tt)||(b.add(tt),tt.then(nt,nt))})}}function dk(_e,et){var b=et.deletions;if(b!==null)for(var tt=0;tt<b.length;tt++){var nt=b[tt];try{var rt=_e,it=et,ot=it;e:for(;ot!==null;){switch(ot.tag){case 5:X=ot.stateNode,Yj=!1;break e;case 3:X=ot.stateNode.containerInfo,Yj=!0;break e;case 4:X=ot.stateNode.containerInfo,Yj=!0;break e}ot=ot.return}if(X===null)throw Error(p$1(160));ak(rt,it,nt),X=null,Yj=!1;var st=nt.alternate;st!==null&&(st.return=null),nt.return=null}catch(at){W(nt,et,at)}}if(et.subtreeFlags&12854)for(et=et.child;et!==null;)ek(et,_e),et=et.sibling}function ek(_e,et){var b=_e.alternate,tt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(dk(et,_e),fk(_e),tt&4){try{Qj(3,_e,_e.return),Rj(3,_e)}catch(St){W(_e,_e.return,St)}try{Qj(5,_e,_e.return)}catch(St){W(_e,_e.return,St)}}break;case 1:dk(et,_e),fk(_e),tt&512&&b!==null&&Mj(b,b.return);break;case 5:if(dk(et,_e),fk(_e),tt&512&&b!==null&&Mj(b,b.return),_e.flags&32){var nt=_e.stateNode;try{ob(nt,"")}catch(St){W(_e,_e.return,St)}}if(tt&4&&(nt=_e.stateNode,nt!=null)){var rt=_e.memoizedProps,it=b!==null?b.memoizedProps:rt,ot=_e.type,st=_e.updateQueue;if(_e.updateQueue=null,st!==null)try{ot==="input"&&rt.type==="radio"&&rt.name!=null&&ab(nt,rt),vb(ot,it);var at=vb(ot,rt);for(it=0;it<st.length;it+=2){var ct=st[it],ut=st[it+1];ct==="style"?sb(nt,ut):ct==="dangerouslySetInnerHTML"?nb(nt,ut):ct==="children"?ob(nt,ut):ta(nt,ct,ut,at)}switch(ot){case"input":bb(nt,rt);break;case"textarea":ib(nt,rt);break;case"select":var lt=nt._wrapperState.wasMultiple;nt._wrapperState.wasMultiple=!!rt.multiple;var dt=rt.value;dt!=null?fb(nt,!!rt.multiple,dt,!1):lt!==!!rt.multiple&&(rt.defaultValue!=null?fb(nt,!!rt.multiple,rt.defaultValue,!0):fb(nt,!!rt.multiple,rt.multiple?[]:"",!1))}nt[Pf]=rt}catch(St){W(_e,_e.return,St)}}break;case 6:if(dk(et,_e),fk(_e),tt&4){if(_e.stateNode===null)throw Error(p$1(162));nt=_e.stateNode,rt=_e.memoizedProps;try{nt.nodeValue=rt}catch(St){W(_e,_e.return,St)}}break;case 3:if(dk(et,_e),fk(_e),tt&4&&b!==null&&b.memoizedState.isDehydrated)try{bd(et.containerInfo)}catch(St){W(_e,_e.return,St)}break;case 4:dk(et,_e),fk(_e);break;case 13:dk(et,_e),fk(_e),nt=_e.child,nt.flags&8192&&(rt=nt.memoizedState!==null,nt.stateNode.isHidden=rt,!rt||nt.alternate!==null&&nt.alternate.memoizedState!==null||(gk=B$1())),tt&4&&bk(_e);break;case 22:if(ct=b!==null&&b.memoizedState!==null,_e.mode&1?(U=(at=U)||ct,dk(et,_e),U=at):dk(et,_e),fk(_e),tt&8192){if(at=_e.memoizedState!==null,(_e.stateNode.isHidden=at)&&!ct&&_e.mode&1)for(V$1=_e,ct=_e.child;ct!==null;){for(ut=V$1=ct;V$1!==null;){switch(lt=V$1,dt=lt.child,lt.tag){case 0:case 11:case 14:case 15:Qj(4,lt,lt.return);break;case 1:Mj(lt,lt.return);var ft=lt.stateNode;if(typeof ft.componentWillUnmount=="function"){tt=lt,b=lt.return;try{et=tt,ft.props=et.memoizedProps,ft.state=et.memoizedState,ft.componentWillUnmount()}catch(St){W(tt,b,St)}}break;case 5:Mj(lt,lt.return);break;case 22:if(lt.memoizedState!==null){hk(ut);continue}}dt!==null?(dt.return=lt,V$1=dt):hk(ut)}ct=ct.sibling}e:for(ct=null,ut=_e;;){if(ut.tag===5){if(ct===null){ct=ut;try{nt=ut.stateNode,at?(rt=nt.style,typeof rt.setProperty=="function"?rt.setProperty("display","none","important"):rt.display="none"):(ot=ut.stateNode,st=ut.memoizedProps.style,it=st!=null&&st.hasOwnProperty("display")?st.display:null,ot.style.display=rb("display",it))}catch(St){W(_e,_e.return,St)}}}else if(ut.tag===6){if(ct===null)try{ut.stateNode.nodeValue=at?"":ut.memoizedProps}catch(St){W(_e,_e.return,St)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===_e)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===_e)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===_e)break e;ct===ut&&(ct=null),ut=ut.return}ct===ut&&(ct=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:dk(et,_e),fk(_e),tt&4&&bk(_e);break;case 21:break;default:dk(et,_e),fk(_e)}}function fk(_e){var et=_e.flags;if(et&2){try{e:{for(var b=_e.return;b!==null;){if(Uj(b)){var tt=b;break e}b=b.return}throw Error(p$1(160))}switch(tt.tag){case 5:var nt=tt.stateNode;tt.flags&32&&(ob(nt,""),tt.flags&=-33);var rt=Vj(_e);Xj(_e,rt,nt);break;case 3:case 4:var it=tt.stateNode.containerInfo,ot=Vj(_e);Wj(_e,ot,it);break;default:throw Error(p$1(161))}}catch(st){W(_e,_e.return,st)}_e.flags&=-3}et&4096&&(_e.flags&=-4097)}function ik(_e,et,b){V$1=_e,jk(_e)}function jk(_e,et,b){for(var tt=(_e.mode&1)!==0;V$1!==null;){var nt=V$1,rt=nt.child;if(nt.tag===22&&tt){var it=nt.memoizedState!==null||Kj;if(!it){var ot=nt.alternate,st=ot!==null&&ot.memoizedState!==null||U;ot=Kj;var at=U;if(Kj=it,(U=st)&&!at)for(V$1=nt;V$1!==null;)it=V$1,st=it.child,it.tag===22&&it.memoizedState!==null?kk(nt):st!==null?(st.return=it,V$1=st):kk(nt);for(;rt!==null;)V$1=rt,jk(rt),rt=rt.sibling;V$1=nt,Kj=ot,U=at}lk(_e)}else nt.subtreeFlags&8772&&rt!==null?(rt.return=nt,V$1=rt):lk(_e)}}function lk(_e){for(;V$1!==null;){var et=V$1;if(et.flags&8772){var b=et.alternate;try{if(et.flags&8772)switch(et.tag){case 0:case 11:case 15:U||Rj(5,et);break;case 1:var tt=et.stateNode;if(et.flags&4&&!U)if(b===null)tt.componentDidMount();else{var nt=et.elementType===et.type?b.memoizedProps:Lg(et.type,b.memoizedProps);tt.componentDidUpdate(nt,b.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var rt=et.updateQueue;rt!==null&&ih(et,rt,tt);break;case 3:var it=et.updateQueue;if(it!==null){if(b=null,et.child!==null)switch(et.child.tag){case 5:b=et.child.stateNode;break;case 1:b=et.child.stateNode}ih(et,it,b)}break;case 5:var ot=et.stateNode;if(b===null&&et.flags&4){b=ot;var st=et.memoizedProps;switch(et.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&b.focus();break;case"img":st.src&&(b.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(et.memoizedState===null){var at=et.alternate;if(at!==null){var ct=at.memoizedState;if(ct!==null){var ut=ct.dehydrated;ut!==null&&bd(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||et.flags&512&&Sj(et)}catch(lt){W(et,et.return,lt)}}if(et===_e){V$1=null;break}if(b=et.sibling,b!==null){b.return=et.return,V$1=b;break}V$1=et.return}}function hk(_e){for(;V$1!==null;){var et=V$1;if(et===_e){V$1=null;break}var b=et.sibling;if(b!==null){b.return=et.return,V$1=b;break}V$1=et.return}}function kk(_e){for(;V$1!==null;){var et=V$1;try{switch(et.tag){case 0:case 11:case 15:var b=et.return;try{Rj(4,et)}catch(st){W(et,b,st)}break;case 1:var tt=et.stateNode;if(typeof tt.componentDidMount=="function"){var nt=et.return;try{tt.componentDidMount()}catch(st){W(et,nt,st)}}var rt=et.return;try{Sj(et)}catch(st){W(et,rt,st)}break;case 5:var it=et.return;try{Sj(et)}catch(st){W(et,it,st)}}}catch(st){W(et,et.return,st)}if(et===_e){V$1=null;break}var ot=et.sibling;if(ot!==null){ot.return=et.return,V$1=ot;break}V$1=et.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R$1=null,Y=null,Z=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(_e){return _e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(_e=C$1,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function mh(_e,et,b,tt){if(50<zk)throw zk=0,Ak=null,Error(p$1(185));Ac(_e,b,tt),(!(K&2)||_e!==R$1)&&(_e===R$1&&(!(K&2)&&(rk|=b),T$1===4&&Dk(_e,Z)),Ek(_e,tt),b===1&&K===0&&!(et.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(_e,et){var b=_e.callbackNode;wc(_e,et);var tt=uc(_e,_e===R$1?Z:0);if(tt===0)b!==null&&bc(b),_e.callbackNode=null,_e.callbackPriority=0;else if(et=tt&-tt,_e.callbackPriority!==et){if(b!=null&&bc(b),et===1)_e.tag===0?ig(Fk.bind(null,_e)):hg(Fk.bind(null,_e)),Jf(function(){!(K&6)&&jg()}),b=null;else{switch(Dc(tt)){case 1:b=fc;break;case 4:b=gc;break;case 16:b=hc;break;case 536870912:b=jc;break;default:b=hc}b=Gk(b,Hk.bind(null,_e))}_e.callbackPriority=et,_e.callbackNode=b}}function Hk(_e,et){if(Bk=-1,Ck=0,K&6)throw Error(p$1(327));var b=_e.callbackNode;if(Ik()&&_e.callbackNode!==b)return null;var tt=uc(_e,_e===R$1?Z:0);if(tt===0)return null;if(tt&30||tt&_e.expiredLanes||et)et=Jk(_e,tt);else{et=tt;var nt=K;K|=2;var rt=Kk();(R$1!==_e||Z!==et)&&(vk=null,Hj=B$1()+500,Lk(_e,et));do try{Mk();break}catch(ot){Nk(_e,ot)}while(1);Qg(),nk.current=rt,K=nt,Y!==null?et=0:(R$1=null,Z=0,et=T$1)}if(et!==0){if(et===2&&(nt=xc(_e),nt!==0&&(tt=nt,et=Ok(_e,nt))),et===1)throw b=qk,Lk(_e,0),Dk(_e,tt),Ek(_e,B$1()),b;if(et===6)Dk(_e,tt);else{if(nt=_e.current.alternate,!(tt&30)&&!Pk(nt)&&(et=Jk(_e,tt),et===2&&(rt=xc(_e),rt!==0&&(tt=rt,et=Ok(_e,rt))),et===1))throw b=qk,Lk(_e,0),Dk(_e,tt),Ek(_e,B$1()),b;switch(_e.finishedWork=nt,_e.finishedLanes=tt,et){case 0:case 1:throw Error(p$1(345));case 2:Qk(_e,uk,vk);break;case 3:if(Dk(_e,tt),(tt&130023424)===tt&&(et=gk+500-B$1(),10<et)){if(uc(_e,0)!==0)break;if(nt=_e.suspendedLanes,(nt&tt)!==tt){L$1(),_e.pingedLanes|=_e.suspendedLanes&nt;break}_e.timeoutHandle=Ff(Qk.bind(null,_e,uk,vk),et);break}Qk(_e,uk,vk);break;case 4:if(Dk(_e,tt),(tt&4194240)===tt)break;for(et=_e.eventTimes,nt=-1;0<tt;){var it=31-oc(tt);rt=1<<it,it=et[it],it>nt&&(nt=it),tt&=~rt}if(tt=nt,tt=B$1()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*mk(tt/1960))-tt,10<tt){_e.timeoutHandle=Ff(Qk.bind(null,_e,uk,vk),tt);break}Qk(_e,uk,vk);break;case 5:Qk(_e,uk,vk);break;default:throw Error(p$1(329))}}}return Ek(_e,B$1()),_e.callbackNode===b?Hk.bind(null,_e):null}function Ok(_e,et){var b=tk;return _e.current.memoizedState.isDehydrated&&(Lk(_e,et).flags|=256),_e=Jk(_e,et),_e!==2&&(et=uk,uk=b,et!==null&&Gj(et)),_e}function Gj(_e){uk===null?uk=_e:uk.push.apply(uk,_e)}function Pk(_e){for(var et=_e;;){if(et.flags&16384){var b=et.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var tt=0;tt<b.length;tt++){var nt=b[tt],rt=nt.getSnapshot;nt=nt.value;try{if(!He(rt(),nt))return!1}catch{return!1}}}if(b=et.child,et.subtreeFlags&16384&&b!==null)b.return=et,et=b;else{if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return!0;et=et.return}et.sibling.return=et.return,et=et.sibling}}return!0}function Dk(_e,et){for(et&=~sk,et&=~rk,_e.suspendedLanes|=et,_e.pingedLanes&=~et,_e=_e.expirationTimes;0<et;){var b=31-oc(et),tt=1<<b;_e[b]=-1,et&=~tt}}function Fk(_e){if(K&6)throw Error(p$1(327));Ik();var et=uc(_e,0);if(!(et&1))return Ek(_e,B$1()),null;var b=Jk(_e,et);if(_e.tag!==0&&b===2){var tt=xc(_e);tt!==0&&(et=tt,b=Ok(_e,tt))}if(b===1)throw b=qk,Lk(_e,0),Dk(_e,et),Ek(_e,B$1()),b;if(b===6)throw Error(p$1(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=et,Qk(_e,uk,vk),Ek(_e,B$1()),null}function Rk(_e,et){var b=K;K|=1;try{return _e(et)}finally{K=b,K===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(_e){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var et=K;K|=1;var b=pk.transition,tt=C$1;try{if(pk.transition=null,C$1=1,_e)return _e()}finally{C$1=tt,pk.transition=b,K=et,!(K&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(_e,et){_e.finishedWork=null,_e.finishedLanes=0;var b=_e.timeoutHandle;if(b!==-1&&(_e.timeoutHandle=-1,Gf(b)),Y!==null)for(b=Y.return;b!==null;){var tt=b;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(tt);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(tt.type._context);break;case 22:case 23:Ij()}b=b.return}if(R$1=_e,Y=_e=wh(_e.current,null),Z=gj=et,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(et=0;et<Wg.length;et++)if(b=Wg[et],tt=b.interleaved,tt!==null){b.interleaved=null;var nt=tt.next,rt=b.pending;if(rt!==null){var it=rt.next;rt.next=nt,tt.next=it}b.pending=tt}Wg=null}return _e}function Nk(_e,et){do{var b=Y;try{if(Qg(),Ph.current=ai,Sh){for(var tt=N$1.memoizedState;tt!==null;){var nt=tt.queue;nt!==null&&(nt.pending=null),tt=tt.next}Sh=!1}if(Rh=0,P$1=O=N$1=null,Th=!1,Uh=0,ok.current=null,b===null||b.return===null){T$1=1,qk=et,Y=null;break}e:{var rt=_e,it=b.return,ot=b,st=et;if(et=Z,ot.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var at=st,ct=ot,ut=ct.tag;if(!(ct.mode&1)&&(ut===0||ut===11||ut===15)){var lt=ct.alternate;lt?(ct.updateQueue=lt.updateQueue,ct.memoizedState=lt.memoizedState,ct.lanes=lt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var dt=Vi(it);if(dt!==null){dt.flags&=-257,Wi(dt,it,ot,rt,et),dt.mode&1&&Ti(rt,at,et),et=dt,st=at;var ft=et.updateQueue;if(ft===null){var St=new Set;St.add(st),et.updateQueue=St}else ft.add(st);break e}else{if(!(et&1)){Ti(rt,at,et),uj();break e}st=Error(p$1(426))}}else if(I$1&&ot.mode&1){var Tt=Vi(it);if(Tt!==null){!(Tt.flags&65536)&&(Tt.flags|=256),Wi(Tt,it,ot,rt,et),Jg(Ki(st,ot));break e}}rt=st=Ki(st,ot),T$1!==4&&(T$1=2),tk===null?tk=[rt]:tk.push(rt),rt=it;do{switch(rt.tag){case 3:rt.flags|=65536,et&=-et,rt.lanes|=et;var pt=Oi(rt,st,et);fh(rt,pt);break e;case 1:ot=st;var gt=rt.type,yt=rt.stateNode;if(!(rt.flags&128)&&(typeof gt.getDerivedStateFromError=="function"||yt!==null&&typeof yt.componentDidCatch=="function"&&(Si===null||!Si.has(yt)))){rt.flags|=65536,et&=-et,rt.lanes|=et;var Et=Ri(rt,ot,et);fh(rt,Et);break e}}rt=rt.return}while(rt!==null)}Tk(b)}catch(It){et=It,Y===b&&b!==null&&(Y=b=b.return);continue}break}while(1)}function Kk(){var _e=nk.current;return nk.current=ai,_e===null?ai:_e}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z)}function Jk(_e,et){var b=K;K|=2;var tt=Kk();(R$1!==_e||Z!==et)&&(vk=null,Lk(_e,et));do try{Uk();break}catch(nt){Nk(_e,nt)}while(1);if(Qg(),K=b,nk.current=tt,Y!==null)throw Error(p$1(261));return R$1=null,Z=0,T$1}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(_e){var et=Wk(_e.alternate,_e,gj);_e.memoizedProps=_e.pendingProps,et===null?Tk(_e):Y=et,ok.current=null}function Tk(_e){var et=_e;do{var b=et.alternate;if(_e=et.return,et.flags&32768){if(b=Jj(b,et),b!==null){b.flags&=32767,Y=b;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$1=6,Y=null;return}}else if(b=Fj(b,et,gj),b!==null){Y=b;return}if(et=et.sibling,et!==null){Y=et;return}Y=et=_e}while(et!==null);T$1===0&&(T$1=5)}function Qk(_e,et,b){var tt=C$1,nt=pk.transition;try{pk.transition=null,C$1=1,Xk(_e,et,b,tt)}finally{pk.transition=nt,C$1=tt}return null}function Xk(_e,et,b,tt){do Ik();while(xk!==null);if(K&6)throw Error(p$1(327));b=_e.finishedWork;var nt=_e.finishedLanes;if(b===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,b===_e.current)throw Error(p$1(177));_e.callbackNode=null,_e.callbackPriority=0;var rt=b.lanes|b.childLanes;if(Bc(_e,rt),_e===R$1&&(Y=R$1=null,Z=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),rt=(b.flags&15990)!==0,b.subtreeFlags&15990||rt){rt=pk.transition,pk.transition=null;var it=C$1;C$1=1;var ot=K;K|=4,ok.current=null,Pj(_e,b),ek(b,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=b,ik(b),dc(),K=ot,C$1=it,pk.transition=rt}else _e.current=b;if(wk&&(wk=!1,xk=_e,yk=nt),rt=_e.pendingLanes,rt===0&&(Si=null),mc(b.stateNode),Ek(_e,B$1()),et!==null)for(tt=_e.onRecoverableError,b=0;b<et.length;b++)nt=et[b],tt(nt.value,{componentStack:nt.stack,digest:nt.digest});if(Pi)throw Pi=!1,_e=Qi,Qi=null,_e;return yk&1&&_e.tag!==0&&Ik(),rt=_e.pendingLanes,rt&1?_e===Ak?zk++:(zk=0,Ak=_e):zk=0,jg(),null}function Ik(){if(xk!==null){var _e=Dc(yk),et=pk.transition,b=C$1;try{if(pk.transition=null,C$1=16>_e?16:_e,xk===null)var tt=!1;else{if(_e=xk,xk=null,yk=0,K&6)throw Error(p$1(331));var nt=K;for(K|=4,V$1=_e.current;V$1!==null;){var rt=V$1,it=rt.child;if(V$1.flags&16){var ot=rt.deletions;if(ot!==null){for(var st=0;st<ot.length;st++){var at=ot[st];for(V$1=at;V$1!==null;){var ct=V$1;switch(ct.tag){case 0:case 11:case 15:Qj(8,ct,rt)}var ut=ct.child;if(ut!==null)ut.return=ct,V$1=ut;else for(;V$1!==null;){ct=V$1;var lt=ct.sibling,dt=ct.return;if(Tj(ct),ct===at){V$1=null;break}if(lt!==null){lt.return=dt,V$1=lt;break}V$1=dt}}}var ft=rt.alternate;if(ft!==null){var St=ft.child;if(St!==null){ft.child=null;do{var Tt=St.sibling;St.sibling=null,St=Tt}while(St!==null)}}V$1=rt}}if(rt.subtreeFlags&2064&&it!==null)it.return=rt,V$1=it;else e:for(;V$1!==null;){if(rt=V$1,rt.flags&2048)switch(rt.tag){case 0:case 11:case 15:Qj(9,rt,rt.return)}var pt=rt.sibling;if(pt!==null){pt.return=rt.return,V$1=pt;break e}V$1=rt.return}}var gt=_e.current;for(V$1=gt;V$1!==null;){it=V$1;var yt=it.child;if(it.subtreeFlags&2064&&yt!==null)yt.return=it,V$1=yt;else e:for(it=gt;V$1!==null;){if(ot=V$1,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Rj(9,ot)}}catch(It){W(ot,ot.return,It)}if(ot===it){V$1=null;break e}var Et=ot.sibling;if(Et!==null){Et.return=ot.return,V$1=Et;break e}V$1=ot.return}}if(K=nt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}tt=!0}return tt}finally{C$1=b,pk.transition=et}}return!1}function Yk(_e,et,b){et=Ki(b,et),et=Oi(_e,et,1),_e=dh(_e,et,1),et=L$1(),_e!==null&&(Ac(_e,1,et),Ek(_e,et))}function W(_e,et,b){if(_e.tag===3)Yk(_e,_e,b);else for(;et!==null;){if(et.tag===3){Yk(et,_e,b);break}else if(et.tag===1){var tt=et.stateNode;if(typeof et.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Si===null||!Si.has(tt))){_e=Ki(b,_e),_e=Ri(et,_e,1),et=dh(et,_e,1),_e=L$1(),et!==null&&(Ac(et,1,_e),Ek(et,_e));break}}et=et.return}}function Ui(_e,et,b){var tt=_e.pingCache;tt!==null&&tt.delete(et),et=L$1(),_e.pingedLanes|=_e.suspendedLanes&b,R$1===_e&&(Z&b)===b&&(T$1===4||T$1===3&&(Z&130023424)===Z&&500>B$1()-gk?Lk(_e,0):sk|=b),Ek(_e,et)}function Zk(_e,et){et===0&&(_e.mode&1?(et=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):et=1);var b=L$1();_e=Zg(_e,et),_e!==null&&(Ac(_e,et,b),Ek(_e,b))}function vj(_e){var et=_e.memoizedState,b=0;et!==null&&(b=et.retryLane),Zk(_e,b)}function ck(_e,et){var b=0;switch(_e.tag){case 13:var tt=_e.stateNode,nt=_e.memoizedState;nt!==null&&(b=nt.retryLane);break;case 19:tt=_e.stateNode;break;default:throw Error(p$1(314))}tt!==null&&tt.delete(et),Zk(_e,b)}var Wk;Wk=function(_e,et,b){if(_e!==null)if(_e.memoizedProps!==et.pendingProps||Wf.current)Ug=!0;else{if(!(_e.lanes&b)&&!(et.flags&128))return Ug=!1,zj(_e,et,b);Ug=!!(_e.flags&131072)}else Ug=!1,I$1&&et.flags&1048576&&ug(et,ng,et.index);switch(et.lanes=0,et.tag){case 2:var tt=et.type;jj(_e,et),_e=et.pendingProps;var nt=Yf(et,H$1.current);Tg(et,b),nt=Xh(null,et,tt,_e,nt,b);var rt=bi();return et.flags|=1,typeof nt=="object"&&nt!==null&&typeof nt.render=="function"&&nt.$$typeof===void 0?(et.tag=1,et.memoizedState=null,et.updateQueue=null,Zf(tt)?(rt=!0,cg(et)):rt=!1,et.memoizedState=nt.state!==null&&nt.state!==void 0?nt.state:null,ah(et),nt.updater=nh,et.stateNode=nt,nt._reactInternals=et,rh(et,tt,_e,b),et=kj(null,et,tt,!0,rt,b)):(et.tag=0,I$1&&rt&&vg(et),Yi(null,et,nt,b),et=et.child),et;case 16:tt=et.elementType;e:{switch(jj(_e,et),_e=et.pendingProps,nt=tt._init,tt=nt(tt._payload),et.type=tt,nt=et.tag=$k(tt),_e=Lg(tt,_e),nt){case 0:et=dj(null,et,tt,_e,b);break e;case 1:et=ij(null,et,tt,_e,b);break e;case 11:et=Zi(null,et,tt,_e,b);break e;case 14:et=aj(null,et,tt,Lg(tt.type,_e),b);break e}throw Error(p$1(306,tt,""))}return et;case 0:return tt=et.type,nt=et.pendingProps,nt=et.elementType===tt?nt:Lg(tt,nt),dj(_e,et,tt,nt,b);case 1:return tt=et.type,nt=et.pendingProps,nt=et.elementType===tt?nt:Lg(tt,nt),ij(_e,et,tt,nt,b);case 3:e:{if(lj(et),_e===null)throw Error(p$1(387));tt=et.pendingProps,rt=et.memoizedState,nt=rt.element,bh(_e,et),gh(et,tt,null,b);var it=et.memoizedState;if(tt=it.element,rt.isDehydrated)if(rt={element:tt,isDehydrated:!1,cache:it.cache,pendingSuspenseBoundaries:it.pendingSuspenseBoundaries,transitions:it.transitions},et.updateQueue.baseState=rt,et.memoizedState=rt,et.flags&256){nt=Ki(Error(p$1(423)),et),et=mj(_e,et,tt,b,nt);break e}else if(tt!==nt){nt=Ki(Error(p$1(424)),et),et=mj(_e,et,tt,b,nt);break e}else for(yg=Lf(et.stateNode.containerInfo.firstChild),xg=et,I$1=!0,zg=null,b=Ch(et,null,tt,b),et.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Ig(),tt===nt){et=$i(_e,et,b);break e}Yi(_e,et,tt,b)}et=et.child}return et;case 5:return Kh(et),_e===null&&Eg(et),tt=et.type,nt=et.pendingProps,rt=_e!==null?_e.memoizedProps:null,it=nt.children,Ef(tt,nt)?it=null:rt!==null&&Ef(tt,rt)&&(et.flags|=32),hj(_e,et),Yi(_e,et,it,b),et.child;case 6:return _e===null&&Eg(et),null;case 13:return pj(_e,et,b);case 4:return Ih(et,et.stateNode.containerInfo),tt=et.pendingProps,_e===null?et.child=Bh(et,null,tt,b):Yi(_e,et,tt,b),et.child;case 11:return tt=et.type,nt=et.pendingProps,nt=et.elementType===tt?nt:Lg(tt,nt),Zi(_e,et,tt,nt,b);case 7:return Yi(_e,et,et.pendingProps,b),et.child;case 8:return Yi(_e,et,et.pendingProps.children,b),et.child;case 12:return Yi(_e,et,et.pendingProps.children,b),et.child;case 10:e:{if(tt=et.type._context,nt=et.pendingProps,rt=et.memoizedProps,it=nt.value,G(Mg,tt._currentValue),tt._currentValue=it,rt!==null)if(He(rt.value,it)){if(rt.children===nt.children&&!Wf.current){et=$i(_e,et,b);break e}}else for(rt=et.child,rt!==null&&(rt.return=et);rt!==null;){var ot=rt.dependencies;if(ot!==null){it=rt.child;for(var st=ot.firstContext;st!==null;){if(st.context===tt){if(rt.tag===1){st=ch(-1,b&-b),st.tag=2;var at=rt.updateQueue;if(at!==null){at=at.shared;var ct=at.pending;ct===null?st.next=st:(st.next=ct.next,ct.next=st),at.pending=st}}rt.lanes|=b,st=rt.alternate,st!==null&&(st.lanes|=b),Sg(rt.return,b,et),ot.lanes|=b;break}st=st.next}}else if(rt.tag===10)it=rt.type===et.type?null:rt.child;else if(rt.tag===18){if(it=rt.return,it===null)throw Error(p$1(341));it.lanes|=b,ot=it.alternate,ot!==null&&(ot.lanes|=b),Sg(it,b,et),it=rt.sibling}else it=rt.child;if(it!==null)it.return=rt;else for(it=rt;it!==null;){if(it===et){it=null;break}if(rt=it.sibling,rt!==null){rt.return=it.return,it=rt;break}it=it.return}rt=it}Yi(_e,et,nt.children,b),et=et.child}return et;case 9:return nt=et.type,tt=et.pendingProps.children,Tg(et,b),nt=Vg(nt),tt=tt(nt),et.flags|=1,Yi(_e,et,tt,b),et.child;case 14:return tt=et.type,nt=Lg(tt,et.pendingProps),nt=Lg(tt.type,nt),aj(_e,et,tt,nt,b);case 15:return cj(_e,et,et.type,et.pendingProps,b);case 17:return tt=et.type,nt=et.pendingProps,nt=et.elementType===tt?nt:Lg(tt,nt),jj(_e,et),et.tag=1,Zf(tt)?(_e=!0,cg(et)):_e=!1,Tg(et,b),ph(et,tt,nt),rh(et,tt,nt,b),kj(null,et,tt,!0,_e,b);case 19:return yj(_e,et,b);case 22:return ej(_e,et,b)}throw Error(p$1(156,et.tag))};function Gk(_e,et){return ac(_e,et)}function al(_e,et,b,tt){this.tag=_e,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=et,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,et,b,tt){return new al(_e,et,b,tt)}function bj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function $k(_e){if(typeof _e=="function")return bj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function wh(_e,et){var b=_e.alternate;return b===null?(b=Bg(_e.tag,et,_e.key,_e.mode),b.elementType=_e.elementType,b.type=_e.type,b.stateNode=_e.stateNode,b.alternate=_e,_e.alternate=b):(b.pendingProps=et,b.type=_e.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=_e.flags&14680064,b.childLanes=_e.childLanes,b.lanes=_e.lanes,b.child=_e.child,b.memoizedProps=_e.memoizedProps,b.memoizedState=_e.memoizedState,b.updateQueue=_e.updateQueue,et=_e.dependencies,b.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext},b.sibling=_e.sibling,b.index=_e.index,b.ref=_e.ref,b}function yh(_e,et,b,tt,nt,rt){var it=2;if(tt=_e,typeof _e=="function")bj(_e)&&(it=1);else if(typeof _e=="string")it=5;else e:switch(_e){case ya:return Ah(b.children,nt,rt,et);case za:it=8,nt|=8;break;case Aa:return _e=Bg(12,b,et,nt|2),_e.elementType=Aa,_e.lanes=rt,_e;case Ea:return _e=Bg(13,b,et,nt),_e.elementType=Ea,_e.lanes=rt,_e;case Fa:return _e=Bg(19,b,et,nt),_e.elementType=Fa,_e.lanes=rt,_e;case Ia:return qj(b,nt,rt,et);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:it=10;break e;case Ca:it=9;break e;case Da:it=11;break e;case Ga:it=14;break e;case Ha:it=16,tt=null;break e}throw Error(p$1(130,_e==null?_e:typeof _e,""))}return et=Bg(it,b,et,nt),et.elementType=_e,et.type=tt,et.lanes=rt,et}function Ah(_e,et,b,tt){return _e=Bg(7,_e,tt,et),_e.lanes=b,_e}function qj(_e,et,b,tt){return _e=Bg(22,_e,tt,et),_e.elementType=Ia,_e.lanes=b,_e.stateNode={isHidden:!1},_e}function xh(_e,et,b){return _e=Bg(6,_e,null,et),_e.lanes=b,_e}function zh(_e,et,b){return et=Bg(4,_e.children!==null?_e.children:[],_e.key,et),et.lanes=b,et.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},et}function bl(_e,et,b,tt,nt){this.tag=et,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=nt,this.mutableSourceEagerHydrationData=null}function cl(_e,et,b,tt,nt,rt,it,ot,st){return _e=new bl(_e,et,b,ot,st),et===1?(et=1,rt===!0&&(et|=8)):et=0,rt=Bg(3,null,null,et),_e.current=rt,rt.stateNode=_e,rt.memoizedState={element:tt,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(rt),_e}function dl(_e,et,b){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:_e,containerInfo:et,implementation:b}}function el(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$1(170));var et=_e;do{switch(et.tag){case 3:et=et.stateNode.context;break e;case 1:if(Zf(et.type)){et=et.stateNode.__reactInternalMemoizedMergedChildContext;break e}}et=et.return}while(et!==null);throw Error(p$1(171))}if(_e.tag===1){var b=_e.type;if(Zf(b))return bg(_e,b,et)}return et}function fl(_e,et,b,tt,nt,rt,it,ot,st){return _e=cl(b,tt,!0,_e,nt,rt,it,ot,st),_e.context=el(null),b=_e.current,tt=L$1(),nt=lh(b),rt=ch(tt,nt),rt.callback=et??null,dh(b,rt,nt),_e.current.lanes=nt,Ac(_e,nt,tt),Ek(_e,tt),_e}function gl(_e,et,b,tt){var nt=et.current,rt=L$1(),it=lh(nt);return b=el(b),et.context===null?et.context=b:et.pendingContext=b,et=ch(rt,it),et.payload={element:_e},tt=tt===void 0?null:tt,tt!==null&&(et.callback=tt),_e=dh(nt,et,it),_e!==null&&(mh(_e,nt,it,rt),eh(_e,nt,it)),it}function hl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function il(_e,et){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var b=_e.retryLane;_e.retryLane=b!==0&&b<et?b:et}}function jl(_e,et){il(_e,et),(_e=_e.alternate)&&il(_e,et)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ml(_e){this._internalRoot=_e}nl.prototype.render=ml.prototype.render=function(_e){var et=this._internalRoot;if(et===null)throw Error(p$1(409));gl(_e,et,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var et=_e.containerInfo;Sk(function(){gl(null,_e,null,null)}),et[uf]=null}};function nl(_e){this._internalRoot=_e}nl.prototype.unstable_scheduleHydration=function(_e){if(_e){var et=Hc();_e={blockedOn:null,target:_e,priority:et};for(var b=0;b<Qc.length&&et!==0&&et<Qc[b].priority;b++);Qc.splice(b,0,_e),b===0&&Vc(_e)}};function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function pl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(_e,et,b,tt,nt){if(nt){if(typeof tt=="function"){var rt=tt;tt=function(){var at=hl(it);rt.call(at)}}var it=fl(et,tt,_e,0,null,!1,!1,"",ql);return _e._reactRootContainer=it,_e[uf]=it.current,sf(_e.nodeType===8?_e.parentNode:_e),Sk(),it}for(;nt=_e.lastChild;)_e.removeChild(nt);if(typeof tt=="function"){var ot=tt;tt=function(){var at=hl(st);ot.call(at)}}var st=cl(_e,0,!1,null,null,!1,!1,"",ql);return _e._reactRootContainer=st,_e[uf]=st.current,sf(_e.nodeType===8?_e.parentNode:_e),Sk(function(){gl(et,st,b,tt)}),st}function sl(_e,et,b,tt,nt){var rt=b._reactRootContainer;if(rt){var it=rt;if(typeof nt=="function"){var ot=nt;nt=function(){var st=hl(it);ot.call(st)}}gl(et,it,_e,nt)}else it=rl(b,et,_e,nt,tt);return hl(it)}Ec=function(_e){switch(_e.tag){case 3:var et=_e.stateNode;if(et.current.memoizedState.isDehydrated){var b=tc(et.pendingLanes);b!==0&&(Cc(et,b|1),Ek(et,B$1()),!(K&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var tt=Zg(_e,1);if(tt!==null){var nt=L$1();mh(tt,_e,1,nt)}}),jl(_e,1)}};Fc=function(_e){if(_e.tag===13){var et=Zg(_e,134217728);if(et!==null){var b=L$1();mh(et,_e,134217728,b)}jl(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var et=lh(_e),b=Zg(_e,et);if(b!==null){var tt=L$1();mh(b,_e,et,tt)}jl(_e,et)}};Hc=function(){return C$1};Ic=function(_e,et){var b=C$1;try{return C$1=_e,et()}finally{C$1=b}};yb=function(_e,et,b){switch(et){case"input":if(bb(_e,b),et=b.name,b.type==="radio"&&et!=null){for(b=_e;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+et)+'][type="radio"]'),et=0;et<b.length;et++){var tt=b[et];if(tt!==_e&&tt.form===_e.form){var nt=Db(tt);if(!nt)throw Error(p$1(90));Wa(tt),bb(tt,nt)}}}break;case"textarea":ib(_e,b);break;case"select":et=b.value,et!=null&&fb(_e,!!b.multiple,et,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(_e,et){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(et))throw Error(p$1(200));return dl(_e,et,null,b)};reactDom_production_min.createRoot=function(_e,et){if(!ol(_e))throw Error(p$1(299));var b=!1,tt="",nt=ll;return et!=null&&(et.unstable_strictMode===!0&&(b=!0),et.identifierPrefix!==void 0&&(tt=et.identifierPrefix),et.onRecoverableError!==void 0&&(nt=et.onRecoverableError)),et=cl(_e,1,!1,null,null,b,!1,tt,nt),_e[uf]=et.current,sf(_e.nodeType===8?_e.parentNode:_e),new ml(et)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var et=_e._reactInternals;if(et===void 0)throw typeof _e.render=="function"?Error(p$1(188)):(_e=Object.keys(_e).join(","),Error(p$1(268,_e)));return _e=Zb(et),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Sk(_e)};reactDom_production_min.hydrate=function(_e,et,b){if(!pl(et))throw Error(p$1(200));return sl(null,_e,et,!0,b)};reactDom_production_min.hydrateRoot=function(_e,et,b){if(!ol(_e))throw Error(p$1(405));var tt=b!=null&&b.hydratedSources||null,nt=!1,rt="",it=ll;if(b!=null&&(b.unstable_strictMode===!0&&(nt=!0),b.identifierPrefix!==void 0&&(rt=b.identifierPrefix),b.onRecoverableError!==void 0&&(it=b.onRecoverableError)),et=fl(et,null,_e,1,b??null,nt,!1,rt,it),_e[uf]=et.current,sf(_e),tt)for(_e=0;_e<tt.length;_e++)b=tt[_e],nt=b._getVersion,nt=nt(b._source),et.mutableSourceEagerHydrationData==null?et.mutableSourceEagerHydrationData=[b,nt]:et.mutableSourceEagerHydrationData.push(b,nt);return new nl(et)};reactDom_production_min.render=function(_e,et,b){if(!pl(et))throw Error(p$1(200));return sl(null,_e,et,!1,b)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!pl(_e))throw Error(p$1(40));return _e._reactRootContainer?(Sk(function(){sl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,et,b,tt){if(!pl(b))throw Error(p$1(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$1(38));return sl(_e,et,b,!1,tt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(_e){function et(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(et)}catch(b){console.error(b)}}et(),_e.exports=reactDom_production_min})(reactDom);var m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var b=arguments[et];for(var tt in b)Object.prototype.hasOwnProperty.call(b,tt)&&(_e[tt]=b[tt])}return _e},_extends$2.apply(this,arguments)}var Action;(function(_e){_e.Pop="POP",_e.Push="PUSH",_e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(_e){_e===void 0&&(_e={});function et(tt,nt){let{pathname:rt,search:it,hash:ot}=tt.location;return createLocation("",{pathname:rt,search:it,hash:ot},nt.state&&nt.state.usr||null,nt.state&&nt.state.key||"default")}function b(tt,nt){return typeof nt=="string"?nt:createPath(nt)}return getUrlBasedHistory(et,b,null,_e)}function invariant(_e,et){if(_e===!1||_e===null||typeof _e>"u")throw new Error(et)}function warning(_e,et){if(!_e){typeof console<"u"&&console.warn(et);try{throw new Error(et)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_e,et){return{usr:_e.state,key:_e.key,idx:et}}function createLocation(_e,et,b,tt){return b===void 0&&(b=null),_extends$2({pathname:typeof _e=="string"?_e:_e.pathname,search:"",hash:""},typeof et=="string"?parsePath(et):et,{state:b,key:et&&et.key||tt||createKey()})}function createPath(_e){let{pathname:et="/",search:b="",hash:tt=""}=_e;return b&&b!=="?"&&(et+=b.charAt(0)==="?"?b:"?"+b),tt&&tt!=="#"&&(et+=tt.charAt(0)==="#"?tt:"#"+tt),et}function parsePath(_e){let et={};if(_e){let b=_e.indexOf("#");b>=0&&(et.hash=_e.substr(b),_e=_e.substr(0,b));let tt=_e.indexOf("?");tt>=0&&(et.search=_e.substr(tt),_e=_e.substr(0,tt)),_e&&(et.pathname=_e)}return et}function getUrlBasedHistory(_e,et,b,tt){tt===void 0&&(tt={});let{window:nt=document.defaultView,v5Compat:rt=!1}=tt,it=nt.history,ot=Action.Pop,st=null,at=ct();at==null&&(at=0,it.replaceState(_extends$2({},it.state,{idx:at}),""));function ct(){return(it.state||{idx:null}).idx}function ut(){ot=Action.Pop;let Tt=ct(),pt=Tt==null?null:Tt-at;at=Tt,st&&st({action:ot,location:St.location,delta:pt})}function lt(Tt,pt){ot=Action.Push;let gt=createLocation(St.location,Tt,pt);b&&b(gt,Tt),at=ct()+1;let yt=getHistoryState(gt,at),Et=St.createHref(gt);try{it.pushState(yt,"",Et)}catch{nt.location.assign(Et)}rt&&st&&st({action:ot,location:St.location,delta:1})}function dt(Tt,pt){ot=Action.Replace;let gt=createLocation(St.location,Tt,pt);b&&b(gt,Tt),at=ct();let yt=getHistoryState(gt,at),Et=St.createHref(gt);it.replaceState(yt,"",Et),rt&&st&&st({action:ot,location:St.location,delta:0})}function ft(Tt){let pt=nt.location.origin!=="null"?nt.location.origin:nt.location.href,gt=typeof Tt=="string"?Tt:createPath(Tt);return invariant(pt,"No window.location.(origin|href) available to create URL for href: "+gt),new URL(gt,pt)}let St={get action(){return ot},get location(){return _e(nt,it)},listen(Tt){if(st)throw new Error("A history only accepts one active listener");return nt.addEventListener(PopStateEventType,ut),st=Tt,()=>{nt.removeEventListener(PopStateEventType,ut),st=null}},createHref(Tt){return et(nt,Tt)},createURL:ft,encodeLocation(Tt){let pt=ft(Tt);return{pathname:pt.pathname,search:pt.search,hash:pt.hash}},push:lt,replace:dt,go(Tt){return it.go(Tt)}};return St}var ResultType;(function(_e){_e.data="data",_e.deferred="deferred",_e.redirect="redirect",_e.error="error"})(ResultType||(ResultType={}));function matchRoutes(_e,et,b){b===void 0&&(b="/");let tt=typeof et=="string"?parsePath(et):et,nt=stripBasename(tt.pathname||"/",b);if(nt==null)return null;let rt=flattenRoutes(_e);rankRouteBranches(rt);let it=null;for(let ot=0;it==null&&ot<rt.length;++ot)it=matchRouteBranch(rt[ot],safelyDecodeURI(nt));return it}function flattenRoutes(_e,et,b,tt){et===void 0&&(et=[]),b===void 0&&(b=[]),tt===void 0&&(tt="");let nt=(rt,it,ot)=>{let st={relativePath:ot===void 0?rt.path||"":ot,caseSensitive:rt.caseSensitive===!0,childrenIndex:it,route:rt};st.relativePath.startsWith("/")&&(invariant(st.relativePath.startsWith(tt),'Absolute route path "'+st.relativePath+'" nested under path '+('"'+tt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),st.relativePath=st.relativePath.slice(tt.length));let at=joinPaths([tt,st.relativePath]),ct=b.concat(st);rt.children&&rt.children.length>0&&(invariant(rt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+at+'".')),flattenRoutes(rt.children,et,ct,at)),!(rt.path==null&&!rt.index)&&et.push({path:at,score:computeScore(at,rt.index),routesMeta:ct})};return _e.forEach((rt,it)=>{var ot;if(rt.path===""||!((ot=rt.path)!=null&&ot.includes("?")))nt(rt,it);else for(let st of explodeOptionalSegments(rt.path))nt(rt,it,st)}),et}function explodeOptionalSegments(_e){let et=_e.split("/");if(et.length===0)return[];let[b,...tt]=et,nt=b.endsWith("?"),rt=b.replace(/\?$/,"");if(tt.length===0)return nt?[rt,""]:[rt];let it=explodeOptionalSegments(tt.join("/")),ot=[];return ot.push(...it.map(st=>st===""?rt:[rt,st].join("/"))),nt&&ot.push(...it),ot.map(st=>_e.startsWith("/")&&st===""?"/":st)}function rankRouteBranches(_e){_e.sort((et,b)=>et.score!==b.score?b.score-et.score:compareIndexes(et.routesMeta.map(tt=>tt.childrenIndex),b.routesMeta.map(tt=>tt.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_e=>_e==="*";function computeScore(_e,et){let b=_e.split("/"),tt=b.length;return b.some(isSplat)&&(tt+=splatPenalty),et&&(tt+=indexRouteValue),b.filter(nt=>!isSplat(nt)).reduce((nt,rt)=>nt+(paramRe.test(rt)?dynamicSegmentValue:rt===""?emptySegmentValue:staticSegmentValue),tt)}function compareIndexes(_e,et){return _e.length===et.length&&_e.slice(0,-1).every((tt,nt)=>tt===et[nt])?_e[_e.length-1]-et[et.length-1]:0}function matchRouteBranch(_e,et){let{routesMeta:b}=_e,tt={},nt="/",rt=[];for(let it=0;it<b.length;++it){let ot=b[it],st=it===b.length-1,at=nt==="/"?et:et.slice(nt.length)||"/",ct=matchPath({path:ot.relativePath,caseSensitive:ot.caseSensitive,end:st},at);if(!ct)return null;Object.assign(tt,ct.params);let ut=ot.route;rt.push({params:tt,pathname:joinPaths([nt,ct.pathname]),pathnameBase:normalizePathname(joinPaths([nt,ct.pathnameBase])),route:ut}),ct.pathnameBase!=="/"&&(nt=joinPaths([nt,ct.pathnameBase]))}return rt}function matchPath(_e,et){typeof _e=="string"&&(_e={path:_e,caseSensitive:!1,end:!0});let[b,tt]=compilePath(_e.path,_e.caseSensitive,_e.end),nt=et.match(b);if(!nt)return null;let rt=nt[0],it=rt.replace(/(.)\/+$/,"$1"),ot=nt.slice(1);return{params:tt.reduce((at,ct,ut)=>{if(ct==="*"){let lt=ot[ut]||"";it=rt.slice(0,rt.length-lt.length).replace(/(.)\/+$/,"$1")}return at[ct]=safelyDecodeURIComponent(ot[ut]||"",ct),at},{}),pathname:rt,pathnameBase:it,pattern:_e}}function compilePath(_e,et,b){et===void 0&&(et=!1),b===void 0&&(b=!0),warning(_e==="*"||!_e.endsWith("*")||_e.endsWith("/*"),'Route path "'+_e+'" will be treated as if it were '+('"'+_e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_e.replace(/\*$/,"/*")+'".'));let tt=[],nt="^"+_e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(it,ot)=>(tt.push(ot),"/([^\\/]+)"));return _e.endsWith("*")?(tt.push("*"),nt+=_e==="*"||_e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):b?nt+="\\/*$":_e!==""&&_e!=="/"&&(nt+="(?:(?=\\/|$))"),[new RegExp(nt,et?void 0:"i"),tt]}function safelyDecodeURI(_e){try{return decodeURI(_e)}catch(et){return warning(!1,'The URL path "'+_e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+et+").")),_e}}function safelyDecodeURIComponent(_e,et){try{return decodeURIComponent(_e)}catch(b){return warning(!1,'The value for the URL param "'+et+'" will not be decoded because'+(' the string "'+_e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+b+").")),_e}}function stripBasename(_e,et){if(et==="/")return _e;if(!_e.toLowerCase().startsWith(et.toLowerCase()))return null;let b=et.endsWith("/")?et.length-1:et.length,tt=_e.charAt(b);return tt&&tt!=="/"?null:_e.slice(b)||"/"}function resolvePath(_e,et){et===void 0&&(et="/");let{pathname:b,search:tt="",hash:nt=""}=typeof _e=="string"?parsePath(_e):_e;return{pathname:b?b.startsWith("/")?b:resolvePathname(b,et):et,search:normalizeSearch(tt),hash:normalizeHash(nt)}}function resolvePathname(_e,et){let b=et.replace(/\/+$/,"").split("/");return _e.split("/").forEach(nt=>{nt===".."?b.length>1&&b.pop():nt!=="."&&b.push(nt)}),b.length>1?b.join("/"):"/"}function getInvalidPathError(_e,et,b,tt){return"Cannot include a '"+_e+"' character in a manually specified "+("`to."+et+"` field ["+JSON.stringify(tt)+"].  Please separate it out to the ")+("`to."+b+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_e){return _e.filter((et,b)=>b===0||et.route.path&&et.route.path.length>0)}function resolveTo(_e,et,b,tt){tt===void 0&&(tt=!1);let nt;typeof _e=="string"?nt=parsePath(_e):(nt=_extends$2({},_e),invariant(!nt.pathname||!nt.pathname.includes("?"),getInvalidPathError("?","pathname","search",nt)),invariant(!nt.pathname||!nt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",nt)),invariant(!nt.search||!nt.search.includes("#"),getInvalidPathError("#","search","hash",nt)));let rt=_e===""||nt.pathname==="",it=rt?"/":nt.pathname,ot;if(tt||it==null)ot=b;else{let ut=et.length-1;if(it.startsWith("..")){let lt=it.split("/");for(;lt[0]==="..";)lt.shift(),ut-=1;nt.pathname=lt.join("/")}ot=ut>=0?et[ut]:"/"}let st=resolvePath(nt,ot),at=it&&it!=="/"&&it.endsWith("/"),ct=(rt||it===".")&&b.endsWith("/");return!st.pathname.endsWith("/")&&(at||ct)&&(st.pathname+="/"),st}const joinPaths=_e=>_e.join("/").replace(/\/\/+/g,"/"),normalizePathname=_e=>_e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_e=>!_e||_e==="?"?"":_e.startsWith("?")?_e:"?"+_e,normalizeHash=_e=>!_e||_e==="#"?"":_e.startsWith("#")?_e:"#"+_e;function isRouteErrorResponse(_e){return _e!=null&&typeof _e.status=="number"&&typeof _e.statusText=="string"&&typeof _e.internal=="boolean"&&"data"in _e}/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function isPolyfill(_e,et){return _e===et&&(_e!==0||1/_e===1/et)||_e!==_e&&et!==et}const is=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React;function useSyncExternalStore$2(_e,et,b){const tt=et(),[{inst:nt},rt]=useState({inst:{value:tt,getSnapshot:et}});return useLayoutEffect(()=>{nt.value=tt,nt.getSnapshot=et,checkIfSnapshotChanged(nt)&&rt({inst:nt})},[_e,tt,et]),useEffect(()=>(checkIfSnapshotChanged(nt)&&rt({inst:nt}),_e(()=>{checkIfSnapshotChanged(nt)&&rt({inst:nt})})),[_e]),useDebugValue(tt),tt}function checkIfSnapshotChanged(_e){const et=_e.getSnapshot,b=_e.value;try{const tt=et();return!is(b,tt)}catch{return!0}}function useSyncExternalStore$1(_e,et,b){return et()}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM,shim=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2;"useSyncExternalStore"in React&&(_e=>_e.useSyncExternalStore)(React);const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[]}),RouteErrorContext=reactExports.createContext(null);function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var b=arguments[et];for(var tt in b)Object.prototype.hasOwnProperty.call(b,tt)&&(_e[tt]=b[tt])}return _e},_extends$1.apply(this,arguments)}function useHref(_e,et){let{relative:b}=et===void 0?{}:et;useInRouterContext()||invariant(!1);let{basename:tt,navigator:nt}=reactExports.useContext(NavigationContext),{hash:rt,pathname:it,search:ot}=useResolvedPath(_e,{relative:b}),st=it;return tt!=="/"&&(st=it==="/"?tt:joinPaths([tt,it])),nt.createHref({pathname:st,search:ot,hash:rt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant(!1);let{basename:_e,navigator:et}=reactExports.useContext(NavigationContext),{matches:b}=reactExports.useContext(RouteContext),{pathname:tt}=useLocation(),nt=JSON.stringify(getPathContributingMatches(b).map(ot=>ot.pathnameBase)),rt=reactExports.useRef(!1);return reactExports.useEffect(()=>{rt.current=!0}),reactExports.useCallback(function(ot,st){if(st===void 0&&(st={}),!rt.current)return;if(typeof ot=="number"){et.go(ot);return}let at=resolveTo(ot,JSON.parse(nt),tt,st.relative==="path");_e!=="/"&&(at.pathname=at.pathname==="/"?_e:joinPaths([_e,at.pathname])),(st.replace?et.replace:et.push)(at,st.state,st)},[_e,et,nt,tt])}function useResolvedPath(_e,et){let{relative:b}=et===void 0?{}:et,{matches:tt}=reactExports.useContext(RouteContext),{pathname:nt}=useLocation(),rt=JSON.stringify(getPathContributingMatches(tt).map(it=>it.pathnameBase));return reactExports.useMemo(()=>resolveTo(_e,JSON.parse(rt),nt,b==="path"),[_e,rt,nt,b])}function useRoutes(_e,et){useInRouterContext()||invariant(!1);let{navigator:b}=reactExports.useContext(NavigationContext),tt=reactExports.useContext(DataRouterStateContext),{matches:nt}=reactExports.useContext(RouteContext),rt=nt[nt.length-1],it=rt?rt.params:{};rt&&rt.pathname;let ot=rt?rt.pathnameBase:"/";rt&&rt.route;let st=useLocation(),at;if(et){var ct;let St=typeof et=="string"?parsePath(et):et;ot==="/"||(ct=St.pathname)!=null&&ct.startsWith(ot)||invariant(!1),at=St}else at=st;let ut=at.pathname||"/",lt=ot==="/"?ut:ut.slice(ot.length)||"/",dt=matchRoutes(_e,{pathname:lt}),ft=_renderMatches(dt&&dt.map(St=>Object.assign({},St,{params:Object.assign({},it,St.params),pathname:joinPaths([ot,b.encodeLocation?b.encodeLocation(St.pathname).pathname:St.pathname]),pathnameBase:St.pathnameBase==="/"?ot:joinPaths([ot,b.encodeLocation?b.encodeLocation(St.pathnameBase).pathname:St.pathnameBase])})),nt,tt||void 0);return et&&ft?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},at),navigationType:Action.Pop}},ft):ft}function DefaultErrorComponent(){let _e=useRouteError(),et=isRouteErrorResponse(_e)?_e.status+" "+_e.statusText:_e instanceof Error?_e.message:JSON.stringify(_e),b=_e instanceof Error?_e.stack:null,nt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},rt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},et),b?reactExports.createElement("pre",{style:nt},b):null,rt)}class RenderErrorBoundary extends reactExports.Component{constructor(et){super(et),this.state={location:et.location,error:et.error}}static getDerivedStateFromError(et){return{error:et}}static getDerivedStateFromProps(et,b){return b.location!==et.location?{error:et.error,location:et.location}:{error:et.error||b.error,location:b.location}}componentDidCatch(et,b){console.error("React Router caught the following error during render",et,b)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_e){let{routeContext:et,match:b,children:tt}=_e,nt=reactExports.useContext(DataRouterContext);return nt&&nt.static&&nt.staticContext&&(b.route.errorElement||b.route.ErrorBoundary)&&(nt.staticContext._deepestRenderedBoundaryId=b.route.id),reactExports.createElement(RouteContext.Provider,{value:et},tt)}function _renderMatches(_e,et,b){if(et===void 0&&(et=[]),_e==null)if(b!=null&&b.errors)_e=b.matches;else return null;let tt=_e,nt=b==null?void 0:b.errors;if(nt!=null){let rt=tt.findIndex(it=>it.route.id&&(nt==null?void 0:nt[it.route.id]));rt>=0||invariant(!1),tt=tt.slice(0,Math.min(tt.length,rt+1))}return tt.reduceRight((rt,it,ot)=>{let st=it.route.id?nt==null?void 0:nt[it.route.id]:null,at=null;b&&(it.route.ErrorBoundary?at=reactExports.createElement(it.route.ErrorBoundary,null):it.route.errorElement?at=it.route.errorElement:at=reactExports.createElement(DefaultErrorComponent,null));let ct=et.concat(tt.slice(0,ot+1)),ut=()=>{let lt=rt;return st?lt=at:it.route.Component?lt=reactExports.createElement(it.route.Component,null):it.route.element&&(lt=it.route.element),reactExports.createElement(RenderedRoute,{match:it,routeContext:{outlet:rt,matches:ct},children:lt})};return b&&(it.route.ErrorBoundary||it.route.errorElement||ot===0)?reactExports.createElement(RenderErrorBoundary,{location:b.location,component:at,error:st,children:ut(),routeContext:{outlet:null,matches:ct}}):ut()},null)}var DataRouterHook$1;(function(_e){_e.UseBlocker="useBlocker",_e.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function(_e){_e.UseBlocker="useBlocker",_e.UseLoaderData="useLoaderData",_e.UseActionData="useActionData",_e.UseRouteError="useRouteError",_e.UseNavigation="useNavigation",_e.UseRouteLoaderData="useRouteLoaderData",_e.UseMatches="useMatches",_e.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState(_e){let et=reactExports.useContext(DataRouterStateContext);return et||invariant(!1),et}function useRouteContext(_e){let et=reactExports.useContext(RouteContext);return et||invariant(!1),et}function useCurrentRouteId(_e){let et=useRouteContext(),b=et.matches[et.matches.length-1];return b.route.id||invariant(!1),b.route.id}function useRouteError(){var _e;let et=reactExports.useContext(RouteErrorContext),b=useDataRouterState(DataRouterStateHook$1.UseRouteError),tt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return et||((_e=b.errors)==null?void 0:_e[tt])}function Route(_e){invariant(!1)}function Router(_e){let{basename:et="/",children:b=null,location:tt,navigationType:nt=Action.Pop,navigator:rt,static:it=!1}=_e;useInRouterContext()&&invariant(!1);let ot=et.replace(/^\/*/,"/"),st=reactExports.useMemo(()=>({basename:ot,navigator:rt,static:it}),[ot,rt,it]);typeof tt=="string"&&(tt=parsePath(tt));let{pathname:at="/",search:ct="",hash:ut="",state:lt=null,key:dt="default"}=tt,ft=reactExports.useMemo(()=>{let St=stripBasename(at,ot);return St==null?null:{location:{pathname:St,search:ct,hash:ut,state:lt,key:dt},navigationType:nt}},[ot,at,ct,ut,lt,dt,nt]);return ft==null?null:reactExports.createElement(NavigationContext.Provider,{value:st},reactExports.createElement(LocationContext.Provider,{children:b,value:ft}))}function Routes(_e){let{children:et,location:b}=_e,tt=reactExports.useContext(DataRouterContext),nt=tt&&!et?tt.router.routes:createRoutesFromChildren(et);return useRoutes(nt,b)}var AwaitRenderStatus;(function(_e){_e[_e.pending=0]="pending",_e[_e.success=1]="success",_e[_e.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren(_e,et){et===void 0&&(et=[]);let b=[];return reactExports.Children.forEach(_e,(tt,nt)=>{if(!reactExports.isValidElement(tt))return;let rt=[...et,nt];if(tt.type===reactExports.Fragment){b.push.apply(b,createRoutesFromChildren(tt.props.children,rt));return}tt.type!==Route&&invariant(!1),!tt.props.index||!tt.props.children||invariant(!1);let it={id:tt.props.id||rt.join("-"),caseSensitive:tt.props.caseSensitive,element:tt.props.element,Component:tt.props.Component,index:tt.props.index,path:tt.props.path,loader:tt.props.loader,action:tt.props.action,errorElement:tt.props.errorElement,ErrorBoundary:tt.props.ErrorBoundary,hasErrorBoundary:tt.props.ErrorBoundary!=null||tt.props.errorElement!=null,shouldRevalidate:tt.props.shouldRevalidate,handle:tt.props.handle,lazy:tt.props.lazy};tt.props.children&&(it.children=createRoutesFromChildren(tt.props.children,rt)),b.push(it)}),b}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var b=arguments[et];for(var tt in b)Object.prototype.hasOwnProperty.call(b,tt)&&(_e[tt]=b[tt])}return _e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(_e,et){if(_e==null)return{};var b={},tt=Object.keys(_e),nt,rt;for(rt=0;rt<tt.length;rt++)nt=tt[rt],!(et.indexOf(nt)>=0)&&(b[nt]=_e[nt]);return b}function isModifiedEvent(_e){return!!(_e.metaKey||_e.altKey||_e.ctrlKey||_e.shiftKey)}function shouldProcessLinkClick(_e,et){return _e.button===0&&(!et||et==="_self")&&!isModifiedEvent(_e)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function BrowserRouter(_e){let{basename:et,children:b,window:tt}=_e,nt=reactExports.useRef();nt.current==null&&(nt.current=createBrowserHistory({window:tt,v5Compat:!0}));let rt=nt.current,[it,ot]=reactExports.useState({action:rt.action,location:rt.location});return reactExports.useLayoutEffect(()=>rt.listen(ot),[rt]),reactExports.createElement(Router,{basename:et,children:b,location:it.location,navigationType:it.action,navigator:rt})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(et,b){let{onClick:tt,relative:nt,reloadDocument:rt,replace:it,state:ot,target:st,to:at,preventScrollReset:ct}=et,ut=_objectWithoutPropertiesLoose(et,_excluded),{basename:lt}=reactExports.useContext(NavigationContext),dt,ft=!1;if(typeof at=="string"&&ABSOLUTE_URL_REGEX.test(at)&&(dt=at,isBrowser)){let gt=new URL(window.location.href),yt=at.startsWith("//")?new URL(gt.protocol+at):new URL(at),Et=stripBasename(yt.pathname,lt);yt.origin===gt.origin&&Et!=null?at=Et+yt.search+yt.hash:ft=!0}let St=useHref(at,{relative:nt}),Tt=useLinkClickHandler(at,{replace:it,state:ot,target:st,preventScrollReset:ct,relative:nt});function pt(gt){tt&&tt(gt),gt.defaultPrevented||Tt(gt)}return reactExports.createElement("a",_extends({},ut,{href:dt||St,onClick:ft||rt?tt:pt,ref:b,target:st}))});var DataRouterHook;(function(_e){_e.UseScrollRestoration="useScrollRestoration",_e.UseSubmitImpl="useSubmitImpl",_e.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_e){_e.UseFetchers="useFetchers",_e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(_e,et){let{target:b,replace:tt,state:nt,preventScrollReset:rt,relative:it}=et===void 0?{}:et,ot=useNavigate(),st=useLocation(),at=useResolvedPath(_e,{relative:it});return reactExports.useCallback(ct=>{if(shouldProcessLinkClick(ct,b)){ct.preventDefault();let ut=tt!==void 0?tt:createPath(st)===createPath(at);ot(_e,{replace:ut,state:nt,preventScrollReset:rt,relative:it})}},[st,ot,at,tt,nt,b,_e,rt,it])}const Home=()=>jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/opentok-react/lobby/member",children:"Member Lobby"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/opentok-react/lobby/therapist",children:"Therapist Lobby"})})]});var opentokExports={},opentok={get exports(){return opentokExports},set exports(_e){opentokExports=_e}};/**
 * @license OpenTok.js 2.25.1 8d76a4b67
 *
 * Copyright (c) 2010-2023 TokBox, Inc.
 * Subject to the applicable Software Development Kit (SDK) License Agreement:
 * https://www.vonage.com/legal/communications-apis/terms-of-use/
 *
 * Date: Fri, 14 Apr 2023 14:30:20 GMT
 */(function(module,exports){(function(et,b){module.exports=b()})(window,function(){return function(_e){var et={};function b(tt){if(et[tt])return et[tt].exports;var nt=et[tt]={i:tt,l:!1,exports:{}};return _e[tt].call(nt.exports,nt,nt.exports,b),nt.l=!0,nt.exports}return b.m=_e,b.c=et,b.d=function(tt,nt,rt){b.o(tt,nt)||Object.defineProperty(tt,nt,{enumerable:!0,get:rt})},b.r=function(tt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(tt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(tt,"__esModule",{value:!0})},b.t=function(tt,nt){if(nt&1&&(tt=b(tt)),nt&8||nt&4&&typeof tt=="object"&&tt&&tt.__esModule)return tt;var rt=Object.create(null);if(b.r(rt),Object.defineProperty(rt,"default",{enumerable:!0,value:tt}),nt&2&&typeof tt!="string")for(var it in tt)b.d(rt,it,function(ot){return tt[ot]}.bind(null,it));return rt},b.n=function(tt){var nt=tt&&tt.__esModule?function(){return tt.default}:function(){return tt};return b.d(nt,"a",nt),nt},b.o=function(tt,nt){return Object.prototype.hasOwnProperty.call(tt,nt)},b.p="",b(b.s=335)}([function(_e,et,b){(function(tt){/*!
* @overview es6-promise - a tiny implementation of Promises/A+.
* @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
* @license   Licensed under MIT license
*            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
* @version   v4.2.8+1e68dce6
*/(function(nt,rt){_e.exports=rt()})(this,function(){function nt(Bn){var gr=typeof Bn;return Bn!==null&&(gr==="object"||gr==="function")}function rt(Bn){return typeof Bn=="function"}var it=void 0;Array.isArray?it=Array.isArray:it=function(Bn){return Object.prototype.toString.call(Bn)==="[object Array]"};var ot=it,st=0,at=void 0,ct=void 0,ut=function(gr,Or){At[st]=gr,At[st+1]=Or,st+=2,st===2&&(ct?ct(kt):Nt())};function lt(Bn){ct=Bn}function dt(Bn){ut=Bn}var ft=typeof window<"u"?window:void 0,St=ft||{},Tt=St.MutationObserver||St.WebKitMutationObserver,pt=typeof self>"u"&&typeof tt<"u"&&{}.toString.call(tt)==="[object process]",gt=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function yt(){return function(){return tt.nextTick(kt)}}function Et(){return typeof at<"u"?function(){at(kt)}:Wt()}function It(){var Bn=0,gr=new Tt(kt),Or=document.createTextNode("");return gr.observe(Or,{characterData:!0}),function(){Or.data=Bn=++Bn%2}}function Gt(){var Bn=new MessageChannel;return Bn.port1.onmessage=kt,function(){return Bn.port2.postMessage(0)}}function Wt(){var Bn=setTimeout;return function(){return Bn(kt,1)}}var At=new Array(1e3);function kt(){for(var Bn=0;Bn<st;Bn+=2){var gr=At[Bn],Or=At[Bn+1];gr(Or),At[Bn]=void 0,At[Bn+1]=void 0}st=0}function Vt(){try{var Bn=Function("return this")().require("vertx");return at=Bn.runOnLoop||Bn.runOnContext,Et()}catch{return Wt()}}var Nt=void 0;pt?Nt=yt():Tt?Nt=It():gt?Nt=Gt():ft===void 0?Nt=Vt():Nt=Wt();function tn(Bn,gr){var Or=this,ro=new this.constructor(cn);ro[Kt]===void 0&&kr(ro);var Ao=Or._state;if(Ao){var ho=arguments[Ao-1];ut(function(){return Qn(Ao,ro,ho,Or._result)})}else lr(Or,ro,Bn,gr);return ro}function _t(Bn){var gr=this;if(Bn&&typeof Bn=="object"&&Bn.constructor===gr)return Bn;var Or=new gr(cn);return pn(Or,Bn),Or}var Kt=Math.random().toString(36).substring(2);function cn(){}var an=void 0,mn=1,on=2;function yn(){return new TypeError("You cannot resolve a promise with itself")}function fn(){return new TypeError("A promises callback cannot return that same promise.")}function sn(Bn,gr,Or,ro){try{Bn.call(gr,Or,ro)}catch(Ao){return Ao}}function un(Bn,gr,Or){ut(function(ro){var Ao=!1,ho=sn(Or,gr,function(vo){Ao||(Ao=!0,gr!==vo?pn(ro,vo):Tn(ro,vo))},function(vo){Ao||(Ao=!0,Jn(ro,vo))},"Settle: "+(ro._label||" unknown promise"));!Ao&&ho&&(Ao=!0,Jn(ro,ho))},Bn)}function Ln(Bn,gr){gr._state===mn?Tn(Bn,gr._result):gr._state===on?Jn(Bn,gr._result):lr(gr,void 0,function(Or){return pn(Bn,Or)},function(Or){return Jn(Bn,Or)})}function Xn(Bn,gr,Or){gr.constructor===Bn.constructor&&Or===tn&&gr.constructor.resolve===_t?Ln(Bn,gr):Or===void 0?Tn(Bn,gr):rt(Or)?un(Bn,gr,Or):Tn(Bn,gr)}function pn(Bn,gr){if(Bn===gr)Jn(Bn,yn());else if(nt(gr)){var Or=void 0;try{Or=gr.then}catch(ro){Jn(Bn,ro);return}Xn(Bn,gr,Or)}else Tn(Bn,gr)}function Vn(Bn){Bn._onerror&&Bn._onerror(Bn._result),tr(Bn)}function Tn(Bn,gr){Bn._state===an&&(Bn._result=gr,Bn._state=mn,Bn._subscribers.length!==0&&ut(tr,Bn))}function Jn(Bn,gr){Bn._state===an&&(Bn._state=on,Bn._result=gr,ut(Vn,Bn))}function lr(Bn,gr,Or,ro){var Ao=Bn._subscribers,ho=Ao.length;Bn._onerror=null,Ao[ho]=gr,Ao[ho+mn]=Or,Ao[ho+on]=ro,ho===0&&Bn._state&&ut(tr,Bn)}function tr(Bn){var gr=Bn._subscribers,Or=Bn._state;if(gr.length!==0){for(var ro=void 0,Ao=void 0,ho=Bn._result,vo=0;vo<gr.length;vo+=3)ro=gr[vo],Ao=gr[vo+Or],ro?Qn(Or,ro,Ao,ho):Ao(ho);Bn._subscribers.length=0}}function Qn(Bn,gr,Or,ro){var Ao=rt(Or),ho=void 0,vo=void 0,po=!0;if(Ao){try{ho=Or(ro)}catch(zr){po=!1,vo=zr}if(gr===ho){Jn(gr,fn());return}}else ho=ro;gr._state!==an||(Ao&&po?pn(gr,ho):po===!1?Jn(gr,vo):Bn===mn?Tn(gr,ho):Bn===on&&Jn(gr,ho))}function Sr(Bn,gr){try{gr(function(ro){pn(Bn,ro)},function(ro){Jn(Bn,ro)})}catch(Or){Jn(Bn,Or)}}var vr=0;function Fr(){return vr++}function kr(Bn){Bn[Kt]=vr++,Bn._state=void 0,Bn._result=void 0,Bn._subscribers=[]}function jr(){return new Error("Array Methods must be provided an Array")}var xo=function(){function Bn(gr,Or){this._instanceConstructor=gr,this.promise=new gr(cn),this.promise[Kt]||kr(this.promise),ot(Or)?(this.length=Or.length,this._remaining=Or.length,this._result=new Array(this.length),this.length===0?Tn(this.promise,this._result):(this.length=this.length||0,this._enumerate(Or),this._remaining===0&&Tn(this.promise,this._result))):Jn(this.promise,jr())}return Bn.prototype._enumerate=function(Or){for(var ro=0;this._state===an&&ro<Or.length;ro++)this._eachEntry(Or[ro],ro)},Bn.prototype._eachEntry=function(Or,ro){var Ao=this._instanceConstructor,ho=Ao.resolve;if(ho===_t){var vo=void 0,po=void 0,zr=!1;try{vo=Or.then}catch(mo){zr=!0,po=mo}if(vo===tn&&Or._state!==an)this._settledAt(Or._state,ro,Or._result);else if(typeof vo!="function")this._remaining--,this._result[ro]=Or;else if(Ao===Ar){var Go=new Ao(cn);zr?Jn(Go,po):Xn(Go,Or,vo),this._willSettleAt(Go,ro)}else this._willSettleAt(new Ao(function(mo){return mo(Or)}),ro)}else this._willSettleAt(ho(Or),ro)},Bn.prototype._settledAt=function(Or,ro,Ao){var ho=this.promise;ho._state===an&&(this._remaining--,Or===on?Jn(ho,Ao):this._result[ro]=Ao),this._remaining===0&&Tn(ho,this._result)},Bn.prototype._willSettleAt=function(Or,ro){var Ao=this;lr(Or,void 0,function(ho){return Ao._settledAt(mn,ro,ho)},function(ho){return Ao._settledAt(on,ro,ho)})},Bn}();function Er(Bn){return new xo(this,Bn).promise}function xr(Bn){var gr=this;return ot(Bn)?new gr(function(Or,ro){for(var Ao=Bn.length,ho=0;ho<Ao;ho++)gr.resolve(Bn[ho]).then(Or,ro)}):new gr(function(Or,ro){return ro(new TypeError("You must pass an array to race."))})}function Un(Bn){var gr=this,Or=new gr(cn);return Jn(Or,Bn),Or}function Mn(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function sr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Ar=function(){function Bn(gr){this[Kt]=Fr(),this._result=this._state=void 0,this._subscribers=[],cn!==gr&&(typeof gr!="function"&&Mn(),this instanceof Bn?Sr(this,gr):sr())}return Bn.prototype.catch=function(Or){return this.then(null,Or)},Bn.prototype.finally=function(Or){var ro=this,Ao=ro.constructor;return rt(Or)?ro.then(function(ho){return Ao.resolve(Or()).then(function(){return ho})},function(ho){return Ao.resolve(Or()).then(function(){throw ho})}):ro.then(Or,Or)},Bn}();Ar.prototype.then=tn,Ar.all=Er,Ar.race=xr,Ar.resolve=_t,Ar.reject=Un,Ar._setScheduler=lt,Ar._setAsap=dt,Ar._asap=ut;function so(){var Bn=void 0;if(typeof(typeof window!==void 0?window:commonjsGlobal)<"u")Bn=typeof window!==void 0?window:commonjsGlobal;else if(typeof self<"u")Bn=self;else try{Bn=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var gr=Bn.Promise;if(gr){var Or=null;try{Or=Object.prototype.toString.call(gr.resolve())}catch{}if(Or==="[object Promise]"&&!gr.cast)return}Bn.Promise=Ar}return Ar.polyfill=so,Ar.Promise=Ar,Ar})}).call(this,b(42))},function(_e,et,b){const tt=b(403),nt=b(190),rt=b(121),it=nt(ot=>{const st={};return(()=>{Object.keys(rt).forEach(ct=>{const ut=rt[ct].method,lt=tt(`OpenTok:${ot}:${ct.toLowerCase()}`);lt.log=console[ut].bind(console),st[ct.toLowerCase()]=lt})})(),st});it.setLogLevel=ot=>{let st;try{st=(typeof window!==void 0?window:commonjsGlobal).localStorage.debug}catch{st=""}const ct=[...Object.keys(rt).map(ut=>`${ot>=rt[ut].priority?"":"-"}(autogen)?OpenTok:*:${ut.toLowerCase()}`),...(st||"").split(/[\s,]/).filter(ut=>ut.indexOf("(autogen)?")===-1)].filter(ut=>ut).join(",");tt.enable(ct)},_e.exports=it},function(_e,et,b){const nt=b(546).parse();_e.exports=nt},function(_e,et){function b(tt){return tt&&tt.__esModule?tt:{default:tt}}_e.exports=b},function(_e,et,b){_e.exports=b(538)},function(_e,et,b){(function(tt){function nt(it,ot,st,at,ct,ut,lt){try{var dt=it[ut](lt),ft=dt.value}catch(St){st(St);return}dt.done?ot(ft):tt.resolve(ft).then(at,ct)}function rt(it){return function(){var ot=this,st=arguments;return new tt(function(at,ct){var ut=it.apply(ot,st);function lt(ft){nt(ut,at,ct,lt,dt,"next",ft)}function dt(ft){nt(ut,at,ct,lt,dt,"throw",ft)}lt(void 0)})}}_e.exports=rt}).call(this,b(0))},function(_e,et,b){const tt=b(18),nt=b(16),rt=b(1)("Events"),it=b(9),ot=b(408);_e.exports=function(at){const ct=new tt;return ct.on("newListener",lt=>{ct.emit(`${lt}:added`)}),ct.on("removeListener",lt=>{ct.emit(`${lt}:removed`)}),it(at,{eventsDispatched:{},on(lt,dt,ft){return typeof lt=="string"&&dt?lt.split(" ").forEach(St=>{ct.on(St,ot(dt,ft))}):Object.keys(lt).forEach(St=>{ct.on(St,ot(lt[St],dt))}),this},off(lt,dt,ft){return typeof lt=="string"?this.off(lt.split(" "),dt,ft):Array.isArray(lt)?lt.forEach(St=>{dt&&nt(dt)?ct.removeListener(St,ot(dt,ft)):ct.removeAllListeners(St)}):lt?Object.keys(lt).forEach(St=>{ct.removeListener(St,ot(lt[St],dt))}):ct.removeAllListeners(),this},once(lt,dt,ft){return typeof lt=="string"&&dt?lt.split(" ").forEach(St=>{ct.once(St,ot(dt,ft))}):Object.keys(lt).forEach(St=>{ct.once(St,ot(lt[St],dt))}),this},dispatchEvent(lt){if(!lt.type)throw new Error("dispatchEvent: Event has no type");return lt.target||(lt.target=this),this.trigger(lt.type,lt),this},dispatchEventOnce(lt,dt){this.isEventDispatched(lt.type,dt)||(this.dispatchEvent(lt),this.eventsDispatched[lt.type]?this.eventsDispatched[lt.type].push(dt):this.eventsDispatched[lt.type]=[dt])},isEventDispatched(lt,dt){var ft;return(ft=this.eventsDispatched[lt])==null?void 0:ft.includes(dt)},trigger(lt){try{for(var dt=arguments.length,ft=new Array(dt>1?dt-1:0),St=1;St<dt;St++)ft[St-1]=arguments[St];ct.emit(lt,...ft)}catch(Tt){rt.error("An error occurred in an event handler",Tt)}return this},emit(){return at.trigger(...arguments)},addEventListener(lt,dt,ft){return rt.warn("The addEventListener() method is deprecated. Use on() or once() instead."),at.on(lt,dt,ft)},removeEventListener(lt,dt,ft){return rt.warn("The removeEventListener() method is deprecated. Use off() instead."),at.off(lt,dt,ft)},listenerCount(lt){return ct.listenerCount(lt)}})}},function(_e,et,b){_e.exports={AUTHENTICATION_ERROR:"OT_AUTHENTICATION_ERROR",BADLY_FORMED_RESPONSE:"OT_BADLY_FORMED_RESPONSE",CHROME_MICROPHONE_ACQUISITION_ERROR:"OT_CHROME_MICROPHONE_ACQUISITION_ERROR",CONNECT_FAILED:"OT_CONNECT_FAILED",CONNECTION_LIMIT_EXCEEDED:"OT_CONNECTION_LIMIT_EXCEEDED",CONSTRAINTS_NOT_SATISFIED:"OT_CONSTRAINTS_NOT_SATISFIED",CREATE_PEER_CONNECTION_FAILED:"OT_CREATE_PEER_CONNECTION_FAILED",DISCONNECTED:"OT_DISCONNECTED",EMPTY_RESPONSE_BODY:"OT_EMPTY_RESPONSE_BODY",GET_RTC_STATS_REPORT_NOT_SUPPORTED:"OT_GET_RTC_STATS_REPORT_NOT_SUPPORTED",HARDWARE_UNAVAILABLE:"OT_HARDWARE_UNAVAILABLE",ICE_WORKFLOW_FAILED:"OT_ICE_WORKFLOW_FAILED",INVALID_HTTP_STATUS:"OT_INVALID_HTTP_STATUS",INVALID_PARAMETER:"OT_INVALID_PARAMETER",INVALID_SESSION_ID:"OT_INVALID_SESSION_ID",MEDIA_ERR_ABORTED:"OT_MEDIA_ERR_ABORTED",MEDIA_ERR_DECODE:"OT_MEDIA_ERR_DECODE",MEDIA_ERR_NETWORK:"OT_MEDIA_ERR_NETWORK",MEDIA_ERR_SRC_NOT_SUPPORTED:"OT_MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ENDED:"OT_MEDIA_ENDED",NO_DEVICES_FOUND:"OT_NO_DEVICES_FOUND",NO_VALID_CONSTRAINTS:"OT_NO_VALID_CONSTRAINTS",NOT_CONNECTED:"OT_NOT_CONNECTED",NOT_FOUND:"OT_NOT_FOUND",NOT_SUPPORTED:"OT_NOT_SUPPORTED",PEER_CONNECTION_NOT_CONNECTED:"OT_PEER_CONNECTION_NOT_CONNECTED",PERMISSION_DENIED:"OT_PERMISSION_DENIED",RATE_LIMIT_EXCEEDED:"OT_RATE_LIMIT_EXCEEDED",REPORT_ISSUE_FAILED:"OT_REPORT_ISSUE_FAILED",SCREEN_SHARING_EXTENSION_NOT_INSTALLED:"OT_SCREEN_SHARING_EXTENSION_NOT_INSTALLED",SCREEN_SHARING_EXTENSION_NOT_REGISTERED:"OT_SCREEN_SHARING_EXTENSION_NOT_REGISTERED",SCREEN_SHARING_NOT_SUPPORTED:"OT_SCREEN_SHARING_NOT_SUPPORTED",SET_REMOTE_DESCRIPTION_FAILED:"OT_SET_REMOTE_DESCRIPTION_FAILED",FAILED_SET_CONFIGURATION:"OT_FAILED_SET_CONFIGURATION",SOCKET_ALREADY_CONNECTED_CONNECTING:"OT_SOCKET_ALREADY_CONNECTED_CONNECTING",SOCKET_CLOSE_ABNORMAL:"OT_SOCKET_CLOSE_ABNORMAL",SOCKET_CLOSE_CONNECT_EXCEPTION:"OT_SOCKET_CLOSE_CONNECT_EXCEPTION",SOCKET_CLOSE_CONNECTIVITY_LOSS:"OT_SOCKET_CLOSE_CONNECTIVITY_LOSS",SOCKET_CLOSE_FALLBACK_CODE:"OT_SOCKET_CLOSE_FALLBACK_CODE",SOCKET_CLOSE_INCONSISTENT_DATA:"OT_SOCKET_CLOSE_INCONSISTENT_DATA",SOCKET_CLOSE_NO_STATUS:"OT_SOCKET_CLOSE_NO_STATUS",SOCKET_CLOSE_POLICY_VIOLATION:"OT_SOCKET_CLOSE_POLICY_VIOLATION",SOCKET_CLOSE_GOING_AWAY:"OT_SOCKET_CLOSE_GOING_AWAY",SOCKET_CLOSE_PROTOCOL_ERROR:"OT_SOCKET_CLOSE_PROTOCOL_ERROR",SOCKET_CLOSE_TIMEOUT:"OT_SOCKET_CLOSE_TIMEOUT",SOCKET_CLOSE_TOO_LARGE:"OT_SOCKET_CLOSE_TOO_LARGE",SOCKET_CLOSE_UNEXPECTED_CONDITION:"OT_SOCKET_CLOSE_UNEXPECTED_CONDITION",SOCKET_CLOSE_UNSUPPORTED:"OT_SOCKET_CLOSE_UNSUPPORTED",STREAM_CREATE_FAILED:"OT_STREAM_CREATE_FAILED",STREAM_DESTROYED:"OT_STREAM_DESTROYED",STREAM_LIMIT_EXCEEDED:"OT_STREAM_LIMIT_EXCEEDED",STREAM_NOT_FOUND:"OT_STREAM_NOT_FOUND",UNABLE_TO_SUBSCRIBE:"OT_UNABLE_TO_SUBSCRIBE",TERMS_OF_SERVICE_FAILURE:"OT_TERMS_OF_SERVICE_FAILURE",TIMEOUT:"OT_TIMEOUT",CANCEL:"OT_CANCEL",UNABLE_TO_CAPTURE_MEDIA:"OT_UNABLE_TO_CAPTURE_MEDIA",UNABLE_TO_CAPTURE_SCREEN:"OT_UNABLE_TO_CAPTURE_SCREEN",UNEXPECTED_ERROR_CODE:"OT_UNEXPECTED_ERROR_CODE",UNEXPECTED_HTTP_STATUS:"OT_UNEXPECTED_HTTP_STATUS",UNEXPECTED_SERVER_RESPONSE:"OT_UNEXPECTED_SERVER_RESPONSE",UNKNOWN_HTTP_ERROR:"OT_UNKNOWN_HTTP_ERROR",UNSUPPORTED_BROWSER:"OT_UNSUPPORTED_BROWSER",USER_MEDIA_ACCESS_DENIED:"OT_USER_MEDIA_ACCESS_DENIED",XDOMAIN_OR_PARSING_ERROR:"OT_XDOMAIN_OR_PARSING_ERROR",API_KEY_DISABLED:"OT_API_KEY_DISABLED",UNABLE_TO_ACCESS_MEDIA_ENGINE:"OT_UNABLE_TO_ACCESS_MEDIA_ENGINE",SET_PROXY_URL_TIMING_ERROR:"OT_SET_PROXY_URL_TIMING_ERROR",PROXY_URL_ALREADY_SET_ERROR:"OT_PROXY_URL_ALREADY_SET_ERROR",SET_VIDEO_SOURCE_FAILURE:"OT_SET_VIDEO_SOURCE_FAILURE",INVALID_VIDEO_SOURCE:"OT_INVALID_VIDEO_SOURCE",REQUESTED_DEVICE_PERMISSION_DENIED:"OT_REQUESTED_DEVICE_PERMISSION_DENIED",INVALID_AUDIO_OUTPUT_SOURCE:"OT_INVALID_AUDIO_OUTPUT_SOURCE",INVALID_ENCRYPTION_SECRET:"OT_INVALID_ENCRYPTION_SECRET"}},function(_e,et,b){const tt=b(244),nt=b(248),rt=b(6),it=b(1);tt.logging=it("OT.$"),tt.ElementCollection=b(245),tt.env=b(2),tt.ajax=b(243),tt.statable=b(555),tt.Analytics=b(20),tt.Collection=b(247),tt.domExtras=b(556),tt.Error=b(249),nt(tt,"useLogHelpers",{value(ot){const st=it("useLogHelpersDeprecatedMixin");return Object.keys(st).forEach(at=>{ot[at]=st[at]}),ot},name:"OT.useLogHelpers",getWarning:"Please use an external library for your debugging needs"}),tt.defaults=b(141),nt(tt,"eventing",{value:rt,name:"OT.$.eventing",getWarning:"Please use an external library to create an event emitter."}),Object.keys(tt).forEach(ot=>{const at=tt[ot]._attachToOTHelpers||{};Object.keys(at).forEach(ct=>{Object.hasOwnProperty.call(tt,ct)&&!(ot==="util"&&ct==="bind")&&console.warn(`More than one module is trying to define ${ct} on OTHelpers.`),tt[ct]=at[ct]})}),_e.exports=tt},function(_e,et,b){var tt=b(83),nt=b(40),rt=b(191),it=b(25),ot=b(67),st=b(30),at=Object.prototype,ct=at.hasOwnProperty,ut=rt(function(lt,dt){if(ot(dt)||it(dt)){nt(dt,st(dt),lt);return}for(var ft in dt)ct.call(dt,ft)&&tt(lt,ft,dt[ft])});_e.exports=ut},function(_e,et,b){_e.exports={JS_EXCEPTION:2e3,AUTHENTICATION_ERROR:1004,INVALID_SESSION_ID:1005,CONNECT_FAILED:1006,CONNECT_REJECTED:1007,CONNECTION_TIMEOUT:1008,NOT_CONNECTED:1010,INVALID_PARAMETER:1011,P2P_CONNECTION_FAILED:1013,API_RESPONSE_FAILURE:1014,PEER_CONNECTION_NOT_CONNECTED:1015,TERMS_OF_SERVICE_FAILURE:1026,CONNECTION_LIMIT_EXCEEDED:1027,UNABLE_TO_PUBLISH:1500,UNABLE_TO_SUBSCRIBE:1501,UNSUPPORTED_VIDEO_CODEC:1502,UNABLE_TO_FORCE_DISCONNECT:1520,UNABLE_TO_FORCE_UNPUBLISH:1530,UNABLE_TO_FORCE_MUTE:1540,PUBLISHER_ICE_WORKFLOW_FAILED:1553,SUBSCRIBER_ICE_WORKFLOW_FAILED:1554,STREAM_LIMIT_EXCEEDED:1605,UNEXPECTED_SERVER_RESPONSE:2001,REPORT_ISSUE_ERROR:2011,SET_PROXY_URL_TIMING_ERROR:2021,PROXY_URL_ALREADY_SET_ERROR:2022,GET_RTC_STATS_REPORT_NOT_SUPPORTED:2031,ANVIL_BADLY_FORMED_RESPONSE:3001,ANVIL_INVALID_HTTP_STATUS:3002,ANVIL_XDOMAIN_OR_PARSING_ERROR:3003,ANVIL_UNKNOWN_HTTP_ERROR:3004,ANVIL_UNEXPECTED_ERROR_CODE:3005,ANVIL_EMPTY_RESPONSE_BODY:3006,ANVIL_CONNECT_FAILED:3007,UNABLE_TO_ACCESS_MEDIA_ENGINE:5001}},function(_e,et){function b(tt){var nt=typeof tt;return tt!=null&&(nt=="object"||nt=="function")}_e.exports=b},function(_e,et){var b=Array.isArray;_e.exports=b},function(_e,et,b){_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt.Errors||b(7),it=nt.OTErrorClass||b(22),ot=Object.keys(rt).map(st=>rt[st]);return function(at,ct,ut){if(ot.indexOf(at)===-1)return new Error(`Attempt to use invalid error name (${at}). Original message: ${ct.message}`);if(!(ct instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(ct))))return new Error(`Did not pass Error as second argument: ${ct}`);const lt=new it(void 0,ct.message);if(lt.name=at,!ct.stack)try{throw ct}catch{}return lt.stack=ct.stack,ut&&(lt.code=ut),lt}}},function(_e,et,b){var tt=b(173),nt=typeof self=="object"&&self&&self.Object===Object&&self,rt=tt||nt||Function("return this")();_e.exports=rt},function(_e,et,b){var tt=b(540),nt=b(541),rt=nt;rt.v1=tt,rt.v4=nt,_e.exports=rt},function(_e,et,b){var tt=b(29),nt=b(11),rt="[object AsyncFunction]",it="[object Function]",ot="[object GeneratorFunction]",st="[object Proxy]";function at(ct){if(!nt(ct))return!1;var ut=tt(ct);return ut==it||ut==ot||ut==rt||ut==st}_e.exports=at},function(_e,et){function b(tt){return tt!=null&&typeof tt=="object"}_e.exports=b},function(_e,et,b){(function(tt){var nt=typeof Reflect=="object"?Reflect:null,rt=nt&&typeof nt.apply=="function"?nt.apply:function(kt,Vt,Nt){return Function.prototype.apply.call(kt,Vt,Nt)},it;nt&&typeof nt.ownKeys=="function"?it=nt.ownKeys:Object.getOwnPropertySymbols?it=function(kt){return Object.getOwnPropertyNames(kt).concat(Object.getOwnPropertySymbols(kt))}:it=function(kt){return Object.getOwnPropertyNames(kt)};function ot(At){console&&console.warn&&console.warn(At)}var st=Number.isNaN||function(kt){return kt!==kt};function at(){at.init.call(this)}_e.exports=at,_e.exports.once=It,at.EventEmitter=at,at.prototype._events=void 0,at.prototype._eventsCount=0,at.prototype._maxListeners=void 0;var ct=10;function ut(At){if(typeof At!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof At)}Object.defineProperty(at,"defaultMaxListeners",{enumerable:!0,get:function(){return ct},set:function(At){if(typeof At!="number"||At<0||st(At))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+At+".");ct=At}}),at.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},at.prototype.setMaxListeners=function(kt){if(typeof kt!="number"||kt<0||st(kt))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+kt+".");return this._maxListeners=kt,this};function lt(At){return At._maxListeners===void 0?at.defaultMaxListeners:At._maxListeners}at.prototype.getMaxListeners=function(){return lt(this)},at.prototype.emit=function(kt){for(var Vt=[],Nt=1;Nt<arguments.length;Nt++)Vt.push(arguments[Nt]);var tn=kt==="error",_t=this._events;if(_t!==void 0)tn=tn&&_t.error===void 0;else if(!tn)return!1;if(tn){var Kt;if(Vt.length>0&&(Kt=Vt[0]),Kt instanceof Error)throw Kt;var cn=new Error("Unhandled error."+(Kt?" ("+Kt.message+")":""));throw cn.context=Kt,cn}var an=_t[kt];if(an===void 0)return!1;if(typeof an=="function")rt(an,this,Vt);else for(var mn=an.length,on=gt(an,mn),Nt=0;Nt<mn;++Nt)rt(on[Nt],this,Vt);return!0};function dt(At,kt,Vt,Nt){var tn,_t,Kt;if(ut(Vt),_t=At._events,_t===void 0?(_t=At._events=Object.create(null),At._eventsCount=0):(_t.newListener!==void 0&&(At.emit("newListener",kt,Vt.listener?Vt.listener:Vt),_t=At._events),Kt=_t[kt]),Kt===void 0)Kt=_t[kt]=Vt,++At._eventsCount;else if(typeof Kt=="function"?Kt=_t[kt]=Nt?[Vt,Kt]:[Kt,Vt]:Nt?Kt.unshift(Vt):Kt.push(Vt),tn=lt(At),tn>0&&Kt.length>tn&&!Kt.warned){Kt.warned=!0;var cn=new Error("Possible EventEmitter memory leak detected. "+Kt.length+" "+String(kt)+" listeners added. Use emitter.setMaxListeners() to increase limit");cn.name="MaxListenersExceededWarning",cn.emitter=At,cn.type=kt,cn.count=Kt.length,ot(cn)}return At}at.prototype.addListener=function(kt,Vt){return dt(this,kt,Vt,!1)},at.prototype.on=at.prototype.addListener,at.prototype.prependListener=function(kt,Vt){return dt(this,kt,Vt,!0)};function ft(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function St(At,kt,Vt){var Nt={fired:!1,wrapFn:void 0,target:At,type:kt,listener:Vt},tn=ft.bind(Nt);return tn.listener=Vt,Nt.wrapFn=tn,tn}at.prototype.once=function(kt,Vt){return ut(Vt),this.on(kt,St(this,kt,Vt)),this},at.prototype.prependOnceListener=function(kt,Vt){return ut(Vt),this.prependListener(kt,St(this,kt,Vt)),this},at.prototype.removeListener=function(kt,Vt){var Nt,tn,_t,Kt,cn;if(ut(Vt),tn=this._events,tn===void 0)return this;if(Nt=tn[kt],Nt===void 0)return this;if(Nt===Vt||Nt.listener===Vt)--this._eventsCount===0?this._events=Object.create(null):(delete tn[kt],tn.removeListener&&this.emit("removeListener",kt,Nt.listener||Vt));else if(typeof Nt!="function"){for(_t=-1,Kt=Nt.length-1;Kt>=0;Kt--)if(Nt[Kt]===Vt||Nt[Kt].listener===Vt){cn=Nt[Kt].listener,_t=Kt;break}if(_t<0)return this;_t===0?Nt.shift():yt(Nt,_t),Nt.length===1&&(tn[kt]=Nt[0]),tn.removeListener!==void 0&&this.emit("removeListener",kt,cn||Vt)}return this},at.prototype.off=at.prototype.removeListener,at.prototype.removeAllListeners=function(kt){var Vt,Nt,tn;if(Nt=this._events,Nt===void 0)return this;if(Nt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Nt[kt]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Nt[kt]),this;if(arguments.length===0){var _t=Object.keys(Nt),Kt;for(tn=0;tn<_t.length;++tn)Kt=_t[tn],Kt!=="removeListener"&&this.removeAllListeners(Kt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Vt=Nt[kt],typeof Vt=="function")this.removeListener(kt,Vt);else if(Vt!==void 0)for(tn=Vt.length-1;tn>=0;tn--)this.removeListener(kt,Vt[tn]);return this};function Tt(At,kt,Vt){var Nt=At._events;if(Nt===void 0)return[];var tn=Nt[kt];return tn===void 0?[]:typeof tn=="function"?Vt?[tn.listener||tn]:[tn]:Vt?Et(tn):gt(tn,tn.length)}at.prototype.listeners=function(kt){return Tt(this,kt,!0)},at.prototype.rawListeners=function(kt){return Tt(this,kt,!1)},at.listenerCount=function(At,kt){return typeof At.listenerCount=="function"?At.listenerCount(kt):pt.call(At,kt)},at.prototype.listenerCount=pt;function pt(At){var kt=this._events;if(kt!==void 0){var Vt=kt[At];if(typeof Vt=="function")return 1;if(Vt!==void 0)return Vt.length}return 0}at.prototype.eventNames=function(){return this._eventsCount>0?it(this._events):[]};function gt(At,kt){for(var Vt=new Array(kt),Nt=0;Nt<kt;++Nt)Vt[Nt]=At[Nt];return Vt}function yt(At,kt){for(;kt+1<At.length;kt++)At[kt]=At[kt+1];At.pop()}function Et(At){for(var kt=new Array(At.length),Vt=0;Vt<kt.length;++Vt)kt[Vt]=At[Vt].listener||At[Vt];return kt}function It(At,kt){return new tt(function(Vt,Nt){function tn(Kt){At.removeListener(kt,_t),Nt(Kt)}function _t(){typeof At.removeListener=="function"&&At.removeListener("error",tn),Vt([].slice.call(arguments))}Wt(At,kt,_t,{once:!0}),kt!=="error"&&Gt(At,tn,{once:!0})})}function Gt(At,kt,Vt){typeof At.on=="function"&&Wt(At,"error",kt,Vt)}function Wt(At,kt,Vt,Nt){if(typeof At.on=="function")Nt.once?At.once(kt,Vt):At.on(kt,Vt);else if(typeof At.addEventListener=="function")At.addEventListener(kt,function tn(_t){Nt.once&&At.removeEventListener(kt,tn),Vt(_t)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof At)}}).call(this,b(0))},function(_e,et,b){var tt=b(207),nt=Object.prototype.toString;function rt(Nt){return nt.call(Nt)==="[object Array]"}function it(Nt){return typeof Nt>"u"}function ot(Nt){return Nt!==null&&!it(Nt)&&Nt.constructor!==null&&!it(Nt.constructor)&&typeof Nt.constructor.isBuffer=="function"&&Nt.constructor.isBuffer(Nt)}function st(Nt){return nt.call(Nt)==="[object ArrayBuffer]"}function at(Nt){return typeof FormData<"u"&&Nt instanceof FormData}function ct(Nt){var tn;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?tn=ArrayBuffer.isView(Nt):tn=Nt&&Nt.buffer&&Nt.buffer instanceof ArrayBuffer,tn}function ut(Nt){return typeof Nt=="string"}function lt(Nt){return typeof Nt=="number"}function dt(Nt){return Nt!==null&&typeof Nt=="object"}function ft(Nt){if(nt.call(Nt)!=="[object Object]")return!1;var tn=Object.getPrototypeOf(Nt);return tn===null||tn===Object.prototype}function St(Nt){return nt.call(Nt)==="[object Date]"}function Tt(Nt){return nt.call(Nt)==="[object File]"}function pt(Nt){return nt.call(Nt)==="[object Blob]"}function gt(Nt){return nt.call(Nt)==="[object Function]"}function yt(Nt){return dt(Nt)&&gt(Nt.pipe)}function Et(Nt){return typeof URLSearchParams<"u"&&Nt instanceof URLSearchParams}function It(Nt){return Nt.trim?Nt.trim():Nt.replace(/^\s+|\s+$/g,"")}function Gt(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Wt(Nt,tn){if(!(Nt===null||typeof Nt>"u"))if(typeof Nt!="object"&&(Nt=[Nt]),rt(Nt))for(var _t=0,Kt=Nt.length;_t<Kt;_t++)tn.call(null,Nt[_t],_t,Nt);else for(var cn in Nt)Object.prototype.hasOwnProperty.call(Nt,cn)&&tn.call(null,Nt[cn],cn,Nt)}function At(){var Nt={};function tn(cn,an){ft(Nt[an])&&ft(cn)?Nt[an]=At(Nt[an],cn):ft(cn)?Nt[an]=At({},cn):rt(cn)?Nt[an]=cn.slice():Nt[an]=cn}for(var _t=0,Kt=arguments.length;_t<Kt;_t++)Wt(arguments[_t],tn);return Nt}function kt(Nt,tn,_t){return Wt(tn,function(cn,an){_t&&typeof cn=="function"?Nt[an]=tt(cn,_t):Nt[an]=cn}),Nt}function Vt(Nt){return Nt.charCodeAt(0)===65279&&(Nt=Nt.slice(1)),Nt}_e.exports={isArray:rt,isArrayBuffer:st,isBuffer:ot,isFormData:at,isArrayBufferView:ct,isString:ut,isNumber:lt,isObject:dt,isPlainObject:ft,isUndefined:it,isDate:St,isFile:Tt,isBlob:pt,isFunction:gt,isStream:yt,isURLSearchParams:Et,isStandardBrowserEnv:Gt,forEach:Wt,merge:At,extend:kt,trim:It,stripBOM:Vt}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5)),it=tt(b(45));const ot=b(240),st=b(542),at=b(142),ct=b(34)(),ut=b(557),lt=b(6),dt=b(559),ft=b(562),St="2";let Tt=function(){function pt(yt){let Et=yt===void 0?{}:yt,It=Et.staticConfig,Gt=It===void 0?ct.onlyLocal():It,Wt=Et.sessionInfo,At=Wt===void 0?new at:Wt,kt=Et.ajax,Vt=Et.queue,Nt=Et.getUserAgentClientHintData,tn=Nt===void 0?ft:Nt,_t=Et.userAgentData,Kt=_t===void 0?typeof navigator<"u"&&navigator.userAgentData:_t;this.getTurnServerName=cn=>{let an,mn;return!cn||typeof cn!="object"?an:((Array.isArray(cn)?cn:[cn]).forEach(yn=>{const fn=yn.urls||yn.url;(Array.isArray(fn)?fn:[fn]).forEach(un=>{const Ln=un.indexOf(":")+1,Xn=un.lastIndexOf(":");un.includes("turns")?mn=un.substring(Ln,Xn):an=un.substring(Ln,Xn)})}),mn||an)},this.ajax=kt,this.queue=Vt,this.sessionInfo=At,this.getUserAgentClientHintData=tn,this.userAgentData=Kt,this.staticConfig=Gt}var gt=pt.prototype;return gt._getCachedUserAgentData=function(){var yt=(0,rt.default)(nt.default.mark(function It(){return nt.default.wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:if(this.cachedUserAgentData){Wt.next=4;break}return Wt.next=3,this.getUserAgentClientHintData(this.userAgentData);case 3:this.cachedUserAgentData=Wt.sent;case 4:return Wt.abrupt("return",this.cachedUserAgentData);case 5:case"end":return Wt.stop()}},It,this)}));function Et(){return yt.apply(this,arguments)}return Et}(),gt.commonQoSFields=function(){const Et=this._analytics.proxyUrl,It=this.sessionInfo.messagingURL;return{clientVersion:this.staticConfig.clientVersion,buildHash:this.staticConfig.buildHash,source:(typeof window!==void 0?window:commonjsGlobal).location&&(typeof window!==void 0?window:commonjsGlobal).location.href,logVersion:St,apiServer:this.staticConfig.apiUrl,clientSystemTime:new Date().getTime(),sessionId:this.sessionInfo.sessionId,mediaServerName:this.sessionInfo.mediaServerName,relayServer:this.getTurnServerName(this.sessionInfo.iceServers),p2p:this.sessionInfo.p2pEnabled,messagingServer:this.sessionInfo.messagingServer,messagingUrl:ut(Et,It),version:this.staticConfig.version,partnerId:this.sessionInfo.partnerId}},gt._getCommonDataFields=function(){var yt=(0,rt.default)(nt.default.mark(function It(){var Gt,Wt;return nt.default.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,ot.getAsync();case 2:return Gt=kt.sent,kt.next=5,this._getCachedUserAgentData();case 5:return Wt=kt.sent,kt.abrupt("return",Object.assign({guid:Gt},this.commonQoSFields(),Wt));case 7:case"end":return kt.stop()}},It,this)}));function Et(){return yt.apply(this,arguments)}return Et}(),gt.logError=function(Et,It,Gt,Wt,At){At===void 0&&(At={}),this._getCommonDataFields().then(kt=>{const Vt=[Et,It,Gt,Wt,Object.assign({},kt,At)];pt.emit("logError",...Vt),this._analytics.logError(...Vt)})},gt.logEvent=function(Et,It,Gt){Et===void 0&&(Et={}),this._getCommonDataFields().then(Wt=>{const At=Object.assign({},Wt,Et);pt.emit("logEvent",At),this._analytics.logEvent(At,!1,It,Gt)})},gt.logQOS=function(Et){Et===void 0&&(Et={}),this._getCommonDataFields().then(It=>{const Gt=Object.assign({duration:0},It,Et);dt(Gt),pt.emit("logQOS",Gt),this._analytics.logQOS(Gt)})},(0,it.default)(pt,[{key:"staticConfig",get:function(){return this._staticConfig},set:function(Et){this._staticConfig=Et,this._analytics=new st({loggingUrl:this.staticConfig.loggingUrl,ajax:this.ajax,queue:this.queue})}}]),pt}();lt(Tt),_e.exports=Tt},function(_e,et,b){const tt=b(247),nt={publishers:new tt("guid"),subscribers:new tt("widgetId"),sessions:new tt};_e.exports=nt},function(_e,et,b){const tt=b(1)("GlobalExceptionHandler"),nt=b(6),rt=b(26),it=b(554),ot=b(23)(),st=function(ct,ut){Error.call(this),this.code=ct,this.message=ut};st.prototype=Object.create(Error.prototype),st.prototype.constructor=st,_e.exports=st,nt(st),st.getTitleByCode=function(at){return it[+at]},st.handleJsException=at=>{let ct=at.error,ut=at.errorMsg,lt=at.code,dt=at.target,ft=at.analytics;if(!dt)throw new Error("handleJsException requires target");const St=()=>lt!==void 0?lt:ct&&ct.code,Tt=()=>ut!==void 0?ut:ct&&ct.message,pt=st.getTitleByCode(St());tt.error(`OT.exception :: title: ${pt} (${St()}) msg: ${Tt()}`);try{const gt={partnerId:dt.session?dt.session.apiKey:dt.apiKey,sessionId:dt.session?dt.session.sessionId:dt.sessionId};ft.logError(St(),"tb.exception",pt,{details:Tt()},gt);const yt=new ot.ExceptionEvent(rt.EXCEPTION,Tt(),pt,St(),dt,dt,ct);if(ct)yt.stack=ct.stack;else try{throw new Error}catch(Et){yt.stack=Et.stack}st.dispatchEvent(yt)}catch(gt){tt.error(`OT.exception :: Failed to dispatch exception - ${gt.toString()}`)}}},function(_e,et,b){var tt=b(3),nt=tt(b(45)),rt=tt(b(48));const it=b(128),ot=b(26);_e.exports=function(at){at===void 0&&(at={});const ct=at.logging||b(1)("Events"),ut={};ut.ExceptionEvent=function(gt,yt,Et,It,Gt,Wt,At){return new it(gt,!1,{error:At,message:yt,title:Et,code:It,component:Gt,target:Wt})},ut.IssueReportedEvent=function(gt,yt){return new it(gt,!1,{issueId:yt})},ut.EnvLoadedEvent=function(gt){return new it(gt,!1)};let lt=!1;ut.ConnectionEvent=function(pt){(0,rt.default)(gt,pt);function gt(yt,Et,It){return pt.call(this,yt,!1,{connection:Et,reason:It})||this}return(0,nt.default)(gt,[{key:"connections",get:function(){return lt||(ct.warn("OT.ConnectionEvent connections property is deprecated, use connection instead."),lt=!0),[this.connection]}}]),gt}(it);let dt=!1;ut.StreamEvent=function(pt){(0,rt.default)(gt,pt);function gt(yt,Et,It,Gt){return pt.call(this,yt,Gt,{stream:Et,reason:It})||this}return(0,nt.default)(gt,[{key:"streams",get:function(){return dt||(ct.warn("OT.StreamEvent streams property is deprecated, use stream instead."),dt=!0),[this.stream]}}]),gt}(it);let ft=!1,St=!1,Tt=!1;return ut.SessionConnectEvent=function(pt){(0,rt.default)(gt,pt);function gt(yt){return pt.call(this,yt,!1)||this}return(0,nt.default)(gt,[{key:"connections",get:function(){return ft||(ct.warn("OT.SessionConnectedEvent no longer includes connections. Listen for connectionCreated events instead."),ft=!0),[]}},{key:"streams",get:function(){return St||(ct.warn("OT.SessionConnectedEvent no longer includes streams. Listen for streamCreated events instead."),St=!0),[]}},{key:"archives",get:function(){return Tt||(ct.warn("OT.SessionConnectedEvent no longer includes archives. Listen for archiveStarted events instead."),Tt=!0),[]}}]),gt}(it),ut.SessionReconnectingEvent=function(){return new it(ot.SESSION_RECONNECTING,!1)},ut.SessionReconnectedEvent=function(){return new it(ot.SESSION_RECONNECTED)},ut.SessionDisconnectEvent=function(gt,yt,Et){return new it(gt,Et,{reason:yt})},ut.StreamPropertyChangedEvent=function(gt,yt,Et,It,Gt){return new it(gt,!1,{stream:yt,changedProperty:Et,oldValue:It,newValue:Gt})},ut.VideoDimensionsChangedEvent=function(gt,yt,Et){return new it("videoDimensionsChanged",!1,{target:gt,oldValue:yt,newValue:Et})},ut.ArchiveEvent=function(gt,yt){return new it(gt,!1,{id:yt.id,name:yt.name,status:yt.status,archive:yt})},ut.ArchiveUpdatedEvent=function(gt,yt,Et,It){return new it("updated",!1,{target:gt,changedProperty:yt,oldValue:Et,newValue:It})},ut.SignalEvent=function(gt,yt,Et){return new it(gt?`signal:${gt}`:ot.SIGNAL,!1,{data:yt,from:Et})},ut.CaptionReceivedEvent=function(gt,yt,Et){return new it("caption",!1,{caption:gt,streamId:yt,isFinal:Et})},ut.PublisherCaptionsEnabled=function(gt){return new it("publisherCaptionsEnabled",!1,{captionsEnabled:gt})},ut.StreamUpdatedEvent=function(gt,yt,Et,It){return new it("updated",!1,{target:gt,changedProperty:yt,oldValue:Et,newValue:It})},ut.DestroyedEvent=function(gt,yt,Et){return new it(gt,!1,{target:yt,reason:Et})},ut.ConnectionStateChangedEvent=function(gt,yt){return new it(gt,!1,{target:yt})},ut.VideoEnabledChangedEvent=function(gt,yt){return new it(gt,!1,{reason:yt.reason})},ut.VideoDisableWarningEvent=function(gt){return new it(gt,!1)},ut.AudioLevelUpdatedEvent=function(gt){return new it(ot.AUDIO_LEVEL_UPDATED,!1,{audioLevel:gt})},ut.MediaStoppedEvent=function(gt,yt){return new it(ot.MEDIA_STOPPED,!0,{target:gt,track:yt})},ut.MuteForcedEvent=function(gt){return new it(ot.MUTE_FORCED,!1,gt)},ut.VideoElementCreatedEvent=function(gt){return new it(ot.VIDEO_ELEMENT_CREATED,!1,{element:gt})},ut}},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5));_e.exports=function(ot){ot===void 0&&(ot={});const st=ot.getNativeEnumerateDevices||b(287)(),at=ot.getNativeMediaDevices||b(646)(),ct=ot.currentAudioOutputDevice||b(106),ut=ct.getCurrentAudioOutputDeviceId,lt=ot.env||b(2),dt=ot.global||(typeof window!==void 0?window:commonjsGlobal),ft={},St={audio:"audioInput",video:"videoInput",audioinput:"audioInput",videoinput:"videoInput",audiooutput:"audioOutput",audioInput:"audioInput",videoInput:"videoInput",audioOutput:"audioOutput"},Tt=()=>st()();return ft.getNativeMediaDevices=()=>at(),ft.hasEnumerateDevicesCapability=()=>typeof st()=="function",ft.hasDeviceChangeCapability=()=>{const pt=at();return!!(pt&&"ondevicechange"in pt)},ft.hasSetSinkIdCapability=()=>"setSinkId"in(dt==null?void 0:dt.HTMLMediaElement.prototype),ft.hasAudioOutputApiSupport=()=>ft.hasSetSinkIdCapability()&&ft.hasDeviceChangeCapability(),ft.hasEnumerateDevicesBug=()=>lt.isSafari&&lt.version===13.1,ft.getMediaDevices=()=>ft.hasEnumerateDevicesCapability()?Tt().then(pt=>pt.map(gt=>({deviceId:gt.deviceId||gt.id,label:gt.label,kind:St[gt.kind]}))):tt.reject(new Error("This browser does not support enumerateDevices APIs")),ft.getInputMediaDevices=()=>ft.getMediaDevices().then(pt=>pt.filter(gt=>/^(audio|video)Input$/.test(gt.kind))),ft.getAudioOutputMediaDevices=()=>ft.getMediaDevices().then(pt=>pt.filter(gt=>gt.kind==="audioOutput").map(gt=>{let yt=gt.deviceId,Et=gt.label;return{deviceId:yt,label:Et}})),ft.shouldAskForDevices=()=>ft.hasEnumerateDevicesCapability()?ft.getInputMediaDevices().then(pt=>{if(pt.length===0)return{video:!0,audio:!0};const gt=pt.filter(Et=>Et.kind==="audioInput"),yt=pt.filter(Et=>Et.kind==="videoInput");return ft.hasEnumerateDevicesBug()&&yt.length===0?{audio:!0,video:!0}:{video:yt.length>0,audio:gt.length>0,videoDevices:yt,audioDevices:gt}}).catch(()=>({video:!0,audio:!0})):tt.resolve({video:!0,audio:!0}),ft.getDefaultAudioOutputDeviceId=pt=>!Array.isArray(pt)||pt.length===0?"":(pt.find(Et=>Et.deviceId==="default")||pt[0]).deviceId,ft.hasDevice=(pt,gt)=>{let yt=pt;return Array.isArray(yt)||(yt=[]),yt.some(Et=>Et.deviceId===gt)},ft.getActiveAudioOutputDevice=(0,it.default)(rt.default.mark(function pt(){var gt,yt,Et;return rt.default.wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return Gt.prev=0,Gt.next=3,ft.getAudioOutputMediaDevices();case 3:gt=Gt.sent,Gt.next=9;break;case 6:throw Gt.prev=6,Gt.t0=Gt.catch(0),Gt.t0;case 9:if(gt.length!==0){Gt.next=11;break}return Gt.abrupt("return",{deviceId:null,label:null});case 11:return yt=gt.find(Wt=>Wt.deviceId===ut()),yt||(Et=ft.getDefaultAudioOutputDeviceId(gt),yt=gt.find(Wt=>Wt.deviceId===Et)),Gt.abrupt("return",yt);case 14:case"end":return Gt.stop()}},pt,null,[[0,6]])})),ft}}).call(this,b(0))},function(_e,et,b){var tt=b(16),nt=b(114);function rt(it){return it!=null&&nt(it.length)&&!tt(it)}_e.exports=rt},function(_e,et,b){_e.exports={ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",ISSUE_REPORTED:"issueReported",SESSION_CONNECTED:"sessionConnected",SESSION_RECONNECTING:"sessionReconnecting",SESSION_RECONNECTED:"sessionReconnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL:"signal",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",INVALID_DEVICE_NAME:"invalidDeviceName",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ACCESS_DIALOG_OPENED:"accessDialogOpened",ACCESS_DIALOG_CLOSED:"accessDialogClosed",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",MEDIA_STOPPED:"mediaStopped",PUBLISHER_DESTROYED:"destroyed",MUTE_FORCED:"muteForced",SUBSCRIBER_DESTROYED:"destroyed",SUBSCRIBER_CONNECTED:"connected",SUBSCRIBER_DISCONNECTED:"disconnected",SUBSCRIBER_CAPTION_RECEIVED:"captionReceived",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",MICLEVEL:"microphoneActivityLevel",MICGAINCHANGED:"microphoneGainChanged",ENV_LOADED:"envLoaded",ENV_UNLOADED:"envUnloaded",AUDIO_LEVEL_UPDATED:"audioLevelUpdated",VIDEO_ELEMENT_CREATED:"videoElementCreated"}},function(_e,et,b){var tt=!0,nt=!0;function rt(ot,st,at){var ct=ot.match(st);return ct&&ct.length>=at&&parseInt(ct[at],10)}function it(ot,st,at){if(ot.RTCPeerConnection){var ct=ot.RTCPeerConnection.prototype,ut=ct.addEventListener;ct.addEventListener=function(dt,ft){if(dt!==st)return ut.apply(this,arguments);var St=function(Tt){var pt=at(Tt);pt&&ft(pt)};return this._eventMap=this._eventMap||{},this._eventMap[ft]=St,ut.apply(this,[dt,St])};var lt=ct.removeEventListener;ct.removeEventListener=function(dt,ft){if(dt!==st||!this._eventMap||!this._eventMap[ft])return lt.apply(this,arguments);var St=this._eventMap[ft];return delete this._eventMap[ft],lt.apply(this,[dt,St])},Object.defineProperty(ct,"on"+st,{get:function(){return this["_on"+st]},set:function(dt){this["_on"+st]&&(this.removeEventListener(st,this["_on"+st]),delete this["_on"+st]),dt&&this.addEventListener(st,this["_on"+st]=dt)},enumerable:!0,configurable:!0})}}_e.exports={extractVersion:rt,wrapPeerConnectionEvent:it,disableLog:function(ot){return typeof ot!="boolean"?new Error("Argument type: "+typeof ot+". Please use a boolean."):(tt=ot,ot?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(ot){return typeof ot!="boolean"?new Error("Argument type: "+typeof ot+". Please use a boolean."):(nt=!ot,"adapter.js deprecation warnings "+(ot?"disabled":"enabled"))},log:function(){if(typeof window=="object"){if(tt)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}},deprecated:function(ot,st){nt&&console.warn(ot+" is deprecated, please use "+st+" instead.")},detectBrowser:function(ot){var st=ot&&ot.navigator,at={};if(at.browser=null,at.version=null,typeof ot>"u"||!ot.navigator)return at.browser="Not a browser.",at;if(st.mozGetUserMedia)at.browser="firefox",at.version=rt(st.userAgent,/Firefox\/(\d+)\./,1);else if(st.webkitGetUserMedia)at.browser="chrome",at.version=rt(st.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(st.mediaDevices&&st.userAgent.match(/Edge\/(\d+).(\d+)$/))at.browser="edge",at.version=rt(st.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(ot.RTCPeerConnection&&st.userAgent.match(/AppleWebKit\/(\d+)\./))at.browser="safari",at.version=rt(st.userAgent,/AppleWebKit\/(\d+)\./,1);else return at.browser="Not a supported browser.",at;return at}}},function(_e,et,b){function tt(pt,gt){var yt=typeof Symbol<"u"&&pt[Symbol.iterator]||pt["@@iterator"];if(yt)return(yt=yt.call(pt)).next.bind(yt);if(Array.isArray(pt)||(yt=nt(pt))||gt&&pt&&typeof pt.length=="number"){yt&&(pt=yt);var Et=0;return function(){return Et>=pt.length?{done:!0}:{done:!1,value:pt[Et++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nt(pt,gt){if(pt){if(typeof pt=="string")return rt(pt,gt);var yt=Object.prototype.toString.call(pt).slice(8,-1);if(yt==="Object"&&pt.constructor&&(yt=pt.constructor.name),yt==="Map"||yt==="Set")return Array.from(pt);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return rt(pt,gt)}}function rt(pt,gt){(gt==null||gt>pt.length)&&(gt=pt.length);for(var yt=0,Et=new Array(gt);yt<gt;yt++)Et[yt]=pt[yt];return Et}const it=b(9),ot=b(60),st=b(272),at=b(129),ct=b(273),ut=b(1)("SDPHelpers"),lt=1e4,dt=2e4,ft={getSections(pt){return pt.split(/\r\n|\r|\n/).reduce((gt,yt)=>{const Et=yt.match(/^m=(\w+) \d+/);return Et&&(gt.sections[gt.section=Et[1]]=[]),gt.sections[gt.section].push(yt),gt},{sections:{header:[]},section:"header"}).sections},getCodecsFromSection(pt){const gt=pt[0].match(/m=\w+ \d+ [A-Z/]+ ([\d ]+)$/)[1].split(" "),yt=it(...pt.filter(Et=>Et.match(/^a=rtpmap:\d+/)).map(Et=>Et.match(/^a=rtpmap:(\d+) ([\w-]+)/).splice(1)).map(Et=>{let It=Et[0],Gt=Et[1];return{[It]:Gt}}));return{codecs:gt,codecMap:yt}},getCodecsAndCodecMap(pt,gt){const yt=ft.getSections(pt)[gt];if(!yt)throw new Error(`no mediaType ${gt}`);return ft.getCodecsFromSection(yt)},getCodecs(pt,gt){const yt=ft.getCodecsAndCodecMap(pt,gt);return yt.codecs.map(Et=>yt.codecMap[Et]||"Unknown codec")},mediaDirections:{INACTIVE:"inactive",RECVONLY:"recvonly",SENDONLY:"sendonly",SENDRECV:"sendrecv"}};_e.exports=ft,ft.getMLineIndex=function(gt,yt){const Et=`m=${yt}`;return st(gt,It=>It.indexOf(Et)!==-1)},ft.getMLine=function(gt,yt){const Et=ft.getMLineIndex(gt,yt);return Et>-1?gt[Et]:void 0},ft.hasMediaType=(pt,gt)=>{const yt=new RegExp(`^m=${gt}`),Et=pt.split(`\r
`);return st(Et,It=>yt.test(It))>=0},ft.hasMLinePayloadType=function(gt,yt,Et){const It=ft.getMLine(gt,yt);return ft.getMLinePayloadTypes(It,yt).indexOf(Et)>-1},ft.getMLinePayloadTypes=function(gt,yt){const Et=new RegExp(`^m=${yt} \\d+(/\\d+)? [a-zA-Z0-9/]+(( [a-zA-Z0-9/]+)+)$`,"i"),It=gt.match(Et);return!It||It.length<2?[]:It[2].trim().split(" ")},ft.splitSections=function(gt){return gt.split(`
m=`).map((Et,It)=>(It>0?"m="+Et:Et).trim()+`\r
`)},ft.changeMediaDirection=function(gt,yt){const Et=At=>{const kt=yt===ft.mediaDirections.RECVONLY?"a=inactive":"a=recvonly",Vt=new RegExp(kt,"g");return At.replace(Vt,`a=${yt}`)},It=ft.splitSections(gt);let Wt=It.shift();return It.forEach(At=>{const kt=At.includes("m=video")?Et(At):At;Wt+=kt}),Wt},ft.removeTypesFromMLine=function(gt,yt){const Et=/[0-9 ]*$/.exec(gt)[0],It=Et.split(" ").filter(Gt=>Gt!==""&&yt.indexOf(Gt)===-1);return gt.replace(Et,` ${It.join(" ")}`)},ft.removeMediaEncoding=function(gt,yt,Et){let It,Gt,Wt,At,kt=gt.split(`\r
`);const Vt=ft.getMLineIndex(kt,yt),Nt=Vt>-1?kt[Vt]:void 0,tn=[];if(Vt===-1||(It=ft.getMLinePayloadTypes(Nt,yt),It.length===0))return kt.join(`\r
`);for(Gt=Vt;Gt<kt.length;Gt++){const _t=new RegExp(Et,"i");kt[Gt].indexOf("a=rtpmap:")===0&&(At=kt[Gt].split(" "),At.length===2&&_t.test(At[1])&&tn.push(At[0].substr(9)))}if(!tn.length)return kt.join(`\r
`);for(Gt=Vt;Gt<kt.length;Gt++)if(kt[Gt].indexOf("a=fmtp:")===0)for(At=kt[Gt].split(" "),Wt=0;Wt<tn.length;Wt++)At.length===2&&At[1]===`apt=${tn[Wt]}`&&tn.push(At[0].substr(7));return kt=kt.filter(_t=>{for(let Kt=0;Kt<tn.length;Kt++)if(_t.indexOf(`a=rtpmap:${tn[Kt]} `)===0||_t.indexOf(`a=fmtp:${tn[Kt]} `)===0||_t.indexOf(`a=rtcp-fb:${tn[Kt]} `)===0)return!1;return!0}),tn.length>0&&Vt>-1&&(kt[Vt]=ft.removeTypesFromMLine(Nt,tn)),kt.join(`\r
`)},ft.disableMediaType=function(gt,yt){const Et=gt.split(`\r
`),It=[];let Gt;Et.forEach(kt=>{let Vt=kt;/^m=/.test(Vt)&&(Gt=void 0),Gt||(Gt=[],It.push(Gt)),Gt.push(Vt)});const Wt=new RegExp(`^m=${yt} \\d+ ([^ ]+) [0-9 ]+$`),At=It.map(kt=>{const Vt=kt[0].match(Wt);return Vt?[`m=${yt} 0 ${Vt[1]} 0`,"a=inactive",...kt.filter(Nt=>/^c=/.test(Nt)||/^a=mid:/.test(Nt)||Nt==="")]:kt});return[].concat(...At).join(`\r
`)},ft.removeVideoCodec=function(gt,yt){return ft.removeMediaEncoding(gt,"video",yt)};const St=function(gt,yt){let Et=yt.filterByName("ssrc-group:FID");switch(Et.length===0?Et=[]:Et=Et[0].value.split(" "),Et.length){case 0:case 1:var Gt=yt.find(At=>At.name.indexOf("rtpmap:")===0&&At.value.indexOf("rtx/90000")>-1);if(!Gt)return!1;var Wt=Gt.name.split(":")[1];return Wt.indexOf("/")>-1&&(Wt=Wt.split("/")[0]),ft.hasMLinePayloadType(gt,"video",Wt);default:return ut.debug("SDP Helpers: There are more than two FIDs, RTX is definitely enabled"),!0}};ft.getAttributesForMediaType=function(gt,yt){let Et,It,Gt,Wt,At,kt,Vt,Nt,tn,_t;const Kt=ft.getMLineIndex(gt,yt),cn=new RegExp(`m=(?!${yt}).+ `,"i"),an=new RegExp("a=ssrc:\\d+ .*","i"),mn=new RegExp("a=ssrc-group:(SIM|FID) (\\d+).*?","i"),on=new RegExp("a=([a-z0-9:/-]+) (.*)","i"),yn=[];for(let fn=Kt+1;fn<gt.length;fn++){if(cn.test(gt[fn])){Et!==void 0&&(It=fn-1);break}At=gt[fn].match(mn),kt=gt[fn].match(an),Et===void 0&&(At||kt)&&(Et=fn,At&&(Wt=/^(FID|SIM)$/.test(At[1])?At[2]:At[1])),Vt=gt[fn].match(`a=ssrc:${Wt} msid:(.+)`),Vt&&(Nt=Vt[1]);const sn=an.test(gt[fn]),un=mn.test(gt[fn]);Et!==void 0&&(It===void 0&&!sn&&!un?It=fn-1:fn===gt.length-1&&(It=fn));const Ln=gt[fn].match(/a=mid:(.+)/);Ln&&(tn=Ln[1],_t=fn),Gt=on.exec(gt[fn]),Gt&&Gt.length===3&&yn.push({lineIndex:fn,name:Gt[1],value:Gt[2]})}return yn.ssrcStartIndex=Et,yn.ssrcEndIndex=It,yn.msid=Nt,yn.mid=tn,yn.midIndex=_t,yn.isUsingRTX=St.bind(null,gt,yn),yn.filterByName=function(sn){return this.filter(un=>un.name===sn)},yn.getRtpNumber=fn=>{const sn=new RegExp("rtpmap:(.+)");return ot(yn.map(un=>{const Ln=un.name.match(sn);return Ln&&un.value.indexOf(fn)>=0?Ln[1]:null}),un=>un!==null)},yn},ft.modifyDtx=(pt,gt)=>{const yt=pt.split(`\r
`);if(!ft.getMLine(yt,"audio"))return ut.debug("No audio m-line, not enabling dtx."),pt;const Et=ft.getAttributesForMediaType(yt,"audio"),It=Et.getRtpNumber("opus");if(!It)return ut.debug("Could not find rtp number for opus, not enabling dtx."),pt;const Gt=Et.find(kt=>kt.name===`fmtp:${It}`);if(!Gt)return ut.debug("Could not find a=fmtp line for opus, not enabling dtx."),pt;let Wt=yt[Gt.lineIndex];const At=/usedtx=\d+([\s;]*)/;return At.test(Gt.value)?Wt=Wt.replace(At,gt?"usedtx=1$1":""):gt&&(Wt+="; usedtx=1"),Wt=Wt.replace(/[;\s]*$/,""),yt[Gt.lineIndex]=Wt,yt.join(`\r
`)};const Tt=(pt,gt,yt)=>{const Et=gt.split(`\r
`);if(!ft.getMLine(Et,"audio"))return ut.debug("No audio m-line, not enabling stereo."),gt;const It=ft.getAttributesForMediaType(Et,"audio"),Gt=It.getRtpNumber("opus");if(!Gt)return ut.debug("Could not find rtp number for opus, not enabling stereo."),gt;const Wt=It.find(Vt=>Vt.name===`fmtp:${Gt}`);if(!Wt)return ut.debug("Could not find a=fmtp line for opus, not enabling stereo."),gt;let At=Et[Wt.lineIndex],kt;switch(pt){case"send":kt=/sprop-stereo=\d+([\s;]*)/,kt.test(Wt.value)?At=At.replace(kt,yt?"sprop-stereo=1$1":""):yt&&(At+="; sprop-stereo=1");break;case"receive":kt=/([^-])stereo=\d+([\s;]*)/,kt.test(Wt.value)?At=At.replace(kt,yt?"$1stereo=1$2":"$1"):yt&&(At+="; stereo=1");break;default:throw new Error(`Invalid type ${pt} passed into enableStereo`)}return At=At.replace(/[;\s]*$/,""),Et[Wt.lineIndex]=At,Et.join(`\r
`)};ft.modifySendStereo=Tt.bind(null,"send"),ft.modifyReceiveStereo=Tt.bind(null,"receive"),ft.setAudioBitrate=(pt,gt)=>{const yt=ft.getAudioBitrate(pt);if(yt!==void 0)return ut.debug(`Audio bitrate already set to ${yt}, not setting audio bitrate`),pt;const Et=pt.split(`\r
`);if(!ft.getMLine(Et,"audio"))return ut.debug("No audio m-line, not setting audio bitrate"),pt;const It=ft.getAttributesForMediaType(Et,"audio"),Gt=It.getRtpNumber("opus");if(!Gt)return ut.debug("Could not find rtp number for opus, not setting audio bitrate."),pt;const Wt=It.find(kt=>kt.name===`fmtp:${Gt}`);if(!Wt)return ut.debug("Could not find a=fmtp line for opus, not setting audio bitrate."),pt;let At=Et[Wt.lineIndex];return At+=`; maxaveragebitrate=${gt}`,At=At.replace(/[;\s]*$/,""),Et[Wt.lineIndex]=At,Et.join(`\r
`)},ft.removeVideoOrientation=pt=>{let gt=pt.split(`\r
`);return gt=gt.filter(yt=>!yt.includes("urn:3gpp:video-orientation")),gt.join(`\r
`)},ft.hasSendStereo=pt=>/[\s;]sprop-stereo=1/.test(pt),ft.hasSendDtx=pt=>/[\s;]usedtx=1/.test(pt),ft.getAudioBitrate=pt=>{const gt=pt.match(/[\s;]maxaveragebitrate=(\d+)/);if(gt)return Number(gt[1])},ft.MAX_SSRCS=10,ft.getSSRCGroupType=pt=>["SIM","FID"].find(yt=>pt.filterByName(`ssrc-group:${yt}`)[0]),ft.getSSRCGroup=pt=>{const gt=ft.getSSRCGroupType(pt);return pt.filterByName(`ssrc-group:${gt}`)[0]},ft.getSSRCGroupSSRCs=pt=>{const gt=ft.getSSRCGroup(pt);return gt?gt.value.split(" ").slice(0,ft.MAX_SSRCS):[]},ft.getAllowedSSRCs=(pt,gt)=>{const yt=gt.slice();return pt.filterByName("ssrc-group:FID").forEach(Et=>{const It=Et.value.split(" ");at(yt,It).length&&Array.prototype.push.apply(yt,It)}),ct(yt)},ft.filterExcessSSRCs=pt=>{const gt=pt.split(`\r
`),yt=ft.getAttributesForMediaType(gt,"video"),Et=ft.getSSRCGroupType(yt),It=yt.ssrcStartIndex;if(It===void 0)return pt;let Gt;const Wt=kt=>{let Vt=null;return kt.match(/^a=ssrc:(\d+)/)&&(Vt=RegExp.$1),Vt};if(Et){const kt=ft.getSSRCGroupSSRCs(yt),Vt=[`a=ssrc-group:${Et}`,...kt].join(" "),Nt=yt.find(tn=>tn.name.startsWith("ssrc-group:")).lineIndex;gt[Nt]=Vt,Gt=ft.getAllowedSSRCs(yt,kt)}else Gt=[],yt.ssrcStartIndex&&Gt.push(Wt(gt[yt.ssrcStartIndex]));return gt.filter((kt,Vt)=>{if(Vt<It||Vt>yt.ssrcEndIndex)return!0;if(Vt===It){if(!Et){const tn=Wt(kt);return tn?Gt.includes(tn):!/^a=ssrc:(\d+)/.test(kt)}return!0}const Nt=Wt(kt);if(Nt)return Gt.includes(Nt);if(kt.match(/^a=ssrc-group:FID (\d+)/)){const tn=RegExp.$1;return Gt.includes(tn)}return!kt.match(/^a=ssrc-group:SIM /)}).join(`\r
`)},ft.enableSimulcast=function(gt,yt){let Et,It;const Gt=gt.split(`\r
`);if(!ft.getMLine(Gt,"video"))return ut.debug("No video m-line, not enabling simulcast."),gt;const Wt=ft.getAttributesForMediaType(Gt,"video");if(Wt.filterByName("ssrc-group:SIM").length>0)return ut.debug("Simulcast is already enabled in this SDP, not attempting to enable again."),ft.filterExcessSSRCs(gt);if(!Wt.msid)return ut.debug("No local stream attached, not enabling simulcast."),gt;const At=Wt.isUsingRTX(),kt=[],Vt=[];for(It=0;It<yt;++It)kt.push(lt+It),At&&Vt.push(dt+It);if(Et=[`a=ssrc-group:SIM ${kt.join(" ")}`],At)for(It=0;It<yt;++It)Et.push(`a=ssrc-group:FID ${kt[It]} ${Vt[It]}`);for(It=0;It<yt;++It)Et.push(`a=ssrc:${kt[It]} cname:localCname`,`a=ssrc:${kt[It]} msid:${Wt.msid}`);if(At)for(It=0;It<yt;++It)Et.push(`a=ssrc:${Vt[It]} cname:localCname`,`a=ssrc:${Vt[It]} msid:${Wt.msid}`);return Et.unshift(Wt.ssrcStartIndex,Wt.ssrcEndIndex-Wt.ssrcStartIndex+1),Gt.splice(...Et),Gt.join(`\r
`)},ft.reprioritizeVideoCodec=function(gt,yt,Et){const It=gt.split(`\r
`),Gt=ft.getMLineIndex(It,"video");if(Gt===-1)return gt;const Wt=ft.getMLinePayloadTypes(It[Gt],"video"),At=new RegExp(`^a=rtpmap:(\\d+).* ${yt}`,"i"),kt=It.map(_t=>_t.match(At)).filter(_t=>_t!==null);if(kt.length===0)return gt;const Vt=kt.map(_t=>_t[1]);let Nt=Wt.filter(_t=>Vt.indexOf(_t)===-1);Et==="top"?Nt.unshift(...Vt):Et==="bottom"?Nt.push(...Vt):(ut.error(`Unexpected location param: ${Et}; not changing ${yt} priority`),Nt=Wt);const tn=It[Gt].replace(Wt.join(" "),Nt.join(" "));return It[Gt]=tn,It.join(`\r
`)},ft.getSetupRole=pt=>{for(var gt=tt(pt.split(/\r\n|\r|\n/)),yt;!(yt=gt()).done;){const It=yt.value.match(/^a=setup:(\w+)/);if(It)return It[1]}return""},ft.setSetupRole=(pt,gt)=>pt.split(/\r\n|\r|\n/).map(yt=>yt.match(/^a=setup:(\w+)/)?`a=setup:${gt}`:yt).join(`\r
`),ft.changeSetupRole=(pt,gt,yt)=>pt.map(Et=>Et.includes(`a=setup:${gt}`)?`a=setup:${yt}`:Et),ft.patterns={bundle:"a=group:BUNDLE",address:"c=IN IP4",rtcp:"a=rtcp:",direction:["a=inactive","a=sendonly","a=recvonly","a=sendrecv"],rsize:"a=rtcp-rsize",ssrc:"a=ssrc:",msid:"a=msid:"},ft.getIndexStartingWith=(pt,gt,yt)=>{const Et=pt.slice(yt),It=gt.map(Gt=>Et.findIndex(Wt=>Wt.includes(Gt))).filter(Gt=>Gt>-1);return It.length?yt+Math.min(...It):pt.length},ft.getLastIndexPriorTo=(pt,gt,yt)=>pt.slice(0,yt).findLastIndex(It=>It.includes(gt)),ft.includesAny=(pt,gt)=>{for(let yt=0;yt<gt.length;yt++)if(pt.includes(gt[yt]))return!0;return!1},ft.isVersionLine=pt=>/^o=/.test(pt),ft.getVersionLine=pt=>pt.find(ft.isVersionLine),ft.getVersion=pt=>{const gt=ft.getVersionLine(pt);if(gt===void 0)return;const yt=Number(gt.match(/ (\d+) IN /)[1]);return Number.isInteger(yt)?yt:void 0},ft.updateVersion=(pt,gt,yt)=>{const Et=[...pt],It=Et.findIndex(Gt=>ft.isVersionLine(Gt));return Et[It]=Et[It].replace(` ${gt} `,` ${yt} `),Et},ft.isBundleLine=pt=>pt.includes(ft.patterns.bundle),ft.getBundleLine=pt=>pt.find(ft.isBundleLine),ft.createBundleLine=pt=>`${ft.patterns.bundle} ${pt.join(" ")}`,ft.updateBundleLine=(pt,gt)=>{const yt=[...pt],Et=ft.createBundleLine(gt),It=yt.findIndex(Gt=>ft.isBundleLine(Gt));return yt[It]=Et,yt},ft.parseMLine=pt=>{const gt=pt.match(/^(m=(?:audio|video)) (\d+) (.+)/),yt=gt[1],Et=gt[2],It=gt[3];return{port:Et,transport:It,mediaType:yt}},ft.disableTrack=pt=>{const gt=ft.parseMLine(pt),yt=gt.mediaType,Et=gt.transport;return`${yt} 0 ${Et}`},ft.setMediaDirection=(pt,gt)=>{if(!Object.values(ft.mediaDirections).includes(gt))return pt;const Et=pt.slice(),It=Et.findIndex(Gt=>ft.includesAny(Gt,ft.patterns.direction));return It===-1||(Et[It]=`a=${gt}`),Et},ft.disableTrackSection=pt=>{const gt=pt.mid,yt=pt.sdp;let Et=yt.filter(It=>{const Gt=ft.patterns,Wt=Gt.address,At=Gt.rtcp,kt=Gt.rsize,Vt=Gt.ssrc,Nt=Gt.msid;return!ft.includesAny(It,[Wt,At,kt,Vt,Nt])});return Et[0]=ft.disableTrack(yt[0]),Et=ft.setMediaDirection(Et,ft.mediaDirections.INACTIVE),{mid:gt,sdp:Et}},ft.getEnabledTracks=pt=>ft.getBundleLine(pt).match(new RegExp(`^${ft.patterns.bundle} (.+)$`))[1].split(" "),ft.getDisabledTracks=(pt,gt)=>pt.filter(yt=>!gt.includes(yt)),ft.getTrackSection=(pt,gt)=>{const yt=pt.findIndex(At=>At.includes(`a=mid:${gt}`)),Et=gt.includes("a")?"audio":"video",It=ft.getLastIndexPriorTo(pt,`m=${Et}`,yt),Gt=ft.getIndexStartingWith(pt,["m=audio","m=video"],yt),Wt=pt.slice(It,Gt);return{mid:gt,sdp:Wt}},ft.getHeaders=pt=>{const gt=pt.findIndex(yt=>yt.includes("m=audio")||yt.includes("m=video"));return pt.slice(0,gt)},ft.disableTracks=(pt,gt)=>pt.map(yt=>gt.includes(yt.mid)?ft.disableTrackSection(yt):yt),ft.getSDPLines=pt=>pt.split(`\r
`).filter(gt=>gt),ft.parseSDP=pt=>{const gt=ft.getSDPLines(pt),yt=ft.changeSetupRole(gt,"actpass","passive"),Et={bundle:ft.getBundleLine(yt),headers:ft.getHeaders(yt),version:ft.getVersion(yt),tracks:ft.getEnabledTracks(yt)};return Et.trackSections=Et.tracks.map(It=>ft.getTrackSection(yt,It)),Et},ft.createSDP=(pt,gt)=>{const yt=pt;return gt.forEach(Et=>yt.push(...Et.sdp)),yt.push(""),yt.join(`\r
`)},ft.removePayloadTypeFromSection=(pt,gt)=>pt.filter(yt=>!yt.includes(`a=rtpmap:${gt} `)&&!yt.includes(`a=fmtp:${gt} `)&&!yt.includes(`a=rtcp-fb:${gt} `)),ft.getRtxPayloadType=(pt,gt)=>{const yt=pt.filter(It=>It.includes(`apt=${gt}`))[0];return yt==null?void 0:yt.match(/^a=fmtp:(\d+) /)[1]},ft.removeRtxPayloadTypeFromSection=(pt,gt)=>{let yt=[...pt];const Et=ft.getRtxPayloadType(yt,gt);return Et&&(yt=ft.removePayloadTypeFromSection(yt,Et)),yt},ft.trimUnusedCodecs=(pt,gt)=>{const yt=pt[0].split(" "),Et=yt.slice(3),It=yt.slice(0,3),Gt=ft.getCodecsFromSection(pt);let Wt=[...pt];return Et.forEach(At=>{const kt=Gt.codecMap[At];if(!gt.includes(kt))Wt=ft.removePayloadTypeFromSection(Wt,At),Wt=ft.removeRtxPayloadTypeFromSection(Wt,At);else{It.push(At);const Vt=ft.getRtxPayloadType(Wt,At);Vt&&It.push(Vt)}}),Wt[0]=It.join(" "),Wt},ft.removeUnusedCodecs=(pt,gt)=>{if(!gt)return pt;const yt=ft.getSDPLines(pt),Et=ft.getSDPLines(gt),It={header:ft.getHeaders(yt)};ft.getEnabledTracks(Et).forEach(At=>{const kt=ft.getTrackSection(yt,At).sdp,Vt=ft.getTrackSection(Et,At).sdp,Nt=Object.values(ft.getCodecsFromSection(Vt).codecMap);It[At]=ft.trimUnusedCodecs(kt,Nt)});const Wt=[];return Object.values(It).forEach(At=>Wt.push(...At)),Wt.push(""),Wt.join(`\r
`)},ft.updateSDPWithNewOffer=(pt,gt)=>{const yt=pt.headers,Et=pt.version,It=pt.tracks,Gt=pt.trackSections,Wt=ft.getSDPLines(gt),At={};At.version=ft.getVersion(Wt),At.headers=ft.updateVersion(yt,Et,At.version),At.tracks=ft.getEnabledTracks(Wt);const kt=ft.getDisabledTracks(It,At.tracks);return At.headers=ft.updateBundleLine(At.headers,At.tracks),At.trackSections=ft.disableTracks(Gt,kt),At}},function(_e,et,b){var tt=b(39),nt=b(364),rt=b(365),it="[object Null]",ot="[object Undefined]",st=tt?tt.toStringTag:void 0;function at(ct){return ct==null?ct===void 0?ot:it:st&&st in Object(ct)?nt(ct):rt(ct)}_e.exports=at},function(_e,et,b){var tt=b(177),nt=b(116),rt=b(25);function it(ot){return rt(ot)?tt(ot):nt(ot)}_e.exports=it},function(_e,et,b){var tt=b(43);_e.exports=function(nt){if(!tt(nt))throw new TypeError("Cannot use null or undefined");return nt}},function(_e,et,b){var tt=b(55),nt=b(198),rt=b(127),it=b(199),ot=b(200),st=_e.exports=function(at,ct){var ut,lt,dt,ft,St;return arguments.length<2||typeof at!="string"?(ft=ct,ct=at,at=null):ft=arguments[2],tt(at)?(ut=ot.call(at,"c"),lt=ot.call(at,"e"),dt=ot.call(at,"w")):(ut=dt=!0,lt=!1),St={value:ct,configurable:ut,enumerable:lt,writable:dt},ft?rt(it(ft),St):St};st.gs=function(at,ct,ut){var lt,dt,ft,St;return typeof at!="string"?(ft=ut,ut=ct,ct=at,at=null):ft=arguments[3],tt(ct)?nt(ct)?tt(ut)?nt(ut)||(ft=ut,ut=void 0):ut=void 0:(ft=ct,ct=ut=void 0):ct=void 0,tt(at)?(lt=ot.call(at,"c"),dt=ot.call(at,"e")):(lt=!0,dt=!1),St={get:ct,set:ut,configurable:lt,enumerable:dt},ft?rt(it(ft),St):St}},function(_e,et){function b(tt,nt){for(var rt=-1,it=tt==null?0:tt.length,ot=Array(it);++rt<it;)ot[rt]=nt(tt[rt],rt,tt);return ot}_e.exports=b},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(45));const it=b(206),ot=b(56),st=b(483),at=b(530),ct=b(1)("StaticConfig"),ut=b(100),lt=ut.prependProxyToUrlIfNeeded,dt=ot({version:"v2.25.1",buildHash:"8d76a4b67",minimumVersion:{firefox:52,chrome:49},debug:!1,websiteURL:"http://www.tokbox.com",configURL:"https://config.opentok.com",ipWhitelistConfigURL:"",cdnURL:"https://static.opentok.com",loggingURL:"https://hlg.tokbox.com/prod",apiURL:"https://anvil.opentok.com"}),ft=st(["apiURL","assetURL","cdnURL","sessionInfoOverrides","loggingURL"]),St={apiUrl:"apiURL",loggingUrl:"loggingURL"},Tt=at(gt=>St[gt]);function pt(gt){let yt=gt===void 0?{}:gt,Et=yt.axios,It=Et===void 0?it:Et;return function(){Wt.onlyLocal=function(){const kt=ot((typeof window!==void 0?window:commonjsGlobal).OTProperties);return new Wt(Object.assign({},dt,ft(kt)))},Wt.get=function(kt){let Vt=kt.partnerId,Nt=kt.token,tn=kt.useIpWhitelistConfigUrl,_t=kt.proxyUrl;return(()=>{const cn=this.onlyLocal();if(!cn.configUrl)return tt.resolve({});if(tn===!0&&!cn.ipWhitelistConfigUrl)return tt.resolve({});let an=tn===!0?cn.ipWhitelistConfigUrl:cn.configUrl;return an=lt(an,_t),It.get(`${an}/project/${Vt}/config.json`,{headers:{"X-TB-TOKEN-AUTH":Nt}}).then(mn=>mn.data)})().catch(cn=>(ct.error("could not reach live config service",cn),{})).then(cn=>{const an=ot((typeof window!==void 0?window:commonjsGlobal).OTProperties),mn=Object.assign({},dt,ft(an),Tt(cn));return new Wt(mn)})};function Wt(At){Object.defineProperty(this,"config",{value:Object.freeze(ot(At))})}return(0,rt.default)(Wt,[{key:"configUrl",get:function(){return this.config.configURL}},{key:"ipWhitelistConfigUrl",get:function(){return this.config.ipWhitelistConfigURL}},{key:"apiUrl",get:function(){return this.config.apiURL}},{key:"loggingUrl",get:function(){return this.config.loggingURL}},{key:"apiEnabled",get:function(){return typeof this.config.apiEnabled<"u"?this.config.apiEnabled:!0}},{key:"version",get:function(){return this.config.version}},{key:"clientVersion",get:function(){return`js-${(this.version||"unknown").replace("v","")}`}},{key:"buildHash",get:function(){return this.config.buildHash}},{key:"minimumVersion",get:function(){return this.config.minimumVersion}},{key:"websiteUrl",get:function(){return this.config.websiteURL}},{key:"debug",get:function(){return this.config.debug==="true"||this.config.debug===!0}},{key:"sessionInfoOverrides",get:function(){return this.config.sessionInfoOverrides}},{key:"cdnUrl",get:function(){return this.config.cdnURL||`${(typeof window!==void 0?window:commonjsGlobal).location.protocol}//${(typeof window!==void 0?window:commonjsGlobal).location.host}`}},{key:"assetUrl",get:function(){return this.config.assetURL||`${this.cdnUrl}/webrtc/${this.version}`}}]),Wt}()}_e.exports=pt}).call(this,b(0))},function(_e,et,b){var tt=b(509),nt=b(515),rt=b(88),it=b(12),ot=b(520);function st(at){return typeof at=="function"?at:at==null?rt:typeof at=="object"?it(at)?nt(at[0],at[1]):tt(at):ot(at)}_e.exports=st},function(_e,et,b){const tt=b(8);_e.exports=function(rt,it){let ot;const st=it||{};rt.setDisplayMode=function(at){const ct=at||"auto";ot!==ct&&(tt.removeClass(this.domElement,`OT_mode-${ot}`),tt.addClass(this.domElement,`OT_mode-${ct}`),ot=ct)},rt.getDisplayMode=function(){return ot},rt.showAfterLoading=function(){tt.removeClass(this.domElement,"OT_hide-forced")},rt.hideWhileLoading=function(){tt.addClass(this.domElement,"OT_hide-forced")},rt.destroy=function(){return st.onDestroy&&st.onDestroy(this.domElement),this.domElement&&tt.removeElement(this.domElement),rt},rt.appendTo=function(at){return this.domElement=tt.createElement(st.nodeName||"div",st.htmlAttributes,st.htmlContent),st.onCreate&&st.onCreate(this.domElement),rt.setDisplayMode(st.mode),st.mode==="auto"&&(tt.addClass(rt.domElement,"OT_mode-on-hold"),setTimeout(()=>{tt.removeClass(rt.domElement,"OT_mode-on-hold")},2e3)),at.appendChild(this.domElement),rt}}},function(_e,et,b){var tt=b(77),nt=4;function rt(it){return tt(it,nt)}_e.exports=rt},function(_e,et,b){var tt=b(363),nt=b(368);function rt(it,ot){var st=nt(it,ot);return tt(st)?st:void 0}_e.exports=rt},function(_e,et,b){var tt=b(14),nt=tt.Symbol;_e.exports=nt},function(_e,et,b){var tt=b(83),nt=b(62);function rt(it,ot,st,at){var ct=!st;st||(st={});for(var ut=-1,lt=ot.length;++ut<lt;){var dt=ot[ut],ft=at?at(st[dt],it[dt],dt,st,it):void 0;ft===void 0&&(ft=it[dt]),ct?nt(st,dt,ft):tt(st,dt,ft)}return st}_e.exports=rt},function(_e,et,b){var tt=b(392),nt=b(111),rt=b(393),it=b(185),ot=b(186),st=b(29),at=b(174),ct="[object Map]",ut="[object Object]",lt="[object Promise]",dt="[object Set]",ft="[object WeakMap]",St="[object DataView]",Tt=at(tt),pt=at(nt),gt=at(rt),yt=at(it),Et=at(ot),It=st;(tt&&It(new tt(new ArrayBuffer(1)))!=St||nt&&It(new nt)!=ct||rt&&It(rt.resolve())!=lt||it&&It(new it)!=dt||ot&&It(new ot)!=ft)&&(It=function(Gt){var Wt=st(Gt),At=Wt==ut?Gt.constructor:void 0,kt=At?at(At):"";if(kt)switch(kt){case Tt:return St;case pt:return ct;case gt:return lt;case yt:return dt;case Et:return ft}return Wt}),_e.exports=It},function(_e,et){var b=_e.exports={},tt,nt;function rt(){throw new Error("setTimeout has not been defined")}function it(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?tt=setTimeout:tt=rt}catch{tt=rt}try{typeof clearTimeout=="function"?nt=clearTimeout:nt=it}catch{nt=it}})();function ot(pt){if(tt===setTimeout)return setTimeout(pt,0);if((tt===rt||!tt)&&setTimeout)return tt=setTimeout,setTimeout(pt,0);try{return tt(pt,0)}catch{try{return tt.call(null,pt,0)}catch{return tt.call(this,pt,0)}}}function st(pt){if(nt===clearTimeout)return clearTimeout(pt);if((nt===it||!nt)&&clearTimeout)return nt=clearTimeout,clearTimeout(pt);try{return nt(pt)}catch{try{return nt.call(null,pt)}catch{return nt.call(this,pt)}}}var at=[],ct=!1,ut,lt=-1;function dt(){!ct||!ut||(ct=!1,ut.length?at=ut.concat(at):lt=-1,at.length&&ft())}function ft(){if(!ct){var pt=ot(dt);ct=!0;for(var gt=at.length;gt;){for(ut=at,at=[];++lt<gt;)ut&&ut[lt].run();lt=-1,gt=at.length}ut=null,ct=!1,st(pt)}}b.nextTick=function(pt){var gt=new Array(arguments.length-1);if(arguments.length>1)for(var yt=1;yt<arguments.length;yt++)gt[yt-1]=arguments[yt];at.push(new St(pt,gt)),at.length===1&&!ct&&ot(ft)};function St(pt,gt){this.fun=pt,this.array=gt}St.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={};function Tt(){}b.on=Tt,b.addListener=Tt,b.once=Tt,b.off=Tt,b.removeListener=Tt,b.removeAllListeners=Tt,b.emit=Tt,b.prependListener=Tt,b.prependOnceListener=Tt,b.listeners=function(pt){return[]},b.binding=function(pt){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(pt){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},function(_e,et,b){var tt=b(411)();_e.exports=function(nt){return nt!==tt&&nt!==null}},function(_e,et,b){_e.exports=b(425)()?b(91).Symbol:b(428)},function(_e,et){function b(nt,rt){for(var it=0;it<rt.length;it++){var ot=rt[it];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(nt,ot.key,ot)}}function tt(nt,rt,it){return rt&&b(nt.prototype,rt),it&&b(nt,it),nt}_e.exports=tt},function(_e,et,b){var tt=b(69),nt=1/0;function rt(it){if(typeof it=="string"||tt(it))return it;var ot=it+"";return ot=="0"&&1/it==-nt?"-0":ot}_e.exports=rt},function(_e,et,b){var tt=b(527),nt=b(140),rt=nt(function(it,ot){return it==null?{}:tt(it,ot)});_e.exports=rt},function(_e,et){function b(tt,nt){tt.prototype=Object.create(nt.prototype),tt.prototype.constructor=tt,tt.__proto__=nt}_e.exports=b},function(_e,et,b){const tt=(typeof window!==void 0?window:commonjsGlobal).performance||{};_e.exports=function(){return tt.now?tt.timing.navigationStart+tt.now():Date.now()}},function(_e,et,b){var tt=b(593);function nt(rt){return tt(2,rt)}_e.exports=nt},function(_e,et,b){const tt=b(50),nt=b(34)();et.check=function(rt){rt===void 0&&(rt={});const it=rt.env||b(2),ot=rt.hasGetUserMediaCapability||b(601),st=rt.hasPeerConnectionCapability||b(602),at=rt.logging||b(1)("hasOpenTokSupport"),lt=((rt.staticConfig||nt.onlyLocal()).minimumVersion||{})[it.name.toLowerCase()];return lt&&lt>it.version?(at.debug("Support for",it.name,"is disabled because we require",lt,"but this is",it.version),!1):it.name==="Node"?!0:ot()&&st()},et.once=tt(()=>et.check())},function(_e,et){function b(tt,nt){return tt===nt||tt!==tt&&nt!==nt}_e.exports=b},function(_e,et,b){var tt=b(177),nt=b(387),rt=b(25);function it(ot){return rt(ot)?tt(ot,!0):nt(ot)}_e.exports=it},function(_e,et){function b(tt,nt){var rt=-1,it=tt.length;for(nt||(nt=Array(it));++rt<it;)nt[rt]=tt[rt];return nt}_e.exports=b},function(_e,et,b){var tt=void 0;_e.exports=function(nt){return nt!==tt&&nt!==null}},function(_e,et,b){var tt=b(77),nt=1,rt=4;function it(ot){return tt(ot,nt|rt)}_e.exports=it},function(_e,et,b){var tt=b(98);function nt(rt,it,ot){var st=rt==null?void 0:tt(rt,it);return st===void 0?ot:st}_e.exports=nt},function(_e,et,b){var tt=b(12),nt=b(139),rt=b(235),it=b(59);function ot(st,at){return tt(st)?st:nt(st,at)?[st]:rt(it(st))}_e.exports=ot},function(_e,et,b){var tt=b(517);function nt(rt){return rt==null?"":tt(rt)}_e.exports=nt},function(_e,et,b){var tt=b(616),nt=b(272),rt=tt(nt);_e.exports=rt},function(_e,et,b){_e.exports=function(nt){const rt=[];return{on(it,ot){for(var st=arguments.length,at=new Array(st>2?st-2:0),ct=2;ct<st;ct++)at[ct-2]=arguments[ct];if(rt.push({eventName:it,handler:ot,args:at}),nt.on)nt.on(it,ot);else if(nt.addEventListener)nt.addEventListener(it,ot,...at);else throw new Error("Object does not support events",nt)},off(it,ot){if(nt.off)nt.off(it,ot);else if(nt.removeEventListener){for(var st=arguments.length,at=new Array(st>2?st-2:0),ct=2;ct<st;ct++)at[ct-2]=arguments[ct];nt.removeEventListener(it,ot,...at)}else throw new Error("Object does not support events",nt)},once(it,ot){for(var st=arguments.length,at=new Array(st>2?st-2:0),ct=2;ct<st;ct++)at[ct-2]=arguments[ct];rt.push({eventName:it,handler:ot,args:at}),nt.once(it,ot)},removeAll(){rt.forEach(it=>{let ot=it.eventName,st=it.handler,at=it.args;this.off(ot,st,...at)}),rt.splice(0,rt.length)}}}},function(_e,et,b){var tt=b(175);function nt(rt,it,ot){it=="__proto__"&&tt?tt(rt,it,{configurable:!0,enumerable:!0,value:ot,writable:!0}):rt[it]=ot}_e.exports=nt},function(_e,et,b){var tt=b(382),nt=b(17),rt=Object.prototype,it=rt.hasOwnProperty,ot=rt.propertyIsEnumerable,st=tt(function(){return arguments}())?tt:function(at){return nt(at)&&it.call(at,"callee")&&!ot.call(at,"callee")};_e.exports=st},function(_e,et,b){(function(tt){var nt=b(14),rt=b(383),it=et&&!et.nodeType&&et,ot=it&&typeof tt=="object"&&tt&&!tt.nodeType&&tt,st=ot&&ot.exports===it,at=st?nt.Buffer:void 0,ct=at?at.isBuffer:void 0,ut=ct||rt;tt.exports=ut}).call(this,b(84)(_e))},function(_e,et){var b=9007199254740991,tt=/^(?:0|[1-9]\d*)$/;function nt(rt,it){var ot=typeof rt;return it=it??b,!!it&&(ot=="number"||ot!="symbol"&&tt.test(rt))&&rt>-1&&rt%1==0&&rt<it}_e.exports=nt},function(_e,et){function b(tt){return function(nt){return tt(nt)}}_e.exports=b},function(_e,et){var b=Object.prototype;function tt(nt){var rt=nt&&nt.constructor,it=typeof rt=="function"&&rt.prototype||b;return nt===it}_e.exports=tt},function(_e,et,b){_e.exports=function(tt){if(typeof tt!="function")throw new TypeError(tt+" is not a function");return tt}},function(_e,et,b){var tt=b(29),nt=b(17),rt="[object Symbol]";function it(ot){return typeof ot=="symbol"||nt(ot)&&tt(ot)==rt}_e.exports=it},function(_e,et,b){if(b(8).env.name==="Node")_e.exports={value:""};else{var nt,rt;const it=(nt=Array.prototype.slice.call(document.getElementsByTagName("script")))==null||(rt=nt.pop())==null?void 0:rt.getAttribute("src"),ot=it&&it.match(/[?&]apikey=([^&]+)/i)||[],st=ot[1];_e.exports={value:st||""}}},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5));const ot=b(154),st=b(49),at=b(9),ct=b(56),ut=b(129),lt=b(271),dt=b(15),ft=b(6),St=b(249),Tt=b(155),pt=b(28),gt=b(72),yt=b(619);_e.exports=function(It){It===void 0&&(It={});const Gt=It.hasValidPeerConnection||b(620),Wt=It.applySdpTransform||b(156),At=It.createPeerConnection||b(621),kt=It.env||b(2),Vt=It.sdpTransformDefaults||b(623),Nt=It.getStatsAdapter||b(274),tn=It.getRtcStatsReportAdapter||b(277),_t=It.getSynchronizationSources||b(627),Kt=It.IceCandidateProcessor||b(628),cn=It.logging||b(1),an=It.offerProcessor||b(630),mn=It.PeerConnectionChannels||b(632),on=It.subscribeProcessor||b(634),yn=b(635),fn=It.changeMediaDirection||b(637),sn=fn.changeMediaDirectionToInactive,un=fn.changeMediaDirectionToRecvOnly,Ln=It.Qos||b(278).default,Xn=It.global||(typeof window!==void 0?window:commonjsGlobal),pn=It.debounce||b(641),Vn=It.needsToSwapH264Profiles||b(643).once,Tn=()=>Gt(Xn.RTCPeerConnection),Jn=It.NativeRTCIceCandidate||Xn.RTCIceCandidate,lr=It.NativeRTCSessionDescription||Xn.RTCSessionDescription,tr=It.Errors||b(7),Qn=It.OTErrorClass||b(22),Sr=It.ExceptionCodes||b(10),vr=It.hasPictureInPictureBug||b(644),Fr=1e4,kr=xo=>{let Er=xo.sendMessage,xr=xo.logging;const Un={};return Mn=>{Mn.candidate?(Un[Mn.candidate.sdpMid]=Mn.candidate.sdpMLineIndex,Er("candidate",{candidate:Mn.candidate.candidate,sdpMid:Mn.candidate.sdpMid||"",sdpMLineIndex:Mn.candidate.sdpMLineIndex||0})):xr.debug("IceCandidateForwarder: No more ICE candidates.")}},jr=()=>{};return function(Er){Er===void 0&&(Er={});let xr=!1;const Un=Er,Mn=Un.iceConfig,sr=Mn===void 0?{servers:[]}:Mn,Ar=Un.sendMessage,so=Un.isPublisher,Bn=Un.offerOverrides,gr=Un.answerOverrides,Or=Un.p2p,ro=Un.codecFlags,Ao=Un.sourceStreamId,ho=Un.keyStore,vo=Un.sFrameClientStore,po=Un.isE2ee,zr=Un.removeUnusedCodecs;let Go=Er,mo=Go.logAnalyticsEvent,Zo=mo===void 0?jr:mo,$r=Go.remoteConnectionId,Ru=!1,jo;const yo=Vn();let _o=0,js=!1,Ql,Rs,xa,Iu;const Gu=new yn(Zo),jp=Tt();function $u(xn,Nn){xr||["candidate","offer","answer","pranswer"].indexOf(xn)>-1&&(xr=(xn==="candidate"?Nn.candidate:Nn.sdp).indexOf("typ relay")!==-1),Ar(xn,Nn)}const Qu=st();Zo("createPeerConnection","Attempt");const Jr={};Jr.id=dt();const Qs=cn(`PeerConnection:${Jr.id}`);Qs.debug("construct",{id:Jr.id,options:Er});const au=Vt,Ws=xn=>sr.transportPolicy==="relay"&&xn!=null&&xn.candidate.indexOf("typ relay")===-1,yl=lt(Er,["isPublisher","logAnalyticsEvent","offerOverrides","answerOverrides","sendMessage"]);let Xr,Js,Up,cu,lu,qo=[];const Gl=(()=>{let xn=yl.overrideSimulcastEnabled||!1;return{get(){return xn},set(Nn){const qn=!!Nn&&yl.capableSimulcastStreams>1;qn!==xn&&yl.overrideSimulcastEnabled===void 0&&(xn=qn,Jr.generateOfferAndSend())}}})(),es=()=>{Jr.iceConnectionStateIsConnected()?Qs.debug("iceRestart is going to wait until we disconnect or negotiationNeeded and then restart ice"):Jr.generateOfferAndSend()},ju=(()=>{let xn=!1;return{get(){return xn},set(Nn){const qn=!!Nn;qn!==xn&&(xn=qn,xn&&es())}}})(),lp={clean(){delete this.promise,delete this.resolve,delete this.reject}};lp.promise=new tt((xn,Nn)=>{lp.resolve=xn,lp.reject=Nn});let $a=new Kt,ep="new";Object.defineProperty(Jr,"signalingState",{get(){return Xr.signalingState},set(xn){return Xr.signalingState=xn,xn}}),ft(Jr),Jr.addOptions=xn=>{$r=xn.remoteConnectionId,Zo=xn.logAnalyticsEvent},Jr.startEncryption=function(){var xn=(0,it.default)(rt.default.mark(function Nn(qn){var Rr;return rt.default.wrap(function(wo){for(;;)switch(wo.prev=wo.next){case 0:if(po){wo.next=2;break}return wo.abrupt("return");case 2:return xa=yt(qn),wo.next=5,vo.createSender(xa);case 5:return Rs=wo.sent,wo.next=8,ho.get();case 8:return Rr=wo.sent,wo.next=11,Rs.setSenderEncryptionKey(Rr);case 11:Iu=Wo=>{Rs.setSenderEncryptionKey(Wo)},ho.on("keyChanged",Iu),Xr.getTransceivers().forEach(Wo=>Rs.encrypt(Wo.mid,Wo.sender));case 14:case"end":return wo.stop()}},Nn)}));return function(Nn){return xn.apply(this,arguments)}}(),Jr.once("iceConnected",(0,it.default)(rt.default.mark(function xn(){var Nn,qn;return rt.default.wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:Nn="",qn={pcc:parseInt(st()-Qu,10),hasRelayCandidates:xr,proxyInfo:Nn},Xr&&Xr.proxyInfo&&(qn.proxyInfo=Xr.proxyInfo),Zo("createPeerConnection","Success",qn);case 4:case"end":return Zr.stop()}},xn)}))),lp.resolve();const _u=function(){var xn=(0,it.default)(rt.default.mark(function Nn(){var qn;return rt.default.wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return Zr.next=2,ho.get();case 2:if(qn=Zr.sent,xa=yt($r),Ql=vo.getReceiver(xa),Ql){Zr.next=14;break}return Zr.next=8,vo.createReceiver(xa);case 8:Ql=Zr.sent,Ql.addReceiver(xa),Ql.setReceiverEncryptionKey(xa,qn),ho.on("keyChanged",wo=>{Ql.setReceiverEncryptionKey(xa,wo)}),Ql.addEventListener("decryptFailed",()=>{Jr.trigger("decryptFailed")}),Ql.addEventListener("decryptionRestored",()=>{Jr.trigger("decryptRestored")});case 14:case"end":return Zr.stop()}},Nn)}));return function(){return xn.apply(this,arguments)}}(),na=xn=>{if(Qs.debug("internalCreatePeerConnection: called"),Xr){Qs.debug("internalCreatePeerConnection: resolving synchronously"),xn.call(null,null,Xr);return}if(qo.push(xn),!(qo.length>1)){if(Qs.debug(`Creating peer connection config "${JSON.stringify(yl)}".`),sr.servers.length===0&&(Qs.error("No ice servers present"),Zo("Error","noIceServers")),sr.transportPolicy==="relay"){const Nn=qn=>qn&&qn.indexOf("turn")===0;sr.servers=sr.servers.map(qn=>{const Rr=ct(qn);return Array.isArray(Rr.urls)||(Rr.urls=[Rr.urls]),Rr.urls=Rr.urls.filter(Nn),Rr.urls.length===0?void 0:Rr}).filter(qn=>qn!==void 0)}yl.iceTransportPolicy=sr.transportPolicy,yl.iceServers=sr.servers,po&&(yl.forceEncodedVideoInsertableStreams=!0,yl.forceEncodedAudioInsertableStreams=!0,yl.encodedInsertableStreams=!0),Tn().then(Nn=>{if(!Nn)throw Qs.error("createPeerConnection: Invalid RTCPeerConnection object"),new Error("Failed to create valid RTCPeerConnection object");return At({window:Xn,config:yl})}).then(function(){var Nn=(0,it.default)(rt.default.mark(function qn(Rr){return rt.default.wrap(function(wo){for(;;)switch(wo.prev=wo.next){case 0:if(!(!so&&po)){wo.next=3;break}return wo.next=3,_u();case 3:Yo(null,Rr);case 4:case"end":return wo.stop()}},qn)}));return function(qn){return Nn.apply(this,arguments)}}(),Nn=>Yo(Nn))}},Yo=(xn,Nn)=>{if(xn){np({reason:`Failed to create PeerConnection, exception: ${xn}`,prefix:"NewPeerConnection"}),qo=[];return}Qs.debug("OT attachEventsToPeerConnection"),Xr=Nn,$a&&$a.setPeerConnection(Nn),Js=new mn(Xr),yl.channels&&Js.addMany(yl.channels);const qn=kr({sendMessage:$u,logging:Qs}),Rr=ns=>{if(lp.resolve(),Ws(ns.candidate)){Qs.debug("Ignore candidate",ns.candidate.candidate);return}qn(ns)},Zr=function(){var ns=(0,it.default)(rt.default.mark(function ds(Zs){return rt.default.wrap(function(Ap){for(;;)switch(Ap.prev=Ap.next){case 0:vs(Zs),!so&&Ql&&Ql.decrypt(Zs.transceiver.mid,Zs.receiver);case 2:case"end":return Ap.stop()}},ds)}));return function(Zs){return ns.apply(this,arguments)}}();let wo=Xr.iceConnectionState;const Wo=ns=>{Xr?(Qs.debug("iceconnectionstatechange",Xr.iceConnectionState),Xr.iceConnectionState==="connected"?(wo==="disconnected"&&Jr.clearFailedTimeout(),Jr.emit("iceConnected"),ju.set(!1)):Xr.iceConnectionState==="completed"&&kt.isLegacyEdge&&setTimeout(()=>zn.startCollecting(Xr),1e3)):Qs.debug("iceconnectionstatechange on peerConnection that no longer exists",Jr);const ds=ns.target.iceConnectionState;Jr.trigger("iceConnectionStateChange",ds),Zo("attachEventsToPeerConnection","iceconnectionstatechange",ds),ds==="disconnected"&&(ju.get()?(Qs.debug("Restarting ice!"),Jr.generateOfferAndSend()):gt()||(lu=setTimeout(()=>{const Zs="failed";Zo("attachEventsToPeerConnection","iceconnectionstatechange",Zs),wo=Zs,Jr.trigger("iceConnectionStateChange",Zs)},Fr))),wo!=="disconnected"&&ds==="failed"&&np({reason:"The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",prefix:"ICEWorkflow"}),wo=ds},ws=()=>{Zo("peerConnection:negotiationNeeded","Event"),so&&Jr.generateOfferAndSend(),Jr.trigger("negotiationNeeded")};Xr.addEventListener("track",Zr),Xr.addEventListener("icecandidate",Rr),Xr.addEventListener("signalingstatechange",tp),Xr.addEventListener("negotiationneeded",ws),Xr.addEventListener("iceconnectionstatechange",Wo),jp.add(()=>{Xr&&(Xr.removeEventListener("track",Zr),Xr.removeEventListener("icecandidate",Rr),Xr.removeEventListener("signalingstatechange",tp),Xr.removeEventListener("negotiationneeded",ws),Xr.removeEventListener("iceconnectionstatechange",Wo))}),_l()},_l=()=>{for(;qo.length;)qo.shift().call(null)},uo=()=>{$a&&($a.destroy(),$a=null),qo=[],zn.stopCollecting(),jp.releaseAll(),lp.clean(),Xr!==null&&(Xr.destroy&&Xr.destroy(),Xr=null,Jr.trigger("close")),Jr.off()},tp=xn=>{const Nn=xn.target.signalingState;if(Jr.emit("signalingStateChange",Nn),Nn==="stable"&&Jr.emit("signalingStateStable"),Nn&&Nn!==ep)switch(ep=Nn,Qs.debug(`stateChange: ${ep}`),ep){case"closed":uo();break}},xu=xn=>{xn.dataChannels=Js.sampleQos(),Jr.trigger("qos",{parsedStats:xn,simulcastEnabled:Gl.get()})},xp=()=>{let xn;if(Xr.getRemoteStreams)xn=Xr.getRemoteStreams();else if(Xr.remoteStreams)xn=Xr.remoteStreams;else throw new Error("Invalid Peer Connection object implements no method for retrieving remote streams");return Array.prototype.slice.call(xn)},vs=xn=>{var Nn;const qn=xn.track,Rr=xn.transceiver,Zr=xn.stream||((Nn=xn.streams)==null?void 0:Nn[0]);Zo("createPeerConnection","TrackAdded"),Jr.trigger("trackAdded",{stream:Zr,track:qn,transceiver:Rr})},wp=(xn,Nn,qn)=>{Ru=!1,np({reason:`PeerConnection.offerProcessor ${xn}: ${Nn}`,prefix:qn})},Jp=xn=>{if(Ru){jo=xn;return}Ru=!0,Zo("peerConnection:processOffer","Event");const Nn=new lr({type:"offer",sdp:xn.content.sdp}),qn=Zr=>{Ru=!1,$a&&$a.process(),$u("answer",Zr),kt.isLegacyEdge||zn.startCollecting(Xr,so),jo&&(Jp(jo),jo=null)},Rr=Zr=>Jr.trigger("remoteVideoSupported",Zr);na(()=>{an(Xr,Xn.RTCPeerConnection,Xn.RTCSessionDescription,lr,au,Nn,ro,Or,qn,wp,Rr,yo,Ao)})},Op=xn=>{Zo("peerConnection:processAnswer","Event");const Nn="Failed to parse SessionDescription. a=extmap-allow-mixed Expects at least 2 fields.",qn=Rr=>{Rr.includes(Nn)&&(Rr="SessionDescription issue has been fixed in Chrome 71 and above. Please update your browser."),np({reason:`Error while setting RemoteDescription ${Rr}`,prefix:"SetRemoteDescription"})};if(!xn.content.sdp){qn("Weird answer message, no SDP.");return}cu=new lr({type:"answer",sdp:Wt(au,"remote","answer",at({replaceBaselineProfile:yo},gr),xn.content.sdp).local}),(()=>{const Rr=()=>{Qs.debug("processAnswer: setRemoteDescription Success"),$a&&$a.process()};Xr.setRemoteDescription(cu).then(Rr).catch(qn),Gu.setResolved()})(),kt.isLegacyEdge||zn.startCollecting(Xr,so)},vp=xn=>{var Nn,qn;if(((Nn=Xr)==null||(qn=Nn.signalingState)==null?void 0:qn.toLowerCase())==="closed")return;Zo("peerConnection:processSubscribe","Event"),Qs.debug("processSubscribe: Sending offer to subscriber.");let Rr=Gl.get()?yl.capableSimulcastStreams:1;Ao==="P2P"&&!Or&&(Rr=1),na(()=>{on({peerConnection:Xr,NativeRTCSessionDescription:lr,sdpTransforms:au,numSimulcastStreams:Rr,removeVideoOrientation:vr(),offerOverrides:Bn,offerConstraints:{iceRestart:ju.get()},replaceBaselineProfile:yo,removeUnusedCodecs:zr}).then(wo=>{Qs.debug("processSubscribe: got offer, waiting for _readyToCompleteOffer"),Up=wo,lp.promise.then(()=>xn(Up))},wo=>{np({reason:`subscribeProcessor ${wo.message}: ${wo.reason}`,prefix:wo.prefix})}),ju.set(!1)})},Hp=()=>{typeof Iu=="function"&&ho.off("keyChanged",Iu),Rs=null,xa=null};Jr.generateOfferAndSend=()=>{const xn=Nn=>{Qs.debug("processSubscribe: sending offer"),$u("offer",Nn)};Jr.generateOffer(xn)},Jr.generateOfferAndAnswer=xn=>{const Nn=qn=>{xn(qn)};Jr.generateOffer(Nn)},Jr.generateOffer=pn(function(xn){xn===void 0&&(xn=()=>{}),Gu.enqueueOfferAnswer(()=>vp(xn))},100);const np=xn=>{let Nn=xn.reason,qn=xn.prefix;Qs.error(Nn,"in state",Xr?{connectionState:Xr.connectionState,iceConnectionState:Xr.iceConnectionState,iceGatheringState:Xr.iceGatheringState,signalingState:Xr.signalingState}:"(none)"),Jr.trigger("error",{reason:Nn,prefix:qn})};Jr.addTrack=(xn,Nn)=>{const qn=new tt((Rr,Zr)=>{na(wo=>{if(wo)return Zr(wo);Rr()})}).then(()=>{if(Xr.addTrack)return Xr.addTrack(xn,Nn);const Rr=Xr.getLocalStreams()[0];if(Rr===void 0)throw new Error("PeerConnection has no existing streams, cannot addTrack");Rr.addTrack(xn),Jr.generateOfferAndSend()}).then(()=>new tt(Rr=>{Jr.once("signalingStateStable",()=>{Rr()})}));return ot(qn,15e3,"Renegotiation timed out")};function uu(xn){this.track=xn}Jr.setIceConfig=xn=>{try{kt.isFirefox&&(xn.certificates=Xr.getConfiguration().certificates),Xr.setConfiguration(xn)}catch(Nn){throw new St(`A peer connection failed to set configuration with ${Nn.message}`,tr.FAILED_SET_CONFIGURATION)}return ju.set(!0),Xr},Jr.removeTrack=xn=>{const Nn=tt.resolve().then(()=>{if(xn instanceof uu){Xr.getLocalStreams()[0].removeTrack(xn.track),Jr.generateOfferAndSend();return}return Xr.removeTrack(xn)}).then(()=>new tt(qn=>{Jr.once("signalingStateStable",()=>{qn()})}));return ot(Nn,15e3,"Renegotiation timed out")},Jr.addLocalStream=xn=>new tt((Nn,qn)=>{na(Rr=>{if(Rr){qn(Rr);return}try{xn.getTracks&&xn.getTracks().forEach(Zr=>Xr.addTrack(Zr,xn))}catch(Zr){qn(Zr);return}Nn()})}),Jr.getLocalStreams=()=>Xr.getLocalStreams(),Jr.getSenders=()=>Xr.getSenders?Xr.getSenders():Xr.getLocalStreams()[0].getTracks().map(xn=>new uu(xn)),Jr.disconnect=()=>{var xn;$a&&($a.destroy(),$a=null),(xn=Xr)!=null&&xn.signalingState&&Xr.signalingState.toLowerCase()!=="closed"&&(Xr.close(),Hp(),setTimeout(uo))},Jr.iceRestart=()=>ju.set(!0),Jr.clearFailedTimeout=()=>clearTimeout(lu);const Wu=xn=>{const Nn=xn?sn:un;return new tt(Rr=>{Gu.enqueueOfferAnswer((0,it.default)(rt.default.mark(function Zr(){return rt.default.wrap(function(Wo){for(;;)switch(Wo.prev=Wo.next){case 0:return Wo.next=2,Nn(Xr);case 2:Gu.setResolved(),Rr();case 4:case"end":return Wo.stop()}},Zr)})))})};Jr.changeMediaDirectionToRecvOnly=()=>Wu(!1),Jr.changeMediaDirectionToInactive=()=>Wu(!0),Jr.processMessage=(xn,Nn)=>{switch(Qs.debug(`processMessage: Received ${xn} from ${Nn.fromAddress}`,Nn),Qs.debug(Nn),xn){case"generateoffer":Nn.content&&Nn.content.simulcastEnabled!==void 0&&Gl.set(Nn.content.simulcastEnabled),Jr.generateOfferAndSend(),Rr();break;case"offer":Jp(Nn),Rr();break;case"answer":case"pranswer":Op(Nn);break;case"candidate":var qn=new Jn(Nn.content);if(Ws(qn))return Qs.debug("Ignore candidate",qn.candidate),Jr;$a&&$a.addIceCandidate(qn).catch(Zr=>{Qs.warn(`Error while adding ICE candidate: ${JSON.stringify(qn)}: ${Zr.toString()}`)});break;default:Qs.debug(`processMessage: Received an unexpected message of type ${xn} from ${Nn.fromAddress}: ${JSON.stringify(Nn)}`)}function Rr(){_o+=1,zn.handleOfferMessageReceived(),_o>1&&(Zo("Renegotiation","Attempt"),js=!0)}return Jr};const Xl=xn=>{const Nn=(qn,Rr)=>qn.mid<Rr.mid?1:qn.mid>Rr.mid?-1:0;return xn.sort(Nn)};Jr.stopTransceivers=xn=>{const Nn=Xr.getTransceivers().filter(qn=>xn.includes(qn.mid));Xl(Nn).forEach(qn=>qn.stop())},Jr.remoteStreams=()=>Xr?xp():[],Jr.remoteTracks=()=>Xr?Xr.getReceivers?Array.prototype.slice.apply(Xr.getReceivers()).map(xn=>xn.track):Array.prototype.concat.apply([],xp().map(xn=>xn.getTracks())):[],Jr.remoteDescription=()=>Xr.remoteDescription,Jr.getStats=xn=>{if(!Xr){const Nn=Sr.PEER_CONNECTION_NOT_CONNECTED;xn(new St(Qn.getTitleByCode(Nn),tr.PEER_CONNECTION_NOT_CONNECTED,{code:Nn}));return}Nt(Xr,xn)},Jr.getRtcStatsReport=xn=>{if(!Xr){const Nn=Sr.PEER_CONNECTION_NOT_CONNECTED;xn(new St(Qn.getTitleByCode(Nn),tr.PEER_CONNECTION_NOT_CONNECTED,{code:Nn}));return}tn(Xr,xn)},Jr.getSynchronizationSources=xn=>{if(!so){if(!Xr){const Nn=Sr.PEER_CONNECTION_NOT_CONNECTED;xn(new St(Qn.getTitleByCode(Nn),tr.PEER_CONNECTION_NOT_CONNECTED,{code:Nn}));return}_t(Xr,xn)}};const Np=function xn(Nn,qn,Rr,Zr){let wo;const Wo=Js.get(qn,Rr);if(!Wo){if(Nn>0){setTimeout(xn.bind(null,Nn-1,qn,Rr,Zr),200);return}wo=new St(`A channel with that label and options could not be found. Label:${qn}. Options: ${JSON.stringify(Rr)}`)}Zr(wo,Wo)};Jr.getDataChannel=(xn,Nn,qn)=>{if(!Xr){qn(new St("Cannot create a DataChannel before there is a connection."));return}Np(100,xn,Nn,qn)},Jr.getSourceStreamId=()=>Ao,Jr.iceConnectionStateIsConnected=()=>Xr&&["connected","completed"].indexOf(Xr.iceConnectionState)>-1,Jr.findAndReplaceTrack=(xn,Nn)=>tt.resolve().then(()=>{const qn=Xr.getSenders().filter(Rr=>Rr.track===xn)[0];if(!qn)return tt.resolve();if(typeof qn.replaceTrack!="function")throw new Error("Sender does not support replaceTrack");return qn.replaceTrack(Nn)}),Jr.hasRelayCandidates=()=>xr,Jr.getNegotiatedCodecs=()=>{if(!Xr.localDescription||!Xr.remoteDescription)return null;const xn=Nn=>ut(pt.getCodecs(Xr.localDescription.sdp,Nn),pt.getCodecs(Xr.remoteDescription.sdp,Nn));return{audio:xn("audio"),video:xn("video")}},Jr.on("signalingStateStable",()=>{js&&(js=!1,Zo("Renegotiation","Success",Jr.getNegotiatedCodecs()))}),Jr.on("error",xn=>{let Nn=xn.prefix;js&&["CreateOffer","SetRemoteDescription"].indexOf(Nn)!==-1&&(js=!1,Zo("Renegotiation","Failure"))}),Jr.on("close",()=>{js&&(js=!1,Zo("Renegotiation","Cancel"))});const zn=new Ln;return zn.on("stats",xu),Jr}}}).call(this,b(0))},function(_e,et,b){const tt=b(2),nt=()=>(tt.isChrome||tt.isElectron)&&tt.version>=90||tt.isOpera&&tt.version>=76;_e.exports=()=>!nt()&&(tt.isChrome&&tt.version>71||tt.isChromiumEdge&&tt.version<90||tt.isOpera&&tt.version>58)},function(_e,et,b){function tt(nt,rt,it){it===void 0&&(it=1/0);let ot=null,st=!1,at=1;const ct=1e3/rt,ut=()=>{!st||at>it||(at+=1,nt(),ot=setTimeout(ut,ct))};this.start=()=>{st||(st=!0,setTimeout(ut,ct))},this.stop=()=>{(typeof window!==void 0?window:commonjsGlobal).clearTimeout(ot),st=!1}}_e.exports=tt},function(_e,et,b){et.__esModule=!0,et.MEDIUM=et.LOW=et.CongestionLevels=et.CRITICAL=void 0;const tt=2;et.CRITICAL=tt;const nt=1;et.MEDIUM=nt;const rt=0;et.LOW=rt;const it={CRITICAL:tt,MEDIUM:nt,LOW:rt};et.CongestionLevels=it},function(_e,et,b){const tt=b(47),nt=b(671),rt=b(11),it=b(157),ot={};function st(ft){return Number(ft.framerateMean||ft.googFrameRateSent||ft.googFrameRateReceived||ft.googFrameRateInput||ft.googFrameRateOutput||0)}function at(ft){return Number(ft.framesEncoded||ft.framesDecoded)}function ct(ft,St){if(st(ft))return st(ft);if(!at(ft))return;let Tt=0;const pt=ot[ft.id]?ot[ft.id].frames:0,gt=ot[ft.id]?ot[ft.id].timestamp:St;return Tt=it({currentStatFrames:at(ft),currentTimestamp:ft.timestamp,prevStatFrames:pt,prevTimestamp:gt}),ot[ft.id]={frames:at(ft),timestamp:ft.timestamp},Tt}function ut(ft,St){if(!St)return{};const Tt=St.filter(pt=>pt.id===ft.mediaTrackId);return Tt.length?Tt[0]:{}}function lt(ft,St){return"packetsLost"in St?ft+St.packetsLost:ft}const dt={isVideoStat(ft,St){const Tt=ut(ft,St);return ft.kind==="video"&&["outbound-rtp","inbound-rtp"].includes(ft.type)||ft.mediaType==="video"||"googFrameWidthReceived"in ft||"googFrameWidthInput"in ft||ft.type==="inbound-rtp"&&ft.id.indexOf("Video")!==-1||ft.type==="inboundrtp"&&Tt.frameWidth!==0},isAudioStat(ft,St){const Tt=ut(ft,St);return ft.kind==="audio"&&["outbound-rtp","inbound-rtp"].includes(ft.type)||ft.mediaType==="audio"||"audioInputLevel"in ft||"audioOutputLevel"in ft||ft.type==="inbound-rtp"&&ft.id.indexOf("Audio")!==-1||ft.type==="inboundrtp"&&Tt.frameWidth===0},isInboundStat(ft){return"bytesReceived"in ft||"packetsReceived"in ft},isOutboundStat(ft){return"bytesSent"in ft||"packetsSent"in ft},isVideoTrackStat(ft){return ft.type==="track"&&(ft.frameHeight>0||ft.frameWidth>0||ft.framesCorrupted>0||ft.framesDecoded>0||ft.framesPerSecond>0||ft.framesSent>0||ft.framesReceived>0)},isVideoRemoteInboundRtpStat(ft){return ft.type==="remote-inbound-rtp"&&ft.kind==="video"},isAudioRemoteInboundRtpStat(ft){return ft.type==="remote-inbound-rtp"&&ft.kind==="audio"},isVideoInboundRtpStat(ft){return ft.type==="inbound-rtp"&&ft.kind==="video"},parseStatCategory(ft){const St={packetsLost:0,packetsReceived:0,bytesReceived:0};return"packetsReceived"in ft&&(St.packetsReceived=parseInt(ft.packetsReceived,10)),"packetsLost"in ft&&(St.packetsLost=parseInt(ft.packetsLost,10)),"bytesReceived"in ft&&(St.bytesReceived=parseInt(ft.bytesReceived,10)),this.isVideoStat(ft)&&("framerateMean"in ft?St.frameRate=Number(ft.framerateMean):"googFrameRateOutput"in ft?St.frameRate=Number(ft.googFrameRateOutput):"googFrameRateInput"in ft&&(St.frameRate=Number(ft.googFrameRateInput))),St},getVideoPacketsLost(ft){return ft.filter(St=>this.isVideoRemoteInboundRtpStat(St,ft)).reduce(lt,0)},getAudioPacketsLost(ft){return ft.filter(St=>this.isAudioRemoteInboundRtpStat(St,ft)).reduce(lt,0)},normalizeTimestamp(ft,St){return St===void 0&&(St=Date.now()),rt(ft)&&"getTime"in ft?ft.getTime():Math.abs(ft/(1e3*St)-1)<.05?ft/1e3:ft},normalizeStats(ft,St,Tt){St===void 0&&(St=!0);const pt=ft.filter(Nt=>dt.isVideoStat(Nt,ft)).filter(Nt=>dt.isInboundStat(Nt)===St),gt=ft.filter(Nt=>this.isAudioStat(Nt,ft)).filter(Nt=>this.isInboundStat(Nt)===St)[0],yt=pt[0];if(!gt&&!yt)throw new Error("could not find stats for either audio or video");const Et=dt.normalizeTimestamp(yt?yt.timestamp:gt.timestamp),It={timestamp:Et};yt&&!St&&yt.packetsLost===void 0&&(yt.packetsLost=this.getVideoPacketsLost(ft)),gt&&!St&&gt.packetsLost===void 0&&(gt.packetsLost=this.getAudioPacketsLost(ft));const Gt=["packetsSent","packetsLost","bytesSent"],kt=St?Nt=>tt(Nt,["packetsReceived","packetsLost","bytesReceived"]):Nt=>tt(Nt,Gt),Vt=Nt=>{const tn=["framerateMean","googFrameRateSent","googFrameRateReceived","googFrameRateInput","googFrameRateOutput","framesEncoded","framesDecoded"],_t=Gt.concat(tn),Kt={timestamp:Et,id:yt.id};return _t.forEach(cn=>{Kt[cn]=Nt.map(an=>Number(an[cn]||0)).reduce((an,mn)=>an+mn,0)}),Kt};if(pt&&pt.length>0){const Nt=Vt(pt);It.video=Object.assign({frameRate:ct(Nt,Tt)},nt(kt(Nt),Number))}return gt&&(It.audio=nt(kt(gt),Number)),It}};_e.exports=dt},function(_e,et,b){et.__esModule=!0,et.messages=et.codes=void 0;const tt={1e3:"The connection successfully completed the purpose for which it was created.",1001:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.",1002:"The endpoint is terminating the connection due to a protocol error. (CLOSE_PROTOCOL_ERROR)",1003:"The connection is being terminated because the endpoint has indicated that reconnections are not available. (CLOSE_UNSUPPORTED)",1005:"Indicates that no status code was provided even though one was expected. (CLOSE_NO_STATUS)",1006:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected. (CLOSE_ABNORMAL)",1007:"Indicates that an endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [RFC3629] data within a text message)",1008:"Indicates that an endpoint is terminating the connection because it has received a message that violates its policy.  This is a generic status code that can be returned when there is no other more suitable status code (e.g., 1003 or 1009) or if there is a need to hide specific details about the policy",1009:"Indicates that an endpoint is terminating the connection because it has received a message that is too big for it to process (CLOSE_TOO_LARGE)",1011:"Indicates that a server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request",4001:"Connectivity loss was detected as it was too long since the socket received the last PONG message",4010:"Timed out while waiting for the Rumor socket to connect.",4020:"Error code unavailable.",4030:"Exception was thrown during Rumor connection, possibly because of a blocked port."};et.messages=tt;const nt={CLOSE_NORMAL:1e3,CLOSE_GOING_AWAY:1001,CLOSE_PROTOCOL_ERROR:1002,CLOSE_UNSUPPORTED:1003,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006,CLOSE_INCONSISTENT_DATA:1007,CLOSE_POLICY_VIOLATION:1008,CLOSE_TOO_LARGE:1009,CLOSE_UNEXPECTED_CONDITION:1011,CLOSE_CONNECTIVITY_LOSS:4001,CLOSE_TIMEOUT:4010,CLOSE_FALLBACK_CODE:4020,CLOSE_CONNECT_EXCEPTION:4030,ALREADY_CONNECTED_CONNECTING:null};et.codes=nt},function(_e,et,b){var tt=b(78),nt=b(113),rt=b(83),it=b(176),ot=b(386),st=b(179),at=b(54),ct=b(389),ut=b(391),lt=b(182),dt=b(184),ft=b(41),St=b(394),Tt=b(395),pt=b(189),gt=b(12),yt=b(64),Et=b(399),It=b(11),Gt=b(401),Wt=b(30),At=b(53),kt=1,Vt=2,Nt=4,tn="[object Arguments]",_t="[object Array]",Kt="[object Boolean]",cn="[object Date]",an="[object Error]",mn="[object Function]",on="[object GeneratorFunction]",yn="[object Map]",fn="[object Number]",sn="[object Object]",un="[object RegExp]",Ln="[object Set]",Xn="[object String]",pn="[object Symbol]",Vn="[object WeakMap]",Tn="[object ArrayBuffer]",Jn="[object DataView]",lr="[object Float32Array]",tr="[object Float64Array]",Qn="[object Int8Array]",Sr="[object Int16Array]",vr="[object Int32Array]",Fr="[object Uint8Array]",kr="[object Uint8ClampedArray]",jr="[object Uint16Array]",xo="[object Uint32Array]",Er={};Er[tn]=Er[_t]=Er[Tn]=Er[Jn]=Er[Kt]=Er[cn]=Er[lr]=Er[tr]=Er[Qn]=Er[Sr]=Er[vr]=Er[yn]=Er[fn]=Er[sn]=Er[un]=Er[Ln]=Er[Xn]=Er[pn]=Er[Fr]=Er[kr]=Er[jr]=Er[xo]=!0,Er[an]=Er[mn]=Er[Vn]=!1;function xr(Un,Mn,sr,Ar,so,Bn){var gr,Or=Mn&kt,ro=Mn&Vt,Ao=Mn&Nt;if(sr&&(gr=so?sr(Un,Ar,so,Bn):sr(Un)),gr!==void 0)return gr;if(!It(Un))return Un;var ho=gt(Un);if(ho){if(gr=St(Un),!Or)return at(Un,gr)}else{var vo=ft(Un),po=vo==mn||vo==on;if(yt(Un))return st(Un,Or);if(vo==sn||vo==tn||po&&!so){if(gr=ro||po?{}:pt(Un),!Or)return ro?ut(Un,ot(gr,Un)):ct(Un,it(gr,Un))}else{if(!Er[vo])return so?Un:{};gr=Tt(Un,vo,Or)}}Bn||(Bn=new tt);var zr=Bn.get(Un);if(zr)return zr;Bn.set(Un,gr),Gt(Un)?Un.forEach(function(Zo){gr.add(xr(Zo,Mn,sr,Zo,Un,Bn))}):Et(Un)&&Un.forEach(function(Zo,$r){gr.set($r,xr(Zo,Mn,sr,$r,Un,Bn))});var Go=Ao?ro?dt:lt:ro?At:Wt,mo=ho?void 0:Go(Un);return nt(mo||Un,function(Zo,$r){mo&&($r=Zo,Zo=Un[$r]),rt(gr,$r,xr(Zo,Mn,sr,$r,Un,Bn))}),gr}_e.exports=xr},function(_e,et,b){var tt=b(79),nt=b(358),rt=b(359),it=b(360),ot=b(361),st=b(362);function at(ct){var ut=this.__data__=new tt(ct);this.size=ut.size}at.prototype.clear=nt,at.prototype.delete=rt,at.prototype.get=it,at.prototype.has=ot,at.prototype.set=st,_e.exports=at},function(_e,et,b){var tt=b(353),nt=b(354),rt=b(355),it=b(356),ot=b(357);function st(at){var ct=-1,ut=at==null?0:at.length;for(this.clear();++ct<ut;){var lt=at[ct];this.set(lt[0],lt[1])}}st.prototype.clear=tt,st.prototype.delete=nt,st.prototype.get=rt,st.prototype.has=it,st.prototype.set=ot,_e.exports=st},function(_e,et,b){var tt=b(52);function nt(rt,it){for(var ot=rt.length;ot--;)if(tt(rt[ot][0],it))return ot;return-1}_e.exports=nt},function(_e,et,b){var tt=b(38),nt=tt(Object,"create");_e.exports=nt},function(_e,et,b){var tt=b(377);function nt(rt,it){var ot=rt.__data__;return tt(it)?ot[typeof it=="string"?"string":"hash"]:ot.map}_e.exports=nt},function(_e,et,b){var tt=b(62),nt=b(52),rt=Object.prototype,it=rt.hasOwnProperty;function ot(st,at,ct){var ut=st[at];(!(it.call(st,at)&&nt(ut,ct))||ct===void 0&&!(at in st))&&tt(st,at,ct)}_e.exports=ot},function(_e,et){_e.exports=function(b){return b.webpackPolyfill||(b.deprecate=function(){},b.paths=[],b.children||(b.children=[]),Object.defineProperty(b,"loaded",{enumerable:!0,get:function(){return b.l}}),Object.defineProperty(b,"id",{enumerable:!0,get:function(){return b.i}}),b.webpackPolyfill=1),b}},function(_e,et,b){var tt=b(384),nt=b(66),rt=b(115),it=rt&&rt.isTypedArray,ot=it?nt(it):tt;_e.exports=ot},function(_e,et,b){var tt=b(11),nt=Object.create,rt=function(){function it(){}return function(ot){if(!tt(ot))return{};if(nt)return nt(ot);it.prototype=ot;var st=new it;return it.prototype=void 0,st}}();_e.exports=rt},function(_e,et,b){var tt=b(88),nt=b(192),rt=b(123);function it(ot,st){return rt(nt(ot,st,tt),ot+"")}_e.exports=it},function(_e,et){function b(tt){return tt}_e.exports=b},function(_e,et,b){var tt=Object.prototype.toString,nt=tt.call(function(){return arguments}());_e.exports=function(rt){return tt.call(rt)===nt}},function(_e,et,b){var tt=Object.prototype.toString,nt=tt.call("");_e.exports=function(rt){return typeof rt=="string"||rt&&typeof rt=="object"&&(rt instanceof String||tt.call(rt)===nt)||!1}},function(_e,et,b){_e.exports=b(426)()?globalThis:b(427)},function(_e,et,b){var tt=b(112),nt=b(459),rt=b(460);function it(ot){var st=-1,at=ot==null?0:ot.length;for(this.__data__=new tt;++st<at;)this.add(ot[st])}it.prototype.add=it.prototype.push=nt,it.prototype.has=rt,_e.exports=it},function(_e,et,b){var tt=b(461);function nt(rt,it){var ot=rt==null?0:rt.length;return!!ot&&tt(rt,it,0)>-1}_e.exports=nt},function(_e,et){function b(tt,nt){return tt.has(nt)}_e.exports=b},function(_e,et,b){var tt=b(86),nt=b(11);function rt(it){return function(){var ot=arguments;switch(ot.length){case 0:return new it;case 1:return new it(ot[0]);case 2:return new it(ot[0],ot[1]);case 3:return new it(ot[0],ot[1],ot[2]);case 4:return new it(ot[0],ot[1],ot[2],ot[3]);case 5:return new it(ot[0],ot[1],ot[2],ot[3],ot[4]);case 6:return new it(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]);case 7:return new it(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5],ot[6])}var st=tt(it.prototype),at=it.apply(st,ot);return nt(at)?at:st}}_e.exports=rt},function(_e,et,b){var tt=b(502);function nt(rt){var it=tt(rt),ot=it%1;return it===it?ot?it-ot:it:0}_e.exports=nt},function(_e,et){function b(tt){var nt=-1,rt=Array(tt.size);return tt.forEach(function(it){rt[++nt]=it}),rt}_e.exports=b},function(_e,et,b){var tt=b(58),nt=b(46);function rt(it,ot){ot=tt(ot,it);for(var st=0,at=ot.length;it!=null&&st<at;)it=it[nt(ot[st++])];return st&&st==at?it:void 0}_e.exports=rt},function(_e,et,b){var tt=b(238),nt=b(30);function rt(it,ot){return it&&tt(it,ot,nt)}_e.exports=rt},function(_e,et,b){const tt=b(239),nt=it=>it.replace(/\/$/,""),rt=(it,ot)=>{if(!ot)return it;const st=tt.parse(ot),at=tt.parse(it);if(!st.protocol||!at.protocol)return it;const ct=st.protocol.match(/^https/),lt=(at.protocol.match(/^ws/i)?"ws":"http")+(ct?"s":""),dt=nt(`${lt}://${st.host}${st.pathname}`),ft=nt(`${at.host}${at.pathname}${at.search||""}`);return`${dt}/${ft}`};_e.exports={prependProxyToUrlIfNeeded:rt}},function(_e,et,b){const tt=b(21),nt=b(13),rt=b(7),it=b(10),ot=b(22);let st;const at={SET_PROXY_URL_TIMING_ERROR:"The proxyUrl was set after a session or publisher was created.",PROXY_URL_ALREADY_SET_ERROR:"The proxyUrl has already been set. Setting it again will not have any effect."};_e.exports={errorMessages:at,setProxyUrl:ct=>{const ut=b(20),lt=b(70),dt=new ut,ft=tt.sessions.length()>0,St=tt.publishers.length()>0;let Tt;if(ft){const gt=tt.sessions.find(yt=>yt.currentState==="connected");Tt=gt?gt.sessionId:tt.sessions.find().sessionId}else Tt="";const pt={sessionId:Tt,apiKey:lt.value};if(St||ft){const gt=nt()(rt.SET_PROXY_URL_TIMING_ERROR,new Error(at.SET_PROXY_URL_TIMING_ERROR),it.SET_PROXY_URL_TIMING_ERROR);ot.handleJsException({error:gt,target:pt,analytics:dt})}else if(st){const gt=nt()(rt.PROXY_URL_ALREADY_SET_ERROR,new Error(at.PROXY_URL_ALREADY_SET_ERROR),it.PROXY_URL_ALREADY_SET_ERROR);ot.handleJsException({error:gt,target:pt,analytics:dt})}else st=ct},getProxyUrl:()=>st,clearProxyUrl:()=>{st=null}}},function(_e,et,b){et.adaptIceServers=function(nt){return nt.map(rt=>({url:rt.url,urls:rt.urls||[rt.url],username:rt.username,credential:rt.credential}))},et.parseIceServers=function(nt){let rt;try{rt=JSON.parse(nt.data).content.iceServers}catch{return[]}return et.adaptIceServers(rt)}},function(_e,et,b){const tt=b(2);_e.exports=()=>tt.name==="Chrome"&&tt.version>=58||["Firefox","Edge","Safari","Opera"].indexOf(tt.name)!==-1},function(_e,et,b){_e.exports=function(nt){let rt=null,it=!1;const ot=()=>{it&&(nt(),rt=window.requestAnimationFrame(ot))};this.start=()=>{it||(it=!0,window.requestAnimationFrame(ot))},this.stop=()=>{window.cancelAnimationFrame(rt),it=!1}}},function(_e,et,b){const tt=b(9),nt=(rt,it,ot)=>it&&!ot?()=>it.call(rt):it&&ot?st=>(st!==void 0&&ot.call(rt,st),it.call(rt)):st=>{st!==void 0&&ot.call(rt,st)};_e.exports=(rt,it)=>{const ot={};Object.keys(it).forEach(st=>{ot[st]=nt(rt,it[st].get,it[st].set)}),tt(rt,ot)}},function(_e,et,b){let tt="";const nt=it=>{tt=it},rt=()=>tt;_e.exports={getCurrentAudioOutputDeviceId:rt,setCurrentAudioOutputDeviceId:nt}},function(_e,et,b){(function(tt){_e.exports=function(rt){return new tt(it=>setTimeout(it,rt))}}).call(this,b(0))},function(_e,et,b){et.__esModule=!0,et.default=void 0;var nt={ACTIVE_VIDEO:0,ACTIVE_VIDEO_WITH_WARNING:1,SUSPENDED_VIDEO:2};et.default=nt},function(_e,et,b){const tt=b(294);function nt(rt){let it=rt===void 0?{}:rt,ot=it.NativeVideoElementWrapper;const at=ot===void 0?tt():ot,ct=50;function ut(lt){let dt=lt===void 0?{}:lt,ft=dt.fallbackText,St=ft===void 0?"Sorry, Web RTC is not available in your browser":ft,Tt=dt.fitMode,pt=dt.muted,gt=dt._inject,yt=dt.widgetType;return new at({fallbackText:St,fitMode:Tt,muted:pt,defaultAudioVolume:ct,_inject:gt,widgetType:yt})}return ut}_e.exports=nt},function(_e,et,b){const tt=!!window.crypto,nt=!!window.RTCRtpSender.prototype.createEncodedStreams||!!window.RTCRtpSender.prototype.createdEncodedVideoStreams,rt=!!window.Worker,it=()=>tt&&nt&&rt;_e.exports=function(ot){ot===void 0&&(ot={});const st=ot.hasOpenTokSupport||b(51).once,at=ot.isE2eeSupported||it;return st()&&at()}},function(_e,et,b){var tt=b(38),nt=b(14),rt=tt(nt,"Map");_e.exports=rt},function(_e,et,b){var tt=b(369),nt=b(376),rt=b(378),it=b(379),ot=b(380);function st(at){var ct=-1,ut=at==null?0:at.length;for(this.clear();++ct<ut;){var lt=at[ct];this.set(lt[0],lt[1])}}st.prototype.clear=tt,st.prototype.delete=nt,st.prototype.get=rt,st.prototype.has=it,st.prototype.set=ot,_e.exports=st},function(_e,et){function b(tt,nt){for(var rt=-1,it=tt==null?0:tt.length;++rt<it&&nt(tt[rt],rt,tt)!==!1;);return tt}_e.exports=b},function(_e,et){var b=9007199254740991;function tt(nt){return typeof nt=="number"&&nt>-1&&nt%1==0&&nt<=b}_e.exports=tt},function(_e,et,b){(function(tt){var nt=b(173),rt=et&&!et.nodeType&&et,it=rt&&typeof tt=="object"&&tt&&!tt.nodeType&&tt,ot=it&&it.exports===rt,st=ot&&nt.process,at=function(){try{var ct=it&&it.require&&it.require("util").types;return ct||st&&st.binding&&st.binding("util")}catch{}}();tt.exports=at}).call(this,b(84)(_e))},function(_e,et,b){var tt=b(67),nt=b(385),rt=Object.prototype,it=rt.hasOwnProperty;function ot(st){if(!tt(st))return nt(st);var at=[];for(var ct in Object(st))it.call(st,ct)&&ct!="constructor"&&at.push(ct);return at}_e.exports=ot},function(_e,et,b){var tt=b(390),nt=b(180),rt=Object.prototype,it=rt.propertyIsEnumerable,ot=Object.getOwnPropertySymbols,st=ot?function(at){return at==null?[]:(at=Object(at),tt(ot(at),function(ct){return it.call(at,ct)}))}:nt;_e.exports=st},function(_e,et){function b(tt,nt){for(var rt=-1,it=nt.length,ot=tt.length;++rt<it;)tt[ot+rt]=nt[rt];return tt}_e.exports=b},function(_e,et,b){var tt=b(178),nt=tt(Object.getPrototypeOf,Object);_e.exports=nt},function(_e,et,b){var tt=b(187);function nt(rt){var it=new rt.constructor(rt.byteLength);return new tt(it).set(new tt(rt)),it}_e.exports=nt},function(_e,et,b){_e.exports={error:{priority:1,method:"error"},warn:{priority:2,method:"warn"},info:{priority:3,method:"info"},log:{priority:4,method:"log"},debug:{priority:5,method:"debug"},spam:{priority:6,method:"log"}}},function(_e,et){function b(tt,nt,rt){switch(rt.length){case 0:return tt.call(nt);case 1:return tt.call(nt,rt[0]);case 2:return tt.call(nt,rt[0],rt[1]);case 3:return tt.call(nt,rt[0],rt[1],rt[2])}return tt.apply(nt,rt)}_e.exports=b},function(_e,et,b){var tt=b(406),nt=b(193),rt=nt(tt);_e.exports=rt},function(_e,et,b){var tt=b(52),nt=b(25),rt=b(65),it=b(11);function ot(st,at,ct){if(!it(ct))return!1;var ut=typeof at;return(ut=="number"?nt(ct)&&rt(at,ct.length):ut=="string"&&at in ct)?tt(ct[at],st):!1}_e.exports=ot},function(_e,et,b){_e.exports=b(195)()?Object.setPrototypeOf:b(196)},function(_e,et,b){var tt=b(55),nt={object:!0,function:!0,undefined:!0};_e.exports=function(rt){return tt(rt)?hasOwnProperty.call(nt,typeof rt):!1}},function(_e,et,b){_e.exports=b(417)()?Object.assign:b(418)},function(_e,et,b){const tt=b(1)("Event"),nt=b(9),rt=b(129);_e.exports=function(){function it(st,at,ct){at===void 0&&(at=!0),ct===void 0&&(ct={}),this.type=st,this.cancelable=at,this._defaultPrevented=!1;const ut=rt(Object.keys(this),Object.keys(ct));if(ut.length>0)throw new Error(`Cannot used reserved property names: ${ut.join(",")}`);nt(this,ct)}var ot=it.prototype;return ot.preventDefault=function(){this.cancelable?this._defaultPrevented=!0:tt.warn("Event.preventDefault :: Trying to preventDefault on an event that isn't cancelable")},ot.isDefaultPrevented=function(){return this._defaultPrevented},it}()},function(_e,et,b){var tt=b(33),nt=b(458),rt=b(87),it=b(464),ot=rt(function(st){var at=tt(st,it);return at.length&&at[0]===st[0]?nt(at):[]});_e.exports=ot},function(_e,et){function b(tt,nt,rt){for(var it=-1,ot=tt==null?0:tt.length;++it<ot;)if(rt(nt,tt[it]))return!0;return!1}_e.exports=b},function(_e,et,b){var tt=b(25),nt=b(17);function rt(it){return nt(it)&&tt(it)}_e.exports=rt},function(_e,et,b){(function(tt){var nt=b(19),rt=b(470),it=b(209),ot={"Content-Type":"application/x-www-form-urlencoded"};function st(lt,dt){!nt.isUndefined(lt)&&nt.isUndefined(lt["Content-Type"])&&(lt["Content-Type"]=dt)}function at(){var lt;return(typeof XMLHttpRequest<"u"||typeof tt<"u"&&Object.prototype.toString.call(tt)==="[object process]")&&(lt=b(210)),lt}function ct(lt,dt,ft){if(nt.isString(lt))try{return(dt||JSON.parse)(lt),nt.trim(lt)}catch(St){if(St.name!=="SyntaxError")throw St}return(ft||JSON.stringify)(lt)}var ut={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:at(),transformRequest:[function(dt,ft){return rt(ft,"Accept"),rt(ft,"Content-Type"),nt.isFormData(dt)||nt.isArrayBuffer(dt)||nt.isBuffer(dt)||nt.isStream(dt)||nt.isFile(dt)||nt.isBlob(dt)?dt:nt.isArrayBufferView(dt)?dt.buffer:nt.isURLSearchParams(dt)?(st(ft,"application/x-www-form-urlencoded;charset=utf-8"),dt.toString()):nt.isObject(dt)||ft&&ft["Content-Type"]==="application/json"?(st(ft,"application/json"),ct(dt)):dt}],transformResponse:[function(dt){var ft=this.transitional,St=ft&&ft.silentJSONParsing,Tt=ft&&ft.forcedJSONParsing,pt=!St&&this.responseType==="json";if(pt||Tt&&nt.isString(dt)&&dt.length)try{return JSON.parse(dt)}catch(gt){if(pt)throw gt.name==="SyntaxError"?it(gt,this,"E_JSON_PARSE"):gt}return dt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(dt){return dt>=200&&dt<300}};ut.headers={common:{Accept:"application/json, text/plain, */*"}},nt.forEach(["delete","get","head"],function(dt){ut.headers[dt]={}}),nt.forEach(["post","put","patch"],function(dt){ut.headers[dt]=nt.merge(ot)}),_e.exports=ut}).call(this,b(42))},function(_e,et){_e.exports={}},function(_e,et,b){var tt=b(216),nt=b(488),rt=b(489),it=b(218),ot=b(500),st=b(222),at=b(501),ct=b(225),ut=b(226),lt=b(96),dt="Expected a function",ft=1,St=2,Tt=8,pt=16,gt=32,yt=64,Et=Math.max;function It(Gt,Wt,At,kt,Vt,Nt,tn,_t){var Kt=Wt&St;if(!Kt&&typeof Gt!="function")throw new TypeError(dt);var cn=kt?kt.length:0;if(cn||(Wt&=~(gt|yt),kt=Vt=void 0),tn=tn===void 0?tn:Et(lt(tn),0),_t=_t===void 0?_t:lt(_t),cn-=Vt?Vt.length:0,Wt&yt){var an=kt,mn=Vt;kt=Vt=void 0}var on=Kt?void 0:st(Gt),yn=[Gt,Wt,At,kt,Vt,an,mn,Nt,tn,_t];if(on&&at(yn,on),Gt=yn[0],Wt=yn[1],At=yn[2],kt=yn[3],Vt=yn[4],_t=yn[9]=yn[9]===void 0?Kt?0:Gt.length:Et(yn[9]-cn,0),!_t&&Wt&(Tt|pt)&&(Wt&=~(Tt|pt)),!Wt||Wt==ft)var fn=nt(Gt,Wt,At);else Wt==Tt||Wt==pt?fn=rt(Gt,Wt,_t):(Wt==gt||Wt==(ft|gt))&&!Vt.length?fn=ot(Gt,Wt,At,kt):fn=it.apply(void 0,yn);var sn=on?tt:ct;return ut(sn(fn,yn),Gt,Wt)}_e.exports=It},function(_e,et,b){var tt=b(86),nt=b(136),rt=4294967295;function it(ot){this.__wrapped__=ot,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rt,this.__views__=[]}it.prototype=tt(nt.prototype),it.prototype.constructor=it,_e.exports=it},function(_e,et){function b(){}_e.exports=b},function(_e,et){var b="__lodash_placeholder__";function tt(nt,rt){for(var it=-1,ot=nt.length,st=0,at=[];++it<ot;){var ct=nt[it];(ct===rt||ct===b)&&(nt[it]=b,at[st++]=it)}return at}_e.exports=tt},function(_e,et,b){var tt=b(29),nt=b(119),rt=b(17),it="[object Object]",ot=Function.prototype,st=Object.prototype,at=ot.toString,ct=st.hasOwnProperty,ut=at.call(Object);function lt(dt){if(!rt(dt)||tt(dt)!=it)return!1;var ft=nt(dt);if(ft===null)return!0;var St=ct.call(ft,"constructor")&&ft.constructor;return typeof St=="function"&&St instanceof St&&at.call(St)==ut}_e.exports=lt},function(_e,et,b){var tt=b(12),nt=b(69),rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,it=/^\w*$/;function ot(st,at){if(tt(st))return!1;var ct=typeof st;return ct=="number"||ct=="symbol"||ct=="boolean"||st==null||nt(st)?!0:it.test(st)||!rt.test(st)||at!=null&&st in Object(at)}_e.exports=ot},function(_e,et,b){var tt=b(524),nt=b(192),rt=b(123);function it(ot){return rt(nt(ot,void 0,tt),ot+"")}_e.exports=it},function(_e,et,b){var tt=b(87),nt=b(52),rt=b(124),it=b(53),ot=Object.prototype,st=ot.hasOwnProperty,at=tt(function(ct,ut){ct=Object(ct);var lt=-1,dt=ut.length,ft=dt>2?ut[2]:void 0;for(ft&&rt(ut[0],ut[1],ft)&&(dt=1);++lt<dt;)for(var St=ut[lt],Tt=it(St),pt=-1,gt=Tt.length;++pt<gt;){var yt=Tt[pt],Et=ct[yt];(Et===void 0||nt(Et,ot[yt])&&!st.call(ct,yt))&&(ct[yt]=St[yt])}return ct});_e.exports=at},function(_e,et,b){var tt=b(3),nt=tt(b(45));const rt=b(57),it=b(56);let ot=function(){function st(at){at===void 0&&(at={}),Object.defineProperty(this,"_rawSessionInfo",{value:it(at)})}return(0,nt.default)(st,[{key:"sessionId",get:function(){return this._rawSessionInfo.session_id}},{key:"partnerId",get:function(){return this._rawSessionInfo.partner_id}},{key:"messagingServer",get:function(){return this._rawSessionInfo.messaging_server_url}},{key:"mediaServerName",get:function(){return this._rawSessionInfo.media_server_hostname}},{key:"messagingURL",get:function(){return this._rawSessionInfo.messaging_url}},{key:"symphonyAddress",get:function(){return this._rawSessionInfo.symphony_address}},{key:"iceServers",get:function(){return this._rawSessionInfo.ice_servers}},{key:"simulcast",get:function(){return rt(this._rawSessionInfo,"properties.simulcast")}},{key:"e2ee",get:function(){return rt(this._rawSessionInfo,"properties.e2ee",!1)}},{key:"reconnection",get:function(){return rt(this._rawSessionInfo,"properties.reconnection",!1)}},{key:"renegotiation",get:function(){return rt(this._rawSessionInfo,"properties.renegotiation",!1)}},{key:"p2pEnabled",get:function(){return rt(this._rawSessionInfo,"properties.p2p.preference.value")==="enabled"}},{key:"hybridSession",get:function(){return rt(this._rawSessionInfo,"properties.hybridSession",!1)}},{key:"isAdaptiveEnabled",get:function(){return rt(this._rawSessionInfo,"properties.p2p.preference.value")==="adaptive"}},{key:"priorityVideoCodec",get:function(){return rt(this._rawSessionInfo,"properties.priorityVideoCodec","")}},{key:"h264",get:function(){return rt(this._rawSessionInfo,"properties.h264",!0)}},{key:"vp8",get:function(){return rt(this._rawSessionInfo,"properties.vp8",!0)}},{key:"vp9",get:function(){return rt(this._rawSessionInfo,"properties.vp9",!0)}},{key:"clientCandidates",get:function(){const ct=rt(this._rawSessionInfo,"properties.clientCandidates");return ct==="relayed"?"relay":ct}}]),st}();_e.exports=ot},function(module,exports,__webpack_require__){const extendES5Native=__webpack_require__(566),webrtcAdapter=__webpack_require__(567),logging=__webpack_require__(1)("createWindowMock"),env=__webpack_require__(2),windowKeys=[{key:"location",type:"object"},{key:"setTimeout",type:"function"},{key:"requestAnimationFrame",type:"function"},{key:"URL",type:"function"},{key:"MediaStream",type:"class"},{key:"webkitMediaStream",type:"class"},{key:"RTCIceCandidate",type:"class"},{key:"mozRTCIceCandidate",type:"class"},{key:"RTCSessionDescription",type:"class"},{key:"mozRTCSessionDescription",type:"class"},{key:"RTCIceGatherer",type:"class"},{key:"RTCIceTransport",type:"class"},{key:"RTCDtlsTransport",type:"class"},{key:"RTCSctpTransport",type:"class"},{key:"RTCRtpReceiver",type:"class"},{key:"HTMLMediaElement",type:"class"},{key:"RTCPeerConnection",type:"class"},{key:"webkitRTCPeerConnection",type:"class"},{key:"mozRTCPeerConnection",type:"class"},{key:"MediaStreamTrack",type:"class"},{key:"RTCRtpSender",type:"class"},{key:"RTCTrackEvent",type:"class"},{key:"RTCTransceiver",type:"class"},{key:"RTCDtmfSender",type:"class"},{key:"RTCDTMFSender",type:"class"},{key:"MediaStreamTrackEvent",type:"class"}],navigatorKeys=[{key:"userAgent",type:"string"},{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"webkitGetUserMedia",type:"function"},{key:"mozGetUserMedia",type:"function"}],mediaDevicesKeys=[{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"enumerateDevices",type:"function"},{key:"getSupportedConstraints",type:"function"},{key:"addEventListener",type:"function"},{key:"removeEventListener",type:"function"}],bindWithStaticProperties=(_e,et)=>{if(typeof et!="function")return logging.warn("Non-function passed into bindWithStaticProperties()"),et;const b=et.bind(_e);return Object.keys(et).forEach(tt=>{b[tt]=et[tt]}),b},extendParentClass=ParentClass=>{try{const ChildClass=eval(`
      "use strict"; // Chrome<49 requires strict mode

      const getOwnProperties = (target) => {
        const properties = {};
        Object.getOwnPropertyNames(target).forEach((key) => {
          properties[key] = Object.getOwnPropertyDescriptor(target, key);
        });
        return properties;
      };

      class ChildClass extends ParentClass {
        constructor(...args) {
          super(...args);
          try {
            this.__proto__ = ChildClass.prototype;
          } catch (e) {}
        }
      };

      Object.defineProperties(ChildClass.prototype, getOwnProperties(ParentClass.prototype));
      Object.keys(ParentClass)
        .forEach((staticKey) => {
          ChildClass[staticKey] = ParentClass[staticKey];
        });

      ChildClass; // Ensure the final statement is returned in FF
    `);if(ChildClass&&ChildClass.prototype instanceof ParentClass)return ChildClass}catch(_e){}return null},canUseES6Class=_e=>{const et=_e.RTCPeerConnection||_e.webkitRTCPeerConnection||_e.mozRTCPeerConnection,b=extendParentClass(et);if(b)try{b.prototype.foo="bar";const tt=new b({iceServers:[]}),nt=tt.foo==="bar";try{tt.close()}catch{}return nt}catch{}return!1},extendClass=(_e,et,b)=>{if(typeof _e!="function")return logging.warn("Non-function passed into extendClass()"),_e;let tt=b&&extendParentClass(_e);return tt||(tt=extendES5Native(_e)),tt},getCopyProperties=_e=>(et,b,tt)=>{tt.forEach(nt=>{let rt=nt.key,it=nt.type,ot=b[rt];if(ot!==void 0){switch(it){case"function":ot=bindWithStaticProperties(b,ot);break;case"class":ot=extendClass(ot,rt,_e);break;case"string":case"object":break;default:throw new Error(`Invalid type of window key: ${it}`)}et[rt]=ot}})},cloneWindow=_e=>{const et={},b=getCopyProperties(canUseES6Class(_e));return b(et,_e,windowKeys),_e.navigator!==void 0&&(et.navigator={},b(et.navigator,_e.navigator,navigatorKeys),_e.navigator.mediaDevices!==void 0&&(et.navigator.mediaDevices={},b(et.navigator.mediaDevices,_e.navigator.mediaDevices,mediaDevicesKeys))),et};module.exports=function _e(et){if(et.adapter!==void 0||env.isLegacyEdge)return et;const b=cloneWindow(et);return webrtcAdapter({window:b}),b}},function(_e,et,b){_e.exports=function(){let nt=null;this.transform=rt=>{nt===null||rt>=nt?nt=rt:nt=rt*.3+nt*.7;const it=Math.log(nt)/Math.LN10/1.5+1;return Math.min(Math.max(it,0),1)}}},function(_e,et,b){const tt=b(6),nt=it=>Object.keys(it).map(ot=>it[ot]),rt=b(9);_e.exports=function(ot){const st={},at=(ct,ut)=>{rt(ut,{parent:this}),ut.appendTo(ot.parent),st[ct]=ut,this[ct]=ut};ot.parent&&(tt(this),this.destroy=()=>{this.off(),this.hideWhileLoading(),nt(st).forEach(ct=>ct.destroy())},this.showAfterLoading=()=>{nt(st).forEach(ct=>ct.showAfterLoading())},this.hideWhileLoading=()=>{nt(st).forEach(ct=>ct.hideWhileLoading())},this.set=(ct,ut)=>(typeof ct=="string"&&ut?at(ct,ut):Object.keys(ct).forEach(lt=>{at(lt,ct[lt])}),this))}},function(_e,et,b){_e.exports=function(){function tt(rt){this._analyser=null,this._timeDomainData=null,this._sourceNode=null,this._audioContext=rt}var nt=tt.prototype;return nt._initAudioAnalyser=function(it){this._analyser=this._audioContext.createAnalyser(),this._sourceNode=this._audioContext.createMediaStreamSource(it),this._sourceNode.connect(this._analyser),this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount)},nt.webRTCStream=function(it){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._audioContext.state==="suspended"&&this._audioContext.resume(),this._initAudioAnalyser(it)},nt.destroy=function(){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._timeDomainData=null},nt.sample=function(it){if(typeof it=="function")throw new Error("sample no longer takes a callback");if(this._analyser&&this._timeDomainData){this._analyser.getByteTimeDomainData(this._timeDomainData);let ot=0;for(let st=this._timeDomainData.length-1;st>=0;st-=1)ot=Math.max(ot,Math.abs(this._timeDomainData[st]-128));return ot/128}return null},tt}()},function(_e,et,b){const tt=b(578),nt=b(26),rt=b(6),it=b(23)();function ot(){const st=this;rt(st);function at(){return tt.isDomLoaded()&&!tt.isDomUnloaded()}function ct(){at()&&st.dispatchEvent(new it.EnvLoadedEvent(nt.ENV_LOADED))}function ut(){tt.whenUnloaded.then(lt),ct()}function lt(){st.dispatchEvent(new it.EnvLoadedEvent(nt.ENV_UNLOADED))}tt.whenLoaded.then(ut),this.onLoad=function(dt,ft){if(at()){dt.call(ft);return}st.on(nt.ENV_LOADED,dt,ft)},this.onUnload=function(dt,ft){if(this.isUnloaded()){dt.call(ft);return}st.on(nt.ENV_UNLOADED,dt,ft)},this.isUnloaded=function(){return tt.isDomUnloaded()}}_e.exports=new ot},function(_e,et,b){var tt=b(583);/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function nt(_t,Kt){if(_t===Kt)return 0;for(var cn=_t.length,an=Kt.length,mn=0,on=Math.min(cn,an);mn<on;++mn)if(_t[mn]!==Kt[mn]){cn=_t[mn],an=Kt[mn];break}return cn<an?-1:an<cn?1:0}function rt(_t){return(typeof window!==void 0?window:commonjsGlobal).Buffer&&typeof(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer=="function"?(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer(_t):!!(_t!=null&&_t._isBuffer)}var it=b(584),ot=Object.prototype.hasOwnProperty,st=Array.prototype.slice,at=function(){return function(){}.name==="foo"}();function ct(_t){return Object.prototype.toString.call(_t)}function ut(_t){return rt(_t)||typeof(typeof window!==void 0?window:commonjsGlobal).ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(_t):_t?!!(_t instanceof DataView||_t.buffer&&_t.buffer instanceof ArrayBuffer):!1}var lt=_e.exports=yt,dt=/\s*function\s+([^\(\s]*)\s*/;function ft(_t){if(it.isFunction(_t)){if(at)return _t.name;var Kt=_t.toString(),cn=Kt.match(dt);return cn&&cn[1]}}lt.AssertionError=function(Kt){this.name="AssertionError",this.actual=Kt.actual,this.expected=Kt.expected,this.operator=Kt.operator,Kt.message?(this.message=Kt.message,this.generatedMessage=!1):(this.message=pt(this),this.generatedMessage=!0);var cn=Kt.stackStartFunction||gt;if(Error.captureStackTrace)Error.captureStackTrace(this,cn);else{var an=new Error;if(an.stack){var mn=an.stack,on=ft(cn),yn=mn.indexOf(`
`+on);if(yn>=0){var fn=mn.indexOf(`
`,yn+1);mn=mn.substring(fn+1)}this.stack=mn}}},it.inherits(lt.AssertionError,Error);function St(_t,Kt){return typeof _t=="string"?_t.length<Kt?_t:_t.slice(0,Kt):_t}function Tt(_t){if(at||!it.isFunction(_t))return it.inspect(_t);var Kt=ft(_t),cn=Kt?": "+Kt:"";return"[Function"+cn+"]"}function pt(_t){return St(Tt(_t.actual),128)+" "+_t.operator+" "+St(Tt(_t.expected),128)}function gt(_t,Kt,cn,an,mn){throw new lt.AssertionError({message:cn,actual:_t,expected:Kt,operator:an,stackStartFunction:mn})}lt.fail=gt;function yt(_t,Kt){_t||gt(_t,!0,Kt,"==",lt.ok)}lt.ok=yt,lt.equal=function(Kt,cn,an){Kt!=cn&&gt(Kt,cn,an,"==",lt.equal)},lt.notEqual=function(Kt,cn,an){Kt==cn&&gt(Kt,cn,an,"!=",lt.notEqual)},lt.deepEqual=function(Kt,cn,an){Et(Kt,cn,!1)||gt(Kt,cn,an,"deepEqual",lt.deepEqual)},lt.deepStrictEqual=function(Kt,cn,an){Et(Kt,cn,!0)||gt(Kt,cn,an,"deepStrictEqual",lt.deepStrictEqual)};function Et(_t,Kt,cn,an){if(_t===Kt)return!0;if(rt(_t)&&rt(Kt))return nt(_t,Kt)===0;if(it.isDate(_t)&&it.isDate(Kt))return _t.getTime()===Kt.getTime();if(it.isRegExp(_t)&&it.isRegExp(Kt))return _t.source===Kt.source&&_t.global===Kt.global&&_t.multiline===Kt.multiline&&_t.lastIndex===Kt.lastIndex&&_t.ignoreCase===Kt.ignoreCase;if((_t===null||typeof _t!="object")&&(Kt===null||typeof Kt!="object"))return cn?_t===Kt:_t==Kt;if(ut(_t)&&ut(Kt)&&ct(_t)===ct(Kt)&&!(_t instanceof Float32Array||_t instanceof Float64Array))return nt(new Uint8Array(_t.buffer),new Uint8Array(Kt.buffer))===0;if(rt(_t)!==rt(Kt))return!1;an=an||{actual:[],expected:[]};var mn=an.actual.indexOf(_t);return mn!==-1&&mn===an.expected.indexOf(Kt)?!0:(an.actual.push(_t),an.expected.push(Kt),Gt(_t,Kt,cn,an))}function It(_t){return Object.prototype.toString.call(_t)=="[object Arguments]"}function Gt(_t,Kt,cn,an){if(_t==null||Kt===null||Kt===void 0)return!1;if(it.isPrimitive(_t)||it.isPrimitive(Kt))return _t===Kt;if(cn&&Object.getPrototypeOf(_t)!==Object.getPrototypeOf(Kt))return!1;var mn=It(_t),on=It(Kt);if(mn&&!on||!mn&&on)return!1;if(mn)return _t=st.call(_t),Kt=st.call(Kt),Et(_t,Kt,cn);var yn=tn(_t),fn=tn(Kt),sn,un;if(yn.length!==fn.length)return!1;for(yn.sort(),fn.sort(),un=yn.length-1;un>=0;un--)if(yn[un]!==fn[un])return!1;for(un=yn.length-1;un>=0;un--)if(sn=yn[un],!Et(_t[sn],Kt[sn],cn,an))return!1;return!0}lt.notDeepEqual=function(Kt,cn,an){Et(Kt,cn,!1)&&gt(Kt,cn,an,"notDeepEqual",lt.notDeepEqual)},lt.notDeepStrictEqual=Wt;function Wt(_t,Kt,cn){Et(_t,Kt,!0)&&gt(_t,Kt,cn,"notDeepStrictEqual",Wt)}lt.strictEqual=function(Kt,cn,an){Kt!==cn&&gt(Kt,cn,an,"===",lt.strictEqual)},lt.notStrictEqual=function(Kt,cn,an){Kt===cn&&gt(Kt,cn,an,"!==",lt.notStrictEqual)};function At(_t,Kt){if(!_t||!Kt)return!1;if(Object.prototype.toString.call(Kt)=="[object RegExp]")return Kt.test(_t);try{if(_t instanceof Kt)return!0}catch{}return Error.isPrototypeOf(Kt)?!1:Kt.call({},_t)===!0}function kt(_t){var Kt;try{_t()}catch(cn){Kt=cn}return Kt}function Vt(_t,Kt,cn,an){var mn;if(typeof Kt!="function")throw new TypeError('"block" argument must be a function');typeof cn=="string"&&(an=cn,cn=null),mn=kt(Kt),an=(cn&&cn.name?" ("+cn.name+").":".")+(an?" "+an:"."),_t&&!mn&&gt(mn,cn,"Missing expected exception"+an);var on=typeof an=="string",yn=!_t&&it.isError(mn),fn=!_t&&mn&&!cn;if((yn&&on&&At(mn,cn)||fn)&&gt(mn,cn,"Got unwanted exception"+an),_t&&mn&&cn&&!At(mn,cn)||!_t&&mn)throw mn}lt.throws=function(_t,Kt,cn){Vt(!0,_t,Kt,cn)},lt.doesNotThrow=function(_t,Kt,cn){Vt(!1,_t,Kt,cn)},lt.ifError=function(_t){if(_t)throw _t};function Nt(_t,Kt){_t||gt(_t,!0,Kt,"==",Nt)}lt.strict=tt(Nt,lt,{equal:lt.strictEqual,deepEqual:lt.deepStrictEqual,notEqual:lt.notStrictEqual,notDeepEqual:lt.notDeepStrictEqual}),lt.strict.strict=lt.strict;var tn=Object.keys||function(_t){var Kt=[];for(var cn in _t)ot.call(_t,cn)&&Kt.push(cn);return Kt}},function(_e,et,b){const tt=b(591),nt=b(264),rt=b(2);_e.exports=it=>rt.isElectron?it==="screen"?!0:nt(it):tt.indexOf(it)>-1},function(_e,et,b){const tt=b(267),nt=b(6),rt=b(1)("StreamChannel"),it=b(151)();_e.exports=function(st){this.id=st.id,this.type=st.type,this.active=tt(st.active),this.orientation=st.orientation||it.ROTATED_NORMAL,st.frameRate&&(this.frameRate=parseFloat(st.frameRate)),st.preferredFrameRate&&(this.preferredFrameRate=parseFloat(st.preferredFrameRate)),st.preferredWidth&&(this.preferredWidth=parseInt(st.preferredWidth,10)),st.preferredHeight&&(this.preferredHeight=parseInt(st.preferredHeight,10)),this.width=parseInt(st.width,10),this.height=parseInt(st.height,10),this.source=st.source||"camera",this.fitMode=st.fitMode||"cover",nt(this),this.update=function(at){const ct={},ut={};for(const lt in at){if(!at.hasOwnProperty(lt))continue;const dt=this[lt];switch(lt){case"active":this.active=tt(at[lt]);break;case"disableWarning":this.disableWarning=tt(at[lt]);break;case"frameRate":this.frameRate=parseFloat(at[lt],10);break;case"width":case"height":this[lt]=parseInt(at[lt],10),ct[lt]=this[lt],ut[lt]=dt;break;case"orientation":this[lt]=at[lt],ct[lt]=this[lt],ut[lt]=dt;break;case"fitMode":this[lt]=at[lt];break;case"source":this[lt]=at[lt];break;default:return rt.warn(`Tried to update unknown key ${lt} on ${this.type} channel ${this.id}`),!1}this.trigger("update",this,lt,dt,this[lt])}return Object.keys(ct).length&&this.trigger("update",this,"videoDimensions",ut,ct),!0}}},function(_e,et,b){_e.exports=function(){return{ROTATED_NORMAL:0,ROTATED_LEFT:270,ROTATED_RIGHT:90,ROTATED_UPSIDE_DOWN:180}}},function(_e,et,b){const tt=b(599),nt=b(1)("StylableComponent"),rt=b(600),it=b(268);_e.exports=function(st,at,ct,ut){if(!st.trigger)throw new Error("OT.StylableComponent is dependent on the eventing mixin. Ensure that this is included in the object before StylableComponent.");ut=ut||function(){};let lt=!1;const dt=function(Tt,pt,gt){gt?st.trigger("styleValueChanged",Tt,pt,gt):st.trigger("styleValueChanged",Tt,pt)};ct===!1&&(at={buttonDisplayMode:"off",nameDisplayMode:"off",audioLevelDisplayMode:"off",videoDisabledDisplayMode:"off",audioBlockedDisplayMode:"off"},lt=!0,ut({showControls:!1}));const ft=new rt(at,dt);st.getStyle=function(St){return ft.get(St)},st.setStyle=function(St,Tt,pt){if(lt)return nt.warn("Calling setStyle() has no effect because theshowControls option was set to false"),this;let gt;return typeof St!="string"?gt=St:(gt={},gt[St]=Tt),gt.backgroundImageURI&&(gt.backgroundImageURI=tt(gt.backgroundImageURI)),ft.setAll(gt,pt),ut(it(gt)),this}}},function(_e,et,b){const tt=b(50),nt=b(34)(),rt=b(20),it=b(70),ot=b(147),st=b(51).once,at=b(603),ct=b(8),ut=b(1)("systemRequirements"),lt=b(604),dt=b(605),ft=nt.onlyLocal(),St=new rt,Tt=tt(()=>{St.logEvent({action:"checkSystemRequirements",variation:"notHasRequirements",partnerId:it.value,payload:{userAgent:ct.env.userAgent}})}),pt=tt(()=>{b(606)()});let gt=!1;_e.exports={check(){ut.debug("OT.checkSystemRequirements()");const yt=Number(at&&st());return pt(),yt||Tt(),yt},upgrade(yt){let Et=yt===void 0?{}:yt,It=Et.isSupportedButOld,Gt=It===void 0?ct.env.name.toLowerCase()in ft.minimumVersion:It,Wt=Et.userAgent,At=Wt===void 0?navigator.userAgent:Wt;ot.onLoad(()=>{if(gt)return;const kt=new dt(lt);gt=!0,kt.on("close",()=>{gt=!1}),kt.open();let Vt;At.match(/(iPad|iPhone|iPod|android|webOS)/i)?Vt=`${Gt?"supported-":""}mobile-browser`:Vt=`${Gt?"upgrade":"normal"}-install`,kt.el(`#section-${Vt}`).style.display="block"})}}},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(48)),it=nt(b(607));const ot=b(611);let st=function(at){(0,rt.default)(ct,at);function ct(ut){var lt;return lt=at.call(this,ut)||this,lt.name="TimeoutError",lt}return ct}((0,it.default)(Error));_e.exports=(at,ct,ut)=>new tt((lt,dt)=>{if(typeof ct!="number"||ct<0)throw new TypeError("Expected `ms` to be a positive number");const ft=setTimeout(()=>{if(typeof ut=="function"){try{lt(ut())}catch(pt){dt(pt)}return}const St=typeof ut=="string"?ut:`Promise timed out after ${ct} milliseconds`,Tt=ut instanceof Error?ut:new st(St);typeof at.cancel=="function"&&at.cancel(),dt(Tt)},ct);ot(at.then(lt,dt),()=>{clearTimeout(ft)})}),_e.exports.TimeoutError=st}).call(this,b(0))},function(_e,et,b){function tt(){const nt=[];return{add(rt){nt.push(rt)},remove(rt){const it=nt.indexOf(rt);it>=0&&nt.splice(it,1)},releaseAll(){const rt=[];for(;nt.length>0;){const ot=nt.pop();try{ot()}catch(st){rt.push(st)}}const it=rt.length;if(it>0)throw new Error(`Failed to complete ${it} cleanup job${it===1?"":"s"}: ${rt.map(ot=>`<${ot}>`).join(", ")}`)}}}_e.exports=tt},function(_e,et,b){const tt=b(1)("applySdpTransform");_e.exports=(nt,rt,it,ot,st)=>{const at=nt[rt][it],ct=`${rt} ${it}`,lt=`sdpTransforms (${ct==="local offer"||ct==="remote answer"?"publisher":"subscriber"}): ${rt} ${it}`,dt=rt==="local"?"created":"received";tt.debug(`${lt}: ${dt}:
${st}`);const ft=at(ot,st);return ft.local===st?tt.debug(`${lt}: not modified`):tt.debug(`${lt}: modified to:
${ft.local}`),ft}},function(_e,et,b){const tt=function(rt){if(rt===void 0&&(rt={}),!rt)return 0;const it=rt,ot=it.currentStatFrames,st=ot===void 0?0:ot,at=it.prevStatFrames,ct=at===void 0?0:at,ut=it.currentTimestamp,lt=ut===void 0?0:ut,dt=it.prevTimestamp,ft=dt===void 0?0:dt;if(st>=ct&&lt>ft){const St=(st-ct)/((lt-ft)/1e3);return Math.round(St*100)/100}return 0};_e.exports=tt},function(_e,et,b){let tt;_e.exports=function(rt){rt===void 0&&(rt={});const it=rt.AudioContext||(typeof window!==void 0?window:commonjsGlobal).AudioContext||(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext;return function(){if(tt=tt||it&&new it,tt==null)throw new Error("AudioContext could not be created, hardware limit reached.");return tt}}},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(57)),it=typeof(0,nt.default)(typeof window!==void 0?window:commonjsGlobal,"navigator.getDisplayMedia",(0,nt.default)(typeof window!==void 0?window:commonjsGlobal,"navigator.mediaDevices.getDisplayMedia"))=="function";et.default=it},function(_e,et,b){const tt=b(37);_e.exports=function(){return function(it,ot,st){const at=ot.slice(),ct=tt(st),ut=function(ft){return at.indexOf(ft)!==-1},lt=function(ft,St){return ct[ft]&&ct[ft].indexOf(St)!==-1};return function(dt){let ft=it,St=null;this.current=ft;function Tt(gt,yt){dt({message:gt,newState:yt,currentState:ft,previousState:St})}function pt(gt){return ut(gt)?lt(ft,gt)?!0:(Tt(`'${ft}' cannot transition to '${gt}'`,gt),!1):(Tt(`'${gt}' is not a valid state`,gt),!1)}this.set=function(gt){pt(gt)&&(St=ft,this.current=gt,ft=gt)}}}}},function(_e,et,b){(function(tt){const nt=b(60);_e.exports=function(it){it===void 0&&(it={});const ot=it.chromeExtensionHelper||b(280)(),st=it.electronExtensionHelper||b(649)(),at=it.Errors||b(7),ct=it.firefoxExtensionHelper||b(651),ut=it.getDisplayMediaExtensionHelper||b(288),lt=it.otError||b(13)(),dt=it.OTHelpers||b(8),ft={};ft.extensionByKind={},ft.extensionClasses={},ft.registerExtensionHelper=(pt,gt)=>{ft.extensionClasses[pt]=gt,gt.autoRegisters&&gt.isSupportedInThisBrowser&&ft.registerExtension(pt)},ft.registerExtension=function(pt){if(ft.extensionClasses[pt]==null)throw new Error("Unsupported kind passed to OT.registerScreenSharingExtension");for(var gt=arguments.length,yt=new Array(gt>1?gt-1:0),Et=1;Et<gt;Et++)yt[Et-1]=arguments[Et];const It=ft.extensionClasses[pt].register(...yt);ft.extensionByKind[pt]=It};const St=()=>{const pt=nt(Object.keys(ft.extensionClasses).sort(gt=>gt==="electron"?-1:1),gt=>ft.extensionClasses[gt].isSupportedInThisBrowser);return pt===void 0?{}:{name:pt,proto:ft.extensionClasses[pt],instance:ft.extensionByKind[pt]}};ft.pickHelper=()=>St(),ft.checkCapability=pt=>{const gt={supported:!1,extensionRequired:void 0,extensionRegistered:void 0,extensionInstalled:void 0,supportedSources:{}},yt=St();if(yt.name===void 0){setTimeout(pt.bind(null,gt));return}if(gt.supported=!0,gt.extensionRequired=yt.proto.extensionRequired?yt.name:void 0,gt.supportedSources={screen:yt.proto.sources.screen,application:yt.proto.sources.application,window:yt.proto.sources.window,browser:yt.proto.sources.browser},!yt.instance){gt.extensionRegistered=!1,gt.extensionRequired&&(gt.extensionInstalled=!1),setTimeout(pt.bind(null,gt));return}gt.extensionRegistered=gt.extensionRequired?!0:void 0,yt.instance.isInstalled(Et=>{gt.extensionInstalled=gt.extensionRequired||dt.env.name==="Firefox"?Et:void 0,pt(gt)})},ft.registerExtensionHelper("electron",st),ft.registerExtensionHelper("getDisplayMedia",ut),ft.registerExtensionHelper("chrome",ot),ft.registerExtensionHelper("firefox",ct);const Tt=()=>{};return ft.getConstraints=pt=>{const gt=pt.onAccessDialogOpened,yt=gt===void 0?Tt:gt,Et=pt.onAccessDialogClosed,It=Et===void 0?Tt:Et,Gt=pt.videoSource,Wt=pt.constraints;return new tt((At,kt)=>{ft.checkCapability(Vt=>{if(Vt.supported)if(Vt.extensionRegistered===!1)kt(lt(at.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,new Error("Screen Sharing support in this browser requires an extension, but one has not been registered.")));else if(Vt.extensionRequired&&Vt.extensionInstalled===!1)kt(lt(at.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Screen Sharing support in this browser requires an extension, but the extension is not installed.")));else{const Nt=ft.pickHelper();Nt.proto.getConstraintsShowsPermissionUI&&yt(),Nt.instance.getConstraints(Gt,Wt,(tn,_t)=>{Nt.proto.getConstraintsShowsPermissionUI&&It(),tn?kt(tn):At(_t)})}else{let Nt="Screen Sharing is not supported in this browser";dt.env.isElectron?Nt="Set the webPreferences.contextIsolation option of the Electron BrowserWindow to false or use a preload script to access the desktop capturer. For more information, see https://tokbox.com/developer/guides/screen-sharing/js/.":dt.env.name==="Chrome"&&dt.env.version>73&&(typeof window!==void 0?window:commonjsGlobal).location.protocol!=="https:"&&(Nt="https:// is required for screen sharing"),kt(lt(at.SCREEN_SHARING_NOT_SUPPORTED,new Error(Nt)))}})})},ft}}).call(this,b(0))},function(_e,et,b){_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt.Errors||b(7),it=nt.ExceptionCodes||b(10),ot=nt.otError||b(13)(),st={ICEWorkflow:rt.ICE_WORKFLOW_FAILED,NewPeerConnection:rt.CREATE_PEER_CONNECTION_FAILED,SetRemoteDescription:rt.SET_REMOTE_DESCRIPTION_FAILED,Subscribe:{404:rt.STREAM_NOT_FOUND,[it.STREAM_LIMIT_EXCEEDED]:rt.STREAM_LIMIT_EXCEEDED}};return function(ct,ut,lt,dt,ft){const St=`${(lt?`${lt}: `:"")+ft} PeerConnection with connection ${dt} failed: ${ut}`,Tt=st[lt]||{},pt=typeof Tt=="string"?Tt:Tt[ct],gt=ft==="Publisher"?it.UNABLE_TO_PUBLISH:it.UNABLE_TO_SUBSCRIBE;if(!pt){const Et=new Error(St);return Et.code=gt,Et}const yt=(()=>lt==="ICEWorkflow"?ft==="Publisher"?it.PUBLISHER_ICE_WORKFLOW_FAILED:it.SUBSCRIBER_ICE_WORKFLOW_FAILED:pt===rt.STREAM_LIMIT_EXCEEDED?it.STREAM_LIMIT_EXCEEDED:gt)();return ot(pt,new Error(St),yt)}}},function(_e,et,b){_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt.OTHelpers||b(8),ot=(nt.global||(typeof window!==void 0?window:commonjsGlobal)).RTCPeerConnection;return function(at,ct){rt.env.name==="Firefox"&&ot&&ot.generateCertificate?ot.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}).catch(ut=>{ct(ut)}).then(ut=>{at.certificates=[ut],ct(void 0,at)}):setTimeout(()=>{ct(void 0,at)})}}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5)),it=tt(b(45));const ot=b(6),st=b(676),at=b(1)("WidgetView"),ct=b(8),ut=b(2),lt=b(165),dt=lt.default,ft=lt.CancellationError,St=b(166),Tt=b(678),pt=b(679),gt=b(680),yt=b(681),Et=b(682),It=b(61),Gt=b(683),Wt=b(109);Wt();function At(kt){let Vt=kt===void 0?{}:kt,Nt=Vt.logging,tn=Nt===void 0?at:Nt,_t=Vt.OTHelpers,Kt=_t===void 0?ct:_t,cn=Vt.waitForVideoToBePlaying,an=cn===void 0?pt:cn,mn=Vt.VideoElementFacade,on=mn===void 0?Wt():mn,yn=Vt.env,fn=yn===void 0?ut:yn;const sn=st({window:typeof window!==void 0?window:commonjsGlobal}),un=Xn=>{if(Xn.isCanceled())throw tn.debug("bindVideo bailing due to cancellation"),new ft("CANCEL")};return function(){function Xn(Vn,Tn){let Jn=Tn===void 0?{}:Tn,lr=Jn.insertDefaultUI,tr=lr===void 0?!0:lr,Qn=Jn.width,Sr=Qn===void 0?264:Qn,vr=Jn.height,Fr=vr===void 0?198:vr,kr=Jn.fitMode,jr=kr===void 0?"cover":kr,xo=Jn.mirror,Er=xo===void 0?!1:xo,xr=Jn.insertMode,Un=Jn.classNames,Mn=Jn.style,sr=Jn.widgetType,Ar=Jn.initials;this._videoElementFacade=void 0,this._container=void 0,this._posterContainer=document.createElement("div"),this._widgetContainer=document.createElement("div"),this._loading=!0,this._audioOnly=!1,this._showPoster=void 0,this._poster=void 0,this._cancelBind=void 0,this.MAX_VIDEO_LOADED=5*1e3,ot(this),/^(contain|cover)$/.test(jr)===!1&&tn.warn(`Invalid fit value "${jr}" passed. Only "contain" and "cover" can be used.`),this._widgetType=sr,this._fitMode=jr,this._insertDefaultUI=tr;const so=It(this._widgetContainer);if(so.on("click",this.userGesture.bind(this)),so.on("touchstart",this.userGesture.bind(this),sn?{passive:!0}:!1),this.once("destroy",()=>so.removeAll()),this._widgetContainer.classList.add("OT_widget-container"),this._widgetContainer.style.width="100%",this._widgetContainer.style.height="100%",tr!==!1){this._container=yt(Vn,xr),fn.isSafari&&fn.isiOS&&fn.iOSVersion&&fn.iOSVersion<11.2&&this._container.classList.add("OT_ForceContain"),this._container.style.width=Et(Sr),this._container.style.height=Et(Fr),this._container.style.overflow="hidden",gt(this._container),Er&&Kt.addClass(this._container,"OT_mirrored"),Un&&Un.trim().split(/\s+/).forEach(vo=>this._container.classList.add(vo)),this._container.classList.add("OT_loading"),this._container.classList.add(`OT_fit-mode-${jr}`),this._container.appendChild(this._widgetContainer);const ro=Kt(this._container).observeSize(()=>gt(this._container)),Ao=ro[0],ho=Kt.observeNodeOrChildNodeRemoval(this._container,vo=>{if(!this._videoElementFacade)return;vo.some(zr=>zr===this._widgetContainer||zr===this._videoElementFacade.domElement())&&this.destroyVideo()});this.once("destroy",()=>{tn.debug("disconnecting observers"),Ao.disconnect(),ho.disconnect()})}this._posterContainer.classList.add("OT_video-poster"),this._widgetContainer.appendChild(this._posterContainer);const Bn=document.createElement("div");Bn.classList.add("OT_video-loading");const gr=document.createElement("div");gr.classList.add("OT_video-loading-spinner"),Bn.appendChild(gr),this._widgetContainer.appendChild(Bn),Mn&&Mn.backgroundImageURI?this.setBackgroundImageURI(Mn.backgroundImageURI):Ar&&this.setInitials(Ar)}var pn=Xn.prototype;return pn.addError=function(Tn,Jn,lr){this._container&&(this._container.innerHTML=`<p>${Tn}${Jn?` <span class="ot-help-message">${Jn}</span>`:""}</p>`,Kt.addClass(this._container,lr||"OT_subscriber_error"),this._container.querySelector("p").offsetHeight>this._container.offsetHeight&&(this._container.querySelector("span").style.display="none"))},pn.destroy=function(){this.emit("destroy"),this.destroyVideo(),this._container&&(Kt.removeElement(this._container),this._container=null)},pn.setBackgroundImageURI=function(Tn){Kt.css(this._posterContainer,"backgroundImage",`url(${Tn})`),Kt.css(this._posterContainer,"backgroundSize","contain"),Kt.css(this._posterContainer,"opacity","1.0")},pn.setInitials=function(Tn){const Jn=Gt(Tn),lr=new XMLSerializer().serializeToString(Jn);Kt.css(this._posterContainer,"backgroundImage",`url('data:image/svg+xml,${lr}')`),Kt.css(this._posterContainer,"backgroundSize","auto 55%"),Kt.css(this._posterContainer,"opacity","1.0")},pn.isAudioBlocked=function(){return!!(this._videoElementFacade&&this._videoElementFacade.isAudioBlocked())},pn.unblockAudio=function(){return this._videoElementFacade.unblockAudio()},pn.userGesture=function(){this.isAudioBlocked()&&St().then(()=>tn.debug("Successfully unblocked audio"),Tn=>tn.error("Error retrying audio on user interaction:",Tn))},pn.setAudioBlockedUi=function(Tn){this._container&&(Tn?this._container.classList.add("OT_container-audio-blocked"):this._container.classList.remove("OT_container-audio-blocked"))},pn.rebindSrcObject=function(){this._videoElementFacade&&this._videoElementFacade._rebindSrcObject()},pn.pauseAndPlayVideoElement=function(){this._videoElementFacade&&this._videoElementFacade._pauseAndPlay()},pn._createBufferVideoElement=function(){var Vn=(0,rt.default)(nt.default.mark(function Jn(lr,tr){var Qn,Sr,vr;return nt.default.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return tr===void 0&&(tr={}),Qn=tr.createElement?tr:document,Sr=!1,vr=Qn.createElement("video"),vr.srcObject=lr,kr.prev=5,vr.play(),kr.next=9,an(vr,this.MAX_VIDEO_LOADED);case 9:return Sr=kr.sent,kr.abrupt("return",Sr?vr:null);case 13:return kr.prev=13,kr.t0=kr.catch(5),kr.abrupt("return",null);case 16:case"end":return kr.stop()}},Jn,this,[[5,13]])}));function Tn(Jn,lr){return Vn.apply(this,arguments)}return Tn}(),pn._emitAMREvent=function(Tn,Jn,lr){this.emit("amrLogEvent",Tn,Jn,lr)},pn._createVideoElementFacade=function(Tn){let Jn=Tn._inject,lr=Tn.audioVolume,tr=Tn.fallbackText,Qn=Tn.muted;this._videoElementFacade=new on({defaultAudioVolume:parseFloat(lr),fallbackText:tr,fitMode:this._fitMode,_inject:Jn,muted:Qn,widgetType:this._widgetType});const Sr=It(this._videoElementFacade);if(this._videoFacadeEvents=Sr,Sr.on("error",()=>{this.trigger("error")}),Sr.on("videoDimensionsChanged",(vr,Fr)=>{this.trigger("videoDimensionsChanged",vr,Fr)}),Sr.on("mediaStopped",vr=>{this.trigger("mediaStopped",vr)}),Sr.on("audioBlocked",()=>this.trigger("audioBlocked")),Sr.on("audioUnblocked",()=>this.trigger("audioUnblocked")),this._videoElementFacade.audioChannelType("telephony"),tn.debug("Appending the video facade"),this._videoElementFacade.appendTo(this._widgetContainer),typeof lr<"u")try{this._videoElementFacade.setAudioVolume(lr)}catch(vr){tn.warn(`bindVideo ${vr}`)}},pn._bindToStream=function(){var Vn=(0,rt.default)(nt.default.mark(function Jn(lr,tr){return nt.default.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return Sr.prev=0,Sr.next=3,this._videoElementFacade.bindToStream(lr);case 3:Sr.next=14;break;case 5:if(Sr.prev=5,Sr.t0=Sr.catch(0),!tr.isCanceled()){Sr.next=12;break}throw tn.debug("Refusing to destroyVideo as bindVideo was cancelled"),new ft("CANCEL");case 12:throw this.destroyVideo(),Sr.t0;case 14:case"end":return Sr.stop()}},Jn,this,[[0,5]])}));function Tn(Jn,lr){return Vn.apply(this,arguments)}return Tn}(),pn._getNewBindCancellation=function(){this._cancelBind&&(tn.debug("Cancelling last bindVideo request"),this._cancelBind.cancel());const Tn=new dt;return this._cancelBind=Tn,this.once("destroy",()=>Tn.cancel()),Tn},pn._triggerVideoElementCreated=function(){const Tn=Jn=>{this.trigger("videoElementCreated",Jn),this._insertDefaultUI&&Kt.addClass(Jn,"OT_video-element")};this._videoElementFacade.domElement()?Tn(this._videoElementFacade.domElement()):this._videoFacadeEvents.on("videoElementCreated",Jn=>{Tn(Jn)})},pn._waitForVideoResolution=function(){var Vn=(0,rt.default)(nt.default.mark(function Jn(lr){return nt.default.wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:if(!(!this.audioOnly()&&lr.getVideoTracks().length>0)){Qn.next=5;break}return tn.debug("Waiting for correct resolution"),Qn.next=4,Tt(this._videoElementFacade,5e3);case 4:tn.debug(`Resolution: ${this._videoElementFacade.videoWidth()}x${this._videoElementFacade.videoHeight()}`);case 5:case"end":return Qn.stop()}},Jn,this)}));function Tn(Jn){return Vn.apply(this,arguments)}return Tn}(),pn.bindVideo=function(){var Vn=(0,rt.default)(nt.default.mark(function Jn(lr,tr,Qn){var Sr,vr,Fr,kr,jr,xo,Er,xr;return nt.default.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:if(Sr=tr.audioVolume,vr=tr.muted,Fr=tr.fallbackText,kr=tr._inject,Qn===void 0&&(Qn=!1),tn.debug("bindVideo ",{webRTCStream:lr}),jr=!!this._videoElementFacade,Er=this._getNewBindCancellation(),jr){Mn.next=9;break}this._createVideoElementFacade({_inject:kr,audioVolume:Sr,fallbackText:Fr,muted:vr}),Mn.next=22;break;case 9:if(!(lr instanceof MediaStream)){Mn.next=22;break}return this._emitAMREvent("AMRLoadVideoBuffer","Attempt"),Mn.next=13,this._createBufferVideoElement(lr);case 13:if(xo=Mn.sent,xo){Mn.next=20;break}if(this._emitAMREvent("AMRLoadVideoBuffer","Failure"),!Qn){Mn.next=18;break}throw new Error("bufferFailed: videoBuffer failed to load or timeout");case 18:Mn.next=21;break;case 20:this._emitAMREvent("AMRLoadVideoBuffer","Success");case 21:this._videoFacadeEvents.on("amrLogEvent",(sr,Ar,so)=>{this._emitAMREvent(sr,Ar,so)});case 22:return Mn.next=24,this._bindToStream(lr,Er);case 24:return jr||this._triggerVideoElementCreated(),un(Er),xr=an(this._videoElementFacade,5e3),Mn.next=29,this._waitForVideoResolution(lr);case 29:return tn.debug("Waiting for video to be playing"),Mn.next=32,xr;case 32:tn.debug("Video is playing"),un(Er),xo&&(xo.remove&&xo.remove(),xo=null);case 35:case"end":return Mn.stop()}},Jn,this)}));function Tn(Jn,lr,tr){return Vn.apply(this,arguments)}return Tn}(),pn.bindAudioTrackOnly=function(){this._videoElementFacade&&this._videoElementFacade.bindAudioTrackOnly()},pn.destroyVideo=function(){this._videoElementFacade&&(this._videoElementFacade.destroy(),this._videoElementFacade=null)},pn.video=function(){return this._videoElementFacade},pn.showPoster=function(Tn){return Tn===void 0?!Kt.isDisplayNone(this._posterContainer):(this._showPoster=Tn,Kt[Tn?"show":"hide"](this._posterContainer),this.showPoster())},pn.poster=function(Tn){return Tn===void 0?Kt.css(this._posterContainer,"backgroundImage"):(this._poster=Tn,Kt.css(this._posterContainer,"backgroundImage",`url(${Tn})`),this.poster())},pn.loading=function(Tn){return Tn===void 0?this._loading:(this._loading=!!Tn,this._container&&this._container.classList[Tn?"add":"remove"]("OT_loading"),this.loading())},pn.audioOnly=function(Tn){return Tn===void 0?this._audioOnly:(this._audioOnly=Tn,this._container&&this._container.classList[Tn?"add":"remove"]("OT_audio-only"),this.audioOnly())},pn.domId=function(){return this._container&&this._container.getAttribute("id")},pn.setSinkId=function(Tn){if(this._videoElementFacade)return this._videoElementFacade.setSinkId(Tn)},(0,it.default)(Xn,[{key:"domElement",get:function(){return this._container}},{key:"videoElement",get:function(){return this._videoElementFacade&&this._videoElementFacade.domElement()||void 0}},{key:"width",get:function(){return this.videoElement&&this.videoElement.offsetWidth}},{key:"height",get:function(){return this.videoElement&&this.videoElement.offsetHeight}}]),Xn}()}_e.exports=At},function(_e,et,b){Object.defineProperty(et,"__esModule",{value:!0}),et.CancellationError=et.default=void 0;var tt=b(677),nt=ot(tt),rt=b(303),it=ot(rt);function ot(st){return st&&st.__esModule?st:{default:st}}et.default=nt.default,et.CancellationError=it.default},function(_e,et,b){(function(tt){const nt=b(21);_e.exports=()=>tt.all(nt.subscribers.where().map(rt=>{if(rt.isAudioBlocked())return rt._.unblockAudio()}))}).call(this,b(0))},function(_e,et,b){_e.exports=tt=>tt==="P2P"?"RELAYED":"ROUTED"},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5)),ot=nt(b(696)),st=nt(b(697)),at=nt(b(108)),ct=b(74),ut=nt(b(698));const lt=b(57),dt=b(148),ft=b(9),St=b(56),Tt=b(60),pt=b(275),gt=b(47),yt=b(50),Et=b(700),It=b(15),Gt=b(258),Wt=b(194),At=b(165),kt=At.CancellationError,Vt=At.default,Nt=b(2),tn=b(313),_t=b(314),Kt=b(75),cn=b(26),an=b(6),mn=b(107),on=b(128),yn=b(20),fn=b(73),sn=b(155),un=b(710),Ln=b(164)(),Xn=b(711),pn=b(712),Vn=b(166),Tn=b(24)(),Jn=Tn.getInputMediaDevices,lr=b(713),tr=b(269),Qn=b(311),Sr=b(714),vr=b(715),Fr=b(291),kr=Fr.setVideoContentHint,jr=Fr.getVideoContentHint,xo=b(167),Er=b(312),xr=5*1e3,Un=3*1e3,Mn=30*1e3;_e.exports=function(Ar){Ar===void 0&&(Ar={});let so=Ar,Bn=(0,st.default)({},((0,ot.default)(so),so));["processPubOptions"].forEach(cu=>{dt(Bn[cu],`${cu} dependency must be injected into Publisher`)});const gr=Bn.AnalyticsHelper||yn,Or=Bn.createAudioFallbackCoordinator||ut.default,ro=Bn.calculateCapableSimulcastStreams||b(251),Ao=Bn.createChromeMixin||b(281)(),ho=Bn.deviceHelpers||b(24)(),vo=Bn.EnvironmentLoader||b(147),po=Bn.Errors||b(7),zr=Bn.Events||b(23)(),Go=Bn.ExceptionCodes||b(10),mo=Bn.interpretPeerConnectionError||b(162)(),Zo=Bn.IntervalRunner||fn,$r=Bn.logging||b(1)("Publisher"),Ru=Bn.Microphone||b(292)(),jo=Bn.otError||b(13)(),yo=Bn.OTErrorClass||b(22),_o=Bn.OTHelpers||b(8),js=Bn.parseIceServers||b(102).parseIceServers,Ql=Bn.PUBLISH_MAX_DELAY||b(266),Rs=Bn.PublisherPeerConnection||b(296)(),xa=Bn.PublishingState||b(302)(),Iu=Bn.StreamChannel||b(150),Gu=Bn.systemRequirements||b(153),jp=Bn.VideoOrientation||b(151)(),$u=Bn.WidgetView||Ln,Qu=Bn.global||(typeof window!==void 0?window:commonjsGlobal),Jr=Bn.createSendMethod||b(309),Qs=Bn.setEncodersActiveState||tn,au=Bn.MediaProcessor||b(716),Ws=b(721),yl=Bn.shouldLogMediaProcessorEvents||b(722),Xr=b(315),Js=Bn.processPubOptions;return function(lu){var qo=this;lu===void 0&&(lu={});let Gl=an({});const es=new Wt,ju=new Er;let lp=!1;const $a=Rn=>es.get(Rn),ep=(Rn,bn)=>es.set(Rn,bn);an(this);const _u=sn();let na=new gr;Gu.check()||Gu.upgrade();let Yo,_l,uo;const tp={};let xu,xp,vs,wp,Jp,Op,vp,Hp,np,uu,Wu=!1,Xl,Np,zn,xn,Nn;const qn={},Rr={};let Zr;const wo=5e3;let Wo=!1,ws,ns;const ds=()=>this.session||ns||{isConnected(){return!1}},Zs=[],$s=new au;this.once("publishComplete",Rn=>{if(!Rn){var bn;Wu=!0,Xl=(bn=this.session)!=null&&bn.sessionInfo.p2pEnabled?"P2P":"MANTIS"}}),this.on("sourceStreamIdChanged",Rn=>{Xl=Rn,ju.finishTransitionTo(Xl)}),this.on("audioAcquisitionProblem",Rn=>{let bn=Rn.method;Vo("publisher:audioAcquisitionProblem","Event",{didPublishComplete:Wu,method:bn})});function Ap(){return{connectionId:ds().isConnected()?ds().connection.connectionId:null,streamId:_l,widgetType:"Publisher"}}const Ms=Rn=>{const bn=Object.keys(po).map(dn=>po[dn]),An=jo(bn.indexOf(Rn.name)>-1?Rn.name:po.MEDIA_ERR_ABORTED,Rn,Go.UNABLE_TO_PUBLISH);$r.error(`onStreamAvailableError ${An.name}: ${An.message}`),vs.set("Failed"),Yo&&(Yo.destroy(),Yo=null);const $t={failureReason:"GetUserMedia",failureCode:Go.UNABLE_TO_PUBLISH,failureMessage:`OT.Publisher failed to access camera/mic: ${An.message}`};qu("Failure",{},$t),yo.handleJsException({error:An,errorMsg:$t.failureReason,code:$t.failureCode,target:this,analytics:na}),this.trigger("publishComplete",An)},Wl=Rn=>{const bn=St(Rn);bn.code=Go.UNABLE_TO_PUBLISH,$r.error(`OT.Publisher.onScreenSharingError ${bn.message}`),vs.set("Failed"),bn.message=`Screensharing: ${bn.message}`,this.trigger("publishComplete",bn),qu("Failure",{},{failureReason:"ScreenSharing",failureMessage:bn.message}),Yo&&(Yo.destroy(),Yo=null)},Us=Rn=>{const bn=St(Rn);let An;try{An=window.self!==window.top}catch{}(typeof window!==void 0?window:commonjsGlobal).location.protocol!=="https:"&&(Ml?bn.message+=" Note: https:// is required for screen sharing.":tr()&&_o.env.hostName!=="localhost"&&(bn.message+=` Note: ${_o.env.name} requires HTTPS for camera and microphone access.`)),An&&!Ml&&(bn.message+=" Note: Check that the iframe has the allow attribute for camera and microphone"),$r.error(bn.message),vs.set("Failed"),bn.message=`OT.Publisher Access Denied: Permission Denied: ${bn.message}`,bn.code=Go.UNABLE_TO_PUBLISH,Yo&&(Yo.destroy(),Yo=null),qu("Cancel",{reason:"AccessDenied"}),this.trigger("publishComplete",bn),this.dispatchEvent(new on(cn.ACCESS_DENIED))},eu=Rn=>{throw Rn instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(Rn))||(Rn=new Error("Unknown error has occurred. Stream is not available.")),Rn.name===po.USER_MEDIA_ACCESS_DENIED||Rn.name===po.NOT_SUPPORTED&&Rn.originalMessage.match(/Only secure origins/)?Us(Rn):Js.isScreenSharing?Wl(Rn):Ms(Rn),Rn},Sp=()=>{Vo("accessDialog","Opened"),this.dispatchEvent(new on(cn.ACCESS_DIALOG_OPENED,!0))},rp=()=>{Vo("accessDialog","Closed"),this.dispatchEvent(new on(cn.ACCESS_DIALOG_CLOSED,!1))},qp=It(),_s={};let Uu=!1,ip={},Zp=!1,yu=Js(lu,"OT.Publisher",()=>vs&&vs.isDestroyed());yu.on({accessDialogOpened:Sp,accessDialogClosed:rp});const up=yu,Ml=up.isScreenSharing,ao=up.isCustomAudioTrack,Qo=up.isCustomVideoTrack,dp=up.shouldAllowAudio,qr=up.properties,$p=up.getUserMedia;Object.defineProperty(this,"loudness",{writable:!1,value:void 0,configurable:!0});function Ks(Rn){Rn.forEach(bn=>bn())}const fp=(Rn,bn,An)=>Rn.addEventListener?(Rn.addEventListener(bn,An),()=>Rn.removeEventListener(bn,An)):()=>{};(function(){const bn=[];Gl.on("streamDestroy",()=>Ks(bn)),Gl.on("streamChange",()=>{Ks(bn);const An=uo.getAudioTracks().map($t=>fp($t,"ended",()=>{Zp=!0,this.trigger("audioAcquisitionProblem",{method:"trackEndedEvent"})}));bn.splice(0,bn.length,...An)})}).call(this),function(){const bn=[];Gl.on("streamDestroy",()=>Ks(bn)),Gl.on("streamChange",()=>{Ks(bn),Vp()||uo.getTracks().forEach(An=>{An.addEventListener&&(bn.push(fp(An,"mute",()=>{Vs()})),bn.push(fp(An,"unmute",()=>{Vs()})))})})}();const Vp=()=>{if(Ml)return!0;const bn=["text","detail"].includes(qr.videoContentHint);return Qo&&bn},Vo=lu.logAnalyticsEvent||((Rn,bn,An,$t,dn)=>{let vn=ft({action:Rn,variation:bn,payload:An},Ap(),$t);bn==="Failure"&&(vn=ft(ip,vn)),ip=gt(vn,"sessionId","connectionId","partnerId"),na.logEvent(vn,dn)}),Gp=()=>{if(!yl(this.session)){$s.disableLogging();return}const bn=this.session.apiKey;$s.enableLogging(bn)},qu=function(bn,An,$t){An===void 0&&(An={}),$t===void 0&&($t={}),$t.failureReason!=="Non-fatal"&&(bn==="Attempt"&&(Jp=new Date().getTime(),ws&&(ws.stop(),$r.error("_connectivityAttemptPinger should have been cleaned up")),ws=new Zo(()=>{Vo("Publish","Attempting",An,Object.assign({},Ap(),$t))},1/5,6)),bn==="Failure"||bn==="Success"||bn==="Cancel"?(ws?(ws.stop(),ws=void 0):$r.warn(`Received connectivity event: "${bn}" without "Attempt"`),Vo("Publish",bn,Object.assign({videoInputDevices:vp,audioInputDevices:Op,videoInputDeviceCount:vp?vp.length:void 0,audioInputDeviceCount:Op?Op.length:void 0,selectedVideoInputDeviceId:Hp,selectedAudioInputDeviceId:np},An),Object.assign({attemptDuration:new Date().getTime()-Jp},$t))):Vo("Publish",bn,An,$t))},em=(Rn,bn)=>{Vo("ICERestart",Rn,bn)},om=(Rn,bn,An)=>{bn==="Attempt"?(qn[Rn]=new Date().getTime(),Vo(Rn,bn,An)):(bn==="Failure"||bn==="Success")&&Vo(Rn,bn,An,{attemptDuration:new Date().getTime()-qn[Rn]})},Lp=function(bn,An){An===void 0&&(An={}),om("RoutedToRelayedTransition",bn,An)},Yp=function(bn,An){An===void 0&&(An={}),om("RelayedToRoutedTransition",bn,An)},tm=yt(()=>{Vo("GetStats","Called")}),rs=yt(()=>{Vo("GetRtcStatsReport","Called")}),Co=Rn=>{let bn=Rn.parsedStats,An=Rn.simulcastEnabled,$t=Rn.remoteConnectionId,dn=Rn.peerId,vn=Rn.sourceStreamId;const Wn={peerId:dn,widgetType:"Publisher",connectionId:this.session&&this.session.isConnected()?this.session.connection.connectionId:null,streamId:_l,width:Yo.width,height:Yo.height,audioTrack:uo&&uo.getAudioTracks().length>0,hasAudio:Tp(),publishAudio:qr.publishAudio,videoTrack:uo&&uo.getVideoTracks().length>0,hasVideo:sm(),publishVideo:qr.publishVideo,audioSource:ao?"Custom":void 0,duration:xu?Math.round((new Date().getTime()-xu.getTime())/1e3):0,remoteConnectionId:$t,scalableVideo:An,sourceStreamId:xo(vn)};let Dn=Ml&&Qo&&"Screen"||Ml&&lu.videoSource||Qo&&"Custom"||qr.constraints.video&&"Camera"||null;pt(Dn)&&(Dn=Et(Dn)),Wn.videoSource=Dn;const ir={videoWidth:this.videoWidth(),videoHeight:this.videoHeight()},ar=ft({},Wn,bn,ir);na.logQOS(ar),this.trigger("qos",ar)},um=()=>{var Rn,bn;let An=((Rn=qr.videoDimensions)==null?void 0:Rn.width)||640,$t=((bn=qr.videoDimensions)==null?void 0:bn.height)||480;if(qr.publishVideo){var dn;const vn=(dn=Yo)==null?void 0:dn.video();An=(vn==null?void 0:vn.videoWidth())||An,$t=(vn==null?void 0:vn.videoHeight())||$t}return{width:An,height:$t}},ym=Rn=>{$r.error("OT.Publisher State Change Failed: ",Rn.message),$r.debug(Rn)},dm=()=>{if(vs.isDestroyed()){Yo&&Yo.destroyVideo();return}$r.debug("OT.Publisher.onLoaded; resolution:",`${this.videoWidth()}x${this.videoHeight()}`),vs.set("MediaBound"),Vn().catch($r.error),Yo.loading(this.session?!this.stream:!1),Uu=!0},Ep=Rn=>{const bn=jo(po.CONNECT_FAILED,Rn,Go.P2P_CONNECTION_FAILED);bn.message=`OT.Publisher PeerConnection Error: ${bn.message}`,qu("Failure",{},{failureReason:"PeerConnectionError",failureCode:bn.code,failureMessage:bn.message}),vs.set("Failed"),this.trigger("publishComplete",bn),yo.handleJsException({error:bn,target:this,analytics:na})},Hu=()=>{uo&&(Gl.emit("streamDestroy"),Qu.MediaStreamTrack&&Qu.MediaStreamTrack.prototype.stop?uo.getTracks().forEach(Rn=>Rn.stop()):uo.stop())},Gn=()=>{const Rn=Nt.isiOS&&Nt.iOSVersion>=15&&Nt.iOSVersion<15.2,bn=uo.getVideoTracks()[0];if(!Rn||!bn)return;const An=()=>{!document.hidden&&Yo&&Yo.rebindSrcObject()};document.addEventListener("visibilitychange",An)},Qt=()=>{const Rn=Nt.isiOS&&Nt.iOSVersion>=13.3,bn=uo.getAudioTracks()[0];Rn&&bn&&(bn.onmute=()=>Fm(bn),bn.onunmute=()=>Xm(bn))},Zn=function(){var Rn=(0,it.default)(rt.default.mark(function bn(){var An;return rt.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:if(An={muted:!0},Yo){dn.next=3;break}throw new Error("Cannot bind video after widget view has been destroyed");case 3:return dn.abrupt("return",Yo.bindVideo(uo,An));case 4:case"end":return dn.stop()}},bn)}));return function(){return Rn.apply(this,arguments)}}(),er=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t;return rt.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if($r.debug("OT.Publisher.onStreamAvailable"),vs.set("BindingMedia"),qr.videoContentHint!==void 0&&kr(An,qr.videoContentHint),Hu(),uo=An,!qr.videoFilter){vn.next=14;break}return vn.prev=6,vn.next=9,qo.applyVideoFilter(qr.videoFilter);case 9:vn.next=14;break;case 11:vn.prev=11,vn.t0=vn.catch(6),$r.error(`Error applying video filter: ${vn.t0}`);case 14:Gl.emit("streamChange"),Qt(),Gn(),$t=(Wn,Dn)=>{let ir;return Wn.forEach(ar=>{if(ar.deviceId)ir=ar.deviceId.toString();else if(ar.label&&Dn){const rr=Tt(Dn,Po=>Po.label===ar.label);rr&&(ir=rr.deviceId)}}),ir},Hp=$t(uo.getVideoTracks(),vp),np=$t(uo.getAudioTracks(),Op),xp=new Ru(uo,!qr.publishAudio),Zm(),Em(),qo.accessAllowed=!0,qo.dispatchEvent(new on(cn.ACCESS_ALLOWED,!1));case 25:case"end":return vn.stop()}},bn,null,[[6,11]])}));return function(An){return Rn.apply(this,arguments)}}(),nr=Rn=>{$r.error("OT.Publisher.onPublishingTimeout");let bn,An;Zp?(bn=po.CHROME_MICROPHONE_ACQUISITION_ERROR,An="Unable to publish because your browser failed to get access to your microphone. You may need to fully quit and restart your browser to get it to work. See https://bugs.chromium.org/p/webrtc/issues/detail?id=4799 for more details."):(bn=po.TIMEOUT,An="Could not publish in a reasonable amount of time");const $t={failureReason:"ICEWorkflow",failureCode:Go.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to publish in a reasonable amount of time (timeout)"};qu("Failure",{},$t),yo.handleJsException({errorMsg:$t.failureReason,code:$t.failureCode,target:this,analytics:na}),Rn.isConnected()&&this.streamId&&Rn._.streamDestroy(this.streamId),this.disconnect(),this.session=null,vs.isDestroyed()||vs.set("MediaBound"),this.trigger("publishComplete",jo(bn,new Error(An),Go.UNABLE_TO_PUBLISH))},_r=Rn=>{const bn=jo(po.MEDIA_ERR_DECODE,Rn,Go.UNABLE_TO_PUBLISH);bn.message=`OT.Publisher while playing stream: ${bn.message}`,$r.error("OT.Publisher.onVideoError:",bn),Vo("stream",null,{reason:bn.message});const An=vs.isAttemptingToPublish();vs.set("Failed"),An?this.trigger("publishComplete",bn):this.trigger("error",bn.message),yo.handleJsException({error:bn,target:this,analytics:na})};this._setWebRTCStream=Rn=>{uo=Rn},this._setCurrentVideoFilter=Rn=>{Pu=Rn},this._getCurrentVideoFilter=()=>Pu,this._getMediaProcessor=()=>$s,this._removePeerConnection=Rn=>{var bn;if(!Rn)return;const An=$a(Rn),$t=An.peerConnectionId;delete _s[$t],Rn.destroy(),(bn=Cm)==null||bn.onPeerConnectionDisconnected()},this._removeSubscriber=Rn=>{this.session.sessionInfo.isAdaptiveEnabled&&Xl==="P2P"&&this._.startRelayedToRoutedTransition(),Ou(Rn).then(An=>{An.forEach($t=>this._removePeerConnection($t))})};const _i=Rn=>{const bn=$a(Rn),An=bn.remoteSubscriberId,$t=bn.peerConnectionId;$r.debug("Subscriber has been disconnected from the Publisher's PeerConnection"),Vo("disconnect","PeerConnection",{subscriberConnection:$t}),this._removeSubscriber(An)},co=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An,$t){var dn,vn,Wn,Dn,ir,ar,rr,Po,eo,Ur,Ps;return rt.default.wrap(function(bo){for(;;)switch(bo.prev=bo.next){case 0:if(dn=$t.reason,vn=$t.prefix,Wn=qo.session&&qo.session.sessionInfo,!(vn==="ICEWorkflow"&&Wn&&Wn.reconnection&&Uu)){bo.next=5;break}return $r.debug("Ignoring peer connection failure due to possibility of reconnection."),bo.abrupt("return");case 5:return Dn=$a(An)||{},ir=Dn.remoteConnectionId,ar=ir===void 0?"(not found)":ir,rr=Dn.peerConnectionId,Po=mo(void 0,dn,vn,ar,"Publisher"),eo={hasRelayCandidates:An&&An.hasRelayCandidates()},Ur={failureReason:vn||"PeerConnectionError",failureCode:Po.code,failureMessage:Po.message},vs.isPublishing()?Ur.reason="Non-fatal":qo.trigger("publishComplete",Po),qu("Failure",eo,Ur),yo.handleJsException({errorMsg:`OT.Publisher PeerConnection Error: ${dn}`,code:Po.code,target:qo,analytics:na}),bo.next=14,_s[rr];case 14:Ps=bo.sent,Ps.destroy(),delete _s[rr];case 17:case"end":return bo.stop()}},bn)}));return function(An,$t){return Rn.apply(this,arguments)}}(),oo=Rn=>this.session.sessionInfo.isAdaptiveEnabled&&Rn.getSourceStreamId()==="P2P",du=Rn=>{const bn=$a(Rn),An=bn.remoteConnectionId;em("Success",{remoteConnectionId:An})},Lo=Rn=>{const bn=$a(Rn),An=bn.remoteConnectionId;em("Failure",{reason:"ICEWorkflow",message:"OT.Publisher PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",remoteConnectionId:An})},Vl=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An,$t){var dn,vn,Wn,Dn,ir,ar,rr;return rt.default.wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:if(dn=qo.session.sessionInfo.isAdaptiveEnabled,vn=$t.getSourceStreamId(),Rr[vn]=An,An==="disconnected"&&setTimeout(()=>{const Ur=qo.session._.isSocketReconnecting,fu=qo.session._.getSocket().is("connected")&&!Ur();if(Rr[vn]==="disconnected"&&fu){const bo=$a($t),Ul=bo.remoteConnectionId;em("Attempt",{remoteConnectionId:Ul}),$t.iceRestart()}},2e3),An!=="connected"){eo.next=14;break}if(clearTimeout(Zr),!dn){eo.next=14;break}return eo.next=9,nm();case 9:return Wn=eo.sent.iceConnectionStateIsConnected(),eo.next=12,Bp();case 12:Dn=eo.sent.iceConnectionStateIsConnected(),Wn&&Dn&&am();case 14:if(An!=="failed"){eo.next=21;break}if(ir=qo.session._.isSocketReconnecting,ar=qo.session._.getSocket(),rr=ar.is("connected")&&!ir(),rr){eo.next=20;break}return eo.abrupt("return");case 20:dn&&vn===Xl&&vn==="P2P"?qo._.startRelayedToRoutedTransition():Zr=setTimeout(()=>{qo.session._.streamDestroy(qo.streamId,vn)},wo);case 21:case"end":return eo.stop()}},bn)}));return function(An,$t){return Rn.apply(this,arguments)}}(),Wp=Rn=>{Rn.setP2PMaxBitrate(),Rn.startEncryption(this.session.connection.id),oo(Rn)&&Lp("Success")},bu=Rn=>{if(vs.current!=="PublishingToSession")throw new Error("assignStream called when publisher is not successfully publishing");_u.releaseAll(),this.stream=Rn,this.stream.on("destroyed",this.disconnect,this),_u.add(()=>{this.stream&&this.stream.off("destroyed",this.disconnect,this)}),vs.set("Publishing"),Yo.loading(!Uu),xu=new Date,this.dispatchEvent(new zr.StreamEvent("streamCreated",Rn,null,!1)),qu("Success"),this.trigger("publishComplete",null,this)},Mp=Rn=>{let bn=Rn.peerConnectionId,An=Rn.send,$t=Rn.log,dn=Rn.logQoS,vn=Rn.sourceStreamId;if(op(bn))return tt.reject(new Error("PeerConnection already exists"));const Wn=ro({isChromiumEdge:_o.env.isChromiumEdge,browserName:_o.env.name,isScreenSharing:Ml,isCustomVideoTrack:Qo,sessionInfo:this.session.sessionInfo,constraints:qr.constraints,videoDimensions:um(),capableSimulcastScreenshare:qr.capableSimulcastScreenshare,scalableVideo:qr.scalableVideo});return _s[bn]=tt.all([this.session._.getIceConfig(),this.session._.getVideoCodecsCompatible(uo)]).then(Dn=>{let ir=Dn[0],ar=Dn[1],rr=uo;if(!ar){rr=uo.clone();const eo=rr.getVideoTracks(),Ur=eo[0];Ur&&(Ur.stop(),rr.removeTrack(Ur))}const Po=new Rs({iceConfig:ir,sendMessage:(eo,Ur)=>{eo==="offer"&&this.trigger("connected"),An(eo,Ur)},webRTCStream:rr,channels:qr.channels,capableSimulcastStreams:Wn,overrideSimulcastEnabled:lu._enableSimulcast,logAnalyticsEvent:$t,offerOverrides:{enableDtx:qr.enableDtx,enableStereo:qr.enableStereo,audioBitrate:qr.audioBitrate,priorityVideoCodec:qr._priorityVideoCodec||this.session.sessionInfo.priorityVideoCodec,codecFlags:qr._codecFlags||this.session._.getCodecFlags()},answerOverrides:this.session.sessionInfo.p2pEnabled?void 0:{audioBitrate:qr.audioBitrate},sourceStreamId:vn,isP2pEnabled:this.session.sessionInfo.p2pEnabled,sessionId:this.session.id,keyStore:this.session.keyStore,sFrameClientStore:this.session.sFrameClientStore,isE2ee:this.session._.isE2ee(),audioFallbackEnabled:qr.publisherAudioFallbackEnabled,resolution:{width:this.videoWidth(),height:this.videoHeight()}});return Po.on({disconnected:()=>_i(Po),error:eo=>{let Ur=eo.reason,Ps=eo.prefix;return co(Po,{reason:Ur,prefix:Ps})},qos:dn,iceRestartSuccess:()=>du(Po),iceRestartFailure:()=>Lo(Po),iceConnectionStateChange:eo=>Vl(eo,Po),audioAcquisitionProblem:()=>{Zp=!0,this.trigger("audioAcquisitionProblem",{method:"getStats"})},audioFallbackStateChange:eo=>Cm.onPeerConnectionStateChange(Object.assign({},eo,{peerConnection:Po,publishVideo:qr.publishVideo,stream:this.stream,peerId:$a(Po).peerId}))}),Po.once("connected",()=>Wp(Po)),new tt((eo,Ur)=>{const Ps=fu=>{Ur(fu)};Po.once("error",Ps),Po.init(wp,fu=>{if(fu)return Ur(fu);Po.off("error",Ps),eo(Po)})})}),op(bn)},wu=()=>tt.all(Object.keys(_s).map(op)),Ou=Rn=>wu().then(bn=>bn.filter(An=>$a(An).remoteSubscriberId===Rn)),op=Rn=>_s[Rn],Cp=Rn=>{const bn=Object.keys(_s).find(An=>An.endsWith(`~${Rn}`));return _s[bn]},nm=()=>Cp("MANTIS"),Bp=()=>Cp("P2P");let Dl=Ao(this,{name:qr.name,publishAudio:qr.publishAudio,publishVideo:qr.publishVideo,audioSource:qr.audioSource,showControls:qr.showControls,shouldAllowAudio:dp,logAnalyticsEvent:Vo});const rm=()=>{this.off("publishComplete",Vs),Dl&&Dl.reset(),_u.releaseAll(),this.disconnect(),xp=null,Hu(),uo=null,Yo&&(Yo.destroy(),Yo=null),this.session&&this._.unpublishFromSession(this.session,"reset"),$s.getVideoFilter()&&Gm(),this.id=null,this.stream=null,Uu=!1,this.session=null,vs.isDestroyed()||vs.set("NotPublishing")},sm=()=>{if(!uo||uo.getVideoTracks().length===0)return!1;const bn=["text","detail"].includes(qr.videoContentHint),An=Qo&&bn,$t=_o.env.isChromium&&(Ml||An);return uo.getVideoTracks().reduce((dn,vn)=>dn&&(!vn.muted||!!$t)&&vn.enabled&&vn.readyState!=="ended",qr.publishVideo)},Tp=()=>!uo||uo.getAudioTracks().length===0?!1:uo.getAudioTracks().length>0&&uo.getAudioTracks().reduce((Rn,bn)=>Rn&&!bn.muted&&bn.enabled&&bn.readyState!=="ended",qr.publishAudio),Vs=Rn=>{if(Yo&&(Yo.audioOnly(!sm()),Yo.showPoster(!sm())),Dl&&Dl.setAudioOnly(!sm()&&Tp()),this.stream){let bn;Wo&&(bn=ct.CongestionLevels.LOW,Wo=!1),this.stream.setChannelActiveState("audio",Tp(),Rn),this.stream.setChannelActiveState("video",sm(),Rn,bn)}else this.off("publishComplete",Vs),this.once("publishComplete",Vs)},fm=(Rn,bn)=>{let An=!1;if(typeof Rn=="function"?bn=Rn:An=Rn==="rtcStatsReport",An?rs():tm(),An&&!Qn){const $t=Go.GET_RTC_STATS_REPORT_NOT_SUPPORTED;bn(jo(po.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(yo.getTitleByCode($t)),$t));return}wu().then($t=>{if($t.length===0){const dn=Go.PEER_CONNECTION_NOT_CONNECTED;throw jo(po.PEER_CONNECTION_NOT_CONNECTED,new Error(yo.getTitleByCode(dn)),dn)}return $t}).then($t=>this.session.sessionInfo.isAdaptiveEnabled?$t.filter(vn=>vn.getSourceStreamId()===Xl):$t).then($t=>tt.all($t.map(dn=>_t(An?dn.getRtcStatsReport.bind(dn):dn.getStats.bind(dn))().then(vn=>({pc:dn,stats:vn}))))).then($t=>{const dn=xu?xu.getTime():Date.now(),vn=$t.map(Wn=>{let Dn=Wn.pc,ir=Wn.stats;const ar=$a(Dn),rr=ar.remoteConnectionId,Po=ar.remoteSubscriberId;return ft(rr.match(/^symphony\./)?{}:{subscriberId:Po,connectionId:rr},An?{rtcStatsReport:ir}:{stats:Kt.normalizeStats(ir,!1,dn)})});bn(null,vn)}).catch(bn)},bm=Rn=>fm(Rn),Qm=Rn=>fm("rtcStatsReport",Rn),Mu=(Rn,bn)=>{const An={name:qr.name||"",streamId:this.streamId,subscriberAudioFallbackEnabled:qr.subscriberAudioFallbackEnabled,channels:Zs,minBitrate:qr.minVideoBitrate,sourceStreamId:Rn,e2ee:this.session._.isE2ee(),publisherAudioFallbackEnabled:qr.publisherAudioFallbackEnabled,customProperties:{initials:qr.initials}};this.session._.streamCreate(An,bn)},km=Rn=>{lp||(lp=!0,uo.getAudioTracks().forEach(function(){var bn=(0,it.default)(rt.default.mark(function An($t){var dn;return rt.default.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:return dn=$t.clone(),dn.enabled=!1,Wn.prev=2,Wn.next=5,Rn.findAndReplaceTrack($t,dn);case 5:Wn.next=10;break;case 7:return Wn.prev=7,Wn.t0=Wn.catch(2),Wn.abrupt("return");case 10:tp[$t.id]=dn;case 11:case"end":return Wn.stop()}},An,null,[[2,7]])}));return function(An){return bn.apply(this,arguments)}}()))},Sm=Rn=>{uo.getAudioTracks().forEach(function(){var bn=(0,it.default)(rt.default.mark(function An($t){return rt.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return vn.prev=0,vn.next=3,Rn.findAndReplaceTrack(tp[$t.id],$t);case 3:vn.next=8;break;case 5:return vn.prev=5,vn.t0=vn.catch(0),vn.abrupt("return");case 8:delete tp[$t.id];case 9:case"end":return vn.stop()}},An,null,[[0,5]])}));return function(An){return bn.apply(this,arguments)}}()),lp=!1},am=function(){var Rn=(0,it.default)(rt.default.mark(function bn(){var An;return rt.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return zn=!1,dn.next=3,nm();case 3:if(An=dn.sent,!An){dn.next=17;break}return qo.trigger("sourceStreamIdChanged","P2P"),dn.next=8,mn(xr);case 8:if(!zn){dn.next=11;break}return $r.debug("Cancelling stop sending RTP to MANTIS."),dn.abrupt("return");case 11:return km(An),dn.next=14,An.changeMediaDirectionToInactive();case 14:if(!(_o.env.isFirefox&&_o.env.version<96)){dn.next=17;break}return dn.next=17,hm();case 17:case"end":return dn.stop()}},bn)}));return function(){return Rn.apply(this,arguments)}}(),Nm=function(){var Rn=(0,it.default)(rt.default.mark(function bn(){var An;return rt.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return zn=!0,dn.next=3,nm();case 3:if(An=dn.sent,!An){dn.next=10;break}return Sm(An),dn.next=8,An.changeMediaDirectionToRecvOnly();case 8:Np&&clearTimeout(Np),qo.trigger("sourceStreamIdChanged","MANTIS");case 10:case"end":return dn.stop()}},bn)}));return function(){return Rn.apply(this,arguments)}}(),hm=function(){var Rn=(0,it.default)(rt.default.mark(function bn(){var An;return rt.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return dn.next=2,nm();case 2:An=dn.sent,An&&(Np=setTimeout((0,it.default)(rt.default.mark(function vn(){return rt.default.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:if(Xl!=="P2P"){Dn.next=9;break}return Dn.next=3,An.changeMediaDirectionToRecvOnly();case 3:return Dn.next=5,mn(Un);case 5:return Dn.next=7,An.changeMediaDirectionToInactive();case 7:return Dn.next=9,hm();case 9:case"end":return Dn.stop()}},vn)})),Mn));case 4:case"end":return dn.stop()}},bn)}));return function(){return Rn.apply(this,arguments)}}(),Om=()=>{Lp("Attempt");const Rn=An=>{const $t=vr(An);this.trigger("streamCreateForP2PComplete",$t),Lp("Failure",{reason:$t.message})};if(!this.session){Lp("Failure",{reason:"Not connected to the session."});return}const bn=setTimeout(()=>{Lp("Failure",{reason:"Timeout"})},Ql);this.once("streamCreateForP2PComplete",()=>{clearTimeout(bn)}),$r.debug(`streamCreateWithSource: send a message to RUMOR for creating the stream with the sourceStreaId P2P and stream ${this.streamId}`),Mu("P2P",An=>{An?Rn(An):this.trigger("streamCreateForP2PComplete")})},v1=function(){var Rn=(0,it.default)(rt.default.mark(function bn(){return rt.default.wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:if(Xl==="P2P"){$t.next=2;break}return $t.abrupt("return");case 2:if(Yp("Attempt"),qo.session){$t.next=6;break}return Yp("Failure",{reason:"Not connected to the session."}),$t.abrupt("return");case 6:if(qo.streamId){$t.next=9;break}return Yp("Failure",{reason:"No streamId available"}),$t.abrupt("return");case 9:return $t.next=11,Nm();case 11:return qo.session._.streamDestroy(qo.streamId,"P2P"),$t.t0=qo,$t.next=15,Bp();case 15:$t.t1=$t.sent,$t.t0._removePeerConnection.call($t.t0,$t.t1),Yp("Success"),qo.trigger("streamDestroyForP2PComplete");case 19:case"end":return $t.stop()}},bn)}));return function(){return Rn.apply(this,arguments)}}();this.publish=Rn=>($r.debug("OT.Publisher: publish"),(vs.isAttemptingToPublish()||vs.isPublishing())&&rm(),vs.set("GetUserMedia"),qr.style&&this.setStyle(qr.style,null,!0),qr.classNames="OT_root OT_publisher",vo.onLoad(()=>{$r.debug("OT.Publisher: publish: environment loaded"),Yo=new $u(Rn,Object.assign({},qr,{widgetType:"publisher"})),dp&&Xn({publisher:this,widgetView:Yo}),Yo.on("error",_r),this.id=Yo.domId(),this.element=Yo.domElement,this.element&&Dl&&Dl.init(Yo),Yo.on("videoDimensionsChanged",(bn,An)=>{qr.publishVideo&&(this.stream&&this.stream.setVideoDimensions(An.width,An.height),this.dispatchEvent(new zr.VideoDimensionsChangedEvent(this,bn,An)))}),Yo.on("mediaStopped",bn=>{const An=new zr.MediaStoppedEvent(this,bn);if(this.dispatchEvent(An),!An.isDefaultPrevented()){if(bn){const $t=String(bn.kind).toLowerCase();$t==="audio"?Em():$t==="video"?Zm():$r.warn(`Track with invalid kind has ended: ${bn.kind}`);return}this.session?this._.unpublishFromSession(this.session,"mediaStopped"):this.destroy("mediaStopped")}}),Yo.on("videoElementCreated",bn=>{const An=new zr.VideoElementCreatedEvent(bn);this.dispatchEvent(An)}),$p().catch(eu).then(function(){var bn=(0,it.default)(rt.default.mark(function An($t){var dn;return rt.default.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:return Op=yu.audioDevices,vp=yu.videoDevices,dn=!!qr.videoFilter,dn&&(Au=Sr($t,vp)),Wn.next=6,er($t);case 6:return qr.publishVideo||qo._toggleVideo(qr.publishVideo,um()),!Ml&&!Qo&&!dn&&(Au=Sr($t,vp),qr.publishVideo&&Rm(Au)),Wn.abrupt("return",Zn().catch(Dn=>{if(!(Dn instanceof kt))throw Dn}).then(()=>{dm(),vs.isDestroyed()||(qo.trigger("initSuccess"),qo.trigger("loaded",qo))},Dn=>{$r.error(`OT.Publisher.publish failed to bind video: ${Dn}`),Ep(Dn)}));case 9:case"end":return Wn.stop()}},An)}));return function(An){return bn.apply(this,arguments)}}())}),this),this._setScalableValues=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An,$t){var dn,vn,Wn;return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,wu().then(ar=>ar[0].getSenders().filter(rr=>rr.track.kind==="video"));case 2:return dn=ir.sent,vn=dn[0],Wn=vn.getParameters(),Wn.encodings.forEach((ar,rr)=>{ar[An]=$t[rr]}),ir.next=8,vn.setParameters(Wn);case 8:case"end":return ir.stop()}},bn)}));return function(bn,An){return Rn.apply(this,arguments)}}(),this._setScalableFramerates=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t;return rt.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if($t=Am(An),!($t&&i1($t))){vn.next=4;break}return vn.next=4,qo._setScalableValues("maxFramerate",$t);case 4:case"end":return vn.stop()}},bn)}));return function(bn){return Rn.apply(this,arguments)}}(),this._setScalableVideoLayers=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t;return rt.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if($t=Am(An),!($t&&o1($t))){vn.next=4;break}return vn.next=4,qo._setScalableValues("scaleResolutionDownBy",$t);case 4:case"end":return vn.stop()}},bn)}));return function(bn){return Rn.apply(this,arguments)}}();const i1=Rn=>{let bn=0;return Rn.every(An=>An!==15&&An!==30||An<bn?!1:(bn=An,!0))},o1=Rn=>{let bn=17;return Rn.every(An=>An<1||An>=bn?!1:(bn=An,!0))},Am=Rn=>{let bn;if(typeof Rn!="string")return bn;const An=Rn.split(":");return An.length===0||An.length>3||!An.every($t=>!isNaN($t))||(bn=An.map($t=>parseInt($t,10)).reverse()),bn},cm=Rn=>uo&&uo[`get${Gt(Rn)}Tracks`]().length>0&&uo[`get${Gt(Rn)}Tracks`]().every(bn=>bn.readyState!=="ended"),Em=Rn=>{const bn=cm("audio")&&qr.publishAudio;Dl&&Dl.setMuted(!bn),xp&&xp.muted(!bn),Nn&&Nn.originalTrack&&(Nn.originalTrack.enabled=bn),Vs(Rn)};this.publishAudio=Rn=>{Vo("publishAudio","Attempt",{publishAudio:Rn}),qr.publishAudio=Rn;try{Em(),Vo("publishAudio","Success",{publishAudio:Rn})}catch(bn){Vo("publishAudio","Failure",{message:bn.message})}return this},this.publishCaptions=Rn=>{Vo("publishCaptions","Attempt");try{Gl.dispatchEvent(new zr.PublisherCaptionsEnabled(Rn)),this.stream.setChannelActiveState("data",Rn),Vo("publishCaptions","Success")}catch(bn){Vo("publishCaptions","Failure",{message:bn.message})}};let lm,im=!1;const Zm=()=>{const Rn=cm("video")&&qr.publishVideo;if(Nt.name==="Chrome"&&Nt.version>=69&&(0,it.default)(rt.default.mark(function bn(){var An,$t;return rt.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return lm&&lm.cancel(),lm=new Vt,An=lm,vn.next=5,wu();case 5:$t=vn.sent,An.isCanceled()||$t.forEach(Wn=>{Qs(Wn,Rn)});case 7:case"end":return vn.stop()}},bn)}))(),Qo&&$s){const bn=$s.getOriginalVideoTrack();bn&&(bn.enabled=Rn)}if(Qo&&xn){const bn=xn.originalTrack;bn&&(bn.enabled=Rn)}uo&&uo.getVideoTracks().forEach(bn=>{bn.enabled=Rn,bn.isCreatedCanvas&&(bn.enabled=!1)}),Vs()},Gm=function(){var Rn=(0,it.default)(rt.default.mark(function bn(){var An;return rt.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return An=$s.getOriginalVideoTrack(),dn.prev=1,dn.next=4,$s.destroy();case 4:dn.next=9;break;case 6:dn.prev=6,dn.t0=dn.catch(1),$r.warn(`Error cleaning up mediaProcessor: ${dn.t0}`);case 9:An.stop();case 10:case"end":return dn.stop()}},bn,null,[[1,6]])}));return function(){return Rn.apply(this,arguments)}}(),Wm=Rn=>!Pu&&!xn&&Rn===l1(),s1=(Rn,bn)=>Pu||xn?!0:Rn?Au!==bn:bn!==void 0;let Au,Pu;this._toggleVideo=pn(function(){var Rn=(0,it.default)(rt.default.mark(function bn(An,$t){var dn,vn,Wn,Dn,ir,ar,rr,Po;return rt.default.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(!(Ml||Qo||im)){Ur.next=2;break}return Ur.abrupt("return");case 2:return Ur.next=4,Lm();case 4:if(vn=Ur.sent,Wn=Vm(),Wn){Ur.next=8;break}throw jo(po.NOT_SUPPORTED,new Error("Publisher._toggleVideo cannot toggleVideo when you have no video source."));case 8:if(Dn=(dn=vn.find(Ps=>Ps.label===Wn.label))==null?void 0:dn.deviceId,s1(An,Dn)){Ur.next=11;break}return Ur.abrupt("return");case 11:if(Wn.readyState!=="ended"){Ur.next=14;break}return im=!0,Ur.abrupt("return");case 14:if(An&&_o.env.isAndroid&&_o.env.isChrome&&Wn&&Wn.stop&&Wn.stop(),An){Ur.next=31;break}Ur.prev=16,ir=lr($t),Ur.next=23;break;case 20:return Ur.prev=20,Ur.t0=Ur.catch(16),Ur.abrupt("return");case 23:if(Dn&&(Au=Dn),Rm(ir.label),ar=$s.getVideoFilter(),!ar){Ur.next=30;break}return Pu=ar,Ur.next=30,Gm();case 30:xn&&(xn.destroy(),xn.stopOriginalTrack());case 31:if(!(Au&&vn.findIndex(Ps=>Ps.deviceId===Au)===-1)){Ur.next=33;break}throw jo(po.NO_DEVICES_FOUND,new Error("Previous device no longer available - deviceId not found"));case 33:if(Gl.emit("streamDestroy"),!An){Ur.next=64;break}if(!Wm(Au)){Ur.next=37;break}return Ur.abrupt("return");case 37:return Ur.prev=37,Ur.next=40,Tm(Au);case 40:ir=Ur.sent,Ur.next=47;break;case 43:throw Ur.prev=43,Ur.t1=Ur.catch(37),$r.error(`Error getting new track for current device(${Au}): ${Ur.t1}`),Ur.t1;case 47:if(ir){Ur.next=50;break}return $r.error("Failed to enable video. It was not possible to get a new track from the camera"),Ur.abrupt("return");case 50:if(!Pu){Ur.next=59;break}return rr=$s.getOriginalVideoTrack(),Ur.next=54,$s.setVideoFilter(Pu);case 54:return Ur.next=56,$s.setMediaStream(uo);case 56:return Ur.next=58,$s.setVideoTrack(ir);case 58:ir=Ur.sent;case 59:if(!xn){Ur.next=64;break}return rr=xn.originalTrack,Ur.next=63,xn.setTrack(ir);case 63:ir=Ur.sent;case 64:return Ur.prev=64,Ur.next=67,pm(Wn,ir);case 67:(Po=rr)==null||Po.stop(),Ur.next=73;break;case 70:throw Ur.prev=70,Ur.t2=Ur.catch(64),Ur.t2;case 73:case"end":return Ur.stop()}},bn,null,[[16,20],[37,43],[64,70]])}));return function(bn,An){return Rn.apply(this,arguments)}}());const Mm=()=>{var Rn,bn;Cm.reset(),(Rn=Dl)==null||Rn.videoDisabledIndicator.disableVideo(!1),(bn=Dl)==null||bn.videoDisabledIndicator.setWarning(!1)},y1=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t,dn;return rt.default.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:($t=Dl)==null||$t.videoDisabledIndicator.disableVideo(!1),(dn=Dl)==null||dn.videoDisabledIndicator.setWarning(!1),An===at.default.SUSPENDED_VIDEO?qo.trigger("videoEnabled",{reason:"quality"}):qo.trigger("videoDisableWarningLifted");case 3:case"end":return Wn.stop()}},bn)}));return function(An){return Rn.apply(this,arguments)}}(),a1=()=>{if(qr.publishVideo){var Rn;(Rn=Dl)==null||Rn.videoDisabledIndicator.setWarning(!0)}this.trigger("videoDisableWarning")},c1=function(){var Rn=(0,it.default)(rt.default.mark(function bn(){var An;return rt.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:qr.publishVideo&&((An=Dl)==null||An.videoDisabledIndicator.disableVideo(!0)),qo.trigger("videoDisabled",{reason:"quality"});case 2:case"end":return dn.stop()}},bn)}));return function(){return Rn.apply(this,arguments)}}();let Cm;if(qr.publisherAudioFallbackEnabled){Cm=Or({getAllPeerConnections:wu});const Rn={[at.default.ACTIVE_VIDEO]:y1,[at.default.ACTIVE_VIDEO_WITH_WARNING]:a1,[at.default.SUSPENDED_VIDEO]:c1};Cm.on("stateChange",bn=>{let An=bn.previousState,$t=bn.state;try{Rn[$t](An)}catch(dn){throw $r.error(`Audio fallback error: ${dn}`),dn}})}this.publishVideo=Rn=>{if(qr.publishVideo===Rn)return this;Vo("publishVideo","Attempt",{publishVideo:Rn});const bn=um();qr.publishVideo=Rn,qr.publisherAudioFallbackEnabled&&(Mm(),Wo=!0);try{this._toggleVideo(qr.publishVideo,bn),Zm(),Vo("publishVideo","Success",{publishVideo:Rn})}catch(An){Vo("publishVideo","Failure",{message:An.message})}return this},this.setVideoContentHint=Rn=>kr(uo,Rn),this.getVideoContentHint=()=>jr(uo),this.destroy=function(Rn,bn){return vs.isAttemptingToPublish()&&this.session&&qu("Cancel",{reason:"destroy"}),vs.isDestroyed()?this:(vs.set("Destroyed"),rm(),yu&&(yu.off(),yu=null),Dl&&(Dl.destroy(),Dl=null),Gl&&(Gl.off(),Gl=null),bn!==!0&&this.dispatchEvent(new zr.DestroyedEvent(cn.PUBLISHER_DESTROYED,this,Rn)),this.off(),xn&&(xn.destroy(),xn.stopOriginalTrack()),Nn&&(Nn.destroy(),Nn.stopOriginalTrack()),this)},this.disconnect=()=>{Object.keys(_s).forEach(Rn=>{const bn=op(Rn);delete _s[Rn],bn.then(An=>this._removePeerConnection(An))}),Zs.length=0},this.processMessage=(Rn,bn,An)=>{const $t=lt(An,"params.subscriber",bn).replace(/^INVALID-STREAM$/,bn),dn=lt(An,"content.peerId"),vn=lt(An,"content.sourceStreamId","MANTIS"),Wn=`${$t}~${dn}~${vn}`;$r.debug(`OT.Publisher.processMessage: Received ${Rn} from ${bn} for ${Wn}`),$r.debug(An);const Dn=op(Wn),ir=()=>{const rr=Jr({socket:this.session._.getSocket(),uri:An.uri,content:{peerId:dn,sourceStreamId:vn}});Mp({peerConnectionId:Wn,send:rr,log:function(Ps,fu,bo,Ul,mm){Ul===void 0&&(Ul={});const xm=Object.assign({peerId:dn,sourceStreamId:xo(vn)},Ul);return Vo(Ps,fu,bo,xm,mm)},logQoS:Ur=>{vn===Xl&&Co(Object.assign({},Ur,{peerId:dn,remoteConnectionId:bn,sourceStreamId:vn}))},sourceStreamId:vn}).then(Ur=>(ep(Ur,{remoteConnectionId:bn,remoteSubscriberId:$t,peerId:dn,sourceStreamId:vn,peerConnectionId:Wn}),Ur.processMessage(Rn,An),null)).catch(Ur=>{$r.error("OT.Publisher failed to create a peerConnection",Ur)})},ar=this.session.sessionInfo.isAdaptiveEnabled;switch(Rn){case"unsubscribe":this._removeSubscriber($t);break;default:if(Dn)Dn.then(rr=>rr.processMessage(Rn,An));else{if(ar&&Bp())return;ir()}break}},this.getImgData=function(){if(!Uu)return $r.error("OT.Publisher.getImgData: Cannot getImgData before the Publisher is publishing."),null;const Rn=Yo&&Yo.video();return Rn?Rn.imgData():null};const b1=Rn=>{Hu(),uo=Rn,Gl.emit("streamChange"),xp=new Ru(uo,!qr.publishAudio)},S1=Rn=>{Rn.getSenders().forEach(bn=>{if(bn.track.kind==="audio"&&uo.getAudioTracks().length)return bn.replaceTrack(uo.getAudioTracks()[0]);if(bn.track.kind==="video"&&uo.getVideoTracks().length)return bn.replaceTrack(uo.getVideoTracks()[0])})},E1=function(bn){return bn===void 0&&(bn=S1),wu().then(An=>{const $t=[];return An.map(bn),tt.all($t)})};{let Rn=0;const bn=function(){var An=(0,it.default)(rt.default.mark(function $t(){var dn,vn,Wn,Dn,ir;return rt.default.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(!(_o.env.isLegacyEdge||!Qu.RTCRtpSender||typeof Qu.RTCRtpSender.prototype.replaceTrack!="function")){rr.next=2;break}throw jo(po.UNSUPPORTED_BROWSER,new Error("Publisher#cycleVideo is not supported in your browser."),Go.UNABLE_TO_PUBLISH);case 2:if(!(Qo||Ml)){rr.next=4;break}throw jo(po.NOT_SUPPORTED,new Error("Publisher#cycleVideo: The publisher is not using a camera video source"));case 4:if(dn=Vm(),dn){rr.next=7;break}throw jo(po.NOT_SUPPORTED,new Error("Publisher#cycleVideo cannot cycleVideo when you have no video source."));case 7:return Rn+=1,rr.next=10,Lm();case 10:if(vn=rr.sent,Wn=vn.filter(Po=>Po.deviceId!==Au).length>0,Wn){rr.next=14;break}return rr.abrupt("return",Au);case 14:for(;vn[Rn%vn.length].deviceId===Au;)Rn+=1;return Gl.emit("streamDestroy"),Dn=vn[Rn%vn.length],ir=Dn.deviceId,rr.next=20,d1(ir);case 20:return rr.abrupt("return",Au);case 21:case"end":return rr.stop()}},$t)}));return function(){return An.apply(this,arguments)}}();this.cycleVideo=pn((0,it.default)(rt.default.mark(function An(){var $t;return rt.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return vn.prev=0,vn.next=3,bn();case 3:$t=vn.sent,vn.next=10;break;case 6:throw vn.prev=6,vn.t0=vn.catch(0),$r.error(`Publisher#cycleVideo: could not cycle video: ${vn.t0}`),vn.t0;case 10:return vn.abrupt("return",{deviceId:$t});case 11:case"end":return vn.stop()}},An,null,[[0,6]])})))}const pm=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An,$t){var dn,vn,Wn;return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,wu();case 2:return dn=ir.sent,ir.next=5,tt.all(dn.map(function(){var ar=(0,it.default)(rt.default.mark(function rr(Po){return rt.default.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Ur.next=2,Po.findAndReplaceTrack(An,$t);case 2:Po.setP2PMaxBitrate();case 3:case"end":return Ur.stop()}},rr)}));return function(rr){return ar.apply(this,arguments)}}()));case 5:if(uo.removeTrack(An),uo.addTrack($t),An&&An.stop){try{vn=$t instanceof MediaStreamTrackGenerator||Object.getPrototypeOf($t).toString().includes("MediaStreamTrackGenerator")}catch{vn=!1}vn||An.stop()}(_o.env.name==="Firefox"||_o.env.name==="Safari")&&(qo.videoElement().srcObject=null,qo.videoElement().srcObject=uo),Wn=Yo&&Yo.video(),Wn&&Wn.refreshTracks(),Gl.emit("streamChange"),Zm();case 13:case"end":return ir.stop()}},bn)}));return function(An,$t){return Rn.apply(this,arguments)}}(),Tm=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t,dn,vn,Wn,Dn,ir,ar,rr;return rt.default.wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:return dn=l1(),Rm(An),vn=St(lu),vn.audioSource=null,vn.videoSource=An,yu=Js(vn,"OT.Publisher.getTrackFromDeviceId",()=>vs&&vs.isDestroyed()),yu.on({accessDialogOpened:Sp,accessDialogClosed:rp}),Wn=yu,Dn=Wn.getUserMedia,eo.prev=8,eo.next=11,Dn();case 11:ir=eo.sent,eo.next=18;break;case 14:throw eo.prev=14,eo.t0=eo.catch(8),$r.error(eo.t0),eo.t0;case 18:return ar=($t=ir)==null?void 0:$t.getVideoTracks(),rr=ar[0],rr||Rm(dn),eo.abrupt("return",rr);case 21:case"end":return eo.stop()}},bn,null,[[8,14]])}));return function(An){return Rn.apply(this,arguments)}}(),Vm=()=>uo.getVideoTracks()[0],l1=()=>uu,Rm=Rn=>{uu=Rn},Lm=function(){var Rn=(0,it.default)(rt.default.mark(function bn(){var An,$t;return rt.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return vn.next=2,ho.shouldAskForDevices();case 2:if(An=vn.sent,$t=An.videoDevices,!(!An.video||!$t||!$t.length)){vn.next=6;break}throw jo(po.NO_DEVICES_FOUND,new Error("No video devices available"),Go.UNABLE_TO_PUBLISH);case 6:return vn.abrupt("return",$t);case 7:case"end":return vn.stop()}},bn)}));return function(){return Rn.apply(this,arguments)}}(),Im=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An,$t){var dn,vn,Wn;return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,wu();case 2:return dn=ir.sent,ir.next=5,tt.all(dn.map(ar=>ar.findAndReplaceTrack(An,$t)));case 5:$t&&uo.addTrack($t),An&&uo.removeTrack(An),vn=Yo&&Yo.video(),vn&&vn.refreshTracks(),Dl&&($t&&!An&&Dl.addAudioTrack(),An&&!$t&&Dl.removeAudioTrack());try{Wn=$t instanceof MediaStreamTrackGenerator||Object.getPrototypeOf($t).toString().includes("MediaStreamTrackGenerator")}catch{Wn=!1}An&&An.stop&&!Wn&&An.stop(),$t&&(Em(),xp=new Ru(uo,!qr.publishAudio)),Gl.emit("streamChange"),Vs();case 15:case"end":return ir.stop()}},bn)}));return function(An,$t){return Rn.apply(this,arguments)}}(),Pm=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t,dn;return rt.default.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:return $t=An.getSettings().deviceId,Wn.prev=1,Wn.next=4,qo.setAudioSource($t);case 4:dn=uo.getAudioTracks()[0],dn&&(dn.onmute=()=>Fm(dn),dn.onunmute=()=>Xm(dn)),Wn.next=11;break;case 8:Wn.prev=8,Wn.t0=Wn.catch(1),$r.error(Wn.t0);case 11:case"end":return Wn.stop()}},bn,null,[[1,8]])}));return function(An){return Rn.apply(this,arguments)}}(),Fm=Rn=>{let bn=!1;qr.publishVideo&&document.hidden&&(bn=!0,this.publishVideo(!1));const An=function(){var $t=(0,it.default)(rt.default.mark(function dn(){return rt.default.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(document.hidden){Wn.next=5;break}return Wn.next=3,Pm(Rn);case 3:bn&&qo.publishVideo(!0),document.removeEventListener("visibilitychange",An);case 5:case"end":return Wn.stop()}},dn)}));return function(){return $t.apply(this,arguments)}}();document.addEventListener("visibilitychange",An)},Xm=Rn=>{var bn;Tp()&&(sm()?this.videoElement().pause():Pm(Rn)),this==null||(bn=this.session)==null||bn.trigger("gsmCallEnded")},Dm=!(_o.env.isLegacyEdge||!Qu.RTCRtpSender||typeof Qu.RTCRtpSender.prototype.replaceTrack!="function"),C1=()=>jo(po.UNSUPPORTED_BROWSER,new Error("Publisher#setAudioSource is not supported in your browser.")),jm=()=>jo(po.CANCEL,new Error("Operation did not succeed due to a new request."));let Um;const u1=()=>(Um&&Um.cancel(),Um=new Vt,Um),_m=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t,dn,vn,Wn,Dn,ir,ar,rr,Po,eo,Ur,Ps;return rt.default.wrap(function(bo){for(;;)switch(bo.prev=bo.next){case 0:if(Dm){bo.next=2;break}throw C1();case 2:if($t=u1(),dn=Ul=>{if($t.isCanceled())throw Ul.getTracks(mm=>mm.stop()),jm();return _m(Ul.getAudioTracks()[0])},vn=qo.getAudioSource(),vn){bo.next=7;break}throw jo(po.NOT_SUPPORTED,new Error("Publisher#setAudioSource cannot add an audio source when you started without one."));case 7:if(!(An instanceof MediaStreamTrack)){bo.next=26;break}if(!$t.isCanceled()){bo.next=10;break}throw jm();case 10:if(!Nn){bo.next=23;break}return bo.prev=11,bo.next=14,Nn.setTrack(An);case 14:return Wn=bo.sent,bo.next=17,Im(vn,Wn);case 17:return bo.abrupt("return",bo.sent);case 20:bo.prev=20,bo.t0=bo.catch(11),$r.error(`Error setting track on audioMediaProcessorConnector: ${bo.t0}`);case 23:return bo.abrupt("return",Im(vn,An));case 26:if(typeof An!="string"){bo.next=73;break}return Dn=St(lu),Dn.audioSource=An,Dn.videoSource=null,yu=Js(Dn,"OT.Publisher.setAudioSource",()=>$t.isCanceled()||vs&&vs.isDestroyed()),yu.on({accessDialogOpened:Sp,accessDialogClosed:rp}),ir=vn.label,ar=vn.getConstraints&&vn.getSettings().deviceId||void 0,vn&&vn.stop(),rr=yu,Po=rr.getUserMedia,bo.prev=36,bo.t1=dn,bo.next=40,Po();case 40:return bo.t2=bo.sent,bo.next=43,(0,bo.t1)(bo.t2);case 43:return bo.abrupt("return",bo.sent);case 46:if(bo.prev=46,bo.t3=bo.catch(36),!$t.isCanceled()){bo.next=50;break}throw jm();case 50:if(eo=St(lu),eo.videoSource=null,eo.audioSource=ar,!(!eo.audioSource&&ir)){bo.next=60;break}return bo.next=56,Jn();case 56:if(Ur=bo.sent.find(Ul=>Ul.label===ir),!$t.isCanceled()){bo.next=59;break}throw jm();case 59:Ur&&(eo.audioSource=Ur.deviceId);case 60:if(eo.audioSource){bo.next=63;break}throw bo.t3.message+=" (could not determine previous audio device)",jo(po.NOT_FOUND,bo.t3);case 63:return yu=Js(eo,"OT.Publisher.setAudioSource",()=>$t.isCanceled()||vs&&vs.isDestroyed()),bo.next=66,yu.getUserMedia().catch(Ul=>{throw Ul.message+=" (could not obtain previous audio device)",Ul});case 66:return Ps=bo.sent,bo.next=69,dn(Ps);case 69:throw bo.t3.message+=" (reverted to previous audio device)",bo.t3;case 71:bo.next=74;break;case 73:throw jo(po.INVALID_PARAMETER,new Error("Invalid parameter passed to OT.Publisher.setAudioSource(). Expected string or MediaStreamTrack."));case 74:case"end":return bo.stop()}},bn,null,[[11,20],[36,46]])}));return function(An){return Rn.apply(this,arguments)}}();this.setAudioSource=_m,this.getAudioSource=()=>uo&&uo.getAudioTracks().length>0?uo.getAudioTracks()[0]:null;const qm=function(){var Rn=(0,it.default)(rt.default.mark(function An($t){var dn,vn,Wn,Dn,ir;return rt.default.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(dn=jo(po.INVALID_VIDEO_SOURCE,new Error("Invalid video source. Video source must be a valid video input deviceId"),1041),vn=jo(po.SET_VIDEO_SOURCE_FAILURE,new Error("You cannot reset the video source on a publisher that does not currently use a camera source."),1040),!(_o.env.isLegacyEdge||!Qu.RTCRtpSender||typeof Qu.RTCRtpSender.prototype.replaceTrack!="function")){rr.next=4;break}throw jo(po.UNSUPPORTED_BROWSER,new Error("setVideoSource is not supported in your browser."),Go.UNABLE_TO_PUBLISH);case 4:if(typeof $t=="string"){rr.next=6;break}throw dn;case 6:if(Wn=!uo||uo.getVideoTracks().length===0,!(Qo||Ml||Wn)){rr.next=9;break}throw vn;case 9:return rr.next=11,Jn();case 11:if(Dn=rr.sent,ir=Dn.find(Po=>Po.kind==="videoInput"&&Po.deviceId===$t),ir){rr.next=15;break}throw dn;case 15:return rr.next=17,d1($t);case 17:case"end":return rr.stop()}},An)}));function bn(An){return Rn.apply(this,arguments)}return bn}();this.setVideoSource=qm;const d1=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t,dn,vn,Wn,Dn,ir;return rt.default.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(dn=Au,Au=An,qr.publishVideo){rr.next=4;break}return rr.abrupt("return");case 4:if(vn=Vm(),!(qr.publishVideo&&_o.env.isAndroid&&(_o.env.isChrome||_o.env.isFirefox))){rr.next=12;break}if(!Pu){rr.next=11;break}return Wn=Pu,rr.next=10,Gm();case 10:Pu=null;case 11:vn&&vn.stop&&vn.stop();case 12:if(!Wm(An)){rr.next=14;break}return rr.abrupt("return");case 14:return rr.prev=14,rr.next=17,Tm(An);case 17:Dn=rr.sent,rr.next=25;break;case 20:throw rr.prev=20,rr.t0=rr.catch(14),Au=dn,$r.error(rr.t0),rr.t0;case 25:if(Dn){rr.next=28;break}return $r.warn("Unable to aquire video track. Moving to next device."),rr.abrupt("return");case 28:if(!Pu){rr.next=33;break}return ir=$s.getOriginalVideoTrack(),rr.next=32,$s.setVideoTrack(Dn);case 32:Dn=rr.sent;case 33:if(!xn){rr.next=38;break}return ir=xn.originalTrack,rr.next=37,xn.setTrack(Dn);case 37:Dn=rr.sent;case 38:return rr.next=40,pm(vn,Dn);case 40:if(!Wn){rr.next=43;break}return rr.next=43,qo.applyVideoFilter(Wn);case 43:($t=ir)==null||$t.stop(),qr.publishVideo&&(im=!1);case 45:case"end":return rr.stop()}},bn,null,[[14,20]])}));return function(An){return Rn.apply(this,arguments)}}();this.getVideoSource=()=>{const Rn={},bn=!uo||uo.getVideoTracks().length===0;return Rn.track=uo&&qr.publishVideo&&uo.getVideoTracks()[0]||null,Rn.deviceId=!Ml&&!Qo&&Au?Au:null,Qo?Rn.type="custom":Ml?Rn.type="screen":bn?Rn.type=null:Rn.type="camera",Rn},this._={privateEvents:Gl,setIceConfig(Rn){return(0,it.default)(rt.default.mark(function bn(){var An;return rt.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return dn.next=2,wu();case 2:An=dn.sent,An.forEach(vn=>vn.setIceConfig(Rn));case 4:case"end":return dn.stop()}},bn)}))()},publishToSession:(Rn,bn)=>{bn&&(na=bn),ns=Rn,this.session=Rn;const An=It();_l=An,this.streamId=An,qu("Attempt",{dataChannels:qr.channels,properties:un(qr)});const $t=new tt((Dn,ir)=>{if(Uu){Dn();return}this.once("initSuccess",Dn),this.once("destroyed",ar=>{let rr=ar.reason,Po="";rr&&(Po=` Reason: ${rr}`),ir(new Error(`Publisher destroyed before it finished loading.${Po}`))})});$r.debug("publishToSession: waiting for publishComplete, which is triggered by stream#created from rumor");const dn=new tt((Dn,ir)=>{this.once("publishComplete",ar=>{if(ar){ir(ar);return}this._setScalableFramerates(qr.scalableFramerates),this._setScalableVideoLayers(qr.scalableVideoLayers),this.stream&&(this.stream.setChannelActiveState("audio",Tp()),this.stream.setChannelActiveState("video",sm())),$r.debug("publishToSession: got publishComplete"),Dn()})}),vn=Dn=>{const ir=vr(Dn);throw qu("Failure",{},{failureReason:"Publish",failureCode:ir.code,failureMessage:ir.message}),vs.isAttemptingToPublish()&&this.trigger("publishComplete",ir),yo.handleJsException({errorMsg:Dn.message,code:ir.code,target:this,error:Dn,analytics:na}),ir};$r.debug("publishToSession: waiting for loaded");const Wn=$t.then(()=>Rn._.getVideoCodecsCompatible(uo)).then(Dn=>{if($r.debug("publishToSession: loaded"),!this.session)return;const ir=setTimeout(()=>{nr(Rn)},Ql);this.once("publishComplete",()=>{clearTimeout(ir)}),vs.set("PublishingToSession");const ar=Dn&&Yo&&Yo.video(),rr=uo.getVideoTracks().length>0,Po=qr.videoSource!==null&&qr.videoSource!==!1;ar&&rr&&Po&&Zs.push(new Iu({id:"video1",type:"video",active:qr.publishVideo,orientation:jp.ROTATED_NORMAL,frameRate:qr.frameRate,width:this.videoWidth(),height:this.videoHeight(),e2ee:Rn._.isE2ee(),source:(()=>Ml?"screen":Qo?"custom":"camera")(),fitMode:qr.fitMode}));const eo=uo.getAudioTracks().length>0,Ur=qr.audioSource!==null&&qr.audioSource!==!1;return Ur&&eo&&Zs.push(new Iu({id:"audio1",type:"audio",active:qr.publishAudio})),Ur&&eo&&Zs.push(new Iu({id:"caption1",type:"data",active:qr.publishCaptions})),this._.streamChannels=Zs,$r.debug("publishToSession: creating rumor stream id"),new tt((Ps,fu)=>{Mu(null,(bo,Ul,mm)=>{if(bo){fu(vn(bo));return}Ps({streamId:Ul,message:mm})})})}).then(Dn=>{if(Dn===void 0)return;const ir=Dn.streamId,ar=Dn.message;if($r.debug("publishToSession: rumor stream id created:",ir,"(this is different from stream#created, which requires media to actually be flowing for mantis sessions)"),ir!==An)throw new Error("streamId response does not match request");this.streamId=ir,wp=js(ar)}).catch(Dn=>{throw this.trigger("publishComplete",Dn),Dn});return tt.all([Wn,dn])},unpublishFromSession:(Rn,bn)=>{if(!this.session||Rn.id!==this.session.id){if(bn==="unpublished"){const An=this.session&&this.session.id||"no session";$r.warn(`The publisher ${qp} is trying to unpublish from a session ${Rn.id} it is not attached to (it is attached to ${An})`)}return this}if(Rn.isConnected()&&(this.stream||vs.isAttemptingToPublish())&&Rn._.streamDestroy(this.streamId),_u.releaseAll(),this.disconnect(),vs.isAttemptingToPublish()){qu("Cancel",{reason:"unpublish"});const An=()=>{switch(bn){case"mediaStopped":return"The video element fired the ended event, indicating there is an issue with the media";case"unpublished":return"The publisher was unpublished before it could be published";case"reset":return"The publisher was reset";default:return`The publisher was destroyed due to ${bn}`}},$t=new Error(An());this.trigger("publishComplete",jo(bn==="mediaStopped"?po.MEDIA_ENDED:po.CANCEL,$t))}return this.session=null,Vo("unpublish","Success"),this._.streamDestroyed(bn),this},unpublishStreamFromSession:(Rn,bn,An)=>!_l||Rn.id!==_l?($r.warn(`The publisher ${qp} is trying to destroy a stream ${Rn.id} that is not attached to it (it has ${_l||"no stream"} attached to it)`),this):this._.unpublishFromSession(bn,An),streamDestroyed:Rn=>{["reset"].indexOf(Rn)<0&&(vs.isDestroyed()||vs.set("MediaBound"));const bn=new zr.StreamEvent("streamDestroyed",this.stream,Rn,!0);this.dispatchEventOnce(bn,this.streamId),bn.isDefaultPrevented()||this.destroy()},archivingStatus(Rn){return Dl&&Dl.setArchivingStatus(Rn),Rn},webRtcStream(){return uo},switchTracks(){return(0,it.default)(rt.default.mark(function Rn(){var bn;return rt.default.wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:return $t.prev=0,$t.next=3,$p().catch(eu);case 3:bn=$t.sent,$t.next=10;break;case 6:throw $t.prev=6,$t.t0=$t.catch(0),$r.error(`OT.Publisher.switchTracks failed to getUserMedia: ${$t.t0}`),$t.t0;case 10:b1(bn),$t.prev=11,Zn(),$t.next=21;break;case 15:if($t.prev=15,$t.t1=$t.catch(11),!($t.t1 instanceof kt)){$t.next=19;break}return $t.abrupt("return");case 19:throw $r.error("Error while binding video",$t.t1),$t.t1;case 21:$t.prev=21,E1(),$t.next=29;break;case 25:throw $t.prev=25,$t.t2=$t.catch(21),$r.error("Error replacing tracks",$t.t2),$t.t2;case 29:case"end":return $t.stop()}},Rn,null,[[0,6],[11,15],[21,25]])}))()},getDataChannel(Rn,bn,An){const $t=op(Object.keys(_s)[0]);if(!$t){An(new _o.Error("Cannot create a DataChannel before there is a subscriber."));return}$t.then(dn=>{dn.getDataChannel(Rn,bn,An)})},iceRestart(Rn){Rn===void 0&&(Rn=!1),wu().then(bn=>{bn.forEach(An=>{const $t=$a(An),dn=$t.remoteConnectionId;em("Attempt",{remoteConnectionId:dn}),$r.debug("Publisher: ice restart attempt"),An.iceRestart(),Rn&&An.generateOffer()})})},getState(){return vs},demoOnlyCycleVideo:this.cycleVideo,testOnlyGetFramesEncoded(){return(0,it.default)(rt.default.mark(function Rn(){var bn;return rt.default.wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:return $t.next=2,wu();case 2:if(bn=$t.sent,bn.length){$t.next=5;break}throw new Error("No established PeerConnections yet");case 5:return $t.abrupt("return",bn[0]._testOnlyGetFramesEncoded());case 6:case"end":return $t.stop()}},Rn)}))()},onStreamAvailable:er,startRoutedToRelayedTransition:()=>{ju.startTransitionTo("P2P"),Om()},startRelayedToRoutedTransition:()=>{ju.startTransitionTo("MANTIS",()=>v1())},forceMuteAudio:function(){Vo("publishAudio","Attempt",{publishAudio:!1}),qr.publishAudio=!1;try{Em("auto"),this.dispatchEvent(new zr.MuteForcedEvent),Vo("publishAudio","Success",{publishAudio:!1})}catch(Rn){Vo("publishAudio","Failure",{message:Rn.message})}}.bind(this),setCongestionLevel:function(){var Rn=(0,it.default)(rt.default.mark(function An($t,dn){var vn;return rt.default.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:if(!Cm){Dn.next=15;break}if(!dn){Dn.next=8;break}return Dn.next=4,op(dn);case 4:Dn.t1=Dn.sent,Dn.t0=[Dn.t1],Dn.next=11;break;case 8:return Dn.next=10,wu();case 10:Dn.t0=Dn.sent;case 11:vn=Dn.t0,vn.forEach(ir=>{ir.setCongestionLevel($t)}),Dn.next=16;break;case 15:$r.warn("Audio Fallback is not enabled");case 16:case"end":return Dn.stop()}},An)}));function bn(An,$t){return Rn.apply(this,arguments)}return bn}()},this.detectDevices=function(){$r.warn("Publisher.detectDevices() is not implemented.")},this.detectMicActivity=function(){$r.warn("Publisher.detectMicActivity() is not implemented.")},this.getEchoCancellationMode=function(){return $r.warn("Publisher.getEchoCancellationMode() is not implemented."),"fullDuplex"},this.setMicrophoneGain=function(){$r.warn("Publisher.setMicrophoneGain() is not implemented.")},this.getMicrophoneGain=function(){return $r.warn("Publisher.getMicrophoneGain() is not implemented."),.5},this.setCamera=function(){$r.warn("Publisher.setCamera() is not implemented.")},this.setMicrophone=function(){$r.warn("Publisher.setMicrophone() is not implemented.")},this.guid=function(){return qp},this.videoElement=function(){const Rn=Yo&&Yo.video();return Rn?Rn.domElement():null},this.setStream=bu,this.isWebRTC=!0,this.isLoading=function(){return Yo&&Yo.loading()},this.videoWidth=()=>um().width,this.videoHeight=()=>um().height,this.getStats=function(bn){bm((An,$t)=>{An?bn(An):bn(null,$t)})},this.getRtcStatsReport=()=>new tt((Rn,bn)=>{Qm((An,$t)=>{An?bn(An):Rn($t)})}),vs=new xa(ym),this.accessAllowed=!1,this.applyVideoFilter=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t,dn,vn,Wn,Dn,ir;return rt.default.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if($t=Xr(An),Vo("applyVideoFilter","Attempt",{videoFilter:$t}),rr.prev=2,!xn){rr.next=5;break}throw jo(po.NOT_SUPPORTED,new Error("Cannot apply video filter when videoMediaProcessorConnector is set."));case 5:if(dn=au.isSupported(),dn){rr.next=8;break}throw jo(po.NOT_SUPPORTED,new Error("Browser does not support video filters (Insertable Streams and Worker APIs are required)"));case 8:if($s.isValidVideoFilter(An)){rr.next=10;break}throw jo(po.INVALID_PARAMETER,new Error("Video filter has invalid configuration"));case 10:if(uo){rr.next=15;break}return vn="Ignoring. No mediaStream",Vo("applyVideoFilter","Failure",{message:vn}),$r.warn(vn),rr.abrupt("return");case 15:if(!Ml){rr.next=17;break}throw jo(po.INVALID_PARAMETER,new Error("Video filters can not be applied to screen share"));case 17:if(Gp(),qr.publishVideo){rr.next=22;break}return Pu=An,Vo("applyVideoFilter","Success",{videoFilter:$t}),rr.abrupt("return");case 22:if(!$s.getVideoFilter()){rr.next=37;break}if(!$s.canUpdateVideoFilter(An.type)){rr.next=35;break}return rr.prev=24,rr.next=27,$s.updateVideoFilter(An);case 27:return Pu=An,Vo("applyVideoFilter","Success",{videoFilter:$t}),rr.abrupt("return");case 32:rr.prev=32,rr.t0=rr.catch(24),$r.warn(`Error updating video filter: ${rr.t0}`);case 35:return rr.next=37,qo.clearVideoFilter();case 37:if(Wn=uo.getVideoTracks(),Dn=Wn[0],Dn){rr.next=43;break}return vn="Ignoring. No video",Vo("applyVideoFilter","Failure",{message:vn}),$r.warn(vn),rr.abrupt("return");case 43:return rr.next=45,$s.setVideoFilter(An);case 45:return rr.next=47,$s.setMediaStream(uo);case 47:if(ir=rr.sent,!ir){rr.next=51;break}return rr.next=51,pm(Dn,ir);case 51:rr.next=58;break;case 53:throw rr.prev=53,rr.t1=rr.catch(2),$r.error(`Error applying video filter: ${rr.t1}`),Vo("applyVideoFilter","Failure",{message:rr.t1.message}),rr.t1;case 58:Pu=An,Vo("applyVideoFilter","Success",{videoFilter:$t});case 60:case"end":return rr.stop()}},bn,null,[[2,53],[24,32]])}));return function(bn){return Rn.apply(this,arguments)}}(),this.getVideoFilter=()=>(Vo("getVideoFilter","Attempt"),Vo("getVideoFilter","Success"),Pu||null),this.setVideoMediaProcessorConnector=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t,dn,vn,Wn,Dn,ir;return rt.default.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(Vo("setVideoMediaProcessorConnector","Attempt",{message:An?"setting the connector":"clearing the connector"}),!qo.getVideoFilter()){rr.next=4;break}throw Vo("setVideoMediaProcessorConnector","Failure",{message:"Tried to set video MediaProcessorConnector when video filter applied."}),jo(po.NOT_SUPPORTED,new Error("setVideoMediaProcessorConnector: Cannot use this method when videoFilter is set."));case 4:if(!xn){rr.next=14;break}return $t=uo.getVideoTracks(),dn=$t[0],rr.next=8,Tm(Au);case 8:return vn=rr.sent,rr.next=11,pm(dn,vn);case 11:xn.destroy(),xn.stopOriginalTrack(),xn=null;case 14:if(An){rr.next=17;break}return Vo("setVideoMediaProcessorConnector","Success",{message:"clearing the connector"}),rr.abrupt("return");case 17:if(Ws.isValidConnector(An)){rr.next=20;break}throw Vo("setVideoMediaProcessorConnector","Failure",{message:"Invalid MediaProcessorConnector"}),jo(po.INVALID_PARAMETER,new Error("setVideoMediaProcessorConnector:  Tried to set invalid MediaProcessorConnector"));case 20:if(xn=new Ws(An),Wn=uo.getVideoTracks(),Dn=Wn[0],Dn){rr.next=28;break}return ir="Connector not set as no video track is present.",Vo("setVideoMediaProcessorConnector","Failure",{message:ir}),$r.warn(`setVideoMediaProcessorConnector: ${ir}`),xn=null,rr.abrupt("return");case 28:return rr.prev=28,rr.next=31,xn.setTrack(Dn);case 31:return dn=rr.sent,rr.next=34,pm(Dn,dn);case 34:rr.next=42;break;case 36:throw rr.prev=36,rr.t0=rr.catch(28),xn=null,$r.error(`setVideoMediaProcessorConnector: Error getting track from MediaProcessorConnector: ${rr.t0}`),Vo("setVideoMediaProcessorConnector","Failure",{message:rr.t0.message}),rr.t0;case 42:Vo("setVideoMediaProcessorConnector","Success");case 43:case"end":return rr.stop()}},bn,null,[[28,36]])}));return function(bn){return Rn.apply(this,arguments)}}(),this.setAudioMediaProcessorConnector=function(){var Rn=(0,it.default)(rt.default.mark(function bn(An){var $t,dn,vn,Wn,Dn;return rt.default.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:if(Vo("setAudioMediaProcessorConnector","Attempt",{message:An?"setting the connector":"clearing the connector"}),!Nn){ar.next=7;break}return $t=uo.getAudioTracks(),dn=$t[0],ar.next=5,Im(dn,Nn.originalTrack);case 5:Nn.destroy(),Nn=null;case 7:if(An){ar.next=10;break}return Vo("setAudioMediaProcessorConnector","Success",{message:"clearing the connector"}),ar.abrupt("return");case 10:if(Ws.isValidConnector(An)){ar.next=13;break}throw Vo("setAudioMediaProcessorConnector","Failure",{message:"Invalid MediaProcessorConnector"}),jo(po.INVALID_PARAMETER,new Error("setAudioMediaProcessorConnector:  Tried to set invalid MediaProcessorConnector"));case 13:if(vn=uo.getAudioTracks(),Wn=vn[0],Wn){ar.next=20;break}return Dn="Connector not set as no audio track is present.",Vo("setAudioMediaProcessorConnector","Failure",{message:Dn}),$r.warn(`setAudioMediaProcessorConnector: ${Dn}`),Nn=null,ar.abrupt("return");case 20:return Nn=new Ws(An),ar.prev=21,ar.next=24,Nn.setTrack(Wn);case 24:return dn=ar.sent,ar.next=27,Im(qo.getAudioSource(),dn);case 27:ar.next=35;break;case 29:throw ar.prev=29,ar.t0=ar.catch(21),Nn=null,$r.error(`setAudioMediaProcessorConnector: Error getting track from MediaProcessorConnector: ${ar.t0}`),Vo("setAudioMediaProcessorConnector","Failure",{message:ar.t0.message}),ar.t0;case 35:Vo("setAudioMediaProcessorConnector","Success");case 36:case"end":return ar.stop()}},bn,null,[[21,29]])}));return function(bn){return Rn.apply(this,arguments)}}(),this.clearVideoFilter=(0,it.default)(rt.default.mark(function Rn(){var bn,An,$t,dn,vn;return rt.default.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:if(Vo("clearVideoFilter","Attempt"),!(!qr.publishVideo&&!$s.getVideoFilter())){Dn.next=5;break}return Pu=null,Vo("clearVideoFilter","Success"),Dn.abrupt("return");case 5:if(!(!$s.getVideoFilter()&&!Pu)){Dn.next=10;break}return bn="Ignoring. No video filter applied",Vo("clearVideoFilter","Success",{message:bn}),$r.debug(bn),Dn.abrupt("return");case 10:if(au.isSupported()){Dn.next=15;break}return bn='Ignoring. "clearVideoFilter" not supported.',Vo("clearVideoFilter","Success",{message:bn}),$r.warn(bn),Dn.abrupt("return");case 15:if(uo){Dn.next=20;break}return bn="Ignoring. No mediaStream",Vo("clearVideoFilter","Success",{message:bn}),$r.warn(bn),Dn.abrupt("return");case 20:return An=Pu,Pu=null,$t=uo.getVideoTracks(),dn=$t[0],Dn.prev=23,Dn.next=26,Tm(Au);case 26:vn=Dn.sent,Dn.next=33;break;case 29:return Dn.prev=29,Dn.t0=Dn.catch(23),$r.error(Dn.t0),Dn.abrupt("return");case 33:if(vn){Dn.next=36;break}return $r.warn("Failed to clear filter because there is no video track."),Dn.abrupt("return");case 36:return Dn.prev=36,Dn.next=39,pm(dn,vn);case 39:return Dn.next=41,Gm();case 41:Dn.next=46;break;case 43:Dn.prev=43,Dn.t1=Dn.catch(36),Pu=An;case 46:Vo("clearVideoFilter","Success");case 47:case"end":return Dn.stop()}},Rn,null,[[23,29],[36,43]])}))}}}).call(this,b(0))},function(_e,et,b){const tt=b(51).once;_e.exports=function(rt,it){it===void 0&&(it={});const ot=it.hasE2eeCapability||b(110),st=it.hasOpenTokSupport||tt;this.publish=rt.indexOf("publish")!==-1?1:0,this.subscribe=rt.indexOf("subscribe")!==-1?1:0,this.forceUnpublish=rt.indexOf("forceunpublish")!==-1?1:0,this.forceDisconnect=rt.indexOf("forcedisconnect")!==-1?1:0,this.forceMute=rt.indexOf("forcemute")!==-1?1:0,this.supportsE2ee=ot()?1:0,this.supportsWebRTC=st()?1:0,this.permittedTo=at=>Object.prototype.hasOwnProperty.call(this,at)&&this[at]===1}},function(_e,et,b){const tt=b(1)("Stream"),nt=b(8),rt=b(21),it=b(6),ot=b(23)(),st=["name","archiving"];_e.exports=function(ct,ut,lt,dt,ft,St,Tt){const pt=this;let gt;this.id=ct,this.streamId=ct,this.name=ut,this.creationTime=Number(lt),this.initials=Tt||"",this.connection=dt,this.channel=St,this.publisher=rt.publishers.find({streamId:this.id}),it(this);const yt=function(Vt,Nt,tn,_t){let Kt=Nt;switch(Kt){case"active":Kt=Vt.type==="audio"?"hasAudio":"hasVideo",pt[Kt]=_t;break;case"disableWarning":if(Kt=Vt.type==="audio"?"audioDisableWarning":"videoDisableWarning",pt[Kt]=_t,!pt[Vt.type==="audio"?"hasAudio":"hasVideo"])return;break;case"fitMode":Kt="defaultFitMode",pt[Kt]=_t;break;case"source":Kt=Vt.type==="audio"?"audioType":"videoType",pt[Kt]=_t;break;case"videoDimensions":pt.videoDimensions=_t;break;case"orientation":case"width":case"height":return}pt.dispatchEvent(new ot.StreamUpdatedEvent(pt,Kt,tn,_t))},Et=function(){return pt.publisher?pt.publisher:rt.subscribers.find(Vt=>Vt.stream&&Vt.stream.id===pt.id&&Vt.session.id===ft.id)},It=function(){return!pt.publisher};this.getChannelsOfType=function(Vt){return pt.channel.filter(Nt=>Nt.type===Vt)},this.getChannel=function(Vt){for(let Nt=0;Nt<pt.channel.length;++Nt)if(pt.channel[Nt].id===Vt)return pt.channel[Nt];return null};const Gt=this.getChannelsOfType("audio")[0],Wt=this.getChannelsOfType("video")[0];this.hasAudio=Gt!=null&&Gt.active,this.hasVideo=Wt!=null&&Wt.active,this.videoType=Wt&&Wt.source,this.defaultFitMode=Wt&&Wt.fitMode,this.videoDimensions={},Wt&&(this.videoDimensions.width=Wt.width,this.videoDimensions.height=Wt.height,this.videoDimensions.orientation=Wt.orientation,Wt.on("update",yt),this.frameRate=Wt.frameRate),Gt&&Gt.on("update",yt),this.setChannelActiveState=function(Vt,Nt,tn,_t,Kt){const cn={active:Nt};tn&&(cn.activeReason=tn),_t!==void 0&&(cn.congestionLevel=_t),Kt&&(cn.subscriberId=Kt),At(Vt,cn)},this.setVideoDimensions=function(Vt,Nt){At("video",{width:Vt,height:Nt,orientation:0})},this.setRestrictFrameRate=function(Vt){At("video",{restrictFrameRate:Vt})},this.setPreferredResolution=function(Vt){if(!It()){tt.warn("setPreferredResolution has no affect when called by a publisher");return}if(ft.sessionInfo.p2pEnabled){tt.warn("Stream.setPreferredResolution will not work in a P2P Session");return}if(Vt&&Vt.width===void 0&&Vt.height===void 0)return;const Nt=pt.getChannelsOfType("video")[0];if(Nt){if(Vt&&Vt.width){if(isNaN(parseInt(Vt.width,10)))throw new nt.Error("stream preferred width must be an integer","Subscriber");Nt.preferredWidth=parseInt(Vt.width,10)}else Nt.preferredWidth=void 0;if(Vt&&Vt.height){if(isNaN(parseInt(Vt.height,10)))throw new nt.Error("stream preferred height must be an integer","Subscriber");Nt.preferredHeight=parseInt(Vt.height,10)}else Nt.preferredHeight=void 0;ft._.subscriberChannelUpdate(pt,Et(),Nt,{preferredWidth:Nt.preferredWidth||0,preferredHeight:Nt.preferredHeight||0})}},this.getPreferredResolution=function(){const Vt=pt.getChannelsOfType("video")[0];if(!(!Vt||!Vt.preferredWidth&&!Vt.preferredHeight))return{width:Vt.preferredWidth,height:Vt.preferredHeight}},this.setPreferredFrameRate=function(Vt){if(!It()){tt.warn("setPreferredFrameRate has no affect when called by a publisher");return}if(ft.sessionInfo.p2pEnabled){tt.warn("Stream.setPreferredFrameRate will not work in a P2P Session");return}if(Vt&&isNaN(parseFloat(Vt)))throw new nt.Error("stream preferred frameRate must be a number","Subscriber");const Nt=pt.getChannelsOfType("video")[0];Nt&&(Nt.preferredFrameRate=Vt?parseFloat(Vt):null,ft._.subscriberChannelUpdate(pt,Et(),Nt,{preferredFrameRate:Nt.preferredFrameRate||0}))},this.getPreferredFrameRate=function(){const Vt=pt.getChannelsOfType("video")[0];return Vt?Vt.preferredFrameRate:null};let At=function(Vt,Nt){let tn;if(pt.publisher)tn=_t=>ft._.streamChannelUpdate(pt,_t,Nt);else{const _t=Et();tn=Kt=>ft._.subscriberChannelUpdate(pt,_t,Kt,Nt)}pt.getChannelsOfType(Vt).forEach(tn)};this.destroyed=!1,this.destroyedReason=void 0,this.destroy=function(Vt,Nt){Vt===void 0&&(Vt="clientDisconnected"),gt=Vt,pt.destroyed=!0,pt.destroyedReason=gt,Nt!==!0&&pt.dispatchEvent(new ot.DestroyedEvent("destroyed",pt,gt))},this._={},this._.updateProperty=function(Vt,Nt){if(st.indexOf(Vt)===-1){tt.warn(`Unknown stream property "${Vt}" was modified to "${Nt}".`);return}const tn=pt[Vt],_t=Nt;switch(Vt){case"name":pt[Vt]=_t;break;case"archiving":var Kt=Et();pt.publisher&&Kt&&Kt._.archivingStatus(_t),pt[Vt]=_t;break}const cn=new ot.StreamUpdatedEvent(pt,Vt,tn,_t);pt.dispatchEvent(cn)},this._.update=function(Vt){for(const Nt in Vt)Vt.hasOwnProperty(Nt)&&pt._.updateProperty(Nt,Vt[Nt])},this._.forceMute=function(Vt){Vt.hasOwnProperty("channels")&&Vt.channels.includes("audio")&&pt.publisher&&pt.publisher._.forceMuteAudio()},this._.updateChannel=function(Vt,Nt){const tn=pt.getChannel(Vt);tn&&tn.update(Nt)}}},function(_e,et,b){et.__esModule=!0,et.UNSUBSCRIBE=et.SUBSCRIBE=et.STATUS=et.PONG=et.PING=et.MESSAGE=et.DISCONNECT=et.CONNECT=void 0;const tt=0;et.SUBSCRIBE=tt;const nt=1;et.UNSUBSCRIBE=nt;const rt=2;et.MESSAGE=rt;const it=3;et.CONNECT=it;const ot=4;et.DISCONNECT=ot;const st=7;et.PING=st;const at=8;et.PONG=at;const ct=9;et.STATUS=ct},function(_e,et,b){const tt=b(9),nt=b(169),rt=b(6),it=b(23)(),ot=b(755);function st(at,ct,ut,lt,dt){let ft;this.id=at,this.connectionId=at,this.creationTime=ct?Number(ct):null,this.data=ut,this.capabilities=ot(lt),this.permissions=new nt(dt),this.quality=null,rt(this),this.destroy=(St,Tt)=>{ft=St||"clientDisconnected",Tt!==!0&&this.dispatchEvent(new it.DestroyedEvent("destroyed",this,ft))},this.destroyed=()=>ft!==void 0,this.destroyedReason=()=>ft}st.fromHash=at=>{let ct=at.id,ut=at.creationTime,lt=at.data,dt=at.capablities,ft=at.permissions;return new st(ct,ut,lt,tt(dt||{},{supportsWebRTC:!0}),ft||[])},_e.exports=st},function(_e,et){var b=typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)&&(typeof window!==void 0?window:commonjsGlobal).Object===Object&&(typeof window!==void 0?window:commonjsGlobal);_e.exports=b},function(_e,et){var b=Function.prototype,tt=b.toString;function nt(rt){if(rt!=null){try{return tt.call(rt)}catch{}try{return rt+""}catch{}}return""}_e.exports=nt},function(_e,et,b){var tt=b(38),nt=function(){try{var rt=tt(Object,"defineProperty");return rt({},"",{}),rt}catch{}}();_e.exports=nt},function(_e,et,b){var tt=b(40),nt=b(30);function rt(it,ot){return it&&tt(ot,nt(ot),it)}_e.exports=rt},function(_e,et,b){var tt=b(381),nt=b(63),rt=b(12),it=b(64),ot=b(65),st=b(85),at=Object.prototype,ct=at.hasOwnProperty;function ut(lt,dt){var ft=rt(lt),St=!ft&&nt(lt),Tt=!ft&&!St&&it(lt),pt=!ft&&!St&&!Tt&&st(lt),gt=ft||St||Tt||pt,yt=gt?tt(lt.length,String):[],Et=yt.length;for(var It in lt)(dt||ct.call(lt,It))&&!(gt&&(It=="length"||Tt&&(It=="offset"||It=="parent")||pt&&(It=="buffer"||It=="byteLength"||It=="byteOffset")||ot(It,Et)))&&yt.push(It);return yt}_e.exports=ut},function(_e,et){function b(tt,nt){return function(rt){return tt(nt(rt))}}_e.exports=b},function(_e,et,b){(function(tt){var nt=b(14),rt=et&&!et.nodeType&&et,it=rt&&typeof tt=="object"&&tt&&!tt.nodeType&&tt,ot=it&&it.exports===rt,st=ot?nt.Buffer:void 0,at=st?st.allocUnsafe:void 0;function ct(ut,lt){if(lt)return ut.slice();var dt=ut.length,ft=at?at(dt):new ut.constructor(dt);return ut.copy(ft),ft}tt.exports=ct}).call(this,b(84)(_e))},function(_e,et){function b(){return[]}_e.exports=b},function(_e,et,b){var tt=b(118),nt=b(119),rt=b(117),it=b(180),ot=Object.getOwnPropertySymbols,st=ot?function(at){for(var ct=[];at;)tt(ct,rt(at)),at=nt(at);return ct}:it;_e.exports=st},function(_e,et,b){var tt=b(183),nt=b(117),rt=b(30);function it(ot){return tt(ot,rt,nt)}_e.exports=it},function(_e,et,b){var tt=b(118),nt=b(12);function rt(it,ot,st){var at=ot(it);return nt(it)?at:tt(at,st(it))}_e.exports=rt},function(_e,et,b){var tt=b(183),nt=b(181),rt=b(53);function it(ot){return tt(ot,rt,nt)}_e.exports=it},function(_e,et,b){var tt=b(38),nt=b(14),rt=tt(nt,"Set");_e.exports=rt},function(_e,et,b){var tt=b(38),nt=b(14),rt=tt(nt,"WeakMap");_e.exports=rt},function(_e,et,b){var tt=b(14),nt=tt.Uint8Array;_e.exports=nt},function(_e,et,b){var tt=b(120);function nt(rt,it){var ot=it?tt(rt.buffer):rt.buffer;return new rt.constructor(ot,rt.byteOffset,rt.length)}_e.exports=nt},function(_e,et,b){var tt=b(86),nt=b(119),rt=b(67);function it(ot){return typeof ot.constructor=="function"&&!rt(ot)?tt(nt(ot)):{}}_e.exports=it},function(_e,et,b){var tt=b(112),nt="Expected a function";function rt(it,ot){if(typeof it!="function"||ot!=null&&typeof ot!="function")throw new TypeError(nt);var st=function(){var at=arguments,ct=ot?ot.apply(this,at):at[0],ut=st.cache;if(ut.has(ct))return ut.get(ct);var lt=it.apply(this,at);return st.cache=ut.set(ct,lt)||ut,lt};return st.cache=new(rt.Cache||tt),st}rt.Cache=tt,_e.exports=rt},function(_e,et,b){var tt=b(87),nt=b(124);function rt(it){return tt(function(ot,st){var at=-1,ct=st.length,ut=ct>1?st[ct-1]:void 0,lt=ct>2?st[2]:void 0;for(ut=it.length>3&&typeof ut=="function"?(ct--,ut):void 0,lt&&nt(st[0],st[1],lt)&&(ut=ct<3?void 0:ut,ct=1),ot=Object(ot);++at<ct;){var dt=st[at];dt&&it(ot,dt,at,ut)}return ot})}_e.exports=rt},function(_e,et,b){var tt=b(122),nt=Math.max;function rt(it,ot,st){return ot=nt(ot===void 0?it.length-1:ot,0),function(){for(var at=arguments,ct=-1,ut=nt(at.length-ot,0),lt=Array(ut);++ct<ut;)lt[ct]=at[ot+ct];ct=-1;for(var dt=Array(ot+1);++ct<ot;)dt[ct]=at[ct];return dt[ot]=st(lt),tt(it,this,dt)}}_e.exports=rt},function(_e,et){var b=800,tt=16,nt=Date.now;function rt(it){var ot=0,st=0;return function(){var at=nt(),ct=tt-(at-st);if(st=at,ct>0){if(++ot>=b)return arguments[0]}else ot=0;return it.apply(void 0,arguments)}}_e.exports=rt},function(_e,et,b){_e.exports=b(409)()?WeakMap:b(410)},function(_e,et,b){var tt=Object.create,nt=Object.getPrototypeOf,rt={};_e.exports=function(){var it=Object.setPrototypeOf,ot=arguments[0]||tt;return typeof it!="function"?!1:nt(it(ot(null),rt))===rt}},function(_e,et,b){var tt=b(197),nt=b(31),rt=Object.prototype.isPrototypeOf,it=Object.defineProperty,ot={configurable:!0,enumerable:!1,writable:!0,value:void 0},st;st=function(at,ct){if(nt(at),ct===null||tt(ct))return at;throw new TypeError("Prototype must be null or an object")},_e.exports=function(at){var ct,ut;return at?(at.level===2?at.set?(ut=at.set,ct=function(lt,dt){return ut.call(st(lt,dt),dt),lt}):ct=function(lt,dt){return st(lt,dt).__proto__=dt,lt}:ct=function lt(dt,ft){var St;return st(dt,ft),St=rt.call(lt.nullPolyfill,dt),St&&delete lt.nullPolyfill.__proto__,ft===null&&(ft=lt.nullPolyfill),dt.__proto__=ft,St&&it(lt.nullPolyfill,"__proto__",ot),dt},Object.defineProperty(ct,"level",{configurable:!1,enumerable:!1,writable:!1,value:at.level})):null}(function(){var at=Object.create(null),ct={},ut,lt=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(lt){try{ut=lt.set,ut.call(at,ct)}catch{}if(Object.getPrototypeOf(at)===ct)return{set:ut,level:2}}return at.__proto__=ct,Object.getPrototypeOf(at)===ct?{level:2}:(at={},at.__proto__=ct,Object.getPrototypeOf(at)===ct?{level:1}:!1)}()),b(412)},function(_e,et,b){var tt=b(43),nt={function:!0,object:!0};_e.exports=function(rt){return tt(rt)&&nt[typeof rt]||!1}},function(_e,et,b){var tt=b(415),nt=/^\s*class[\s{/}]/,rt=Function.prototype.toString;_e.exports=function(it){return!(!tt(it)||nt.test(rt.call(it)))}},function(_e,et,b){var tt=b(43),nt=Array.prototype.forEach,rt=Object.create,it=function(ot,st){var at;for(at in ot)st[at]=ot[at]};_e.exports=function(ot){var st=rt(null);return nt.call(arguments,function(at){tt(at)&&it(Object(at),st)}),st}},function(_e,et,b){_e.exports=b(422)()?String.prototype.contains:b(423)},function(_e,et,b){var tt=b(89),nt=b(90),rt=b(424),it=b(453),ot=b(454),st=b(44).iterator;_e.exports=function(at){return typeof ot(at)[st]=="function"?at[st]():tt(at)?new rt(at):nt(at)?new it(at):new rt(at)}},function(_e,et,b){var tt=b(429);_e.exports=function(nt){if(!tt(nt))throw new TypeError(nt+" is not a symbol");return nt}},function(_e,et,b){var tt=b(433),nt=b(127),rt=b(68),it=b(31),ot=b(32),st=b(434),at=b(44),ct=Object.defineProperty,ut=Object.defineProperties,lt;_e.exports=lt=function(dt,ft){if(!(this instanceof lt))throw new TypeError("Constructor requires 'new'");ut(this,{__list__:ot("w",it(dt)),__context__:ot("w",ft),__nextIndex__:ot("w",0)}),ft&&(rt(ft.on),ft.on("_add",this._onAdd),ft.on("_delete",this._onDelete),ft.on("_clear",this._onClear))},delete lt.prototype.constructor,ut(lt.prototype,nt({_next:ot(function(){var dt;if(this.__list__){if(this.__redo__&&(dt=this.__redo__.shift(),dt!==void 0))return dt;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:ot(function(){return this._createResult(this._next())}),_createResult:ot(function(dt){return dt===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(dt)}}),_resolve:ot(function(dt){return this.__list__[dt]}),_unBind:ot(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:ot(function(){return"[object "+(this[at.toStringTag]||"Object")+"]"})},st({_onAdd:ot(function(dt){if(!(dt>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){ct(this,"__redo__",ot("c",[dt]));return}this.__redo__.forEach(function(ft,St){ft>=dt&&(this.__redo__[St]=++ft)},this),this.__redo__.push(dt)}}),_onDelete:ot(function(dt){var ft;dt>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(ft=this.__redo__.indexOf(dt),ft!==-1&&this.__redo__.splice(ft,1),this.__redo__.forEach(function(St,Tt){St>dt&&(this.__redo__[Tt]=--St)},this)))}),_onClear:ot(function(){this.__redo__&&tt.call(this.__redo__),this.__nextIndex__=0})}))),ct(lt.prototype,at.iterator,ot(function(){return this}))},function(_e,et,b){var tt=b(55),nt=b(126),rt=b(436),it=b(437),ot=function(st,at){return st.replace("%v",it(at))};_e.exports=function(st,at,ct){if(!nt(ct))throw new TypeError(ot(at,st));if(!tt(st)){if("default"in ct)return ct.default;if(ct.isOptional)return null}var ut=rt(ct.errorMessage);throw tt(ut)||(ut=at),new TypeError(ot(ut,st))}},function(_e,et){function b(tt,nt,rt,it){for(var ot=tt.length,st=rt+(it?1:-1);it?st--:++st<ot;)if(nt(tt[st],st,tt))return st;return-1}_e.exports=b},function(_e,et,b){_e.exports=b(465)},function(_e,et,b){_e.exports=function(nt,rt){return function(){for(var ot=new Array(arguments.length),st=0;st<ot.length;st++)ot[st]=arguments[st];return nt.apply(rt,ot)}}},function(_e,et,b){var tt=b(19);function nt(rt){return encodeURIComponent(rt).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}_e.exports=function(it,ot,st){if(!ot)return it;var at;if(st)at=st(ot);else if(tt.isURLSearchParams(ot))at=ot.toString();else{var ct=[];tt.forEach(ot,function(dt,ft){dt===null||typeof dt>"u"||(tt.isArray(dt)?ft=ft+"[]":dt=[dt],tt.forEach(dt,function(Tt){tt.isDate(Tt)?Tt=Tt.toISOString():tt.isObject(Tt)&&(Tt=JSON.stringify(Tt)),ct.push(nt(ft)+"="+nt(Tt))}))}),at=ct.join("&")}if(at){var ut=it.indexOf("#");ut!==-1&&(it=it.slice(0,ut)),it+=(it.indexOf("?")===-1?"?":"&")+at}return it}},function(_e,et,b){_e.exports=function(nt,rt,it,ot,st){return nt.config=rt,it&&(nt.code=it),nt.request=ot,nt.response=st,nt.isAxiosError=!0,nt.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},nt}},function(_e,et,b){(function(tt){var nt=b(19),rt=b(471),it=b(472),ot=b(208),st=b(473),at=b(476),ct=b(477),ut=b(211);_e.exports=function(dt){return new tt(function(St,Tt){var pt=dt.data,gt=dt.headers,yt=dt.responseType;nt.isFormData(pt)&&delete gt["Content-Type"];var Et=new XMLHttpRequest;if(dt.auth){var It=dt.auth.username||"",Gt=dt.auth.password?unescape(encodeURIComponent(dt.auth.password)):"";gt.Authorization="Basic "+btoa(It+":"+Gt)}var Wt=st(dt.baseURL,dt.url);Et.open(dt.method.toUpperCase(),ot(Wt,dt.params,dt.paramsSerializer),!0),Et.timeout=dt.timeout;function At(){if(Et){var Vt="getAllResponseHeaders"in Et?at(Et.getAllResponseHeaders()):null,Nt=!yt||yt==="text"||yt==="json"?Et.responseText:Et.response,tn={data:Nt,status:Et.status,statusText:Et.statusText,headers:Vt,config:dt,request:Et};rt(St,Tt,tn),Et=null}}if("onloadend"in Et?Et.onloadend=At:Et.onreadystatechange=function(){!Et||Et.readyState!==4||Et.status===0&&!(Et.responseURL&&Et.responseURL.indexOf("file:")===0)||setTimeout(At)},Et.onabort=function(){Et&&(Tt(ut("Request aborted",dt,"ECONNABORTED",Et)),Et=null)},Et.onerror=function(){Tt(ut("Network Error",dt,null,Et)),Et=null},Et.ontimeout=function(){var Nt="timeout of "+dt.timeout+"ms exceeded";dt.timeoutErrorMessage&&(Nt=dt.timeoutErrorMessage),Tt(ut(Nt,dt,dt.transitional&&dt.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Et)),Et=null},nt.isStandardBrowserEnv()){var kt=(dt.withCredentials||ct(Wt))&&dt.xsrfCookieName?it.read(dt.xsrfCookieName):void 0;kt&&(gt[dt.xsrfHeaderName]=kt)}"setRequestHeader"in Et&&nt.forEach(gt,function(Nt,tn){typeof pt>"u"&&tn.toLowerCase()==="content-type"?delete gt[tn]:Et.setRequestHeader(tn,Nt)}),nt.isUndefined(dt.withCredentials)||(Et.withCredentials=!!dt.withCredentials),yt&&yt!=="json"&&(Et.responseType=dt.responseType),typeof dt.onDownloadProgress=="function"&&Et.addEventListener("progress",dt.onDownloadProgress),typeof dt.onUploadProgress=="function"&&Et.upload&&Et.upload.addEventListener("progress",dt.onUploadProgress),dt.cancelToken&&dt.cancelToken.promise.then(function(Nt){Et&&(Et.abort(),Tt(Nt),Et=null)}),pt||(pt=null),Et.send(pt)})}}).call(this,b(0))},function(_e,et,b){var tt=b(209);_e.exports=function(rt,it,ot,st,at){var ct=new Error(rt);return tt(ct,it,ot,st,at)}},function(_e,et,b){_e.exports=function(nt){return!!(nt&&nt.__CANCEL__)}},function(_e,et,b){var tt=b(19);_e.exports=function(rt,it){it=it||{};var ot={},st=["url","method","data"],at=["headers","auth","proxy","params"],ct=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],ut=["validateStatus"];function lt(Tt,pt){return tt.isPlainObject(Tt)&&tt.isPlainObject(pt)?tt.merge(Tt,pt):tt.isPlainObject(pt)?tt.merge({},pt):tt.isArray(pt)?pt.slice():pt}function dt(Tt){tt.isUndefined(it[Tt])?tt.isUndefined(rt[Tt])||(ot[Tt]=lt(void 0,rt[Tt])):ot[Tt]=lt(rt[Tt],it[Tt])}tt.forEach(st,function(pt){tt.isUndefined(it[pt])||(ot[pt]=lt(void 0,it[pt]))}),tt.forEach(at,dt),tt.forEach(ct,function(pt){tt.isUndefined(it[pt])?tt.isUndefined(rt[pt])||(ot[pt]=lt(void 0,rt[pt])):ot[pt]=lt(void 0,it[pt])}),tt.forEach(ut,function(pt){pt in it?ot[pt]=lt(rt[pt],it[pt]):pt in rt&&(ot[pt]=lt(void 0,rt[pt]))});var ft=st.concat(at).concat(ct).concat(ut),St=Object.keys(rt).concat(Object.keys(it)).filter(function(pt){return ft.indexOf(pt)===-1});return tt.forEach(St,dt),ot}},function(_e,et,b){function tt(nt){this.message=nt}tt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},tt.prototype.__CANCEL__=!0,_e.exports=tt},function(_e,et,b){var tt=b(484),nt=b(486);function rt(it,ot,st){return tt(nt,it,ot,st)}_e.exports=rt},function(_e,et,b){var tt=b(88),nt=b(217),rt=nt?function(it,ot){return nt.set(it,ot),it}:tt;_e.exports=rt},function(_e,et,b){var tt=b(186),nt=tt&&new tt;_e.exports=nt},function(_e,et,b){var tt=b(219),nt=b(220),rt=b(490),it=b(95),ot=b(221),st=b(227),at=b(499),ct=b(137),ut=b(14),lt=1,dt=2,ft=8,St=16,Tt=128,pt=512;function gt(yt,Et,It,Gt,Wt,At,kt,Vt,Nt,tn){var _t=Et&Tt,Kt=Et&lt,cn=Et&dt,an=Et&(ft|St),mn=Et&pt,on=cn?void 0:it(yt);function yn(){for(var fn=arguments.length,sn=Array(fn),un=fn;un--;)sn[un]=arguments[un];if(an)var Ln=st(yn),Xn=rt(sn,Ln);if(Gt&&(sn=tt(sn,Gt,Wt,an)),At&&(sn=nt(sn,At,kt,an)),fn-=Xn,an&&fn<tn){var pn=ct(sn,Ln);return ot(yt,Et,gt,yn.placeholder,It,sn,pn,Vt,Nt,tn-fn)}var Vn=Kt?It:this,Tn=cn?Vn[yt]:yt;return fn=sn.length,Vt?sn=at(sn,Vt):mn&&fn>1&&sn.reverse(),_t&&Nt<fn&&(sn.length=Nt),this&&this!==ut&&this instanceof yn&&(Tn=on||it(Tn)),Tn.apply(Vn,sn)}return yn}_e.exports=gt},function(_e,et){var b=Math.max;function tt(nt,rt,it,ot){for(var st=-1,at=nt.length,ct=it.length,ut=-1,lt=rt.length,dt=b(at-ct,0),ft=Array(lt+dt),St=!ot;++ut<lt;)ft[ut]=rt[ut];for(;++st<ct;)(St||st<at)&&(ft[it[st]]=nt[st]);for(;dt--;)ft[ut++]=nt[st++];return ft}_e.exports=tt},function(_e,et){var b=Math.max;function tt(nt,rt,it,ot){for(var st=-1,at=nt.length,ct=-1,ut=it.length,lt=-1,dt=rt.length,ft=b(at-ut,0),St=Array(ft+dt),Tt=!ot;++st<ft;)St[st]=nt[st];for(var pt=st;++lt<dt;)St[pt+lt]=rt[lt];for(;++ct<ut;)(Tt||st<at)&&(St[pt+it[ct]]=nt[st++]);return St}_e.exports=tt},function(_e,et,b){var tt=b(491),nt=b(225),rt=b(226),it=1,ot=2,st=4,at=8,ct=32,ut=64;function lt(dt,ft,St,Tt,pt,gt,yt,Et,It,Gt){var Wt=ft&at,At=Wt?yt:void 0,kt=Wt?void 0:yt,Vt=Wt?gt:void 0,Nt=Wt?void 0:gt;ft|=Wt?ct:ut,ft&=~(Wt?ut:ct),ft&st||(ft&=~(it|ot));var tn=[dt,ft,pt,Vt,At,Nt,kt,Et,It,Gt],_t=St.apply(void 0,tn);return tt(dt)&&nt(_t,tn),_t.placeholder=Tt,rt(_t,dt,ft)}_e.exports=lt},function(_e,et,b){var tt=b(217),nt=b(223),rt=tt?function(it){return tt.get(it)}:nt;_e.exports=rt},function(_e,et){function b(){}_e.exports=b},function(_e,et,b){var tt=b(86),nt=b(136);function rt(it,ot){this.__wrapped__=it,this.__actions__=[],this.__chain__=!!ot,this.__index__=0,this.__values__=void 0}rt.prototype=tt(nt.prototype),rt.prototype.constructor=rt,_e.exports=rt},function(_e,et,b){var tt=b(216),nt=b(193),rt=nt(tt);_e.exports=rt},function(_e,et,b){var tt=b(496),nt=b(497),rt=b(123),it=b(498);function ot(st,at,ct){var ut=at+"";return rt(st,nt(ut,it(tt(ut),ct)))}_e.exports=ot},function(_e,et){function b(tt){var nt=tt;return nt.placeholder}_e.exports=b},function(_e,et,b){var tt=b(503),nt=b(11),rt=b(69),it=0/0,ot=/^[-+]0x[0-9a-f]+$/i,st=/^0b[01]+$/i,at=/^0o[0-7]+$/i,ct=parseInt;function ut(lt){if(typeof lt=="number")return lt;if(rt(lt))return it;if(nt(lt)){var dt=typeof lt.valueOf=="function"?lt.valueOf():lt;lt=nt(dt)?dt+"":dt}if(typeof lt!="string")return lt===0?lt:+lt;lt=tt(lt);var ft=st.test(lt);return ft||at.test(lt)?ct(lt.slice(2),ft?2:8):ot.test(lt)?it:+lt}_e.exports=ut},function(_e,et,b){var tt=b(511),nt=b(17);function rt(it,ot,st,at,ct){return it===ot?!0:it==null||ot==null||!nt(it)&&!nt(ot)?it!==it&&ot!==ot:tt(it,ot,st,at,rt,ct)}_e.exports=rt},function(_e,et,b){var tt=b(92),nt=b(231),rt=b(94),it=1,ot=2;function st(at,ct,ut,lt,dt,ft){var St=ut&it,Tt=at.length,pt=ct.length;if(Tt!=pt&&!(St&&pt>Tt))return!1;var gt=ft.get(at),yt=ft.get(ct);if(gt&&yt)return gt==ct&&yt==at;var Et=-1,It=!0,Gt=ut&ot?new tt:void 0;for(ft.set(at,ct),ft.set(ct,at);++Et<Tt;){var Wt=at[Et],At=ct[Et];if(lt)var kt=St?lt(At,Wt,Et,ct,at,ft):lt(Wt,At,Et,at,ct,ft);if(kt!==void 0){if(kt)continue;It=!1;break}if(Gt){if(!nt(ct,function(Vt,Nt){if(!rt(Gt,Nt)&&(Wt===Vt||dt(Wt,Vt,ut,lt,ft)))return Gt.push(Nt)})){It=!1;break}}else if(!(Wt===At||dt(Wt,At,ut,lt,ft))){It=!1;break}}return ft.delete(at),ft.delete(ct),It}_e.exports=st},function(_e,et){function b(tt,nt){for(var rt=-1,it=tt==null?0:tt.length;++rt<it;)if(nt(tt[rt],rt,tt))return!0;return!1}_e.exports=b},function(_e,et){function b(tt){var nt=-1,rt=Array(tt.size);return tt.forEach(function(it,ot){rt[++nt]=[ot,it]}),rt}_e.exports=b},function(_e,et,b){var tt=b(11);function nt(rt){return rt===rt&&!tt(rt)}_e.exports=nt},function(_e,et){function b(tt,nt){return function(rt){return rt==null?!1:rt[tt]===nt&&(nt!==void 0||tt in Object(rt))}}_e.exports=b},function(_e,et,b){var tt=b(516),nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/\\(\\)?/g,it=tt(function(ot){var st=[];return ot.charCodeAt(0)===46&&st.push(""),ot.replace(nt,function(at,ct,ut,lt){st.push(ut?lt.replace(rt,"$1"):ct||at)}),st});_e.exports=it},function(_e,et,b){var tt=b(518),nt=b(519);function rt(it,ot){return it!=null&&nt(it,ot,tt)}_e.exports=rt},function(_e,et,b){var tt=b(118),nt=b(525);function rt(it,ot,st,at,ct){var ut=-1,lt=it.length;for(st||(st=nt),ct||(ct=[]);++ut<lt;){var dt=it[ut];ot>0&&st(dt)?ot>1?rt(dt,ot-1,st,at,ct):tt(ct,dt):at||(ct[ct.length]=dt)}return ct}_e.exports=rt},function(_e,et,b){var tt=b(532),nt=tt();_e.exports=nt},function(_e,et,b){var tt=b(533),nt=b(534);et.parse=It,et.resolve=Wt,et.resolveObject=At,et.format=Gt,et.Url=rt;function rt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var it=/^([a-z0-9.+-]+:)/i,ot=/:[0-9]*$/,st=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,at=["<",">",'"',"`"," ","\r",`
`,"	"],ct=["{","}","|","\\","^","`"].concat(at),ut=["'"].concat(ct),lt=["%","/","?",";","#"].concat(ut),dt=["/","?","#"],ft=255,St=/^[+a-z0-9A-Z_-]{0,63}$/,Tt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,pt={javascript:!0,"javascript:":!0},gt={javascript:!0,"javascript:":!0},yt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Et=b(535);function It(kt,Vt,Nt){if(kt&&nt.isObject(kt)&&kt instanceof rt)return kt;var tn=new rt;return tn.parse(kt,Vt,Nt),tn}rt.prototype.parse=function(kt,Vt,Nt){if(!nt.isString(kt))throw new TypeError("Parameter 'url' must be a string, not "+typeof kt);var tn=kt.indexOf("?"),_t=tn!==-1&&tn<kt.indexOf("#")?"?":"#",Kt=kt.split(_t),cn=/\\/g;Kt[0]=Kt[0].replace(cn,"/"),kt=Kt.join(_t);var an=kt;if(an=an.trim(),!Nt&&kt.split("#").length===1){var mn=st.exec(an);if(mn)return this.path=an,this.href=an,this.pathname=mn[1],mn[2]?(this.search=mn[2],Vt?this.query=Et.parse(this.search.substr(1)):this.query=this.search.substr(1)):Vt&&(this.search="",this.query={}),this}var on=it.exec(an);if(on){on=on[0];var yn=on.toLowerCase();this.protocol=yn,an=an.substr(on.length)}if(Nt||on||an.match(/^\/\/[^@\/]+@[^@\/]+/)){var fn=an.substr(0,2)==="//";fn&&!(on&&gt[on])&&(an=an.substr(2),this.slashes=!0)}if(!gt[on]&&(fn||on&&!yt[on])){for(var sn=-1,un=0;un<dt.length;un++){var Ln=an.indexOf(dt[un]);Ln!==-1&&(sn===-1||Ln<sn)&&(sn=Ln)}var Xn,pn;sn===-1?pn=an.lastIndexOf("@"):pn=an.lastIndexOf("@",sn),pn!==-1&&(Xn=an.slice(0,pn),an=an.slice(pn+1),this.auth=decodeURIComponent(Xn)),sn=-1;for(var un=0;un<lt.length;un++){var Ln=an.indexOf(lt[un]);Ln!==-1&&(sn===-1||Ln<sn)&&(sn=Ln)}sn===-1&&(sn=an.length),this.host=an.slice(0,sn),an=an.slice(sn),this.parseHost(),this.hostname=this.hostname||"";var Vn=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Vn)for(var Tn=this.hostname.split(/\./),un=0,Jn=Tn.length;un<Jn;un++){var lr=Tn[un];if(lr&&!lr.match(St)){for(var tr="",Qn=0,Sr=lr.length;Qn<Sr;Qn++)lr.charCodeAt(Qn)>127?tr+="x":tr+=lr[Qn];if(!tr.match(St)){var vr=Tn.slice(0,un),Fr=Tn.slice(un+1),kr=lr.match(Tt);kr&&(vr.push(kr[1]),Fr.unshift(kr[2])),Fr.length&&(an="/"+Fr.join(".")+an),this.hostname=vr.join(".");break}}}this.hostname.length>ft?this.hostname="":this.hostname=this.hostname.toLowerCase(),Vn||(this.hostname=tt.toASCII(this.hostname));var jr=this.port?":"+this.port:"",xo=this.hostname||"";this.host=xo+jr,this.href+=this.host,Vn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),an[0]!=="/"&&(an="/"+an))}if(!pt[yn])for(var un=0,Jn=ut.length;un<Jn;un++){var Er=ut[un];if(an.indexOf(Er)!==-1){var xr=encodeURIComponent(Er);xr===Er&&(xr=escape(Er)),an=an.split(Er).join(xr)}}var Un=an.indexOf("#");Un!==-1&&(this.hash=an.substr(Un),an=an.slice(0,Un));var Mn=an.indexOf("?");if(Mn!==-1?(this.search=an.substr(Mn),this.query=an.substr(Mn+1),Vt&&(this.query=Et.parse(this.query)),an=an.slice(0,Mn)):Vt&&(this.search="",this.query={}),an&&(this.pathname=an),yt[yn]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var jr=this.pathname||"",sr=this.search||"";this.path=jr+sr}return this.href=this.format(),this};function Gt(kt){return nt.isString(kt)&&(kt=It(kt)),kt instanceof rt?kt.format():rt.prototype.format.call(kt)}rt.prototype.format=function(){var kt=this.auth||"";kt&&(kt=encodeURIComponent(kt),kt=kt.replace(/%3A/i,":"),kt+="@");var Vt=this.protocol||"",Nt=this.pathname||"",tn=this.hash||"",_t=!1,Kt="";this.host?_t=kt+this.host:this.hostname&&(_t=kt+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(_t+=":"+this.port)),this.query&&nt.isObject(this.query)&&Object.keys(this.query).length&&(Kt=Et.stringify(this.query));var cn=this.search||Kt&&"?"+Kt||"";return Vt&&Vt.substr(-1)!==":"&&(Vt+=":"),this.slashes||(!Vt||yt[Vt])&&_t!==!1?(_t="//"+(_t||""),Nt&&Nt.charAt(0)!=="/"&&(Nt="/"+Nt)):_t||(_t=""),tn&&tn.charAt(0)!=="#"&&(tn="#"+tn),cn&&cn.charAt(0)!=="?"&&(cn="?"+cn),Nt=Nt.replace(/[?#]/g,function(an){return encodeURIComponent(an)}),cn=cn.replace("#","%23"),Vt+_t+Nt+cn+tn};function Wt(kt,Vt){return It(kt,!1,!0).resolve(Vt)}rt.prototype.resolve=function(kt){return this.resolveObject(It(kt,!1,!0)).format()};function At(kt,Vt){return kt?It(kt,!1,!0).resolveObject(Vt):Vt}rt.prototype.resolveObject=function(kt){if(nt.isString(kt)){var Vt=new rt;Vt.parse(kt,!1,!0),kt=Vt}for(var Nt=new rt,tn=Object.keys(this),_t=0;_t<tn.length;_t++){var Kt=tn[_t];Nt[Kt]=this[Kt]}if(Nt.hash=kt.hash,kt.href==="")return Nt.href=Nt.format(),Nt;if(kt.slashes&&!kt.protocol){for(var cn=Object.keys(kt),an=0;an<cn.length;an++){var mn=cn[an];mn!=="protocol"&&(Nt[mn]=kt[mn])}return yt[Nt.protocol]&&Nt.hostname&&!Nt.pathname&&(Nt.path=Nt.pathname="/"),Nt.href=Nt.format(),Nt}if(kt.protocol&&kt.protocol!==Nt.protocol){if(!yt[kt.protocol]){for(var on=Object.keys(kt),yn=0;yn<on.length;yn++){var fn=on[yn];Nt[fn]=kt[fn]}return Nt.href=Nt.format(),Nt}if(Nt.protocol=kt.protocol,!kt.host&&!gt[kt.protocol]){for(var Jn=(kt.pathname||"").split("/");Jn.length&&!(kt.host=Jn.shift()););kt.host||(kt.host=""),kt.hostname||(kt.hostname=""),Jn[0]!==""&&Jn.unshift(""),Jn.length<2&&Jn.unshift(""),Nt.pathname=Jn.join("/")}else Nt.pathname=kt.pathname;if(Nt.search=kt.search,Nt.query=kt.query,Nt.host=kt.host||"",Nt.auth=kt.auth,Nt.hostname=kt.hostname||kt.host,Nt.port=kt.port,Nt.pathname||Nt.search){var sn=Nt.pathname||"",un=Nt.search||"";Nt.path=sn+un}return Nt.slashes=Nt.slashes||kt.slashes,Nt.href=Nt.format(),Nt}var Ln=Nt.pathname&&Nt.pathname.charAt(0)==="/",Xn=kt.host||kt.pathname&&kt.pathname.charAt(0)==="/",pn=Xn||Ln||Nt.host&&kt.pathname,Vn=pn,Tn=Nt.pathname&&Nt.pathname.split("/")||[],Jn=kt.pathname&&kt.pathname.split("/")||[],lr=Nt.protocol&&!yt[Nt.protocol];if(lr&&(Nt.hostname="",Nt.port=null,Nt.host&&(Tn[0]===""?Tn[0]=Nt.host:Tn.unshift(Nt.host)),Nt.host="",kt.protocol&&(kt.hostname=null,kt.port=null,kt.host&&(Jn[0]===""?Jn[0]=kt.host:Jn.unshift(kt.host)),kt.host=null),pn=pn&&(Jn[0]===""||Tn[0]==="")),Xn)Nt.host=kt.host||kt.host===""?kt.host:Nt.host,Nt.hostname=kt.hostname||kt.hostname===""?kt.hostname:Nt.hostname,Nt.search=kt.search,Nt.query=kt.query,Tn=Jn;else if(Jn.length)Tn||(Tn=[]),Tn.pop(),Tn=Tn.concat(Jn),Nt.search=kt.search,Nt.query=kt.query;else if(!nt.isNullOrUndefined(kt.search)){if(lr){Nt.hostname=Nt.host=Tn.shift();var tr=Nt.host&&Nt.host.indexOf("@")>0?Nt.host.split("@"):!1;tr&&(Nt.auth=tr.shift(),Nt.host=Nt.hostname=tr.shift())}return Nt.search=kt.search,Nt.query=kt.query,(!nt.isNull(Nt.pathname)||!nt.isNull(Nt.search))&&(Nt.path=(Nt.pathname?Nt.pathname:"")+(Nt.search?Nt.search:"")),Nt.href=Nt.format(),Nt}if(!Tn.length)return Nt.pathname=null,Nt.search?Nt.path="/"+Nt.search:Nt.path=null,Nt.href=Nt.format(),Nt;for(var Qn=Tn.slice(-1)[0],Sr=(Nt.host||kt.host||Tn.length>1)&&(Qn==="."||Qn==="..")||Qn==="",vr=0,Fr=Tn.length;Fr>=0;Fr--)Qn=Tn[Fr],Qn==="."?Tn.splice(Fr,1):Qn===".."?(Tn.splice(Fr,1),vr++):vr&&(Tn.splice(Fr,1),vr--);if(!pn&&!Vn)for(;vr--;vr)Tn.unshift("..");pn&&Tn[0]!==""&&(!Tn[0]||Tn[0].charAt(0)!=="/")&&Tn.unshift(""),Sr&&Tn.join("/").substr(-1)!=="/"&&Tn.push("");var kr=Tn[0]===""||Tn[0]&&Tn[0].charAt(0)==="/";if(lr){Nt.hostname=Nt.host=kr?"":Tn.length?Tn.shift():"";var tr=Nt.host&&Nt.host.indexOf("@")>0?Nt.host.split("@"):!1;tr&&(Nt.auth=tr.shift(),Nt.host=Nt.hostname=tr.shift())}return pn=pn||Nt.host&&Tn.length,pn&&!kr&&Tn.unshift(""),Tn.length?Nt.pathname=Tn.join("/"):(Nt.pathname=null,Nt.path=null),(!nt.isNull(Nt.pathname)||!nt.isNull(Nt.search))&&(Nt.path=(Nt.pathname?Nt.pathname:"")+(Nt.search?Nt.search:"")),Nt.auth=kt.auth||Nt.auth,Nt.slashes=Nt.slashes||kt.slashes,Nt.href=Nt.format(),Nt},rt.prototype.parseHost=function(){var kt=this.host,Vt=ot.exec(kt);Vt&&(Vt=Vt[0],Vt!==":"&&(this.port=Vt.substr(1)),kt=kt.substr(0,kt.length-Vt.length)),kt&&(this.hostname=kt)}},function(_e,et,b){(function(tt){const nt=b(16),rt=b(15),it=b(1)("guidStorage"),ot={};_e.exports=ot;let st,at;const ct=function(dt){return!(nt(dt.get)&&nt(dt.set))},ut=function(dt){if(at){dt(null,at);return}st.get(dt)};ot.override=lt=>{if(ct(lt))throw new Error("The storageInterface argument does not seem to be valid, it must implement get and set methods");st!==lt&&(st=lt,at&&st.set(at,dt=>{dt&&it.error(`Failed to send initial Guid value (${at}) to the newly assigned Guid Storage. The error was: ${dt}`)}))},ot.get=lt=>{ut((dt,ft)=>{if(dt){lt(dt);return}ft?at||(at=ft):(ft=rt(),st.set(ft,St=>{if(St){lt(St);return}at=ft})),lt(null,at)})},ot.getAsync=()=>new tt((lt,dt)=>{ot.get((ft,St)=>ft?dt(ft):lt(St))}),ot.override({get(lt){let dt;try{dt=(typeof window!==void 0?window:commonjsGlobal).localStorage.getItem("opentok_client_id")}catch{dt||(dt=rt())}lt(null,dt)},set(lt,dt){try{(typeof window!==void 0?window:commonjsGlobal).localStorage.setItem("opentok_client_id",lt)}catch{}dt(null)}}),ot.set=lt=>{at=lt}}).call(this,b(0))},function(_e,et){var b=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(b){var tt=new Uint8Array(16);_e.exports=function(){return b(tt),tt}}else{var nt=new Array(16);_e.exports=function(){for(var it=0,ot;it<16;it++)it&3||(ot=Math.random()*4294967296),nt[it]=ot>>>((it&3)<<3)&255;return nt}}},function(_e,et){for(var b=[],tt=0;tt<256;++tt)b[tt]=(tt+256).toString(16).substr(1);function nt(rt,it){var ot=it||0,st=b;return[st[rt[ot++]],st[rt[ot++]],st[rt[ot++]],st[rt[ot++]],"-",st[rt[ot++]],st[rt[ot++]],"-",st[rt[ot++]],st[rt[ot++]],"-",st[rt[ot++]],st[rt[ot++]],"-",st[rt[ot++]],st[rt[ot++]],st[rt[ot++]],st[rt[ot++]],st[rt[ot++]],st[rt[ot++]]].join("")}_e.exports=nt},function(_e,et,b){const tt=b(244),nt=b(2),rt=b(246),it=b(9),ot={};_e.exports=ot;function st(at){if(typeof at=="string")return at;const ct=[];return Object.keys(at).forEach(ut=>{ct.push(`${encodeURIComponent(ut)}=${encodeURIComponent(at[ut])}`)}),ct.join("&").replace(/\+/g,"%20")}nt.name!=="Node"&&(ot.request=function(at,ct,ut){const lt=new(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest,dt=ct||{};if(!dt.method){ut(new Error("No HTTP method specified in options"));return}ct.overrideMimeType&&(lt.overrideMimeType&&lt.overrideMimeType(ct.overrideMimeType),delete ct.overrideMimeType),ut&&(tt(lt).on("load",St=>{const Tt=St.target.status;Tt>=200&&(Tt<300||Tt===304)?ut(null,St):ut(St)}),tt(lt).on("error",ut)),lt.open(ct.method,at,!0),dt.headers||(dt.headers={});for(const St in dt.headers)Object.prototype.hasOwnProperty.call(dt.headers,St)&&lt.setRequestHeader(St,dt.headers[St]);lt.send(ct.body&&st(ct.body))},ot.get=function(at,ct,ut){const lt=it(ct||{},{method:"GET"});ot.request(at,lt,ut)},ot.post=function(at,ct,ut){const lt=it(ct||{},{method:"POST"});ot.request(at,lt,ut)},ot.getJSON=function(at,ct,ut){ct=ct||{};const lt=function(St,Tt){if(St)ut(St,Tt&&Tt.target&&Tt.target.responseText);else{let pt;try{pt=JSON.parse(Tt.target.responseText)}catch(gt){ut(gt,Tt&&Tt.target&&Tt.target.responseText);return}ut(null,pt,Tt)}},dt=it({Accept:"application/json"},ct.headers||{});ot.get(at,it(ct||{},{headers:dt}),lt)},rt(ot))},function(_e,et,b){const tt=b(245);_e.exports=function(nt,rt){return new tt(nt,rt)}},function(_e,et,b){const tt=b(16),nt={attributes:b(544),css:b(545),classNames:b(550),observers:b(552)},rt=/^#([\w-]*)$/,it=function(ut){return Array.prototype.slice.call(ut)},ot=function(ut,lt){let dt;if(typeof ut>"u")return[];if(typeof ut=="string"){dt=[];const ft=rt.exec(ut);if(lt=lt||document,ft&&ft[1]){const St=lt.getElementById(ft[1]);St&&dt.push(St)}else dt=lt.querySelectorAll(ut)}else ut&&(ut.nodeType||(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest&&ut instanceof(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest||ut===(typeof window!==void 0?window:commonjsGlobal))?(dt=[ut],lt=ut):Array.isArray(ut)?(dt=ut.slice(),lt=null):dt=it(dt);return dt},st=function(ut,lt){const dt=ot(ut,lt);this.context=lt,this.toArray=function(){return dt},this.length=dt.length,this.first=dt[0],this.last=dt[dt.length-1],this.get=function(ft){return ft===void 0?dt:dt[ft]}};_e.exports=st,st._attachToOTHelpers={},st._attachToOTHelpers.removeElement=function(ct){return new st(ct).remove()},st.prototype.getAsArray=function(){let ct=this.get();return tt(ct.forEach)||(ct=it(ct)),ct},st.prototype.some=function(ct,ut){return this.getAsArray().some(ct,ut)},st.prototype.forEach=function(ct,ut){return this.getAsArray().forEach(ct,ut),this},st.prototype.map=function(ct,ut){return new st(this.getAsArray().map(ct,ut),this.context)},st.prototype.filter=function(ct,ut){return new st(this.getAsArray().filter(ct,ut),this.context)},st.prototype.find=function(ct){return new st(ct,this.first)},st.prototype.on=function(ct,ut){return this.forEach(lt=>{lt.addEventListener(ct,ut,!1)})},st.prototype.off=function(ct,ut){return this.forEach(lt=>{lt.removeEventListener(ct,ut,!1)})},st.prototype.once=function(ct,ut){const lt=function(){this.off(ct,lt),ut(...arguments)}.bind(this);return this.on(ct,lt)},st.prototype.appendTo=function(ct){if(!ct)throw new Error("appendTo requires a DOMElement to append to.");return this.forEach(ut=>{ct.appendChild(ut)})},st.prototype.append=function(){const ct=this.first;return ct?(Array.prototype.forEach.call(arguments,ut=>{ct.appendChild(ut)}),this):this},st.prototype.prepend=function(){if(arguments.length===0)return this;const ct=this.first;let ut;return ct?(ut=Array.prototype.slice.call(arguments),ct.firstElementChild||ct.appendChild(ut.shift()),ut.forEach(lt=>{ct.insertBefore(lt,ct.firstElementChild)}),this):this},st.prototype.after=function(ct){if(!ct)throw new Error("after requires a DOMElement to insert after");return this.forEach(ut=>{ut.parentElement&&(ct!==ut.parentNode.lastChild?ut.parentElement.insertBefore(ut,ct):ut.parentElement.appendChild(ut))})},st.prototype.before=function(ct){if(!ct)throw new Error("before requires a DOMElement to insert before");return this.forEach(ut=>{ut.parentElement&&ut.parentElement.insertBefore(ut,ct)})},st.prototype.remove=function(){return this.forEach(ct=>{ct.parentNode&&ct.parentNode.removeChild(ct)})},st.prototype.empty=function(){return this.forEach(ct=>{for(;ct.firstChild;)ct.removeChild(ct.firstChild)})},st.prototype.isDisplayNone=function(){return this.some(ct=>(ct.offsetWidth===0||ct.offsetHeight===0)&&new st(ct).css("display")==="none"?!0:ct.parentNode&&ct.parentNode.style?new st(ct.parentNode).isDisplayNone():!1)};const at=function ct(ut){return(ut.offsetWidth===0||ut.offsetHeight===0)&&new st(ut).css("display")==="none"?ut:ut.parentNode&&ut.parentNode.style?ct(ut.parentNode):null};st._attachToOTHelpers.emptyElement=function(ct){return new st(ct).empty()},st._attachToOTHelpers._findElementWithDisplayNone=at,nt.css(st,at),nt.attributes(st),nt.classNames(st),nt.observers(st),["on","off","isDisplayNone","show","hide","css","makeVisibleAndYield","addClass","removeClass"].forEach(ct=>{st._attachToOTHelpers[ct]=function(){const ut=Array.prototype.slice.apply(arguments),lt=ut.shift(),dt=new st(lt);return st.prototype[ct].apply(dt,ut)}})},function(_e,et,b){_e.exports=function(tt){const nt={};Object.keys(tt).forEach(rt=>{nt[rt]=tt[rt]}),tt._attachToOTHelpers=nt}},function(_e,et,b){const tt=b(16),nt=b(6),rt=b(1)("Collection");_e.exports=function(ot){let st=[],at={};const ct=ot||"id";nt(this);const ut=function(St,Tt){return tt(St[Tt])?St[Tt]():St[Tt]},lt=function(St){this.trigger("update",St),this.trigger(`update:${St.target.id}`,St)}.bind(this),dt=function(St){this.remove(St.target,St.reason)}.bind(this);this.reset=function(){st.forEach(function(ft){ft.off("updated",lt,this),ft.off("destroyed",dt,this)},this),st=[],at={}},this.destroy=function(ft){st.forEach(St=>{St&&typeof St.destroy=="function"&&St.destroy(ft,!0)}),this.reset(),this.off()},this.get=function(ft){return ft&&at[ft]!==void 0?st[at[ft]]:void 0},this.has=function(ft){return ft&&at[ft]!==void 0},this.toString=function(){return st.toString()},this.where=function(ft,St){return tt(ft)?st.filter(ft,St):st.filter(Tt=>{for(const pt in ft)if(ft.hasOwnProperty(pt)&&ut(Tt,pt)!==ft[pt])return!1;return!0})},this.find=function(ft,St){let Tt;tt(ft)?Tt=ft:Tt=function(gt){for(const yt in ft)if(ft.hasOwnProperty(yt)&&ut(gt,yt)!==ft[yt])return!1;return!0},Tt=Tt.bind(St);for(let pt=0;pt<st.length;++pt)if(Tt(st[pt])===!0)return st[pt];return null},this.forEach=function(ft,St){return st.forEach(ft,St),this},this.map=function(ft){return st.map(ft)},this.add=function(ft){const St=ut(ft,ct);return this.has(St)?(rt.warn(`Model ${St} is already in the collection`,st),this):(at[St]=st.push(ft)-1,ft.on("updated",lt,this),ft.on("destroyed",dt,this),this.trigger("add",ft),this.trigger(`add:${St}`,ft),this)},this.remove=function(ft,St){const Tt=ut(ft,ct);st.splice(at[Tt],1);for(let pt=at[Tt];pt<st.length;++pt)at[ut(st[pt],ct)]=pt;return delete at[Tt],ft.off("updated",lt,this),ft.off("destroyed",dt,this),this.trigger("remove",ft,St),this.trigger(`remove:${Tt}`,ft,St),this},this._triggerAddEvents=function(){this.where.apply(this,arguments).forEach(function(ft){this.trigger("add",ft),this.trigger(`add:${ut(ft,ct)}`,ft)},this)},this.length=function(){return st.length}}},function(_e,et,b){const tt=b(1)("deprecation");_e.exports=function(rt,it,ot){let st=ot===void 0?{}:ot,at=st.value,ct=st.name,ut=ct===void 0?`${it}`:ct,lt=st.getWarning,dt=lt===void 0?"":lt,ft=st.setWarning,St=ft===void 0?"":ft,Tt=st.canSet,pt=Tt===void 0?!1:Tt,gt=st.warnOnSet,yt=gt===void 0?!1:gt,Et=at,It=!1,Gt=!yt;Object.defineProperty(rt,it,{get(){return It||(It=!0,tt.warn(`${ut} is deprecated, and will be removed in the future. ${dt}`.trim())),Et},set(At){pt&&(Et=At),Gt||(Gt=!0,pt?tt.warn(`${ut} is deprecated. ${St}`.trim()):tt.warn(`${ut} is deprecated, and will be removed in the future. ${St}`.trim()))}})}},function(_e,et,b){const tt=b(2),nt=b(11);let rt;const it=["description","fileName","lineNumber","message","name","number","stack"],ot=function(ct,ut,lt){switch(arguments.length){case 1:nt(ct)&&(lt=ct,ut=void 0,ct=void 0);break;case 2:nt(ut)&&(lt=ut,ut=void 0);break}if(lt instanceof Error)for(let dt=0,ft=it.length;dt<ft;++dt)this[it[dt]]=lt[it[dt]];else if(nt(lt))for(const dt in lt)lt.hasOwnProperty(dt)&&(this[dt]=lt[dt]);if(!(this.fileName&&this.lineNumber&&this.columnNumber&&this.stack)){const dt=rt();!this.fileName&&dt.fileName&&(this.fileName=dt.fileName),!this.lineNumber&&dt.lineNumber&&(this.lineNumber=dt.lineNumber),!this.columnNumber&&dt.columnNumber&&(this.columnNumber=dt.columnNumber),!this.stack&&dt.stack&&(this.stack=dt.stack)}!this.message&&ct&&(this.message=ct),(!this.name||this.name==="Error")&&ut&&(this.name=ut)};_e.exports=ot,ot.prototype=Object.create(Error.prototype),ot.prototype.toString=function(){let at="";return this.fileName&&(at+=` ${this.fileName}`),this.lineNumber&&(at+=` ${this.lineNumber}`,this.columnNumber&&(at+=`:${this.columnNumber}`)),`<${this.name?`${this.name} `:""}${this.message}${at}>`},ot.prototype.valueOf=ot.prototype.toString;const st=function(ct,ut){return ut.slice(2).map(lt=>{const dt={fileName:lt.getFileName(),linenumber:lt.getLineNumber(),columnNumber:lt.getColumnNumber()};return lt.getFunctionName()&&(dt.functionName=lt.getFunctionName()),lt.getMethodName()&&(dt.methodName=lt.getMethodName()),lt.getThis()&&(dt.self=lt.getThis()),dt})};rt=function(){const ct={};let ut,lt,dt;switch(tt.name){case"Firefox":case"Safari":try{(typeof window!==void 0?window:commonjsGlobal).call.js.is.explody()}catch(Tt){dt=Tt}ut=(dt.stack||"").split(`
`),ut.shift(),ut.shift(),ct.stack=ut,lt=/@(.+?):([0-9]+)(:([0-9]+))?$/.exec(ut[0]),lt&&(ct.fileName=lt[1],ct.lineNumber=parseInt(lt[2],10),lt.length>3&&(ct.columnNumber=parseInt(lt[4],10)));break;case"Chrome":case"Node":case"Opera":var ft=Error.prepareStackTrace;Error.prepareStackTrace=st,dt=new Error,ct.stack=dt.stack,Error.prepareStackTrace=ft;var St=ct.stack[0];ct.lineNumber=St.lineNumber,ct.columnNumber=St.columnNumber,ct.fileName=St.fileName,St.functionName&&(ct.functionName=St.functionName),St.methodName&&(ct.methodName=St.methodName),St.self&&(ct.self=St.self);break;default:dt=new Error,dt.stack&&(ct.stack=dt.stack.split(`
`));break}return dt.message&&(ct.message=dt.message),ct}},function(_e,et,b){var tt={};tt.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},tt.localCName=tt.generateIdentifier(),tt.splitLines=function(nt){return nt.trim().split(`
`).map(function(rt){return rt.trim()})},tt.splitSections=function(nt){var rt=nt.split(`
m=`);return rt.map(function(it,ot){return(ot>0?"m="+it:it).trim()+`\r
`})},tt.getDescription=function(nt){var rt=tt.splitSections(nt);return rt&&rt[0]},tt.getMediaSections=function(nt){var rt=tt.splitSections(nt);return rt.shift(),rt},tt.matchPrefix=function(nt,rt){return tt.splitLines(nt).filter(function(it){return it.indexOf(rt)===0})},tt.parseCandidate=function(nt){var rt;nt.indexOf("a=candidate:")===0?rt=nt.substring(12).split(" "):rt=nt.substring(10).split(" ");for(var it={foundation:rt[0],component:parseInt(rt[1],10),protocol:rt[2].toLowerCase(),priority:parseInt(rt[3],10),ip:rt[4],address:rt[4],port:parseInt(rt[5],10),type:rt[7]},ot=8;ot<rt.length;ot+=2)switch(rt[ot]){case"raddr":it.relatedAddress=rt[ot+1];break;case"rport":it.relatedPort=parseInt(rt[ot+1],10);break;case"tcptype":it.tcpType=rt[ot+1];break;case"ufrag":it.ufrag=rt[ot+1],it.usernameFragment=rt[ot+1];break;default:it[rt[ot]]=rt[ot+1];break}return it},tt.writeCandidate=function(nt){var rt=[];rt.push(nt.foundation),rt.push(nt.component),rt.push(nt.protocol.toUpperCase()),rt.push(nt.priority),rt.push(nt.address||nt.ip),rt.push(nt.port);var it=nt.type;return rt.push("typ"),rt.push(it),it!=="host"&&nt.relatedAddress&&nt.relatedPort&&(rt.push("raddr"),rt.push(nt.relatedAddress),rt.push("rport"),rt.push(nt.relatedPort)),nt.tcpType&&nt.protocol.toLowerCase()==="tcp"&&(rt.push("tcptype"),rt.push(nt.tcpType)),(nt.usernameFragment||nt.ufrag)&&(rt.push("ufrag"),rt.push(nt.usernameFragment||nt.ufrag)),"candidate:"+rt.join(" ")},tt.parseIceOptions=function(nt){return nt.substr(14).split(" ")},tt.parseRtpMap=function(nt){var rt=nt.substr(9).split(" "),it={payloadType:parseInt(rt.shift(),10)};return rt=rt[0].split("/"),it.name=rt[0],it.clockRate=parseInt(rt[1],10),it.channels=rt.length===3?parseInt(rt[2],10):1,it.numChannels=it.channels,it},tt.writeRtpMap=function(nt){var rt=nt.payloadType;nt.preferredPayloadType!==void 0&&(rt=nt.preferredPayloadType);var it=nt.channels||nt.numChannels||1;return"a=rtpmap:"+rt+" "+nt.name+"/"+nt.clockRate+(it!==1?"/"+it:"")+`\r
`},tt.parseExtmap=function(nt){var rt=nt.substr(9).split(" ");return{id:parseInt(rt[0],10),direction:rt[0].indexOf("/")>0?rt[0].split("/")[1]:"sendrecv",uri:rt[1]}},tt.writeExtmap=function(nt){return"a=extmap:"+(nt.id||nt.preferredId)+(nt.direction&&nt.direction!=="sendrecv"?"/"+nt.direction:"")+" "+nt.uri+`\r
`},tt.parseFmtp=function(nt){for(var rt={},it,ot=nt.substr(nt.indexOf(" ")+1).split(";"),st=0;st<ot.length;st++)it=ot[st].trim().split("="),rt[it[0].trim()]=it[1];return rt},tt.writeFmtp=function(nt){var rt="",it=nt.payloadType;if(nt.preferredPayloadType!==void 0&&(it=nt.preferredPayloadType),nt.parameters&&Object.keys(nt.parameters).length){var ot=[];Object.keys(nt.parameters).forEach(function(st){nt.parameters[st]?ot.push(st+"="+nt.parameters[st]):ot.push(st)}),rt+="a=fmtp:"+it+" "+ot.join(";")+`\r
`}return rt},tt.parseRtcpFb=function(nt){var rt=nt.substr(nt.indexOf(" ")+1).split(" ");return{type:rt.shift(),parameter:rt.join(" ")}},tt.writeRtcpFb=function(nt){var rt="",it=nt.payloadType;return nt.preferredPayloadType!==void 0&&(it=nt.preferredPayloadType),nt.rtcpFeedback&&nt.rtcpFeedback.length&&nt.rtcpFeedback.forEach(function(ot){rt+="a=rtcp-fb:"+it+" "+ot.type+(ot.parameter&&ot.parameter.length?" "+ot.parameter:"")+`\r
`}),rt},tt.parseSsrcMedia=function(nt){var rt=nt.indexOf(" "),it={ssrc:parseInt(nt.substr(7,rt-7),10)},ot=nt.indexOf(":",rt);return ot>-1?(it.attribute=nt.substr(rt+1,ot-rt-1),it.value=nt.substr(ot+1)):it.attribute=nt.substr(rt+1),it},tt.parseSsrcGroup=function(nt){var rt=nt.substr(13).split(" ");return{semantics:rt.shift(),ssrcs:rt.map(function(it){return parseInt(it,10)})}},tt.getMid=function(nt){var rt=tt.matchPrefix(nt,"a=mid:")[0];if(rt)return rt.substr(6)},tt.parseFingerprint=function(nt){var rt=nt.substr(14).split(" ");return{algorithm:rt[0].toLowerCase(),value:rt[1]}},tt.getDtlsParameters=function(nt,rt){var it=tt.matchPrefix(nt+rt,"a=fingerprint:");return{role:"auto",fingerprints:it.map(tt.parseFingerprint)}},tt.writeDtlsParameters=function(nt,rt){var it="a=setup:"+rt+`\r
`;return nt.fingerprints.forEach(function(ot){it+="a=fingerprint:"+ot.algorithm+" "+ot.value+`\r
`}),it},tt.parseCryptoLine=function(nt){var rt=nt.substr(9).split(" ");return{tag:parseInt(rt[0],10),cryptoSuite:rt[1],keyParams:rt[2],sessionParams:rt.slice(3)}},tt.writeCryptoLine=function(nt){return"a=crypto:"+nt.tag+" "+nt.cryptoSuite+" "+(typeof nt.keyParams=="object"?tt.writeCryptoKeyParams(nt.keyParams):nt.keyParams)+(nt.sessionParams?" "+nt.sessionParams.join(" "):"")+`\r
`},tt.parseCryptoKeyParams=function(nt){if(nt.indexOf("inline:")!==0)return null;var rt=nt.substr(7).split("|");return{keyMethod:"inline",keySalt:rt[0],lifeTime:rt[1],mkiValue:rt[2]?rt[2].split(":")[0]:void 0,mkiLength:rt[2]?rt[2].split(":")[1]:void 0}},tt.writeCryptoKeyParams=function(nt){return nt.keyMethod+":"+nt.keySalt+(nt.lifeTime?"|"+nt.lifeTime:"")+(nt.mkiValue&&nt.mkiLength?"|"+nt.mkiValue+":"+nt.mkiLength:"")},tt.getCryptoParameters=function(nt,rt){var it=tt.matchPrefix(nt+rt,"a=crypto:");return it.map(tt.parseCryptoLine)},tt.getIceParameters=function(nt,rt){var it=tt.matchPrefix(nt+rt,"a=ice-ufrag:")[0],ot=tt.matchPrefix(nt+rt,"a=ice-pwd:")[0];return it&&ot?{usernameFragment:it.substr(12),password:ot.substr(10)}:null},tt.writeIceParameters=function(nt){return"a=ice-ufrag:"+nt.usernameFragment+`\r
a=ice-pwd:`+nt.password+`\r
`},tt.parseRtpParameters=function(nt){for(var rt={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},it=tt.splitLines(nt),ot=it[0].split(" "),st=3;st<ot.length;st++){var at=ot[st],ct=tt.matchPrefix(nt,"a=rtpmap:"+at+" ")[0];if(ct){var ut=tt.parseRtpMap(ct),lt=tt.matchPrefix(nt,"a=fmtp:"+at+" ");switch(ut.parameters=lt.length?tt.parseFmtp(lt[0]):{},ut.rtcpFeedback=tt.matchPrefix(nt,"a=rtcp-fb:"+at+" ").map(tt.parseRtcpFb),rt.codecs.push(ut),ut.name.toUpperCase()){case"RED":case"ULPFEC":rt.fecMechanisms.push(ut.name.toUpperCase());break}}}return tt.matchPrefix(nt,"a=extmap:").forEach(function(dt){rt.headerExtensions.push(tt.parseExtmap(dt))}),rt},tt.writeRtpDescription=function(nt,rt){var it="";it+="m="+nt+" ",it+=rt.codecs.length>0?"9":"0",it+=" UDP/TLS/RTP/SAVPF ",it+=rt.codecs.map(function(st){return st.preferredPayloadType!==void 0?st.preferredPayloadType:st.payloadType}).join(" ")+`\r
`,it+=`c=IN IP4 0.0.0.0\r
`,it+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,rt.codecs.forEach(function(st){it+=tt.writeRtpMap(st),it+=tt.writeFmtp(st),it+=tt.writeRtcpFb(st)});var ot=0;return rt.codecs.forEach(function(st){st.maxptime>ot&&(ot=st.maxptime)}),ot>0&&(it+="a=maxptime:"+ot+`\r
`),it+=`a=rtcp-mux\r
`,rt.headerExtensions&&rt.headerExtensions.forEach(function(st){it+=tt.writeExtmap(st)}),it},tt.parseRtpEncodingParameters=function(nt){var rt=[],it=tt.parseRtpParameters(nt),ot=it.fecMechanisms.indexOf("RED")!==-1,st=it.fecMechanisms.indexOf("ULPFEC")!==-1,at=tt.matchPrefix(nt,"a=ssrc:").map(function(ft){return tt.parseSsrcMedia(ft)}).filter(function(ft){return ft.attribute==="cname"}),ct=at.length>0&&at[0].ssrc,ut,lt=tt.matchPrefix(nt,"a=ssrc-group:FID").map(function(ft){var St=ft.substr(17).split(" ");return St.map(function(Tt){return parseInt(Tt,10)})});lt.length>0&&lt[0].length>1&&lt[0][0]===ct&&(ut=lt[0][1]),it.codecs.forEach(function(ft){if(ft.name.toUpperCase()==="RTX"&&ft.parameters.apt){var St={ssrc:ct,codecPayloadType:parseInt(ft.parameters.apt,10)};ct&&ut&&(St.rtx={ssrc:ut}),rt.push(St),ot&&(St=JSON.parse(JSON.stringify(St)),St.fec={ssrc:ct,mechanism:st?"red+ulpfec":"red"},rt.push(St))}}),rt.length===0&&ct&&rt.push({ssrc:ct});var dt=tt.matchPrefix(nt,"b=");return dt.length&&(dt[0].indexOf("b=TIAS:")===0?dt=parseInt(dt[0].substr(7),10):dt[0].indexOf("b=AS:")===0?dt=parseInt(dt[0].substr(5),10)*1e3*.95-50*40*8:dt=void 0,rt.forEach(function(ft){ft.maxBitrate=dt})),rt},tt.parseRtcpParameters=function(nt){var rt={},it=tt.matchPrefix(nt,"a=ssrc:").map(function(at){return tt.parseSsrcMedia(at)}).filter(function(at){return at.attribute==="cname"})[0];it&&(rt.cname=it.value,rt.ssrc=it.ssrc);var ot=tt.matchPrefix(nt,"a=rtcp-rsize");rt.reducedSize=ot.length>0,rt.compound=ot.length===0;var st=tt.matchPrefix(nt,"a=rtcp-mux");return rt.mux=st.length>0,rt},tt.parseMsid=function(nt){var rt,it=tt.matchPrefix(nt,"a=msid:");if(it.length===1)return rt=it[0].substr(7).split(" "),{stream:rt[0],track:rt[1]};var ot=tt.matchPrefix(nt,"a=ssrc:").map(function(st){return tt.parseSsrcMedia(st)}).filter(function(st){return st.attribute==="msid"});if(ot.length>0)return rt=ot[0].value.split(" "),{stream:rt[0],track:rt[1]}},tt.parseSctpDescription=function(nt){var rt=tt.parseMLine(nt),it=tt.matchPrefix(nt,"a=max-message-size:"),ot;it.length>0&&(ot=parseInt(it[0].substr(19),10)),isNaN(ot)&&(ot=65536);var st=tt.matchPrefix(nt,"a=sctp-port:");if(st.length>0)return{port:parseInt(st[0].substr(12),10),protocol:rt.fmt,maxMessageSize:ot};var at=tt.matchPrefix(nt,"a=sctpmap:");if(at.length>0){var ct=tt.matchPrefix(nt,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(ct[0],10),protocol:ct[1],maxMessageSize:ot}}},tt.writeSctpDescription=function(nt,rt){var it=[];return nt.protocol!=="DTLS/SCTP"?it=["m="+nt.kind+" 9 "+nt.protocol+" "+rt.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+rt.port+`\r
`]:it=["m="+nt.kind+" 9 "+nt.protocol+" "+rt.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+rt.port+" "+rt.protocol+` 65535\r
`],rt.maxMessageSize!==void 0&&it.push("a=max-message-size:"+rt.maxMessageSize+`\r
`),it.join("")},tt.generateSessionId=function(){return Math.random().toString().substr(2,21)},tt.writeSessionBoilerplate=function(nt,rt,it){var ot,st=rt!==void 0?rt:2;nt?ot=nt:ot=tt.generateSessionId();var at=it||"thisisadapterortc";return`v=0\r
o=`+at+" "+ot+" "+st+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},tt.writeMediaSection=function(nt,rt,it,ot){var st=tt.writeRtpDescription(nt.kind,rt);if(st+=tt.writeIceParameters(nt.iceGatherer.getLocalParameters()),st+=tt.writeDtlsParameters(nt.dtlsTransport.getLocalParameters(),it==="offer"?"actpass":"active"),st+="a=mid:"+nt.mid+`\r
`,nt.direction?st+="a="+nt.direction+`\r
`:nt.rtpSender&&nt.rtpReceiver?st+=`a=sendrecv\r
`:nt.rtpSender?st+=`a=sendonly\r
`:nt.rtpReceiver?st+=`a=recvonly\r
`:st+=`a=inactive\r
`,nt.rtpSender){var at="msid:"+ot.id+" "+nt.rtpSender.track.id+`\r
`;st+="a="+at,st+="a=ssrc:"+nt.sendEncodingParameters[0].ssrc+" "+at,nt.sendEncodingParameters[0].rtx&&(st+="a=ssrc:"+nt.sendEncodingParameters[0].rtx.ssrc+" "+at,st+="a=ssrc-group:FID "+nt.sendEncodingParameters[0].ssrc+" "+nt.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return st+="a=ssrc:"+nt.sendEncodingParameters[0].ssrc+" cname:"+tt.localCName+`\r
`,nt.rtpSender&&nt.sendEncodingParameters[0].rtx&&(st+="a=ssrc:"+nt.sendEncodingParameters[0].rtx.ssrc+" cname:"+tt.localCName+`\r
`),st},tt.getDirection=function(nt,rt){for(var it=tt.splitLines(nt),ot=0;ot<it.length;ot++)switch(it[ot]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return it[ot].substr(2)}return rt?tt.getDirection(rt):"sendrecv"},tt.getKind=function(nt){var rt=tt.splitLines(nt),it=rt[0].split(" ");return it[0].substr(2)},tt.isRejected=function(nt){return nt.split(" ",2)[1]==="0"},tt.parseMLine=function(nt){var rt=tt.splitLines(nt),it=rt[0].substr(2).split(" ");return{kind:it[0],port:parseInt(it[1],10),protocol:it[2],fmt:it.slice(3).join(" ")}},tt.parseOLine=function(nt){var rt=tt.matchPrefix(nt,"o=")[0],it=rt.substr(2).split(" ");return{username:it[0],sessionId:it[1],sessionVersion:parseInt(it[2],10),netType:it[3],addressType:it[4],address:it[5]}},tt.isValidSDP=function(nt){if(typeof nt!="string"||nt.length===0)return!1;for(var rt=tt.splitLines(nt),it=0;it<rt.length;it++)if(rt[it].length<2||rt[it].charAt(1)!=="=")return!1;return!0},_e.exports=tt},function(_e,et,b){_e.exports=function(nt){return["Chrome","Safari","Edge","Opera"].indexOf(nt.browserName)===-1||nt.browserName==="Edge"&&!nt.isChromiumEdge||nt.isScreenSharing&&!nt.capableSimulcastScreenshare||nt.sessionInfo.p2pEnabled||!nt.constraints.video&&!nt.isCustomVideoTrack||nt.scalableVideo===!1?1:nt.videoDimensions.width>640&&nt.videoDimensions.height>480?3:2}},function(_e,et,b){const tt=b(49);_e.exports=function(){function nt(it,ot){var st;let at=ot===void 0?{}:ot,ct=at.requestAnimationFrame,ut=ct===void 0?(st=window).requestAnimationFrame.bind(st):ct;this._lastCalled=tt(),this._audioLevel=void 0,this._running=!1,this._requestAnimationFrame=ut,this._getAudioLevel=it,this._startLoop()}var rt=nt.prototype;return rt._startLoop=function(){this._running||(this._running=!0,this._requestAnimationFrame(this._loop.bind(this)))},rt._loop=function(){this._getAudioLevel((ot,st)=>{let at=null;if(!ot){for(let ct=0;ct<st.length;ct+=1){const ut=st[ct];let lt=null;if(ut.audioOutputLevel!==void 0){const dt=parseFloat(ut.audioOutputLevel)/32768;isNaN(dt)||(lt=dt)}else ut.audioLevel!==void 0&&(lt=ut.audioLevel);lt!==null&&(at===null||lt>at)&&(at=lt)}this._audioLevel=at,this._running&&tt()-this._lastCalled<1e4?this._requestAnimationFrame(this._loop.bind(this)):this._running=!1}})},rt.destroy=function(){this._running=!1},rt.sample=function(ot){if(typeof ot=="function")throw new Error("sample no longer takes a callback");return this._startLoop(),this._lastCalled=tt(),this._audioLevel},nt}()},function(_e,et,b){const tt=b(254),nt=b(582),rt=b(149);function it(ct,ut,lt){return!ct.publish&&ut?!1:typeof ct.source=="boolean"?ct.source:lt?{mandatory:{sourceId:ct.source}}:rt(ct.source)?{}:{deviceId:{exact:ct.source}}}function ot(ct){let ut=it(ct.audio,ct.enableRenegotiation,ct.usingOptionalMandatoryStyle);if(ut===!1)return!1;const lt=ct.usingOptionalMandatoryStyle,dt=ct.enableStereo,ft=ct.echoCancellation,St=ct.noiseSuppression,Tt=ct.autoGainControl,pt=ct.disableAudioProcessing,gt=yt=>{typeof ut=="object"&&(lt?(tt(ut,{optional:[]}),ut.optional.push(yt)):tt(ut,yt))};return(dt||pt||!ft||!St||!Tt)&&ut===!0&&(ut={}),dt&&gt({channelCount:2}),["echoCancellation","autoGainControl","noiseSuppression"].forEach(yt=>{const Et=!pt&&ct[yt];gt({[yt]:Et})}),ut}function st(ct){let ut=it(ct.video,ct.enableRenegotiation,ct.usingOptionalMandatoryStyle);if(ut===!1)return!1;const lt=ct.videoDimensions,dt=ct.frameRate,ft=ct.maxResolution,St=ct.facingMode,Tt=ct.usingOptionalMandatoryStyle;if((lt||dt||ft||St)&&ut===!0&&(ut={}),lt){const pt=lt.width,gt=lt.height;Tt?(tt(ut,{optional:[]}),ut.optional.push({minWidth:pt},{maxWidth:pt},{minHeight:gt},{maxHeight:gt})):tt(ut,{width:{ideal:pt},height:{ideal:gt}})}return dt&&(Tt?(tt(ut,{optional:[]}),ut.optional.push({minFrameRate:dt},{maxFrameRate:dt})):tt(ut,{frameRate:{ideal:dt}})),ft&&(Tt?tt(ut,{mandatory:{maxWidth:ft.width,maxHeight:ft.height}}):tt(ut,{width:{max:ft.width},height:{max:ft.height}})),St&&(Tt?(tt(ut,{optional:[]}),ut.optional.push({facingMode:St})):tt(ut,{facingMode:{ideal:St}})),ut}function at(ct){return{audio:ot(ct),video:st(ct)}}_e.exports=function(ut){const lt=nt(ut);return{constraints:at(lt),publishAudio:lt.audio.publish,publishVideo:lt.video.publish,frameRate:lt.frameRate,videoDimensions:lt.videoDimensions,audioDeviceId:typeof lt.audio.source=="string"?lt.audio.source:void 0,videoDeviceId:typeof lt.video.source=="string"?lt.video.source:void 0}}},function(_e,et,b){var tt=b(579),nt=b(191),rt=nt(function(it,ot,st){tt(it,ot,st)});_e.exports=rt},function(_e,et,b){var tt=b(62),nt=b(52);function rt(it,ot,st){(st!==void 0&&!nt(it[ot],st)||st===void 0&&!(ot in it))&&tt(it,ot,st)}_e.exports=rt},function(_e,et){function b(tt,nt){if(!(nt==="constructor"&&typeof tt[nt]=="function")&&nt!="__proto__")return tt[nt]}_e.exports=b},function(_e,et,b){const tt=b(2),nt=tt.name,rt=tt.version,it=tt.isChromiumEdge;_e.exports=it||nt==="Chrome"&&rt>=72||nt==="Firefox"&&rt>=66||nt==="Opera"&&rt>=60||nt==="Safari"},function(_e,et,b){var tt=b(59),nt=b(259);function rt(it){return nt(tt(it).toLowerCase())}_e.exports=rt},function(_e,et,b){var tt=b(587),nt=tt("toUpperCase");_e.exports=nt},function(_e,et){function b(tt,nt,rt){var it=-1,ot=tt.length;nt<0&&(nt=-nt>ot?0:ot+nt),rt=rt>ot?ot:rt,rt<0&&(rt+=ot),ot=nt>rt?0:rt-nt>>>0,nt>>>=0;for(var st=Array(ot);++it<ot;)st[it]=tt[it+nt];return st}_e.exports=b},function(_e,et){var b="\\ud800-\\udfff",tt="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",rt="\\u20d0-\\u20ff",it=tt+nt+rt,ot="\\ufe0e\\ufe0f",st="\\u200d",at=RegExp("["+st+b+it+ot+"]");function ct(ut){return at.test(ut)}_e.exports=ct},function(_e,et,b){var tt=b(589),nt=b(261),rt=b(590);function it(ot){return nt(ot)?rt(ot):tt(ot)}_e.exports=it},function(_e,et,b){const tt=b(2);_e.exports=!!(tt.isChrome&&tt.version>=74||tt.isEdge&&tt.version>=79)},function(_e,et,b){const tt=b(2);_e.exports=nt=>tt.isElectron?nt instanceof MediaStreamTrack&&nt.label==="Screen":!1},function(_e,et,b){var tt=b(99),nt=b(596),rt=nt(tt);_e.exports=rt},function(_e,et,b){_e.exports=15e3},function(_e,et,b){_e.exports=function(tt,nt){return nt===void 0&&(nt=!1),tt===void 0?nt:tt==="true"||tt===!0}},function(_e,et,b){const tt=b(56);_e.exports=function(rt){const it=tt(rt);if(it.backgroundImageURI){const ot=it.backgroundImageURI.split(":")[0];it.backgroundImageURI=["http","https","data"].indexOf(ot)!==-1?ot:"other"}return it}},function(_e,et,b){const tt=b(2);_e.exports=()=>!tt.isNode&&!tt.isElectron?(tt.isChrome||tt.isOpera||tt.isChromiumEdge)&&tt.version>=74||tt.isFirefox&&tt.version>=68||tt.isSafari&&tt.version>=11:!1},function(_e,et){function b(tt,nt){return _e.exports=b=Object.setPrototypeOf||function(it,ot){return it.__proto__=ot,it},b(tt,nt)}_e.exports=b},function(_e,et,b){var tt=b(33),nt=b(77),rt=b(612),it=b(58),ot=b(40),st=b(615),at=b(140),ct=b(184),ut=1,lt=2,dt=4,ft=at(function(St,Tt){var pt={};if(St==null)return pt;var gt=!1;Tt=tt(Tt,function(Et){return Et=it(Et,St),gt||(gt=Et.length>1),Et}),ot(St,ct(St),pt),gt&&(pt=nt(pt,ut|lt|dt,st));for(var yt=Tt.length;yt--;)rt(pt,Tt[yt]);return pt});_e.exports=ft},function(_e,et,b){var tt=b(205),nt=b(35),rt=b(96),it=Math.max;function ot(st,at,ct){var ut=st==null?0:st.length;if(!ut)return-1;var lt=ct==null?0:rt(ct);return lt<0&&(lt=it(ut+lt,0)),tt(st,nt(at,3),lt)}_e.exports=ot},function(_e,et,b){var tt=b(617);function nt(rt){return rt&&rt.length?tt(rt):[]}_e.exports=nt},function(_e,et,b){const tt=b(624),nt=b(277),rt=b(103)();_e.exports=(it,ot)=>{nt(it,(st,at)=>{let ct=[];rt?typeof at.values=="function"?ct=tt(at.values()):typeof at.forEach!="function"?ct=Object.keys(at).map(ut=>at[ut]):at.forEach(ut=>{ct.push(ut)}):at.result().forEach(ut=>{const lt={};ut.names().forEach(dt=>{lt[dt]=ut.stat(dt)}),lt.id=ut.id,lt.type=ut.type,lt.timestamp=ut.timestamp,ct.push(lt)}),ot(null,ct)})}},function(_e,et,b){var tt=b(29),nt=b(12),rt=b(17),it="[object String]";function ot(st){return typeof st=="string"||!nt(st)&&rt(st)&&tt(st)==it}_e.exports=ot},function(_e,et,b){var tt=b(626),nt=b(30);function rt(it){return it==null?[]:tt(it,nt(it))}_e.exports=rt},function(_e,et,b){const tt=b(103)(),nt=(ot,st)=>{ot.getStats(null).then(at=>st(null,at)).catch(st)},rt=(ot,st)=>{ot.getStats(at=>{st(null,at)},st)},it=(ot,st)=>{(tt?nt:rt)(ot,st)};_e.exports=it},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(48)),rt=b(18),it=tt(b(37)),ot=tt(b(638)),st=tt(b(640)),at=tt(b(49)),ct=tt(b(1));const ut=(0,ct.default)("QoS");let lt=function(ft){(0,nt.default)(St,ft);function St(){for(var pt,gt=arguments.length,yt=new Array(gt),Et=0;Et<gt;Et++)yt[Et]=arguments[Et];return pt=ft.call(this,...yt)||this,pt._peerConnection=void 0,pt._isPublisher=void 0,pt.timeoutId=void 0,pt._creationTime=(0,at.default)(),pt.offerMessagesReceived=0,pt.prevStats={timeStamp:(0,at.default)()},pt.changeCounters={videoCodec:new st.default,audioCodec:new st.default},pt}var Tt=St.prototype;return Tt.startCollecting=function(gt,yt){if(!gt||!gt.getStats)return;this._isPublisher=yt;const Et=!!this._peerConnection;if(this._peerConnection=gt,Et)return;const It=Gt=>{const Wt=(0,at.default)(),At={timeStamp:Wt,duration:Math.round((Wt-this._creationTime)/1e3),period:Math.round((Wt-this.prevStats.timeStamp)/1e3)};(0,ot.default)(this._peerConnection,this.prevStats,At,this._isPublisher,(kt,Vt)=>{if(kt){ut.error("Failed to Parse QOS Stats:",kt);return}this.handleParsedStats(Vt),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>It(St.INTERVAL),Gt)})};this.timeoutId=setTimeout(()=>It(St.INTERVAL-St.INITIAL_INTERVAL),St.INITIAL_INTERVAL)},Tt.stopCollecting=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this._peerConnection=null},Tt.handleOfferMessageReceived=function(){this.offerMessagesReceived+=1},Tt.handleParsedStats=function(gt){Object.keys(this.changeCounters).forEach(It=>{this.changeCounters[It].onValue(gt[It]),gt[`${It}ChangeCount`]=this.changeCounters[It].changeCount}),gt.offerMessagesReceived=this.offerMessagesReceived;const yt=(0,it.default)(gt);if(["audioSentBytes","audioSentPackets","audioSentPacketsLost","videoSentBytes","videoSentPackets","videoSentPacketsLost","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost"].forEach(It=>{yt[It]=this.prevStats&&this.prevStats[It]?gt[It]-this.prevStats[It]:gt[It]}),this.prevStats&&this.prevStats.videoFramesReceived){const It=gt.videoFramesReceived-this.prevStats.videoFramesReceived,Gt=gt.period;yt.videoFrameRateReceived=Math.round(It/Gt)}this.prevStats=gt,delete yt.framesDecoded,delete yt.framesEncoded,this.emit("stats",yt)},St}(rt.EventEmitter);lt.INITIAL_INTERVAL=1e3,lt.INTERVAL=3e4;var dt=lt;et.default=dt},function(_e,et,b){_e.exports=tt=>{switch(tt>>24){case 0:return"TURN/TLS";case 1:return"TURN/TCP";case 2:return"TURN/UDP";default:return""}}},function(_e,et,b){const tt=b(15),nt=b(159),rt=nt.default,it=b(7),ot=b(13);_e.exports=function(at){let ct=at===void 0?{}:at,ut=ct.haveGetDisplayMedia,lt=ut===void 0?rt:ut,dt=ct.global,ft=dt===void 0?typeof window!==void 0?window:commonjsGlobal:dt,St=ct.Errors,Tt=St===void 0?it:St,pt=ct.otError,gt=pt===void 0?ot():pt;const yt=!lt&&!!ft.navigator.webkitGetUserMedia&&!ft.navigator.userAgent.match(/android/i)&&typeof ft.chrome<"u";return{isSupportedInThisBrowser:yt,autoRegisters:!1,extensionRequired:!0,getConstraintsShowsPermissionUI:!0,sources:{screen:!0,application:!1,window:!0,browser:!0},register(Et,It){return It===2?this.registerVersion2(Et):this.registerVersion1(Et)},registerVersion1(Et){if(!Et)throw new Error("initChromeScreenSharingExtensionHelper: extensionID is required.");const It=yt,Gt={};let Wt;const At=`com.tokbox.screenSharing.${Et}`,kt=function(Kt,cn){const an={payload:cn,from:"jsapi"};return an[At]=Kt,an},Vt=function(Kt,cn){let an;const mn=tt();return Gt[mn]=function(){clearTimeout(an),an=null,Kt(...arguments)},cn&&(an=setTimeout(()=>{delete Gt[mn],Kt(gt(Tt.TIMEOUT,new Error("Timeout waiting for response to screensharing request.")))},cn)),mn},Nt=function(Kt){if(!Kt)throw new Error("isAvailable: callback is required.");if(!It){setTimeout(Kt.bind(null,!1));return}if(Wt!==void 0)setTimeout(Kt.bind(null,Wt));else{const cn=Vt(mn=>{Wt!==!0&&(Wt=mn==="extensionLoaded"),Kt(Wt)},2e3),an=kt("isExtensionInstalled",{requestId:cn});ft.postMessage(an,"*")}},tn=function(Kt,cn,an){if(!an)throw new Error("getSourceId: callback is required");Nt(mn=>{if(!mn)return an(gt(Tt.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));const on=Vt((yn,fn)=>{typeof yn=="object"&&yn.name&&yn.stack?an(yn):yn==="permissionDenied"?an(gt(Tt.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):(cn.video||(cn.video={}),cn.video.mandatory||(cn.video.mandatory={}),cn.video.mandatory.chromeMediaSource="desktop",cn.video.mandatory.chromeMediaSourceId=fn.sourceId,an(void 0,cn))});ft.postMessage(kt("getSourceId",{requestId:on,source:Kt}),"*")})};return ft.addEventListener("message",_t=>{if(_t.origin!==ft.location.origin||!(_t.data!=null&&typeof _t.data=="object")||_t.data.from!=="extension")return;const Kt=_t.data[At],cn=_t.data.payload;if(cn&&cn.requestId){const an=Gt[cn.requestId];delete Gt[cn.requestId],an&&an(Kt,cn)}Kt==="extensionLoaded"&&(Wt=!0)}),{extensionAPIVersion:1,extensionID:Et,isInstalled:Nt,getConstraints:tn}},registerVersion2(Et){const It=yt&&typeof ft.chrome.runtime<"u",Gt=function(kt){if(!kt)throw new Error("isAvailable: callback is required.");if(!It){setTimeout(kt.bind(null,!1));return}ft.chrome.runtime.sendMessage(Et,{type:"isInstalled"},null,Vt=>{setTimeout(kt.bind(null,!!Vt))})};return{extensionAPIVersion:2,extensionID:Et,isInstalled:Gt,getConstraints:function(kt,Vt,Nt){if(!Nt)throw new Error("getSourceId: callback is required");Gt(tn=>{if(!tn)return Nt(gt(Tt.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));ft.chrome.runtime.sendMessage(Et,{type:"getSourceId",source:kt},null,_t=>{_t.error==="permissionDenied"?Nt(gt(Tt.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):_t.error?Nt(new Error(`UnexpectError: ${_t.error}`)):(Vt.video||(Vt.video={}),Vt.video.mandatory||(Vt.video.mandatory={}),Vt.video.mandatory.chromeMediaSource="desktop",Vt.video.mandatory.chromeMediaSourceId=_t.sourceId,Nt(void 0,Vt))})})}}}}}},function(_e,et,b){(function(tt){const nt=b(155),rt=b(104);_e.exports=function(ot){ot===void 0&&(ot={});const st=ot.Archiving||b(645),at=ot.AudioLevelMeter||b(282),ct=ot.AudioLevelTransformer||b(144),ut=ot.BackingBar||b(283),lt=ot.Chrome||b(145),dt=ot.MuteButton||b(284)(),ft=ot.NamePanel||b(285),St=ot.VideoDisabledIndicator||b(286),Tt=ot.StylableComponent||b(152),pt=ot.logging||b(1)("createChromeMixin");return function(yt,Et){let It=Et===void 0?{}:Et,Gt=It.name,Wt=It.publishAudio,At=It.publishVideo,kt=It.audioSource,Vt=It.showControls,Nt=It.shouldAllowAudio,tn=It.logAnalyticsEvent,_t,Kt,cn;const an={},mn=nt(),on=sn=>{if(sn===!1)return"off";const un=yt.getStyle("buttonDisplayMode");return un===!1?"on":un};let yn=new tt((sn,un)=>{an.init=Ln=>{yt.getStyle("showArchiveStatus")||tn("showArchiveStatus","createChrome",{mode:"off"});const Xn={backingBar:new ut({nameMode:Gt?yt.getStyle("nameDisplayMode"):"off",muteMode:on(yt.getStyle("buttonDisplayMode"))}),name:new ft({name:Gt,mode:yt.getStyle("nameDisplayMode")}),archive:new st({show:!!yt.getStyle("showArchiveStatus")&&yt.getStyle("archiveStatusDisplayMode")!=="off",archiving:!1}),muteButton:new dt({muted:Wt===!1,mode:on.call(null,yt.getStyle("buttonDisplayMode"))})};_t=new at({mode:yt.getStyle("audioLevelDisplayMode")});const pn=new ct,Vn=new rt(()=>{const Tn=Wt?pn.transform(yt.loudness):0;_t.setValue(Tn)});_t.watchVisibilityChanged(Tn=>{Tn?Vn.start():Vn.stop()}),_t.audioOnly(!At&&Wt),Xn.audioLevel=_t,Xn.videoDisabledIndicator=new St({mode:yt.getStyle("videoDisabledDisplayMode")}),Ln&&Ln.domElement&&(cn=Ln,Kt=new lt({parent:cn.domElement}).set(Xn).on({muted:()=>yt.publishAudio(!1),unmuted:()=>yt.publishAudio(!0)}),(kt===null||kt===!1)&&an.removeAudioTrack(),sn())},an.reset=()=>{un(new Error("Chrome still being created")),Kt&&(Kt.destroy(),Kt=null)},an.destroy=()=>{an.reset(),mn.releaseAll(),yn=null}});yn.catch(sn=>{(!sn||sn.message!=="Chrome still being created")&&pt.error("createChromeMixin failed to setup UI",sn)}),an.setAudioOnly=sn=>{_t&&_t.audioOnly(sn)},an.setArchivingStatus=sn=>{Kt&&Kt.archive.setArchiving(sn)},an.setMuted=sn=>{Kt&&Kt.muteButton&&Kt.muteButton.muted(sn)},an.removeAudioTrack=()=>{Kt&&Kt.muteButton&&Kt.muteButton.remove()},an.addAudioTrack=()=>{Kt&&Kt.muteButton&&Kt.muteButton.add()},an.videoDisabledIndicator={disableVideo:function(){for(var un,Ln=arguments.length,Xn=new Array(Ln),pn=0;pn<Ln;pn++)Xn[pn]=arguments[pn];return(un=Kt)==null?void 0:un.videoDisabledIndicator.disableVideo(...Xn)},setWarning:function(){for(var un,Ln=arguments.length,Xn=new Array(Ln),pn=0;pn<Ln;pn++)Xn[pn]=arguments[pn];return(un=Kt)==null?void 0:un.videoDisabledIndicator.setWarning(...Xn)}},Tt(yt,{showArchiveStatus:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioLevelDisplayMode:Nt?"auto":"off",archiveStatusDisplayMode:"auto",backgroundImageURI:null},Vt,sn=>{tn("SetStyle","Publisher",sn,null,.1)});const fn=(sn,un)=>{yn.then(()=>{switch(sn){case"nameDisplayMode":Kt.name.setDisplayMode(un),Kt.backingBar.setNameMode(un);break;case"showArchiveStatus":tn("showArchiveStatus","styleChange",{mode:un?"on":"off"}),Kt.archive.setShowArchiveStatus(!!un);break;case"archiveStatusDisplayMode":Kt.archive.setShowArchiveStatus(un!=="off");break;case"buttonDisplayMode":Kt.muteButton.setDisplayMode(un),Kt.backingBar.setMuteMode(un);break;case"audioLevelDisplayMode":Kt.audioLevel.setDisplayMode(un);break;case"backgroundImageURI":cn.setBackgroundImageURI(un);break}})};return yt.on("styleValueChanged",fn),mn.add(()=>yt.off("styleValueChanged",fn)),an}}}).call(this,b(0))},function(_e,et,b){(function(tt){const nt=b(105),rt=b(36),it=b(8),ot=b(18);_e.exports=function(at){const ct=this,ut=new ot;let lt,dt,ft,St,Tt=!0,pt=!1,gt="auto";const yt=at.maxValue||1,Et=at.minValue||0;function It(){dt=it.createElement("div",{className:"OT_audio-level-meter__value"},""),lt=it.createElement("div",{className:"OT_audio-level-meter__audio-only-img"},"");const Vt=ct.domElement;Vt.appendChild(lt),Vt.appendChild(dt),ct.watchVisibilityChanged(Nt=>{Nt?it.removeClass(ct.domElement,"OT_hide-forced"):it.addClass(ct.domElement,"OT_hide-forced")})}function Gt(){ut.removeAllListeners("visibilityChanged")}function Wt(){const Vt=(ft-Et)/(yt-Et);dt.style.transform=`scale(${Math.sqrt(Vt)})`}function At(){const Vt=(pt&&gt==="auto"||gt==="on")&&Tt;St!==Vt&&(St=Vt,ut.emit("visibilityChanged",Vt))}nt(ct,{audioOnly:{get(){return pt},set(Vt){pt=Vt,At()}}}),ct.setValue=function(Vt){ft=Vt,Wt()},ct.watchVisibilityChanged=function(Vt){return ut.on("visibilityChanged",Vt),tt.resolve().then(()=>{Vt(St)}),function(){ut.removeListener("visibilityChanged",Vt)}};const kt={mode:at?at.mode:"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-level-meter"},onCreate:It,onDestroy:Gt};rt(this,kt),ct.setDisplayMode=function(Vt){gt=Vt,At()},ct.getDisplayMode=function(){return gt},ct.showAfterLoading=function(){Tt=!0,At()},ct.hideWhileLoading=function(){Tt=!1,At()},At()}}).call(this,b(0))},function(_e,et,b){const tt=b(36);_e.exports=function(rt){let it=rt.nameMode,ot=rt.muteMode;function st(){return it==="on"||ot==="on"?"on":it==="mini"||ot==="mini"?"mini":it==="mini-auto"||ot==="mini-auto"?"mini-auto":it==="auto"||ot==="auto"?"auto":"off"}tt(this,{mode:st(),nodeName:"div",htmlContent:"",htmlAttributes:{className:"OT_bar OT_edge-bar-item"}}),this.setNameMode=function(at){it=at,this.setDisplayMode(st())},this.setMuteMode=function(at){ot=at,this.setDisplayMode(st())}}},function(_e,et,b){const tt=b(8),nt=b(36),rt=b(105);_e.exports=function(ot){ot===void 0&&(ot={});const st=ot.OTHelpers||tt,at=ot.Widget||nt;return function(ut){let lt=ut.muted||!1;const dt=()=>{lt?st.addClass(this.domElement,"OT_active"):st.removeClass(this.domElement,"OT_active ")},ft=()=>(lt=!lt,dt(),lt?this.parent.trigger("muted",this):this.parent.trigger("unmuted",this),!1),St=yt=>{st.on(yt,"click",ft)},Tt=yt=>{st.off(yt,"click",ft)};rt(this,{muted:{get(){return lt},set(yt){lt=yt,dt()}}});const pt=lt?"OT_edge-bar-item OT_mute OT_active":"OT_edge-bar-item OT_mute";at(this,{mode:ut.mode,nodeName:"button",htmlContent:"Mute",htmlAttributes:{className:pt,type:"button"},onCreate:St,onDestroy:Tt});let gt;this.remove=()=>{this.domElement&&this.domElement.parentNode&&(gt=this.domElement.parentNode,this.domElement.parentNode.removeChild(this.domElement))},this.add=()=>{gt&&this.domElement&&!this.domElement.parentNode&&gt.appendChild(this.domElement)}}}},function(_e,et,b){const tt=b(36),nt=rt=>{const it=document.createElement("div");return it.textContent=rt,it.innerHTML};_e.exports=function(it){let ot=it.name;(!ot||ot.trim().length==="")&&(ot=null,it.mode="off"),this.setName=function(st){ot||this.setDisplayMode("auto"),ot=nt(st),this.domElement.innerHTML=ot}.bind(this),ot=nt(ot),tt(this,{mode:it.mode,nodeName:"h1",htmlContent:ot,htmlAttributes:{className:"OT_name OT_edge-bar-item"}})}},function(_e,et,b){const tt=b(36),nt=b(8);_e.exports=function(it){let ot=!1,st=!1;const at=function(ut){const lt=["auto","on"].indexOf(this.getDisplayMode())>-1;nt.removeClass(ut,"OT_video-disabled OT_video-disabled-warning OT_active"),lt&&(ot?nt.addClass(ut,"OT_video-disabled"):st&&nt.addClass(ut,"OT_video-disabled-warning"),nt.addClass(ut,"OT_active"))}.bind(this);this.disableVideo=function(ut){ot=ut,ut===!0&&(st=!1),at(this.domElement)},this.setWarning=function(ut){st=ut,at(this.domElement)},tt(this,{mode:it.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-disabled-indicator"}});const ct=this.setDisplayMode.bind(this);this.setDisplayMode=function(ut){ct(ut),at(this.domElement)}}},function(_e,et,b){_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt.global||(typeof window!==void 0?window:commonjsGlobal);return function(){if(rt.navigator.mediaDevices){const ot=rt.navigator.mediaDevices;return ot.enumerateDevices&&ot.enumerateDevices.bind(ot)}}}},function(_e,et,b){const tt=b(2),nt=b(159).default,rt=()=>!tt.isLegacyEdge&&!tt.isElectron&&nt&&!tt.isAndroid;_e.exports={isSupportedInThisBrowser:rt(),autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:tt.name!=="Safari",browser:tt.name!=="Safari"},register(){return{isInstalled(it){it(void 0)},getConstraints(it,ot,st){st(void 0,{video:ot.video,audio:ot.audio})}}}}},function(_e,et,b){const tt=nt=>nt&&typeof nt=="object"&&typeof nt.kind=="string"&&typeof nt.stop=="function"&&typeof nt.enabled=="boolean";et.isMediaStreamTrack=tt},function(_e,et,b){b.r(et),function(tt){var nt=function(at,ct,ut,lt){return new(ut||(ut=tt))(function(dt,ft){function St(gt){try{pt(lt.next(gt))}catch(yt){ft(yt)}}function Tt(gt){try{pt(lt.throw(gt))}catch(yt){ft(yt)}}function pt(gt){gt.done?dt(gt.value):new ut(function(yt){yt(gt.value)}).then(St,Tt)}pt((lt=lt.apply(at,ct||[])).next())})},rt=function(at,ct){var ut={label:0,sent:function(){if(ft[0]&1)throw ft[1];return ft[1]},trys:[],ops:[]},lt,dt,ft,St;return St={next:Tt(0),throw:Tt(1),return:Tt(2)},typeof Symbol=="function"&&(St[Symbol.iterator]=function(){return this}),St;function Tt(gt){return function(yt){return pt([gt,yt])}}function pt(gt){if(lt)throw new TypeError("Generator is already executing.");for(;ut;)try{if(lt=1,dt&&(ft=dt[gt[0]&2?"return":gt[0]?"throw":"next"])&&!(ft=ft.call(dt,gt[1])).done)return ft;switch(dt=0,ft&&(gt=[0,ft.value]),gt[0]){case 0:case 1:ft=gt;break;case 4:return ut.label++,{value:gt[1],done:!1};case 5:ut.label++,dt=gt[1],gt=[0];continue;case 7:gt=ut.ops.pop(),ut.trys.pop();continue;default:if(ft=ut.trys,!(ft=ft.length>0&&ft[ft.length-1])&&(gt[0]===6||gt[0]===2)){ut=0;continue}if(gt[0]===3&&(!ft||gt[1]>ft[0]&&gt[1]<ft[3])){ut.label=gt[1];break}if(gt[0]===6&&ut.label<ft[1]){ut.label=ft[1],ft=gt;break}if(ft&&ut.label<ft[2]){ut.label=ft[2],ut.ops.push(gt);break}ft[2]&&ut.ops.pop(),ut.trys.pop();continue}gt=ct.call(at,ut)}catch(yt){gt=[6,yt],dt=0}finally{lt=ft=0}if(gt[0]&5)throw gt[1];return{value:gt[0]?gt[1]:void 0,done:!0}}};function it(){return typeof window<"u"||typeof window!==void 0?window:commonjsGlobal}var ot="onFailure must return boolean, or delay in ms";function st(at,ct,ut){return ut===void 0&&(ut=10),function(){for(var lt=[],dt=0;dt<arguments.length;dt++)lt[dt]=arguments[dt];return nt(this,void 0,void 0,function(){var ft,St,Tt;return rt(this,function(pt){switch(pt.label){case 0:ft=0,St=function(){var gt,yt,Et;return rt(this,function(It){switch(It.label){case 0:return It.trys.push([0,2,,6]),gt={},[4,at.apply(void 0,lt)];case 1:return[2,(gt.value=It.sent(),gt)];case 2:if(yt=It.sent(),Et=ct(yt,ft),Et===!1||Et==null||ft>=ut)throw yt;return typeof Et!="number"?[3,4]:[4,new tt(function(Gt){return it().setTimeout(Gt,Et)})];case 3:return It.sent(),[3,5];case 4:if(Et!==!0)throw new Error(ot);It.label=5;case 5:return[3,6];case 6:return[2]}})},pt.label=1;case 1:return(ft+=1)?[5,St()]:[3,3];case 2:return Tt=pt.sent(),typeof Tt=="object"?[2,Tt.value]:[3,1];case 3:return[2]}})})}}et.default=st}.call(this,b(0))},function(_e,et,b){const tt=b(1)("videoContentHint"),nt=["","text","motion","detail"],rt=at=>nt.includes(at),it=at=>{var ct;return at==null||(ct=at.getVideoTracks())==null?void 0:ct[0]},ot=(at,ct)=>{if(!rt(ct)){tt.warn('Invalid content hint. Valid content hints are "text", "detail", "motion", or ""');return}const ut=it(at);if(!ut){tt.warn("Tried to set contentHint but no video track is present");return}if(ut.contentHint===void 0){tt.warn("contentHint not supported by this browser");return}ut.contentHint=ct},st=at=>{const ct=it(at);return(ct==null?void 0:ct.contentHint)||""};_e.exports={isValidVideoContentHint:rt,setVideoContentHint:ot,getVideoContentHint:st}},function(_e,et,b){const tt=b(105);_e.exports=function(){return function(it,ot){let st;tt(this,{muted:{get(){return st},set(at){if(st===at)return;st=at;const ct=it.getAudioTracks();for(let ut=0,lt=ct.length;ut<lt;++ut)ct[ut].enabled=!st}}}),ot!==void 0?this.muted(ot===!0):it.getAudioTracks().length?this.muted(!it.getAudioTracks()[0].enabled):this.muted(!1)}}},function(_e,et,b){_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt.Errors||b(7),it=nt.otError||b(13)(),ot={};return(typeof window!==void 0?window:commonjsGlobal).MediaError&&(ot[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_ABORTED]={name:rt.MEDIA_ERR_ABORTED,message:"The fetching process for the media resource was aborted by the user agent at the user's request."},ot[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_NETWORK]={name:rt.MEDIA_ERR_NETWORK,message:"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable."},ot[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_DECODE]={name:rt.MEDIA_ERR_DECODE,message:"An error of some description occurred while decoding the media resource, after the resource was established to be usable."},ot[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]={name:rt.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"The media resource indicated by the src attribute was not suitable."}),function(at){const ct=ot[at.code];return ct?it(ct.name,new Error(`There was an unexpected problem with the Video Stream: ${ct.message}`)):new Error(`An unknown error occurred${at.message?`: ${at.message}`:"."}`)}}},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5));const ot=b(6),st=b(61),at=b(656),ct=b(657),ut=b(658),lt=b(107),dt=b(2),ft=b(24)(),St=ft.hasAudioOutputApiSupport,Tt=b(295),pt=b(106),gt=pt.getCurrentAudioOutputDeviceId;function yt(Gt,Wt){const At=document.createElement("video");return ct(At),At.autoplay=!0,At.playsinline=!0,At.innerHTML=Gt,At.setAttribute("autoplay",""),At.setAttribute("playsinline",""),Wt===!0&&(At.muted="true"),At}function Et(){const Gt=yt("");return Gt.setAttribute("style","display:none"),Gt}function It(Gt){Gt===void 0&&(Gt={});const Wt=Gt.audioContext||b(158)(),At=Gt.canBeOrientatedMixin||b(659),kt=Gt.document||(typeof window!==void 0?window:commonjsGlobal).document,Vt=Gt.listenForTracksEnded||b(660)(),Nt=Gt.logging||b(1),tn=Gt.OTHelpers||b(8),_t=Gt.videoElementErrorMap||b(293)(),Kt=Gt.WebaudioAudioLevelSampler||b(146),cn=Gt.global||(typeof window!==void 0?window:commonjsGlobal);let an=1;return function(){function on(fn,sn){var un=this;let Ln=fn._inject,Xn=Ln===void 0?{}:Ln,pn=Xn.createVideoElement,Vn=pn===void 0?yt:pn,Tn=Xn.createAudioOnlyVideoElement,Jn=Tn===void 0?Et:Tn,lr=fn.muted,tr=fn.fallbackText,Qn=fn.widgetType;this._domElement=void 0,this._domAudioOnlyVideoElement=void 0,this._blockedVolume=void 0,this._mediaStoppedListener=void 0,this._audioLevelSampler=void 0,this._playInterrupts=0,this._isVideoLoadedMetaData=!1,this._audioOnlyVideoElementWatcher=void 0,this._blinkStartTime=null,this.logging=Nt(`NativeVideoElementWrapper:${an}`),an+=1,ot(this),this._defaultAudioVolume=sn,this._widgetType=Qn,this._emitVideoPlayAttempt=()=>{this._blinkStartTime=new Date().getTime(),this.trigger("amrLogEvent","AMRTransitionVideo","Attempt")},this._emitVideoPlaySuccess=()=>{const kr=new Date().getTime()-this._blinkStartTime;this.trigger("amrLogEvent","AMRTransitionVideo","Success",{attemptDuration:kr}),this._blinkStartTime=null},this._emitVideoPlayFailure=()=>{this.trigger("amrLogEvent","AMRTransitionVideo","Failure")};let Sr=!1;const vr=()=>{Sr||(this.logging.warn("Video element paused, auto-resuming. If you intended to do this, use publishVideo(false) or subscribeToVideo(false) instead."),Sr=!0),this.play()};this._domElement=Vn(tr,lr),this.trigger("videoElementCreated",this._domElement),this._domElementEvents=st(this._domElement),this._domElementEvents.on("loadstart",()=>this._onDomElementLoadStart()),this._domElementEvents.on("timeupdate",function(){for(var kr=arguments.length,jr=new Array(kr),xo=0;xo<kr;xo++)jr[xo]=arguments[xo];return un.trigger("timeupdate",...jr)}),this._domElementEvents.on("loadedmetadata",(0,it.default)(rt.default.mark(function kr(){var jr,xo,Er,xr,Un=arguments;return rt.default.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:for(un._isVideoLoadedMetaData=!0,jr=Un.length,xo=new Array(jr),Er=0;Er<jr;Er++)xo[Er]=Un[Er];if(un.trigger("loadedmetadata",...xo),!un._domAudioOnlyVideoElement){sr.next=10;break}if(xr=un._domAudioOnlyVideoElement.srcObject,un._removeAudioOnlyVideoElement(),!xr){sr.next=10;break}return sr.next=9,Tt();case 9:un.play();case 10:case"end":return sr.stop()}},kr)})));const Fr=kr=>{this.trigger("error",_t(kr.target.error))};this._domElementEvents.on("error",Fr,!1),this._domElementEvents.on("pause",vr),this.on("destroyed",()=>{this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll()}),At(this,()=>this._domElement),dt.isSafari&&this._widgetType==="subscriber"&&(this._domAudioOnlyVideoElement=Jn(),this._bindAudioOnlyVideoElementEvents())}var yn=on.prototype;return yn._onDomElementLoadStart=function(){var fn=(0,it.default)(rt.default.mark(function un(){return rt.default.wrap(function(Xn){for(;;)switch(Xn.prev=Xn.next){case 0:if(!(this._widgetType==="subscriber"&&St())){Xn.next=3;break}return Xn.next=3,this._setActiveAudioOutputDevice();case 3:case"end":return Xn.stop()}},un,this)}));function sn(){return fn.apply(this,arguments)}return sn}(),yn._setActiveAudioOutputDevice=function(){var fn=(0,it.default)(rt.default.mark(function un(){var Ln;return rt.default.wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:if(Ln=gt(),!(Ln===""||Ln==="default")){pn.next=3;break}return pn.abrupt("return");case 3:return pn.next=5,this.setSinkId(Ln);case 5:case"end":return pn.stop()}},un,this)}));function sn(){return fn.apply(this,arguments)}return sn}(),yn._rebindSrcObject=function(){this._domElement&&(this._domElement.srcObject=this._domElement.srcObject)},yn._pauseAndPlay=function(){this._domElement&&(this._domElement.pause(),this._domElement.play())},yn._startAudioOnlyVideoElementWatcher=function(){var fn=(0,it.default)(rt.default.mark(function un(){var Ln,Xn;return rt.default.wrap(function(Vn){for(;;)switch(Vn.prev=Vn.next){case 0:return Ln=1e3,Xn=dt.isiOS,this._audioOnlyVideoElementWatcher=setInterval(()=>{this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.paused&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject,Xn&&this._domAudioOnlyVideoElement.play())},100),Vn.next=5,lt(Ln);case 5:clearInterval(this._audioOnlyVideoElementWatcher),this._audioOnlyVideoElementWatcher=null;case 7:case"end":return Vn.stop()}},un,this)}));function sn(){return fn.apply(this,arguments)}return sn}(),yn._removeAudioOnlyVideoElement=function(){var fn=(0,it.default)(rt.default.mark(function un(){return rt.default.wrap(function(Xn){for(;;)switch(Xn.prev=Xn.next){case 0:this._domAudioOnlyVideoElement.srcObject=null,this._domAudioOnlyVideoElement.parentNode.removeChild(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._domAudioOnlyVideoElement=null;case 4:case"end":return Xn.stop()}},un,this)}));function sn(){return fn.apply(this,arguments)}return sn}(),yn.bindAudioTrackOnly=function(){var fn=(0,it.default)(rt.default.mark(function un(){var Ln,Xn,pn,Vn,Tn,Jn,lr;return rt.default.wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:return Ln=this._stream.getVideoTracks(),Xn=this._stream.getAudioTracks(),pn=Ln[0],Vn=pn===void 0?{}:pn,Tn=Xn[0],Jn=Tn===void 0?{}:Tn,Qn.next=6,Tt();case 6:lr=!Vn.enabled&&Jn.enabled,!this._isVideoLoadedMetaData&&lr&&this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=new cn.MediaStream(Xn),this._startAudioOnlyVideoElementWatcher());case 8:case"end":return Qn.stop()}},un,this)}));function sn(){return fn.apply(this,arguments)}return sn}(),yn._bindAudioOnlyVideoElementEvents=function(){var sn=this;this._domAudioOnlyVideoElementEvents=st(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents.on("pause",()=>this.play()),this._domAudioOnlyVideoElementEvents.on("timeupdate",function(){for(var un=arguments.length,Ln=new Array(un),Xn=0;Xn<un;Xn++)Ln[Xn]=arguments[Xn];return sn.trigger("timeupdate",...Ln)}),this._domAudioOnlyVideoElementEvents.on("loadedmetadata",function(){for(var un=arguments.length,Ln=new Array(un),Xn=0;Xn<un;Xn++)Ln[Xn]=arguments[Xn];return sn.trigger("loadedmetadata",...Ln)})},yn.whenTimeIncrements=function(sn,un){this.once("timeupdate",()=>{sn.call(un,this)})},yn.domElement=function(){return this._domElement},yn.videoWidth=function(){return this._domElement?Number(this._domElement[`video${this.isRotated()?"Height":"Width"}`]):0},yn.videoHeight=function(){return this._domElement?Number(this._domElement[`video${this.isRotated()?"Width":"Height"}`]):0},yn.aspectRatio=function(){return this.videoWidth()/this.videoHeight()},yn.imgData=function(){const sn=tn.createElement("canvas",{width:this.videoWidth(),height:this.videoHeight(),style:{display:"none"}});kt.body.appendChild(sn);let un=null;try{sn.getContext("2d").drawImage(this._domElement,0,0,sn.width,sn.height),un=sn.toDataURL("image/png")}catch{}return tn.removeElement(sn),un===null||un==="data:,"?(this.logging.warn("Cannot get image data yet"),null):un.replace("data:image/png;base64,","").trim()},yn.appendTo=function(sn){return sn.appendChild(this._domElement),this._domAudioOnlyVideoElement&&sn.appendChild(this._domAudioOnlyVideoElement),this},yn.isAudioBlocked=function(){return this._blockedVolume!==void 0},yn.unblockAudio=function(){var fn=(0,it.default)(rt.default.mark(function un(){var Ln;return rt.default.wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:if(this.isAudioBlocked()){pn.next=3;break}return this.logging.warn("Unexpected call to unblockAudio() without blocked audio"),pn.abrupt("return");case 3:return Ln=this._blockedVolume,this._blockedVolume=void 0,this.setAudioVolume(Ln),pn.prev=6,pn.next=9,this.play();case 9:pn.next=16;break;case 11:throw pn.prev=11,pn.t0=pn.catch(6),this._blockedVolume=Ln,this._domElement.muted=!0,pn.t0;case 16:this.trigger("audioUnblocked");case 17:case"end":return pn.stop()}},un,this,[[6,11]])}));function sn(){return fn.apply(this,arguments)}return sn}(),yn.rebind=function(){var fn=(0,it.default)(rt.default.mark(function un(){return rt.default.wrap(function(Xn){for(;;)switch(Xn.prev=Xn.next){case 0:if(this._domElement){Xn.next=2;break}throw new Error("Can't rebind because _domElement no longer exists");case 2:this._playInterrupts++,this._domElement.srcObject=this._domElement.srcObject,this._hasAudioOnlyVideoElement()&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject);case 5:case"end":return Xn.stop()}},un,this)}));function sn(){return fn.apply(this,arguments)}return sn}(),yn._createAudioLevelSampler=function(){if(this._removeAudioLevelSampler(),this._stream.getAudioTracks().length>0){try{this._audioContext=Wt()}catch(sn){this.logging.warn("Failed to get AudioContext(), audio level visualisation will not work",sn)}this._audioContext&&(this._audioLevelSampler=new Kt(this._audioContext),this._audioLevelSampler.webRTCStream(this._stream))}},yn._removeAudioLevelSampler=function(){this._audioContext&&(delete this._audioContext,delete this._audioLevelSampler)},yn._toggleVideoTracks=function(){var fn=(0,it.default)(rt.default.mark(function un(){var Ln,Xn,pn;return rt.default.wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(Ln=this._domElement.srcObject.getTracks().filter(Jn=>Jn.enabled),Xn=Ln.length>1,!Xn){Tn.next=8;break}return pn=Ln.filter(Jn=>Jn.kind==="video"),pn.forEach(Jn=>{Jn.enabled=!1}),Tn.next=7,Tt();case 7:pn.forEach(Jn=>{Jn.enabled=!0});case 8:case"end":return Tn.stop()}},un,this)}));function sn(){return fn.apply(this,arguments)}return sn}(),yn._hasAudioOnlyVideoElement=function(){return this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.srcObject},yn.play=function(){var fn=(0,it.default)(rt.default.mark(function un(){var Ln,Xn,pn,Vn,Tn,Jn,lr,tr,Qn,Sr,vr,Fr;return rt.default.wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(Ln=this._playInterrupts,Xn=this._hasAudioOnlyVideoElement()?this._domAudioOnlyVideoElement:this._domElement,!dt.isSafari){jr.next=5;break}return jr.next=5,Tt();case 5:if(!(dt.isiOS&&dt.isSafari)){jr.next=15;break}if(this._widgetType!=="publisher"){jr.next=14;break}if(pn=dt.iOSVersion>=14&&dt.iOSVersion<=14.2,Vn=this._stream.getVideoTracks(),Tn=Vn[0],Jn=Tn===void 0?{}:Tn,lr=this._stream.getAudioTracks(),tr=lr[0],Qn=tr===void 0?{}:tr,!(pn&&!ut(Xn)&&Jn.enabled)){jr.next=12;break}return jr.abrupt("return");case 12:if(!Qn.muted){jr.next=14;break}return jr.abrupt("return");case 14:this._toggleVideoTracks();case 15:return jr.prev=15,this._emitVideoPlayAttempt(),jr.next=19,Xn.play();case 19:return this._emitVideoPlaySuccess(),jr.abrupt("return");case 23:if(jr.prev=23,jr.t0=jr.catch(15),this._emitVideoPlayFailure(),Sr=jr.t0||{},vr=Sr.name,Fr=vr==="AbortError",Fr&&this._playInterrupts++,!(this._playInterrupts>Ln)){jr.next=33;break}return jr.next=32,this.play();case 32:return jr.abrupt("return");case 33:throw jr.t0;case 34:case"end":return jr.stop()}},un,this,[[15,23]])}));function sn(){return fn.apply(this,arguments)}return sn}(),yn._bindToStream=function(sn){this._stream=sn,this._domElement.srcObject=sn,this._domAudioOnlyVideoElement&&this.bindAudioTrackOnly()},yn.bindToStream=function(){var fn=(0,it.default)(rt.default.mark(function un(Ln){var Xn=this,pn,Vn,Tn;return rt.default.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(this._domElement){lr.next=2;break}throw new Error("Can't bind because _domElement no longer exists");case 2:return this._bindToStream(Ln),(0,it.default)(rt.default.mark(function tr(){var Qn;return rt.default.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return vr.prev=0,vr.next=3,Xn.play();case 3:vr.next=26;break;case 5:if(vr.prev=5,vr.t0=vr.catch(0),Qn=!!Ln.getAudioTracks().length,!(Xn._hasAudioOnlyVideoElement()&&vr.t0.name==="NotAllowedError")){vr.next=15;break}return Xn._domAudioOnlyVideoElement.muted=!0,vr.next=12,Xn.play();case 12:Xn._domAudioOnlyVideoElement.muted=!1,vr.next=26;break;case 15:if(!Qn){vr.next=23;break}return Xn._blockedVolume=Xn.getAudioVolume(),Xn._domElement.muted=!0,vr.next=20,Xn.play();case 20:Xn.trigger("audioBlocked"),vr.next=26;break;case 23:return Xn._domElement.muted=!0,vr.next=26,Xn.play();case 26:case"end":return vr.stop()}},tr,null,[[0,5]])}))().catch(tr=>{this.logging.debug(".play() failed: ",tr)}),pn={width:this._domElement.videoWidth,height:this._domElement.videoHeight},this.trigger("videoDimensionsChanged",Object.assign({},pn),Object.assign({},pn)),this._domElementEvents.on("resize",()=>{const tr=this._domElement,Qn=tr.videoWidth,Sr=tr.videoHeight,vr=Qn!==pn.width,Fr=Sr!==pn.height;(vr||Fr)&&(this.trigger("videoDimensionsChanged",Object.assign({},pn),{width:Qn,height:Sr}),pn.width=Qn,pn.height=Sr)}),Vn=()=>{this._mediaStoppedListener.stop(),this._domElement&&(this._domElement.onended=null),this.trigger("mediaStopped")},Tn=tr=>{this.trigger("mediaStopped",tr)},this._domElement.onended=()=>Vn(),this._mediaStoppedListener=Vt(Ln,Vn,Tn),this._createAudioLevelSampler(),lr.abrupt("return",void 0);case 13:case"end":return lr.stop()}},un,this)}));function sn(un){return fn.apply(this,arguments)}return sn}(),yn.unbindStream=function(){return this._domElement&&(this._domElement.srcObject=null),this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=null),this._removeAudioLevelSampler(),this},yn.setAudioVolume=function(sn){if(this.isAudioBlocked()){this._blockedVolume=sn;return}const un=parseFloat(sn)/100,Ln=[this.domElement()];this._domAudioOnlyVideoElement&&Ln.push(this._domAudioOnlyVideoElement),Ln.forEach(Xn=>{Xn&&(Xn.volume=un,Xn.muted=un===0)})},yn.getAudioVolume=function(){if(this.isAudioBlocked())return this._blockedVolume;const sn=this.domElement();return sn?sn.muted?0:sn.volume*100:this._defaultAudioVolume},yn.audioChannelType=function(sn){const un=this.domElement();return sn!==void 0&&(un.mozAudioChannelType=sn),"mozAudioChannelType"in this._domElement?un.mozAudioChannelType:"unknown"},yn.getAudioInputLevel=function(){return this._audioLevelSampler.sample()},yn.refreshTracks=function(){this._mediaStoppedListener&&this._mediaStoppedListener.refresh(),this._createAudioLevelSampler()},yn.destroy=function(){this._mediaStoppedListener&&this._mediaStoppedListener.stop(),this.logging.debug("removing domElementEvents"),this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._audioOnlyVideoElementWatcher&&clearInterval(this._audioOnlyVideoElementWatcher),this.unbindStream(),this._domElement&&(tn.removeElement(this._domElement),this._domElement=null),this._domAudioOnlyVideoElement&&(tn.removeElement(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElement=null),this.trigger("destroyed"),at("NativeVideoElementWrapper",this)},yn.setSinkId=function(sn){const Ln=[this._domElement,this._domAudioOnlyVideoElement].map(Xn=>{if(Xn)return Xn.setSinkId(sn)});return tt.all(Ln)},on}()}_e.exports=It}).call(this,b(0))},function(_e,et,b){(function(tt){_e.exports=()=>new tt(nt=>setTimeout(nt))}).call(this,b(0))},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5)),ot=nt(b(661)),st=nt(b(662)),at=nt(b(1));const ct=b(9),ut=b(47),lt=b(60),dt=b(6),ft=b(298),St=b(299),Tt=b(670),pt=(0,at.default)("PublisherPeerConnection");_e.exports=function(yt){yt===void 0&&(yt={});const Et=yt.getStatsHelpers||b(75),It=yt.OTHelpers||b(8),Gt=yt.PeerConnection||b(71)(),Wt=yt.setCertificates||b(163)(),At=yt.watchAudioAcquisition||b(672),kt=yt.createAudioFallbackStateMachine||ot.default,Vt=yt.createCongestionLevelEstimator||st.default;return function(tn){var _t=this;let Kt=tn.iceConfig,cn=tn.webRTCStream,an=tn.channels,mn=tn.sendMessage,on=tn.capableSimulcastStreams,yn=tn.overrideSimulcastEnabled,fn=tn.logAnalyticsEvent,sn=tn.offerOverrides,un=tn.answerOverrides,Ln=tn.sourceStreamId,Xn=tn.isP2pEnabled,pn=tn.sessionId,Vn=tn.keyStore,Tn=tn.sFrameClientStore,Jn=tn.isE2ee,lr=tn.audioFallbackEnabled,tr=tn.resolution,Qn,Sr=!1,vr,Fr,kr;const jr=function(){this.destroy(),Sr&&(Sr=!1,this.trigger("iceRestartFailure")),this.trigger("disconnected")},xo=function(sr){let Ar=sr.reason,so=sr.prefix;this.trigger("error",{reason:Ar,prefix:so})},Er=function(sr){Sr&&Qn.iceConnectionStateIsConnected()&&(Sr=!1,this.trigger("iceRestartSuccess")),sr==="connected"&&(It.env.name==="Chrome"&&(vr&&vr(),vr=At(Qn.getStats.bind(Qn),()=>this.trigger("audioAcquisitionProblem"))),this.trigger("connected")),this.trigger("iceConnectionStateChange",sr)};dt(this),this.setCongestionLevel=Mn=>{var sr;(sr=Fr)==null||sr.setCongestionLevel(Mn)},this.getAudioFallbackState=()=>{var Mn;return(Mn=Fr)==null?void 0:Mn.getState()},this.startEncryption=Mn=>{Qn&&Qn.startEncryption(Mn)},this.changeMediaDirectionToInactive=()=>{Qn&&Qn.changeMediaDirectionToInactive()},this.changeMediaDirectionToRecvOnly=()=>{Qn&&Qn.changeMediaDirectionToRecvOnly()},this.getDataChannel=function(Mn,sr,Ar){Qn.getDataChannel(Mn,sr,Ar)},this.getSourceStreamId=()=>Qn.getSourceStreamId(),this.destroy=function(){var Mn;(Mn=kr)==null||Mn.stop(),vr&&(vr(),vr=null),Qn&&(Qn.disconnect(),Qn=null),this.off()},this.processMessage=function(Mn,sr){Qn.processMessage(Mn,sr)},this.addTrack=function(Mn,sr,Ar){return Qn.addTrack(Mn,sr,Ar)},this.removeTrack=function(Mn){return Qn.removeTrack(Mn)},this.getLocalStreams=function(){return Qn.getLocalStreams()},this.init=function(Mn,sr){ft(Ln)&&St(Kt);const Ar={iceConfig:Kt.needRumorIceServersFallback?ct(Kt,{servers:[...Mn,...Kt.servers]}):Kt,channels:an,capableSimulcastStreams:on,overrideSimulcastEnabled:yn};Wt(Ar,(so,Bn)=>{if(so){sr(so);return}const gr=ct({logAnalyticsEvent:fn,isPublisher:!0,offerOverrides:sn,answerOverrides:un,sourceStreamId:Ln,p2p:Xn,sessionId:pn,keyStore:Vn,sFrameClientStore:Tn,isE2ee:Jn},Bn);Qn=new Gt(ct({sendMessage:mn},gr)),Qn.on({close:jr,error:xo,qos:Or=>this.trigger("qos",Or),iceConnectionStateChange:Er},this),Qn.addLocalStream(cn).then(()=>{sr(void 0)}).catch(sr)})},this.setIceConfig=Mn=>{Qn.setIceConfig(Mn)},this.generateOffer=()=>{Qn.generateOfferAndSend()},this.getSenders=function(){return Qn.getSenders()},this.iceRestart=function(){Qn&&(Sr=!0,Qn.iceRestart())},this.hasRelayCandidates=()=>Qn.hasRelayCandidates(),this.iceConnectionStateIsConnected=function(){return Qn.iceConnectionStateIsConnected()},this.findAndReplaceTrack=(Mn,sr)=>Qn.findAndReplaceTrack(Mn,sr),this._testOnlyGetFramesEncoded=()=>new tt((Mn,sr)=>{Qn.getStats((Ar,so)=>{if(Ar){sr(Ar);return}const Bn=lt(so,gr=>Et.isVideoStat(gr,so)&&Et.isOutboundStat(gr));if(!Bn){sr(new Error("Could not find framesEncoded in getStats report"));return}Mn(ut(Bn,["timestamp","framesEncoded"]))})}),this.getStats=Mn=>Qn.getStats(Mn),this.getRtcStatsReport=Mn=>Qn.getRtcStatsReport(Mn),this.setP2PMaxBitrate=(0,it.default)(rt.default.mark(function Mn(){var sr,Ar,so,Bn,gr,Or,ro;return rt.default.wrap(function(ho){for(;;)switch(ho.prev=ho.next){case 0:if(_t.getSourceStreamId()==="P2P"){ho.next=2;break}return ho.abrupt("return");case 2:if(Ar=_t.getSenders().find(vo=>vo.track.kind==="video"),Ar){ho.next=5;break}return ho.abrupt("return");case 5:return so=(Ar==null||(sr=Ar.track)==null||sr.getSettings==null?void 0:sr.getSettings())||{},Bn=so.width,gr=so.height,Or=Tt(Bn,gr),ro=Ar.getParameters(),ro.encodings.forEach(vo=>{vo.maxBitrate=Or}),ho.prev=9,ho.next=12,Ar.setParameters(ro);case 12:ho.next=16;break;case 14:ho.prev=14,ho.t0=ho.catch(9);case 16:case"end":return ho.stop()}},Mn,null,[[9,14]])}));const xr=()=>{Fr=kt(),Fr.on("stateChange",Mn=>{let sr=Mn.previousState,Ar=Mn.state;this.trigger("audioFallbackStateChange",{previousState:sr,state:Ar})})},Un=()=>{kr=Vt({resolution:tr,getStats:this.getStats}),this.on("connected",()=>{kr.start()})};lr&&(xr(),Un(),(()=>{let sr;kr.on("congestionLevel",Ar=>{Ar!==sr&&(sr=Ar,pt.info(`Congestion level changed to: ${Ar}`))})})())}}}).call(this,b(0))},function(_e,et,b){et.__esModule=!0,et.default=void 0;var nt={bandwidthCriticalThreshold:7e4,bandwidthFairThreshold:0,packetLossCriticalThreshold:.15,packetLossCriticalThresholdMediumBw:.2,criticalCongestionPeriod:4e3};et.default=nt},function(_e,et,b){const tt=b(669);_e.exports=nt=>nt!=="P2P"?!1:tt()},function(_e,et,b){_e.exports=tt=>{tt.transportPolicy="relay",tt.customServers=tt.customServers||[]}},function(_e,et,b){const tt=b(9),nt=b(6),rt=b(298),it=b(299);_e.exports=function(st){st===void 0&&(st={});const at=st.OTHelpers||b(8),ct=st.PeerConnection||b(71)(),ut=st.SinglePeerConnectionAdapter||b(673)(),lt=st.setCertificates||b(163)(),dt=st.Errors||b(7),ft=st.ExceptionCodes||b(10),St=st.OTErrorClass||b(22),Tt=st.watchSubscriberAudio||b(674);return function(gt){let yt=gt.clientCandidates,Et=gt.iceConfig,It=gt.send,Gt=gt.logAnalyticsEvent,Wt=gt.p2p,At=gt.codecFlags,kt=gt.sourceStreamId,Vt=gt.remoteConnectionId,Nt=gt._singlePeerConnectionController,tn=gt.keyStore,_t=gt.sFrameClientStore,Kt=gt.isE2ee;const cn=this;let an,mn=!1,on=!1,yn=null;const fn=!!Nt;let sn=!1;const un=[],Ln=[],Xn=function(){this.destroy(),on&&this.trigger("iceRestartFailure",this),this.trigger("disconnected",this)},pn=Un=>{this.trigger("remoteStreamRemoved",Un,this)},Vn=Un=>{const Mn=Un.kind==="video"?un:Ln,sr=Mn.indexOf(Un);sr>-1&&Mn.splice(sr,1)},Tn=Un=>{const Mn=Un.kind==="video"?un:Ln;Mn.includes(Un)||Mn.push(Un)},Jn=100,lr=Un=>{sn||(Un.onremovetrack=Mn=>{Vn(Mn),fn&&an&&an.removeTrack(Mn),setTimeout(()=>{!un.length&&!Ln.length&&pn(Un)},Jn)},sn=!0)},tr=Un=>{const Mn=Un.stream,sr=Un.track;Tn(sr),lr(Mn),this.trigger("remoteTrackAdded",Un,this)},Qn=Un=>{this.trigger("remoteVideoSupported",Un)},Sr=()=>{this.trigger("decryptFailed")},vr=()=>{this.trigger("decryptRestored")},Fr=function(Mn){let sr=Mn.reason,Ar=Mn.prefix;this.trigger("error",null,sr,this,Ar)},kr=function(Mn){on&&(Mn==="connected"||Mn==="completed")&&(on=!1,this.trigger("iceRestartSuccess")),Mn==="connected"&&this.trigger("connected"),this.trigger("iceConnectionStateChange",Mn)},jr=function(Mn){this.trigger("signalingStateChange",Mn)},xo=function(Mn){this.trigger("signalingStateStable",Mn)},Er=(Un,Mn)=>{(Un==="answer"||Un==="pranswer")&&this.trigger("connected"),It(Un,Mn)};nt(this),this._hasAudioTracks=()=>Ln.length>0,this._hasVideoTracks=()=>un.length>0,this._getVideoTracks=()=>un,this._getAudioTracks=()=>Ln,this._getTracks=()=>[...Ln,...un],this.close=function(){mn||(mn=!0,an&&(an.disconnect(),an=null),this.off())},this.destroy=function(){this.stopAudioStatsWatcher(),!mn&&this.close()},this.getDataChannel=function(Un,Mn,sr){an.getDataChannel(Un,Mn,sr)},this.getSourceStreamId=()=>an.getSourceStreamId(),this.processMessage=function(Un,Mn){an.processMessage(Un,Mn)},this.remoteDescription=function(){return an.remoteDescription()},this.getStats=function(Un){if(an)an.getStats(Un);else{const Mn=ft.PEER_CONNECTION_NOT_CONNECTED;Un(new at.Error(St.getTitleByCode(Mn),dt.PEER_CONNECTION_NOT_CONNECTED,{code:Mn}))}},this.getSynchronizationSources=function(Un){if(!an){const Mn=ft.PEER_CONNECTION_NOT_CONNECTED;Un(new at.Error(St.getTitleByCode(Mn),dt.PEER_CONNECTION_NOT_CONNECTED,{code:Mn}));return}an.getSynchronizationSources(Un)},this.getRtcStatsReport=function(Un){if(an)an.getRtcStatsReport(Un);else{const Mn=ft.PEER_CONNECTION_NOT_CONNECTED;Un(new at.Error(St.getTitleByCode(Mn),dt.PEER_CONNECTION_NOT_CONNECTED,{code:Mn}))}},this.setIceConfig=Un=>{an.setIceConfig(Un)},this.generateOffer=()=>{an.generateOfferAndSend()},this.startAudioStatsWatcher=function(Un){yn||(yn=Tt(an.getStats.bind(an),Mn=>{this.stopAudioStatsWatcher(),this.trigger("audioLevelStuckWarning",Mn)},Un))},this.stopAudioStatsWatcher=function(){yn&&yn.stop(),yn=null};const xr=function(Mn){return function(sr){const Ar=Mn==="video"?un:Ln;an&&an.remoteTracks().forEach(so=>{so.kind===Mn&&so.enabled!==sr&&Ar.includes(so)&&(so.enabled=sr)})}};this.subscribeToAudio=xr("audio"),this.subscribeToVideo=xr("video"),this.hasRelayCandidates=function(){return an.hasRelayCandidates()},this.iceRestart=function(){return on=!0,an.iceRestart()},this.iceConnectionStateIsConnected=function(){return an.iceConnectionStateIsConnected()},this.init=function(Un){rt(kt)&&it(Et),lt({iceConfig:Et},(sr,Ar)=>{if(sr){Un(sr);return}const so=tt({logAnalyticsEvent:Gt,clientCandidates:yt,codecFlags:At,sourceStreamId:kt,keyStore:tn,sFrameClientStore:_t,isE2ee:Kt},Ar),Bn=tt({sendMessage:Er,p2p:Wt},so,{remoteConnectionId:Vt});fn?an=new ut(Bn,Nt):an=new ct(Bn),an.on({iceConnected:()=>cn.emit("iceConnected"),close:Xn,trackAdded:tr,signalingStateChange:jr,signalingStateStable:xo,error:Fr,qos:gr=>this.trigger("qos",gr),iceConnectionStateChange:kr,remoteVideoSupported:Qn,decryptFailed:Sr,decryptRestored:vr},cn),!fn&&an.remoteTracks().length>0?an.remoteStreams().forEach(gr=>{gr.getTracks().forEach(Or=>tr({stream:gr,track:Or}))}):Un(void 0,cn)})}}}},function(_e,et,b){_e.exports=(tt,nt)=>{tt.forEach((rt,it)=>{const ot=rt.id||rt,st=nt.id||nt;ot===st&&tt.splice(it,1)})}},function(_e,et,b){_e.exports=function(nt){nt===void 0&&(nt={});const at=(nt.generateSimpleStateMachine||b(160)())("NotPublishing",["NotPublishing","GetUserMedia","BindingMedia","MediaBound","PublishingToSession","Publishing","Failed","Destroyed"],{NotPublishing:["NotPublishing","GetUserMedia","Destroyed"],GetUserMedia:["BindingMedia","Failed","NotPublishing","Destroyed"],BindingMedia:["MediaBound","Failed","NotPublishing","Destroyed"],MediaBound:["NotPublishing","PublishingToSession","Failed","Destroyed"],PublishingToSession:["NotPublishing","Publishing","Failed","Destroyed","MediaBound"],Publishing:["NotPublishing","MediaBound","Failed","Destroyed"],Failed:["Destroyed"],Destroyed:[]});return at.prototype.isDestroyed=function(){return this.current==="Destroyed"},at.prototype.isAttemptingToPublish=function(){return["GetUserMedia","BindingMedia","MediaBound","PublishingToSession"].indexOf(this.current)!==-1},at.prototype.isPublishing=function(){return this.current==="Publishing"},at}},function(_e,et,b){Object.defineProperty(et,"__esModule",{value:!0}),et.default=tt;function tt(nt){this.message=nt||"Operation has been canceled.",this.name="CancellationError",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}tt.prototype=Object.create(Error.prototype),tt.prototype.constructor=tt},function(_e,et,b){var tt=b(0);Object.defineProperty(et,"__esModule",{value:!0});function nt(rt,it){return tt.resolve(rt).then(ot=>tt.resolve(it()).then(()=>ot),ot=>tt.resolve(it()).then(()=>tt.reject(ot)))}et.default=nt},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5));const ot=b(141),st=b(254),at=b(9),ct=b(276),ut=b(57),lt=b(50),dt=b(165),ft=dt.CancellationError,St=b(15),Tt=b(18),pt=b(49),gt=b(267),yt=b(26),Et=b(6),It=b(684),Gt=b(104),Wt=b(61),At=b(685),kt=b(7),Vt=b(164)(),Nt=b(686),tn=b(282),_t=b(144),Kt=b(283),cn=b(145),an=b(2),mn=b(7),on=b(23)(),yn=b(10),fn=b(75),sn=b(306),un=b(307),Ln=b(687),Xn=b(162)(),pn=b(1)("Subscriber"),Vn=b(284)(),Tn=b(285),Jn=b(13)(),lr=b(22),tr=b(8),Qn=b(152),Sr=b(143)(typeof window!==void 0?window:commonjsGlobal),vr=b(71)({global:Sr}),Fr=b(300)({PeerConnection:vr}),kr=b(308),jr=b(286),xo=b(690),Er=b(691),xr=b(692),Un=b(309),Mn=b(102).parseIceServers,sr=b(693),Ar=b(694),so=b(695),Bn=b(311),gr=b(167),Or=b(312),ro=100,Ao=(zr,Go)=>zr.connection.id===Go.connection.id,ho=zr=>{let Go=zr.apiKey,mo=zr.sessionId,Zo=zr.streamId,$r=zr.subscriberId;return["/v2/partner",Go,"session",mo,"stream",Zo,"subscriber",$r].join("/")};function vo(zr){return Math.max(0,Math.min(100,parseInt(zr,10)))}function po(zr){return zr.audioVolume!==void 0?zr.audioVolume:zr.subscribeToAudio===!1?0:ro}_e.exports=function(Go){let mo=Go===void 0?{}:Go,Zo=mo.AudioLevelMeter,$r=Zo===void 0?tn:Zo,Ru=mo.AudioLevelTransformer,jo=Ru===void 0?_t:Ru,yo=mo.BackingBar,_o=yo===void 0?Kt:yo,js=mo.Chrome,Ql=js===void 0?cn:js,Rs=mo.env,xa=Rs===void 0?an:Rs,Iu=mo.Errors,Gu=Iu===void 0?mn:Iu,jp=mo.Events,$u=jp===void 0?on:jp,Qu=mo.ExceptionCodes,Jr=Qu===void 0?yn:Qu,Qs=mo.audioLevelSampler,au=Qs===void 0?Ln:Qs,Ws=mo.getStatsHelpers,yl=Ws===void 0?fn:Ws,Xr=mo.hasAudioOutputLevelStatCapability,Js=Xr===void 0?sn:Xr,Up=mo.hasRemoteStreamsWithWebAudio,cu=Up===void 0?un:Up,lu=mo.interpretPeerConnectionError,qo=lu===void 0?Xn:lu,Gl=mo.logging,es=Gl===void 0?pn:Gl,ju=mo.MuteButton,lp=ju===void 0?Vn:ju,$a=mo.NamePanel,ep=$a===void 0?Tn:$a,_u=mo.otError,na=_u===void 0?Jn:_u,Yo=mo.OTErrorClass,_l=Yo===void 0?lr:Yo,uo=mo.OTHelpers,tp=uo===void 0?tr:uo,xu=mo.StylableComponent,xp=xu===void 0?Qn:xu,vs=mo.SubscriberPeerConnection,wp=vs===void 0?Fr:vs,Jp=mo.SubscribingState,Op=Jp===void 0?kr:Jp,vp=mo.VideoDisabledIndicator,Hp=vp===void 0?jr:vp,np=mo.AudioBlockedIndicator,uu=np===void 0?xo:np,Wu=mo.VideoUnsupportedIndicator,Xl=Wu===void 0?Er:Wu,Np=mo.watchFrameRate,zn=Np===void 0?xr:Np,xn=mo.createSendMethod,Nn=xn===void 0?Un:xn,qn=mo.parseIceServers,Rr=qn===void 0?Mn:qn,Zr=mo.document,wo=Zr===void 0?(typeof window!==void 0?window:commonjsGlobal).document:Zr,Wo=mo.WidgetView,ws=Wo===void 0?Vt:Wo;const ns=3e4,ds=15e3,Zs=function $s(Ap,Ms,Wl){var Us=this,eu;if(Ms===void 0&&(Ms={}),Wl===void 0&&(Wl=()=>{}),Ms.analytics===void 0)throw new Error("Subscriber requires an instance of analytics");const Sp=Ms.analytics,rp=St(),qp=$s.hasAudioOutputLevelStatCapability()||cu(),_s=this,Uu={},ip={},Zp={},yu={},up={},Ml=new Or;let ao,Qo,dp,qr,$p,Ks,fp,Vp,Vo,Gp,qu,em,om,Lp,Yp=!1,tm=Ap||rp,rs=Ms.session,Co=Ms.stream;const um=Ms,ym=um._singlePeerConnectionController,dm=ym!==void 0;let Ep,Hu,Gn,Qt=!1,Zn,er={},nr=null,_r=!1,_i=!0,co=[],oo=ot({},Ms,{showControls:!0,testNetwork:!1,fitMode:Co.defaultFitMode||"cover",insertDefaultUI:!0,initials:Co.initials}),du;const Lo=rs.sessionInfo.isAdaptiveEnabled,Vl={P2P:yt.SUBSCRIBER_DISCONNECTED,MANTIS:yt.SUBSCRIBER_DISCONNECTED},Wp=xa.name==="Chrome"&&xa.version>=58||xa.isChromiumEdge||xa.isOpera,bu=rs._.getSocket(),Mp=()=>ct(ip),wu=$t=>ip[$t],Ou=()=>ip[du],op=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn){var Wn;return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,ip[vn];case 2:Wn=ir.sent,Wn==null||Wn.close(),delete ip[vn];case 5:case"end":return ir.stop()}},dn)}));return function(vn){return $t.apply(this,arguments)}}(),Cp=$t=>{delete Zp[$t]},nm=()=>{Mp().forEach(function(){var $t=(0,it.default)(rt.default.mark(function dn(vn){return rt.default.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:return Dn.next=2,vn;case 2:Dn.sent.destroy();case 3:case"end":return Dn.stop()}},dn)}));return function(dn){return $t.apply(this,arguments)}}()),Object.keys(ip).forEach($t=>{delete ip[$t]})},Bp=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn){var Wn,Dn;return rt.default.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:if(vn){ar.next=2;break}return ar.abrupt("return");case 2:return Wn={error:lm,audioVolume:Hu},Dn=Lo&&du==="P2P",ar.prev=4,ar.next=7,ao.bindVideo(vn,Wn,Dn);case 7:ar.next=18;break;case 9:if(ar.prev=9,ar.t0=ar.catch(4),!(ar.t0 instanceof ft||Ks.isDestroyed())){ar.next=13;break}return ar.abrupt("return");case 13:if(!ar.t0.message.includes("bufferFailed")){ar.next=16;break}return Us._.startRelayedToRoutedTransition(),ar.abrupt("return");case 16:throw lm(ar.t0),ar.t0;case 18:case"end":return ar.stop()}},dn,null,[[4,9]])}));return function(vn){return $t.apply(this,arguments)}}(),Dl=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn,Wn){var Dn,ir,ar,rr;return rt.default.wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:if(Dn=!1,typeof vn=="function"?Wn=vn:Dn=vn==="rtcStatsReport",Dn?Rm():l1(),!(Dn&&!Bn)){eo.next=7;break}return ir=Jr.GET_RTC_STATS_REPORT_NOT_SUPPORTED,Wn(na(kt.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(_l.getTitleByCode(ir)),ir)),eo.abrupt("return");case 7:if(Ou()){eo.next=11;break}return ir=Jr.PEER_CONNECTION_NOT_CONNECTED,Wn(na(Gu.PEER_CONNECTION_NOT_CONNECTED,new Error(_l.getTitleByCode(ir)),ir)),eo.abrupt("return");case 11:return eo.next=13,Ou();case 13:ar=eo.sent,rr=Dn?ar.getRtcStatsReport:ar.getStats,rr((Ur,Ps)=>{Ur?(Ur.code===Jr.PEER_CONNECTION_NOT_CONNECTED&&(Ur=na(Gu.PEER_CONNECTION_NOT_CONNECTED,Ur,Jr.PEER_CONNECTION_NOT_CONNECTED)),Wn(Ur)):Wn(null,Ps)});case 16:case"end":return eo.stop()}},dn)}));return function(vn,Wn){return $t.apply(this,arguments)}}(),rm=$t=>Dl($t),sm=$t=>Dl("rtcStatsReport",$t),Tp=$t=>!Vo||!Ep?!1:$t==="video"?Vo.getVideoTracks().length>0&&Ep.getVideoTracks().length>0:Vo.getAudioTracks().length>0&&Ep.getAudioTracks().length>0,Vs=($t,dn,vn,Wn,Dn)=>{let ir=at({action:$t,variation:dn,payload:vn,streamId:Co?Co.id:null,sessionId:rs?rs.sessionId:null,connectionId:rs&&rs.isConnected()?rs.connection.connectionId:null,partnerId:rs&&rs.sessionInfo?rs.sessionInfo.partnerId:null,subscriberId:rp,widgetType:"Subscriber"},Wn);(dn==="Failure"||dn==="iceconnectionstatechange"&&vn==="closed")&&(ir=at(ir,er));const ar=[ir];Dn&&ar.push(Dn),Sp.logEvent(...ar)},fm=($t,dn,vn)=>{dn==="Attempt"?(yu[$t]=new Date().getTime(),Vs($t,dn,vn)):(dn==="Failure"||dn==="Success")&&Vs($t,dn,vn,{attemptDuration:new Date().getTime()-yu[$t]})},bm=function(dn,vn){vn===void 0&&(vn={}),fm("RoutedToRelayedTransition",dn,vn)},Qm=function(dn,vn){vn===void 0&&(vn={}),fm("RelayedToRoutedTransition",dn,vn)},Mu=Ar({onInvalidTransition($t,dn){const vn=`Invalid state transition: Event '${$t}' not possible in state '${dn}'`;es.error(vn),Vs("Subscriber:InvalidStateTransition","Event",{details:vn})}});{const $t="Unable to subscribe to stream in a reasonable amount of time";sr({connectivityState:Mu,onWarning(){Sm("Warning",{})},onTimeout:()=>{if(ao&&ao.addError($t),Ks.isAttemptingToSubscribe()){Ks.set("Failed"),this._disconnect({noStateTransition:!0});const dn=na(kt.TIMEOUT,new Error($t),Jr.UNABLE_TO_SUBSCRIBE);Mu.fail({options:{failureReason:"Subscribe",failureMessage:$t,failureCode:Jr.UNABLE_TO_SUBSCRIBE},error:dn})}},warningMs:ds,timeoutMs:ns})}if(Uu.promise=new tt(($t,dn)=>{Uu.resolve=$t,Uu.reject=dn}),oo.testNetwork&&rs.sessionInfo.p2pEnabled&&es.warn("You cannot test your network with a relayed session. Use a routed session."),this.id=tm,this.widgetId=rp,this.session=rs,this.stream=oo.stream,Co=oo.stream,this.streamId=Co.id,!rs)return _l.handleJsException({errorMsg:"OT.Subscriber must be passed a session option",code:2e3,target:this,analytics:Sp}),null;Et(this),_s.once("subscribeComplete",function(){try{Wl(...arguments)}catch($t){es.error("Completion handler threw an exception",$t)}}),rs.on("captionReceived",$t=>{$t.streamId===_s.streamId&&(this.dispatchEvent($t),this.trigger(yt.SUBSCRIBER_CAPTION_RECEIVED,$t))});const km=$t=>{let dn=$t.transition,vn=$t.from;return dn==="fail"?vn==="connected"?"Disconnect":"Failure":dn==="disconnect"&&vn==="connected"?"Disconnect":"Cancel"};Mu.observe({onEnterConnecting(){Sm("Attempt",null,{})},onEnterConnected(){Sm("Success",null,{})},onEnterDisconnected($t,dn){let vn=dn===void 0?{}:dn,Wn=vn.options,Dn=Wn===void 0?{}:Wn,ir=vn.payload,ar=ir===void 0?null:ir;Sm(km($t),ar,Dn)}}),Mu.observe({onEnterConnected:()=>{this.trigger("subscribeComplete",void 0,this)},onEnterDisconnected:function(dn,vn){let Wn=dn.from,Dn=vn===void 0?{}:vn,ir=Dn.error;Wn==="connecting"&&Us.trigger("subscribeComplete",ir||new Error("An unknown error occurred"),Us)}}),so({connectivityState:Mu,logAttempt(){Vs("Subscribe","Attempting",null,{connectionId:rs&&rs.isConnected()?rs.connection.connectionId:null})}});const Sm=function(dn,vn,Wn){vn===void 0&&(vn={}),dn==="Failure"||dn==="Success"||dn==="Cancel"?Vs("Subscribe",dn,vn,Object.assign({},Wn,{attemptDuration:new Date().getTime()-em})):dn==="Attempt"?(em=new Date().getTime(),Vs("Subscribe",dn,Object.assign({},vn,{testNetwork:oo.testNetwork}),Wn)):Vs("Subscribe",dn,vn,Wn)},am=($t,dn)=>{Vs("ICERestart",$t,dn)},Nm=$t=>{var dn,vn;let Wn=$t.parsedStats,Dn=$t.remoteConnectionId,ir=$t.peerId,ar=$t.sourceStreamId;const rr={widgetType:"Subscriber",width:ao.width,height:ao.height,audioTrack:Tp("audio"),hasAudio:Co&&Co.hasAudio,subscribeToAudio:Lp,audioVolume:this.getAudioVolume(),videoTrack:Tp("video"),connectionId:rs?rs.connection.connectionId:null,hasVideo:Co&&Co.hasVideo,subscribeToVideo:oo.subscribeToVideo,congestionLevel:nr,streamId:Co.id,subscriberId:rp,duration:Math.round((pt()-$p)/1e3),remoteConnectionId:Dn,peerId:ir,sourceStreamId:gr(ar),preferredResolutionHeight:(dn=oo.preferredResolution)==null?void 0:dn.height,preferredResolutionWidth:(vn=oo.preferredResolution)==null?void 0:vn.width,preferredFrameRate:oo.preferredFrameRate,audioFallback:!Gp&&qu==="auto",initials:Co.initials},Po=at(rr,Wn);Sp.logQOS(Po),this.trigger("qos",Object.assign({},Sp.commonQoSFields(),Po))},hm=$t=>{es.error("OT.Subscriber State Change Failed: ",$t.message),es.debug($t)},Om=()=>{Ks.isSubscribing()||!ao||!ao.video()||(Yp=!0,_r||(Mu.connect(),_r=!0),es.debug("OT.Subscriber.onLoaded"),Ks.set("Subscribing"),$p=pt(),ao.loading(!1),Qo&&Qo.showAfterLoading(),Qt&&Co.setRestrictFrameRate(!0),qr&&qr.audioOnly(ao.audioOnly()),this.setAudioVolume(Hu),this.trigger("loaded",this))},v1=()=>Co&&Co.hasAudio&&Lp&&this.getAudioVolume()>0&&!this.isAudioBlocked(),i1=()=>Co&&Co.hasVideo,o1=$t=>{const dn=$t==="audioLevelStuckAt0"&&(!v1()||i1());let vn=!1;if(!dn&&(Vs("subscriber:onAudioWarning","Event",{reason:$t}),ao)){if(ao.rebindSrcObject(),Vs("subscriber:rebindSrcObject","Called"),$t==="audioLevelStuck")return;vn=!0}Am(vn)},Am=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn){var Wn;return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(vn===void 0&&(vn=!1),!Wp){ir.next=6;break}return ir.next=4,Ou();case 4:Wn=ir.sent,Wn.startAudioStatsWatcher(vn);case 6:case"end":return ir.stop()}},dn)}));return function(vn){return $t.apply(this,arguments)}}(),cm=$t=>{Lo&&$t.getSourceStreamId()==="P2P"&&bm("Success")},Em=()=>{es.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection"),Mu.fail({options:{failureReason:"PeerConnectionError",failureCode:Jr.UNABLE_TO_PUBLISH,failureMessage:"PeerConnection disconnected"},error:na(Gu.DISCONNECTED,new Error("ClientDisconnected"))}),this._disconnect({noStateTransition:!0}),(Ks.isAttemptingToSubscribe()||Ks.isSubscribing())&&Ks.set("Failed")},lm=$t=>{const dn=na(Gu.MEDIA_ERR_DECODE,$t,$t.code||Jr.P2P_CONNECTION_FAILED);dn.message=`OT.Subscriber while playing stream: ${dn.message}`,es.error("OT.Subscriber.onVideoError"),Mu.fail({options:{failureReason:"VideoElement",failureMessage:dn.message,failureCode:dn.code||Jr.P2P_CONNECTION_FAILED},error:dn});const vn=Ks.isAttemptingToSubscribe();Ks.set("Failed"),vn||_s.trigger("error",dn.message),_l.handleJsException({error:dn,code:Jr.UNABLE_TO_SUBSCRIBE,target:_s,analytics:Sp})},im=$t=>{const dn=At($t);_l.handleJsException({error:dn,code:dn.code,target:_s,analytics:Sp}),this._disconnect({noStateTransition:!0});const vn={failureReason:"Subscribe",failureMessage:`OT.Subscriber PeerConnection Error: ${dn.message}`,failureCode:Jr.P2P_CONNECTION_FAILED};Tm(dn.code,dn.message),Mu.fail({options:vn,error:na(dn.name,new Error(`Subscribe: Subscriber PeerConnection with connection (not found) failed: ${dn.message}`),dn.code)}),dn.name===kt.STREAM_NOT_FOUND&&this._destroy({reason:"streamNotFound",noStateTransition:!0})},Zm=($t,dn,vn,Wn)=>{if(Wn==="SetRemoteDescription"&&!_i&&dn.match(/Unsupported video without audio for fallback/)){ao&&ao.addError("The stream is unable to be played.","Your browser does not support the video format.");let rr;tp.env.name==="Safari"?rr=new Error("VP8 is not supported in this version of Safari. You might want to consider switching to an H264 project. See https://tokbox.com/safari for more information."):rr=new Error("Video format not supported in this browser."),rr.code=Jr.UNSUPPORTED_VIDEO_CODEC,lm(rr);return}if(Wn==="ICEWorkflow"&&rs.sessionInfo.reconnection&&Yp){es.debug("Ignoring peer connection failure due to possibility of reconnection.");return}let Dn;Wn==="ICEWorkflow"?Dn=Jr.SUBSCRIBER_ICE_WORKFLOW_FAILED:$t===Jr.STREAM_LIMIT_EXCEEDED?Dn=$t:Dn=Jr.P2P_CONNECTION_FAILED;const ir={failureReason:Wn||"PeerConnectionError",failureMessage:`OT.Subscriber PeerConnection Error: ${dn}`,failureCode:Dn},ar=qo($t,dn,Wn,"(not found)","Subscriber");if(Mu.fail({options:ir,error:ar}),Ks.isAttemptingToSubscribe()){const rr={hasRelayCandidates:vn&&vn.hasRelayCandidates()};Vs("createPeerConnection","Failure",rr,ir),Ks.set("Failed")}else Ks.isSubscribing()&&(Ks.set("Failed"),this.trigger("error",dn));this._disconnect({noStateTransition:!0}),Number($t)===404&&this._destroy({noStateTransition:!0}),_l.handleJsException({error:ar,errorMsg:`OT.Subscriber PeerConnection Error: ${dn}`,code:Dn,target:this,analytics:Sp}),Tm($t)},Gm=$t=>{const dn=$t._hasVideoTracks(),vn=$t._hasAudioTracks(),Wn=Co&&Co.hasVideo&&!dn,Dn=Co&&Co.hasAudio&&!vn;return!(Wn||Dn)},Wm=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn,Wn){var Dn;return rt.default.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:return ar.prev=0,ar.next=3,It(()=>Gm(Wn));case 3:ar.next=12;break;case 5:if(ar.prev=5,ar.t0=ar.catch(0),ar.t0.message!=="TIMEOUT"){ar.next=11;break}es.error("The expected tracks never arrived"),ar.next=12;break;case 11:throw ar.t0;case 12:return Dn=Wn.getSourceStreamId(),dm&&Dn==="MANTIS"&&ym.subscriberComplete(),ar.next=16,s1(vn.stream,Wn);case 16:case"end":return ar.stop()}},dn,null,[[0,5]])}));return function(vn,Wn){return $t.apply(this,arguments)}}(),s1=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn,Wn){var Dn,ir,ar,rr,Po,eo,Ur,Ps;return rt.default.wrap(function(bo){for(;;)switch(bo.prev=bo.next){case 0:return Ep=vn,dm&&(Ep=new MediaStream(Wn._getTracks())),Dn=Object.keys(Zp).length===1,ir=Wn==null?void 0:Wn.getSourceStreamId(),ar=rs,rr=ar.sessionInfo,Vo=vn,ir&&(Zp[ir]=vn),es.debug("OT.Subscriber.onRemoteStreamAdded with sourceStreamId",ir),Ks.set("BindingRemoteStream"),Us.subscribeToAudio(Lp),qu="loading",Us.subscribeToVideo(oo.subscribeToVideo,"loading"),!rr.p2pEnabled&&ir!=="P2P"&&(Us.setPreferredResolution(oo.preferredResolution),Us.setPreferredFrameRate(oo.preferredFrameRate)),Wn&&Wn._getVideoTracks().forEach(Ul=>{(typeof window!==void 0?window:commonjsGlobal).webkitMediaStream?Ul.enabled=!1:Ul.enabled=Co.hasVideo&&oo.subscribeToVideo}),bo.next=16,Bp(Ep);case 16:if(Am(),!Ks.isDestroyed()){bo.next=19;break}throw new Error("Subscriber destroyed");case 19:return Wn&&(typeof window!==void 0?window:commonjsGlobal).webkitMediaStream&&Wn._getVideoTracks().forEach(Ul=>{Ul.enabled=Co.hasVideo&&oo.subscribeToVideo}),Po=ao&&ao.video(),Po&&Po.orientation({width:Co.videoDimensions.width,height:Co.videoDimensions.height,videoOrientation:Co.videoDimensions.orientation}),eo=Qo&&Qo.videoUnsupportedIndicator,eo&&eo.setVideoUnsupported(!_i),Ur=new tt((Ul,mm)=>{const xm=ao&&ao.video();if(xm&&xm.domElement()){Ul();return}ao.once("videoElementCreated",Ul),_s.once("destroyed",mm)}),bo.next=27,Ur;case 27:return bo.next=29,Uu.promise;case 29:Dn?Ks.set("Subscribing"):Om(),fp&&"webRTCStream"in fp&&Wn._hasAudioTracks()&&fp.webRTCStream(vn),Ps=tp.env,(Ps.isSafari||Ps.isChromiumEdge||Ps.isOpera||Ps.name==="Chrome"&&Ps.version>=58||Ps.isFirefox&&Ps.version>=96)&&(Zn&&(Zn.destroy(),Zn=null),Wn&&(Zn=zn(Wn.getStats.bind(Wn)))),Dn||Us.trigger("streamAdded",Us),Ml.finishTransitionTo(du);case 35:case"end":return bo.stop()}},dn)}));return function(vn,Wn){return $t.apply(this,arguments)}}(),Au=$t=>{es.debug("OT.Subscriber.onStreamRemoved");const dn=ao&&ao.video();dn&&dn.stream===$t&&ao.destroyVideo(),Cp(du),Ep=null,this.trigger("streamRemoved",this)},Pu=$t=>{_i!==$t&&this.dispatchEvent(new $u.VideoEnabledChangedEvent($t?"videoEnabled":"videoDisabled",{reason:$t?"codecChanged":"codecNotSupported"})),_i=$t},Mm=$t=>{ao.setAudioBlockedUi($t);const dn=Qo&&Qo.audioBlockedIndicator;dn&&dn.setAudioBlocked($t);const vn=Qo&&Qo.videoUnsupportedIndicator;vn&&vn.setVideoUnsupported(!$t&&!_i)};this.on("audioBlocked",()=>{Mm(!0)}),this.on("audioUnblocked",()=>{Mm(!1)});const y1={new:yt.SUBSCRIBER_DISCONNECTED,checking:yt.SUBSCRIBER_DISCONNECTED,connected:yt.SUBSCRIBER_CONNECTED,completed:yt.SUBSCRIBER_CONNECTED,disconnected:yt.SUBSCRIBER_DISCONNECTED},a1=($t,dn)=>{const vn=y1[$t],Wn=dn.getSourceStreamId(),Dn=Vl[Wn];vn&&vn!==Dn&&(Vl[Wn]=vn,$t==="disconnected"&&Wn!=="P2P"&&setTimeout((0,it.default)(rt.default.mark(function ar(){var rr;return rt.default.wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:if(rr=rs._.isSocketReconnecting,!(Vl[Wn]==="disconnected"&&bu.is("connected")&&!rr())){eo.next=4;break}return eo.next=4,Us._.iceRestart("peer connection disconnected");case 4:case"end":return eo.stop()}},ar)})),2e3),ao&&ao.loading(vn!==yt.SUBSCRIBER_CONNECTED),es.debug(`OT.Subscriber.connectionStateChanged to ${$t}`),this.dispatchEvent(new $u.ConnectionStateChangedEvent(vn,this)))},c1=()=>{am("Success")},Cm=()=>{am("Failure",{reason:"ICEWorkflow",message:"OT.Subscriber PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall."})},b1=$t=>{const dn=ao&&ao.video();switch($t.changedProperty){case"videoDimensions":if(!dn)break;dn.orientation({width:$t.newValue.width,height:$t.newValue.height,videoOrientation:$t.newValue.orientation}),this.dispatchEvent(new $u.VideoDimensionsChangedEvent(this,$t.oldValue,$t.newValue));break;case"videoDisableWarning":Qo&&Qo.videoDisabledIndicator.setWarning($t.newValue),this.dispatchEvent(new $u.VideoDisableWarningEvent($t.newValue?"videoDisableWarning":"videoDisableWarningLifted")),nr=$t.newValue?1:null;break;case"hasVideo":Vm(!Co.hasVideo||!oo.subscribeToVideo),xa.isSafari&&!Co.hasVideo&&ao&&ao.bindAudioTrackOnly(),this.dispatchEvent(new $u.VideoEnabledChangedEvent(Co.hasVideo?"videoEnabled":"videoDisabled",{reason:"publishVideo"}));break;case"hasAudio":dp.update();break}},S1=()=>Co.getChannelsOfType("audio").length>0;dp={get(){return S1()?_s.getStyle("buttonDisplayMode"):"off"},update(){const $t=dp.get();Qo&&(Qo.muteButton.setDisplayMode($t),Qo.backingBar.setMuteMode($t))}};const E1=($t,dn)=>{if(Qo)switch($t){case"nameDisplayMode":Qo.name.setDisplayMode(dn),Qo.backingBar.setNameMode(dn);break;case"videoUnsupportedDisplayMode":Qo.videoUnsupportedIndicator.setDisplayMode(dn);break;case"videoDisabledDisplayMode":Qo.videoDisabledIndicator.setDisplayMode(dn);break;case"audioBlockedDisplayMode":Qo.audioBlockedIndicator.setDisplayMode(dn);break;case"showArchiveStatus":Qo.archive.setShowArchiveStatus(dn);break;case"buttonDisplayMode":dp.update();break;case"audioLevelDisplayMode":Qo.audioLevel.setDisplayMode(dn);break;case"bugDisplayMode":break;case"backgroundImageURI":ao.setBackgroundImageURI(dn);break}},pm=()=>{const $t={backingBar:new _o({nameMode:oo.name?this.getStyle("nameDisplayMode"):"off",muteMode:dp.get()}),name:new ep({name:oo.name,mode:this.getStyle("nameDisplayMode")}),muteButton:new lp({muted:Hu===0,mode:dp.get()})};if(qp){const dn=new jo;qr=new $r({mode:_s.getStyle("audioLevelDisplayMode")});const vn=new Gt(()=>{qr.setValue(dn.transform(this.loudness))});qr.watchVisibilityChanged(Wn=>{Wn?vn.start():vn.stop()}),qr.setDisplayMode(this.getStyle("audioLevelDisplayMode")),qr.audioOnly(!1),$t.audioLevel=qr}$t.videoDisabledIndicator=new Hp({mode:this.getStyle("videoDisabledDisplayMode")}),$t.audioBlockedIndicator=new uu({mode:this.getStyle("audioBlockedDisplayMode")}),$t.videoUnsupportedIndicator=new Xl({mode:this.getStyle("videoUnsupportedDisplayMode")}),ao&&ao.domElement&&(Qo=new Ql({parent:ao.domElement}).set($t).on({muted(){_s.setAudioVolume(0)},unmuted(){_s.setAudioVolume(Gn)}},this),Qo.hideWhileLoading())},Tm=($t,dn)=>{let vn,Wn;ao&&($t===Jr.STREAM_LIMIT_EXCEEDED?(vn="The stream was unable to connect.",Wn="The limit for the number of media streams has been reached."):dn==="Tried to subscribe to an encrypted stream without enabling encryption"?(vn="Unable to subscribe to an encrypted stream without enabling encryption.",Wn=""):(vn="The stream was unable to connect due to a network error.",_r?Wn="Ensure you have a stable connection and try again.":Wn="Make sure you have a stable network connection and that it isn't blocked by a firewall."),ao.addError(vn,Wn))};xp(this,{nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioBlockedDisplayMode:"auto",backgroundImageURI:null,showArchiveStatus:!0,showMicButton:!0},oo.showControls,$t=>{Vs("SetStyle","Subscriber",$t,null,.1)});function Vm($t){Mp().forEach(function(){var vn=(0,it.default)(rt.default.mark(function Wn(Dn){return rt.default.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:return ar.next=2,Dn;case 2:ar.sent.subscribeToVideo(!$t);case 3:case"end":return ar.stop()}},Wn)}));return function(Wn){return vn.apply(this,arguments)}}());const dn=$t||!Ep||!Ep.getVideoTracks().length;ao&&(ao.audioOnly(dn),ao.showPoster(dn)),qr&&qr.audioOnly(dn)}const l1=lt(()=>{Vs("GetStats","Called")}),Rm=lt(()=>{Vs("GetRtcStatsReport","Called")}),Lm=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn){return rt.default.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:return Vp&&(Vp.destroy(),Vp=void 0),Dn.prev=1,Dn.next=4,It(()=>vn._hasAudioTracks());case 4:Dn.next=9;break;case 6:return Dn.prev=6,Dn.t0=Dn.catch(1),Dn.abrupt("return");case 9:fp=au(vn),fp?Vp=Nt({subscriber:Us,audioLevelSampler:fp}):Object.prototype.hasOwnProperty.call(Us,"loudness")||(Object.defineProperty(Us,"loudness",{value:void 0,configurable:!0,writable:!1}),es.error("No suitable audio level samplers found, audio level visualisation will not work"));case 11:case"end":return Dn.stop()}},dn,null,[[1,6]])}));return function(vn){return $t.apply(this,arguments)}}(),Im=($t,dn)=>{if(up[dn]){up[dn].removeAll();const Wn=()=>{$t.off("error",Wn),$t.off("disconnected",Wn)};$t.on("error",Wn),$t.on("disconnected",Wn)}const vn=Wt($t);vn.once("connected",()=>cm($t)),vn.on("disconnected",Em),vn.on("error",Zm),vn.once("remoteTrackAdded",(0,it.default)(rt.default.mark(function Wn(){var Dn=arguments;return rt.default.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:return ar.next=2,Lm($t);case 2:return ar.prev=2,ar.next=5,Wm(...Dn);case 5:ar.next=10;break;case 7:ar.prev=7,ar.t0=ar.catch(2),es.error(ar.t0);case 10:case"end":return ar.stop()}},Wn,null,[[2,7]])}))),vn.on("audioLevelStuckWarning",o1),vn.on("signalingStateStable",(0,it.default)(rt.default.mark(function Wn(){var Dn;return rt.default.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:_s.trigger("signalingStateStable"),Dn=ao&&ao.video(),Dn&&Vo&&fp&&"webRTCStream"in fp&&$t._hasAudioTracks()&&fp.webRTCStream(Vo);case 3:case"end":return ar.stop()}},Wn)}))),vn.on("iceConnectionStateChange",Wn=>a1(Wn,$t)),vn.on("iceRestartSuccess",c1),vn.on("iceRestartFailure",Cm),vn.on("remoteVideoSupported",Pu),vn.on("remoteStreamRemoved",Au),vn.on("decryptFailed",()=>{this.trigger("encryptionSecretMismatch"),Vs("encryptionSecretMismatch","Event"),es.warn("Media cannot be decrypted due to an encryption secret mismatch.")}),vn.on("decryptRestored",()=>{this.trigger("encryptionSecretMatch"),Vs("encryptionSecretMatch","Event")}),up[dn]=up},Pm=function(){var $t=(0,it.default)(rt.default.mark(function dn(){var vn;return rt.default.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:return bm("Attempt"),Dn.next=3,wu("MANTIS");case 3:if(vn=Dn.sent,vn!=null&&vn.iceConnectionStateIsConnected()){Dn.next=7;break}return bm("Failure",{reason:"Attempted to transition to Relayed without being connected in Routed mode."}),Dn.abrupt("return");case 7:bu.subscriberCreate(Co.id,rp,qm,"P2P",rs._.isE2ee(),(ir,ar)=>{ir&&!Mu.is("disconnected")&&bm("Failure",ir),es.debug("message received when created a subscriber with source",ar)});case 8:case"end":return Dn.stop()}},dn)}));return function(){return $t.apply(this,arguments)}}(),Fm=function(){var $t=(0,it.default)(rt.default.mark(function dn(){var vn,Wn;return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!(oo.testNetwork||Ao(Co,rs)||du!=="P2P")){ir.next=2;break}return ir.abrupt("return");case 2:if(Qm("Attempt"),Vo=Zp.MANTIS,Ep=Vo,!dm){ir.next=10;break}return ir.next=8,wu("MANTIS");case 8:vn=ir.sent,Ep=new MediaStream(vn._getTracks());case 10:return ir.next=12,Bp(Ep);case 12:return ao.loading(!1),op("P2P"),du="MANTIS",Cp("P2P"),ir.next=18,Ou();case 18:return Wn=ir.sent,ir.next=21,Lm(Wn);case 21:Qm("Success");case 22:case"end":return ir.stop()}},dn)}));return function(){return $t.apply(this,arguments)}}();this._destroy=$t=>{let dn=$t.reason,vn=dn===void 0?"Unknown":dn,Wn=$t.quiet,Dn=$t.noStateTransition,ir=Dn===void 0?!1:Dn;return Ks.isDestroyed()?this:(Ks.set("Destroyed"),Zn&&(Zn.destroy(),Zn=null),er={sessionId:rs.sessionId,connectionId:rs&&rs.isConnected()?rs.connection.connectionId:null,partnerId:rs&&rs.sessionInfo?rs.sessionInfo.partnerId:null,streamId:Co&&!Co.destroyed?Co.id:null},this._disconnect({reason:vn,noStateTransition:ir}),Qo&&(Qo.destroy(),Qo=null),ao&&(ao.destroy(),ao.off(),ao=null,this.element=null),Co&&!Co.destroyed&&Vs("unsubscribe",null,{streamId:Co.id}),Co.off(om,this),this.id=null,tm=null,this.stream=null,Co=null,this.streamId=null,this.session=null,rs=null,oo=null,Wn!==!0&&(this.dispatchEvent(new $u.DestroyedEvent(yt.SUBSCRIBER_DESTROYED,this,vn)),this.off()),this)},this.destroy=function($t,dn){$t===void 0&&($t="Unsubscribe"),es.warn("Subscriber#destroy is deprecated and will be removed. Please use Session#unsubscribe instead"),Us._destroy({reason:$t,quiet:dn})},this._disconnect=function($t){let dn=$t===void 0?{}:$t,vn=dn.reason,Wn=vn===void 0?"Unknown":vn;if(!dn.noStateTransition&&!Mu.is("disconnected")){const ir=Wn==="Unsubscribe"?void 0:na(Gu.STREAM_DESTROYED,new Error("Stream was destroyed before it could be subscribed to"));Mu.disconnect({payload:{reason:Wn},error:ir})}!Ks.isDestroyed()&&!Ks.isFailed()&&Ks.set("NotSubscribing"),ao&&ao.destroyVideo(),bu.is("connected")&&Co&&!Co.destroyed&&bu.subscriberDestroy(Co.id,Us.widgetId),nm()},this.disconnect=()=>{es.warn("Subscriber#disconnect is deprecated and will be removed. Please use Session#unsubscribe instead"),this._disconnect({reason:"Unsubscribe"})};const Xm=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn){var Wn,Dn,ir,ar,rr,Po,eo;return rt.default.wrap(function(Ps){for(;;)switch(Ps.prev=Ps.next){case 0:return Wn=vn.peerId,Dn=vn.fromConnectionId,ir=vn.sourceStreamId,ar=ho({apiKey:rs.apiKey,sessionId:rs.sessionId,streamId:Co.id,subscriberId:Us.widgetId}),rr=Nn({socket:Us.session._.getSocket(),uri:ar,content:{peerId:Wn,sourceStreamId:ir}}),Po=function(bo,Ul,mm,xm,$1){xm===void 0&&(xm={});const Q1=Object.assign({peerId:Wn,sourceStreamId:gr(ir)},xm);return Vs(bo,Ul,mm,Q1,$1)},eo=fu=>{du===ir&&Nm(Object.assign({},fu,{peerId:Wn,remoteConnectionId:Dn,sourceStreamId:ir}))},Ps.abrupt("return",Us._setupPeerConnection({send:rr,log:Po,logQoS:eo,sourceStreamId:ir}));case 6:case"end":return Ps.stop()}},dn)}));return function(vn){return $t.apply(this,arguments)}}();this.processMessage=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn,Wn,Dn){var ir,ar,rr;return rt.default.wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:return es.debug(`OT.Subscriber.processMessage: Received ${vn} message from ${Wn}`),es.debug(Dn),ir=ut(Dn,"content.peerId"),ar=ut(Dn,"content.sourceStreamId"),eo.next=6,wu(ar);case 6:if(rr=eo.sent,!rr){eo.next=11;break}rr.processMessage(vn,Dn),eo.next=16;break;case 11:if(vn!=="offer"){eo.next=16;break}return eo.next=14,Xm({peerId:ir,fromConnectionId:Wn,sourceStreamId:ar});case 14:rr=eo.sent,dm?rr.processMessage("offer",Dn):Us.session._.addSubscriberToPeerConnectionsQueue(rr,Dn);case 16:case"end":return eo.stop()}},dn)}));return function(dn,vn,Wn){return $t.apply(this,arguments)}}(),this.disableVideo=$t=>{if(!$t)es.warn("Due to high packet loss and low bandwidth, video has been disabled");else if(qu==="auto")es.info("Video has been re-enabled");else{es.info("Video was not re-enabled because it was manually disabled");return}this.subscribeToVideo($t,"auto"),Vs("updateQuality","video",$t?{videoEnabled:!0}:{videoDisabled:!0})},this.getImgData=()=>{if(!this.isSubscribing())return es.error("OT.Subscriber.getImgData: Cannot getImgData before the Subscriber is subscribing."),null;const $t=ao&&ao.video();return $t?$t.imgData():null},this.getStats=$t=>{rm((dn,vn)=>{if(dn){$t(dn);return}const Wn={timestamp:0};vn.forEach(Dn=>{if(yl.isInboundStat(Dn)){const ir=yl.isVideoStat(Dn,vn),ar=yl.isAudioStat(Dn,vn);(ar||ir)&&(Wn.timestamp=yl.normalizeTimestamp(Dn.timestamp)),ir?(st(Wn,{video:yl.parseStatCategory(Dn)}),Zn&&st(Wn,{video:{frameRate:Zn.getFrameRateFromStat(Dn)}})):ar&&st(Wn,{audio:yl.parseStatCategory(Dn)})}}),$t(null,Wn)})},this.getRtcStatsReport=()=>new tt(($t,dn)=>{sm((vn,Wn)=>{vn?dn(vn):$t(Wn)})});function Dm($t){const dn=ao&&ao.video();if(dn)try{dn.setAudioVolume($t)}catch(vn){es.warn(`setAudioVolume: ${vn}`),Hu===0&&(es.info("Using subscribeToAudio to mute Audio because setAudioVolume(0) failed"),_s.subscribeToAudio(!1))}Qo&&Qo.muteButton.muted($t===0)}this.setAudioVolume=$t=>{const dn=vo($t);return Vs("setAudioVolume","Attempt",{audioVolume:dn}),isNaN(dn)?(es.error("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),Vs("setAudioVolume","Failure",{message:"value should be an integer between 0 and 100"}),this):(dn!==$t&&es.warn("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),dn===Hu?(Dm(Hu),Vs("setAudioVolume","Success",{audioVolume:Hu,message:"Requested volume is same as already set audioVolume"}),this):(Hu>0&&(Gn=Hu),Hu=dn,Dm(Hu),Hu>0&&!Lp&&(Gn=Hu,this.subscribeToAudio(!0)),Vs("setAudioVolume","Success",{audioVolume:Hu}),this))},this.getAudioVolume=()=>{const $t=ao&&ao.video();if($t)try{return $t.getAudioVolume()}catch(dn){es.warn(`getAudioVolume ${dn}`)}return Hu},this.subscribeToAudio=$t=>{const dn=gt($t,!0);Mp().forEach(function(){var Wn=(0,it.default)(rt.default.mark(function Dn(ir){return rt.default.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,ir;case 2:rr.sent.subscribeToAudio(dn);case 3:case"end":return rr.stop()}},Dn)}));return function(Dn){return Wn.apply(this,arguments)}}()),Co&&Mp().length!==0&&Co.setChannelActiveState("audio",dn);const vn=Lp!==dn;return Lp=dn,vn&&this.setAudioVolume(dn?Gn:0),Vs("subscribeToAudio","Event",{subscribeToAudio:dn}),this};const C1={auto:"quality",publishVideo:"publishVideo",subscribeToVideo:"subscribeToVideo"};if(xa.name==="Safari"){const $t=()=>{!wo.hidden&&oo.subscribeToVideo&&(es.debug("document visibility restored in Safari - resubscribing to video"),this.subscribeToVideo(!1),this.subscribeToVideo(!0))};wo.addEventListener("visibilitychange",$t),this.once("destroyed",()=>{wo.removeEventListener("visibilitychange",$t)})}if(this.subscribeToVideo=($t,dn)=>{const vn=gt($t,!0),Wn=!vn&&dn==="auto";return Wn&&(nr=2),Vs("subscribeToVideo","Attempt",{subscribeToVideo:vn,reason:dn}),Vm(!vn||!Co.hasVideo||!Vo),Co.hasVideo&&!Tp("video")?(vn&&es.info("Subscriber is audio-only due to incompatibility, can't subscribeToVideo."),oo.subscribeToVideo=!1,Vs("subscribeToVideo","Failure",{message:"No video tracks available"}),this):(Qo&&Qo.videoDisabledIndicator&&Qo.videoDisabledIndicator.disableVideo(Wn),Mp().length>0&&rs&&Co&&(vn!==oo.subscribeToVideo||dn!==qu)&&Co.setChannelActiveState("video",vn,dn),oo.subscribeToVideo=vn,qu=dn,Gp=vn,Vs("subscribeToVideo","Success",{subscribeToVideo:vn,reason:dn}),dn!=="loading"&&this.dispatchEvent(new $u.VideoEnabledChangedEvent(vn?"videoEnabled":"videoDisabled",{reason:C1[dn]||"subscribeToVideo"})),this)},this.setPreferredResolution=$t=>{if(Ks.isDestroyed()||Mp().length===0&&!Ks.current==="Connecting"){es.warn("Cannot set the max Resolution when not subscribing to a publisher");return}if(oo.preferredResolution=$t,rs.sessionInfo.p2pEnabled){es.warn("OT.Subscriber.setPreferredResolution will not work in a P2P Session");return}if(!Ks.isStreamAdded())return;const dn=Co.getPreferredResolution();dn&&$t&&dn.width===$t.width&&dn.height===$t.height||!dn&&!$t||Co.setPreferredResolution($t)},this.setPreferredFrameRate=$t=>{if(Ks.isDestroyed()||Mp().length===0&&!Ks.current==="Connecting"){es.warn("Cannot set the max frameRate when not subscribing to a publisher");return}if(oo.preferredFrameRate=$t,rs.sessionInfo.p2pEnabled){es.warn("OT.Subscriber.setPreferredFrameRate will not work in a P2P Session");return}const dn=Co.getPreferredFrameRate();$t&&dn&&dn===$t||!dn&&!$t||Co.setPreferredFrameRate($t)},this.isSubscribing=()=>Ks.isSubscribing(),this.isWebRTC=!0,this.isLoading=()=>ao&&ao.loading(),this.isAudioBlocked=()=>!!(ao&&ao.isAudioBlocked()),this.videoElement=()=>{const $t=ao&&ao.video();return $t?$t.domElement():null},this.videoWidth=()=>{const $t=ao&&ao.video();return $t?$t.videoWidth():void 0},this.videoHeight=()=>{const $t=ao&&ao.video();return $t?$t.videoHeight():void 0},this._subscribeToSelf=(0,it.default)(rt.default.mark(function $t(){var dn;return rt.default.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(dn=rs.getPublisherForStream(Co),dn&&dn._.webRtcStream()){Wn.next=5;break}Mu.fail({payload:{reason:"streamNotFound"},error:na(Gu.STREAM_DESTROYED,new Error("Tried to subscribe to a local publisher, but its stream no longer exists"))}),Wn.next=14;break;case 5:return Uu.resolve(),Wn.prev=6,Wn.next=9,s1(dn._.webRtcStream());case 9:Wn.next=14;break;case 11:Wn.prev=11,Wn.t0=Wn.catch(6),es.error(Wn.t0);case 14:case"end":return Wn.stop()}},$t,null,[[6,11]])})),this._setupPeerConnection=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn){var Wn,Dn,ir,ar;return rt.default.wrap(function(Po){for(;;)switch(Po.prev=Po.next){case 0:return Wn=vn.send,Dn=vn.log,ir=vn.logQoS,ar=vn.sourceStreamId,oo.testNetwork&&Us.setAudioVolume(0),Mp().length===0&&Ks.set("Connecting"),du=ar,ip[ar]=new tt((eo,Ur)=>{rs._.getIceConfig().then(Ps=>{Ps.needRumorIceServersFallback&&(Ps.servers=[...co||[],...Ps.servers||[]]);const fu={iceConfig:Ps,subscriberId:Us.widgetId,send:Wn,logAnalyticsEvent:Dn,p2p:rs.sessionInfo.p2pEnabled,sourceStreamId:ar,remoteConnectionId:Co.connection.id,_singlePeerConnectionController:ar==="MANTIS"&&ym,keyStore:rs.keyStore,sFrameClientStore:rs.sFrameClientStore,isE2ee:rs._.isE2ee()};Object.prototype.hasOwnProperty.call(oo,"codecFlags")&&(fu.codecFlags=oo.codecFlags);const bo=new $s.SubscriberPeerConnection(fu);bo.once("iceConnected",Uu.resolve),bo.once("error",Uu.reject),bo.on("qos",ir),Im(bo,ar),bo.init(Ul=>{Ul?Ur(Ul):eo(bo)})})}),Po.abrupt("return",ip[ar]);case 6:case"end":return Po.stop()}},dn)}));return function(dn){return $t.apply(this,arguments)}}(),this.restrictFrameRate=$t=>(es.debug(`OT.Subscriber.restrictFrameRate(${$t})`),Vs("restrictFrameRate",$t.toString(),{streamId:Co.id}),rs.sessionInfo.p2pEnabled&&es.warn("OT.Subscriber.restrictFrameRate: Cannot restrictFrameRate on a P2P session"),typeof $t!="boolean"?es.error(`OT.Subscriber.restrictFrameRate: expected a boolean value got a ${typeof $t}`):(Qt=$t,Co.setRestrictFrameRate($t)),this),this.on("styleValueChanged",E1,this),this._={getDataChannel($t,dn,vn){return(0,it.default)(rt.default.mark(function Wn(){return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(Ou()){ir.next=3;break}return vn(new tp.Error("Cannot create a DataChannel before there is a publisher connection.")),ir.abrupt("return");case 3:return ir.next=5,Ou();case 5:ir.sent.getDataChannel($t,dn,vn);case 6:case"end":return ir.stop()}},Wn)}))()},iceRestart($t,dn){return(0,it.default)(rt.default.mark(function vn(){var Wn;return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return dn===void 0&&(dn=!1),ir.next=3,wu("MANTIS");case 3:Wn=ir.sent,Wn?(am("Attempt",{reason:$t}),es.debug("Subscriber: iceRestart attempt"),Wn.iceRestart(),dn&&Wn.generateOffer()):es.debug("Subscriber: Skipping ice restart, we have no peer connection");case 5:case"end":return ir.stop()}},vn)}))()},unblockAudio:()=>ao&&ao.unblockAudio(),webRtcStream:()=>Vo,setIceConfig:function(){var $t=(0,it.default)(rt.default.mark(function vn(Wn){return rt.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:Mp().forEach(function(){var ar=(0,it.default)(rt.default.mark(function rr(Po){return rt.default.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Ur.next=2,Po;case 2:return Ur.abrupt("return",Ur.sent.setIceConfig(Wn));case 3:case"end":return Ur.stop()}},rr)}));return function(rr){return ar.apply(this,arguments)}}());case 1:case"end":return ir.stop()}},vn)}));function dn(vn){return $t.apply(this,arguments)}return dn}(),privateEvents:new Tt,startRoutedToRelayedTransition(){oo.testNetwork||Ao(Co,rs)||(Ml.startTransitionTo("P2P"),Pm())},startRelayedToRoutedTransition(){Ml.startTransitionTo("MANTIS",()=>Fm())},setSinkId($t){if(ao&&ao.video())return ao.setSinkId($t);es.debug("Called setAudioOutputDevice on a subscriber without a video element")},pauseAndPlayVideoElement(){ao&&ao.pauseAndPlayVideoElement()}},Ks=new Op(hm),es.debug(`OT.Subscriber: subscribe to ${Co.id}`),Ks.set("Init"),!Co)return es.error("OT.Subscriber: No stream parameter."),!1;om={updated:b1},Co.on(om,this),oo.name=oo.name||Co.name,oo.classNames="OT_root OT_subscriber",oo.style&&this.setStyle(oo.style,null,!0),Gn=ro,oo.subscribeToVideo=gt(oo.subscribeToVideo,!0),oo.subscribeToAudio=gt(oo.subscribeToAudio,!0),this.subscribeToAudio(oo.subscribeToAudio),this.setAudioVolume(po(oo)),ao=new $s.WidgetView(Ap,Object.assign({},oo,{widgetType:"subscriber"})),ao.on("error",lm),ao.on("audioBlocked",()=>this.trigger("audioBlocked")),ao.on("audioUnblocked",()=>this.trigger("audioUnblocked")),ao.on("amrLogEvent",($t,dn,vn)=>{Vs($t,dn,{},vn)}),this.id=ao.domId(),tm=ao.domId(),this.element=ao.domElement,ao.on("videoElementCreated",$t=>{const dn=new $u.VideoElementCreatedEvent($t),vn=this;Yp?this.dispatchEvent(dn):this.once("loaded",()=>{vn.dispatchEvent(dn)})}),this.element&&pm.call(this);const jm=Co.getChannelsOfType("audio"),Um=Co.getChannelsOfType("video"),u1=Co.getChannelsOfType("data");let _m=u1.some($t=>$t.id==="caption1"&&$t.active);this.subscribeToCaptions=function(){var $t=(0,it.default)(rt.default.mark(function dn(vn){var Wn,Dn;return rt.default.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:Wn=gt(vn,!0),Dn={active:Wn},_m=Wn,Vs("subscribeToCaptions","Attempt",{subscribeToCaptions:Wn}),bu.subscriberChannelUpdate(Co.id,Us.widgetId,"caption1",Dn),Vs("subscribeToCaptions","Success",{subscribeToCaptions:Wn});case 6:case"end":return ar.stop()}},dn)}));return function(dn){return $t.apply(this,arguments)}}(),this.isSubscribedToCaptions=()=>_m;const qm=jm.map($t=>({id:$t.id,type:$t.type,active:oo.subscribeToAudio})).concat(Um.map($t=>{const dn={id:$t.id,type:$t.type,active:oo.subscribeToVideo,restrictFrameRate:oo.restrictFrameRate!==void 0?oo.restrictFrameRate:!1};return oo.preferredFrameRate!==void 0&&(dn.preferredFrameRate=parseFloat(oo.preferredFrameRate)),oo.preferredHeight!==void 0&&(dn.preferredHeight=parseInt(oo.preferredHeight,10)),oo.preferredWidth!==void 0&&(dn.preferredWidth=parseInt(oo.preferredWidth,10)),dn})).concat(u1.map($t=>({id:$t.id,type:$t.type,active:$t.active}))),d1=(eu=Co.getChannelsOfType("data")[0])==null?void 0:eu.active,Rn=!oo.testNetwork&&Ao(Co,rs)&&!d1;(()=>{var $t;const dn=rs.getPublisherForStream(Co);if(dn!=null&&($t=dn._)!=null&&$t.privateEvents&&Rn){let vn=!1;dn._.privateEvents.on("publisherCaptionsEnabled",Wn=>{!vn&&Wn.captionsEnabled&&(qm.find(Dn=>Dn.id==="caption1").active=!0,An(),vn=!0)})}})(),Mu.beginConnect();const An=()=>{bu.subscriberCreate(Co.id,rp,qm,null,rs._.isE2ee(),($t,dn)=>{$t&&!Mu.is("disconnected")&&im($t),co=Rr(dn)})};return Rn?(this._subscribeToSelf(),this):(dm?ym.addSubscriber(An):An(),this)};return Zs.hasAudioOutputLevelStatCapability=Js,Zs.WidgetView=ws,Zs.SubscriberPeerConnection=wp,Zs}}).call(this,b(0))},function(_e,et,b){const tt=b(2);_e.exports=()=>["Chrome","Opera","Safari"].indexOf(tt.name)>-1},function(_e,et,b){const tt=b(2),nt=tt.name;_e.exports=()=>["Firefox","Safari","Edge","Chrome","Opera"].indexOf(nt)>-1},function(_e,et,b){const ot=b(160)()("NotSubscribing",["NotSubscribing","Init","Connecting","BindingRemoteStream","Subscribing","Failed","Destroyed"],{NotSubscribing:["NotSubscribing","Init","Destroyed"],Init:["NotSubscribing","Connecting","BindingRemoteStream","Destroyed"],Connecting:["NotSubscribing","BindingRemoteStream","Failed","Destroyed"],BindingRemoteStream:["NotSubscribing","Subscribing","Failed","Destroyed","BindingRemoteStream"],Subscribing:["NotSubscribing","Failed","Destroyed","BindingRemoteStream"],Failed:["Destroyed"],Destroyed:[]});ot.prototype.isDestroyed=function(){return this.current==="Destroyed"},ot.prototype.isFailed=function(){return this.current==="Failed"},ot.prototype.isSubscribing=function(){return this.current==="Subscribing"},ot.prototype.isAttemptingToSubscribe=function(){return["Init","Connecting","BindingRemoteStream"].indexOf(this.current)!==-1},ot.prototype.isStreamAdded=function(){return this.current==="BindingRemoteStream"||this.isSubscribing()},_e.exports=ot},function(_e,et,b){_e.exports=tt=>{let nt=tt.socket,rt=tt.uri,it=tt.content;return(ot,st)=>nt.send({uri:rt,method:ot,content:Object.assign({},it,st)})}},function(_e,et,b){(function(nt,rt){_e.exports=rt()})(this,function(){return function(tt){var nt={};function rt(it){if(nt[it])return nt[it].exports;var ot=nt[it]={i:it,l:!1,exports:{}};return tt[it].call(ot.exports,ot,ot.exports,rt),ot.l=!0,ot.exports}return rt.m=tt,rt.c=nt,rt.i=function(it){return it},rt.d=function(it,ot,st){rt.o(it,ot)||Object.defineProperty(it,ot,{configurable:!1,enumerable:!0,get:st})},rt.n=function(it){var ot=it&&it.__esModule?function(){return it.default}:function(){return it};return rt.d(ot,"a",ot),ot},rt.o=function(it,ot){return Object.prototype.hasOwnProperty.call(it,ot)},rt.p="",rt(rt.s=5)}([function(tt,nt,rt){tt.exports=function(it,ot){var st,at,ct;for(st=1;st<arguments.length;st++){at=arguments[st];for(ct in at)at.hasOwnProperty(ct)&&(it[ct]=at[ct])}return it}},function(tt,nt,rt){var it=rt(0);tt.exports={build:function(ot,st){var at,ct,ut,lt=st.plugins;for(at=0,ct=lt.length;at<ct;at++)ut=lt[at],ut.methods&&it(ot,ut.methods),ut.properties&&Object.defineProperties(ot,ut.properties)},hook:function(ot,st,at){var ct,ut,lt,dt,ft=ot.config.plugins,St=[ot.context];for(at&&(St=St.concat(at)),ct=0,ut=ft.length;ct<ut;ct++)dt=ft[ct],lt=ft[ct][st],lt&&lt.apply(dt,St)}}},function(tt,nt,rt){function it(ot){if(ot.length===0)return ot;var st,at,ct=ot.split(/[_-]/);if(ct.length===1&&ct[0][0].toLowerCase()===ct[0][0])return ot;for(at=ct[0].toLowerCase(),st=1;st<ct.length;st++)at=at+ct[st].charAt(0).toUpperCase()+ct[st].substring(1).toLowerCase();return at}it.prepended=function(ot,st){return st=it(st),ot+st[0].toUpperCase()+st.substring(1)},tt.exports=it},function(tt,nt,rt){var it=rt(0),ot=rt(2);function st(at,ct){at=at||{},this.options=at,this.defaults=ct.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(at.init),this.data=this.configureData(at.data),this.methods=this.configureMethods(at.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(at.transitions||[]),this.plugins=this.configurePlugins(at.plugins,ct.plugin)}it(st.prototype,{addState:function(at){this.map[at]||(this.states.push(at),this.addStateLifecycleNames(at),this.map[at]={})},addStateLifecycleNames:function(at){this.lifecycle.onEnter[at]=ot.prepended("onEnter",at),this.lifecycle.onLeave[at]=ot.prepended("onLeave",at),this.lifecycle.on[at]=ot.prepended("on",at)},addTransition:function(at){this.transitions.indexOf(at)<0&&(this.transitions.push(at),this.addTransitionLifecycleNames(at))},addTransitionLifecycleNames:function(at){this.lifecycle.onBefore[at]=ot.prepended("onBefore",at),this.lifecycle.onAfter[at]=ot.prepended("onAfter",at),this.lifecycle.on[at]=ot.prepended("on",at)},mapTransition:function(at){var ct=at.name,ut=at.from,lt=at.to;return this.addState(ut),typeof lt!="function"&&this.addState(lt),this.addTransition(ct),this.map[ut][ct]=at,at},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(at){return typeof at=="string"?this.mapTransition(it({},this.defaults.init,{to:at,active:!0})):typeof at=="object"?this.mapTransition(it({},this.defaults.init,at,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(at){return typeof at=="function"?at:typeof at=="object"?function(){return at}:function(){return{}}},configureMethods:function(at){return at||{}},configurePlugins:function(at,ct){at=at||[];var ut,lt,dt;for(ut=0,lt=at.length;ut<lt;ut++)dt=at[ut],typeof dt=="function"&&(at[ut]=dt=dt()),dt.configure&&dt.configure(this);return at},configureTransitions:function(at){var ct,ut,lt,dt,ft,St=this.defaults.wildcard;for(ut=0;ut<at.length;ut++)for(lt=at[ut],dt=Array.isArray(lt.from)?lt.from:[lt.from||St],ft=lt.to||St,ct=0;ct<dt.length;ct++)this.mapTransition({name:lt.name,from:dt[ct],to:ft})},transitionFor:function(at,ct){var ut=this.defaults.wildcard;return this.map[at][ct]||this.map[ut][ct]},transitionsFor:function(at){var ct=this.defaults.wildcard;return Object.keys(this.map[at]).concat(Object.keys(this.map[ct]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),tt.exports=st},function(tt,nt,rt){var it=rt(0),ot=rt(6),st=rt(1),at=[null,[]];function ct(ut,lt){this.context=ut,this.config=lt,this.state=lt.init.from,this.observers=[ut]}it(ct.prototype,{init:function(ut){if(it(this.context,this.config.data.apply(this.context,ut)),st.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(ut){return Array.isArray(ut)?ut.indexOf(this.state)>=0:this.state===ut},isPending:function(){return this.pending},can:function(ut){return!this.isPending()&&!!this.seek(ut)},cannot:function(ut){return!this.can(ut)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(ut,lt){var dt=this.config.defaults.wildcard,ft=this.config.transitionFor(this.state,ut),St=ft&&ft.to;return typeof St=="function"?St.apply(this.context,lt):St===dt?this.state:St},fire:function(ut,lt){return this.transit(ut,this.state,this.seek(ut,lt),lt)},transit:function(ut,lt,dt,ft){var St=this.config.lifecycle,Tt=this.config.options.observeUnchangedState||lt!==dt;return dt?this.isPending()?this.context.onPendingTransition(ut,lt,dt):(this.config.addState(dt),this.beginTransit(),ft.unshift({transition:ut,from:lt,to:dt,fsm:this.context}),this.observeEvents([this.observersForEvent(St.onBefore.transition),this.observersForEvent(St.onBefore[ut]),Tt?this.observersForEvent(St.onLeave.state):at,Tt?this.observersForEvent(St.onLeave[lt]):at,this.observersForEvent(St.on.transition),Tt?["doTransit",[this]]:at,Tt?this.observersForEvent(St.onEnter.state):at,Tt?this.observersForEvent(St.onEnter[dt]):at,Tt?this.observersForEvent(St.on[dt]):at,this.observersForEvent(St.onAfter.transition),this.observersForEvent(St.onAfter[ut]),this.observersForEvent(St.on[ut])],ft)):this.context.onInvalidTransition(ut,lt,dt)},beginTransit:function(){this.pending=!0},endTransit:function(ut){return this.pending=!1,ut},failTransit:function(ut){throw this.pending=!1,ut},doTransit:function(ut){this.state=ut.to},observe:function(ut){if(ut.length===2){var lt={};lt[ut[0]]=ut[1],this.observers.push(lt)}else this.observers.push(ut[0])},observersForEvent:function(ut){for(var lt=0,dt=this.observers.length,ft,St=[];lt<dt;lt++)ft=this.observers[lt],ft[ut]&&St.push(ft);return[ut,St,!0]},observeEvents:function(ut,lt,dt,ft){if(ut.length===0)return this.endTransit(ft===void 0?!0:ft);var St=ut[0][0],Tt=ut[0][1],pt=ut[0][2];if(lt[0].event=St,St&&pt&&St!==dt&&st.hook(this,"lifecycle",lt),Tt.length===0)return ut.shift(),this.observeEvents(ut,lt,St,ft);var gt=Tt.shift(),yt=gt[St].apply(gt,lt);return yt&&typeof yt.then=="function"?yt.then(this.observeEvents.bind(this,ut,lt,St)).catch(this.failTransit.bind(this)):yt===!1?this.endTransit(!1):this.observeEvents(ut,lt,St,yt)},onInvalidTransition:function(ut,lt,dt){throw new ot("transition is invalid in current state",ut,lt,dt,this.state)},onPendingTransition:function(ut,lt,dt){throw new ot("transition is invalid while previous transition is still in progress",ut,lt,dt,this.state)}}),tt.exports=ct},function(tt,nt,rt){var it=rt(0),ot=rt(2),st=rt(1),at=rt(3),ct=rt(4),ut={is:function(pt){return this._fsm.is(pt)},can:function(pt){return this._fsm.can(pt)},cannot:function(pt){return this._fsm.cannot(pt)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(pt,gt,yt){return this._fsm.onInvalidTransition(pt,gt,yt)},onPendingTransition:function(pt,gt,yt){return this._fsm.onPendingTransition(pt,gt,yt)}},lt={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(pt){throw Error("use transitions to change state")}}};function dt(pt){return St(this||{},pt)}function ft(){var pt,gt;typeof arguments[0]=="function"?(pt=arguments[0],gt=arguments[1]||{}):(pt=function(){this._fsm.apply(this,arguments)},gt=arguments[0]||{});var yt=new at(gt,dt);return Tt(pt.prototype,yt),pt.prototype._fsm.config=yt,pt}function St(pt,gt){var yt=new at(gt,dt);return Tt(pt,yt),pt._fsm(),pt}function Tt(pt,gt){if(typeof pt!="object"||Array.isArray(pt))throw Error("StateMachine can only be applied to objects");st.build(pt,gt),Object.defineProperties(pt,lt),it(pt,ut),it(pt,gt.methods),gt.allTransitions().forEach(function(yt){pt[ot(yt)]=function(){return this._fsm.fire(yt,[].slice.call(arguments))}}),pt._fsm=function(){this._fsm=new ct(this,gt),this._fsm.init(arguments)}}dt.version="3.0.1",dt.factory=ft,dt.apply=St,dt.defaults={wildcard:"*",init:{name:"init",from:"none"}},tt.exports=dt},function(tt,nt,rt){tt.exports=function(it,ot,st,at,ct){this.message=it,this.transition=ot,this.from=st,this.to=at,this.current=ct}}])})},function(_e,et,b){const tt=b(103)();_e.exports=tt},function(_e,et,b){let tt=function(){function nt(){this.processTransition=()=>{},this.routedToRelayedOngoing=!1,this.relayedToRoutedPending=!1}var rt=nt.prototype;return rt.startTransitionTo=function(ot,st){st===void 0&&(st=()=>{}),ot==="P2P"?this.startRoutedToRelayed():ot==="MANTIS"&&this.startRelayedToRouted(st)},rt.finishTransitionTo=function(ot){ot==="P2P"&&this.finishRoutedToRelayed()},rt.startRoutedToRelayed=function(){this.routedToRelayedOngoing=!0},rt.finishRoutedToRelayed=function(){this.routedToRelayedOngoing=!1,this.relayedToRoutedPending&&(this.relayedToRoutedPending=!1,this.processTransition())},rt.startRelayedToRouted=function(ot){this.routedToRelayedOngoing?(this.relayedToRoutedPending=!0,this.processTransition=ot):ot()},nt}();_e.exports=tt},function(_e,et,b){_e.exports=(tt,nt)=>{const rt=tt.getSenders().find(ot=>ot.track.kind==="video"),it=rt.getParameters();it.encodings.forEach(ot=>{ot.active=nt}),rt.setParameters(it)}},function(_e,et,b){(function(tt){_e.exports=function(rt){return function(){for(var ot=arguments.length,st=new Array(ot),at=0;at<ot;at++)st[at]=arguments[at];return new tt((ct,ut)=>{rt(...st,function(lt){if(lt){ut(lt);return}for(var dt=arguments.length,ft=new Array(dt>1?dt-1:0),St=1;St<dt;St++)ft[St-1]=arguments[St];if(ft.length===1){ct(ft[0]);return}ct(ft)})})}}}).call(this,b(0))},function(_e,et,b){_e.exports=tt=>{var nt;const rt=Object.assign({},tt);return(tt==null||(nt=tt.backgroundImgUrl)==null?void 0:nt.includes("base64"))&&delete rt.backgroundImgUrl,rt}},function(_e,et,b){const tt=b(717),nt=tt.setVonageMetadata,rt=b(317),it=rt.createVonageMediaProcessor,st={isSupported:()=>typeof MediaStreamTrackProcessor<"u"&&typeof MediaStreamTrackGenerator<"u",setMetadata:nt,createProcessor:it};_e.exports=st},function(_e,et,b){b.r(et),function(tt,nt){b.d(et,"BackgroundTransformer",function(){return Fv}),b.d(et,"BackgroundTransformerType",function(){return er}),b.d(et,"BlurRadius",function(){return Zn}),b.d(et,"ErrorFunction",function(){return rs}),b.d(et,"MediapipeHelper",function(){return sm}),b.d(et,"PipelineInfoData",function(){return Co}),b.d(et,"SelfieSegmentationType",function(){return nr}),b.d(et,"VonageMediaProcessor",function(){return w0}),b.d(et,"WarningType",function(){return tm}),b.d(et,"createVonageMediaProcessor",function(){return y4}),b.d(et,"getSupportedBrowserFeatures",function(){return bu}),b.d(et,"getVonageFaceDetection",function(){return p4}),b.d(et,"getVonageFaceMash",function(){return m4}),b.d(et,"getVonageHands",function(){return f4}),b.d(et,"getVonageHolistic",function(){return h4}),b.d(et,"getVonageObjectron",function(){return g4}),b.d(et,"getVonagePose",function(){return v4}),b.d(et,"getVonageSelfieSegmentation",function(){return d4}),b.d(et,"isSupported",function(){return Wp});var rt=Object.defineProperty,it=(bt,vt,Ct)=>vt in bt?rt(bt,vt,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):bt[vt]=Ct,ot=(bt,vt,Ct)=>(it(bt,typeof vt!="symbol"?vt+"":vt,Ct),Ct);function st(){return new tt((bt,vt)=>{typeof MediaStreamTrackProcessor>"u"||typeof MediaStreamTrackGenerator>"u"?vt("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):bt()})}class at{}at.updates={transformer_new:"New transformer",transformer_null:"Null transformer"},at.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"};var ct={exports:{}},ut=function(bt,vt){return function(){for(var Ct=new Array(arguments.length),Xt=0;Xt<Ct.length;Xt++)Ct[Xt]=arguments[Xt];return bt.apply(vt,Ct)}},lt=ut,dt=Object.prototype.toString;function ft(bt){return Array.isArray(bt)}function St(bt){return typeof bt>"u"}function Tt(bt){return bt!==null&&!St(bt)&&bt.constructor!==null&&!St(bt.constructor)&&typeof bt.constructor.isBuffer=="function"&&bt.constructor.isBuffer(bt)}function pt(bt){return dt.call(bt)==="[object ArrayBuffer]"}function gt(bt){return dt.call(bt)==="[object FormData]"}function yt(bt){var vt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?vt=ArrayBuffer.isView(bt):vt=bt&&bt.buffer&&pt(bt.buffer),vt}function Et(bt){return typeof bt=="string"}function It(bt){return typeof bt=="number"}function Gt(bt){return bt!==null&&typeof bt=="object"}function Wt(bt){if(dt.call(bt)!=="[object Object]")return!1;var vt=Object.getPrototypeOf(bt);return vt===null||vt===Object.prototype}function At(bt){return dt.call(bt)==="[object Date]"}function kt(bt){return dt.call(bt)==="[object File]"}function Vt(bt){return dt.call(bt)==="[object Blob]"}function Nt(bt){return dt.call(bt)==="[object Function]"}function tn(bt){return Gt(bt)&&Nt(bt.pipe)}function _t(bt){return dt.call(bt)==="[object URLSearchParams]"}function Kt(bt){return bt.trim?bt.trim():bt.replace(/^\s+|\s+$/g,"")}function cn(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function an(bt,vt){if(!(bt===null||typeof bt>"u"))if(typeof bt!="object"&&(bt=[bt]),ft(bt))for(var Ct=0,Xt=bt.length;Ct<Xt;Ct++)vt.call(null,bt[Ct],Ct,bt);else for(var Yt in bt)Object.prototype.hasOwnProperty.call(bt,Yt)&&vt.call(null,bt[Yt],Yt,bt)}function mn(){var bt={};function vt(Yt,hn){Wt(bt[hn])&&Wt(Yt)?bt[hn]=mn(bt[hn],Yt):Wt(Yt)?bt[hn]=mn({},Yt):ft(Yt)?bt[hn]=Yt.slice():bt[hn]=Yt}for(var Ct=0,Xt=arguments.length;Ct<Xt;Ct++)an(arguments[Ct],vt);return bt}function on(bt,vt,Ct){return an(vt,function(Xt,Yt){Ct&&typeof Xt=="function"?bt[Yt]=lt(Xt,Ct):bt[Yt]=Xt}),bt}function yn(bt){return bt.charCodeAt(0)===65279&&(bt=bt.slice(1)),bt}var fn={isArray:ft,isArrayBuffer:pt,isBuffer:Tt,isFormData:gt,isArrayBufferView:yt,isString:Et,isNumber:It,isObject:Gt,isPlainObject:Wt,isUndefined:St,isDate:At,isFile:kt,isBlob:Vt,isFunction:Nt,isStream:tn,isURLSearchParams:_t,isStandardBrowserEnv:cn,forEach:an,merge:mn,extend:on,trim:Kt,stripBOM:yn},sn=fn;function un(bt){return encodeURIComponent(bt).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ln=function(bt,vt,Ct){if(!vt)return bt;var Xt;if(Ct)Xt=Ct(vt);else if(sn.isURLSearchParams(vt))Xt=vt.toString();else{var Yt=[];sn.forEach(vt,function(In,En){In===null||typeof In>"u"||(sn.isArray(In)?En=En+"[]":In=[In],sn.forEach(In,function(kn){sn.isDate(kn)?kn=kn.toISOString():sn.isObject(kn)&&(kn=JSON.stringify(kn)),Yt.push(un(En)+"="+un(kn))}))}),Xt=Yt.join("&")}if(Xt){var hn=bt.indexOf("#");hn!==-1&&(bt=bt.slice(0,hn)),bt+=(bt.indexOf("?")===-1?"?":"&")+Xt}return bt},Xn=fn;function pn(){this.handlers=[]}pn.prototype.use=function(bt,vt,Ct){return this.handlers.push({fulfilled:bt,rejected:vt,synchronous:Ct?Ct.synchronous:!1,runWhen:Ct?Ct.runWhen:null}),this.handlers.length-1},pn.prototype.eject=function(bt){this.handlers[bt]&&(this.handlers[bt]=null)},pn.prototype.forEach=function(bt){Xn.forEach(this.handlers,function(vt){vt!==null&&bt(vt)})};var Vn=pn,Tn=fn,Jn=function(bt,vt){Tn.forEach(bt,function(Ct,Xt){Xt!==vt&&Xt.toUpperCase()===vt.toUpperCase()&&(bt[vt]=Ct,delete bt[Xt])})},lr=function(bt,vt,Ct,Xt,Yt){return bt.config=vt,Ct&&(bt.code=Ct),bt.request=Xt,bt.response=Yt,bt.isAxiosError=!0,bt.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},bt},tr=lr,Qn=function(bt,vt,Ct,Xt,Yt){var hn=new Error(bt);return tr(hn,vt,Ct,Xt,Yt)},Sr=Qn,vr=function(bt,vt,Ct){var Xt=Ct.config.validateStatus;!Ct.status||!Xt||Xt(Ct.status)?bt(Ct):vt(Sr("Request failed with status code "+Ct.status,Ct.config,null,Ct.request,Ct))},Fr=fn,kr=Fr.isStandardBrowserEnv()?function(){return{write:function(bt,vt,Ct,Xt,Yt,hn){var In=[];In.push(bt+"="+encodeURIComponent(vt)),Fr.isNumber(Ct)&&In.push("expires="+new Date(Ct).toGMTString()),Fr.isString(Xt)&&In.push("path="+Xt),Fr.isString(Yt)&&In.push("domain="+Yt),hn===!0&&In.push("secure"),document.cookie=In.join("; ")},read:function(bt){var vt=document.cookie.match(new RegExp("(^|;\\s*)("+bt+")=([^;]*)"));return vt?decodeURIComponent(vt[3]):null},remove:function(bt){this.write(bt,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),jr=function(bt){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(bt)},xo=function(bt,vt){return vt?bt.replace(/\/+$/,"")+"/"+vt.replace(/^\/+/,""):bt},Er=jr,xr=xo,Un=function(bt,vt){return bt&&!Er(vt)?xr(bt,vt):vt},Mn=fn,sr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ar=function(bt){var vt={},Ct,Xt,Yt;return bt&&Mn.forEach(bt.split(`
`),function(hn){if(Yt=hn.indexOf(":"),Ct=Mn.trim(hn.substr(0,Yt)).toLowerCase(),Xt=Mn.trim(hn.substr(Yt+1)),Ct){if(vt[Ct]&&sr.indexOf(Ct)>=0)return;Ct==="set-cookie"?vt[Ct]=(vt[Ct]?vt[Ct]:[]).concat([Xt]):vt[Ct]=vt[Ct]?vt[Ct]+", "+Xt:Xt}}),vt},so=fn,Bn=so.isStandardBrowserEnv()?function(){var bt=/(msie|trident)/i.test(navigator.userAgent),vt=document.createElement("a"),Ct;function Xt(Yt){var hn=Yt;return bt&&(vt.setAttribute("href",hn),hn=vt.href),vt.setAttribute("href",hn),{href:vt.href,protocol:vt.protocol?vt.protocol.replace(/:$/,""):"",host:vt.host,search:vt.search?vt.search.replace(/^\?/,""):"",hash:vt.hash?vt.hash.replace(/^#/,""):"",hostname:vt.hostname,port:vt.port,pathname:vt.pathname.charAt(0)==="/"?vt.pathname:"/"+vt.pathname}}return Ct=Xt(window.location.href),function(Yt){var hn=so.isString(Yt)?Xt(Yt):Yt;return hn.protocol===Ct.protocol&&hn.host===Ct.host}}():function(){return function(){return!0}}();function gr(bt){this.message=bt}gr.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},gr.prototype.__CANCEL__=!0;var Or=gr,ro=fn,Ao=vr,ho=kr,vo=Ln,po=Un,zr=Ar,Go=Bn,mo=Qn,Zo=Gu,$r=Or,Ru=function(bt){return new tt(function(vt,Ct){var Xt=bt.data,Yt=bt.headers,hn=bt.responseType,In;function En(){bt.cancelToken&&bt.cancelToken.unsubscribe(In),bt.signal&&bt.signal.removeEventListener("abort",In)}ro.isFormData(Xt)&&delete Yt["Content-Type"];var kn=new XMLHttpRequest;if(bt.auth){var mr=bt.auth.username||"",Vr=bt.auth.password?unescape(encodeURIComponent(bt.auth.password)):"";Yt.Authorization="Basic "+btoa(mr+":"+Vr)}var Gr=po(bt.baseURL,bt.url);kn.open(bt.method.toUpperCase(),vo(Gr,bt.params,bt.paramsSerializer),!0),kn.timeout=bt.timeout;function Io(){if(kn){var Mr="getAllResponseHeaders"in kn?zr(kn.getAllResponseHeaders()):null,Dr=!hn||hn==="text"||hn==="json"?kn.responseText:kn.response,Bo={data:Dr,status:kn.status,statusText:kn.statusText,headers:Mr,config:bt,request:kn};Ao(function(Uo){vt(Uo),En()},function(Uo){Ct(Uo),En()},Bo),kn=null}}if("onloadend"in kn?kn.onloadend=Io:kn.onreadystatechange=function(){!kn||kn.readyState!==4||kn.status===0&&!(kn.responseURL&&kn.responseURL.indexOf("file:")===0)||setTimeout(Io)},kn.onabort=function(){!kn||(Ct(mo("Request aborted",bt,"ECONNABORTED",kn)),kn=null)},kn.onerror=function(){Ct(mo("Network Error",bt,null,kn)),kn=null},kn.ontimeout=function(){var Mr=bt.timeout?"timeout of "+bt.timeout+"ms exceeded":"timeout exceeded",Dr=bt.transitional||Zo.transitional;bt.timeoutErrorMessage&&(Mr=bt.timeoutErrorMessage),Ct(mo(Mr,bt,Dr.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",kn)),kn=null},ro.isStandardBrowserEnv()){var ko=(bt.withCredentials||Go(Gr))&&bt.xsrfCookieName?ho.read(bt.xsrfCookieName):void 0;ko&&(Yt[bt.xsrfHeaderName]=ko)}"setRequestHeader"in kn&&ro.forEach(Yt,function(Mr,Dr){typeof Xt>"u"&&Dr.toLowerCase()==="content-type"?delete Yt[Dr]:kn.setRequestHeader(Dr,Mr)}),ro.isUndefined(bt.withCredentials)||(kn.withCredentials=!!bt.withCredentials),hn&&hn!=="json"&&(kn.responseType=bt.responseType),typeof bt.onDownloadProgress=="function"&&kn.addEventListener("progress",bt.onDownloadProgress),typeof bt.onUploadProgress=="function"&&kn.upload&&kn.upload.addEventListener("progress",bt.onUploadProgress),(bt.cancelToken||bt.signal)&&(In=function(Mr){!kn||(Ct(!Mr||Mr&&Mr.type?new $r("canceled"):Mr),kn.abort(),kn=null)},bt.cancelToken&&bt.cancelToken.subscribe(In),bt.signal&&(bt.signal.aborted?In():bt.signal.addEventListener("abort",In))),Xt||(Xt=null),kn.send(Xt)})},jo=fn,yo=Jn,_o=lr,js={"Content-Type":"application/x-www-form-urlencoded"};function Ql(bt,vt){!jo.isUndefined(bt)&&jo.isUndefined(bt["Content-Type"])&&(bt["Content-Type"]=vt)}function Rs(){var bt;return(typeof XMLHttpRequest<"u"||typeof nt<"u"&&Object.prototype.toString.call(nt)==="[object process]")&&(bt=Ru),bt}function xa(bt,vt,Ct){if(jo.isString(bt))try{return(vt||JSON.parse)(bt),jo.trim(bt)}catch(Xt){if(Xt.name!=="SyntaxError")throw Xt}return(Ct||JSON.stringify)(bt)}var Iu={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Rs(),transformRequest:[function(bt,vt){return yo(vt,"Accept"),yo(vt,"Content-Type"),jo.isFormData(bt)||jo.isArrayBuffer(bt)||jo.isBuffer(bt)||jo.isStream(bt)||jo.isFile(bt)||jo.isBlob(bt)?bt:jo.isArrayBufferView(bt)?bt.buffer:jo.isURLSearchParams(bt)?(Ql(vt,"application/x-www-form-urlencoded;charset=utf-8"),bt.toString()):jo.isObject(bt)||vt&&vt["Content-Type"]==="application/json"?(Ql(vt,"application/json"),xa(bt)):bt}],transformResponse:[function(bt){var vt=this.transitional||Iu.transitional,Ct=vt&&vt.silentJSONParsing,Xt=vt&&vt.forcedJSONParsing,Yt=!Ct&&this.responseType==="json";if(Yt||Xt&&jo.isString(bt)&&bt.length)try{return JSON.parse(bt)}catch(hn){if(Yt)throw hn.name==="SyntaxError"?_o(hn,this,"E_JSON_PARSE"):hn}return bt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(bt){return bt>=200&&bt<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};jo.forEach(["delete","get","head"],function(bt){Iu.headers[bt]={}}),jo.forEach(["post","put","patch"],function(bt){Iu.headers[bt]=jo.merge(js)});var Gu=Iu,jp=fn,$u=Gu,Qu=function(bt,vt,Ct){var Xt=this||$u;return jp.forEach(Ct,function(Yt){bt=Yt.call(Xt,bt,vt)}),bt},Jr=function(bt){return!!(bt&&bt.__CANCEL__)},Qs=fn,au=Qu,Ws=Jr,yl=Gu,Xr=Or;function Js(bt){if(bt.cancelToken&&bt.cancelToken.throwIfRequested(),bt.signal&&bt.signal.aborted)throw new Xr("canceled")}var Up=function(bt){Js(bt),bt.headers=bt.headers||{},bt.data=au.call(bt,bt.data,bt.headers,bt.transformRequest),bt.headers=Qs.merge(bt.headers.common||{},bt.headers[bt.method]||{},bt.headers),Qs.forEach(["delete","get","head","post","put","patch","common"],function(Ct){delete bt.headers[Ct]});var vt=bt.adapter||yl.adapter;return vt(bt).then(function(Ct){return Js(bt),Ct.data=au.call(bt,Ct.data,Ct.headers,bt.transformResponse),Ct},function(Ct){return Ws(Ct)||(Js(bt),Ct&&Ct.response&&(Ct.response.data=au.call(bt,Ct.response.data,Ct.response.headers,bt.transformResponse))),tt.reject(Ct)})},cu=fn,lu=function(bt,vt){vt=vt||{};var Ct={};function Xt(mr,Vr){return cu.isPlainObject(mr)&&cu.isPlainObject(Vr)?cu.merge(mr,Vr):cu.isPlainObject(Vr)?cu.merge({},Vr):cu.isArray(Vr)?Vr.slice():Vr}function Yt(mr){if(cu.isUndefined(vt[mr])){if(!cu.isUndefined(bt[mr]))return Xt(void 0,bt[mr])}else return Xt(bt[mr],vt[mr])}function hn(mr){if(!cu.isUndefined(vt[mr]))return Xt(void 0,vt[mr])}function In(mr){if(cu.isUndefined(vt[mr])){if(!cu.isUndefined(bt[mr]))return Xt(void 0,bt[mr])}else return Xt(void 0,vt[mr])}function En(mr){if(mr in vt)return Xt(bt[mr],vt[mr]);if(mr in bt)return Xt(void 0,bt[mr])}var kn={url:hn,method:hn,data:hn,baseURL:In,transformRequest:In,transformResponse:In,paramsSerializer:In,timeout:In,timeoutMessage:In,withCredentials:In,adapter:In,responseType:In,xsrfCookieName:In,xsrfHeaderName:In,onUploadProgress:In,onDownloadProgress:In,decompress:In,maxContentLength:In,maxBodyLength:In,transport:In,httpAgent:In,httpsAgent:In,cancelToken:In,socketPath:In,responseEncoding:In,validateStatus:En};return cu.forEach(Object.keys(bt).concat(Object.keys(vt)),function(mr){var Vr=kn[mr]||Yt,Gr=Vr(mr);cu.isUndefined(Gr)&&Vr!==En||(Ct[mr]=Gr)}),Ct},qo={version:"0.25.0"},Gl=qo.version,es={};["object","boolean","number","function","string","symbol"].forEach(function(bt,vt){es[bt]=function(Ct){return typeof Ct===bt||"a"+(vt<1?"n ":" ")+bt}});var ju={};es.transitional=function(bt,vt,Ct){function Xt(Yt,hn){return"[Axios v"+Gl+"] Transitional option '"+Yt+"'"+hn+(Ct?". "+Ct:"")}return function(Yt,hn,In){if(bt===!1)throw new Error(Xt(hn," has been removed"+(vt?" in "+vt:"")));return vt&&!ju[hn]&&(ju[hn]=!0,console.warn(Xt(hn," has been deprecated since v"+vt+" and will be removed in the near future"))),bt?bt(Yt,hn,In):!0}};function lp(bt,vt,Ct){if(typeof bt!="object")throw new TypeError("options must be an object");for(var Xt=Object.keys(bt),Yt=Xt.length;Yt-- >0;){var hn=Xt[Yt],In=vt[hn];if(In){var En=bt[hn],kn=En===void 0||In(En,hn,bt);if(kn!==!0)throw new TypeError("option "+hn+" must be "+kn);continue}if(Ct!==!0)throw Error("Unknown option "+hn)}}var $a={assertOptions:lp,validators:es},ep=fn,_u=Ln,na=Vn,Yo=Up,_l=lu,uo=$a,tp=uo.validators;function xu(bt){this.defaults=bt,this.interceptors={request:new na,response:new na}}xu.prototype.request=function(bt,vt){if(typeof bt=="string"?(vt=vt||{},vt.url=bt):vt=bt||{},!vt.url)throw new Error("Provided config url is not valid");vt=_l(this.defaults,vt),vt.method?vt.method=vt.method.toLowerCase():this.defaults.method?vt.method=this.defaults.method.toLowerCase():vt.method="get";var Ct=vt.transitional;Ct!==void 0&&uo.assertOptions(Ct,{silentJSONParsing:tp.transitional(tp.boolean),forcedJSONParsing:tp.transitional(tp.boolean),clarifyTimeoutError:tp.transitional(tp.boolean)},!1);var Xt=[],Yt=!0;this.interceptors.request.forEach(function(Gr){typeof Gr.runWhen=="function"&&Gr.runWhen(vt)===!1||(Yt=Yt&&Gr.synchronous,Xt.unshift(Gr.fulfilled,Gr.rejected))});var hn=[];this.interceptors.response.forEach(function(Gr){hn.push(Gr.fulfilled,Gr.rejected)});var In;if(!Yt){var En=[Yo,void 0];for(Array.prototype.unshift.apply(En,Xt),En=En.concat(hn),In=tt.resolve(vt);En.length;)In=In.then(En.shift(),En.shift());return In}for(var kn=vt;Xt.length;){var mr=Xt.shift(),Vr=Xt.shift();try{kn=mr(kn)}catch(Gr){Vr(Gr);break}}try{In=Yo(kn)}catch(Gr){return tt.reject(Gr)}for(;hn.length;)In=In.then(hn.shift(),hn.shift());return In},xu.prototype.getUri=function(bt){if(!bt.url)throw new Error("Provided config url is not valid");return bt=_l(this.defaults,bt),_u(bt.url,bt.params,bt.paramsSerializer).replace(/^\?/,"")},ep.forEach(["delete","get","head","options"],function(bt){xu.prototype[bt]=function(vt,Ct){return this.request(_l(Ct||{},{method:bt,url:vt,data:(Ct||{}).data}))}}),ep.forEach(["post","put","patch"],function(bt){xu.prototype[bt]=function(vt,Ct,Xt){return this.request(_l(Xt||{},{method:bt,url:vt,data:Ct}))}});var xp=xu,vs=Or;function wp(bt){if(typeof bt!="function")throw new TypeError("executor must be a function.");var vt;this.promise=new tt(function(Xt){vt=Xt});var Ct=this;this.promise.then(function(Xt){if(Ct._listeners){var Yt,hn=Ct._listeners.length;for(Yt=0;Yt<hn;Yt++)Ct._listeners[Yt](Xt);Ct._listeners=null}}),this.promise.then=function(Xt){var Yt,hn=new tt(function(In){Ct.subscribe(In),Yt=In}).then(Xt);return hn.cancel=function(){Ct.unsubscribe(Yt)},hn},bt(function(Xt){Ct.reason||(Ct.reason=new vs(Xt),vt(Ct.reason))})}wp.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},wp.prototype.subscribe=function(bt){if(this.reason){bt(this.reason);return}this._listeners?this._listeners.push(bt):this._listeners=[bt]},wp.prototype.unsubscribe=function(bt){if(this._listeners){var vt=this._listeners.indexOf(bt);vt!==-1&&this._listeners.splice(vt,1)}},wp.source=function(){var bt,vt=new wp(function(Ct){bt=Ct});return{token:vt,cancel:bt}};var Jp=wp,Op=function(bt){return function(vt){return bt.apply(null,vt)}},vp=fn,Hp=function(bt){return vp.isObject(bt)&&bt.isAxiosError===!0},np=fn,uu=ut,Wu=xp,Xl=lu,Np=Gu;function zn(bt){var vt=new Wu(bt),Ct=uu(Wu.prototype.request,vt);return np.extend(Ct,Wu.prototype,vt),np.extend(Ct,vt),Ct.create=function(Xt){return zn(Xl(bt,Xt))},Ct}var xn=zn(Np);xn.Axios=Wu,xn.Cancel=Or,xn.CancelToken=Jp,xn.isCancel=Jr,xn.VERSION=qo.version,xn.all=function(bt){return tt.all(bt)},xn.spread=Op,xn.isAxiosError=Hp,ct.exports=xn,ct.exports.default=xn;var Nn=ct.exports;class qn{isEmpty(){return!this.isPresent()}static of(vt){if(vt!=null)return new Rr(vt);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(vt){return qn.of(vt)}static ofNullable(vt){return vt!=null?new Rr(vt):new Zr}static empty(){return new Zr}static from(vt){switch(vt.kind){case"present":return qn.of(vt.value);case"empty":return qn.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class Rr extends qn{constructor(vt){super(),this.payload=vt}isPresent(){return!0}get(){return this.payload}ifPresent(vt){vt(this.payload)}ifPresentOrElse(vt,Ct){vt(this.payload)}filter(vt){return vt(this.payload)?this:qn.empty()}map(vt){const Ct=vt(this.payload);return qn.ofNullable(Ct)}flatMap(vt){return vt(this.payload)}or(vt){return this}orElse(vt){return this.payload}orElseGet(vt){return this.payload}orElseThrow(vt){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(vt){return vt.present(this.payload)}toJSON(vt){return this.payload}}class Zr extends qn{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(vt){}ifPresentOrElse(vt,Ct){Ct()}filter(vt){return this}map(vt){return qn.empty()}flatMap(vt){return qn.empty()}or(vt){return vt()}orElse(vt){return vt}orElseGet(vt){return this.orElse(vt())}orElseThrow(vt){throw vt()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(vt){return vt.empty()}toJSON(vt){return null}}const wo="2.0.0";function Wo(bt){globalThis._vonageMediaProcessorMetadata=bt}function ws(){return globalThis._vonageMediaProcessorMetadata}class ns{constructor(){const vt=ws();this._report={action:qn.empty(),applicationId:qn.ofNullable(vt!==void 0&&vt!=null?vt.appId:null),timestamp:Date.now(),fps:qn.empty(),framesTransformed:qn.empty(),guid:qn.empty(),highestFrameTransformCpu:qn.empty(),message:qn.empty(),source:qn.ofNullable(vt!==void 0&&vt!=null?vt.sourceType:null),transformedFps:qn.empty(),transformerType:qn.empty(),variation:qn.empty(),videoHeight:qn.empty(),videoWidth:qn.empty(),version:wo,error:qn.empty(),proxyUrl:qn.ofNullable(vt!==void 0&&vt!=null?vt.proxyUrl:null)}}action(vt){return this._report.action=qn.ofNullable(vt),this}framesTransformed(vt){return this._report.framesTransformed=qn.ofNullable(vt),this}fps(vt){return this._report.fps=qn.ofNullable(vt),this}guid(vt){return this._report.guid=qn.ofNullable(vt),this}message(vt){return this._report.message=qn.ofNullable(vt),this}transformedFps(vt){return this._report.transformedFps=qn.ofNullable(vt),this}transformerType(vt){return this._report.transformerType=qn.ofNullable(vt),this}variation(vt){return this._report.variation=qn.ofNullable(vt),this}videoHeight(vt){return this._report.videoHeight=qn.ofNullable(vt),this}videoWidth(vt){return this._report.videoWidth=qn.ofNullable(vt),this}error(vt){return this._report.error=qn.ofNullable(vt),this}build(){return this._report}}const ds=bt=>JSON.stringify(bt,(vt,Ct)=>{if(Ct!==null)return Ct});class Zs{static report(vt){return new tt((Ct,Xt)=>{if(vt.applicationId.isEmpty()||vt.source.isEmpty()){Ct("success");return}let Yt=Nn.create(),hn={timeout:1e4,timeoutErrorMessage:"Request timeout",headers:{"Content-Type":"application/json"}},In="hlg.tokbox.com/prod/logging/vcp_webrtc";if(vt.proxyUrl.isEmpty())In="https://"+In;else{let En;vt.proxyUrl.get().slice(vt.proxyUrl.get().length-1)!=="/"?En=vt.proxyUrl.get()+"/":En=vt.proxyUrl.get(),In=En+In}Yt.post(In,ds(vt),hn).then(En=>{console.log(En),Ct("success")}).catch(En=>{console.log(En),Xt(En)})})}}var $s,Ap=new Uint8Array(16);function Ms(){if(!$s&&($s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!$s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $s(Ap)}var Wl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Us(bt){return typeof bt=="string"&&Wl.test(bt)}for(var eu=[],Sp=0;Sp<256;++Sp)eu.push((Sp+256).toString(16).substr(1));function rp(bt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ct=(eu[bt[vt+0]]+eu[bt[vt+1]]+eu[bt[vt+2]]+eu[bt[vt+3]]+"-"+eu[bt[vt+4]]+eu[bt[vt+5]]+"-"+eu[bt[vt+6]]+eu[bt[vt+7]]+"-"+eu[bt[vt+8]]+eu[bt[vt+9]]+"-"+eu[bt[vt+10]]+eu[bt[vt+11]]+eu[bt[vt+12]]+eu[bt[vt+13]]+eu[bt[vt+14]]+eu[bt[vt+15]]).toLowerCase();if(!Us(Ct))throw TypeError("Stringified UUID is invalid");return Ct}function qp(bt,vt,Ct){bt=bt||{};var Xt=bt.random||(bt.rng||Ms)();if(Xt[6]=Xt[6]&15|64,Xt[8]=Xt[8]&63|128,vt){Ct=Ct||0;for(var Yt=0;Yt<16;++Yt)vt[Ct+Yt]=Xt[Yt];return vt}return rp(Xt)}const _s=new WeakMap,Uu=new WeakMap,ip=new WeakMap,Zp=Symbol("anyProducer"),yu=tt.resolve(),up=Symbol("listenerAdded"),Ml=Symbol("listenerRemoved");let ao=!1;function Qo(bt){if(typeof bt!="string"&&typeof bt!="symbol")throw new TypeError("eventName must be a string or a symbol")}function dp(bt){if(typeof bt!="function")throw new TypeError("listener must be a function")}function qr(bt,vt){const Ct=Uu.get(bt);return Ct.has(vt)||Ct.set(vt,new Set),Ct.get(vt)}function $p(bt,vt){const Ct=typeof vt=="string"||typeof vt=="symbol"?vt:Zp,Xt=ip.get(bt);return Xt.has(Ct)||Xt.set(Ct,new Set),Xt.get(Ct)}function Ks(bt,vt,Ct){const Xt=ip.get(bt);if(Xt.has(vt))for(const Yt of Xt.get(vt))Yt.enqueue(Ct);if(Xt.has(Zp)){const Yt=tt.all([vt,Ct]);for(const hn of Xt.get(Zp))hn.enqueue(Yt)}}function fp(bt,vt){vt=Array.isArray(vt)?vt:[vt];let Ct=!1,Xt=()=>{},Yt=[];const hn={enqueue(In){Yt.push(In),Xt()},finish(){Ct=!0,Xt()}};for(const In of vt)$p(bt,In).add(hn);return{async next(){return Yt?Yt.length===0?Ct?(Yt=void 0,this.next()):(await new tt(In=>{Xt=In}),this.next()):{done:!1,value:await Yt.shift()}:{done:!0}},async return(In){Yt=void 0;for(const En of vt)$p(bt,En).delete(hn);return Xt(),arguments.length>0?{done:!0,value:await In}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Vp(bt){if(bt===void 0)return qu;if(!Array.isArray(bt))throw new TypeError("`methodNames` must be an array of strings");for(const vt of bt)if(!qu.includes(vt))throw typeof vt!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${vt} is not Emittery method`);return bt}const Vo=bt=>bt===up||bt===Ml;class Gp{static mixin(vt,Ct){return Ct=Vp(Ct),Xt=>{if(typeof Xt!="function")throw new TypeError("`target` must be function");for(const In of Ct)if(Xt.prototype[In]!==void 0)throw new Error(`The property \`${In}\` already exists on \`target\``);function Yt(){return Object.defineProperty(this,vt,{enumerable:!1,value:new Gp}),this[vt]}Object.defineProperty(Xt.prototype,vt,{enumerable:!1,get:Yt});const hn=In=>function(...En){return this[vt][In](...En)};for(const In of Ct)Object.defineProperty(Xt.prototype,In,{enumerable:!1,value:hn(In)});return Xt}}static get isDebugEnabled(){if(typeof nt!="object")return ao;const{env:vt}=nt||{env:{}};return vt.DEBUG==="emittery"||vt.DEBUG==="*"||ao}static set isDebugEnabled(vt){ao=vt}constructor(vt={}){_s.set(this,new Set),Uu.set(this,new Map),ip.set(this,new Map),this.debug=vt.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(Ct,Xt,Yt,hn)=>{hn=JSON.stringify(hn),typeof Yt=="symbol"&&(Yt=Yt.toString());const In=new Date,En=`${In.getHours()}:${In.getMinutes()}:${In.getSeconds()}.${In.getMilliseconds()}`;console.log(`[${En}][emittery:${Ct}][${Xt}] Event Name: ${Yt}
	data: ${hn}`)})}logIfDebugEnabled(vt,Ct,Xt){(Gp.isDebugEnabled||this.debug.enabled)&&this.debug.logger(vt,this.debug.name,Ct,Xt)}on(vt,Ct){dp(Ct),vt=Array.isArray(vt)?vt:[vt];for(const Xt of vt)Qo(Xt),qr(this,Xt).add(Ct),this.logIfDebugEnabled("subscribe",Xt,void 0),Vo(Xt)||this.emit(up,{eventName:Xt,listener:Ct});return this.off.bind(this,vt,Ct)}off(vt,Ct){dp(Ct),vt=Array.isArray(vt)?vt:[vt];for(const Xt of vt)Qo(Xt),qr(this,Xt).delete(Ct),this.logIfDebugEnabled("unsubscribe",Xt,void 0),Vo(Xt)||this.emit(Ml,{eventName:Xt,listener:Ct})}once(vt){return new tt(Ct=>{const Xt=this.on(vt,Yt=>{Xt(),Ct(Yt)})})}events(vt){vt=Array.isArray(vt)?vt:[vt];for(const Ct of vt)Qo(Ct);return fp(this,vt)}async emit(vt,Ct){Qo(vt),this.logIfDebugEnabled("emit",vt,Ct),Ks(this,vt,Ct);const Xt=qr(this,vt),Yt=_s.get(this),hn=[...Xt],In=Vo(vt)?[]:[...Yt];await yu,await tt.all([...hn.map(async En=>{if(Xt.has(En))return En(Ct)}),...In.map(async En=>{if(Yt.has(En))return En(vt,Ct)})])}async emitSerial(vt,Ct){Qo(vt),this.logIfDebugEnabled("emitSerial",vt,Ct);const Xt=qr(this,vt),Yt=_s.get(this),hn=[...Xt],In=[...Yt];await yu;for(const En of hn)Xt.has(En)&&await En(Ct);for(const En of In)Yt.has(En)&&await En(vt,Ct)}onAny(vt){return dp(vt),this.logIfDebugEnabled("subscribeAny",void 0,void 0),_s.get(this).add(vt),this.emit(up,{listener:vt}),this.offAny.bind(this,vt)}anyEvent(){return fp(this)}offAny(vt){dp(vt),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Ml,{listener:vt}),_s.get(this).delete(vt)}clearListeners(vt){vt=Array.isArray(vt)?vt:[vt];for(const Ct of vt)if(this.logIfDebugEnabled("clear",Ct,void 0),typeof Ct=="string"||typeof Ct=="symbol"){qr(this,Ct).clear();const Xt=$p(this,Ct);for(const Yt of Xt)Yt.finish();Xt.clear()}else{_s.get(this).clear();for(const Xt of Uu.get(this).values())Xt.clear();for(const Xt of ip.get(this).values()){for(const Yt of Xt)Yt.finish();Xt.clear()}}}listenerCount(vt){vt=Array.isArray(vt)?vt:[vt];let Ct=0;for(const Xt of vt){if(typeof Xt=="string"){Ct+=_s.get(this).size+qr(this,Xt).size+$p(this,Xt).size+$p(this).size;continue}typeof Xt<"u"&&Qo(Xt),Ct+=_s.get(this).size;for(const Yt of Uu.get(this).values())Ct+=Yt.size;for(const Yt of ip.get(this).values())Ct+=Yt.size}return Ct}bindMethods(vt,Ct){if(typeof vt!="object"||vt===null)throw new TypeError("`target` must be an object");Ct=Vp(Ct);for(const Xt of Ct){if(vt[Xt]!==void 0)throw new Error(`The property \`${Xt}\` already exists on \`target\``);Object.defineProperty(vt,Xt,{enumerable:!1,value:this[Xt].bind(this)})}}}const qu=Object.getOwnPropertyNames(Gp.prototype).filter(bt=>bt!=="constructor");Object.defineProperty(Gp,"listenerAdded",{value:up,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(Gp,"listenerRemoved",{value:Ml,writable:!1,enumerable:!0,configurable:!1});var em=Gp;function om(bt){return typeof bt=="object"&&bt!==null&&"message"in bt&&typeof bt.message=="string"}function Lp(bt){if(om(bt))return bt;try{return new Error(JSON.stringify(bt))}catch{return new Error(String(bt))}}function Yp(bt){return Lp(bt).message}var tm=(bt=>(bt.FPS_DROP="fps_drop",bt))(tm||{}),rs=(bt=>(bt.start="start",bt.transform="transform",bt.flush="flush",bt))(rs||{}),Co=(bt=>(bt.pipeline_ended="pipeline_ended",bt.pipeline_ended_with_error="pipeline_ended_with_error",bt.pipeline_started="pipeline_started",bt.pipeline_started_with_error="pipeline_started_with_error",bt.pipeline_restarted="pipeline_restarted",bt.pipeline_restarted_with_error="pipeline_restarted_with_error",bt))(Co||{});const um=500,ym=.8;class dm extends em{constructor(vt,Ct){super(),this.index_=Ct,this.uuid_=qp(),this.framesTransformed_=0,this.transformer_=vt,this.shouldStop_=!1,this.isFlashed_=!1,this.framesFromSource_=0,this.fps_=0,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in vt&&(this.transformerType_=vt.getTransformerType());const Xt=new ns().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Create").build();Zs.report(Xt)}setTrackExpectedRate(vt){this.trackExpectedRate_=vt}async start(vt){if(this.controller_=vt,this.transformer_&&typeof this.transformer_.start=="function")try{await this.transformer_.start(vt)}catch(Ct){const Xt=new ns().action("MediaTransformer").guid(this.uuid_).message(at.errors.transformer_start).transformerType(this.transformerType_).variation("Error").error(Yp(Ct)).build();Zs.report(Xt);const Yt={eventMetaData:{transformerIndex:this.index_},error:Ct,function:"start"};this.emit("error",Yt)}}async transform(vt,Ct){var Xt,Yt,hn,In;if(this.mediaTransformerQosReportStartTimestamp_===0&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),vt instanceof VideoFrame&&(this.videoHeight_=(Xt=vt==null?void 0:vt.displayHeight)!=null?Xt:0,this.videoWidth_=(Yt=vt==null?void 0:vt.displayWidth)!=null?Yt:0),++this.framesFromSource_,this.transformer_)if(this.shouldStop_)console.warn("[Pipeline] flush from transform"),vt.close(),this.flush(Ct),Ct.terminate();else try{await((In=(hn=this.transformer_).transform)==null?void 0:In.call(hn,vt,Ct)),++this.framesTransformed_,this.framesTransformed_===um&&this.mediaTransformerQosReport()}catch(En){const kn=new ns().action("MediaTransformer").guid(this.uuid_).message(at.errors.transformer_transform).transformerType(this.transformerType_).variation("Error").error(Yp(En)).build();Zs.report(kn);const mr={eventMetaData:{transformerIndex:this.index_},error:En,function:"transform"};this.emit("error",mr)}}async flush(vt){if(this.transformer_&&typeof this.transformer_.flush=="function"&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(vt)}catch(Xt){const Yt=new ns().action("MediaTransformer").guid(this.uuid_).message(at.errors.transformer_flush).transformerType(this.transformerType_).variation("Error").error(Yp(Xt)).build();Zs.report(Yt);const hn={eventMetaData:{transformerIndex:this.index_},error:Xt,function:"flush"};this.emit("error",hn)}}this.mediaTransformerQosReport();const Ct=new ns().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Delete").build();Zs.report(Ct)}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}mediaTransformerQosReport(){let vt=(Date.now()-this.mediaTransformerQosReportStartTimestamp_)/1e3,Ct=this.framesFromSource_/vt,Xt=this.framesTransformed_/vt;if(this.trackExpectedRate_!=-1&&this.trackExpectedRate_*ym>Ct){const hn={eventMetaData:{transformerIndex:this.index_},warningType:"fps_drop",dropInfo:{requested:this.trackExpectedRate_,current:Ct}};this.emit("warn",hn)}const Yt=new ns().action("MediaTransformer").fps(Ct).transformedFps(Xt).framesTransformed(this.framesTransformed_).guid(this.uuid_).transformerType(this.transformerType_).videoHeight(this.videoHeight_).videoWidth(this.videoWidth_).variation("QoS").build();Zs.report(Yt),this.mediaTransformerQosReportStartTimestamp_=0,this.framesFromSource_=0,this.framesTransformed_=0}}class Ep extends em{constructor(vt){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let Ct=0;Ct<vt.length;Ct++){let Xt=new dm(vt[Ct],Ct);Xt.on("error",Yt=>{this.emit("error",Yt)}),Xt.on("warn",Yt=>{this.emit("warn",Yt)}),this.transformers_.push(Xt)}}setTrackExpectedRate(vt){this.trackExpectedRate_=vt;for(let Ct of this.transformers_)Ct.setTrackExpectedRate(this.trackExpectedRate_)}async start(vt,Ct){if(!this.transformers_||this.transformers_.length===0){console.log("[Pipeline] No transformers.");return}try{let Xt=vt;for(let Yt of this.transformers_)vt=vt.pipeThrough(new TransformStream(Yt));vt.pipeTo(Ct).then(async()=>{console.log("[Pipeline] Setup."),await Ct.abort(),await Xt.cancel(),this.emit("pipelineInfo","pipeline_ended")}).catch(async Yt=>{vt.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(hn=>{console.error("[Pipeline] Error from stream transform:",hn)}),await Ct.abort(Yt),await Xt.cancel(Yt),this.emit("pipelineInfo","pipeline_ended_with_error")})}catch{this.emit("pipelineInfo","pipeline_started_with_error"),this.destroy();return}this.emit("pipelineInfo","pipeline_started"),console.log("[Pipeline] Pipeline started.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let vt of this.transformers_)vt.stop()}}class Hu extends em{constructor(){super(),this.uuid_=qp(),this.trackExpectedRate_=-1;const vt=new ns().action("MediaProcessor").guid(this.uuid_).variation("Create").build();Zs.report(vt)}setTrackExpectedRate(vt){this.trackExpectedRate_=vt,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(vt,Ct){return this.readable_=vt,this.writable_=Ct,this.transformInternal()}transformInternal(){return new tt((vt,Ct)=>{if(!this.transformers_||this.transformers_.length===0){const Yt=new ns().action("MediaProcessor").guid(this.uuid_).message(at.errors.transformer_none).variation("Error").build();Zs.report(Yt),Ct("[MediaProcessor] Need to set transformers.");return}if(!this.readable_){const Yt=new ns().action("MediaProcessor").guid(this.uuid_).message(at.errors.readable_null).variation("Error").build();Zs.report(Yt),Ct("[MediaProcessor] Readable is null.");return}if(!this.writable_){const Yt=new ns().action("MediaProcessor").guid(this.uuid_).message(at.errors.writable_null).variation("Error").build();Zs.report(Yt),Ct("[MediaProcessor] Writable is null.");return}let Xt=!1;this.pipeline_&&(Xt=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new Ep(this.transformers_),this.pipeline_.on("warn",Yt=>{this.emit("warn",Yt)}),this.pipeline_.on("error",Yt=>{this.emit("error",Yt)}),this.pipeline_.on("pipelineInfo",Yt=>{Xt&&(Yt==="pipeline_started"?Yt=Co.pipeline_restarted:Yt==="pipeline_started_with_error"&&(Yt=Co.pipeline_restarted_with_error)),this.emit("pipelineInfo",Yt)}),this.trackExpectedRate_!=-1&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{vt()}).catch(Yt=>{Ct(Yt)})})}setTransformers(vt){const Ct=new ns().action("MediaProcessor").guid(this.uuid_).message(at.updates.transformer_new).variation("Update").build();return Zs.report(Ct),this.transformers_=vt,this.readable_&&this.writable_?this.transformInternal():tt.resolve()}destroy(){return new tt(vt=>{this.pipeline_&&this.pipeline_.destroy();const Ct=new ns().action("MediaProcessor").guid(this.uuid_).variation("Delete").build();Zs.report(Ct),vt()})}}class Gn{constructor(){this.processor_=null,this.generator_=null}init(vt){return new tt((Ct,Xt)=>{try{this.processor_=new MediaStreamTrackProcessor(vt)}catch(Yt){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${Yt}`),Xt(Yt)}try{vt.kind==="audio"?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):vt.kind==="video"?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):Xt("kind not supported")}catch(Yt){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${Yt}`),Xt(Yt)}Ct()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class Qt{constructor(vt){this.insertableStreamHelper_=new Gn,this.mediaProcessor_=vt}setTrack(vt){return new tt((Ct,Xt)=>{this.insertableStreamHelper_.init(vt).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{Ct(this.insertableStreamHelper_.getProccesorTrack())}).catch(Yt=>{Xt(Yt)})}).catch(Yt=>{Xt(Yt)})})}destroy(){return new tt((vt,Ct)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{vt()}).catch(Xt=>{Ct(Xt)}):Ct("no processor")})}}var Zn=(bt=>(bt.Low="Low",bt.High="High",bt))(Zn||{}),er=(bt=>(bt.BackgroundBlur="BackgroundBlur",bt.VirtualBackground="VirtualBackground",bt.VideoBackground="VideoBackground",bt.SilhouetteBlur="SilhouetteBlur",bt))(er||{}),nr=(bt=>(bt.FAST="FAST",bt.PRECISE="PRECISE",bt))(nr||{});const _r=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));var _i=function(){var bt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(vt){vt=vt||{};var Ct=typeof vt<"u"?vt:{},Xt,Yt;Ct.ready=new tt(function(Cr,wr){Xt=Cr,Yt=wr});var hn={},In;for(In in Ct)Ct.hasOwnProperty(In)&&(hn[In]=Ct[In]);var En="./this.program",kn=function(Cr,wr){throw wr},mr=!0,Vr="";function Gr(Cr){return Ct.locateFile?Ct.locateFile(Cr,Vr):Vr+Cr}var Io;typeof document<"u"&&document.currentScript&&(Vr=document.currentScript.src),bt&&(Vr=bt),Vr.indexOf("blob:")!==0?Vr=Vr.substr(0,Vr.replace(/[?#].*/,"").lastIndexOf("/")+1):Vr="";var ko=Ct.print||console.log.bind(console),Mr=Ct.printErr||console.warn.bind(console);for(In in hn)hn.hasOwnProperty(In)&&(Ct[In]=hn[In]);hn=null,Ct.arguments&&Ct.arguments,Ct.thisProgram&&(En=Ct.thisProgram),Ct.quit&&(kn=Ct.quit);var Dr;Ct.wasmBinary&&(Dr=Ct.wasmBinary);var Bo=Ct.noExitRuntime||!0;typeof WebAssembly!="object"&&Ls("no native wasm support detected");var Uo,gs=!1,dr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Vu(Cr,wr,Pr){for(var cs=wr+Pr,Os=wr;Cr[Os]&&!(Os>=cs);)++Os;if(Os-wr>16&&Cr.subarray&&dr)return dr.decode(Cr.subarray(wr,Os));for(var Is="";wr<Os;){var Ro=Cr[wr++];if(!(Ro&128)){Is+=String.fromCharCode(Ro);continue}var Ns=Cr[wr++]&63;if((Ro&224)==192){Is+=String.fromCharCode((Ro&31)<<6|Ns);continue}var Ol=Cr[wr++]&63;if((Ro&240)==224?Ro=(Ro&15)<<12|Ns<<6|Ol:Ro=(Ro&7)<<18|Ns<<12|Ol<<6|Cr[wr++]&63,Ro<65536)Is+=String.fromCharCode(Ro);else{var nu=Ro-65536;Is+=String.fromCharCode(55296|nu>>10,56320|nu&1023)}}return Is}function Su(Cr,wr){return Cr?Vu(to,Cr,wr):""}function ga(Cr,wr,Pr){for(var cs=0;cs<Cr.length;++cs)As[wr++>>0]=Cr.charCodeAt(cs);Pr||(As[wr>>0]=0)}function fs(Cr,wr){return Cr%wr>0&&(Cr+=wr-Cr%wr),Cr}var Fp,As,to,Lu;function Xp(Cr){Fp=Cr,Ct.HEAP8=As=new Int8Array(Cr),Ct.HEAP16=new Int16Array(Cr),Ct.HEAP32=Lu=new Int32Array(Cr),Ct.HEAPU8=to=new Uint8Array(Cr),Ct.HEAPU16=new Uint16Array(Cr),Ct.HEAPU32=new Uint32Array(Cr),Ct.HEAPF32=new Float32Array(Cr),Ct.HEAPF64=new Float64Array(Cr)}Ct.INITIAL_MEMORY;var ba,Xo=[],El=[],hu=[],Bu=0;function pp(){return Bo||Bu>0}function _d(){if(Ct.preRun)for(typeof Ct.preRun=="function"&&(Ct.preRun=[Ct.preRun]);Ct.preRun.length;)ku(Ct.preRun.shift());ls(Xo)}function yp(){ls(El)}function Eu(){if(Ct.postRun)for(typeof Ct.postRun=="function"&&(Ct.postRun=[Ct.postRun]);Ct.postRun.length;)mp(Ct.postRun.shift());ls(hu)}function ku(Cr){Xo.unshift(Cr)}function Rp(Cr){El.unshift(Cr)}function mp(Cr){hu.unshift(Cr)}var Bl=0,Hl=null;function _f(Cr){Bl++,Ct.monitorRunDependencies&&Ct.monitorRunDependencies(Bl)}function Ku(Cr){if(Bl--,Ct.monitorRunDependencies&&Ct.monitorRunDependencies(Bl),Bl==0&&Hl){var wr=Hl;Hl=null,wr()}}Ct.preloadedImages={},Ct.preloadedAudios={};function Ls(Cr){Ct.onAbort&&Ct.onAbort(Cr),Cr="Aborted("+Cr+")",Mr(Cr),gs=!0,Cr+=". Build with -s ASSERTIONS=1 for more info.";var wr=new WebAssembly.RuntimeError(Cr);throw Yt(wr),wr}var Sl="data:application/octet-stream;base64,";function Kl(Cr){return Cr.startsWith(Sl)}var ys;ys="tflite-simd.wasm",Kl(ys)||(ys=Gr(ys));function qs(Cr){try{if(Cr==ys&&Dr)return new Uint8Array(Dr);if(!Io)throw"both async and sync fetching of the wasm failed"}catch(wr){Ls(wr)}}function pu(){return!Dr&&mr&&typeof fetch=="function"?fetch(ys,{credentials:"same-origin"}).then(function(Cr){if(!Cr.ok)throw"failed to load wasm binary file at '"+ys+"'";return Cr.arrayBuffer()}).catch(function(){return qs(ys)}):tt.resolve().then(function(){return qs(ys)})}function Pl(){var Cr={a:ks};function wr(Ro,Ns){var Ol=Ro.exports;Ct.asm=Ol,Uo=Ct.asm.q,Xp(Uo.buffer),ba=Ct.asm.E,Rp(Ct.asm.r),Ku()}_f();function Pr(Ro){wr(Ro.instance)}function cs(Ro){return pu().then(function(Ns){return WebAssembly.instantiate(Ns,Cr)}).then(function(Ns){return Ns}).then(Ro,function(Ns){Mr("failed to asynchronously prepare wasm: "+Ns),Ls(Ns)})}function Os(){return!Dr&&typeof WebAssembly.instantiateStreaming=="function"&&!Kl(ys)&&typeof fetch=="function"?fetch(ys,{credentials:"same-origin"}).then(function(Ro){var Ns=WebAssembly.instantiateStreaming(Ro,Cr);return Ns.then(Pr,function(Ol){return Mr("wasm streaming compile failed: "+Ol),Mr("falling back to ArrayBuffer instantiation"),cs(Pr)})}):cs(Pr)}if(Ct.instantiateWasm)try{var Is=Ct.instantiateWasm(Cr,wr);return Is}catch(Ro){return Mr("Module.instantiateWasm callback failed with error: "+Ro),!1}return Os().catch(Yt),{}}function ls(Cr){for(;Cr.length>0;){var wr=Cr.shift();if(typeof wr=="function"){wr(Ct);continue}var Pr=wr.func;typeof Pr=="number"?wr.arg===void 0?ba.get(Pr)():ba.get(Pr)(wr.arg):Pr(wr.arg===void 0?null:wr.arg)}}function Hs(Cr,wr,Pr,cs){Ls("Assertion failed: "+Su(Cr)+", at: "+[wr?Su(wr):"unknown filename",Pr,cs?Su(cs):"unknown function"])}function xl(Cr,wr){Ls("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function $o(Cr,wr){Ls("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function _a(){Ls("")}var os;os=function(){return performance.now()};var Xs=!0;function Cl(Cr){return Lu[Fo()>>2]=Cr,Cr}function tu(Cr,wr){var Pr;if(Cr===0)Pr=Date.now();else if((Cr===1||Cr===4)&&Xs)Pr=os();else return Cl(28),-1;return Lu[wr>>2]=Pr/1e3|0,Lu[wr+4>>2]=Pr%1e3*1e3*1e3|0,0}function zs(){return 2147483648}function ss(Cr,wr,Pr){to.copyWithin(Cr,wr,wr+Pr)}function Yl(Cr){try{return Uo.grow(Cr-Fp.byteLength+65535>>>16),Xp(Uo.buffer),1}catch{}}function zl(Cr){var wr=to.length;Cr=Cr>>>0;var Pr=2147483648;if(Cr>Pr)return!1;for(var cs=1;cs<=4;cs*=2){var Os=wr*(1+.2/cs);Os=Math.min(Os,Cr+100663296);var Is=Math.min(Pr,fs(Math.max(Cr,Os),65536)),Ro=Yl(Is);if(Ro)return!0}return!1}function _c(Cr){for(var wr=os();os()-wr<Cr;);}var zu={};function mu(){return En||"./this.program"}function Jl(){if(!Jl.strings){var Cr=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",wr={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:Cr,_:mu()};for(var Pr in zu)zu[Pr]===void 0?delete wr[Pr]:wr[Pr]=zu[Pr];var cs=[];for(var Pr in wr)cs.push(Pr+"="+wr[Pr]);Jl.strings=cs}return Jl.strings}var gu={mappings:{},buffers:[null,[],[]],printChar:function(Cr,wr){var Pr=gu.buffers[Cr];wr===0||wr===10?((Cr===1?ko:Mr)(Vu(Pr,0)),Pr.length=0):Pr.push(wr)},varargs:void 0,get:function(){gu.varargs+=4;var Cr=Lu[gu.varargs-4>>2];return Cr},getStr:function(Cr){var wr=Su(Cr);return wr},get64:function(Cr,wr){return Cr}};function Ys(Cr,wr){var Pr=0;return Jl().forEach(function(cs,Os){var Is=wr+Pr;Lu[Cr+Os*4>>2]=Is,ga(cs,Is),Pr+=cs.length+1}),0}function Tl(Cr,wr){var Pr=Jl();Lu[Cr>>2]=Pr.length;var cs=0;return Pr.forEach(function(Os){cs+=Os.length+1}),Lu[wr>>2]=cs,0}function Bs(Cr){ms(Cr)}function bs(Cr){return 0}function $l(Cr,wr,Pr,cs,Os){}function ps(Cr,wr,Pr,cs){for(var Os=0,Is=0;Is<Pr;Is++){for(var Ro=Lu[wr+Is*8>>2],Ns=Lu[wr+(Is*8+4)>>2],Ol=0;Ol<Ns;Ol++)gu.printChar(Cr,to[Ro+Ol]);Os+=Ns}return Lu[cs>>2]=Os,0}function as(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Cr=new Uint8Array(1);return function(){return crypto.getRandomValues(Cr),Cr[0]}}else return function(){Ls("randomDevice")}}function Cu(Cr,wr){Cu.randomDevice||(Cu.randomDevice=as());for(var Pr=0;Pr<wr;Pr++)As[Cr+Pr>>0]=Cu.randomDevice();return 0}var ks={a:Hs,e:xl,d:$o,b:_a,n:tu,h:zs,l:ss,m:zl,p:_c,f:Ys,g:Tl,j:Bs,i:bs,k:$l,c:ps,o:Cu};Pl(),Ct.___wasm_call_ctors=function(){return(Ct.___wasm_call_ctors=Ct.asm.r).apply(null,arguments)},Ct._getModelBufferMemoryOffset=function(){return(Ct._getModelBufferMemoryOffset=Ct.asm.s).apply(null,arguments)},Ct._getInputMemoryOffset=function(){return(Ct._getInputMemoryOffset=Ct.asm.t).apply(null,arguments)},Ct._getInputHeight=function(){return(Ct._getInputHeight=Ct.asm.u).apply(null,arguments)},Ct._getInputWidth=function(){return(Ct._getInputWidth=Ct.asm.v).apply(null,arguments)},Ct._getInputChannelCount=function(){return(Ct._getInputChannelCount=Ct.asm.w).apply(null,arguments)},Ct._getOutputMemoryOffset=function(){return(Ct._getOutputMemoryOffset=Ct.asm.x).apply(null,arguments)},Ct._getOutputHeight=function(){return(Ct._getOutputHeight=Ct.asm.y).apply(null,arguments)},Ct._getOutputWidth=function(){return(Ct._getOutputWidth=Ct.asm.z).apply(null,arguments)},Ct._getOutputChannelCount=function(){return(Ct._getOutputChannelCount=Ct.asm.A).apply(null,arguments)},Ct._loadModel=function(){return(Ct._loadModel=Ct.asm.B).apply(null,arguments)},Ct._runInference=function(){return(Ct._runInference=Ct.asm.C).apply(null,arguments)},Ct._isGPUEnabled=function(){return(Ct._isGPUEnabled=Ct.asm.D).apply(null,arguments)};var Fo=Ct.___errno_location=function(){return(Fo=Ct.___errno_location=Ct.asm.F).apply(null,arguments)},go;function Ss(Cr){this.name="ExitStatus",this.message="Program terminated with exit("+Cr+")",this.status=Cr}Hl=function Cr(){go||Rl(),go||(Hl=Cr)};function Rl(Cr){if(Bl>0||(_d(),Bl>0))return;function wr(){go||(go=!0,Ct.calledRun=!0,!gs&&(yp(),Xt(Ct),Ct.onRuntimeInitialized&&Ct.onRuntimeInitialized(),Eu()))}Ct.setStatus?(Ct.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Ct.setStatus("")},1),wr()},1)):wr()}Ct.run=Rl;function ms(Cr,wr){Es(Cr)}function Es(Cr){pp()||(Ct.onExit&&Ct.onExit(Cr),gs=!0),kn(Cr,new Ss(Cr))}if(Ct.preInit)for(typeof Ct.preInit=="function"&&(Ct.preInit=[Ct.preInit]);Ct.preInit.length>0;)Ct.preInit.pop()();return Rl(),vt.ready}}();class co{constructor(){ot(this,"selectedTFLite"),ot(this,"isSIMDSupported",!1),ot(this,"isThreadsSupported",!1),ot(this,"inputWidth",0),ot(this,"inputHeight",0),ot(this,"inputChannelCount",0),ot(this,"inputMemoryOffset",0),ot(this,"outputWidth",0),ot(this,"outputHeight",0),ot(this,"outputChannelCount",0),ot(this,"outputMemoryOffset",0)}}const oo="https://d3opqjmqzxf057.cloudfront.net/vonage-tensorflow-wasm/tflite-simd-wasm/1.1.3/",du="https://d3opqjmqzxf057.cloudfront.net/ml/selfie_segmentation/4.0.0/";async function Lo(bt=oo,vt=du){let Ct=new co;var Xt=new tt(function(Yt,hn){async function In(){return _i({locateFile:function(kn){return bt+kn}})}async function En(kn){return new tt(async(mr,Vr)=>{const Gr=kn;if(typeof Gr>"u")return Vr("TFLite backend unavailable: wasmSimd");const Io="selfie_segmentation_landscape";console.log("Loading tflite model:",Io);let ko=vt+`${Io}.tflite`;console.log("TFLite modelUrl: "+ko);try{const Mr=await(await fetch(ko)).arrayBuffer();console.log("Model buffer size:",Mr.byteLength);const Dr=Gr._getModelBufferMemoryOffset();console.log("Model buffer memory offset:",Dr),console.log("Loading model buffer..."),Gr.HEAPU8.set(new Uint8Array(Mr),Dr);const Bo=Gr._loadModel(Mr.byteLength);if(console.log("Load model result:",Bo),Bo!==0){Vr("Cannot load model");return}Ct.inputWidth=Gr._getInputWidth(),Ct.inputHeight=Gr._getInputHeight(),Ct.inputChannelCount=Gr._getInputChannelCount(),Ct.inputMemoryOffset=Gr._getInputMemoryOffset(),console.log("Input memory offset:",Ct.inputMemoryOffset),console.log("Input height:",Ct.inputHeight),console.log("Input width:",Ct.inputWidth),console.log("Input channels:",Ct.inputChannelCount),Ct.outputMemoryOffset=Gr._getOutputMemoryOffset(),Ct.outputWidth=Gr._getOutputWidth(),Ct.outputHeight=Gr._getOutputHeight(),Ct.outputChannelCount=Gr._getOutputChannelCount(),console.log("Output memory offset:",Ct.outputMemoryOffset),console.log("Output height:",Ct.outputHeight),console.log("Output width:",Ct.outputWidth),console.log("Output channels:",Ct.outputChannelCount),Ct.selectedTFLite=Gr}catch(Mr){Vr(Mr);return}mr()})}In().then(kn=>{if(kn===null)throw console.error("loadTFLite null"),"loadTFLite null";En(kn).then(mr=>{Yt(Ct)}).catch(mr=>{console.error("loadTFLiteModel error"),hn("loadTFLiteModel error")})}).catch(kn=>{console.error("loadTFLite error:",kn),hn("loadTFLite error:"+kn)})});return Xt}class Vl{constructor(){ot(this,"canvas",new OffscreenCanvas(0,0)),ot(this,"context",this.canvas.getContext("2d",{willReadFrequently:!0})),ot(this,"pixelCount",0),ot(this,"inputOffset",0),ot(this,"outputOffset",0),ot(this,"infos"),ot(this,"mask")}async init(vt,Ct){await this.initWasm(vt,Ct),this.infos&&(this.canvas.width=this.infos.inputWidth,this.canvas.height=this.infos.inputHeight,this.pixelCount=this.infos.inputWidth*this.infos.inputHeight,this.mask=new ImageData(this.infos.inputWidth,this.infos.inputHeight),this.inputOffset=this.infos.inputMemoryOffset/4,this.outputOffset=this.infos.outputMemoryOffset/4)}async initWasm(vt,Ct){this.infos=await Lo(vt,Ct)}getOutputDimensions(){var vt,Ct,Xt,Yt;return{width:(Ct=(vt=this.infos)==null?void 0:vt.outputWidth)!=null?Ct:0,height:(Yt=(Xt=this.infos)==null?void 0:Xt.outputHeight)!=null?Yt:0}}async process(vt){if(!this.mask||!this.infos)return;const Ct=this.infos.inputWidth,Xt=this.infos.inputHeight;this.context.drawImage(vt,0,0,vt.width,vt.height,0,0,Ct,Xt);const Yt=this.context.getImageData(0,0,Ct,Xt),hn=this.infos.selectedTFLite.HEAPF32;for(let In=0;In<this.pixelCount;In++){const En=this.inputOffset+In*3;hn[En]=Yt.data[In*4]/255,hn[En+1]=Yt.data[In*4+1]/255,hn[En+2]=Yt.data[In*4+2]/255}this.infos.selectedTFLite._runInference();for(let In=0;In<this.pixelCount;In++){const En=this.infos.selectedTFLite.HEAPF32[this.outputOffset+In];this.mask.data[In*4]=this.mask.data[In*4+3]=255*En}return createImageBitmap(this.mask)}isGpuSupported(){var vt,Ct,Xt;return(Xt=(Ct=(vt=this.infos)==null?void 0:vt.selectedTFLite)==null?void 0:Ct._isGPUEnabled())!=null?Xt:!1}}async function Wp(bt,vt){const{wasm:Ct,insertableStreams:Xt,simd:Yt,webgl:hn}=await bu(bt,vt);if(!Ct.supported)throw Ct.message;if(!Xt.supported)throw Xt.message;if(!Yt.supported)throw Yt.message;if(!hn.supported)throw hn.message}async function bu(bt,vt){const Ct=new Vl;await Ct.initWasm(bt,vt);const Xt={wasm:{supported:typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function",message:"Your browser does not support WebAssembly features."},simd:{supported:await _r(),message:"Your browser does not support simd features."},insertableStreams:{supported:!0},gpu:{supported:Ct.isGpuSupported(),message:"Your browser does not support gpu features."},webgl:Mp()};try{await st()}catch(Yt){Xt.insertableStreams.supported=!1,Xt.insertableStreams.message=Yt}return Xt}function Mp(){return OffscreenCanvas?new OffscreenCanvas(0,0).getContext("webgl2")?{supported:!0}:{supported:!1,message:"Your browser does not support webgl 2"}:{supported:!1,message:"Your browser does not support offscreen canvas"}}const wu={};(function(){var bt;function vt(Dt){var qt=0;return function(){return qt<Dt.length?{done:!1,value:Dt[qt++]}:{done:!0}}}var Ct=typeof Object.defineProperties=="function"?Object.defineProperty:function(Dt,qt,en){return Dt==Array.prototype||Dt==Object.prototype||(Dt[qt]=en.value),Dt};function Xt(Dt){Dt=[typeof globalThis=="object"&&globalThis,Dt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var qt=0;qt<Dt.length;++qt){var en=Dt[qt];if(en&&en.Math==Math)return en}throw Error("Cannot find global object")}var Yt=Xt(this);function hn(Dt,qt){if(qt)e:{var en=Yt;Dt=Dt.split(".");for(var jn=0;jn<Dt.length-1;jn++){var ur=Dt[jn];if(!(ur in en))break e;en=en[ur]}Dt=Dt[Dt.length-1],jn=en[Dt],qt=qt(jn),qt!=jn&&qt!=null&&Ct(en,Dt,{configurable:!0,writable:!0,value:qt})}}hn("Symbol",function(Dt){function qt(Lr){if(this instanceof qt)throw new TypeError("Symbol is not a constructor");return new en(jn+(Lr||"")+"_"+ur++,Lr)}function en(Lr,cr){this.g=Lr,Ct(this,"description",{configurable:!0,writable:!0,value:cr})}if(Dt)return Dt;en.prototype.toString=function(){return this.g};var jn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",ur=0;return qt}),hn("Symbol.iterator",function(Dt){if(Dt)return Dt;Dt=Symbol("Symbol.iterator");for(var qt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),en=0;en<qt.length;en++){var jn=Yt[qt[en]];typeof jn=="function"&&typeof jn.prototype[Dt]!="function"&&Ct(jn.prototype,Dt,{configurable:!0,writable:!0,value:function(){return In(vt(this))}})}return Dt});function In(Dt){return Dt={next:Dt},Dt[Symbol.iterator]=function(){return this},Dt}function En(Dt){var qt=typeof Symbol<"u"&&Symbol.iterator&&Dt[Symbol.iterator];return qt?qt.call(Dt):{next:vt(Dt)}}function kn(Dt){if(!(Dt instanceof Array)){Dt=En(Dt);for(var qt,en=[];!(qt=Dt.next()).done;)en.push(qt.value);Dt=en}return Dt}var mr=typeof Object.create=="function"?Object.create:function(Dt){function qt(){}return qt.prototype=Dt,new qt},Vr;if(typeof Object.setPrototypeOf=="function")Vr=Object.setPrototypeOf;else{var Gr;e:{var Io={a:!0},ko={};try{ko.__proto__=Io,Gr=ko.a;break e}catch{}Gr=!1}Vr=Gr?function(Dt,qt){if(Dt.__proto__=qt,Dt.__proto__!==qt)throw new TypeError(Dt+" is not extensible");return Dt}:null}var Mr=Vr;function Dr(Dt,qt){if(Dt.prototype=mr(qt.prototype),Dt.prototype.constructor=Dt,Mr)Mr(Dt,qt);else for(var en in qt)if(en!="prototype")if(Object.defineProperties){var jn=Object.getOwnPropertyDescriptor(qt,en);jn&&Object.defineProperty(Dt,en,jn)}else Dt[en]=qt[en];Dt.ea=qt.prototype}function Bo(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Uo(Dt){if(Dt.l)throw new TypeError("Generator is already running");Dt.l=!0}Bo.prototype.o=function(Dt){this.h=Dt};function gs(Dt,qt){Dt.j={U:qt,V:!0},Dt.g=Dt.m||Dt.s}Bo.prototype.return=function(Dt){this.j={return:Dt},this.g=this.s};function dr(Dt,qt,en){return Dt.g=en,{value:qt}}function Vu(Dt){this.g=new Bo,this.h=Dt}function Su(Dt,qt){Uo(Dt.g);var en=Dt.g.i;return en?ga(Dt,"return"in en?en.return:function(jn){return{value:jn,done:!0}},qt,Dt.g.return):(Dt.g.return(qt),fs(Dt))}function ga(Dt,qt,en,jn){try{var ur=qt.call(Dt.g.i,en);if(!(ur instanceof Object))throw new TypeError("Iterator result "+ur+" is not an object");if(!ur.done)return Dt.g.l=!1,ur;var Lr=ur.value}catch(cr){return Dt.g.i=null,gs(Dt.g,cr),fs(Dt)}return Dt.g.i=null,jn.call(Dt.g,Lr),fs(Dt)}function fs(Dt){for(;Dt.g.g;)try{var qt=Dt.h(Dt.g);if(qt)return Dt.g.l=!1,{value:qt.value,done:!1}}catch(en){Dt.g.h=void 0,gs(Dt.g,en)}if(Dt.g.l=!1,Dt.g.j){if(qt=Dt.g.j,Dt.g.j=null,qt.V)throw qt.U;return{value:qt.return,done:!0}}return{value:void 0,done:!0}}function Fp(Dt){this.next=function(qt){return Uo(Dt.g),Dt.g.i?qt=ga(Dt,Dt.g.i.next,qt,Dt.g.o):(Dt.g.o(qt),qt=fs(Dt)),qt},this.throw=function(qt){return Uo(Dt.g),Dt.g.i?qt=ga(Dt,Dt.g.i.throw,qt,Dt.g.o):(gs(Dt.g,qt),qt=fs(Dt)),qt},this.return=function(qt){return Su(Dt,qt)},this[Symbol.iterator]=function(){return this}}function As(Dt,qt){return qt=new Fp(new Vu(qt)),Mr&&Dt.prototype&&Mr(qt,Dt.prototype),qt}function to(Dt,qt){Dt instanceof String&&(Dt+="");var en=0,jn=!1,ur={next:function(){if(!jn&&en<Dt.length){var Lr=en++;return{value:qt(Lr,Dt[Lr]),done:!1}}return jn=!0,{done:!0,value:void 0}}};return ur[Symbol.iterator]=function(){return ur},ur}var Lu=typeof Object.assign=="function"?Object.assign:function(Dt,qt){for(var en=1;en<arguments.length;en++){var jn=arguments[en];if(jn)for(var ur in jn)Object.prototype.hasOwnProperty.call(jn,ur)&&(Dt[ur]=jn[ur])}return Dt};hn("Object.assign",function(Dt){return Dt||Lu}),hn("Promise",function(Dt){function qt(cr){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Ir=this.j();try{cr(Ir.resolve,Ir.reject)}catch(Kr){Ir.reject(Kr)}}function en(){this.g=null}function jn(cr){return cr instanceof qt?cr:new qt(function(Ir){Ir(cr)})}if(Dt)return Dt;en.prototype.h=function(cr){if(this.g==null){this.g=[];var Ir=this;this.i(function(){Ir.l()})}this.g.push(cr)};var ur=Yt.setTimeout;en.prototype.i=function(cr){ur(cr,0)},en.prototype.l=function(){for(;this.g&&this.g.length;){var cr=this.g;this.g=[];for(var Ir=0;Ir<cr.length;++Ir){var Kr=cr[Ir];cr[Ir]=null;try{Kr()}catch(So){this.j(So)}}}this.g=null},en.prototype.j=function(cr){this.i(function(){throw cr})},qt.prototype.j=function(){function cr(So){return function(zo){Kr||(Kr=!0,So.call(Ir,zo))}}var Ir=this,Kr=!1;return{resolve:cr(this.C),reject:cr(this.l)}},qt.prototype.C=function(cr){if(cr===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(cr instanceof qt)this.F(cr);else{e:switch(typeof cr){case"object":var Ir=cr!=null;break e;case"function":Ir=!0;break e;default:Ir=!1}Ir?this.u(cr):this.m(cr)}},qt.prototype.u=function(cr){var Ir=void 0;try{Ir=cr.then}catch(Kr){this.l(Kr);return}typeof Ir=="function"?this.G(Ir,cr):this.m(cr)},qt.prototype.l=function(cr){this.s(2,cr)},qt.prototype.m=function(cr){this.s(1,cr)},qt.prototype.s=function(cr,Ir){if(this.h!=0)throw Error("Cannot settle("+cr+", "+Ir+"): Promise already settled in state"+this.h);this.h=cr,this.i=Ir,this.h===2&&this.D(),this.A()},qt.prototype.D=function(){var cr=this;ur(function(){if(cr.B()){var Ir=Yt.console;typeof Ir<"u"&&Ir.error(cr.i)}},1)},qt.prototype.B=function(){if(this.o)return!1;var cr=Yt.CustomEvent,Ir=Yt.Event,Kr=Yt.dispatchEvent;return typeof Kr>"u"?!0:(typeof cr=="function"?cr=new cr("unhandledrejection",{cancelable:!0}):typeof Ir=="function"?cr=new Ir("unhandledrejection",{cancelable:!0}):(cr=Yt.document.createEvent("CustomEvent"),cr.initCustomEvent("unhandledrejection",!1,!0,cr)),cr.promise=this,cr.reason=this.i,Kr(cr))},qt.prototype.A=function(){if(this.g!=null){for(var cr=0;cr<this.g.length;++cr)Lr.h(this.g[cr]);this.g=null}};var Lr=new en;return qt.prototype.F=function(cr){var Ir=this.j();cr.J(Ir.resolve,Ir.reject)},qt.prototype.G=function(cr,Ir){var Kr=this.j();try{cr.call(Ir,Kr.resolve,Kr.reject)}catch(So){Kr.reject(So)}},qt.prototype.then=function(cr,Ir){function Kr(hs,Ho){return typeof hs=="function"?function(Oo){try{So(hs(Oo))}catch(Ko){zo(Ko)}}:Ho}var So,zo,Do=new qt(function(hs,Ho){So=hs,zo=Ho});return this.J(Kr(cr,So),Kr(Ir,zo)),Do},qt.prototype.catch=function(cr){return this.then(void 0,cr)},qt.prototype.J=function(cr,Ir){function Kr(){switch(So.h){case 1:cr(So.i);break;case 2:Ir(So.i);break;default:throw Error("Unexpected state: "+So.h)}}var So=this;this.g==null?Lr.h(Kr):this.g.push(Kr),this.o=!0},qt.resolve=jn,qt.reject=function(cr){return new qt(function(Ir,Kr){Kr(cr)})},qt.race=function(cr){return new qt(function(Ir,Kr){for(var So=En(cr),zo=So.next();!zo.done;zo=So.next())jn(zo.value).J(Ir,Kr)})},qt.all=function(cr){var Ir=En(cr),Kr=Ir.next();return Kr.done?jn([]):new qt(function(So,zo){function Do(Oo){return function(Ko){hs[Oo]=Ko,Ho--,Ho==0&&So(hs)}}var hs=[],Ho=0;do hs.push(void 0),Ho++,jn(Kr.value).J(Do(hs.length-1),zo),Kr=Ir.next();while(!Kr.done)})},qt}),hn("Object.is",function(Dt){return Dt||function(qt,en){return qt===en?qt!==0||1/qt===1/en:qt!==qt&&en!==en}}),hn("Array.prototype.includes",function(Dt){return Dt||function(qt,en){var jn=this;jn instanceof String&&(jn=String(jn));var ur=jn.length;for(en=en||0,0>en&&(en=Math.max(en+ur,0));en<ur;en++){var Lr=jn[en];if(Lr===qt||Object.is(Lr,qt))return!0}return!1}}),hn("String.prototype.includes",function(Dt){return Dt||function(qt,en){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(qt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(qt,en||0)!==-1}}),hn("Array.prototype.keys",function(Dt){return Dt||function(){return to(this,function(qt){return qt})}});var Xp=this||self;function ba(Dt,qt){Dt=Dt.split(".");var en=Xp;Dt[0]in en||typeof en.execScript>"u"||en.execScript("var "+Dt[0]);for(var jn;Dt.length&&(jn=Dt.shift());)Dt.length||qt===void 0?en[jn]&&en[jn]!==Object.prototype[jn]?en=en[jn]:en=en[jn]={}:en[jn]=qt}function Xo(Dt,qt){return qt=String.fromCharCode.apply(null,qt),Dt==null?qt:Dt+qt}var El,hu=typeof TextDecoder<"u",Bu,pp=typeof TextEncoder<"u";function _d(Dt){if(pp)Dt=(Bu||(Bu=new TextEncoder)).encode(Dt);else{var qt=void 0;qt=qt===void 0?!1:qt;for(var en=0,jn=new Uint8Array(3*Dt.length),ur=0;ur<Dt.length;ur++){var Lr=Dt.charCodeAt(ur);if(128>Lr)jn[en++]=Lr;else{if(2048>Lr)jn[en++]=Lr>>6|192;else{if(55296<=Lr&&57343>=Lr){if(56319>=Lr&&ur<Dt.length){var cr=Dt.charCodeAt(++ur);if(56320<=cr&&57343>=cr){Lr=1024*(Lr-55296)+cr-56320+65536,jn[en++]=Lr>>18|240,jn[en++]=Lr>>12&63|128,jn[en++]=Lr>>6&63|128,jn[en++]=Lr&63|128;continue}else ur--}if(qt)throw Error("Found an unpaired surrogate");Lr=65533}jn[en++]=Lr>>12|224,jn[en++]=Lr>>6&63|128}jn[en++]=Lr&63|128}}Dt=jn.subarray(0,en)}return Dt}var yp={},Eu=null;function ku(Dt,qt){qt===void 0&&(qt=0),Bl(),qt=yp[qt];for(var en=Array(Math.floor(Dt.length/3)),jn=qt[64]||"",ur=0,Lr=0;ur<Dt.length-2;ur+=3){var cr=Dt[ur],Ir=Dt[ur+1],Kr=Dt[ur+2],So=qt[cr>>2];cr=qt[(cr&3)<<4|Ir>>4],Ir=qt[(Ir&15)<<2|Kr>>6],Kr=qt[Kr&63],en[Lr++]=So+cr+Ir+Kr}switch(So=0,Kr=jn,Dt.length-ur){case 2:So=Dt[ur+1],Kr=qt[(So&15)<<2]||jn;case 1:Dt=Dt[ur],en[Lr]=qt[Dt>>2]+qt[(Dt&3)<<4|So>>4]+Kr+jn}return en.join("")}function Rp(Dt){var qt=Dt.length,en=3*qt/4;en%3?en=Math.floor(en):"=.".indexOf(Dt[qt-1])!=-1&&(en="=.".indexOf(Dt[qt-2])!=-1?en-2:en-1);var jn=new Uint8Array(en),ur=0;return mp(Dt,function(Lr){jn[ur++]=Lr}),jn.subarray(0,ur)}function mp(Dt,qt){function en(Kr){for(;jn<Dt.length;){var So=Dt.charAt(jn++),zo=Eu[So];if(zo!=null)return zo;if(!/^[\s\xa0]*$/.test(So))throw Error("Unknown base64 encoding at char: "+So)}return Kr}Bl();for(var jn=0;;){var ur=en(-1),Lr=en(0),cr=en(64),Ir=en(64);if(Ir===64&&ur===-1)break;qt(ur<<2|Lr>>4),cr!=64&&(qt(Lr<<4&240|cr>>2),Ir!=64&&qt(cr<<6&192|Ir))}}function Bl(){if(!Eu){Eu={};for(var Dt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),qt=["+/=","+/","-_=","-_.","-_"],en=0;5>en;en++){var jn=Dt.concat(qt[en].split(""));yp[en]=jn;for(var ur=0;ur<jn.length;ur++){var Lr=jn[ur];Eu[Lr]===void 0&&(Eu[Lr]=ur)}}}}var Hl=typeof Uint8Array.prototype.slice=="function",_f;function Ku(Dt,qt,en){return qt===en?_f||(_f=new Uint8Array(0)):Hl?Dt.slice(qt,en):new Uint8Array(Dt.subarray(qt,en))}var Ls=0,Sl=0;function Kl(Dt,qt){qt=qt===void 0?{}:qt,qt=qt.v===void 0?!1:qt.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=qt,Dt&&ys(this,Dt)}function ys(Dt,qt){qt=qt.constructor===Uint8Array?qt:qt.constructor===ArrayBuffer?new Uint8Array(qt):qt.constructor===Array?new Uint8Array(qt):qt.constructor===String?Rp(qt):qt instanceof Uint8Array?new Uint8Array(qt.buffer,qt.byteOffset,qt.byteLength):new Uint8Array(0),Dt.h=qt,Dt.j=0,Dt.i=Dt.h.length,Dt.g=Dt.j}Kl.prototype.reset=function(){this.g=this.j};function qs(Dt){var qt=Dt.h,en=qt[Dt.g],jn=en&127;return 128>en?(Dt.g+=1,jn):(en=qt[Dt.g+1],jn|=(en&127)<<7,128>en?(Dt.g+=2,jn):(en=qt[Dt.g+2],jn|=(en&127)<<14,128>en?(Dt.g+=3,jn):(en=qt[Dt.g+3],jn|=(en&127)<<21,128>en?(Dt.g+=4,jn):(en=qt[Dt.g+4],jn|=(en&15)<<28,128>en?(Dt.g+=5,jn>>>0):(Dt.g+=5,128<=qt[Dt.g++]&&128<=qt[Dt.g++]&&128<=qt[Dt.g++]&&128<=qt[Dt.g++]&&Dt.g++,jn)))))}function pu(Dt){var qt=Dt.h[Dt.g],en=Dt.h[Dt.g+1],jn=Dt.h[Dt.g+2],ur=Dt.h[Dt.g+3];return Dt.g+=4,en=(qt<<0|en<<8|jn<<16|ur<<24)>>>0,Dt=2*(en>>31)+1,qt=en>>>23&255,en&=8388607,qt==255?en?NaN:1/0*Dt:qt==0?Dt*Math.pow(2,-149)*en:Dt*Math.pow(2,qt-150)*(en+Math.pow(2,23))}var Pl=[];function ls(){this.g=new Uint8Array(64),this.h=0}ls.prototype.push=function(Dt){if(!(this.h+1<this.g.length)){var qt=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(qt)}this.g[this.h++]=Dt},ls.prototype.length=function(){return this.h},ls.prototype.end=function(){var Dt=this.g,qt=this.h;return this.h=0,Ku(Dt,0,qt)};function Hs(Dt,qt){for(;127<qt;)Dt.push(qt&127|128),qt>>>=7;Dt.push(qt)}function xl(Dt){var qt={},en=qt.N===void 0?!1:qt.N;this.o={v:qt.v===void 0?!1:qt.v},this.N=en,qt=this.o,Pl.length?(en=Pl.pop(),qt&&(en.v=qt.v),Dt&&ys(en,Dt),Dt=en):Dt=new Kl(Dt,qt),this.g=Dt,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}xl.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function $o(Dt){var qt=Dt.g;if((qt=qt.g==qt.i)||(qt=Dt.j)||(qt=Dt.g,qt=qt.l||0>qt.g||qt.g>qt.i),qt)return!1;Dt.m=Dt.g.g,qt=qs(Dt.g);var en=qt&7;return en!=0&&en!=5&&en!=1&&en!=2&&en!=3&&en!=4?(Dt.j=!0,!1):(Dt.i=qt,Dt.l=qt>>>3,Dt.h=en,!0)}function _a(Dt){switch(Dt.h){case 0:if(Dt.h!=0)_a(Dt);else{for(Dt=Dt.g;Dt.h[Dt.g]&128;)Dt.g++;Dt.g++}break;case 1:Dt.h!=1?_a(Dt):(Dt=Dt.g,Dt.g+=8);break;case 2:if(Dt.h!=2)_a(Dt);else{var qt=qs(Dt.g);Dt=Dt.g,Dt.g+=qt}break;case 5:Dt.h!=5?_a(Dt):(Dt=Dt.g,Dt.g+=4);break;case 3:qt=Dt.l;do{if(!$o(Dt)){Dt.j=!0;break}if(Dt.h==4){Dt.l!=qt&&(Dt.j=!0);break}_a(Dt)}while(1);break;default:Dt.j=!0}}function os(Dt,qt,en){var jn=Dt.g.i,ur=qs(Dt.g);return ur=Dt.g.g+ur,Dt.g.i=ur,en(qt,Dt),Dt.g.g=ur,Dt.g.i=jn,qt}function Xs(Dt){var qt=qs(Dt.g);Dt=Dt.g;var en=Dt.g;Dt.g+=qt,Dt=Dt.h;var jn;if(hu)(jn=El)||(jn=El=new TextDecoder("utf-8",{fatal:!1})),jn=jn.decode(Dt.subarray(en,en+qt));else{qt=en+qt;for(var ur=[],Lr=null,cr,Ir,Kr;en<qt;)cr=Dt[en++],128>cr?ur.push(cr):224>cr?en>=qt?ur.push(65533):(Ir=Dt[en++],194>cr||(Ir&192)!==128?(en--,ur.push(65533)):ur.push((cr&31)<<6|Ir&63)):240>cr?en>=qt-1?ur.push(65533):(Ir=Dt[en++],(Ir&192)!==128||cr===224&&160>Ir||cr===237&&160<=Ir||((jn=Dt[en++])&192)!==128?(en--,ur.push(65533)):ur.push((cr&15)<<12|(Ir&63)<<6|jn&63)):244>=cr?en>=qt-2?ur.push(65533):(Ir=Dt[en++],(Ir&192)!==128||(cr<<28)+(Ir-144)>>30||((jn=Dt[en++])&192)!==128||((Kr=Dt[en++])&192)!==128?(en--,ur.push(65533)):(cr=(cr&7)<<18|(Ir&63)<<12|(jn&63)<<6|Kr&63,cr-=65536,ur.push((cr>>10&1023)+55296,(cr&1023)+56320))):ur.push(65533),8192<=ur.length&&(Lr=Xo(Lr,ur),ur.length=0);jn=Xo(Lr,ur)}return jn}function Cl(){this.h=[],this.i=0,this.g=new ls}function tu(Dt,qt){qt.length!==0&&(Dt.h.push(qt),Dt.i+=qt.length)}function zs(Dt){var qt=Dt.i+Dt.g.length();if(qt===0)return new Uint8Array(0);qt=new Uint8Array(qt);for(var en=Dt.h,jn=en.length,ur=0,Lr=0;Lr<jn;Lr++){var cr=en[Lr];cr.length!==0&&(qt.set(cr,ur),ur+=cr.length)}return en=Dt.g,jn=en.h,jn!==0&&(qt.set(en.g.subarray(0,jn),ur),en.h=0),Dt.h=[qt],qt}function ss(Dt,qt,en){if(en!=null){Hs(Dt.g,8*qt+5),Dt=Dt.g;var jn=en;jn=(en=0>jn?1:0)?-jn:jn,jn===0?0<1/jn?Ls=Sl=0:(Sl=0,Ls=2147483648):isNaN(jn)?(Sl=0,Ls=2147483647):34028234663852886e22<jn?(Sl=0,Ls=(en<<31|2139095040)>>>0):11754943508222875e-54>jn?(jn=Math.round(jn/Math.pow(2,-149)),Sl=0,Ls=(en<<31|jn)>>>0):(qt=Math.floor(Math.log(jn)/Math.LN2),jn*=Math.pow(2,-qt),jn=Math.round(8388608*jn)&8388607,Sl=0,Ls=(en<<31|qt+127<<23|jn)>>>0),en=Ls,Dt.push(en>>>0&255),Dt.push(en>>>8&255),Dt.push(en>>>16&255),Dt.push(en>>>24&255)}}var Yl=typeof Uint8Array=="function";function zl(Dt,qt,en){if(Dt!=null)return typeof Dt=="object"?Yl&&Dt instanceof Uint8Array?en(Dt):_c(Dt,qt,en):qt(Dt)}function _c(Dt,qt,en){if(Array.isArray(Dt)){for(var jn=Array(Dt.length),ur=0;ur<Dt.length;ur++)jn[ur]=zl(Dt[ur],qt,en);return Array.isArray(Dt)&&Dt.W&&Jl(jn),jn}jn={};for(ur in Dt)jn[ur]=zl(Dt[ur],qt,en);return jn}function zu(Dt){return typeof Dt=="number"?isFinite(Dt)?Dt:String(Dt):Dt}var mu={W:{value:!0,configurable:!0}};function Jl(Dt){return Array.isArray(Dt)&&!Object.isFrozen(Dt)&&Object.defineProperties(Dt,mu),Dt}var gu;function Ys(Dt,qt,en){var jn=gu;gu=null,Dt||(Dt=jn),jn=this.constructor.ca,Dt||(Dt=jn?[jn]:[]),this.j=jn?0:-1,this.i=null,this.g=Dt;e:{if(jn=this.g.length,Dt=jn-1,jn&&(jn=this.g[Dt],jn!==null&&typeof jn=="object"&&jn.constructor===Object)){this.l=Dt-this.j,this.h=jn;break e}qt!==void 0&&-1<qt?(this.l=Math.max(qt,Dt+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(en)for(qt=0;qt<en.length;qt++)Dt=en[qt],Dt<this.l?(Dt+=this.j,(jn=this.g[Dt])?Jl(jn):this.g[Dt]=Tl):(Bs(this),(jn=this.h[Dt])?Jl(jn):this.h[Dt]=Tl)}var Tl=Object.freeze(Jl([]));function Bs(Dt){var qt=Dt.l+Dt.j;Dt.g[qt]||(Dt.h=Dt.g[qt]={})}function bs(Dt,qt,en){return qt===-1?null:en!==void 0&&en||qt>=Dt.l?Dt.h?Dt.h[qt]:void 0:Dt.g[qt+Dt.j]}function $l(Dt){var qt=qt===void 0?!1:qt,en=bs(Dt,1,qt);return en==null&&(en=Tl),en===Tl&&(en=Jl([]),as(Dt,1,en,qt)),en}function ps(Dt,qt,en){return Dt=bs(Dt,qt),Dt=Dt==null?Dt:+Dt,Dt??(en===void 0?0:en)}function as(Dt,qt,en,jn){jn!==void 0&&jn||qt>=Dt.l?(Bs(Dt),Dt.h[qt]=en):Dt.g[qt+Dt.j]=en}function Cu(Dt,qt){Dt.i||(Dt.i={});var en=Dt.i[1];if(!en){var jn=$l(Dt);en=[];for(var ur=0;ur<jn.length;ur++)en[ur]=new qt(jn[ur]);Dt.i[1]=en}return en}function ks(Dt,qt,en,jn){var ur=Cu(Dt,en);qt=qt||new en,Dt=$l(Dt),jn!=null?(ur.splice(jn,0,qt),Dt.splice(jn,0,Fo(qt))):(ur.push(qt),Dt.push(Fo(qt)))}Ys.prototype.toJSON=function(){var Dt=Fo(this);return _c(Dt,zu,ku)};function Fo(Dt,qt){if(Dt.i)for(var en in Dt.i){var jn=Dt.i[en];if(Array.isArray(jn))for(var ur=0;ur<jn.length;ur++)jn[ur]&&Fo(jn[ur]);else jn&&Fo(jn)}return Dt.g}Ys.prototype.toString=function(){return Fo(this).toString()};function go(Dt,qt){return Dt=bs(Dt,qt),Dt??0}function Ss(Dt,qt){return Dt=bs(Dt,qt),Dt??""}function Rl(Dt,qt){if(Dt=Dt.m){tu(qt,qt.g.end());for(var en=0;en<Dt.length;en++)tu(qt,Dt[en])}}function ms(Dt,qt){if(qt.h==4)return!1;var en=qt.m;return _a(qt),qt.N||(qt=Ku(qt.g.h,en,qt.g.g),(en=Dt.m)?en.push(qt):Dt.m=[qt]),!0}function Es(Dt,qt){var en=void 0;return new(en||(en=tt))(function(jn,ur){function Lr(Kr){try{Ir(qt.next(Kr))}catch(So){ur(So)}}function cr(Kr){try{Ir(qt.throw(Kr))}catch(So){ur(So)}}function Ir(Kr){Kr.done?jn(Kr.value):new en(function(So){So(Kr.value)}).then(Lr,cr)}Ir((qt=qt.apply(Dt,void 0)).next())})}function Cr(Dt){Ys.call(this,Dt)}Dr(Cr,Ys);function wr(Dt,qt){for(;$o(qt);)switch(qt.i){case 8:var en=qs(qt.g);as(Dt,1,en);break;case 21:en=pu(qt.g),as(Dt,2,en);break;case 26:en=Xs(qt),as(Dt,3,en);break;case 34:en=Xs(qt),as(Dt,4,en);break;default:if(!ms(Dt,qt))return Dt}return Dt}function Pr(Dt){Ys.call(this,Dt,-1,cs)}Dr(Pr,Ys),Pr.prototype.addClassification=function(Dt,qt){ks(this,Dt,Cr,qt)};var cs=[1];function Os(Dt){Ys.call(this,Dt)}Dr(Os,Ys);function Is(Dt,qt){for(;$o(qt);)switch(qt.i){case 13:var en=pu(qt.g);as(Dt,1,en);break;case 21:en=pu(qt.g),as(Dt,2,en);break;case 29:en=pu(qt.g),as(Dt,3,en);break;case 37:en=pu(qt.g),as(Dt,4,en);break;case 45:en=pu(qt.g),as(Dt,5,en);break;default:if(!ms(Dt,qt))return Dt}return Dt}function Ro(Dt){Ys.call(this,Dt,-1,Ns)}Dr(Ro,Ys);var Ns=[1];function Ol(Dt){Ys.call(this,Dt)}Dr(Ol,Ys);function nu(Dt,qt,en){if(en=Dt.createShader(en===0?Dt.VERTEX_SHADER:Dt.FRAGMENT_SHADER),Dt.shaderSource(en,qt),Dt.compileShader(en),!Dt.getShaderParameter(en,Dt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+Dt.getShaderInfoLog(en));return en}function ru(Dt){return Cu(Dt,Cr).map(function(qt){return{index:go(qt,1),Y:ps(qt,2),label:bs(qt,3)!=null?Ss(qt,3):void 0,displayName:bs(qt,4)!=null?Ss(qt,4):void 0}})}function Tu(Dt){return{x:ps(Dt,1),y:ps(Dt,2),z:ps(Dt,3),visibility:bs(Dt,4)!=null?ps(Dt,4):void 0}}function Nu(Dt,qt){this.h=Dt,this.g=qt,this.l=0}function Il(Dt,qt,en){return iu(Dt,qt),typeof Dt.g.canvas.transferToImageBitmap=="function"?tt.resolve(Dt.g.canvas.transferToImageBitmap()):en?tt.resolve(Dt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(Dt.g.canvas):(Dt.i===void 0&&(Dt.i=document.createElement("canvas")),new tt(function(jn){Dt.i.height=Dt.g.canvas.height,Dt.i.width=Dt.g.canvas.width,Dt.i.getContext("2d",{}).drawImage(Dt.g.canvas,0,0,Dt.g.canvas.width,Dt.g.canvas.height),jn(Dt.i)}))}function iu(Dt,qt){var en=Dt.g;if(Dt.m===void 0){var jn=nu(en,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),ur=nu(en,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Lr=en.createProgram();if(en.attachShader(Lr,jn),en.attachShader(Lr,ur),en.linkProgram(Lr),!en.getProgramParameter(Lr,en.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+en.getProgramInfoLog(Lr));jn=Dt.m=Lr,en.useProgram(jn),ur=en.getUniformLocation(jn,"sampler0"),Dt.j={I:en.getAttribLocation(jn,"aVertex"),H:en.getAttribLocation(jn,"aTex"),da:ur},Dt.s=en.createBuffer(),en.bindBuffer(en.ARRAY_BUFFER,Dt.s),en.enableVertexAttribArray(Dt.j.I),en.vertexAttribPointer(Dt.j.I,2,en.FLOAT,!1,0,0),en.bufferData(en.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),en.STATIC_DRAW),en.bindBuffer(en.ARRAY_BUFFER,null),Dt.o=en.createBuffer(),en.bindBuffer(en.ARRAY_BUFFER,Dt.o),en.enableVertexAttribArray(Dt.j.H),en.vertexAttribPointer(Dt.j.H,2,en.FLOAT,!1,0,0),en.bufferData(en.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),en.STATIC_DRAW),en.bindBuffer(en.ARRAY_BUFFER,null),en.uniform1i(ur,0)}jn=Dt.j,en.useProgram(Dt.m),en.canvas.width=qt.width,en.canvas.height=qt.height,en.viewport(0,0,qt.width,qt.height),en.activeTexture(en.TEXTURE0),Dt.h.bindTexture2d(qt.glName),en.enableVertexAttribArray(jn.I),en.bindBuffer(en.ARRAY_BUFFER,Dt.s),en.vertexAttribPointer(jn.I,2,en.FLOAT,!1,0,0),en.enableVertexAttribArray(jn.H),en.bindBuffer(en.ARRAY_BUFFER,Dt.o),en.vertexAttribPointer(jn.H,2,en.FLOAT,!1,0,0),en.bindFramebuffer(en.DRAW_FRAMEBUFFER?en.DRAW_FRAMEBUFFER:en.FRAMEBUFFER,null),en.clearColor(0,0,0,0),en.clear(en.COLOR_BUFFER_BIT),en.colorMask(!0,!0,!0,!0),en.drawArrays(en.TRIANGLE_FAN,0,4),en.disableVertexAttribArray(jn.I),en.disableVertexAttribArray(jn.H),en.bindBuffer(en.ARRAY_BUFFER,null),Dt.h.bindTexture2d(0)}function Dp(Dt){this.g=Dt}var ou=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Al(Dt,qt){return qt+Dt}function Xu(Dt,qt){window[Dt]=qt}function _h(Dt){var qt=document.createElement("script");return qt.setAttribute("src",Dt),qt.setAttribute("crossorigin","anonymous"),new tt(function(en){qt.addEventListener("load",function(){en()},!1),qt.addEventListener("error",function(){en()},!1),document.body.appendChild(qt)})}function Fl(){return Es(this,function Dt(){return As(Dt,function(qt){switch(qt.g){case 1:return qt.m=2,dr(qt,WebAssembly.instantiate(ou),4);case 4:qt.g=3,qt.m=0;break;case 2:return qt.m=0,qt.j=null,qt.return(!1);case 3:return qt.return(!0)}})})}function Ip(Dt){if(this.g=Dt,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=tt.resolve(),this.P="",this.B={},this.locateFile=Dt&&Dt.locateFile||Al,typeof window=="object")var qt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")qt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=qt,Dt.options){qt=En(Object.keys(Dt.options));for(var en=qt.next();!en.done;en=qt.next()){en=en.value;var jn=Dt.options[en].default;jn!==void 0&&(this.j[en]=typeof jn=="function"?jn():jn)}}}bt=Ip.prototype,bt.close=function(){return this.i&&this.i.delete(),tt.resolve()};function su(Dt,qt){return Dt.g.files===void 0?[]:typeof Dt.g.files=="function"?Dt.g.files(qt):Dt.g.files}function Du(Dt){return Es(Dt,function qt(){var en=this,jn,ur,Lr,cr,Ir,Kr,So,zo,Do,hs,Ho;return As(qt,function(Oo){switch(Oo.g){case 1:return jn=en,en.R?(ur=su(en,en.j),dr(Oo,Fl(),2)):Oo.return();case 2:if(Lr=Oo.h,typeof window=="object")return Xu("createMediapipeSolutionsWasm",{locateFile:en.locateFile}),Xu("createMediapipeSolutionsPackedAssets",{locateFile:en.locateFile}),Kr=ur.filter(function(Ko){return Ko.data!==void 0}),So=ur.filter(function(Ko){return Ko.data===void 0}),zo=tt.all(Kr.map(function(Ko){var us=vu(jn,Ko.url);if(Ko.path!==void 0){var xs=Ko.path;us=us.then(function(Gs){return jn.overrideFile(xs,Gs),tt.resolve(Gs)})}return us})),Do=tt.all(So.map(function(Ko){return Ko.simd===void 0||Ko.simd&&Lr||!Ko.simd&&!Lr?_h(jn.locateFile(Ko.url,jn.S)):tt.resolve()})).then(function(){return Es(jn,function Ko(){var us,xs,Gs=this;return As(Ko,function(Ds){if(Ds.g==1)return us=window.createMediapipeSolutionsWasm,xs=window.createMediapipeSolutionsPackedAssets,dr(Ds,us(xs),2);Gs.h=Ds.h,Ds.g=0})})}),hs=function(){return Es(jn,function Ko(){var us=this;return As(Ko,function(xs){return us.g.graph&&us.g.graph.url?xs=dr(xs,vu(us,us.g.graph.url),0):(xs.g=0,xs=void 0),xs})})}(),dr(Oo,tt.all([Do,zo,hs]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return cr=ur.filter(function(Ko){return Ko.simd===void 0||Ko.simd&&Lr||!Ko.simd&&!Lr}).map(function(Ko){return jn.locateFile(Ko.url,jn.S)}),importScripts.apply(null,kn(cr)),dr(Oo,createMediapipeSolutionsWasm(Module),6);case 6:en.h=Oo.h,en.l=new OffscreenCanvas(1,1),en.h.canvas=en.l,Ir=en.h.GL.createContext(en.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),en.h.GL.makeContextCurrent(Ir),Oo.g=4;break;case 7:if(en.l=document.createElement("canvas"),Ho=en.l.getContext("webgl2",{}),!Ho&&(Ho=en.l.getContext("webgl",{}),!Ho))return alert("Failed to create WebGL canvas context when passing video frame."),Oo.return();en.D=Ho,en.h.canvas=en.l,en.h.createContext(en.l,!0,!0,{});case 4:en.i=new en.h.SolutionWasm,en.R=!1,Oo.g=0}})})}function sp(Dt){return Es(Dt,function qt(){var en=this,jn,ur,Lr,cr,Ir,Kr,So,zo;return As(qt,function(Do){if(Do.g==1){if(en.g.graph&&en.g.graph.url&&en.P===en.g.graph.url)return Do.return();if(en.o=!0,!en.g.graph||!en.g.graph.url){Do.g=2;return}return en.P=en.g.graph.url,dr(Do,vu(en,en.g.graph.url),3)}for(Do.g!=2&&(jn=Do.h,en.i.loadGraph(jn)),ur=En(Object.keys(en.B)),Lr=ur.next();!Lr.done;Lr=ur.next())cr=Lr.value,en.i.overrideFile(cr,en.B[cr]);if(en.B={},en.g.listeners)for(Ir=En(en.g.listeners),Kr=Ir.next();!Kr.done;Kr=Ir.next())So=Kr.value,_p(en,So);zo=en.j,en.j={},en.setOptions(zo),Do.g=0})})}bt.reset=function(){return Es(this,function Dt(){var qt=this;return As(Dt,function(en){qt.i&&(qt.i.reset(),qt.m={},qt.s={}),en.g=0})})},bt.setOptions=function(Dt,qt){var en=this;if(qt=qt||this.g.options){for(var jn=[],ur=[],Lr={},cr=En(Object.keys(Dt)),Ir=cr.next();!Ir.done;Lr={K:Lr.K,L:Lr.L},Ir=cr.next()){var Kr=Ir.value;Kr in this.j&&this.j[Kr]===Dt[Kr]||(this.j[Kr]=Dt[Kr],Ir=qt[Kr],Ir!==void 0&&(Ir.onChange&&(Lr.K=Ir.onChange,Lr.L=Dt[Kr],jn.push(function(So){return function(){return Es(en,function zo(){var Do,hs=this;return As(zo,function(Ho){if(Ho.g==1)return dr(Ho,So.K(So.L),2);Do=Ho.h,Do===!0&&(hs.o=!0),Ho.g=0})})}}(Lr))),Ir.graphOptionXref&&(Kr={valueNumber:Ir.type===1?Dt[Kr]:0,valueBoolean:Ir.type===0?Dt[Kr]:!1,valueString:Ir.type===2?Dt[Kr]:""},Ir=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Ir.graphOptionXref),Kr),ur.push(Ir))))}(jn.length!==0||ur.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(ur),this.u=(this.u===void 0?[]:this.u).concat(jn))}};function kp(Dt){return Es(Dt,function qt(){var en=this,jn,ur,Lr,cr,Ir,Kr,So;return As(qt,function(zo){switch(zo.g){case 1:if(!en.o)return zo.return();if(!en.u){zo.g=2;break}jn=En(en.u),ur=jn.next();case 3:if(ur.done){zo.g=5;break}return Lr=ur.value,dr(zo,Lr(),4);case 4:ur=jn.next(),zo.g=3;break;case 5:en.u=void 0;case 2:if(en.A){for(cr=new en.h.GraphOptionChangeRequestList,Ir=En(en.A),Kr=Ir.next();!Kr.done;Kr=Ir.next())So=Kr.value,cr.push_back(So);en.i.changeOptions(cr),cr.delete(),en.A=void 0}en.o=!1,zo.g=0}})})}bt.initialize=function(){return Es(this,function Dt(){var qt=this;return As(Dt,function(en){return en.g==1?dr(en,Du(qt),2):en.g!=3?dr(en,sp(qt),3):dr(en,kp(qt),0)})})};function vu(Dt,qt){return Es(Dt,function en(){var jn=this,ur,Lr;return As(en,function(cr){return qt in jn.F?cr.return(jn.F[qt]):(ur=jn.locateFile(qt,""),Lr=fetch(ur).then(function(Ir){return Ir.arrayBuffer()}),jn.F[qt]=Lr,cr.return(Lr))})})}bt.overrideFile=function(Dt,qt){this.i?this.i.overrideFile(Dt,qt):this.B[Dt]=qt},bt.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},bt.send=function(Dt,qt){return Es(this,function en(){var jn=this,ur,Lr,cr,Ir,Kr,So,zo,Do,hs;return As(en,function(Ho){switch(Ho.g){case 1:return jn.g.inputs?(ur=1e3*(qt??performance.now()),dr(Ho,jn.C,2)):Ho.return();case 2:return dr(Ho,jn.initialize(),3);case 3:for(Lr=new jn.h.PacketDataList,cr=En(Object.keys(Dt)),Ir=cr.next();!Ir.done;Ir=cr.next())if(Kr=Ir.value,So=jn.g.inputs[Kr]){e:{var Oo=jn,Ko=Dt[Kr];switch(So.type){case"video":var us=Oo.m[So.stream];if(us||(us=new Nu(Oo.h,Oo.D),Oo.m[So.stream]=us),Oo=us,Oo.l===0&&(Oo.l=Oo.h.createTexture()),typeof HTMLVideoElement<"u"&&Ko instanceof HTMLVideoElement){var xs=Ko.videoWidth;us=Ko.videoHeight}else typeof HTMLImageElement<"u"&&Ko instanceof HTMLImageElement?(xs=Ko.naturalWidth,us=Ko.naturalHeight):(xs=Ko.width,us=Ko.height);us={glName:Oo.l,width:xs,height:us},xs=Oo.g,xs.canvas.width=us.width,xs.canvas.height=us.height,xs.activeTexture(xs.TEXTURE0),Oo.h.bindTexture2d(Oo.l),xs.texImage2D(xs.TEXTURE_2D,0,xs.RGBA,xs.RGBA,xs.UNSIGNED_BYTE,Ko),Oo.h.bindTexture2d(0),Oo=us;break e;case"detections":for(us=Oo.m[So.stream],us||(us=new Dp(Oo.h),Oo.m[So.stream]=us),Oo=us,Oo.data||(Oo.data=new Oo.g.DetectionListData),Oo.data.reset(Ko.length),us=0;us<Ko.length;++us){xs=Ko[us];var Gs=Oo.data,Ds=Gs.setBoundingBox,Zl=us,Pt=xs.T,Ut=new Ol;as(Ut,1,Pt.Z),as(Ut,2,Pt.$),as(Ut,3,Pt.height),as(Ut,4,Pt.width),as(Ut,5,Pt.rotation),as(Ut,6,Pt.X);var zt=Pt=new Cl;ss(zt,1,bs(Ut,1)),ss(zt,2,bs(Ut,2)),ss(zt,3,bs(Ut,3)),ss(zt,4,bs(Ut,4)),ss(zt,5,bs(Ut,5));var On=bs(Ut,6);if(On!=null&&On!=null){Hs(zt.g,48);var Kn=zt.g,fr=On;On=0>fr,fr=Math.abs(fr);var $n=fr>>>0;for(fr=Math.floor((fr-$n)/4294967296),fr>>>=0,On&&(fr=~fr>>>0,$n=(~$n>>>0)+1,4294967295<$n&&($n=0,fr++,4294967295<fr&&(fr=0))),Ls=$n,Sl=fr,On=Ls,$n=Sl;0<$n||127<On;)Kn.push(On&127|128),On=(On>>>7|$n<<25)>>>0,$n>>>=7;Kn.push(On)}if(Rl(Ut,zt),Pt=zs(Pt),Ds.call(Gs,Zl,Pt),xs.O)for(Gs=0;Gs<xs.O.length;++Gs)Ut=xs.O[Gs],zt=!!Ut.visibility,Ds=Oo.data,Zl=Ds.addNormalizedLandmark,Pt=us,Ut=Object.assign(Object.assign({},Ut),{visibility:zt?Ut.visibility:0}),zt=new Os,as(zt,1,Ut.x),as(zt,2,Ut.y),as(zt,3,Ut.z),Ut.visibility&&as(zt,4,Ut.visibility),Kn=Ut=new Cl,ss(Kn,1,bs(zt,1)),ss(Kn,2,bs(zt,2)),ss(Kn,3,bs(zt,3)),ss(Kn,4,bs(zt,4)),ss(Kn,5,bs(zt,5)),Rl(zt,Kn),Ut=zs(Ut),Zl.call(Ds,Pt,Ut);if(xs.M)for(Gs=0;Gs<xs.M.length;++Gs){if(Ds=Oo.data,Zl=Ds.addClassification,Pt=us,Ut=xs.M[Gs],zt=new Cr,as(zt,2,Ut.Y),Ut.index&&as(zt,1,Ut.index),Ut.label&&as(zt,3,Ut.label),Ut.displayName&&as(zt,4,Ut.displayName),Kn=Ut=new Cl,$n=bs(zt,1),$n!=null&&$n!=null)if(Hs(Kn.g,8),On=Kn.g,0<=$n)Hs(On,$n);else{for(fr=0;9>fr;fr++)On.push($n&127|128),$n>>=7;On.push(1)}ss(Kn,2,bs(zt,2)),On=bs(zt,3),On!=null&&(On=_d(On),Hs(Kn.g,26),Hs(Kn.g,On.length),tu(Kn,Kn.g.end()),tu(Kn,On)),On=bs(zt,4),On!=null&&(On=_d(On),Hs(Kn.g,34),Hs(Kn.g,On.length),tu(Kn,Kn.g.end()),tu(Kn,On)),Rl(zt,Kn),Ut=zs(Ut),Zl.call(Ds,Pt,Ut)}}Oo=Oo.data;break e;default:Oo={}}}switch(zo=Oo,Do=So.stream,So.type){case"video":Lr.pushTexture2d(Object.assign(Object.assign({},zo),{stream:Do,timestamp:ur}));break;case"detections":hs=zo,hs.stream=Do,hs.timestamp=ur,Lr.pushDetectionList(hs);break;default:throw Error("Unknown input config type: '"+So.type+"'")}}return jn.i.send(Lr),dr(Ho,jn.C,4);case 4:Lr.delete(),Ho.g=0}})})};function ap(Dt,qt,en){return Es(Dt,function jn(){var ur,Lr,cr,Ir,Kr,So,zo=this,Do,hs,Ho,Oo,Ko,us,xs,Gs;return As(jn,function(Ds){switch(Ds.g){case 1:if(!en)return Ds.return(qt);for(ur={},Lr=0,cr=En(Object.keys(en)),Ir=cr.next();!Ir.done;Ir=cr.next())Kr=Ir.value,So=en[Kr],typeof So!="string"&&So.type==="texture"&&qt[So.stream]!==void 0&&++Lr;1<Lr&&(zo.G=!1),Do=En(Object.keys(en)),Ir=Do.next();case 2:if(Ir.done){Ds.g=4;break}if(hs=Ir.value,Ho=en[hs],typeof Ho=="string")return xs=ur,Gs=hs,dr(Ds,Qp(zo,hs,qt[Ho]),14);if(Oo=qt[Ho.stream],Ho.type==="detection_list"){if(Oo){for(var Zl=Oo.getRectList(),Pt=Oo.getLandmarksList(),Ut=Oo.getClassificationsList(),zt=[],On=0;On<Zl.size();++On){var Kn=Zl.get(On);e:{var fr=new Ol;for(Kn=new xl(Kn);$o(Kn);)switch(Kn.i){case 13:var $n=pu(Kn.g);as(fr,1,$n);break;case 21:$n=pu(Kn.g),as(fr,2,$n);break;case 29:$n=pu(Kn.g),as(fr,3,$n);break;case 37:$n=pu(Kn.g),as(fr,4,$n);break;case 45:$n=pu(Kn.g),as(fr,5,$n);break;case 48:for(var br=Kn.g,Wr=128,xt=0,Jt=$n=0;4>Jt&&128<=Wr;Jt++)Wr=br.h[br.g++],xt|=(Wr&127)<<7*Jt;if(128<=Wr&&(Wr=br.h[br.g++],xt|=(Wr&127)<<28,$n|=(Wr&127)>>4),128<=Wr)for(Jt=0;5>Jt&&128<=Wr;Jt++)Wr=br.h[br.g++],$n|=(Wr&127)<<7*Jt+3;128>Wr?(br=xt>>>0,Wr=$n>>>0,($n=Wr&2147483648)&&(br=~br+1>>>0,Wr=~Wr>>>0,br==0&&(Wr=Wr+1>>>0)),br=4294967296*Wr+(br>>>0),$n=$n?-br:br):(br.l=!0,$n=void 0),as(fr,6,$n);break;default:if(!ms(fr,Kn))break e}}fr={Z:ps(fr,1),$:ps(fr,2),height:ps(fr,3),width:ps(fr,4),rotation:ps(fr,5,0),X:go(fr,6)},$n=Pt.get(On);e:for(Kn=new Ro,$n=new xl($n);$o($n);)switch($n.i){case 10:br=os($n,new Os,Is),ks(Kn,br,Os,void 0);break;default:if(!ms(Kn,$n))break e}Kn=Cu(Kn,Os).map(Tu),br=Ut.get(On);e:for($n=new Pr,br=new xl(br);$o(br);)switch(br.i){case 10:$n.addClassification(os(br,new Cr,wr));break;default:if(!ms($n,br))break e}fr={T:fr,O:Kn,M:ru($n)},zt.push(fr)}Zl=zt}else Zl=[];ur[hs]=Zl,Ds.g=7;break}if(Ho.type==="proto_list"){if(Oo){for(Zl=Array(Oo.size()),Pt=0;Pt<Oo.size();Pt++)Zl[Pt]=Oo.get(Pt);Oo.delete()}else Zl=[];ur[hs]=Zl,Ds.g=7;break}if(Oo===void 0){Ds.g=3;break}if(Ho.type==="float_list"){ur[hs]=Oo,Ds.g=7;break}if(Ho.type==="proto"){ur[hs]=Oo,Ds.g=7;break}if(Ho.type!=="texture")throw Error("Unknown output config type: '"+Ho.type+"'");return Ko=zo.s[hs],Ko||(Ko=new Nu(zo.h,zo.D),zo.s[hs]=Ko),dr(Ds,Il(Ko,Oo,zo.G),13);case 13:us=Ds.h,ur[hs]=us;case 7:Ho.transform&&ur[hs]&&(ur[hs]=Ho.transform(ur[hs])),Ds.g=3;break;case 14:xs[Gs]=Ds.h;case 3:Ir=Do.next(),Ds.g=2;break;case 4:return Ds.return(ur)}})})}function Qp(Dt,qt,en){return Es(Dt,function jn(){var ur=this,Lr;return As(jn,function(cr){return typeof en=="number"||en instanceof Uint8Array||en instanceof ur.h.Uint8BlobList?cr.return(en):en instanceof ur.h.Texture2dDataOut?(Lr=ur.s[qt],Lr||(Lr=new Nu(ur.h,ur.D),ur.s[qt]=Lr),cr.return(Il(Lr,en,ur.G))):cr.return(void 0)})})}function _p(Dt,qt){for(var en=qt.name||"$",jn=[].concat(kn(qt.wants)),ur=new Dt.h.StringList,Lr=En(qt.wants),cr=Lr.next();!cr.done;cr=Lr.next())ur.push_back(cr.value);Lr=Dt.h.PacketListener.implement({onResults:function(Ir){for(var Kr={},So=0;So<qt.wants.length;++So)Kr[jn[So]]=Ir.get(So);var zo=Dt.listeners[en];zo&&(Dt.C=ap(Dt,Kr,qt.outs).then(function(Do){Do=zo(Do);for(var hs=0;hs<qt.wants.length;++hs){var Ho=Kr[jn[hs]];typeof Ho=="object"&&Ho.hasOwnProperty&&Ho.hasOwnProperty("delete")&&Ho.delete()}Do&&(Dt.C=Do)}))}}),Dt.i.attachMultiListener(ur,Lr),ur.delete()}bt.onResults=function(Dt,qt){this.listeners[qt||"$"]=Dt},ba("Solution",Ip),ba("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function cp(Dt){switch(Dt===void 0&&(Dt=0),Dt){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function gp(Dt){var qt=this;Dt=Dt||{},this.g=new Ip({locateFile:Dt.locateFile,files:function(en){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:cp(en.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(en){return Es(qt,function jn(){var ur,Lr,cr=this,Ir;return As(jn,function(Kr){return Kr.g==1?(ur=cp(en),Lr="third_party/mediapipe/modules/selfie_segmentation/"+ur,dr(Kr,vu(cr.g,ur),2)):(Ir=Kr.h,cr.g.overrideFile(Lr,Ir),Kr.return(!0))})})}}}})}bt=gp.prototype,bt.close=function(){return this.g.close(),tt.resolve()},bt.onResults=function(Dt){this.g.onResults(Dt)},bt.initialize=function(){return Es(this,function Dt(){var qt=this;return As(Dt,function(en){return dr(en,qt.g.initialize(),0)})})},bt.reset=function(){this.g.reset()},bt.send=function(Dt){return Es(this,function qt(){var en=this;return As(qt,function(jn){return dr(jn,en.g.send(Dt),0)})})},bt.setOptions=function(Dt){this.g.setOptions(Dt)},ba("SelfieSegmentation",gp),ba("VERSION","0.1.1632777926")}).call(wu);const Ou={};(function(){var bt;function vt(Ot){var Bt=0;return function(){return Bt<Ot.length?{done:!1,value:Ot[Bt++]}:{done:!0}}}var Ct=typeof Object.defineProperties=="function"?Object.defineProperty:function(Ot,Bt,rn){return Ot==Array.prototype||Ot==Object.prototype||(Ot[Bt]=rn.value),Ot};function Xt(Ot){Ot=[typeof globalThis=="object"&&globalThis,Ot,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Bt=0;Bt<Ot.length;++Bt){var rn=Ot[Bt];if(rn&&rn.Math==Math)return rn}throw Error("Cannot find global object")}var Yt=Xt(this);function hn(Ot,Bt){if(Bt)e:{var rn=Yt;Ot=Ot.split(".");for(var gn=0;gn<Ot.length-1;gn++){var Fn=Ot[gn];if(!(Fn in rn))break e;rn=rn[Fn]}Ot=Ot[Ot.length-1],gn=rn[Ot],Bt=Bt(gn),Bt!=gn&&Bt!=null&&Ct(rn,Ot,{configurable:!0,writable:!0,value:Bt})}}hn("Symbol",function(Ot){function Bt(Rt){if(this instanceof Bt)throw new TypeError("Symbol is not a constructor");return new rn(gn+(Rt||"")+"_"+Fn++,Rt)}function rn(Rt,Mt){this.g=Rt,Ct(this,"description",{configurable:!0,writable:!0,value:Mt})}if(Ot)return Ot;rn.prototype.toString=function(){return this.g};var gn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Fn=0;return Bt}),hn("Symbol.iterator",function(Ot){if(Ot)return Ot;Ot=Symbol("Symbol.iterator");for(var Bt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),rn=0;rn<Bt.length;rn++){var gn=Yt[Bt[rn]];typeof gn=="function"&&typeof gn.prototype[Ot]!="function"&&Ct(gn.prototype,Ot,{configurable:!0,writable:!0,value:function(){return In(vt(this))}})}return Ot});function In(Ot){return Ot={next:Ot},Ot[Symbol.iterator]=function(){return this},Ot}function En(Ot){var Bt=typeof Symbol<"u"&&Symbol.iterator&&Ot[Symbol.iterator];return Bt?Bt.call(Ot):{next:vt(Ot)}}function kn(Ot){if(!(Ot instanceof Array)){Ot=En(Ot);for(var Bt,rn=[];!(Bt=Ot.next()).done;)rn.push(Bt.value);Ot=rn}return Ot}var mr=typeof Object.create=="function"?Object.create:function(Ot){function Bt(){}return Bt.prototype=Ot,new Bt},Vr;if(typeof Object.setPrototypeOf=="function")Vr=Object.setPrototypeOf;else{var Gr;e:{var Io={a:!0},ko={};try{ko.__proto__=Io,Gr=ko.a;break e}catch{}Gr=!1}Vr=Gr?function(Ot,Bt){if(Ot.__proto__=Bt,Ot.__proto__!==Bt)throw new TypeError(Ot+" is not extensible");return Ot}:null}var Mr=Vr;function Dr(Ot,Bt){if(Ot.prototype=mr(Bt.prototype),Ot.prototype.constructor=Ot,Mr)Mr(Ot,Bt);else for(var rn in Bt)if(rn!="prototype")if(Object.defineProperties){var gn=Object.getOwnPropertyDescriptor(Bt,rn);gn&&Object.defineProperty(Ot,rn,gn)}else Ot[rn]=Bt[rn];Ot.ra=Bt.prototype}function Bo(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Uo(Ot){if(Ot.l)throw new TypeError("Generator is already running");Ot.l=!0}Bo.prototype.s=function(Ot){this.h=Ot};function gs(Ot,Bt){Ot.j={fa:Bt,ga:!0},Ot.g=Ot.o||Ot.u}Bo.prototype.return=function(Ot){this.j={return:Ot},this.g=this.u};function dr(Ot,Bt,rn){return Ot.g=rn,{value:Bt}}function Vu(Ot){this.g=new Bo,this.h=Ot}function Su(Ot,Bt){Uo(Ot.g);var rn=Ot.g.i;return rn?ga(Ot,"return"in rn?rn.return:function(gn){return{value:gn,done:!0}},Bt,Ot.g.return):(Ot.g.return(Bt),fs(Ot))}function ga(Ot,Bt,rn,gn){try{var Fn=Bt.call(Ot.g.i,rn);if(!(Fn instanceof Object))throw new TypeError("Iterator result "+Fn+" is not an object");if(!Fn.done)return Ot.g.l=!1,Fn;var Rt=Fn.value}catch(Mt){return Ot.g.i=null,gs(Ot.g,Mt),fs(Ot)}return Ot.g.i=null,gn.call(Ot.g,Rt),fs(Ot)}function fs(Ot){for(;Ot.g.g;)try{var Bt=Ot.h(Ot.g);if(Bt)return Ot.g.l=!1,{value:Bt.value,done:!1}}catch(rn){Ot.g.h=void 0,gs(Ot.g,rn)}if(Ot.g.l=!1,Ot.g.j){if(Bt=Ot.g.j,Ot.g.j=null,Bt.ga)throw Bt.fa;return{value:Bt.return,done:!0}}return{value:void 0,done:!0}}function Fp(Ot){this.next=function(Bt){return Uo(Ot.g),Ot.g.i?Bt=ga(Ot,Ot.g.i.next,Bt,Ot.g.s):(Ot.g.s(Bt),Bt=fs(Ot)),Bt},this.throw=function(Bt){return Uo(Ot.g),Ot.g.i?Bt=ga(Ot,Ot.g.i.throw,Bt,Ot.g.s):(gs(Ot.g,Bt),Bt=fs(Ot)),Bt},this.return=function(Bt){return Su(Ot,Bt)},this[Symbol.iterator]=function(){return this}}function As(Ot){function Bt(gn){return Ot.next(gn)}function rn(gn){return Ot.throw(gn)}return new tt(function(gn,Fn){function Rt(Mt){Mt.done?gn(Mt.value):tt.resolve(Mt.value).then(Bt,rn).then(Rt,Fn)}Rt(Ot.next())})}function to(Ot){return As(new Fp(new Vu(Ot)))}hn("Promise",function(Ot){function Bt(Mt){this.h=0,this.i=void 0,this.g=[],this.s=!1;var Ht=this.j();try{Mt(Ht.resolve,Ht.reject)}catch(mt){Ht.reject(mt)}}function rn(){this.g=null}function gn(Mt){return Mt instanceof Bt?Mt:new Bt(function(Ht){Ht(Mt)})}if(Ot)return Ot;rn.prototype.h=function(Mt){if(this.g==null){this.g=[];var Ht=this;this.i(function(){Ht.l()})}this.g.push(Mt)};var Fn=Yt.setTimeout;rn.prototype.i=function(Mt){Fn(Mt,0)},rn.prototype.l=function(){for(;this.g&&this.g.length;){var Mt=this.g;this.g=[];for(var Ht=0;Ht<Mt.length;++Ht){var mt=Mt[Ht];Mt[Ht]=null;try{mt()}catch(Zt){this.j(Zt)}}}this.g=null},rn.prototype.j=function(Mt){this.i(function(){throw Mt})},Bt.prototype.j=function(){function Mt(Zt){return function(Ft){mt||(mt=!0,Zt.call(Ht,Ft))}}var Ht=this,mt=!1;return{resolve:Mt(this.D),reject:Mt(this.l)}},Bt.prototype.D=function(Mt){if(Mt===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Mt instanceof Bt)this.H(Mt);else{e:switch(typeof Mt){case"object":var Ht=Mt!=null;break e;case"function":Ht=!0;break e;default:Ht=!1}Ht?this.A(Mt):this.o(Mt)}},Bt.prototype.A=function(Mt){var Ht=void 0;try{Ht=Mt.then}catch(mt){this.l(mt);return}typeof Ht=="function"?this.I(Ht,Mt):this.o(Mt)},Bt.prototype.l=function(Mt){this.u(2,Mt)},Bt.prototype.o=function(Mt){this.u(1,Mt)},Bt.prototype.u=function(Mt,Ht){if(this.h!=0)throw Error("Cannot settle("+Mt+", "+Ht+"): Promise already settled in state"+this.h);this.h=Mt,this.i=Ht,this.h===2&&this.G(),this.B()},Bt.prototype.G=function(){var Mt=this;Fn(function(){if(Mt.C()){var Ht=Yt.console;typeof Ht<"u"&&Ht.error(Mt.i)}},1)},Bt.prototype.C=function(){if(this.s)return!1;var Mt=Yt.CustomEvent,Ht=Yt.Event,mt=Yt.dispatchEvent;return typeof mt>"u"?!0:(typeof Mt=="function"?Mt=new Mt("unhandledrejection",{cancelable:!0}):typeof Ht=="function"?Mt=new Ht("unhandledrejection",{cancelable:!0}):(Mt=Yt.document.createEvent("CustomEvent"),Mt.initCustomEvent("unhandledrejection",!1,!0,Mt)),Mt.promise=this,Mt.reason=this.i,mt(Mt))},Bt.prototype.B=function(){if(this.g!=null){for(var Mt=0;Mt<this.g.length;++Mt)Rt.h(this.g[Mt]);this.g=null}};var Rt=new rn;return Bt.prototype.H=function(Mt){var Ht=this.j();Mt.M(Ht.resolve,Ht.reject)},Bt.prototype.I=function(Mt,Ht){var mt=this.j();try{Mt.call(Ht,mt.resolve,mt.reject)}catch(Zt){mt.reject(Zt)}},Bt.prototype.then=function(Mt,Ht){function mt(wt,Lt){return typeof wt=="function"?function(jt){try{Zt(wt(jt))}catch(ln){Ft(ln)}}:Lt}var Zt,Ft,ht=new Bt(function(wt,Lt){Zt=wt,Ft=Lt});return this.M(mt(Mt,Zt),mt(Ht,Ft)),ht},Bt.prototype.catch=function(Mt){return this.then(void 0,Mt)},Bt.prototype.M=function(Mt,Ht){function mt(){switch(Zt.h){case 1:Mt(Zt.i);break;case 2:Ht(Zt.i);break;default:throw Error("Unexpected state: "+Zt.h)}}var Zt=this;this.g==null?Rt.h(mt):this.g.push(mt),this.s=!0},Bt.resolve=gn,Bt.reject=function(Mt){return new Bt(function(Ht,mt){mt(Mt)})},Bt.race=function(Mt){return new Bt(function(Ht,mt){for(var Zt=En(Mt),Ft=Zt.next();!Ft.done;Ft=Zt.next())gn(Ft.value).M(Ht,mt)})},Bt.all=function(Mt){var Ht=En(Mt),mt=Ht.next();return mt.done?gn([]):new Bt(function(Zt,Ft){function ht(jt){return function(ln){wt[jt]=ln,Lt--,Lt==0&&Zt(wt)}}var wt=[],Lt=0;do wt.push(void 0),Lt++,gn(mt.value).M(ht(wt.length-1),Ft),mt=Ht.next();while(!mt.done)})},Bt});function Lu(Ot,Bt){Ot instanceof String&&(Ot+="");var rn=0,gn=!1,Fn={next:function(){if(!gn&&rn<Ot.length){var Rt=rn++;return{value:Bt(Rt,Ot[Rt]),done:!1}}return gn=!0,{done:!0,value:void 0}}};return Fn[Symbol.iterator]=function(){return Fn},Fn}var Xp=typeof Object.assign=="function"?Object.assign:function(Ot,Bt){for(var rn=1;rn<arguments.length;rn++){var gn=arguments[rn];if(gn)for(var Fn in gn)Object.prototype.hasOwnProperty.call(gn,Fn)&&(Ot[Fn]=gn[Fn])}return Ot};hn("Object.assign",function(Ot){return Ot||Xp}),hn("Object.is",function(Ot){return Ot||function(Bt,rn){return Bt===rn?Bt!==0||1/Bt===1/rn:Bt!==Bt&&rn!==rn}}),hn("Array.prototype.includes",function(Ot){return Ot||function(Bt,rn){var gn=this;gn instanceof String&&(gn=String(gn));var Fn=gn.length;for(rn=rn||0,0>rn&&(rn=Math.max(rn+Fn,0));rn<Fn;rn++){var Rt=gn[rn];if(Rt===Bt||Object.is(Rt,Bt))return!0}return!1}}),hn("String.prototype.includes",function(Ot){return Ot||function(Bt,rn){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Bt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Bt,rn||0)!==-1}}),hn("Array.prototype.keys",function(Ot){return Ot||function(){return Lu(this,function(Bt){return Bt})}});var ba=this||self;function Xo(Ot,Bt){Ot=Ot.split(".");var rn=ba;Ot[0]in rn||typeof rn.execScript>"u"||rn.execScript("var "+Ot[0]);for(var gn;Ot.length&&(gn=Ot.shift());)Ot.length||Bt===void 0?rn[gn]&&rn[gn]!==Object.prototype[gn]?rn=rn[gn]:rn=rn[gn]={}:rn[gn]=Bt}function El(){throw Error("Invalid UTF8")}function hu(Ot,Bt){return Bt=String.fromCharCode.apply(null,Bt),Ot==null?Bt:Ot+Bt}var Bu,pp=typeof TextDecoder<"u",_d,yp=typeof TextEncoder<"u",Eu={},ku=null;function Rp(Ot){var Bt;Bt===void 0&&(Bt=0),Hl(),Bt=Eu[Bt];for(var rn=Array(Math.floor(Ot.length/3)),gn=Bt[64]||"",Fn=0,Rt=0;Fn<Ot.length-2;Fn+=3){var Mt=Ot[Fn],Ht=Ot[Fn+1],mt=Ot[Fn+2],Zt=Bt[Mt>>2];Mt=Bt[(Mt&3)<<4|Ht>>4],Ht=Bt[(Ht&15)<<2|mt>>6],mt=Bt[mt&63],rn[Rt++]=Zt+Mt+Ht+mt}switch(Zt=0,mt=gn,Ot.length-Fn){case 2:Zt=Ot[Fn+1],mt=Bt[(Zt&15)<<2]||gn;case 1:Ot=Ot[Fn],rn[Rt]=Bt[Ot>>2]+Bt[(Ot&3)<<4|Zt>>4]+mt+gn}return rn.join("")}function mp(Ot){var Bt=Ot.length,rn=3*Bt/4;rn%3?rn=Math.floor(rn):"=.".indexOf(Ot[Bt-1])!=-1&&(rn="=.".indexOf(Ot[Bt-2])!=-1?rn-2:rn-1);var gn=new Uint8Array(rn),Fn=0;return Bl(Ot,function(Rt){gn[Fn++]=Rt}),Fn!==rn?gn.subarray(0,Fn):gn}function Bl(Ot,Bt){function rn(mt){for(;gn<Ot.length;){var Zt=Ot.charAt(gn++),Ft=ku[Zt];if(Ft!=null)return Ft;if(!/^[\s\xa0]*$/.test(Zt))throw Error("Unknown base64 encoding at char: "+Zt)}return mt}Hl();for(var gn=0;;){var Fn=rn(-1),Rt=rn(0),Mt=rn(64),Ht=rn(64);if(Ht===64&&Fn===-1)break;Bt(Fn<<2|Rt>>4),Mt!=64&&(Bt(Rt<<4&240|Mt>>2),Ht!=64&&Bt(Mt<<6&192|Ht))}}function Hl(){if(!ku){ku={};for(var Ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Bt=["+/=","+/","-_=","-_.","-_"],rn=0;5>rn;rn++){var gn=Ot.concat(Bt[rn].split(""));Eu[rn]=gn;for(var Fn=0;Fn<gn.length;Fn++){var Rt=gn[Fn];ku[Rt]===void 0&&(ku[Rt]=Fn)}}}}var _f=typeof Uint8Array=="function";function Ku(Ot){return _f&&Ot!=null&&Ot instanceof Uint8Array}var Ls;function Sl(Ot){if(this.L=Ot,Ot!==null&&Ot.length===0)throw Error("ByteString should be constructed with non-empty values")}var Kl=typeof Uint8Array.prototype.slice=="function",ys=0,qs=0;function pu(Ot,Bt){if(Ot.constructor===Uint8Array)return Ot;if(Ot.constructor===ArrayBuffer)return new Uint8Array(Ot);if(Ot.constructor===Array)return new Uint8Array(Ot);if(Ot.constructor===String)return mp(Ot);if(Ot.constructor===Sl)return!Bt&&(Bt=Ot.L)&&Bt.constructor===Uint8Array?Bt:(Bt=Ot.L,Bt=Bt==null||Ku(Bt)?Bt:typeof Bt=="string"?mp(Bt):null,(Ot=Ot.L=Bt)?new Uint8Array(Ot):Ls||(Ls=new Uint8Array(0)));if(Ot instanceof Uint8Array)return new Uint8Array(Ot.buffer,Ot.byteOffset,Ot.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Pl(Ot,Bt){return Error("Invalid wire type: "+Ot+" (at position "+Bt+")")}function ls(){return Error("Failed to read varint, encoding is invalid.")}function Hs(Ot,Bt){Bt=Bt===void 0?{}:Bt,Bt=Bt.v===void 0?!1:Bt.v,this.h=null,this.g=this.i=this.j=0,this.v=Bt,Ot&&xl(this,Ot)}function xl(Ot,Bt){Ot.h=pu(Bt,Ot.v),Ot.j=0,Ot.i=Ot.h.length,Ot.g=Ot.j}Hs.prototype.reset=function(){this.g=this.j};function $o(Ot){if(Ot.g>Ot.i)throw Error("Tried to read past the end of the data "+Ot.g+" > "+Ot.i)}function _a(Ot){var Bt=Ot.h,rn=Bt[Ot.g],gn=rn&127;if(128>rn)return Ot.g+=1,$o(Ot),gn;if(rn=Bt[Ot.g+1],gn|=(rn&127)<<7,128>rn)return Ot.g+=2,$o(Ot),gn;if(rn=Bt[Ot.g+2],gn|=(rn&127)<<14,128>rn)return Ot.g+=3,$o(Ot),gn;if(rn=Bt[Ot.g+3],gn|=(rn&127)<<21,128>rn)return Ot.g+=4,$o(Ot),gn;if(rn=Bt[Ot.g+4],Ot.g+=5,gn|=(rn&15)<<28,128>rn)return $o(Ot),gn;if(128<=Bt[Ot.g++]&&128<=Bt[Ot.g++]&&128<=Bt[Ot.g++]&&128<=Bt[Ot.g++]&&128<=Bt[Ot.g++])throw ls();return $o(Ot),gn}var os=[];function Xs(){this.g=[]}Xs.prototype.length=function(){return this.g.length},Xs.prototype.end=function(){var Ot=this.g;return this.g=[],Ot};function Cl(Ot,Bt){for(;127<Bt;)Ot.g.push(Bt&127|128),Bt>>>=7;Ot.g.push(Bt)}function tu(Ot){var Bt={},rn=Bt.W===void 0?!1:Bt.W;this.l={v:Bt.v===void 0?!1:Bt.v},this.W=rn,Bt=this.l,os.length?(rn=os.pop(),Bt&&(rn.v=Bt.v),Ot&&xl(rn,Ot),Ot=rn):Ot=new Hs(Ot,Bt),this.g=Ot,this.j=this.g.g,this.h=this.i=-1}tu.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function zs(Ot){var Bt=Ot.g;if(Bt.g==Bt.i)return!1;Ot.j=Ot.g.g;var rn=_a(Ot.g)>>>0;if(Bt=rn>>>3,rn&=7,!(0<=rn&&5>=rn))throw Pl(rn,Ot.j);if(1>Bt)throw Error("Invalid field number: "+Bt+" (at position "+Ot.j+")");return Ot.i=Bt,Ot.h=rn,!0}function ss(Ot){switch(Ot.h){case 0:if(Ot.h!=0)ss(Ot);else e:{Ot=Ot.g;for(var Bt=Ot.g,rn=Bt+10;Bt<rn;)if(!(Ot.h[Bt++]&128)){Ot.g=Bt,$o(Ot);break e}throw ls()}break;case 1:Ot=Ot.g,Ot.g+=8,$o(Ot);break;case 2:Ot.h!=2?ss(Ot):(Bt=_a(Ot.g)>>>0,Ot=Ot.g,Ot.g+=Bt,$o(Ot));break;case 5:Ot=Ot.g,Ot.g+=4,$o(Ot);break;case 3:Bt=Ot.i;do{if(!zs(Ot))throw Error("Unmatched start-group tag: stream EOF");if(Ot.h==4){if(Ot.i!=Bt)throw Error("Unmatched end-group tag");break}ss(Ot)}while(1);break;default:throw Pl(Ot.h,Ot.j)}}var Yl=[];function zl(){this.i=[],this.h=0,this.g=new Xs}function _c(Ot,Bt){Bt.length!==0&&(Ot.i.push(Bt),Ot.h+=Bt.length)}function zu(Ot,Bt){if(Bt=Bt.ca){_c(Ot,Ot.g.end());for(var rn=0;rn<Bt.length;rn++)_c(Ot,Bt[rn])}}var mu=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Jl(Ot,Bt){Object.isFrozen(Ot)||(mu?Ot[mu]|=Bt:Ot.N!==void 0?Ot.N|=Bt:Object.defineProperties(Ot,{N:{value:Bt,configurable:!0,writable:!0,enumerable:!1}}))}function gu(Ot){var Bt;return mu?Bt=Ot[mu]:Bt=Ot.N,Bt??0}function Ys(Ot){return Jl(Ot,1),Ot}function Tl(Ot){return Array.isArray(Ot)?!!(gu(Ot)&2):!1}function Bs(Ot){if(!Array.isArray(Ot))throw Error("cannot mark non-array as immutable");Jl(Ot,2)}function bs(Ot){return Ot!==null&&typeof Ot=="object"&&!Array.isArray(Ot)&&Ot.constructor===Object}var $l=Object.freeze(Ys([]));function ps(Ot){if(Tl(Ot.m))throw Error("Cannot mutate an immutable Message")}var as=typeof Symbol<"u"&&typeof Symbol.hasInstance<"u";function Cu(Ot){return{value:Ot,configurable:!1,writable:!1,enumerable:!1}}function ks(Ot,Bt,rn){return Bt===-1?null:Bt>=Ot.i?Ot.g?Ot.g[Bt]:void 0:rn!==void 0&&rn&&Ot.g&&(rn=Ot.g[Bt],rn!=null)?rn:Ot.m[Bt+Ot.h]}function Fo(Ot,Bt,rn,gn){gn=gn===void 0?!1:gn,ps(Ot),Bt<Ot.i&&!gn?Ot.m[Bt+Ot.h]=rn:(Ot.g||(Ot.g=Ot.m[Ot.i+Ot.h]={}))[Bt]=rn}function go(Ot,Bt,rn,gn){rn=rn===void 0?!0:rn,gn=gn===void 0?!1:gn;var Fn=ks(Ot,Bt,gn);return Fn==null&&(Fn=$l),Tl(Ot.m)?rn&&(Bs(Fn),Object.freeze(Fn)):(Fn===$l||Tl(Fn))&&(Fn=Ys(Fn.slice()),Fo(Ot,Bt,Fn,gn)),Fn}function Ss(Ot,Bt,rn){return Ot=ks(Ot,Bt),Ot=Ot==null?Ot:+Ot,Ot??(rn===void 0?0:rn)}function Rl(Ot,Bt,rn,gn){Ot.j||(Ot.j={});var Fn=Tl(Ot.m),Rt=Ot.j[rn];if(!Rt){gn=go(Ot,rn,!0,gn===void 0?!1:gn),Rt=[],Fn=Fn||Tl(gn);for(var Mt=0;Mt<gn.length;Mt++)Rt[Mt]=new Bt(gn[Mt]),Fn&&Bs(Rt[Mt].m);Fn&&(Bs(Rt),Object.freeze(Rt)),Ot.j[rn]=Rt}return Rt}function ms(Ot,Bt,rn,gn,Fn){var Rt=Rt===void 0?!1:Rt;return ps(Ot),Rt=Rl(Ot,rn,Bt,Rt),rn=gn||new rn,Ot=go(Ot,Bt),Fn!=null?(Rt.splice(Fn,0,rn),Ot.splice(Fn,0,rn.m)):(Rt.push(rn),Ot.push(rn.m)),rn}function Es(Ot,Bt){return Ot=ks(Ot,Bt),Ot??0}function Cr(Ot,Bt){return Ot=ks(Ot,Bt),Ot??""}function wr(Ot){switch(typeof Ot){case"number":return isFinite(Ot)?Ot:String(Ot);case"object":if(Ot&&!Array.isArray(Ot)){if(Ku(Ot))return Rp(Ot);if(Ot instanceof Sl){var Bt=Ot.L;return Bt=Bt==null||typeof Bt=="string"?Bt:_f&&Bt instanceof Uint8Array?Rp(Bt):null,(Ot.L=Bt)||""}}}return Ot}function Pr(Ot){var Bt=Is;return Bt=Bt===void 0?Ro:Bt,Os(Ot,Bt)}function cs(Ot,Bt){if(Ot!=null){if(Array.isArray(Ot))Ot=Os(Ot,Bt);else if(bs(Ot)){var rn={},gn;for(gn in Ot)rn[gn]=cs(Ot[gn],Bt);Ot=rn}else Ot=Bt(Ot);return Ot}}function Os(Ot,Bt){for(var rn=Ot.slice(),gn=0;gn<rn.length;gn++)rn[gn]=cs(rn[gn],Bt);return Array.isArray(Ot)&&gu(Ot)&1&&Ys(rn),rn}function Is(Ot){return Ot&&typeof Ot=="object"&&Ot.toJSON?Ot.toJSON():(Ot=wr(Ot),Array.isArray(Ot)?Pr(Ot):Ot)}function Ro(Ot){return Ku(Ot)?new Uint8Array(Ot):Ot}function Ns(Ot,Bt,rn){Ot||(Ot=Ol),Ol=null;var gn=this.constructor.h;Ot||(Ot=gn?[gn]:[]),this.h=(gn?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=Ot;e:{if(gn=this.m.length,Ot=gn-1,gn&&(gn=this.m[Ot],bs(gn))){this.i=Ot-this.h,this.g=gn;break e}Bt!==void 0&&-1<Bt?(this.i=Math.max(Bt,Ot+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(rn)for(Bt=0;Bt<rn.length;Bt++)if(Ot=rn[Bt],Ot<this.i)Ot+=this.h,(gn=this.m[Ot])?Array.isArray(gn)&&Ys(gn):this.m[Ot]=$l;else{gn=this.g||(this.g=this.m[this.i+this.h]={});var Fn=gn[Ot];Fn?Array.isArray(Fn)&&Ys(Fn):gn[Ot]=$l}}Ns.prototype.toJSON=function(){return Pr(this.m)},Ns.prototype.toString=function(){return this.m.toString()};var Ol;function nu(){Ns.apply(this,arguments)}if(Dr(nu,Ns),as){var ru={};Object.defineProperties(nu,(ru[Symbol.hasInstance]=Cu(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),ru))}function Tu(Ot,Bt,rn){if(rn){var gn={},Fn;for(Fn in rn){var Rt=rn[Fn],Mt=Rt.ja;Mt||(gn.F=Rt.pa||Rt.ha.P,Rt.ba?(gn.U=_h(Rt.ba),Mt=function(Ht){return function(mt,Zt,Ft){return Ht.F(mt,Zt,Ft,Ht.U)}}(gn)):Rt.da?(gn.T=Fl(Rt.X.g,Rt.da),Mt=function(Ht){return function(mt,Zt,Ft){return Ht.F(mt,Zt,Ft,Ht.T)}}(gn)):Mt=gn.F,Rt.ja=Mt),Mt(Bt,Ot,Rt.X),gn={F:gn.F,U:gn.U,T:gn.T}}}zu(Bt,Ot)}var Nu=Symbol();function Il(Ot,Bt,rn){return Ot[Nu]||(Ot[Nu]=function(gn,Fn){return Bt(gn,Fn,rn)})}function iu(Ot){var Bt=Ot[Nu];if(!Bt){var rn=Dt(Ot);Bt=function(gn,Fn){return qt(gn,Fn,rn)},Ot[Nu]=Bt}return Bt}function Dp(Ot){var Bt=Ot.ba;if(Bt)return iu(Bt);if(Bt=Ot.oa)return Il(Ot.X.g,Bt,Ot.da)}function ou(Ot){var Bt=Dp(Ot),rn=Ot.X,gn=Ot.ha.O;return Bt?function(Fn,Rt){return gn(Fn,Rt,rn,Bt)}:function(Fn,Rt){return gn(Fn,Rt,rn)}}function Al(Ot,Bt,rn,gn,Fn,Rt){Ot=Ot();var Mt=0;for(Ot.length&&typeof Ot[0]!="number"&&(rn(Bt,Ot[0]),Mt++);Mt<Ot.length;){rn=Ot[Mt++];for(var Ht=Mt+1;Ht<Ot.length&&typeof Ot[Ht]!="number";)Ht++;var mt=Ot[Mt++];switch(Ht-=Mt,Ht){case 0:gn(Bt,rn,mt);break;case 1:gn(Bt,rn,mt,Ot[Mt++]);break;case 2:Fn(Bt,rn,mt,Ot[Mt++],Ot[Mt++]);break;case 3:Ht=Ot[Mt++];var Zt=Ot[Mt++],Ft=Ot[Mt++];Array.isArray(Ft)?Fn(Bt,rn,mt,Ht,Zt,Ft):Rt(Bt,rn,mt,Ht,Zt,Ft);break;case 4:Rt(Bt,rn,mt,Ot[Mt++],Ot[Mt++],Ot[Mt++],Ot[Mt++]);break;default:throw Error("unexpected number of binary field arguments: "+Ht)}}return Bt}var Xu=Symbol();function _h(Ot){var Bt=Ot[Xu];if(!Bt){var rn=vu(Ot);Bt=function(gn,Fn){return jn(gn,Fn,rn)},Ot[Xu]=Bt}return Bt}function Fl(Ot,Bt){var rn=Ot[Xu];return rn||(rn=function(gn,Fn){return Tu(gn,Fn,Bt)},Ot[Xu]=rn),rn}var Ip=Symbol();function su(Ot,Bt){Ot.push(Bt)}function Du(Ot,Bt,rn){Ot.push(Bt,rn.P)}function sp(Ot,Bt,rn,gn,Fn){var Rt=_h(Fn),Mt=rn.P;Ot.push(Bt,function(Ht,mt,Zt){return Mt(Ht,mt,Zt,gn,Rt)})}function kp(Ot,Bt,rn,gn,Fn,Rt){var Mt=Fl(gn,Rt),Ht=rn.P;Ot.push(Bt,function(mt,Zt,Ft){return Ht(mt,Zt,Ft,gn,Mt)})}function vu(Ot){var Bt=Ot[Ip];return Bt||Al(Ot,Ot[Ip]=[],su,Du,sp,kp)}var ap=Symbol();function Qp(Ot,Bt){Ot[0]=Bt}function _p(Ot,Bt,rn,gn){var Fn=rn.O;Ot[Bt]=gn?function(Rt,Mt,Ht){return Fn(Rt,Mt,Ht,gn)}:Fn}function cp(Ot,Bt,rn,gn,Fn,Rt){var Mt=rn.O,Ht=iu(Fn);Ot[Bt]=function(mt,Zt,Ft){return Mt(mt,Zt,Ft,gn,Ht,Rt)}}function gp(Ot,Bt,rn,gn,Fn,Rt,Mt){var Ht=rn.O,mt=Il(gn,Fn,Rt);Ot[Bt]=function(Zt,Ft,ht){return Ht(Zt,Ft,ht,gn,mt,Mt)}}function Dt(Ot){var Bt=Ot[ap];return Bt||Al(Ot,Ot[ap]={},Qp,_p,cp,gp)}function qt(Ot,Bt,rn){for(;zs(Bt)&&Bt.h!=4;){var gn=Bt.i,Fn=rn[gn];if(!Fn){var Rt=rn[0];Rt&&(Rt=Rt[gn])&&(Fn=rn[gn]=ou(Rt))}if((!Fn||!Fn(Bt,Ot,gn))&&(Fn=Bt,gn=Ot,Rt=Fn.j,ss(Fn),!Fn.W)){var Mt=Fn.g.h;Fn=Fn.g.g,Fn=Rt===Fn?Ls||(Ls=new Uint8Array(0)):Kl?Mt.slice(Rt,Fn):new Uint8Array(Mt.subarray(Rt,Fn)),(Rt=gn.ca)?Rt.push(Fn):gn.ca=[Fn]}}return Ot}function en(Ot,Bt,rn){if(Yl.length){var gn=Yl.pop();Ot&&(xl(gn.g,Ot),gn.i=-1,gn.h=-1),Ot=gn}else Ot=new tu(Ot);try{return qt(new Bt,Ot,Dt(rn))}finally{Bt=Ot.g,Bt.h=null,Bt.j=0,Bt.i=0,Bt.g=0,Bt.v=!1,Ot.i=-1,Ot.h=-1,100>Yl.length&&Yl.push(Ot)}}function jn(Ot,Bt,rn){for(var gn=rn.length,Fn=gn%2==1,Rt=Fn?1:0;Rt<gn;Rt+=2)(0,rn[Rt+1])(Bt,Ot,rn[Rt]);Tu(Ot,Bt,Fn?rn[0]:void 0)}function ur(Ot,Bt){var rn=new zl;jn(Ot,rn,vu(Bt)),_c(rn,rn.g.end()),Ot=new Uint8Array(rn.h),Bt=rn.i;for(var gn=Bt.length,Fn=0,Rt=0;Rt<gn;Rt++){var Mt=Bt[Rt];Ot.set(Mt,Fn),Fn+=Mt.length}return rn.i=[Ot],Ot}function Lr(Ot,Bt){return{O:Ot,P:Bt}}var cr=Lr(function(Ot,Bt,rn){if(Ot.h!==5)return!1;Ot=Ot.g;var gn=Ot.h[Ot.g],Fn=Ot.h[Ot.g+1],Rt=Ot.h[Ot.g+2],Mt=Ot.h[Ot.g+3];return Ot.g+=4,$o(Ot),Fn=(gn<<0|Fn<<8|Rt<<16|Mt<<24)>>>0,Ot=2*(Fn>>31)+1,gn=Fn>>>23&255,Fn&=8388607,Fo(Bt,rn,gn==255?Fn?NaN:1/0*Ot:gn==0?Ot*Math.pow(2,-149)*Fn:Ot*Math.pow(2,gn-150)*(Fn+Math.pow(2,23))),!0},function(Ot,Bt,rn){if(Bt=ks(Bt,rn),Bt!=null){Cl(Ot.g,8*rn+5),Ot=Ot.g;var gn=Bt;gn=(rn=0>gn?1:0)?-gn:gn,gn===0?0<1/gn?ys=qs=0:(qs=0,ys=2147483648):isNaN(gn)?(qs=0,ys=2147483647):34028234663852886e22<gn?(qs=0,ys=(rn<<31|2139095040)>>>0):11754943508222875e-54>gn?(gn=Math.round(gn/Math.pow(2,-149)),qs=0,ys=(rn<<31|gn)>>>0):(Bt=Math.floor(Math.log(gn)/Math.LN2),gn*=Math.pow(2,-Bt),gn=Math.round(8388608*gn),16777216<=gn&&++Bt,qs=0,ys=(rn<<31|Bt+127<<23|gn&8388607)>>>0),rn=ys,Ot.g.push(rn>>>0&255),Ot.g.push(rn>>>8&255),Ot.g.push(rn>>>16&255),Ot.g.push(rn>>>24&255)}}),Ir=Lr(function(Ot,Bt,rn){if(Ot.h!==0)return!1;for(var gn=Ot.g,Fn=128,Rt=0,Mt=Ot=0;4>Mt&&128<=Fn;Mt++)Fn=gn.h[gn.g++],$o(gn),Rt|=(Fn&127)<<7*Mt;if(128<=Fn&&(Fn=gn.h[gn.g++],$o(gn),Rt|=(Fn&127)<<28,Ot|=(Fn&127)>>4),128<=Fn)for(Mt=0;5>Mt&&128<=Fn;Mt++)Fn=gn.h[gn.g++],$o(gn),Ot|=(Fn&127)<<7*Mt+3;if(128>Fn)gn=Rt>>>0,Fn=Ot>>>0,(Ot=Fn&2147483648)&&(gn=~gn+1>>>0,Fn=~Fn>>>0,gn==0&&(Fn=Fn+1>>>0)),gn=4294967296*Fn+(gn>>>0);else throw ls();return Fo(Bt,rn,Ot?-gn:gn),!0},function(Ot,Bt,rn){if(Bt=ks(Bt,rn),Bt!=null&&Bt!=null){Cl(Ot.g,8*rn),Ot=Ot.g;var gn=Bt;for(rn=0>gn,gn=Math.abs(gn),Bt=gn>>>0,gn=Math.floor((gn-Bt)/4294967296),gn>>>=0,rn&&(gn=~gn>>>0,Bt=(~Bt>>>0)+1,4294967295<Bt&&(Bt=0,gn++,4294967295<gn&&(gn=0))),ys=Bt,qs=gn,rn=ys,Bt=qs;0<Bt||127<rn;)Ot.g.push(rn&127|128),rn=(rn>>>7|Bt<<25)>>>0,Bt>>>=7;Ot.g.push(rn)}}),Kr=Lr(function(Ot,Bt,rn){return Ot.h!==0?!1:(Fo(Bt,rn,_a(Ot.g)),!0)},function(Ot,Bt,rn){if(Bt=ks(Bt,rn),Bt!=null&&Bt!=null)if(Cl(Ot.g,8*rn),Ot=Ot.g,rn=Bt,0<=rn)Cl(Ot,rn);else{for(Bt=0;9>Bt;Bt++)Ot.g.push(rn&127|128),rn>>=7;Ot.g.push(1)}}),So=Lr(function(Ot,Bt,rn){if(Ot.h!==2)return!1;var gn=_a(Ot.g)>>>0;Ot=Ot.g;var Fn=Ot.g;Ot.g+=gn,$o(Ot),Ot=Ot.h;var Rt;if(pp)(Rt=Bu)||(Rt=Bu=new TextDecoder("utf-8",{fatal:!0})),Rt=Rt.decode(Ot.subarray(Fn,Fn+gn));else{gn=Fn+gn;for(var Mt=[],Ht=null,mt,Zt,Ft;Fn<gn;)mt=Ot[Fn++],128>mt?Mt.push(mt):224>mt?Fn>=gn?El():(Zt=Ot[Fn++],194>mt||(Zt&192)!==128?(Fn--,El()):Mt.push((mt&31)<<6|Zt&63)):240>mt?Fn>=gn-1?El():(Zt=Ot[Fn++],(Zt&192)!==128||mt===224&&160>Zt||mt===237&&160<=Zt||((Rt=Ot[Fn++])&192)!==128?(Fn--,El()):Mt.push((mt&15)<<12|(Zt&63)<<6|Rt&63)):244>=mt?Fn>=gn-2?El():(Zt=Ot[Fn++],(Zt&192)!==128||(mt<<28)+(Zt-144)>>30||((Rt=Ot[Fn++])&192)!==128||((Ft=Ot[Fn++])&192)!==128?(Fn--,El()):(mt=(mt&7)<<18|(Zt&63)<<12|(Rt&63)<<6|Ft&63,mt-=65536,Mt.push((mt>>10&1023)+55296,(mt&1023)+56320))):El(),8192<=Mt.length&&(Ht=hu(Ht,Mt),Mt.length=0);Rt=hu(Ht,Mt)}return Fo(Bt,rn,Rt),!0},function(Ot,Bt,rn){if(Bt=ks(Bt,rn),Bt!=null){var gn=!1;if(gn=gn===void 0?!1:gn,yp){if(gn&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(Bt))throw Error("Found an unpaired surrogate");Bt=(_d||(_d=new TextEncoder)).encode(Bt)}else{for(var Fn=0,Rt=new Uint8Array(3*Bt.length),Mt=0;Mt<Bt.length;Mt++){var Ht=Bt.charCodeAt(Mt);if(128>Ht)Rt[Fn++]=Ht;else{if(2048>Ht)Rt[Fn++]=Ht>>6|192;else{if(55296<=Ht&&57343>=Ht){if(56319>=Ht&&Mt<Bt.length){var mt=Bt.charCodeAt(++Mt);if(56320<=mt&&57343>=mt){Ht=1024*(Ht-55296)+mt-56320+65536,Rt[Fn++]=Ht>>18|240,Rt[Fn++]=Ht>>12&63|128,Rt[Fn++]=Ht>>6&63|128,Rt[Fn++]=Ht&63|128;continue}else Mt--}if(gn)throw Error("Found an unpaired surrogate");Ht=65533}Rt[Fn++]=Ht>>12|224,Rt[Fn++]=Ht>>6&63|128}Rt[Fn++]=Ht&63|128}}Bt=Rt.subarray(0,Fn)}Cl(Ot.g,8*rn+2),Cl(Ot.g,Bt.length),_c(Ot,Ot.g.end()),_c(Ot,Bt)}}),zo=Lr(function(Ot,Bt,rn,gn,Fn){if(Ot.h!==2)return!1;Bt=ms(Bt,rn,gn),rn=Ot.g.i,gn=_a(Ot.g)>>>0;var Rt=Ot.g.g+gn,Mt=Rt-rn;if(0>=Mt&&(Ot.g.i=Rt,Fn(Bt,Ot),Mt=Rt-Ot.g.g),Mt)throw Error("Message parsing ended unexpectedly. Expected to read "+(gn+" bytes, instead read "+(gn-Mt)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return Ot.g.g=Rt,Ot.g.i=rn,!0},function(Ot,Bt,rn,gn,Fn){if(Bt=Rl(Bt,gn,rn),Bt!=null)for(gn=0;gn<Bt.length;gn++){var Rt=Ot;Cl(Rt.g,8*rn+2);var Mt=Rt.g.end();_c(Rt,Mt),Mt.push(Rt.h),Rt=Mt,Fn(Bt[gn],Ot),Mt=Ot;var Ht=Rt.pop();for(Ht=Mt.h+Mt.g.length()-Ht;127<Ht;)Rt.push(Ht&127|128),Ht>>>=7,Mt.h++;Rt.push(Ht),Mt.h++}});function Do(){nu.apply(this,arguments)}if(Dr(Do,nu),as){var hs={};Object.defineProperties(Do,(hs[Symbol.hasInstance]=Cu(Object[Symbol.hasInstance]),hs))}function Ho(Ot){Do.call(this,Ot)}Dr(Ho,Do);function Oo(){return[1,Kr,2,cr,3,So,4,So]}function Ko(Ot){Do.call(this,Ot,-1,xs)}Dr(Ko,Do),Ko.prototype.addClassification=function(Ot,Bt){return ms(this,1,Ho,Ot,Bt),this};function us(){return[1,zo,Ho,Oo]}var xs=[1];function Gs(Ot){Do.call(this,Ot)}Dr(Gs,Do);function Ds(){return[1,cr,2,cr,3,cr,4,cr,5,cr]}function Zl(Ot){Do.call(this,Ot,-1,Ut)}Dr(Zl,Do);function Pt(){return[1,zo,Gs,Ds]}var Ut=[1];function zt(Ot){Do.call(this,Ot)}Dr(zt,Do);function On(){return[1,cr,2,cr,3,cr,4,cr,5,cr,6,Ir]}function Kn(Ot,Bt,rn){if(rn=Ot.createShader(rn===0?Ot.VERTEX_SHADER:Ot.FRAGMENT_SHADER),Ot.shaderSource(rn,Bt),Ot.compileShader(rn),!Ot.getShaderParameter(rn,Ot.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+Ot.getShaderInfoLog(rn));return rn}function fr(Ot){return Rl(Ot,Ho,1).map(function(Bt){return{index:Es(Bt,1),score:Ss(Bt,2),label:ks(Bt,3)!=null?Cr(Bt,3):void 0,displayName:ks(Bt,4)!=null?Cr(Bt,4):void 0}})}function $n(Ot){return{x:Ss(Ot,1),y:Ss(Ot,2),z:Ss(Ot,3),visibility:ks(Ot,4)!=null?Ss(Ot,4):void 0}}function br(Ot){return Ot.map(function(Bt){return Rl(en(Bt,Zl,Pt),Gs,1).map($n)})}function Wr(Ot,Bt){this.h=Ot,this.g=Bt,this.l=0}function xt(Ot,Bt,rn){return Jt(Ot,Bt),typeof Ot.g.canvas.transferToImageBitmap=="function"?tt.resolve(Ot.g.canvas.transferToImageBitmap()):rn?tt.resolve(Ot.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(Ot.g.canvas):(Ot.i===void 0&&(Ot.i=document.createElement("canvas")),new tt(function(gn){Ot.i.height=Ot.g.canvas.height,Ot.i.width=Ot.g.canvas.width,Ot.i.getContext("2d",{}).drawImage(Ot.g.canvas,0,0,Ot.g.canvas.width,Ot.g.canvas.height),gn(Ot.i)}))}function Jt(Ot,Bt){var rn=Ot.g;if(Ot.o===void 0){var gn=Kn(rn,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Fn=Kn(rn,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Rt=rn.createProgram();if(rn.attachShader(Rt,gn),rn.attachShader(Rt,Fn),rn.linkProgram(Rt),!rn.getProgramParameter(Rt,rn.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+rn.getProgramInfoLog(Rt));gn=Ot.o=Rt,rn.useProgram(gn),Fn=rn.getUniformLocation(gn,"sampler0"),Ot.j={K:rn.getAttribLocation(gn,"aVertex"),J:rn.getAttribLocation(gn,"aTex"),qa:Fn},Ot.u=rn.createBuffer(),rn.bindBuffer(rn.ARRAY_BUFFER,Ot.u),rn.enableVertexAttribArray(Ot.j.K),rn.vertexAttribPointer(Ot.j.K,2,rn.FLOAT,!1,0,0),rn.bufferData(rn.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),rn.STATIC_DRAW),rn.bindBuffer(rn.ARRAY_BUFFER,null),Ot.s=rn.createBuffer(),rn.bindBuffer(rn.ARRAY_BUFFER,Ot.s),rn.enableVertexAttribArray(Ot.j.J),rn.vertexAttribPointer(Ot.j.J,2,rn.FLOAT,!1,0,0),rn.bufferData(rn.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),rn.STATIC_DRAW),rn.bindBuffer(rn.ARRAY_BUFFER,null),rn.uniform1i(Fn,0)}gn=Ot.j,rn.useProgram(Ot.o),rn.canvas.width=Bt.width,rn.canvas.height=Bt.height,rn.viewport(0,0,Bt.width,Bt.height),rn.activeTexture(rn.TEXTURE0),Ot.h.bindTexture2d(Bt.glName),rn.enableVertexAttribArray(gn.K),rn.bindBuffer(rn.ARRAY_BUFFER,Ot.u),rn.vertexAttribPointer(gn.K,2,rn.FLOAT,!1,0,0),rn.enableVertexAttribArray(gn.J),rn.bindBuffer(rn.ARRAY_BUFFER,Ot.s),rn.vertexAttribPointer(gn.J,2,rn.FLOAT,!1,0,0),rn.bindFramebuffer(rn.DRAW_FRAMEBUFFER?rn.DRAW_FRAMEBUFFER:rn.FRAMEBUFFER,null),rn.clearColor(0,0,0,0),rn.clear(rn.COLOR_BUFFER_BIT),rn.colorMask(!0,!0,!0,!0),rn.drawArrays(rn.TRIANGLE_FAN,0,4),rn.disableVertexAttribArray(gn.K),rn.disableVertexAttribArray(gn.J),rn.bindBuffer(rn.ARRAY_BUFFER,null),Ot.h.bindTexture2d(0)}function nn(Ot){this.g=Ot}var Sn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Pn(Ot,Bt){return Bt+Ot}function _n(Ot,Bt){window[Ot]=Bt}function Yn(Ot){var Bt=document.createElement("script");return Bt.setAttribute("src",Ot),Bt.setAttribute("crossorigin","anonymous"),new tt(function(rn){Bt.addEventListener("load",function(){rn()},!1),Bt.addEventListener("error",function(){rn()},!1),document.body.appendChild(Bt)})}function Tr(){return to(function(Ot){switch(Ot.g){case 1:return Ot.o=2,dr(Ot,WebAssembly.instantiate(Sn),4);case 4:Ot.g=3,Ot.o=0;break;case 2:return Ot.o=0,Ot.j=null,Ot.return(!1);case 3:return Ot.return(!0)}})}function yr(Ot){if(this.g=Ot,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.$=!0,this.D=tt.resolve(),this.Z="",this.C={},this.locateFile=Ot&&Ot.locateFile||Pn,typeof window=="object")var Bt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Bt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.aa=Bt,Ot.options){Bt=En(Object.keys(Ot.options));for(var rn=Bt.next();!rn.done;rn=Bt.next()){rn=rn.value;var gn=Ot.options[rn].default;gn!==void 0&&(this.j[rn]=typeof gn=="function"?gn():gn)}}}bt=yr.prototype,bt.close=function(){return this.i&&this.i.delete(),tt.resolve()};function Qr(Ot){var Bt,rn,gn,Fn,Rt,Mt,Ht,mt,Zt,Ft,ht;return to(function(wt){switch(wt.g){case 1:return Ot.$?(Bt=Ot.g.files===void 0?[]:typeof Ot.g.files=="function"?Ot.g.files(Ot.j):Ot.g.files,dr(wt,Tr(),2)):wt.return();case 2:if(rn=wt.h,typeof window=="object")return _n("createMediapipeSolutionsWasm",{locateFile:Ot.locateFile}),_n("createMediapipeSolutionsPackedAssets",{locateFile:Ot.locateFile}),Mt=Bt.filter(function(Lt){return Lt.data!==void 0}),Ht=Bt.filter(function(Lt){return Lt.data===void 0}),mt=tt.all(Mt.map(function(Lt){var jt=Eo(Ot,Lt.url);if(Lt.path!==void 0){var ln=Lt.path;jt=jt.then(function(Cn){return Ot.overrideFile(ln,Cn),tt.resolve(Cn)})}return jt})),Zt=tt.all(Ht.map(function(Lt){return Lt.simd===void 0||Lt.simd&&rn||!Lt.simd&&!rn?Yn(Ot.locateFile(Lt.url,Ot.aa)):tt.resolve()})).then(function(){var Lt,jt,ln;return to(function(Cn){if(Cn.g==1)return Lt=window.createMediapipeSolutionsWasm,jt=window.createMediapipeSolutionsPackedAssets,ln=Ot,dr(Cn,Lt(jt),2);ln.h=Cn.h,Cn.g=0})}),Ft=function(){return to(function(Lt){return Ot.g.graph&&Ot.g.graph.url?Lt=dr(Lt,Eo(Ot,Ot.g.graph.url),0):(Lt.g=0,Lt=void 0),Lt})}(),dr(wt,tt.all([Zt,mt,Ft]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return gn=Bt.filter(function(Lt){return Lt.simd===void 0||Lt.simd&&rn||!Lt.simd&&!rn}).map(function(Lt){return Ot.locateFile(Lt.url,Ot.aa)}),importScripts.apply(null,kn(gn)),Fn=Ot,dr(wt,createMediapipeSolutionsWasm(Module),6);case 6:Fn.h=wt.h,Ot.l=new OffscreenCanvas(1,1),Ot.h.canvas=Ot.l,Rt=Ot.h.GL.createContext(Ot.l,{antialias:!1,alpha:!1,na:typeof WebGL2RenderingContext<"u"?2:1}),Ot.h.GL.makeContextCurrent(Rt),wt.g=4;break;case 7:if(Ot.l=document.createElement("canvas"),ht=Ot.l.getContext("webgl2",{}),!ht&&(ht=Ot.l.getContext("webgl",{}),!ht))return alert("Failed to create WebGL canvas context when passing video frame."),wt.return();Ot.G=ht,Ot.h.canvas=Ot.l,Ot.h.createContext(Ot.l,!0,!0,{});case 4:Ot.i=new Ot.h.SolutionWasm,Ot.$=!1,wt.g=0}})}function lo(Ot){var Bt,rn,gn,Fn,Rt,Mt,Ht,mt;return to(function(Zt){if(Zt.g==1){if(Ot.g.graph&&Ot.g.graph.url&&Ot.Z===Ot.g.graph.url)return Zt.return();if(Ot.s=!0,!Ot.g.graph||!Ot.g.graph.url){Zt.g=2;return}return Ot.Z=Ot.g.graph.url,dr(Zt,Eo(Ot,Ot.g.graph.url),3)}for(Zt.g!=2&&(Bt=Zt.h,Ot.i.loadGraph(Bt)),rn=En(Object.keys(Ot.C)),gn=rn.next();!gn.done;gn=rn.next())Fn=gn.value,Ot.i.overrideFile(Fn,Ot.C[Fn]);if(Ot.C={},Ot.g.listeners)for(Rt=En(Ot.g.listeners),Mt=Rt.next();!Mt.done;Mt=Rt.next())Ht=Mt.value,To(Ot,Ht);mt=Ot.j,Ot.j={},Ot.setOptions(mt),Zt.g=0})}bt.reset=function(){var Ot=this;return to(function(Bt){Ot.i&&(Ot.i.reset(),Ot.o={},Ot.u={}),Bt.g=0})},bt.setOptions=function(Ot,Bt){var rn=this;if(Bt=Bt||this.g.options){for(var gn=[],Fn=[],Rt={},Mt=En(Object.keys(Ot)),Ht=Mt.next();!Ht.done;Rt={R:Rt.R,S:Rt.S},Ht=Mt.next()){var mt=Ht.value;mt in this.j&&this.j[mt]===Ot[mt]||(this.j[mt]=Ot[mt],Ht=Bt[mt],Ht!==void 0&&(Ht.onChange&&(Rt.R=Ht.onChange,Rt.S=Ot[mt],gn.push(function(Zt){return function(){var Ft;return to(function(ht){if(ht.g==1)return dr(ht,Zt.R(Zt.S),2);Ft=ht.h,Ft===!0&&(rn.s=!0),ht.g=0})}}(Rt))),Ht.graphOptionXref&&(mt={valueNumber:Ht.type===1?Ot[mt]:0,valueBoolean:Ht.type===0?Ot[mt]:!1,valueString:Ht.type===2?Ot[mt]:""},Ht=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Ht.graphOptionXref),mt),Fn.push(Ht))))}(gn.length!==0||Fn.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(Fn),this.A=(this.A===void 0?[]:this.A).concat(gn))}};function Jo(Ot){var Bt,rn,gn,Fn,Rt,Mt,Ht;return to(function(mt){switch(mt.g){case 1:if(!Ot.s)return mt.return();if(!Ot.A){mt.g=2;break}Bt=En(Ot.A),rn=Bt.next();case 3:if(rn.done){mt.g=5;break}return gn=rn.value,dr(mt,gn(),4);case 4:rn=Bt.next(),mt.g=3;break;case 5:Ot.A=void 0;case 2:if(Ot.B){for(Fn=new Ot.h.GraphOptionChangeRequestList,Rt=En(Ot.B),Mt=Rt.next();!Mt.done;Mt=Rt.next())Ht=Mt.value,Fn.push_back(Ht);Ot.i.changeOptions(Fn),Fn.delete(),Ot.B=void 0}Ot.s=!1,mt.g=0}})}bt.initialize=function(){var Ot=this;return to(function(Bt){return Bt.g==1?dr(Bt,Qr(Ot),2):Bt.g!=3?dr(Bt,lo(Ot),3):dr(Bt,Jo(Ot),0)})};function Eo(Ot,Bt){var rn,gn;return to(function(Fn){return Bt in Ot.H?Fn.return(Ot.H[Bt]):(rn=Ot.locateFile(Bt,""),gn=fetch(rn).then(function(Rt){return Rt.arrayBuffer()}),Ot.H[Bt]=gn,Fn.return(gn))})}bt.overrideFile=function(Ot,Bt){this.i?this.i.overrideFile(Ot,Bt):this.C[Ot]=Bt},bt.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},bt.send=function(Ot,Bt){var rn=this,gn,Fn,Rt,Mt,Ht,mt,Zt,Ft,ht;return to(function(wt){switch(wt.g){case 1:return rn.g.inputs?(gn=1e3*(Bt??performance.now()),dr(wt,rn.D,2)):wt.return();case 2:return dr(wt,rn.initialize(),3);case 3:for(Fn=new rn.h.PacketDataList,Rt=En(Object.keys(Ot)),Mt=Rt.next();!Mt.done;Mt=Rt.next())if(Ht=Mt.value,mt=rn.g.inputs[Ht]){e:{var Lt=Ot[Ht];switch(mt.type){case"video":var jt=rn.o[mt.stream];if(jt||(jt=new Wr(rn.h,rn.G),rn.o[mt.stream]=jt),jt.l===0&&(jt.l=jt.h.createTexture()),typeof HTMLVideoElement<"u"&&Lt instanceof HTMLVideoElement)var ln=Lt.videoWidth,Cn=Lt.videoHeight;else typeof HTMLImageElement<"u"&&Lt instanceof HTMLImageElement?(ln=Lt.naturalWidth,Cn=Lt.naturalHeight):(ln=Lt.width,Cn=Lt.height);Cn={glName:jt.l,width:ln,height:Cn},ln=jt.g,ln.canvas.width=Cn.width,ln.canvas.height=Cn.height,ln.activeTexture(ln.TEXTURE0),jt.h.bindTexture2d(jt.l),ln.texImage2D(ln.TEXTURE_2D,0,ln.RGBA,ln.RGBA,ln.UNSIGNED_BYTE,Lt),jt.h.bindTexture2d(0),jt=Cn;break e;case"detections":for(jt=rn.o[mt.stream],jt||(jt=new nn(rn.h),rn.o[mt.stream]=jt),jt.data||(jt.data=new jt.g.DetectionListData),jt.data.reset(Lt.length),Cn=0;Cn<Lt.length;++Cn){ln=Lt[Cn];var wn=jt.data,Hn=wn.setBoundingBox,or=Cn,hr=ln.ea,pr=new zt;if(Fo(pr,1,hr.ka),Fo(pr,2,hr.la),Fo(pr,3,hr.height),Fo(pr,4,hr.width),Fo(pr,5,hr.rotation),Fo(pr,6,hr.ia),hr=ur(pr,On),Hn.call(wn,or,hr),ln.Y)for(wn=0;wn<ln.Y.length;++wn){pr=ln.Y[wn];var Nr=!!pr.visibility;Hn=jt.data,or=Hn.addNormalizedLandmark,hr=Cn,pr=Object.assign(Object.assign({},pr),{visibility:Nr?pr.visibility:0}),Nr=new Gs,Fo(Nr,1,pr.x),Fo(Nr,2,pr.y),Fo(Nr,3,pr.z),pr.visibility&&Fo(Nr,4,pr.visibility),pr=ur(Nr,Ds),or.call(Hn,hr,pr)}if(ln.V)for(wn=0;wn<ln.V.length;++wn)Hn=jt.data,or=Hn.addClassification,hr=Cn,pr=ln.V[wn],Nr=new Ho,Fo(Nr,2,pr.score),pr.index&&Fo(Nr,1,pr.index),pr.label&&Fo(Nr,3,pr.label),pr.displayName&&Fo(Nr,4,pr.displayName),pr=ur(Nr,Oo),or.call(Hn,hr,pr)}jt=jt.data;break e;default:jt={}}}switch(Zt=jt,Ft=mt.stream,mt.type){case"video":Fn.pushTexture2d(Object.assign(Object.assign({},Zt),{stream:Ft,timestamp:gn}));break;case"detections":ht=Zt,ht.stream=Ft,ht.timestamp=gn,Fn.pushDetectionList(ht);break;default:throw Error("Unknown input config type: '"+mt.type+"'")}}return rn.i.send(Fn),dr(wt,rn.D,4);case 4:Fn.delete(),wt.g=0}})};function Hr(Ot,Bt,rn){var gn,Fn,Rt,Mt,Ht,mt,Zt,Ft,ht,wt,Lt,jt,ln,Cn;return to(function(wn){switch(wn.g){case 1:if(!rn)return wn.return(Bt);for(gn={},Fn=0,Rt=En(Object.keys(rn)),Mt=Rt.next();!Mt.done;Mt=Rt.next())Ht=Mt.value,mt=rn[Ht],typeof mt!="string"&&mt.type==="texture"&&Bt[mt.stream]!==void 0&&++Fn;1<Fn&&(Ot.I=!1),Zt=En(Object.keys(rn)),Mt=Zt.next();case 2:if(Mt.done){wn.g=4;break}if(Ft=Mt.value,ht=rn[Ft],typeof ht=="string")return ln=gn,Cn=Ft,dr(wn,fo(Ot,Ft,Bt[ht]),14);if(wt=Bt[ht.stream],ht.type==="detection_list"){if(wt){for(var Hn=wt.getRectList(),or=wt.getLandmarksList(),hr=wt.getClassificationsList(),pr=[],Nr=0;Nr<Hn.size();++Nr){var Yr=en(Hn.get(Nr),zt,On);Yr={ea:{ka:Ss(Yr,1),la:Ss(Yr,2),height:Ss(Yr,3),width:Ss(Yr,4),rotation:Ss(Yr,5,0),ia:Es(Yr,6)},Y:Rl(en(or.get(Nr),Zl,Pt),Gs,1).map($n),V:fr(en(hr.get(Nr),Ko,us))},pr.push(Yr)}Hn=pr}else Hn=[];gn[Ft]=Hn,wn.g=7;break}if(ht.type==="proto_list"){if(wt){for(Hn=Array(wt.size()),or=0;or<wt.size();or++)Hn[or]=wt.get(or);wt.delete()}else Hn=[];gn[Ft]=Hn,wn.g=7;break}if(wt===void 0){wn.g=3;break}if(ht.type==="float_list"){gn[Ft]=wt,wn.g=7;break}if(ht.type==="proto"){gn[Ft]=wt,wn.g=7;break}if(ht.type!=="texture")throw Error("Unknown output config type: '"+ht.type+"'");return Lt=Ot.u[Ft],Lt||(Lt=new Wr(Ot.h,Ot.G),Ot.u[Ft]=Lt),dr(wn,xt(Lt,wt,Ot.I),13);case 13:jt=wn.h,gn[Ft]=jt;case 7:ht.transform&&gn[Ft]&&(gn[Ft]=ht.transform(gn[Ft])),wn.g=3;break;case 14:ln[Cn]=wn.h;case 3:Mt=Zt.next(),wn.g=2;break;case 4:return wn.return(gn)}})}function fo(Ot,Bt,rn){var gn;return to(function(Fn){return typeof rn=="number"||rn instanceof Uint8Array||rn instanceof Ot.h.Uint8BlobList?Fn.return(rn):rn instanceof Ot.h.Texture2dDataOut?(gn=Ot.u[Bt],gn||(gn=new Wr(Ot.h,Ot.G),Ot.u[Bt]=gn),Fn.return(xt(gn,rn,Ot.I))):Fn.return(void 0)})}function To(Ot,Bt){for(var rn=Bt.name||"$",gn=[].concat(kn(Bt.wants)),Fn=new Ot.h.StringList,Rt=En(Bt.wants),Mt=Rt.next();!Mt.done;Mt=Rt.next())Fn.push_back(Mt.value);Rt=Ot.h.PacketListener.implement({onResults:function(Ht){for(var mt={},Zt=0;Zt<Bt.wants.length;++Zt)mt[gn[Zt]]=Ht.get(Zt);var Ft=Ot.listeners[rn];Ft&&(Ot.D=Hr(Ot,mt,Bt.outs).then(function(ht){ht=Ft(ht);for(var wt=0;wt<Bt.wants.length;++wt){var Lt=mt[gn[wt]];typeof Lt=="object"&&Lt.hasOwnProperty&&Lt.hasOwnProperty("delete")&&Lt.delete()}ht&&(Ot.D=ht)}))}}),Ot.i.attachMultiListener(Fn,Rt),Fn.delete()}bt.onResults=function(Ot,Bt){this.listeners[Bt||"$"]=Ot},Xo("Solution",yr),Xo("OptionType",{BOOL:0,NUMBER:1,ma:2,0:"BOOL",1:"NUMBER",2:"STRING"});function No(Ot){return Ot===void 0&&(Ot=0),Ot===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Mo(Ot){var Bt=this;Ot=Ot||{},this.g=new yr({locateFile:Ot.locateFile,files:function(rn){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:No(rn.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:br},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:br},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(rn){return rn.map(function(gn){return fr(en(gn,Ko,us))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(rn){var gn,Fn,Rt;return to(function(Mt){return Mt.g==1?(gn=No(rn),Fn="third_party/mediapipe/modules/hand_landmark/"+gn,dr(Mt,Eo(Bt.g,gn),2)):(Rt=Mt.h,Bt.g.overrideFile(Fn,Rt),Mt.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}bt=Mo.prototype,bt.close=function(){return this.g.close(),tt.resolve()},bt.onResults=function(Ot){this.g.onResults(Ot)},bt.initialize=function(){var Ot=this;return to(function(Bt){return dr(Bt,Ot.g.initialize(),0)})},bt.reset=function(){this.g.reset()},bt.send=function(Ot){var Bt=this;return to(function(rn){return dr(rn,Bt.g.send(Ot),0)})},bt.setOptions=function(Ot){this.g.setOptions(Ot)},Xo("Hands",Mo),Xo("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Xo("VERSION","0.4.1646424915")}).call(Ou);var op={};(function(){var bt;function vt(mt){var Zt=0;return function(){return Zt<mt.length?{done:!1,value:mt[Zt++]}:{done:!0}}}var Ct=typeof Object.defineProperties=="function"?Object.defineProperty:function(mt,Zt,Ft){return mt==Array.prototype||mt==Object.prototype||(mt[Zt]=Ft.value),mt};function Xt(mt){mt=[typeof globalThis=="object"&&globalThis,mt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Zt=0;Zt<mt.length;++Zt){var Ft=mt[Zt];if(Ft&&Ft.Math==Math)return Ft}throw Error("Cannot find global object")}var Yt=Xt(this);function hn(mt,Zt){if(Zt)e:{var Ft=Yt;mt=mt.split(".");for(var ht=0;ht<mt.length-1;ht++){var wt=mt[ht];if(!(wt in Ft))break e;Ft=Ft[wt]}mt=mt[mt.length-1],ht=Ft[mt],Zt=Zt(ht),Zt!=ht&&Zt!=null&&Ct(Ft,mt,{configurable:!0,writable:!0,value:Zt})}}hn("Symbol",function(mt){function Zt(Lt){if(this instanceof Zt)throw new TypeError("Symbol is not a constructor");return new Ft(ht+(Lt||"")+"_"+wt++,Lt)}function Ft(Lt,jt){this.g=Lt,Ct(this,"description",{configurable:!0,writable:!0,value:jt})}if(mt)return mt;Ft.prototype.toString=function(){return this.g};var ht="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",wt=0;return Zt}),hn("Symbol.iterator",function(mt){if(mt)return mt;mt=Symbol("Symbol.iterator");for(var Zt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ft=0;Ft<Zt.length;Ft++){var ht=Yt[Zt[Ft]];typeof ht=="function"&&typeof ht.prototype[mt]!="function"&&Ct(ht.prototype,mt,{configurable:!0,writable:!0,value:function(){return In(vt(this))}})}return mt});function In(mt){return mt={next:mt},mt[Symbol.iterator]=function(){return this},mt}function En(mt){var Zt=typeof Symbol<"u"&&Symbol.iterator&&mt[Symbol.iterator];return Zt?Zt.call(mt):{next:vt(mt)}}function kn(mt){if(!(mt instanceof Array)){mt=En(mt);for(var Zt,Ft=[];!(Zt=mt.next()).done;)Ft.push(Zt.value);mt=Ft}return mt}var mr=typeof Object.create=="function"?Object.create:function(mt){function Zt(){}return Zt.prototype=mt,new Zt},Vr;if(typeof Object.setPrototypeOf=="function")Vr=Object.setPrototypeOf;else{var Gr;e:{var Io={a:!0},ko={};try{ko.__proto__=Io,Gr=ko.a;break e}catch{}Gr=!1}Vr=Gr?function(mt,Zt){if(mt.__proto__=Zt,mt.__proto__!==Zt)throw new TypeError(mt+" is not extensible");return mt}:null}var Mr=Vr;function Dr(mt,Zt){if(mt.prototype=mr(Zt.prototype),mt.prototype.constructor=mt,Mr)Mr(mt,Zt);else for(var Ft in Zt)if(Ft!="prototype")if(Object.defineProperties){var ht=Object.getOwnPropertyDescriptor(Zt,Ft);ht&&Object.defineProperty(mt,Ft,ht)}else mt[Ft]=Zt[Ft];mt.da=Zt.prototype}function Bo(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Uo(mt){if(mt.l)throw new TypeError("Generator is already running");mt.l=!0}Bo.prototype.o=function(mt){this.h=mt};function gs(mt,Zt){mt.j={U:Zt,V:!0},mt.g=mt.m||mt.s}Bo.prototype.return=function(mt){this.j={return:mt},this.g=this.s};function dr(mt,Zt,Ft){return mt.g=Ft,{value:Zt}}function Vu(mt){this.g=new Bo,this.h=mt}function Su(mt,Zt){Uo(mt.g);var Ft=mt.g.i;return Ft?ga(mt,"return"in Ft?Ft.return:function(ht){return{value:ht,done:!0}},Zt,mt.g.return):(mt.g.return(Zt),fs(mt))}function ga(mt,Zt,Ft,ht){try{var wt=Zt.call(mt.g.i,Ft);if(!(wt instanceof Object))throw new TypeError("Iterator result "+wt+" is not an object");if(!wt.done)return mt.g.l=!1,wt;var Lt=wt.value}catch(jt){return mt.g.i=null,gs(mt.g,jt),fs(mt)}return mt.g.i=null,ht.call(mt.g,Lt),fs(mt)}function fs(mt){for(;mt.g.g;)try{var Zt=mt.h(mt.g);if(Zt)return mt.g.l=!1,{value:Zt.value,done:!1}}catch(Ft){mt.g.h=void 0,gs(mt.g,Ft)}if(mt.g.l=!1,mt.g.j){if(Zt=mt.g.j,mt.g.j=null,Zt.V)throw Zt.U;return{value:Zt.return,done:!0}}return{value:void 0,done:!0}}function Fp(mt){this.next=function(Zt){return Uo(mt.g),mt.g.i?Zt=ga(mt,mt.g.i.next,Zt,mt.g.o):(mt.g.o(Zt),Zt=fs(mt)),Zt},this.throw=function(Zt){return Uo(mt.g),mt.g.i?Zt=ga(mt,mt.g.i.throw,Zt,mt.g.o):(gs(mt.g,Zt),Zt=fs(mt)),Zt},this.return=function(Zt){return Su(mt,Zt)},this[Symbol.iterator]=function(){return this}}function As(mt){function Zt(ht){return mt.next(ht)}function Ft(ht){return mt.throw(ht)}return new tt(function(ht,wt){function Lt(jt){jt.done?ht(jt.value):tt.resolve(jt.value).then(Zt,Ft).then(Lt,wt)}Lt(mt.next())})}function to(mt){return As(new Fp(new Vu(mt)))}hn("Promise",function(mt){function Zt(jt){this.h=0,this.i=void 0,this.g=[],this.o=!1;var ln=this.j();try{jt(ln.resolve,ln.reject)}catch(Cn){ln.reject(Cn)}}function Ft(){this.g=null}function ht(jt){return jt instanceof Zt?jt:new Zt(function(ln){ln(jt)})}if(mt)return mt;Ft.prototype.h=function(jt){if(this.g==null){this.g=[];var ln=this;this.i(function(){ln.l()})}this.g.push(jt)};var wt=Yt.setTimeout;Ft.prototype.i=function(jt){wt(jt,0)},Ft.prototype.l=function(){for(;this.g&&this.g.length;){var jt=this.g;this.g=[];for(var ln=0;ln<jt.length;++ln){var Cn=jt[ln];jt[ln]=null;try{Cn()}catch(wn){this.j(wn)}}}this.g=null},Ft.prototype.j=function(jt){this.i(function(){throw jt})},Zt.prototype.j=function(){function jt(wn){return function(Hn){Cn||(Cn=!0,wn.call(ln,Hn))}}var ln=this,Cn=!1;return{resolve:jt(this.C),reject:jt(this.l)}},Zt.prototype.C=function(jt){if(jt===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(jt instanceof Zt)this.F(jt);else{e:switch(typeof jt){case"object":var ln=jt!=null;break e;case"function":ln=!0;break e;default:ln=!1}ln?this.v(jt):this.m(jt)}},Zt.prototype.v=function(jt){var ln=void 0;try{ln=jt.then}catch(Cn){this.l(Cn);return}typeof ln=="function"?this.G(ln,jt):this.m(jt)},Zt.prototype.l=function(jt){this.s(2,jt)},Zt.prototype.m=function(jt){this.s(1,jt)},Zt.prototype.s=function(jt,ln){if(this.h!=0)throw Error("Cannot settle("+jt+", "+ln+"): Promise already settled in state"+this.h);this.h=jt,this.i=ln,this.h===2&&this.D(),this.A()},Zt.prototype.D=function(){var jt=this;wt(function(){if(jt.B()){var ln=Yt.console;typeof ln<"u"&&ln.error(jt.i)}},1)},Zt.prototype.B=function(){if(this.o)return!1;var jt=Yt.CustomEvent,ln=Yt.Event,Cn=Yt.dispatchEvent;return typeof Cn>"u"?!0:(typeof jt=="function"?jt=new jt("unhandledrejection",{cancelable:!0}):typeof ln=="function"?jt=new ln("unhandledrejection",{cancelable:!0}):(jt=Yt.document.createEvent("CustomEvent"),jt.initCustomEvent("unhandledrejection",!1,!0,jt)),jt.promise=this,jt.reason=this.i,Cn(jt))},Zt.prototype.A=function(){if(this.g!=null){for(var jt=0;jt<this.g.length;++jt)Lt.h(this.g[jt]);this.g=null}};var Lt=new Ft;return Zt.prototype.F=function(jt){var ln=this.j();jt.J(ln.resolve,ln.reject)},Zt.prototype.G=function(jt,ln){var Cn=this.j();try{jt.call(ln,Cn.resolve,Cn.reject)}catch(wn){Cn.reject(wn)}},Zt.prototype.then=function(jt,ln){function Cn(hr,pr){return typeof hr=="function"?function(Nr){try{wn(hr(Nr))}catch(Yr){Hn(Yr)}}:pr}var wn,Hn,or=new Zt(function(hr,pr){wn=hr,Hn=pr});return this.J(Cn(jt,wn),Cn(ln,Hn)),or},Zt.prototype.catch=function(jt){return this.then(void 0,jt)},Zt.prototype.J=function(jt,ln){function Cn(){switch(wn.h){case 1:jt(wn.i);break;case 2:ln(wn.i);break;default:throw Error("Unexpected state: "+wn.h)}}var wn=this;this.g==null?Lt.h(Cn):this.g.push(Cn),this.o=!0},Zt.resolve=ht,Zt.reject=function(jt){return new Zt(function(ln,Cn){Cn(jt)})},Zt.race=function(jt){return new Zt(function(ln,Cn){for(var wn=En(jt),Hn=wn.next();!Hn.done;Hn=wn.next())ht(Hn.value).J(ln,Cn)})},Zt.all=function(jt){var ln=En(jt),Cn=ln.next();return Cn.done?ht([]):new Zt(function(wn,Hn){function or(Nr){return function(Yr){hr[Nr]=Yr,pr--,pr==0&&wn(hr)}}var hr=[],pr=0;do hr.push(void 0),pr++,ht(Cn.value).J(or(hr.length-1),Hn),Cn=ln.next();while(!Cn.done)})},Zt});function Lu(mt,Zt){mt instanceof String&&(mt+="");var Ft=0,ht=!1,wt={next:function(){if(!ht&&Ft<mt.length){var Lt=Ft++;return{value:Zt(Lt,mt[Lt]),done:!1}}return ht=!0,{done:!0,value:void 0}}};return wt[Symbol.iterator]=function(){return wt},wt}var Xp=typeof Object.assign=="function"?Object.assign:function(mt,Zt){for(var Ft=1;Ft<arguments.length;Ft++){var ht=arguments[Ft];if(ht)for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(mt[wt]=ht[wt])}return mt};hn("Object.assign",function(mt){return mt||Xp}),hn("Object.is",function(mt){return mt||function(Zt,Ft){return Zt===Ft?Zt!==0||1/Zt===1/Ft:Zt!==Zt&&Ft!==Ft}}),hn("Array.prototype.includes",function(mt){return mt||function(Zt,Ft){var ht=this;ht instanceof String&&(ht=String(ht));var wt=ht.length;for(Ft=Ft||0,0>Ft&&(Ft=Math.max(Ft+wt,0));Ft<wt;Ft++){var Lt=ht[Ft];if(Lt===Zt||Object.is(Lt,Zt))return!0}return!1}}),hn("String.prototype.includes",function(mt){return mt||function(Zt,Ft){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Zt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Zt,Ft||0)!==-1}}),hn("Array.prototype.keys",function(mt){return mt||function(){return Lu(this,function(Zt){return Zt})}});var ba=this||self;function Xo(mt,Zt){mt=mt.split(".");var Ft=ba;mt[0]in Ft||typeof Ft.execScript>"u"||Ft.execScript("var "+mt[0]);for(var ht;mt.length&&(ht=mt.shift());)mt.length||Zt===void 0?Ft[ht]&&Ft[ht]!==Object.prototype[ht]?Ft=Ft[ht]:Ft=Ft[ht]={}:Ft[ht]=Zt}function El(mt){ba.setTimeout(function(){throw mt},0)}function hu(mt){El(mt)}function Bu(mt,Zt){hu(Error("Invalid wire type: "+mt+" (at position "+Zt+")"))}function pp(){hu(Error("Failed to read varint, encoding is invalid."))}function _d(mt,Zt){return Zt=String.fromCharCode.apply(null,Zt),mt==null?Zt:mt+Zt}var yp,Eu=typeof TextDecoder<"u",ku,Rp=typeof TextEncoder<"u";function mp(mt){if(Rp)mt=(ku||(ku=new TextEncoder)).encode(mt);else{var Zt=void 0;Zt=Zt===void 0?!1:Zt;for(var Ft=0,ht=new Uint8Array(3*mt.length),wt=0;wt<mt.length;wt++){var Lt=mt.charCodeAt(wt);if(128>Lt)ht[Ft++]=Lt;else{if(2048>Lt)ht[Ft++]=Lt>>6|192;else{if(55296<=Lt&&57343>=Lt){if(56319>=Lt&&wt<mt.length){var jt=mt.charCodeAt(++wt);if(56320<=jt&&57343>=jt){Lt=1024*(Lt-55296)+jt-56320+65536,ht[Ft++]=Lt>>18|240,ht[Ft++]=Lt>>12&63|128,ht[Ft++]=Lt>>6&63|128,ht[Ft++]=Lt&63|128;continue}else wt--}if(Zt)throw Error("Found an unpaired surrogate");Lt=65533}ht[Ft++]=Lt>>12|224,ht[Ft++]=Lt>>6&63|128}ht[Ft++]=Lt&63|128}}mt=ht.subarray(0,Ft)}return mt}var Bl={},Hl=null;function _f(mt){var Zt;Zt===void 0&&(Zt=0),Sl(),Zt=Bl[Zt];for(var Ft=Array(Math.floor(mt.length/3)),ht=Zt[64]||"",wt=0,Lt=0;wt<mt.length-2;wt+=3){var jt=mt[wt],ln=mt[wt+1],Cn=mt[wt+2],wn=Zt[jt>>2];jt=Zt[(jt&3)<<4|ln>>4],ln=Zt[(ln&15)<<2|Cn>>6],Cn=Zt[Cn&63],Ft[Lt++]=wn+jt+ln+Cn}switch(wn=0,Cn=ht,mt.length-wt){case 2:wn=mt[wt+1],Cn=Zt[(wn&15)<<2]||ht;case 1:mt=mt[wt],Ft[Lt]=Zt[mt>>2]+Zt[(mt&3)<<4|wn>>4]+Cn+ht}return Ft.join("")}function Ku(mt){var Zt=mt.length,Ft=3*Zt/4;Ft%3?Ft=Math.floor(Ft):"=.".indexOf(mt[Zt-1])!=-1&&(Ft="=.".indexOf(mt[Zt-2])!=-1?Ft-2:Ft-1);var ht=new Uint8Array(Ft),wt=0;return Ls(mt,function(Lt){ht[wt++]=Lt}),ht.subarray(0,wt)}function Ls(mt,Zt){function Ft(Cn){for(;ht<mt.length;){var wn=mt.charAt(ht++),Hn=Hl[wn];if(Hn!=null)return Hn;if(!/^[\s\xa0]*$/.test(wn))throw Error("Unknown base64 encoding at char: "+wn)}return Cn}Sl();for(var ht=0;;){var wt=Ft(-1),Lt=Ft(0),jt=Ft(64),ln=Ft(64);if(ln===64&&wt===-1)break;Zt(wt<<2|Lt>>4),jt!=64&&(Zt(Lt<<4&240|jt>>2),ln!=64&&Zt(jt<<6&192|ln))}}function Sl(){if(!Hl){Hl={};for(var mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Zt=["+/=","+/","-_=","-_.","-_"],Ft=0;5>Ft;Ft++){var ht=mt.concat(Zt[Ft].split(""));Bl[Ft]=ht;for(var wt=0;wt<ht.length;wt++){var Lt=ht[wt];Hl[Lt]===void 0&&(Hl[Lt]=wt)}}}}var Kl=typeof Uint8Array=="function",ys;function qs(mt){if(this.g=mt,mt!==null&&mt.length===0)throw Error("ByteString should be constructed with non-empty values")}qs.prototype.toJSON=function(){if(this.g==null)var mt="";else mt=this.g,mt=this.g=mt==null||typeof mt=="string"?mt:Kl&&mt instanceof Uint8Array?_f(mt):null;return mt};var pu=typeof Uint8Array.prototype.slice=="function";function Pl(mt,Zt,Ft){return Zt===Ft?ys||(ys=new Uint8Array(0)):pu?mt.slice(Zt,Ft):new Uint8Array(mt.subarray(Zt,Ft))}var ls=0,Hs=0;function xl(mt){if(mt.constructor===Uint8Array)return mt;if(mt.constructor===ArrayBuffer)return new Uint8Array(mt);if(mt.constructor===Array)return new Uint8Array(mt);if(mt.constructor===String)return Ku(mt);if(mt.constructor===qs){if(mt.g==null)var Zt=ys||(ys=new Uint8Array(0));else{Zt=Uint8Array;var Ft=mt.g;Ft=Ft==null||Kl&&Ft!=null&&Ft instanceof Uint8Array?Ft:typeof Ft=="string"?Ku(Ft):null,mt=mt.g=Ft,Zt=new Zt(mt)}return Zt}if(mt instanceof Uint8Array)return new Uint8Array(mt.buffer,mt.byteOffset,mt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function $o(mt,Zt){Zt=Zt===void 0?{}:Zt,Zt=Zt.u===void 0?!1:Zt.u,this.h=null,this.g=this.i=this.m=0,this.l=!1,this.u=Zt,mt&&_a(this,mt)}function _a(mt,Zt){mt.h=xl(Zt),mt.m=0,mt.i=mt.h.length,mt.g=mt.m}$o.prototype.reset=function(){this.g=this.m};function os(mt){for(var Zt=128,Ft=0,ht=0,wt=0;4>wt&&128<=Zt;wt++)Zt=mt.h[mt.g++],Ft|=(Zt&127)<<7*wt;if(128<=Zt&&(Zt=mt.h[mt.g++],Ft|=(Zt&127)<<28,ht|=(Zt&127)>>4),128<=Zt)for(wt=0;5>wt&&128<=Zt;wt++)Zt=mt.h[mt.g++],ht|=(Zt&127)<<7*wt+3;if(128>Zt)return mt=Ft>>>0,Zt=ht>>>0,(ht=Zt&2147483648)&&(mt=~mt+1>>>0,Zt=~Zt>>>0,mt==0&&(Zt=Zt+1>>>0)),mt=4294967296*Zt+(mt>>>0),ht?-mt:mt;mt.l=!0,pp()}function Xs(mt){mt.g>mt.i&&(mt.l=!0,hu(Error("Tried to read past the end of the data "+mt.g+" > "+mt.i)))}$o.prototype.j=function(){var mt=this.h,Zt=mt[this.g],Ft=Zt&127;return 128>Zt?(this.g+=1,Xs(this),Ft):(Zt=mt[this.g+1],Ft|=(Zt&127)<<7,128>Zt?(this.g+=2,Xs(this),Ft):(Zt=mt[this.g+2],Ft|=(Zt&127)<<14,128>Zt?(this.g+=3,Xs(this),Ft):(Zt=mt[this.g+3],Ft|=(Zt&127)<<21,128>Zt?(this.g+=4,Xs(this),Ft):(Zt=mt[this.g+4],Ft|=(Zt&15)<<28,128>Zt?(this.g+=5,Xs(this),Ft>>>0):(this.g+=5,128<=mt[this.g++]&&128<=mt[this.g++]&&128<=mt[this.g++]&&128<=mt[this.g++]&&128<=mt[this.g++]?(this.l=!0,pp(),Ft):(Xs(this),Ft))))))},$o.prototype.o=function(){var mt=this.h[this.g],Zt=this.h[this.g+1],Ft=this.h[this.g+2],ht=this.h[this.g+3];return this.g+=4,Xs(this),Ft=(mt<<0|Zt<<8|Ft<<16|ht<<24)>>>0,mt=2*(Ft>>31)+1,Zt=Ft>>>23&255,Ft&=8388607,Zt==255?Ft?NaN:1/0*mt:Zt==0?mt*Math.pow(2,-149)*Ft:mt*Math.pow(2,Zt-150)*(Ft+Math.pow(2,23))};var Cl=[];function tu(){this.g=new Uint8Array(64),this.h=0}function zs(mt,Zt){if(!(mt.h+1<mt.g.length)){var Ft=mt.g;mt.g=new Uint8Array(Math.ceil(1+2*mt.g.length)),mt.g.set(Ft)}mt.g[mt.h++]=Zt}tu.prototype.length=function(){return this.h},tu.prototype.end=function(){var mt=this.g,Zt=this.h;return this.h=0,Pl(mt,0,Zt)};function ss(mt,Zt){for(;127<Zt;)zs(mt,Zt&127|128),Zt>>>=7;zs(mt,Zt)}function Yl(mt){var Zt={},Ft=Zt.N===void 0?!1:Zt.N;this.m={u:Zt.u===void 0?!1:Zt.u},this.N=Ft,Zt=this.m,Cl.length?(Ft=Cl.pop(),Zt&&(Ft.u=Zt.u),mt&&_a(Ft,mt),mt=Ft):mt=new $o(mt,Zt),this.g=mt,this.l=this.g.g,this.h=this.i=-1,this.j=!1}Yl.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function zl(mt){var Zt=mt.g;if((Zt=Zt.g==Zt.i)||(Zt=mt.j)||(Zt=mt.g,Zt=Zt.l||0>Zt.g||Zt.g>Zt.i),Zt)return!1;mt.l=mt.g.g;var Ft=mt.g.j();return Zt=Ft>>>3,Ft&=7,0<=Ft&&5>=Ft?(mt.i=Zt,mt.h=Ft,!0):(mt.j=!0,Bu(Ft,mt.l),!1)}function _c(mt){switch(mt.h){case 0:if(mt.h!=0)_c(mt);else e:{mt=mt.g;for(var Zt=mt.g,Ft=0;10>Ft;Ft++){if(!(mt.h[Zt]&128)){mt.g=Zt+1,Xs(mt);break e}Zt++}mt.l=!0,pp()}break;case 1:mt=mt.g,mt.g+=8,Xs(mt);break;case 2:mt.h!=2?_c(mt):(Zt=mt.g.j(),mt=mt.g,mt.g+=Zt,Xs(mt));break;case 5:mt=mt.g,mt.g+=4,Xs(mt);break;case 3:Zt=mt.i;do{if(!zl(mt)){mt.j=!0,hu(Error("Unmatched start-group tag: stream EOF"));break}if(mt.h==4){mt.i!=Zt&&(mt.j=!0,hu(Error("Unmatched end-group tag")));break}_c(mt)}while(1);break;default:mt.j=!0,Bu(mt.h,mt.l)}}function zu(mt,Zt,Ft){mt.N||(mt=Pl(mt.g.h,Ft,mt.g.g),(Ft=Zt.o)?Ft.push(mt):Zt.o=[mt])}function mu(mt,Zt,Ft){var ht=mt.g.i,wt=mt.g.j(),Lt=mt.g.g+wt;if(mt.g.i=Lt,Ft(Zt,mt),Ft=Lt-mt.g.g,Ft!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(wt+" bytes, instead read "+(wt-Ft)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return mt.g.g=Lt,mt.g.i=ht,Zt}function Jl(mt,Zt,Ft){var ht=mt.g.j();for(ht=mt.g.g+ht;mt.g.g<ht;)Ft.push(Zt.call(mt.g))}var gu=[];function Ys(){this.h=[],this.i=0,this.g=new tu}function Tl(mt,Zt){Zt.length!==0&&(mt.h.push(Zt),mt.i+=Zt.length)}function Bs(mt,Zt,Ft){ss(mt.g,8*Zt+2),ss(mt.g,Ft.length),Tl(mt,mt.g.end()),Tl(mt,Ft)}var bs=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function $l(mt,Zt){Object.isFrozen(mt)||(bs?mt[bs]|=Zt:mt.g!==void 0?mt.g|=Zt:Object.defineProperties(mt,{g:{value:Zt,configurable:!0,writable:!0,enumerable:!1}}))}function ps(mt){if(!mt)return 0;var Zt;return bs?Zt=mt[bs]:Zt=mt.g,Zt??0}function as(mt){return Array.isArray(mt)&&$l(mt,1),mt}function Cu(mt){if(!Array.isArray(mt))throw Error("cannot mark non-array as immutable");$l(mt,2)}function ks(mt){return mt!==null&&typeof mt=="object"&&mt.constructor===Object}function Fo(mt){switch(typeof mt){case"number":return isFinite(mt)?mt:String(mt);case"object":return Kl&&mt!=null&&mt instanceof Uint8Array?_f(mt):mt;default:return mt}}function go(mt,Zt){if(mt!=null)return Array.isArray(mt)||ks(mt)?Ss(mt,Zt):Zt(mt)}function Ss(mt,Zt){if(Array.isArray(mt)){for(var Ft=Array(mt.length),ht=0;ht<mt.length;ht++)Ft[ht]=go(mt[ht],Zt);return ps(mt)&1&&as(Ft),Ft}Ft={};for(ht in mt)Ft[ht]=go(mt[ht],Zt);return Ft}var Rl;function ms(mt,Zt,Ft){var ht=Rl;Rl=null,mt||(mt=ht),ht=this.constructor.ba,mt||(mt=ht?[ht]:[]),this.j=(ht?0:-1)-(this.constructor.$||0),this.m=this.g=null,this.h=mt;e:{if(ht=this.h.length,mt=ht-1,ht&&(ht=this.h[mt],ks(ht))){this.l=mt-this.j,this.i=ht;break e}Zt!==void 0&&-1<Zt?(this.l=Math.max(Zt,mt+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(Ft)for(Zt=0;Zt<Ft.length;Zt++)mt=Ft[Zt],mt<this.l?(mt+=this.j,(ht=this.h[mt])?as(ht):this.h[mt]=Es):(Cr(this),(ht=this.i[mt])?as(ht):this.i[mt]=Es)}var Es=Object.freeze(as([]));function Cr(mt){var Zt=mt.l+mt.j;mt.h[Zt]||(mt.i=mt.h[Zt]={})}function wr(mt,Zt,Ft){return Zt===-1?null:Ft!==void 0&&Ft||Zt>=mt.l?mt.i?mt.i[Zt]:void 0:mt.h[Zt+mt.j]}function Pr(mt,Zt,Ft){Ft=Ft===void 0?!0:Ft;var ht=ht===void 0?!1:ht,wt=wr(mt,Zt,ht);return wt==null&&(wt=Es),wt===Es?(wt=as([]),Ro(mt,Zt,wt,ht)):Ft&&Array.isArray(wt)&&ps(wt)&2&&(wt=wt.slice(),Ro(mt,Zt,wt,ht)),wt}function cs(mt){var Zt=Pr(mt,3,!1);if(mt.m||(mt.m={}),!mt.m[3]){for(var Ft=0;Ft<Zt.length;Ft++)Zt[Ft]=+Zt[Ft];mt.m[3]=!0}return Zt}function Os(mt,Zt,Ft){return mt=wr(mt,Zt),mt??Ft}function Is(mt,Zt,Ft){return mt=wr(mt,Zt),mt=mt==null?mt:+mt,mt??(Ft===void 0?0:Ft)}function Ro(mt,Zt,Ft,ht){ht!==void 0&&ht||Zt>=mt.l?(Cr(mt),mt.i[Zt]=Ft):mt.h[Zt+mt.j]=Ft}function Ns(mt,Zt,Ft){if(Ft===-1)return null;mt.g||(mt.g={});var ht=mt.g[Ft];if(ht)return ht;var wt=wr(mt,Ft,!1);return wt==null?ht:(Zt=new Zt(wt),mt.g[Ft]=Zt)}function Ol(mt,Zt,Ft){mt.g||(mt.g={});var ht=mt.g[Ft];if(!ht){var wt=Pr(mt,Ft,!1);ht=[];for(var Lt=Array.isArray(wt)?!!(ps(wt)&2):!1,jt=0;jt<wt.length;jt++)ht[jt]=new Zt(wt[jt]),Lt&&Cu(ht[jt].h);Lt&&(Cu(ht),Object.freeze(ht)),mt.g[Ft]=ht}return ht}function nu(mt,Zt,Ft,ht,wt){var Lt=Ol(mt,ht,Zt);Ft=Ft||new ht,mt=Pr(mt,Zt),wt!=null?(Lt.splice(wt,0,Ft),mt.splice(wt,0,ru(Ft))):(Lt.push(Ft),mt.push(ru(Ft)))}ms.prototype.toJSON=function(){var mt=ru(this);return Ss(mt,Fo)};function ru(mt){if(mt.g)for(var Zt in mt.g){var Ft=mt.g[Zt];if(Array.isArray(Ft))for(var ht=0;ht<Ft.length;ht++)Ft[ht]&&ru(Ft[ht]);else Ft&&ru(Ft)}return mt.h}ms.prototype.toString=function(){return ru(this).toString()};function Tu(mt,Zt){if(mt=mt.o){Tl(Zt,Zt.g.end());for(var Ft=0;Ft<mt.length;Ft++)Tl(Zt,mt[Ft])}}function Nu(mt){var Zt=mt[0];switch(mt.length){case 2:var Ft=mt[1];return function(Cn,wn,Hn){return Zt(Cn,wn,Hn,Ft)};case 3:var ht=mt[1],wt=mt[2];return function(Cn,wn,Hn){return Zt(Cn,wn,Hn,ht,wt)};case 4:var Lt=mt[1],jt=mt[2],ln=mt[3];return function(Cn,wn,Hn){return Zt(Cn,wn,Hn,Lt,jt,ln)};default:throw Error("unsupported number of parameters, expected [2-4], got "+mt.length)}}function Il(mt,Zt,Ft){for(;zl(Zt)&&Zt.h!=4;){var ht=Zt.i,wt=Ft[ht];if(wt){if(Array.isArray(wt)&&(wt=Ft[ht]=Nu(wt)),!wt(Zt,mt,ht)){ht=Zt,wt=mt;var Lt=ht.l;_c(ht),zu(ht,wt,Lt)}}else ht=Zt,wt=mt,Lt=ht.l,_c(ht),zu(ht,wt,Lt)}return mt}function iu(mt,Zt){var Ft=new Ys;if(Zt(mt,Ft),mt=Ft.i+Ft.g.length(),mt===0)Ft=new Uint8Array(0);else{mt=new Uint8Array(mt);for(var ht=Ft.h,wt=ht.length,Lt=Zt=0;Lt<wt;Lt++){var jt=ht[Lt];jt.length!==0&&(mt.set(jt,Zt),Zt+=jt.length)}ht=Ft.g,wt=ht.h,wt!==0&&(mt.set(ht.g.subarray(0,wt),Zt),ht.h=0),Ft.h=[mt],Ft=mt}return Ft}function Dp(mt,Zt,Ft){if(gu.length){var ht=gu.pop();mt&&(_a(ht.g,mt),ht.i=-1,ht.h=-1),mt=ht}else mt=new Yl(mt);try{return Ft(new Zt,mt)}finally{Zt=mt.g,Zt.h=null,Zt.m=0,Zt.i=0,Zt.g=0,Zt.l=!1,Zt.u=!1,mt.i=-1,mt.h=-1,mt.j=!1,100>gu.length&&gu.push(mt)}}function ou(mt,Zt,Ft){if(Zt=wr(Zt,Ft),Zt!=null){ss(mt.g,8*Ft+5),mt=mt.g;var ht=Zt;ht=(Ft=0>ht?1:0)?-ht:ht,ht===0?0<1/ht?ls=Hs=0:(Hs=0,ls=2147483648):isNaN(ht)?(Hs=0,ls=2147483647):34028234663852886e22<ht?(Hs=0,ls=(Ft<<31|2139095040)>>>0):11754943508222875e-54>ht?(ht=Math.round(ht/Math.pow(2,-149)),Hs=0,ls=(Ft<<31|ht)>>>0):(Zt=Math.floor(Math.log(ht)/Math.LN2),ht*=Math.pow(2,-Zt),ht=Math.round(8388608*ht),16777216<=ht&&++Zt,Hs=0,ls=(Ft<<31|Zt+127<<23|ht&8388607)>>>0),Ft=ls,zs(mt,Ft>>>0&255),zs(mt,Ft>>>8&255),zs(mt,Ft>>>16&255),zs(mt,Ft>>>24&255)}}function Al(mt,Zt,Ft){return mt.h!==5?!1:(Ro(Zt,Ft,mt.g.o()),!0)}function Xu(mt,Zt,Ft){return mt.h!==5&&mt.h!==2?!1:(Zt=Pr(Zt,Ft),mt.h==2?Jl(mt,$o.prototype.o,Zt):Zt.push(mt.g.o()),!0)}function _h(mt,Zt,Ft){return mt.h!==0?!1:(Ro(Zt,Ft,os(mt.g)),!0)}function Fl(mt,Zt,Ft){return mt.h!==0?!1:(Ro(Zt,Ft,mt.g.j()),!0)}function Ip(mt,Zt,Ft){if(mt.h!==2)return!1;var ht=mt.g.j();mt=mt.g;var wt=mt.g;mt.g+=ht,Xs(mt),mt=mt.h;var Lt;if(Eu)(Lt=yp)||(Lt=yp=new TextDecoder("utf-8",{fatal:!1})),Lt=Lt.decode(mt.subarray(wt,wt+ht));else{ht=wt+ht;for(var jt=[],ln=null,Cn,wn,Hn;wt<ht;)Cn=mt[wt++],128>Cn?jt.push(Cn):224>Cn?wt>=ht?jt.push(65533):(wn=mt[wt++],194>Cn||(wn&192)!==128?(wt--,jt.push(65533)):jt.push((Cn&31)<<6|wn&63)):240>Cn?wt>=ht-1?jt.push(65533):(wn=mt[wt++],(wn&192)!==128||Cn===224&&160>wn||Cn===237&&160<=wn||((Lt=mt[wt++])&192)!==128?(wt--,jt.push(65533)):jt.push((Cn&15)<<12|(wn&63)<<6|Lt&63)):244>=Cn?wt>=ht-2?jt.push(65533):(wn=mt[wt++],(wn&192)!==128||(Cn<<28)+(wn-144)>>30||((Lt=mt[wt++])&192)!==128||((Hn=mt[wt++])&192)!==128?(wt--,jt.push(65533)):(Cn=(Cn&7)<<18|(wn&63)<<12|(Lt&63)<<6|Hn&63,Cn-=65536,jt.push((Cn>>10&1023)+55296,(Cn&1023)+56320))):jt.push(65533),8192<=jt.length&&(ln=_d(ln,jt),jt.length=0);Lt=_d(ln,jt)}return Ro(Zt,Ft,Lt),!0}function su(mt,Zt,Ft,ht,wt){if(mt.h!==2)return!1;mt=mu(mt,new ht,wt);var Lt=Lt===void 0?!1:Lt;return Zt.g||(Zt.g={}),ht=mt&&ru(mt),Zt.g[Ft]=mt,Ro(Zt,Ft,ht,Lt),!0}function Du(mt,Zt,Ft,ht,wt){return mt.h!==2?!1:(mt=mu(mt,new ht,wt),nu(Zt,Ft,mt,ht,void 0),!0)}function sp(mt,Zt,Ft){return mt.h!==0&&mt.h!==2?!1:(Zt=Pr(Zt,Ft),mt.h==2?Jl(mt,$o.prototype.j,Zt):Zt.push(mt.g.j()),!0)}function kp(mt,Zt,Ft){return mt.h!==0?!1:(Ro(Zt,Ft,os(mt.g)),!0)}function vu(mt){ms.call(this,mt,-1,_p)}var ap;Dr(vu,ms),vu.prototype.getRows=function(){return wr(this,1)},vu.prototype.getCols=function(){return wr(this,2)},vu.prototype.getPackedDataList=function(){return cs(this)},vu.prototype.getLayout=function(){return Os(this,4,0)};function Qp(mt,Zt){return Il(mt,Zt,ap||(ap={1:Fl,2:Fl,3:Xu,4:kp}))}var _p=[3];function cp(mt){ms.call(this,mt)}var gp;Dr(cp,ms);function Dt(mt,Zt){var Ft=wr(mt,1);if(Ft!=null&&Ft!=null){ss(Zt.g,8);var ht=Zt.g;if(0<=Ft)ss(ht,Ft);else{for(var wt=0;9>wt;wt++)zs(ht,Ft&127|128),Ft>>=7;zs(ht,1)}}ou(Zt,mt,2),ht=wr(mt,3),ht!=null&&Bs(Zt,3,mp(ht)),ht=wr(mt,4),ht!=null&&Bs(Zt,4,mp(ht)),Tu(mt,Zt)}function qt(mt,Zt){return Il(mt,Zt,gp||(gp={1:Fl,2:Al,3:Ip,4:Ip}))}function en(mt){ms.call(this,mt,-1,Lr)}var jn;Dr(en,ms),en.prototype.addClassification=function(mt,Zt){return nu(this,1,mt,cp,Zt),this};function ur(mt,Zt){return Il(mt,Zt,jn||(jn={1:[Du,cp,qt]}))}var Lr=[1];function cr(mt){ms.call(this,mt)}var Ir;Dr(cr,ms);function Kr(mt,Zt){ou(Zt,mt,1),ou(Zt,mt,2),ou(Zt,mt,3),ou(Zt,mt,4),ou(Zt,mt,5),Tu(mt,Zt)}function So(mt,Zt){return Il(mt,Zt,Ir||(Ir={1:Al,2:Al,3:Al,4:Al,5:Al}))}function zo(mt){ms.call(this,mt,-1,Ho)}var Do;Dr(zo,ms);function hs(mt,Zt){return Il(mt,Zt,Do||(Do={1:[Du,cr,So]}))}var Ho=[1];function Oo(mt){ms.call(this,mt)}var Ko;Dr(Oo,ms);function us(mt,Zt){ou(Zt,mt,1),ou(Zt,mt,2),ou(Zt,mt,3),ou(Zt,mt,4),ou(Zt,mt,5);var Ft=wr(mt,6);if(Ft!=null&&Ft!=null){ss(Zt.g,48);var ht=Zt.g,wt=Ft;Ft=0>wt,wt=Math.abs(wt);var Lt=wt>>>0;for(wt=Math.floor((wt-Lt)/4294967296),wt>>>=0,Ft&&(wt=~wt>>>0,Lt=(~Lt>>>0)+1,4294967295<Lt&&(Lt=0,wt++,4294967295<wt&&(wt=0))),ls=Lt,Hs=wt,Ft=ls,Lt=Hs;0<Lt||127<Ft;)zs(ht,Ft&127|128),Ft=(Ft>>>7|Lt<<25)>>>0,Lt>>>=7;zs(ht,Ft)}Tu(mt,Zt)}function xs(mt,Zt){return Il(mt,Zt,Ko||(Ko={1:Al,2:Al,3:Al,4:Al,5:Al,6:_h}))}function Gs(mt){ms.call(this,mt,-1,Pt)}var Ds;Dr(Gs,ms),Gs.prototype.getVertexType=function(){return Os(this,1,0)},Gs.prototype.getPrimitiveType=function(){return Os(this,2,0)},Gs.prototype.getVertexBufferList=function(){return cs(this)},Gs.prototype.getIndexBufferList=function(){return Pr(this,4)};function Zl(mt,Zt){return Il(mt,Zt,Ds||(Ds={1:kp,2:kp,3:Xu,4:sp}))}var Pt=[3,4];function Ut(mt){ms.call(this,mt)}var zt;Dr(Ut,ms),Ut.prototype.getMesh=function(){return Ns(this,Gs,1)},Ut.prototype.getPoseTransformMatrix=function(){return Ns(this,vu,2)};function On(mt,Zt){return Il(mt,Zt,zt||(zt={1:[su,Gs,Zl],2:[su,vu,Qp]}))}var Kn=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],fr=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],$n=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],br=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Wr=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],xt=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Jt=[].concat(kn(Kn),kn(fr),kn($n),kn(br),kn(Wr),kn(xt));function nn(mt,Zt,Ft){if(Ft=mt.createShader(Ft===0?mt.VERTEX_SHADER:mt.FRAGMENT_SHADER),mt.shaderSource(Ft,Zt),mt.compileShader(Ft),!mt.getShaderParameter(Ft,mt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+mt.getShaderInfoLog(Ft));return Ft}function Sn(mt){return Ol(mt,cp,1).map(function(Zt){return{index:Os(Zt,1,0),score:Is(Zt,2),label:wr(Zt,3)!=null?Os(Zt,3,""):void 0,displayName:wr(Zt,4)!=null?Os(Zt,4,""):void 0}})}function Pn(mt){return{x:Is(mt,1),y:Is(mt,2),z:Is(mt,3),visibility:wr(mt,4)!=null?Is(mt,4):void 0}}function _n(mt){return Ol(Dp(mt,zo,hs),cr,1).map(Pn)}function Yn(mt,Zt){this.h=mt,this.g=Zt,this.l=0}function Tr(mt,Zt,Ft){return yr(mt,Zt),typeof mt.g.canvas.transferToImageBitmap=="function"?tt.resolve(mt.g.canvas.transferToImageBitmap()):Ft?tt.resolve(mt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(mt.g.canvas):(mt.i===void 0&&(mt.i=document.createElement("canvas")),new tt(function(ht){mt.i.height=mt.g.canvas.height,mt.i.width=mt.g.canvas.width,mt.i.getContext("2d",{}).drawImage(mt.g.canvas,0,0,mt.g.canvas.width,mt.g.canvas.height),ht(mt.i)}))}function yr(mt,Zt){var Ft=mt.g;if(mt.m===void 0){var ht=nn(Ft,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),wt=nn(Ft,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Lt=Ft.createProgram();if(Ft.attachShader(Lt,ht),Ft.attachShader(Lt,wt),Ft.linkProgram(Lt),!Ft.getProgramParameter(Lt,Ft.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Ft.getProgramInfoLog(Lt));ht=mt.m=Lt,Ft.useProgram(ht),wt=Ft.getUniformLocation(ht,"sampler0"),mt.j={I:Ft.getAttribLocation(ht,"aVertex"),H:Ft.getAttribLocation(ht,"aTex"),ca:wt},mt.s=Ft.createBuffer(),Ft.bindBuffer(Ft.ARRAY_BUFFER,mt.s),Ft.enableVertexAttribArray(mt.j.I),Ft.vertexAttribPointer(mt.j.I,2,Ft.FLOAT,!1,0,0),Ft.bufferData(Ft.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Ft.STATIC_DRAW),Ft.bindBuffer(Ft.ARRAY_BUFFER,null),mt.o=Ft.createBuffer(),Ft.bindBuffer(Ft.ARRAY_BUFFER,mt.o),Ft.enableVertexAttribArray(mt.j.H),Ft.vertexAttribPointer(mt.j.H,2,Ft.FLOAT,!1,0,0),Ft.bufferData(Ft.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Ft.STATIC_DRAW),Ft.bindBuffer(Ft.ARRAY_BUFFER,null),Ft.uniform1i(wt,0)}ht=mt.j,Ft.useProgram(mt.m),Ft.canvas.width=Zt.width,Ft.canvas.height=Zt.height,Ft.viewport(0,0,Zt.width,Zt.height),Ft.activeTexture(Ft.TEXTURE0),mt.h.bindTexture2d(Zt.glName),Ft.enableVertexAttribArray(ht.I),Ft.bindBuffer(Ft.ARRAY_BUFFER,mt.s),Ft.vertexAttribPointer(ht.I,2,Ft.FLOAT,!1,0,0),Ft.enableVertexAttribArray(ht.H),Ft.bindBuffer(Ft.ARRAY_BUFFER,mt.o),Ft.vertexAttribPointer(ht.H,2,Ft.FLOAT,!1,0,0),Ft.bindFramebuffer(Ft.DRAW_FRAMEBUFFER?Ft.DRAW_FRAMEBUFFER:Ft.FRAMEBUFFER,null),Ft.clearColor(0,0,0,0),Ft.clear(Ft.COLOR_BUFFER_BIT),Ft.colorMask(!0,!0,!0,!0),Ft.drawArrays(Ft.TRIANGLE_FAN,0,4),Ft.disableVertexAttribArray(ht.I),Ft.disableVertexAttribArray(ht.H),Ft.bindBuffer(Ft.ARRAY_BUFFER,null),mt.h.bindTexture2d(0)}function Qr(mt){this.g=mt}var lo=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Jo(mt,Zt){return Zt+mt}function Eo(mt,Zt){window[mt]=Zt}function Hr(mt){var Zt=document.createElement("script");return Zt.setAttribute("src",mt),Zt.setAttribute("crossorigin","anonymous"),new tt(function(Ft){Zt.addEventListener("load",function(){Ft()},!1),Zt.addEventListener("error",function(){Ft()},!1),document.body.appendChild(Zt)})}function fo(){return to(function(mt){switch(mt.g){case 1:return mt.m=2,dr(mt,WebAssembly.instantiate(lo),4);case 4:mt.g=3,mt.m=0;break;case 2:return mt.m=0,mt.j=null,mt.return(!1);case 3:return mt.return(!0)}})}function To(mt){if(this.g=mt,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=tt.resolve(),this.P="",this.B={},this.locateFile=mt&&mt.locateFile||Jo,typeof window=="object")var Zt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Zt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=Zt,mt.options){Zt=En(Object.keys(mt.options));for(var Ft=Zt.next();!Ft.done;Ft=Zt.next()){Ft=Ft.value;var ht=mt.options[Ft].default;ht!==void 0&&(this.j[Ft]=typeof ht=="function"?ht():ht)}}}bt=To.prototype,bt.close=function(){return this.i&&this.i.delete(),tt.resolve()};function No(mt){var Zt,Ft,ht,wt,Lt,jt,ln,Cn,wn,Hn,or;return to(function(hr){switch(hr.g){case 1:return mt.R?(Zt=mt.g.files===void 0?[]:typeof mt.g.files=="function"?mt.g.files(mt.j):mt.g.files,dr(hr,fo(),2)):hr.return();case 2:if(Ft=hr.h,typeof window=="object")return Eo("createMediapipeSolutionsWasm",{locateFile:mt.locateFile}),Eo("createMediapipeSolutionsPackedAssets",{locateFile:mt.locateFile}),jt=Zt.filter(function(pr){return pr.data!==void 0}),ln=Zt.filter(function(pr){return pr.data===void 0}),Cn=tt.all(jt.map(function(pr){var Nr=Bt(mt,pr.url);if(pr.path!==void 0){var Yr=pr.path;Nr=Nr.then(function(Br){return mt.overrideFile(Yr,Br),tt.resolve(Br)})}return Nr})),wn=tt.all(ln.map(function(pr){return pr.simd===void 0||pr.simd&&Ft||!pr.simd&&!Ft?Hr(mt.locateFile(pr.url,mt.S)):tt.resolve()})).then(function(){var pr,Nr,Yr;return to(function(Br){if(Br.g==1)return pr=window.createMediapipeSolutionsWasm,Nr=window.createMediapipeSolutionsPackedAssets,Yr=mt,dr(Br,pr(Nr),2);Yr.h=Br.h,Br.g=0})}),Hn=function(){return to(function(pr){return mt.g.graph&&mt.g.graph.url?pr=dr(pr,Bt(mt,mt.g.graph.url),0):(pr.g=0,pr=void 0),pr})}(),dr(hr,tt.all([wn,Cn,Hn]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return ht=Zt.filter(function(pr){return pr.simd===void 0||pr.simd&&Ft||!pr.simd&&!Ft}).map(function(pr){return mt.locateFile(pr.url,mt.S)}),importScripts.apply(null,kn(ht)),wt=mt,dr(hr,createMediapipeSolutionsWasm(Module),6);case 6:wt.h=hr.h,mt.l=new OffscreenCanvas(1,1),mt.h.canvas=mt.l,Lt=mt.h.GL.createContext(mt.l,{antialias:!1,alpha:!1,aa:typeof WebGL2RenderingContext<"u"?2:1}),mt.h.GL.makeContextCurrent(Lt),hr.g=4;break;case 7:if(mt.l=document.createElement("canvas"),or=mt.l.getContext("webgl2",{}),!or&&(or=mt.l.getContext("webgl",{}),!or))return alert("Failed to create WebGL canvas context when passing video frame."),hr.return();mt.D=or,mt.h.canvas=mt.l,mt.h.createContext(mt.l,!0,!0,{});case 4:mt.i=new mt.h.SolutionWasm,mt.R=!1,hr.g=0}})}function Mo(mt){var Zt,Ft,ht,wt,Lt,jt,ln,Cn;return to(function(wn){if(wn.g==1){if(mt.g.graph&&mt.g.graph.url&&mt.P===mt.g.graph.url)return wn.return();if(mt.o=!0,!mt.g.graph||!mt.g.graph.url){wn.g=2;return}return mt.P=mt.g.graph.url,dr(wn,Bt(mt,mt.g.graph.url),3)}for(wn.g!=2&&(Zt=wn.h,mt.i.loadGraph(Zt)),Ft=En(Object.keys(mt.B)),ht=Ft.next();!ht.done;ht=Ft.next())wt=ht.value,mt.i.overrideFile(wt,mt.B[wt]);if(mt.B={},mt.g.listeners)for(Lt=En(mt.g.listeners),jt=Lt.next();!jt.done;jt=Lt.next())ln=jt.value,Fn(mt,ln);Cn=mt.j,mt.j={},mt.setOptions(Cn),wn.g=0})}bt.reset=function(){var mt=this;return to(function(Zt){mt.i&&(mt.i.reset(),mt.m={},mt.s={}),Zt.g=0})},bt.setOptions=function(mt,Zt){var Ft=this;if(Zt=Zt||this.g.options){for(var ht=[],wt=[],Lt={},jt=En(Object.keys(mt)),ln=jt.next();!ln.done;Lt={K:Lt.K,L:Lt.L},ln=jt.next()){var Cn=ln.value;Cn in this.j&&this.j[Cn]===mt[Cn]||(this.j[Cn]=mt[Cn],ln=Zt[Cn],ln!==void 0&&(ln.onChange&&(Lt.K=ln.onChange,Lt.L=mt[Cn],ht.push(function(wn){return function(){var Hn;return to(function(or){if(or.g==1)return dr(or,wn.K(wn.L),2);Hn=or.h,Hn===!0&&(Ft.o=!0),or.g=0})}}(Lt))),ln.graphOptionXref&&(Cn={valueNumber:ln.type===1?mt[Cn]:0,valueBoolean:ln.type===0?mt[Cn]:!1,valueString:ln.type===2?mt[Cn]:""},ln=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),ln.graphOptionXref),Cn),wt.push(ln))))}(ht.length!==0||wt.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(wt),this.v=(this.v===void 0?[]:this.v).concat(ht))}};function Ot(mt){var Zt,Ft,ht,wt,Lt,jt,ln;return to(function(Cn){switch(Cn.g){case 1:if(!mt.o)return Cn.return();if(!mt.v){Cn.g=2;break}Zt=En(mt.v),Ft=Zt.next();case 3:if(Ft.done){Cn.g=5;break}return ht=Ft.value,dr(Cn,ht(),4);case 4:Ft=Zt.next(),Cn.g=3;break;case 5:mt.v=void 0;case 2:if(mt.A){for(wt=new mt.h.GraphOptionChangeRequestList,Lt=En(mt.A),jt=Lt.next();!jt.done;jt=Lt.next())ln=jt.value,wt.push_back(ln);mt.i.changeOptions(wt),wt.delete(),mt.A=void 0}mt.o=!1,Cn.g=0}})}bt.initialize=function(){var mt=this;return to(function(Zt){return Zt.g==1?dr(Zt,No(mt),2):Zt.g!=3?dr(Zt,Mo(mt),3):dr(Zt,Ot(mt),0)})};function Bt(mt,Zt){var Ft,ht;return to(function(wt){return Zt in mt.F?wt.return(mt.F[Zt]):(Ft=mt.locateFile(Zt,""),ht=fetch(Ft).then(function(Lt){return Lt.arrayBuffer()}),mt.F[Zt]=ht,wt.return(ht))})}bt.overrideFile=function(mt,Zt){this.i?this.i.overrideFile(mt,Zt):this.B[mt]=Zt},bt.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},bt.send=function(mt,Zt){var Ft=this,ht,wt,Lt,jt,ln,Cn,wn,Hn,or;return to(function(hr){switch(hr.g){case 1:return Ft.g.inputs?(ht=1e3*(Zt??performance.now()),dr(hr,Ft.C,2)):hr.return();case 2:return dr(hr,Ft.initialize(),3);case 3:for(wt=new Ft.h.PacketDataList,Lt=En(Object.keys(mt)),jt=Lt.next();!jt.done;jt=Lt.next())if(ln=jt.value,Cn=Ft.g.inputs[ln]){e:{var pr=mt[ln];switch(Cn.type){case"video":var Nr=Ft.m[Cn.stream];if(Nr||(Nr=new Yn(Ft.h,Ft.D),Ft.m[Cn.stream]=Nr),Nr.l===0&&(Nr.l=Nr.h.createTexture()),typeof HTMLVideoElement<"u"&&pr instanceof HTMLVideoElement)var Yr=pr.videoWidth,Br=pr.videoHeight;else typeof HTMLImageElement<"u"&&pr instanceof HTMLImageElement?(Yr=pr.naturalWidth,Br=pr.naturalHeight):(Yr=pr.width,Br=pr.height);Br={glName:Nr.l,width:Yr,height:Br},Yr=Nr.g,Yr.canvas.width=Br.width,Yr.canvas.height=Br.height,Yr.activeTexture(Yr.TEXTURE0),Nr.h.bindTexture2d(Nr.l),Yr.texImage2D(Yr.TEXTURE_2D,0,Yr.RGBA,Yr.RGBA,Yr.UNSIGNED_BYTE,pr),Nr.h.bindTexture2d(0),Nr=Br;break e;case"detections":for(Nr=Ft.m[Cn.stream],Nr||(Nr=new Qr(Ft.h),Ft.m[Cn.stream]=Nr),Nr.data||(Nr.data=new Nr.g.DetectionListData),Nr.data.reset(pr.length),Br=0;Br<pr.length;++Br){Yr=pr[Br];var io=Nr.data,no=io.setBoundingBox,ts=Br,Cs=Yr.T,Ts=new Oo;if(Ro(Ts,1,Cs.X),Ro(Ts,2,Cs.Y),Ro(Ts,3,Cs.height),Ro(Ts,4,Cs.width),Ro(Ts,5,Cs.rotation),Ro(Ts,6,Cs.W),Cs=iu(Ts,us),no.call(io,ts,Cs),Yr.O)for(io=0;io<Yr.O.length;++io){Ts=Yr.O[io];var Ll=!!Ts.visibility;no=Nr.data,ts=no.addNormalizedLandmark,Cs=Br,Ts=Object.assign(Object.assign({},Ts),{visibility:Ll?Ts.visibility:0}),Ll=new cr,Ro(Ll,1,Ts.x),Ro(Ll,2,Ts.y),Ro(Ll,3,Ts.z),Ts.visibility&&Ro(Ll,4,Ts.visibility),Ts=iu(Ll,Kr),ts.call(no,Cs,Ts)}if(Yr.M)for(io=0;io<Yr.M.length;++io)no=Nr.data,ts=no.addClassification,Cs=Br,Ts=Yr.M[io],Ll=new cp,Ro(Ll,2,Ts.score),Ts.index&&Ro(Ll,1,Ts.index),Ts.label&&Ro(Ll,3,Ts.label),Ts.displayName&&Ro(Ll,4,Ts.displayName),Ts=iu(Ll,Dt),ts.call(no,Cs,Ts)}Nr=Nr.data;break e;default:Nr={}}}switch(wn=Nr,Hn=Cn.stream,Cn.type){case"video":wt.pushTexture2d(Object.assign(Object.assign({},wn),{stream:Hn,timestamp:ht}));break;case"detections":or=wn,or.stream=Hn,or.timestamp=ht,wt.pushDetectionList(or);break;default:throw Error("Unknown input config type: '"+Cn.type+"'")}}return Ft.i.send(wt),dr(hr,Ft.C,4);case 4:wt.delete(),hr.g=0}})};function rn(mt,Zt,Ft){var ht,wt,Lt,jt,ln,Cn,wn,Hn,or,hr,pr,Nr,Yr,Br;return to(function(io){switch(io.g){case 1:if(!Ft)return io.return(Zt);for(ht={},wt=0,Lt=En(Object.keys(Ft)),jt=Lt.next();!jt.done;jt=Lt.next())ln=jt.value,Cn=Ft[ln],typeof Cn!="string"&&Cn.type==="texture"&&Zt[Cn.stream]!==void 0&&++wt;1<wt&&(mt.G=!1),wn=En(Object.keys(Ft)),jt=wn.next();case 2:if(jt.done){io.g=4;break}if(Hn=jt.value,or=Ft[Hn],typeof or=="string")return Yr=ht,Br=Hn,dr(io,gn(mt,Hn,Zt[or]),14);if(hr=Zt[or.stream],or.type==="detection_list"){if(hr){for(var no=hr.getRectList(),ts=hr.getLandmarksList(),Cs=hr.getClassificationsList(),Ts=[],Ll=0;Ll<no.size();++Ll){var Ju=Dp(no.get(Ll),Oo,xs);Ju={T:{X:Is(Ju,1),Y:Is(Ju,2),height:Is(Ju,3),width:Is(Ju,4),rotation:Is(Ju,5,0),W:Os(Ju,6,0)},O:_n(ts.get(Ll)),M:Sn(Dp(Cs.get(Ll),en,ur))},Ts.push(Ju)}no=Ts}else no=[];ht[Hn]=no,io.g=7;break}if(or.type==="proto_list"){if(hr){for(no=Array(hr.size()),ts=0;ts<hr.size();ts++)no[ts]=hr.get(ts);hr.delete()}else no=[];ht[Hn]=no,io.g=7;break}if(hr===void 0){io.g=3;break}if(or.type==="float_list"){ht[Hn]=hr,io.g=7;break}if(or.type==="proto"){ht[Hn]=hr,io.g=7;break}if(or.type!=="texture")throw Error("Unknown output config type: '"+or.type+"'");return pr=mt.s[Hn],pr||(pr=new Yn(mt.h,mt.D),mt.s[Hn]=pr),dr(io,Tr(pr,hr,mt.G),13);case 13:Nr=io.h,ht[Hn]=Nr;case 7:or.transform&&ht[Hn]&&(ht[Hn]=or.transform(ht[Hn])),io.g=3;break;case 14:Yr[Br]=io.h;case 3:jt=wn.next(),io.g=2;break;case 4:return io.return(ht)}})}function gn(mt,Zt,Ft){var ht;return to(function(wt){return typeof Ft=="number"||Ft instanceof Uint8Array||Ft instanceof mt.h.Uint8BlobList?wt.return(Ft):Ft instanceof mt.h.Texture2dDataOut?(ht=mt.s[Zt],ht||(ht=new Yn(mt.h,mt.D),mt.s[Zt]=ht),wt.return(Tr(ht,Ft,mt.G))):wt.return(void 0)})}function Fn(mt,Zt){for(var Ft=Zt.name||"$",ht=[].concat(kn(Zt.wants)),wt=new mt.h.StringList,Lt=En(Zt.wants),jt=Lt.next();!jt.done;jt=Lt.next())wt.push_back(jt.value);Lt=mt.h.PacketListener.implement({onResults:function(ln){for(var Cn={},wn=0;wn<Zt.wants.length;++wn)Cn[ht[wn]]=ln.get(wn);var Hn=mt.listeners[Ft];Hn&&(mt.C=rn(mt,Cn,Zt.outs).then(function(or){or=Hn(or);for(var hr=0;hr<Zt.wants.length;++hr){var pr=Cn[ht[hr]];typeof pr=="object"&&pr.hasOwnProperty&&pr.hasOwnProperty("delete")&&pr.delete()}or&&(mt.C=or)}))}}),mt.i.attachMultiListener(wt,Lt),wt.delete()}bt.onResults=function(mt,Zt){this.listeners[Zt||"$"]=mt},Xo("Solution",To),Xo("OptionType",{BOOL:0,NUMBER:1,Z:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Rt(mt){return mt.map(Mt)}function Mt(mt){mt=Dp(mt,Ut,On);var Zt=mt.getMesh();if(!Zt)return mt;var Ft=new Float32Array(Zt.getVertexBufferList());Zt.getVertexBufferList=function(){return Ft};var ht=new Uint32Array(Zt.getIndexBufferList());return Zt.getIndexBufferList=function(){return ht},mt}function Ht(mt){var Zt=this;mt=mt||{},this.g=new To({locateFile:mt.locateFile,files:[{url:"holistic_solution_packed_assets_loader.js"},{simd:!1,url:"holistic_solution_wasm_bin.js"},{simd:!0,url:"holistic_solution_simd_wasm_bin.js"}],graph:{url:"holistic.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:"left_hand_landmarks right_hand_landmarks face_landmarks pose_landmarks world_landmarks segmentation_mask image_transformed multi_face_geometry".split(" "),outs:{image:{type:"texture",stream:"image_transformed"},leftHandLandmarks:{type:"proto",stream:"left_hand_landmarks",transform:_n},rightHandLandmarks:{type:"proto",stream:"right_hand_landmarks",transform:_n},faceLandmarks:{type:"proto",stream:"face_landmarks",transform:_n},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:_n},ea:{type:"proto",stream:"world_landmarks",transform:_n},segmentationMask:{type:"texture",stream:"segmentation_mask"},multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:Rt}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,default:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(Ft){var ht,wt,Lt,jt;return to(function(ln){if(ln.g==1){switch(ht="",Ft){case 1:ht="pose_landmark_full.tflite";break;case 2:ht="pose_landmark_heavy.tflite";break;default:ht="pose_landmark_lite.tflite"}return wt="third_party/mediapipe/modules/pose_landmark/"+ht,Lt=Zt.g.locateFile(ht,""),dr(ln,fetch(Lt),3)}return ln.g!=2?dr(ln,ln.h.arrayBuffer(),2):(jt=ln.h,Zt.g.overrideFile(wt,jt),dr(ln,Zt.g.reset(),0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},refineFaceLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineFaceLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}})}bt=Ht.prototype,bt.close=function(){return this.g.close(),tt.resolve()},bt.onResults=function(mt){this.g.onResults(mt)},bt.initialize=function(){var mt=this;return to(function(Zt){return dr(Zt,mt.g.initialize(),0)})},bt.reset=function(){this.g.reset()},bt.send=function(mt){var Zt=this;return to(function(Ft){return dr(Ft,Zt.g.send(mt),0)})},bt.setOptions=function(mt){this.g.setOptions(mt)},Xo("Holistic",Ht),Xo("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),Xo("FACEMESH_LIPS",Kn),Xo("FACEMESH_LEFT_EYE",fr),Xo("FACEMESH_LEFT_EYEBROW",$n),Xo("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),Xo("FACEMESH_RIGHT_EYE",br),Xo("FACEMESH_RIGHT_EYEBROW",Wr),Xo("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),Xo("FACEMESH_FACE_OVAL",xt),Xo("FACEMESH_CONTOURS",Jt),Xo("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Xo("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Xo("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Xo("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Xo("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Xo("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Xo("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Xo("matrixDataToMatrix",function(mt){for(var Zt=mt.getCols(),Ft=mt.getRows(),ht=mt.getPackedDataList(),wt=[],Lt=0;Lt<Ft;Lt++)wt.push(Array(Zt));for(Lt=0;Lt<Ft;Lt++)for(var jt=0;jt<Zt;jt++){var ln=mt.getLayout()===1?Lt*Zt+jt:jt*Ft+Lt;wt[Lt][jt]=ht[ln]}return wt}),Xo("VERSION","0.5.1635989137")}).call(op);const Cp={};(function(){var bt;function vt(Rt){var Mt=0;return function(){return Mt<Rt.length?{done:!1,value:Rt[Mt++]}:{done:!0}}}var Ct=typeof Object.defineProperties=="function"?Object.defineProperty:function(Rt,Mt,Ht){return Rt==Array.prototype||Rt==Object.prototype||(Rt[Mt]=Ht.value),Rt};function Xt(Rt){Rt=[typeof globalThis=="object"&&globalThis,Rt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Mt=0;Mt<Rt.length;++Mt){var Ht=Rt[Mt];if(Ht&&Ht.Math==Math)return Ht}throw Error("Cannot find global object")}var Yt=Xt(this);function hn(Rt,Mt){if(Mt)e:{var Ht=Yt;Rt=Rt.split(".");for(var mt=0;mt<Rt.length-1;mt++){var Zt=Rt[mt];if(!(Zt in Ht))break e;Ht=Ht[Zt]}Rt=Rt[Rt.length-1],mt=Ht[Rt],Mt=Mt(mt),Mt!=mt&&Mt!=null&&Ct(Ht,Rt,{configurable:!0,writable:!0,value:Mt})}}hn("Symbol",function(Rt){function Mt(Ft){if(this instanceof Mt)throw new TypeError("Symbol is not a constructor");return new Ht(mt+(Ft||"")+"_"+Zt++,Ft)}function Ht(Ft,ht){this.g=Ft,Ct(this,"description",{configurable:!0,writable:!0,value:ht})}if(Rt)return Rt;Ht.prototype.toString=function(){return this.g};var mt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Zt=0;return Mt}),hn("Symbol.iterator",function(Rt){if(Rt)return Rt;Rt=Symbol("Symbol.iterator");for(var Mt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ht=0;Ht<Mt.length;Ht++){var mt=Yt[Mt[Ht]];typeof mt=="function"&&typeof mt.prototype[Rt]!="function"&&Ct(mt.prototype,Rt,{configurable:!0,writable:!0,value:function(){return In(vt(this))}})}return Rt});function In(Rt){return Rt={next:Rt},Rt[Symbol.iterator]=function(){return this},Rt}function En(Rt){var Mt=typeof Symbol<"u"&&Symbol.iterator&&Rt[Symbol.iterator];return Mt?Mt.call(Rt):{next:vt(Rt)}}function kn(Rt){if(!(Rt instanceof Array)){Rt=En(Rt);for(var Mt,Ht=[];!(Mt=Rt.next()).done;)Ht.push(Mt.value);Rt=Ht}return Rt}var mr=typeof Object.create=="function"?Object.create:function(Rt){function Mt(){}return Mt.prototype=Rt,new Mt},Vr;if(typeof Object.setPrototypeOf=="function")Vr=Object.setPrototypeOf;else{var Gr;e:{var Io={a:!0},ko={};try{ko.__proto__=Io,Gr=ko.a;break e}catch{}Gr=!1}Vr=Gr?function(Rt,Mt){if(Rt.__proto__=Mt,Rt.__proto__!==Mt)throw new TypeError(Rt+" is not extensible");return Rt}:null}var Mr=Vr;function Dr(Rt,Mt){if(Rt.prototype=mr(Mt.prototype),Rt.prototype.constructor=Rt,Mr)Mr(Rt,Mt);else for(var Ht in Mt)if(Ht!="prototype")if(Object.defineProperties){var mt=Object.getOwnPropertyDescriptor(Mt,Ht);mt&&Object.defineProperty(Rt,Ht,mt)}else Rt[Ht]=Mt[Ht];Rt.na=Mt.prototype}function Bo(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Uo(Rt){if(Rt.l)throw new TypeError("Generator is already running");Rt.l=!0}Bo.prototype.s=function(Rt){this.h=Rt};function gs(Rt,Mt){Rt.j={da:Mt,ea:!0},Rt.g=Rt.o||Rt.u}Bo.prototype.return=function(Rt){this.j={return:Rt},this.g=this.u};function dr(Rt,Mt,Ht){return Rt.g=Ht,{value:Mt}}function Vu(Rt){this.g=new Bo,this.h=Rt}function Su(Rt,Mt){Uo(Rt.g);var Ht=Rt.g.i;return Ht?ga(Rt,"return"in Ht?Ht.return:function(mt){return{value:mt,done:!0}},Mt,Rt.g.return):(Rt.g.return(Mt),fs(Rt))}function ga(Rt,Mt,Ht,mt){try{var Zt=Mt.call(Rt.g.i,Ht);if(!(Zt instanceof Object))throw new TypeError("Iterator result "+Zt+" is not an object");if(!Zt.done)return Rt.g.l=!1,Zt;var Ft=Zt.value}catch(ht){return Rt.g.i=null,gs(Rt.g,ht),fs(Rt)}return Rt.g.i=null,mt.call(Rt.g,Ft),fs(Rt)}function fs(Rt){for(;Rt.g.g;)try{var Mt=Rt.h(Rt.g);if(Mt)return Rt.g.l=!1,{value:Mt.value,done:!1}}catch(Ht){Rt.g.h=void 0,gs(Rt.g,Ht)}if(Rt.g.l=!1,Rt.g.j){if(Mt=Rt.g.j,Rt.g.j=null,Mt.ea)throw Mt.da;return{value:Mt.return,done:!0}}return{value:void 0,done:!0}}function Fp(Rt){this.next=function(Mt){return Uo(Rt.g),Rt.g.i?Mt=ga(Rt,Rt.g.i.next,Mt,Rt.g.s):(Rt.g.s(Mt),Mt=fs(Rt)),Mt},this.throw=function(Mt){return Uo(Rt.g),Rt.g.i?Mt=ga(Rt,Rt.g.i.throw,Mt,Rt.g.s):(gs(Rt.g,Mt),Mt=fs(Rt)),Mt},this.return=function(Mt){return Su(Rt,Mt)},this[Symbol.iterator]=function(){return this}}function As(Rt){function Mt(mt){return Rt.next(mt)}function Ht(mt){return Rt.throw(mt)}return new tt(function(mt,Zt){function Ft(ht){ht.done?mt(ht.value):tt.resolve(ht.value).then(Mt,Ht).then(Ft,Zt)}Ft(Rt.next())})}function to(Rt){return As(new Fp(new Vu(Rt)))}hn("Promise",function(Rt){function Mt(ht){this.h=0,this.i=void 0,this.g=[],this.s=!1;var wt=this.j();try{ht(wt.resolve,wt.reject)}catch(Lt){wt.reject(Lt)}}function Ht(){this.g=null}function mt(ht){return ht instanceof Mt?ht:new Mt(function(wt){wt(ht)})}if(Rt)return Rt;Ht.prototype.h=function(ht){if(this.g==null){this.g=[];var wt=this;this.i(function(){wt.l()})}this.g.push(ht)};var Zt=Yt.setTimeout;Ht.prototype.i=function(ht){Zt(ht,0)},Ht.prototype.l=function(){for(;this.g&&this.g.length;){var ht=this.g;this.g=[];for(var wt=0;wt<ht.length;++wt){var Lt=ht[wt];ht[wt]=null;try{Lt()}catch(jt){this.j(jt)}}}this.g=null},Ht.prototype.j=function(ht){this.i(function(){throw ht})},Mt.prototype.j=function(){function ht(jt){return function(ln){Lt||(Lt=!0,jt.call(wt,ln))}}var wt=this,Lt=!1;return{resolve:ht(this.D),reject:ht(this.l)}},Mt.prototype.D=function(ht){if(ht===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(ht instanceof Mt)this.H(ht);else{e:switch(typeof ht){case"object":var wt=ht!=null;break e;case"function":wt=!0;break e;default:wt=!1}wt?this.A(ht):this.o(ht)}},Mt.prototype.A=function(ht){var wt=void 0;try{wt=ht.then}catch(Lt){this.l(Lt);return}typeof wt=="function"?this.I(wt,ht):this.o(ht)},Mt.prototype.l=function(ht){this.u(2,ht)},Mt.prototype.o=function(ht){this.u(1,ht)},Mt.prototype.u=function(ht,wt){if(this.h!=0)throw Error("Cannot settle("+ht+", "+wt+"): Promise already settled in state"+this.h);this.h=ht,this.i=wt,this.h===2&&this.G(),this.B()},Mt.prototype.G=function(){var ht=this;Zt(function(){if(ht.C()){var wt=Yt.console;typeof wt<"u"&&wt.error(ht.i)}},1)},Mt.prototype.C=function(){if(this.s)return!1;var ht=Yt.CustomEvent,wt=Yt.Event,Lt=Yt.dispatchEvent;return typeof Lt>"u"?!0:(typeof ht=="function"?ht=new ht("unhandledrejection",{cancelable:!0}):typeof wt=="function"?ht=new wt("unhandledrejection",{cancelable:!0}):(ht=Yt.document.createEvent("CustomEvent"),ht.initCustomEvent("unhandledrejection",!1,!0,ht)),ht.promise=this,ht.reason=this.i,Lt(ht))},Mt.prototype.B=function(){if(this.g!=null){for(var ht=0;ht<this.g.length;++ht)Ft.h(this.g[ht]);this.g=null}};var Ft=new Ht;return Mt.prototype.H=function(ht){var wt=this.j();ht.M(wt.resolve,wt.reject)},Mt.prototype.I=function(ht,wt){var Lt=this.j();try{ht.call(wt,Lt.resolve,Lt.reject)}catch(jt){Lt.reject(jt)}},Mt.prototype.then=function(ht,wt){function Lt(wn,Hn){return typeof wn=="function"?function(or){try{jt(wn(or))}catch(hr){ln(hr)}}:Hn}var jt,ln,Cn=new Mt(function(wn,Hn){jt=wn,ln=Hn});return this.M(Lt(ht,jt),Lt(wt,ln)),Cn},Mt.prototype.catch=function(ht){return this.then(void 0,ht)},Mt.prototype.M=function(ht,wt){function Lt(){switch(jt.h){case 1:ht(jt.i);break;case 2:wt(jt.i);break;default:throw Error("Unexpected state: "+jt.h)}}var jt=this;this.g==null?Ft.h(Lt):this.g.push(Lt),this.s=!0},Mt.resolve=mt,Mt.reject=function(ht){return new Mt(function(wt,Lt){Lt(ht)})},Mt.race=function(ht){return new Mt(function(wt,Lt){for(var jt=En(ht),ln=jt.next();!ln.done;ln=jt.next())mt(ln.value).M(wt,Lt)})},Mt.all=function(ht){var wt=En(ht),Lt=wt.next();return Lt.done?mt([]):new Mt(function(jt,ln){function Cn(or){return function(hr){wn[or]=hr,Hn--,Hn==0&&jt(wn)}}var wn=[],Hn=0;do wn.push(void 0),Hn++,mt(Lt.value).M(Cn(wn.length-1),ln),Lt=wt.next();while(!Lt.done)})},Mt});function Lu(Rt,Mt){Rt instanceof String&&(Rt+="");var Ht=0,mt=!1,Zt={next:function(){if(!mt&&Ht<Rt.length){var Ft=Ht++;return{value:Mt(Ft,Rt[Ft]),done:!1}}return mt=!0,{done:!0,value:void 0}}};return Zt[Symbol.iterator]=function(){return Zt},Zt}var Xp=typeof Object.assign=="function"?Object.assign:function(Rt,Mt){for(var Ht=1;Ht<arguments.length;Ht++){var mt=arguments[Ht];if(mt)for(var Zt in mt)Object.prototype.hasOwnProperty.call(mt,Zt)&&(Rt[Zt]=mt[Zt])}return Rt};hn("Object.assign",function(Rt){return Rt||Xp}),hn("Object.is",function(Rt){return Rt||function(Mt,Ht){return Mt===Ht?Mt!==0||1/Mt===1/Ht:Mt!==Mt&&Ht!==Ht}}),hn("Array.prototype.includes",function(Rt){return Rt||function(Mt,Ht){var mt=this;mt instanceof String&&(mt=String(mt));var Zt=mt.length;for(Ht=Ht||0,0>Ht&&(Ht=Math.max(Ht+Zt,0));Ht<Zt;Ht++){var Ft=mt[Ht];if(Ft===Mt||Object.is(Ft,Mt))return!0}return!1}}),hn("String.prototype.includes",function(Rt){return Rt||function(Mt,Ht){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Mt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Mt,Ht||0)!==-1}}),hn("Array.prototype.keys",function(Rt){return Rt||function(){return Lu(this,function(Mt){return Mt})}});var ba=this||self;function Xo(Rt,Mt){Rt=Rt.split(".");var Ht=ba;Rt[0]in Ht||typeof Ht.execScript>"u"||Ht.execScript("var "+Rt[0]);for(var mt;Rt.length&&(mt=Rt.shift());)Rt.length||Mt===void 0?Ht[mt]&&Ht[mt]!==Object.prototype[mt]?Ht=Ht[mt]:Ht=Ht[mt]={}:Ht[mt]=Mt}function El(){throw Error("Invalid UTF8")}function hu(Rt,Mt){return Mt=String.fromCharCode.apply(null,Mt),Rt==null?Mt:Rt+Mt}var Bu,pp=typeof TextDecoder<"u",_d,yp=typeof TextEncoder<"u",Eu={},ku=null;function Rp(Rt){var Mt;Mt===void 0&&(Mt=0),Hl(),Mt=Eu[Mt];for(var Ht=Array(Math.floor(Rt.length/3)),mt=Mt[64]||"",Zt=0,Ft=0;Zt<Rt.length-2;Zt+=3){var ht=Rt[Zt],wt=Rt[Zt+1],Lt=Rt[Zt+2],jt=Mt[ht>>2];ht=Mt[(ht&3)<<4|wt>>4],wt=Mt[(wt&15)<<2|Lt>>6],Lt=Mt[Lt&63],Ht[Ft++]=jt+ht+wt+Lt}switch(jt=0,Lt=mt,Rt.length-Zt){case 2:jt=Rt[Zt+1],Lt=Mt[(jt&15)<<2]||mt;case 1:Rt=Rt[Zt],Ht[Ft]=Mt[Rt>>2]+Mt[(Rt&3)<<4|jt>>4]+Lt+mt}return Ht.join("")}function mp(Rt){var Mt=Rt.length,Ht=3*Mt/4;Ht%3?Ht=Math.floor(Ht):"=.".indexOf(Rt[Mt-1])!=-1&&(Ht="=.".indexOf(Rt[Mt-2])!=-1?Ht-2:Ht-1);var mt=new Uint8Array(Ht),Zt=0;return Bl(Rt,function(Ft){mt[Zt++]=Ft}),Zt!==Ht?mt.subarray(0,Zt):mt}function Bl(Rt,Mt){function Ht(Lt){for(;mt<Rt.length;){var jt=Rt.charAt(mt++),ln=ku[jt];if(ln!=null)return ln;if(!/^[\s\xa0]*$/.test(jt))throw Error("Unknown base64 encoding at char: "+jt)}return Lt}Hl();for(var mt=0;;){var Zt=Ht(-1),Ft=Ht(0),ht=Ht(64),wt=Ht(64);if(wt===64&&Zt===-1)break;Mt(Zt<<2|Ft>>4),ht!=64&&(Mt(Ft<<4&240|ht>>2),wt!=64&&Mt(ht<<6&192|wt))}}function Hl(){if(!ku){ku={};for(var Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Mt=["+/=","+/","-_=","-_.","-_"],Ht=0;5>Ht;Ht++){var mt=Rt.concat(Mt[Ht].split(""));Eu[Ht]=mt;for(var Zt=0;Zt<mt.length;Zt++){var Ft=mt[Zt];ku[Ft]===void 0&&(ku[Ft]=Zt)}}}}var _f=typeof Uint8Array=="function";function Ku(Rt){return _f&&Rt!=null&&Rt instanceof Uint8Array}var Ls;function Sl(Rt){if(this.L=Rt,Rt!==null&&Rt.length===0)throw Error("ByteString should be constructed with non-empty values")}var Kl=typeof Uint8Array.prototype.slice=="function",ys=0,qs=0;function pu(Rt,Mt){if(Rt.constructor===Uint8Array)return Rt;if(Rt.constructor===ArrayBuffer)return new Uint8Array(Rt);if(Rt.constructor===Array)return new Uint8Array(Rt);if(Rt.constructor===String)return mp(Rt);if(Rt.constructor===Sl)return!Mt&&(Mt=Rt.L)&&Mt.constructor===Uint8Array?Mt:(Mt=Rt.L,Mt=Mt==null||Ku(Mt)?Mt:typeof Mt=="string"?mp(Mt):null,(Rt=Rt.L=Mt)?new Uint8Array(Rt):Ls||(Ls=new Uint8Array(0)));if(Rt instanceof Uint8Array)return new Uint8Array(Rt.buffer,Rt.byteOffset,Rt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Pl(Rt,Mt){return Error("Invalid wire type: "+Rt+" (at position "+Mt+")")}function ls(){return Error("Failed to read varint, encoding is invalid.")}function Hs(Rt,Mt){Mt=Mt===void 0?{}:Mt,Mt=Mt.v===void 0?!1:Mt.v,this.h=null,this.g=this.i=this.j=0,this.v=Mt,Rt&&xl(this,Rt)}function xl(Rt,Mt){Rt.h=pu(Mt,Rt.v),Rt.j=0,Rt.i=Rt.h.length,Rt.g=Rt.j}Hs.prototype.reset=function(){this.g=this.j};function $o(Rt){if(Rt.g>Rt.i)throw Error("Tried to read past the end of the data "+Rt.g+" > "+Rt.i)}function _a(Rt){var Mt=Rt.h,Ht=Mt[Rt.g],mt=Ht&127;if(128>Ht)return Rt.g+=1,$o(Rt),mt;if(Ht=Mt[Rt.g+1],mt|=(Ht&127)<<7,128>Ht)return Rt.g+=2,$o(Rt),mt;if(Ht=Mt[Rt.g+2],mt|=(Ht&127)<<14,128>Ht)return Rt.g+=3,$o(Rt),mt;if(Ht=Mt[Rt.g+3],mt|=(Ht&127)<<21,128>Ht)return Rt.g+=4,$o(Rt),mt;if(Ht=Mt[Rt.g+4],Rt.g+=5,mt|=(Ht&15)<<28,128>Ht)return $o(Rt),mt;if(128<=Mt[Rt.g++]&&128<=Mt[Rt.g++]&&128<=Mt[Rt.g++]&&128<=Mt[Rt.g++]&&128<=Mt[Rt.g++])throw ls();return $o(Rt),mt}var os=[];function Xs(){this.g=[]}Xs.prototype.length=function(){return this.g.length},Xs.prototype.end=function(){var Rt=this.g;return this.g=[],Rt};function Cl(Rt,Mt){for(;127<Mt;)Rt.g.push(Mt&127|128),Mt>>>=7;Rt.g.push(Mt)}function tu(Rt){var Mt={},Ht=Mt.W===void 0?!1:Mt.W;this.l={v:Mt.v===void 0?!1:Mt.v},this.W=Ht,Mt=this.l,os.length?(Ht=os.pop(),Mt&&(Ht.v=Mt.v),Rt&&xl(Ht,Rt),Rt=Ht):Rt=new Hs(Rt,Mt),this.g=Rt,this.j=this.g.g,this.h=this.i=-1}tu.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function zs(Rt){var Mt=Rt.g;if(Mt.g==Mt.i)return!1;Rt.j=Rt.g.g;var Ht=_a(Rt.g)>>>0;if(Mt=Ht>>>3,Ht&=7,!(0<=Ht&&5>=Ht))throw Pl(Ht,Rt.j);if(1>Mt)throw Error("Invalid field number: "+Mt+" (at position "+Rt.j+")");return Rt.i=Mt,Rt.h=Ht,!0}function ss(Rt){switch(Rt.h){case 0:if(Rt.h!=0)ss(Rt);else e:{Rt=Rt.g;for(var Mt=Rt.g,Ht=Mt+10;Mt<Ht;)if(!(Rt.h[Mt++]&128)){Rt.g=Mt,$o(Rt);break e}throw ls()}break;case 1:Rt=Rt.g,Rt.g+=8,$o(Rt);break;case 2:Rt.h!=2?ss(Rt):(Mt=_a(Rt.g)>>>0,Rt=Rt.g,Rt.g+=Mt,$o(Rt));break;case 5:Rt=Rt.g,Rt.g+=4,$o(Rt);break;case 3:Mt=Rt.i;do{if(!zs(Rt))throw Error("Unmatched start-group tag: stream EOF");if(Rt.h==4){if(Rt.i!=Mt)throw Error("Unmatched end-group tag");break}ss(Rt)}while(1);break;default:throw Pl(Rt.h,Rt.j)}}var Yl=[];function zl(){this.i=[],this.h=0,this.g=new Xs}function _c(Rt,Mt){Mt.length!==0&&(Rt.i.push(Mt),Rt.h+=Mt.length)}function zu(Rt,Mt){if(Mt=Mt.ba){_c(Rt,Rt.g.end());for(var Ht=0;Ht<Mt.length;Ht++)_c(Rt,Mt[Ht])}}var mu=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Jl(Rt,Mt){Object.isFrozen(Rt)||(mu?Rt[mu]|=Mt:Rt.N!==void 0?Rt.N|=Mt:Object.defineProperties(Rt,{N:{value:Mt,configurable:!0,writable:!0,enumerable:!1}}))}function gu(Rt){var Mt;return mu?Mt=Rt[mu]:Mt=Rt.N,Mt??0}function Ys(Rt){return Jl(Rt,1),Rt}function Tl(Rt){return Array.isArray(Rt)?!!(gu(Rt)&2):!1}function Bs(Rt){if(!Array.isArray(Rt))throw Error("cannot mark non-array as immutable");Jl(Rt,2)}function bs(Rt){return Rt!==null&&typeof Rt=="object"&&!Array.isArray(Rt)&&Rt.constructor===Object}var $l=Object.freeze(Ys([]));function ps(Rt){if(Tl(Rt.m))throw Error("Cannot mutate an immutable Message")}var as=typeof Symbol<"u"&&typeof Symbol.hasInstance<"u";function Cu(Rt){return{value:Rt,configurable:!1,writable:!1,enumerable:!1}}function ks(Rt,Mt,Ht){return Mt===-1?null:Mt>=Rt.i?Rt.g?Rt.g[Mt]:void 0:Ht!==void 0&&Ht&&Rt.g&&(Ht=Rt.g[Mt],Ht!=null)?Ht:Rt.m[Mt+Rt.h]}function Fo(Rt,Mt,Ht,mt){mt=mt===void 0?!1:mt,ps(Rt),Mt<Rt.i&&!mt?Rt.m[Mt+Rt.h]=Ht:(Rt.g||(Rt.g=Rt.m[Rt.i+Rt.h]={}))[Mt]=Ht}function go(Rt,Mt,Ht,mt){Ht=Ht===void 0?!0:Ht,mt=mt===void 0?!1:mt;var Zt=ks(Rt,Mt,mt);return Zt==null&&(Zt=$l),Tl(Rt.m)?Ht&&(Bs(Zt),Object.freeze(Zt)):(Zt===$l||Tl(Zt))&&(Zt=Ys(Zt.slice()),Fo(Rt,Mt,Zt,mt)),Zt}function Ss(Rt,Mt,Ht){return Rt=ks(Rt,Mt),Rt=Rt==null?Rt:+Rt,Rt??(Ht===void 0?0:Ht)}function Rl(Rt,Mt,Ht,mt){Rt.j||(Rt.j={});var Zt=Tl(Rt.m),Ft=Rt.j[Ht];if(!Ft){mt=go(Rt,Ht,!0,mt===void 0?!1:mt),Ft=[],Zt=Zt||Tl(mt);for(var ht=0;ht<mt.length;ht++)Ft[ht]=new Mt(mt[ht]),Zt&&Bs(Ft[ht].m);Zt&&(Bs(Ft),Object.freeze(Ft)),Rt.j[Ht]=Ft}return Ft}function ms(Rt,Mt,Ht,mt,Zt){var Ft=Ft===void 0?!1:Ft;return ps(Rt),Ft=Rl(Rt,Ht,Mt,Ft),Ht=mt||new Ht,Rt=go(Rt,Mt),Zt!=null?(Ft.splice(Zt,0,Ht),Rt.splice(Zt,0,Ht.m)):(Ft.push(Ht),Rt.push(Ht.m)),Ht}function Es(Rt,Mt){return Rt=ks(Rt,Mt),Rt??0}function Cr(Rt,Mt){return Rt=ks(Rt,Mt),Rt??""}function wr(Rt){switch(typeof Rt){case"number":return isFinite(Rt)?Rt:String(Rt);case"object":if(Rt&&!Array.isArray(Rt)){if(Ku(Rt))return Rp(Rt);if(Rt instanceof Sl){var Mt=Rt.L;return Mt=Mt==null||typeof Mt=="string"?Mt:_f&&Mt instanceof Uint8Array?Rp(Mt):null,(Rt.L=Mt)||""}}}return Rt}function Pr(Rt){var Mt=Is;return Mt=Mt===void 0?Ro:Mt,Os(Rt,Mt)}function cs(Rt,Mt){if(Rt!=null){if(Array.isArray(Rt))Rt=Os(Rt,Mt);else if(bs(Rt)){var Ht={},mt;for(mt in Rt)Ht[mt]=cs(Rt[mt],Mt);Rt=Ht}else Rt=Mt(Rt);return Rt}}function Os(Rt,Mt){for(var Ht=Rt.slice(),mt=0;mt<Ht.length;mt++)Ht[mt]=cs(Ht[mt],Mt);return Array.isArray(Rt)&&gu(Rt)&1&&Ys(Ht),Ht}function Is(Rt){return Rt&&typeof Rt=="object"&&Rt.toJSON?Rt.toJSON():(Rt=wr(Rt),Array.isArray(Rt)?Pr(Rt):Rt)}function Ro(Rt){return Ku(Rt)?new Uint8Array(Rt):Rt}function Ns(Rt,Mt,Ht){Rt||(Rt=Ol),Ol=null;var mt=this.constructor.h;Rt||(Rt=mt?[mt]:[]),this.h=(mt?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=Rt;e:{if(mt=this.m.length,Rt=mt-1,mt&&(mt=this.m[Rt],bs(mt))){this.i=Rt-this.h,this.g=mt;break e}Mt!==void 0&&-1<Mt?(this.i=Math.max(Mt,Rt+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(Ht)for(Mt=0;Mt<Ht.length;Mt++)if(Rt=Ht[Mt],Rt<this.i)Rt+=this.h,(mt=this.m[Rt])?Array.isArray(mt)&&Ys(mt):this.m[Rt]=$l;else{mt=this.g||(this.g=this.m[this.i+this.h]={});var Zt=mt[Rt];Zt?Array.isArray(Zt)&&Ys(Zt):mt[Rt]=$l}}Ns.prototype.toJSON=function(){return Pr(this.m)},Ns.prototype.toString=function(){return this.m.toString()};var Ol;function nu(){Ns.apply(this,arguments)}if(Dr(nu,Ns),as){var ru={};Object.defineProperties(nu,(ru[Symbol.hasInstance]=Cu(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),ru))}function Tu(Rt,Mt,Ht){if(Ht){var mt={},Zt;for(Zt in Ht){var Ft=Ht[Zt],ht=Ft.ha;ht||(mt.F=Ft.la||Ft.fa.P,Ft.aa?(mt.U=_h(Ft.aa),ht=function(wt){return function(Lt,jt,ln){return wt.F(Lt,jt,ln,wt.U)}}(mt)):Ft.ca?(mt.T=Fl(Ft.X.g,Ft.ca),ht=function(wt){return function(Lt,jt,ln){return wt.F(Lt,jt,ln,wt.T)}}(mt)):ht=mt.F,Ft.ha=ht),ht(Mt,Rt,Ft.X),mt={F:mt.F,U:mt.U,T:mt.T}}}zu(Mt,Rt)}var Nu=Symbol();function Il(Rt,Mt,Ht){return Rt[Nu]||(Rt[Nu]=function(mt,Zt){return Mt(mt,Zt,Ht)})}function iu(Rt){var Mt=Rt[Nu];if(!Mt){var Ht=Dt(Rt);Mt=function(mt,Zt){return qt(mt,Zt,Ht)},Rt[Nu]=Mt}return Mt}function Dp(Rt){var Mt=Rt.aa;if(Mt)return iu(Mt);if(Mt=Rt.ka)return Il(Rt.X.g,Mt,Rt.ca)}function ou(Rt){var Mt=Dp(Rt),Ht=Rt.X,mt=Rt.fa.O;return Mt?function(Zt,Ft){return mt(Zt,Ft,Ht,Mt)}:function(Zt,Ft){return mt(Zt,Ft,Ht)}}function Al(Rt,Mt,Ht,mt,Zt,Ft){Rt=Rt();var ht=0;for(Rt.length&&typeof Rt[0]!="number"&&(Ht(Mt,Rt[0]),ht++);ht<Rt.length;){Ht=Rt[ht++];for(var wt=ht+1;wt<Rt.length&&typeof Rt[wt]!="number";)wt++;var Lt=Rt[ht++];switch(wt-=ht,wt){case 0:mt(Mt,Ht,Lt);break;case 1:mt(Mt,Ht,Lt,Rt[ht++]);break;case 2:Zt(Mt,Ht,Lt,Rt[ht++],Rt[ht++]);break;case 3:wt=Rt[ht++];var jt=Rt[ht++],ln=Rt[ht++];Array.isArray(ln)?Zt(Mt,Ht,Lt,wt,jt,ln):Ft(Mt,Ht,Lt,wt,jt,ln);break;case 4:Ft(Mt,Ht,Lt,Rt[ht++],Rt[ht++],Rt[ht++],Rt[ht++]);break;default:throw Error("unexpected number of binary field arguments: "+wt)}}return Mt}var Xu=Symbol();function _h(Rt){var Mt=Rt[Xu];if(!Mt){var Ht=vu(Rt);Mt=function(mt,Zt){return jn(mt,Zt,Ht)},Rt[Xu]=Mt}return Mt}function Fl(Rt,Mt){var Ht=Rt[Xu];return Ht||(Ht=function(mt,Zt){return Tu(mt,Zt,Mt)},Rt[Xu]=Ht),Ht}var Ip=Symbol();function su(Rt,Mt){Rt.push(Mt)}function Du(Rt,Mt,Ht){Rt.push(Mt,Ht.P)}function sp(Rt,Mt,Ht,mt,Zt){var Ft=_h(Zt),ht=Ht.P;Rt.push(Mt,function(wt,Lt,jt){return ht(wt,Lt,jt,mt,Ft)})}function kp(Rt,Mt,Ht,mt,Zt,Ft){var ht=Fl(mt,Ft),wt=Ht.P;Rt.push(Mt,function(Lt,jt,ln){return wt(Lt,jt,ln,mt,ht)})}function vu(Rt){var Mt=Rt[Ip];return Mt||Al(Rt,Rt[Ip]=[],su,Du,sp,kp)}var ap=Symbol();function Qp(Rt,Mt){Rt[0]=Mt}function _p(Rt,Mt,Ht,mt){var Zt=Ht.O;Rt[Mt]=mt?function(Ft,ht,wt){return Zt(Ft,ht,wt,mt)}:Zt}function cp(Rt,Mt,Ht,mt,Zt,Ft){var ht=Ht.O,wt=iu(Zt);Rt[Mt]=function(Lt,jt,ln){return ht(Lt,jt,ln,mt,wt,Ft)}}function gp(Rt,Mt,Ht,mt,Zt,Ft,ht){var wt=Ht.O,Lt=Il(mt,Zt,Ft);Rt[Mt]=function(jt,ln,Cn){return wt(jt,ln,Cn,mt,Lt,ht)}}function Dt(Rt){var Mt=Rt[ap];return Mt||Al(Rt,Rt[ap]={},Qp,_p,cp,gp)}function qt(Rt,Mt,Ht){for(;zs(Mt)&&Mt.h!=4;){var mt=Mt.i,Zt=Ht[mt];if(!Zt){var Ft=Ht[0];Ft&&(Ft=Ft[mt])&&(Zt=Ht[mt]=ou(Ft))}if((!Zt||!Zt(Mt,Rt,mt))&&(Zt=Mt,mt=Rt,Ft=Zt.j,ss(Zt),!Zt.W)){var ht=Zt.g.h;Zt=Zt.g.g,Zt=Ft===Zt?Ls||(Ls=new Uint8Array(0)):Kl?ht.slice(Ft,Zt):new Uint8Array(ht.subarray(Ft,Zt)),(Ft=mt.ba)?Ft.push(Zt):mt.ba=[Zt]}}return Rt}function en(Rt,Mt,Ht){if(Yl.length){var mt=Yl.pop();Rt&&(xl(mt.g,Rt),mt.i=-1,mt.h=-1),Rt=mt}else Rt=new tu(Rt);try{return qt(new Mt,Rt,Dt(Ht))}finally{Mt=Rt.g,Mt.h=null,Mt.j=0,Mt.i=0,Mt.g=0,Mt.v=!1,Rt.i=-1,Rt.h=-1,100>Yl.length&&Yl.push(Rt)}}function jn(Rt,Mt,Ht){for(var mt=Ht.length,Zt=mt%2==1,Ft=Zt?1:0;Ft<mt;Ft+=2)(0,Ht[Ft+1])(Mt,Rt,Ht[Ft]);Tu(Rt,Mt,Zt?Ht[0]:void 0)}function ur(Rt,Mt){var Ht=new zl;jn(Rt,Ht,vu(Mt)),_c(Ht,Ht.g.end()),Rt=new Uint8Array(Ht.h),Mt=Ht.i;for(var mt=Mt.length,Zt=0,Ft=0;Ft<mt;Ft++){var ht=Mt[Ft];Rt.set(ht,Zt),Zt+=ht.length}return Ht.i=[Rt],Rt}function Lr(Rt,Mt){return{O:Rt,P:Mt}}var cr=Lr(function(Rt,Mt,Ht){if(Rt.h!==5)return!1;Rt=Rt.g;var mt=Rt.h[Rt.g],Zt=Rt.h[Rt.g+1],Ft=Rt.h[Rt.g+2],ht=Rt.h[Rt.g+3];return Rt.g+=4,$o(Rt),Zt=(mt<<0|Zt<<8|Ft<<16|ht<<24)>>>0,Rt=2*(Zt>>31)+1,mt=Zt>>>23&255,Zt&=8388607,Fo(Mt,Ht,mt==255?Zt?NaN:1/0*Rt:mt==0?Rt*Math.pow(2,-149)*Zt:Rt*Math.pow(2,mt-150)*(Zt+Math.pow(2,23))),!0},function(Rt,Mt,Ht){if(Mt=ks(Mt,Ht),Mt!=null){Cl(Rt.g,8*Ht+5),Rt=Rt.g;var mt=Mt;mt=(Ht=0>mt?1:0)?-mt:mt,mt===0?0<1/mt?ys=qs=0:(qs=0,ys=2147483648):isNaN(mt)?(qs=0,ys=2147483647):34028234663852886e22<mt?(qs=0,ys=(Ht<<31|2139095040)>>>0):11754943508222875e-54>mt?(mt=Math.round(mt/Math.pow(2,-149)),qs=0,ys=(Ht<<31|mt)>>>0):(Mt=Math.floor(Math.log(mt)/Math.LN2),mt*=Math.pow(2,-Mt),mt=Math.round(8388608*mt),16777216<=mt&&++Mt,qs=0,ys=(Ht<<31|Mt+127<<23|mt&8388607)>>>0),Ht=ys,Rt.g.push(Ht>>>0&255),Rt.g.push(Ht>>>8&255),Rt.g.push(Ht>>>16&255),Rt.g.push(Ht>>>24&255)}}),Ir=Lr(function(Rt,Mt,Ht){if(Rt.h!==0)return!1;for(var mt=Rt.g,Zt=128,Ft=0,ht=Rt=0;4>ht&&128<=Zt;ht++)Zt=mt.h[mt.g++],$o(mt),Ft|=(Zt&127)<<7*ht;if(128<=Zt&&(Zt=mt.h[mt.g++],$o(mt),Ft|=(Zt&127)<<28,Rt|=(Zt&127)>>4),128<=Zt)for(ht=0;5>ht&&128<=Zt;ht++)Zt=mt.h[mt.g++],$o(mt),Rt|=(Zt&127)<<7*ht+3;if(128>Zt)mt=Ft>>>0,Zt=Rt>>>0,(Rt=Zt&2147483648)&&(mt=~mt+1>>>0,Zt=~Zt>>>0,mt==0&&(Zt=Zt+1>>>0)),mt=4294967296*Zt+(mt>>>0);else throw ls();return Fo(Mt,Ht,Rt?-mt:mt),!0},function(Rt,Mt,Ht){if(Mt=ks(Mt,Ht),Mt!=null&&Mt!=null){Cl(Rt.g,8*Ht),Rt=Rt.g;var mt=Mt;for(Ht=0>mt,mt=Math.abs(mt),Mt=mt>>>0,mt=Math.floor((mt-Mt)/4294967296),mt>>>=0,Ht&&(mt=~mt>>>0,Mt=(~Mt>>>0)+1,4294967295<Mt&&(Mt=0,mt++,4294967295<mt&&(mt=0))),ys=Mt,qs=mt,Ht=ys,Mt=qs;0<Mt||127<Ht;)Rt.g.push(Ht&127|128),Ht=(Ht>>>7|Mt<<25)>>>0,Mt>>>=7;Rt.g.push(Ht)}}),Kr=Lr(function(Rt,Mt,Ht){return Rt.h!==0?!1:(Fo(Mt,Ht,_a(Rt.g)),!0)},function(Rt,Mt,Ht){if(Mt=ks(Mt,Ht),Mt!=null&&Mt!=null)if(Cl(Rt.g,8*Ht),Rt=Rt.g,Ht=Mt,0<=Ht)Cl(Rt,Ht);else{for(Mt=0;9>Mt;Mt++)Rt.g.push(Ht&127|128),Ht>>=7;Rt.g.push(1)}}),So=Lr(function(Rt,Mt,Ht){if(Rt.h!==2)return!1;var mt=_a(Rt.g)>>>0;Rt=Rt.g;var Zt=Rt.g;Rt.g+=mt,$o(Rt),Rt=Rt.h;var Ft;if(pp)(Ft=Bu)||(Ft=Bu=new TextDecoder("utf-8",{fatal:!0})),Ft=Ft.decode(Rt.subarray(Zt,Zt+mt));else{mt=Zt+mt;for(var ht=[],wt=null,Lt,jt,ln;Zt<mt;)Lt=Rt[Zt++],128>Lt?ht.push(Lt):224>Lt?Zt>=mt?El():(jt=Rt[Zt++],194>Lt||(jt&192)!==128?(Zt--,El()):ht.push((Lt&31)<<6|jt&63)):240>Lt?Zt>=mt-1?El():(jt=Rt[Zt++],(jt&192)!==128||Lt===224&&160>jt||Lt===237&&160<=jt||((Ft=Rt[Zt++])&192)!==128?(Zt--,El()):ht.push((Lt&15)<<12|(jt&63)<<6|Ft&63)):244>=Lt?Zt>=mt-2?El():(jt=Rt[Zt++],(jt&192)!==128||(Lt<<28)+(jt-144)>>30||((Ft=Rt[Zt++])&192)!==128||((ln=Rt[Zt++])&192)!==128?(Zt--,El()):(Lt=(Lt&7)<<18|(jt&63)<<12|(Ft&63)<<6|ln&63,Lt-=65536,ht.push((Lt>>10&1023)+55296,(Lt&1023)+56320))):El(),8192<=ht.length&&(wt=hu(wt,ht),ht.length=0);Ft=hu(wt,ht)}return Fo(Mt,Ht,Ft),!0},function(Rt,Mt,Ht){if(Mt=ks(Mt,Ht),Mt!=null){var mt=!1;if(mt=mt===void 0?!1:mt,yp){if(mt&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(Mt))throw Error("Found an unpaired surrogate");Mt=(_d||(_d=new TextEncoder)).encode(Mt)}else{for(var Zt=0,Ft=new Uint8Array(3*Mt.length),ht=0;ht<Mt.length;ht++){var wt=Mt.charCodeAt(ht);if(128>wt)Ft[Zt++]=wt;else{if(2048>wt)Ft[Zt++]=wt>>6|192;else{if(55296<=wt&&57343>=wt){if(56319>=wt&&ht<Mt.length){var Lt=Mt.charCodeAt(++ht);if(56320<=Lt&&57343>=Lt){wt=1024*(wt-55296)+Lt-56320+65536,Ft[Zt++]=wt>>18|240,Ft[Zt++]=wt>>12&63|128,Ft[Zt++]=wt>>6&63|128,Ft[Zt++]=wt&63|128;continue}else ht--}if(mt)throw Error("Found an unpaired surrogate");wt=65533}Ft[Zt++]=wt>>12|224,Ft[Zt++]=wt>>6&63|128}Ft[Zt++]=wt&63|128}}Mt=Ft.subarray(0,Zt)}Cl(Rt.g,8*Ht+2),Cl(Rt.g,Mt.length),_c(Rt,Rt.g.end()),_c(Rt,Mt)}}),zo=Lr(function(Rt,Mt,Ht,mt,Zt){if(Rt.h!==2)return!1;Mt=ms(Mt,Ht,mt),Ht=Rt.g.i,mt=_a(Rt.g)>>>0;var Ft=Rt.g.g+mt,ht=Ft-Ht;if(0>=ht&&(Rt.g.i=Ft,Zt(Mt,Rt),ht=Ft-Rt.g.g),ht)throw Error("Message parsing ended unexpectedly. Expected to read "+(mt+" bytes, instead read "+(mt-ht)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return Rt.g.g=Ft,Rt.g.i=Ht,!0},function(Rt,Mt,Ht,mt,Zt){if(Mt=Rl(Mt,mt,Ht),Mt!=null)for(mt=0;mt<Mt.length;mt++){var Ft=Rt;Cl(Ft.g,8*Ht+2);var ht=Ft.g.end();_c(Ft,ht),ht.push(Ft.h),Ft=ht,Zt(Mt[mt],Rt),ht=Rt;var wt=Ft.pop();for(wt=ht.h+ht.g.length()-wt;127<wt;)Ft.push(wt&127|128),wt>>>=7,ht.h++;Ft.push(wt),ht.h++}});function Do(){nu.apply(this,arguments)}if(Dr(Do,nu),as){var hs={};Object.defineProperties(Do,(hs[Symbol.hasInstance]=Cu(Object[Symbol.hasInstance]),hs))}function Ho(Rt){Do.call(this,Rt)}Dr(Ho,Do);function Oo(){return[1,Kr,2,cr,3,So,4,So]}function Ko(Rt){Do.call(this,Rt,-1,xs)}Dr(Ko,Do),Ko.prototype.addClassification=function(Rt,Mt){return ms(this,1,Ho,Rt,Mt),this};function us(){return[1,zo,Ho,Oo]}var xs=[1];function Gs(Rt){Do.call(this,Rt)}Dr(Gs,Do);function Ds(){return[1,cr,2,cr,3,cr,4,cr,5,cr]}function Zl(Rt){Do.call(this,Rt,-1,Ut)}Dr(Zl,Do);function Pt(){return[1,zo,Gs,Ds]}var Ut=[1];function zt(Rt){Do.call(this,Rt)}Dr(zt,Do);function On(){return[1,cr,2,cr,3,cr,4,cr,5,cr,6,Ir]}var Kn=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],fr=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],$n=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],br=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Wr=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],xt=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Jt=[].concat(kn(Kn),kn(fr),kn($n),kn(br),kn(Wr),kn(xt));function nn(Rt,Mt,Ht){if(Ht=Rt.createShader(Ht===0?Rt.VERTEX_SHADER:Rt.FRAGMENT_SHADER),Rt.shaderSource(Ht,Mt),Rt.compileShader(Ht),!Rt.getShaderParameter(Ht,Rt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+Rt.getShaderInfoLog(Ht));return Ht}function Sn(Rt){return Rl(Rt,Ho,1).map(function(Mt){return{index:Es(Mt,1),ga:Ss(Mt,2),label:ks(Mt,3)!=null?Cr(Mt,3):void 0,displayName:ks(Mt,4)!=null?Cr(Mt,4):void 0}})}function Pn(Rt){return{x:Ss(Rt,1),y:Ss(Rt,2),z:Ss(Rt,3),visibility:ks(Rt,4)!=null?Ss(Rt,4):void 0}}function _n(Rt,Mt){this.h=Rt,this.g=Mt,this.l=0}function Yn(Rt,Mt,Ht){return Tr(Rt,Mt),typeof Rt.g.canvas.transferToImageBitmap=="function"?tt.resolve(Rt.g.canvas.transferToImageBitmap()):Ht?tt.resolve(Rt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(Rt.g.canvas):(Rt.i===void 0&&(Rt.i=document.createElement("canvas")),new tt(function(mt){Rt.i.height=Rt.g.canvas.height,Rt.i.width=Rt.g.canvas.width,Rt.i.getContext("2d",{}).drawImage(Rt.g.canvas,0,0,Rt.g.canvas.width,Rt.g.canvas.height),mt(Rt.i)}))}function Tr(Rt,Mt){var Ht=Rt.g;if(Rt.o===void 0){var mt=nn(Ht,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Zt=nn(Ht,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Ft=Ht.createProgram();if(Ht.attachShader(Ft,mt),Ht.attachShader(Ft,Zt),Ht.linkProgram(Ft),!Ht.getProgramParameter(Ft,Ht.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Ht.getProgramInfoLog(Ft));mt=Rt.o=Ft,Ht.useProgram(mt),Zt=Ht.getUniformLocation(mt,"sampler0"),Rt.j={K:Ht.getAttribLocation(mt,"aVertex"),J:Ht.getAttribLocation(mt,"aTex"),ma:Zt},Rt.u=Ht.createBuffer(),Ht.bindBuffer(Ht.ARRAY_BUFFER,Rt.u),Ht.enableVertexAttribArray(Rt.j.K),Ht.vertexAttribPointer(Rt.j.K,2,Ht.FLOAT,!1,0,0),Ht.bufferData(Ht.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Ht.STATIC_DRAW),Ht.bindBuffer(Ht.ARRAY_BUFFER,null),Rt.s=Ht.createBuffer(),Ht.bindBuffer(Ht.ARRAY_BUFFER,Rt.s),Ht.enableVertexAttribArray(Rt.j.J),Ht.vertexAttribPointer(Rt.j.J,2,Ht.FLOAT,!1,0,0),Ht.bufferData(Ht.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Ht.STATIC_DRAW),Ht.bindBuffer(Ht.ARRAY_BUFFER,null),Ht.uniform1i(Zt,0)}mt=Rt.j,Ht.useProgram(Rt.o),Ht.canvas.width=Mt.width,Ht.canvas.height=Mt.height,Ht.viewport(0,0,Mt.width,Mt.height),Ht.activeTexture(Ht.TEXTURE0),Rt.h.bindTexture2d(Mt.glName),Ht.enableVertexAttribArray(mt.K),Ht.bindBuffer(Ht.ARRAY_BUFFER,Rt.u),Ht.vertexAttribPointer(mt.K,2,Ht.FLOAT,!1,0,0),Ht.enableVertexAttribArray(mt.J),Ht.bindBuffer(Ht.ARRAY_BUFFER,Rt.s),Ht.vertexAttribPointer(mt.J,2,Ht.FLOAT,!1,0,0),Ht.bindFramebuffer(Ht.DRAW_FRAMEBUFFER?Ht.DRAW_FRAMEBUFFER:Ht.FRAMEBUFFER,null),Ht.clearColor(0,0,0,0),Ht.clear(Ht.COLOR_BUFFER_BIT),Ht.colorMask(!0,!0,!0,!0),Ht.drawArrays(Ht.TRIANGLE_FAN,0,4),Ht.disableVertexAttribArray(mt.K),Ht.disableVertexAttribArray(mt.J),Ht.bindBuffer(Ht.ARRAY_BUFFER,null),Rt.h.bindTexture2d(0)}function yr(Rt){this.g=Rt}var Qr=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function lo(Rt,Mt){return Mt+Rt}function Jo(Rt,Mt){window[Rt]=Mt}function Eo(Rt){var Mt=document.createElement("script");return Mt.setAttribute("src",Rt),Mt.setAttribute("crossorigin","anonymous"),new tt(function(Ht){Mt.addEventListener("load",function(){Ht()},!1),Mt.addEventListener("error",function(){Ht()},!1),document.body.appendChild(Mt)})}function Hr(){return to(function(Rt){switch(Rt.g){case 1:return Rt.o=2,dr(Rt,WebAssembly.instantiate(Qr),4);case 4:Rt.g=3,Rt.o=0;break;case 2:return Rt.o=0,Rt.j=null,Rt.return(!1);case 3:return Rt.return(!0)}})}function fo(Rt){if(this.g=Rt,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=tt.resolve(),this.Y="",this.C={},this.locateFile=Rt&&Rt.locateFile||lo,typeof window=="object")var Mt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Mt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.$=Mt,Rt.options){Mt=En(Object.keys(Rt.options));for(var Ht=Mt.next();!Ht.done;Ht=Mt.next()){Ht=Ht.value;var mt=Rt.options[Ht].default;mt!==void 0&&(this.j[Ht]=typeof mt=="function"?mt():mt)}}}bt=fo.prototype,bt.close=function(){return this.i&&this.i.delete(),tt.resolve()};function To(Rt){var Mt,Ht,mt,Zt,Ft,ht,wt,Lt,jt,ln,Cn;return to(function(wn){switch(wn.g){case 1:return Rt.Z?(Mt=Rt.g.files===void 0?[]:typeof Rt.g.files=="function"?Rt.g.files(Rt.j):Rt.g.files,dr(wn,Hr(),2)):wn.return();case 2:if(Ht=wn.h,typeof window=="object")return Jo("createMediapipeSolutionsWasm",{locateFile:Rt.locateFile}),Jo("createMediapipeSolutionsPackedAssets",{locateFile:Rt.locateFile}),ht=Mt.filter(function(Hn){return Hn.data!==void 0}),wt=Mt.filter(function(Hn){return Hn.data===void 0}),Lt=tt.all(ht.map(function(Hn){var or=Ot(Rt,Hn.url);if(Hn.path!==void 0){var hr=Hn.path;or=or.then(function(pr){return Rt.overrideFile(hr,pr),tt.resolve(pr)})}return or})),jt=tt.all(wt.map(function(Hn){return Hn.simd===void 0||Hn.simd&&Ht||!Hn.simd&&!Ht?Eo(Rt.locateFile(Hn.url,Rt.$)):tt.resolve()})).then(function(){var Hn,or,hr;return to(function(pr){if(pr.g==1)return Hn=window.createMediapipeSolutionsWasm,or=window.createMediapipeSolutionsPackedAssets,hr=Rt,dr(pr,Hn(or),2);hr.h=pr.h,pr.g=0})}),ln=function(){return to(function(Hn){return Rt.g.graph&&Rt.g.graph.url?Hn=dr(Hn,Ot(Rt,Rt.g.graph.url),0):(Hn.g=0,Hn=void 0),Hn})}(),dr(wn,tt.all([jt,Lt,ln]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return mt=Mt.filter(function(Hn){return Hn.simd===void 0||Hn.simd&&Ht||!Hn.simd&&!Ht}).map(function(Hn){return Rt.locateFile(Hn.url,Rt.$)}),importScripts.apply(null,kn(mt)),Zt=Rt,dr(wn,createMediapipeSolutionsWasm(Module),6);case 6:Zt.h=wn.h,Rt.l=new OffscreenCanvas(1,1),Rt.h.canvas=Rt.l,Ft=Rt.h.GL.createContext(Rt.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),Rt.h.GL.makeContextCurrent(Ft),wn.g=4;break;case 7:if(Rt.l=document.createElement("canvas"),Cn=Rt.l.getContext("webgl2",{}),!Cn&&(Cn=Rt.l.getContext("webgl",{}),!Cn))return alert("Failed to create WebGL canvas context when passing video frame."),wn.return();Rt.G=Cn,Rt.h.canvas=Rt.l,Rt.h.createContext(Rt.l,!0,!0,{});case 4:Rt.i=new Rt.h.SolutionWasm,Rt.Z=!1,wn.g=0}})}function No(Rt){var Mt,Ht,mt,Zt,Ft,ht,wt,Lt;return to(function(jt){if(jt.g==1){if(Rt.g.graph&&Rt.g.graph.url&&Rt.Y===Rt.g.graph.url)return jt.return();if(Rt.s=!0,!Rt.g.graph||!Rt.g.graph.url){jt.g=2;return}return Rt.Y=Rt.g.graph.url,dr(jt,Ot(Rt,Rt.g.graph.url),3)}for(jt.g!=2&&(Mt=jt.h,Rt.i.loadGraph(Mt)),Ht=En(Object.keys(Rt.C)),mt=Ht.next();!mt.done;mt=Ht.next())Zt=mt.value,Rt.i.overrideFile(Zt,Rt.C[Zt]);if(Rt.C={},Rt.g.listeners)for(Ft=En(Rt.g.listeners),ht=Ft.next();!ht.done;ht=Ft.next())wt=ht.value,gn(Rt,wt);Lt=Rt.j,Rt.j={},Rt.setOptions(Lt),jt.g=0})}bt.reset=function(){var Rt=this;return to(function(Mt){Rt.i&&(Rt.i.reset(),Rt.o={},Rt.u={}),Mt.g=0})},bt.setOptions=function(Rt,Mt){var Ht=this;if(Mt=Mt||this.g.options){for(var mt=[],Zt=[],Ft={},ht=En(Object.keys(Rt)),wt=ht.next();!wt.done;Ft={R:Ft.R,S:Ft.S},wt=ht.next()){var Lt=wt.value;Lt in this.j&&this.j[Lt]===Rt[Lt]||(this.j[Lt]=Rt[Lt],wt=Mt[Lt],wt!==void 0&&(wt.onChange&&(Ft.R=wt.onChange,Ft.S=Rt[Lt],mt.push(function(jt){return function(){var ln;return to(function(Cn){if(Cn.g==1)return dr(Cn,jt.R(jt.S),2);ln=Cn.h,ln===!0&&(Ht.s=!0),Cn.g=0})}}(Ft))),wt.graphOptionXref&&(Lt={valueNumber:wt.type===1?Rt[Lt]:0,valueBoolean:wt.type===0?Rt[Lt]:!1,valueString:wt.type===2?Rt[Lt]:""},wt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),wt.graphOptionXref),Lt),Zt.push(wt))))}(mt.length!==0||Zt.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(Zt),this.A=(this.A===void 0?[]:this.A).concat(mt))}};function Mo(Rt){var Mt,Ht,mt,Zt,Ft,ht,wt;return to(function(Lt){switch(Lt.g){case 1:if(!Rt.s)return Lt.return();if(!Rt.A){Lt.g=2;break}Mt=En(Rt.A),Ht=Mt.next();case 3:if(Ht.done){Lt.g=5;break}return mt=Ht.value,dr(Lt,mt(),4);case 4:Ht=Mt.next(),Lt.g=3;break;case 5:Rt.A=void 0;case 2:if(Rt.B){for(Zt=new Rt.h.GraphOptionChangeRequestList,Ft=En(Rt.B),ht=Ft.next();!ht.done;ht=Ft.next())wt=ht.value,Zt.push_back(wt);Rt.i.changeOptions(Zt),Zt.delete(),Rt.B=void 0}Rt.s=!1,Lt.g=0}})}bt.initialize=function(){var Rt=this;return to(function(Mt){return Mt.g==1?dr(Mt,To(Rt),2):Mt.g!=3?dr(Mt,No(Rt),3):dr(Mt,Mo(Rt),0)})};function Ot(Rt,Mt){var Ht,mt;return to(function(Zt){return Mt in Rt.H?Zt.return(Rt.H[Mt]):(Ht=Rt.locateFile(Mt,""),mt=fetch(Ht).then(function(Ft){return Ft.arrayBuffer()}),Rt.H[Mt]=mt,Zt.return(mt))})}bt.overrideFile=function(Rt,Mt){this.i?this.i.overrideFile(Rt,Mt):this.C[Rt]=Mt},bt.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},bt.send=function(Rt,Mt){var Ht=this,mt,Zt,Ft,ht,wt,Lt,jt,ln,Cn;return to(function(wn){switch(wn.g){case 1:return Ht.g.inputs?(mt=1e3*(Mt??performance.now()),dr(wn,Ht.D,2)):wn.return();case 2:return dr(wn,Ht.initialize(),3);case 3:for(Zt=new Ht.h.PacketDataList,Ft=En(Object.keys(Rt)),ht=Ft.next();!ht.done;ht=Ft.next())if(wt=ht.value,Lt=Ht.g.inputs[wt]){e:{var Hn=Rt[wt];switch(Lt.type){case"video":var or=Ht.o[Lt.stream];if(or||(or=new _n(Ht.h,Ht.G),Ht.o[Lt.stream]=or),or.l===0&&(or.l=or.h.createTexture()),typeof HTMLVideoElement<"u"&&Hn instanceof HTMLVideoElement)var hr=Hn.videoWidth,pr=Hn.videoHeight;else typeof HTMLImageElement<"u"&&Hn instanceof HTMLImageElement?(hr=Hn.naturalWidth,pr=Hn.naturalHeight):(hr=Hn.width,pr=Hn.height);pr={glName:or.l,width:hr,height:pr},hr=or.g,hr.canvas.width=pr.width,hr.canvas.height=pr.height,hr.activeTexture(hr.TEXTURE0),or.h.bindTexture2d(or.l),hr.texImage2D(hr.TEXTURE_2D,0,hr.RGBA,hr.RGBA,hr.UNSIGNED_BYTE,Hn),or.h.bindTexture2d(0),or=pr;break e;case"detections":for(or=Ht.o[Lt.stream],or||(or=new yr(Ht.h),Ht.o[Lt.stream]=or),or.data||(or.data=new or.g.DetectionListData),or.data.reset(Hn.length),pr=0;pr<Hn.length;++pr){hr=Hn[pr];var Nr=or.data,Yr=Nr.setBoundingBox,Br=pr,io=hr.boundingBox,no=new zt;if(Fo(no,1,io.xCenter),Fo(no,2,io.yCenter),Fo(no,3,io.height),Fo(no,4,io.width),Fo(no,5,io.rotation),Fo(no,6,io.rectId),io=ur(no,On),Yr.call(Nr,Br,io),hr.landmarks)for(Nr=0;Nr<hr.landmarks.length;++Nr){no=hr.landmarks[Nr];var ts=!!no.visibility;Yr=or.data,Br=Yr.addNormalizedLandmark,io=pr,no=Object.assign(Object.assign({},no),{visibility:ts?no.visibility:0}),ts=new Gs,Fo(ts,1,no.x),Fo(ts,2,no.y),Fo(ts,3,no.z),no.visibility&&Fo(ts,4,no.visibility),no=ur(ts,Ds),Br.call(Yr,io,no)}if(hr.V)for(Nr=0;Nr<hr.V.length;++Nr)Yr=or.data,Br=Yr.addClassification,io=pr,no=hr.V[Nr],ts=new Ho,Fo(ts,2,no.ga),no.index&&Fo(ts,1,no.index),no.label&&Fo(ts,3,no.label),no.displayName&&Fo(ts,4,no.displayName),no=ur(ts,Oo),Br.call(Yr,io,no)}or=or.data;break e;default:or={}}}switch(jt=or,ln=Lt.stream,Lt.type){case"video":Zt.pushTexture2d(Object.assign(Object.assign({},jt),{stream:ln,timestamp:mt}));break;case"detections":Cn=jt,Cn.stream=ln,Cn.timestamp=mt,Zt.pushDetectionList(Cn);break;default:throw Error("Unknown input config type: '"+Lt.type+"'")}}return Ht.i.send(Zt),dr(wn,Ht.D,4);case 4:Zt.delete(),wn.g=0}})};function Bt(Rt,Mt,Ht){var mt,Zt,Ft,ht,wt,Lt,jt,ln,Cn,wn,Hn,or,hr,pr;return to(function(Nr){switch(Nr.g){case 1:if(!Ht)return Nr.return(Mt);for(mt={},Zt=0,Ft=En(Object.keys(Ht)),ht=Ft.next();!ht.done;ht=Ft.next())wt=ht.value,Lt=Ht[wt],typeof Lt!="string"&&Lt.type==="texture"&&Mt[Lt.stream]!==void 0&&++Zt;1<Zt&&(Rt.I=!1),jt=En(Object.keys(Ht)),ht=jt.next();case 2:if(ht.done){Nr.g=4;break}if(ln=ht.value,Cn=Ht[ln],typeof Cn=="string")return hr=mt,pr=ln,dr(Nr,rn(Rt,ln,Mt[Cn]),14);if(wn=Mt[Cn.stream],Cn.type==="detection_list"){if(wn){for(var Yr=wn.getRectList(),Br=wn.getLandmarksList(),io=wn.getClassificationsList(),no=[],ts=0;ts<Yr.size();++ts){var Cs=en(Yr.get(ts),zt,On);Cs={boundingBox:{xCenter:Ss(Cs,1),yCenter:Ss(Cs,2),height:Ss(Cs,3),width:Ss(Cs,4),rotation:Ss(Cs,5,0),rectId:Es(Cs,6)},landmarks:Rl(en(Br.get(ts),Zl,Pt),Gs,1).map(Pn),V:Sn(en(io.get(ts),Ko,us))},no.push(Cs)}Yr=no}else Yr=[];mt[ln]=Yr,Nr.g=7;break}if(Cn.type==="proto_list"){if(wn){for(Yr=Array(wn.size()),Br=0;Br<wn.size();Br++)Yr[Br]=wn.get(Br);wn.delete()}else Yr=[];mt[ln]=Yr,Nr.g=7;break}if(wn===void 0){Nr.g=3;break}if(Cn.type==="float_list"){mt[ln]=wn,Nr.g=7;break}if(Cn.type==="proto"){mt[ln]=wn,Nr.g=7;break}if(Cn.type!=="texture")throw Error("Unknown output config type: '"+Cn.type+"'");return Hn=Rt.u[ln],Hn||(Hn=new _n(Rt.h,Rt.G),Rt.u[ln]=Hn),dr(Nr,Yn(Hn,wn,Rt.I),13);case 13:or=Nr.h,mt[ln]=or;case 7:Cn.transform&&mt[ln]&&(mt[ln]=Cn.transform(mt[ln])),Nr.g=3;break;case 14:hr[pr]=Nr.h;case 3:ht=jt.next(),Nr.g=2;break;case 4:return Nr.return(mt)}})}function rn(Rt,Mt,Ht){var mt;return to(function(Zt){return typeof Ht=="number"||Ht instanceof Uint8Array||Ht instanceof Rt.h.Uint8BlobList?Zt.return(Ht):Ht instanceof Rt.h.Texture2dDataOut?(mt=Rt.u[Mt],mt||(mt=new _n(Rt.h,Rt.G),Rt.u[Mt]=mt),Zt.return(Yn(mt,Ht,Rt.I))):Zt.return(void 0)})}function gn(Rt,Mt){for(var Ht=Mt.name||"$",mt=[].concat(kn(Mt.wants)),Zt=new Rt.h.StringList,Ft=En(Mt.wants),ht=Ft.next();!ht.done;ht=Ft.next())Zt.push_back(ht.value);Ft=Rt.h.PacketListener.implement({onResults:function(wt){for(var Lt={},jt=0;jt<Mt.wants.length;++jt)Lt[mt[jt]]=wt.get(jt);var ln=Rt.listeners[Ht];ln&&(Rt.D=Bt(Rt,Lt,Mt.outs).then(function(Cn){Cn=ln(Cn);for(var wn=0;wn<Mt.wants.length;++wn){var Hn=Lt[mt[wn]];typeof Hn=="object"&&Hn.hasOwnProperty&&Hn.hasOwnProperty("delete")&&Hn.delete()}Cn&&(Rt.D=Cn)}))}}),Rt.i.attachMultiListener(Zt,Ft),Zt.delete()}bt.onResults=function(Rt,Mt){this.listeners[Mt||"$"]=Rt},Xo("Solution",fo),Xo("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Fn(Rt){var Mt=this;Rt=Rt||{};var Ht={url:"face_detection_short.binarypb"},mt={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new fo({locateFile:Rt.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:Ht,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(Zt){var Ft,ht,wt,Lt,jt,ln;return to(function(Cn){switch(Cn.g){case 1:Ft=Zt==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"],ht=En(Ft),wt=ht.next();case 2:if(wt.done){Cn.g=4;break}return Lt=wt.value,jt="third_party/mediapipe/modules/face_detection/"+Lt,dr(Cn,Ot(Mt.g,Lt),5);case 5:ln=Cn.h,Mt.g.overrideFile(jt,ln),wt=ht.next(),Cn.g=2;break;case 4:return Ht.url=Zt==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",mt.graphOptionXref.calculatorName=Zt==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Cn.return(!0)}})}},minDetectionConfidence:mt}})}bt=Fn.prototype,bt.close=function(){return this.g.close(),tt.resolve()},bt.onResults=function(Rt){this.g.onResults(Rt)},bt.initialize=function(){var Rt=this;return to(function(Mt){return dr(Mt,Rt.g.initialize(),0)})},bt.reset=function(){this.g.reset()},bt.send=function(Rt){var Mt=this;return to(function(Ht){return dr(Ht,Mt.g.send(Rt),0)})},bt.setOptions=function(Rt){this.g.setOptions(Rt)},Xo("FaceDetection",Fn),Xo("FACEDETECTION_LIPS",Kn),Xo("FACEDETECTION_LEFT_EYE",fr),Xo("FACEDETECTION_LEFT_EYEBROW",$n),Xo("FACEDETECTION_RIGHT_EYE",br),Xo("FACEDETECTION_RIGHT_EYEBROW",Wr),Xo("FACEDETECTION_FACE_OVAL",xt),Xo("FACEDETECTION_CONTOURS",Jt),Xo("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Xo("VERSION","0.4.1646425229")}).call(Cp);const nm={};(function(){var bt;function vt(Pt){var Ut=0;return function(){return Ut<Pt.length?{done:!1,value:Pt[Ut++]}:{done:!0}}}var Ct=typeof Object.defineProperties=="function"?Object.defineProperty:function(Pt,Ut,zt){return Pt==Array.prototype||Pt==Object.prototype||(Pt[Ut]=zt.value),Pt};function Xt(Pt){Pt=[typeof globalThis=="object"&&globalThis,Pt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Ut=0;Ut<Pt.length;++Ut){var zt=Pt[Ut];if(zt&&zt.Math==Math)return zt}throw Error("Cannot find global object")}var Yt=Xt(this);function hn(Pt,Ut){if(Ut)e:{var zt=Yt;Pt=Pt.split(".");for(var On=0;On<Pt.length-1;On++){var Kn=Pt[On];if(!(Kn in zt))break e;zt=zt[Kn]}Pt=Pt[Pt.length-1],On=zt[Pt],Ut=Ut(On),Ut!=On&&Ut!=null&&Ct(zt,Pt,{configurable:!0,writable:!0,value:Ut})}}hn("Symbol",function(Pt){function Ut(fr){if(this instanceof Ut)throw new TypeError("Symbol is not a constructor");return new zt(On+(fr||"")+"_"+Kn++,fr)}function zt(fr,$n){this.g=fr,Ct(this,"description",{configurable:!0,writable:!0,value:$n})}if(Pt)return Pt;zt.prototype.toString=function(){return this.g};var On="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Kn=0;return Ut}),hn("Symbol.iterator",function(Pt){if(Pt)return Pt;Pt=Symbol("Symbol.iterator");for(var Ut="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),zt=0;zt<Ut.length;zt++){var On=Yt[Ut[zt]];typeof On=="function"&&typeof On.prototype[Pt]!="function"&&Ct(On.prototype,Pt,{configurable:!0,writable:!0,value:function(){return In(vt(this))}})}return Pt});function In(Pt){return Pt={next:Pt},Pt[Symbol.iterator]=function(){return this},Pt}function En(Pt){var Ut=typeof Symbol<"u"&&Symbol.iterator&&Pt[Symbol.iterator];return Ut?Ut.call(Pt):{next:vt(Pt)}}function kn(Pt){if(!(Pt instanceof Array)){Pt=En(Pt);for(var Ut,zt=[];!(Ut=Pt.next()).done;)zt.push(Ut.value);Pt=zt}return Pt}var mr=typeof Object.create=="function"?Object.create:function(Pt){function Ut(){}return Ut.prototype=Pt,new Ut},Vr;if(typeof Object.setPrototypeOf=="function")Vr=Object.setPrototypeOf;else{var Gr;e:{var Io={a:!0},ko={};try{ko.__proto__=Io,Gr=ko.a;break e}catch{}Gr=!1}Vr=Gr?function(Pt,Ut){if(Pt.__proto__=Ut,Pt.__proto__!==Ut)throw new TypeError(Pt+" is not extensible");return Pt}:null}var Mr=Vr;function Dr(Pt,Ut){if(Pt.prototype=mr(Ut.prototype),Pt.prototype.constructor=Pt,Mr)Mr(Pt,Ut);else for(var zt in Ut)if(zt!="prototype")if(Object.defineProperties){var On=Object.getOwnPropertyDescriptor(Ut,zt);On&&Object.defineProperty(Pt,zt,On)}else Pt[zt]=Ut[zt];Pt.ea=Ut.prototype}function Bo(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Uo(Pt){if(Pt.l)throw new TypeError("Generator is already running");Pt.l=!0}Bo.prototype.o=function(Pt){this.h=Pt};function gs(Pt,Ut){Pt.j={U:Ut,V:!0},Pt.g=Pt.m||Pt.s}Bo.prototype.return=function(Pt){this.j={return:Pt},this.g=this.s};function dr(Pt,Ut,zt){return Pt.g=zt,{value:Ut}}function Vu(Pt){this.g=new Bo,this.h=Pt}function Su(Pt,Ut){Uo(Pt.g);var zt=Pt.g.i;return zt?ga(Pt,"return"in zt?zt.return:function(On){return{value:On,done:!0}},Ut,Pt.g.return):(Pt.g.return(Ut),fs(Pt))}function ga(Pt,Ut,zt,On){try{var Kn=Ut.call(Pt.g.i,zt);if(!(Kn instanceof Object))throw new TypeError("Iterator result "+Kn+" is not an object");if(!Kn.done)return Pt.g.l=!1,Kn;var fr=Kn.value}catch($n){return Pt.g.i=null,gs(Pt.g,$n),fs(Pt)}return Pt.g.i=null,On.call(Pt.g,fr),fs(Pt)}function fs(Pt){for(;Pt.g.g;)try{var Ut=Pt.h(Pt.g);if(Ut)return Pt.g.l=!1,{value:Ut.value,done:!1}}catch(zt){Pt.g.h=void 0,gs(Pt.g,zt)}if(Pt.g.l=!1,Pt.g.j){if(Ut=Pt.g.j,Pt.g.j=null,Ut.V)throw Ut.U;return{value:Ut.return,done:!0}}return{value:void 0,done:!0}}function Fp(Pt){this.next=function(Ut){return Uo(Pt.g),Pt.g.i?Ut=ga(Pt,Pt.g.i.next,Ut,Pt.g.o):(Pt.g.o(Ut),Ut=fs(Pt)),Ut},this.throw=function(Ut){return Uo(Pt.g),Pt.g.i?Ut=ga(Pt,Pt.g.i.throw,Ut,Pt.g.o):(gs(Pt.g,Ut),Ut=fs(Pt)),Ut},this.return=function(Ut){return Su(Pt,Ut)},this[Symbol.iterator]=function(){return this}}function As(Pt,Ut){return Ut=new Fp(new Vu(Ut)),Mr&&Pt.prototype&&Mr(Ut,Pt.prototype),Ut}function to(Pt,Ut){Pt instanceof String&&(Pt+="");var zt=0,On=!1,Kn={next:function(){if(!On&&zt<Pt.length){var fr=zt++;return{value:Ut(fr,Pt[fr]),done:!1}}return On=!0,{done:!0,value:void 0}}};return Kn[Symbol.iterator]=function(){return Kn},Kn}var Lu=typeof Object.assign=="function"?Object.assign:function(Pt,Ut){for(var zt=1;zt<arguments.length;zt++){var On=arguments[zt];if(On)for(var Kn in On)Object.prototype.hasOwnProperty.call(On,Kn)&&(Pt[Kn]=On[Kn])}return Pt};hn("Object.assign",function(Pt){return Pt||Lu}),hn("Promise",function(Pt){function Ut($n){this.h=0,this.i=void 0,this.g=[],this.o=!1;var br=this.j();try{$n(br.resolve,br.reject)}catch(Wr){br.reject(Wr)}}function zt(){this.g=null}function On($n){return $n instanceof Ut?$n:new Ut(function(br){br($n)})}if(Pt)return Pt;zt.prototype.h=function($n){if(this.g==null){this.g=[];var br=this;this.i(function(){br.l()})}this.g.push($n)};var Kn=Yt.setTimeout;zt.prototype.i=function($n){Kn($n,0)},zt.prototype.l=function(){for(;this.g&&this.g.length;){var $n=this.g;this.g=[];for(var br=0;br<$n.length;++br){var Wr=$n[br];$n[br]=null;try{Wr()}catch(xt){this.j(xt)}}}this.g=null},zt.prototype.j=function($n){this.i(function(){throw $n})},Ut.prototype.j=function(){function $n(xt){return function(Jt){Wr||(Wr=!0,xt.call(br,Jt))}}var br=this,Wr=!1;return{resolve:$n(this.C),reject:$n(this.l)}},Ut.prototype.C=function($n){if($n===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if($n instanceof Ut)this.F($n);else{e:switch(typeof $n){case"object":var br=$n!=null;break e;case"function":br=!0;break e;default:br=!1}br?this.u($n):this.m($n)}},Ut.prototype.u=function($n){var br=void 0;try{br=$n.then}catch(Wr){this.l(Wr);return}typeof br=="function"?this.G(br,$n):this.m($n)},Ut.prototype.l=function($n){this.s(2,$n)},Ut.prototype.m=function($n){this.s(1,$n)},Ut.prototype.s=function($n,br){if(this.h!=0)throw Error("Cannot settle("+$n+", "+br+"): Promise already settled in state"+this.h);this.h=$n,this.i=br,this.h===2&&this.D(),this.A()},Ut.prototype.D=function(){var $n=this;Kn(function(){if($n.B()){var br=Yt.console;typeof br<"u"&&br.error($n.i)}},1)},Ut.prototype.B=function(){if(this.o)return!1;var $n=Yt.CustomEvent,br=Yt.Event,Wr=Yt.dispatchEvent;return typeof Wr>"u"?!0:(typeof $n=="function"?$n=new $n("unhandledrejection",{cancelable:!0}):typeof br=="function"?$n=new br("unhandledrejection",{cancelable:!0}):($n=Yt.document.createEvent("CustomEvent"),$n.initCustomEvent("unhandledrejection",!1,!0,$n)),$n.promise=this,$n.reason=this.i,Wr($n))},Ut.prototype.A=function(){if(this.g!=null){for(var $n=0;$n<this.g.length;++$n)fr.h(this.g[$n]);this.g=null}};var fr=new zt;return Ut.prototype.F=function($n){var br=this.j();$n.J(br.resolve,br.reject)},Ut.prototype.G=function($n,br){var Wr=this.j();try{$n.call(br,Wr.resolve,Wr.reject)}catch(xt){Wr.reject(xt)}},Ut.prototype.then=function($n,br){function Wr(Sn,Pn){return typeof Sn=="function"?function(_n){try{xt(Sn(_n))}catch(Yn){Jt(Yn)}}:Pn}var xt,Jt,nn=new Ut(function(Sn,Pn){xt=Sn,Jt=Pn});return this.J(Wr($n,xt),Wr(br,Jt)),nn},Ut.prototype.catch=function($n){return this.then(void 0,$n)},Ut.prototype.J=function($n,br){function Wr(){switch(xt.h){case 1:$n(xt.i);break;case 2:br(xt.i);break;default:throw Error("Unexpected state: "+xt.h)}}var xt=this;this.g==null?fr.h(Wr):this.g.push(Wr),this.o=!0},Ut.resolve=On,Ut.reject=function($n){return new Ut(function(br,Wr){Wr($n)})},Ut.race=function($n){return new Ut(function(br,Wr){for(var xt=En($n),Jt=xt.next();!Jt.done;Jt=xt.next())On(Jt.value).J(br,Wr)})},Ut.all=function($n){var br=En($n),Wr=br.next();return Wr.done?On([]):new Ut(function(xt,Jt){function nn(_n){return function(Yn){Sn[_n]=Yn,Pn--,Pn==0&&xt(Sn)}}var Sn=[],Pn=0;do Sn.push(void 0),Pn++,On(Wr.value).J(nn(Sn.length-1),Jt),Wr=br.next();while(!Wr.done)})},Ut}),hn("Object.is",function(Pt){return Pt||function(Ut,zt){return Ut===zt?Ut!==0||1/Ut===1/zt:Ut!==Ut&&zt!==zt}}),hn("Array.prototype.includes",function(Pt){return Pt||function(Ut,zt){var On=this;On instanceof String&&(On=String(On));var Kn=On.length;for(zt=zt||0,0>zt&&(zt=Math.max(zt+Kn,0));zt<Kn;zt++){var fr=On[zt];if(fr===Ut||Object.is(fr,Ut))return!0}return!1}}),hn("String.prototype.includes",function(Pt){return Pt||function(Ut,zt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Ut instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Ut,zt||0)!==-1}}),hn("Array.prototype.keys",function(Pt){return Pt||function(){return to(this,function(Ut){return Ut})}});var Xp=this||self;function ba(Pt,Ut){Pt=Pt.split(".");var zt=Xp;Pt[0]in zt||typeof zt.execScript>"u"||zt.execScript("var "+Pt[0]);for(var On;Pt.length&&(On=Pt.shift());)Pt.length||Ut===void 0?zt[On]&&zt[On]!==Object.prototype[On]?zt=zt[On]:zt=zt[On]={}:zt[On]=Ut}function Xo(Pt,Ut){return Ut=String.fromCharCode.apply(null,Ut),Pt==null?Ut:Pt+Ut}var El,hu=typeof TextDecoder<"u",Bu,pp=typeof TextEncoder<"u";function _d(Pt){if(pp)Pt=(Bu||(Bu=new TextEncoder)).encode(Pt);else{var Ut=void 0;Ut=Ut===void 0?!1:Ut;for(var zt=0,On=new Uint8Array(3*Pt.length),Kn=0;Kn<Pt.length;Kn++){var fr=Pt.charCodeAt(Kn);if(128>fr)On[zt++]=fr;else{if(2048>fr)On[zt++]=fr>>6|192;else{if(55296<=fr&&57343>=fr){if(56319>=fr&&Kn<Pt.length){var $n=Pt.charCodeAt(++Kn);if(56320<=$n&&57343>=$n){fr=1024*(fr-55296)+$n-56320+65536,On[zt++]=fr>>18|240,On[zt++]=fr>>12&63|128,On[zt++]=fr>>6&63|128,On[zt++]=fr&63|128;continue}else Kn--}if(Ut)throw Error("Found an unpaired surrogate");fr=65533}On[zt++]=fr>>12|224,On[zt++]=fr>>6&63|128}On[zt++]=fr&63|128}}Pt=On.subarray(0,zt)}return Pt}var yp={},Eu=null;function ku(Pt,Ut){Ut===void 0&&(Ut=0),Bl(),Ut=yp[Ut];for(var zt=Array(Math.floor(Pt.length/3)),On=Ut[64]||"",Kn=0,fr=0;Kn<Pt.length-2;Kn+=3){var $n=Pt[Kn],br=Pt[Kn+1],Wr=Pt[Kn+2],xt=Ut[$n>>2];$n=Ut[($n&3)<<4|br>>4],br=Ut[(br&15)<<2|Wr>>6],Wr=Ut[Wr&63],zt[fr++]=xt+$n+br+Wr}switch(xt=0,Wr=On,Pt.length-Kn){case 2:xt=Pt[Kn+1],Wr=Ut[(xt&15)<<2]||On;case 1:Pt=Pt[Kn],zt[fr]=Ut[Pt>>2]+Ut[(Pt&3)<<4|xt>>4]+Wr+On}return zt.join("")}function Rp(Pt){var Ut=Pt.length,zt=3*Ut/4;zt%3?zt=Math.floor(zt):"=.".indexOf(Pt[Ut-1])!=-1&&(zt="=.".indexOf(Pt[Ut-2])!=-1?zt-2:zt-1);var On=new Uint8Array(zt),Kn=0;return mp(Pt,function(fr){On[Kn++]=fr}),On.subarray(0,Kn)}function mp(Pt,Ut){function zt(Wr){for(;On<Pt.length;){var xt=Pt.charAt(On++),Jt=Eu[xt];if(Jt!=null)return Jt;if(!/^[\s\xa0]*$/.test(xt))throw Error("Unknown base64 encoding at char: "+xt)}return Wr}Bl();for(var On=0;;){var Kn=zt(-1),fr=zt(0),$n=zt(64),br=zt(64);if(br===64&&Kn===-1)break;Ut(Kn<<2|fr>>4),$n!=64&&(Ut(fr<<4&240|$n>>2),br!=64&&Ut($n<<6&192|br))}}function Bl(){if(!Eu){Eu={};for(var Pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Ut=["+/=","+/","-_=","-_.","-_"],zt=0;5>zt;zt++){var On=Pt.concat(Ut[zt].split(""));yp[zt]=On;for(var Kn=0;Kn<On.length;Kn++){var fr=On[Kn];Eu[fr]===void 0&&(Eu[fr]=Kn)}}}}var Hl=typeof Uint8Array.prototype.slice=="function",_f;function Ku(Pt,Ut,zt){return Ut===zt?_f||(_f=new Uint8Array(0)):Hl?Pt.slice(Ut,zt):new Uint8Array(Pt.subarray(Ut,zt))}var Ls=0,Sl=0;function Kl(Pt,Ut){Ut=Ut===void 0?{}:Ut,Ut=Ut.v===void 0?!1:Ut.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=Ut,Pt&&ys(this,Pt)}function ys(Pt,Ut){Ut=Ut.constructor===Uint8Array?Ut:Ut.constructor===ArrayBuffer?new Uint8Array(Ut):Ut.constructor===Array?new Uint8Array(Ut):Ut.constructor===String?Rp(Ut):Ut instanceof Uint8Array?new Uint8Array(Ut.buffer,Ut.byteOffset,Ut.byteLength):new Uint8Array(0),Pt.h=Ut,Pt.l=0,Pt.j=Pt.h.length,Pt.g=Pt.l}Kl.prototype.reset=function(){this.g=this.l};function qs(Pt){for(var Ut=128,zt=0,On=0,Kn=0;4>Kn&&128<=Ut;Kn++)Ut=Pt.h[Pt.g++],zt|=(Ut&127)<<7*Kn;if(128<=Ut&&(Ut=Pt.h[Pt.g++],zt|=(Ut&127)<<28,On|=(Ut&127)>>4),128<=Ut)for(Kn=0;5>Kn&&128<=Ut;Kn++)Ut=Pt.h[Pt.g++],On|=(Ut&127)<<7*Kn+3;if(128>Ut)return Pt=zt>>>0,Ut=On>>>0,(On=Ut&2147483648)&&(Pt=~Pt+1>>>0,Ut=~Ut>>>0,Pt==0&&(Ut=Ut+1>>>0)),Pt=4294967296*Ut+(Pt>>>0),On?-Pt:Pt;Pt.m=!0}Kl.prototype.i=function(){var Pt=this.h,Ut=Pt[this.g],zt=Ut&127;return 128>Ut?(this.g+=1,zt):(Ut=Pt[this.g+1],zt|=(Ut&127)<<7,128>Ut?(this.g+=2,zt):(Ut=Pt[this.g+2],zt|=(Ut&127)<<14,128>Ut?(this.g+=3,zt):(Ut=Pt[this.g+3],zt|=(Ut&127)<<21,128>Ut?(this.g+=4,zt):(Ut=Pt[this.g+4],zt|=(Ut&15)<<28,128>Ut?(this.g+=5,zt>>>0):(this.g+=5,128<=Pt[this.g++]&&128<=Pt[this.g++]&&128<=Pt[this.g++]&&128<=Pt[this.g++]&&this.g++,zt)))))},Kl.prototype.o=function(){var Pt=this.h[this.g],Ut=this.h[this.g+1],zt=this.h[this.g+2],On=this.h[this.g+3];return this.g+=4,zt=(Pt<<0|Ut<<8|zt<<16|On<<24)>>>0,Pt=2*(zt>>31)+1,Ut=zt>>>23&255,zt&=8388607,Ut==255?zt?NaN:1/0*Pt:Ut==0?Pt*Math.pow(2,-149)*zt:Pt*Math.pow(2,Ut-150)*(zt+Math.pow(2,23))};var pu=[];function Pl(){this.g=new Uint8Array(64),this.h=0}Pl.prototype.push=function(Pt){if(!(this.h+1<this.g.length)){var Ut=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(Ut)}this.g[this.h++]=Pt},Pl.prototype.length=function(){return this.h},Pl.prototype.end=function(){var Pt=this.g,Ut=this.h;return this.h=0,Ku(Pt,0,Ut)};function ls(Pt,Ut){for(;127<Ut;)Pt.push(Ut&127|128),Ut>>>=7;Pt.push(Ut)}function Hs(Pt){var Ut={},zt=Ut.N===void 0?!1:Ut.N;this.o={v:Ut.v===void 0?!1:Ut.v},this.N=zt,Ut=this.o,pu.length?(zt=pu.pop(),Ut&&(zt.v=Ut.v),Pt&&ys(zt,Pt),Pt=zt):Pt=new Kl(Pt,Ut),this.g=Pt,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Hs.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function xl(Pt){var Ut=Pt.g;if((Ut=Ut.g==Ut.j)||(Ut=Pt.j)||(Ut=Pt.g,Ut=Ut.m||0>Ut.g||Ut.g>Ut.j),Ut)return!1;Pt.m=Pt.g.g,Ut=Pt.g.i();var zt=Ut&7;return zt!=0&&zt!=5&&zt!=1&&zt!=2&&zt!=3&&zt!=4?(Pt.j=!0,!1):(Pt.i=Ut,Pt.l=Ut>>>3,Pt.h=zt,!0)}function $o(Pt){switch(Pt.h){case 0:if(Pt.h!=0)$o(Pt);else{for(Pt=Pt.g;Pt.h[Pt.g]&128;)Pt.g++;Pt.g++}break;case 1:Pt.h!=1?$o(Pt):(Pt=Pt.g,Pt.g+=8);break;case 2:if(Pt.h!=2)$o(Pt);else{var Ut=Pt.g.i();Pt=Pt.g,Pt.g+=Ut}break;case 5:Pt.h!=5?$o(Pt):(Pt=Pt.g,Pt.g+=4);break;case 3:Ut=Pt.l;do{if(!xl(Pt)){Pt.j=!0;break}if(Pt.h==4){Pt.l!=Ut&&(Pt.j=!0);break}$o(Pt)}while(1);break;default:Pt.j=!0}}function _a(Pt,Ut,zt){var On=Pt.g.j,Kn=Pt.g.i(),fr=Pt.g.g+Kn;if(Pt.g.j=fr,zt(Ut,Pt),zt=fr-Pt.g.g,zt!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+Kn+" bytes, instead read "+(Kn-zt)+" bytes, either the data ended unexpectedly or the message misreported its own length");return Pt.g.g=fr,Pt.g.j=On,Ut}function os(Pt){return Pt.g.o()}function Xs(Pt){var Ut=Pt.g.i();Pt=Pt.g;var zt=Pt.g;Pt.g+=Ut,Pt=Pt.h;var On;if(hu)(On=El)||(On=El=new TextDecoder("utf-8",{fatal:!1})),On=On.decode(Pt.subarray(zt,zt+Ut));else{Ut=zt+Ut;for(var Kn=[],fr=null,$n,br,Wr;zt<Ut;)$n=Pt[zt++],128>$n?Kn.push($n):224>$n?zt>=Ut?Kn.push(65533):(br=Pt[zt++],194>$n||(br&192)!==128?(zt--,Kn.push(65533)):Kn.push(($n&31)<<6|br&63)):240>$n?zt>=Ut-1?Kn.push(65533):(br=Pt[zt++],(br&192)!==128||$n===224&&160>br||$n===237&&160<=br||((On=Pt[zt++])&192)!==128?(zt--,Kn.push(65533)):Kn.push(($n&15)<<12|(br&63)<<6|On&63)):244>=$n?zt>=Ut-2?Kn.push(65533):(br=Pt[zt++],(br&192)!==128||($n<<28)+(br-144)>>30||((On=Pt[zt++])&192)!==128||((Wr=Pt[zt++])&192)!==128?(zt--,Kn.push(65533)):($n=($n&7)<<18|(br&63)<<12|(On&63)<<6|Wr&63,$n-=65536,Kn.push(($n>>10&1023)+55296,($n&1023)+56320))):Kn.push(65533),8192<=Kn.length&&(fr=Xo(fr,Kn),Kn.length=0);On=Xo(fr,Kn)}return On}function Cl(Pt,Ut,zt){var On=Pt.g.i();for(On=Pt.g.g+On;Pt.g.g<On;)zt.push(Ut.call(Pt.g))}function tu(Pt,Ut){Pt.h==2?Cl(Pt,Kl.prototype.o,Ut):Ut.push(os(Pt))}function zs(){this.h=[],this.i=0,this.g=new Pl}function ss(Pt,Ut){Ut.length!==0&&(Pt.h.push(Ut),Pt.i+=Ut.length)}function Yl(Pt){var Ut=Pt.i+Pt.g.length();if(Ut===0)return new Uint8Array(0);Ut=new Uint8Array(Ut);for(var zt=Pt.h,On=zt.length,Kn=0,fr=0;fr<On;fr++){var $n=zt[fr];$n.length!==0&&(Ut.set($n,Kn),Kn+=$n.length)}return zt=Pt.g,On=zt.h,On!==0&&(Ut.set(zt.g.subarray(0,On),Kn),zt.h=0),Pt.h=[Ut],Ut}function zl(Pt,Ut,zt){if(zt!=null){ls(Pt.g,8*Ut+5),Pt=Pt.g;var On=zt;On=(zt=0>On?1:0)?-On:On,On===0?0<1/On?Ls=Sl=0:(Sl=0,Ls=2147483648):isNaN(On)?(Sl=0,Ls=2147483647):34028234663852886e22<On?(Sl=0,Ls=(zt<<31|2139095040)>>>0):11754943508222875e-54>On?(On=Math.round(On/Math.pow(2,-149)),Sl=0,Ls=(zt<<31|On)>>>0):(Ut=Math.floor(Math.log(On)/Math.LN2),On*=Math.pow(2,-Ut),On=Math.round(8388608*On),16777216<=On&&++Ut,Sl=0,Ls=(zt<<31|Ut+127<<23|On&8388607)>>>0),zt=Ls,Pt.push(zt>>>0&255),Pt.push(zt>>>8&255),Pt.push(zt>>>16&255),Pt.push(zt>>>24&255)}}var _c=typeof Uint8Array=="function";function zu(Pt,Ut,zt){if(Pt!=null)return typeof Pt=="object"?_c&&Pt instanceof Uint8Array?zt(Pt):mu(Pt,Ut,zt):Ut(Pt)}function mu(Pt,Ut,zt){if(Array.isArray(Pt)){for(var On=Array(Pt.length),Kn=0;Kn<Pt.length;Kn++)On[Kn]=zu(Pt[Kn],Ut,zt);return Array.isArray(Pt)&&Pt.W&&Ys(On),On}On={};for(Kn in Pt)On[Kn]=zu(Pt[Kn],Ut,zt);return On}function Jl(Pt){return typeof Pt=="number"?isFinite(Pt)?Pt:String(Pt):Pt}var gu={W:{value:!0,configurable:!0}};function Ys(Pt){return Array.isArray(Pt)&&!Object.isFrozen(Pt)&&Object.defineProperties(Pt,gu),Pt}var Tl;function Bs(Pt,Ut,zt){var On=Tl;Tl=null,Pt||(Pt=On),On=this.constructor.ca,Pt||(Pt=On?[On]:[]),this.j=On?0:-1,this.m=this.g=null,this.h=Pt;e:{if(On=this.h.length,Pt=On-1,On&&(On=this.h[Pt],!(On===null||typeof On!="object"||Array.isArray(On)||_c&&On instanceof Uint8Array))){this.l=Pt-this.j,this.i=On;break e}Ut!==void 0&&-1<Ut?(this.l=Math.max(Ut,Pt+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(zt)for(Ut=0;Ut<zt.length;Ut++)Pt=zt[Ut],Pt<this.l?(Pt+=this.j,(On=this.h[Pt])?Ys(On):this.h[Pt]=bs):($l(this),(On=this.i[Pt])?Ys(On):this.i[Pt]=bs)}var bs=Object.freeze(Ys([]));function $l(Pt){var Ut=Pt.l+Pt.j;Pt.h[Ut]||(Pt.i=Pt.h[Ut]={})}function ps(Pt,Ut,zt){return Ut===-1?null:zt!==void 0&&zt||Ut>=Pt.l?Pt.i?Pt.i[Ut]:void 0:Pt.h[Ut+Pt.j]}function as(Pt,Ut){var zt=zt===void 0?!1:zt,On=ps(Pt,Ut,zt);return On==null&&(On=bs),On===bs&&(On=Ys([]),go(Pt,Ut,On,zt)),On}function Cu(Pt){var Ut=as(Pt,3);if(Pt.m||(Pt.m={}),!Pt.m[3]){for(var zt=0;zt<Ut.length;zt++)Ut[zt]=+Ut[zt];Pt.m[3]=!0}return Ut}function ks(Pt,Ut,zt){return Pt=ps(Pt,Ut),Pt??zt}function Fo(Pt,Ut,zt){return Pt=ps(Pt,Ut),Pt=Pt==null?Pt:+Pt,Pt??(zt===void 0?0:zt)}function go(Pt,Ut,zt,On){On!==void 0&&On||Ut>=Pt.l?($l(Pt),Pt.i[Ut]=zt):Pt.h[Ut+Pt.j]=zt}function Ss(Pt,Ut,zt){if(zt===-1)return null;if(Pt.g||(Pt.g={}),!Pt.g[zt]){var On=ps(Pt,zt,!1);On&&(Pt.g[zt]=new Ut(On))}return Pt.g[zt]}function Rl(Pt,Ut){Pt.g||(Pt.g={});var zt=Pt.g[1];if(!zt){var On=as(Pt,1);zt=[];for(var Kn=0;Kn<On.length;Kn++)zt[Kn]=new Ut(On[Kn]);Pt.g[1]=zt}return zt}function ms(Pt,Ut,zt){var On=On===void 0?!1:On;Pt.g||(Pt.g={});var Kn=zt&&Cr(zt);Pt.g[Ut]=zt,go(Pt,Ut,Kn,On)}function Es(Pt,Ut,zt,On){var Kn=Rl(Pt,zt);Ut=Ut||new zt,Pt=as(Pt,1),On!=null?(Kn.splice(On,0,Ut),Pt.splice(On,0,Cr(Ut))):(Kn.push(Ut),Pt.push(Cr(Ut)))}Bs.prototype.toJSON=function(){var Pt=Cr(this);return mu(Pt,Jl,ku)};function Cr(Pt,Ut){if(Pt.g)for(var zt in Pt.g){var On=Pt.g[zt];if(Array.isArray(On))for(var Kn=0;Kn<On.length;Kn++)On[Kn]&&Cr(On[Kn]);else On&&Cr(On)}return Pt.h}Bs.prototype.toString=function(){return Cr(this).toString()};function wr(Pt,Ut){if(Pt=Pt.o){ss(Ut,Ut.g.end());for(var zt=0;zt<Pt.length;zt++)ss(Ut,Pt[zt])}}function Pr(Pt,Ut){if(Ut.h==4)return!1;var zt=Ut.m;return $o(Ut),Ut.N||(Ut=Ku(Ut.g.h,zt,Ut.g.g),(zt=Pt.o)?zt.push(Ut):Pt.o=[Ut]),!0}function cs(Pt){Bs.call(this,Pt,-1,Is)}Dr(cs,Bs),cs.prototype.getRows=function(){return ps(this,1)},cs.prototype.getCols=function(){return ps(this,2)},cs.prototype.getPackedDataList=function(){return Cu(this)},cs.prototype.getLayout=function(){return ks(this,4,0)};function Os(Pt,Ut){for(;xl(Ut);)switch(Ut.i){case 8:var zt=Ut.g.i();go(Pt,1,zt);break;case 16:zt=Ut.g.i(),go(Pt,2,zt);break;case 29:case 26:tu(Ut,Pt.getPackedDataList());break;case 32:zt=qs(Ut.g),go(Pt,4,zt);break;default:if(!Pr(Pt,Ut))return Pt}return Pt}var Is=[3];function Ro(Pt,Ut){var zt=void 0;return new(zt||(zt=tt))(function(On,Kn){function fr(Wr){try{br(Ut.next(Wr))}catch(xt){Kn(xt)}}function $n(Wr){try{br(Ut.throw(Wr))}catch(xt){Kn(xt)}}function br(Wr){Wr.done?On(Wr.value):new zt(function(xt){xt(Wr.value)}).then(fr,$n)}br((Ut=Ut.apply(Pt,void 0)).next())})}function Ns(Pt){Bs.call(this,Pt)}Dr(Ns,Bs);function Ol(Pt,Ut){for(;xl(Ut);)switch(Ut.i){case 8:var zt=Ut.g.i();go(Pt,1,zt);break;case 21:zt=os(Ut),go(Pt,2,zt);break;case 26:zt=Xs(Ut),go(Pt,3,zt);break;case 34:zt=Xs(Ut),go(Pt,4,zt);break;default:if(!Pr(Pt,Ut))return Pt}return Pt}function nu(Pt){Bs.call(this,Pt,-1,ru)}Dr(nu,Bs),nu.prototype.addClassification=function(Pt,Ut){return Es(this,Pt,Ns,Ut),this};var ru=[1];function Tu(Pt){Bs.call(this,Pt)}Dr(Tu,Bs);function Nu(Pt,Ut){for(;xl(Ut);)switch(Ut.i){case 13:var zt=os(Ut);go(Pt,1,zt);break;case 21:zt=os(Ut),go(Pt,2,zt);break;case 29:zt=os(Ut),go(Pt,3,zt);break;case 37:zt=os(Ut),go(Pt,4,zt);break;case 45:zt=os(Ut),go(Pt,5,zt);break;default:if(!Pr(Pt,Ut))return Pt}return Pt}function Il(Pt){Bs.call(this,Pt,-1,Dp)}Dr(Il,Bs);function iu(Pt){e:{var Ut=new Il;for(Pt=new Hs(Pt);xl(Pt);)switch(Pt.i){case 10:var zt=_a(Pt,new Tu,Nu);Es(Ut,zt,Tu,void 0);break;default:if(!Pr(Ut,Pt))break e}}return Ut}var Dp=[1];function ou(Pt){Bs.call(this,Pt)}Dr(ou,Bs);function Al(Pt){Bs.call(this,Pt,-1,_h)}Dr(Al,Bs),Al.prototype.getVertexType=function(){return ks(this,1,0)},Al.prototype.getPrimitiveType=function(){return ks(this,2,0)},Al.prototype.getVertexBufferList=function(){return Cu(this)},Al.prototype.getIndexBufferList=function(){return as(this,4)};function Xu(Pt,Ut){for(;xl(Ut);)switch(Ut.i){case 8:var zt=qs(Ut.g);go(Pt,1,zt);break;case 16:zt=qs(Ut.g),go(Pt,2,zt);break;case 29:case 26:tu(Ut,Pt.getVertexBufferList());break;case 32:case 34:zt=Ut;var On=Pt.getIndexBufferList();zt.h==2?Cl(zt,Kl.prototype.i,On):On.push(zt.g.i());break;default:if(!Pr(Pt,Ut))return Pt}return Pt}var _h=[3,4];function Fl(Pt){Bs.call(this,Pt)}Dr(Fl,Bs),Fl.prototype.getMesh=function(){return Ss(this,Al,1)},Fl.prototype.getPoseTransformMatrix=function(){return Ss(this,cs,2)};function Ip(Pt){e:{var Ut=new Fl;for(Pt=new Hs(Pt);xl(Pt);)switch(Pt.i){case 10:var zt=_a(Pt,new Al,Xu);ms(Ut,1,zt);break;case 18:zt=_a(Pt,new cs,Os),ms(Ut,2,zt);break;default:if(!Pr(Ut,Pt))break e}}return Ut}function su(Pt,Ut,zt){if(zt=Pt.createShader(zt===0?Pt.VERTEX_SHADER:Pt.FRAGMENT_SHADER),Pt.shaderSource(zt,Ut),Pt.compileShader(zt),!Pt.getShaderParameter(zt,Pt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+Pt.getShaderInfoLog(zt));return zt}function Du(Pt){return Rl(Pt,Ns).map(function(Ut){return{index:ks(Ut,1,0),Y:Fo(Ut,2),label:ps(Ut,3)!=null?ks(Ut,3,""):void 0,displayName:ps(Ut,4)!=null?ks(Ut,4,""):void 0}})}function sp(Pt){return{x:Fo(Pt,1),y:Fo(Pt,2),z:Fo(Pt,3),visibility:ps(Pt,4)!=null?Fo(Pt,4):void 0}}function kp(Pt,Ut){this.h=Pt,this.g=Ut,this.l=0}function vu(Pt,Ut,zt){return ap(Pt,Ut),typeof Pt.g.canvas.transferToImageBitmap=="function"?tt.resolve(Pt.g.canvas.transferToImageBitmap()):zt?tt.resolve(Pt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(Pt.g.canvas):(Pt.i===void 0&&(Pt.i=document.createElement("canvas")),new tt(function(On){Pt.i.height=Pt.g.canvas.height,Pt.i.width=Pt.g.canvas.width,Pt.i.getContext("2d",{}).drawImage(Pt.g.canvas,0,0,Pt.g.canvas.width,Pt.g.canvas.height),On(Pt.i)}))}function ap(Pt,Ut){var zt=Pt.g;if(Pt.m===void 0){var On=su(zt,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Kn=su(zt,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),fr=zt.createProgram();if(zt.attachShader(fr,On),zt.attachShader(fr,Kn),zt.linkProgram(fr),!zt.getProgramParameter(fr,zt.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+zt.getProgramInfoLog(fr));On=Pt.m=fr,zt.useProgram(On),Kn=zt.getUniformLocation(On,"sampler0"),Pt.j={I:zt.getAttribLocation(On,"aVertex"),H:zt.getAttribLocation(On,"aTex"),da:Kn},Pt.s=zt.createBuffer(),zt.bindBuffer(zt.ARRAY_BUFFER,Pt.s),zt.enableVertexAttribArray(Pt.j.I),zt.vertexAttribPointer(Pt.j.I,2,zt.FLOAT,!1,0,0),zt.bufferData(zt.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),zt.STATIC_DRAW),zt.bindBuffer(zt.ARRAY_BUFFER,null),Pt.o=zt.createBuffer(),zt.bindBuffer(zt.ARRAY_BUFFER,Pt.o),zt.enableVertexAttribArray(Pt.j.H),zt.vertexAttribPointer(Pt.j.H,2,zt.FLOAT,!1,0,0),zt.bufferData(zt.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),zt.STATIC_DRAW),zt.bindBuffer(zt.ARRAY_BUFFER,null),zt.uniform1i(Kn,0)}On=Pt.j,zt.useProgram(Pt.m),zt.canvas.width=Ut.width,zt.canvas.height=Ut.height,zt.viewport(0,0,Ut.width,Ut.height),zt.activeTexture(zt.TEXTURE0),Pt.h.bindTexture2d(Ut.glName),zt.enableVertexAttribArray(On.I),zt.bindBuffer(zt.ARRAY_BUFFER,Pt.s),zt.vertexAttribPointer(On.I,2,zt.FLOAT,!1,0,0),zt.enableVertexAttribArray(On.H),zt.bindBuffer(zt.ARRAY_BUFFER,Pt.o),zt.vertexAttribPointer(On.H,2,zt.FLOAT,!1,0,0),zt.bindFramebuffer(zt.DRAW_FRAMEBUFFER?zt.DRAW_FRAMEBUFFER:zt.FRAMEBUFFER,null),zt.clearColor(0,0,0,0),zt.clear(zt.COLOR_BUFFER_BIT),zt.colorMask(!0,!0,!0,!0),zt.drawArrays(zt.TRIANGLE_FAN,0,4),zt.disableVertexAttribArray(On.I),zt.disableVertexAttribArray(On.H),zt.bindBuffer(zt.ARRAY_BUFFER,null),Pt.h.bindTexture2d(0)}function Qp(Pt){this.g=Pt}var _p=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function cp(Pt,Ut){return Ut+Pt}function gp(Pt,Ut){window[Pt]=Ut}function Dt(Pt){var Ut=document.createElement("script");return Ut.setAttribute("src",Pt),Ut.setAttribute("crossorigin","anonymous"),new tt(function(zt){Ut.addEventListener("load",function(){zt()},!1),Ut.addEventListener("error",function(){zt()},!1),document.body.appendChild(Ut)})}function qt(){return Ro(this,function Pt(){return As(Pt,function(Ut){switch(Ut.g){case 1:return Ut.m=2,dr(Ut,WebAssembly.instantiate(_p),4);case 4:Ut.g=3,Ut.m=0;break;case 2:return Ut.m=0,Ut.j=null,Ut.return(!1);case 3:return Ut.return(!0)}})})}function en(Pt){if(this.g=Pt,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=tt.resolve(),this.P="",this.B={},this.locateFile=Pt&&Pt.locateFile||cp,typeof window=="object")var Ut=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Ut=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=Ut,Pt.options){Ut=En(Object.keys(Pt.options));for(var zt=Ut.next();!zt.done;zt=Ut.next()){zt=zt.value;var On=Pt.options[zt].default;On!==void 0&&(this.j[zt]=typeof On=="function"?On():On)}}}bt=en.prototype,bt.close=function(){return this.i&&this.i.delete(),tt.resolve()};function jn(Pt,Ut){return Pt.g.files===void 0?[]:typeof Pt.g.files=="function"?Pt.g.files(Ut):Pt.g.files}function ur(Pt){return Ro(Pt,function Ut(){var zt=this,On,Kn,fr,$n,br,Wr,xt,Jt,nn,Sn,Pn;return As(Ut,function(_n){switch(_n.g){case 1:return On=zt,zt.R?(Kn=jn(zt,zt.j),dr(_n,qt(),2)):_n.return();case 2:if(fr=_n.h,typeof window=="object")return gp("createMediapipeSolutionsWasm",{locateFile:zt.locateFile}),gp("createMediapipeSolutionsPackedAssets",{locateFile:zt.locateFile}),Wr=Kn.filter(function(Yn){return Yn.data!==void 0}),xt=Kn.filter(function(Yn){return Yn.data===void 0}),Jt=tt.all(Wr.map(function(Yn){var Tr=Ir(On,Yn.url);if(Yn.path!==void 0){var yr=Yn.path;Tr=Tr.then(function(Qr){return On.overrideFile(yr,Qr),tt.resolve(Qr)})}return Tr})),nn=tt.all(xt.map(function(Yn){return Yn.simd===void 0||Yn.simd&&fr||!Yn.simd&&!fr?Dt(On.locateFile(Yn.url,On.S)):tt.resolve()})).then(function(){return Ro(On,function Yn(){var Tr,yr,Qr=this;return As(Yn,function(lo){if(lo.g==1)return Tr=window.createMediapipeSolutionsWasm,yr=window.createMediapipeSolutionsPackedAssets,dr(lo,Tr(yr),2);Qr.h=lo.h,lo.g=0})})}),Sn=function(){return Ro(On,function Yn(){var Tr=this;return As(Yn,function(yr){return Tr.g.graph&&Tr.g.graph.url?yr=dr(yr,Ir(Tr,Tr.g.graph.url),0):(yr.g=0,yr=void 0),yr})})}(),dr(_n,tt.all([nn,Jt,Sn]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return $n=Kn.filter(function(Yn){return Yn.simd===void 0||Yn.simd&&fr||!Yn.simd&&!fr}).map(function(Yn){return On.locateFile(Yn.url,On.S)}),importScripts.apply(null,kn($n)),dr(_n,createMediapipeSolutionsWasm(Module),6);case 6:zt.h=_n.h,zt.l=new OffscreenCanvas(1,1),zt.h.canvas=zt.l,br=zt.h.GL.createContext(zt.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),zt.h.GL.makeContextCurrent(br),_n.g=4;break;case 7:if(zt.l=document.createElement("canvas"),Pn=zt.l.getContext("webgl2",{}),!Pn&&(Pn=zt.l.getContext("webgl",{}),!Pn))return alert("Failed to create WebGL canvas context when passing video frame."),_n.return();zt.D=Pn,zt.h.canvas=zt.l,zt.h.createContext(zt.l,!0,!0,{});case 4:zt.i=new zt.h.SolutionWasm,zt.R=!1,_n.g=0}})})}function Lr(Pt){return Ro(Pt,function Ut(){var zt=this,On,Kn,fr,$n,br,Wr,xt,Jt;return As(Ut,function(nn){if(nn.g==1){if(zt.g.graph&&zt.g.graph.url&&zt.P===zt.g.graph.url)return nn.return();if(zt.o=!0,!zt.g.graph||!zt.g.graph.url){nn.g=2;return}return zt.P=zt.g.graph.url,dr(nn,Ir(zt,zt.g.graph.url),3)}for(nn.g!=2&&(On=nn.h,zt.i.loadGraph(On)),Kn=En(Object.keys(zt.B)),fr=Kn.next();!fr.done;fr=Kn.next())$n=fr.value,zt.i.overrideFile($n,zt.B[$n]);if(zt.B={},zt.g.listeners)for(br=En(zt.g.listeners),Wr=br.next();!Wr.done;Wr=br.next())xt=Wr.value,zo(zt,xt);Jt=zt.j,zt.j={},zt.setOptions(Jt),nn.g=0})})}bt.reset=function(){return Ro(this,function Pt(){var Ut=this;return As(Pt,function(zt){Ut.i&&(Ut.i.reset(),Ut.m={},Ut.s={}),zt.g=0})})},bt.setOptions=function(Pt,Ut){var zt=this;if(Ut=Ut||this.g.options){for(var On=[],Kn=[],fr={},$n=En(Object.keys(Pt)),br=$n.next();!br.done;fr={K:fr.K,L:fr.L},br=$n.next()){var Wr=br.value;Wr in this.j&&this.j[Wr]===Pt[Wr]||(this.j[Wr]=Pt[Wr],br=Ut[Wr],br!==void 0&&(br.onChange&&(fr.K=br.onChange,fr.L=Pt[Wr],On.push(function(xt){return function(){return Ro(zt,function Jt(){var nn,Sn=this;return As(Jt,function(Pn){if(Pn.g==1)return dr(Pn,xt.K(xt.L),2);nn=Pn.h,nn===!0&&(Sn.o=!0),Pn.g=0})})}}(fr))),br.graphOptionXref&&(Wr={valueNumber:br.type===1?Pt[Wr]:0,valueBoolean:br.type===0?Pt[Wr]:!1,valueString:br.type===2?Pt[Wr]:""},br=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),br.graphOptionXref),Wr),Kn.push(br))))}(On.length!==0||Kn.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Kn),this.u=(this.u===void 0?[]:this.u).concat(On))}};function cr(Pt){return Ro(Pt,function Ut(){var zt=this,On,Kn,fr,$n,br,Wr,xt;return As(Ut,function(Jt){switch(Jt.g){case 1:if(!zt.o)return Jt.return();if(!zt.u){Jt.g=2;break}On=En(zt.u),Kn=On.next();case 3:if(Kn.done){Jt.g=5;break}return fr=Kn.value,dr(Jt,fr(),4);case 4:Kn=On.next(),Jt.g=3;break;case 5:zt.u=void 0;case 2:if(zt.A){for($n=new zt.h.GraphOptionChangeRequestList,br=En(zt.A),Wr=br.next();!Wr.done;Wr=br.next())xt=Wr.value,$n.push_back(xt);zt.i.changeOptions($n),$n.delete(),zt.A=void 0}zt.o=!1,Jt.g=0}})})}bt.initialize=function(){return Ro(this,function Pt(){var Ut=this;return As(Pt,function(zt){return zt.g==1?dr(zt,ur(Ut),2):zt.g!=3?dr(zt,Lr(Ut),3):dr(zt,cr(Ut),0)})})};function Ir(Pt,Ut){return Ro(Pt,function zt(){var On=this,Kn,fr;return As(zt,function($n){return Ut in On.F?$n.return(On.F[Ut]):(Kn=On.locateFile(Ut,""),fr=fetch(Kn).then(function(br){return br.arrayBuffer()}),On.F[Ut]=fr,$n.return(fr))})})}bt.overrideFile=function(Pt,Ut){this.i?this.i.overrideFile(Pt,Ut):this.B[Pt]=Ut},bt.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},bt.send=function(Pt,Ut){return Ro(this,function zt(){var On=this,Kn,fr,$n,br,Wr,xt,Jt,nn,Sn;return As(zt,function(Pn){switch(Pn.g){case 1:return On.g.inputs?(Kn=1e3*(Ut??performance.now()),dr(Pn,On.C,2)):Pn.return();case 2:return dr(Pn,On.initialize(),3);case 3:for(fr=new On.h.PacketDataList,$n=En(Object.keys(Pt)),br=$n.next();!br.done;br=$n.next())if(Wr=br.value,xt=On.g.inputs[Wr]){e:{var _n=On,Yn=Pt[Wr];switch(xt.type){case"video":var Tr=_n.m[xt.stream];if(Tr||(Tr=new kp(_n.h,_n.D),_n.m[xt.stream]=Tr),_n=Tr,_n.l===0&&(_n.l=_n.h.createTexture()),typeof HTMLVideoElement<"u"&&Yn instanceof HTMLVideoElement){var yr=Yn.videoWidth;Tr=Yn.videoHeight}else typeof HTMLImageElement<"u"&&Yn instanceof HTMLImageElement?(yr=Yn.naturalWidth,Tr=Yn.naturalHeight):(yr=Yn.width,Tr=Yn.height);Tr={glName:_n.l,width:yr,height:Tr},yr=_n.g,yr.canvas.width=Tr.width,yr.canvas.height=Tr.height,yr.activeTexture(yr.TEXTURE0),_n.h.bindTexture2d(_n.l),yr.texImage2D(yr.TEXTURE_2D,0,yr.RGBA,yr.RGBA,yr.UNSIGNED_BYTE,Yn),_n.h.bindTexture2d(0),_n=Tr;break e;case"detections":for(Tr=_n.m[xt.stream],Tr||(Tr=new Qp(_n.h),_n.m[xt.stream]=Tr),_n=Tr,_n.data||(_n.data=new _n.g.DetectionListData),_n.data.reset(Yn.length),Tr=0;Tr<Yn.length;++Tr){yr=Yn[Tr];var Qr=_n.data,lo=Qr.setBoundingBox,Jo=Tr,Eo=yr.T,Hr=new ou;go(Hr,1,Eo.Z),go(Hr,2,Eo.$),go(Hr,3,Eo.height),go(Hr,4,Eo.width),go(Hr,5,Eo.rotation),go(Hr,6,Eo.X);var fo=Eo=new zs;zl(fo,1,ps(Hr,1)),zl(fo,2,ps(Hr,2)),zl(fo,3,ps(Hr,3)),zl(fo,4,ps(Hr,4)),zl(fo,5,ps(Hr,5));var To=ps(Hr,6);if(To!=null&&To!=null){ls(fo.g,48);var No=fo.g,Mo=To;To=0>Mo,Mo=Math.abs(Mo);var Ot=Mo>>>0;for(Mo=Math.floor((Mo-Ot)/4294967296),Mo>>>=0,To&&(Mo=~Mo>>>0,Ot=(~Ot>>>0)+1,4294967295<Ot&&(Ot=0,Mo++,4294967295<Mo&&(Mo=0))),Ls=Ot,Sl=Mo,To=Ls,Ot=Sl;0<Ot||127<To;)No.push(To&127|128),To=(To>>>7|Ot<<25)>>>0,Ot>>>=7;No.push(To)}if(wr(Hr,fo),Eo=Yl(Eo),lo.call(Qr,Jo,Eo),yr.O)for(Qr=0;Qr<yr.O.length;++Qr)Hr=yr.O[Qr],fo=!!Hr.visibility,lo=_n.data,Jo=lo.addNormalizedLandmark,Eo=Tr,Hr=Object.assign(Object.assign({},Hr),{visibility:fo?Hr.visibility:0}),fo=new Tu,go(fo,1,Hr.x),go(fo,2,Hr.y),go(fo,3,Hr.z),Hr.visibility&&go(fo,4,Hr.visibility),No=Hr=new zs,zl(No,1,ps(fo,1)),zl(No,2,ps(fo,2)),zl(No,3,ps(fo,3)),zl(No,4,ps(fo,4)),zl(No,5,ps(fo,5)),wr(fo,No),Hr=Yl(Hr),Jo.call(lo,Eo,Hr);if(yr.M)for(Qr=0;Qr<yr.M.length;++Qr){if(lo=_n.data,Jo=lo.addClassification,Eo=Tr,Hr=yr.M[Qr],fo=new Ns,go(fo,2,Hr.Y),Hr.index&&go(fo,1,Hr.index),Hr.label&&go(fo,3,Hr.label),Hr.displayName&&go(fo,4,Hr.displayName),No=Hr=new zs,Ot=ps(fo,1),Ot!=null&&Ot!=null)if(ls(No.g,8),To=No.g,0<=Ot)ls(To,Ot);else{for(Mo=0;9>Mo;Mo++)To.push(Ot&127|128),Ot>>=7;To.push(1)}zl(No,2,ps(fo,2)),To=ps(fo,3),To!=null&&(To=_d(To),ls(No.g,26),ls(No.g,To.length),ss(No,No.g.end()),ss(No,To)),To=ps(fo,4),To!=null&&(To=_d(To),ls(No.g,34),ls(No.g,To.length),ss(No,No.g.end()),ss(No,To)),wr(fo,No),Hr=Yl(Hr),Jo.call(lo,Eo,Hr)}}_n=_n.data;break e;default:_n={}}}switch(Jt=_n,nn=xt.stream,xt.type){case"video":fr.pushTexture2d(Object.assign(Object.assign({},Jt),{stream:nn,timestamp:Kn}));break;case"detections":Sn=Jt,Sn.stream=nn,Sn.timestamp=Kn,fr.pushDetectionList(Sn);break;default:throw Error("Unknown input config type: '"+xt.type+"'")}}return On.i.send(fr),dr(Pn,On.C,4);case 4:fr.delete(),Pn.g=0}})})};function Kr(Pt,Ut,zt){return Ro(Pt,function On(){var Kn,fr,$n,br,Wr,xt,Jt=this,nn,Sn,Pn,_n,Yn,Tr,yr,Qr;return As(On,function(lo){switch(lo.g){case 1:if(!zt)return lo.return(Ut);for(Kn={},fr=0,$n=En(Object.keys(zt)),br=$n.next();!br.done;br=$n.next())Wr=br.value,xt=zt[Wr],typeof xt!="string"&&xt.type==="texture"&&Ut[xt.stream]!==void 0&&++fr;1<fr&&(Jt.G=!1),nn=En(Object.keys(zt)),br=nn.next();case 2:if(br.done){lo.g=4;break}if(Sn=br.value,Pn=zt[Sn],typeof Pn=="string")return yr=Kn,Qr=Sn,dr(lo,So(Jt,Sn,Ut[Pn]),14);if(_n=Ut[Pn.stream],Pn.type==="detection_list"){if(_n){for(var Jo=_n.getRectList(),Eo=_n.getLandmarksList(),Hr=_n.getClassificationsList(),fo=[],To=0;To<Jo.size();++To){var No=Jo.get(To);e:{var Mo=new ou;for(No=new Hs(No);xl(No);)switch(No.i){case 13:var Ot=os(No);go(Mo,1,Ot);break;case 21:Ot=os(No),go(Mo,2,Ot);break;case 29:Ot=os(No),go(Mo,3,Ot);break;case 37:Ot=os(No),go(Mo,4,Ot);break;case 45:Ot=os(No),go(Mo,5,Ot);break;case 48:Ot=qs(No.g),go(Mo,6,Ot);break;default:if(!Pr(Mo,No))break e}}Mo={Z:Fo(Mo,1),$:Fo(Mo,2),height:Fo(Mo,3),width:Fo(Mo,4),rotation:Fo(Mo,5,0),X:ks(Mo,6,0)},No=Rl(iu(Eo.get(To)),Tu).map(sp);var Bt=Hr.get(To);e:for(Ot=new nu,Bt=new Hs(Bt);xl(Bt);)switch(Bt.i){case 10:Ot.addClassification(_a(Bt,new Ns,Ol));break;default:if(!Pr(Ot,Bt))break e}Mo={T:Mo,O:No,M:Du(Ot)},fo.push(Mo)}Jo=fo}else Jo=[];Kn[Sn]=Jo,lo.g=7;break}if(Pn.type==="proto_list"){if(_n){for(Jo=Array(_n.size()),Eo=0;Eo<_n.size();Eo++)Jo[Eo]=_n.get(Eo);_n.delete()}else Jo=[];Kn[Sn]=Jo,lo.g=7;break}if(_n===void 0){lo.g=3;break}if(Pn.type==="float_list"){Kn[Sn]=_n,lo.g=7;break}if(Pn.type==="proto"){Kn[Sn]=_n,lo.g=7;break}if(Pn.type!=="texture")throw Error("Unknown output config type: '"+Pn.type+"'");return Yn=Jt.s[Sn],Yn||(Yn=new kp(Jt.h,Jt.D),Jt.s[Sn]=Yn),dr(lo,vu(Yn,_n,Jt.G),13);case 13:Tr=lo.h,Kn[Sn]=Tr;case 7:Pn.transform&&Kn[Sn]&&(Kn[Sn]=Pn.transform(Kn[Sn])),lo.g=3;break;case 14:yr[Qr]=lo.h;case 3:br=nn.next(),lo.g=2;break;case 4:return lo.return(Kn)}})})}function So(Pt,Ut,zt){return Ro(Pt,function On(){var Kn=this,fr;return As(On,function($n){return typeof zt=="number"||zt instanceof Uint8Array||zt instanceof Kn.h.Uint8BlobList?$n.return(zt):zt instanceof Kn.h.Texture2dDataOut?(fr=Kn.s[Ut],fr||(fr=new kp(Kn.h,Kn.D),Kn.s[Ut]=fr),$n.return(vu(fr,zt,Kn.G))):$n.return(void 0)})})}function zo(Pt,Ut){for(var zt=Ut.name||"$",On=[].concat(kn(Ut.wants)),Kn=new Pt.h.StringList,fr=En(Ut.wants),$n=fr.next();!$n.done;$n=fr.next())Kn.push_back($n.value);fr=Pt.h.PacketListener.implement({onResults:function(br){for(var Wr={},xt=0;xt<Ut.wants.length;++xt)Wr[On[xt]]=br.get(xt);var Jt=Pt.listeners[zt];Jt&&(Pt.C=Kr(Pt,Wr,Ut.outs).then(function(nn){nn=Jt(nn);for(var Sn=0;Sn<Ut.wants.length;++Sn){var Pn=Wr[On[Sn]];typeof Pn=="object"&&Pn.hasOwnProperty&&Pn.hasOwnProperty("delete")&&Pn.delete()}nn&&(Pt.C=nn)}))}}),Pt.i.attachMultiListener(Kn,fr),Kn.delete()}bt.onResults=function(Pt,Ut){this.listeners[Ut||"$"]=Pt},ba("Solution",en),ba("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Do(Pt){Pt=Ip(Pt);var Ut=Pt.getMesh();if(!Ut)return Pt;var zt=new Float32Array(Ut.getVertexBufferList());Ut.getVertexBufferList=function(){return zt};var On=new Uint32Array(Ut.getIndexBufferList());return Ut.getIndexBufferList=function(){return On},Pt}var hs={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(Pt){return Pt.map(Do)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(Pt){return Pt.map(function(Ut){return Rl(iu(Ut),Tu).map(sp)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Ho=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Oo=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Ko=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],us=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],xs=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Gs=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Ds=[].concat(kn(Ho),kn(Oo),kn(Ko),kn(us),kn(xs),kn(Gs));function Zl(Pt){Pt=Pt||{},Pt=Object.assign(Object.assign({},hs),Pt),this.g=new en(Pt)}bt=Zl.prototype,bt.close=function(){return this.g.close(),tt.resolve()},bt.onResults=function(Pt){this.g.onResults(Pt)},bt.initialize=function(){return Ro(this,function Pt(){var Ut=this;return As(Pt,function(zt){return dr(zt,Ut.g.initialize(),0)})})},bt.reset=function(){this.g.reset()},bt.send=function(Pt){return Ro(this,function Ut(){var zt=this;return As(Ut,function(On){return dr(On,zt.g.send(Pt),0)})})},bt.setOptions=function(Pt){this.g.setOptions(Pt)},ba("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),ba("FaceMesh",Zl),ba("FACEMESH_LIPS",Ho),ba("FACEMESH_LEFT_EYE",Oo),ba("FACEMESH_LEFT_EYEBROW",Ko),ba("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),ba("FACEMESH_RIGHT_EYE",us),ba("FACEMESH_RIGHT_EYEBROW",xs),ba("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),ba("FACEMESH_FACE_OVAL",Gs),ba("FACEMESH_CONTOURS",Ds),ba("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),ba("matrixDataToMatrix",function(Pt){for(var Ut=Pt.getCols(),zt=Pt.getRows(),On=Pt.getPackedDataList(),Kn=[],fr=0;fr<zt;fr++)Kn.push(Array(Ut));for(fr=0;fr<zt;fr++)for(var $n=0;$n<Ut;$n++){var br=Pt.getLayout()===1?fr*Ut+$n:$n*zt+fr;Kn[fr][$n]=On[br]}return Kn}),ba("VERSION","0.4.1633559619")}).call(nm);const Bp={};(function(){var bt;function vt(ht){var wt=0;return function(){return wt<ht.length?{done:!1,value:ht[wt++]}:{done:!0}}}var Ct=typeof Object.defineProperties=="function"?Object.defineProperty:function(ht,wt,Lt){return ht==Array.prototype||ht==Object.prototype||(ht[wt]=Lt.value),ht};function Xt(ht){ht=[typeof globalThis=="object"&&globalThis,ht,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var wt=0;wt<ht.length;++wt){var Lt=ht[wt];if(Lt&&Lt.Math==Math)return Lt}throw Error("Cannot find global object")}var Yt=Xt(this);function hn(ht,wt){if(wt)e:{var Lt=Yt;ht=ht.split(".");for(var jt=0;jt<ht.length-1;jt++){var ln=ht[jt];if(!(ln in Lt))break e;Lt=Lt[ln]}ht=ht[ht.length-1],jt=Lt[ht],wt=wt(jt),wt!=jt&&wt!=null&&Ct(Lt,ht,{configurable:!0,writable:!0,value:wt})}}hn("Symbol",function(ht){function wt(Cn){if(this instanceof wt)throw new TypeError("Symbol is not a constructor");return new Lt(jt+(Cn||"")+"_"+ln++,Cn)}function Lt(Cn,wn){this.g=Cn,Ct(this,"description",{configurable:!0,writable:!0,value:wn})}if(ht)return ht;Lt.prototype.toString=function(){return this.g};var jt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",ln=0;return wt}),hn("Symbol.iterator",function(ht){if(ht)return ht;ht=Symbol("Symbol.iterator");for(var wt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Lt=0;Lt<wt.length;Lt++){var jt=Yt[wt[Lt]];typeof jt=="function"&&typeof jt.prototype[ht]!="function"&&Ct(jt.prototype,ht,{configurable:!0,writable:!0,value:function(){return In(vt(this))}})}return ht});function In(ht){return ht={next:ht},ht[Symbol.iterator]=function(){return this},ht}function En(ht){var wt=typeof Symbol<"u"&&Symbol.iterator&&ht[Symbol.iterator];return wt?wt.call(ht):{next:vt(ht)}}function kn(ht){if(!(ht instanceof Array)){ht=En(ht);for(var wt,Lt=[];!(wt=ht.next()).done;)Lt.push(wt.value);ht=Lt}return ht}var mr=typeof Object.create=="function"?Object.create:function(ht){function wt(){}return wt.prototype=ht,new wt},Vr;if(typeof Object.setPrototypeOf=="function")Vr=Object.setPrototypeOf;else{var Gr;e:{var Io={a:!0},ko={};try{ko.__proto__=Io,Gr=ko.a;break e}catch{}Gr=!1}Vr=Gr?function(ht,wt){if(ht.__proto__=wt,ht.__proto__!==wt)throw new TypeError(ht+" is not extensible");return ht}:null}var Mr=Vr;function Dr(ht,wt){if(ht.prototype=mr(wt.prototype),ht.prototype.constructor=ht,Mr)Mr(ht,wt);else for(var Lt in wt)if(Lt!="prototype")if(Object.defineProperties){var jt=Object.getOwnPropertyDescriptor(wt,Lt);jt&&Object.defineProperty(ht,Lt,jt)}else ht[Lt]=wt[Lt];ht.ka=wt.prototype}function Bo(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Uo(ht){if(ht.l)throw new TypeError("Generator is already running");ht.l=!0}Bo.prototype.o=function(ht){this.h=ht};function gs(ht,wt){ht.j={V:wt,X:!0},ht.g=ht.m||ht.s}Bo.prototype.return=function(ht){this.j={return:ht},this.g=this.s};function dr(ht,wt,Lt){return ht.g=Lt,{value:wt}}function Vu(ht){this.g=new Bo,this.h=ht}function Su(ht,wt){Uo(ht.g);var Lt=ht.g.i;return Lt?ga(ht,"return"in Lt?Lt.return:function(jt){return{value:jt,done:!0}},wt,ht.g.return):(ht.g.return(wt),fs(ht))}function ga(ht,wt,Lt,jt){try{var ln=wt.call(ht.g.i,Lt);if(!(ln instanceof Object))throw new TypeError("Iterator result "+ln+" is not an object");if(!ln.done)return ht.g.l=!1,ln;var Cn=ln.value}catch(wn){return ht.g.i=null,gs(ht.g,wn),fs(ht)}return ht.g.i=null,jt.call(ht.g,Cn),fs(ht)}function fs(ht){for(;ht.g.g;)try{var wt=ht.h(ht.g);if(wt)return ht.g.l=!1,{value:wt.value,done:!1}}catch(Lt){ht.g.h=void 0,gs(ht.g,Lt)}if(ht.g.l=!1,ht.g.j){if(wt=ht.g.j,ht.g.j=null,wt.X)throw wt.V;return{value:wt.return,done:!0}}return{value:void 0,done:!0}}function Fp(ht){this.next=function(wt){return Uo(ht.g),ht.g.i?wt=ga(ht,ht.g.i.next,wt,ht.g.o):(ht.g.o(wt),wt=fs(ht)),wt},this.throw=function(wt){return Uo(ht.g),ht.g.i?wt=ga(ht,ht.g.i.throw,wt,ht.g.o):(gs(ht.g,wt),wt=fs(ht)),wt},this.return=function(wt){return Su(ht,wt)},this[Symbol.iterator]=function(){return this}}function As(ht){function wt(jt){return ht.next(jt)}function Lt(jt){return ht.throw(jt)}return new tt(function(jt,ln){function Cn(wn){wn.done?jt(wn.value):tt.resolve(wn.value).then(wt,Lt).then(Cn,ln)}Cn(ht.next())})}function to(ht){return As(new Fp(new Vu(ht)))}hn("Promise",function(ht){function wt(wn){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Hn=this.j();try{wn(Hn.resolve,Hn.reject)}catch(or){Hn.reject(or)}}function Lt(){this.g=null}function jt(wn){return wn instanceof wt?wn:new wt(function(Hn){Hn(wn)})}if(ht)return ht;Lt.prototype.h=function(wn){if(this.g==null){this.g=[];var Hn=this;this.i(function(){Hn.l()})}this.g.push(wn)};var ln=Yt.setTimeout;Lt.prototype.i=function(wn){ln(wn,0)},Lt.prototype.l=function(){for(;this.g&&this.g.length;){var wn=this.g;this.g=[];for(var Hn=0;Hn<wn.length;++Hn){var or=wn[Hn];wn[Hn]=null;try{or()}catch(hr){this.j(hr)}}}this.g=null},Lt.prototype.j=function(wn){this.i(function(){throw wn})},wt.prototype.j=function(){function wn(hr){return function(pr){or||(or=!0,hr.call(Hn,pr))}}var Hn=this,or=!1;return{resolve:wn(this.D),reject:wn(this.l)}},wt.prototype.D=function(wn){if(wn===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(wn instanceof wt)this.G(wn);else{e:switch(typeof wn){case"object":var Hn=wn!=null;break e;case"function":Hn=!0;break e;default:Hn=!1}Hn?this.A(wn):this.m(wn)}},wt.prototype.A=function(wn){var Hn=void 0;try{Hn=wn.then}catch(or){this.l(or);return}typeof Hn=="function"?this.H(Hn,wn):this.m(wn)},wt.prototype.l=function(wn){this.s(2,wn)},wt.prototype.m=function(wn){this.s(1,wn)},wt.prototype.s=function(wn,Hn){if(this.h!=0)throw Error("Cannot settle("+wn+", "+Hn+"): Promise already settled in state"+this.h);this.h=wn,this.i=Hn,this.h===2&&this.F(),this.B()},wt.prototype.F=function(){var wn=this;ln(function(){if(wn.C()){var Hn=Yt.console;typeof Hn<"u"&&Hn.error(wn.i)}},1)},wt.prototype.C=function(){if(this.o)return!1;var wn=Yt.CustomEvent,Hn=Yt.Event,or=Yt.dispatchEvent;return typeof or>"u"?!0:(typeof wn=="function"?wn=new wn("unhandledrejection",{cancelable:!0}):typeof Hn=="function"?wn=new Hn("unhandledrejection",{cancelable:!0}):(wn=Yt.document.createEvent("CustomEvent"),wn.initCustomEvent("unhandledrejection",!1,!0,wn)),wn.promise=this,wn.reason=this.i,or(wn))},wt.prototype.B=function(){if(this.g!=null){for(var wn=0;wn<this.g.length;++wn)Cn.h(this.g[wn]);this.g=null}};var Cn=new Lt;return wt.prototype.G=function(wn){var Hn=this.j();wn.K(Hn.resolve,Hn.reject)},wt.prototype.H=function(wn,Hn){var or=this.j();try{wn.call(Hn,or.resolve,or.reject)}catch(hr){or.reject(hr)}},wt.prototype.then=function(wn,Hn){function or(Yr,Br){return typeof Yr=="function"?function(io){try{hr(Yr(io))}catch(no){pr(no)}}:Br}var hr,pr,Nr=new wt(function(Yr,Br){hr=Yr,pr=Br});return this.K(or(wn,hr),or(Hn,pr)),Nr},wt.prototype.catch=function(wn){return this.then(void 0,wn)},wt.prototype.K=function(wn,Hn){function or(){switch(hr.h){case 1:wn(hr.i);break;case 2:Hn(hr.i);break;default:throw Error("Unexpected state: "+hr.h)}}var hr=this;this.g==null?Cn.h(or):this.g.push(or),this.o=!0},wt.resolve=jt,wt.reject=function(wn){return new wt(function(Hn,or){or(wn)})},wt.race=function(wn){return new wt(function(Hn,or){for(var hr=En(wn),pr=hr.next();!pr.done;pr=hr.next())jt(pr.value).K(Hn,or)})},wt.all=function(wn){var Hn=En(wn),or=Hn.next();return or.done?jt([]):new wt(function(hr,pr){function Nr(io){return function(no){Yr[io]=no,Br--,Br==0&&hr(Yr)}}var Yr=[],Br=0;do Yr.push(void 0),Br++,jt(or.value).K(Nr(Yr.length-1),pr),or=Hn.next();while(!or.done)})},wt});function Lu(ht,wt){ht instanceof String&&(ht+="");var Lt=0,jt=!1,ln={next:function(){if(!jt&&Lt<ht.length){var Cn=Lt++;return{value:wt(Cn,ht[Cn]),done:!1}}return jt=!0,{done:!0,value:void 0}}};return ln[Symbol.iterator]=function(){return ln},ln}var Xp=typeof Object.assign=="function"?Object.assign:function(ht,wt){for(var Lt=1;Lt<arguments.length;Lt++){var jt=arguments[Lt];if(jt)for(var ln in jt)Object.prototype.hasOwnProperty.call(jt,ln)&&(ht[ln]=jt[ln])}return ht};hn("Object.assign",function(ht){return ht||Xp}),hn("Object.is",function(ht){return ht||function(wt,Lt){return wt===Lt?wt!==0||1/wt===1/Lt:wt!==wt&&Lt!==Lt}}),hn("Array.prototype.includes",function(ht){return ht||function(wt,Lt){var jt=this;jt instanceof String&&(jt=String(jt));var ln=jt.length;for(Lt=Lt||0,0>Lt&&(Lt=Math.max(Lt+ln,0));Lt<ln;Lt++){var Cn=jt[Lt];if(Cn===wt||Object.is(Cn,wt))return!0}return!1}}),hn("String.prototype.includes",function(ht){return ht||function(wt,Lt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(wt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(wt,Lt||0)!==-1}}),hn("Array.prototype.keys",function(ht){return ht||function(){return Lu(this,function(wt){return wt})}});var ba=this||self;function Xo(ht,wt){ht=ht.split(".");var Lt=ba;ht[0]in Lt||typeof Lt.execScript>"u"||Lt.execScript("var "+ht[0]);for(var jt;ht.length&&(jt=ht.shift());)ht.length||wt===void 0?Lt[jt]&&Lt[jt]!==Object.prototype[jt]?Lt=Lt[jt]:Lt=Lt[jt]={}:Lt[jt]=wt}function El(ht){throw ht}function hu(ht,wt){El(Error("Invalid wire type: "+ht+" (at position "+wt+")"))}function Bu(){El(Error("Failed to read varint, encoding is invalid."))}function pp(ht,wt){return wt=String.fromCharCode.apply(null,wt),ht==null?wt:ht+wt}var _d,yp=typeof TextDecoder<"u",Eu,ku=typeof TextEncoder<"u";function Rp(ht){if(ku)ht=(Eu||(Eu=new TextEncoder)).encode(ht);else{var wt=void 0;wt=wt===void 0?!1:wt;for(var Lt=0,jt=new Uint8Array(3*ht.length),ln=0;ln<ht.length;ln++){var Cn=ht.charCodeAt(ln);if(128>Cn)jt[Lt++]=Cn;else{if(2048>Cn)jt[Lt++]=Cn>>6|192;else{if(55296<=Cn&&57343>=Cn){if(56319>=Cn&&ln<ht.length){var wn=ht.charCodeAt(++ln);if(56320<=wn&&57343>=wn){Cn=1024*(Cn-55296)+wn-56320+65536,jt[Lt++]=Cn>>18|240,jt[Lt++]=Cn>>12&63|128,jt[Lt++]=Cn>>6&63|128,jt[Lt++]=Cn&63|128;continue}else ln--}if(wt)throw Error("Found an unpaired surrogate");Cn=65533}jt[Lt++]=Cn>>12|224,jt[Lt++]=Cn>>6&63|128}jt[Lt++]=Cn&63|128}}ht=jt.subarray(0,Lt)}return ht}var mp={},Bl=null;function Hl(ht){var wt;wt===void 0&&(wt=0),Ls(),wt=mp[wt];for(var Lt=Array(Math.floor(ht.length/3)),jt=wt[64]||"",ln=0,Cn=0;ln<ht.length-2;ln+=3){var wn=ht[ln],Hn=ht[ln+1],or=ht[ln+2],hr=wt[wn>>2];wn=wt[(wn&3)<<4|Hn>>4],Hn=wt[(Hn&15)<<2|or>>6],or=wt[or&63],Lt[Cn++]=hr+wn+Hn+or}switch(hr=0,or=jt,ht.length-ln){case 2:hr=ht[ln+1],or=wt[(hr&15)<<2]||jt;case 1:ht=ht[ln],Lt[Cn]=wt[ht>>2]+wt[(ht&3)<<4|hr>>4]+or+jt}return Lt.join("")}function _f(ht){var wt=ht.length,Lt=3*wt/4;Lt%3?Lt=Math.floor(Lt):"=.".indexOf(ht[wt-1])!=-1&&(Lt="=.".indexOf(ht[wt-2])!=-1?Lt-2:Lt-1);var jt=new Uint8Array(Lt),ln=0;return Ku(ht,function(Cn){jt[ln++]=Cn}),jt.subarray(0,ln)}function Ku(ht,wt){function Lt(or){for(;jt<ht.length;){var hr=ht.charAt(jt++),pr=Bl[hr];if(pr!=null)return pr;if(!/^[\s\xa0]*$/.test(hr))throw Error("Unknown base64 encoding at char: "+hr)}return or}Ls();for(var jt=0;;){var ln=Lt(-1),Cn=Lt(0),wn=Lt(64),Hn=Lt(64);if(Hn===64&&ln===-1)break;wt(ln<<2|Cn>>4),wn!=64&&(wt(Cn<<4&240|wn>>2),Hn!=64&&wt(wn<<6&192|Hn))}}function Ls(){if(!Bl){Bl={};for(var ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),wt=["+/=","+/","-_=","-_.","-_"],Lt=0;5>Lt;Lt++){var jt=ht.concat(wt[Lt].split(""));mp[Lt]=jt;for(var ln=0;ln<jt.length;ln++){var Cn=jt[ln];Bl[Cn]===void 0&&(Bl[Cn]=ln)}}}}var Sl=typeof Uint8Array=="function",Kl;function ys(ht){if(this.g=ht,ht!==null&&ht.length===0)throw Error("ByteString should be constructed with non-empty values")}var qs=typeof Uint8Array.prototype.slice=="function";function pu(ht,wt,Lt){return wt===Lt?Kl||(Kl=new Uint8Array(0)):qs?ht.slice(wt,Lt):new Uint8Array(ht.subarray(wt,Lt))}var Pl=0,ls=0;function Hs(ht){if(ht.constructor===Uint8Array)return ht;if(ht.constructor===ArrayBuffer)return new Uint8Array(ht);if(ht.constructor===Array)return new Uint8Array(ht);if(ht.constructor===String)return _f(ht);if(ht.constructor===ys){if(ht.g==null)var wt=Kl||(Kl=new Uint8Array(0));else{wt=Uint8Array;var Lt=ht.g;Lt=Lt==null||Sl&&Lt!=null&&Lt instanceof Uint8Array?Lt:typeof Lt=="string"?_f(Lt):null,ht=ht.g=Lt,wt=new wt(ht)}return wt}if(ht instanceof Uint8Array)return new Uint8Array(ht.buffer,ht.byteOffset,ht.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function xl(ht,wt){wt=wt===void 0?{}:wt,wt=wt.v===void 0?!1:wt.v,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.v=wt,ht&&$o(this,ht)}function $o(ht,wt){ht.h=Hs(wt),ht.l=0,ht.i=ht.h.length,ht.g=ht.l}xl.prototype.reset=function(){this.g=this.l};function _a(ht){for(var wt=128,Lt=0,jt=0,ln=0;4>ln&&128<=wt;ln++)wt=ht.h[ht.g++],Lt|=(wt&127)<<7*ln;if(128<=wt&&(wt=ht.h[ht.g++],Lt|=(wt&127)<<28,jt|=(wt&127)>>4),128<=wt)for(ln=0;5>ln&&128<=wt;ln++)wt=ht.h[ht.g++],jt|=(wt&127)<<7*ln+3;if(128>wt)return ht=Lt>>>0,wt=jt>>>0,(jt=wt&2147483648)&&(ht=~ht+1>>>0,wt=~wt>>>0,ht==0&&(wt=wt+1>>>0)),ht=4294967296*wt+(ht>>>0),jt?-ht:ht;ht.j=!0,Bu()}function os(ht){ht.g>ht.i&&(ht.j=!0,El(Error("Tried to read past the end of the data "+ht.g+" > "+ht.i)))}function Xs(ht){var wt=ht.h,Lt=wt[ht.g],jt=Lt&127;return 128>Lt?(ht.g+=1,os(ht),jt):(Lt=wt[ht.g+1],jt|=(Lt&127)<<7,128>Lt?(ht.g+=2,os(ht),jt):(Lt=wt[ht.g+2],jt|=(Lt&127)<<14,128>Lt?(ht.g+=3,os(ht),jt):(Lt=wt[ht.g+3],jt|=(Lt&127)<<21,128>Lt?(ht.g+=4,os(ht),jt):(Lt=wt[ht.g+4],jt|=(Lt&15)<<28,128>Lt?(ht.g+=5,os(ht),jt>>>0):(ht.g+=5,128<=wt[ht.g++]&&128<=wt[ht.g++]&&128<=wt[ht.g++]&&128<=wt[ht.g++]&&128<=wt[ht.g++]?(ht.j=!0,Bu(),jt):(os(ht),jt))))))}function Cl(ht){var wt=ht.h[ht.g],Lt=ht.h[ht.g+1],jt=ht.h[ht.g+2],ln=ht.h[ht.g+3];return ht.g+=4,os(ht),(wt<<0|Lt<<8|jt<<16|ln<<24)>>>0}xl.prototype.m=function(){var ht=Cl(this),wt=2*(ht>>31)+1,Lt=ht>>>23&255;return ht&=8388607,Lt==255?ht?NaN:1/0*wt:Lt==0?wt*Math.pow(2,-149)*ht:wt*Math.pow(2,Lt-150)*(ht+Math.pow(2,23))};var tu=[];function zs(){this.g=new Uint8Array(64),this.h=0}function ss(ht,wt){if(!(ht.h+1<ht.g.length)){var Lt=ht.g;ht.g=new Uint8Array(Math.ceil(1+2*ht.g.length)),ht.g.set(Lt)}ht.g[ht.h++]=wt}zs.prototype.length=function(){return this.h},zs.prototype.end=function(){var ht=this.g,wt=this.h;return this.h=0,pu(ht,0,wt)};function Yl(ht,wt){for(;127<wt;)ss(ht,wt&127|128),wt>>>=7;ss(ht,wt)}function zl(ht){var wt={},Lt=wt.O===void 0?!1:wt.O;this.m={v:wt.v===void 0?!1:wt.v},this.O=Lt,wt=this.m,tu.length?(Lt=tu.pop(),wt&&(Lt.v=wt.v),ht&&$o(Lt,ht),ht=Lt):ht=new xl(ht,wt),this.g=ht,this.l=this.g.g,this.h=this.i=-1,this.j=!1}zl.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function _c(ht){var wt=ht.g;if((wt=wt.g==wt.i)||(wt=ht.j)||(wt=ht.g,wt=wt.j||0>wt.g||wt.g>wt.i),wt)return!1;ht.l=ht.g.g;var Lt=Xs(ht.g);return wt=Lt>>>3,Lt&=7,0<=Lt&&5>=Lt?(ht.i=wt,ht.h=Lt,!0):(ht.j=!0,hu(Lt,ht.l),!1)}function zu(ht){switch(ht.h){case 0:if(ht.h!=0)zu(ht);else e:{ht=ht.g;for(var wt=ht.g,Lt=0;10>Lt;Lt++){if(!(ht.h[wt]&128)){ht.g=wt+1,os(ht);break e}wt++}ht.j=!0,Bu()}break;case 1:ht=ht.g,ht.g+=8,os(ht);break;case 2:ht.h!=2?zu(ht):(wt=Xs(ht.g),ht=ht.g,ht.g+=wt,os(ht));break;case 5:ht=ht.g,ht.g+=4,os(ht);break;case 3:wt=ht.i;do{if(!_c(ht)){ht.j=!0,El(Error("Unmatched start-group tag: stream EOF"));break}if(ht.h==4){ht.i!=wt&&(ht.j=!0,El(Error("Unmatched end-group tag")));break}zu(ht)}while(1);break;default:ht.j=!0,hu(ht.h,ht.l)}}function mu(ht,wt,Lt){var jt=ht.g.i,ln=Xs(ht.g),Cn=ht.g.g+ln;if(ht.g.i=Cn,Lt(wt,ht),Lt=Cn-ht.g.g,Lt!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(ln+" bytes, instead read "+(ln-Lt)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return ht.g.g=Cn,ht.g.i=jt,wt}var Jl=[];function gu(){this.h=[],this.i=0,this.g=new zs}function Ys(ht,wt){wt.length!==0&&(ht.h.push(wt),ht.i+=wt.length)}function Tl(ht,wt,Lt){Yl(ht.g,8*wt+2),Yl(ht.g,Lt.length),Ys(ht,ht.g.end()),Ys(ht,Lt)}var Bs=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function bs(ht){return Object.isFrozen(ht)||(Bs?ht[Bs]|=1:ht.g!==void 0?ht.g|=1:Object.defineProperties(ht,{g:{value:1,configurable:!0,writable:!0,enumerable:!1}})),ht}function $l(ht){return ht!==null&&typeof ht=="object"&&ht.constructor===Object}function ps(ht){switch(typeof ht){case"number":return isFinite(ht)?ht:String(ht);case"object":if(Sl&&ht!=null&&ht instanceof Uint8Array)return Hl(ht);if(ht instanceof ys){if(ht.g==null)ht="";else{var wt=ht.g;wt=wt==null||typeof wt=="string"?wt:Sl&&wt instanceof Uint8Array?Hl(wt):null,ht=ht.g=wt}return ht}}return ht}function as(ht,wt){if(ht!=null)return Array.isArray(ht)||$l(ht)?Cu(ht,wt):wt(ht)}function Cu(ht,wt){if(Array.isArray(ht)){for(var Lt=Array(ht.length),jt=0;jt<ht.length;jt++)Lt[jt]=as(ht[jt],wt);if(wt=Array.isArray(ht)){var ln;Bs?ln=ht[Bs]:ln=ht.g,wt=(ln??0)&1}return wt&&bs(Lt),Lt}ln={};for(Lt in ht)ln[Lt]=as(ht[Lt],wt);return ln}function ks(ht){return ht=ps(ht),Array.isArray(ht)?Cu(ht,ks):ht}var Fo;function go(ht,wt,Lt){var jt=Fo;Fo=null,ht||(ht=jt),jt=this.constructor.ha,ht||(ht=jt?[jt]:[]),this.i=(jt?0:-1)-(this.constructor.fa||0),this.l=this.g=null,this.u=ht;e:{if(jt=this.u.length,ht=jt-1,jt&&(jt=this.u[ht],$l(jt))){this.j=ht-this.i,this.h=jt;break e}wt!==void 0&&-1<wt?(this.j=Math.max(wt,ht+1-this.i),this.h=null):this.j=Number.MAX_VALUE}if(Lt)for(wt=0;wt<Lt.length;wt++)ht=Lt[wt],ht<this.j?(ht+=this.i,(jt=this.u[ht])?Array.isArray(jt)&&bs(jt):this.u[ht]=Ss):(Rl(this),(jt=this.h[ht])?Array.isArray(jt)&&bs(jt):this.h[ht]=Ss)}var Ss=Object.freeze(bs([]));function Rl(ht){var wt=ht.j+ht.i;ht.u[wt]||(ht.h=ht.u[wt]={})}function ms(ht,wt,Lt){return wt===-1?null:Lt!==void 0&&Lt||wt>=ht.j?ht.h?ht.h[wt]:void 0:ht.u[wt+ht.i]}function Es(ht,wt,Lt){Lt=Lt===void 0?!1:Lt;var jt=ms(ht,wt,Lt);return jt==null&&(jt=Ss),jt===Ss&&(jt=bs(jt.slice()),Pr(ht,wt,jt,Lt)),jt}function Cr(ht,wt){var Lt=Es(ht,wt);if(ht.l||(ht.l={}),!ht.l[wt]){for(var jt=0;jt<Lt.length;jt++)Lt[jt]=+Lt[jt];ht.l[wt]=!0}return Lt}function wr(ht,wt,Lt){return ht=ms(ht,wt),ht=ht==null?ht:+ht,ht??(Lt===void 0?0:Lt)}function Pr(ht,wt,Lt,jt){jt!==void 0&&jt||wt>=ht.j?(Rl(ht),ht.h[wt]=Lt):ht.u[wt+ht.i]=Lt}function cs(ht,wt,Lt,jt){Lt!==jt?Pr(ht,wt,Lt):Pr(ht,wt,void 0,!1)}function Os(ht,wt,Lt){if(Lt===-1)return null;ht.g||(ht.g={});var jt=ht.g[Lt];if(jt)return jt;var ln=ms(ht,Lt,!1);return ln==null?jt:(wt=new wt(ln),ht.g[Lt]=wt)}function Is(ht,wt,Lt){ht.g||(ht.g={});var jt=ht.g[Lt];if(!jt){var ln=Es(ht,Lt,!1);jt=[];for(var Cn=0;Cn<ln.length;Cn++)jt[Cn]=new wt(ln[Cn]);ht.g[Lt]=jt}return jt}function Ro(ht,wt,Lt,jt,ln){var Cn=Is(ht,jt,wt);Lt=Lt||new jt,ht=Es(ht,wt),ln!=null?(Cn.splice(ln,0,Lt),ht.splice(ln,0,Lt.u)):(Cn.push(Lt),ht.push(Lt.u))}go.prototype.toJSON=function(){return Cu(this.u,ks)},go.prototype.toString=function(){return this.u.toString()};function Ns(ht,wt){return ht=ms(ht,wt),ht??0}function Ol(ht,wt){return ht=ms(ht,wt),ht??""}function nu(ht,wt){if(ht=ht.m){Ys(wt,wt.g.end());for(var Lt=0;Lt<ht.length;Lt++)Ys(wt,ht[Lt])}}var ru=Symbol();function Tu(ht,wt,Lt){return ht[ru]||(ht[ru]=function(jt,ln){return wt(jt,ln,Lt)})}function Nu(ht){var wt=ht[ru];if(!wt){var Lt=ht[ou]||(ht[ou]=ht());wt=function(jt,ln){return Al(jt,ln,Lt)},ht[ru]=wt}return wt}function Il(ht){var wt=ht.da;if(wt)return Nu(wt);if(wt=ht.ia){var Lt=ht.Y;return delete ht.Y,Tu(ht.W.g,wt,Lt)}}function iu(ht){var wt=Il(ht),Lt=ht.W,jt=ht.ea;return wt?function(ln,Cn){return jt(ln,Cn,Lt,wt)}:function(ln,Cn){return jt(ln,Cn,Lt)}}function Dp(ht){var wt=ht[0];switch(ht.length){case 2:var Lt=ht[1];return function(Br,io,no){return wt(Br,io,no,Lt)};case 3:var jt=ht[1],ln=Nu(ht[2]);return function(Br,io,no){return wt(Br,io,no,jt,ln)};case 4:var Cn=ht[1],wn=ht[3],Hn=Nu(ht[2]);return function(Br,io,no){return wt(Br,io,no,Cn,Hn,wn)};case 5:var or=ht[1],hr=Tu(or,ht[3],ht[4]);return function(Br,io,no){return wt(Br,io,no,or,hr)};case 6:var pr=ht[1],Nr=ht[5],Yr=Tu(pr,ht[3],ht[4]);return function(Br,io,no){return wt(Br,io,no,pr,Yr,Nr)};default:throw Error("Unsupported number of parameters, expected [2-6], got "+ht.length)}}var ou=Symbol();function Al(ht,wt,Lt){for(;_c(wt)&&wt.h!=4;){var jt=wt.i,ln=Lt[jt];if(ln)Array.isArray(ln)&&(ln=Lt[jt]=Dp(ln));else{var Cn=Lt[0];Cn&&(Cn=Cn[jt])&&(ln=Lt[jt]=iu(Cn))}ln&&ln(wt,ht,jt)||(ln=wt,jt=ht,Cn=ln.l,zu(ln),ln.O||(ln=pu(ln.g.h,Cn,ln.g.g),(Cn=jt.m)?Cn.push(ln):jt.m=[ln]))}return ht}function Xu(ht,wt){var Lt=new gu;if(wt(ht,Lt),ht=Lt.i+Lt.g.length(),ht===0)Lt=new Uint8Array(0);else{ht=new Uint8Array(ht);for(var jt=Lt.h,ln=jt.length,Cn=wt=0;Cn<ln;Cn++){var wn=jt[Cn];wn.length!==0&&(ht.set(wn,wt),wt+=wn.length)}jt=Lt.g,ln=jt.h,ln!==0&&(ht.set(jt.g.subarray(0,ln),wt),jt.h=0),Lt.h=[ht],Lt=ht}return Lt}function _h(ht,wt,Lt){if(Jl.length){var jt=Jl.pop();ht&&($o(jt.g,ht),jt.i=-1,jt.h=-1),ht=jt}else ht=new zl(ht);try{var ln=new wt;return Al(ln,ht,Lt[ou]||(Lt[ou]=Lt()))}finally{wt=ht.g,wt.h=null,wt.l=0,wt.i=0,wt.g=0,wt.j=!1,wt.v=!1,ht.i=-1,ht.h=-1,ht.j=!1,100>Jl.length&&Jl.push(ht)}}function Fl(ht,wt,Lt){if(wt=ms(wt,Lt),wt!=null){Yl(ht.g,8*Lt+5),ht=ht.g;var jt=wt;jt=(Lt=0>jt?1:0)?-jt:jt,jt===0?0<1/jt?Pl=ls=0:(ls=0,Pl=2147483648):isNaN(jt)?(ls=0,Pl=2147483647):34028234663852886e22<jt?(ls=0,Pl=(Lt<<31|2139095040)>>>0):11754943508222875e-54>jt?(jt=Math.round(jt/Math.pow(2,-149)),ls=0,Pl=(Lt<<31|jt)>>>0):(wt=Math.floor(Math.log(jt)/Math.LN2),jt*=Math.pow(2,-wt),jt=Math.round(8388608*jt),16777216<=jt&&++wt,ls=0,Pl=(Lt<<31|wt+127<<23|jt&8388607)>>>0),Lt=Pl,ss(ht,Lt>>>0&255),ss(ht,Lt>>>8&255),ss(ht,Lt>>>16&255),ss(ht,Lt>>>24&255)}}function Ip(ht,wt,Lt){if(ht.h!==1)return!1;var jt=ht.g;ht=Cl(jt);var ln=Cl(jt);jt=2*(ln>>31)+1;var Cn=ln>>>20&2047;return ht=4294967296*(ln&1048575)+ht,cs(wt,Lt,Cn==2047?ht?NaN:1/0*jt:Cn==0?jt*Math.pow(2,-1074)*ht:jt*Math.pow(2,Cn-1075)*(ht+4503599627370496),0),!0}function su(ht,wt,Lt){return ht.h!==5?!1:(Pr(wt,Lt,ht.g.m()),!0)}function Du(ht,wt,Lt){if(ht.h!==5&&ht.h!==2)return!1;if(wt=Es(wt,Lt),ht.h==2){Lt=xl.prototype.m;var jt=Xs(ht.g);for(jt=ht.g.g+jt;ht.g.g<jt;)wt.push(Lt.call(ht.g))}else wt.push(ht.g.m());return!0}function sp(ht,wt,Lt){return ht.h!==5?!1:(ht=ht.g.m(),cs(wt,Lt,ht,0),!0)}function kp(ht,wt,Lt){return ht.h!==0?!1:(Pr(wt,Lt,_a(ht.g)),!0)}function vu(ht,wt,Lt){return ht.h!==0?!1:(Pr(wt,Lt,Xs(ht.g)),!0)}function ap(ht,wt,Lt){return ht.h!==0?!1:(ht=Xs(ht.g),cs(wt,Lt,ht,0),!0)}function Qp(ht,wt,Lt){return ht.h!==0?!1:(ht=!!Xs(ht.g),cs(wt,Lt,ht,!1),!0)}function _p(ht,wt,Lt){if(ht.h!==2)return!1;var jt=Xs(ht.g);ht=ht.g;var ln=ht.g;ht.g+=jt,os(ht),ht=ht.h;var Cn;if(yp)(Cn=_d)||(Cn=_d=new TextDecoder("utf-8",{fatal:!1})),Cn=Cn.decode(ht.subarray(ln,ln+jt));else{jt=ln+jt;for(var wn=[],Hn=null,or,hr,pr;ln<jt;)or=ht[ln++],128>or?wn.push(or):224>or?ln>=jt?wn.push(65533):(hr=ht[ln++],194>or||(hr&192)!==128?(ln--,wn.push(65533)):wn.push((or&31)<<6|hr&63)):240>or?ln>=jt-1?wn.push(65533):(hr=ht[ln++],(hr&192)!==128||or===224&&160>hr||or===237&&160<=hr||((Cn=ht[ln++])&192)!==128?(ln--,wn.push(65533)):wn.push((or&15)<<12|(hr&63)<<6|Cn&63)):244>=or?ln>=jt-2?wn.push(65533):(hr=ht[ln++],(hr&192)!==128||(or<<28)+(hr-144)>>30||((Cn=ht[ln++])&192)!==128||((pr=ht[ln++])&192)!==128?(ln--,wn.push(65533)):(or=(or&7)<<18|(hr&63)<<12|(Cn&63)<<6|pr&63,or-=65536,wn.push((or>>10&1023)+55296,(or&1023)+56320))):wn.push(65533),8192<=wn.length&&(Hn=pp(Hn,wn),wn.length=0);Cn=pp(Hn,wn)}return Pr(wt,Lt,Cn),!0}function cp(ht,wt,Lt,jt,ln){return ht.h!==2?!1:(ht=mu(ht,new jt,ln),wt.g||(wt.g={}),jt=ht&&ht.u,wt.g[Lt]=ht,Pr(wt,Lt,jt,!1),!0)}function gp(ht,wt,Lt,jt,ln){return ht.h!==2?!1:(ht=mu(ht,new jt,ln),Ro(wt,Lt,ht,jt,void 0),!0)}function Dt(ht,wt,Lt){return ht.h!==0?!1:(Pr(wt,Lt,_a(ht.g)),!0)}function qt(ht){go.call(this,ht)}Dr(qt,go);function en(){return{1:vu,2:su,3:_p,4:_p}}function jn(ht,wt){var Lt=ms(ht,1);if(Lt!=null&&Lt!=null){Yl(wt.g,8);var jt=wt.g;if(0<=Lt)Yl(jt,Lt);else{for(var ln=0;9>ln;ln++)ss(jt,Lt&127|128),Lt>>=7;ss(jt,1)}}Fl(wt,ht,2),jt=ms(ht,3),jt!=null&&Tl(wt,3,Rp(jt)),jt=ms(ht,4),jt!=null&&Tl(wt,4,Rp(jt)),nu(ht,wt)}function ur(ht){go.call(this,ht,-1,cr)}Dr(ur,go),ur.prototype.addClassification=function(ht,wt){return Ro(this,1,ht,qt,wt),this};function Lr(){return{1:[gp,qt,en]}}var cr=[1];function Ir(ht){go.call(this,ht)}Dr(Ir,go);function Kr(){return{1:su,2:su,3:su,4:su,5:su}}function So(ht,wt){Fl(wt,ht,1),Fl(wt,ht,2),Fl(wt,ht,3),Fl(wt,ht,4),Fl(wt,ht,5),nu(ht,wt)}function zo(ht){go.call(this,ht,-1,hs)}Dr(zo,go);function Do(){return{1:[gp,Ir,Kr]}}var hs=[1];function Ho(ht){go.call(this,ht)}Dr(Ho,go);function Oo(){return{1:su,2:su,3:su,4:su,5:su,6:kp}}function Ko(ht,wt){Fl(wt,ht,1),Fl(wt,ht,2),Fl(wt,ht,3),Fl(wt,ht,4),Fl(wt,ht,5);var Lt=ms(ht,6);if(Lt!=null&&Lt!=null){Yl(wt.g,48);var jt=wt.g,ln=Lt;Lt=0>ln,ln=Math.abs(ln);var Cn=ln>>>0;for(ln=Math.floor((ln-Cn)/4294967296),ln>>>=0,Lt&&(ln=~ln>>>0,Cn=(~Cn>>>0)+1,4294967295<Cn&&(Cn=0,ln++,4294967295<ln&&(ln=0))),Pl=Cn,ls=ln,Lt=Pl,Cn=ls;0<Cn||127<Lt;)ss(jt,Lt&127|128),Lt=(Lt>>>7|Cn<<25)>>>0,Cn>>>=7;ss(jt,Lt)}nu(ht,wt)}function us(ht){go.call(this,ht,-1,Zl)}Dr(us,go);function xs(){return{1:Dt,2:Dt,3:Du,4:[cp,Gs,Ds],5:vu,6:vu,7:Du,8:Du,9:Du}}function Gs(ht){go.call(this,ht)}Dr(Gs,go);function Ds(){return{1:su,2:su,3:su}}var Zl=[3,7,8,9];function Pt(ht){go.call(this,ht)}Dr(Pt,go);function Ut(){return{1:sp,2:sp,3:sp}}function zt(ht){go.call(this,ht)}Dr(zt,go);function On(){return{1:sp,2:sp,3:sp}}function Kn(ht){go.call(this,ht)}Dr(Kn,go);function fr(){return{1:ap,2:[cp,zt,On],3:[cp,Pt,Ut],4:Qp}}function $n(ht){go.call(this,ht,-1,Wr)}Dr($n,go);function br(){return{1:ap,2:[gp,Kn,fr],3:sp,4:Du,5:Du,6:Du}}var Wr=[2,4,5,6];function xt(ht){go.call(this,ht,-1,nn)}Dr(xt,go);function Jt(){return{1:ap,2:[gp,$n,br],3:[cp,us,xs],4:Ip,5:Du,6:Du}}var nn=[2,5,6];function Sn(ht,wt,Lt){if(Lt=ht.createShader(Lt===0?ht.VERTEX_SHADER:ht.FRAGMENT_SHADER),ht.shaderSource(Lt,wt),ht.compileShader(Lt),!ht.getShaderParameter(Lt,ht.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+ht.getShaderInfoLog(Lt));return Lt}function Pn(ht){return Is(ht,qt,1).map(function(wt){return{index:Ns(wt,1),$:wr(wt,2),label:ms(wt,3)!=null?Ol(wt,3):void 0,displayName:ms(wt,4)!=null?Ol(wt,4):void 0}})}function _n(ht){return{x:wr(ht,1),y:wr(ht,2),z:wr(ht,3),visibility:ms(ht,4)!=null?wr(ht,4):void 0}}function Yn(ht,wt){this.h=ht,this.g=wt,this.l=0}function Tr(ht,wt,Lt){return yr(ht,wt),typeof ht.g.canvas.transferToImageBitmap=="function"?tt.resolve(ht.g.canvas.transferToImageBitmap()):Lt?tt.resolve(ht.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(ht.g.canvas):(ht.i===void 0&&(ht.i=document.createElement("canvas")),new tt(function(jt){ht.i.height=ht.g.canvas.height,ht.i.width=ht.g.canvas.width,ht.i.getContext("2d",{}).drawImage(ht.g.canvas,0,0,ht.g.canvas.width,ht.g.canvas.height),jt(ht.i)}))}function yr(ht,wt){var Lt=ht.g;if(ht.m===void 0){var jt=Sn(Lt,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),ln=Sn(Lt,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Cn=Lt.createProgram();if(Lt.attachShader(Cn,jt),Lt.attachShader(Cn,ln),Lt.linkProgram(Cn),!Lt.getProgramParameter(Cn,Lt.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Lt.getProgramInfoLog(Cn));jt=ht.m=Cn,Lt.useProgram(jt),ln=Lt.getUniformLocation(jt,"sampler0"),ht.j={J:Lt.getAttribLocation(jt,"aVertex"),I:Lt.getAttribLocation(jt,"aTex"),ja:ln},ht.s=Lt.createBuffer(),Lt.bindBuffer(Lt.ARRAY_BUFFER,ht.s),Lt.enableVertexAttribArray(ht.j.J),Lt.vertexAttribPointer(ht.j.J,2,Lt.FLOAT,!1,0,0),Lt.bufferData(Lt.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Lt.STATIC_DRAW),Lt.bindBuffer(Lt.ARRAY_BUFFER,null),ht.o=Lt.createBuffer(),Lt.bindBuffer(Lt.ARRAY_BUFFER,ht.o),Lt.enableVertexAttribArray(ht.j.I),Lt.vertexAttribPointer(ht.j.I,2,Lt.FLOAT,!1,0,0),Lt.bufferData(Lt.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Lt.STATIC_DRAW),Lt.bindBuffer(Lt.ARRAY_BUFFER,null),Lt.uniform1i(ln,0)}jt=ht.j,Lt.useProgram(ht.m),Lt.canvas.width=wt.width,Lt.canvas.height=wt.height,Lt.viewport(0,0,wt.width,wt.height),Lt.activeTexture(Lt.TEXTURE0),ht.h.bindTexture2d(wt.glName),Lt.enableVertexAttribArray(jt.J),Lt.bindBuffer(Lt.ARRAY_BUFFER,ht.s),Lt.vertexAttribPointer(jt.J,2,Lt.FLOAT,!1,0,0),Lt.enableVertexAttribArray(jt.I),Lt.bindBuffer(Lt.ARRAY_BUFFER,ht.o),Lt.vertexAttribPointer(jt.I,2,Lt.FLOAT,!1,0,0),Lt.bindFramebuffer(Lt.DRAW_FRAMEBUFFER?Lt.DRAW_FRAMEBUFFER:Lt.FRAMEBUFFER,null),Lt.clearColor(0,0,0,0),Lt.clear(Lt.COLOR_BUFFER_BIT),Lt.colorMask(!0,!0,!0,!0),Lt.drawArrays(Lt.TRIANGLE_FAN,0,4),Lt.disableVertexAttribArray(jt.J),Lt.disableVertexAttribArray(jt.I),Lt.bindBuffer(Lt.ARRAY_BUFFER,null),ht.h.bindTexture2d(0)}function Qr(ht){this.g=ht}var lo=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Jo(ht,wt){return wt+ht}function Eo(ht,wt){window[ht]=wt}function Hr(ht){var wt=document.createElement("script");return wt.setAttribute("src",ht),wt.setAttribute("crossorigin","anonymous"),new tt(function(Lt){wt.addEventListener("load",function(){Lt()},!1),wt.addEventListener("error",function(){Lt()},!1),document.body.appendChild(wt)})}function fo(){return to(function(ht){switch(ht.g){case 1:return ht.m=2,dr(ht,WebAssembly.instantiate(lo),4);case 4:ht.g=3,ht.m=0;break;case 2:return ht.m=0,ht.j=null,ht.return(!1);case 3:return ht.return(!0)}})}function To(ht){if(this.g=ht,this.listeners={},this.j={},this.G={},this.m={},this.s={},this.H=this.o=this.S=!0,this.D=tt.resolve(),this.R="",this.C={},this.locateFile=ht&&ht.locateFile||Jo,typeof window=="object")var wt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")wt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.T=wt,ht.options){wt=En(Object.keys(ht.options));for(var Lt=wt.next();!Lt.done;Lt=wt.next()){Lt=Lt.value;var jt=ht.options[Lt].default;jt!==void 0&&(this.j[Lt]=typeof jt=="function"?jt():jt)}}}bt=To.prototype,bt.close=function(){return this.i&&this.i.delete(),tt.resolve()};function No(ht){var wt,Lt,jt,ln,Cn,wn,Hn,or,hr,pr,Nr;return to(function(Yr){switch(Yr.g){case 1:return ht.S?(wt=ht.g.files===void 0?[]:typeof ht.g.files=="function"?ht.g.files(ht.j):ht.g.files,dr(Yr,fo(),2)):Yr.return();case 2:if(Lt=Yr.h,typeof window=="object")return Eo("createMediapipeSolutionsWasm",{locateFile:ht.locateFile}),Eo("createMediapipeSolutionsPackedAssets",{locateFile:ht.locateFile}),wn=wt.filter(function(Br){return Br.data!==void 0}),Hn=wt.filter(function(Br){return Br.data===void 0}),or=tt.all(wn.map(function(Br){var io=Bt(ht,Br.url);if(Br.path!==void 0){var no=Br.path;io=io.then(function(ts){return ht.overrideFile(no,ts),tt.resolve(ts)})}return io})),hr=tt.all(Hn.map(function(Br){return Br.simd===void 0||Br.simd&&Lt||!Br.simd&&!Lt?Hr(ht.locateFile(Br.url,ht.T)):tt.resolve()})).then(function(){var Br,io,no;return to(function(ts){if(ts.g==1)return Br=window.createMediapipeSolutionsWasm,io=window.createMediapipeSolutionsPackedAssets,no=ht,dr(ts,Br(io),2);no.h=ts.h,ts.g=0})}),pr=function(){return to(function(Br){return ht.g.graph&&ht.g.graph.url?Br=dr(Br,Bt(ht,ht.g.graph.url),0):(Br.g=0,Br=void 0),Br})}(),dr(Yr,tt.all([hr,or,pr]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return jt=wt.filter(function(Br){return Br.simd===void 0||Br.simd&&Lt||!Br.simd&&!Lt}).map(function(Br){return ht.locateFile(Br.url,ht.T)}),importScripts.apply(null,kn(jt)),ln=ht,dr(Yr,createMediapipeSolutionsWasm(Module),6);case 6:ln.h=Yr.h,ht.l=new OffscreenCanvas(1,1),ht.h.canvas=ht.l,Cn=ht.h.GL.createContext(ht.l,{antialias:!1,alpha:!1,ga:typeof WebGL2RenderingContext<"u"?2:1}),ht.h.GL.makeContextCurrent(Cn),Yr.g=4;break;case 7:if(ht.l=document.createElement("canvas"),Nr=ht.l.getContext("webgl2",{}),!Nr&&(Nr=ht.l.getContext("webgl",{}),!Nr))return alert("Failed to create WebGL canvas context when passing video frame."),Yr.return();ht.F=Nr,ht.h.canvas=ht.l,ht.h.createContext(ht.l,!0,!0,{});case 4:ht.i=new ht.h.SolutionWasm,ht.S=!1,Yr.g=0}})}function Mo(ht){var wt,Lt,jt,ln,Cn,wn,Hn,or;return to(function(hr){if(hr.g==1){if(ht.g.graph&&ht.g.graph.url&&ht.R===ht.g.graph.url)return hr.return();if(ht.o=!0,!ht.g.graph||!ht.g.graph.url){hr.g=2;return}return ht.R=ht.g.graph.url,dr(hr,Bt(ht,ht.g.graph.url),3)}for(hr.g!=2&&(wt=hr.h,ht.i.loadGraph(wt)),Lt=En(Object.keys(ht.C)),jt=Lt.next();!jt.done;jt=Lt.next())ln=jt.value,ht.i.overrideFile(ln,ht.C[ln]);if(ht.C={},ht.g.listeners)for(Cn=En(ht.g.listeners),wn=Cn.next();!wn.done;wn=Cn.next())Hn=wn.value,Fn(ht,Hn);or=ht.j,ht.j={},ht.setOptions(or),hr.g=0})}bt.reset=function(){var ht=this;return to(function(wt){ht.i&&(ht.i.reset(),ht.m={},ht.s={}),wt.g=0})},bt.setOptions=function(ht,wt){var Lt=this;if(wt=wt||this.g.options){for(var jt=[],ln=[],Cn={},wn=En(Object.keys(ht)),Hn=wn.next();!Hn.done;Cn={L:Cn.L,M:Cn.M},Hn=wn.next()){var or=Hn.value;or in this.j&&this.j[or]===ht[or]||(this.j[or]=ht[or],Hn=wt[or],Hn!==void 0&&(Hn.onChange&&(Cn.L=Hn.onChange,Cn.M=ht[or],jt.push(function(hr){return function(){var pr;return to(function(Nr){if(Nr.g==1)return dr(Nr,hr.L(hr.M),2);pr=Nr.h,pr===!0&&(Lt.o=!0),Nr.g=0})}}(Cn))),Hn.graphOptionXref&&(or={valueNumber:Hn.type===1?ht[or]:0,valueBoolean:Hn.type===0?ht[or]:!1,valueString:Hn.type===2?ht[or]:""},Hn=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Hn.graphOptionXref),or),ln.push(Hn))))}(jt.length!==0||ln.length!==0)&&(this.o=!0,this.B=(this.B===void 0?[]:this.B).concat(ln),this.A=(this.A===void 0?[]:this.A).concat(jt))}};function Ot(ht){var wt,Lt,jt,ln,Cn,wn,Hn;return to(function(or){switch(or.g){case 1:if(!ht.o)return or.return();if(!ht.A){or.g=2;break}wt=En(ht.A),Lt=wt.next();case 3:if(Lt.done){or.g=5;break}return jt=Lt.value,dr(or,jt(),4);case 4:Lt=wt.next(),or.g=3;break;case 5:ht.A=void 0;case 2:if(ht.B){for(ln=new ht.h.GraphOptionChangeRequestList,Cn=En(ht.B),wn=Cn.next();!wn.done;wn=Cn.next())Hn=wn.value,ln.push_back(Hn);ht.i.changeOptions(ln),ln.delete(),ht.B=void 0}ht.o=!1,or.g=0}})}bt.initialize=function(){var ht=this;return to(function(wt){return wt.g==1?dr(wt,No(ht),2):wt.g!=3?dr(wt,Mo(ht),3):dr(wt,Ot(ht),0)})};function Bt(ht,wt){var Lt,jt;return to(function(ln){return wt in ht.G?ln.return(ht.G[wt]):(Lt=ht.locateFile(wt,""),jt=fetch(Lt).then(function(Cn){return Cn.arrayBuffer()}),ht.G[wt]=jt,ln.return(jt))})}bt.overrideFile=function(ht,wt){this.i?this.i.overrideFile(ht,wt):this.C[ht]=wt},bt.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},bt.send=function(ht,wt){var Lt=this,jt,ln,Cn,wn,Hn,or,hr,pr,Nr;return to(function(Yr){switch(Yr.g){case 1:return Lt.g.inputs?(jt=1e3*(wt??performance.now()),dr(Yr,Lt.D,2)):Yr.return();case 2:return dr(Yr,Lt.initialize(),3);case 3:for(ln=new Lt.h.PacketDataList,Cn=En(Object.keys(ht)),wn=Cn.next();!wn.done;wn=Cn.next())if(Hn=wn.value,or=Lt.g.inputs[Hn]){e:{var Br=ht[Hn];switch(or.type){case"video":var io=Lt.m[or.stream];if(io||(io=new Yn(Lt.h,Lt.F),Lt.m[or.stream]=io),io.l===0&&(io.l=io.h.createTexture()),typeof HTMLVideoElement<"u"&&Br instanceof HTMLVideoElement)var no=Br.videoWidth,ts=Br.videoHeight;else typeof HTMLImageElement<"u"&&Br instanceof HTMLImageElement?(no=Br.naturalWidth,ts=Br.naturalHeight):(no=Br.width,ts=Br.height);ts={glName:io.l,width:no,height:ts},no=io.g,no.canvas.width=ts.width,no.canvas.height=ts.height,no.activeTexture(no.TEXTURE0),io.h.bindTexture2d(io.l),no.texImage2D(no.TEXTURE_2D,0,no.RGBA,no.RGBA,no.UNSIGNED_BYTE,Br),io.h.bindTexture2d(0),io=ts;break e;case"detections":for(io=Lt.m[or.stream],io||(io=new Qr(Lt.h),Lt.m[or.stream]=io),io.data||(io.data=new io.g.DetectionListData),io.data.reset(Br.length),ts=0;ts<Br.length;++ts){no=Br[ts];var Cs=io.data,Ts=Cs.setBoundingBox,Ll=ts,Ju=no.U,Nl=new Ho;if(Pr(Nl,1,Ju.aa),Pr(Nl,2,Ju.ba),Pr(Nl,3,Ju.height),Pr(Nl,4,Ju.width),Pr(Nl,5,Ju.rotation),Pr(Nl,6,Ju.Z),Ju=Xu(Nl,Ko),Ts.call(Cs,Ll,Ju),no.P)for(Cs=0;Cs<no.P.length;++Cs){Nl=no.P[Cs];var bp=!!Nl.visibility;Ts=io.data,Ll=Ts.addNormalizedLandmark,Ju=ts,Nl=Object.assign(Object.assign({},Nl),{visibility:bp?Nl.visibility:0}),bp=new Ir,Pr(bp,1,Nl.x),Pr(bp,2,Nl.y),Pr(bp,3,Nl.z),Nl.visibility&&Pr(bp,4,Nl.visibility),Nl=Xu(bp,So),Ll.call(Ts,Ju,Nl)}if(no.N)for(Cs=0;Cs<no.N.length;++Cs)Ts=io.data,Ll=Ts.addClassification,Ju=ts,Nl=no.N[Cs],bp=new qt,Pr(bp,2,Nl.$),Nl.index&&Pr(bp,1,Nl.index),Nl.label&&Pr(bp,3,Nl.label),Nl.displayName&&Pr(bp,4,Nl.displayName),Nl=Xu(bp,jn),Ll.call(Ts,Ju,Nl)}io=io.data;break e;default:io={}}}switch(hr=io,pr=or.stream,or.type){case"video":ln.pushTexture2d(Object.assign(Object.assign({},hr),{stream:pr,timestamp:jt}));break;case"detections":Nr=hr,Nr.stream=pr,Nr.timestamp=jt,ln.pushDetectionList(Nr);break;default:throw Error("Unknown input config type: '"+or.type+"'")}}return Lt.i.send(ln),dr(Yr,Lt.D,4);case 4:ln.delete(),Yr.g=0}})};function rn(ht,wt,Lt){var jt,ln,Cn,wn,Hn,or,hr,pr,Nr,Yr,Br,io,no,ts;return to(function(Cs){switch(Cs.g){case 1:if(!Lt)return Cs.return(wt);for(jt={},ln=0,Cn=En(Object.keys(Lt)),wn=Cn.next();!wn.done;wn=Cn.next())Hn=wn.value,or=Lt[Hn],typeof or!="string"&&or.type==="texture"&&wt[or.stream]!==void 0&&++ln;1<ln&&(ht.H=!1),hr=En(Object.keys(Lt)),wn=hr.next();case 2:if(wn.done){Cs.g=4;break}if(pr=wn.value,Nr=Lt[pr],typeof Nr=="string")return no=jt,ts=pr,dr(Cs,gn(ht,pr,wt[Nr]),14);if(Yr=wt[Nr.stream],Nr.type==="detection_list"){if(Yr){for(var Ts=Yr.getRectList(),Ll=Yr.getLandmarksList(),Ju=Yr.getClassificationsList(),Nl=[],bp=0;bp<Ts.size();++bp){var $m=_h(Ts.get(bp),Ho,Oo);$m={U:{aa:wr($m,1),ba:wr($m,2),height:wr($m,3),width:wr($m,4),rotation:wr($m,5,0),Z:Ns($m,6)},P:Is(_h(Ll.get(bp),zo,Do),Ir,1).map(_n),N:Pn(_h(Ju.get(bp),ur,Lr))},Nl.push($m)}Ts=Nl}else Ts=[];jt[pr]=Ts,Cs.g=7;break}if(Nr.type==="proto_list"){if(Yr){for(Ts=Array(Yr.size()),Ll=0;Ll<Yr.size();Ll++)Ts[Ll]=Yr.get(Ll);Yr.delete()}else Ts=[];jt[pr]=Ts,Cs.g=7;break}if(Yr===void 0){Cs.g=3;break}if(Nr.type==="float_list"){jt[pr]=Yr,Cs.g=7;break}if(Nr.type==="proto"){jt[pr]=Yr,Cs.g=7;break}if(Nr.type!=="texture")throw Error("Unknown output config type: '"+Nr.type+"'");return Br=ht.s[pr],Br||(Br=new Yn(ht.h,ht.F),ht.s[pr]=Br),dr(Cs,Tr(Br,Yr,ht.H),13);case 13:io=Cs.h,jt[pr]=io;case 7:Nr.transform&&jt[pr]&&(jt[pr]=Nr.transform(jt[pr])),Cs.g=3;break;case 14:no[ts]=Cs.h;case 3:wn=hr.next(),Cs.g=2;break;case 4:return Cs.return(jt)}})}function gn(ht,wt,Lt){var jt;return to(function(ln){return typeof Lt=="number"||Lt instanceof Uint8Array||Lt instanceof ht.h.Uint8BlobList?ln.return(Lt):Lt instanceof ht.h.Texture2dDataOut?(jt=ht.s[wt],jt||(jt=new Yn(ht.h,ht.F),ht.s[wt]=jt),ln.return(Tr(jt,Lt,ht.H))):ln.return(void 0)})}function Fn(ht,wt){for(var Lt=wt.name||"$",jt=[].concat(kn(wt.wants)),ln=new ht.h.StringList,Cn=En(wt.wants),wn=Cn.next();!wn.done;wn=Cn.next())ln.push_back(wn.value);Cn=ht.h.PacketListener.implement({onResults:function(Hn){for(var or={},hr=0;hr<wt.wants.length;++hr)or[jt[hr]]=Hn.get(hr);var pr=ht.listeners[Lt];pr&&(ht.D=rn(ht,or,wt.outs).then(function(Nr){Nr=pr(Nr);for(var Yr=0;Yr<wt.wants.length;++Yr){var Br=or[jt[Yr]];typeof Br=="object"&&Br.hasOwnProperty&&Br.hasOwnProperty("delete")&&Br.delete()}Nr&&(ht.D=Nr)}))}}),ht.i.attachMultiListener(ln,Cn),ln.delete()}bt.onResults=function(ht,wt){this.listeners[wt||"$"]=ht},Xo("Solution",To),Xo("OptionType",{BOOL:0,NUMBER:1,ca:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Rt(ht){var wt=Ns(ht,1),Lt=Os(ht,Pt,3);return Lt={x:wr(Lt,1),y:wr(Lt,2),depth:wr(Lt,3)},ht=Os(ht,zt,2),{id:wt,point2d:Lt,point3d:{x:wr(ht,1),y:wr(ht,2),z:wr(ht,3)}}}function Mt(ht){var wt=_h(ht,xt,Jt);ht=[],wt=Is(wt,$n,2);for(var Lt=0;Lt<wt.length;Lt++)ht.push({id:Ns(wt[Lt],1),keypoints:Is(wt[Lt],Kn,2).map(Rt),visibility:wr(wt[Lt],3),scale:Cr(wt[Lt],6),translation:Cr(wt[Lt],5),rotation:Cr(wt[Lt],4)});return ht}function Ht(ht){switch(ht){case"Camera":return"object_detection_3d_camera.tflite";case"Chair":return"object_detection_3d_chair.tflite";case"Cup":return"object_detection_3d_cup.tflite";default:return"object_detection_3d_sneakers.tflite"}}function mt(ht){switch(ht){case"Camera":return"Camera";case"Chair":return"Chair";case"Cup":return"Coffee cup, Mug";default:return"Footwear"}}var Zt={focalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_x"}},focalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_y"}},principalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_x"}},principalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_y"}},allowedLabels:{type:2,graphOptionXref:{calculatorName:"ConstantSidePacketCalculatorAllowedLabels",calculatorType:"ConstantSidePacketCalculator",fieldName:"string_value"}}};function Ft(ht){var wt=this;ht=ht||{},this.g=new To({locateFile:ht.locateFile,files:[{url:"objectron_solution_packed_assets_loader.js"},{simd:!1,url:"objectron_solution_wasm_bin.js"},{simd:!0,url:"objectron_solution_simd_wasm_bin.js"}],graph:{url:"objectron.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["lifted_objects","image_transformed"],outs:{image:"image_transformed",objectDetections:{type:"proto",stream:"lifted_objects",transform:Mt}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,default:!1,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumObjects:{type:1,default:5,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorMaxNumObjects",fieldName:"int_value"}},staticImageMode:{type:0,default:!0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"objectrongpusubgraph__ConstantSidePacketCalculator",fieldName:"bool_value"}},minDetectionConfidence:{type:1,default:.5,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"objectrongpusubgraph__objectdetectionoidv4subgraph__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,default:.99,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"objectrongpusubgraph__boxlandmarksubgraph__ThresholdingCalculator",fieldName:"threshold"}},modelName:{default:"Shoe",onChange:function(Lt){var jt,ln,Cn,wn;return to(function(Hn){return Hn.g==1?(jt=Lt,wt.g.setOptions({allowedLabels:mt(jt)},Zt),ln=Ht(jt),Cn="object_detection_3d.tflite",dr(Hn,Bt(wt.g,ln),2)):(wn=Hn.h,wt.g.overrideFile(Cn,wn),Hn.return(!0))})}},focalLength:{default:[1,1],onChange:function(Lt){var jt;return to(function(ln){return jt=Lt,wt.h=jt,wt.g.setOptions({focalX:jt[0],focalY:jt[1]},Zt),ln.return(!0)})}},principalPoint:{default:[0,0],onChange:function(Lt){var jt;return to(function(ln){return jt=Lt,wt.i=jt,wt.g.setOptions({principalX:jt[0],principalY:jt[1]},Zt),ln.return(!0)})}},imageSize:{onChange:function(Lt){var jt,ln,Cn,wn;return to(function(Hn){if(wt.h===void 0||wt.i===void 0)return console.error('"focalLength" and "principalPoint" must be set if setting image size'),Hn.return();jt=Lt,ln=[jt[0]/2,jt[1]/2],Cn=[wt.h[0]/ln[0],wt.h[1]/ln[1]],wn=[wt.i[0]/ln[0],wt.i[1]/ln[1]],wt.setOptions({focalLength:Cn,principalPoint:wn}),Hn.g=0})}}}})}bt=Ft.prototype,bt.close=function(){return this.g.close(),tt.resolve()},bt.onResults=function(ht){this.g.onResults(ht)},bt.initialize=function(){var ht=this;return to(function(wt){return dr(wt,ht.g.initialize(),0)})},bt.reset=function(){this.g.reset()},bt.send=function(ht){var wt=this;return to(function(Lt){return dr(Lt,wt.g.send(ht),0)})},bt.setOptions=function(ht){this.g.setOptions(ht)},Xo("Objectron",Ft),Xo("BOX_CONNECTIONS",[[1,2],[2,4],[4,3],[3,1],[5,6],[6,8],[8,7],[7,5],[1,5],[2,6],[3,7],[4,8]]),Xo("BOX_KEYPOINTS",{CENTER:0,BACK_BOTTOM_LEFT:1,FRONT_BOTTOM_LEFT:2,BACK_TOP_LEFT:3,FRONT_TOP_LEFT:4,BACK_BOTTOM_RIGHT:5,FRONT_BOTTOM_RIGHT:6,BACK_TOP_RIGHT:7,FRONT_TOP_RIGHT:8}),Xo("VERSION","0.4.1636596145")}).call(Bp);const Dl={};(function(){var bt;function vt(xt){var Jt=0;return function(){return Jt<xt.length?{done:!1,value:xt[Jt++]}:{done:!0}}}var Ct=typeof Object.defineProperties=="function"?Object.defineProperty:function(xt,Jt,nn){return xt==Array.prototype||xt==Object.prototype||(xt[Jt]=nn.value),xt};function Xt(xt){xt=[typeof globalThis=="object"&&globalThis,xt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Jt=0;Jt<xt.length;++Jt){var nn=xt[Jt];if(nn&&nn.Math==Math)return nn}throw Error("Cannot find global object")}var Yt=Xt(this);function hn(xt,Jt){if(Jt)e:{var nn=Yt;xt=xt.split(".");for(var Sn=0;Sn<xt.length-1;Sn++){var Pn=xt[Sn];if(!(Pn in nn))break e;nn=nn[Pn]}xt=xt[xt.length-1],Sn=nn[xt],Jt=Jt(Sn),Jt!=Sn&&Jt!=null&&Ct(nn,xt,{configurable:!0,writable:!0,value:Jt})}}hn("Symbol",function(xt){function Jt(_n){if(this instanceof Jt)throw new TypeError("Symbol is not a constructor");return new nn(Sn+(_n||"")+"_"+Pn++,_n)}function nn(_n,Yn){this.g=_n,Ct(this,"description",{configurable:!0,writable:!0,value:Yn})}if(xt)return xt;nn.prototype.toString=function(){return this.g};var Sn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Pn=0;return Jt}),hn("Symbol.iterator",function(xt){if(xt)return xt;xt=Symbol("Symbol.iterator");for(var Jt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),nn=0;nn<Jt.length;nn++){var Sn=Yt[Jt[nn]];typeof Sn=="function"&&typeof Sn.prototype[xt]!="function"&&Ct(Sn.prototype,xt,{configurable:!0,writable:!0,value:function(){return In(vt(this))}})}return xt});function In(xt){return xt={next:xt},xt[Symbol.iterator]=function(){return this},xt}function En(xt){var Jt=typeof Symbol<"u"&&Symbol.iterator&&xt[Symbol.iterator];return Jt?Jt.call(xt):{next:vt(xt)}}function kn(xt){if(!(xt instanceof Array)){xt=En(xt);for(var Jt,nn=[];!(Jt=xt.next()).done;)nn.push(Jt.value);xt=nn}return xt}var mr=typeof Object.create=="function"?Object.create:function(xt){function Jt(){}return Jt.prototype=xt,new Jt},Vr;if(typeof Object.setPrototypeOf=="function")Vr=Object.setPrototypeOf;else{var Gr;e:{var Io={a:!0},ko={};try{ko.__proto__=Io,Gr=ko.a;break e}catch{}Gr=!1}Vr=Gr?function(xt,Jt){if(xt.__proto__=Jt,xt.__proto__!==Jt)throw new TypeError(xt+" is not extensible");return xt}:null}var Mr=Vr;function Dr(xt,Jt){if(xt.prototype=mr(Jt.prototype),xt.prototype.constructor=xt,Mr)Mr(xt,Jt);else for(var nn in Jt)if(nn!="prototype")if(Object.defineProperties){var Sn=Object.getOwnPropertyDescriptor(Jt,nn);Sn&&Object.defineProperty(xt,nn,Sn)}else xt[nn]=Jt[nn];xt.ea=Jt.prototype}function Bo(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Uo(xt){if(xt.l)throw new TypeError("Generator is already running");xt.l=!0}Bo.prototype.o=function(xt){this.h=xt};function gs(xt,Jt){xt.j={U:Jt,V:!0},xt.g=xt.m||xt.s}Bo.prototype.return=function(xt){this.j={return:xt},this.g=this.s};function dr(xt,Jt,nn){return xt.g=nn,{value:Jt}}function Vu(xt){this.g=new Bo,this.h=xt}function Su(xt,Jt){Uo(xt.g);var nn=xt.g.i;return nn?ga(xt,"return"in nn?nn.return:function(Sn){return{value:Sn,done:!0}},Jt,xt.g.return):(xt.g.return(Jt),fs(xt))}function ga(xt,Jt,nn,Sn){try{var Pn=Jt.call(xt.g.i,nn);if(!(Pn instanceof Object))throw new TypeError("Iterator result "+Pn+" is not an object");if(!Pn.done)return xt.g.l=!1,Pn;var _n=Pn.value}catch(Yn){return xt.g.i=null,gs(xt.g,Yn),fs(xt)}return xt.g.i=null,Sn.call(xt.g,_n),fs(xt)}function fs(xt){for(;xt.g.g;)try{var Jt=xt.h(xt.g);if(Jt)return xt.g.l=!1,{value:Jt.value,done:!1}}catch(nn){xt.g.h=void 0,gs(xt.g,nn)}if(xt.g.l=!1,xt.g.j){if(Jt=xt.g.j,xt.g.j=null,Jt.V)throw Jt.U;return{value:Jt.return,done:!0}}return{value:void 0,done:!0}}function Fp(xt){this.next=function(Jt){return Uo(xt.g),xt.g.i?Jt=ga(xt,xt.g.i.next,Jt,xt.g.o):(xt.g.o(Jt),Jt=fs(xt)),Jt},this.throw=function(Jt){return Uo(xt.g),xt.g.i?Jt=ga(xt,xt.g.i.throw,Jt,xt.g.o):(gs(xt.g,Jt),Jt=fs(xt)),Jt},this.return=function(Jt){return Su(xt,Jt)},this[Symbol.iterator]=function(){return this}}function As(xt){function Jt(Sn){return xt.next(Sn)}function nn(Sn){return xt.throw(Sn)}return new tt(function(Sn,Pn){function _n(Yn){Yn.done?Sn(Yn.value):tt.resolve(Yn.value).then(Jt,nn).then(_n,Pn)}_n(xt.next())})}function to(xt){return As(new Fp(new Vu(xt)))}hn("Promise",function(xt){function Jt(Yn){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Tr=this.j();try{Yn(Tr.resolve,Tr.reject)}catch(yr){Tr.reject(yr)}}function nn(){this.g=null}function Sn(Yn){return Yn instanceof Jt?Yn:new Jt(function(Tr){Tr(Yn)})}if(xt)return xt;nn.prototype.h=function(Yn){if(this.g==null){this.g=[];var Tr=this;this.i(function(){Tr.l()})}this.g.push(Yn)};var Pn=Yt.setTimeout;nn.prototype.i=function(Yn){Pn(Yn,0)},nn.prototype.l=function(){for(;this.g&&this.g.length;){var Yn=this.g;this.g=[];for(var Tr=0;Tr<Yn.length;++Tr){var yr=Yn[Tr];Yn[Tr]=null;try{yr()}catch(Qr){this.j(Qr)}}}this.g=null},nn.prototype.j=function(Yn){this.i(function(){throw Yn})},Jt.prototype.j=function(){function Yn(Qr){return function(lo){yr||(yr=!0,Qr.call(Tr,lo))}}var Tr=this,yr=!1;return{resolve:Yn(this.C),reject:Yn(this.l)}},Jt.prototype.C=function(Yn){if(Yn===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Yn instanceof Jt)this.F(Yn);else{e:switch(typeof Yn){case"object":var Tr=Yn!=null;break e;case"function":Tr=!0;break e;default:Tr=!1}Tr?this.v(Yn):this.m(Yn)}},Jt.prototype.v=function(Yn){var Tr=void 0;try{Tr=Yn.then}catch(yr){this.l(yr);return}typeof Tr=="function"?this.G(Tr,Yn):this.m(Yn)},Jt.prototype.l=function(Yn){this.s(2,Yn)},Jt.prototype.m=function(Yn){this.s(1,Yn)},Jt.prototype.s=function(Yn,Tr){if(this.h!=0)throw Error("Cannot settle("+Yn+", "+Tr+"): Promise already settled in state"+this.h);this.h=Yn,this.i=Tr,this.h===2&&this.D(),this.A()},Jt.prototype.D=function(){var Yn=this;Pn(function(){if(Yn.B()){var Tr=Yt.console;typeof Tr<"u"&&Tr.error(Yn.i)}},1)},Jt.prototype.B=function(){if(this.o)return!1;var Yn=Yt.CustomEvent,Tr=Yt.Event,yr=Yt.dispatchEvent;return typeof yr>"u"?!0:(typeof Yn=="function"?Yn=new Yn("unhandledrejection",{cancelable:!0}):typeof Tr=="function"?Yn=new Tr("unhandledrejection",{cancelable:!0}):(Yn=Yt.document.createEvent("CustomEvent"),Yn.initCustomEvent("unhandledrejection",!1,!0,Yn)),Yn.promise=this,Yn.reason=this.i,yr(Yn))},Jt.prototype.A=function(){if(this.g!=null){for(var Yn=0;Yn<this.g.length;++Yn)_n.h(this.g[Yn]);this.g=null}};var _n=new nn;return Jt.prototype.F=function(Yn){var Tr=this.j();Yn.J(Tr.resolve,Tr.reject)},Jt.prototype.G=function(Yn,Tr){var yr=this.j();try{Yn.call(Tr,yr.resolve,yr.reject)}catch(Qr){yr.reject(Qr)}},Jt.prototype.then=function(Yn,Tr){function yr(Eo,Hr){return typeof Eo=="function"?function(fo){try{Qr(Eo(fo))}catch(To){lo(To)}}:Hr}var Qr,lo,Jo=new Jt(function(Eo,Hr){Qr=Eo,lo=Hr});return this.J(yr(Yn,Qr),yr(Tr,lo)),Jo},Jt.prototype.catch=function(Yn){return this.then(void 0,Yn)},Jt.prototype.J=function(Yn,Tr){function yr(){switch(Qr.h){case 1:Yn(Qr.i);break;case 2:Tr(Qr.i);break;default:throw Error("Unexpected state: "+Qr.h)}}var Qr=this;this.g==null?_n.h(yr):this.g.push(yr),this.o=!0},Jt.resolve=Sn,Jt.reject=function(Yn){return new Jt(function(Tr,yr){yr(Yn)})},Jt.race=function(Yn){return new Jt(function(Tr,yr){for(var Qr=En(Yn),lo=Qr.next();!lo.done;lo=Qr.next())Sn(lo.value).J(Tr,yr)})},Jt.all=function(Yn){var Tr=En(Yn),yr=Tr.next();return yr.done?Sn([]):new Jt(function(Qr,lo){function Jo(fo){return function(To){Eo[fo]=To,Hr--,Hr==0&&Qr(Eo)}}var Eo=[],Hr=0;do Eo.push(void 0),Hr++,Sn(yr.value).J(Jo(Eo.length-1),lo),yr=Tr.next();while(!yr.done)})},Jt});function Lu(xt,Jt){xt instanceof String&&(xt+="");var nn=0,Sn=!1,Pn={next:function(){if(!Sn&&nn<xt.length){var _n=nn++;return{value:Jt(_n,xt[_n]),done:!1}}return Sn=!0,{done:!0,value:void 0}}};return Pn[Symbol.iterator]=function(){return Pn},Pn}var Xp=typeof Object.assign=="function"?Object.assign:function(xt,Jt){for(var nn=1;nn<arguments.length;nn++){var Sn=arguments[nn];if(Sn)for(var Pn in Sn)Object.prototype.hasOwnProperty.call(Sn,Pn)&&(xt[Pn]=Sn[Pn])}return xt};hn("Object.assign",function(xt){return xt||Xp}),hn("Object.is",function(xt){return xt||function(Jt,nn){return Jt===nn?Jt!==0||1/Jt===1/nn:Jt!==Jt&&nn!==nn}}),hn("Array.prototype.includes",function(xt){return xt||function(Jt,nn){var Sn=this;Sn instanceof String&&(Sn=String(Sn));var Pn=Sn.length;for(nn=nn||0,0>nn&&(nn=Math.max(nn+Pn,0));nn<Pn;nn++){var _n=Sn[nn];if(_n===Jt||Object.is(_n,Jt))return!0}return!1}}),hn("String.prototype.includes",function(xt){return xt||function(Jt,nn){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Jt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Jt,nn||0)!==-1}}),hn("Array.prototype.keys",function(xt){return xt||function(){return Lu(this,function(Jt){return Jt})}});var ba=this||self;function Xo(xt,Jt){xt=xt.split(".");var nn=ba;xt[0]in nn||typeof nn.execScript>"u"||nn.execScript("var "+xt[0]);for(var Sn;xt.length&&(Sn=xt.shift());)xt.length||Jt===void 0?nn[Sn]&&nn[Sn]!==Object.prototype[Sn]?nn=nn[Sn]:nn=nn[Sn]={}:nn[Sn]=Jt}function El(xt){ba.setTimeout(function(){throw xt},0)}function hu(xt){El(xt)}function Bu(xt,Jt){hu(Error("Invalid wire type: "+xt+" (at position "+Jt+")"))}function pp(){hu(Error("Failed to read varint, encoding is invalid."))}function _d(xt,Jt){return Jt=String.fromCharCode.apply(null,Jt),xt==null?Jt:xt+Jt}var yp,Eu=typeof TextDecoder<"u",ku,Rp=typeof TextEncoder<"u";function mp(xt){if(Rp)xt=(ku||(ku=new TextEncoder)).encode(xt);else{var Jt=void 0;Jt=Jt===void 0?!1:Jt;for(var nn=0,Sn=new Uint8Array(3*xt.length),Pn=0;Pn<xt.length;Pn++){var _n=xt.charCodeAt(Pn);if(128>_n)Sn[nn++]=_n;else{if(2048>_n)Sn[nn++]=_n>>6|192;else{if(55296<=_n&&57343>=_n){if(56319>=_n&&Pn<xt.length){var Yn=xt.charCodeAt(++Pn);if(56320<=Yn&&57343>=Yn){_n=1024*(_n-55296)+Yn-56320+65536,Sn[nn++]=_n>>18|240,Sn[nn++]=_n>>12&63|128,Sn[nn++]=_n>>6&63|128,Sn[nn++]=_n&63|128;continue}else Pn--}if(Jt)throw Error("Found an unpaired surrogate");_n=65533}Sn[nn++]=_n>>12|224,Sn[nn++]=_n>>6&63|128}Sn[nn++]=_n&63|128}}xt=Sn.subarray(0,nn)}return xt}var Bl={},Hl=null;function _f(xt){var Jt;Jt===void 0&&(Jt=0),Sl(),Jt=Bl[Jt];for(var nn=Array(Math.floor(xt.length/3)),Sn=Jt[64]||"",Pn=0,_n=0;Pn<xt.length-2;Pn+=3){var Yn=xt[Pn],Tr=xt[Pn+1],yr=xt[Pn+2],Qr=Jt[Yn>>2];Yn=Jt[(Yn&3)<<4|Tr>>4],Tr=Jt[(Tr&15)<<2|yr>>6],yr=Jt[yr&63],nn[_n++]=Qr+Yn+Tr+yr}switch(Qr=0,yr=Sn,xt.length-Pn){case 2:Qr=xt[Pn+1],yr=Jt[(Qr&15)<<2]||Sn;case 1:xt=xt[Pn],nn[_n]=Jt[xt>>2]+Jt[(xt&3)<<4|Qr>>4]+yr+Sn}return nn.join("")}function Ku(xt){var Jt=xt.length,nn=3*Jt/4;nn%3?nn=Math.floor(nn):"=.".indexOf(xt[Jt-1])!=-1&&(nn="=.".indexOf(xt[Jt-2])!=-1?nn-2:nn-1);var Sn=new Uint8Array(nn),Pn=0;return Ls(xt,function(_n){Sn[Pn++]=_n}),Sn.subarray(0,Pn)}function Ls(xt,Jt){function nn(yr){for(;Sn<xt.length;){var Qr=xt.charAt(Sn++),lo=Hl[Qr];if(lo!=null)return lo;if(!/^[\s\xa0]*$/.test(Qr))throw Error("Unknown base64 encoding at char: "+Qr)}return yr}Sl();for(var Sn=0;;){var Pn=nn(-1),_n=nn(0),Yn=nn(64),Tr=nn(64);if(Tr===64&&Pn===-1)break;Jt(Pn<<2|_n>>4),Yn!=64&&(Jt(_n<<4&240|Yn>>2),Tr!=64&&Jt(Yn<<6&192|Tr))}}function Sl(){if(!Hl){Hl={};for(var xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Jt=["+/=","+/","-_=","-_.","-_"],nn=0;5>nn;nn++){var Sn=xt.concat(Jt[nn].split(""));Bl[nn]=Sn;for(var Pn=0;Pn<Sn.length;Pn++){var _n=Sn[Pn];Hl[_n]===void 0&&(Hl[_n]=Pn)}}}}var Kl=typeof Uint8Array=="function",ys;function qs(xt){if(this.g=xt,xt!==null&&xt.length===0)throw Error("ByteString should be constructed with non-empty values")}qs.prototype.toJSON=function(){if(this.g==null)var xt="";else xt=this.g,xt=this.g=xt==null||typeof xt=="string"?xt:Kl&&xt instanceof Uint8Array?_f(xt):null;return xt};var pu=typeof Uint8Array.prototype.slice=="function";function Pl(xt,Jt,nn){return Jt===nn?ys||(ys=new Uint8Array(0)):pu?xt.slice(Jt,nn):new Uint8Array(xt.subarray(Jt,nn))}var ls=0,Hs=0;function xl(xt){if(xt.constructor===Uint8Array)return xt;if(xt.constructor===ArrayBuffer)return new Uint8Array(xt);if(xt.constructor===Array)return new Uint8Array(xt);if(xt.constructor===String)return Ku(xt);if(xt.constructor===qs){if(xt.g==null)var Jt=ys||(ys=new Uint8Array(0));else{Jt=Uint8Array;var nn=xt.g;nn=nn==null||Kl&&nn!=null&&nn instanceof Uint8Array?nn:typeof nn=="string"?Ku(nn):null,xt=xt.g=nn,Jt=new Jt(xt)}return Jt}if(xt instanceof Uint8Array)return new Uint8Array(xt.buffer,xt.byteOffset,xt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function $o(xt,Jt){Jt=Jt===void 0?{}:Jt,Jt=Jt.u===void 0?!1:Jt.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=Jt,xt&&_a(this,xt)}function _a(xt,Jt){xt.h=xl(Jt),xt.l=0,xt.i=xt.h.length,xt.g=xt.l}$o.prototype.reset=function(){this.g=this.l};function os(xt){xt.g>xt.i&&(xt.j=!0,hu(Error("Tried to read past the end of the data "+xt.g+" > "+xt.i)))}function Xs(xt){var Jt=xt.h,nn=Jt[xt.g],Sn=nn&127;return 128>nn?(xt.g+=1,os(xt),Sn):(nn=Jt[xt.g+1],Sn|=(nn&127)<<7,128>nn?(xt.g+=2,os(xt),Sn):(nn=Jt[xt.g+2],Sn|=(nn&127)<<14,128>nn?(xt.g+=3,os(xt),Sn):(nn=Jt[xt.g+3],Sn|=(nn&127)<<21,128>nn?(xt.g+=4,os(xt),Sn):(nn=Jt[xt.g+4],Sn|=(nn&15)<<28,128>nn?(xt.g+=5,os(xt),Sn>>>0):(xt.g+=5,128<=Jt[xt.g++]&&128<=Jt[xt.g++]&&128<=Jt[xt.g++]&&128<=Jt[xt.g++]&&128<=Jt[xt.g++]?(xt.j=!0,pp(),Sn):(os(xt),Sn))))))}var Cl=[];function tu(){this.g=new Uint8Array(64),this.h=0}function zs(xt,Jt){if(!(xt.h+1<xt.g.length)){var nn=xt.g;xt.g=new Uint8Array(Math.ceil(1+2*xt.g.length)),xt.g.set(nn)}xt.g[xt.h++]=Jt}tu.prototype.length=function(){return this.h},tu.prototype.end=function(){var xt=this.g,Jt=this.h;return this.h=0,Pl(xt,0,Jt)};function ss(xt,Jt){for(;127<Jt;)zs(xt,Jt&127|128),Jt>>>=7;zs(xt,Jt)}function Yl(xt){var Jt={},nn=Jt.N===void 0?!1:Jt.N;this.m={u:Jt.u===void 0?!1:Jt.u},this.N=nn,Jt=this.m,Cl.length?(nn=Cl.pop(),Jt&&(nn.u=Jt.u),xt&&_a(nn,xt),xt=nn):xt=new $o(xt,Jt),this.g=xt,this.l=this.g.g,this.h=this.i=-1,this.j=!1}Yl.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function zl(xt){var Jt=xt.g;if((Jt=Jt.g==Jt.i)||(Jt=xt.j)||(Jt=xt.g,Jt=Jt.j||0>Jt.g||Jt.g>Jt.i),Jt)return!1;xt.l=xt.g.g;var nn=Xs(xt.g);return Jt=nn>>>3,nn&=7,0<=nn&&5>=nn?(xt.i=Jt,xt.h=nn,!0):(xt.j=!0,Bu(nn,xt.l),!1)}function _c(xt){switch(xt.h){case 0:if(xt.h!=0)_c(xt);else e:{xt=xt.g;for(var Jt=xt.g,nn=0;10>nn;nn++){if(!(xt.h[Jt]&128)){xt.g=Jt+1,os(xt);break e}Jt++}xt.j=!0,pp()}break;case 1:xt=xt.g,xt.g+=8,os(xt);break;case 2:xt.h!=2?_c(xt):(Jt=Xs(xt.g),xt=xt.g,xt.g+=Jt,os(xt));break;case 5:xt=xt.g,xt.g+=4,os(xt);break;case 3:Jt=xt.i;do{if(!zl(xt)){xt.j=!0,hu(Error("Unmatched start-group tag: stream EOF"));break}if(xt.h==4){xt.i!=Jt&&(xt.j=!0,hu(Error("Unmatched end-group tag")));break}_c(xt)}while(1);break;default:xt.j=!0,Bu(xt.h,xt.l)}}function zu(xt,Jt,nn){xt.N||(xt=Pl(xt.g.h,nn,xt.g.g),(nn=Jt.m)?nn.push(xt):Jt.m=[xt])}var mu=[];function Jl(){this.h=[],this.i=0,this.g=new tu}function gu(xt,Jt){Jt.length!==0&&(xt.h.push(Jt),xt.i+=Jt.length)}function Ys(xt,Jt,nn){ss(xt.g,8*Jt+2),ss(xt.g,nn.length),gu(xt,xt.g.end()),gu(xt,nn)}var Tl=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Bs(xt,Jt){Object.isFrozen(xt)||(Tl?xt[Tl]|=Jt:xt.g!==void 0?xt.g|=Jt:Object.defineProperties(xt,{g:{value:Jt,configurable:!0,writable:!0,enumerable:!1}}))}function bs(xt){if(!xt)return 0;var Jt;return Tl?Jt=xt[Tl]:Jt=xt.g,Jt??0}function $l(xt){return Array.isArray(xt)&&Bs(xt,1),xt}function ps(xt){if(!Array.isArray(xt))throw Error("cannot mark non-array as immutable");Bs(xt,2)}function as(xt){return xt!==null&&typeof xt=="object"&&xt.constructor===Object}function Cu(xt){switch(typeof xt){case"number":return isFinite(xt)?xt:String(xt);case"object":return Kl&&xt!=null&&xt instanceof Uint8Array?_f(xt):xt;default:return xt}}function ks(xt,Jt){if(xt!=null)return Array.isArray(xt)||as(xt)?Fo(xt,Jt):Jt(xt)}function Fo(xt,Jt){if(Array.isArray(xt)){for(var nn=Array(xt.length),Sn=0;Sn<xt.length;Sn++)nn[Sn]=ks(xt[Sn],Jt);return bs(xt)&1&&$l(nn),nn}nn={};for(Sn in xt)nn[Sn]=ks(xt[Sn],Jt);return nn}var go;function Ss(xt,Jt,nn){var Sn=go;go=null,xt||(xt=Sn),Sn=this.constructor.ca,xt||(xt=Sn?[Sn]:[]),this.j=(Sn?0:-1)-(this.constructor.aa||0),this.i=null,this.g=xt;e:{if(Sn=this.g.length,xt=Sn-1,Sn&&(Sn=this.g[xt],as(Sn))){this.l=xt-this.j,this.h=Sn;break e}Jt!==void 0&&-1<Jt?(this.l=Math.max(Jt,xt+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(nn)for(Jt=0;Jt<nn.length;Jt++)xt=nn[Jt],xt<this.l?(xt+=this.j,(Sn=this.g[xt])?$l(Sn):this.g[xt]=Rl):(ms(this),(Sn=this.h[xt])?$l(Sn):this.h[xt]=Rl)}var Rl=Object.freeze($l([]));function ms(xt){var Jt=xt.l+xt.j;xt.g[Jt]||(xt.h=xt.g[Jt]={})}function Es(xt,Jt,nn){return Jt===-1?null:nn!==void 0&&nn||Jt>=xt.l?xt.h?xt.h[Jt]:void 0:xt.g[Jt+xt.j]}function Cr(xt,Jt,nn){nn=nn===void 0?!0:nn;var Sn=Sn===void 0?!1:Sn,Pn=Es(xt,Jt,Sn);return Pn==null&&(Pn=Rl),Pn===Rl?(Pn=$l([]),Pr(xt,Jt,Pn,Sn)):nn&&Array.isArray(Pn)&&bs(Pn)&2&&(Pn=Pn.slice(),Pr(xt,Jt,Pn,Sn)),Pn}function wr(xt,Jt,nn){return xt=Es(xt,Jt),xt=xt==null?xt:+xt,xt??(nn===void 0?0:nn)}function Pr(xt,Jt,nn,Sn){Sn!==void 0&&Sn||Jt>=xt.l?(ms(xt),xt.h[Jt]=nn):xt.g[Jt+xt.j]=nn}function cs(xt,Jt,nn){xt.i||(xt.i={});var Sn=xt.i[nn];if(!Sn){var Pn=Cr(xt,nn,!1);Sn=[];for(var _n=Array.isArray(Pn)?!!(bs(Pn)&2):!1,Yn=0;Yn<Pn.length;Yn++)Sn[Yn]=new Jt(Pn[Yn]),_n&&ps(Sn[Yn].g);_n&&(ps(Sn),Object.freeze(Sn)),xt.i[nn]=Sn}return Sn}function Os(xt,Jt,nn,Sn,Pn){var _n=cs(xt,Sn,Jt);nn=nn||new Sn,xt=Cr(xt,Jt),Pn!=null?(_n.splice(Pn,0,nn),xt.splice(Pn,0,Is(nn))):(_n.push(nn),xt.push(Is(nn)))}Ss.prototype.toJSON=function(){var xt=Is(this);return Fo(xt,Cu)};function Is(xt){if(xt.i)for(var Jt in xt.i){var nn=xt.i[Jt];if(Array.isArray(nn))for(var Sn=0;Sn<nn.length;Sn++)nn[Sn]&&Is(nn[Sn]);else nn&&Is(nn)}return xt.g}Ss.prototype.toString=function(){return Is(this).toString()};function Ro(xt,Jt){return xt=Es(xt,Jt),xt??0}function Ns(xt,Jt){return xt=Es(xt,Jt),xt??""}function Ol(xt,Jt){if(xt=xt.m){gu(Jt,Jt.g.end());for(var nn=0;nn<xt.length;nn++)gu(Jt,xt[nn])}}function nu(xt){var Jt=xt[0];switch(xt.length){case 2:var nn=xt[1];return function(yr,Qr,lo){return Jt(yr,Qr,lo,nn)};case 3:var Sn=xt[1],Pn=xt[2];return function(yr,Qr,lo){return Jt(yr,Qr,lo,Sn,Pn)};case 4:var _n=xt[1],Yn=xt[2],Tr=xt[3];return function(yr,Qr,lo){return Jt(yr,Qr,lo,_n,Yn,Tr)};default:throw Error("unsupported number of parameters, expected [2-4], got "+xt.length)}}function ru(xt,Jt,nn){for(;zl(Jt)&&Jt.h!=4;){var Sn=Jt.i,Pn=nn[Sn];if(Pn){if(Array.isArray(Pn)&&(Pn=nn[Sn]=nu(Pn)),!Pn(Jt,xt,Sn)){Sn=Jt,Pn=xt;var _n=Sn.l;_c(Sn),zu(Sn,Pn,_n)}}else Sn=Jt,Pn=xt,_n=Sn.l,_c(Sn),zu(Sn,Pn,_n)}return xt}function Tu(xt,Jt){var nn=new Jl;if(Jt(xt,nn),xt=nn.i+nn.g.length(),xt===0)nn=new Uint8Array(0);else{xt=new Uint8Array(xt);for(var Sn=nn.h,Pn=Sn.length,_n=Jt=0;_n<Pn;_n++){var Yn=Sn[_n];Yn.length!==0&&(xt.set(Yn,Jt),Jt+=Yn.length)}Sn=nn.g,Pn=Sn.h,Pn!==0&&(xt.set(Sn.g.subarray(0,Pn),Jt),Sn.h=0),nn.h=[xt],nn=xt}return nn}function Nu(xt,Jt,nn){if(mu.length){var Sn=mu.pop();xt&&(_a(Sn.g,xt),Sn.i=-1,Sn.h=-1),xt=Sn}else xt=new Yl(xt);try{return nn(new Jt,xt)}finally{Jt=xt.g,Jt.h=null,Jt.l=0,Jt.i=0,Jt.g=0,Jt.j=!1,Jt.u=!1,xt.i=-1,xt.h=-1,xt.j=!1,100>mu.length&&mu.push(xt)}}function Il(xt,Jt,nn){if(Jt=Es(Jt,nn),Jt!=null){ss(xt.g,8*nn+5),xt=xt.g;var Sn=Jt;Sn=(nn=0>Sn?1:0)?-Sn:Sn,Sn===0?0<1/Sn?ls=Hs=0:(Hs=0,ls=2147483648):isNaN(Sn)?(Hs=0,ls=2147483647):34028234663852886e22<Sn?(Hs=0,ls=(nn<<31|2139095040)>>>0):11754943508222875e-54>Sn?(Sn=Math.round(Sn/Math.pow(2,-149)),Hs=0,ls=(nn<<31|Sn)>>>0):(Jt=Math.floor(Math.log(Sn)/Math.LN2),Sn*=Math.pow(2,-Jt),Sn=Math.round(8388608*Sn),16777216<=Sn&&++Jt,Hs=0,ls=(nn<<31|Jt+127<<23|Sn&8388607)>>>0),nn=ls,zs(xt,nn>>>0&255),zs(xt,nn>>>8&255),zs(xt,nn>>>16&255),zs(xt,nn>>>24&255)}}function iu(xt,Jt,nn){if(xt.h!==5)return!1;xt=xt.g;var Sn=xt.h[xt.g],Pn=xt.h[xt.g+1],_n=xt.h[xt.g+2],Yn=xt.h[xt.g+3];return xt.g+=4,os(xt),Pn=(Sn<<0|Pn<<8|_n<<16|Yn<<24)>>>0,xt=2*(Pn>>31)+1,Sn=Pn>>>23&255,Pn&=8388607,Pr(Jt,nn,Sn==255?Pn?NaN:1/0*xt:Sn==0?xt*Math.pow(2,-149)*Pn:xt*Math.pow(2,Sn-150)*(Pn+Math.pow(2,23))),!0}function Dp(xt,Jt,nn){if(xt.h!==0)return!1;for(var Sn=xt.g,Pn=128,_n=0,Yn=xt=0;4>Yn&&128<=Pn;Yn++)Pn=Sn.h[Sn.g++],_n|=(Pn&127)<<7*Yn;if(128<=Pn&&(Pn=Sn.h[Sn.g++],_n|=(Pn&127)<<28,xt|=(Pn&127)>>4),128<=Pn)for(Yn=0;5>Yn&&128<=Pn;Yn++)Pn=Sn.h[Sn.g++],xt|=(Pn&127)<<7*Yn+3;return 128>Pn?(Sn=_n>>>0,Pn=xt>>>0,(xt=Pn&2147483648)&&(Sn=~Sn+1>>>0,Pn=~Pn>>>0,Sn==0&&(Pn=Pn+1>>>0)),Sn=4294967296*Pn+(Sn>>>0),xt=xt?-Sn:Sn):(Sn.j=!0,pp(),xt=void 0),Pr(Jt,nn,xt),!0}function ou(xt,Jt,nn){return xt.h!==0?!1:(Pr(Jt,nn,Xs(xt.g)),!0)}function Al(xt,Jt,nn){if(xt.h!==2)return!1;var Sn=Xs(xt.g);xt=xt.g;var Pn=xt.g;xt.g+=Sn,os(xt),xt=xt.h;var _n;if(Eu)(_n=yp)||(_n=yp=new TextDecoder("utf-8",{fatal:!1})),_n=_n.decode(xt.subarray(Pn,Pn+Sn));else{Sn=Pn+Sn;for(var Yn=[],Tr=null,yr,Qr,lo;Pn<Sn;)yr=xt[Pn++],128>yr?Yn.push(yr):224>yr?Pn>=Sn?Yn.push(65533):(Qr=xt[Pn++],194>yr||(Qr&192)!==128?(Pn--,Yn.push(65533)):Yn.push((yr&31)<<6|Qr&63)):240>yr?Pn>=Sn-1?Yn.push(65533):(Qr=xt[Pn++],(Qr&192)!==128||yr===224&&160>Qr||yr===237&&160<=Qr||((_n=xt[Pn++])&192)!==128?(Pn--,Yn.push(65533)):Yn.push((yr&15)<<12|(Qr&63)<<6|_n&63)):244>=yr?Pn>=Sn-2?Yn.push(65533):(Qr=xt[Pn++],(Qr&192)!==128||(yr<<28)+(Qr-144)>>30||((_n=xt[Pn++])&192)!==128||((lo=xt[Pn++])&192)!==128?(Pn--,Yn.push(65533)):(yr=(yr&7)<<18|(Qr&63)<<12|(_n&63)<<6|lo&63,yr-=65536,Yn.push((yr>>10&1023)+55296,(yr&1023)+56320))):Yn.push(65533),8192<=Yn.length&&(Tr=_d(Tr,Yn),Yn.length=0);_n=_d(Tr,Yn)}return Pr(Jt,nn,_n),!0}function Xu(xt,Jt,nn,Sn,Pn){if(xt.h!==2)return!1;var _n=new Sn,Yn=xt.g.i,Tr=Xs(xt.g),yr=xt.g.g+Tr;if(xt.g.i=yr,Pn(_n,xt),Pn=yr-xt.g.g,Pn!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(Tr+" bytes, instead read "+(Tr-Pn)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return xt.g.g=yr,xt.g.i=Yn,Os(Jt,nn,_n,Sn,void 0),!0}function _h(xt){Ss.call(this,xt)}var Fl;Dr(_h,Ss);function Ip(xt,Jt){var nn=Es(xt,1);if(nn!=null&&nn!=null){ss(Jt.g,8);var Sn=Jt.g;if(0<=nn)ss(Sn,nn);else{for(var Pn=0;9>Pn;Pn++)zs(Sn,nn&127|128),nn>>=7;zs(Sn,1)}}Il(Jt,xt,2),Sn=Es(xt,3),Sn!=null&&Ys(Jt,3,mp(Sn)),Sn=Es(xt,4),Sn!=null&&Ys(Jt,4,mp(Sn)),Ol(xt,Jt)}function su(xt,Jt){return ru(xt,Jt,Fl||(Fl={1:ou,2:iu,3:Al,4:Al}))}function Du(xt){Ss.call(this,xt,-1,vu)}var sp;Dr(Du,Ss),Du.prototype.addClassification=function(xt,Jt){return Os(this,1,xt,_h,Jt),this};function kp(xt,Jt){return ru(xt,Jt,sp||(sp={1:[Xu,_h,su]}))}var vu=[1];function ap(xt){Ss.call(this,xt)}var Qp;Dr(ap,Ss);function _p(xt,Jt){Il(Jt,xt,1),Il(Jt,xt,2),Il(Jt,xt,3),Il(Jt,xt,4),Il(Jt,xt,5),Ol(xt,Jt)}function cp(xt,Jt){return ru(xt,Jt,Qp||(Qp={1:iu,2:iu,3:iu,4:iu,5:iu}))}function gp(xt){Ss.call(this,xt,-1,en)}var Dt;Dr(gp,Ss);function qt(xt,Jt){return ru(xt,Jt,Dt||(Dt={1:[Xu,ap,cp]}))}var en=[1];function jn(xt){Ss.call(this,xt)}var ur;Dr(jn,Ss);function Lr(xt,Jt){Il(Jt,xt,1),Il(Jt,xt,2),Il(Jt,xt,3),Il(Jt,xt,4),Il(Jt,xt,5);var nn=Es(xt,6);if(nn!=null&&nn!=null){ss(Jt.g,48);var Sn=Jt.g,Pn=nn;nn=0>Pn,Pn=Math.abs(Pn);var _n=Pn>>>0;for(Pn=Math.floor((Pn-_n)/4294967296),Pn>>>=0,nn&&(Pn=~Pn>>>0,_n=(~_n>>>0)+1,4294967295<_n&&(_n=0,Pn++,4294967295<Pn&&(Pn=0))),ls=_n,Hs=Pn,nn=ls,_n=Hs;0<_n||127<nn;)zs(Sn,nn&127|128),nn=(nn>>>7|_n<<25)>>>0,_n>>>=7;zs(Sn,nn)}Ol(xt,Jt)}function cr(xt,Jt){return ru(xt,Jt,ur||(ur={1:iu,2:iu,3:iu,4:iu,5:iu,6:Dp}))}function Ir(xt,Jt,nn){if(nn=xt.createShader(nn===0?xt.VERTEX_SHADER:xt.FRAGMENT_SHADER),xt.shaderSource(nn,Jt),xt.compileShader(nn),!xt.getShaderParameter(nn,xt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+xt.getShaderInfoLog(nn));return nn}function Kr(xt){return cs(xt,_h,1).map(function(Jt){return{index:Ro(Jt,1),X:wr(Jt,2),label:Es(Jt,3)!=null?Ns(Jt,3):void 0,displayName:Es(Jt,4)!=null?Ns(Jt,4):void 0}})}function So(xt){return{x:wr(xt,1),y:wr(xt,2),z:wr(xt,3),visibility:Es(xt,4)!=null?wr(xt,4):void 0}}function zo(xt){return cs(Nu(xt,gp,qt),ap,1).map(So)}function Do(xt,Jt){this.h=xt,this.g=Jt,this.l=0}function hs(xt,Jt,nn){return Ho(xt,Jt),typeof xt.g.canvas.transferToImageBitmap=="function"?tt.resolve(xt.g.canvas.transferToImageBitmap()):nn?tt.resolve(xt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(xt.g.canvas):(xt.i===void 0&&(xt.i=document.createElement("canvas")),new tt(function(Sn){xt.i.height=xt.g.canvas.height,xt.i.width=xt.g.canvas.width,xt.i.getContext("2d",{}).drawImage(xt.g.canvas,0,0,xt.g.canvas.width,xt.g.canvas.height),Sn(xt.i)}))}function Ho(xt,Jt){var nn=xt.g;if(xt.m===void 0){var Sn=Ir(nn,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Pn=Ir(nn,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),_n=nn.createProgram();if(nn.attachShader(_n,Sn),nn.attachShader(_n,Pn),nn.linkProgram(_n),!nn.getProgramParameter(_n,nn.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+nn.getProgramInfoLog(_n));Sn=xt.m=_n,nn.useProgram(Sn),Pn=nn.getUniformLocation(Sn,"sampler0"),xt.j={I:nn.getAttribLocation(Sn,"aVertex"),H:nn.getAttribLocation(Sn,"aTex"),da:Pn},xt.s=nn.createBuffer(),nn.bindBuffer(nn.ARRAY_BUFFER,xt.s),nn.enableVertexAttribArray(xt.j.I),nn.vertexAttribPointer(xt.j.I,2,nn.FLOAT,!1,0,0),nn.bufferData(nn.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),nn.STATIC_DRAW),nn.bindBuffer(nn.ARRAY_BUFFER,null),xt.o=nn.createBuffer(),nn.bindBuffer(nn.ARRAY_BUFFER,xt.o),nn.enableVertexAttribArray(xt.j.H),nn.vertexAttribPointer(xt.j.H,2,nn.FLOAT,!1,0,0),nn.bufferData(nn.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),nn.STATIC_DRAW),nn.bindBuffer(nn.ARRAY_BUFFER,null),nn.uniform1i(Pn,0)}Sn=xt.j,nn.useProgram(xt.m),nn.canvas.width=Jt.width,nn.canvas.height=Jt.height,nn.viewport(0,0,Jt.width,Jt.height),nn.activeTexture(nn.TEXTURE0),xt.h.bindTexture2d(Jt.glName),nn.enableVertexAttribArray(Sn.I),nn.bindBuffer(nn.ARRAY_BUFFER,xt.s),nn.vertexAttribPointer(Sn.I,2,nn.FLOAT,!1,0,0),nn.enableVertexAttribArray(Sn.H),nn.bindBuffer(nn.ARRAY_BUFFER,xt.o),nn.vertexAttribPointer(Sn.H,2,nn.FLOAT,!1,0,0),nn.bindFramebuffer(nn.DRAW_FRAMEBUFFER?nn.DRAW_FRAMEBUFFER:nn.FRAMEBUFFER,null),nn.clearColor(0,0,0,0),nn.clear(nn.COLOR_BUFFER_BIT),nn.colorMask(!0,!0,!0,!0),nn.drawArrays(nn.TRIANGLE_FAN,0,4),nn.disableVertexAttribArray(Sn.I),nn.disableVertexAttribArray(Sn.H),nn.bindBuffer(nn.ARRAY_BUFFER,null),xt.h.bindTexture2d(0)}function Oo(xt){this.g=xt}var Ko=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function us(xt,Jt){return Jt+xt}function xs(xt,Jt){window[xt]=Jt}function Gs(xt){var Jt=document.createElement("script");return Jt.setAttribute("src",xt),Jt.setAttribute("crossorigin","anonymous"),new tt(function(nn){Jt.addEventListener("load",function(){nn()},!1),Jt.addEventListener("error",function(){nn()},!1),document.body.appendChild(Jt)})}function Ds(){return to(function(xt){switch(xt.g){case 1:return xt.m=2,dr(xt,WebAssembly.instantiate(Ko),4);case 4:xt.g=3,xt.m=0;break;case 2:return xt.m=0,xt.j=null,xt.return(!1);case 3:return xt.return(!0)}})}function Zl(xt){if(this.g=xt,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=tt.resolve(),this.P="",this.B={},this.locateFile=xt&&xt.locateFile||us,typeof window=="object")var Jt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Jt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=Jt,xt.options){Jt=En(Object.keys(xt.options));for(var nn=Jt.next();!nn.done;nn=Jt.next()){nn=nn.value;var Sn=xt.options[nn].default;Sn!==void 0&&(this.j[nn]=typeof Sn=="function"?Sn():Sn)}}}bt=Zl.prototype,bt.close=function(){return this.i&&this.i.delete(),tt.resolve()};function Pt(xt){var Jt,nn,Sn,Pn,_n,Yn,Tr,yr,Qr,lo,Jo;return to(function(Eo){switch(Eo.g){case 1:return xt.R?(Jt=xt.g.files===void 0?[]:typeof xt.g.files=="function"?xt.g.files(xt.j):xt.g.files,dr(Eo,Ds(),2)):Eo.return();case 2:if(nn=Eo.h,typeof window=="object")return xs("createMediapipeSolutionsWasm",{locateFile:xt.locateFile}),xs("createMediapipeSolutionsPackedAssets",{locateFile:xt.locateFile}),Yn=Jt.filter(function(Hr){return Hr.data!==void 0}),Tr=Jt.filter(function(Hr){return Hr.data===void 0}),yr=tt.all(Yn.map(function(Hr){var fo=On(xt,Hr.url);if(Hr.path!==void 0){var To=Hr.path;fo=fo.then(function(No){return xt.overrideFile(To,No),tt.resolve(No)})}return fo})),Qr=tt.all(Tr.map(function(Hr){return Hr.simd===void 0||Hr.simd&&nn||!Hr.simd&&!nn?Gs(xt.locateFile(Hr.url,xt.S)):tt.resolve()})).then(function(){var Hr,fo,To;return to(function(No){if(No.g==1)return Hr=window.createMediapipeSolutionsWasm,fo=window.createMediapipeSolutionsPackedAssets,To=xt,dr(No,Hr(fo),2);To.h=No.h,No.g=0})}),lo=function(){return to(function(Hr){return xt.g.graph&&xt.g.graph.url?Hr=dr(Hr,On(xt,xt.g.graph.url),0):(Hr.g=0,Hr=void 0),Hr})}(),dr(Eo,tt.all([Qr,yr,lo]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Sn=Jt.filter(function(Hr){return Hr.simd===void 0||Hr.simd&&nn||!Hr.simd&&!nn}).map(function(Hr){return xt.locateFile(Hr.url,xt.S)}),importScripts.apply(null,kn(Sn)),Pn=xt,dr(Eo,createMediapipeSolutionsWasm(Module),6);case 6:Pn.h=Eo.h,xt.l=new OffscreenCanvas(1,1),xt.h.canvas=xt.l,_n=xt.h.GL.createContext(xt.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),xt.h.GL.makeContextCurrent(_n),Eo.g=4;break;case 7:if(xt.l=document.createElement("canvas"),Jo=xt.l.getContext("webgl2",{}),!Jo&&(Jo=xt.l.getContext("webgl",{}),!Jo))return alert("Failed to create WebGL canvas context when passing video frame."),Eo.return();xt.D=Jo,xt.h.canvas=xt.l,xt.h.createContext(xt.l,!0,!0,{});case 4:xt.i=new xt.h.SolutionWasm,xt.R=!1,Eo.g=0}})}function Ut(xt){var Jt,nn,Sn,Pn,_n,Yn,Tr,yr;return to(function(Qr){if(Qr.g==1){if(xt.g.graph&&xt.g.graph.url&&xt.P===xt.g.graph.url)return Qr.return();if(xt.o=!0,!xt.g.graph||!xt.g.graph.url){Qr.g=2;return}return xt.P=xt.g.graph.url,dr(Qr,On(xt,xt.g.graph.url),3)}for(Qr.g!=2&&(Jt=Qr.h,xt.i.loadGraph(Jt)),nn=En(Object.keys(xt.B)),Sn=nn.next();!Sn.done;Sn=nn.next())Pn=Sn.value,xt.i.overrideFile(Pn,xt.B[Pn]);if(xt.B={},xt.g.listeners)for(_n=En(xt.g.listeners),Yn=_n.next();!Yn.done;Yn=_n.next())Tr=Yn.value,$n(xt,Tr);yr=xt.j,xt.j={},xt.setOptions(yr),Qr.g=0})}bt.reset=function(){var xt=this;return to(function(Jt){xt.i&&(xt.i.reset(),xt.m={},xt.s={}),Jt.g=0})},bt.setOptions=function(xt,Jt){var nn=this;if(Jt=Jt||this.g.options){for(var Sn=[],Pn=[],_n={},Yn=En(Object.keys(xt)),Tr=Yn.next();!Tr.done;_n={K:_n.K,L:_n.L},Tr=Yn.next()){var yr=Tr.value;yr in this.j&&this.j[yr]===xt[yr]||(this.j[yr]=xt[yr],Tr=Jt[yr],Tr!==void 0&&(Tr.onChange&&(_n.K=Tr.onChange,_n.L=xt[yr],Sn.push(function(Qr){return function(){var lo;return to(function(Jo){if(Jo.g==1)return dr(Jo,Qr.K(Qr.L),2);lo=Jo.h,lo===!0&&(nn.o=!0),Jo.g=0})}}(_n))),Tr.graphOptionXref&&(yr={valueNumber:Tr.type===1?xt[yr]:0,valueBoolean:Tr.type===0?xt[yr]:!1,valueString:Tr.type===2?xt[yr]:""},Tr=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Tr.graphOptionXref),yr),Pn.push(Tr))))}(Sn.length!==0||Pn.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Pn),this.v=(this.v===void 0?[]:this.v).concat(Sn))}};function zt(xt){var Jt,nn,Sn,Pn,_n,Yn,Tr;return to(function(yr){switch(yr.g){case 1:if(!xt.o)return yr.return();if(!xt.v){yr.g=2;break}Jt=En(xt.v),nn=Jt.next();case 3:if(nn.done){yr.g=5;break}return Sn=nn.value,dr(yr,Sn(),4);case 4:nn=Jt.next(),yr.g=3;break;case 5:xt.v=void 0;case 2:if(xt.A){for(Pn=new xt.h.GraphOptionChangeRequestList,_n=En(xt.A),Yn=_n.next();!Yn.done;Yn=_n.next())Tr=Yn.value,Pn.push_back(Tr);xt.i.changeOptions(Pn),Pn.delete(),xt.A=void 0}xt.o=!1,yr.g=0}})}bt.initialize=function(){var xt=this;return to(function(Jt){return Jt.g==1?dr(Jt,Pt(xt),2):Jt.g!=3?dr(Jt,Ut(xt),3):dr(Jt,zt(xt),0)})};function On(xt,Jt){var nn,Sn;return to(function(Pn){return Jt in xt.F?Pn.return(xt.F[Jt]):(nn=xt.locateFile(Jt,""),Sn=fetch(nn).then(function(_n){return _n.arrayBuffer()}),xt.F[Jt]=Sn,Pn.return(Sn))})}bt.overrideFile=function(xt,Jt){this.i?this.i.overrideFile(xt,Jt):this.B[xt]=Jt},bt.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},bt.send=function(xt,Jt){var nn=this,Sn,Pn,_n,Yn,Tr,yr,Qr,lo,Jo;return to(function(Eo){switch(Eo.g){case 1:return nn.g.inputs?(Sn=1e3*(Jt??performance.now()),dr(Eo,nn.C,2)):Eo.return();case 2:return dr(Eo,nn.initialize(),3);case 3:for(Pn=new nn.h.PacketDataList,_n=En(Object.keys(xt)),Yn=_n.next();!Yn.done;Yn=_n.next())if(Tr=Yn.value,yr=nn.g.inputs[Tr]){e:{var Hr=xt[Tr];switch(yr.type){case"video":var fo=nn.m[yr.stream];if(fo||(fo=new Do(nn.h,nn.D),nn.m[yr.stream]=fo),fo.l===0&&(fo.l=fo.h.createTexture()),typeof HTMLVideoElement<"u"&&Hr instanceof HTMLVideoElement)var To=Hr.videoWidth,No=Hr.videoHeight;else typeof HTMLImageElement<"u"&&Hr instanceof HTMLImageElement?(To=Hr.naturalWidth,No=Hr.naturalHeight):(To=Hr.width,No=Hr.height);No={glName:fo.l,width:To,height:No},To=fo.g,To.canvas.width=No.width,To.canvas.height=No.height,To.activeTexture(To.TEXTURE0),fo.h.bindTexture2d(fo.l),To.texImage2D(To.TEXTURE_2D,0,To.RGBA,To.RGBA,To.UNSIGNED_BYTE,Hr),fo.h.bindTexture2d(0),fo=No;break e;case"detections":for(fo=nn.m[yr.stream],fo||(fo=new Oo(nn.h),nn.m[yr.stream]=fo),fo.data||(fo.data=new fo.g.DetectionListData),fo.data.reset(Hr.length),No=0;No<Hr.length;++No){To=Hr[No];var Mo=fo.data,Ot=Mo.setBoundingBox,Bt=No,rn=To.T,gn=new jn;if(Pr(gn,1,rn.Y),Pr(gn,2,rn.Z),Pr(gn,3,rn.height),Pr(gn,4,rn.width),Pr(gn,5,rn.rotation),Pr(gn,6,rn.W),rn=Tu(gn,Lr),Ot.call(Mo,Bt,rn),To.O)for(Mo=0;Mo<To.O.length;++Mo){gn=To.O[Mo];var Fn=!!gn.visibility;Ot=fo.data,Bt=Ot.addNormalizedLandmark,rn=No,gn=Object.assign(Object.assign({},gn),{visibility:Fn?gn.visibility:0}),Fn=new ap,Pr(Fn,1,gn.x),Pr(Fn,2,gn.y),Pr(Fn,3,gn.z),gn.visibility&&Pr(Fn,4,gn.visibility),gn=Tu(Fn,_p),Bt.call(Ot,rn,gn)}if(To.M)for(Mo=0;Mo<To.M.length;++Mo)Ot=fo.data,Bt=Ot.addClassification,rn=No,gn=To.M[Mo],Fn=new _h,Pr(Fn,2,gn.X),gn.index&&Pr(Fn,1,gn.index),gn.label&&Pr(Fn,3,gn.label),gn.displayName&&Pr(Fn,4,gn.displayName),gn=Tu(Fn,Ip),Bt.call(Ot,rn,gn)}fo=fo.data;break e;default:fo={}}}switch(Qr=fo,lo=yr.stream,yr.type){case"video":Pn.pushTexture2d(Object.assign(Object.assign({},Qr),{stream:lo,timestamp:Sn}));break;case"detections":Jo=Qr,Jo.stream=lo,Jo.timestamp=Sn,Pn.pushDetectionList(Jo);break;default:throw Error("Unknown input config type: '"+yr.type+"'")}}return nn.i.send(Pn),dr(Eo,nn.C,4);case 4:Pn.delete(),Eo.g=0}})};function Kn(xt,Jt,nn){var Sn,Pn,_n,Yn,Tr,yr,Qr,lo,Jo,Eo,Hr,fo,To,No;return to(function(Mo){switch(Mo.g){case 1:if(!nn)return Mo.return(Jt);for(Sn={},Pn=0,_n=En(Object.keys(nn)),Yn=_n.next();!Yn.done;Yn=_n.next())Tr=Yn.value,yr=nn[Tr],typeof yr!="string"&&yr.type==="texture"&&Jt[yr.stream]!==void 0&&++Pn;1<Pn&&(xt.G=!1),Qr=En(Object.keys(nn)),Yn=Qr.next();case 2:if(Yn.done){Mo.g=4;break}if(lo=Yn.value,Jo=nn[lo],typeof Jo=="string")return To=Sn,No=lo,dr(Mo,fr(xt,lo,Jt[Jo]),14);if(Eo=Jt[Jo.stream],Jo.type==="detection_list"){if(Eo){for(var Ot=Eo.getRectList(),Bt=Eo.getLandmarksList(),rn=Eo.getClassificationsList(),gn=[],Fn=0;Fn<Ot.size();++Fn){var Rt=Nu(Ot.get(Fn),jn,cr);Rt={T:{Y:wr(Rt,1),Z:wr(Rt,2),height:wr(Rt,3),width:wr(Rt,4),rotation:wr(Rt,5,0),W:Ro(Rt,6)},O:zo(Bt.get(Fn)),M:Kr(Nu(rn.get(Fn),Du,kp))},gn.push(Rt)}Ot=gn}else Ot=[];Sn[lo]=Ot,Mo.g=7;break}if(Jo.type==="proto_list"){if(Eo){for(Ot=Array(Eo.size()),Bt=0;Bt<Eo.size();Bt++)Ot[Bt]=Eo.get(Bt);Eo.delete()}else Ot=[];Sn[lo]=Ot,Mo.g=7;break}if(Eo===void 0){Mo.g=3;break}if(Jo.type==="float_list"){Sn[lo]=Eo,Mo.g=7;break}if(Jo.type==="proto"){Sn[lo]=Eo,Mo.g=7;break}if(Jo.type!=="texture")throw Error("Unknown output config type: '"+Jo.type+"'");return Hr=xt.s[lo],Hr||(Hr=new Do(xt.h,xt.D),xt.s[lo]=Hr),dr(Mo,hs(Hr,Eo,xt.G),13);case 13:fo=Mo.h,Sn[lo]=fo;case 7:Jo.transform&&Sn[lo]&&(Sn[lo]=Jo.transform(Sn[lo])),Mo.g=3;break;case 14:To[No]=Mo.h;case 3:Yn=Qr.next(),Mo.g=2;break;case 4:return Mo.return(Sn)}})}function fr(xt,Jt,nn){var Sn;return to(function(Pn){return typeof nn=="number"||nn instanceof Uint8Array||nn instanceof xt.h.Uint8BlobList?Pn.return(nn):nn instanceof xt.h.Texture2dDataOut?(Sn=xt.s[Jt],Sn||(Sn=new Do(xt.h,xt.D),xt.s[Jt]=Sn),Pn.return(hs(Sn,nn,xt.G))):Pn.return(void 0)})}function $n(xt,Jt){for(var nn=Jt.name||"$",Sn=[].concat(kn(Jt.wants)),Pn=new xt.h.StringList,_n=En(Jt.wants),Yn=_n.next();!Yn.done;Yn=_n.next())Pn.push_back(Yn.value);_n=xt.h.PacketListener.implement({onResults:function(Tr){for(var yr={},Qr=0;Qr<Jt.wants.length;++Qr)yr[Sn[Qr]]=Tr.get(Qr);var lo=xt.listeners[nn];lo&&(xt.C=Kn(xt,yr,Jt.outs).then(function(Jo){Jo=lo(Jo);for(var Eo=0;Eo<Jt.wants.length;++Eo){var Hr=yr[Sn[Eo]];typeof Hr=="object"&&Hr.hasOwnProperty&&Hr.hasOwnProperty("delete")&&Hr.delete()}Jo&&(xt.C=Jo)}))}}),xt.i.attachMultiListener(Pn,_n),Pn.delete()}bt.onResults=function(xt,Jt){this.listeners[Jt||"$"]=xt},Xo("Solution",Zl),Xo("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"});function br(xt){switch(xt===void 0&&(xt=0),xt){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function Wr(xt){var Jt=this;xt=xt||{},this.g=new Zl({locateFile:xt.locateFile,files:function(nn){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:br(nn.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:zo},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:zo},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(nn){var Sn,Pn,_n;return to(function(Yn){return Yn.g==1?(Sn=br(nn),Pn="third_party/mediapipe/modules/pose_landmark/"+Sn,dr(Yn,On(Jt.g,Sn),2)):(_n=Yn.h,Jt.g.overrideFile(Pn,_n),Yn.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}bt=Wr.prototype,bt.reset=function(){this.g.reset()},bt.close=function(){return this.g.close(),tt.resolve()},bt.onResults=function(xt){this.g.onResults(xt)},bt.initialize=function(){var xt=this;return to(function(Jt){return dr(Jt,xt.g.initialize(),0)})},bt.send=function(xt,Jt){var nn=this;return to(function(Sn){return dr(Sn,nn.g.send(xt,Jt),0)})},bt.setOptions=function(xt){this.g.setOptions(xt)},Xo("Pose",Wr),Xo("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Xo("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Xo("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Xo("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Xo("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Xo("VERSION","0.5.1635988162")}).call(Dl);const rm=class{constructor(){ot(this,"mediapipeMap_",new Map)}getVersion(bt){switch(bt){case"face_detection":return Cp.VERSION;case"face_mesh":return nm.VERSION;case"hands":return Ou.VERSION;case"holistic":return op.VERSION;case"objectron":return Bp.VERSION;case"selfie_segmentation":return wu.VERSION;case"pose":return Dl.VERSION;default:return""}}initialize(bt){return new tt(async(vt,Ct)=>{if(bt.mediaPipeModelConfigArray.length==0){Ct("no model was selected");return}for(let Xt=0;Xt<bt.mediaPipeModelConfigArray.length;Xt++){const Yt=bt.mediaPipeModelConfigArray[Xt];if(this.mediapipeMap_.has(Yt.modelType)){Ct("setting same type is not supported");return}if(typeof Yt.listener!="function"){Ct(`[${Yt.modelType}] ResultsListener must be provided`);return}let hn;switch(Yt.modelType){case"face_mesh":hn=new nm.FaceMesh({locateFile:(In,En)=>(Yt.assetsUri||rm.defaultAssetsBaseUrl+"face_mesh/"+this.getVersion("face_mesh"))+"/"+In});break;case"face_detection":hn=new Cp.FaceDetection({locateFile:(In,En)=>(Yt.assetsUri||rm.defaultAssetsBaseUrl+"face_detection/"+this.getVersion("face_detection"))+"/"+In});break;case"hands":hn=new Ou.Hands({locateFile:(In,En)=>(Yt.assetsUri||rm.defaultAssetsBaseUrl+"hands/"+this.getVersion("hands"))+"/"+In});break;case"holistic":hn=new op.Holistic({locateFile:(In,En)=>(Yt.assetsUri||rm.defaultAssetsBaseUrl+"holistic/"+this.getVersion("holistic"))+"/"+In});break;case"objectron":hn=new Bp.Objectron({locateFile:(In,En)=>(Yt.assetsUri||rm.defaultAssetsBaseUrl+"objectron/"+this.getVersion("objectron"))+"/"+In});break;case"selfie_segmentation":hn=new wu.SelfieSegmentation({locateFile:(In,En)=>(Yt.assetsUri||rm.defaultAssetsBaseUrl+"selfie_segmentation/"+this.getVersion("selfie_segmentation"))+"/"+In});break;case"pose":hn=new Dl.Pose({locateFile:(In,En)=>(Yt.assetsUri||rm.defaultAssetsBaseUrl+"pose/"+this.getVersion("pose"))+"/"+In});break;default:Ct("unknown model type");return}hn.onResults(Yt.listener),Yt.options&&hn.setOptions(Yt.options);try{await hn.initialize(),this.mediapipeMap_.set(Yt.modelType,hn)}catch(In){Ct(In);return}}vt()})}close(bt){return new tt((vt,Ct)=>{let Xt=[];if(bt){let Yt=this.mediapipeMap_.get(bt);if(Yt)this.mediapipeMap_.delete(bt),Xt.push(Yt.close());else{Ct("model not exit");return}}else{for(const[Yt,hn]of this.mediapipeMap_.entries())Xt.push(hn.close());this.mediapipeMap_.clear()}tt.all(Xt).then(()=>{vt()}).catch(Yt=>{Ct(Yt)})})}send(bt,vt){return new tt((Ct,Xt)=>{let Yt=[];if(vt){let hn=this.mediapipeMap_.get(vt);if(hn)Yt.push(hn.send({image:bt}));else{Xt("model not exit");return}}else for(const[hn,In]of this.mediapipeMap_.entries())Yt.push(In.send({image:bt}));tt.all(Yt).then(()=>{Ct()}).catch(hn=>{Xt(hn)})})}reset(bt){if(bt){let vt=this.mediapipeMap_.get(bt);vt&&typeof vt.reset=="function"&&vt.reset()}else for(const[vt,Ct]of this.mediapipeMap_.entries())Ct&&typeof Ct.reset=="function"&&Ct.reset()}};let sm=rm;ot(sm,"defaultAssetsBaseUrl","https://d3opqjmqzxf057.cloudfront.net/ml/mediapipe/");const Tp=new WeakMap,Vs=new WeakMap,fm=new WeakMap,bm=Symbol("anyProducer"),Qm=tt.resolve(),Mu=Symbol("listenerAdded"),km=Symbol("listenerRemoved");let Sm=!1;function am(bt){if(typeof bt!="string"&&typeof bt!="symbol")throw new TypeError("eventName must be a string or a symbol")}function Nm(bt){if(typeof bt!="function")throw new TypeError("listener must be a function")}function hm(bt,vt){const Ct=Vs.get(bt);return Ct.has(vt)||Ct.set(vt,new Set),Ct.get(vt)}function Om(bt,vt){const Ct=typeof vt=="string"||typeof vt=="symbol"?vt:bm,Xt=fm.get(bt);return Xt.has(Ct)||Xt.set(Ct,new Set),Xt.get(Ct)}function v1(bt,vt,Ct){const Xt=fm.get(bt);if(Xt.has(vt))for(const Yt of Xt.get(vt))Yt.enqueue(Ct);if(Xt.has(bm)){const Yt=tt.all([vt,Ct]);for(const hn of Xt.get(bm))hn.enqueue(Yt)}}function i1(bt,vt){vt=Array.isArray(vt)?vt:[vt];let Ct=!1,Xt=()=>{},Yt=[];const hn={enqueue(In){Yt.push(In),Xt()},finish(){Ct=!0,Xt()}};for(const In of vt)Om(bt,In).add(hn);return{async next(){return Yt?Yt.length===0?Ct?(Yt=void 0,this.next()):(await new tt(In=>{Xt=In}),this.next()):{done:!1,value:await Yt.shift()}:{done:!0}},async return(In){Yt=void 0;for(const En of vt)Om(bt,En).delete(hn);return Xt(),arguments.length>0?{done:!0,value:await In}:{done:!0}},[Symbol.asyncIterator](){return this}}}function o1(bt){if(bt===void 0)return Em;if(!Array.isArray(bt))throw new TypeError("`methodNames` must be an array of strings");for(const vt of bt)if(!Em.includes(vt))throw typeof vt!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${vt} is not Emittery method`);return bt}const Am=bt=>bt===Mu||bt===km;class cm{static mixin(vt,Ct){return Ct=o1(Ct),Xt=>{if(typeof Xt!="function")throw new TypeError("`target` must be function");for(const In of Ct)if(Xt.prototype[In]!==void 0)throw new Error(`The property \`${In}\` already exists on \`target\``);function Yt(){return Object.defineProperty(this,vt,{enumerable:!1,value:new cm}),this[vt]}Object.defineProperty(Xt.prototype,vt,{enumerable:!1,get:Yt});const hn=In=>function(...En){return this[vt][In](...En)};for(const In of Ct)Object.defineProperty(Xt.prototype,In,{enumerable:!1,value:hn(In)});return Xt}}static get isDebugEnabled(){if(typeof nt!="object")return Sm;const{env:vt}=nt||{env:{}};return vt.DEBUG==="emittery"||vt.DEBUG==="*"||Sm}static set isDebugEnabled(vt){Sm=vt}constructor(vt={}){Tp.set(this,new Set),Vs.set(this,new Map),fm.set(this,new Map),this.debug=vt.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(Ct,Xt,Yt,hn)=>{try{hn=JSON.stringify(hn)}catch{hn=`Object with the following keys failed to stringify: ${Object.keys(hn).join(",")}`}typeof Yt=="symbol"&&(Yt=Yt.toString());const In=new Date,En=`${In.getHours()}:${In.getMinutes()}:${In.getSeconds()}.${In.getMilliseconds()}`;console.log(`[${En}][emittery:${Ct}][${Xt}] Event Name: ${Yt}
	data: ${hn}`)})}logIfDebugEnabled(vt,Ct,Xt){(cm.isDebugEnabled||this.debug.enabled)&&this.debug.logger(vt,this.debug.name,Ct,Xt)}on(vt,Ct){Nm(Ct),vt=Array.isArray(vt)?vt:[vt];for(const Xt of vt)am(Xt),hm(this,Xt).add(Ct),this.logIfDebugEnabled("subscribe",Xt,void 0),Am(Xt)||this.emit(Mu,{eventName:Xt,listener:Ct});return this.off.bind(this,vt,Ct)}off(vt,Ct){Nm(Ct),vt=Array.isArray(vt)?vt:[vt];for(const Xt of vt)am(Xt),hm(this,Xt).delete(Ct),this.logIfDebugEnabled("unsubscribe",Xt,void 0),Am(Xt)||this.emit(km,{eventName:Xt,listener:Ct})}once(vt){return new tt(Ct=>{const Xt=this.on(vt,Yt=>{Xt(),Ct(Yt)})})}events(vt){vt=Array.isArray(vt)?vt:[vt];for(const Ct of vt)am(Ct);return i1(this,vt)}async emit(vt,Ct){am(vt),this.logIfDebugEnabled("emit",vt,Ct),v1(this,vt,Ct);const Xt=hm(this,vt),Yt=Tp.get(this),hn=[...Xt],In=Am(vt)?[]:[...Yt];await Qm,await tt.all([...hn.map(async En=>{if(Xt.has(En))return En(Ct)}),...In.map(async En=>{if(Yt.has(En))return En(vt,Ct)})])}async emitSerial(vt,Ct){am(vt),this.logIfDebugEnabled("emitSerial",vt,Ct);const Xt=hm(this,vt),Yt=Tp.get(this),hn=[...Xt],In=[...Yt];await Qm;for(const En of hn)Xt.has(En)&&await En(Ct);for(const En of In)Yt.has(En)&&await En(vt,Ct)}onAny(vt){return Nm(vt),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Tp.get(this).add(vt),this.emit(Mu,{listener:vt}),this.offAny.bind(this,vt)}anyEvent(){return i1(this)}offAny(vt){Nm(vt),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(km,{listener:vt}),Tp.get(this).delete(vt)}clearListeners(vt){vt=Array.isArray(vt)?vt:[vt];for(const Ct of vt)if(this.logIfDebugEnabled("clear",Ct,void 0),typeof Ct=="string"||typeof Ct=="symbol"){hm(this,Ct).clear();const Xt=Om(this,Ct);for(const Yt of Xt)Yt.finish();Xt.clear()}else{Tp.get(this).clear();for(const Xt of Vs.get(this).values())Xt.clear();for(const Xt of fm.get(this).values()){for(const Yt of Xt)Yt.finish();Xt.clear()}}}listenerCount(vt){vt=Array.isArray(vt)?vt:[vt];let Ct=0;for(const Xt of vt){if(typeof Xt=="string"){Ct+=Tp.get(this).size+hm(this,Xt).size+Om(this,Xt).size+Om(this).size;continue}typeof Xt<"u"&&am(Xt),Ct+=Tp.get(this).size;for(const Yt of Vs.get(this).values())Ct+=Yt.size;for(const Yt of fm.get(this).values())Ct+=Yt.size}return Ct}bindMethods(vt,Ct){if(typeof vt!="object"||vt===null)throw new TypeError("`target` must be an object");Ct=o1(Ct);for(const Xt of Ct){if(vt[Xt]!==void 0)throw new Error(`The property \`${Xt}\` already exists on \`target\``);Object.defineProperty(vt,Xt,{enumerable:!1,value:this[Xt].bind(this)})}}}const Em=Object.getOwnPropertyNames(cm.prototype).filter(bt=>bt!=="constructor");Object.defineProperty(cm,"listenerAdded",{value:Mu,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(cm,"listenerRemoved",{value:km,writable:!1,enumerable:!0,configurable:!1});var lm=cm,im=(bt=>(bt[bt.INIT=0]="INIT",bt[bt.FORWARD=1]="FORWARD",bt[bt.TERMINATE=2]="TERMINATE",bt))(im||{});function Zm(bt){return[ImageBitmap,ReadableStream,WritableStream].some(vt=>bt instanceof vt)}let Gm=0;function Wm(bt,vt,Ct,Xt,Yt){const hn=Gm++;return bt.postMessage({id:hn,type:vt,functionName:Ct,args:Xt},Xt.filter(In=>Zm(In))),new tt(In=>{Yt.set(hn,In)})}async function s1(bt,vt,Ct){const Xt=new vt;if(Xt.addEventListener("message",({data:Yt})=>{var hn;(hn=Ct.get(Yt.id))==null||hn(Yt.result),Ct.delete(Yt.id)}),!await Wm(Xt,im.INIT,"",[bt.workerId],Ct))throw"Failed to instantiate workerized class";return Xt}async function Au(bt,vt,Ct){const Xt={};return Object.getOwnPropertyNames(bt.prototype).forEach(Yt=>{Xt[Yt]=(...hn)=>Wm(vt,im.FORWARD,Yt,hn,Ct)}),Xt.terminate=async(...Yt)=>{const hn=await Wm(vt,im.TERMINATE,"",Yt,Ct);return vt.terminate(),Xt.worker=void 0,hn},Xt.worker=vt,Xt}async function Pu(bt,vt){const Ct=new Map,Xt=await s1(bt,vt,Ct);return Au(bt,Xt,Ct)}function Mm(bt,vt){const{id:Ct}=bt,Xt=Array.isArray(vt)?vt:[vt];postMessage({id:Ct,result:vt},Xt.filter(Yt=>Zm(Yt)))}async function y1(bt,vt){const{functionName:Ct,args:Xt}=bt;if(!vt.instance)throw"instance not initialized";if(!Ct)throw"missing function name to call";if(!vt.instance[Ct])throw`undefined function [${Ct}] in class ${vt.instance.constructor.workerId}`;Mm(bt,await vt.instance[Ct](...Xt??[]))}function a1(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}const c1={};function Cm(bt,vt){vt.workerId=bt,a1()&&(c1[vt.workerId]=vt)}function b1(bt,vt){if(!bt.args)throw"Missing className while initializing worker";const[Ct]=bt.args,Xt=c1[Ct];if(Xt)vt.instance=new Xt(bt.args.slice(1));else throw`unknown worker class ${Ct}`;Mm(bt,typeof vt.instance!==void 0)}async function S1(bt,vt){const{args:Ct}=bt;if(!vt.instance)throw"instance not initialized";let Xt;vt.instance.terminate&&(Xt=await vt.instance.terminate(...Ct??[])),Mm(bt,Xt)}function E1(){const bt={};onmessage=async vt=>{const Ct=vt.data;switch(Ct.type){case im.INIT:b1(Ct,bt);break;case im.FORWARD:y1(Ct,bt);break;case im.TERMINATE:S1(Ct,bt);break}}}a1()&&E1();class pm{static async createVideoReadable(vt){return new tt((Ct,Xt)=>{const Yt=document.createElement("video");let hn=new AbortController,In=new AbortController;Yt.addEventListener("canplay",()=>{hn.abort(),Yt.muted=!0,Yt.loop=!0,Yt.play().then(()=>{try{const En=Yt.captureStream(),kn=new MediaStreamTrackProcessor(En.getVideoTracks()[0]);Ct(kn.readable)}catch(En){Xt(En)}})},{once:!0,signal:In.signal}),Yt.addEventListener("error",En=>{In.abort(),Xt("loading error:"+En)},{once:!0,signal:hn.signal}),Yt.crossOrigin="anonymous",Yt.src=vt})}static async createImageCanvas(vt){const Ct=await(await fetch(vt)).blob();return await createImageBitmap(Ct)}}async function Tm(bt){return new tt(vt=>{setTimeout(()=>{vt()},bt)})}var Vm=(bt=>(bt.PUSH="PUSH",bt.POP="POP",bt))(Vm||{});class l1{constructor(vt){ot(this,"context"),ot(this,"extension"),ot(this,"queries",[]),ot(this,"activeQuery"),this.context=vt,this.extension=vt.getExtension("EXT_disjoint_timer_query_webgl2")}start(){}stop(){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT)}pushContext(vt){this.createQuery("PUSH",vt)}popContext(vt){this.createQuery("POP",vt)}createQuery(vt,Ct){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT),this.activeQuery=this.context.createQuery(),this.context.beginQuery(this.extension.TIME_ELAPSED_EXT,this.activeQuery),this.queries.push({name:Ct,action:vt,query:this.activeQuery})}async getResolvedQueries(){const vt=(await tt.all([...this.queries].map(Ct=>this.resolveQuery(Ct)))).filter(Ct=>Ct);for(let Ct=1;Ct<vt.length;++Ct)vt[Ct].timestamp+=vt[Ct-1].duration+vt[Ct-1].timestamp;return vt}async resolveQuery(vt){if(!await this.awaitQueryAvailable(vt)){console.log("Unawaitable query",vt);return}if(this.context.getParameter(this.extension.GPU_DISJOINT_EXT)){console.log("Disjointed query",vt);return}return{...vt,duration:this.context.getQueryParameter(vt.query,this.context.QUERY_RESULT),timestamp:0}}async awaitQueryAvailable(vt){for(let Ct=0;Ct<10;++Ct){if(this.context.getQueryParameter(vt.query,this.context.QUERY_RESULT_AVAILABLE))return vt;await Tm(200)}}}/* @license twgl.js 5.2.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const Rm=5120,Lm=5121,Im=5122,Pm=5123,Fm=5124,Xm=5125,Dm=5126,C1=32819,jm=32820,Um=33635,u1=5131,_m=33640,qm=35899,d1=35902,Rn=36269,bn=34042,An={};{const bt=An;bt[Rm]=Int8Array,bt[Lm]=Uint8Array,bt[Im]=Int16Array,bt[Pm]=Uint16Array,bt[Fm]=Int32Array,bt[Xm]=Uint32Array,bt[Dm]=Float32Array,bt[C1]=Uint16Array,bt[jm]=Uint16Array,bt[Um]=Uint16Array,bt[u1]=Uint16Array,bt[_m]=Uint32Array,bt[qm]=Uint32Array,bt[d1]=Uint32Array,bt[Rn]=Uint32Array,bt[bn]=Uint32Array}function $t(bt){if(bt instanceof Int8Array)return Rm;if(bt instanceof Uint8Array||bt instanceof Uint8ClampedArray)return Lm;if(bt instanceof Int16Array)return Im;if(bt instanceof Uint16Array)return Pm;if(bt instanceof Int32Array)return Fm;if(bt instanceof Uint32Array)return Xm;if(bt instanceof Float32Array)return Dm;throw new Error("unsupported typed array type")}function dn(bt){if(bt===Int8Array)return Rm;if(bt===Uint8Array||bt===Uint8ClampedArray)return Lm;if(bt===Int16Array)return Im;if(bt===Uint16Array)return Pm;if(bt===Int32Array)return Fm;if(bt===Uint32Array)return Xm;if(bt===Float32Array)return Dm;throw new Error("unsupported typed array type")}function vn(bt){const vt=An[bt];if(!vt)throw new Error("unknown gl type");return vt}const Wn=typeof SharedArrayBuffer<"u"?function(bt){return bt&&bt.buffer&&(bt.buffer instanceof ArrayBuffer||bt.buffer instanceof SharedArrayBuffer)}:function(bt){return bt&&bt.buffer&&bt.buffer instanceof ArrayBuffer};function Dn(...bt){console.error(...bt)}const ir=new Map;function ar(bt,vt){if(!bt||typeof bt!="object")return!1;let Ct=ir.get(vt);Ct||(Ct=new WeakMap,ir.set(vt,Ct));let Xt=Ct.get(bt);if(Xt===void 0){const Yt=Object.prototype.toString.call(bt);Xt=Yt.substring(8,Yt.length-1)===vt,Ct.set(bt,Xt)}return Xt}function rr(bt,vt){return typeof WebGLBuffer<"u"&&ar(vt,"WebGLBuffer")}function Po(bt,vt){return typeof WebGLRenderbuffer<"u"&&ar(vt,"WebGLRenderbuffer")}function eo(bt,vt){return typeof WebGLTexture<"u"&&ar(vt,"WebGLTexture")}function Ur(bt,vt){return typeof WebGLSampler<"u"&&ar(vt,"WebGLSampler")}const Ps=35044,fu=34962,bo=34963,Ul=34660,mm=5120,xm=5121,$1=5122,Q1=5123,Yv=5124,Bv=5125,O0=5126,A0={attribPrefix:""};function Kv(bt,vt,Ct,Xt,Yt){bt.bindBuffer(vt,Ct),bt.bufferData(vt,Xt,Yt||Ps)}function Z0(bt,vt,Ct,Xt){if(rr(bt,vt))return vt;Ct=Ct||fu;const Yt=bt.createBuffer();return Kv(bt,Ct,Yt,vt,Xt),Yt}function V0(bt){return bt==="indices"}function zv(bt){return bt===Int8Array||bt===Uint8Array}function Jv(bt){return bt.length?bt:bt.data}const $v=/coord|texture/i,Qv=/color|colour/i;function _v(bt,vt){let Ct;if($v.test(bt)?Ct=2:Qv.test(bt)?Ct=4:Ct=3,vt%Ct>0)throw new Error(`Can not guess numComponents for attribute '${bt}'. Tried ${Ct} but ${vt} values is not evenly divisible by ${Ct}. You should specify it.`);return Ct}function qv(bt,vt,Ct){return bt.numComponents||bt.size||_v(vt,Ct||Jv(bt).length)}function L0(bt,vt){if(Wn(bt))return bt;if(Wn(bt.data))return bt.data;Array.isArray(bt)&&(bt={data:bt});let Ct=bt.type?_1(bt.type):void 0;return Ct||(V0(vt)?Ct=Uint16Array:Ct=Float32Array),new Ct(bt.data)}function ey(bt){return typeof bt=="number"?bt:bt?dn(bt):O0}function _1(bt){return typeof bt=="number"?vn(bt):bt||Float32Array}function ty(bt,vt){return{buffer:vt.buffer,numValues:2*3*4,type:ey(vt.type),arrayType:_1(vt.type)}}function ny(bt,vt){const Ct=vt.data||vt,Xt=_1(vt.type),Yt=Ct*Xt.BYTES_PER_ELEMENT,hn=bt.createBuffer();return bt.bindBuffer(fu,hn),bt.bufferData(fu,Yt,vt.drawType||Ps),{buffer:hn,numValues:Ct,type:dn(Xt),arrayType:Xt}}function ry(bt,vt,Ct){const Xt=L0(vt,Ct);return{arrayType:Xt.constructor,buffer:Z0(bt,Xt,void 0,vt.drawType),type:$t(Xt),numValues:0}}function iy(bt,vt){const Ct={};return Object.keys(vt).forEach(function(Xt){if(!V0(Xt)){const Yt=vt[Xt],hn=Yt.attrib||Yt.name||Yt.attribName||A0.attribPrefix+Xt;if(Yt.value){if(!Array.isArray(Yt.value)&&!Wn(Yt.value))throw new Error("array.value is not array or typedarray");Ct[hn]={value:Yt.value}}else{let In;Yt.buffer&&Yt.buffer instanceof WebGLBuffer?In=ty:typeof Yt=="number"||typeof Yt.data=="number"?In=ny:In=ry;const{buffer:En,type:kn,numValues:mr,arrayType:Vr}=In(bt,Yt,Xt),Gr=Yt.normalize!==void 0?Yt.normalize:zv(Vr),Io=qv(Yt,Xt,mr);Ct[hn]={buffer:En,numComponents:Io,type:kn,normalize:Gr,stride:Yt.stride||0,offset:Yt.offset||0,divisor:Yt.divisor===void 0?void 0:Yt.divisor,drawType:Yt.drawType}}}}),bt.bindBuffer(fu,null),Ct}function oy(bt,vt){return vt===mm||vt===xm?1:vt===$1||vt===Q1?2:vt===Yv||vt===Bv||vt===O0?4:0}const q1=["position","positions","a_position"];function sy(bt,vt){let Ct,Xt;for(Xt=0;Xt<q1.length&&(Ct=q1[Xt],!(Ct in vt||(Ct=A0.attribPrefix+Ct,Ct in vt)));++Xt);Xt===q1.length&&(Ct=Object.keys(vt)[0]);const Yt=vt[Ct];if(!Yt.buffer)return 1;bt.bindBuffer(fu,Yt.buffer);const hn=bt.getBufferParameter(fu,Ul);bt.bindBuffer(fu,null);const In=oy(bt,Yt.type),En=hn/In,kn=Yt.numComponents||Yt.size,mr=En/kn;if(mr%1!==0)throw new Error(`numComponents ${kn} not correct for length ${length}`);return mr}function ay(bt,vt,Ct){const Xt=iy(bt,vt),Yt=Object.assign({},Ct||{});Yt.attribs=Object.assign({},Ct?Ct.attribs:{},Xt);const hn=vt.indices;if(hn){const In=L0(hn,"indices");Yt.indices=Z0(bt,In,bo),Yt.numElements=In.length,Yt.elementType=$t(In)}else Yt.numElements||(Yt.numElements=sy(bt,Yt.attribs));return Yt}function T1(bt){return!!bt.texStorage2D}const k0=function(){const bt={},vt={};function Ct(Xt){const Yt=Xt.constructor.name;if(!bt[Yt]){for(const hn in Xt)if(typeof Xt[hn]=="number"){const In=vt[Xt[hn]];vt[Xt[hn]]=In?`${In} | ${hn}`:hn}bt[Yt]=!0}}return function(Xt,Yt){return Ct(Xt),vt[Yt]||(typeof Yt=="number"?`0x${Yt.toString(16)}`:Yt)}}(),Hm={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},R1=Wn,N0=function(){let bt;return function(){return bt=bt||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),bt}}(),G0=6406,wm=6407,Yu=6408,W0=6409,M0=6410,I1=6402,P0=34041,Z1=33071,cy=9728,ly=9729,Ym=3553,Bm=34067,_g=32879,e1=35866,e0=34069,uy=34070,dy=34071,fy=34072,hy=34073,py=34074,t0=10241,n0=10240,V1=10242,L1=10243,F0=32882,my=33082,gy=33083,vy=33084,yy=33085,r0=3317,X0=3314,D0=32878,j0=3316,U0=3315,H0=32877,by=37443,Sy=37441,Ey=37440,Cy=33321,Ty=36756,Ry=33325,Iy=33326,xy=33330,wy=33329,Oy=33338,Ay=33337,Zy=33340,Vy=33339,Ly=33323,ky=36757,Ny=33327,Gy=33328,Wy=33336,My=33335,Py=33332,Fy=33331,Xy=33334,Dy=33333,jy=32849,Uy=35905,Hy=36194,Yy=36758,By=35898,Ky=35901,zy=34843,Jy=34837,$y=36221,Qy=36239,_y=36215,qy=36233,e2=36209,t2=36227,n2=32856,r2=35907,i2=36759,o2=32855,s2=32854,a2=32857,c2=34842,l2=34836,u2=36220,d2=36238,f2=36975,h2=36214,p2=36232,m2=36226,g2=36208,v2=33189,y2=33190,b2=36012,S2=36013,E2=35056,Km=5120,Fu=5121,k1=5122,f1=5123,N1=5124,t1=5125,Pp=5126,Y0=32819,B0=32820,K0=33635,gm=5131,x1=36193,i0=33640,C2=35899,T2=35902,R2=36269,I2=34042,G1=33319,h1=33320,W1=6403,p1=36244,m1=36248,n1=36249;let o0;function M1(bt){if(!o0){const vt={};vt[G0]={textureFormat:G0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Fu,gm,x1,Pp]},vt[W0]={textureFormat:W0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Fu,gm,x1,Pp]},vt[M0]={textureFormat:M0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Fu,gm,x1,Pp]},vt[wm]={textureFormat:wm,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Fu,gm,x1,Pp,K0]},vt[Yu]={textureFormat:Yu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Fu,gm,x1,Pp,Y0,B0]},vt[I1]={textureFormat:I1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[t1,f1]},vt[Cy]={textureFormat:W1,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Fu]},vt[Ty]={textureFormat:W1,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Km]},vt[Ry]={textureFormat:W1,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Pp,gm]},vt[Iy]={textureFormat:W1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Pp]},vt[xy]={textureFormat:p1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Fu]},vt[wy]={textureFormat:p1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Km]},vt[Py]={textureFormat:p1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[f1]},vt[Fy]={textureFormat:p1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[k1]},vt[Xy]={textureFormat:p1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[t1]},vt[Dy]={textureFormat:p1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[N1]},vt[Ly]={textureFormat:G1,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Fu]},vt[ky]={textureFormat:G1,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Km]},vt[Ny]={textureFormat:G1,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Pp,gm]},vt[Gy]={textureFormat:G1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Pp]},vt[Wy]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Fu]},vt[My]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Km]},vt[Oy]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[f1]},vt[Ay]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[k1]},vt[Zy]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[t1]},vt[Vy]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[N1]},vt[jy]={textureFormat:wm,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Fu]},vt[Uy]={textureFormat:wm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Fu]},vt[Hy]={textureFormat:wm,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Fu,K0]},vt[Yy]={textureFormat:wm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Km]},vt[By]={textureFormat:wm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Pp,gm,C2]},vt[Ky]={textureFormat:wm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Pp,gm,T2]},vt[zy]={textureFormat:wm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Pp,gm]},vt[Jy]={textureFormat:wm,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Pp]},vt[$y]={textureFormat:m1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Fu]},vt[Qy]={textureFormat:m1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Km]},vt[_y]={textureFormat:m1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[f1]},vt[qy]={textureFormat:m1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[k1]},vt[e2]={textureFormat:m1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[t1]},vt[t2]={textureFormat:m1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[N1]},vt[n2]={textureFormat:Yu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Fu]},vt[r2]={textureFormat:Yu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Fu]},vt[i2]={textureFormat:Yu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Km]},vt[o2]={textureFormat:Yu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Fu,B0,i0]},vt[s2]={textureFormat:Yu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Fu,Y0]},vt[a2]={textureFormat:Yu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[i0]},vt[c2]={textureFormat:Yu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Pp,gm]},vt[l2]={textureFormat:Yu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Pp]},vt[u2]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Fu]},vt[d2]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Km]},vt[f2]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[i0]},vt[h2]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[f1]},vt[p2]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[k1]},vt[m2]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[N1]},vt[g2]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[t1]},vt[v2]={textureFormat:I1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[f1,t1]},vt[y2]={textureFormat:I1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[t1]},vt[b2]={textureFormat:I1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Pp]},vt[E2]={textureFormat:P0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[I2]},vt[S2]={textureFormat:P0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[R2]},Object.keys(vt).forEach(function(Ct){const Xt=vt[Ct];Xt.bytesPerElementMap={},Xt.bytesPerElement.forEach(function(Yt,hn){const In=Xt.type[hn];Xt.bytesPerElementMap[In]=Yt})}),o0=vt}return o0[bt]}function x2(bt,vt){const Ct=M1(bt);if(!Ct)throw"unknown internal format";const Xt=Ct.bytesPerElementMap[vt];if(Xt===void 0)throw"unknown internal format";return Xt}function w1(bt){const vt=M1(bt);if(!vt)throw"unknown internal format";return{format:vt.textureFormat,type:vt.type[0]}}function z0(bt){return(bt&bt-1)===0}function w2(bt,vt,Ct,Xt){if(!T1(bt))return z0(vt)&&z0(Ct);const Yt=M1(Xt);if(!Yt)throw"unknown internal format";return Yt.colorRenderable&&Yt.textureFilterable}function O2(bt){const vt=M1(bt);if(!vt)throw"unknown internal format";return vt.textureFilterable}function A2(bt,vt,Ct){return R1(vt)?$t(vt):Ct||Fu}function P1(bt,vt,Ct,Xt,Yt){if(Yt%1!==0)throw"can't guess dimensions";if(!Ct&&!Xt){const hn=Math.sqrt(Yt/(vt===Bm?6:1));hn%1===0?(Ct=hn,Xt=hn):(Ct=Yt,Xt=1)}else if(Xt){if(!Ct&&(Ct=Yt/Xt,Ct%1))throw"can't guess dimensions"}else if(Xt=Yt/Ct,Xt%1)throw"can't guess dimensions";return{width:Ct,height:Xt}}function g1(bt,vt){vt.colorspaceConversion!==void 0&&bt.pixelStorei(by,vt.colorspaceConversion),vt.premultiplyAlpha!==void 0&&bt.pixelStorei(Sy,vt.premultiplyAlpha),vt.flipY!==void 0&&bt.pixelStorei(Ey,vt.flipY)}function J0(bt){bt.pixelStorei(r0,4),T1(bt)&&(bt.pixelStorei(X0,0),bt.pixelStorei(D0,0),bt.pixelStorei(j0,0),bt.pixelStorei(U0,0),bt.pixelStorei(H0,0))}function Z2(bt,vt,Ct,Xt){Xt.minMag&&(Ct.call(bt,vt,t0,Xt.minMag),Ct.call(bt,vt,n0,Xt.minMag)),Xt.min&&Ct.call(bt,vt,t0,Xt.min),Xt.mag&&Ct.call(bt,vt,n0,Xt.mag),Xt.wrap&&(Ct.call(bt,vt,V1,Xt.wrap),Ct.call(bt,vt,L1,Xt.wrap),(vt===_g||Ur(bt,vt))&&Ct.call(bt,vt,F0,Xt.wrap)),Xt.wrapR&&Ct.call(bt,vt,F0,Xt.wrapR),Xt.wrapS&&Ct.call(bt,vt,V1,Xt.wrapS),Xt.wrapT&&Ct.call(bt,vt,L1,Xt.wrapT),Xt.minLod&&Ct.call(bt,vt,my,Xt.minLod),Xt.maxLod&&Ct.call(bt,vt,gy,Xt.maxLod),Xt.baseLevel&&Ct.call(bt,vt,vy,Xt.baseLevel),Xt.maxLevel&&Ct.call(bt,vt,yy,Xt.maxLevel)}function $0(bt,vt,Ct){const Xt=Ct.target||Ym;bt.bindTexture(Xt,vt),Z2(bt,Xt,bt.texParameteri,Ct)}function V2(bt){return bt=bt||Hm.textureColor,R1(bt)?bt:new Uint8Array([bt[0]*255,bt[1]*255,bt[2]*255,bt[3]*255])}function s0(bt,vt,Ct,Xt,Yt,hn){Ct=Ct||Hm.textureOptions,hn=hn||Yu;const In=Ct.target||Ym;if(Xt=Xt||Ct.width,Yt=Yt||Ct.height,bt.bindTexture(In,vt),w2(bt,Xt,Yt,hn))bt.generateMipmap(In);else{const En=O2(hn)?ly:cy;bt.texParameteri(In,t0,En),bt.texParameteri(In,n0,En),bt.texParameteri(In,V1,Z1),bt.texParameteri(In,L1,Z1)}}function O1(bt){return bt.auto===!0||bt.auto===void 0&&bt.level===void 0}function a0(bt,vt){return vt=vt||{},vt.cubeFaceOrder||[e0,uy,dy,fy,hy,py]}function c0(bt,vt){const Ct=a0(bt,vt).map(function(Xt,Yt){return{face:Xt,ndx:Yt}});return Ct.sort(function(Xt,Yt){return Xt.face-Yt.face}),Ct}function Q0(bt,vt,Ct,Xt){Xt=Xt||Hm.textureOptions;const Yt=Xt.target||Ym,hn=Xt.level||0;let In=Ct.width,En=Ct.height;const kn=Xt.internalFormat||Xt.format||Yu,mr=w1(kn),Vr=Xt.format||mr.format,Gr=Xt.type||mr.type;if(g1(bt,Xt),bt.bindTexture(Yt,vt),Yt===Bm){const Io=Ct.width,ko=Ct.height;let Mr,Dr;if(Io/6===ko)Mr=ko,Dr=[0,0,1,0,2,0,3,0,4,0,5,0];else if(ko/6===Io)Mr=Io,Dr=[0,0,0,1,0,2,0,3,0,4,0,5];else if(Io/3===ko/2)Mr=Io/3,Dr=[0,0,1,0,2,0,0,1,1,1,2,1];else if(Io/2===ko/3)Mr=Io/2,Dr=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(Ct.src?Ct.src:Ct.nodeName);const Bo=N0();Bo?(Bo.canvas.width=Mr,Bo.canvas.height=Mr,In=Mr,En=Mr,c0(bt,Xt).forEach(function(Uo){const gs=Dr[Uo.ndx*2+0]*Mr,dr=Dr[Uo.ndx*2+1]*Mr;Bo.drawImage(Ct,gs,dr,Mr,Mr,0,0,Mr,Mr),bt.texImage2D(Uo.face,hn,kn,Vr,Gr,Bo.canvas)}),Bo.canvas.width=1,Bo.canvas.height=1):typeof createImageBitmap<"u"&&(In=Mr,En=Mr,c0(bt,Xt).forEach(function(Uo){const gs=Dr[Uo.ndx*2+0]*Mr,dr=Dr[Uo.ndx*2+1]*Mr;bt.texImage2D(Uo.face,hn,kn,Mr,Mr,0,Vr,Gr,null),createImageBitmap(Ct,gs,dr,Mr,Mr,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(Vu){g1(bt,Xt),bt.bindTexture(Yt,vt),bt.texImage2D(Uo.face,hn,kn,Vr,Gr,Vu),O1(Xt)&&s0(bt,vt,Xt,In,En,kn)})}))}else if(Yt===_g||Yt===e1){const Io=Math.min(Ct.width,Ct.height),ko=Math.max(Ct.width,Ct.height),Mr=ko/Io;if(Mr%1!==0)throw"can not compute 3D dimensions of element";const Dr=Ct.width===ko?1:0,Bo=Ct.height===ko?1:0;bt.pixelStorei(r0,1),bt.pixelStorei(X0,Ct.width),bt.pixelStorei(D0,0),bt.pixelStorei(H0,0),bt.texImage3D(Yt,hn,kn,Io,Io,Io,0,Vr,Gr,null);for(let Uo=0;Uo<Mr;++Uo){const gs=Uo*Io*Dr,dr=Uo*Io*Bo;bt.pixelStorei(j0,gs),bt.pixelStorei(U0,dr),bt.texSubImage3D(Yt,hn,0,0,Uo,Io,Io,1,Vr,Gr,Ct)}J0(bt)}else bt.texImage2D(Yt,hn,kn,Vr,Gr,Ct);O1(Xt)&&s0(bt,vt,Xt,In,En,kn),$0(bt,vt,Xt)}function A1(){}function L2(bt){if(typeof document<"u"){const vt=document.createElement("a");return vt.href=bt,vt.hostname===location.hostname&&vt.port===location.port&&vt.protocol===location.protocol}else{const vt=new URL(location.href).origin;return new URL(bt,location.href).origin===vt}}function k2(bt,vt){return vt===void 0&&!L2(bt)?"anonymous":vt}function N2(bt,vt,Ct){Ct=Ct||A1;let Xt;if(vt=vt!==void 0?vt:Hm.crossOrigin,vt=k2(bt,vt),typeof Image<"u"){Xt=new Image,vt!==void 0&&(Xt.crossOrigin=vt);const Yt=function(){Xt.removeEventListener("error",hn),Xt.removeEventListener("load",In),Xt=null},hn=function(){const En="couldn't load image: "+bt;Dn(En),Ct(En,Xt),Yt()},In=function(){Ct(null,Xt),Yt()};return Xt.addEventListener("error",hn),Xt.addEventListener("load",In),Xt.src=bt,Xt}else if(typeof ImageBitmap<"u"){let Yt,hn;const In=function(){Ct(Yt,hn)},En={};vt&&(En.mode="cors"),fetch(bt,En).then(function(kn){if(!kn.ok)throw kn;return kn.blob()}).then(function(kn){return createImageBitmap(kn,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(kn){hn=kn,setTimeout(In)}).catch(function(kn){Yt=kn,setTimeout(In)}),Xt=null}return Xt}function _0(bt){return typeof ImageBitmap<"u"&&bt instanceof ImageBitmap||typeof ImageData<"u"&&bt instanceof ImageData||typeof HTMLElement<"u"&&bt instanceof HTMLElement}function l0(bt,vt,Ct){return _0(bt)?(setTimeout(function(){Ct(null,bt)}),bt):N2(bt,vt,Ct)}function u0(bt,vt,Ct){Ct=Ct||Hm.textureOptions;const Xt=Ct.target||Ym;if(bt.bindTexture(Xt,vt),Ct.color===!1)return;const Yt=V2(Ct.color);if(Xt===Bm)for(let hn=0;hn<6;++hn)bt.texImage2D(e0+hn,0,Yu,1,1,0,Yu,Fu,Yt);else Xt===_g||Xt===e1?bt.texImage3D(Xt,0,Yu,1,1,1,0,Yu,Fu,Yt):bt.texImage2D(Xt,0,Yu,1,1,0,Yu,Fu,Yt)}function G2(bt,vt,Ct,Xt){return Xt=Xt||A1,Ct=Ct||Hm.textureOptions,u0(bt,vt,Ct),Ct=Object.assign({},Ct),l0(Ct.src,Ct.crossOrigin,function(Yt,hn){Yt?Xt(Yt,vt,hn):(Q0(bt,vt,hn,Ct),Xt(null,vt,hn))})}function W2(bt,vt,Ct,Xt){Xt=Xt||A1;const Yt=Ct.src;if(Yt.length!==6)throw"there must be 6 urls for a cubemap";const hn=Ct.level||0,In=Ct.internalFormat||Ct.format||Yu,En=w1(In),kn=Ct.format||En.format,mr=Ct.type||Fu,Vr=Ct.target||Ym;if(Vr!==Bm)throw"target must be TEXTURE_CUBE_MAP";u0(bt,vt,Ct),Ct=Object.assign({},Ct);let Gr=6;const Io=[],ko=a0(bt,Ct);let Mr;function Dr(Bo){return function(Uo,gs){--Gr,Uo?Io.push(Uo):gs.width!==gs.height?Io.push("cubemap face img is not a square: "+gs.src):(g1(bt,Ct),bt.bindTexture(Vr,vt),Gr===5?a0().forEach(function(dr){bt.texImage2D(dr,hn,In,kn,mr,gs)}):bt.texImage2D(Bo,hn,In,kn,mr,gs),O1(Ct)&&bt.generateMipmap(Vr)),Gr===0&&Xt(Io.length?Io:void 0,vt,Mr)}}Mr=Yt.map(function(Bo,Uo){return l0(Bo,Ct.crossOrigin,Dr(ko[Uo]))})}function M2(bt,vt,Ct,Xt){Xt=Xt||A1;const Yt=Ct.src,hn=Ct.internalFormat||Ct.format||Yu,In=w1(hn),En=Ct.format||In.format,kn=Ct.type||Fu,mr=Ct.target||e1;if(mr!==_g&&mr!==e1)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";u0(bt,vt,Ct),Ct=Object.assign({},Ct);let Vr=Yt.length;const Gr=[];let Io;const ko=Ct.level||0;let Mr=Ct.width,Dr=Ct.height;const Bo=Yt.length;let Uo=!0;function gs(dr){return function(Vu,Su){if(--Vr,Vu)Gr.push(Vu);else{if(g1(bt,Ct),bt.bindTexture(mr,vt),Uo){Uo=!1,Mr=Ct.width||Su.width,Dr=Ct.height||Su.height,bt.texImage3D(mr,ko,hn,Mr,Dr,Bo,0,En,kn,null);for(let ga=0;ga<Bo;++ga)bt.texSubImage3D(mr,ko,0,0,ga,Mr,Dr,1,En,kn,Su)}else{let ga=Su,fs;(Su.width!==Mr||Su.height!==Dr)&&(fs=N0(),ga=fs.canvas,fs.canvas.width=Mr,fs.canvas.height=Dr,fs.drawImage(Su,0,0,Mr,Dr)),bt.texSubImage3D(mr,ko,0,0,dr,Mr,Dr,1,En,kn,ga),fs&&ga===fs.canvas&&(fs.canvas.width=0,fs.canvas.height=0)}O1(Ct)&&bt.generateMipmap(mr)}Vr===0&&Xt(Gr.length?Gr:void 0,vt,Io)}}Io=Yt.map(function(dr,Vu){return l0(dr,Ct.crossOrigin,gs(Vu))})}function P2(bt,vt,Ct,Xt){Xt=Xt||Hm.textureOptions;const Yt=Xt.target||Ym;bt.bindTexture(Yt,vt);let hn=Xt.width,In=Xt.height,En=Xt.depth;const kn=Xt.level||0,mr=Xt.internalFormat||Xt.format||Yu,Vr=w1(mr),Gr=Xt.format||Vr.format,Io=Xt.type||A2(bt,Ct,Vr.type);if(R1(Ct))Ct instanceof Uint8ClampedArray&&(Ct=new Uint8Array(Ct.buffer));else{const Bo=vn(Io);Ct=new Bo(Ct)}const ko=x2(mr,Io),Mr=Ct.byteLength/ko;if(Mr%1)throw"length wrong size for format: "+k0(bt,Gr);let Dr;if(Yt===_g||Yt===e1)if(!hn&&!In&&!En){const Bo=Math.cbrt(Mr);if(Bo%1!==0)throw"can't guess cube size of array of numElements: "+Mr;hn=Bo,In=Bo,En=Bo}else hn&&(!In||!En)?(Dr=P1(bt,Yt,In,En,Mr/hn),In=Dr.width,En=Dr.height):In&&(!hn||!En)?(Dr=P1(bt,Yt,hn,En,Mr/In),hn=Dr.width,En=Dr.height):(Dr=P1(bt,Yt,hn,In,Mr/En),hn=Dr.width,In=Dr.height);else Dr=P1(bt,Yt,hn,In,Mr),hn=Dr.width,In=Dr.height;if(J0(bt),bt.pixelStorei(r0,Xt.unpackAlignment||1),g1(bt,Xt),Yt===Bm){const Bo=ko/Ct.BYTES_PER_ELEMENT,Uo=Mr/6*Bo;c0(bt,Xt).forEach(gs=>{const dr=Uo*gs.ndx,Vu=Ct.subarray(dr,dr+Uo);bt.texImage2D(gs.face,kn,mr,hn,In,0,Gr,Io,Vu)})}else Yt===_g||Yt===e1?bt.texImage3D(Yt,kn,mr,hn,In,En,0,Gr,Io,Ct):bt.texImage2D(Yt,kn,mr,hn,In,0,Gr,Io,Ct);return{width:hn,height:In,depth:En,type:Io}}function F2(bt,vt,Ct){const Xt=Ct.target||Ym;bt.bindTexture(Xt,vt);const Yt=Ct.level||0,hn=Ct.internalFormat||Ct.format||Yu,In=w1(hn),En=Ct.format||In.format,kn=Ct.type||In.type;if(g1(bt,Ct),Xt===Bm)for(let mr=0;mr<6;++mr)bt.texImage2D(e0+mr,Yt,hn,Ct.width,Ct.height,0,En,kn,null);else Xt===_g||Xt===e1?bt.texImage3D(Xt,Yt,hn,Ct.width,Ct.height,Ct.depth,0,En,kn,null):bt.texImage2D(Xt,Yt,hn,Ct.width,Ct.height,0,En,kn,null)}function q0(bt,vt,Ct){Ct=Ct||A1,vt=vt||Hm.textureOptions;const Xt=bt.createTexture(),Yt=vt.target||Ym;let hn=vt.width||1,In=vt.height||1;const En=vt.internalFormat||Yu;bt.bindTexture(Yt,Xt),Yt===Bm&&(bt.texParameteri(Yt,V1,Z1),bt.texParameteri(Yt,L1,Z1));let kn=vt.src;if(kn)if(typeof kn=="function"&&(kn=kn(bt,vt)),typeof kn=="string")G2(bt,Xt,vt,Ct);else if(R1(kn)||Array.isArray(kn)&&(typeof kn[0]=="number"||Array.isArray(kn[0])||R1(kn[0]))){const mr=P2(bt,Xt,kn,vt);hn=mr.width,In=mr.height}else Array.isArray(kn)&&(typeof kn[0]=="string"||_0(kn[0]))?Yt===Bm?W2(bt,Xt,vt,Ct):M2(bt,Xt,vt,Ct):(Q0(bt,Xt,kn,vt),hn=kn.width,In=kn.height);else F2(bt,Xt,vt);return O1(vt)&&s0(bt,Xt,vt,hn,In,En),$0(bt,Xt,vt),Xt}const d0=Dn;function ev(bt){return typeof document<"u"&&document.getElementById?document.getElementById(bt):null}const F1=33984,X1=34962,X2=34963,D2=35713,j2=35714,U2=35632,H2=35633,Y2=35981,tv=35718,B2=35721,K2=35971,z2=35382,J2=35396,$2=35398,Q2=35392,_2=35395,D1=5126,nv=35664,rv=35665,iv=35666,f0=5124,ov=35667,sv=35668,av=35669,cv=35670,lv=35671,uv=35672,dv=35673,fv=35674,hv=35675,pv=35676,q2=35678,_b=35680,e3=35679,t3=35682,n3=35685,r3=35686,i3=35687,o3=35688,s3=35689,a3=35690,c3=36289,l3=36292,u3=36293,h0=5125,mv=36294,gv=36295,vv=36296,d3=36298,f3=36299,h3=36300,p3=36303,m3=36306,g3=36307,v3=36308,y3=36311,j1=3553,U1=34067,p0=32879,H1=35866,Fs={};function yv(bt,vt){return Fs[vt].bindPoint}function b3(bt,vt){return function(Ct){bt.uniform1f(vt,Ct)}}function S3(bt,vt){return function(Ct){bt.uniform1fv(vt,Ct)}}function E3(bt,vt){return function(Ct){bt.uniform2fv(vt,Ct)}}function C3(bt,vt){return function(Ct){bt.uniform3fv(vt,Ct)}}function T3(bt,vt){return function(Ct){bt.uniform4fv(vt,Ct)}}function bv(bt,vt){return function(Ct){bt.uniform1i(vt,Ct)}}function Sv(bt,vt){return function(Ct){bt.uniform1iv(vt,Ct)}}function Ev(bt,vt){return function(Ct){bt.uniform2iv(vt,Ct)}}function Cv(bt,vt){return function(Ct){bt.uniform3iv(vt,Ct)}}function Tv(bt,vt){return function(Ct){bt.uniform4iv(vt,Ct)}}function R3(bt,vt){return function(Ct){bt.uniform1ui(vt,Ct)}}function I3(bt,vt){return function(Ct){bt.uniform1uiv(vt,Ct)}}function x3(bt,vt){return function(Ct){bt.uniform2uiv(vt,Ct)}}function w3(bt,vt){return function(Ct){bt.uniform3uiv(vt,Ct)}}function O3(bt,vt){return function(Ct){bt.uniform4uiv(vt,Ct)}}function A3(bt,vt){return function(Ct){bt.uniformMatrix2fv(vt,!1,Ct)}}function Z3(bt,vt){return function(Ct){bt.uniformMatrix3fv(vt,!1,Ct)}}function V3(bt,vt){return function(Ct){bt.uniformMatrix4fv(vt,!1,Ct)}}function L3(bt,vt){return function(Ct){bt.uniformMatrix2x3fv(vt,!1,Ct)}}function k3(bt,vt){return function(Ct){bt.uniformMatrix3x2fv(vt,!1,Ct)}}function N3(bt,vt){return function(Ct){bt.uniformMatrix2x4fv(vt,!1,Ct)}}function G3(bt,vt){return function(Ct){bt.uniformMatrix4x2fv(vt,!1,Ct)}}function W3(bt,vt){return function(Ct){bt.uniformMatrix3x4fv(vt,!1,Ct)}}function M3(bt,vt){return function(Ct){bt.uniformMatrix4x3fv(vt,!1,Ct)}}function Kp(bt,vt,Ct,Xt){const Yt=yv(bt,vt);return T1(bt)?function(hn){let In,En;eo(bt,hn)?(In=hn,En=null):(In=hn.texture,En=hn.sampler),bt.uniform1i(Xt,Ct),bt.activeTexture(F1+Ct),bt.bindTexture(Yt,In),bt.bindSampler(Ct,En)}:function(hn){bt.uniform1i(Xt,Ct),bt.activeTexture(F1+Ct),bt.bindTexture(Yt,hn)}}function zp(bt,vt,Ct,Xt,Yt){const hn=yv(bt,vt),In=new Int32Array(Yt);for(let En=0;En<Yt;++En)In[En]=Ct+En;return T1(bt)?function(En){bt.uniform1iv(Xt,In),En.forEach(function(kn,mr){bt.activeTexture(F1+In[mr]);let Vr,Gr;eo(bt,kn)?(Vr=kn,Gr=null):(Vr=kn.texture,Gr=kn.sampler),bt.bindSampler(Ct,Gr),bt.bindTexture(hn,Vr)})}:function(En){bt.uniform1iv(Xt,In),En.forEach(function(kn,mr){bt.activeTexture(F1+In[mr]),bt.bindTexture(hn,kn)})}}Fs[D1]={Type:Float32Array,size:4,setter:b3,arraySetter:S3},Fs[nv]={Type:Float32Array,size:8,setter:E3,cols:2},Fs[rv]={Type:Float32Array,size:12,setter:C3,cols:3},Fs[iv]={Type:Float32Array,size:16,setter:T3,cols:4},Fs[f0]={Type:Int32Array,size:4,setter:bv,arraySetter:Sv},Fs[ov]={Type:Int32Array,size:8,setter:Ev,cols:2},Fs[sv]={Type:Int32Array,size:12,setter:Cv,cols:3},Fs[av]={Type:Int32Array,size:16,setter:Tv,cols:4},Fs[h0]={Type:Uint32Array,size:4,setter:R3,arraySetter:I3},Fs[mv]={Type:Uint32Array,size:8,setter:x3,cols:2},Fs[gv]={Type:Uint32Array,size:12,setter:w3,cols:3},Fs[vv]={Type:Uint32Array,size:16,setter:O3,cols:4},Fs[cv]={Type:Uint32Array,size:4,setter:bv,arraySetter:Sv},Fs[lv]={Type:Uint32Array,size:8,setter:Ev,cols:2},Fs[uv]={Type:Uint32Array,size:12,setter:Cv,cols:3},Fs[dv]={Type:Uint32Array,size:16,setter:Tv,cols:4},Fs[fv]={Type:Float32Array,size:32,setter:A3,rows:2,cols:2},Fs[hv]={Type:Float32Array,size:48,setter:Z3,rows:3,cols:3},Fs[pv]={Type:Float32Array,size:64,setter:V3,rows:4,cols:4},Fs[n3]={Type:Float32Array,size:32,setter:L3,rows:2,cols:3},Fs[r3]={Type:Float32Array,size:32,setter:N3,rows:2,cols:4},Fs[i3]={Type:Float32Array,size:48,setter:k3,rows:3,cols:2},Fs[o3]={Type:Float32Array,size:48,setter:W3,rows:3,cols:4},Fs[s3]={Type:Float32Array,size:64,setter:G3,rows:4,cols:2},Fs[a3]={Type:Float32Array,size:64,setter:M3,rows:4,cols:3},Fs[q2]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:j1},Fs[_b]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:U1},Fs[e3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:p0},Fs[t3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:j1},Fs[c3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:H1},Fs[l3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:H1},Fs[u3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:U1},Fs[d3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:j1},Fs[f3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:p0},Fs[h3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:U1},Fs[p3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:H1},Fs[m3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:j1},Fs[g3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:p0},Fs[v3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:U1},Fs[y3]={Type:null,size:0,setter:Kp,arraySetter:zp,bindPoint:H1};function Y1(bt,vt){return function(Ct){if(Ct.value)switch(bt.disableVertexAttribArray(vt),Ct.value.length){case 4:bt.vertexAttrib4fv(vt,Ct.value);break;case 3:bt.vertexAttrib3fv(vt,Ct.value);break;case 2:bt.vertexAttrib2fv(vt,Ct.value);break;case 1:bt.vertexAttrib1fv(vt,Ct.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else bt.bindBuffer(X1,Ct.buffer),bt.enableVertexAttribArray(vt),bt.vertexAttribPointer(vt,Ct.numComponents||Ct.size,Ct.type||D1,Ct.normalize||!1,Ct.stride||0,Ct.offset||0),bt.vertexAttribDivisor&&bt.vertexAttribDivisor(vt,Ct.divisor||0)}}function zm(bt,vt){return function(Ct){if(Ct.value)if(bt.disableVertexAttribArray(vt),Ct.value.length===4)bt.vertexAttrib4iv(vt,Ct.value);else throw new Error("The length of an integer constant value must be 4!");else bt.bindBuffer(X1,Ct.buffer),bt.enableVertexAttribArray(vt),bt.vertexAttribIPointer(vt,Ct.numComponents||Ct.size,Ct.type||f0,Ct.stride||0,Ct.offset||0),bt.vertexAttribDivisor&&bt.vertexAttribDivisor(vt,Ct.divisor||0)}}function B1(bt,vt){return function(Ct){if(Ct.value)if(bt.disableVertexAttribArray(vt),Ct.value.length===4)bt.vertexAttrib4uiv(vt,Ct.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else bt.bindBuffer(X1,Ct.buffer),bt.enableVertexAttribArray(vt),bt.vertexAttribIPointer(vt,Ct.numComponents||Ct.size,Ct.type||h0,Ct.stride||0,Ct.offset||0),bt.vertexAttribDivisor&&bt.vertexAttribDivisor(vt,Ct.divisor||0)}}function m0(bt,vt,Ct){const Xt=Ct.size,Yt=Ct.count;return function(hn){bt.bindBuffer(X1,hn.buffer);const In=hn.size||hn.numComponents||Xt,En=In/Yt,kn=hn.type||D1,mr=Fs[kn].size*In,Vr=hn.normalize||!1,Gr=hn.offset||0,Io=mr/Yt;for(let ko=0;ko<Yt;++ko)bt.enableVertexAttribArray(vt+ko),bt.vertexAttribPointer(vt+ko,En,kn,Vr,mr,Gr+Io*ko),bt.vertexAttribDivisor&&bt.vertexAttribDivisor(vt+ko,hn.divisor||0)}}const hp={};hp[D1]={size:4,setter:Y1},hp[nv]={size:8,setter:Y1},hp[rv]={size:12,setter:Y1},hp[iv]={size:16,setter:Y1},hp[f0]={size:4,setter:zm},hp[ov]={size:8,setter:zm},hp[sv]={size:12,setter:zm},hp[av]={size:16,setter:zm},hp[h0]={size:4,setter:B1},hp[mv]={size:8,setter:B1},hp[gv]={size:12,setter:B1},hp[vv]={size:16,setter:B1},hp[cv]={size:4,setter:zm},hp[lv]={size:8,setter:zm},hp[uv]={size:12,setter:zm},hp[dv]={size:16,setter:zm},hp[fv]={size:4,setter:m0,count:2},hp[hv]={size:9,setter:m0,count:3},hp[pv]={size:16,setter:m0,count:4};const P3=/ERROR:\s*\d+:(\d+)/gi;function F3(bt,vt="",Ct=0){const Xt=[...vt.matchAll(P3)],Yt=new Map(Xt.map((hn,In)=>{const En=parseInt(hn[1]),kn=Xt[In+1],mr=kn?kn.index:vt.length,Vr=vt.substring(hn.index,mr);return[En-1,Vr]}));return bt.split(`
`).map((hn,In)=>{const En=Yt.get(In);return`${In+1+Ct}: ${hn}${En?`

^^^ ${En}`:""}`}).join(`
`)}const Rv=/^[ \t]*\n/;function Iv(bt){let vt=0;return Rv.test(bt)&&(vt=1,bt=bt.replace(Rv,"")),{lineOffset:vt,shaderSource:bt}}function X3(bt,vt){return bt.errorCallback(vt),bt.callback&&setTimeout(()=>{bt.callback(`${vt}
${bt.errors.join(`
`)}`)}),null}function D3(bt,vt,Ct,Xt){if(Xt=Xt||d0,!bt.getShaderParameter(Ct,D2)){const Yt=bt.getShaderInfoLog(Ct),{lineOffset:hn,shaderSource:In}=Iv(bt.getShaderSource(Ct)),En=`${F3(In,Yt,hn)}
Error compiling ${k0(bt,vt)}: ${Yt}`;return Xt(En),En}return""}function g0(bt,vt,Ct){let Xt,Yt,hn;if(typeof vt=="function"&&(Ct=vt,vt=void 0),typeof bt=="function")Ct=bt,bt=void 0;else if(bt&&!Array.isArray(bt)){const mr=bt;Ct=mr.errorCallback,bt=mr.attribLocations,Xt=mr.transformFeedbackVaryings,Yt=mr.transformFeedbackMode,hn=mr.callback}const In=Ct||d0,En=[],kn={errorCallback(mr,...Vr){En.push(mr),In(mr,...Vr)},transformFeedbackVaryings:Xt,transformFeedbackMode:Yt,callback:hn,errors:En};{let mr={};Array.isArray(bt)?bt.forEach(function(Vr,Gr){mr[Vr]=vt?vt[Gr]:Gr}):mr=bt||{},kn.attribLocations=mr}return kn}const j3=["VERTEX_SHADER","FRAGMENT_SHADER"];function U3(bt,vt){if(vt.indexOf("frag")>=0)return U2;if(vt.indexOf("vert")>=0)return H2}function H3(bt,vt,Ct){const Xt=bt.getAttachedShaders(vt);for(const Yt of Xt)Ct.has(Yt)&&bt.deleteShader(Yt);bt.deleteProgram(vt)}const Y3=(bt=0)=>new tt(vt=>setTimeout(vt,bt));function B3(bt,vt,Ct){const Xt=bt.createProgram(),{attribLocations:Yt,transformFeedbackVaryings:hn,transformFeedbackMode:In}=g0(Ct);for(let En=0;En<vt.length;++En){let kn=vt[En];if(typeof kn=="string"){const mr=ev(kn),Vr=mr?mr.text:kn;let Gr=bt[j3[En]];mr&&mr.type&&(Gr=U3(bt,mr.type)||Gr),kn=bt.createShader(Gr),bt.shaderSource(kn,Iv(Vr).shaderSource),bt.compileShader(kn),bt.attachShader(Xt,kn)}}Object.entries(Yt).forEach(([En,kn])=>bt.bindAttribLocation(Xt,kn,En));{let En=hn;En&&(En.attribs&&(En=En.attribs),Array.isArray(En)||(En=Object.keys(En)),bt.transformFeedbackVaryings(Xt,En,In||Y2))}return bt.linkProgram(Xt),Xt}function K3(bt,vt,Ct,Xt,Yt){const hn=g0(Ct,Xt,Yt),In=new Set(vt),En=B3(bt,vt,hn);function kn(mr,Vr){const Gr=J3(mr,Vr,hn.errorCallback);return Gr&&H3(mr,Vr,In),Gr}if(hn.callback){z3(bt,En).then(()=>{const mr=kn(bt,En);hn.callback(mr,mr?void 0:En)});return}return kn(bt,En)?void 0:En}async function z3(bt,vt){const Ct=bt.getExtension("KHR_parallel_shader_compile"),Xt=Ct?(hn,In)=>hn.getProgramParameter(In,Ct.COMPLETION_STATUS_KHR):()=>!0;let Yt=0;do await Y3(Yt),Yt=1e3/60;while(!Xt(bt,vt))}function J3(bt,vt,Ct){if(Ct=Ct||d0,!bt.getProgramParameter(vt,j2)){const Xt=bt.getProgramInfoLog(vt);Ct(`Error in program linking: ${Xt}`);const Yt=bt.getAttachedShaders(vt).map(hn=>D3(bt,bt.getShaderParameter(hn,bt.SHADER_TYPE),hn,Ct));return`${Xt}
${Yt.filter(hn=>hn).join(`
`)}`}}function $3(bt,vt,Ct,Xt,Yt){return K3(bt,vt,Ct,Xt,Yt)}function xv(bt){const vt=bt.name;return vt.startsWith("gl_")||vt.startsWith("webgl_")}const Q3=/(\.|\[|]|\w+)/g,_3=bt=>bt>="0"&&bt<="9";function q3(bt,vt,Ct,Xt){const Yt=bt.split(Q3).filter(En=>En!=="");let hn=0,In="";for(;;){const En=Yt[hn++];In+=En;const kn=_3(En[0]),mr=kn?parseInt(En):En;if(kn&&(In+=Yt[hn++]),hn===Yt.length){Ct[mr]=vt;break}else{const Vr=Yt[hn++],Gr=Vr==="[",Io=Ct[mr]||(Gr?[]:{});Ct[mr]=Io,Ct=Io,Xt[In]=Xt[In]||function(ko){return function(Mr){wv(ko,Mr)}}(Io),In+=Vr}}}function eS(bt,vt){let Ct=0;function Xt(En,kn,mr){const Vr=kn.name.endsWith("[0]"),Gr=kn.type,Io=Fs[Gr];if(!Io)throw new Error(`unknown type: 0x${Gr.toString(16)}`);let ko;if(Io.bindPoint){const Mr=Ct;Ct+=kn.size,Vr?ko=Io.arraySetter(bt,Gr,Mr,mr,kn.size):ko=Io.setter(bt,Gr,Mr,mr,kn.size)}else Io.arraySetter&&Vr?ko=Io.arraySetter(bt,mr):ko=Io.setter(bt,mr);return ko.location=mr,ko}const Yt={},hn={},In=bt.getProgramParameter(vt,tv);for(let En=0;En<In;++En){const kn=bt.getActiveUniform(vt,En);if(xv(kn))continue;let mr=kn.name;mr.endsWith("[0]")&&(mr=mr.substr(0,mr.length-3));const Vr=bt.getUniformLocation(vt,kn.name);if(Vr){const Gr=Xt(vt,kn,Vr);Yt[mr]=Gr,q3(mr,Gr,hn,Yt)}}return Yt}function tS(bt,vt){const Ct={},Xt=bt.getProgramParameter(vt,K2);for(let Yt=0;Yt<Xt;++Yt){const hn=bt.getTransformFeedbackVarying(vt,Yt);Ct[hn.name]={index:Yt,type:hn.type,size:hn.size}}return Ct}function nS(bt,vt){const Ct=bt.getProgramParameter(vt,tv),Xt=[],Yt=[];for(let En=0;En<Ct;++En){Yt.push(En),Xt.push({});const kn=bt.getActiveUniform(vt,En);Xt[En].name=kn.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(En){const kn=En[0],mr=En[1];bt.getActiveUniforms(vt,Yt,bt[kn]).forEach(function(Vr,Gr){Xt[Gr][mr]=Vr})});const hn={},In=bt.getProgramParameter(vt,z2);for(let En=0;En<In;++En){const kn=bt.getActiveUniformBlockName(vt,En),mr={index:bt.getUniformBlockIndex(vt,kn),usedByVertexShader:bt.getActiveUniformBlockParameter(vt,En,J2),usedByFragmentShader:bt.getActiveUniformBlockParameter(vt,En,$2),size:bt.getActiveUniformBlockParameter(vt,En,Q2),uniformIndices:bt.getActiveUniformBlockParameter(vt,En,_2)};mr.used=mr.usedByVertexShader||mr.usedByFragmentShader,hn[kn]=mr}return{blockSpecs:hn,uniformData:Xt}}function wv(bt,vt){for(const Ct in vt){const Xt=bt[Ct];typeof Xt=="function"?Xt(vt[Ct]):wv(bt[Ct],vt[Ct])}}function Ov(bt,...vt){const Ct=bt.uniformSetters||bt,Xt=vt.length;for(let Yt=0;Yt<Xt;++Yt){const hn=vt[Yt];if(Array.isArray(hn)){const In=hn.length;for(let En=0;En<In;++En)Ov(Ct,hn[En])}else for(const In in hn){const En=Ct[In];En&&En(hn[In])}}}function rS(bt,vt){const Ct={},Xt=bt.getProgramParameter(vt,B2);for(let Yt=0;Yt<Xt;++Yt){const hn=bt.getActiveAttrib(vt,Yt);if(xv(hn))continue;const In=bt.getAttribLocation(vt,hn.name),En=hp[hn.type],kn=En.setter(bt,In,En);kn.location=In,Ct[hn.name]=kn}return Ct}function iS(bt,vt){for(const Ct in vt){const Xt=bt[Ct];Xt&&Xt(vt[Ct])}}function oS(bt,vt,Ct){Ct.vertexArrayObject?bt.bindVertexArray(Ct.vertexArrayObject):(iS(vt.attribSetters||vt,Ct.attribs),Ct.indices&&bt.bindBuffer(X2,Ct.indices))}function Av(bt,vt){const Ct=eS(bt,vt),Xt=rS(bt,vt),Yt={program:vt,uniformSetters:Ct,attribSetters:Xt};return T1(bt)&&(Yt.uniformBlockSpec=nS(bt,vt),Yt.transformFeedbackInfo=tS(bt,vt)),Yt}const sS=/\s|{|}|;/;function aS(bt,vt,Ct,Xt,Yt){const hn=g0(Ct,Xt,Yt),In=[];if(vt=vt.map(function(mr){if(!sS.test(mr)){const Vr=ev(mr);if(Vr)mr=Vr.text;else{const Gr=`no element with id: ${mr}`;hn.errorCallback(Gr),In.push(Gr)}}return mr}),In.length)return X3(hn,"");const En=hn.callback;En&&(hn.callback=(mr,Vr)=>{En(mr,mr?void 0:Av(bt,Vr))});const kn=$3(bt,vt,hn);return kn?Av(bt,kn):null}const cS=4,Zv=5123;function lS(bt,vt,Ct,Xt,Yt,hn){Ct=Ct===void 0?cS:Ct;const In=vt.indices,En=vt.elementType,kn=Xt===void 0?vt.numElements:Xt;Yt=Yt===void 0?0:Yt,En||In?hn!==void 0?bt.drawElementsInstanced(Ct,kn,En===void 0?Zv:vt.elementType,Yt,hn):bt.drawElements(Ct,kn,En===void 0?Zv:vt.elementType,Yt):hn!==void 0?bt.drawArraysInstanced(Ct,Yt,kn,hn):bt.drawArrays(Ct,Yt,kn)}const Vv=36160,K1=36161,uS=3553,dS=5121,fS=6402,hS=6408,pS=33190,mS=36012,gS=35056,vS=36013,yS=32854,bS=32855,SS=36194,Lv=33189,kv=6401,Nv=36168,v0=34041,y0=36064,z1=36096,Gv=36128,b0=33306,S0=33071,E0=9729,ES=[{format:hS,type:dS,min:E0,wrap:S0},{format:v0}],vm={};vm[v0]=b0,vm[kv]=Gv,vm[Nv]=Gv,vm[fS]=z1,vm[Lv]=z1,vm[pS]=z1,vm[mS]=z1,vm[gS]=b0,vm[vS]=b0;function CS(bt,vt){return vm[bt]||vm[vt]}const Jm={};Jm[yS]=!0,Jm[bS]=!0,Jm[SS]=!0,Jm[v0]=!0,Jm[Lv]=!0,Jm[kv]=!0,Jm[Nv]=!0;function TS(bt){return Jm[bt]}const RS=32;function IS(bt){return bt>=y0&&bt<y0+RS}function J1(bt,vt,Ct,Xt){const Yt=Vv,hn=bt.createFramebuffer();bt.bindFramebuffer(Yt,hn),Ct=Ct||bt.drawingBufferWidth,Xt=Xt||bt.drawingBufferHeight,vt=vt||ES;const In=[],En={framebuffer:hn,attachments:[],width:Ct,height:Xt};return vt.forEach(function(kn,mr){let Vr=kn.attachment;const Gr=kn.samples,Io=kn.format;let ko=kn.attachmentPoint||CS(Io,kn.internalFormat);if(ko||(ko=y0+mr),IS(ko)&&In.push(ko),!Vr)if(Gr!==void 0||TS(Io))Vr=bt.createRenderbuffer(),bt.bindRenderbuffer(K1,Vr),Gr>1?bt.renderbufferStorageMultisample(K1,Gr,Io,Ct,Xt):bt.renderbufferStorage(K1,Io,Ct,Xt);else{const Mr=Object.assign({},kn);Mr.width=Ct,Mr.height=Xt,Mr.auto===void 0&&(Mr.auto=!1,Mr.min=Mr.min||Mr.minMag||E0,Mr.mag=Mr.mag||Mr.minMag||E0,Mr.wrapS=Mr.wrapS||Mr.wrap||S0,Mr.wrapT=Mr.wrapT||Mr.wrap||S0),Vr=q0(bt,Mr)}if(Po(bt,Vr))bt.framebufferRenderbuffer(Yt,ko,K1,Vr);else if(eo(bt,Vr))kn.layer!==void 0?bt.framebufferTextureLayer(Yt,ko,Vr,kn.level||0,kn.layer):bt.framebufferTexture2D(Yt,ko,kn.target||uS,Vr,kn.level||0);else throw new Error("unknown attachment type");En.attachments.push(Vr)}),bt.drawBuffers&&bt.drawBuffers(In),En}function xS(bt,vt,Ct){Ct=Ct||Vv,vt?(bt.bindFramebuffer(Ct,vt.framebuffer),bt.viewport(0,0,vt.width,vt.height)):(bt.bindFramebuffer(Ct,null),bt.viewport(0,0,bt.drawingBufferWidth,bt.drawingBufferHeight))}function Zu(bt,vt){return()=>vt instanceof WebGLTexture?vt:q0(bt,{src:vt,wrap:bt.CLAMP_TO_EDGE})}const Wv=2;class r1{constructor(vt){ot(this,"id","_"),ot(this,"context"),ot(this,"output"),ot(this,"fbi"),ot(this,"options"),ot(this,"programInfo"),ot(this,"bufferInfo"),ot(this,"profiler"),ot(this,"lastRun");const{context:Ct,width:Xt,height:Yt}=vt;this.context=Ct,this.options=vt;const hn=this.buildDefines();this.programInfo=aS(this.context,[hn+this.getVertexShader(),hn+this.getFragmentShader()]),this.bufferInfo=ay(this.context,this.getBuffers()),this.fbi=J1(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],Xt,Yt),this.output=this.fbi.attachments[0]}resizeOutput(vt,Ct){this.fbi=J1(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],vt,Ct),this.options.width=vt,this.options.height=Ct,this.output=this.fbi.attachments[0]}getDefines(){return{}}getBuffers(){return{position:{numComponents:2,data:[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1]},texture_coord:{numComponents:2,data:[0,0,0,1,1,0,1,1,0,1,1,0]}}}buildDefines(){let vt="";const Ct=this.getDefines();for(let Xt in Ct)vt+=`#define ${Xt} ${Ct[Xt].toFixed(1)}
`;return vt}run(vt){var Ct,Xt,Yt,hn,In,En;(Ct=this.profiler)==null||Ct.pushContext(`[${this.id}] PROG : ${this.constructor.name}`),(Xt=this.profiler)==null||Xt.pushContext(`[${this.id}] UNIFORMS`);for(const Vr in vt)typeof vt[Vr]=="function"&&((Yt=this.profiler)==null||Yt.pushContext(`[${this.id}] UNI : ${Vr}`),vt[Vr]=vt[Vr](),(hn=this.profiler)==null||hn.popContext(`[${this.id}] UNI : ${Vr}`));(In=this.profiler)==null||In.popContext(`[${this.id}] UNIFORMS`);const kn=Date.now();let mr=0;this.lastRun&&(mr=(kn-this.lastRun)/1e3),this.lastRun=kn,this.context.viewport(0,0,this.context.canvas.width,this.context.canvas.height),this.context.useProgram(this.programInfo.program),oS(this.context,this.programInfo,this.bufferInfo),Ov(this.programInfo,{delta:mr,canvas:[this.context.canvas.width,this.context.canvas.height],...vt}),xS(this.context,this.options.disableFramebuffer?null:this.fbi),lS(this.context,this.bufferInfo),(En=this.profiler)==null||En.popContext(`[${this.id}] PROG : ${this.constructor.name}`)}setProfiler(vt){this.profiler=vt}}const wS=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;
uniform sampler2D mask;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,OS=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class AS extends r1{getDefines(){var vt;return{RADIUS:(vt=this.options.radius)!=null?vt:1}}getFragmentShader(){return wS+this.createLoopFunction()}getVertexShader(){return OS}createLoopFunction(){var vt;let Ct=(vt=this.options.radius)!=null?vt:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${Ct}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;
            float maxLength = length(normalizedRadius);

            for(int y=-${Ct}; y<${Ct+1}; ++y) {
                for(int x=-${Ct}; x<${Ct+1}; ++x) {
                    float factor = (1.- texture2D(mask, _texture_coord + diff).a) * (maxLength - length(diff)) / maxLength;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}}const ZS=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D background;
uniform sampler2D foreground;
uniform sampler2D threshold;

void main() {
  vec4 backgroundColor = texture2D(background, _texture_coord);
  vec4 foregroundColor = texture2D(foreground, _texture_coord);
  vec4 tresholdColor = texture2D(threshold, _texture_coord);
  gl_FragColor = foregroundColor * tresholdColor.a +
                 backgroundColor * (1. - tresholdColor.a);
}
`,VS=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  _texture_coord.y = 1. - texture_coord.y;
}
`;class C0 extends r1{getFragmentShader(){return ZS}getVertexShader(){return VS}}class T0{constructor(){ot(this,"steps",[]),ot(this,"profiler")}addStep(vt){this.steps.push(vt)}async run(){for(const vt of this.steps)vt.program.run(vt.getUniforms())}resizeOutput(vt,Ct){var Xt,Yt;(Xt=this.profiler)==null||Xt.pushContext(`PIP [${this.constructor.name}]`);for(const hn of this.steps)hn.preventResize||hn.program.resizeOutput(vt,Ct);(Yt=this.profiler)==null||Yt.popContext(`PIP [${this.constructor.name}]`)}setProfiler(vt){this.profiler=vt;for(const Ct of this.steps)Ct.program.setProfiler(vt)}setId(vt){for(const Ct of this.steps)Ct.program.id=vt}}class R0 extends T0{constructor(){super(...arguments),ot(this,"preciseMaskEnabled",!1)}}const LS=10,kS=2,NS=8;class GS extends R0{constructor(vt,Ct){super(),ot(this,"inputImage"),ot(this,"inputMask"),ot(this,"blur"),this.context=vt,this.radius=Ct;const Xt={context:vt,height:vt.canvas.height,width:vt.canvas.width};this.blur=new AS({...Xt,radius:Ct,...this.getBlurTextureSize(vt.canvas.width,vt.canvas.height)});const Yt=new C0({...Xt,disableFramebuffer:!0});this.addStep({program:this.blur,preventResize:!0,getUniforms:()=>({texture:Zu(vt,this.inputImage),mask:Zu(vt,this.inputMask)})}),this.addStep({program:Yt,getUniforms:()=>({background:Zu(vt,this.blur.output),foreground:Zu(vt,this.inputImage),threshold:Zu(vt,this.inputMask)})})}getBlurTextureSize(vt,Ct){const Xt=this.radius>LS?NS:kS;return{width:Math.max(Wv,vt/Xt),height:Math.max(Wv,Ct/Xt)}}setData(vt,Ct){this.inputImage=vt,this.inputMask=Ct}resizeOutput(vt,Ct){super.resizeOutput(vt,Ct);const Xt=this.getBlurTextureSize(vt,Ct);this.blur.resizeOutput(Xt.width,Xt.height)}}class Mv extends R0{constructor(vt){super(),ot(this,"inputImage"),ot(this,"inputBackgroundImage"),ot(this,"inputMask"),ot(this,"preciseMaskEnabled",!0),this.context=vt;const Ct={context:vt,height:vt.canvas.height,width:vt.canvas.width},Xt=new C0({...Ct,disableFramebuffer:!0});this.addStep({program:Xt,getUniforms:()=>({background:Zu(vt,this.inputBackgroundImage),foreground:Zu(vt,this.inputImage),threshold:Zu(vt,this.inputMask)})})}setData(vt,Ct){this.inputImage=vt,this.inputMask=Ct}}class WS extends Mv{constructor(){super(...arguments),ot(this,"frameReader"),ot(this,"preciseMaskEnabled",!0)}set inputVideo(vt){this.frameReader=vt.getReader(),this.readNextVideoFrame()}async run(){this.frameReader&&(await super.run(),this.readNextVideoFrame())}async readNextVideoFrame(){var vt;const Ct=await((vt=this.frameReader)==null?void 0:vt.read());Ct!=null&&Ct.value&&(this.inputBackgroundImage=await createImageBitmap(Ct.value),Ct.value.close())}}const MS=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,PS=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;var I0=(bt=>(bt[bt.LINEAR=0]="LINEAR",bt[bt.GAUSSIAN=1]="GAUSSIAN",bt))(I0||{});class Pv extends r1{getDefines(){var vt;return{RADIUS:(vt=this.options.radius)!=null?vt:1}}getFragmentShader(){return MS+this.createLoopFunction()}getVertexShader(){return PS}createLoopFunction(){var vt;let Ct=(vt=this.options.radius)!=null?vt:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${Ct}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;

            for(int y=-${Ct}; y<${Ct+1}; ++y) {
                for(int x=-${Ct}; x<${Ct+1}; ++x) {
                    float factor = 1.;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}getFactor(vt,Ct){switch(this.options.type){case 1:return this.getLinearFactor(vt,Ct);case 0:default:return this.getLinearFactor(vt,Ct)}}getLinearFactor(vt,Ct){return 1}getGaussianFactor(vt,Ct){var Xt;const Yt=Math.PI*2,hn=Math.max((Xt=this.options.radius)!=null?Xt:1,1),In=1/(Yt*hn**2),En=-(vt**2+Ct**2),kn=In*En;return In*Math.E**kn}}class FS extends R0{constructor(vt,Ct){super(),ot(this,"inputImage"),ot(this,"inputMask"),this.context=vt;const Xt={context:vt,height:vt.canvas.height,width:vt.canvas.width},Yt=new Pv({...Xt,radius:Ct,type:I0.GAUSSIAN}),hn=new C0({...Xt,disableFramebuffer:!0});this.addStep({program:Yt,getUniforms:()=>({texture:Zu(vt,this.inputImage)})}),this.addStep({program:hn,getUniforms:()=>({background:Zu(vt,this.inputImage),foreground:Zu(vt,Yt.output),threshold:Zu(vt,this.inputMask)})})}setData(vt,Ct){this.inputImage=vt,this.inputMask=Ct}}class x0 extends r1{constructor(vt){super(vt),ot(this,"fbi2"),this.fbi2=J1(vt.context,[{format:vt.context.RGBA,type:vt.context.UNSIGNED_BYTE,min:vt.context.LINEAR,mag:vt.context.LINEAR,wrap:vt.context.CLAMP_TO_EDGE}],vt.width,vt.height)}run(vt){const Ct=this.fbi;this.fbi=this.fbi2,this.fbi2=Ct,this.output=this.fbi.attachments[0],super.run({...vt,previous_rendering:this.fbi2.attachments[0]})}resizeOutput(vt,Ct){super.resizeOutput(vt,Ct),this.fbi2=J1(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],vt,Ct)}}const XS=`precision mediump float;

varying vec2 _texture_coord;

// uniform float treshold;
uniform sampler2D image_now;
uniform sampler2D image_before;
uniform sampler2D mask_now;
uniform sampler2D mask_before;
uniform sampler2D previous_rendering;
uniform vec2 canvas;

uniform float delta;

float current_factor = 0.69;
float previous_factor = 0.74;
float threshold_activation = 0.54;

float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float getThreshold() {
  vec4 color = vec4(0.);
  for (float y = -6.; y < 7.; y += 1.) {
    for (float x = -6.; x < 7.; x += 1.) {
      vec4 image_now_color =
          texture2D(image_now, _texture_coord + vec2(x, y) / canvas);
      vec4 image_before_color =
          texture2D(image_before, _texture_coord + vec2(x, y) / canvas);
      color += abs(image_before_color - image_now_color);
    }
  }
  return (color.x + color.y + color.z) / (3. * 9.);
}

void main() {
  float treshold_input = .4;
  float treshold_previous_rendering = .98;

  vec4 mask_now_color = texture2D(mask_now, _texture_coord);
  vec4 mask_before_color = texture2D(mask_before, _texture_coord);
  vec4 previous_rendering_color = texture2D(previous_rendering, _texture_coord);

  vec3 mask_diff = abs(mask_before_color.xyz - mask_now_color.xyz);
  float flickering = mask_diff.x;
  float threshold = getThreshold();
  if (threshold < threshold_activation) {
    gl_FragColor = vec4(flickering, 0., 0., 1.) * current_factor +
                   previous_rendering_color * previous_factor;
    gl_FragColor *= (1. - threshold);
  }
}
`,DS=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class jS extends x0{getFragmentShader(){return XS}getVertexShader(){return DS}}const US=`#version 300 es
// https://github.com/Volcomix/virtual-background/blob/main/src/pipelines/webgl2/jointBilateralFilterStage.ts

precision highp float;
uniform sampler2D input_frame;
uniform sampler2D segmentation_mask;
uniform sampler2D threshold;
uniform vec2 texel_size;
uniform float step;
uniform float radius;
uniform float offset;
uniform float sigma_texel;
uniform float sigma_color;

in vec2 _texture_coord;
out vec4 outColor;

float gaussian(float x, float sigma) {
  float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);
  return exp((x * x) * coeff);
}

void main() {
  vec2 centerCoord = _texture_coord;
  vec3 centerColor = texture(input_frame, centerCoord).rgb;
  float newVal = 0.0;
  float spaceWeight = 0.0;
  float colorWeight = 0.0;
  float totalWeight = 0.0;
  // Subsample kernel space.
  for (float i = -radius + offset; i <= radius; i += step) {
    for (float j = -radius + offset; j <= radius; j += step) {
      vec2 shift = vec2(j, i) * texel_size;
      vec2 coord = vec2(centerCoord + shift);
      vec3 frameColor = texture(input_frame, coord).rgb;
      float threshold = texture(threshold, coord).a;
      float outVal = texture(segmentation_mask, coord).a;

      spaceWeight = gaussian(distance(centerCoord, coord), sigma_texel);
      colorWeight = gaussian(distance(centerColor, frameColor), sigma_color);
      totalWeight += spaceWeight * colorWeight;
      newVal += spaceWeight * colorWeight * outVal * threshold;
    }
  }
  newVal /= totalWeight;
  outColor = vec4(vec3(0.), newVal);
}`,HS=`#version 300 es
in vec2 position;
in vec2 texture_coord;
out vec2 _texture_coord;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
  _texture_coord = texture_coord;
}`;class YS extends r1{getFragmentShader(){return US}getVertexShader(){return HS}}const BS=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  int count = 0;
  for (float y = -1.; y < 2.; y += 1.) {
    for (float x = -1.; x < 2.; x += 1.) {
      vec2 coord = _texture_coord + vec2(y, x) / canvas;
      vec4 color = texture2D(texture, coord);
      if (color.r > .1) {
        count++;
      }
    }
  }
  if (count > 5) {
    gl_FragColor = texture2D(texture, _texture_coord);
  }
}
`,KS=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class zS extends r1{getFragmentShader(){return BS}getVertexShader(){return KS}}const JS=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  vec4 color = texture2D(texture, _texture_coord);
  for (float y = -2.; y < 3.; y += 1.) {
    for (float x = -2.; x < 3.; x += 1.) {
      vec2 coord = _texture_coord;
      coord += vec2(y, x) / canvas;
      color += texture2D(texture, coord) * (1. / 4.);
    }
  }

  gl_FragColor = color;
}
`,$S=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class QS extends x0{getFragmentShader(){return JS}getVertexShader(){return $S}}const _S=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D threshold;
uniform sampler2D inputs;

void main() {
  vec4 inputs_color = texture2D(inputs, _texture_coord);
  vec4 threshold_color = texture2D(threshold, _texture_coord);
  if (threshold_color.r < .1 && inputs_color.r > .5) {
    gl_FragColor = inputs_color;
  }
}
`,qS=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class e4 extends x0{getFragmentShader(){return _S}getVertexShader(){return qS}}class t4 extends T0{constructor(vt,Ct,Xt){super(),ot(this,"inputImage"),ot(this,"inputMask"),ot(this,"previousInputImage"),ot(this,"previousInputMask"),ot(this,"output"),ot(this,"options",{currentThresholdMinimum:0,currentThresholdMaximum:1,previousThresholdMinimum:0,previousThresholdMaximum:1,thresholdMinimum:0,thresholdMaximum:1,thresholdFactor:1}),this.context=vt;const Yt={context:vt,height:Xt,width:Ct},hn=new jS(Yt),In=new Pv({...Yt,radius:1,type:I0.GAUSSIAN}),En=new e4(Yt),kn=new QS(Yt),mr=new zS(Yt),Vr=new YS({...Yt}),Gr=.66,Io=640,ko=480,Mr=256,Dr=144;let Bo=1;Bo*=Math.max(Io/Mr,ko/Dr);const Uo=Math.max(1,Math.sqrt(Bo)*Gr),gs=1/Io,dr=1/ko;this.addStep({program:hn,getUniforms:()=>({image_now:Zu(vt,this.inputImage),image_before:Zu(vt,this.previousInputImage),mask_now:Zu(vt,this.inputMask),mask_before:Zu(vt,this.previousInputMask),current_threshold_minimum:this.options.currentThresholdMinimum,current_threshold_maximum:this.options.currentThresholdMaximum,previous_threshold_minimum:this.options.previousThresholdMinimum,previous_threshold_maximum:this.options.previousThresholdMaximum,threshold_minimum:this.options.thresholdMinimum,threshold_maximum:this.options.thresholdMaximum,threshold_factor:this.options.thresholdFactor})}),this.addStep({program:En,getUniforms:()=>({inputs:Zu(vt,this.inputMask),threshold:Zu(vt,hn.output)})}),this.addStep({program:mr,getUniforms:()=>({texture:Zu(vt,En.output)})}),this.addStep({program:kn,getUniforms:()=>({texture:Zu(vt,mr.output)})}),this.addStep({program:In,getUniforms:()=>({texture:Zu(vt,kn.output)})}),this.addStep({program:Vr,getUniforms:()=>({input_frame:Zu(vt,this.inputImage),segmentation_mask:Zu(vt,this.inputMask),threshold:Zu(vt,In.output),texel_size:[gs,dr],step:Uo,radius:Bo,offset:Uo>1?Uo*.5:0,sigma_texel:Math.max(gs,dr)*Bo,sigma_color:.1})}),this.output=Vr.output}setData(vt,Ct){this.previousInputImage=this.inputImage?this.inputImage:vt,this.previousInputMask=this.inputMask?this.inputMask:Ct,this.inputImage=vt,this.inputMask=Ct}setOptions(vt){this.options=vt}}const n4=`precision mediump float;

varying vec2 _texture_coord;
uniform sampler2D texture;

void main() { gl_FragColor = texture2D(texture, _texture_coord); }
`,r4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;
uniform bool invert_y;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  if (invert_y) {
    _texture_coord.y = 1. - texture_coord.y;
  }
}
`;class i4 extends r1{getFragmentShader(){return n4}getVertexShader(){return r4}}class o4 extends T0{constructor(vt,Ct,Xt){super(),ot(this,"inputImage"),this.context=vt;const Yt={context:vt,height:Xt,width:Ct};this.addStep({program:new i4({...Yt,disableFramebuffer:!0}),getUniforms:()=>({texture:Zu(vt,this.inputImage),invert_y:!0})})}setData(vt){this.inputImage=vt}}class s4{constructor(vt){ot(this,"resize"),ot(this,"canvas"),ot(this,"context"),this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("webgl2"),this.canvas.width=vt.width,this.canvas.height=vt.height,this.resize=new o4(this.context,vt.width,vt.height)}resizeForeground(vt,Ct){this.canvas.width=vt,this.canvas.height=Ct,this.resize.resizeOutput(vt,Ct)}async process(vt){var Ct,Xt;return this.canvas.width=this.canvas.width,(Ct=this.resize)==null||Ct.setData(vt),(Xt=this.resize)==null||Xt.run(),this.canvas}}class a4{constructor(vt,Ct){ot(this,"improveMaskSegmentation"),ot(this,"backgroundResizer"),ot(this,"backgroundImage"),ot(this,"backgroundVideo"),ot(this,"profiler"),ot(this,"activePipeline"),ot(this,"canvas"),ot(this,"options"),ot(this,"context"),ot(this,"virtualBGImage"),this.id=vt,this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("webgl2"),this.canvas.width=Ct.foregroundWidth,this.canvas.height=Ct.foregroundHeight,this.improveMaskSegmentation=new t4(this.context,Ct.maskWidth,Ct.maskHeight),this.backgroundImage=new Mv(this.context),this.backgroundVideo=new WS(this.context),this.backgroundResizer=new s4({width:Ct.foregroundWidth,height:Ct.foregroundHeight})}setBackgroundOptions(vt){switch(vt.transformerType){case"BackgroundBlur":this.activePipeline=new GS(this.context,this.getBlurSize(vt.radius));break;case"SilhouetteBlur":this.activePipeline=new FS(this.context,this.getBlurSize(vt.radius));break;case"VideoBackground":this.activePipeline=this.backgroundVideo;break;case"VirtualBackground":this.activePipeline=this.backgroundImage;break}this.options=vt}setFlickeringOptions(vt){var Ct;(Ct=this.improveMaskSegmentation)==null||Ct.setOptions(vt)}setVideoBGReadable(vt){this.backgroundVideo.inputVideo=vt}async setVirtualBGImage(vt){this.virtualBGImage=vt,this.backgroundImage.inputBackgroundImage=await this.backgroundResizer.process(vt)}async process(vt,Ct){var Xt,Yt,hn,In,En,kn,mr;if(this.activePipeline&&vt.width&&(Ct!=null&&Ct.width)){const Vr=`[${this.id}] background-filter`;(Xt=this.profiler)==null||Xt.pushContext(Vr);let Gr=Ct;((Yt=this.options)!=null&&Yt.selfieSegmentationType&&((hn=this.options)==null?void 0:hn.selfieSegmentationType)==="PRECISE"||!((In=this.options)!=null&&In.selfieSegmentationType)&&this.activePipeline.preciseMaskEnabled)&&(this.improveMaskSegmentation.setId(this.id),this.improveMaskSegmentation.setProfiler(this.profiler),this.improveMaskSegmentation.setData(vt,Ct),this.improveMaskSegmentation.run(),Gr=this.improveMaskSegmentation.output),this.activePipeline.setId(this.id),this.activePipeline.setProfiler(this.profiler),(En=this.activePipeline)==null||En.setData(vt,Gr),(kn=this.activePipeline)==null||kn.run(),(mr=this.profiler)==null||mr.popContext(Vr)}}async resizeForeground(vt,Ct){var Xt;this.canvas.width=vt,this.canvas.height=Ct,this.backgroundImage.resizeOutput(vt,Ct),this.backgroundVideo.resizeOutput(vt,Ct),this.backgroundResizer.resizeForeground(vt,Ct),(Xt=this.activePipeline)==null||Xt.resizeOutput(vt,Ct),this.virtualBGImage&&(this.backgroundImage.inputBackgroundImage=await this.backgroundResizer.process(this.virtualBGImage))}async profile(vt){const Ct=new l1(this.context);return this.profiler=Ct,Ct.start(),await Tm(vt),this.profiler=void 0,Ct.stop(),Ct.getResolvedQueries()}getBlurSize(vt=Zn.Low){switch(vt){case Zn.Low:return 5;case Zn.High:return 12}return vt}}class Fv{constructor(){ot(this,"selfieSegmentation",new Vl),ot(this,"backgroundFilter"),ot(this,"previousDimensions",{width:0,height:0})}async init(vt,Ct){await this.selfieSegmentation.init(Ct.wasmAssetUriPath,Ct.tfliteAssetUriPath);const{width:Xt,height:Yt}=this.selfieSegmentation.getOutputDimensions();this.backgroundFilter=new a4(vt,{foregroundWidth:1,foregroundHeight:1,maskWidth:Xt,maskHeight:Yt})}async transform(vt,Ct){var Xt,Yt,hn,In;const En=(Xt=vt.timestamp)!=null?Xt:0,kn=await createImageBitmap(vt),mr=await this.selfieSegmentation.process(kn);mr?((kn.width!==this.previousDimensions.width||kn.height!==this.previousDimensions.height)&&(this.previousDimensions.width=kn.width,this.previousDimensions.height=kn.height,await((Yt=this.backgroundFilter)==null?void 0:Yt.resizeForeground(kn.width,kn.height))),await((hn=this.backgroundFilter)==null?void 0:hn.process(kn,mr)),vt.close(),Ct.enqueue(new VideoFrame((In=this.backgroundFilter)==null?void 0:In.canvas,{timestamp:En,alpha:"discard"}))):Ct.enqueue(vt)}async setBackgroundOptions(vt){var Ct;await((Ct=this.backgroundFilter)==null?void 0:Ct.setBackgroundOptions(vt))}async setVideoBGReadable(vt){var Ct;await((Ct=this.backgroundFilter)==null?void 0:Ct.setVideoBGReadable(vt))}async setVirtualBGImage(vt){var Ct;await((Ct=this.backgroundFilter)==null?void 0:Ct.setVirtualBGImage(vt))}setFlickeringOptions(vt){var Ct;(Ct=this.backgroundFilter)==null||Ct.setFlickeringOptions(vt)}async profile(vt){var Ct,Xt;return(Xt=(Ct=this.backgroundFilter)==null?void 0:Ct.profile(vt))!=null?Xt:[]}}const Xv=class{constructor(){ot(this,"backgroundTransformer",new Fv),ot(this,"mediaProcessor",new Hu),ot(this,"rate",30),ot(this,"resolveOnMediaProcessor"),ot(this,"eventsQueue",[])}async init(bt,vt){await this.backgroundTransformer.init(bt,vt),await this.mediaProcessor.setTransformers([this.backgroundTransformer]),this.mediaProcessor.setTrackExpectedRate(this.rate),this.mediaProcessor.onAny((Ct,Xt)=>{this.resolveOnMediaProcessor?(this.resolveOnMediaProcessor({name:Ct,data:Xt}),this.resolveOnMediaProcessor=void 0):this.eventsQueue.push({name:Ct,data:Xt})})}async onMediaProcessorEvent(){return await new tt(bt=>{this.eventsQueue.length>0?bt(this.eventsQueue.shift()):this.resolveOnMediaProcessor=bt})}async setTrackExpectedRate(bt){this.rate=bt,this.mediaProcessor.setTrackExpectedRate(bt)}async transform(bt,vt){this.mediaProcessor.transform(bt,vt)}async setBackgroundOptions(bt){var vt;await((vt=this.backgroundTransformer)==null?void 0:vt.setBackgroundOptions(bt))}setVideoBGReadable(bt){this.backgroundTransformer.setVideoBGReadable(bt)}async setVirtualBGImage(bt){await this.backgroundTransformer.setVirtualBGImage(bt)}async terminate(){await this.mediaProcessor.destroy()}setFlickeringOptions(bt){this.backgroundTransformer.setFlickeringOptions(bt)}setVonageMetadata(bt){Wo(bt)}async profile(bt){return JSON.stringify(await this.backgroundTransformer.profile(bt))}};let c4=Xv;Cm("ProcessorWorker",Xv);const Dv="dmFyIGVkPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgdGQ9KEssdGUscmUpPT50ZSBpbiBLP2VkKEssdGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnJlfSk6S1t0ZV09cmU7dmFyIHA9KEssdGUscmUpPT4odGQoSyx0eXBlb2YgdGUhPSJzeW1ib2wiP3RlKyIiOnRlLHJlKSxyZSk7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBLPShyPT4ocltyLklOSVQ9MF09IklOSVQiLHJbci5GT1JXQVJEPTFdPSJGT1JXQVJEIixyW3IuVEVSTUlOQVRFPTJdPSJURVJNSU5BVEUiLHIpKShLfHx7fSk7ZnVuY3Rpb24gdGUocil7cmV0dXJuW0ltYWdlQml0bWFwLFJlYWRhYmxlU3RyZWFtLFdyaXRhYmxlU3RyZWFtXS5zb21lKGU9PnIgaW5zdGFuY2VvZiBlKX1mdW5jdGlvbiByZShyLGUpe2NvbnN0e2lkOnR9PXIsbj1BcnJheS5pc0FycmF5KGUpP2U6W2VdO3Bvc3RNZXNzYWdlKHtpZDp0LHJlc3VsdDplfSxuLmZpbHRlcihpPT50ZShpKSkpfWFzeW5jIGZ1bmN0aW9uIHFpKHIsZSl7Y29uc3R7ZnVuY3Rpb25OYW1lOnQsYXJnczpufT1yO2lmKCFlLmluc3RhbmNlKXRocm93Imluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7aWYoIXQpdGhyb3cibWlzc2luZyBmdW5jdGlvbiBuYW1lIHRvIGNhbGwiO2lmKCFlLmluc3RhbmNlW3RdKXRocm93YHVuZGVmaW5lZCBmdW5jdGlvbiBbJHt0fV0gaW4gY2xhc3MgJHtlLmluc3RhbmNlLmNvbnN0cnVjdG9yLndvcmtlcklkfWA7cmUocixhd2FpdCBlLmluc3RhbmNlW3RdKC4uLm4hPW51bGw/bjpbXSkpfWZ1bmN0aW9uICRyKCl7cmV0dXJuIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZTwidSImJnNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZX1jb25zdCBHcj17fTtmdW5jdGlvbiBYaShyLGUpe2Uud29ya2VySWQ9ciwkcigpJiYoR3JbZS53b3JrZXJJZF09ZSl9ZnVuY3Rpb24gWWkocixlKXtpZighci5hcmdzKXRocm93Ik1pc3NpbmcgY2xhc3NOYW1lIHdoaWxlIGluaXRpYWxpemluZyB3b3JrZXIiO2NvbnN0W3RdPXIuYXJncyxuPUdyW3RdO2lmKG4pZS5pbnN0YW5jZT1uZXcgbihyLmFyZ3Muc2xpY2UoMSkpO2Vsc2UgdGhyb3dgdW5rbm93biB3b3JrZXIgY2xhc3MgJHt0fWA7cmUocix0eXBlb2YgZS5pbnN0YW5jZSE9PXZvaWQgMCl9YXN5bmMgZnVuY3Rpb24gUWkocixlKXtjb25zdHthcmdzOnR9PXI7aWYoIWUuaW5zdGFuY2UpdGhyb3ciaW5zdGFuY2Ugbm90IGluaXRpYWxpemVkIjtsZXQgbjtlLmluc3RhbmNlLnRlcm1pbmF0ZSYmKG49YXdhaXQgZS5pbnN0YW5jZS50ZXJtaW5hdGUoLi4udCE9bnVsbD90OltdKSkscmUocixuKX1mdW5jdGlvbiBLaSgpe2NvbnN0IHI9e307b25tZXNzYWdlPWFzeW5jIGU9Pntjb25zdCB0PWUuZGF0YTtzd2l0Y2godC50eXBlKXtjYXNlIEsuSU5JVDpZaSh0LHIpO2JyZWFrO2Nhc2UgSy5GT1JXQVJEOnFpKHQscik7YnJlYWs7Y2FzZSBLLlRFUk1JTkFURTpRaSh0LHIpO2JyZWFrfX19JHIoKSYmS2koKTtjbGFzcyBuZXt9bmUudXBkYXRlcz17dHJhbnNmb3JtZXJfbmV3OiJOZXcgdHJhbnNmb3JtZXIiLHRyYW5zZm9ybWVyX251bGw6Ik51bGwgdHJhbnNmb3JtZXIifSxuZS5lcnJvcnM9e3RyYW5zZm9ybWVyX25vbmU6Ik5vIHRyYW5zZm9ybWVycyBwcm92aWRlZCIsdHJhbnNmb3JtZXJfc3RhcnQ6IkNhbm5vdCBzdGFydCB0cmFuc2Zvcm1lciIsdHJhbnNmb3JtZXJfdHJhbnNmb3JtOiJDYW5ub3QgdHJhbnNmb3JtIGZyYW1lIix0cmFuc2Zvcm1lcl9mbHVzaDoiQ2Fubm90IGZsdXNoIHRyYW5zZm9ybWVyIixyZWFkYWJsZV9udWxsOiJSZWFkYWJsZSBpcyBudWxsIix3cml0YWJsZV9udWxsOiJXcml0YWJsZSBpcyBudWxsIn07dmFyIE90PXtleHBvcnRzOnt9fSx6cj1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgaT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksbz0wO288aS5sZW5ndGg7bysrKWlbb109YXJndW1lbnRzW29dO3JldHVybiBlLmFwcGx5KHQsaSl9fSxKaT16cixvZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIE50KHIpe3JldHVybiBBcnJheS5pc0FycmF5KHIpfWZ1bmN0aW9uIFV0KHIpe3JldHVybiB0eXBlb2Ygcj4idSJ9ZnVuY3Rpb24gWmkocil7cmV0dXJuIHIhPT1udWxsJiYhVXQocikmJnIuY29uc3RydWN0b3IhPT1udWxsJiYhVXQoci5jb25zdHJ1Y3RvcikmJnR5cGVvZiByLmNvbnN0cnVjdG9yLmlzQnVmZmVyPT0iZnVuY3Rpb24iJiZyLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHIpfWZ1bmN0aW9uIEhyKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgQXJyYXlCdWZmZXJdIn1mdW5jdGlvbiBlbyhyKXtyZXR1cm4gb2UuY2FsbChyKT09PSJbb2JqZWN0IEZvcm1EYXRhXSJ9ZnVuY3Rpb24gdG8ocil7dmFyIGU7cmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlcjwidSImJkFycmF5QnVmZmVyLmlzVmlldz9lPUFycmF5QnVmZmVyLmlzVmlldyhyKTplPXImJnIuYnVmZmVyJiZIcihyLmJ1ZmZlciksZX1mdW5jdGlvbiBybyhyKXtyZXR1cm4gdHlwZW9mIHI9PSJzdHJpbmcifWZ1bmN0aW9uIG5vKHIpe3JldHVybiB0eXBlb2Ygcj09Im51bWJlciJ9ZnVuY3Rpb24gVnIocil7cmV0dXJuIHIhPT1udWxsJiZ0eXBlb2Ygcj09Im9iamVjdCJ9ZnVuY3Rpb24gamUocil7aWYob2UuY2FsbChyKSE9PSJbb2JqZWN0IE9iamVjdF0iKXJldHVybiExO3ZhciBlPU9iamVjdC5nZXRQcm90b3R5cGVPZihyKTtyZXR1cm4gZT09PW51bGx8fGU9PT1PYmplY3QucHJvdG90eXBlfWZ1bmN0aW9uIGlvKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRGF0ZV0ifWZ1bmN0aW9uIG9vKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRmlsZV0ifWZ1bmN0aW9uIHNvKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgQmxvYl0ifWZ1bmN0aW9uIFdyKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRnVuY3Rpb25dIn1mdW5jdGlvbiBhbyhyKXtyZXR1cm4gVnIocikmJldyKHIucGlwZSl9ZnVuY3Rpb24gdW8ocil7cmV0dXJuIG9lLmNhbGwocik9PT0iW29iamVjdCBVUkxTZWFyY2hQYXJhbXNdIn1mdW5jdGlvbiBjbyhyKXtyZXR1cm4gci50cmltP3IudHJpbSgpOnIucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfWZ1bmN0aW9uIGZvKCl7cmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3I8InUiJiYobmF2aWdhdG9yLnByb2R1Y3Q9PT0iUmVhY3ROYXRpdmUifHxuYXZpZ2F0b3IucHJvZHVjdD09PSJOYXRpdmVTY3JpcHQifHxuYXZpZ2F0b3IucHJvZHVjdD09PSJOUyIpPyExOnR5cGVvZiB3aW5kb3c8InUiJiZ0eXBlb2YgZG9jdW1lbnQ8InUifWZ1bmN0aW9uIEJ0KHIsZSl7aWYoIShyPT09bnVsbHx8dHlwZW9mIHI+InUiKSlpZih0eXBlb2YgciE9Im9iamVjdCImJihyPVtyXSksTnQocikpZm9yKHZhciB0PTAsbj1yLmxlbmd0aDt0PG47dCsrKWUuY2FsbChudWxsLHJbdF0sdCxyKTtlbHNlIGZvcih2YXIgaSBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLGkpJiZlLmNhbGwobnVsbCxyW2ldLGkscil9ZnVuY3Rpb24ga3QoKXt2YXIgcj17fTtmdW5jdGlvbiBlKGksbyl7amUocltvXSkmJmplKGkpP3Jbb109a3QocltvXSxpKTpqZShpKT9yW29dPWt0KHt9LGkpOk50KGkpP3Jbb109aS5zbGljZSgpOnJbb109aX1mb3IodmFyIHQ9MCxuPWFyZ3VtZW50cy5sZW5ndGg7dDxuO3QrKylCdChhcmd1bWVudHNbdF0sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gbG8ocixlLHQpe3JldHVybiBCdChlLGZ1bmN0aW9uKGksbyl7dCYmdHlwZW9mIGk9PSJmdW5jdGlvbiI/cltvXT1KaShpLHQpOnJbb109aX0pLHJ9ZnVuY3Rpb24gbW8ocil7cmV0dXJuIHIuY2hhckNvZGVBdCgwKT09PTY1Mjc5JiYocj1yLnNsaWNlKDEpKSxyfXZhciBHPXtpc0FycmF5Ok50LGlzQXJyYXlCdWZmZXI6SHIsaXNCdWZmZXI6WmksaXNGb3JtRGF0YTplbyxpc0FycmF5QnVmZmVyVmlldzp0byxpc1N0cmluZzpybyxpc051bWJlcjpubyxpc09iamVjdDpWcixpc1BsYWluT2JqZWN0OmplLGlzVW5kZWZpbmVkOlV0LGlzRGF0ZTppbyxpc0ZpbGU6b28saXNCbG9iOnNvLGlzRnVuY3Rpb246V3IsaXNTdHJlYW06YW8saXNVUkxTZWFyY2hQYXJhbXM6dW8saXNTdGFuZGFyZEJyb3dzZXJFbnY6Zm8sZm9yRWFjaDpCdCxtZXJnZTprdCxleHRlbmQ6bG8sdHJpbTpjbyxzdHJpcEJPTTptb30sRWU9RztmdW5jdGlvbiBqcihyKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHIpLnJlcGxhY2UoLyUzQS9naSwiOiIpLnJlcGxhY2UoLyUyNC9nLCIkIikucmVwbGFjZSgvJTJDL2dpLCIsIikucmVwbGFjZSgvJTIwL2csIisiKS5yZXBsYWNlKC8lNUIvZ2ksIlsiKS5yZXBsYWNlKC8lNUQvZ2ksIl0iKX12YXIgcXI9ZnVuY3Rpb24oZSx0LG4pe2lmKCF0KXJldHVybiBlO3ZhciBpO2lmKG4paT1uKHQpO2Vsc2UgaWYoRWUuaXNVUkxTZWFyY2hQYXJhbXModCkpaT10LnRvU3RyaW5nKCk7ZWxzZXt2YXIgbz1bXTtFZS5mb3JFYWNoKHQsZnVuY3Rpb24odSxmKXt1PT09bnVsbHx8dHlwZW9mIHU+InUifHwoRWUuaXNBcnJheSh1KT9mPWYrIltdIjp1PVt1XSxFZS5mb3JFYWNoKHUsZnVuY3Rpb24oZCl7RWUuaXNEYXRlKGQpP2Q9ZC50b0lTT1N0cmluZygpOkVlLmlzT2JqZWN0KGQpJiYoZD1KU09OLnN0cmluZ2lmeShkKSksby5wdXNoKGpyKGYpKyI9IitqcihkKSl9KSl9KSxpPW8uam9pbigiJiIpfWlmKGkpe3ZhciBzPWUuaW5kZXhPZigiIyIpO3MhPT0tMSYmKGU9ZS5zbGljZSgwLHMpKSxlKz0oZS5pbmRleE9mKCI/Iik9PT0tMT8iPyI6IiYiKStpfXJldHVybiBlfSxobz1HO2Z1bmN0aW9uIHFlKCl7dGhpcy5oYW5kbGVycz1bXX1xZS5wcm90b3R5cGUudXNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5oYW5kbGVycy5wdXNoKHtmdWxmaWxsZWQ6ZSxyZWplY3RlZDp0LHN5bmNocm9ub3VzOm4/bi5zeW5jaHJvbm91czohMSxydW5XaGVuOm4/bi5ydW5XaGVuOm51bGx9KSx0aGlzLmhhbmRsZXJzLmxlbmd0aC0xfSxxZS5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVyc1tlXSYmKHRoaXMuaGFuZGxlcnNbZV09bnVsbCl9LHFlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGUpe2hvLmZvckVhY2godGhpcy5oYW5kbGVycyxmdW5jdGlvbihuKXtuIT09bnVsbCYmZShuKX0pfTt2YXIgcG89cWUseW89Ryxfbz1mdW5jdGlvbihlLHQpe3lvLmZvckVhY2goZSxmdW5jdGlvbihpLG8pe28hPT10JiZvLnRvVXBwZXJDYXNlKCk9PT10LnRvVXBwZXJDYXNlKCkmJihlW3RdPWksZGVsZXRlIGVbb10pfSl9LFhyPWZ1bmN0aW9uKGUsdCxuLGksbyl7cmV0dXJuIGUuY29uZmlnPXQsbiYmKGUuY29kZT1uKSxlLnJlcXVlc3Q9aSxlLnJlc3BvbnNlPW8sZS5pc0F4aW9zRXJyb3I9ITAsZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57bWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixudW1iZXI6dGhpcy5udW1iZXIsZmlsZU5hbWU6dGhpcy5maWxlTmFtZSxsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW5OdW1iZXI6dGhpcy5jb2x1bW5OdW1iZXIsc3RhY2s6dGhpcy5zdGFjayxjb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGUsc3RhdHVzOnRoaXMucmVzcG9uc2UmJnRoaXMucmVzcG9uc2Uuc3RhdHVzP3RoaXMucmVzcG9uc2Uuc3RhdHVzOm51bGx9fSxlfSx4bz1YcixZcj1mdW5jdGlvbihlLHQsbixpLG8pe3ZhciBzPW5ldyBFcnJvcihlKTtyZXR1cm4geG8ocyx0LG4saSxvKX0sZ289WXIsYm89ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4uY29uZmlnLnZhbGlkYXRlU3RhdHVzOyFuLnN0YXR1c3x8IWl8fGkobi5zdGF0dXMpP2Uobik6dChnbygiUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAiK24uc3RhdHVzLG4uY29uZmlnLG51bGwsbi5yZXF1ZXN0LG4pKX0sWGU9Ryx2bz1YZS5pc1N0YW5kYXJkQnJvd3NlckVudigpP2Z1bmN0aW9uKCl7cmV0dXJue3dyaXRlOmZ1bmN0aW9uKHQsbixpLG8scyxhKXt2YXIgdT1bXTt1LnB1c2godCsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG4pKSxYZS5pc051bWJlcihpKSYmdS5wdXNoKCJleHBpcmVzPSIrbmV3IERhdGUoaSkudG9HTVRTdHJpbmcoKSksWGUuaXNTdHJpbmcobykmJnUucHVzaCgicGF0aD0iK28pLFhlLmlzU3RyaW5nKHMpJiZ1LnB1c2goImRvbWFpbj0iK3MpLGE9PT0hMCYmdS5wdXNoKCJzZWN1cmUiKSxkb2N1bWVudC5jb29raWU9dS5qb2luKCI7ICIpfSxyZWFkOmZ1bmN0aW9uKHQpe3ZhciBuPWRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCIoXnw7XFxzKikoIit0KyIpPShbXjtdKikiKSk7cmV0dXJuIG4/ZGVjb2RlVVJJQ29tcG9uZW50KG5bM10pOm51bGx9LHJlbW92ZTpmdW5jdGlvbih0KXt0aGlzLndyaXRlKHQsIiIsRGF0ZS5ub3coKS04NjRlNSl9fX0oKTpmdW5jdGlvbigpe3JldHVybnt3cml0ZTpmdW5jdGlvbigpe30scmVhZDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxyZW1vdmU6ZnVuY3Rpb24oKXt9fX0oKSxFbz1mdW5jdGlvbihlKXtyZXR1cm4vXihbYS16XVthLXpcZCtcLS5dKjopP1wvXC8vaS50ZXN0KGUpfSxUbz1mdW5jdGlvbihlLHQpe3JldHVybiB0P2UucmVwbGFjZSgvXC8rJC8sIiIpKyIvIit0LnJlcGxhY2UoL15cLysvLCIiKTplfSxBbz1Fbyx3bz1UbyxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiYhQW8odCk/d28oZSx0KTp0fSxMdD1HLFNvPVsiYWdlIiwiYXV0aG9yaXphdGlvbiIsImNvbnRlbnQtbGVuZ3RoIiwiY29udGVudC10eXBlIiwiZXRhZyIsImV4cGlyZXMiLCJmcm9tIiwiaG9zdCIsImlmLW1vZGlmaWVkLXNpbmNlIiwiaWYtdW5tb2RpZmllZC1zaW5jZSIsImxhc3QtbW9kaWZpZWQiLCJsb2NhdGlvbiIsIm1heC1mb3J3YXJkcyIsInByb3h5LWF1dGhvcml6YXRpb24iLCJyZWZlcmVyIiwicmV0cnktYWZ0ZXIiLCJ1c2VyLWFnZW50Il0sSW89ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbixpLG87cmV0dXJuIGUmJkx0LmZvckVhY2goZS5zcGxpdChgCmApLGZ1bmN0aW9uKGEpe2lmKG89YS5pbmRleE9mKCI6Iiksbj1MdC50cmltKGEuc3Vic3RyKDAsbykpLnRvTG93ZXJDYXNlKCksaT1MdC50cmltKGEuc3Vic3RyKG8rMSkpLG4pe2lmKHRbbl0mJlNvLmluZGV4T2Yobik+PTApcmV0dXJuO249PT0ic2V0LWNvb2tpZSI/dFtuXT0odFtuXT90W25dOltdKS5jb25jYXQoW2ldKTp0W25dPXRbbl0/dFtuXSsiLCAiK2k6aX19KSx0fSxRcj1HLEZvPVFyLmlzU3RhbmRhcmRCcm93c2VyRW52KCk/ZnVuY3Rpb24oKXt2YXIgZT0vKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLG47ZnVuY3Rpb24gaShvKXt2YXIgcz1vO3JldHVybiBlJiYodC5zZXRBdHRyaWJ1dGUoImhyZWYiLHMpLHM9dC5ocmVmKSx0LnNldEF0dHJpYnV0ZSgiaHJlZiIscykse2hyZWY6dC5ocmVmLHByb3RvY29sOnQucHJvdG9jb2w/dC5wcm90b2NvbC5yZXBsYWNlKC86JC8sIiIpOiIiLGhvc3Q6dC5ob3N0LHNlYXJjaDp0LnNlYXJjaD90LnNlYXJjaC5yZXBsYWNlKC9eXD8vLCIiKToiIixoYXNoOnQuaGFzaD90Lmhhc2gucmVwbGFjZSgvXiMvLCIiKToiIixob3N0bmFtZTp0Lmhvc3RuYW1lLHBvcnQ6dC5wb3J0LHBhdGhuYW1lOnQucGF0aG5hbWUuY2hhckF0KDApPT09Ii8iP3QucGF0aG5hbWU6Ii8iK3QucGF0aG5hbWV9fXJldHVybiBuPWkod2luZG93LmxvY2F0aW9uLmhyZWYpLGZ1bmN0aW9uKHMpe3ZhciBhPVFyLmlzU3RyaW5nKHMpP2kocyk6cztyZXR1cm4gYS5wcm90b2NvbD09PW4ucHJvdG9jb2wmJmEuaG9zdD09PW4uaG9zdH19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hMH19KCk7ZnVuY3Rpb24gJHQocil7dGhpcy5tZXNzYWdlPXJ9JHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkNhbmNlbCIrKHRoaXMubWVzc2FnZT8iOiAiK3RoaXMubWVzc2FnZToiIil9LCR0LnByb3RvdHlwZS5fX0NBTkNFTF9fPSEwO3ZhciBZZT0kdCxRZT1HLFBvPWJvLERvPXZvLE1vPXFyLENvPVJvLE9vPUlvLE5vPUZvLEd0PVlyLFVvPUplLEJvPVllLEtyPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGkpe3ZhciBvPWUuZGF0YSxzPWUuaGVhZGVycyxhPWUucmVzcG9uc2VUeXBlLHU7ZnVuY3Rpb24gZigpe2UuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUodSksZS5zaWduYWwmJmUuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0Iix1KX1RZS5pc0Zvcm1EYXRhKG8pJiZkZWxldGUgc1siQ29udGVudC1UeXBlIl07dmFyIGM9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKGUuYXV0aCl7dmFyIGQ9ZS5hdXRoLnVzZXJuYW1lfHwiIix5PWUuYXV0aC5wYXNzd29yZD91bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZS5hdXRoLnBhc3N3b3JkKSk6IiI7cy5BdXRob3JpemF0aW9uPSJCYXNpYyAiK2J0b2EoZCsiOiIreSl9dmFyIF89Q28oZS5iYXNlVVJMLGUudXJsKTtjLm9wZW4oZS5tZXRob2QudG9VcHBlckNhc2UoKSxNbyhfLGUucGFyYW1zLGUucGFyYW1zU2VyaWFsaXplciksITApLGMudGltZW91dD1lLnRpbWVvdXQ7ZnVuY3Rpb24gbSgpe2lmKCEhYyl7dmFyIHY9ImdldEFsbFJlc3BvbnNlSGVhZGVycyJpbiBjP09vKGMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpOm51bGwsYj0hYXx8YT09PSJ0ZXh0Inx8YT09PSJqc29uIj9jLnJlc3BvbnNlVGV4dDpjLnJlc3BvbnNlLEE9e2RhdGE6YixzdGF0dXM6Yy5zdGF0dXMsc3RhdHVzVGV4dDpjLnN0YXR1c1RleHQsaGVhZGVyczp2LGNvbmZpZzplLHJlcXVlc3Q6Y307UG8oZnVuY3Rpb24oQyl7bihDKSxmKCl9LGZ1bmN0aW9uKEMpe2koQyksZigpfSxBKSxjPW51bGx9fWlmKCJvbmxvYWRlbmQiaW4gYz9jLm9ubG9hZGVuZD1tOmMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7IWN8fGMucmVhZHlTdGF0ZSE9PTR8fGMuc3RhdHVzPT09MCYmIShjLnJlc3BvbnNlVVJMJiZjLnJlc3BvbnNlVVJMLmluZGV4T2YoImZpbGU6Iik9PT0wKXx8c2V0VGltZW91dChtKX0sYy5vbmFib3J0PWZ1bmN0aW9uKCl7IWN8fChpKEd0KCJSZXF1ZXN0IGFib3J0ZWQiLGUsIkVDT05OQUJPUlRFRCIsYykpLGM9bnVsbCl9LGMub25lcnJvcj1mdW5jdGlvbigpe2koR3QoIk5ldHdvcmsgRXJyb3IiLGUsbnVsbCxjKSksYz1udWxsfSxjLm9udGltZW91dD1mdW5jdGlvbigpe3ZhciBiPWUudGltZW91dD8idGltZW91dCBvZiAiK2UudGltZW91dCsibXMgZXhjZWVkZWQiOiJ0aW1lb3V0IGV4Y2VlZGVkIixBPWUudHJhbnNpdGlvbmFsfHxVby50cmFuc2l0aW9uYWw7ZS50aW1lb3V0RXJyb3JNZXNzYWdlJiYoYj1lLnRpbWVvdXRFcnJvck1lc3NhZ2UpLGkoR3QoYixlLEEuY2xhcmlmeVRpbWVvdXRFcnJvcj8iRVRJTUVET1VUIjoiRUNPTk5BQk9SVEVEIixjKSksYz1udWxsfSxRZS5pc1N0YW5kYXJkQnJvd3NlckVudigpKXt2YXIgeD0oZS53aXRoQ3JlZGVudGlhbHN8fE5vKF8pKSYmZS54c3JmQ29va2llTmFtZT9Eby5yZWFkKGUueHNyZkNvb2tpZU5hbWUpOnZvaWQgMDt4JiYoc1tlLnhzcmZIZWFkZXJOYW1lXT14KX0ic2V0UmVxdWVzdEhlYWRlciJpbiBjJiZRZS5mb3JFYWNoKHMsZnVuY3Rpb24oYixBKXt0eXBlb2Ygbz4idSImJkEudG9Mb3dlckNhc2UoKT09PSJjb250ZW50LXR5cGUiP2RlbGV0ZSBzW0FdOmMuc2V0UmVxdWVzdEhlYWRlcihBLGIpfSksUWUuaXNVbmRlZmluZWQoZS53aXRoQ3JlZGVudGlhbHMpfHwoYy53aXRoQ3JlZGVudGlhbHM9ISFlLndpdGhDcmVkZW50aWFscyksYSYmYSE9PSJqc29uIiYmKGMucmVzcG9uc2VUeXBlPWUucmVzcG9uc2VUeXBlKSx0eXBlb2YgZS5vbkRvd25sb2FkUHJvZ3Jlc3M9PSJmdW5jdGlvbiImJmMuYWRkRXZlbnRMaXN0ZW5lcigicHJvZ3Jlc3MiLGUub25Eb3dubG9hZFByb2dyZXNzKSx0eXBlb2YgZS5vblVwbG9hZFByb2dyZXNzPT0iZnVuY3Rpb24iJiZjLnVwbG9hZCYmYy51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigicHJvZ3Jlc3MiLGUub25VcGxvYWRQcm9ncmVzcyksKGUuY2FuY2VsVG9rZW58fGUuc2lnbmFsKSYmKHU9ZnVuY3Rpb24odil7IWN8fChpKCF2fHx2JiZ2LnR5cGU/bmV3IEJvKCJjYW5jZWxlZCIpOnYpLGMuYWJvcnQoKSxjPW51bGwpfSxlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnN1YnNjcmliZSh1KSxlLnNpZ25hbCYmKGUuc2lnbmFsLmFib3J0ZWQ/dSgpOmUuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0Iix1KSkpLG98fChvPW51bGwpLGMuc2VuZChvKX0pfSxPPUcsSnI9X28sa289WHIsTG89eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifTtmdW5jdGlvbiBacihyLGUpeyFPLmlzVW5kZWZpbmVkKHIpJiZPLmlzVW5kZWZpbmVkKHJbIkNvbnRlbnQtVHlwZSJdKSYmKHJbIkNvbnRlbnQtVHlwZSJdPWUpfWZ1bmN0aW9uICRvKCl7dmFyIHI7cmV0dXJuKHR5cGVvZiBYTUxIdHRwUmVxdWVzdDwidSJ8fHR5cGVvZiBwcm9jZXNzPCJ1IiYmT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpPT09IltvYmplY3QgcHJvY2Vzc10iKSYmKHI9S3IpLHJ9ZnVuY3Rpb24gR28ocixlLHQpe2lmKE8uaXNTdHJpbmcocikpdHJ5e3JldHVybihlfHxKU09OLnBhcnNlKShyKSxPLnRyaW0ocil9Y2F0Y2gobil7aWYobi5uYW1lIT09IlN5bnRheEVycm9yIil0aHJvdyBufXJldHVybih0fHxKU09OLnN0cmluZ2lmeSkocil9dmFyIEtlPXt0cmFuc2l0aW9uYWw6e3NpbGVudEpTT05QYXJzaW5nOiEwLGZvcmNlZEpTT05QYXJzaW5nOiEwLGNsYXJpZnlUaW1lb3V0RXJyb3I6ITF9LGFkYXB0ZXI6JG8oKSx0cmFuc2Zvcm1SZXF1ZXN0OltmdW5jdGlvbihlLHQpe3JldHVybiBKcih0LCJBY2NlcHQiKSxKcih0LCJDb250ZW50LVR5cGUiKSxPLmlzRm9ybURhdGEoZSl8fE8uaXNBcnJheUJ1ZmZlcihlKXx8Ty5pc0J1ZmZlcihlKXx8Ty5pc1N0cmVhbShlKXx8Ty5pc0ZpbGUoZSl8fE8uaXNCbG9iKGUpP2U6Ty5pc0FycmF5QnVmZmVyVmlldyhlKT9lLmJ1ZmZlcjpPLmlzVVJMU2VhcmNoUGFyYW1zKGUpPyhacih0LCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCIpLGUudG9TdHJpbmcoKSk6Ty5pc09iamVjdChlKXx8dCYmdFsiQ29udGVudC1UeXBlIl09PT0iYXBwbGljYXRpb24vanNvbiI/KFpyKHQsImFwcGxpY2F0aW9uL2pzb24iKSxHbyhlKSk6ZX1dLHRyYW5zZm9ybVJlc3BvbnNlOltmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyYW5zaXRpb25hbHx8S2UudHJhbnNpdGlvbmFsLG49dCYmdC5zaWxlbnRKU09OUGFyc2luZyxpPXQmJnQuZm9yY2VkSlNPTlBhcnNpbmcsbz0hbiYmdGhpcy5yZXNwb25zZVR5cGU9PT0ianNvbiI7aWYob3x8aSYmTy5pc1N0cmluZyhlKSYmZS5sZW5ndGgpdHJ5e3JldHVybiBKU09OLnBhcnNlKGUpfWNhdGNoKHMpe2lmKG8pdGhyb3cgcy5uYW1lPT09IlN5bnRheEVycm9yIj9rbyhzLHRoaXMsIkVfSlNPTl9QQVJTRSIpOnN9cmV0dXJuIGV9XSx0aW1lb3V0OjAseHNyZkNvb2tpZU5hbWU6IlhTUkYtVE9LRU4iLHhzcmZIZWFkZXJOYW1lOiJYLVhTUkYtVE9LRU4iLG1heENvbnRlbnRMZW5ndGg6LTEsbWF4Qm9keUxlbmd0aDotMSx2YWxpZGF0ZVN0YXR1czpmdW5jdGlvbihlKXtyZXR1cm4gZT49MjAwJiZlPDMwMH0saGVhZGVyczp7Y29tbW9uOntBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKiJ9fX07Ty5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCJdLGZ1bmN0aW9uKGUpe0tlLmhlYWRlcnNbZV09e319KSxPLmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSxmdW5jdGlvbihlKXtLZS5oZWFkZXJzW2VdPU8ubWVyZ2UoTG8pfSk7dmFyIEplPUtlLHpvPUcsSG89SmUsVm89ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXN8fEhvO3JldHVybiB6by5mb3JFYWNoKG4sZnVuY3Rpb24ocyl7ZT1zLmNhbGwoaSxlLHQpfSksZX0sZW49ZnVuY3Rpb24oZSl7cmV0dXJuISEoZSYmZS5fX0NBTkNFTF9fKX0sdG49Ryx6dD1WbyxXbz1lbixqbz1KZSxxbz1ZZTtmdW5jdGlvbiBIdChyKXtpZihyLmNhbmNlbFRva2VuJiZyLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKSxyLnNpZ25hbCYmci5zaWduYWwuYWJvcnRlZCl0aHJvdyBuZXcgcW8oImNhbmNlbGVkIil9dmFyIFhvPWZ1bmN0aW9uKGUpe0h0KGUpLGUuaGVhZGVycz1lLmhlYWRlcnN8fHt9LGUuZGF0YT16dC5jYWxsKGUsZS5kYXRhLGUuaGVhZGVycyxlLnRyYW5zZm9ybVJlcXVlc3QpLGUuaGVhZGVycz10bi5tZXJnZShlLmhlYWRlcnMuY29tbW9ufHx7fSxlLmhlYWRlcnNbZS5tZXRob2RdfHx7fSxlLmhlYWRlcnMpLHRuLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwicG9zdCIsInB1dCIsInBhdGNoIiwiY29tbW9uIl0sZnVuY3Rpb24oaSl7ZGVsZXRlIGUuaGVhZGVyc1tpXX0pO3ZhciB0PWUuYWRhcHRlcnx8am8uYWRhcHRlcjtyZXR1cm4gdChlKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBIdChlKSxpLmRhdGE9enQuY2FsbChlLGkuZGF0YSxpLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXNwb25zZSksaX0sZnVuY3Rpb24oaSl7cmV0dXJuIFdvKGkpfHwoSHQoZSksaSYmaS5yZXNwb25zZSYmKGkucmVzcG9uc2UuZGF0YT16dC5jYWxsKGUsaS5yZXNwb25zZS5kYXRhLGkucmVzcG9uc2UuaGVhZGVycyxlLnRyYW5zZm9ybVJlc3BvbnNlKSkpLFByb21pc2UucmVqZWN0KGkpfSl9LHo9Ryxybj1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49e307ZnVuY3Rpb24gaShjLGQpe3JldHVybiB6LmlzUGxhaW5PYmplY3QoYykmJnouaXNQbGFpbk9iamVjdChkKT96Lm1lcmdlKGMsZCk6ei5pc1BsYWluT2JqZWN0KGQpP3oubWVyZ2Uoe30sZCk6ei5pc0FycmF5KGQpP2Quc2xpY2UoKTpkfWZ1bmN0aW9uIG8oYyl7aWYoei5pc1VuZGVmaW5lZCh0W2NdKSl7aWYoIXouaXNVbmRlZmluZWQoZVtjXSkpcmV0dXJuIGkodm9pZCAwLGVbY10pfWVsc2UgcmV0dXJuIGkoZVtjXSx0W2NdKX1mdW5jdGlvbiBzKGMpe2lmKCF6LmlzVW5kZWZpbmVkKHRbY10pKXJldHVybiBpKHZvaWQgMCx0W2NdKX1mdW5jdGlvbiBhKGMpe2lmKHouaXNVbmRlZmluZWQodFtjXSkpe2lmKCF6LmlzVW5kZWZpbmVkKGVbY10pKXJldHVybiBpKHZvaWQgMCxlW2NdKX1lbHNlIHJldHVybiBpKHZvaWQgMCx0W2NdKX1mdW5jdGlvbiB1KGMpe2lmKGMgaW4gdClyZXR1cm4gaShlW2NdLHRbY10pO2lmKGMgaW4gZSlyZXR1cm4gaSh2b2lkIDAsZVtjXSl9dmFyIGY9e3VybDpzLG1ldGhvZDpzLGRhdGE6cyxiYXNlVVJMOmEsdHJhbnNmb3JtUmVxdWVzdDphLHRyYW5zZm9ybVJlc3BvbnNlOmEscGFyYW1zU2VyaWFsaXplcjphLHRpbWVvdXQ6YSx0aW1lb3V0TWVzc2FnZTphLHdpdGhDcmVkZW50aWFsczphLGFkYXB0ZXI6YSxyZXNwb25zZVR5cGU6YSx4c3JmQ29va2llTmFtZTphLHhzcmZIZWFkZXJOYW1lOmEsb25VcGxvYWRQcm9ncmVzczphLG9uRG93bmxvYWRQcm9ncmVzczphLGRlY29tcHJlc3M6YSxtYXhDb250ZW50TGVuZ3RoOmEsbWF4Qm9keUxlbmd0aDphLHRyYW5zcG9ydDphLGh0dHBBZ2VudDphLGh0dHBzQWdlbnQ6YSxjYW5jZWxUb2tlbjphLHNvY2tldFBhdGg6YSxyZXNwb25zZUVuY29kaW5nOmEsdmFsaWRhdGVTdGF0dXM6dX07cmV0dXJuIHouZm9yRWFjaChPYmplY3Qua2V5cyhlKS5jb25jYXQoT2JqZWN0LmtleXModCkpLGZ1bmN0aW9uKGQpe3ZhciB5PWZbZF18fG8sXz15KGQpO3ouaXNVbmRlZmluZWQoXykmJnkhPT11fHwobltkXT1fKX0pLG59LG5uPXt2ZXJzaW9uOiIwLjI1LjAifSxZbz1ubi52ZXJzaW9uLFZ0PXt9O1sib2JqZWN0IiwiYm9vbGVhbiIsIm51bWJlciIsImZ1bmN0aW9uIiwic3RyaW5nIiwic3ltYm9sIl0uZm9yRWFjaChmdW5jdGlvbihyLGUpe1Z0W3JdPWZ1bmN0aW9uKG4pe3JldHVybiB0eXBlb2Ygbj09PXJ8fCJhIisoZTwxPyJuICI6IiAiKStyfX0pO3ZhciBvbj17fTtWdC50cmFuc2l0aW9uYWw9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkobyxzKXtyZXR1cm4iW0F4aW9zIHYiK1lvKyJdIFRyYW5zaXRpb25hbCBvcHRpb24gJyIrbysiJyIrcysobj8iLiAiK246IiIpfXJldHVybiBmdW5jdGlvbihvLHMsYSl7aWYoZT09PSExKXRocm93IG5ldyBFcnJvcihpKHMsIiBoYXMgYmVlbiByZW1vdmVkIisodD8iIGluICIrdDoiIikpKTtyZXR1cm4gdCYmIW9uW3NdJiYob25bc109ITAsY29uc29sZS53YXJuKGkocywiIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdiIrdCsiIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlIikpKSxlP2UobyxzLGEpOiEwfX07ZnVuY3Rpb24gUW8ocixlLHQpe2lmKHR5cGVvZiByIT0ib2JqZWN0Iil0aHJvdyBuZXcgVHlwZUVycm9yKCJvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0Iik7Zm9yKHZhciBuPU9iamVjdC5rZXlzKHIpLGk9bi5sZW5ndGg7aS0tID4wOyl7dmFyIG89bltpXSxzPWVbb107aWYocyl7dmFyIGE9cltvXSx1PWE9PT12b2lkIDB8fHMoYSxvLHIpO2lmKHUhPT0hMCl0aHJvdyBuZXcgVHlwZUVycm9yKCJvcHRpb24gIitvKyIgbXVzdCBiZSAiK3UpO2NvbnRpbnVlfWlmKHQhPT0hMCl0aHJvdyBFcnJvcigiVW5rbm93biBvcHRpb24gIitvKX19dmFyIEtvPXthc3NlcnRPcHRpb25zOlFvLHZhbGlkYXRvcnM6VnR9LHNuPUcsSm89cXIsYW49cG8sdW49WG8sWmU9cm4sY249S28sVGU9Y24udmFsaWRhdG9ycztmdW5jdGlvbiBNZShyKXt0aGlzLmRlZmF1bHRzPXIsdGhpcy5pbnRlcmNlcHRvcnM9e3JlcXVlc3Q6bmV3IGFuLHJlc3BvbnNlOm5ldyBhbn19TWUucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgZT09InN0cmluZyI/KHQ9dHx8e30sdC51cmw9ZSk6dD1lfHx7fSwhdC51cmwpdGhyb3cgbmV3IEVycm9yKCJQcm92aWRlZCBjb25maWcgdXJsIGlzIG5vdCB2YWxpZCIpO3Q9WmUodGhpcy5kZWZhdWx0cyx0KSx0Lm1ldGhvZD90Lm1ldGhvZD10Lm1ldGhvZC50b0xvd2VyQ2FzZSgpOnRoaXMuZGVmYXVsdHMubWV0aG9kP3QubWV0aG9kPXRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk6dC5tZXRob2Q9ImdldCI7dmFyIG49dC50cmFuc2l0aW9uYWw7biE9PXZvaWQgMCYmY24uYXNzZXJ0T3B0aW9ucyhuLHtzaWxlbnRKU09OUGFyc2luZzpUZS50cmFuc2l0aW9uYWwoVGUuYm9vbGVhbiksZm9yY2VkSlNPTlBhcnNpbmc6VGUudHJhbnNpdGlvbmFsKFRlLmJvb2xlYW4pLGNsYXJpZnlUaW1lb3V0RXJyb3I6VGUudHJhbnNpdGlvbmFsKFRlLmJvb2xlYW4pfSwhMSk7dmFyIGk9W10sbz0hMDt0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24oXyl7dHlwZW9mIF8ucnVuV2hlbj09ImZ1bmN0aW9uIiYmXy5ydW5XaGVuKHQpPT09ITF8fChvPW8mJl8uc3luY2hyb25vdXMsaS51bnNoaWZ0KF8uZnVsZmlsbGVkLF8ucmVqZWN0ZWQpKX0pO3ZhciBzPVtdO3RoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24oXyl7cy5wdXNoKF8uZnVsZmlsbGVkLF8ucmVqZWN0ZWQpfSk7dmFyIGE7aWYoIW8pe3ZhciB1PVt1bix2b2lkIDBdO2ZvcihBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseSh1LGkpLHU9dS5jb25jYXQocyksYT1Qcm9taXNlLnJlc29sdmUodCk7dS5sZW5ndGg7KWE9YS50aGVuKHUuc2hpZnQoKSx1LnNoaWZ0KCkpO3JldHVybiBhfWZvcih2YXIgZj10O2kubGVuZ3RoOyl7dmFyIGM9aS5zaGlmdCgpLGQ9aS5zaGlmdCgpO3RyeXtmPWMoZil9Y2F0Y2goeSl7ZCh5KTticmVha319dHJ5e2E9dW4oZil9Y2F0Y2goeSl7cmV0dXJuIFByb21pc2UucmVqZWN0KHkpfWZvcig7cy5sZW5ndGg7KWE9YS50aGVuKHMuc2hpZnQoKSxzLnNoaWZ0KCkpO3JldHVybiBhfSxNZS5wcm90b3R5cGUuZ2V0VXJpPWZ1bmN0aW9uKGUpe2lmKCFlLnVybCl0aHJvdyBuZXcgRXJyb3IoIlByb3ZpZGVkIGNvbmZpZyB1cmwgaXMgbm90IHZhbGlkIik7cmV0dXJuIGU9WmUodGhpcy5kZWZhdWx0cyxlKSxKbyhlLnVybCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cPy8sIiIpfSxzbi5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsIm9wdGlvbnMiXSxmdW5jdGlvbihlKXtNZS5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KFplKG58fHt9LHttZXRob2Q6ZSx1cmw6dCxkYXRhOihufHx7fSkuZGF0YX0pKX19KSxzbi5mb3JFYWNoKFsicG9zdCIsInB1dCIsInBhdGNoIl0sZnVuY3Rpb24oZSl7TWUucHJvdG90eXBlW2VdPWZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KFplKGl8fHt9LHttZXRob2Q6ZSx1cmw6dCxkYXRhOm59KSl9fSk7dmFyIFpvPU1lLGVzPVllO2Z1bmN0aW9uIEFlKHIpe2lmKHR5cGVvZiByIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImV4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4iKTt2YXIgZTt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24oaSl7ZT1pfSk7dmFyIHQ9dGhpczt0aGlzLnByb21pc2UudGhlbihmdW5jdGlvbihuKXtpZighIXQuX2xpc3RlbmVycyl7dmFyIGksbz10Ll9saXN0ZW5lcnMubGVuZ3RoO2ZvcihpPTA7aTxvO2krKyl0Ll9saXN0ZW5lcnNbaV0obik7dC5fbGlzdGVuZXJzPW51bGx9fSksdGhpcy5wcm9taXNlLnRoZW49ZnVuY3Rpb24obil7dmFyIGksbz1uZXcgUHJvbWlzZShmdW5jdGlvbihzKXt0LnN1YnNjcmliZShzKSxpPXN9KS50aGVuKG4pO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe3QudW5zdWJzY3JpYmUoaSl9LG99LHIoZnVuY3Rpb24oaSl7dC5yZWFzb258fCh0LnJlYXNvbj1uZXcgZXMoaSksZSh0LnJlYXNvbikpfSl9QWUucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLnJlYXNvbil0aHJvdyB0aGlzLnJlYXNvbn0sQWUucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZih0aGlzLnJlYXNvbil7ZSh0aGlzLnJlYXNvbik7cmV0dXJufXRoaXMuX2xpc3RlbmVycz90aGlzLl9saXN0ZW5lcnMucHVzaChlKTp0aGlzLl9saXN0ZW5lcnM9W2VdfSxBZS5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7aWYoISF0aGlzLl9saXN0ZW5lcnMpe3ZhciB0PXRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGUpO3QhPT0tMSYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZSh0LDEpfX0sQWUuc291cmNlPWZ1bmN0aW9uKCl7dmFyIGUsdD1uZXcgQWUoZnVuY3Rpb24oaSl7ZT1pfSk7cmV0dXJue3Rva2VuOnQsY2FuY2VsOmV9fTt2YXIgdHM9QWUscnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBlLmFwcGx5KG51bGwsbil9fSxucz1HLGlzPWZ1bmN0aW9uKGUpe3JldHVybiBucy5pc09iamVjdChlKSYmZS5pc0F4aW9zRXJyb3I9PT0hMH0sZm49Ryxvcz16cixldD1abyxzcz1ybixhcz1KZTtmdW5jdGlvbiBsbihyKXt2YXIgZT1uZXcgZXQociksdD1vcyhldC5wcm90b3R5cGUucmVxdWVzdCxlKTtyZXR1cm4gZm4uZXh0ZW5kKHQsZXQucHJvdG90eXBlLGUpLGZuLmV4dGVuZCh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKGkpe3JldHVybiBsbihzcyhyLGkpKX0sdH12YXIgSj1sbihhcyk7Si5BeGlvcz1ldCxKLkNhbmNlbD1ZZSxKLkNhbmNlbFRva2VuPXRzLEouaXNDYW5jZWw9ZW4sSi5WRVJTSU9OPW5uLnZlcnNpb24sSi5hbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UuYWxsKGUpfSxKLnNwcmVhZD1ycyxKLmlzQXhpb3NFcnJvcj1pcyxPdC5leHBvcnRzPUosT3QuZXhwb3J0cy5kZWZhdWx0PUo7dmFyIHVzPU90LmV4cG9ydHM7Y2xhc3MgVHtpc0VtcHR5KCl7cmV0dXJuIXRoaXMuaXNQcmVzZW50KCl9c3RhdGljIG9mKGUpe2lmKGUhPW51bGwpcmV0dXJuIG5ldyBkbihlKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgcGFzc2VkIHZhbHVlIHdhcyBudWxsIG9yIHVuZGVmaW5lZC4iKX1zdGF0aWMgb2ZOb25OdWxsKGUpe3JldHVybiBULm9mKGUpfXN0YXRpYyBvZk51bGxhYmxlKGUpe3JldHVybiBlIT1udWxsP25ldyBkbihlKTpuZXcgbW59c3RhdGljIGVtcHR5KCl7cmV0dXJuIG5ldyBtbn1zdGF0aWMgZnJvbShlKXtzd2l0Y2goZS5raW5kKXtjYXNlInByZXNlbnQiOnJldHVybiBULm9mKGUudmFsdWUpO2Nhc2UiZW1wdHkiOnJldHVybiBULmVtcHR5KCk7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgcGFzc2VkIHZhbHVlIHdhcyBub3QgYW4gT3B0aW9uIHR5cGUuIil9fX1jbGFzcyBkbiBleHRlbmRzIFR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnBheWxvYWQ9ZX1pc1ByZXNlbnQoKXtyZXR1cm4hMH1nZXQoKXtyZXR1cm4gdGhpcy5wYXlsb2FkfWlmUHJlc2VudChlKXtlKHRoaXMucGF5bG9hZCl9aWZQcmVzZW50T3JFbHNlKGUsdCl7ZSh0aGlzLnBheWxvYWQpfWZpbHRlcihlKXtyZXR1cm4gZSh0aGlzLnBheWxvYWQpP3RoaXM6VC5lbXB0eSgpfW1hcChlKXtjb25zdCB0PWUodGhpcy5wYXlsb2FkKTtyZXR1cm4gVC5vZk51bGxhYmxlKHQpfWZsYXRNYXAoZSl7cmV0dXJuIGUodGhpcy5wYXlsb2FkKX1vcihlKXtyZXR1cm4gdGhpc31vckVsc2UoZSl7cmV0dXJuIHRoaXMucGF5bG9hZH1vckVsc2VHZXQoZSl7cmV0dXJuIHRoaXMucGF5bG9hZH1vckVsc2VUaHJvdyhlKXtyZXR1cm4gdGhpcy5wYXlsb2FkfW9yTnVsbCgpe3JldHVybiB0aGlzLnBheWxvYWR9b3JVbmRlZmluZWQoKXtyZXR1cm4gdGhpcy5wYXlsb2FkfXRvT3B0aW9uKCl7cmV0dXJue2tpbmQ6InByZXNlbnQiLHZhbHVlOnRoaXMucGF5bG9hZH19bWF0Y2hlcyhlKXtyZXR1cm4gZS5wcmVzZW50KHRoaXMucGF5bG9hZCl9dG9KU09OKGUpe3JldHVybiB0aGlzLnBheWxvYWR9fWNsYXNzIG1uIGV4dGVuZHMgVHtpc1ByZXNlbnQoKXtyZXR1cm4hMX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCl9Z2V0KCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIG9wdGlvbmFsIGlzIG5vdCBwcmVzZW50LiIpfWlmUHJlc2VudChlKXt9aWZQcmVzZW50T3JFbHNlKGUsdCl7dCgpfWZpbHRlcihlKXtyZXR1cm4gdGhpc31tYXAoZSl7cmV0dXJuIFQuZW1wdHkoKX1mbGF0TWFwKGUpe3JldHVybiBULmVtcHR5KCl9b3IoZSl7cmV0dXJuIGUoKX1vckVsc2UoZSl7cmV0dXJuIGV9b3JFbHNlR2V0KGUpe3JldHVybiB0aGlzLm9yRWxzZShlKCkpfW9yRWxzZVRocm93KGUpe3Rocm93IGUoKX1vck51bGwoKXtyZXR1cm4gbnVsbH1vclVuZGVmaW5lZCgpe310b09wdGlvbigpe3JldHVybntraW5kOiJlbXB0eSJ9fW1hdGNoZXMoZSl7cmV0dXJuIGUuZW1wdHkoKX10b0pTT04oZSl7cmV0dXJuIG51bGx9fWNvbnN0IGNzPSIyLjAuMCI7ZnVuY3Rpb24gZnMocil7Z2xvYmFsVGhpcy5fdm9uYWdlTWVkaWFQcm9jZXNzb3JNZXRhZGF0YT1yfWZ1bmN0aW9uIGxzKCl7cmV0dXJuIGdsb2JhbFRoaXMuX3ZvbmFnZU1lZGlhUHJvY2Vzc29yTWV0YWRhdGF9Y2xhc3MgSHtjb25zdHJ1Y3Rvcigpe2NvbnN0IGU9bHMoKTt0aGlzLl9yZXBvcnQ9e2FjdGlvbjpULmVtcHR5KCksYXBwbGljYXRpb25JZDpULm9mTnVsbGFibGUoZSE9PXZvaWQgMCYmZSE9bnVsbD9lLmFwcElkOm51bGwpLHRpbWVzdGFtcDpEYXRlLm5vdygpLGZwczpULmVtcHR5KCksZnJhbWVzVHJhbnNmb3JtZWQ6VC5lbXB0eSgpLGd1aWQ6VC5lbXB0eSgpLGhpZ2hlc3RGcmFtZVRyYW5zZm9ybUNwdTpULmVtcHR5KCksbWVzc2FnZTpULmVtcHR5KCksc291cmNlOlQub2ZOdWxsYWJsZShlIT09dm9pZCAwJiZlIT1udWxsP2Uuc291cmNlVHlwZTpudWxsKSx0cmFuc2Zvcm1lZEZwczpULmVtcHR5KCksdHJhbnNmb3JtZXJUeXBlOlQuZW1wdHkoKSx2YXJpYXRpb246VC5lbXB0eSgpLHZpZGVvSGVpZ2h0OlQuZW1wdHkoKSx2aWRlb1dpZHRoOlQuZW1wdHkoKSx2ZXJzaW9uOmNzLGVycm9yOlQuZW1wdHkoKSxwcm94eVVybDpULm9mTnVsbGFibGUoZSE9PXZvaWQgMCYmZSE9bnVsbD9lLnByb3h5VXJsOm51bGwpfX1hY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5hY3Rpb249VC5vZk51bGxhYmxlKGUpLHRoaXN9ZnJhbWVzVHJhbnNmb3JtZWQoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5mcmFtZXNUcmFuc2Zvcm1lZD1ULm9mTnVsbGFibGUoZSksdGhpc31mcHMoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5mcHM9VC5vZk51bGxhYmxlKGUpLHRoaXN9Z3VpZChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lmd1aWQ9VC5vZk51bGxhYmxlKGUpLHRoaXN9bWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lm1lc3NhZ2U9VC5vZk51bGxhYmxlKGUpLHRoaXN9dHJhbnNmb3JtZWRGcHMoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC50cmFuc2Zvcm1lZEZwcz1ULm9mTnVsbGFibGUoZSksdGhpc310cmFuc2Zvcm1lclR5cGUoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC50cmFuc2Zvcm1lclR5cGU9VC5vZk51bGxhYmxlKGUpLHRoaXN9dmFyaWF0aW9uKGUpe3JldHVybiB0aGlzLl9yZXBvcnQudmFyaWF0aW9uPVQub2ZOdWxsYWJsZShlKSx0aGlzfXZpZGVvSGVpZ2h0KGUpe3JldHVybiB0aGlzLl9yZXBvcnQudmlkZW9IZWlnaHQ9VC5vZk51bGxhYmxlKGUpLHRoaXN9dmlkZW9XaWR0aChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0LnZpZGVvV2lkdGg9VC5vZk51bGxhYmxlKGUpLHRoaXN9ZXJyb3IoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5lcnJvcj1ULm9mTnVsbGFibGUoZSksdGhpc31idWlsZCgpe3JldHVybiB0aGlzLl9yZXBvcnR9fWNvbnN0IGRzPXI9PkpTT04uc3RyaW5naWZ5KHIsKGUsdCk9PntpZih0IT09bnVsbClyZXR1cm4gdH0pO2NsYXNzIFZ7c3RhdGljIHJlcG9ydChlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQsbik9PntpZihlLmFwcGxpY2F0aW9uSWQuaXNFbXB0eSgpfHxlLnNvdXJjZS5pc0VtcHR5KCkpe3QoInN1Y2Nlc3MiKTtyZXR1cm59bGV0IGk9dXMuY3JlYXRlKCksbz17dGltZW91dDoxZTQsdGltZW91dEVycm9yTWVzc2FnZToiUmVxdWVzdCB0aW1lb3V0IixoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fSxzPSJobGcudG9rYm94LmNvbS9wcm9kL2xvZ2dpbmcvdmNwX3dlYnJ0YyI7aWYoZS5wcm94eVVybC5pc0VtcHR5KCkpcz0iaHR0cHM6Ly8iK3M7ZWxzZXtsZXQgYTtlLnByb3h5VXJsLmdldCgpLnNsaWNlKGUucHJveHlVcmwuZ2V0KCkubGVuZ3RoLTEpIT09Ii8iP2E9ZS5wcm94eVVybC5nZXQoKSsiLyI6YT1lLnByb3h5VXJsLmdldCgpLHM9YStzfWkucG9zdChzLGRzKGUpLG8pLnRoZW4oYT0+e2NvbnNvbGUubG9nKGEpLHQoInN1Y2Nlc3MiKX0pLmNhdGNoKGE9Pntjb25zb2xlLmxvZyhhKSxuKGEpfSl9KX19dmFyIHR0LG1zPW5ldyBVaW50OEFycmF5KDE2KTtmdW5jdGlvbiBocygpe2lmKCF0dCYmKHR0PXR5cGVvZiBjcnlwdG88InUiJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKXx8dHlwZW9mIG1zQ3J5cHRvPCJ1IiYmdHlwZW9mIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcz09ImZ1bmN0aW9uIiYmbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pLCF0dCkpdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpO3JldHVybiB0dChtcyl9dmFyIHBzPS9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtmdW5jdGlvbiB5cyhyKXtyZXR1cm4gdHlwZW9mIHI9PSJzdHJpbmciJiZwcy50ZXN0KHIpfWZvcih2YXIgTj1bXSxXdD0wO1d0PDI1NjsrK1d0KU4ucHVzaCgoV3QrMjU2KS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtmdW5jdGlvbiBfcyhyKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06MCx0PShOW3JbZSswXV0rTltyW2UrMV1dK05bcltlKzJdXStOW3JbZSszXV0rIi0iK05bcltlKzRdXStOW3JbZSs1XV0rIi0iK05bcltlKzZdXStOW3JbZSs3XV0rIi0iK05bcltlKzhdXStOW3JbZSs5XV0rIi0iK05bcltlKzEwXV0rTltyW2UrMTFdXStOW3JbZSsxMl1dK05bcltlKzEzXV0rTltyW2UrMTRdXStOW3JbZSsxNV1dKS50b0xvd2VyQ2FzZSgpO2lmKCF5cyh0KSl0aHJvdyBUeXBlRXJyb3IoIlN0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCIpO3JldHVybiB0fWZ1bmN0aW9uIGhuKHIsZSx0KXtyPXJ8fHt9O3ZhciBuPXIucmFuZG9tfHwoci5ybmd8fGhzKSgpO2lmKG5bNl09bls2XSYxNXw2NCxuWzhdPW5bOF0mNjN8MTI4LGUpe3Q9dHx8MDtmb3IodmFyIGk9MDtpPDE2OysraSllW3QraV09bltpXTtyZXR1cm4gZX1yZXR1cm4gX3Mobil9Y29uc3Qgc2U9bmV3IFdlYWtNYXAscnQ9bmV3IFdlYWtNYXAsQ2U9bmV3IFdlYWtNYXAsanQ9U3ltYm9sKCJhbnlQcm9kdWNlciIpLHBuPVByb21pc2UucmVzb2x2ZSgpLG50PVN5bWJvbCgibGlzdGVuZXJBZGRlZCIpLGl0PVN5bWJvbCgibGlzdGVuZXJSZW1vdmVkIik7bGV0IHF0PSExO2Z1bmN0aW9uIHdlKHIpe2lmKHR5cGVvZiByIT0ic3RyaW5nIiYmdHlwZW9mIHIhPSJzeW1ib2wiKXRocm93IG5ldyBUeXBlRXJyb3IoImV2ZW50TmFtZSBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgc3ltYm9sIil9ZnVuY3Rpb24gb3Qocil7aWYodHlwZW9mIHIhPSJmdW5jdGlvbiIpdGhyb3cgbmV3IFR5cGVFcnJvcigibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gUmUocixlKXtjb25zdCB0PXJ0LmdldChyKTtyZXR1cm4gdC5oYXMoZSl8fHQuc2V0KGUsbmV3IFNldCksdC5nZXQoZSl9ZnVuY3Rpb24gT2UocixlKXtjb25zdCB0PXR5cGVvZiBlPT0ic3RyaW5nInx8dHlwZW9mIGU9PSJzeW1ib2wiP2U6anQsbj1DZS5nZXQocik7cmV0dXJuIG4uaGFzKHQpfHxuLnNldCh0LG5ldyBTZXQpLG4uZ2V0KHQpfWZ1bmN0aW9uIHhzKHIsZSx0KXtjb25zdCBuPUNlLmdldChyKTtpZihuLmhhcyhlKSlmb3IoY29uc3QgaSBvZiBuLmdldChlKSlpLmVucXVldWUodCk7aWYobi5oYXMoanQpKXtjb25zdCBpPVByb21pc2UuYWxsKFtlLHRdKTtmb3IoY29uc3QgbyBvZiBuLmdldChqdCkpby5lbnF1ZXVlKGkpfX1mdW5jdGlvbiB5bihyLGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtsZXQgdD0hMSxuPSgpPT57fSxpPVtdO2NvbnN0IG89e2VucXVldWUocyl7aS5wdXNoKHMpLG4oKX0sZmluaXNoKCl7dD0hMCxuKCl9fTtmb3IoY29uc3QgcyBvZiBlKU9lKHIscykuYWRkKG8pO3JldHVybnthc3luYyBuZXh0KCl7cmV0dXJuIGk/aS5sZW5ndGg9PT0wP3Q/KGk9dm9pZCAwLHRoaXMubmV4dCgpKTooYXdhaXQgbmV3IFByb21pc2Uocz0+e249c30pLHRoaXMubmV4dCgpKTp7ZG9uZTohMSx2YWx1ZTphd2FpdCBpLnNoaWZ0KCl9Ontkb25lOiEwfX0sYXN5bmMgcmV0dXJuKHMpe2k9dm9pZCAwO2Zvcihjb25zdCBhIG9mIGUpT2UocixhKS5kZWxldGUobyk7cmV0dXJuIG4oKSxhcmd1bWVudHMubGVuZ3RoPjA/e2RvbmU6ITAsdmFsdWU6YXdhaXQgc306e2RvbmU6ITB9fSxbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCl7cmV0dXJuIHRoaXN9fX1mdW5jdGlvbiBfbihyKXtpZihyPT09dm9pZCAwKXJldHVybiB4bjtpZighQXJyYXkuaXNBcnJheShyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyIpO2Zvcihjb25zdCBlIG9mIHIpaWYoIXhuLmluY2x1ZGVzKGUpKXRocm93IHR5cGVvZiBlIT0ic3RyaW5nIj9uZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIGVsZW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpOm5ldyBFcnJvcihgJHtlfSBpcyBub3QgRW1pdHRlcnkgbWV0aG9kYCk7cmV0dXJuIHJ9Y29uc3QgWHQ9cj0+cj09PW50fHxyPT09aXQ7Y2xhc3MgaGV7c3RhdGljIG1peGluKGUsdCl7cmV0dXJuIHQ9X24odCksbj0+e2lmKHR5cGVvZiBuIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImB0YXJnZXRgIG11c3QgYmUgZnVuY3Rpb24iKTtmb3IoY29uc3QgcyBvZiB0KWlmKG4ucHJvdG90eXBlW3NdIT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihgVGhlIHByb3BlcnR5IFxgJHtzfVxgIGFscmVhZHkgZXhpc3RzIG9uIFxgdGFyZ2V0XGBgKTtmdW5jdGlvbiBpKCl7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2VudW1lcmFibGU6ITEsdmFsdWU6bmV3IGhlfSksdGhpc1tlXX1PYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsZSx7ZW51bWVyYWJsZTohMSxnZXQ6aX0pO2NvbnN0IG89cz0+ZnVuY3Rpb24oLi4uYSl7cmV0dXJuIHRoaXNbZV1bc10oLi4uYSl9O2Zvcihjb25zdCBzIG9mIHQpT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLHMse2VudW1lcmFibGU6ITEsdmFsdWU6byhzKX0pO3JldHVybiBufX1zdGF0aWMgZ2V0IGlzRGVidWdFbmFibGVkKCl7aWYodHlwZW9mIHByb2Nlc3MhPSJvYmplY3QiKXJldHVybiBxdDtjb25zdHtlbnY6ZX09cHJvY2Vzc3x8e2Vudjp7fX07cmV0dXJuIGUuREVCVUc9PT0iZW1pdHRlcnkifHxlLkRFQlVHPT09IioifHxxdH1zdGF0aWMgc2V0IGlzRGVidWdFbmFibGVkKGUpe3F0PWV9Y29uc3RydWN0b3IoZT17fSl7c2Uuc2V0KHRoaXMsbmV3IFNldCkscnQuc2V0KHRoaXMsbmV3IE1hcCksQ2Uuc2V0KHRoaXMsbmV3IE1hcCksdGhpcy5kZWJ1Zz1lLmRlYnVnfHx7fSx0aGlzLmRlYnVnLmVuYWJsZWQ9PT12b2lkIDAmJih0aGlzLmRlYnVnLmVuYWJsZWQ9ITEpLHRoaXMuZGVidWcubG9nZ2VyfHwodGhpcy5kZWJ1Zy5sb2dnZXI9KHQsbixpLG8pPT57bz1KU09OLnN0cmluZ2lmeShvKSx0eXBlb2YgaT09InN5bWJvbCImJihpPWkudG9TdHJpbmcoKSk7Y29uc3Qgcz1uZXcgRGF0ZSxhPWAke3MuZ2V0SG91cnMoKX06JHtzLmdldE1pbnV0ZXMoKX06JHtzLmdldFNlY29uZHMoKX0uJHtzLmdldE1pbGxpc2Vjb25kcygpfWA7Y29uc29sZS5sb2coYFske2F9XVtlbWl0dGVyeToke3R9XVske259XSBFdmVudCBOYW1lOiAke2l9CglkYXRhOiAke299YCl9KX1sb2dJZkRlYnVnRW5hYmxlZChlLHQsbil7KGhlLmlzRGVidWdFbmFibGVkfHx0aGlzLmRlYnVnLmVuYWJsZWQpJiZ0aGlzLmRlYnVnLmxvZ2dlcihlLHRoaXMuZGVidWcubmFtZSx0LG4pfW9uKGUsdCl7b3QodCksZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCBuIG9mIGUpd2UobiksUmUodGhpcyxuKS5hZGQodCksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlIixuLHZvaWQgMCksWHQobil8fHRoaXMuZW1pdChudCx7ZXZlbnROYW1lOm4sbGlzdGVuZXI6dH0pO3JldHVybiB0aGlzLm9mZi5iaW5kKHRoaXMsZSx0KX1vZmYoZSx0KXtvdCh0KSxlPUFycmF5LmlzQXJyYXkoZSk/ZTpbZV07Zm9yKGNvbnN0IG4gb2YgZSl3ZShuKSxSZSh0aGlzLG4pLmRlbGV0ZSh0KSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZSIsbix2b2lkIDApLFh0KG4pfHx0aGlzLmVtaXQoaXQse2V2ZW50TmFtZTpuLGxpc3RlbmVyOnR9KX1vbmNlKGUpe3JldHVybiBuZXcgUHJvbWlzZSh0PT57Y29uc3Qgbj10aGlzLm9uKGUsaT0+e24oKSx0KGkpfSl9KX1ldmVudHMoZSl7ZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCB0IG9mIGUpd2UodCk7cmV0dXJuIHluKHRoaXMsZSl9YXN5bmMgZW1pdChlLHQpe3dlKGUpLHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXQiLGUsdCkseHModGhpcyxlLHQpO2NvbnN0IG49UmUodGhpcyxlKSxpPXNlLmdldCh0aGlzKSxvPVsuLi5uXSxzPVh0KGUpP1tdOlsuLi5pXTthd2FpdCBwbixhd2FpdCBQcm9taXNlLmFsbChbLi4uby5tYXAoYXN5bmMgYT0+e2lmKG4uaGFzKGEpKXJldHVybiBhKHQpfSksLi4ucy5tYXAoYXN5bmMgYT0+e2lmKGkuaGFzKGEpKXJldHVybiBhKGUsdCl9KV0pfWFzeW5jIGVtaXRTZXJpYWwoZSx0KXt3ZShlKSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJlbWl0U2VyaWFsIixlLHQpO2NvbnN0IG49UmUodGhpcyxlKSxpPXNlLmdldCh0aGlzKSxvPVsuLi5uXSxzPVsuLi5pXTthd2FpdCBwbjtmb3IoY29uc3QgYSBvZiBvKW4uaGFzKGEpJiZhd2FpdCBhKHQpO2Zvcihjb25zdCBhIG9mIHMpaS5oYXMoYSkmJmF3YWl0IGEoZSx0KX1vbkFueShlKXtyZXR1cm4gb3QoZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlQW55Iix2b2lkIDAsdm9pZCAwKSxzZS5nZXQodGhpcykuYWRkKGUpLHRoaXMuZW1pdChudCx7bGlzdGVuZXI6ZX0pLHRoaXMub2ZmQW55LmJpbmQodGhpcyxlKX1hbnlFdmVudCgpe3JldHVybiB5bih0aGlzKX1vZmZBbnkoZSl7b3QoZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgidW5zdWJzY3JpYmVBbnkiLHZvaWQgMCx2b2lkIDApLHRoaXMuZW1pdChpdCx7bGlzdGVuZXI6ZX0pLHNlLmdldCh0aGlzKS5kZWxldGUoZSl9Y2xlYXJMaXN0ZW5lcnMoZSl7ZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCB0IG9mIGUpaWYodGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgiY2xlYXIiLHQsdm9pZCAwKSx0eXBlb2YgdD09InN0cmluZyJ8fHR5cGVvZiB0PT0ic3ltYm9sIil7UmUodGhpcyx0KS5jbGVhcigpO2NvbnN0IG49T2UodGhpcyx0KTtmb3IoY29uc3QgaSBvZiBuKWkuZmluaXNoKCk7bi5jbGVhcigpfWVsc2V7c2UuZ2V0KHRoaXMpLmNsZWFyKCk7Zm9yKGNvbnN0IG4gb2YgcnQuZ2V0KHRoaXMpLnZhbHVlcygpKW4uY2xlYXIoKTtmb3IoY29uc3QgbiBvZiBDZS5nZXQodGhpcykudmFsdWVzKCkpe2Zvcihjb25zdCBpIG9mIG4paS5maW5pc2goKTtuLmNsZWFyKCl9fX1saXN0ZW5lckNvdW50KGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtsZXQgdD0wO2Zvcihjb25zdCBuIG9mIGUpe2lmKHR5cGVvZiBuPT0ic3RyaW5nIil7dCs9c2UuZ2V0KHRoaXMpLnNpemUrUmUodGhpcyxuKS5zaXplK09lKHRoaXMsbikuc2l6ZStPZSh0aGlzKS5zaXplO2NvbnRpbnVlfXR5cGVvZiBuPCJ1IiYmd2UobiksdCs9c2UuZ2V0KHRoaXMpLnNpemU7Zm9yKGNvbnN0IGkgb2YgcnQuZ2V0KHRoaXMpLnZhbHVlcygpKXQrPWkuc2l6ZTtmb3IoY29uc3QgaSBvZiBDZS5nZXQodGhpcykudmFsdWVzKCkpdCs9aS5zaXplfXJldHVybiB0fWJpbmRNZXRob2RzKGUsdCl7aWYodHlwZW9mIGUhPSJvYmplY3QifHxlPT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJgdGFyZ2V0YCBtdXN0IGJlIGFuIG9iamVjdCIpO3Q9X24odCk7Zm9yKGNvbnN0IG4gb2YgdCl7aWYoZVtuXSE9PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7bn1cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTohMSx2YWx1ZTp0aGlzW25dLmJpbmQodGhpcyl9KX19fWNvbnN0IHhuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlLnByb3RvdHlwZSkuZmlsdGVyKHI9PnIhPT0iY29uc3RydWN0b3IiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaGUsImxpc3RlbmVyQWRkZWQiLHt2YWx1ZTpudCx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoZSwibGlzdGVuZXJSZW1vdmVkIix7dmFsdWU6aXQsd3JpdGFibGU6ITEsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITF9KTt2YXIgWXQ9aGU7ZnVuY3Rpb24gZ3Mocil7cmV0dXJuIHR5cGVvZiByPT0ib2JqZWN0IiYmciE9PW51bGwmJiJtZXNzYWdlImluIHImJnR5cGVvZiByLm1lc3NhZ2U9PSJzdHJpbmcifWZ1bmN0aW9uIGJzKHIpe2lmKGdzKHIpKXJldHVybiByO3RyeXtyZXR1cm4gbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHIpKX1jYXRjaHtyZXR1cm4gbmV3IEVycm9yKFN0cmluZyhyKSl9fWZ1bmN0aW9uIFF0KHIpe3JldHVybiBicyhyKS5tZXNzYWdlfXZhciBLdD0ocj0+KHIucGlwZWxpbmVfZW5kZWQ9InBpcGVsaW5lX2VuZGVkIixyLnBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3I9InBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3IiLHIucGlwZWxpbmVfc3RhcnRlZD0icGlwZWxpbmVfc3RhcnRlZCIsci5waXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3I9InBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciIsci5waXBlbGluZV9yZXN0YXJ0ZWQ9InBpcGVsaW5lX3Jlc3RhcnRlZCIsci5waXBlbGluZV9yZXN0YXJ0ZWRfd2l0aF9lcnJvcj0icGlwZWxpbmVfcmVzdGFydGVkX3dpdGhfZXJyb3IiLHIpKShLdHx8e30pO2NvbnN0IHZzPTUwMCxFcz0uODtjbGFzcyBUcyBleHRlbmRzIFl0e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmluZGV4Xz10LHRoaXMudXVpZF89aG4oKSx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz0wLHRoaXMudHJhbnNmb3JtZXJfPWUsdGhpcy5zaG91bGRTdG9wXz0hMSx0aGlzLmlzRmxhc2hlZF89ITEsdGhpcy5mcmFtZXNGcm9tU291cmNlXz0wLHRoaXMuZnBzXz0wLHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz0wLHRoaXMudmlkZW9IZWlnaHRfPTAsdGhpcy52aWRlb1dpZHRoXz0wLHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfPS0xLHRoaXMudHJhbnNmb3JtZXJUeXBlXz0iQ3VzdG9tIiwiZ2V0VHJhbnNmb3JtZXJUeXBlImluIGUmJih0aGlzLnRyYW5zZm9ybWVyVHlwZV89ZS5nZXRUcmFuc2Zvcm1lclR5cGUoKSk7Y29uc3Qgbj1uZXcgSCgpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmd1aWQodGhpcy51dWlkXykudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJDcmVhdGUiKS5idWlsZCgpO1YucmVwb3J0KG4pfXNldFRyYWNrRXhwZWN0ZWRSYXRlKGUpe3RoaXMudHJhY2tFeHBlY3RlZFJhdGVfPWV9YXN5bmMgc3RhcnQoZSl7aWYodGhpcy5jb250cm9sbGVyXz1lLHRoaXMudHJhbnNmb3JtZXJfJiZ0eXBlb2YgdGhpcy50cmFuc2Zvcm1lcl8uc3RhcnQ9PSJmdW5jdGlvbiIpdHJ5e2F3YWl0IHRoaXMudHJhbnNmb3JtZXJfLnN0YXJ0KGUpfWNhdGNoKHQpe2NvbnN0IG49bmV3IEgoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLnRyYW5zZm9ybWVyX3N0YXJ0KS50cmFuc2Zvcm1lclR5cGUodGhpcy50cmFuc2Zvcm1lclR5cGVfKS52YXJpYXRpb24oIkVycm9yIikuZXJyb3IoUXQodCkpLmJ1aWxkKCk7Vi5yZXBvcnQobik7Y29uc3QgaT17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sZXJyb3I6dCxmdW5jdGlvbjoic3RhcnQifTt0aGlzLmVtaXQoImVycm9yIixpKX19YXN5bmMgdHJhbnNmb3JtKGUsdCl7dmFyIG4saSxvLHM7aWYodGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfPT09MCYmKHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz1EYXRlLm5vdygpKSxlIGluc3RhbmNlb2YgVmlkZW9GcmFtZSYmKHRoaXMudmlkZW9IZWlnaHRfPShuPWU9PW51bGw/dm9pZCAwOmUuZGlzcGxheUhlaWdodCkhPW51bGw/bjowLHRoaXMudmlkZW9XaWR0aF89KGk9ZT09bnVsbD92b2lkIDA6ZS5kaXNwbGF5V2lkdGgpIT1udWxsP2k6MCksKyt0aGlzLmZyYW1lc0Zyb21Tb3VyY2VfLHRoaXMudHJhbnNmb3JtZXJfKWlmKHRoaXMuc2hvdWxkU3RvcF8pY29uc29sZS53YXJuKCJbUGlwZWxpbmVdIGZsdXNoIGZyb20gdHJhbnNmb3JtIiksZS5jbG9zZSgpLHRoaXMuZmx1c2godCksdC50ZXJtaW5hdGUoKTtlbHNlIHRyeXthd2FpdCgocz0obz10aGlzLnRyYW5zZm9ybWVyXykudHJhbnNmb3JtKT09bnVsbD92b2lkIDA6cy5jYWxsKG8sZSx0KSksKyt0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXyx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz09PXZzJiZ0aGlzLm1lZGlhVHJhbnNmb3JtZXJRb3NSZXBvcnQoKX1jYXRjaChhKXtjb25zdCB1PW5ldyBIKCkuYWN0aW9uKCJNZWRpYVRyYW5zZm9ybWVyIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy50cmFuc2Zvcm1lcl90cmFuc2Zvcm0pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRXJyb3IiKS5lcnJvcihRdChhKSkuYnVpbGQoKTtWLnJlcG9ydCh1KTtjb25zdCBmPXtldmVudE1ldGFEYXRhOnt0cmFuc2Zvcm1lckluZGV4OnRoaXMuaW5kZXhffSxlcnJvcjphLGZ1bmN0aW9uOiJ0cmFuc2Zvcm0ifTt0aGlzLmVtaXQoImVycm9yIixmKX19YXN5bmMgZmx1c2goZSl7aWYodGhpcy50cmFuc2Zvcm1lcl8mJnR5cGVvZiB0aGlzLnRyYW5zZm9ybWVyXy5mbHVzaD09ImZ1bmN0aW9uIiYmIXRoaXMuaXNGbGFzaGVkXyl7dGhpcy5pc0ZsYXNoZWRfPSEwO3RyeXthd2FpdCB0aGlzLnRyYW5zZm9ybWVyXy5mbHVzaChlKX1jYXRjaChuKXtjb25zdCBpPW5ldyBIKCkuYWN0aW9uKCJNZWRpYVRyYW5zZm9ybWVyIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy50cmFuc2Zvcm1lcl9mbHVzaCkudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJFcnJvciIpLmVycm9yKFF0KG4pKS5idWlsZCgpO1YucmVwb3J0KGkpO2NvbnN0IG89e2V2ZW50TWV0YURhdGE6e3RyYW5zZm9ybWVySW5kZXg6dGhpcy5pbmRleF99LGVycm9yOm4sZnVuY3Rpb246ImZsdXNoIn07dGhpcy5lbWl0KCJlcnJvciIsbyl9fXRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydCgpO2NvbnN0IHQ9bmV3IEgoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRGVsZXRlIikuYnVpbGQoKTtWLnJlcG9ydCh0KX1zdG9wKCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gU3RvcCBzdHJlYW0uIiksdGhpcy5jb250cm9sbGVyXyYmKHRoaXMuZmx1c2godGhpcy5jb250cm9sbGVyXyksdGhpcy5jb250cm9sbGVyXy50ZXJtaW5hdGUoKSksdGhpcy5zaG91bGRTdG9wXz0hMH1tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0KCl7bGV0IGU9KERhdGUubm93KCktdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfKS8xZTMsdD10aGlzLmZyYW1lc0Zyb21Tb3VyY2VfL2Usbj10aGlzLmZyYW1lc1RyYW5zZm9ybWVkXy9lO2lmKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfIT0tMSYmdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8qRXM+dCl7Y29uc3Qgbz17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sd2FybmluZ1R5cGU6ImZwc19kcm9wIixkcm9wSW5mbzp7cmVxdWVzdGVkOnRoaXMudHJhY2tFeHBlY3RlZFJhdGVfLGN1cnJlbnQ6dH19O3RoaXMuZW1pdCgid2FybiIsbyl9Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmZwcyh0KS50cmFuc2Zvcm1lZEZwcyhuKS5mcmFtZXNUcmFuc2Zvcm1lZCh0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXykuZ3VpZCh0aGlzLnV1aWRfKS50cmFuc2Zvcm1lclR5cGUodGhpcy50cmFuc2Zvcm1lclR5cGVfKS52aWRlb0hlaWdodCh0aGlzLnZpZGVvSGVpZ2h0XykudmlkZW9XaWR0aCh0aGlzLnZpZGVvV2lkdGhfKS52YXJpYXRpb24oIlFvUyIpLmJ1aWxkKCk7Vi5yZXBvcnQoaSksdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfPTAsdGhpcy5mcmFtZXNGcm9tU291cmNlXz0wLHRoaXMuZnJhbWVzVHJhbnNmb3JtZWRfPTB9fWNsYXNzIEFzIGV4dGVuZHMgWXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnRyYW5zZm9ybWVyc189W10sdGhpcy50cmFja0V4cGVjdGVkUmF0ZV89LTE7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2xldCBuPW5ldyBUcyhlW3RdLHQpO24ub24oImVycm9yIixpPT57dGhpcy5lbWl0KCJlcnJvciIsaSl9KSxuLm9uKCJ3YXJuIixpPT57dGhpcy5lbWl0KCJ3YXJuIixpKX0pLHRoaXMudHJhbnNmb3JtZXJzXy5wdXNoKG4pfX1zZXRUcmFja0V4cGVjdGVkUmF0ZShlKXt0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz1lO2ZvcihsZXQgdCBvZiB0aGlzLnRyYW5zZm9ybWVyc18pdC5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyl9YXN5bmMgc3RhcnQoZSx0KXtpZighdGhpcy50cmFuc2Zvcm1lcnNffHx0aGlzLnRyYW5zZm9ybWVyc18ubGVuZ3RoPT09MCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gTm8gdHJhbnNmb3JtZXJzLiIpO3JldHVybn10cnl7bGV0IG49ZTtmb3IobGV0IGkgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKWU9ZS5waXBlVGhyb3VnaChuZXcgVHJhbnNmb3JtU3RyZWFtKGkpKTtlLnBpcGVUbyh0KS50aGVuKGFzeW5jKCk9Pntjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBTZXR1cC4iKSxhd2FpdCB0LmFib3J0KCksYXdhaXQgbi5jYW5jZWwoKSx0aGlzLmVtaXQoInBpcGVsaW5lSW5mbyIsInBpcGVsaW5lX2VuZGVkIil9KS5jYXRjaChhc3luYyBpPT57ZS5jYW5jZWwoKS50aGVuKCgpPT57Y29uc29sZS5sb2coIltQaXBlbGluZV0gU2h1dHRpbmcgZG93biBzdHJlYW1zIGFmdGVyIGFib3J0LiIpfSkuY2F0Y2gobz0+e2NvbnNvbGUuZXJyb3IoIltQaXBlbGluZV0gRXJyb3IgZnJvbSBzdHJlYW0gdHJhbnNmb3JtOiIsbyl9KSxhd2FpdCB0LmFib3J0KGkpLGF3YWl0IG4uY2FuY2VsKGkpLHRoaXMuZW1pdCgicGlwZWxpbmVJbmZvIiwicGlwZWxpbmVfZW5kZWRfd2l0aF9lcnJvciIpfSl9Y2F0Y2h7dGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLCJwaXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3IiKSx0aGlzLmRlc3Ryb3koKTtyZXR1cm59dGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLCJwaXBlbGluZV9zdGFydGVkIiksY29uc29sZS5sb2coIltQaXBlbGluZV0gUGlwZWxpbmUgc3RhcnRlZC4iKX1hc3luYyBkZXN0cm95KCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gRGVzdHJveWluZyBQaXBlbGluZS4iKTtmb3IobGV0IGUgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKWUuc3RvcCgpfX1jbGFzcyB3cyBleHRlbmRzIFl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnV1aWRfPWhuKCksdGhpcy50cmFja0V4cGVjdGVkUmF0ZV89LTE7Y29uc3QgZT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLnZhcmlhdGlvbigiQ3JlYXRlIikuYnVpbGQoKTtWLnJlcG9ydChlKX1zZXRUcmFja0V4cGVjdGVkUmF0ZShlKXt0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz1lLHRoaXMucGlwZWxpbmVfJiZ0aGlzLnBpcGVsaW5lXy5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyl9dHJhbnNmb3JtKGUsdCl7cmV0dXJuIHRoaXMucmVhZGFibGVfPWUsdGhpcy53cml0YWJsZV89dCx0aGlzLnRyYW5zZm9ybUludGVybmFsKCl9dHJhbnNmb3JtSW50ZXJuYWwoKXtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9PntpZighdGhpcy50cmFuc2Zvcm1lcnNffHx0aGlzLnRyYW5zZm9ybWVyc18ubGVuZ3RoPT09MCl7Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLnRyYW5zZm9ybWVyX25vbmUpLnZhcmlhdGlvbigiRXJyb3IiKS5idWlsZCgpO1YucmVwb3J0KGkpLHQoIltNZWRpYVByb2Nlc3Nvcl0gTmVlZCB0byBzZXQgdHJhbnNmb3JtZXJzLiIpO3JldHVybn1pZighdGhpcy5yZWFkYWJsZV8pe2NvbnN0IGk9bmV3IEgoKS5hY3Rpb24oIk1lZGlhUHJvY2Vzc29yIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy5yZWFkYWJsZV9udWxsKS52YXJpYXRpb24oIkVycm9yIikuYnVpbGQoKTtWLnJlcG9ydChpKSx0KCJbTWVkaWFQcm9jZXNzb3JdIFJlYWRhYmxlIGlzIG51bGwuIik7cmV0dXJufWlmKCF0aGlzLndyaXRhYmxlXyl7Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLndyaXRhYmxlX251bGwpLnZhcmlhdGlvbigiRXJyb3IiKS5idWlsZCgpO1YucmVwb3J0KGkpLHQoIltNZWRpYVByb2Nlc3Nvcl0gV3JpdGFibGUgaXMgbnVsbC4iKTtyZXR1cm59bGV0IG49ITE7dGhpcy5waXBlbGluZV8mJihuPSEwLHRoaXMucGlwZWxpbmVfLmNsZWFyTGlzdGVuZXJzKCksdGhpcy5waXBlbGluZV8uZGVzdHJveSgpKSx0aGlzLnBpcGVsaW5lXz1uZXcgQXModGhpcy50cmFuc2Zvcm1lcnNfKSx0aGlzLnBpcGVsaW5lXy5vbigid2FybiIsaT0+e3RoaXMuZW1pdCgid2FybiIsaSl9KSx0aGlzLnBpcGVsaW5lXy5vbigiZXJyb3IiLGk9Pnt0aGlzLmVtaXQoImVycm9yIixpKX0pLHRoaXMucGlwZWxpbmVfLm9uKCJwaXBlbGluZUluZm8iLGk9PntuJiYoaT09PSJwaXBlbGluZV9zdGFydGVkIj9pPUt0LnBpcGVsaW5lX3Jlc3RhcnRlZDppPT09InBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciImJihpPUt0LnBpcGVsaW5lX3Jlc3RhcnRlZF93aXRoX2Vycm9yKSksdGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLGkpfSksdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8hPS0xJiZ0aGlzLnBpcGVsaW5lXy5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyksdGhpcy5waXBlbGluZV8uc3RhcnQodGhpcy5yZWFkYWJsZV8sdGhpcy53cml0YWJsZV8pLnRoZW4oKCk9PntlKCl9KS5jYXRjaChpPT57dChpKX0pfSl9c2V0VHJhbnNmb3JtZXJzKGUpe2NvbnN0IHQ9bmV3IEgoKS5hY3Rpb24oIk1lZGlhUHJvY2Vzc29yIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLnVwZGF0ZXMudHJhbnNmb3JtZXJfbmV3KS52YXJpYXRpb24oIlVwZGF0ZSIpLmJ1aWxkKCk7cmV0dXJuIFYucmVwb3J0KHQpLHRoaXMudHJhbnNmb3JtZXJzXz1lLHRoaXMucmVhZGFibGVfJiZ0aGlzLndyaXRhYmxlXz90aGlzLnRyYW5zZm9ybUludGVybmFsKCk6UHJvbWlzZS5yZXNvbHZlKCl9ZGVzdHJveSgpe3JldHVybiBuZXcgUHJvbWlzZShlPT57dGhpcy5waXBlbGluZV8mJnRoaXMucGlwZWxpbmVfLmRlc3Ryb3koKTtjb25zdCB0PW5ldyBIKCkuYWN0aW9uKCJNZWRpYVByb2Nlc3NvciIpLmd1aWQodGhpcy51dWlkXykudmFyaWF0aW9uKCJEZWxldGUiKS5idWlsZCgpO1YucmVwb3J0KHQpLGUoKX0pfX12YXIgc3Q9KHI9PihyLkxvdz0iTG93IixyLkhpZ2g9IkhpZ2giLHIpKShzdHx8e30pO2FzeW5jIGZ1bmN0aW9uIGduKHIpe3JldHVybiBuZXcgUHJvbWlzZShlPT57c2V0VGltZW91dCgoKT0+e2UoKX0scil9KX1jbGFzcyBSc3tjb25zdHJ1Y3RvcihlKXtwKHRoaXMsImNvbnRleHQiKTtwKHRoaXMsImV4dGVuc2lvbiIpO3AodGhpcywicXVlcmllcyIsW10pO3AodGhpcywiYWN0aXZlUXVlcnkiKTt0aGlzLmNvbnRleHQ9ZSx0aGlzLmV4dGVuc2lvbj1lLmdldEV4dGVuc2lvbigiRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5X3dlYmdsMiIpfXN0YXJ0KCl7fXN0b3AoKXt0aGlzLmFjdGl2ZVF1ZXJ5JiZ0aGlzLmNvbnRleHQuZW5kUXVlcnkodGhpcy5leHRlbnNpb24uVElNRV9FTEFQU0VEX0VYVCl9cHVzaENvbnRleHQoZSl7dGhpcy5jcmVhdGVRdWVyeSgiUFVTSCIsZSl9cG9wQ29udGV4dChlKXt0aGlzLmNyZWF0ZVF1ZXJ5KCJQT1AiLGUpfWNyZWF0ZVF1ZXJ5KGUsdCl7dGhpcy5hY3RpdmVRdWVyeSYmdGhpcy5jb250ZXh0LmVuZFF1ZXJ5KHRoaXMuZXh0ZW5zaW9uLlRJTUVfRUxBUFNFRF9FWFQpLHRoaXMuYWN0aXZlUXVlcnk9dGhpcy5jb250ZXh0LmNyZWF0ZVF1ZXJ5KCksdGhpcy5jb250ZXh0LmJlZ2luUXVlcnkodGhpcy5leHRlbnNpb24uVElNRV9FTEFQU0VEX0VYVCx0aGlzLmFjdGl2ZVF1ZXJ5KSx0aGlzLnF1ZXJpZXMucHVzaCh7bmFtZTp0LGFjdGlvbjplLHF1ZXJ5OnRoaXMuYWN0aXZlUXVlcnl9KX1hc3luYyBnZXRSZXNvbHZlZFF1ZXJpZXMoKXtjb25zdCBlPShhd2FpdCBQcm9taXNlLmFsbChbLi4udGhpcy5xdWVyaWVzXS5tYXAodD0+dGhpcy5yZXNvbHZlUXVlcnkodCkpKSkuZmlsdGVyKHQ9PnQpO2ZvcihsZXQgdD0xO3Q8ZS5sZW5ndGg7Kyt0KWVbdF0udGltZXN0YW1wKz1lW3QtMV0uZHVyYXRpb24rZVt0LTFdLnRpbWVzdGFtcDtyZXR1cm4gZX1hc3luYyByZXNvbHZlUXVlcnkoZSl7aWYoIWF3YWl0IHRoaXMuYXdhaXRRdWVyeUF2YWlsYWJsZShlKSl7Y29uc29sZS5sb2coIlVuYXdhaXRhYmxlIHF1ZXJ5IixlKTtyZXR1cm59aWYodGhpcy5jb250ZXh0LmdldFBhcmFtZXRlcih0aGlzLmV4dGVuc2lvbi5HUFVfRElTSk9JTlRfRVhUKSl7Y29uc29sZS5sb2coIkRpc2pvaW50ZWQgcXVlcnkiLGUpO3JldHVybn1yZXR1cm57Li4uZSxkdXJhdGlvbjp0aGlzLmNvbnRleHQuZ2V0UXVlcnlQYXJhbWV0ZXIoZS5xdWVyeSx0aGlzLmNvbnRleHQuUVVFUllfUkVTVUxUKSx0aW1lc3RhbXA6MH19YXN5bmMgYXdhaXRRdWVyeUF2YWlsYWJsZShlKXtmb3IobGV0IHQ9MDt0PDEwOysrdCl7aWYodGhpcy5jb250ZXh0LmdldFF1ZXJ5UGFyYW1ldGVyKGUucXVlcnksdGhpcy5jb250ZXh0LlFVRVJZX1JFU1VMVF9BVkFJTEFCTEUpKXJldHVybiBlO2F3YWl0IGduKDIwMCl9fX0vKiBAbGljZW5zZSB0d2dsLmpzIDUuMi4wIENvcHlyaWdodCAoYykgMjAxNSwgR3JlZ2cgVGF2YXJlcyBBbGwgUmlnaHRzIFJlc2VydmVkLgpBdmFpbGFibGUgdmlhIHRoZSBNSVQgbGljZW5zZS4Kc2VlOiBodHRwOi8vZ2l0aHViLmNvbS9ncmVnZ21hbi90d2dsLmpzIGZvciBkZXRhaWxzICovY29uc3QgSnQ9NTEyMCxOZT01MTIxLFp0PTUxMjIsZXI9NTEyMyx0cj01MTI0LHJyPTUxMjUsbnI9NTEyNixTcz0zMjgxOSxJcz0zMjgyMCxGcz0zMzYzNSxQcz01MTMxLERzPTMzNjQwLE1zPTM1ODk5LENzPTM1OTAyLE9zPTM2MjY5LE5zPTM0MDQyLGJuPXt9O3tjb25zdCByPWJuO3JbSnRdPUludDhBcnJheSxyW05lXT1VaW50OEFycmF5LHJbWnRdPUludDE2QXJyYXkscltlcl09VWludDE2QXJyYXksclt0cl09SW50MzJBcnJheSxyW3JyXT1VaW50MzJBcnJheSxyW25yXT1GbG9hdDMyQXJyYXkscltTc109VWludDE2QXJyYXkscltJc109VWludDE2QXJyYXkscltGc109VWludDE2QXJyYXkscltQc109VWludDE2QXJyYXkscltEc109VWludDMyQXJyYXkscltNc109VWludDMyQXJyYXkscltDc109VWludDMyQXJyYXkscltPc109VWludDMyQXJyYXkscltOc109VWludDMyQXJyYXl9ZnVuY3Rpb24gaXIocil7aWYociBpbnN0YW5jZW9mIEludDhBcnJheSlyZXR1cm4gSnQ7aWYociBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fHIgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSlyZXR1cm4gTmU7aWYociBpbnN0YW5jZW9mIEludDE2QXJyYXkpcmV0dXJuIFp0O2lmKHIgaW5zdGFuY2VvZiBVaW50MTZBcnJheSlyZXR1cm4gZXI7aWYociBpbnN0YW5jZW9mIEludDMyQXJyYXkpcmV0dXJuIHRyO2lmKHIgaW5zdGFuY2VvZiBVaW50MzJBcnJheSlyZXR1cm4gcnI7aWYociBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSlyZXR1cm4gbnI7dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCB0eXBlZCBhcnJheSB0eXBlIil9ZnVuY3Rpb24gdm4ocil7aWYocj09PUludDhBcnJheSlyZXR1cm4gSnQ7aWYocj09PVVpbnQ4QXJyYXl8fHI9PT1VaW50OENsYW1wZWRBcnJheSlyZXR1cm4gTmU7aWYocj09PUludDE2QXJyYXkpcmV0dXJuIFp0O2lmKHI9PT1VaW50MTZBcnJheSlyZXR1cm4gZXI7aWYocj09PUludDMyQXJyYXkpcmV0dXJuIHRyO2lmKHI9PT1VaW50MzJBcnJheSlyZXR1cm4gcnI7aWYocj09PUZsb2F0MzJBcnJheSlyZXR1cm4gbnI7dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCB0eXBlZCBhcnJheSB0eXBlIil9ZnVuY3Rpb24gRW4ocil7Y29uc3QgZT1ibltyXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoInVua25vd24gZ2wgdHlwZSIpO3JldHVybiBlfWNvbnN0IGF0PXR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlcjwidSI/ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuYnVmZmVyJiYoZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8ZS5idWZmZXIgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlcil9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmJ1ZmZlciYmZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcn07ZnVuY3Rpb24gVG4oLi4ucil7Y29uc29sZS5lcnJvciguLi5yKX1jb25zdCBBbj1uZXcgTWFwO2Z1bmN0aW9uIHV0KHIsZSl7aWYoIXJ8fHR5cGVvZiByIT0ib2JqZWN0IilyZXR1cm4hMTtsZXQgdD1Bbi5nZXQoZSk7dHx8KHQ9bmV3IFdlYWtNYXAsQW4uc2V0KGUsdCkpO2xldCBuPXQuZ2V0KHIpO2lmKG49PT12b2lkIDApe2NvbnN0IGk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpO249aS5zdWJzdHJpbmcoOCxpLmxlbmd0aC0xKT09PWUsdC5zZXQocixuKX1yZXR1cm4gbn1mdW5jdGlvbiBVcyhyLGUpe3JldHVybiB0eXBlb2YgV2ViR0xCdWZmZXI8InUiJiZ1dChlLCJXZWJHTEJ1ZmZlciIpfWZ1bmN0aW9uIEJzKHIsZSl7cmV0dXJuIHR5cGVvZiBXZWJHTFJlbmRlcmJ1ZmZlcjwidSImJnV0KGUsIldlYkdMUmVuZGVyYnVmZmVyIil9ZnVuY3Rpb24gb3IocixlKXtyZXR1cm4gdHlwZW9mIFdlYkdMVGV4dHVyZTwidSImJnV0KGUsIldlYkdMVGV4dHVyZSIpfWZ1bmN0aW9uIGtzKHIsZSl7cmV0dXJuIHR5cGVvZiBXZWJHTFNhbXBsZXI8InUiJiZ1dChlLCJXZWJHTFNhbXBsZXIiKX1jb25zdCB3bj0zNTA0NCxwZT0zNDk2MixMcz0zNDk2Mywkcz0zNDY2MCxHcz01MTIwLHpzPTUxMjEsSHM9NTEyMixWcz01MTIzLFdzPTUxMjQsanM9NTEyNSxSbj01MTI2LFNuPXthdHRyaWJQcmVmaXg6IiJ9O2Z1bmN0aW9uIHFzKHIsZSx0LG4saSl7ci5iaW5kQnVmZmVyKGUsdCksci5idWZmZXJEYXRhKGUsbixpfHx3bil9ZnVuY3Rpb24gSW4ocixlLHQsbil7aWYoVXMocixlKSlyZXR1cm4gZTt0PXR8fHBlO2NvbnN0IGk9ci5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gcXMocix0LGksZSxuKSxpfWZ1bmN0aW9uIEZuKHIpe3JldHVybiByPT09ImluZGljZXMifWZ1bmN0aW9uIFhzKHIpe3JldHVybiByPT09SW50OEFycmF5fHxyPT09VWludDhBcnJheX1mdW5jdGlvbiBZcyhyKXtyZXR1cm4gci5sZW5ndGg/cjpyLmRhdGF9Y29uc3QgUXM9L2Nvb3JkfHRleHR1cmUvaSxLcz0vY29sb3J8Y29sb3VyL2k7ZnVuY3Rpb24gSnMocixlKXtsZXQgdDtpZihRcy50ZXN0KHIpP3Q9MjpLcy50ZXN0KHIpP3Q9NDp0PTMsZSV0PjApdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGd1ZXNzIG51bUNvbXBvbmVudHMgZm9yIGF0dHJpYnV0ZSAnJHtyfScuIFRyaWVkICR7dH0gYnV0ICR7ZX0gdmFsdWVzIGlzIG5vdCBldmVubHkgZGl2aXNpYmxlIGJ5ICR7dH0uIFlvdSBzaG91bGQgc3BlY2lmeSBpdC5gKTtyZXR1cm4gdH1mdW5jdGlvbiBacyhyLGUsdCl7cmV0dXJuIHIubnVtQ29tcG9uZW50c3x8ci5zaXplfHxKcyhlLHR8fFlzKHIpLmxlbmd0aCl9ZnVuY3Rpb24gUG4ocixlKXtpZihhdChyKSlyZXR1cm4gcjtpZihhdChyLmRhdGEpKXJldHVybiByLmRhdGE7QXJyYXkuaXNBcnJheShyKSYmKHI9e2RhdGE6cn0pO2xldCB0PXIudHlwZT9zcihyLnR5cGUpOnZvaWQgMDtyZXR1cm4gdHx8KEZuKGUpP3Q9VWludDE2QXJyYXk6dD1GbG9hdDMyQXJyYXkpLG5ldyB0KHIuZGF0YSl9ZnVuY3Rpb24gZWEocil7cmV0dXJuIHR5cGVvZiByPT0ibnVtYmVyIj9yOnI/dm4ocik6Um59ZnVuY3Rpb24gc3Iocil7cmV0dXJuIHR5cGVvZiByPT0ibnVtYmVyIj9FbihyKTpyfHxGbG9hdDMyQXJyYXl9ZnVuY3Rpb24gdGEocixlKXtyZXR1cm57YnVmZmVyOmUuYnVmZmVyLG51bVZhbHVlczoyKjMqNCx0eXBlOmVhKGUudHlwZSksYXJyYXlUeXBlOnNyKGUudHlwZSl9fWZ1bmN0aW9uIHJhKHIsZSl7Y29uc3QgdD1lLmRhdGF8fGUsbj1zcihlLnR5cGUpLGk9dCpuLkJZVEVTX1BFUl9FTEVNRU5ULG89ci5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gci5iaW5kQnVmZmVyKHBlLG8pLHIuYnVmZmVyRGF0YShwZSxpLGUuZHJhd1R5cGV8fHduKSx7YnVmZmVyOm8sbnVtVmFsdWVzOnQsdHlwZTp2bihuKSxhcnJheVR5cGU6bn19ZnVuY3Rpb24gbmEocixlLHQpe2NvbnN0IG49UG4oZSx0KTtyZXR1cm57YXJyYXlUeXBlOm4uY29uc3RydWN0b3IsYnVmZmVyOkluKHIsbix2b2lkIDAsZS5kcmF3VHlwZSksdHlwZTppcihuKSxudW1WYWx1ZXM6MH19ZnVuY3Rpb24gaWEocixlKXtjb25zdCB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKCFGbihuKSl7Y29uc3QgaT1lW25dLG89aS5hdHRyaWJ8fGkubmFtZXx8aS5hdHRyaWJOYW1lfHxTbi5hdHRyaWJQcmVmaXgrbjtpZihpLnZhbHVlKXtpZighQXJyYXkuaXNBcnJheShpLnZhbHVlKSYmIWF0KGkudmFsdWUpKXRocm93IG5ldyBFcnJvcigiYXJyYXkudmFsdWUgaXMgbm90IGFycmF5IG9yIHR5cGVkYXJyYXkiKTt0W29dPXt2YWx1ZTppLnZhbHVlfX1lbHNle2xldCBzO2kuYnVmZmVyJiZpLmJ1ZmZlciBpbnN0YW5jZW9mIFdlYkdMQnVmZmVyP3M9dGE6dHlwZW9mIGk9PSJudW1iZXIifHx0eXBlb2YgaS5kYXRhPT0ibnVtYmVyIj9zPXJhOnM9bmE7Y29uc3R7YnVmZmVyOmEsdHlwZTp1LG51bVZhbHVlczpmLGFycmF5VHlwZTpjfT1zKHIsaSxuKSxkPWkubm9ybWFsaXplIT09dm9pZCAwP2kubm9ybWFsaXplOlhzKGMpLHk9WnMoaSxuLGYpO3Rbb109e2J1ZmZlcjphLG51bUNvbXBvbmVudHM6eSx0eXBlOnUsbm9ybWFsaXplOmQsc3RyaWRlOmkuc3RyaWRlfHwwLG9mZnNldDppLm9mZnNldHx8MCxkaXZpc29yOmkuZGl2aXNvcj09PXZvaWQgMD92b2lkIDA6aS5kaXZpc29yLGRyYXdUeXBlOmkuZHJhd1R5cGV9fX19KSxyLmJpbmRCdWZmZXIocGUsbnVsbCksdH1mdW5jdGlvbiBvYShyLGUpe3JldHVybiBlPT09R3N8fGU9PT16cz8xOmU9PT1Ic3x8ZT09PVZzPzI6ZT09PVdzfHxlPT09anN8fGU9PT1Sbj80OjB9Y29uc3QgYXI9WyJwb3NpdGlvbiIsInBvc2l0aW9ucyIsImFfcG9zaXRpb24iXTtmdW5jdGlvbiBzYShyLGUpe2xldCB0LG47Zm9yKG49MDtuPGFyLmxlbmd0aCYmKHQ9YXJbbl0sISh0IGluIGV8fCh0PVNuLmF0dHJpYlByZWZpeCt0LHQgaW4gZSkpKTsrK24pO249PT1hci5sZW5ndGgmJih0PU9iamVjdC5rZXlzKGUpWzBdKTtjb25zdCBpPWVbdF07aWYoIWkuYnVmZmVyKXJldHVybiAxO3IuYmluZEJ1ZmZlcihwZSxpLmJ1ZmZlcik7Y29uc3Qgbz1yLmdldEJ1ZmZlclBhcmFtZXRlcihwZSwkcyk7ci5iaW5kQnVmZmVyKHBlLG51bGwpO2NvbnN0IHM9b2EocixpLnR5cGUpLGE9by9zLHU9aS5udW1Db21wb25lbnRzfHxpLnNpemUsZj1hL3U7aWYoZiUxIT09MCl0aHJvdyBuZXcgRXJyb3IoYG51bUNvbXBvbmVudHMgJHt1fSBub3QgY29ycmVjdCBmb3IgbGVuZ3RoICR7bGVuZ3RofWApO3JldHVybiBmfWZ1bmN0aW9uIGFhKHIsZSx0KXtjb25zdCBuPWlhKHIsZSksaT1PYmplY3QuYXNzaWduKHt9LHR8fHt9KTtpLmF0dHJpYnM9T2JqZWN0LmFzc2lnbih7fSx0P3QuYXR0cmliczp7fSxuKTtjb25zdCBvPWUuaW5kaWNlcztpZihvKXtjb25zdCBzPVBuKG8sImluZGljZXMiKTtpLmluZGljZXM9SW4ocixzLExzKSxpLm51bUVsZW1lbnRzPXMubGVuZ3RoLGkuZWxlbWVudFR5cGU9aXIocyl9ZWxzZSBpLm51bUVsZW1lbnRzfHwoaS5udW1FbGVtZW50cz1zYShyLGkuYXR0cmlicykpO3JldHVybiBpfWZ1bmN0aW9uIFVlKHIpe3JldHVybiEhci50ZXhTdG9yYWdlMkR9Y29uc3QgRG49ZnVuY3Rpb24oKXtjb25zdCByPXt9LGU9e307ZnVuY3Rpb24gdChuKXtjb25zdCBpPW4uY29uc3RydWN0b3IubmFtZTtpZighcltpXSl7Zm9yKGNvbnN0IG8gaW4gbilpZih0eXBlb2YgbltvXT09Im51bWJlciIpe2NvbnN0IHM9ZVtuW29dXTtlW25bb11dPXM/YCR7c30gfCAke299YDpvfXJbaV09ITB9fXJldHVybiBmdW5jdGlvbihpLG8pe3JldHVybiB0KGkpLGVbb118fCh0eXBlb2Ygbz09Im51bWJlciI/YDB4JHtvLnRvU3RyaW5nKDE2KX1gOm8pfX0oKSxhZT17dGV4dHVyZUNvbG9yOm5ldyBVaW50OEFycmF5KFsxMjgsMTkyLDI1NSwyNTVdKSx0ZXh0dXJlT3B0aW9uczp7fSxjcm9zc09yaWdpbjp2b2lkIDB9LEJlPWF0LE1uPWZ1bmN0aW9uKCl7bGV0IHI7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHI9cnx8KHR5cGVvZiBkb2N1bWVudDwidSImJmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTpudWxsKSxyfX0oKSxDbj02NDA2LFo9NjQwNyxGPTY0MDgsT249NjQwOSxObj02NDEwLGtlPTY0MDIsVW49MzQwNDEsY3Q9MzMwNzEsdWE9OTcyOCxjYT05NzI5LHVlPTM1NTMsY2U9MzQwNjcseWU9MzI4NzksX2U9MzU4NjYsdXI9MzQwNjksZmE9MzQwNzAsbGE9MzQwNzEsZGE9MzQwNzIsbWE9MzQwNzMsaGE9MzQwNzQsY3I9MTAyNDEsZnI9MTAyNDAsZnQ9MTAyNDIsbHQ9MTAyNDMsQm49MzI4ODIscGE9MzMwODIseWE9MzMwODMsX2E9MzMwODQseGE9MzMwODUsbHI9MzMxNyxrbj0zMzE0LExuPTMyODc4LCRuPTMzMTYsR249MzMxNSx6bj0zMjg3NyxnYT0zNzQ0MyxiYT0zNzQ0MSx2YT0zNzQ0MCxFYT0zMzMyMSxUYT0zNjc1NixBYT0zMzMyNSx3YT0zMzMyNixSYT0zMzMzMCxTYT0zMzMyOSxJYT0zMzMzOCxGYT0zMzMzNyxQYT0zMzM0MCxEYT0zMzMzOSxNYT0zMzMyMyxDYT0zNjc1NyxPYT0zMzMyNyxOYT0zMzMyOCxVYT0zMzMzNixCYT0zMzMzNSxrYT0zMzMzMixMYT0zMzMzMSwkYT0zMzMzNCxHYT0zMzMzMyx6YT0zMjg0OSxIYT0zNTkwNSxWYT0zNjE5NCxXYT0zNjc1OCxqYT0zNTg5OCxxYT0zNTkwMSxYYT0zNDg0MyxZYT0zNDgzNyxRYT0zNjIyMSxLYT0zNjIzOSxKYT0zNjIxNSxaYT0zNjIzMyxldT0zNjIwOSx0dT0zNjIyNyxydT0zMjg1NixudT0zNTkwNyxpdT0zNjc1OSxvdT0zMjg1NSxzdT0zMjg1NCxhdT0zMjg1Nyx1dT0zNDg0MixjdT0zNDgzNixmdT0zNjIyMCxsdT0zNjIzOCxkdT0zNjk3NSxtdT0zNjIxNCxodT0zNjIzMixwdT0zNjIyNix5dT0zNjIwOCxfdT0zMzE4OSx4dT0zMzE5MCxndT0zNjAxMixidT0zNjAxMyx2dT0zNTA1NixmZT01MTIwLEk9NTEyMSxkdD01MTIyLFNlPTUxMjMsbXQ9NTEyNCx4ZT01MTI1LEI9NTEyNixIbj0zMjgxOSxWbj0zMjgyMCxXbj0zMzYzNSxqPTUxMzEsTGU9MzYxOTMsZHI9MzM2NDAsRXU9MzU4OTksVHU9MzU5MDIsQXU9MzYyNjksd3U9MzQwNDIsaHQ9MzMzMTksSWU9MzMzMjAscHQ9NjQwMyxGZT0zNjI0NCxQZT0zNjI0OCxnZT0zNjI0OTtsZXQgbXI7ZnVuY3Rpb24geXQocil7aWYoIW1yKXtjb25zdCBlPXt9O2VbQ25dPXt0ZXh0dXJlRm9ybWF0OkNuLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzEsMiwyLDRdLHR5cGU6W0ksaixMZSxCXX0sZVtPbl09e3RleHR1cmVGb3JtYXQ6T24sY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMSwyLDIsNF0sdHlwZTpbSSxqLExlLEJdfSxlW05uXT17dGV4dHVyZUZvcm1hdDpObixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsyLDQsNCw4XSx0eXBlOltJLGosTGUsQl19LGVbWl09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlszLDYsNiwxMiwyXSx0eXBlOltJLGosTGUsQixXbl19LGVbRl09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0LDgsOCwxNiwyLDJdLHR5cGU6W0ksaixMZSxCLEhuLFZuXX0sZVtrZV09e3RleHR1cmVGb3JtYXQ6a2UsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMiw0XSx0eXBlOlt4ZSxTZV19LGVbRWFdPXt0ZXh0dXJlRm9ybWF0OnB0LGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzFdLHR5cGU6W0ldfSxlW1RhXT17dGV4dHVyZUZvcm1hdDpwdCxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsxXSx0eXBlOltmZV19LGVbQWFdPXt0ZXh0dXJlRm9ybWF0OnB0LGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzQsMl0sdHlwZTpbQixqXX0sZVt3YV09e3RleHR1cmVGb3JtYXQ6cHQsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNF0sdHlwZTpbQl19LGVbUmFdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzFdLHR5cGU6W0ldfSxlW1NhXT17dGV4dHVyZUZvcm1hdDpGZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxXSx0eXBlOltmZV19LGVba2FdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W1NlXX0sZVtMYV09e3RleHR1cmVGb3JtYXQ6RmUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbZHRdfSxlWyRhXT17dGV4dHVyZUZvcm1hdDpGZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt4ZV19LGVbR2FdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W210XX0sZVtNYV09e3RleHR1cmVGb3JtYXQ6aHQsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbSV19LGVbQ2FdPXt0ZXh0dXJlRm9ybWF0Omh0LGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W2ZlXX0sZVtPYV09e3RleHR1cmVGb3JtYXQ6aHQsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbOCw0XSx0eXBlOltCLGpdfSxlW05hXT17dGV4dHVyZUZvcm1hdDpodCxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols4XSx0eXBlOltCXX0sZVtVYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbSV19LGVbQmFdPXt0ZXh0dXJlRm9ybWF0OkllLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W2ZlXX0sZVtJYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNF0sdHlwZTpbU2VdfSxlW0ZhXT17dGV4dHVyZUZvcm1hdDpJZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltkdF19LGVbUGFdPXt0ZXh0dXJlRm9ybWF0OkllLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzhdLHR5cGU6W3hlXX0sZVtEYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbOF0sdHlwZTpbbXRdfSxlW3phXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW0hhXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW1ZhXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzMsMl0sdHlwZTpbSSxXbl19LGVbV2FdPXt0ZXh0dXJlRm9ybWF0OlosY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbM10sdHlwZTpbZmVdfSxlW2phXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzEyLDYsNF0sdHlwZTpbQixqLEV1XX0sZVtxYV09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsxMiw2LDRdLHR5cGU6W0IsaixUdV19LGVbWGFdPXt0ZXh0dXJlRm9ybWF0OlosY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMTIsNl0sdHlwZTpbQixqXX0sZVtZYV09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbQl19LGVbUWFdPXt0ZXh0dXJlRm9ybWF0OlBlLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW0thXT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlszXSx0eXBlOltmZV19LGVbSmFdPXt0ZXh0dXJlRm9ybWF0OlBlLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzZdLHR5cGU6W1NlXX0sZVtaYV09e3RleHR1cmVGb3JtYXQ6UGUsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNl0sdHlwZTpbZHRdfSxlW2V1XT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbeGVdfSxlW3R1XT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbbXRdfSxlW3J1XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW251XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW2l1XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W2ZlXX0sZVtvdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0LDIsNF0sdHlwZTpbSSxWbixkcl19LGVbc3VdPXt0ZXh0dXJlRm9ybWF0OkYsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbNCwyXSx0eXBlOltJLEhuXX0sZVthdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltkcl19LGVbdXVdPXt0ZXh0dXJlRm9ybWF0OkYsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMTYsOF0sdHlwZTpbQixqXX0sZVtjdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxNl0sdHlwZTpbQl19LGVbZnVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW2x1XT17dGV4dHVyZUZvcm1hdDpnZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltmZV19LGVbZHVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W2RyXX0sZVttdV09e3RleHR1cmVGb3JtYXQ6Z2UsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbOF0sdHlwZTpbU2VdfSxlW2h1XT17dGV4dHVyZUZvcm1hdDpnZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols4XSx0eXBlOltkdF19LGVbcHVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzE2XSx0eXBlOlttdF19LGVbeXVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzE2XSx0eXBlOlt4ZV19LGVbX3VdPXt0ZXh0dXJlRm9ybWF0OmtlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzIsNF0sdHlwZTpbU2UseGVdfSxlW3h1XT17dGV4dHVyZUZvcm1hdDprZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt4ZV19LGVbZ3VdPXt0ZXh0dXJlRm9ybWF0OmtlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0JdfSxlW3Z1XT17dGV4dHVyZUZvcm1hdDpVbixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt3dV19LGVbYnVdPXt0ZXh0dXJlRm9ybWF0OlVuLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0F1XX0sT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtjb25zdCBuPWVbdF07bi5ieXRlc1BlckVsZW1lbnRNYXA9e30sbi5ieXRlc1BlckVsZW1lbnQuZm9yRWFjaChmdW5jdGlvbihpLG8pe2NvbnN0IHM9bi50eXBlW29dO24uYnl0ZXNQZXJFbGVtZW50TWFwW3NdPWl9KX0pLG1yPWV9cmV0dXJuIG1yW3JdfWZ1bmN0aW9uIFJ1KHIsZSl7Y29uc3QgdD15dChyKTtpZighdCl0aHJvdyJ1bmtub3duIGludGVybmFsIGZvcm1hdCI7Y29uc3Qgbj10LmJ5dGVzUGVyRWxlbWVudE1hcFtlXTtpZihuPT09dm9pZCAwKXRocm93InVua25vd24gaW50ZXJuYWwgZm9ybWF0IjtyZXR1cm4gbn1mdW5jdGlvbiAkZShyKXtjb25zdCBlPXl0KHIpO2lmKCFlKXRocm93InVua25vd24gaW50ZXJuYWwgZm9ybWF0IjtyZXR1cm57Zm9ybWF0OmUudGV4dHVyZUZvcm1hdCx0eXBlOmUudHlwZVswXX19ZnVuY3Rpb24gam4ocil7cmV0dXJuKHImci0xKT09PTB9ZnVuY3Rpb24gU3UocixlLHQsbil7aWYoIVVlKHIpKXJldHVybiBqbihlKSYmam4odCk7Y29uc3QgaT15dChuKTtpZighaSl0aHJvdyJ1bmtub3duIGludGVybmFsIGZvcm1hdCI7cmV0dXJuIGkuY29sb3JSZW5kZXJhYmxlJiZpLnRleHR1cmVGaWx0ZXJhYmxlfWZ1bmN0aW9uIEl1KHIpe2NvbnN0IGU9eXQocik7aWYoIWUpdGhyb3cidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiO3JldHVybiBlLnRleHR1cmVGaWx0ZXJhYmxlfWZ1bmN0aW9uIEZ1KHIsZSx0KXtyZXR1cm4gQmUoZSk/aXIoZSk6dHx8SX1mdW5jdGlvbiBfdChyLGUsdCxuLGkpe2lmKGklMSE9PTApdGhyb3ciY2FuJ3QgZ3Vlc3MgZGltZW5zaW9ucyI7aWYoIXQmJiFuKXtjb25zdCBvPU1hdGguc3FydChpLyhlPT09Y2U/NjoxKSk7byUxPT09MD8odD1vLG49byk6KHQ9aSxuPTEpfWVsc2UgaWYobil7aWYoIXQmJih0PWkvbix0JTEpKXRocm93ImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMifWVsc2UgaWYobj1pL3QsbiUxKXRocm93ImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMiO3JldHVybnt3aWR0aDp0LGhlaWdodDpufX1mdW5jdGlvbiBEZShyLGUpe2UuY29sb3JzcGFjZUNvbnZlcnNpb24hPT12b2lkIDAmJnIucGl4ZWxTdG9yZWkoZ2EsZS5jb2xvcnNwYWNlQ29udmVyc2lvbiksZS5wcmVtdWx0aXBseUFscGhhIT09dm9pZCAwJiZyLnBpeGVsU3RvcmVpKGJhLGUucHJlbXVsdGlwbHlBbHBoYSksZS5mbGlwWSE9PXZvaWQgMCYmci5waXhlbFN0b3JlaSh2YSxlLmZsaXBZKX1mdW5jdGlvbiBxbihyKXtyLnBpeGVsU3RvcmVpKGxyLDQpLFVlKHIpJiYoci5waXhlbFN0b3JlaShrbiwwKSxyLnBpeGVsU3RvcmVpKExuLDApLHIucGl4ZWxTdG9yZWkoJG4sMCksci5waXhlbFN0b3JlaShHbiwwKSxyLnBpeGVsU3RvcmVpKHpuLDApKX1mdW5jdGlvbiBQdShyLGUsdCxuKXtuLm1pbk1hZyYmKHQuY2FsbChyLGUsY3Isbi5taW5NYWcpLHQuY2FsbChyLGUsZnIsbi5taW5NYWcpKSxuLm1pbiYmdC5jYWxsKHIsZSxjcixuLm1pbiksbi5tYWcmJnQuY2FsbChyLGUsZnIsbi5tYWcpLG4ud3JhcCYmKHQuY2FsbChyLGUsZnQsbi53cmFwKSx0LmNhbGwocixlLGx0LG4ud3JhcCksKGU9PT15ZXx8a3MocixlKSkmJnQuY2FsbChyLGUsQm4sbi53cmFwKSksbi53cmFwUiYmdC5jYWxsKHIsZSxCbixuLndyYXBSKSxuLndyYXBTJiZ0LmNhbGwocixlLGZ0LG4ud3JhcFMpLG4ud3JhcFQmJnQuY2FsbChyLGUsbHQsbi53cmFwVCksbi5taW5Mb2QmJnQuY2FsbChyLGUscGEsbi5taW5Mb2QpLG4ubWF4TG9kJiZ0LmNhbGwocixlLHlhLG4ubWF4TG9kKSxuLmJhc2VMZXZlbCYmdC5jYWxsKHIsZSxfYSxuLmJhc2VMZXZlbCksbi5tYXhMZXZlbCYmdC5jYWxsKHIsZSx4YSxuLm1heExldmVsKX1mdW5jdGlvbiBYbihyLGUsdCl7Y29uc3Qgbj10LnRhcmdldHx8dWU7ci5iaW5kVGV4dHVyZShuLGUpLFB1KHIsbixyLnRleFBhcmFtZXRlcmksdCl9ZnVuY3Rpb24gRHUocil7cmV0dXJuIHI9cnx8YWUudGV4dHVyZUNvbG9yLEJlKHIpP3I6bmV3IFVpbnQ4QXJyYXkoW3JbMF0qMjU1LHJbMV0qMjU1LHJbMl0qMjU1LHJbM10qMjU1XSl9ZnVuY3Rpb24gaHIocixlLHQsbixpLG8pe3Q9dHx8YWUudGV4dHVyZU9wdGlvbnMsbz1vfHxGO2NvbnN0IHM9dC50YXJnZXR8fHVlO2lmKG49bnx8dC53aWR0aCxpPWl8fHQuaGVpZ2h0LHIuYmluZFRleHR1cmUocyxlKSxTdShyLG4saSxvKSlyLmdlbmVyYXRlTWlwbWFwKHMpO2Vsc2V7Y29uc3QgYT1JdShvKT9jYTp1YTtyLnRleFBhcmFtZXRlcmkocyxjcixhKSxyLnRleFBhcmFtZXRlcmkocyxmcixhKSxyLnRleFBhcmFtZXRlcmkocyxmdCxjdCksci50ZXhQYXJhbWV0ZXJpKHMsbHQsY3QpfX1mdW5jdGlvbiBHZShyKXtyZXR1cm4gci5hdXRvPT09ITB8fHIuYXV0bz09PXZvaWQgMCYmci5sZXZlbD09PXZvaWQgMH1mdW5jdGlvbiBwcihyLGUpe3JldHVybiBlPWV8fHt9LGUuY3ViZUZhY2VPcmRlcnx8W3VyLGZhLGxhLGRhLG1hLGhhXX1mdW5jdGlvbiB5cihyLGUpe2NvbnN0IG49cHIocixlKS5tYXAoZnVuY3Rpb24oaSxvKXtyZXR1cm57ZmFjZTppLG5keDpvfX0pO3JldHVybiBuLnNvcnQoZnVuY3Rpb24oaSxvKXtyZXR1cm4gaS5mYWNlLW8uZmFjZX0pLG59ZnVuY3Rpb24gWW4ocixlLHQsbil7bj1ufHxhZS50ZXh0dXJlT3B0aW9ucztjb25zdCBpPW4udGFyZ2V0fHx1ZSxvPW4ubGV2ZWx8fDA7bGV0IHM9dC53aWR0aCxhPXQuaGVpZ2h0O2NvbnN0IHU9bi5pbnRlcm5hbEZvcm1hdHx8bi5mb3JtYXR8fEYsZj0kZSh1KSxjPW4uZm9ybWF0fHxmLmZvcm1hdCxkPW4udHlwZXx8Zi50eXBlO2lmKERlKHIsbiksci5iaW5kVGV4dHVyZShpLGUpLGk9PT1jZSl7Y29uc3QgeT10LndpZHRoLF89dC5oZWlnaHQ7bGV0IG0seDtpZih5LzY9PT1fKW09Xyx4PVswLDAsMSwwLDIsMCwzLDAsNCwwLDUsMF07ZWxzZSBpZihfLzY9PT15KW09eSx4PVswLDAsMCwxLDAsMiwwLDMsMCw0LDAsNV07ZWxzZSBpZih5LzM9PT1fLzIpbT15LzMseD1bMCwwLDEsMCwyLDAsMCwxLDEsMSwyLDFdO2Vsc2UgaWYoeS8yPT09Xy8zKW09eS8yLHg9WzAsMCwxLDAsMCwxLDEsMSwwLDIsMSwyXTtlbHNlIHRocm93ImNhbid0IGZpZ3VyZSBvdXQgY3ViZSBtYXAgZnJvbSBlbGVtZW50OiAiKyh0LnNyYz90LnNyYzp0Lm5vZGVOYW1lKTtjb25zdCB2PU1uKCk7dj8odi5jYW52YXMud2lkdGg9bSx2LmNhbnZhcy5oZWlnaHQ9bSxzPW0sYT1tLHlyKHIsbikuZm9yRWFjaChmdW5jdGlvbihiKXtjb25zdCBBPXhbYi5uZHgqMiswXSptLFA9eFtiLm5keCoyKzFdKm07di5kcmF3SW1hZ2UodCxBLFAsbSxtLDAsMCxtLG0pLHIudGV4SW1hZ2UyRChiLmZhY2Usbyx1LGMsZCx2LmNhbnZhcyl9KSx2LmNhbnZhcy53aWR0aD0xLHYuY2FudmFzLmhlaWdodD0xKTp0eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXA8InUiJiYocz1tLGE9bSx5cihyLG4pLmZvckVhY2goZnVuY3Rpb24oYil7Y29uc3QgQT14W2IubmR4KjIrMF0qbSxQPXhbYi5uZHgqMisxXSptO3IudGV4SW1hZ2UyRChiLmZhY2Usbyx1LG0sbSwwLGMsZCxudWxsKSxjcmVhdGVJbWFnZUJpdG1hcCh0LEEsUCxtLG0se3ByZW11bHRpcGx5QWxwaGE6Im5vbmUiLGNvbG9yU3BhY2VDb252ZXJzaW9uOiJub25lIn0pLnRoZW4oZnVuY3Rpb24oQyl7RGUocixuKSxyLmJpbmRUZXh0dXJlKGksZSksci50ZXhJbWFnZTJEKGIuZmFjZSxvLHUsYyxkLEMpLEdlKG4pJiZocihyLGUsbixzLGEsdSl9KX0pKX1lbHNlIGlmKGk9PT15ZXx8aT09PV9lKXtjb25zdCB5PU1hdGgubWluKHQud2lkdGgsdC5oZWlnaHQpLF89TWF0aC5tYXgodC53aWR0aCx0LmhlaWdodCksbT1fL3k7aWYobSUxIT09MCl0aHJvdyJjYW4gbm90IGNvbXB1dGUgM0QgZGltZW5zaW9ucyBvZiBlbGVtZW50Ijtjb25zdCB4PXQud2lkdGg9PT1fPzE6MCx2PXQuaGVpZ2h0PT09Xz8xOjA7ci5waXhlbFN0b3JlaShsciwxKSxyLnBpeGVsU3RvcmVpKGtuLHQud2lkdGgpLHIucGl4ZWxTdG9yZWkoTG4sMCksci5waXhlbFN0b3JlaSh6biwwKSxyLnRleEltYWdlM0QoaSxvLHUseSx5LHksMCxjLGQsbnVsbCk7Zm9yKGxldCBiPTA7YjxtOysrYil7Y29uc3QgQT1iKnkqeCxQPWIqeSp2O3IucGl4ZWxTdG9yZWkoJG4sQSksci5waXhlbFN0b3JlaShHbixQKSxyLnRleFN1YkltYWdlM0QoaSxvLDAsMCxiLHkseSwxLGMsZCx0KX1xbihyKX1lbHNlIHIudGV4SW1hZ2UyRChpLG8sdSxjLGQsdCk7R2UobikmJmhyKHIsZSxuLHMsYSx1KSxYbihyLGUsbil9ZnVuY3Rpb24gemUoKXt9ZnVuY3Rpb24gTXUocil7aWYodHlwZW9mIGRvY3VtZW50PCJ1Iil7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7cmV0dXJuIGUuaHJlZj1yLGUuaG9zdG5hbWU9PT1sb2NhdGlvbi5ob3N0bmFtZSYmZS5wb3J0PT09bG9jYXRpb24ucG9ydCYmZS5wcm90b2NvbD09PWxvY2F0aW9uLnByb3RvY29sfWVsc2V7Y29uc3QgZT1uZXcgVVJMKGxvY2F0aW9uLmhyZWYpLm9yaWdpbjtyZXR1cm4gbmV3IFVSTChyLGxvY2F0aW9uLmhyZWYpLm9yaWdpbj09PWV9fWZ1bmN0aW9uIEN1KHIsZSl7cmV0dXJuIGU9PT12b2lkIDAmJiFNdShyKT8iYW5vbnltb3VzIjplfWZ1bmN0aW9uIE91KHIsZSx0KXt0PXR8fHplO2xldCBuO2lmKGU9ZSE9PXZvaWQgMD9lOmFlLmNyb3NzT3JpZ2luLGU9Q3UocixlKSx0eXBlb2YgSW1hZ2U8InUiKXtuPW5ldyBJbWFnZSxlIT09dm9pZCAwJiYobi5jcm9zc09yaWdpbj1lKTtjb25zdCBpPWZ1bmN0aW9uKCl7bi5yZW1vdmVFdmVudExpc3RlbmVyKCJlcnJvciIsbyksbi5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixzKSxuPW51bGx9LG89ZnVuY3Rpb24oKXtjb25zdCB1PSJjb3VsZG4ndCBsb2FkIGltYWdlOiAiK3I7VG4odSksdCh1LG4pLGkoKX0scz1mdW5jdGlvbigpe3QobnVsbCxuKSxpKCl9O3JldHVybiBuLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixvKSxuLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLHMpLG4uc3JjPXIsbn1lbHNlIGlmKHR5cGVvZiBJbWFnZUJpdG1hcDwidSIpe2xldCBpLG87Y29uc3Qgcz1mdW5jdGlvbigpe3QoaSxvKX0sYT17fTtlJiYoYS5tb2RlPSJjb3JzIiksZmV0Y2gocixhKS50aGVuKGZ1bmN0aW9uKHUpe2lmKCF1Lm9rKXRocm93IHU7cmV0dXJuIHUuYmxvYigpfSkudGhlbihmdW5jdGlvbih1KXtyZXR1cm4gY3JlYXRlSW1hZ2VCaXRtYXAodSx7cHJlbXVsdGlwbHlBbHBoYToibm9uZSIsY29sb3JTcGFjZUNvbnZlcnNpb246Im5vbmUifSl9KS50aGVuKGZ1bmN0aW9uKHUpe289dSxzZXRUaW1lb3V0KHMpfSkuY2F0Y2goZnVuY3Rpb24odSl7aT11LHNldFRpbWVvdXQocyl9KSxuPW51bGx9cmV0dXJuIG59ZnVuY3Rpb24gUW4ocil7cmV0dXJuIHR5cGVvZiBJbWFnZUJpdG1hcDwidSImJnIgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcHx8dHlwZW9mIEltYWdlRGF0YTwidSImJnIgaW5zdGFuY2VvZiBJbWFnZURhdGF8fHR5cGVvZiBIVE1MRWxlbWVudDwidSImJnIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudH1mdW5jdGlvbiBfcihyLGUsdCl7cmV0dXJuIFFuKHIpPyhzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChudWxsLHIpfSkscik6T3UocixlLHQpfWZ1bmN0aW9uIHhyKHIsZSx0KXt0PXR8fGFlLnRleHR1cmVPcHRpb25zO2NvbnN0IG49dC50YXJnZXR8fHVlO2lmKHIuYmluZFRleHR1cmUobixlKSx0LmNvbG9yPT09ITEpcmV0dXJuO2NvbnN0IGk9RHUodC5jb2xvcik7aWYobj09PWNlKWZvcihsZXQgbz0wO288NjsrK28pci50ZXhJbWFnZTJEKHVyK28sMCxGLDEsMSwwLEYsSSxpKTtlbHNlIG49PT15ZXx8bj09PV9lP3IudGV4SW1hZ2UzRChuLDAsRiwxLDEsMSwwLEYsSSxpKTpyLnRleEltYWdlMkQobiwwLEYsMSwxLDAsRixJLGkpfWZ1bmN0aW9uIE51KHIsZSx0LG4pe3JldHVybiBuPW58fHplLHQ9dHx8YWUudGV4dHVyZU9wdGlvbnMseHIocixlLHQpLHQ9T2JqZWN0LmFzc2lnbih7fSx0KSxfcih0LnNyYyx0LmNyb3NzT3JpZ2luLGZ1bmN0aW9uKG8scyl7bz9uKG8sZSxzKTooWW4ocixlLHMsdCksbihudWxsLGUscykpfSl9ZnVuY3Rpb24gVXUocixlLHQsbil7bj1ufHx6ZTtjb25zdCBpPXQuc3JjO2lmKGkubGVuZ3RoIT09Nil0aHJvdyJ0aGVyZSBtdXN0IGJlIDYgdXJscyBmb3IgYSBjdWJlbWFwIjtjb25zdCBvPXQubGV2ZWx8fDAscz10LmludGVybmFsRm9ybWF0fHx0LmZvcm1hdHx8RixhPSRlKHMpLHU9dC5mb3JtYXR8fGEuZm9ybWF0LGY9dC50eXBlfHxJLGM9dC50YXJnZXR8fHVlO2lmKGMhPT1jZSl0aHJvdyJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFX0NVQkVfTUFQIjt4cihyLGUsdCksdD1PYmplY3QuYXNzaWduKHt9LHQpO2xldCBkPTY7Y29uc3QgeT1bXSxfPXByKHIsdCk7bGV0IG07ZnVuY3Rpb24geCh2KXtyZXR1cm4gZnVuY3Rpb24oYixBKXstLWQsYj95LnB1c2goYik6QS53aWR0aCE9PUEuaGVpZ2h0P3kucHVzaCgiY3ViZW1hcCBmYWNlIGltZyBpcyBub3QgYSBzcXVhcmU6ICIrQS5zcmMpOihEZShyLHQpLHIuYmluZFRleHR1cmUoYyxlKSxkPT09NT9wcigpLmZvckVhY2goZnVuY3Rpb24oUCl7ci50ZXhJbWFnZTJEKFAsbyxzLHUsZixBKX0pOnIudGV4SW1hZ2UyRCh2LG8scyx1LGYsQSksR2UodCkmJnIuZ2VuZXJhdGVNaXBtYXAoYykpLGQ9PT0wJiZuKHkubGVuZ3RoP3k6dm9pZCAwLGUsbSl9fW09aS5tYXAoZnVuY3Rpb24odixiKXtyZXR1cm4gX3Iodix0LmNyb3NzT3JpZ2luLHgoX1tiXSkpfSl9ZnVuY3Rpb24gQnUocixlLHQsbil7bj1ufHx6ZTtjb25zdCBpPXQuc3JjLG89dC5pbnRlcm5hbEZvcm1hdHx8dC5mb3JtYXR8fEYscz0kZShvKSxhPXQuZm9ybWF0fHxzLmZvcm1hdCx1PXQudHlwZXx8SSxmPXQudGFyZ2V0fHxfZTtpZihmIT09eWUmJmYhPT1fZSl0aHJvdyJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFXzNEIG9yIFRFWFRVUkVfMkRfQVJSQVkiO3hyKHIsZSx0KSx0PU9iamVjdC5hc3NpZ24oe30sdCk7bGV0IGM9aS5sZW5ndGg7Y29uc3QgZD1bXTtsZXQgeTtjb25zdCBfPXQubGV2ZWx8fDA7bGV0IG09dC53aWR0aCx4PXQuaGVpZ2h0O2NvbnN0IHY9aS5sZW5ndGg7bGV0IGI9ITA7ZnVuY3Rpb24gQShQKXtyZXR1cm4gZnVuY3Rpb24oQyxXKXtpZigtLWMsQylkLnB1c2goQyk7ZWxzZXtpZihEZShyLHQpLHIuYmluZFRleHR1cmUoZixlKSxiKXtiPSExLG09dC53aWR0aHx8Vy53aWR0aCx4PXQuaGVpZ2h0fHxXLmhlaWdodCxyLnRleEltYWdlM0QoZixfLG8sbSx4LHYsMCxhLHUsbnVsbCk7Zm9yKGxldCBpZT0wO2llPHY7KytpZSlyLnRleFN1YkltYWdlM0QoZixfLDAsMCxpZSxtLHgsMSxhLHUsVyl9ZWxzZXtsZXQgaWU9VyxYOyhXLndpZHRoIT09bXx8Vy5oZWlnaHQhPT14KSYmKFg9TW4oKSxpZT1YLmNhbnZhcyxYLmNhbnZhcy53aWR0aD1tLFguY2FudmFzLmhlaWdodD14LFguZHJhd0ltYWdlKFcsMCwwLG0seCkpLHIudGV4U3ViSW1hZ2UzRChmLF8sMCwwLFAsbSx4LDEsYSx1LGllKSxYJiZpZT09PVguY2FudmFzJiYoWC5jYW52YXMud2lkdGg9MCxYLmNhbnZhcy5oZWlnaHQ9MCl9R2UodCkmJnIuZ2VuZXJhdGVNaXBtYXAoZil9Yz09PTAmJm4oZC5sZW5ndGg/ZDp2b2lkIDAsZSx5KX19eT1pLm1hcChmdW5jdGlvbihQLEMpe3JldHVybiBfcihQLHQuY3Jvc3NPcmlnaW4sQShDKSl9KX1mdW5jdGlvbiBrdShyLGUsdCxuKXtuPW58fGFlLnRleHR1cmVPcHRpb25zO2NvbnN0IGk9bi50YXJnZXR8fHVlO3IuYmluZFRleHR1cmUoaSxlKTtsZXQgbz1uLndpZHRoLHM9bi5oZWlnaHQsYT1uLmRlcHRoO2NvbnN0IHU9bi5sZXZlbHx8MCxmPW4uaW50ZXJuYWxGb3JtYXR8fG4uZm9ybWF0fHxGLGM9JGUoZiksZD1uLmZvcm1hdHx8Yy5mb3JtYXQseT1uLnR5cGV8fEZ1KHIsdCxjLnR5cGUpO2lmKEJlKHQpKXQgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSYmKHQ9bmV3IFVpbnQ4QXJyYXkodC5idWZmZXIpKTtlbHNle2NvbnN0IHY9RW4oeSk7dD1uZXcgdih0KX1jb25zdCBfPVJ1KGYseSksbT10LmJ5dGVMZW5ndGgvXztpZihtJTEpdGhyb3cibGVuZ3RoIHdyb25nIHNpemUgZm9yIGZvcm1hdDogIitEbihyLGQpO2xldCB4O2lmKGk9PT15ZXx8aT09PV9lKWlmKCFvJiYhcyYmIWEpe2NvbnN0IHY9TWF0aC5jYnJ0KG0pO2lmKHYlMSE9PTApdGhyb3ciY2FuJ3QgZ3Vlc3MgY3ViZSBzaXplIG9mIGFycmF5IG9mIG51bUVsZW1lbnRzOiAiK207bz12LHM9dixhPXZ9ZWxzZSBvJiYoIXN8fCFhKT8oeD1fdChyLGkscyxhLG0vbykscz14LndpZHRoLGE9eC5oZWlnaHQpOnMmJighb3x8IWEpPyh4PV90KHIsaSxvLGEsbS9zKSxvPXgud2lkdGgsYT14LmhlaWdodCk6KHg9X3QocixpLG8scyxtL2EpLG89eC53aWR0aCxzPXguaGVpZ2h0KTtlbHNlIHg9X3QocixpLG8scyxtKSxvPXgud2lkdGgscz14LmhlaWdodDtpZihxbihyKSxyLnBpeGVsU3RvcmVpKGxyLG4udW5wYWNrQWxpZ25tZW50fHwxKSxEZShyLG4pLGk9PT1jZSl7Y29uc3Qgdj1fL3QuQllURVNfUEVSX0VMRU1FTlQsYj1tLzYqdjt5cihyLG4pLmZvckVhY2goQT0+e2NvbnN0IFA9YipBLm5keCxDPXQuc3ViYXJyYXkoUCxQK2IpO3IudGV4SW1hZ2UyRChBLmZhY2UsdSxmLG8scywwLGQseSxDKX0pfWVsc2UgaT09PXllfHxpPT09X2U/ci50ZXhJbWFnZTNEKGksdSxmLG8scyxhLDAsZCx5LHQpOnIudGV4SW1hZ2UyRChpLHUsZixvLHMsMCxkLHksdCk7cmV0dXJue3dpZHRoOm8saGVpZ2h0OnMsZGVwdGg6YSx0eXBlOnl9fWZ1bmN0aW9uIEx1KHIsZSx0KXtjb25zdCBuPXQudGFyZ2V0fHx1ZTtyLmJpbmRUZXh0dXJlKG4sZSk7Y29uc3QgaT10LmxldmVsfHwwLG89dC5pbnRlcm5hbEZvcm1hdHx8dC5mb3JtYXR8fEYscz0kZShvKSxhPXQuZm9ybWF0fHxzLmZvcm1hdCx1PXQudHlwZXx8cy50eXBlO2lmKERlKHIsdCksbj09PWNlKWZvcihsZXQgZj0wO2Y8NjsrK2Ypci50ZXhJbWFnZTJEKHVyK2YsaSxvLHQud2lkdGgsdC5oZWlnaHQsMCxhLHUsbnVsbCk7ZWxzZSBuPT09eWV8fG49PT1fZT9yLnRleEltYWdlM0QobixpLG8sdC53aWR0aCx0LmhlaWdodCx0LmRlcHRoLDAsYSx1LG51bGwpOnIudGV4SW1hZ2UyRChuLGksbyx0LndpZHRoLHQuaGVpZ2h0LDAsYSx1LG51bGwpfWZ1bmN0aW9uIEtuKHIsZSx0KXt0PXR8fHplLGU9ZXx8YWUudGV4dHVyZU9wdGlvbnM7Y29uc3Qgbj1yLmNyZWF0ZVRleHR1cmUoKSxpPWUudGFyZ2V0fHx1ZTtsZXQgbz1lLndpZHRofHwxLHM9ZS5oZWlnaHR8fDE7Y29uc3QgYT1lLmludGVybmFsRm9ybWF0fHxGO3IuYmluZFRleHR1cmUoaSxuKSxpPT09Y2UmJihyLnRleFBhcmFtZXRlcmkoaSxmdCxjdCksci50ZXhQYXJhbWV0ZXJpKGksbHQsY3QpKTtsZXQgdT1lLnNyYztpZih1KWlmKHR5cGVvZiB1PT0iZnVuY3Rpb24iJiYodT11KHIsZSkpLHR5cGVvZiB1PT0ic3RyaW5nIilOdShyLG4sZSx0KTtlbHNlIGlmKEJlKHUpfHxBcnJheS5pc0FycmF5KHUpJiYodHlwZW9mIHVbMF09PSJudW1iZXIifHxBcnJheS5pc0FycmF5KHVbMF0pfHxCZSh1WzBdKSkpe2NvbnN0IGY9a3UocixuLHUsZSk7bz1mLndpZHRoLHM9Zi5oZWlnaHR9ZWxzZSBBcnJheS5pc0FycmF5KHUpJiYodHlwZW9mIHVbMF09PSJzdHJpbmcifHxRbih1WzBdKSk/aT09PWNlP1V1KHIsbixlLHQpOkJ1KHIsbixlLHQpOihZbihyLG4sdSxlKSxvPXUud2lkdGgscz11LmhlaWdodCk7ZWxzZSBMdShyLG4sZSk7cmV0dXJuIEdlKGUpJiZocihyLG4sZSxvLHMsYSksWG4ocixuLGUpLG59Y29uc3QgZ3I9VG47ZnVuY3Rpb24gSm4ocil7cmV0dXJuIHR5cGVvZiBkb2N1bWVudDwidSImJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHIpOm51bGx9Y29uc3QgeHQ9MzM5ODQsZ3Q9MzQ5NjIsJHU9MzQ5NjMsR3U9MzU3MTMsenU9MzU3MTQsSHU9MzU2MzIsVnU9MzU2MzMsV3U9MzU5ODEsWm49MzU3MTgsanU9MzU3MjEscXU9MzU5NzEsWHU9MzUzODIsWXU9MzUzOTYsUXU9MzUzOTgsS3U9MzUzOTIsSnU9MzUzOTUsYnQ9NTEyNixlaT0zNTY2NCx0aT0zNTY2NSxyaT0zNTY2Nixicj01MTI0LG5pPTM1NjY3LGlpPTM1NjY4LG9pPTM1NjY5LHNpPTM1NjcwLGFpPTM1NjcxLHVpPTM1NjcyLGNpPTM1NjczLGZpPTM1Njc0LGxpPTM1Njc1LGRpPTM1Njc2LFp1PTM1Njc4LGVjPTM1NjgwLHRjPTM1Njc5LHJjPTM1NjgyLG5jPTM1Njg1LGljPTM1Njg2LG9jPTM1Njg3LHNjPTM1Njg4LGFjPTM1Njg5LHVjPTM1NjkwLGNjPTM2Mjg5LGZjPTM2MjkyLGxjPTM2MjkzLHZyPTUxMjUsbWk9MzYyOTQsaGk9MzYyOTUscGk9MzYyOTYsZGM9MzYyOTgsbWM9MzYyOTksaGM9MzYzMDAscGM9MzYzMDMseWM9MzYzMDYsX2M9MzYzMDcseGM9MzYzMDgsZ2M9MzYzMTEsdnQ9MzU1MyxFdD0zNDA2NyxFcj0zMjg3OSxUdD0zNTg2NixFPXt9O2Z1bmN0aW9uIHlpKHIsZSl7cmV0dXJuIEVbZV0uYmluZFBvaW50fWZ1bmN0aW9uIGJjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTFmKGUsdCl9fWZ1bmN0aW9uIHZjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTFmdihlLHQpfX1mdW5jdGlvbiBFYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0yZnYoZSx0KX19ZnVuY3Rpb24gVGMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtM2Z2KGUsdCl9fWZ1bmN0aW9uIEFjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTRmdihlLHQpfX1mdW5jdGlvbiBfaShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0xaShlLHQpfX1mdW5jdGlvbiB4aShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0xaXYoZSx0KX19ZnVuY3Rpb24gZ2kocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMml2KGUsdCl9fWZ1bmN0aW9uIGJpKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTNpdihlLHQpfX1mdW5jdGlvbiB2aShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm00aXYoZSx0KX19ZnVuY3Rpb24gd2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMXVpKGUsdCl9fWZ1bmN0aW9uIFJjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTF1aXYoZSx0KX19ZnVuY3Rpb24gU2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMnVpdihlLHQpfX1mdW5jdGlvbiBJYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0zdWl2KGUsdCl9fWZ1bmN0aW9uIEZjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTR1aXYoZSx0KX19ZnVuY3Rpb24gUGMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4MmZ2KGUsITEsdCl9fWZ1bmN0aW9uIERjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybU1hdHJpeDNmdihlLCExLHQpfX1mdW5jdGlvbiBNYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm1NYXRyaXg0ZnYoZSwhMSx0KX19ZnVuY3Rpb24gQ2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4MngzZnYoZSwhMSx0KX19ZnVuY3Rpb24gT2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4M3gyZnYoZSwhMSx0KX19ZnVuY3Rpb24gTmMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4Mng0ZnYoZSwhMSx0KX19ZnVuY3Rpb24gVWMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4NHgyZnYoZSwhMSx0KX19ZnVuY3Rpb24gQmMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4M3g0ZnYoZSwhMSx0KX19ZnVuY3Rpb24ga2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4NHgzZnYoZSwhMSx0KX19ZnVuY3Rpb24gTChyLGUsdCxuKXtjb25zdCBpPXlpKHIsZSk7cmV0dXJuIFVlKHIpP2Z1bmN0aW9uKG8pe2xldCBzLGE7b3IocixvKT8ocz1vLGE9bnVsbCk6KHM9by50ZXh0dXJlLGE9by5zYW1wbGVyKSxyLnVuaWZvcm0xaShuLHQpLHIuYWN0aXZlVGV4dHVyZSh4dCt0KSxyLmJpbmRUZXh0dXJlKGkscyksci5iaW5kU2FtcGxlcih0LGEpfTpmdW5jdGlvbihvKXtyLnVuaWZvcm0xaShuLHQpLHIuYWN0aXZlVGV4dHVyZSh4dCt0KSxyLmJpbmRUZXh0dXJlKGksbyl9fWZ1bmN0aW9uICQocixlLHQsbixpKXtjb25zdCBvPXlpKHIsZSkscz1uZXcgSW50MzJBcnJheShpKTtmb3IobGV0IGE9MDthPGk7KythKXNbYV09dCthO3JldHVybiBVZShyKT9mdW5jdGlvbihhKXtyLnVuaWZvcm0xaXYobixzKSxhLmZvckVhY2goZnVuY3Rpb24odSxmKXtyLmFjdGl2ZVRleHR1cmUoeHQrc1tmXSk7bGV0IGMsZDtvcihyLHUpPyhjPXUsZD1udWxsKTooYz11LnRleHR1cmUsZD11LnNhbXBsZXIpLHIuYmluZFNhbXBsZXIodCxkKSxyLmJpbmRUZXh0dXJlKG8sYyl9KX06ZnVuY3Rpb24oYSl7ci51bmlmb3JtMWl2KG4scyksYS5mb3JFYWNoKGZ1bmN0aW9uKHUsZil7ci5hY3RpdmVUZXh0dXJlKHh0K3NbZl0pLHIuYmluZFRleHR1cmUobyx1KX0pfX1FW2J0XT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo0LHNldHRlcjpiYyxhcnJheVNldHRlcjp2Y30sRVtlaV09e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6OCxzZXR0ZXI6RWMsY29sczoyfSxFW3RpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6VGMsY29sczozfSxFW3JpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZToxNixzZXR0ZXI6QWMsY29sczo0fSxFW2JyXT17VHlwZTpJbnQzMkFycmF5LHNpemU6NCxzZXR0ZXI6X2ksYXJyYXlTZXR0ZXI6eGl9LEVbbmldPXtUeXBlOkludDMyQXJyYXksc2l6ZTo4LHNldHRlcjpnaSxjb2xzOjJ9LEVbaWldPXtUeXBlOkludDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6YmksY29sczozfSxFW29pXT17VHlwZTpJbnQzMkFycmF5LHNpemU6MTYsc2V0dGVyOnZpLGNvbHM6NH0sRVt2cl09e1R5cGU6VWludDMyQXJyYXksc2l6ZTo0LHNldHRlcjp3YyxhcnJheVNldHRlcjpSY30sRVttaV09e1R5cGU6VWludDMyQXJyYXksc2l6ZTo4LHNldHRlcjpTYyxjb2xzOjJ9LEVbaGldPXtUeXBlOlVpbnQzMkFycmF5LHNpemU6MTIsc2V0dGVyOkljLGNvbHM6M30sRVtwaV09e1R5cGU6VWludDMyQXJyYXksc2l6ZToxNixzZXR0ZXI6RmMsY29sczo0fSxFW3NpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjQsc2V0dGVyOl9pLGFycmF5U2V0dGVyOnhpfSxFW2FpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjgsc2V0dGVyOmdpLGNvbHM6Mn0sRVt1aV09e1R5cGU6VWludDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6YmksY29sczozfSxFW2NpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjE2LHNldHRlcjp2aSxjb2xzOjR9LEVbZmldPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjMyLHNldHRlcjpQYyxyb3dzOjIsY29sczoyfSxFW2xpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo0OCxzZXR0ZXI6RGMscm93czozLGNvbHM6M30sRVtkaV09e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NjQsc2V0dGVyOk1jLHJvd3M6NCxjb2xzOjR9LEVbbmNdPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjMyLHNldHRlcjpDYyxyb3dzOjIsY29sczozfSxFW2ljXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTozMixzZXR0ZXI6TmMscm93czoyLGNvbHM6NH0sRVtvY109e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NDgsc2V0dGVyOk9jLHJvd3M6Myxjb2xzOjJ9LEVbc2NdPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjQ4LHNldHRlcjpCYyxyb3dzOjMsY29sczo0fSxFW2FjXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo2NCxzZXR0ZXI6VWMscm93czo0LGNvbHM6Mn0sRVt1Y109e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NjQsc2V0dGVyOmtjLHJvd3M6NCxjb2xzOjN9LEVbWnVdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OnZ0fSxFW2VjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpFdH0sRVt0Y109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6RXJ9LEVbcmNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OnZ0fSxFW2NjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpUdH0sRVtmY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6VHR9LEVbbGNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkV0fSxFW2RjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDp2dH0sRVttY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6RXJ9LEVbaGNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkV0fSxFW3BjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpUdH0sRVt5Y109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6dnR9LEVbX2NdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkVyfSxFW3hjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpFdH0sRVtnY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6VHR9O2Z1bmN0aW9uIEF0KHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQudmFsdWUpc3dpdGNoKHIuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLHQudmFsdWUubGVuZ3RoKXtjYXNlIDQ6ci52ZXJ0ZXhBdHRyaWI0ZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDM6ci52ZXJ0ZXhBdHRyaWIzZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDI6ci52ZXJ0ZXhBdHRyaWIyZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDE6ci52ZXJ0ZXhBdHRyaWIxZnYoZSx0LnZhbHVlKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigidGhlIGxlbmd0aCBvZiBhIGZsb2F0IGNvbnN0YW50IHZhbHVlIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA0ISIpfWVsc2Ugci5iaW5kQnVmZmVyKGd0LHQuYnVmZmVyKSxyLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLHIudmVydGV4QXR0cmliUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8YnQsdC5ub3JtYWxpemV8fCExLHQuc3RyaWRlfHwwLHQub2Zmc2V0fHwwKSxyLnZlcnRleEF0dHJpYkRpdmlzb3ImJnIudmVydGV4QXR0cmliRGl2aXNvcihlLHQuZGl2aXNvcnx8MCl9fWZ1bmN0aW9uIGxlKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQudmFsdWUpaWYoci5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoZSksdC52YWx1ZS5sZW5ndGg9PT00KXIudmVydGV4QXR0cmliNGl2KGUsdC52YWx1ZSk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIlRoZSBsZW5ndGggb2YgYW4gaW50ZWdlciBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIDQhIik7ZWxzZSByLmJpbmRCdWZmZXIoZ3QsdC5idWZmZXIpLHIuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZSksci52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8YnIsdC5zdHJpZGV8fDAsdC5vZmZzZXR8fDApLHIudmVydGV4QXR0cmliRGl2aXNvciYmci52ZXJ0ZXhBdHRyaWJEaXZpc29yKGUsdC5kaXZpc29yfHwwKX19ZnVuY3Rpb24gd3QocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYodC52YWx1ZSlpZihyLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShlKSx0LnZhbHVlLmxlbmd0aD09PTQpci52ZXJ0ZXhBdHRyaWI0dWl2KGUsdC52YWx1ZSk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIlRoZSBsZW5ndGggb2YgYW4gdW5zaWduZWQgaW50ZWdlciBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIDQhIik7ZWxzZSByLmJpbmRCdWZmZXIoZ3QsdC5idWZmZXIpLHIuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZSksci52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8dnIsdC5zdHJpZGV8fDAsdC5vZmZzZXR8fDApLHIudmVydGV4QXR0cmliRGl2aXNvciYmci52ZXJ0ZXhBdHRyaWJEaXZpc29yKGUsdC5kaXZpc29yfHwwKX19ZnVuY3Rpb24gVHIocixlLHQpe2NvbnN0IG49dC5zaXplLGk9dC5jb3VudDtyZXR1cm4gZnVuY3Rpb24obyl7ci5iaW5kQnVmZmVyKGd0LG8uYnVmZmVyKTtjb25zdCBzPW8uc2l6ZXx8by5udW1Db21wb25lbnRzfHxuLGE9cy9pLHU9by50eXBlfHxidCxjPUVbdV0uc2l6ZSpzLGQ9by5ub3JtYWxpemV8fCExLHk9by5vZmZzZXR8fDAsXz1jL2k7Zm9yKGxldCBtPTA7bTxpOysrbSlyLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGUrbSksci52ZXJ0ZXhBdHRyaWJQb2ludGVyKGUrbSxhLHUsZCxjLHkrXyptKSxyLnZlcnRleEF0dHJpYkRpdmlzb3ImJnIudmVydGV4QXR0cmliRGl2aXNvcihlK20sby5kaXZpc29yfHwwKX19Y29uc3QgRD17fTtEW2J0XT17c2l6ZTo0LHNldHRlcjpBdH0sRFtlaV09e3NpemU6OCxzZXR0ZXI6QXR9LERbdGldPXtzaXplOjEyLHNldHRlcjpBdH0sRFtyaV09e3NpemU6MTYsc2V0dGVyOkF0fSxEW2JyXT17c2l6ZTo0LHNldHRlcjpsZX0sRFtuaV09e3NpemU6OCxzZXR0ZXI6bGV9LERbaWldPXtzaXplOjEyLHNldHRlcjpsZX0sRFtvaV09e3NpemU6MTYsc2V0dGVyOmxlfSxEW3ZyXT17c2l6ZTo0LHNldHRlcjp3dH0sRFttaV09e3NpemU6OCxzZXR0ZXI6d3R9LERbaGldPXtzaXplOjEyLHNldHRlcjp3dH0sRFtwaV09e3NpemU6MTYsc2V0dGVyOnd0fSxEW3NpXT17c2l6ZTo0LHNldHRlcjpsZX0sRFthaV09e3NpemU6OCxzZXR0ZXI6bGV9LERbdWldPXtzaXplOjEyLHNldHRlcjpsZX0sRFtjaV09e3NpemU6MTYsc2V0dGVyOmxlfSxEW2ZpXT17c2l6ZTo0LHNldHRlcjpUcixjb3VudDoyfSxEW2xpXT17c2l6ZTo5LHNldHRlcjpUcixjb3VudDozfSxEW2RpXT17c2l6ZToxNixzZXR0ZXI6VHIsY291bnQ6NH07Y29uc3QgTGM9L0VSUk9SOlxzKlxkKzooXGQrKS9naTtmdW5jdGlvbiAkYyhyLGU9IiIsdD0wKXtjb25zdCBuPVsuLi5lLm1hdGNoQWxsKExjKV0saT1uZXcgTWFwKG4ubWFwKChvLHMpPT57Y29uc3QgYT1wYXJzZUludChvWzFdKSx1PW5bcysxXSxmPXU/dS5pbmRleDplLmxlbmd0aCxjPWUuc3Vic3RyaW5nKG8uaW5kZXgsZik7cmV0dXJuW2EtMSxjXX0pKTtyZXR1cm4gci5zcGxpdChgCmApLm1hcCgobyxzKT0+e2NvbnN0IGE9aS5nZXQocyk7cmV0dXJuYCR7cysxK3R9OiAke299JHthP2AKCl5eXiAke2F9YDoiIn1gfSkuam9pbihgCmApfWNvbnN0IEVpPS9eWyBcdF0qXG4vO2Z1bmN0aW9uIFRpKHIpe2xldCBlPTA7cmV0dXJuIEVpLnRlc3QocikmJihlPTEscj1yLnJlcGxhY2UoRWksIiIpKSx7bGluZU9mZnNldDplLHNoYWRlclNvdXJjZTpyfX1mdW5jdGlvbiBHYyhyLGUpe3JldHVybiByLmVycm9yQ2FsbGJhY2soZSksci5jYWxsYmFjayYmc2V0VGltZW91dCgoKT0+e3IuY2FsbGJhY2soYCR7ZX0KJHtyLmVycm9ycy5qb2luKGAKYCl9YCl9KSxudWxsfWZ1bmN0aW9uIHpjKHIsZSx0LG4pe2lmKG49bnx8Z3IsIXIuZ2V0U2hhZGVyUGFyYW1ldGVyKHQsR3UpKXtjb25zdCBvPXIuZ2V0U2hhZGVySW5mb0xvZyh0KSx7bGluZU9mZnNldDpzLHNoYWRlclNvdXJjZTphfT1UaShyLmdldFNoYWRlclNvdXJjZSh0KSksdT1gJHskYyhhLG8scyl9CkVycm9yIGNvbXBpbGluZyAke0RuKHIsZSl9OiAke299YDtyZXR1cm4gbih1KSx1fXJldHVybiIifWZ1bmN0aW9uIEFyKHIsZSx0KXtsZXQgbixpLG87aWYodHlwZW9mIGU9PSJmdW5jdGlvbiImJih0PWUsZT12b2lkIDApLHR5cGVvZiByPT0iZnVuY3Rpb24iKXQ9cixyPXZvaWQgMDtlbHNlIGlmKHImJiFBcnJheS5pc0FycmF5KHIpKXtjb25zdCBmPXI7dD1mLmVycm9yQ2FsbGJhY2sscj1mLmF0dHJpYkxvY2F0aW9ucyxuPWYudHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncyxpPWYudHJhbnNmb3JtRmVlZGJhY2tNb2RlLG89Zi5jYWxsYmFja31jb25zdCBzPXR8fGdyLGE9W10sdT17ZXJyb3JDYWxsYmFjayhmLC4uLmMpe2EucHVzaChmKSxzKGYsLi4uYyl9LHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M6bix0cmFuc2Zvcm1GZWVkYmFja01vZGU6aSxjYWxsYmFjazpvLGVycm9yczphfTt7bGV0IGY9e307QXJyYXkuaXNBcnJheShyKT9yLmZvckVhY2goZnVuY3Rpb24oYyxkKXtmW2NdPWU/ZVtkXTpkfSk6Zj1yfHx7fSx1LmF0dHJpYkxvY2F0aW9ucz1mfXJldHVybiB1fWNvbnN0IEhjPVsiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiJdO2Z1bmN0aW9uIFZjKHIsZSl7aWYoZS5pbmRleE9mKCJmcmFnIik+PTApcmV0dXJuIEh1O2lmKGUuaW5kZXhPZigidmVydCIpPj0wKXJldHVybiBWdX1mdW5jdGlvbiBXYyhyLGUsdCl7Y29uc3Qgbj1yLmdldEF0dGFjaGVkU2hhZGVycyhlKTtmb3IoY29uc3QgaSBvZiBuKXQuaGFzKGkpJiZyLmRlbGV0ZVNoYWRlcihpKTtyLmRlbGV0ZVByb2dyYW0oZSl9Y29uc3QgamM9KHI9MCk9Pm5ldyBQcm9taXNlKGU9PnNldFRpbWVvdXQoZSxyKSk7ZnVuY3Rpb24gcWMocixlLHQpe2NvbnN0IG49ci5jcmVhdGVQcm9ncmFtKCkse2F0dHJpYkxvY2F0aW9uczppLHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M6byx0cmFuc2Zvcm1GZWVkYmFja01vZGU6c309QXIodCk7Zm9yKGxldCBhPTA7YTxlLmxlbmd0aDsrK2Epe2xldCB1PWVbYV07aWYodHlwZW9mIHU9PSJzdHJpbmciKXtjb25zdCBmPUpuKHUpLGM9Zj9mLnRleHQ6dTtsZXQgZD1yW0hjW2FdXTtmJiZmLnR5cGUmJihkPVZjKHIsZi50eXBlKXx8ZCksdT1yLmNyZWF0ZVNoYWRlcihkKSxyLnNoYWRlclNvdXJjZSh1LFRpKGMpLnNoYWRlclNvdXJjZSksci5jb21waWxlU2hhZGVyKHUpLHIuYXR0YWNoU2hhZGVyKG4sdSl9fU9iamVjdC5lbnRyaWVzKGkpLmZvckVhY2goKFthLHVdKT0+ci5iaW5kQXR0cmliTG9jYXRpb24obix1LGEpKTt7bGV0IGE9bzthJiYoYS5hdHRyaWJzJiYoYT1hLmF0dHJpYnMpLEFycmF5LmlzQXJyYXkoYSl8fChhPU9iamVjdC5rZXlzKGEpKSxyLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3MobixhLHN8fFd1KSl9cmV0dXJuIHIubGlua1Byb2dyYW0obiksbn1mdW5jdGlvbiBYYyhyLGUsdCxuLGkpe2NvbnN0IG89QXIodCxuLGkpLHM9bmV3IFNldChlKSxhPXFjKHIsZSxvKTtmdW5jdGlvbiB1KGYsYyl7Y29uc3QgZD1RYyhmLGMsby5lcnJvckNhbGxiYWNrKTtyZXR1cm4gZCYmV2MoZixjLHMpLGR9aWYoby5jYWxsYmFjayl7WWMocixhKS50aGVuKCgpPT57Y29uc3QgZj11KHIsYSk7by5jYWxsYmFjayhmLGY/dm9pZCAwOmEpfSk7cmV0dXJufXJldHVybiB1KHIsYSk/dm9pZCAwOmF9YXN5bmMgZnVuY3Rpb24gWWMocixlKXtjb25zdCB0PXIuZ2V0RXh0ZW5zaW9uKCJLSFJfcGFyYWxsZWxfc2hhZGVyX2NvbXBpbGUiKSxuPXQ/KG8scyk9Pm8uZ2V0UHJvZ3JhbVBhcmFtZXRlcihzLHQuQ09NUExFVElPTl9TVEFUVVNfS0hSKTooKT0+ITA7bGV0IGk9MDtkbyBhd2FpdCBqYyhpKSxpPTFlMy82MDt3aGlsZSghbihyLGUpKX1mdW5jdGlvbiBRYyhyLGUsdCl7aWYodD10fHxnciwhci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsenUpKXtjb25zdCBpPXIuZ2V0UHJvZ3JhbUluZm9Mb2coZSk7dChgRXJyb3IgaW4gcHJvZ3JhbSBsaW5raW5nOiAke2l9YCk7Y29uc3Qgcz1yLmdldEF0dGFjaGVkU2hhZGVycyhlKS5tYXAoYT0+emMocixyLmdldFNoYWRlclBhcmFtZXRlcihhLHIuU0hBREVSX1RZUEUpLGEsdCkpO3JldHVybmAke2l9CiR7cy5maWx0ZXIoYT0+YSkuam9pbihgCmApfWB9fWZ1bmN0aW9uIEtjKHIsZSx0LG4saSl7cmV0dXJuIFhjKHIsZSx0LG4saSl9ZnVuY3Rpb24gQWkocil7Y29uc3QgZT1yLm5hbWU7cmV0dXJuIGUuc3RhcnRzV2l0aCgiZ2xfIil8fGUuc3RhcnRzV2l0aCgid2ViZ2xfIil9Y29uc3QgSmM9LyhcLnxcW3xdfFx3KykvZyxaYz1yPT5yPj0iMCImJnI8PSI5IjtmdW5jdGlvbiBlZihyLGUsdCxuKXtjb25zdCBpPXIuc3BsaXQoSmMpLmZpbHRlcihhPT5hIT09IiIpO2xldCBvPTAscz0iIjtmb3IoOzspe2NvbnN0IGE9aVtvKytdO3MrPWE7Y29uc3QgdT1aYyhhWzBdKSxmPXU/cGFyc2VJbnQoYSk6YTtpZih1JiYocys9aVtvKytdKSxvPT09aS5sZW5ndGgpe3RbZl09ZTticmVha31lbHNle2NvbnN0IGQ9aVtvKytdLHk9ZD09PSJbIixfPXRbZl18fCh5P1tdOnt9KTt0W2ZdPV8sdD1fLG5bc109bltzXXx8ZnVuY3Rpb24obSl7cmV0dXJuIGZ1bmN0aW9uKHgpe3dpKG0seCl9fShfKSxzKz1kfX19ZnVuY3Rpb24gdGYocixlKXtsZXQgdD0wO2Z1bmN0aW9uIG4oYSx1LGYpe2NvbnN0IGM9dS5uYW1lLmVuZHNXaXRoKCJbMF0iKSxkPXUudHlwZSx5PUVbZF07aWYoIXkpdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIHR5cGU6IDB4JHtkLnRvU3RyaW5nKDE2KX1gKTtsZXQgXztpZih5LmJpbmRQb2ludCl7Y29uc3QgbT10O3QrPXUuc2l6ZSxjP189eS5hcnJheVNldHRlcihyLGQsbSxmLHUuc2l6ZSk6Xz15LnNldHRlcihyLGQsbSxmLHUuc2l6ZSl9ZWxzZSB5LmFycmF5U2V0dGVyJiZjP189eS5hcnJheVNldHRlcihyLGYpOl89eS5zZXR0ZXIocixmKTtyZXR1cm4gXy5sb2NhdGlvbj1mLF99Y29uc3QgaT17fSxvPXt9LHM9ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsWm4pO2ZvcihsZXQgYT0wO2E8czsrK2Epe2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtKGUsYSk7aWYoQWkodSkpY29udGludWU7bGV0IGY9dS5uYW1lO2YuZW5kc1dpdGgoIlswXSIpJiYoZj1mLnN1YnN0cigwLGYubGVuZ3RoLTMpKTtjb25zdCBjPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsdS5uYW1lKTtpZihjKXtjb25zdCBkPW4oZSx1LGMpO2lbZl09ZCxlZihmLGQsbyxpKX19cmV0dXJuIGl9ZnVuY3Rpb24gcmYocixlKXtjb25zdCB0PXt9LG49ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUscXUpO2ZvcihsZXQgaT0wO2k8bjsrK2kpe2NvbnN0IG89ci5nZXRUcmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmcoZSxpKTt0W28ubmFtZV09e2luZGV4OmksdHlwZTpvLnR5cGUsc2l6ZTpvLnNpemV9fXJldHVybiB0fWZ1bmN0aW9uIG5mKHIsZSl7Y29uc3QgdD1yLmdldFByb2dyYW1QYXJhbWV0ZXIoZSxabiksbj1bXSxpPVtdO2ZvcihsZXQgYT0wO2E8dDsrK2Epe2kucHVzaChhKSxuLnB1c2goe30pO2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtKGUsYSk7blthXS5uYW1lPXUubmFtZX1bWyJVTklGT1JNX1RZUEUiLCJ0eXBlIl0sWyJVTklGT1JNX1NJWkUiLCJzaXplIl0sWyJVTklGT1JNX0JMT0NLX0lOREVYIiwiYmxvY2tOZHgiXSxbIlVOSUZPUk1fT0ZGU0VUIiwib2Zmc2V0Il1dLmZvckVhY2goZnVuY3Rpb24oYSl7Y29uc3QgdT1hWzBdLGY9YVsxXTtyLmdldEFjdGl2ZVVuaWZvcm1zKGUsaSxyW3VdKS5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7bltkXVtmXT1jfSl9KTtjb25zdCBvPXt9LHM9ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsWHUpO2ZvcihsZXQgYT0wO2E8czsrK2Epe2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtQmxvY2tOYW1lKGUsYSksZj17aW5kZXg6ci5nZXRVbmlmb3JtQmxvY2tJbmRleChlLHUpLHVzZWRCeVZlcnRleFNoYWRlcjpyLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihlLGEsWXUpLHVzZWRCeUZyYWdtZW50U2hhZGVyOnIuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKGUsYSxRdSksc2l6ZTpyLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihlLGEsS3UpLHVuaWZvcm1JbmRpY2VzOnIuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKGUsYSxKdSl9O2YudXNlZD1mLnVzZWRCeVZlcnRleFNoYWRlcnx8Zi51c2VkQnlGcmFnbWVudFNoYWRlcixvW3VdPWZ9cmV0dXJue2Jsb2NrU3BlY3M6byx1bmlmb3JtRGF0YTpufX1mdW5jdGlvbiB3aShyLGUpe2Zvcihjb25zdCB0IGluIGUpe2NvbnN0IG49clt0XTt0eXBlb2Ygbj09ImZ1bmN0aW9uIj9uKGVbdF0pOndpKHJbdF0sZVt0XSl9fWZ1bmN0aW9uIFJpKHIsLi4uZSl7Y29uc3QgdD1yLnVuaWZvcm1TZXR0ZXJzfHxyLG49ZS5sZW5ndGg7Zm9yKGxldCBpPTA7aTxuOysraSl7Y29uc3Qgbz1lW2ldO2lmKEFycmF5LmlzQXJyYXkobykpe2NvbnN0IHM9by5sZW5ndGg7Zm9yKGxldCBhPTA7YTxzOysrYSlSaSh0LG9bYV0pfWVsc2UgZm9yKGNvbnN0IHMgaW4gbyl7Y29uc3QgYT10W3NdO2EmJmEob1tzXSl9fX1mdW5jdGlvbiBvZihyLGUpe2NvbnN0IHQ9e30sbj1yLmdldFByb2dyYW1QYXJhbWV0ZXIoZSxqdSk7Zm9yKGxldCBpPTA7aTxuOysraSl7Y29uc3Qgbz1yLmdldEFjdGl2ZUF0dHJpYihlLGkpO2lmKEFpKG8pKWNvbnRpbnVlO2NvbnN0IHM9ci5nZXRBdHRyaWJMb2NhdGlvbihlLG8ubmFtZSksYT1EW28udHlwZV0sdT1hLnNldHRlcihyLHMsYSk7dS5sb2NhdGlvbj1zLHRbby5uYW1lXT11fXJldHVybiB0fWZ1bmN0aW9uIHNmKHIsZSl7Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3Qgbj1yW3RdO24mJm4oZVt0XSl9fWZ1bmN0aW9uIGFmKHIsZSx0KXt0LnZlcnRleEFycmF5T2JqZWN0P3IuYmluZFZlcnRleEFycmF5KHQudmVydGV4QXJyYXlPYmplY3QpOihzZihlLmF0dHJpYlNldHRlcnN8fGUsdC5hdHRyaWJzKSx0LmluZGljZXMmJnIuYmluZEJ1ZmZlcigkdSx0LmluZGljZXMpKX1mdW5jdGlvbiBTaShyLGUpe2NvbnN0IHQ9dGYocixlKSxuPW9mKHIsZSksaT17cHJvZ3JhbTplLHVuaWZvcm1TZXR0ZXJzOnQsYXR0cmliU2V0dGVyczpufTtyZXR1cm4gVWUocikmJihpLnVuaWZvcm1CbG9ja1NwZWM9bmYocixlKSxpLnRyYW5zZm9ybUZlZWRiYWNrSW5mbz1yZihyLGUpKSxpfWNvbnN0IHVmPS9cc3x7fH18Oy87ZnVuY3Rpb24gY2YocixlLHQsbixpKXtjb25zdCBvPUFyKHQsbixpKSxzPVtdO2lmKGU9ZS5tYXAoZnVuY3Rpb24oZil7aWYoIXVmLnRlc3QoZikpe2NvbnN0IGM9Sm4oZik7aWYoYylmPWMudGV4dDtlbHNle2NvbnN0IGQ9YG5vIGVsZW1lbnQgd2l0aCBpZDogJHtmfWA7by5lcnJvckNhbGxiYWNrKGQpLHMucHVzaChkKX19cmV0dXJuIGZ9KSxzLmxlbmd0aClyZXR1cm4gR2MobywiIik7Y29uc3QgYT1vLmNhbGxiYWNrO2EmJihvLmNhbGxiYWNrPShmLGMpPT57YShmLGY/dm9pZCAwOlNpKHIsYykpfSk7Y29uc3QgdT1LYyhyLGUsbyk7cmV0dXJuIHU/U2kocix1KTpudWxsfWNvbnN0IGZmPTQsSWk9NTEyMztmdW5jdGlvbiBsZihyLGUsdCxuLGksbyl7dD10PT09dm9pZCAwP2ZmOnQ7Y29uc3Qgcz1lLmluZGljZXMsYT1lLmVsZW1lbnRUeXBlLHU9bj09PXZvaWQgMD9lLm51bUVsZW1lbnRzOm47aT1pPT09dm9pZCAwPzA6aSxhfHxzP28hPT12b2lkIDA/ci5kcmF3RWxlbWVudHNJbnN0YW5jZWQodCx1LGE9PT12b2lkIDA/SWk6ZS5lbGVtZW50VHlwZSxpLG8pOnIuZHJhd0VsZW1lbnRzKHQsdSxhPT09dm9pZCAwP0lpOmUuZWxlbWVudFR5cGUsaSk6byE9PXZvaWQgMD9yLmRyYXdBcnJheXNJbnN0YW5jZWQodCxpLHUsbyk6ci5kcmF3QXJyYXlzKHQsaSx1KX1jb25zdCBGaT0zNjE2MCxSdD0zNjE2MSxkZj0zNTUzLG1mPTUxMjEsaGY9NjQwMixwZj02NDA4LHlmPTMzMTkwLF9mPTM2MDEyLHhmPTM1MDU2LGdmPTM2MDEzLGJmPTMyODU0LHZmPTMyODU1LEVmPTM2MTk0LFBpPTMzMTg5LERpPTY0MDEsTWk9MzYxNjgsd3I9MzQwNDEsUnI9MzYwNjQsU3Q9MzYwOTYsQ2k9MzYxMjgsU3I9MzMzMDYsSXI9MzMwNzEsRnI9OTcyOSxUZj1be2Zvcm1hdDpwZix0eXBlOm1mLG1pbjpGcix3cmFwOklyfSx7Zm9ybWF0OndyfV0scT17fTtxW3dyXT1TcixxW0RpXT1DaSxxW01pXT1DaSxxW2hmXT1TdCxxW1BpXT1TdCxxW3lmXT1TdCxxW19mXT1TdCxxW3hmXT1TcixxW2dmXT1TcjtmdW5jdGlvbiBBZihyLGUpe3JldHVybiBxW3JdfHxxW2VdfWNvbnN0IGRlPXt9O2RlW2JmXT0hMCxkZVt2Zl09ITAsZGVbRWZdPSEwLGRlW3dyXT0hMCxkZVtQaV09ITAsZGVbRGldPSEwLGRlW01pXT0hMDtmdW5jdGlvbiB3ZihyKXtyZXR1cm4gZGVbcl19Y29uc3QgUmY9MzI7ZnVuY3Rpb24gU2Yocil7cmV0dXJuIHI+PVJyJiZyPFJyK1JmfWZ1bmN0aW9uIEl0KHIsZSx0LG4pe2NvbnN0IGk9Rmksbz1yLmNyZWF0ZUZyYW1lYnVmZmVyKCk7ci5iaW5kRnJhbWVidWZmZXIoaSxvKSx0PXR8fHIuZHJhd2luZ0J1ZmZlcldpZHRoLG49bnx8ci5kcmF3aW5nQnVmZmVySGVpZ2h0LGU9ZXx8VGY7Y29uc3Qgcz1bXSxhPXtmcmFtZWJ1ZmZlcjpvLGF0dGFjaG1lbnRzOltdLHdpZHRoOnQsaGVpZ2h0Om59O3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odSxmKXtsZXQgYz11LmF0dGFjaG1lbnQ7Y29uc3QgZD11LnNhbXBsZXMseT11LmZvcm1hdDtsZXQgXz11LmF0dGFjaG1lbnRQb2ludHx8QWYoeSx1LmludGVybmFsRm9ybWF0KTtpZihffHwoXz1ScitmKSxTZihfKSYmcy5wdXNoKF8pLCFjKWlmKGQhPT12b2lkIDB8fHdmKHkpKWM9ci5jcmVhdGVSZW5kZXJidWZmZXIoKSxyLmJpbmRSZW5kZXJidWZmZXIoUnQsYyksZD4xP3IucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKFJ0LGQseSx0LG4pOnIucmVuZGVyYnVmZmVyU3RvcmFnZShSdCx5LHQsbik7ZWxzZXtjb25zdCBtPU9iamVjdC5hc3NpZ24oe30sdSk7bS53aWR0aD10LG0uaGVpZ2h0PW4sbS5hdXRvPT09dm9pZCAwJiYobS5hdXRvPSExLG0ubWluPW0ubWlufHxtLm1pbk1hZ3x8RnIsbS5tYWc9bS5tYWd8fG0ubWluTWFnfHxGcixtLndyYXBTPW0ud3JhcFN8fG0ud3JhcHx8SXIsbS53cmFwVD1tLndyYXBUfHxtLndyYXB8fElyKSxjPUtuKHIsbSl9aWYoQnMocixjKSlyLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGksXyxSdCxjKTtlbHNlIGlmKG9yKHIsYykpdS5sYXllciE9PXZvaWQgMD9yLmZyYW1lYnVmZmVyVGV4dHVyZUxheWVyKGksXyxjLHUubGV2ZWx8fDAsdS5sYXllcik6ci5mcmFtZWJ1ZmZlclRleHR1cmUyRChpLF8sdS50YXJnZXR8fGRmLGMsdS5sZXZlbHx8MCk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gYXR0YWNobWVudCB0eXBlIik7YS5hdHRhY2htZW50cy5wdXNoKGMpfSksci5kcmF3QnVmZmVycyYmci5kcmF3QnVmZmVycyhzKSxhfWZ1bmN0aW9uIElmKHIsZSx0KXt0PXR8fEZpLGU/KHIuYmluZEZyYW1lYnVmZmVyKHQsZS5mcmFtZWJ1ZmZlciksci52aWV3cG9ydCgwLDAsZS53aWR0aCxlLmhlaWdodCkpOihyLmJpbmRGcmFtZWJ1ZmZlcih0LG51bGwpLHIudmlld3BvcnQoMCwwLHIuZHJhd2luZ0J1ZmZlcldpZHRoLHIuZHJhd2luZ0J1ZmZlckhlaWdodCkpfWZ1bmN0aW9uIFMocixlKXtyZXR1cm4oKT0+ZSBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZT9lOktuKHIse3NyYzplLHdyYXA6ci5DTEFNUF9UT19FREdFfSl9Y29uc3QgT2k9MjtjbGFzcyBiZXtjb25zdHJ1Y3RvcihlKXtwKHRoaXMsImlkIiwiXyIpO3AodGhpcywiY29udGV4dCIpO3AodGhpcywib3V0cHV0Iik7cCh0aGlzLCJmYmkiKTtwKHRoaXMsIm9wdGlvbnMiKTtwKHRoaXMsInByb2dyYW1JbmZvIik7cCh0aGlzLCJidWZmZXJJbmZvIik7cCh0aGlzLCJwcm9maWxlciIpO3AodGhpcywibGFzdFJ1biIpO2NvbnN0e2NvbnRleHQ6dCx3aWR0aDpuLGhlaWdodDppfT1lO3RoaXMuY29udGV4dD10LHRoaXMub3B0aW9ucz1lO2NvbnN0IG89dGhpcy5idWlsZERlZmluZXMoKTt0aGlzLnByb2dyYW1JbmZvPWNmKHRoaXMuY29udGV4dCxbbyt0aGlzLmdldFZlcnRleFNoYWRlcigpLG8rdGhpcy5nZXRGcmFnbWVudFNoYWRlcigpXSksdGhpcy5idWZmZXJJbmZvPWFhKHRoaXMuY29udGV4dCx0aGlzLmdldEJ1ZmZlcnMoKSksdGhpcy5mYmk9SXQodGhpcy5jb250ZXh0LFt7Zm9ybWF0OnRoaXMuY29udGV4dC5SR0JBLHR5cGU6dGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnRoaXMuY29udGV4dC5MSU5FQVIsd3JhcDp0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLG4saSksdGhpcy5vdXRwdXQ9dGhpcy5mYmkuYXR0YWNobWVudHNbMF19cmVzaXplT3V0cHV0KGUsdCl7dGhpcy5mYmk9SXQodGhpcy5jb250ZXh0LFt7Zm9ybWF0OnRoaXMuY29udGV4dC5SR0JBLHR5cGU6dGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnRoaXMuY29udGV4dC5MSU5FQVIsd3JhcDp0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLGUsdCksdGhpcy5vcHRpb25zLndpZHRoPWUsdGhpcy5vcHRpb25zLmhlaWdodD10LHRoaXMub3V0cHV0PXRoaXMuZmJpLmF0dGFjaG1lbnRzWzBdfWdldERlZmluZXMoKXtyZXR1cm57fX1nZXRCdWZmZXJzKCl7cmV0dXJue3Bvc2l0aW9uOntudW1Db21wb25lbnRzOjIsZGF0YTpbLTEsLTEsLTEsMSwxLC0xLDEsMSwtMSwxLDEsLTFdfSx0ZXh0dXJlX2Nvb3JkOntudW1Db21wb25lbnRzOjIsZGF0YTpbMCwwLDAsMSwxLDAsMSwxLDAsMSwxLDBdfX19YnVpbGREZWZpbmVzKCl7bGV0IGU9IiI7Y29uc3QgdD10aGlzLmdldERlZmluZXMoKTtmb3IobGV0IG4gaW4gdCllKz1gI2RlZmluZSAke259ICR7dFtuXS50b0ZpeGVkKDEpfQpgO3JldHVybiBlfXJ1bihlKXt2YXIgaSxvLHMsYSx1LGY7KGk9dGhpcy5wcm9maWxlcik9PW51bGx8fGkucHVzaENvbnRleHQoYFske3RoaXMuaWR9XSBQUk9HIDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCksKG89dGhpcy5wcm9maWxlcik9PW51bGx8fG8ucHVzaENvbnRleHQoYFske3RoaXMuaWR9XSBVTklGT1JNU2ApO2Zvcihjb25zdCBjIGluIGUpdHlwZW9mIGVbY109PSJmdW5jdGlvbiImJigocz10aGlzLnByb2ZpbGVyKT09bnVsbHx8cy5wdXNoQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSSA6ICR7Y31gKSxlW2NdPWVbY10oKSwoYT10aGlzLnByb2ZpbGVyKT09bnVsbHx8YS5wb3BDb250ZXh0KGBbJHt0aGlzLmlkfV0gVU5JIDogJHtjfWApKTsodT10aGlzLnByb2ZpbGVyKT09bnVsbHx8dS5wb3BDb250ZXh0KGBbJHt0aGlzLmlkfV0gVU5JRk9STVNgKTtjb25zdCB0PURhdGUubm93KCk7bGV0IG49MDt0aGlzLmxhc3RSdW4mJihuPSh0LXRoaXMubGFzdFJ1bikvMWUzKSx0aGlzLmxhc3RSdW49dCx0aGlzLmNvbnRleHQudmlld3BvcnQoMCwwLHRoaXMuY29udGV4dC5jYW52YXMud2lkdGgsdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQpLHRoaXMuY29udGV4dC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbUluZm8ucHJvZ3JhbSksYWYodGhpcy5jb250ZXh0LHRoaXMucHJvZ3JhbUluZm8sdGhpcy5idWZmZXJJbmZvKSxSaSh0aGlzLnByb2dyYW1JbmZvLHtkZWx0YTpuLGNhbnZhczpbdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCx0aGlzLmNvbnRleHQuY2FudmFzLmhlaWdodF0sLi4uZX0pLElmKHRoaXMuY29udGV4dCx0aGlzLm9wdGlvbnMuZGlzYWJsZUZyYW1lYnVmZmVyP251bGw6dGhpcy5mYmkpLGxmKHRoaXMuY29udGV4dCx0aGlzLmJ1ZmZlckluZm8pLChmPXRoaXMucHJvZmlsZXIpPT1udWxsfHxmLnBvcENvbnRleHQoYFske3RoaXMuaWR9XSBQUk9HIDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCl9c2V0UHJvZmlsZXIoZSl7dGhpcy5wcm9maWxlcj1lfX12YXIgRmY9YHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwoKdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKdW5pZm9ybSB2ZWMyIGNhbnZhczsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKdW5pZm9ybSBzYW1wbGVyMkQgbWFzazsKCnZlYzQgbG9vcCgpOwoKdm9pZCBtYWluKCkgeyBnbF9GcmFnQ29sb3IgPSBsb29wKCk7IH0KYCxQZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgO2NsYXNzIERmIGV4dGVuZHMgYmV7Z2V0RGVmaW5lcygpe3ZhciBlO3JldHVybntSQURJVVM6KGU9dGhpcy5vcHRpb25zLnJhZGl1cykhPW51bGw/ZToxfX1nZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBGZit0aGlzLmNyZWF0ZUxvb3BGdW5jdGlvbigpfWdldFZlcnRleFNoYWRlcigpe3JldHVybiBQZn1jcmVhdGVMb29wRnVuY3Rpb24oKXt2YXIgdDtsZXQgZT0odD10aGlzLm9wdGlvbnMucmFkaXVzKSE9bnVsbD90OjE7cmV0dXJuYAoKICAgICAgICB2ZWM0IGxvb3AoKSB7IAogICAgICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMCwwLDAsMCk7CiAgICAgICAgICAgIGZsb2F0IGZhY3RvclN1bSA9IDAuOwoKICAgICAgICAgICAgdmVjMiBub3JtYWxpemVkUmFkaXVzID0gdmVjMigtJHtlfS4pIC8gY2FudmFzOwogICAgICAgICAgICB2ZWMyIG5vcm1hbGl6ZWRJbmNyZW1lbnQgPSB2ZWMyKDEuKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBkaWZmID0gbm9ybWFsaXplZFJhZGl1czsKICAgICAgICAgICAgZmxvYXQgbWF4TGVuZ3RoID0gbGVuZ3RoKG5vcm1hbGl6ZWRSYWRpdXMpOwoKICAgICAgICAgICAgZm9yKGludCB5PS0ke2V9OyB5PCR7ZSsxfTsgKyt5KSB7CiAgICAgICAgICAgICAgICBmb3IoaW50IHg9LSR7ZX07IHg8JHtlKzF9OyArK3gpIHsKICAgICAgICAgICAgICAgICAgICBmbG9hdCBmYWN0b3IgPSAoMS4tIHRleHR1cmUyRChtYXNrLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpLmEpICogKG1heExlbmd0aCAtIGxlbmd0aChkaWZmKSkgLyBtYXhMZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGZhY3RvciAqIHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpOwogICAgICAgICAgICAgICAgICAgIGZhY3RvclN1bSArPSBmYWN0b3I7CiAgICAgICAgICAgICAgICAgICAgZGlmZi54ICs9IG5vcm1hbGl6ZWRJbmNyZW1lbnQueDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRpZmYueSArPSBub3JtYWxpemVkSW5jcmVtZW50Lnk7CiAgICAgICAgICAgICAgICBkaWZmLnggPSBub3JtYWxpemVkUmFkaXVzLng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAvIGZhY3RvclN1bTsKICAgICAgICB9YH19dmFyIE1mPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCnVuaWZvcm0gc2FtcGxlcjJEIGJhY2tncm91bmQ7CnVuaWZvcm0gc2FtcGxlcjJEIGZvcmVncm91bmQ7CnVuaWZvcm0gc2FtcGxlcjJEIHRocmVzaG9sZDsKCnZvaWQgbWFpbigpIHsKICB2ZWM0IGJhY2tncm91bmRDb2xvciA9IHRleHR1cmUyRChiYWNrZ3JvdW5kLCBfdGV4dHVyZV9jb29yZCk7CiAgdmVjNCBmb3JlZ3JvdW5kQ29sb3IgPSB0ZXh0dXJlMkQoZm9yZWdyb3VuZCwgX3RleHR1cmVfY29vcmQpOwogIHZlYzQgdHJlc2hvbGRDb2xvciA9IHRleHR1cmUyRCh0aHJlc2hvbGQsIF90ZXh0dXJlX2Nvb3JkKTsKICBnbF9GcmFnQ29sb3IgPSBmb3JlZ3JvdW5kQ29sb3IgKiB0cmVzaG9sZENvbG9yLmEgKwogICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciAqICgxLiAtIHRyZXNob2xkQ29sb3IuYSk7Cn0KYCxDZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKICBfdGV4dHVyZV9jb29yZC55ID0gMS4gLSB0ZXh0dXJlX2Nvb3JkLnk7Cn0KYDtjbGFzcyBQciBleHRlbmRzIGJle2dldEZyYWdtZW50U2hhZGVyKCl7cmV0dXJuIE1mfWdldFZlcnRleFNoYWRlcigpe3JldHVybiBDZn19Y2xhc3MgRHJ7Y29uc3RydWN0b3IoKXtwKHRoaXMsInN0ZXBzIixbXSk7cCh0aGlzLCJwcm9maWxlciIpfWFkZFN0ZXAoZSl7dGhpcy5zdGVwcy5wdXNoKGUpfWFzeW5jIHJ1bigpe2Zvcihjb25zdCBlIG9mIHRoaXMuc3RlcHMpZS5wcm9ncmFtLnJ1bihlLmdldFVuaWZvcm1zKCkpfXJlc2l6ZU91dHB1dChlLHQpe3ZhciBuLGk7KG49dGhpcy5wcm9maWxlcik9PW51bGx8fG4ucHVzaENvbnRleHQoYFBJUCBbJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9XWApO2Zvcihjb25zdCBvIG9mIHRoaXMuc3RlcHMpby5wcmV2ZW50UmVzaXplfHxvLnByb2dyYW0ucmVzaXplT3V0cHV0KGUsdCk7KGk9dGhpcy5wcm9maWxlcik9PW51bGx8fGkucG9wQ29udGV4dChgUElQIFske3RoaXMuY29uc3RydWN0b3IubmFtZX1dYCl9c2V0UHJvZmlsZXIoZSl7dGhpcy5wcm9maWxlcj1lO2Zvcihjb25zdCB0IG9mIHRoaXMuc3RlcHMpdC5wcm9ncmFtLnNldFByb2ZpbGVyKGUpfXNldElkKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuc3RlcHMpdC5wcm9ncmFtLmlkPWV9fWNsYXNzIE1yIGV4dGVuZHMgRHJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3AodGhpcywicHJlY2lzZU1hc2tFbmFibGVkIiwhMSl9fWNvbnN0IE9mPTEwLE5mPTIsVWY9ODtjbGFzcyBCZiBleHRlbmRzIE1ye2NvbnN0cnVjdG9yKHQsbil7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0TWFzayIpO3AodGhpcywiYmx1ciIpO3RoaXMuY29udGV4dD10LHRoaXMucmFkaXVzPW47Y29uc3QgaT17Y29udGV4dDp0LGhlaWdodDp0LmNhbnZhcy5oZWlnaHQsd2lkdGg6dC5jYW52YXMud2lkdGh9O3RoaXMuYmx1cj1uZXcgRGYoey4uLmkscmFkaXVzOm4sLi4udGhpcy5nZXRCbHVyVGV4dHVyZVNpemUodC5jYW52YXMud2lkdGgsdC5jYW52YXMuaGVpZ2h0KX0pO2NvbnN0IG89bmV3IFByKHsuLi5pLGRpc2FibGVGcmFtZWJ1ZmZlcjohMH0pO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTp0aGlzLmJsdXIscHJldmVudFJlc2l6ZTohMCxnZXRVbmlmb3JtczooKT0+KHt0ZXh0dXJlOlModCx0aGlzLmlucHV0SW1hZ2UpLG1hc2s6Uyh0LHRoaXMuaW5wdXRNYXNrKX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOm8sZ2V0VW5pZm9ybXM6KCk9Pih7YmFja2dyb3VuZDpTKHQsdGhpcy5ibHVyLm91dHB1dCksZm9yZWdyb3VuZDpTKHQsdGhpcy5pbnB1dEltYWdlKSx0aHJlc2hvbGQ6Uyh0LHRoaXMuaW5wdXRNYXNrKX0pfSl9Z2V0Qmx1clRleHR1cmVTaXplKHQsbil7Y29uc3QgaT10aGlzLnJhZGl1cz5PZj9VZjpOZjtyZXR1cm57d2lkdGg6TWF0aC5tYXgoT2ksdC9pKSxoZWlnaHQ6TWF0aC5tYXgoT2ksbi9pKX19c2V0RGF0YSh0LG4pe3RoaXMuaW5wdXRJbWFnZT10LHRoaXMuaW5wdXRNYXNrPW59cmVzaXplT3V0cHV0KHQsbil7c3VwZXIucmVzaXplT3V0cHV0KHQsbik7Y29uc3QgaT10aGlzLmdldEJsdXJUZXh0dXJlU2l6ZSh0LG4pO3RoaXMuYmx1ci5yZXNpemVPdXRwdXQoaS53aWR0aCxpLmhlaWdodCl9fWNsYXNzIE5pIGV4dGVuZHMgTXJ7Y29uc3RydWN0b3IodCl7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0QmFja2dyb3VuZEltYWdlIik7cCh0aGlzLCJpbnB1dE1hc2siKTtwKHRoaXMsInByZWNpc2VNYXNrRW5hYmxlZCIsITApO3RoaXMuY29udGV4dD10O2NvbnN0IG49e2NvbnRleHQ6dCxoZWlnaHQ6dC5jYW52YXMuaGVpZ2h0LHdpZHRoOnQuY2FudmFzLndpZHRofSxpPW5ldyBQcih7Li4ubixkaXNhYmxlRnJhbWVidWZmZXI6ITB9KTt0aGlzLmFkZFN0ZXAoe3Byb2dyYW06aSxnZXRVbmlmb3JtczooKT0+KHtiYWNrZ3JvdW5kOlModCx0aGlzLmlucHV0QmFja2dyb3VuZEltYWdlKSxmb3JlZ3JvdW5kOlModCx0aGlzLmlucHV0SW1hZ2UpLHRocmVzaG9sZDpTKHQsdGhpcy5pbnB1dE1hc2spfSl9KX1zZXREYXRhKHQsbil7dGhpcy5pbnB1dEltYWdlPXQsdGhpcy5pbnB1dE1hc2s9bn19Y2xhc3Mga2YgZXh0ZW5kcyBOaXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyk7cCh0aGlzLCJmcmFtZVJlYWRlciIpO3AodGhpcywicHJlY2lzZU1hc2tFbmFibGVkIiwhMCl9c2V0IGlucHV0VmlkZW8odCl7dGhpcy5mcmFtZVJlYWRlcj10LmdldFJlYWRlcigpLHRoaXMucmVhZE5leHRWaWRlb0ZyYW1lKCl9YXN5bmMgcnVuKCl7dGhpcy5mcmFtZVJlYWRlciYmKGF3YWl0IHN1cGVyLnJ1bigpLHRoaXMucmVhZE5leHRWaWRlb0ZyYW1lKCkpfWFzeW5jIHJlYWROZXh0VmlkZW9GcmFtZSgpe3ZhciBuO2NvbnN0IHQ9YXdhaXQoKG49dGhpcy5mcmFtZVJlYWRlcik9PW51bGw/dm9pZCAwOm4ucmVhZCgpKTt0IT1udWxsJiZ0LnZhbHVlJiYodGhpcy5pbnB1dEJhY2tncm91bmRJbWFnZT1hd2FpdCBjcmVhdGVJbWFnZUJpdG1hcCh0LnZhbHVlKSx0LnZhbHVlLmNsb3NlKCkpfX12YXIgTGY9YHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwoKdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKdW5pZm9ybSB2ZWMyIGNhbnZhczsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKCnZlYzQgbG9vcCgpOwoKdm9pZCBtYWluKCkgeyBnbF9GcmFnQ29sb3IgPSBsb29wKCk7IH0KYCwkZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgLENyPShyPT4ocltyLkxJTkVBUj0wXT0iTElORUFSIixyW3IuR0FVU1NJQU49MV09IkdBVVNTSUFOIixyKSkoQ3J8fHt9KTtjbGFzcyBVaSBleHRlbmRzIGJle2dldERlZmluZXMoKXt2YXIgZTtyZXR1cm57UkFESVVTOihlPXRoaXMub3B0aW9ucy5yYWRpdXMpIT1udWxsP2U6MX19Z2V0RnJhZ21lbnRTaGFkZXIoKXtyZXR1cm4gTGYrdGhpcy5jcmVhdGVMb29wRnVuY3Rpb24oKX1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gJGZ9Y3JlYXRlTG9vcEZ1bmN0aW9uKCl7dmFyIHQ7bGV0IGU9KHQ9dGhpcy5vcHRpb25zLnJhZGl1cykhPW51bGw/dDoxO3JldHVybmAKCiAgICAgICAgdmVjNCBsb29wKCkgeyAKICAgICAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAsMCwwLDApOwogICAgICAgICAgICBmbG9hdCBmYWN0b3JTdW0gPSAwLjsKCiAgICAgICAgICAgIHZlYzIgbm9ybWFsaXplZFJhZGl1cyA9IHZlYzIoLSR7ZX0uKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBub3JtYWxpemVkSW5jcmVtZW50ID0gdmVjMigxLikgLyBjYW52YXM7CiAgICAgICAgICAgIHZlYzIgZGlmZiA9IG5vcm1hbGl6ZWRSYWRpdXM7CgogICAgICAgICAgICBmb3IoaW50IHk9LSR7ZX07IHk8JHtlKzF9OyArK3kpIHsKICAgICAgICAgICAgICAgIGZvcihpbnQgeD0tJHtlfTsgeDwke2UrMX07ICsreCkgewogICAgICAgICAgICAgICAgICAgIGZsb2F0IGZhY3RvciA9IDEuOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBmYWN0b3IgKiB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQgKyBkaWZmKTsKICAgICAgICAgICAgICAgICAgICBmYWN0b3JTdW0gKz0gZmFjdG9yOwogICAgICAgICAgICAgICAgICAgIGRpZmYueCArPSBub3JtYWxpemVkSW5jcmVtZW50Lng7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkaWZmLnkgKz0gbm9ybWFsaXplZEluY3JlbWVudC55OwogICAgICAgICAgICAgICAgZGlmZi54ID0gbm9ybWFsaXplZFJhZGl1cy54OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQgLyBmYWN0b3JTdW07CiAgICAgICAgfWB9Z2V0RmFjdG9yKGUsdCl7c3dpdGNoKHRoaXMub3B0aW9ucy50eXBlKXtjYXNlIDE6cmV0dXJuIHRoaXMuZ2V0TGluZWFyRmFjdG9yKGUsdCk7Y2FzZSAwOmRlZmF1bHQ6cmV0dXJuIHRoaXMuZ2V0TGluZWFyRmFjdG9yKGUsdCl9fWdldExpbmVhckZhY3RvcihlLHQpe3JldHVybiAxfWdldEdhdXNzaWFuRmFjdG9yKGUsdCl7dmFyIHU7Y29uc3Qgbj1NYXRoLlBJKjIsaT1NYXRoLm1heCgodT10aGlzLm9wdGlvbnMucmFkaXVzKSE9bnVsbD91OjEsMSksbz0xLyhuKmkqKjIpLHM9LShlKioyK3QqKjIpLGE9bypzO3JldHVybiBvKk1hdGguRSoqYX19Y2xhc3MgR2YgZXh0ZW5kcyBNcntjb25zdHJ1Y3Rvcih0LG4pe3N1cGVyKCk7cCh0aGlzLCJpbnB1dEltYWdlIik7cCh0aGlzLCJpbnB1dE1hc2siKTt0aGlzLmNvbnRleHQ9dDtjb25zdCBpPXtjb250ZXh0OnQsaGVpZ2h0OnQuY2FudmFzLmhlaWdodCx3aWR0aDp0LmNhbnZhcy53aWR0aH0sbz1uZXcgVWkoey4uLmkscmFkaXVzOm4sdHlwZTpDci5HQVVTU0lBTn0pLHM9bmV3IFByKHsuLi5pLGRpc2FibGVGcmFtZWJ1ZmZlcjohMH0pO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpvLGdldFVuaWZvcm1zOigpPT4oe3RleHR1cmU6Uyh0LHRoaXMuaW5wdXRJbWFnZSl9KX0pLHRoaXMuYWRkU3RlcCh7cHJvZ3JhbTpzLGdldFVuaWZvcm1zOigpPT4oe2JhY2tncm91bmQ6Uyh0LHRoaXMuaW5wdXRJbWFnZSksZm9yZWdyb3VuZDpTKHQsby5vdXRwdXQpLHRocmVzaG9sZDpTKHQsdGhpcy5pbnB1dE1hc2spfSl9KX1zZXREYXRhKHQsbil7dGhpcy5pbnB1dEltYWdlPXQsdGhpcy5pbnB1dE1hc2s9bn19Y2xhc3MgT3IgZXh0ZW5kcyBiZXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtwKHRoaXMsImZiaTIiKTt0aGlzLmZiaTI9SXQodC5jb250ZXh0LFt7Zm9ybWF0OnQuY29udGV4dC5SR0JBLHR5cGU6dC5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnQuY29udGV4dC5MSU5FQVIsbWFnOnQuY29udGV4dC5MSU5FQVIsd3JhcDp0LmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLHQud2lkdGgsdC5oZWlnaHQpfXJ1bih0KXtjb25zdCBuPXRoaXMuZmJpO3RoaXMuZmJpPXRoaXMuZmJpMix0aGlzLmZiaTI9bix0aGlzLm91dHB1dD10aGlzLmZiaS5hdHRhY2htZW50c1swXSxzdXBlci5ydW4oey4uLnQscHJldmlvdXNfcmVuZGVyaW5nOnRoaXMuZmJpMi5hdHRhY2htZW50c1swXX0pfXJlc2l6ZU91dHB1dCh0LG4pe3N1cGVyLnJlc2l6ZU91dHB1dCh0LG4pLHRoaXMuZmJpMj1JdCh0aGlzLmNvbnRleHQsW3tmb3JtYXQ6dGhpcy5jb250ZXh0LlJHQkEsdHlwZTp0aGlzLmNvbnRleHQuVU5TSUdORURfQllURSxtaW46dGhpcy5jb250ZXh0LkxJTkVBUix3cmFwOnRoaXMuY29udGV4dC5DTEFNUF9UT19FREdFfV0sdCxuKX19dmFyIHpmPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCi8vIHVuaWZvcm0gZmxvYXQgdHJlc2hvbGQ7CnVuaWZvcm0gc2FtcGxlcjJEIGltYWdlX25vdzsKdW5pZm9ybSBzYW1wbGVyMkQgaW1hZ2VfYmVmb3JlOwp1bmlmb3JtIHNhbXBsZXIyRCBtYXNrX25vdzsKdW5pZm9ybSBzYW1wbGVyMkQgbWFza19iZWZvcmU7CnVuaWZvcm0gc2FtcGxlcjJEIHByZXZpb3VzX3JlbmRlcmluZzsKdW5pZm9ybSB2ZWMyIGNhbnZhczsKCnVuaWZvcm0gZmxvYXQgZGVsdGE7CgpmbG9hdCBjdXJyZW50X2ZhY3RvciA9IDAuNjk7CmZsb2F0IHByZXZpb3VzX2ZhY3RvciA9IDAuNzQ7CmZsb2F0IHRocmVzaG9sZF9hY3RpdmF0aW9uID0gMC41NDsKCmZsb2F0IG1hcChmbG9hdCB2YWx1ZSwgZmxvYXQgbWluMSwgZmxvYXQgbWF4MSwgZmxvYXQgbWluMiwgZmxvYXQgbWF4MikgewogIHJldHVybiBtaW4yICsgKHZhbHVlIC0gbWluMSkgKiAobWF4MiAtIG1pbjIpIC8gKG1heDEgLSBtaW4xKTsKfQoKZmxvYXQgZ2V0VGhyZXNob2xkKCkgewogIHZlYzQgY29sb3IgPSB2ZWM0KDAuKTsKICBmb3IgKGZsb2F0IHkgPSAtNi47IHkgPCA3LjsgeSArPSAxLikgewogICAgZm9yIChmbG9hdCB4ID0gLTYuOyB4IDwgNy47IHggKz0gMS4pIHsKICAgICAgdmVjNCBpbWFnZV9ub3dfY29sb3IgPQogICAgICAgICAgdGV4dHVyZTJEKGltYWdlX25vdywgX3RleHR1cmVfY29vcmQgKyB2ZWMyKHgsIHkpIC8gY2FudmFzKTsKICAgICAgdmVjNCBpbWFnZV9iZWZvcmVfY29sb3IgPQogICAgICAgICAgdGV4dHVyZTJEKGltYWdlX2JlZm9yZSwgX3RleHR1cmVfY29vcmQgKyB2ZWMyKHgsIHkpIC8gY2FudmFzKTsKICAgICAgY29sb3IgKz0gYWJzKGltYWdlX2JlZm9yZV9jb2xvciAtIGltYWdlX25vd19jb2xvcik7CiAgICB9CiAgfQogIHJldHVybiAoY29sb3IueCArIGNvbG9yLnkgKyBjb2xvci56KSAvICgzLiAqIDkuKTsKfQoKdm9pZCBtYWluKCkgewogIGZsb2F0IHRyZXNob2xkX2lucHV0ID0gLjQ7CiAgZmxvYXQgdHJlc2hvbGRfcHJldmlvdXNfcmVuZGVyaW5nID0gLjk4OwoKICB2ZWM0IG1hc2tfbm93X2NvbG9yID0gdGV4dHVyZTJEKG1hc2tfbm93LCBfdGV4dHVyZV9jb29yZCk7CiAgdmVjNCBtYXNrX2JlZm9yZV9jb2xvciA9IHRleHR1cmUyRChtYXNrX2JlZm9yZSwgX3RleHR1cmVfY29vcmQpOwogIHZlYzQgcHJldmlvdXNfcmVuZGVyaW5nX2NvbG9yID0gdGV4dHVyZTJEKHByZXZpb3VzX3JlbmRlcmluZywgX3RleHR1cmVfY29vcmQpOwoKICB2ZWMzIG1hc2tfZGlmZiA9IGFicyhtYXNrX2JlZm9yZV9jb2xvci54eXogLSBtYXNrX25vd19jb2xvci54eXopOwogIGZsb2F0IGZsaWNrZXJpbmcgPSBtYXNrX2RpZmYueDsKICBmbG9hdCB0aHJlc2hvbGQgPSBnZXRUaHJlc2hvbGQoKTsKICBpZiAodGhyZXNob2xkIDwgdGhyZXNob2xkX2FjdGl2YXRpb24pIHsKICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoZmxpY2tlcmluZywgMC4sIDAuLCAxLikgKiBjdXJyZW50X2ZhY3RvciArCiAgICAgICAgICAgICAgICAgICBwcmV2aW91c19yZW5kZXJpbmdfY29sb3IgKiBwcmV2aW91c19mYWN0b3I7CiAgICBnbF9GcmFnQ29sb3IgKj0gKDEuIC0gdGhyZXNob2xkKTsKICB9Cn0KYCxIZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgO2NsYXNzIFZmIGV4dGVuZHMgT3J7Z2V0RnJhZ21lbnRTaGFkZXIoKXtyZXR1cm4gemZ9Z2V0VmVydGV4U2hhZGVyKCl7cmV0dXJuIEhmfX12YXIgV2Y9YCN2ZXJzaW9uIDMwMCBlcwovLyBodHRwczovL2dpdGh1Yi5jb20vVm9sY29taXgvdmlydHVhbC1iYWNrZ3JvdW5kL2Jsb2IvbWFpbi9zcmMvcGlwZWxpbmVzL3dlYmdsMi9qb2ludEJpbGF0ZXJhbEZpbHRlclN0YWdlLnRzCgpwcmVjaXNpb24gaGlnaHAgZmxvYXQ7CnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0X2ZyYW1lOwp1bmlmb3JtIHNhbXBsZXIyRCBzZWdtZW50YXRpb25fbWFzazsKdW5pZm9ybSBzYW1wbGVyMkQgdGhyZXNob2xkOwp1bmlmb3JtIHZlYzIgdGV4ZWxfc2l6ZTsKdW5pZm9ybSBmbG9hdCBzdGVwOwp1bmlmb3JtIGZsb2F0IHJhZGl1czsKdW5pZm9ybSBmbG9hdCBvZmZzZXQ7CnVuaWZvcm0gZmxvYXQgc2lnbWFfdGV4ZWw7CnVuaWZvcm0gZmxvYXQgc2lnbWFfY29sb3I7CgppbiB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwpvdXQgdmVjNCBvdXRDb2xvcjsKCmZsb2F0IGdhdXNzaWFuKGZsb2F0IHgsIGZsb2F0IHNpZ21hKSB7CiAgZmxvYXQgY29lZmYgPSAtMC41IC8gKHNpZ21hICogc2lnbWEgKiA0LjAgKyAxLjBlLTYpOwogIHJldHVybiBleHAoKHggKiB4KSAqIGNvZWZmKTsKfQoKdm9pZCBtYWluKCkgewogIHZlYzIgY2VudGVyQ29vcmQgPSBfdGV4dHVyZV9jb29yZDsKICB2ZWMzIGNlbnRlckNvbG9yID0gdGV4dHVyZShpbnB1dF9mcmFtZSwgY2VudGVyQ29vcmQpLnJnYjsKICBmbG9hdCBuZXdWYWwgPSAwLjA7CiAgZmxvYXQgc3BhY2VXZWlnaHQgPSAwLjA7CiAgZmxvYXQgY29sb3JXZWlnaHQgPSAwLjA7CiAgZmxvYXQgdG90YWxXZWlnaHQgPSAwLjA7CiAgLy8gU3Vic2FtcGxlIGtlcm5lbCBzcGFjZS4KICBmb3IgKGZsb2F0IGkgPSAtcmFkaXVzICsgb2Zmc2V0OyBpIDw9IHJhZGl1czsgaSArPSBzdGVwKSB7CiAgICBmb3IgKGZsb2F0IGogPSAtcmFkaXVzICsgb2Zmc2V0OyBqIDw9IHJhZGl1czsgaiArPSBzdGVwKSB7CiAgICAgIHZlYzIgc2hpZnQgPSB2ZWMyKGosIGkpICogdGV4ZWxfc2l6ZTsKICAgICAgdmVjMiBjb29yZCA9IHZlYzIoY2VudGVyQ29vcmQgKyBzaGlmdCk7CiAgICAgIHZlYzMgZnJhbWVDb2xvciA9IHRleHR1cmUoaW5wdXRfZnJhbWUsIGNvb3JkKS5yZ2I7CiAgICAgIGZsb2F0IHRocmVzaG9sZCA9IHRleHR1cmUodGhyZXNob2xkLCBjb29yZCkuYTsKICAgICAgZmxvYXQgb3V0VmFsID0gdGV4dHVyZShzZWdtZW50YXRpb25fbWFzaywgY29vcmQpLmE7CgogICAgICBzcGFjZVdlaWdodCA9IGdhdXNzaWFuKGRpc3RhbmNlKGNlbnRlckNvb3JkLCBjb29yZCksIHNpZ21hX3RleGVsKTsKICAgICAgY29sb3JXZWlnaHQgPSBnYXVzc2lhbihkaXN0YW5jZShjZW50ZXJDb2xvciwgZnJhbWVDb2xvciksIHNpZ21hX2NvbG9yKTsKICAgICAgdG90YWxXZWlnaHQgKz0gc3BhY2VXZWlnaHQgKiBjb2xvcldlaWdodDsKICAgICAgbmV3VmFsICs9IHNwYWNlV2VpZ2h0ICogY29sb3JXZWlnaHQgKiBvdXRWYWwgKiB0aHJlc2hvbGQ7CiAgICB9CiAgfQogIG5ld1ZhbCAvPSB0b3RhbFdlaWdodDsKICBvdXRDb2xvciA9IHZlYzQodmVjMygwLiksIG5ld1ZhbCk7Cn1gLGpmPWAjdmVyc2lvbiAzMDAgZXMKaW4gdmVjMiBwb3NpdGlvbjsKaW4gdmVjMiB0ZXh0dXJlX2Nvb3JkOwpvdXQgdmVjMiBfdGV4dHVyZV9jb29yZDsKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4wLCAxLjApOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfWA7Y2xhc3MgcWYgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBXZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gamZ9fXZhciBYZj1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHZlYzIgY2FudmFzOwp1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlOwoKdm9pZCBtYWluKCkgewogIGludCBjb3VudCA9IDA7CiAgZm9yIChmbG9hdCB5ID0gLTEuOyB5IDwgMi47IHkgKz0gMS4pIHsKICAgIGZvciAoZmxvYXQgeCA9IC0xLjsgeCA8IDIuOyB4ICs9IDEuKSB7CiAgICAgIHZlYzIgY29vcmQgPSBfdGV4dHVyZV9jb29yZCArIHZlYzIoeSwgeCkgLyBjYW52YXM7CiAgICAgIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgY29vcmQpOwogICAgICBpZiAoY29sb3IuciA+IC4xKSB7CiAgICAgICAgY291bnQrKzsKICAgICAgfQogICAgfQogIH0KICBpZiAoY291bnQgPiA1KSB7CiAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQpOwogIH0KfQpgLFlmPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKCnZvaWQgbWFpbigpIHsKICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7CiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkOwp9CmA7Y2xhc3MgUWYgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBYZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gWWZ9fXZhciBLZj1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHZlYzIgY2FudmFzOwp1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlOwoKdm9pZCBtYWluKCkgewogIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQpOwogIGZvciAoZmxvYXQgeSA9IC0yLjsgeSA8IDMuOyB5ICs9IDEuKSB7CiAgICBmb3IgKGZsb2F0IHggPSAtMi47IHggPCAzLjsgeCArPSAxLikgewogICAgICB2ZWMyIGNvb3JkID0gX3RleHR1cmVfY29vcmQ7CiAgICAgIGNvb3JkICs9IHZlYzIoeSwgeCkgLyBjYW52YXM7CiAgICAgIGNvbG9yICs9IHRleHR1cmUyRCh0ZXh0dXJlLCBjb29yZCkgKiAoMS4gLyA0Lik7CiAgICB9CiAgfQoKICBnbF9GcmFnQ29sb3IgPSBjb2xvcjsKfQpgLEpmPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKCnZvaWQgbWFpbigpIHsKICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7CiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkOwp9CmA7Y2xhc3MgWmYgZXh0ZW5kcyBPcntnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBLZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gSmZ9fXZhciBlbD1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHNhbXBsZXIyRCB0aHJlc2hvbGQ7CnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0czsKCnZvaWQgbWFpbigpIHsKICB2ZWM0IGlucHV0c19jb2xvciA9IHRleHR1cmUyRChpbnB1dHMsIF90ZXh0dXJlX2Nvb3JkKTsKICB2ZWM0IHRocmVzaG9sZF9jb2xvciA9IHRleHR1cmUyRCh0aHJlc2hvbGQsIF90ZXh0dXJlX2Nvb3JkKTsKICBpZiAodGhyZXNob2xkX2NvbG9yLnIgPCAuMSAmJiBpbnB1dHNfY29sb3IuciA+IC41KSB7CiAgICBnbF9GcmFnQ29sb3IgPSBpbnB1dHNfY29sb3I7CiAgfQp9CmAsdGw9YHZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uOwphdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkOwoKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTsKICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7Cn0KYDtjbGFzcyBybCBleHRlbmRzIE9ye2dldEZyYWdtZW50U2hhZGVyKCl7cmV0dXJuIGVsfWdldFZlcnRleFNoYWRlcigpe3JldHVybiB0bH19Y2xhc3MgbmwgZXh0ZW5kcyBEcntjb25zdHJ1Y3Rvcih0LG4saSl7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0TWFzayIpO3AodGhpcywicHJldmlvdXNJbnB1dEltYWdlIik7cCh0aGlzLCJwcmV2aW91c0lucHV0TWFzayIpO3AodGhpcywib3V0cHV0Iik7cCh0aGlzLCJvcHRpb25zIix7Y3VycmVudFRocmVzaG9sZE1pbmltdW06MCxjdXJyZW50VGhyZXNob2xkTWF4aW11bToxLHByZXZpb3VzVGhyZXNob2xkTWluaW11bTowLHByZXZpb3VzVGhyZXNob2xkTWF4aW11bToxLHRocmVzaG9sZE1pbmltdW06MCx0aHJlc2hvbGRNYXhpbXVtOjEsdGhyZXNob2xkRmFjdG9yOjF9KTt0aGlzLmNvbnRleHQ9dDtjb25zdCBvPXtjb250ZXh0OnQsaGVpZ2h0Omksd2lkdGg6bn0scz1uZXcgVmYobyksYT1uZXcgVWkoey4uLm8scmFkaXVzOjEsdHlwZTpDci5HQVVTU0lBTn0pLHU9bmV3IHJsKG8pLGY9bmV3IFpmKG8pLGM9bmV3IFFmKG8pLGQ9bmV3IHFmKHsuLi5vfSkseT0uNjYsXz02NDAsbT00ODAseD0yNTYsdj0xNDQ7bGV0IGI9MTtiKj1NYXRoLm1heChfL3gsbS92KTtjb25zdCBBPU1hdGgubWF4KDEsTWF0aC5zcXJ0KGIpKnkpLFA9MS9fLEM9MS9tO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpzLGdldFVuaWZvcm1zOigpPT4oe2ltYWdlX25vdzpTKHQsdGhpcy5pbnB1dEltYWdlKSxpbWFnZV9iZWZvcmU6Uyh0LHRoaXMucHJldmlvdXNJbnB1dEltYWdlKSxtYXNrX25vdzpTKHQsdGhpcy5pbnB1dE1hc2spLG1hc2tfYmVmb3JlOlModCx0aGlzLnByZXZpb3VzSW5wdXRNYXNrKSxjdXJyZW50X3RocmVzaG9sZF9taW5pbXVtOnRoaXMub3B0aW9ucy5jdXJyZW50VGhyZXNob2xkTWluaW11bSxjdXJyZW50X3RocmVzaG9sZF9tYXhpbXVtOnRoaXMub3B0aW9ucy5jdXJyZW50VGhyZXNob2xkTWF4aW11bSxwcmV2aW91c190aHJlc2hvbGRfbWluaW11bTp0aGlzLm9wdGlvbnMucHJldmlvdXNUaHJlc2hvbGRNaW5pbXVtLHByZXZpb3VzX3RocmVzaG9sZF9tYXhpbXVtOnRoaXMub3B0aW9ucy5wcmV2aW91c1RocmVzaG9sZE1heGltdW0sdGhyZXNob2xkX21pbmltdW06dGhpcy5vcHRpb25zLnRocmVzaG9sZE1pbmltdW0sdGhyZXNob2xkX21heGltdW06dGhpcy5vcHRpb25zLnRocmVzaG9sZE1heGltdW0sdGhyZXNob2xkX2ZhY3Rvcjp0aGlzLm9wdGlvbnMudGhyZXNob2xkRmFjdG9yfSl9KSx0aGlzLmFkZFN0ZXAoe3Byb2dyYW06dSxnZXRVbmlmb3JtczooKT0+KHtpbnB1dHM6Uyh0LHRoaXMuaW5wdXRNYXNrKSx0aHJlc2hvbGQ6Uyh0LHMub3V0cHV0KX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOmMsZ2V0VW5pZm9ybXM6KCk9Pih7dGV4dHVyZTpTKHQsdS5vdXRwdXQpfSl9KSx0aGlzLmFkZFN0ZXAoe3Byb2dyYW06ZixnZXRVbmlmb3JtczooKT0+KHt0ZXh0dXJlOlModCxjLm91dHB1dCl9KX0pLHRoaXMuYWRkU3RlcCh7cHJvZ3JhbTphLGdldFVuaWZvcm1zOigpPT4oe3RleHR1cmU6Uyh0LGYub3V0cHV0KX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOmQsZ2V0VW5pZm9ybXM6KCk9Pih7aW5wdXRfZnJhbWU6Uyh0LHRoaXMuaW5wdXRJbWFnZSksc2VnbWVudGF0aW9uX21hc2s6Uyh0LHRoaXMuaW5wdXRNYXNrKSx0aHJlc2hvbGQ6Uyh0LGEub3V0cHV0KSx0ZXhlbF9zaXplOltQLENdLHN0ZXA6QSxyYWRpdXM6YixvZmZzZXQ6QT4xP0EqLjU6MCxzaWdtYV90ZXhlbDpNYXRoLm1heChQLEMpKmIsc2lnbWFfY29sb3I6LjF9KX0pLHRoaXMub3V0cHV0PWQub3V0cHV0fXNldERhdGEodCxuKXt0aGlzLnByZXZpb3VzSW5wdXRJbWFnZT10aGlzLmlucHV0SW1hZ2U/dGhpcy5pbnB1dEltYWdlOnQsdGhpcy5wcmV2aW91c0lucHV0TWFzaz10aGlzLmlucHV0TWFzaz90aGlzLmlucHV0TWFzazpuLHRoaXMuaW5wdXRJbWFnZT10LHRoaXMuaW5wdXRNYXNrPW59c2V0T3B0aW9ucyh0KXt0aGlzLm9wdGlvbnM9dH19dmFyIGlsPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKCnZvaWQgbWFpbigpIHsgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIF90ZXh0dXJlX2Nvb3JkKTsgfQpgLG9sPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKdW5pZm9ybSBib29sIGludmVydF95OwoKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTsKICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7CiAgaWYgKGludmVydF95KSB7CiAgICBfdGV4dHVyZV9jb29yZC55ID0gMS4gLSB0ZXh0dXJlX2Nvb3JkLnk7CiAgfQp9CmA7Y2xhc3Mgc2wgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBpbH1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gb2x9fWNsYXNzIGFsIGV4dGVuZHMgRHJ7Y29uc3RydWN0b3IodCxuLGkpe3N1cGVyKCk7cCh0aGlzLCJpbnB1dEltYWdlIik7dGhpcy5jb250ZXh0PXQ7Y29uc3Qgbz17Y29udGV4dDp0LGhlaWdodDppLHdpZHRoOm59O3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpuZXcgc2woey4uLm8sZGlzYWJsZUZyYW1lYnVmZmVyOiEwfSksZ2V0VW5pZm9ybXM6KCk9Pih7dGV4dHVyZTpTKHQsdGhpcy5pbnB1dEltYWdlKSxpbnZlcnRfeTohMH0pfSl9c2V0RGF0YSh0KXt0aGlzLmlucHV0SW1hZ2U9dH19Y2xhc3MgdWx7Y29uc3RydWN0b3IoZSl7cCh0aGlzLCJyZXNpemUiKTtwKHRoaXMsImNhbnZhcyIpO3AodGhpcywiY29udGV4dCIpO3RoaXMuY2FudmFzPW5ldyBPZmZzY3JlZW5DYW52YXMoMCwwKSx0aGlzLmNvbnRleHQ9dGhpcy5jYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wyIiksdGhpcy5jYW52YXMud2lkdGg9ZS53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQ9ZS5oZWlnaHQsdGhpcy5yZXNpemU9bmV3IGFsKHRoaXMuY29udGV4dCxlLndpZHRoLGUuaGVpZ2h0KX1yZXNpemVGb3JlZ3JvdW5kKGUsdCl7dGhpcy5jYW52YXMud2lkdGg9ZSx0aGlzLmNhbnZhcy5oZWlnaHQ9dCx0aGlzLnJlc2l6ZS5yZXNpemVPdXRwdXQoZSx0KX1hc3luYyBwcm9jZXNzKGUpe3ZhciB0LG47cmV0dXJuIHRoaXMuY2FudmFzLndpZHRoPXRoaXMuY2FudmFzLndpZHRoLCh0PXRoaXMucmVzaXplKT09bnVsbHx8dC5zZXREYXRhKGUpLChuPXRoaXMucmVzaXplKT09bnVsbHx8bi5ydW4oKSx0aGlzLmNhbnZhc319Y2xhc3MgY2x7Y29uc3RydWN0b3IoZSx0KXtwKHRoaXMsImltcHJvdmVNYXNrU2VnbWVudGF0aW9uIik7cCh0aGlzLCJiYWNrZ3JvdW5kUmVzaXplciIpO3AodGhpcywiYmFja2dyb3VuZEltYWdlIik7cCh0aGlzLCJiYWNrZ3JvdW5kVmlkZW8iKTtwKHRoaXMsInByb2ZpbGVyIik7cCh0aGlzLCJhY3RpdmVQaXBlbGluZSIpO3AodGhpcywiY2FudmFzIik7cCh0aGlzLCJvcHRpb25zIik7cCh0aGlzLCJjb250ZXh0Iik7cCh0aGlzLCJ2aXJ0dWFsQkdJbWFnZSIpO3RoaXMuaWQ9ZSx0aGlzLmNhbnZhcz1uZXcgT2Zmc2NyZWVuQ2FudmFzKDAsMCksdGhpcy5jb250ZXh0PXRoaXMuY2FudmFzLmdldENvbnRleHQoIndlYmdsMiIpLHRoaXMuY2FudmFzLndpZHRoPXQuZm9yZWdyb3VuZFdpZHRoLHRoaXMuY2FudmFzLmhlaWdodD10LmZvcmVncm91bmRIZWlnaHQsdGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbj1uZXcgbmwodGhpcy5jb250ZXh0LHQubWFza1dpZHRoLHQubWFza0hlaWdodCksdGhpcy5iYWNrZ3JvdW5kSW1hZ2U9bmV3IE5pKHRoaXMuY29udGV4dCksdGhpcy5iYWNrZ3JvdW5kVmlkZW89bmV3IGtmKHRoaXMuY29udGV4dCksdGhpcy5iYWNrZ3JvdW5kUmVzaXplcj1uZXcgdWwoe3dpZHRoOnQuZm9yZWdyb3VuZFdpZHRoLGhlaWdodDp0LmZvcmVncm91bmRIZWlnaHR9KX1zZXRCYWNrZ3JvdW5kT3B0aW9ucyhlKXtzd2l0Y2goZS50cmFuc2Zvcm1lclR5cGUpe2Nhc2UiQmFja2dyb3VuZEJsdXIiOnRoaXMuYWN0aXZlUGlwZWxpbmU9bmV3IEJmKHRoaXMuY29udGV4dCx0aGlzLmdldEJsdXJTaXplKGUucmFkaXVzKSk7YnJlYWs7Y2FzZSJTaWxob3VldHRlQmx1ciI6dGhpcy5hY3RpdmVQaXBlbGluZT1uZXcgR2YodGhpcy5jb250ZXh0LHRoaXMuZ2V0Qmx1clNpemUoZS5yYWRpdXMpKTticmVhaztjYXNlIlZpZGVvQmFja2dyb3VuZCI6dGhpcy5hY3RpdmVQaXBlbGluZT10aGlzLmJhY2tncm91bmRWaWRlbzticmVhaztjYXNlIlZpcnR1YWxCYWNrZ3JvdW5kIjp0aGlzLmFjdGl2ZVBpcGVsaW5lPXRoaXMuYmFja2dyb3VuZEltYWdlO2JyZWFrfXRoaXMub3B0aW9ucz1lfXNldEZsaWNrZXJpbmdPcHRpb25zKGUpe3ZhciB0Oyh0PXRoaXMuaW1wcm92ZU1hc2tTZWdtZW50YXRpb24pPT1udWxsfHx0LnNldE9wdGlvbnMoZSl9c2V0VmlkZW9CR1JlYWRhYmxlKGUpe3RoaXMuYmFja2dyb3VuZFZpZGVvLmlucHV0VmlkZW89ZX1hc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShlKXt0aGlzLnZpcnR1YWxCR0ltYWdlPWUsdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuaW5wdXRCYWNrZ3JvdW5kSW1hZ2U9YXdhaXQgdGhpcy5iYWNrZ3JvdW5kUmVzaXplci5wcm9jZXNzKGUpfWFzeW5jIHByb2Nlc3MoZSx0KXt2YXIgbixpLG8scyxhLHUsZjtpZih0aGlzLmFjdGl2ZVBpcGVsaW5lJiZlLndpZHRoJiYodD09bnVsbD92b2lkIDA6dC53aWR0aCkpe2NvbnN0IGM9YFske3RoaXMuaWR9XSBiYWNrZ3JvdW5kLWZpbHRlcmA7KG49dGhpcy5wcm9maWxlcik9PW51bGx8fG4ucHVzaENvbnRleHQoYyk7bGV0IGQ9dDsoKChpPXRoaXMub3B0aW9ucyk9PW51bGw/dm9pZCAwOmkuc2VsZmllU2VnbWVudGF0aW9uVHlwZSkmJigobz10aGlzLm9wdGlvbnMpPT1udWxsP3ZvaWQgMDpvLnNlbGZpZVNlZ21lbnRhdGlvblR5cGUpPT09IlBSRUNJU0UifHwhKChzPXRoaXMub3B0aW9ucykhPW51bGwmJnMuc2VsZmllU2VnbWVudGF0aW9uVHlwZSkmJnRoaXMuYWN0aXZlUGlwZWxpbmUucHJlY2lzZU1hc2tFbmFibGVkKSYmKHRoaXMuaW1wcm92ZU1hc2tTZWdtZW50YXRpb24uc2V0SWQodGhpcy5pZCksdGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbi5zZXRQcm9maWxlcih0aGlzLnByb2ZpbGVyKSx0aGlzLmltcHJvdmVNYXNrU2VnbWVudGF0aW9uLnNldERhdGEoZSx0KSx0aGlzLmltcHJvdmVNYXNrU2VnbWVudGF0aW9uLnJ1bigpLGQ9dGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbi5vdXRwdXQpLHRoaXMuYWN0aXZlUGlwZWxpbmUuc2V0SWQodGhpcy5pZCksdGhpcy5hY3RpdmVQaXBlbGluZS5zZXRQcm9maWxlcih0aGlzLnByb2ZpbGVyKSwoYT10aGlzLmFjdGl2ZVBpcGVsaW5lKT09bnVsbHx8YS5zZXREYXRhKGUsZCksKHU9dGhpcy5hY3RpdmVQaXBlbGluZSk9PW51bGx8fHUucnVuKCksKGY9dGhpcy5wcm9maWxlcik9PW51bGx8fGYucG9wQ29udGV4dChjKX19YXN5bmMgcmVzaXplRm9yZWdyb3VuZChlLHQpe3ZhciBuO3RoaXMuY2FudmFzLndpZHRoPWUsdGhpcy5jYW52YXMuaGVpZ2h0PXQsdGhpcy5iYWNrZ3JvdW5kSW1hZ2UucmVzaXplT3V0cHV0KGUsdCksdGhpcy5iYWNrZ3JvdW5kVmlkZW8ucmVzaXplT3V0cHV0KGUsdCksdGhpcy5iYWNrZ3JvdW5kUmVzaXplci5yZXNpemVGb3JlZ3JvdW5kKGUsdCksKG49dGhpcy5hY3RpdmVQaXBlbGluZSk9PW51bGx8fG4ucmVzaXplT3V0cHV0KGUsdCksdGhpcy52aXJ0dWFsQkdJbWFnZSYmKHRoaXMuYmFja2dyb3VuZEltYWdlLmlucHV0QmFja2dyb3VuZEltYWdlPWF3YWl0IHRoaXMuYmFja2dyb3VuZFJlc2l6ZXIucHJvY2Vzcyh0aGlzLnZpcnR1YWxCR0ltYWdlKSl9YXN5bmMgcHJvZmlsZShlKXtjb25zdCB0PW5ldyBScyh0aGlzLmNvbnRleHQpO3JldHVybiB0aGlzLnByb2ZpbGVyPXQsdC5zdGFydCgpLGF3YWl0IGduKGUpLHRoaXMucHJvZmlsZXI9dm9pZCAwLHQuc3RvcCgpLHQuZ2V0UmVzb2x2ZWRRdWVyaWVzKCl9Z2V0Qmx1clNpemUoZT1zdC5Mb3cpe3N3aXRjaChlKXtjYXNlIHN0LkxvdzpyZXR1cm4gNTtjYXNlIHN0LkhpZ2g6cmV0dXJuIDEyfXJldHVybiBlfX12YXIgZmw9ZnVuY3Rpb24oKXt2YXIgcj10eXBlb2YgZG9jdW1lbnQ8InUiJiZkb2N1bWVudC5jdXJyZW50U2NyaXB0P2RvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjOnZvaWQgMDtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1lfHx7fTt2YXIgdD10eXBlb2YgZTwidSI/ZTp7fSxuLGk7dC5yZWFkeT1uZXcgUHJvbWlzZShmdW5jdGlvbihsLGgpe249bCxpPWh9KTt2YXIgbz17fSxzO2ZvcihzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKG9bc109dFtzXSk7dmFyIGE9Ii4vdGhpcy5wcm9ncmFtIix1PWZ1bmN0aW9uKGwsaCl7dGhyb3cgaH0sZj0hMCxjPSIiO2Z1bmN0aW9uIGQobCl7cmV0dXJuIHQubG9jYXRlRmlsZT90LmxvY2F0ZUZpbGUobCxjKTpjK2x9dmFyIHk7dHlwZW9mIGRvY3VtZW50PCJ1IiYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmKGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpLHImJihjPXIpLGMuaW5kZXhPZigiYmxvYjoiKSE9PTA/Yz1jLnN1YnN0cigwLGMucmVwbGFjZSgvWz8jXS4qLywiIikubGFzdEluZGV4T2YoIi8iKSsxKTpjPSIiO3ZhciBfPXQucHJpbnR8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksbT10LnByaW50RXJyfHxjb25zb2xlLndhcm4uYmluZChjb25zb2xlKTtmb3IocyBpbiBvKW8uaGFzT3duUHJvcGVydHkocykmJih0W3NdPW9bc10pO289bnVsbCx0LmFyZ3VtZW50cyYmdC5hcmd1bWVudHMsdC50aGlzUHJvZ3JhbSYmKGE9dC50aGlzUHJvZ3JhbSksdC5xdWl0JiYodT10LnF1aXQpO3ZhciB4O3Qud2FzbUJpbmFyeSYmKHg9dC53YXNtQmluYXJ5KTt2YXIgdj10Lm5vRXhpdFJ1bnRpbWV8fCEwO3R5cGVvZiBXZWJBc3NlbWJseSE9Im9iamVjdCImJm1lKCJubyBuYXRpdmUgd2FzbSBzdXBwb3J0IGRldGVjdGVkIik7dmFyIGIsQT0hMSxQPXR5cGVvZiBUZXh0RGVjb2RlcjwidSI/bmV3IFRleHREZWNvZGVyKCJ1dGY4Iik6dm9pZCAwO2Z1bmN0aW9uIEMobCxoLGcpe2Zvcih2YXIgdz1oK2csTT1oO2xbTV0mJiEoTT49dyk7KSsrTTtpZihNLWg+MTYmJmwuc3ViYXJyYXkmJlApcmV0dXJuIFAuZGVjb2RlKGwuc3ViYXJyYXkoaCxNKSk7Zm9yKHZhciBVPSIiO2g8TTspe3ZhciBSPWxbaCsrXTtpZighKFImMTI4KSl7VSs9U3RyaW5nLmZyb21DaGFyQ29kZShSKTtjb250aW51ZX12YXIgaz1sW2grK10mNjM7aWYoKFImMjI0KT09MTkyKXtVKz1TdHJpbmcuZnJvbUNoYXJDb2RlKChSJjMxKTw8NnxrKTtjb250aW51ZX12YXIgZWU9bFtoKytdJjYzO2lmKChSJjI0MCk9PTIyND9SPShSJjE1KTw8MTJ8azw8NnxlZTpSPShSJjcpPDwxOHxrPDwxMnxlZTw8NnxsW2grK10mNjMsUjw2NTUzNilVKz1TdHJpbmcuZnJvbUNoYXJDb2RlKFIpO2Vsc2V7dmFyIGppPVItNjU1MzY7VSs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxqaT4+MTAsNTYzMjB8amkmMTAyMyl9fXJldHVybiBVfWZ1bmN0aW9uIFcobCxoKXtyZXR1cm4gbD9DKEhlLGwsaCk6IiJ9ZnVuY3Rpb24gaWUobCxoLGcpe2Zvcih2YXIgdz0wO3c8bC5sZW5ndGg7Kyt3KUZ0W2grKz4+MF09bC5jaGFyQ29kZUF0KHcpO2d8fChGdFtoPj4wXT0wKX1mdW5jdGlvbiBYKGwsaCl7cmV0dXJuIGwlaD4wJiYobCs9aC1sJWgpLGx9dmFyIGtpLEZ0LEhlLFk7ZnVuY3Rpb24gTGkobCl7a2k9bCx0LkhFQVA4PUZ0PW5ldyBJbnQ4QXJyYXkobCksdC5IRUFQMTY9bmV3IEludDE2QXJyYXkobCksdC5IRUFQMzI9WT1uZXcgSW50MzJBcnJheShsKSx0LkhFQVBVOD1IZT1uZXcgVWludDhBcnJheShsKSx0LkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KGwpLHQuSEVBUFUzMj1uZXcgVWludDMyQXJyYXkobCksdC5IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkobCksdC5IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkobCl9dC5JTklUSUFMX01FTU9SWTt2YXIgVXIsJGk9W10sR2k9W10semk9W10sX2w9MDtmdW5jdGlvbiB4bCgpe3JldHVybiB2fHxfbD4wfWZ1bmN0aW9uIGdsKCl7aWYodC5wcmVSdW4pZm9yKHR5cGVvZiB0LnByZVJ1bj09ImZ1bmN0aW9uIiYmKHQucHJlUnVuPVt0LnByZVJ1bl0pO3QucHJlUnVuLmxlbmd0aDspRWwodC5wcmVSdW4uc2hpZnQoKSk7QnIoJGkpfWZ1bmN0aW9uIGJsKCl7QnIoR2kpfWZ1bmN0aW9uIHZsKCl7aWYodC5wb3N0UnVuKWZvcih0eXBlb2YgdC5wb3N0UnVuPT0iZnVuY3Rpb24iJiYodC5wb3N0UnVuPVt0LnBvc3RSdW5dKTt0LnBvc3RSdW4ubGVuZ3RoOylBbCh0LnBvc3RSdW4uc2hpZnQoKSk7QnIoemkpfWZ1bmN0aW9uIEVsKGwpeyRpLnVuc2hpZnQobCl9ZnVuY3Rpb24gVGwobCl7R2kudW5zaGlmdChsKX1mdW5jdGlvbiBBbChsKXt6aS51bnNoaWZ0KGwpfXZhciB2ZT0wLFZlPW51bGw7ZnVuY3Rpb24gd2wobCl7dmUrKyx0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJnQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyh2ZSl9ZnVuY3Rpb24gUmwobCl7aWYodmUtLSx0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJnQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyh2ZSksdmU9PTAmJlZlKXt2YXIgaD1WZTtWZT1udWxsLGgoKX19dC5wcmVsb2FkZWRJbWFnZXM9e30sdC5wcmVsb2FkZWRBdWRpb3M9e307ZnVuY3Rpb24gbWUobCl7dC5vbkFib3J0JiZ0Lm9uQWJvcnQobCksbD0iQWJvcnRlZCgiK2wrIikiLG0obCksQT0hMCxsKz0iLiBCdWlsZCB3aXRoIC1zIEFTU0VSVElPTlM9MSBmb3IgbW9yZSBpbmZvLiI7dmFyIGg9bmV3IFdlYkFzc2VtYmx5LlJ1bnRpbWVFcnJvcihsKTt0aHJvdyBpKGgpLGh9dmFyIFNsPSJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIjtmdW5jdGlvbiBIaShsKXtyZXR1cm4gbC5zdGFydHNXaXRoKFNsKX12YXIgUTtRPSJ0ZmxpdGUtc2ltZC53YXNtIixIaShRKXx8KFE9ZChRKSk7ZnVuY3Rpb24gVmkobCl7dHJ5e2lmKGw9PVEmJngpcmV0dXJuIG5ldyBVaW50OEFycmF5KHgpO2lmKCF5KXRocm93ImJvdGggYXN5bmMgYW5kIHN5bmMgZmV0Y2hpbmcgb2YgdGhlIHdhc20gZmFpbGVkIn1jYXRjaChoKXttZShoKX19ZnVuY3Rpb24gSWwoKXtyZXR1cm4heCYmZiYmdHlwZW9mIGZldGNoPT0iZnVuY3Rpb24iP2ZldGNoKFEse2NyZWRlbnRpYWxzOiJzYW1lLW9yaWdpbiJ9KS50aGVuKGZ1bmN0aW9uKGwpe2lmKCFsLm9rKXRocm93ImZhaWxlZCB0byBsb2FkIHdhc20gYmluYXJ5IGZpbGUgYXQgJyIrUSsiJyI7cmV0dXJuIGwuYXJyYXlCdWZmZXIoKX0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIFZpKFEpfSk6UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBWaShRKX0pfWZ1bmN0aW9uIEZsKCl7dmFyIGw9e2E6UWx9O2Z1bmN0aW9uIGgoUixrKXt2YXIgZWU9Ui5leHBvcnRzO3QuYXNtPWVlLGI9dC5hc20ucSxMaShiLmJ1ZmZlciksVXI9dC5hc20uRSxUbCh0LmFzbS5yKSxSbCgpfXdsKCk7ZnVuY3Rpb24gZyhSKXtoKFIuaW5zdGFuY2UpfWZ1bmN0aW9uIHcoUil7cmV0dXJuIElsKCkudGhlbihmdW5jdGlvbihrKXtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoayxsKX0pLnRoZW4oZnVuY3Rpb24oayl7cmV0dXJuIGt9KS50aGVuKFIsZnVuY3Rpb24oayl7bSgiZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogIitrKSxtZShrKX0pfWZ1bmN0aW9uIE0oKXtyZXR1cm4heCYmdHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nPT0iZnVuY3Rpb24iJiYhSGkoUSkmJnR5cGVvZiBmZXRjaD09ImZ1bmN0aW9uIj9mZXRjaChRLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbihmdW5jdGlvbihSKXt2YXIgaz1XZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhSLGwpO3JldHVybiBrLnRoZW4oZyxmdW5jdGlvbihlZSl7cmV0dXJuIG0oIndhc20gc3RyZWFtaW5nIGNvbXBpbGUgZmFpbGVkOiAiK2VlKSxtKCJmYWxsaW5nIGJhY2sgdG8gQXJyYXlCdWZmZXIgaW5zdGFudGlhdGlvbiIpLHcoZyl9KX0pOncoZyl9aWYodC5pbnN0YW50aWF0ZVdhc20pdHJ5e3ZhciBVPXQuaW5zdGFudGlhdGVXYXNtKGwsaCk7cmV0dXJuIFV9Y2F0Y2goUil7cmV0dXJuIG0oIk1vZHVsZS5pbnN0YW50aWF0ZVdhc20gY2FsbGJhY2sgZmFpbGVkIHdpdGggZXJyb3I6ICIrUiksITF9cmV0dXJuIE0oKS5jYXRjaChpKSx7fX1mdW5jdGlvbiBCcihsKXtmb3IoO2wubGVuZ3RoPjA7KXt2YXIgaD1sLnNoaWZ0KCk7aWYodHlwZW9mIGg9PSJmdW5jdGlvbiIpe2godCk7Y29udGludWV9dmFyIGc9aC5mdW5jO3R5cGVvZiBnPT0ibnVtYmVyIj9oLmFyZz09PXZvaWQgMD9Vci5nZXQoZykoKTpVci5nZXQoZykoaC5hcmcpOmcoaC5hcmc9PT12b2lkIDA/bnVsbDpoLmFyZyl9fWZ1bmN0aW9uIFBsKGwsaCxnLHcpe21lKCJBc3NlcnRpb24gZmFpbGVkOiAiK1cobCkrIiwgYXQ6ICIrW2g/VyhoKToidW5rbm93biBmaWxlbmFtZSIsZyx3P1codyk6InVua25vd24gZnVuY3Rpb24iXSl9ZnVuY3Rpb24gRGwobCxoKXttZSgiVG8gdXNlIGRsb3BlbiwgeW91IG5lZWQgdG8gdXNlIEVtc2NyaXB0ZW4ncyBsaW5raW5nIHN1cHBvcnQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZW1zY3JpcHRlbi1jb3JlL2Vtc2NyaXB0ZW4vd2lraS9MaW5raW5nIil9ZnVuY3Rpb24gTWwobCxoKXttZSgiVG8gdXNlIGRsb3BlbiwgeW91IG5lZWQgdG8gdXNlIEVtc2NyaXB0ZW4ncyBsaW5raW5nIHN1cHBvcnQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZW1zY3JpcHRlbi1jb3JlL2Vtc2NyaXB0ZW4vd2lraS9MaW5raW5nIil9ZnVuY3Rpb24gQ2woKXttZSgiIil9dmFyIFB0O1B0PWZ1bmN0aW9uKCl7cmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpfTt2YXIgT2w9ITA7ZnVuY3Rpb24gTmwobCl7cmV0dXJuIFlbV2koKT4+Ml09bCxsfWZ1bmN0aW9uIFVsKGwsaCl7dmFyIGc7aWYobD09PTApZz1EYXRlLm5vdygpO2Vsc2UgaWYoKGw9PT0xfHxsPT09NCkmJk9sKWc9UHQoKTtlbHNlIHJldHVybiBObCgyOCksLTE7cmV0dXJuIFlbaD4+Ml09Zy8xZTN8MCxZW2grND4+Ml09ZyUxZTMqMWUzKjFlM3wwLDB9ZnVuY3Rpb24gQmwoKXtyZXR1cm4gMjE0NzQ4MzY0OH1mdW5jdGlvbiBrbChsLGgsZyl7SGUuY29weVdpdGhpbihsLGgsaCtnKX1mdW5jdGlvbiBMbChsKXt0cnl7cmV0dXJuIGIuZ3JvdyhsLWtpLmJ5dGVMZW5ndGgrNjU1MzU+Pj4xNiksTGkoYi5idWZmZXIpLDF9Y2F0Y2h7fX1mdW5jdGlvbiAkbChsKXt2YXIgaD1IZS5sZW5ndGg7bD1sPj4+MDt2YXIgZz0yMTQ3NDgzNjQ4O2lmKGw+ZylyZXR1cm4hMTtmb3IodmFyIHc9MTt3PD00O3cqPTIpe3ZhciBNPWgqKDErLjIvdyk7TT1NYXRoLm1pbihNLGwrMTAwNjYzMjk2KTt2YXIgVT1NYXRoLm1pbihnLFgoTWF0aC5tYXgobCxNKSw2NTUzNikpLFI9TGwoVSk7aWYoUilyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBHbChsKXtmb3IodmFyIGg9UHQoKTtQdCgpLWg8bDspO312YXIga3I9e307ZnVuY3Rpb24gemwoKXtyZXR1cm4gYXx8Ii4vdGhpcy5wcm9ncmFtIn1mdW5jdGlvbiBXZSgpe2lmKCFXZS5zdHJpbmdzKXt2YXIgbD0odHlwZW9mIG5hdmlnYXRvcj09Im9iamVjdCImJm5hdmlnYXRvci5sYW5ndWFnZXMmJm5hdmlnYXRvci5sYW5ndWFnZXNbMF18fCJDIikucmVwbGFjZSgiLSIsIl8iKSsiLlVURi04IixoPXtVU0VSOiJ3ZWJfdXNlciIsTE9HTkFNRToid2ViX3VzZXIiLFBBVEg6Ii8iLFBXRDoiLyIsSE9NRToiL2hvbWUvd2ViX3VzZXIiLExBTkc6bCxfOnpsKCl9O2Zvcih2YXIgZyBpbiBrcilrcltnXT09PXZvaWQgMD9kZWxldGUgaFtnXTpoW2ddPWtyW2ddO3ZhciB3PVtdO2Zvcih2YXIgZyBpbiBoKXcucHVzaChnKyI9IitoW2ddKTtXZS5zdHJpbmdzPXd9cmV0dXJuIFdlLnN0cmluZ3N9dmFyIER0PXttYXBwaW5nczp7fSxidWZmZXJzOltudWxsLFtdLFtdXSxwcmludENoYXI6ZnVuY3Rpb24obCxoKXt2YXIgZz1EdC5idWZmZXJzW2xdO2g9PT0wfHxoPT09MTA/KChsPT09MT9fOm0pKEMoZywwKSksZy5sZW5ndGg9MCk6Zy5wdXNoKGgpfSx2YXJhcmdzOnZvaWQgMCxnZXQ6ZnVuY3Rpb24oKXtEdC52YXJhcmdzKz00O3ZhciBsPVlbRHQudmFyYXJncy00Pj4yXTtyZXR1cm4gbH0sZ2V0U3RyOmZ1bmN0aW9uKGwpe3ZhciBoPVcobCk7cmV0dXJuIGh9LGdldDY0OmZ1bmN0aW9uKGwsaCl7cmV0dXJuIGx9fTtmdW5jdGlvbiBIbChsLGgpe3ZhciBnPTA7cmV0dXJuIFdlKCkuZm9yRWFjaChmdW5jdGlvbih3LE0pe3ZhciBVPWgrZztZW2wrTSo0Pj4yXT1VLGllKHcsVSksZys9dy5sZW5ndGgrMX0pLDB9ZnVuY3Rpb24gVmwobCxoKXt2YXIgZz1XZSgpO1lbbD4+Ml09Zy5sZW5ndGg7dmFyIHc9MDtyZXR1cm4gZy5mb3JFYWNoKGZ1bmN0aW9uKE0pe3crPU0ubGVuZ3RoKzF9KSxZW2g+PjJdPXcsMH1mdW5jdGlvbiBXbChsKXtKbChsKX1mdW5jdGlvbiBqbChsKXtyZXR1cm4gMH1mdW5jdGlvbiBxbChsLGgsZyx3LE0pe31mdW5jdGlvbiBYbChsLGgsZyx3KXtmb3IodmFyIE09MCxVPTA7VTxnO1UrKyl7Zm9yKHZhciBSPVlbaCtVKjg+PjJdLGs9WVtoKyhVKjgrNCk+PjJdLGVlPTA7ZWU8aztlZSsrKUR0LnByaW50Q2hhcihsLEhlW1IrZWVdKTtNKz1rfXJldHVybiBZW3c+PjJdPU0sMH1mdW5jdGlvbiBZbCgpe2lmKHR5cGVvZiBjcnlwdG89PSJvYmplY3QiJiZ0eXBlb2YgY3J5cHRvLmdldFJhbmRvbVZhbHVlcz09ImZ1bmN0aW9uIil7dmFyIGw9bmV3IFVpbnQ4QXJyYXkoMSk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobCksbFswXX19ZWxzZSByZXR1cm4gZnVuY3Rpb24oKXttZSgicmFuZG9tRGV2aWNlIil9fWZ1bmN0aW9uIE10KGwsaCl7TXQucmFuZG9tRGV2aWNlfHwoTXQucmFuZG9tRGV2aWNlPVlsKCkpO2Zvcih2YXIgZz0wO2c8aDtnKyspRnRbbCtnPj4wXT1NdC5yYW5kb21EZXZpY2UoKTtyZXR1cm4gMH12YXIgUWw9e2E6UGwsZTpEbCxkOk1sLGI6Q2wsbjpVbCxoOkJsLGw6a2wsbTokbCxwOkdsLGY6SGwsZzpWbCxqOldsLGk6amwsazpxbCxjOlhsLG86TXR9O0ZsKCksdC5fX193YXNtX2NhbGxfY3RvcnM9ZnVuY3Rpb24oKXtyZXR1cm4odC5fX193YXNtX2NhbGxfY3RvcnM9dC5hc20ucikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldD10LmFzbS5zKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2dldElucHV0TWVtb3J5T2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2dldElucHV0TWVtb3J5T2Zmc2V0PXQuYXNtLnQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fZ2V0SW5wdXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0SW5wdXRIZWlnaHQ9dC5hc20udSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRJbnB1dFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2dldElucHV0V2lkdGg9dC5hc20udikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRJbnB1dENoYW5uZWxDb3VudD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRJbnB1dENoYW5uZWxDb3VudD10LmFzbS53KS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2dldE91dHB1dE1lbW9yeU9mZnNldD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRPdXRwdXRNZW1vcnlPZmZzZXQ9dC5hc20ueCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRPdXRwdXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0SGVpZ2h0PXQuYXNtLnkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fZ2V0T3V0cHV0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0V2lkdGg9dC5hc20ueikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRPdXRwdXRDaGFubmVsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0Q2hhbm5lbENvdW50PXQuYXNtLkEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fbG9hZE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2xvYWRNb2RlbD10LmFzbS5CKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX3J1bkluZmVyZW5jZT1mdW5jdGlvbigpe3JldHVybih0Ll9ydW5JbmZlcmVuY2U9dC5hc20uQykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9pc0dQVUVuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5faXNHUFVFbmFibGVkPXQuYXNtLkQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07dmFyIFdpPXQuX19fZXJybm9fbG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4oV2k9dC5fX19lcnJub19sb2NhdGlvbj10LmFzbS5GKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEN0O2Z1bmN0aW9uIEtsKGwpe3RoaXMubmFtZT0iRXhpdFN0YXR1cyIsdGhpcy5tZXNzYWdlPSJQcm9ncmFtIHRlcm1pbmF0ZWQgd2l0aCBleGl0KCIrbCsiKSIsdGhpcy5zdGF0dXM9bH1WZT1mdW5jdGlvbiBsKCl7Q3R8fExyKCksQ3R8fChWZT1sKX07ZnVuY3Rpb24gTHIobCl7aWYodmU+MHx8KGdsKCksdmU+MCkpcmV0dXJuO2Z1bmN0aW9uIGgoKXtDdHx8KEN0PSEwLHQuY2FsbGVkUnVuPSEwLCFBJiYoYmwoKSxuKHQpLHQub25SdW50aW1lSW5pdGlhbGl6ZWQmJnQub25SdW50aW1lSW5pdGlhbGl6ZWQoKSx2bCgpKSl9dC5zZXRTdGF0dXM/KHQuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksc2V0VGltZW91dChmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNldFN0YXR1cygiIil9LDEpLGgoKX0sMSkpOmgoKX10LnJ1bj1McjtmdW5jdGlvbiBKbChsLGgpe1psKGwpfWZ1bmN0aW9uIFpsKGwpe3hsKCl8fCh0Lm9uRXhpdCYmdC5vbkV4aXQobCksQT0hMCksdShsLG5ldyBLbChsKSl9aWYodC5wcmVJbml0KWZvcih0eXBlb2YgdC5wcmVJbml0PT0iZnVuY3Rpb24iJiYodC5wcmVJbml0PVt0LnByZUluaXRdKTt0LnByZUluaXQubGVuZ3RoPjA7KXQucHJlSW5pdC5wb3AoKSgpO3JldHVybiBMcigpLGUucmVhZHl9fSgpO2NsYXNzIGxse2NvbnN0cnVjdG9yKCl7cCh0aGlzLCJzZWxlY3RlZFRGTGl0ZSIpO3AodGhpcywiaXNTSU1EU3VwcG9ydGVkIiwhMSk7cCh0aGlzLCJpc1RocmVhZHNTdXBwb3J0ZWQiLCExKTtwKHRoaXMsImlucHV0V2lkdGgiLDApO3AodGhpcywiaW5wdXRIZWlnaHQiLDApO3AodGhpcywiaW5wdXRDaGFubmVsQ291bnQiLDApO3AodGhpcywiaW5wdXRNZW1vcnlPZmZzZXQiLDApO3AodGhpcywib3V0cHV0V2lkdGgiLDApO3AodGhpcywib3V0cHV0SGVpZ2h0IiwwKTtwKHRoaXMsIm91dHB1dENoYW5uZWxDb3VudCIsMCk7cCh0aGlzLCJvdXRwdXRNZW1vcnlPZmZzZXQiLDApfX1jb25zdCBkbD0iaHR0cHM6Ly9kM29wcWptcXp4ZjA1Ny5jbG91ZGZyb250Lm5ldC92b25hZ2UtdGVuc29yZmxvdy13YXNtL3RmbGl0ZS1zaW1kLXdhc20vMS4xLjMvIixtbD0iaHR0cHM6Ly9kM29wcWptcXp4ZjA1Ny5jbG91ZGZyb250Lm5ldC9tbC9zZWxmaWVfc2VnbWVudGF0aW9uLzQuMC4wLyI7YXN5bmMgZnVuY3Rpb24gaGwocj1kbCxlPW1sKXtsZXQgdD1uZXcgbGw7dmFyIG49bmV3IFByb21pc2UoZnVuY3Rpb24oaSxvKXthc3luYyBmdW5jdGlvbiBzKCl7cmV0dXJuIGZsKHtsb2NhdGVGaWxlOmZ1bmN0aW9uKGYpe3JldHVybiByK2Z9fSl9YXN5bmMgZnVuY3Rpb24gYSh1KXtyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMoZixjKT0+e2NvbnN0IGQ9dTtpZih0eXBlb2YgZD4idSIpcmV0dXJuIGMoIlRGTGl0ZSBiYWNrZW5kIHVuYXZhaWxhYmxlOiB3YXNtU2ltZCIpO2NvbnN0IHk9InNlbGZpZV9zZWdtZW50YXRpb25fbGFuZHNjYXBlIjtjb25zb2xlLmxvZygiTG9hZGluZyB0ZmxpdGUgbW9kZWw6Iix5KTtsZXQgXz1lK2Ake3l9LnRmbGl0ZWA7Y29uc29sZS5sb2coIlRGTGl0ZSBtb2RlbFVybDogIitfKTt0cnl7Y29uc3QgeD1hd2FpdChhd2FpdCBmZXRjaChfKSkuYXJyYXlCdWZmZXIoKTtjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIHNpemU6Iix4LmJ5dGVMZW5ndGgpO2NvbnN0IHY9ZC5fZ2V0TW9kZWxCdWZmZXJNZW1vcnlPZmZzZXQoKTtjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIG1lbW9yeSBvZmZzZXQ6Iix2KSxjb25zb2xlLmxvZygiTG9hZGluZyBtb2RlbCBidWZmZXIuLi4iKSxkLkhFQVBVOC5zZXQobmV3IFVpbnQ4QXJyYXkoeCksdik7Y29uc3QgYj1kLl9sb2FkTW9kZWwoeC5ieXRlTGVuZ3RoKTtpZihjb25zb2xlLmxvZygiTG9hZCBtb2RlbCByZXN1bHQ6IixiKSxiIT09MCl7YygiQ2Fubm90IGxvYWQgbW9kZWwiKTtyZXR1cm59dC5pbnB1dFdpZHRoPWQuX2dldElucHV0V2lkdGgoKSx0LmlucHV0SGVpZ2h0PWQuX2dldElucHV0SGVpZ2h0KCksdC5pbnB1dENoYW5uZWxDb3VudD1kLl9nZXRJbnB1dENoYW5uZWxDb3VudCgpLHQuaW5wdXRNZW1vcnlPZmZzZXQ9ZC5fZ2V0SW5wdXRNZW1vcnlPZmZzZXQoKSxjb25zb2xlLmxvZygiSW5wdXQgbWVtb3J5IG9mZnNldDoiLHQuaW5wdXRNZW1vcnlPZmZzZXQpLGNvbnNvbGUubG9nKCJJbnB1dCBoZWlnaHQ6Iix0LmlucHV0SGVpZ2h0KSxjb25zb2xlLmxvZygiSW5wdXQgd2lkdGg6Iix0LmlucHV0V2lkdGgpLGNvbnNvbGUubG9nKCJJbnB1dCBjaGFubmVsczoiLHQuaW5wdXRDaGFubmVsQ291bnQpLHQub3V0cHV0TWVtb3J5T2Zmc2V0PWQuX2dldE91dHB1dE1lbW9yeU9mZnNldCgpLHQub3V0cHV0V2lkdGg9ZC5fZ2V0T3V0cHV0V2lkdGgoKSx0Lm91dHB1dEhlaWdodD1kLl9nZXRPdXRwdXRIZWlnaHQoKSx0Lm91dHB1dENoYW5uZWxDb3VudD1kLl9nZXRPdXRwdXRDaGFubmVsQ291bnQoKSxjb25zb2xlLmxvZygiT3V0cHV0IG1lbW9yeSBvZmZzZXQ6Iix0Lm91dHB1dE1lbW9yeU9mZnNldCksY29uc29sZS5sb2coIk91dHB1dCBoZWlnaHQ6Iix0Lm91dHB1dEhlaWdodCksY29uc29sZS5sb2coIk91dHB1dCB3aWR0aDoiLHQub3V0cHV0V2lkdGgpLGNvbnNvbGUubG9nKCJPdXRwdXQgY2hhbm5lbHM6Iix0Lm91dHB1dENoYW5uZWxDb3VudCksdC5zZWxlY3RlZFRGTGl0ZT1kfWNhdGNoKG0pe2MobSk7cmV0dXJufWYoKX0pfXMoKS50aGVuKHU9PntpZih1PT09bnVsbCl0aHJvdyBjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlIG51bGwiKSwibG9hZFRGTGl0ZSBudWxsIjthKHUpLnRoZW4oZj0+e2kodCl9KS5jYXRjaChmPT57Y29uc29sZS5lcnJvcigibG9hZFRGTGl0ZU1vZGVsIGVycm9yIiksbygibG9hZFRGTGl0ZU1vZGVsIGVycm9yIil9KX0pLmNhdGNoKHU9Pntjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlIGVycm9yOiIsdSksbygibG9hZFRGTGl0ZSBlcnJvcjoiK3UpfSl9KTtyZXR1cm4gbn1jbGFzcyBwbHtjb25zdHJ1Y3Rvcigpe3AodGhpcywiY2FudmFzIixuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsMCkpO3AodGhpcywiY29udGV4dCIsdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiLHt3aWxsUmVhZEZyZXF1ZW50bHk6ITB9KSk7cCh0aGlzLCJwaXhlbENvdW50IiwwKTtwKHRoaXMsImlucHV0T2Zmc2V0IiwwKTtwKHRoaXMsIm91dHB1dE9mZnNldCIsMCk7cCh0aGlzLCJpbmZvcyIpO3AodGhpcywibWFzayIpfWFzeW5jIGluaXQoZSx0KXthd2FpdCB0aGlzLmluaXRXYXNtKGUsdCksdGhpcy5pbmZvcyYmKHRoaXMuY2FudmFzLndpZHRoPXRoaXMuaW5mb3MuaW5wdXRXaWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQ9dGhpcy5pbmZvcy5pbnB1dEhlaWdodCx0aGlzLnBpeGVsQ291bnQ9dGhpcy5pbmZvcy5pbnB1dFdpZHRoKnRoaXMuaW5mb3MuaW5wdXRIZWlnaHQsdGhpcy5tYXNrPW5ldyBJbWFnZURhdGEodGhpcy5pbmZvcy5pbnB1dFdpZHRoLHRoaXMuaW5mb3MuaW5wdXRIZWlnaHQpLHRoaXMuaW5wdXRPZmZzZXQ9dGhpcy5pbmZvcy5pbnB1dE1lbW9yeU9mZnNldC80LHRoaXMub3V0cHV0T2Zmc2V0PXRoaXMuaW5mb3Mub3V0cHV0TWVtb3J5T2Zmc2V0LzQpfWFzeW5jIGluaXRXYXNtKGUsdCl7dGhpcy5pbmZvcz1hd2FpdCBobChlLHQpfWdldE91dHB1dERpbWVuc2lvbnMoKXt2YXIgZSx0LG4saTtyZXR1cm57d2lkdGg6KHQ9KGU9dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOmUub3V0cHV0V2lkdGgpIT1udWxsP3Q6MCxoZWlnaHQ6KGk9KG49dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOm4ub3V0cHV0SGVpZ2h0KSE9bnVsbD9pOjB9fWFzeW5jIHByb2Nlc3MoZSl7aWYoIXRoaXMubWFza3x8IXRoaXMuaW5mb3MpcmV0dXJuO2NvbnN0IHQ9dGhpcy5pbmZvcy5pbnB1dFdpZHRoLG49dGhpcy5pbmZvcy5pbnB1dEhlaWdodDt0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGUsMCwwLGUud2lkdGgsZS5oZWlnaHQsMCwwLHQsbik7Y29uc3QgaT10aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsMCx0LG4pLG89dGhpcy5pbmZvcy5zZWxlY3RlZFRGTGl0ZS5IRUFQRjMyO2ZvcihsZXQgcz0wO3M8dGhpcy5waXhlbENvdW50O3MrKyl7Y29uc3QgYT10aGlzLmlucHV0T2Zmc2V0K3MqMztvW2FdPWkuZGF0YVtzKjRdLzI1NSxvW2ErMV09aS5kYXRhW3MqNCsxXS8yNTUsb1thKzJdPWkuZGF0YVtzKjQrMl0vMjU1fXRoaXMuaW5mb3Muc2VsZWN0ZWRURkxpdGUuX3J1bkluZmVyZW5jZSgpO2ZvcihsZXQgcz0wO3M8dGhpcy5waXhlbENvdW50O3MrKyl7Y29uc3QgYT10aGlzLmluZm9zLnNlbGVjdGVkVEZMaXRlLkhFQVBGMzJbdGhpcy5vdXRwdXRPZmZzZXQrc107dGhpcy5tYXNrLmRhdGFbcyo0XT10aGlzLm1hc2suZGF0YVtzKjQrM109MjU1KmF9cmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKHRoaXMubWFzayl9aXNHcHVTdXBwb3J0ZWQoKXt2YXIgZSx0LG47cmV0dXJuKG49KHQ9KGU9dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOmUuc2VsZWN0ZWRURkxpdGUpPT1udWxsP3ZvaWQgMDp0Ll9pc0dQVUVuYWJsZWQoKSkhPW51bGw/bjohMX19Y2xhc3MgeWx7Y29uc3RydWN0b3IoKXtwKHRoaXMsInNlbGZpZVNlZ21lbnRhdGlvbiIsbmV3IHBsKTtwKHRoaXMsImJhY2tncm91bmRGaWx0ZXIiKTtwKHRoaXMsInByZXZpb3VzRGltZW5zaW9ucyIse3dpZHRoOjAsaGVpZ2h0OjB9KX1hc3luYyBpbml0KGUsdCl7YXdhaXQgdGhpcy5zZWxmaWVTZWdtZW50YXRpb24uaW5pdCh0Lndhc21Bc3NldFVyaVBhdGgsdC50ZmxpdGVBc3NldFVyaVBhdGgpO2NvbnN0e3dpZHRoOm4saGVpZ2h0Oml9PXRoaXMuc2VsZmllU2VnbWVudGF0aW9uLmdldE91dHB1dERpbWVuc2lvbnMoKTt0aGlzLmJhY2tncm91bmRGaWx0ZXI9bmV3IGNsKGUse2ZvcmVncm91bmRXaWR0aDoxLGZvcmVncm91bmRIZWlnaHQ6MSxtYXNrV2lkdGg6bixtYXNrSGVpZ2h0Oml9KX1hc3luYyB0cmFuc2Zvcm0oZSx0KXt2YXIgcyxhLHUsZjtjb25zdCBuPShzPWUudGltZXN0YW1wKSE9bnVsbD9zOjAsaT1hd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChlKSxvPWF3YWl0IHRoaXMuc2VsZmllU2VnbWVudGF0aW9uLnByb2Nlc3MoaSk7bz8oKGkud2lkdGghPT10aGlzLnByZXZpb3VzRGltZW5zaW9ucy53aWR0aHx8aS5oZWlnaHQhPT10aGlzLnByZXZpb3VzRGltZW5zaW9ucy5oZWlnaHQpJiYodGhpcy5wcmV2aW91c0RpbWVuc2lvbnMud2lkdGg9aS53aWR0aCx0aGlzLnByZXZpb3VzRGltZW5zaW9ucy5oZWlnaHQ9aS5oZWlnaHQsYXdhaXQoKGE9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6YS5yZXNpemVGb3JlZ3JvdW5kKGkud2lkdGgsaS5oZWlnaHQpKSksYXdhaXQoKHU9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dS5wcm9jZXNzKGksbykpLGUuY2xvc2UoKSx0LmVucXVldWUobmV3IFZpZGVvRnJhbWUoKGY9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6Zi5jYW52YXMse3RpbWVzdGFtcDpuLGFscGhhOiJkaXNjYXJkIn0pKSk6dC5lbnF1ZXVlKGUpfWFzeW5jIHNldEJhY2tncm91bmRPcHRpb25zKGUpe3ZhciB0O2F3YWl0KCh0PXRoaXMuYmFja2dyb3VuZEZpbHRlcik9PW51bGw/dm9pZCAwOnQuc2V0QmFja2dyb3VuZE9wdGlvbnMoZSkpfWFzeW5jIHNldFZpZGVvQkdSZWFkYWJsZShlKXt2YXIgdDthd2FpdCgodD10aGlzLmJhY2tncm91bmRGaWx0ZXIpPT1udWxsP3ZvaWQgMDp0LnNldFZpZGVvQkdSZWFkYWJsZShlKSl9YXN5bmMgc2V0VmlydHVhbEJHSW1hZ2UoZSl7dmFyIHQ7YXdhaXQoKHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dC5zZXRWaXJ0dWFsQkdJbWFnZShlKSl9c2V0RmxpY2tlcmluZ09wdGlvbnMoZSl7dmFyIHQ7KHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbHx8dC5zZXRGbGlja2VyaW5nT3B0aW9ucyhlKX1hc3luYyBwcm9maWxlKGUpe3ZhciB0LG47cmV0dXJuKG49KHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dC5wcm9maWxlKGUpKSE9bnVsbD9uOltdfX1jb25zdCBOcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3AodGhpcywiYmFja2dyb3VuZFRyYW5zZm9ybWVyIixuZXcgeWwpO3AodGhpcywibWVkaWFQcm9jZXNzb3IiLG5ldyB3cyk7cCh0aGlzLCJyYXRlIiwzMCk7cCh0aGlzLCJyZXNvbHZlT25NZWRpYVByb2Nlc3NvciIpO3AodGhpcywiZXZlbnRzUXVldWUiLFtdKX1hc3luYyBpbml0KGUsdCl7YXdhaXQgdGhpcy5iYWNrZ3JvdW5kVHJhbnNmb3JtZXIuaW5pdChlLHQpLGF3YWl0IHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhbnNmb3JtZXJzKFt0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lcl0pLHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhY2tFeHBlY3RlZFJhdGUodGhpcy5yYXRlKSx0aGlzLm1lZGlhUHJvY2Vzc29yLm9uQW55KChuLGkpPT57dGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcj8odGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcih7bmFtZTpuLGRhdGE6aX0pLHRoaXMucmVzb2x2ZU9uTWVkaWFQcm9jZXNzb3I9dm9pZCAwKTp0aGlzLmV2ZW50c1F1ZXVlLnB1c2goe25hbWU6bixkYXRhOml9KX0pfWFzeW5jIG9uTWVkaWFQcm9jZXNzb3JFdmVudCgpe3JldHVybiBhd2FpdCBuZXcgUHJvbWlzZShlPT57dGhpcy5ldmVudHNRdWV1ZS5sZW5ndGg+MD9lKHRoaXMuZXZlbnRzUXVldWUuc2hpZnQoKSk6dGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcj1lfSl9YXN5bmMgc2V0VHJhY2tFeHBlY3RlZFJhdGUoZSl7dGhpcy5yYXRlPWUsdGhpcy5tZWRpYVByb2Nlc3Nvci5zZXRUcmFja0V4cGVjdGVkUmF0ZShlKX1hc3luYyB0cmFuc2Zvcm0oZSx0KXt0aGlzLm1lZGlhUHJvY2Vzc29yLnRyYW5zZm9ybShlLHQpfWFzeW5jIHNldEJhY2tncm91bmRPcHRpb25zKGUpe3ZhciB0O2F3YWl0KCh0PXRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyKT09bnVsbD92b2lkIDA6dC5zZXRCYWNrZ3JvdW5kT3B0aW9ucyhlKSl9c2V0VmlkZW9CR1JlYWRhYmxlKGUpe3RoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLnNldFZpZGVvQkdSZWFkYWJsZShlKX1hc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShlKXthd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5zZXRWaXJ0dWFsQkdJbWFnZShlKX1hc3luYyB0ZXJtaW5hdGUoKXthd2FpdCB0aGlzLm1lZGlhUHJvY2Vzc29yLmRlc3Ryb3koKX1zZXRGbGlja2VyaW5nT3B0aW9ucyhlKXt0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5zZXRGbGlja2VyaW5nT3B0aW9ucyhlKX1zZXRWb25hZ2VNZXRhZGF0YShlKXtmcyhlKX1hc3luYyBwcm9maWxlKGUpe3JldHVybiBKU09OLnN0cmluZ2lmeShhd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5wcm9maWxlKGUpKX19O2xldCBCaT1OcjsoKCk9PntYaSgiUHJvY2Vzc29yV29ya2VyIixOcil9KSgpfSkoKTsK",jv=typeof window<"u"&&window.Blob&&new Blob([atob(Dv)],{type:"text/javascript;charset=utf-8"});function l4(){const bt=jv&&(window.URL||window.webkitURL).createObjectURL(jv);try{return bt?new Worker(bt):new Worker("data:application/javascript;base64,"+Dv)}finally{bt&&(window.URL||window.webkitURL).revokeObjectURL(bt)}}const Uv=class extends lm{constructor(){super(...arguments),ot(this,"rate",30),ot(this,"worker")}async init(bt){this.worker=await Pu(c4,l4),await this.worker.init(`worker_${Uv.initCount++}`,bt),await this.worker.setVonageMetadata(ws()),await this.setBackgroundOptions(bt),this.listenWorker()}async setTrackExpectedRate(bt){var vt;await((vt=this.worker)==null?void 0:vt.setTrackExpectedRate(bt))}async setBackgroundOptions(bt){var vt,Ct,Xt;const{transformerType:Yt}=bt;switch(Yt){case"VideoBackground":await((vt=this.worker)==null?void 0:vt.setVideoBGReadable(await pm.createVideoReadable(bt.backgroundAssetUri)));break;case"VirtualBackground":await((Ct=this.worker)==null?void 0:Ct.setVirtualBGImage(await pm.createImageCanvas(bt.backgroundAssetUri)));break}await((Xt=this.worker)==null?void 0:Xt.setBackgroundOptions(bt))}async transform(bt,vt){var Ct;await((Ct=this.worker)==null?void 0:Ct.transform(bt,vt))}async destroy(){var bt;await((bt=this.worker)==null?void 0:bt.terminate())}async setFlickeringOptions(bt){var vt;await((vt=this.worker)==null?void 0:vt.setFlickeringOptions(bt))}async profile(bt){var vt;const Ct=await((vt=this.worker)==null?void 0:vt.profile(bt));return JSON.parse(Ct??"[]")}async listenWorker(){for(var bt,vt,Ct;(bt=this.worker)!=null&&bt.worker;){const{name:Xt,data:Yt}=await((vt=this.worker)==null?void 0:vt.onMediaProcessorEvent());switch(Xt){case"error":case"warn":this.emit(Xt,Yt);break;case"pipelineInfo":switch(this.emit(Xt,Yt),Yt){case"pipeline_ended":case"pipeline_ended_with_error":await((Ct=this.worker)==null?void 0:Ct.terminate());return}break}}}};let Hv=Uv;ot(Hv,"initCount",0);class u4{constructor(vt){this.queries=vt}async downloadSpeedscope(){this.download(await this.convertToSpeedscope())}download(vt){const Ct=document.createElement("a");Ct.href=URL.createObjectURL(new Blob([vt],{type:"application/json"})),Ct.download=`profile-${+new Date}.speedscope.json`,document.body.appendChild(Ct),Ct.click(),document.body.removeChild(Ct)}convertToSpeedscope(){const vt=[],Ct={},Xt=[];let Yt=0;for(const In of this.queries){const En=[];for(const kn of In)Ct[kn.name]===void 0&&(Ct[kn.name]=vt.length,vt.push({name:kn.name})),En.push({type:kn.action==Vm.PUSH?"O":"C",frame:Ct[kn.name],at:kn.timestamp}),Yt=Math.max(Yt,kn.timestamp+kn.duration);Xt.push({events:En,type:"evented",name:"GPU Profile",unit:"nanoseconds",startValue:0,endValue:Yt})}return JSON.stringify({$schema:"https://www.speedscope.app/file-format-schema.json",shared:{frames:vt},profiles:Xt},null,2)}}class w0 extends lm{constructor(){super(),ot(this,"worker",new Hv),ot(this,"connector",new Qt(this.worker))}async init(vt){await this.worker.init(vt),this.worker.onAny((Ct,Xt)=>this.emit(Ct,Xt))}async setBackgroundOptions(vt){await this.worker.setBackgroundOptions(vt)}setTrackExpectedRate(vt){this.worker.setTrackExpectedRate(vt)}getConnector(){return this.connector}async profile(vt){return this.worker.profile(vt)}static async profile(vt){const Ct=await tt.all(this.instances.map(Xt=>Xt.profile(vt)));return new u4(Ct)}static async create(vt){const Ct=new this;return await Ct.init(vt),this.instances.push(Ct),Ct}}ot(w0,"instances",[]);function d4(){return wu}function f4(){return Ou}function h4(){return op}function p4(){return Cp}function m4(){return nm}function g4(){return Bp}function v4(){return Dl}async function y4(bt){return await w0.create(bt)}}.call(this,b(0),b(42))},function(_e,et,b){const tt=b(34)().onlyLocal(),nt=b(100),rt=nt.prependProxyToUrlIfNeeded,it=(st,at)=>{let lt=st.apiUrl.includes("anvil.opentok.com")?"https://static.opentok.com":"https://www.dev.tokbox.com";return at&&(at.includes("euproxy.opentok.com")?lt="https://static-eu.opentok.com":lt=rt(lt,at)),`${lt}/ml-transformers/v4.0.0`},ot={getConfig:function(at){at===void 0&&(at={});const ct=at,ut=ct.staticConfig,lt=ut===void 0?tt:ut,dt=ct.proxyUrl,ft=it(lt,dt);return{mediapipeBaseAssetsUri:`${ft}`,wasmAssetUriPath:`${ft}/`,tfliteAssetUriPath:`${ft}/`}}};_e.exports=ot},function(_e,et,b){const tt=b(16),nt=b(11),rt=b(723),it=b(724),ot=b(725);_e.exports=function(at){at===void 0&&(at={});const ct=at.Errors||b(7),ut=at.ExceptionCodes||b(10),lt=at.logging||b(1)("publisherInit"),dt=at.otError||b(13)(),ft=at.OTHelpers||b(8),St=at.Publisher||b(168)(),Tt=at.sessionObjects||b(21);return function(gt,yt,Et){lt.debug(`OT.initPublisher(${gt})`),typeof gt=="string"&&!document.getElementById(gt)&&(gt=yt,yt=Et,Et=arguments[3]),typeof gt=="function"?(Et=gt,yt=void 0,gt=void 0):nt(gt)&&!ft.isElementNode(gt)&&(Et=yt,yt=gt,gt=void 0),typeof yt=="function"&&(Et=yt,yt=void 0);let It;yt&&(nt(yt)?yt.insertDefaultUI===!1&&gt?It="You cannot specify a target element if insertDefaultUI is false":rt(yt.audioSource)&&rt(yt.videoSource)&&(It="You cannot specify both audioSource and videoSource as null or false"):(It="properties argument to Publisher constructor, if provided, should be an object",yt=void 0)),it(yt),ot(yt);const Gt=new St(yt||{});Tt.publishers.add(Gt);const Wt=function(){Et&&tt(Et)&&(Et(...arguments),Et=void 0)};It!==void 0&&(lt.error(It),Wt(dt(ct.INVALID_PARAMETER,new Error(It),ut.INVALID_PARAMETER)));const At=function(Nt){Gt.off("publishComplete",kt),Wt(Nt)};let kt=function(Nt){Gt.off("initSuccess",At),Nt&&Wt(Nt)};return Gt.once("initSuccess",At),Gt.once("publishComplete",kt),Gt.publish(gt),Gt}}},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5));const ot=b(18),st=b(726),at=b(11),ct=b(16),ut=b(9),lt=b(26),dt=b(6),ft=b(20),St=b(34)(),Tt=b(73),pt=b(314),gt=b(728),yt=b(729),Et=b(730),It=b(100),Gt=It.prependProxyToUrlIfNeeded,Wt=b(101),At=Wt.getProxyUrl,kt=b(731);_e.exports=function(Nt){Nt===void 0&&(Nt={});const tn=Nt.adaptIceServers||b(102).adaptIceServers,_t=Nt.AnalyticsHelper||ft,Kt=Nt.APIKEY||b(70),cn=Nt.Capabilities||b(169),an=Nt.convertAnvilErrorCode||b(732),mn=Nt.convertRumorError||b(321),on=Nt.Errors||b(7),yn=Nt.Events||b(23)(),fn=Nt.Stream||b(170),sn=Nt.ExceptionCodes||b(10),un=Nt.hasIceRestartsCapability||b(322),Ln=Nt.hasE2eeCapability||b(110),Xn=Nt.logging||b(1)("Session"),pn=Nt.otError||b(13)(),Vn=Nt.OTErrorClass||b(22),Tn=Nt.OTHelpers||b(8),Jn=b(733),lr=Nt.StaticConfig||St,tr=Nt.staticConfig||lr.onlyLocal(),Qn=Nt.Publisher||b(168)(),Sr=Nt.RaptorSocket||b(734).default(),vr=Nt.SessionDispatcher||b(330),Fr=Nt.sessionObjects||b(21),kr=Nt.sessionTag||b(329),jr=Nt.socketCloseCodes||b(76),xo=Nt.Subscriber||b(305)(),Er=Nt.systemRequirements||b(153),xr=Nt.uuid||b(15),Un=yt({otError:pn}),Mn=Nt.global||(typeof window!==void 0?window:commonjsGlobal),sr=Nt.getSessionInfo||b(758)(),Ar=b(142),so=Nt.KeyStore||b(761),Bn=Nt.SFrameClientStore||b(763),gr=Nt.SinglePeerConnectionController||b(765),Or=Nt.initPublisher||b(319)({Publisher:Qn});return function(ho,vo,po){var zr=this;let Go=po===void 0?{}:po,mo=Go.iceConfig,Zo=Go.connectionEventsSuppressed,$r=Go.ipWhitelist,Ru=$r===void 0?!1:$r,jo=Go.encryptionSecret,yo=Go._enableSinglePeerConnection;const _o=At(),js=new _t,Ql=zn=>typeof zn=="string"?this.streams.get(zn)||{id:zn}:zn;dt(this),this._tag=kr,Er.check()||Er.upgrade(),vo==null&&(vo=ho,ho=null),Un(mo),this.id=vo,this.sessionId=vo,this.keyStore=new so,this.sFrameClientStore=new Bn;let Rs,xa,Iu,Gu,jp,$u,Qu,Jr,Qs=!1,au=ho;const Ws=this;let yl=vo,Xr=xr(),Js=Xn,Up=!1;const cu=[];let lu=null,qo=!1,Gl=!1,es,ju,lp,$a;const ep=Tn.statable(this,["disconnected","connecting","connected","disconnecting"],"disconnected");this.connection=null,this.connections=new Tn.Collection,this.streams=new Tn.Collection,this.archives=new Tn.Collection;let _u;const na=function(xn){ep("disconnected"),xn.code||(xn.code=sn.CONNECT_FAILED),Js.error(`${xn.name||"Unknown Error"}: ${xn.message}`),Vn.handleJsException({error:xn,target:this,analytics:js}),this.trigger("sessionConnectFailed",xn)},Yo=function(xn){Qs=!1;const Nn=xn.reason;this.logEvent("Connect","Disconnected",{reason:xn.reason});const qn=new yn.SessionDisconnectEvent("sessionDisconnected",Nn.replace("networkTimedout","networkDisconnected"));this.isConnected()&&this.disconnect(),ju(),es.call(this,Nn),setTimeout(()=>{this.dispatchEvent(qn),lp.call(this,qn.reason),qn.isDefaultPrevented()||$a.call(this,qn.reason)})},_l=function(xn){Zo||xn.id.match(/^symphony\./)||this.dispatchEvent(new yn.ConnectionEvent(lt.CONNECTION_CREATED,xn))},uo=function(xn,Nn){xn.id.match(/^symphony\./)||Rs&&xn.id===Rs.id()||this.dispatchEvent(new yn.ConnectionEvent(lt.CONNECTION_DESTROYED,xn,Nn))},tp=function(xn){xn&&xn.connection&&(!this.connection||xn.connection.id!==this.connection.id)&&this.dispatchEvent(new yn.StreamEvent(lt.STREAM_CREATED,xn,null,!1))},xu=function(xn){const Nn=xn.target,qn=xn.changedProperty;let Rr=xn.newValue;qn==="videoDisableWarning"||qn==="audioDisableWarning"||(qn==="videoDimensions"&&(Rr={width:Rr.width,height:Rr.height}),this.dispatchEvent(new yn.StreamPropertyChangedEvent(lt.STREAM_PROPERTY_CHANGED,Nn,qn,xn.oldValue,Rr)))},xp=function(xn,Nn){Nn===void 0&&(Nn="clientDisconnected");const qn=new yn.StreamEvent("streamDestroyed",xn,Nn,!0),Rr=()=>{Fr.subscribers.where({streamId:xn.id}).filter(Zr=>Zr.session.id===this.id&&Zr.stream).forEach(Zr=>{Zr._disconnect({reason:Nn}),qn.isDefaultPrevented()||Zr._destroy({reason:Nn,noStateTransition:!0})})};xn.connection.id===this.connection.id?Fr.publishers.where({streamId:xn.id}).forEach(function(Zr){Zr._.unpublishStreamFromSession(xn,this,Nn)},this):this.dispatchEvent(qn),Rr()},vs=function(xn){this.dispatchEvent(new yn.ArchiveEvent("archiveStarted",xn))},wp=function(xn){this.dispatchEvent(new yn.ArchiveEvent("archiveDestroyed",xn))},Jp=function(xn){const Nn=xn.target,qn=xn.changedProperty,Rr=xn.newValue;qn==="status"&&Rr==="stopped"?this.dispatchEvent(new yn.ArchiveEvent("archiveStopped",Nn)):this.dispatchEvent(new yn.ArchiveEvent("archiveUpdated",Nn))},Op=()=>Fr.subscribers.forEach(zn=>zn._.pauseAndPlayVideoElement()),vp=function(){Ws.token=null,Iu=null,ep("disconnected"),Rs=null,xa&&(xa.stop(),xa=null),Ws.connection=null,Ws.capabilities=new cn([],{hasE2eeCapability:Ln}),Ws.connections.destroy(),Ws.streams.destroy(),Ws.archives.destroy()};ju=function(){Xr=xr(),vp()},es=function(xn){Fr.publishers.where({session:this}).forEach(Nn=>{Nn.disconnect(xn)}),Fr.subscribers.where({session:this}).forEach(Nn=>{Nn._disconnect()})},lp=function(xn){Fr.publishers.where({session:this}).forEach(Nn=>{Nn._.streamDestroyed(xn)})},$a=function(xn){Fr.subscribers.where({session:this}).forEach(Nn=>{Nn._destroy({reason:xn})})};const Hp=function(){Js.debug("OT.Session: connecting to Raptor");const xn=Gt(this.sessionInfo.messagingURL,_o),Nn=["forceMute"];this.sessionInfo.isAdaptiveEnabled&&Nn.push("amr"),Gl&&Nn.push("spc"),Rs=new Sr({connectionId:Xr,sessionId:vo,messagingSocketUrl:xn,symphonyUrl:this.sessionInfo.symphonyAddress,dispatcher:vr(this,{connectionEventsSuppressed:Zo}),analytics:js,requestedCapabilities:Nn});function Rr(Zr,wo){let Wo;switch(Zr){case"WebSocketConnection":if(Wo=st(jr.codes,ws=>ws===wo),Wo)return on[`SOCKET_${Wo}`];break;case"ConnectToSession":case"GetSessionState":switch(wo){case sn.CONNECT_FAILED:return on.CONNECT_FAILED;case sn.UNEXPECTED_SERVER_RESPONSE:return on.UNEXPECTED_SERVER_RESPONSE;case sn.CONNECTION_LIMIT_EXCEEDED:return on.CONNECTION_LIMIT_EXCEEDED}break}}Rs.connect(Iu,this.sessionInfo,{connectionEventsSuppressed:Zo},(Zr,wo)=>{if(Zr){const ws={};let ns;if(Zr.reason==="ConnectToSession"||Zr.reason==="GetSessionState"){const Zs=mn(Zr);ut(ws,{originalMessage:Zr.message,originalCode:Zr.code}),Zr.code=Zs.code,Zr.message=Zs.message}(Zr.code||Zr.message||Zr.reason)&&(ns={failureCode:Zr.code,failureMessage:Zr.message,failureReason:Zr.reason,socketId:Rs.socketId}),Rs=null,this.logConnectivityEvent("Failure",ws,ns);const ds=Rr(Zr.reason,Zr.code);ds&&(Zr=pn(ds,new Error(Zr.message),Zr.code)),na.call(this,Zr);return}Js.debug("OT.Session: Received session state from Raptor",wo),this.connection=this.connections.get(Rs.id()),this.connection&&(this.capabilities=this.connection.permissions),ep("connected"),this.logConnectivityEvent("Success",{connectionId:this.connection.id}),this.connection.on("destroyed",Yo,this),this.dispatchEvent(new yn.SessionConnectEvent(lt.SESSION_CONNECTED)),this.connections.on({add:_l,remove:uo},this),this.streams.on({add:tp,remove:xp,update:xu},this),this.archives.on({add:vs,remove:wp,update:Jp},this),this.connections._triggerAddEvents(),this.streams._triggerAddEvents(),this.archives._triggerAddEvents(),Tn.env.isiOS&&Tn.env.iOSVersion>=13.3&&this.on("gsmCallEnded",Op)})},np=zn=>this.capabilities.permittedTo(zn),uu=(zn,xn)=>{Xn.error(`${zn.name}: ${zn.message}`),typeof xn=="function"&&xn(zn),Vn.handleJsException({error:zn,target:this,analytics:js})},Wu=zn=>{const xn=pn(zn.code,new Error(zn.message),zn.exceptionCode);return uu(xn),xn},Xl=()=>this.isNot("connected")?Wu(Jn.NOT_CONNECTED):np("forceMute")?null:Wu(Jn.PERMISSION_DENIED),Np=zn=>zn.code==="404"?Wu(Jn.NOT_FOUND):zn.code==="403"?Wu(Jn.PERMISSION_DENIED):Wu(Jn.UNEXPECTED_SERVER_RESPONSE);this.reportIssue=zn=>{let xn=zn.id;return pt(js.logEvent.bind(js))({action:"ReportIssue",variation:"Event",connectionId:Xr,payload:{reportIssueId:xn}},null)},this.logEvent=function(zn,xn,Nn,qn){let Rr={action:zn,variation:xn,payload:Nn,sessionId:yl,messagingServer:jp,p2p:Gu,partnerId:au,connectionId:Xr};qn&&(Rr=ut(qn,Rr)),js.logEvent(Rr)},this.logConfigurationFileEvent=function(zn,xn,Nn){if(xn===void 0&&(xn=null),Nn===void 0&&(Nn={}),zn==="Attempt")Qu=new Date().getTime();else if(zn==="Failure"||zn==="Success"){const qn=new Date().getTime()-Qu;ut(Nn,{attemptDuration:qn})}_o&&(Nn.proxyUrl=_o),this.logEvent("ConfigurationFile",zn,xn,Object.assign({},Nn))},this.logConnectivityEvent=function(zn,xn,Nn){if(xn===void 0&&(xn=null),Nn===void 0&&(Nn={}),_o&&(Nn.proxyUrl=_o),zn==="Attempt"&&(xa&&(xa.stop(),Xn.error("_connectivityAttemptPinger should have been cleaned up")),$u=new Date().getTime(),xa=new Tt(()=>{this.logEvent("Connect","Attempting",xn,Object.assign({},Nn))},1/5,6),xa.start()),zn==="Failure"||zn==="Success"||zn==="Cancel"){const qn=Rr=>{xa&&(xa.stop(),xa=void 0),this.logEvent("Connect",zn,xn,Object.assign({},Nn,{attemptDuration:new Date().getTime()-$u,iceConfig:Rr,ipWhitelist:Ru}))};zn==="Success"?this._.getIceConfig().then(Rr=>{const Zr={includeServers:mo&&mo.includeServers||"all",transportPolicy:Rr.transportPolicy};Zr.servers=Rr.servers?Rr.servers.map(wo=>({url:wo.urls})):[],qn(Zr)}):qn()}else this.logEvent("Connect",zn,xn,Nn)},this.connect=function(){let zn;for(var xn=arguments.length,Nn=new Array(xn),qn=0;qn<xn;qn++)Nn[qn]=arguments[qn];Nn.length>1&&(typeof Nn[0]=="string"||typeof Nn[0]=="number")&&typeof Nn[1]=="string"?(ho==null&&(au=Nn[0].toString()),zn=Nn[1]):zn=Nn[0];const Rr=Nn[Nn.length-1];if(zr.is("connecting","connected"))return Js.warn(`OT.Session: Cannot connect, the session is already ${zr.currentState}`),zr;js.sessionInfo=new Ar,vp(),ep("connecting");const Zr=Xr;function wo(){const ds=Xr!==Zr;return ds&&Xn.debug("Connection was interrupted"),ds}if(zr.token=!ct(zn)&&zn,Iu=!ct(zn)&&zn,Rr&&ct(Rr)){let ds;const Zs=function(){ds();for(var Ms=arguments.length,Wl=new Array(Ms),Us=0;Us<Ms;Us++)Wl[Us]=arguments[Us];Rr(void 0,...Wl)},$s=function(){ds(),Rr(...arguments)};ds=()=>{zr.off("sessionConnected",Zs),zr.off("sessionConnectFailed",$s)},zr.once("sessionConnected",Zs),zr.once("sessionConnectFailed",$s)}if(au==null||ct(au))return setTimeout(na.bind(zr,pn(on.AUTHENTICATION_ERROR,new Error("API Key is undefined. You must pass an API Key to initSession."),sn.AUTHENTICATION_ERROR))),zr;if(!yl||at(yl)||Array.isArray(yl)){let ds;return yl?(ds="SessionID is not a string. You must use string as the session ID passed into OT.initSession().",yl=yl.toString()):ds="SessionID is undefined. You must pass a sessionID to initSession.",setTimeout(na.bind(zr,pn(on.INVALID_SESSION_ID,new Error(ds),sn.INVALID_SESSION_ID))),zr.logConnectivityEvent("Attempt"),zr.logConnectivityEvent("Failure",null,{failureReason:"ConnectToSession",failureCode:sn.INVALID_SESSION_ID,failureMessage:ds}),zr}if(zr.apiKey=au.toString(),au=au.toString(),jo){if(!Ln())return setTimeout(na.bind(zr,pn(on.UNSUPPORTED_BROWSER,new Error("E2E Encryption is not supported in your browser.")))),zr;try{kt(jo),zr.keyStore.set(vo,jo),qo=!0}catch(ds){return setTimeout(na.bind(zr,pn(on.INVALID_ENCRYPTION_SECRET,new Error(`Invalid encryptionSecret: ${ds.message}`)))),zr}}Kt.value.length===0&&(Kt.value=au);const Wo=!!lr.onlyLocal().configUrl,ws=Ru===!0&&!!lr.onlyLocal().ipWhitelistConfigUrl;return!Wo&&!ws?zr.logConfigurationFileEvent("Event",{message:"No configUrl, using local config only"}):zr.logConfigurationFileEvent("Attempt"),(Wo||ws?lr.get({partnerId:au,token:zn,useIpWhitelistConfigUrl:ws,proxyUrl:_o}):tt.resolve(lr.onlyLocal())).then(ds=>((Wo||ws)&&zr.logConfigurationFileEvent("Success"),ds),ds=>((Wo||ws)&&zr.logConfigurationFileEvent("Failure",{failureMessage:ds.message,failureStack:ds.stack}),lr.onlyLocal())).then(ds=>{if(zr.staticConfig=ds,js.staticConfig=ds,ds.apiEnabled===!1)throw pn(on.API_KEY_DISABLED,new Error("The API KEY has been disabled. Access to the service is currently being restricted. Please contact support."));if(wo())return;zr.logConnectivityEvent("Attempt"),_o?zr.logEvent("SessionInfo","Attempt",null,{proxyUrl:_o}):zr.logEvent("SessionInfo","Attempt");const Zs=Ms=>{Ms.code=an(Ms.code),zr.logConnectivityEvent("Failure",null,{failureReason:"GetSessionInfo",failureCode:Ms.code||"No code",failureMessage:Ms.message,failureName:Ms.name}),Ms.name&&(Ms=pn(Ms.name,new Error(`${Ms.message}${Ms.code?` (${Ms.code})`:""}`),Ms.code)),na.call(zr,Ms)},$s=Ms=>{if(wo())return;if(Ms.partnerId&&Ms.partnerId!==au){const Us="Authentication Error: The API key does not match the token or session.";Zs(pn(on.AUTHENTICATION_ERROR,new Error(Us),sn.AUTHENTICATION_ERROR));return}Gl=Et(Ms,yo),Gl&&(_u=new gr(zr)),js.sessionInfo=Ms;const Wl={features:{reconnection:Ms.reconnection,renegotiation:un()&&Ms.renegotiation,simulcast:Ms.simulcast===void 0?!1:Ms.simulcast&&Tn.env.name==="Chrome"}};if(_o&&(Wl.proxyUrl=_o),zr.is("connecting")){zr.sessionInfo=Ms,zr._.setIceServers(zr.sessionInfo.iceServers),Gu=Ms.p2pEnabled,jp=Ms.messagingServer,zr.logEvent("SessionInfo","Success",null,Wl,{messagingServer:Ms.messagingServer});const Us=ds.sessionInfoOverrides;Us!=null&&typeof Us=="object"&&Object.keys(Us).forEach(eu=>{Object.defineProperty(zr.sessionInfo,eu,{value:Us[eu]})}),Hp.call(zr)}},Ap=Gt(ds.apiUrl,_o);return sr({anvilUrl:Ap,sessionId:vo,token:Iu,connectionId:Xr,clientVersion:ds.clientVersion}).then($s,Zs)}).catch(ds=>{na.call(zr,ds)}),zr},this.disconnect=function(){_u&&(_u.destroy(),_u=null),Rs&&Rs.isNot("disconnected")?Rs.isNot("disconnecting")&&(Rs.isNot("connecting")||this.logConnectivityEvent("Cancel"),ep("disconnecting"),Rs.disconnect(),this.off("gsmCallEnded",Op)):ju()},this.destroy=function(){this.streams.destroy(),this.connections.destroy(),this.archives.destroy(),this.disconnect()},this.publish=function(zn,xn,Nn){if(typeof zn=="function"&&(Nn=zn,zn=void 0),typeof xn=="function"&&(Nn=xn,xn=void 0),Nn=Nn||function(){},this.isNot("connected"))return js.logError(1010,"OT.exception","We need to be connected before you can publish",null,{action:"Publish",variation:"Failure",failureReason:"unconnected",failureCode:sn.NOT_CONNECTED,failureMessage:"We need to be connected before you can publish",sessionId:yl,streamId:zn&&zn.stream?zn.stream.id:null,p2p:this.sessionInfo?this.sessionInfo.p2pEnabled:void 0,messagingServer:this.sessionInfo?this.sessionInfo.messagingServer:null,partnerId:au}),uu(pn(on.NOT_CONNECTED,new Error("We need to be connected before you can publish"),sn.NOT_CONNECTED),Nn),null;if(!np("publish")){const qn="This token does not allow publishing. The role must be at least `publisher` to enable this functionality",Rr={failureReason:"Permission",failureCode:sn.UNABLE_TO_PUBLISH,failureMessage:qn};return this.logEvent("Publish","Failure",null,Rr),uu(pn(on.PERMISSION_DENIED,new Error(qn),sn.UNABLE_TO_PUBLISH),Nn),null}if(!zn||typeof zn=="string"||Tn.isElementNode(zn))zn=Or(zn,xn);else if(zn instanceof Qn)"session"in zn&&zn.session&&"sessionId"in zn.session&&(zn.session.sessionId===this.sessionId?Js.warn(`Cannot publish ${zn.guid()} again to ${this.sessionId}. Please call session.unpublish(publisher) first.`):Js.warn(`Cannot publish ${zn.guid()} publisher already attached to ${zn.session.sessionId}. Please call session.unpublish(publisher) first.`));else{uu(pn(on.INVALID_PARAMETER,new Error("Session.publish :: First parameter passed in is neither a string nor an instance of the Publisher"),sn.UNABLE_TO_PUBLISH),Nn);return}return Up&&zn._.forceMuteAudio(),zn._.publishToSession(this,js).catch(qn=>{throw qn.message=`Session.publish :: ${qn.message}`,Js.error(qn.code,qn.message),qn}).then(()=>zn).then(function(){for(var qn=arguments.length,Rr=new Array(qn),Zr=0;Zr<qn;Zr++)Rr[Zr]=arguments[Zr];return Nn(null,...Rr)},qn=>Nn(qn)),zn},this.unpublish=function(zn){if(!zn){Js.error("OT.Session.unpublish: publisher parameter missing.");return}zn._.unpublishFromSession(this,"unpublished")},this.setIceConfig=function(){var zn=(0,it.default)(rt.default.mark(function xn(Nn){var qn,Rr,Zr;return rt.default.wrap(function(Wo){for(;;)switch(Wo.prev=Wo.next){case 0:if(Un(Nn),js.logEvent({action:"setIceConfig",variation:"Attempt",payload:{newIceConfig:Nn}}),mo=Object.assign({},Nn),Nn.includeServers!=="all"){Wo.next=8;break}return Wo.next=6,Ws._.getOtIceServerInfo();case 6:qn=Wo.sent,Nn.customServers=Nn.customServers.concat(qn.servers);case 8:return Rr=ws=>({iceServers:ws.customServers,iceTransportPolicy:ws.transportPolicy}),Zr=Rr(Nn),Wo.prev=10,Wo.next=13,tt.all(Fr.publishers.map(ws=>ws._.setIceConfig(Zr)).concat(Fr.subscribers.map(ws=>ws._.setIceConfig(Zr))));case 13:Wo.next=19;break;case 15:throw Wo.prev=15,Wo.t0=Wo.catch(10),js.logEvent({action:"setIceConfig",variation:"Failure",payload:{newIceConfig:Nn}}),Wo.t0;case 19:js.logEvent({action:"setIceConfig",variation:"Success",payload:{newIceConfig:Nn}});case 20:case"end":return Wo.stop()}},xn,null,[[10,15]])}));return function(xn){return zn.apply(this,arguments)}}(),this.subscribe=function(zn,xn,Nn,qn){if(typeof xn=="function"&&(qn=xn,xn=void 0,Nn=void 0),typeof Nn=="function"&&(qn=Nn,Nn=void 0),qn=qn||function(){},!this.connection||!this.connection.connectionId){uu(pn(on.NOT_CONNECTED,new Error("Session.subscribe :: Connection required to subscribe"),sn.UNABLE_TO_SUBSCRIBE),qn);return}if(!zn){uu(pn(on.INVALID_PARAMETER,new Error("Session.subscribe :: stream cannot be null"),sn.UNABLE_TO_SUBSCRIBE),qn);return}if(!Object.prototype.hasOwnProperty.call(zn,"streamId")){uu(pn(on.INVALID_PARAMETER,new Error("Session.subscribe :: invalid stream object"),sn.UNABLE_TO_SUBSCRIBE),qn);return}if(Nn&&Nn.insertDefaultUI===!1&&xn){uu(pn(on.INVALID_PARAMETER,new Error("You cannot specify a target element if insertDefaultUI is false"),sn.INVALID_PARAMETER),qn);return}xn&&xn.insertDefaultUI===!1&&(Nn=xn,xn=void 0);const Rr=new xo(xn,ut(Nn||{},{stream:zn,session:this,analytics:js,_singlePeerConnectionController:_u}),Zr=>{if(Zr){uu(Zr,qn);return}qn(null,Rr)});return Fr.subscribers.add(Rr),Rr},this.unsubscribe=function(zn){if(!zn){const xn="OT.Session.unsubscribe: subscriber cannot be null";throw Js.error(xn),new Error(xn)}return zn.stream?(Js.debug(`OT.Session.unsubscribe: subscriber ${zn.id}`),zn._destroy({reason:"Unsubscribe"}),!0):(Js.warn("OT.Session.unsubscribe:: tried to unsubscribe a subscriber that had no stream"),!1)},this.getSubscribersForStream=function(zn){return Fr.subscribers.where({streamId:zn.id})},this.getPublisherForStream=function(zn){let xn,Nn;if(typeof zn=="string")xn=zn;else if(typeof zn=="object"&&zn&&Object.hasOwnProperty.call(zn,"id"))xn=zn.id;else throw Nn="Session.getPublisherForStream :: Invalid stream type",Js.error(Nn),new Error(Nn);return Fr.publishers.where({streamId:xn})[0]},this._={getProxyUrl(){return _o},isE2ee(){return Ws.sessionInfo.e2ee&&qo&&!!Ws.capabilities.supportsE2ee},isSocketReconnecting(){return Qs},getSocket(){return Rs},reconnecting:function(){Qs=!0,this.dispatchEvent(new yn.SessionReconnectingEvent)}.bind(this),reconnected:function(){Qs=!1,this.dispatchEvent(new yn.SessionReconnectedEvent),this.sessionInfo.reconnection&&(Fr.publishers.where({session:this}).forEach(zn=>{zn._.iceRestart()}),this.sessionInfo.p2pEnabled||Fr.subscribers.where({session:this}).forEach(zn=>{zn._.iceRestart("socket reconnected")}))}.bind(this),dispatchSignal:function(zn,xn,Nn){const qn=new yn.SignalEvent(xn,Nn,zn);qn.target=this,this.trigger(lt.SIGNAL,qn),xn&&this.dispatchEvent(qn)}.bind(this),dispatchCaption:function(zn,xn){let Nn,qn,Rr;try{const wo=JSON.parse(xn.data);Nn=wo.caption.text,qn=wo.streamId,Rr=wo.isFinal}catch(wo){Js.error(`Caption parsing failed: ${wo.message}`);return}const Zr=new yn.CaptionReceivedEvent(Nn,qn,Rr);Zr.target=this,this.trigger(lt.SUBSCRIBER_CAPTION_RECEIVED,Zr),this.dispatchEvent(Zr)}.bind(this),subscriberChannelUpdate(zn,xn,Nn,qn){return Rs?Rs.subscriberChannelUpdate(zn.id,xn.widgetId,Nn.id,qn):(Js.warn("You are disconnected, cannot update subscriber properties ",qn),null)},streamCreate(zn,xn){let Nn=zn===void 0?{}:zn,qn=Nn.name,Rr=Nn.streamId,Zr=Nn.subscriberAudioFallbackEnabled,wo=Nn.channels,Wo=Nn.minBitrate,ws=Nn.sourceStreamId,ns=Nn.e2ee,ds=Nn.publisherAudioFallbackEnabled,Zs=Nn.customProperties;if(!Rs){Js.warn("You are disconnected, cannot create stream ",Rr);return}Rs.streamCreate({name:qn,streamId:Rr,subscriberAudioFallbackEnabled:Zr,channels:wo,minBitrate:Wo,maxBitrate:void 0,sourceStreamId:ws,e2ee:ns,publisherAudioFallbackEnabled:ds,customProperties:Zs},xn)},streamDestroy(zn,xn){if(!Rs){Js.warn("You are disconnected, cannot destroy stream ",zn);return}Rs.streamDestroy(zn,xn)},streamChannelUpdate(zn,xn,Nn){if(!Rs){Js.warn("You are disconnected, cannot update stream properties ",Nn);return}Rs.streamChannelUpdate(zn.id,xn.id,Nn)},setSocket(zn){Rs=zn},setLogging(zn){Js=zn},setState:ep,setIceServers(zn){zn&&(Jr={iceServers:tn(zn),timestamp:Date.now()})},getOtIceServerInfo(){const zn=Jr?Date.now()-Jr.timestamp:1/0,Nn=24*60*60*1e3-zn,qn=5*60*1e3;if(Nn>qn)return tt.resolve({transportPolicy:Ws&&Ws.sessionInfo&&Ws.sessionInfo.clientCandidates,servers:Jr&&Jr.iceServers});if(!Iu)return tt.resolve({transportPolicy:Ws&&Ws.sessionInfo&&Ws.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0});const Rr=tr.clientVersion;return sr({anvilUrl:(this.staticConfig||tr).apiUrl,sessionId:vo,token:Iu,connectionId:Xr,clientVersion:Rr}).then(Zr=>(Ws._.setIceServers(Zr.iceServers),Jr?{transportPolicy:Ws&&Ws.sessionInfo&&Ws.sessionInfo.clientCandidates,servers:Jr&&Jr.iceServers}:{transportPolicy:Ws.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0}))},getCodecFlags:()=>({h264:Ws.sessionInfo.h264,vp9:Ws.sessionInfo.vp9,vp8:Ws.sessionInfo.vp8}),getVideoCodecsCompatible:zn=>gt({RTCPeerConnection:Mn.RTCPeerConnection,env:Tn.env,stream:zn,codecFlags:Ws._.getCodecFlags()}),getIceConfig:()=>{if(!mo)return Ws._.getOtIceServerInfo();const zn=(()=>mo&&mo.transportPolicy==="relay"?"relay":Ws.sessionInfo.clientCandidates)();return(mo.includeServers==="custom"?tt.resolve({servers:[]}):Ws._.getOtIceServerInfo()).then(Nn=>ut(Nn,{transportPolicy:zn,servers:[...Nn.servers,...mo.customServers]}))},forceMute:function(zn){this.dispatchEvent(new yn.MuteForcedEvent(zn))}.bind(this),enableMuteOnEntry:()=>{Up=!0},addSubscriberToPeerConnectionsQueue:(zn,xn)=>{cu.push({pc:zn,message:xn}),lu||(lu=setInterval(()=>{const Nn=cu.shift();Nn?Nn.pc.processMessage("offer",Nn.message):(clearInterval(lu),lu=null)},100))},disableMuteOnEntry:()=>{Up=!1},privateEvents:new ot},this.signal=function(zn,xn){let Nn=zn,qn=xn||function(){};if(ct(Nn)&&(qn=Nn,Nn=null),this.isNot("connected")){const Zr="Unable to send signal - you are not connected to the session.";uu(pn(on.NOT_CONNECTED,new Error(Zr),500),qn);return}function Rr(Zr){switch(Zr){case 400:case 413:return on.INVALID_PARAMETER;case 429:return on.RATE_LIMIT_EXCEEDED;case 404:return on.NOT_FOUND;case 500:return on.NOT_CONNECTED;case 403:return on.PERMISSION_DENIED;case 2001:return on.UNEXPECTED_SERVER_RESPONSE;default:return}}Rs.signal(Nn,function(Zr){if(Zr){const ns=Rr(Zr.code);ns&&(Zr=pn(ns,new Error(Zr.message),Zr.code)),qn(Zr);return}for(var wo=arguments.length,Wo=new Array(wo>1?wo-1:0),ws=1;ws<wo;ws++)Wo[ws-1]=arguments[ws];qn(Zr,...Wo)},this.logEvent),zn&&zn.data&&typeof zn.data!="string"&&Js.warn("Signaling of anything other than Strings is deprecated. Please update the data property to be a string.")},this.forceDisconnect=function(zn,xn){if(this.isNot("connected")){const Zr="Cannot call forceDisconnect(). You are not connected to the session.";uu(pn(on.NOT_CONNECTED,new Error(Zr),sn.NOT_CONNECTED),xn);return}const Nn=typeof zn=="string"?zn:zn.id,qn="Invalid Parameter. Check that you have passed valid parameter values into the method call.";if(!Nn){uu(pn(on.INVALID_PARAMETER,new Error(qn),sn.INVALID_PARAMETER),xn);return}const Rr="This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality";if(!np("forceDisconnect")){uu(pn(on.PERMISSION_DENIED,new Error(Rr),sn.UNABLE_TO_FORCE_DISCONNECT),xn);return}Rs.forceDisconnect(Nn,function(Zr){if(Zr)uu(pn(on.INVALID_PARAMETER,new Error(qn),sn.INVALID_PARAMETER),xn);else if(xn&&ct(xn)){for(var wo=arguments.length,Wo=new Array(wo>1?wo-1:0),ws=1;ws<wo;ws++)Wo[ws-1]=arguments[ws];xn(Zr,...Wo)}})},this.forceUnpublish=function(zn,xn){xn===void 0&&(xn=()=>{});const Nn=ns=>uu(pn(ns.name,new Error(ns.msg),ns.code),xn),qn={msg:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",code:sn.INVALID_PARAMETER,name:on.INVALID_PARAMETER},Rr={msg:"Cannot call forceUnpublish(). You are not connected to the session.",code:sn.NOT_CONNECTED,name:on.NOT_CONNECTED},Zr={msg:"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",code:sn.UNABLE_TO_FORCE_UNPUBLISH,name:on.PERMISSION_DENIED},wo={msg:"The stream does not exist.",name:on.NOT_FOUND},Wo={msg:"An unexpected error occurred.",name:on.UNEXPECTED_SERVER_RESPONSE,code:sn.UNEXPECTED_SERVER_RESPONSE};if(!zn){Nn(qn);return}if(zr.isNot("connected")){Nn(Rr);return}const ws=Ql(zn);if(!np("forceUnpublish")){Nn(Zr);return}Rs.forceUnpublish(ws.id,ns=>{if(!ns){xn(null);return}ns.code==="404"?Nn(wo):ns.code==="403"?Nn(Zr):Nn(Wo)})},this.forceMuteStream=zn=>new tt((xn,Nn)=>{const qn=Xl();if(qn){Nn(qn);return}if(!zn||!zn.id){Nn(Wu(Jn.INVALID_PARAMETER));return}Rs.forceMuteStream(zn.id,Rr=>{Rr?Nn(Np(Rr)):xn()})}),this.forceMuteAll=zn=>new tt((xn,Nn)=>{const qn=Xl();if(qn){Nn(qn);return}if(Array.isArray(zn)&&!zn.every(Zr=>Zr instanceof fn)||zn&&!Array.isArray(zn)){Nn(Wu(Jn.INVALID_PARAMETER));return}const Rr=(zn||[]).map(Zr=>Zr.id);Rs.forceMuteAll(Rr,!0,Zr=>{Zr?Nn(Np(Zr)):xn()})}),this.disableForceMute=()=>new tt((zn,xn)=>{const Nn=Xl();if(Nn){xn(Nn);return}Rs.forceMuteAll([],!1,qn=>{qn?xn(Np(qn)):zn()})}),this.setEncryptionSecret=function(){var zn=(0,it.default)(rt.default.mark(function xn(Nn){return rt.default.wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(jo){Rr.next=3;break}return Xn.error("Encryption secret must first be set in initSession."),Rr.abrupt("return");case 3:Rr.prev=3,kt(Nn),Rr.next=10;break;case 7:throw Rr.prev=7,Rr.t0=Rr.catch(3),pn(on.INVALID_ENCRYPTION_SECRET,new Error(`setEncryptionSecret: ${Rr.t0.message}`));case 10:return Rr.prev=10,Rr.next=13,zr.keyStore.set(vo,Nn);case 13:Rr.next=18;break;case 15:Rr.prev=15,Rr.t1=Rr.catch(10),Js.error(`Error in setEncryptionSecret}: ${Rr.t1.message}`);case 18:case"end":return Rr.stop()}},xn,null,[[3,7],[10,15]])}));return function(xn){return zn.apply(this,arguments)}}(),this.isConnected=()=>this.is("connected"),this.capabilities=new cn([],{hasE2eeCapability:Ln})}}}).call(this,b(0))},function(_e,et,b){const tt=b(10),nt=b(22),rt=[400,403,409,tt.CONNECTION_LIMIT_EXCEEDED],it={CONNECT:"ConnectToSession",SESSION_STATE:"GetSessionState"};_e.exports=function(st){let at,ct;if(st.reason===it.CONNECT&&st.code===tt.CONNECT_FAILED)at=st.code,ct=nt.getTitleByCode(st.code);else if(st.code&&rt.indexOf(Number(st.code))>-1)switch(at=tt.CONNECT_FAILED,st.reason){case it.CONNECT:switch(st.code){case tt.CONNECTION_LIMIT_EXCEEDED:at=st.code,ct="Cannot connect -- the limit for concurrent connections to the session has been reached";break;default:ct="Received error response to connection create message.";break}break;case it.SESSION_STATE:ct="Received error response to session read";break;default:ct="";break}else at=tt.UNEXPECTED_SERVER_RESPONSE,ct="Unexpected server response. Try this operation again later.";return{code:at,message:ct}}},function(_e,et,b){const tt=b(2),nt=b(51).once;_e.exports=()=>nt()&&(tt.isChromiumEdge||["Chrome","Safari","Firefox","Opera"].includes(tt.name))},function(_e,et,b){_e.exports=function(nt){return JSON.stringify(nt)}},function(_e,et){function b(tt){if(tt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tt}_e.exports=b},function(_e,et,b){et.__esModule=!0,et.default=void 0;var tt=nt=>{let rt=nt.logger,it=nt.obj;nt.eventNames.forEach(st=>{it.on(st,function(){for(var at=arguments.length,ct=new Array(at),ut=0;ut<at;ut++)ct[ut]=arguments[ut];return rt.spam("emitted",st,ct)})})};et.default=tt},function(_e,et,b){const tt=b(16),nt=b(22),rt=b(6),it=b(1)("Dispatcher"),ot=b(171),st=b(749),at=function(){rt(this),this.callbacks={}};_e.exports=at,at.prototype.registerCallback=function(ct,ut){this.callbacks[ct]=ut},at.prototype.triggerCallback=function(ct){if(!ct)return;const ut=this.callbacks[ct];if(ut&&tt(ut)){const lt=Array.prototype.slice.call(arguments);lt.shift(),ut(...lt)}delete this.callbacks[ct]},at.prototype.onClose=function(ct){this.emit("close",ct)},at.prototype.onReconnected=function(){this.emit("reconnected")},at.prototype.onReconnecting=function(){this.emit("reconnecting")},at.prototype.dispatch=function(ct){if(ct.type===ot.STATUS){var ut;it.debug(ct);let dt;if(ct.isError){let St;if(typeof ct.data=="string")try{const Tt=JSON.parse(ct.data);Tt&&typeof Tt=="object"&&(St=Tt.reason)}catch(Tt){it.warn("Failed to parse rumorMessage.data",Tt)}dt=new nt(ct.status,St)}const ft=ct.data?JSON.parse(ct.data):"";ft!=null&&(ut=ft.mute)!=null&&ut.active&&this.dispatchMuteOnEntry(),this.triggerCallback(ct.transactionId,dt,ct);return}const lt=st(ct);switch(it.debug(`${lt.signature}:`,lt),lt.resource){case"session":this.dispatchSession(lt);break;case"connection":this.dispatchConnection(lt);break;case"stream":this.dispatchStream(lt);break;case"stream_channel":this.dispatchStreamChannel(lt);break;case"subscriber":this.dispatchSubscriber(lt);break;case"subscriber_channel":this.dispatchSubscriberChannel(lt);break;case"signal":this.dispatchSignal(lt);break;case"data":this.dispatchCaption(lt);break;case"archive":this.dispatchArchive(lt);break;case"source":this.dispatchSource(lt);break;default:it.debug(`Type ${lt.resource} is not currently implemented`)}},at.prototype.dispatchSession=function(ct){switch(ct.method){case"read":this.emit("session#read",ct.content,ct.transactionId);break;case"update":this.emit("session#update",ct.content);break;default:it.debug(`${ct.signature} is not currently implemented`)}},at.prototype.dispatchMuteOnEntry=function(){this.emit("session#muted")},at.prototype.dispatchConnection=function(ct){switch(ct.method){case"created":this.emit("connection#created",ct.content);break;case"deleted":this.emit("connection#deleted",ct.params.connection,ct.reason);break;default:it.debug(`${ct.signature} is not currently implemented`)}},at.prototype.dispatchStream=function(ct){switch(ct.method){case"created":this.emit("stream#created",ct.content,ct.transactionId);break;case"deleted":this.emit("stream#deleted",ct.params.stream,ct.reason,ct.content);break;case"updated":this.emit("stream#updated",ct.params.stream,ct.content);break;case"update":this.emit("stream#update",ct.params.stream,ct.content);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(ct.method,ct);break;default:it.debug(`${ct.signature} is not currently implemented`)}},at.prototype.dispatchStreamChannel=function(ct){switch(ct.method){case"updated":this.emit("streamChannel#updated",ct.params.stream,ct.params.channel,ct.content);break;default:it.debug(`${ct.signature} is not currently implemented`)}},at.prototype.dispatchJsep=function(ct,ut){this.emit(`jsep#${ct}`,ut.params.stream,ut.fromAddress,ut)},at.prototype.dispatchSubscriberChannel=function(ct){switch(ct.method){case"updated":this.emit("subscriberChannel#updated",ct.params.stream,ct.params.channel,ct.content);break;case"update":this.emit("subscriberChannel#update",ct.params.subscriber,ct.params.stream,ct.content);break;default:it.debug(`${ct.signature} is not currently implemented`)}},at.prototype.dispatchSubscriber=function(ct){switch(ct.method){case"created":this.emit("subscriber#created",ct.params.stream,ct.fromAddress,ct.content.id);break;case"deleted":this.dispatchJsep("unsubscribe",ct),this.emit("subscriber#deleted",ct.params.stream,ct.fromAddress);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(ct.method,ct);break;default:it.debug(`${ct.signature} is not currently implemented`)}},at.prototype.dispatchSignal=function(ct){if(ct.method!=="signal"){it.debug(`${ct.signature} is not currently implemented`);return}this.emit("signal",ct.fromAddress,ct.content)},at.prototype.dispatchCaption=function(ct){this.emit("caption",ct.fromAddress,ct.content)},at.prototype.dispatchArchive=function(ct){switch(ct.method){case"created":this.emit("archive#created",ct.content);break;case"updated":this.emit("archive#updated",ct.params.archive,ct.content);break}},at.prototype.dispatchSource=function(ct){switch(ct.method){case"create":this.emit("source#create",ct.params.source,ct.params.stream,ct.reason);break;case"delete":this.emit("source#delete",ct.params.source,ct.params.stream,ct.reason);break;default:it.debug(`${ct.signature} is not currently implemented`)}}},function(_e,et,b){const tt=b(15),nt=b(8),rt=b(752),it=b(753),ot=b(323),st=b(754),at=b(34)().onlyLocal(),ct={};_e.exports=ct,ct.connections={},ct.connections.create=function(ut){const lt=ut.apiKey,dt=ut.sessionId,ft=ut.connectionId,St=ut.connectionEventsSuppressed,Tt=ut.capabilities;return ot({method:"create",uri:`/v2/partner/${lt}/session/${dt}/connection/${ft}`,content:{userAgent:nt.env.userAgent,clientVersion:at.clientVersion,capabilities:Tt||[],connectionEventsSuppressed:St}})},ct.connections.destroy=function(ut){const lt=ut.apiKey,dt=ut.sessionId,ft=ut.connectionId;return ot({method:"delete",uri:`/v2/partner/${lt}/session/${dt}/connection/${ft}`,content:{}})},ct.sessions={},ct.sessions.get=function(ut,lt){return ot({method:"read",uri:`/v2/partner/${ut}/session/${lt}`,content:{}})},ct.streams={},ct.streams.get=function(ut,lt,dt){return ot({method:"read",uri:`/v2/partner/${ut}/session/${lt}/stream/${dt}`,content:{}})},ct.streams.channelFromOTChannel=function(ut){const lt={id:ut.id,type:ut.type,active:ut.active};return ut.type==="video"&&(lt.width=ut.width,lt.height=ut.height,lt.orientation=ut.orientation,lt.frameRate=ut.frameRate,ut.source!=="default"&&(lt.source=ut.source),lt.fitMode=ut.fitMode),lt},ct.streams.create=function(ut){ut===void 0&&(ut={});const lt=ut,dt=lt.apiKey,ft=lt.sessionId,St=lt.streamId,Tt=lt.name,pt=lt.audioFallbackEnabled,gt=lt.publisherAudioFallbackEnabled,yt=lt.subscriberAudioFallbackEnabled,Et=lt.channels,It=lt.minBitrate,Gt=lt.maxBitrate,Wt=lt.sourceStreamId,At=lt.e2ee,kt=lt.customProperties,Vt={id:St,name:Tt,audioFallbackEnabled:pt,publisherAudioFallbackEnabled:gt,subscriberAudioFallbackEnabled:yt,channel:Et.map(Nt=>ct.streams.channelFromOTChannel(Nt)),e2ee:At,customProperties:kt};return It&&(Vt.minBitrate=Math.round(It)),Gt&&(Vt.maxBitrate=Math.round(Gt)),Wt&&(Vt.sourceStreamId=Wt),typeof At=="boolean"&&(Vt.e2ee=At),ot({method:"create",uri:`/v2/partner/${dt}/session/${ft}/stream/${St}`,content:Vt})},ct.streams.destroy=function(ut,lt,dt,ft){const St={};return ft&&(St.sourceStreamId=ft),ot({method:"delete",uri:`/v2/partner/${ut}/session/${lt}/stream/${dt}`,content:St})},ct.streamChannels={},ct.streamChannels.update=function(ut,lt,dt,ft,St){return ot({method:"update",uri:`/v2/partner/${ut}/session/${lt}/stream/${dt}/channel/${ft}`,content:St})},ct.subscribers={},ct.subscribers.create=function(ut){ut===void 0&&(ut={});const lt=ut,dt=lt.apiKey,ft=lt.sessionId,St=lt.streamId,Tt=lt.subscriberId,pt=lt.connectionId,gt=lt.channelsToSubscribeTo,yt=lt.sourceStreamId,Et=lt.e2ee,It={id:Tt,connection:pt,keyManagementMethod:st,bundleSupport:rt(),rtcpMuxSupport:it(),e2ee:Et};return gt&&(It.channel=gt),yt&&(It.sourceStreamId=yt),ot({method:"create",uri:`/v2/partner/${dt}/session/${ft}/stream/${St}/subscriber/${Tt}`,content:It})},ct.subscribers.destroy=function(ut,lt,dt,ft){return ot({method:"delete",uri:`/v2/partner/${ut}/session/${lt}/stream/${dt}/subscriber/${ft}`,content:{}})},ct.subscribers.update=function(ut,lt,dt,ft,St){return ot({method:"update",uri:`/v2/partner/${ut}/session/${lt}/stream/${dt}/subscriber/${ft}`,content:St})},ct.subscriberChannels={},ct.subscriberChannels.update=function(ut,lt,dt,ft,St,Tt){return ot({method:"update",uri:`/v2/partner/${ut}/session/${lt}/stream/${dt}/subscriber/${ft}/channel/${St}`,content:Tt})},ct.signals={},ct.signals.create=function(ut,lt,dt,ft,St){const Tt={};return ft!==void 0&&(Tt.type=ft),St!==void 0&&(Tt.data=St),ot({method:"signal",uri:`/v2/partner/${ut}/session/${lt}${dt!==void 0?`/connection/${dt}`:""}/signal/${tt()}`,content:Tt})},ct.forceMute={},ct.forceMute.update=ut=>{const lt=ut.apiKey,dt=ut.sessionId,ft=ut.streamId,St=ut.active,Tt=ut.excludedStreamIds,pt={reason:"mute",channels:["audio"],active:St,locked:!1};return Tt&&(pt.exclusion=Tt),ot({method:"update",uri:`/v2/partner/${lt}/session/${dt}${ft?`/stream/${ft}`:""}`,content:pt})}},function(_e,et,b){const tt=b(37),nt=b(70),rt=b(172),it=b(327),ot=b(329),st=8192,at=128;_e.exports=function(ut,lt,dt){const ft=function(Et){return!/^[a-zA-Z0-9\-\._~]+$/.exec(Et)},St=function(Et){return Et?Et instanceof rt||Et._tag===ot?null:{code:400,reason:"The To field was invalid"}:{code:400,reason:"The signal to field was invalid. Either set it to a OT.Connection, OT.Session, or omit it entirely"}},Tt=function(Et){let It=null;return Et==null?It={code:400,reason:"The signal type was null or undefined. Either set it to a String value or omit it"}:Et.length>at?It={code:413,reason:`The signal type was too long, the maximum length of it is ${at} characters`}:ft(Et)&&(It={code:400,reason:"The signal type was invalid, it can only contain letters, numbers, '-', '_', and '~'."}),It},pt=function(Et){let It=null;if(Et==null)It={code:400,reason:"The signal data was null or undefined. Either set it to a String value or omit it"};else try{JSON.stringify(Et).length>st&&(It={code:413,reason:`The data field was too long, the maximum size of it is ${st} characters`})}catch{It={code:400,reason:"The data field was not valid JSON"}}return It},gt=function(Et){let It=null;return Et===!0||Et===!1||(It={code:400,reason:"The signal retryAfterReconnect was not true or false. Either set it to a Boolean value or omit it"}),It};this.toRaptorMessage=function(){let yt=this.to;return yt&&typeof yt!="string"&&(yt=yt.id),it.signals.create(nt.value,ut,yt,this.type,this.data)},this.toHash=function(){return dt},this.error=null,this.retryAfterReconnect=!0,dt&&(dt.hasOwnProperty("data")&&(this.data=tt(dt.data),this.error=pt(this.data)),dt.hasOwnProperty("to")&&(this.to=dt.to,this.error||(this.error=St(this.to))),dt.hasOwnProperty("type")&&(this.error||(this.error=Tt(dt.type)),this.type=dt.type),dt.hasOwnProperty("retryAfterReconnect")&&(this.error||(this.error=gt(dt.retryAfterReconnect)),this.retryAfterReconnect=dt.retryAfterReconnect)),this.valid=this.error===null}},function(_e,et,b){_e.exports={}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=b(331),ot=b(49),st=b(172),at=b(757),ct=b(326),ut=b(1)("SessionDispatcher"),lt=b(21),dt=b(170),ft=b(150),St=b(167);function Tt(Wt){return{id:Wt,creationTime:new Date().getTime(),data:{},capablities:{},permissions:[]}}function pt(Wt,At){const kt=Wt.channel.map(Nt=>new ft(Nt)),Vt=Wt.connectionId?Wt.connectionId:Wt.connection.id;return new dt(Wt.id,Wt.name,Wt.creationTime,At.connections.get(Vt),At,kt,Wt.customProperties&&Wt.customProperties.initials)}function gt(Wt,At){if(At.streams.has(Wt.id))return;const kt=pt(Wt,At);return At.streams.add(kt),kt}function yt(Wt){return new it(Wt.id,Wt.name,Wt.status)}function Et(Wt,At){if(At.archives.has(Wt.id))return;const kt=yt(Wt);return At.archives.add(kt),kt}const It=function(At){const kt={};this.enqueue=function(){const Nt=arguments[0],tn=Array.prototype.slice.call(arguments,1);kt[Nt]||(kt[Nt]=new at(At)),kt[Nt].enqueue.apply(kt[Nt],tn)},this.triggerConnectionCreated=function(Nt){kt[`connectionCreated${Nt.id}`]&&kt[`connectionCreated${Nt.id}`].triggerAll()},this.triggerSessionConnected=function(Nt){kt.sessionConnected&&kt.sessionConnected.triggerAll(),Nt.forEach(function(tn){this.triggerConnectionCreated(tn)},this)}},Gt={};_e.exports=function(At,kt){let Vt=kt===void 0?{}:kt,Nt=Vt.connectionEventsSuppressed;const tn=new ct;let _t=!1;const Kt=new It(tn);tn.on("reconnecting",()=>{At._.reconnecting()}),tn.on("reconnected",()=>{At._.reconnected()}),tn.on("close",mn=>{const on=At.connection;if(on){if(on.destroyedReason()){ut.debug(`Socket was closed but the connection had already been destroyed. Reason: ${on.destroyedReason()}`);return}on.destroy(mn)}});const cn=function(on,yn){return At.connections.has(on.id)?At.connections.get(on.id):(on=st.fromHash(on),(yn||At.connection&&on.id!==At.connection.id)&&(At.connections.add(on),Kt.triggerConnectionCreated(on)),Object.keys(Gt).forEach(fn=>{const sn=Gt[fn];if(sn&&on.id===sn.connection.id){gt(sn,At),delete Gt[sn.id];const un={debug:yn?"connection came in session#read":"connection came in connection#created",streamId:sn.id,connectionId:on.id};At.logEvent("streamCreated","warning",un)}}),on)};tn.on("session#read",(mn,on)=>{let yn;const fn={};fn.streams=[],fn.connections=[],fn.archives=[],mn.connection.forEach(sn=>{yn=cn(sn,!0),fn.connections.push(yn)}),mn.stream.forEach(sn=>{fn.streams.push(gt(sn,At))}),(mn.archive||mn.archives).forEach(sn=>{fn.archives.push(Et(sn,At))}),tn.triggerCallback(on,null,fn),_t=!0,Kt.triggerSessionConnected(At.connections)}),tn.on("session#update",mn=>{if(mn.reason!=="mute"){ut.debug("session#update that handle this reason is not currently implemented");return}const on=mn.active===!0;At._.forceMute({active:on}),on?At._.enableMuteOnEntry():At._.disableMuteOnEntry()}),tn.on("session#muted",()=>{At._.enableMuteOnEntry(),At._.forceMute({active:!0})}),tn.on("connection#created",mn=>{cn(mn)}),tn.on("connection#deleted",(mn,on)=>{if(mn=At.connections.get(mn),!mn){ut.warn("A connection was deleted that we do not know about");return}mn.destroy(on)}),tn.on("stream#created",(mn,on)=>{const yn=mn.id,fn=mn.sourceStreamId,sn=mn.connection;let un;if(Nt){if(sn==null||sn.id==null){At.logEvent("SessionDispatcher:stream#created","Event",{connection:sn,info:"Stream did not contain a connection object. Event ignored"});return}cn(sn)}const Ln=mn.connectionId||sn.id;if(At.connections.has(Ln))un=gt(mn,At);else{Gt[yn]=mn;const Xn={debug:"eventOrderError -- streamCreated event before connectionCreated",streamId:yn,sourceStreamId:St(fn)};At.logEvent("streamCreated","warning",Xn)}un?(un.publisher&&un.publisher.setStream(un),tn.triggerCallback(on,null,un)):At.sessionInfo.isAdaptiveEnabled&&fn==="P2P"&&lt.subscribers.where({streamId:yn}).forEach(Xn=>{Xn._.startRoutedToRelayedTransition()})}),tn.on("stream#deleted",(mn,on,yn)=>{const fn=At.streams.get(mn),sn=yn.sourceStreamId,un=lt.subscribers,Xn=At.sessionInfo.isAdaptiveEnabled&&sn==="P2P";!fn&&!Xn||(Xn?un.where({streamId:mn}).forEach(pn=>{pn._.startRelayedToRoutedTransition()}):fn.destroy(on))}),tn.on("stream#updated",(mn,on)=>{const yn=At.streams.get(mn);if(!yn){ut.error(`A stream does not exist with the id of ${mn}, for stream#updated message!`);return}yn._.update(on)}),tn.on("stream#update",(mn,on)=>{const yn=At.streams.get(mn),fn=on.reason,sn=on.active;if(!yn){ut.error(`A stream does not exist with the id of ${mn}, for stream#updated message!`);return}if(fn!=="mute"){ut.debug("stream#update that handle this reason is not currently implemented");return}sn&&yn._.forceMute(on)}),tn.on("streamChannel#updated",(mn,on,yn)=>{let fn;if(!(mn&&(fn=At.streams.get(mn)))){ut.error("Unable to determine streamId, or the stream does not exist, for streamChannel message!");return}fn._.updateChannel(on,yn)});const an=(mn,on,yn,fn)=>{let sn,un;const Ln={streamId:on},Xn=lt.subscribers,pn=lt.publishers;switch(fn.params.subscriber?sn={widgetId:fn.params.subscriber}:sn=Ln,mn){case"offer":un=[].concat(Xn.where(sn),pn.where(Ln)).slice(0,1);break;case"answer":case"pranswer":un=[].concat(pn.where(Ln),Xn.where(sn)).slice(0,1);break;case"generateoffer":case"unsubscribe":un=pn.where(Ln);break;case"candidate":un=[].concat(Xn.where(sn),pn.where(Ln));break;default:ut.debug(`jsep#${mn} is not currently implemented`);return}if(un.length===0)return;let Vn=At.connections.get(yn);!Vn&&yn.match(/^symphony\./)&&(Vn=st.fromHash({id:yn,creationTime:Math.floor(ot())}),At.connections.add(Vn)),un.forEach(function(){var Tn=(0,rt.default)(nt.default.mark(function Jn(lr){return nt.default.wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:return Qn.prev=0,Qn.next=3,lr.processMessage(mn,yn,fn);case 3:Qn.next=8;break;case 5:Qn.prev=5,Qn.t0=Qn.catch(0),ut.error("Error occurred during processMessage",Qn.t0);case 8:case"end":return Qn.stop()}},Jn,null,[[0,5]])}));return function(Jn){return Tn.apply(this,arguments)}}())};return tn.on("jsep#offer",an.bind(null,"offer")),tn.on("jsep#answer",an.bind(null,"answer")),tn.on("jsep#pranswer",an.bind(null,"pranswer")),tn.on("jsep#generateoffer",an.bind(null,"generateoffer")),tn.on("jsep#unsubscribe",an.bind(null,"unsubscribe")),tn.on("jsep#candidate",an.bind(null,"candidate")),tn.on("subscriberChannel#updated",(mn,on,yn)=>{if(!mn||!At.streams.has(mn)){ut.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#updated message!");return}At.streams.get(mn)._.updateChannel(on,yn)}),tn.on("subscriberChannel#update",(mn,on,yn)=>{if(!on||!At.streams.has(on)){ut.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#update message!");return}if(!lt.subscribers.has(mn)){ut.error("Unable to determine subscriberId, or the subscriber does not exist, for subscriberChannel#update message!");return}lt.subscribers.get(mn).disableVideo(yn.active)}),tn.on("signal",(mn,on)=>{if(Nt){let un=on.connection||on.fromConnection;(un==null||un.id==null)&&(un=Tt(mn),At.logEvent("SessionDispatcher:Signal","Event",{fromAddress:mn,connection:on.connection,fromConnection:on.fromConnection,info:"Signal did not contain a connection object. One has been constructed",constructedConnection:un})),cn(un)}const yn=on.type,fn=on.data,sn=At.connections.get(mn);At.connection&&mn===At.connection.connectionId?_t?At._.dispatchSignal(sn,yn,fn):Kt.enqueue("sessionConnected","signal",mn,yn,fn):At.connections.get(mn)?At._.dispatchSignal(sn,yn,fn):mn===""?At._.dispatchSignal(null,yn,fn):Kt.enqueue(`connectionCreated${mn}`,"signal",mn,yn,fn)}),tn.on("caption",(mn,on)=>{At._.dispatchCaption(mn,on)}),tn.on("archive#created",mn=>{Et(mn,At)}),tn.on("archive#updated",(mn,on)=>{const yn=At.archives.get(mn);if(!yn){ut.error(`An archive does not exist with the id of ${mn}, for archive#updated message!`);return}yn._.update(on)}),tn.on("source#create",(mn,on,yn)=>{const fn=St(mn);At.logEvent("SessionDispatcher:source#create","Event",{sourceStreamId:fn,streamId:on,reason:yn}),ut.debug(`Received a request from RUMOR to start a transition to ${mn} for the stream ID ${on} with the reason: ${yn}`),lt.publishers.where({streamId:on}).forEach(sn=>{sn._.startRoutedToRelayedTransition()})}),tn.on("source#delete",(mn,on,yn)=>{At.logEvent("SessionDispatcher:source#delete","Event",{sourceStreamId:St(mn),streamId:on,reason:yn}),ut.debug(`Received a request from RUMOR to start a transition from P2P to MANTIS for the stream ID ${on} with the reason: ${yn}`),lt.publishers.where({streamId:on}).forEach(fn=>{fn._.startRelayedToRoutedTransition()})}),tn}},function(_e,et,b){const tt=b(23)(),nt=b(6);_e.exports=function(it,ot,st){this.id=it,this.name=ot,this.status=st,this._={},nt(this),this._.update=at=>{Object.keys(at).forEach(ct=>{const ut=this[ct];this[ct]=at[ct];const lt=new tt.ArchiveUpdatedEvent(this,ct,ut,this[ct]);this.dispatchEvent(lt)})},this.destroy=()=>{}}},function(_e,et,b){const tt=b(24)(),nt=tt.getAudioOutputMediaDevices;_e.exports=()=>nt()},function(_e,et,b){const tt=b(24)(),nt=tt.getActiveAudioOutputDevice;_e.exports=()=>nt()},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5));const ot=b(21),st=b(106),at=st.setCurrentAudioOutputDeviceId,ct=b(333),ut=b(24)(),lt=ut.getDefaultAudioOutputDeviceId,dt=ut.getAudioOutputMediaDevices,ft=b(295),St=b(20),Tt=new St,pt=(Gt,Wt)=>{Tt.logEvent({action:"updateSubscribersSinkId",variation:Gt,payload:Wt})},gt=Gt=>{const Wt=ot.subscribers.map(At=>At._.setSinkId(Gt));return tt.all(Wt)},yt=function(){var Gt=(0,it.default)(rt.default.mark(function Wt(At){return rt.default.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return Vt.next=2,ft();case 2:return Vt.prev=2,pt("Attempt",{deviceId:At}),Vt.next=6,gt(At);case 6:pt("Success",{deviceId:At}),Vt.next=13;break;case 9:throw Vt.prev=9,Vt.t0=Vt.catch(2),pt("Failure",{deviceId:At,error:Vt.t0==null?void 0:Vt.t0.message}),Vt.t0;case 13:case"end":return Vt.stop()}},Wt,null,[[2,9]])}));return function(At){return Gt.apply(this,arguments)}}(),Et=function(){var Gt=(0,it.default)(rt.default.mark(function Wt(){var At,kt;return rt.default.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.next=2,dt();case 2:return At=Nt.sent,kt=lt(At),Nt.prev=4,Nt.next=7,yt(kt);case 7:at(kt),Nt.next=12;break;case 10:Nt.prev=10,Nt.t0=Nt.catch(4);case 12:case"end":return Nt.stop()}},Wt,null,[[4,10]])}));return function(){return Gt.apply(this,arguments)}}(),It=function(){var Gt=(0,it.default)(rt.default.mark(function Wt(){var At;return rt.default.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return Vt.next=2,ct();case 2:return At=Vt.sent,Vt.prev=3,Vt.next=6,yt(At.deviceId);case 6:Vt.next=12;break;case 8:return Vt.prev=8,Vt.t0=Vt.catch(3),Vt.next=12,Et();case 12:case"end":return Vt.stop()}},Wt,null,[[3,8]])}));return function(){return Gt.apply(this,arguments)}}();_e.exports=function(){var Gt=(0,it.default)(rt.default.mark(function Wt(At){return rt.default.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return Vt.prev=0,pt("Attempt",{deviceId:At}),Vt.next=4,gt(At);case 4:pt("Success",{deviceId:At}),at(At),Vt.next=14;break;case 8:return Vt.prev=8,Vt.t0=Vt.catch(0),pt("Failure",{deviceId:At,error:Vt.t0==null?void 0:Vt.t0.message}),Vt.next=13,It();case 13:throw Vt.t0;case 14:case"end":return Vt.stop()}},Wt,null,[[0,8]])}));return function(Wt){return Gt.apply(this,arguments)}}()}).call(this,b(0))},function(_e,et,b){b(336);const tt=b(37),nt=b(26),rt=b(6),it=b(128),ot=b(34)(),st=b(20),at=b(248),ct=b(563),ut=b(564),lt=ot.onlyLocal(),dt={};dt.noConflict=b(565)(),(typeof window!==void 0?window:commonjsGlobal).OT=dt,_e.exports=dt,(()=>{let yo=dt;Object.defineProperty(typeof window!==void 0?window:commonjsGlobal,"TB",{get:()=>(yo===dt&&console.warn("window.TB is deprecated, and will be removed in the future. Please access via window.OT"),yo),set:_o=>{yo=_o},configurable:!0})})();const ft=b(143)(typeof window!==void 0?window:commonjsGlobal),St=b(8),Tt=b(70),pt=b(144),gt=b(251),yt=b(145),Et=b(146),It=b(252),Gt=b(147),Wt=b(7),At=b(10),kt=b(253),Vt=b(240),Nt=b(1)("OT"),tn=b(121),_t=b(592),Kt=b(22),cn=b(102),an=cn.parseIceServers,mn=b(266),on=b(21),yn=b(150),fn=b(152),sn=b(153),un=b(71)({global:ft}),Ln=b(13)({}),Xn=b(158)(),pn=b(280)({otError:Ln}),Vn=b(281)(),Tn=b(287)({global:ft}),Jn=b(24)({getNativeEnumerateDevices:Tn}),lr=b(23)(),tr=b(160)(),Qn=b(647)({otError:Ln,global:ft}),Sr=b(161)({chromeExtensionHelper:pn,otError:Ln}),vr=b(652)({deviceHelpers:Jn,generateConstraintInfo:kt,getUserMediaHelper:Qn,global:ft,OTHelpers:St,screenSharing:Sr}),Fr=b(655)({otError:Ln,processPubOptions:vr}),kr=b(162)({otError:Ln}),jr=b(73),xo=b(292)(),Er=b(293)({otError:Ln}),xr=b(294)({global:ft,videoElementErrorMap:Er}),Un=b(163)({global:ft}),Mn=b(296)({PeerConnection:un,setCertificates:Un}),sr=b(300)({PeerConnection:un,setCertificates:Un}),Ar=b(302)(),so=b(675)({otError:Ln}),Bn=b(109)({NativeVideoElementWrapper:xr}),gr=b(151)(),Or=b(164)({VideoElementFacade:Bn}),ro=b(305)({interpretPeerConnectionError:kr,otError:Ln,SubscriberPeerConnection:sr,WidgetView:Or}),Ao=b(168)({APIKEY:Tt,createChromeMixin:Vn,deviceHelpers:Jn,EnvironmentLoader:Gt,Errors:Wt,Events:lr,ExceptionCodes:At,calculateCapableSimulcastStreams:gt,global:ft,interpretPeerConnectionError:kr,IntervalRunner:jr,Microphone:xo,otError:Ln,OTErrorClass:Kt,OTHelpers:St,parseIceServers:an,processPubOptions:vr,PUBLISH_MAX_DELAY:mn,PublisherPeerConnection:Mn,PublishingState:Ar,StreamChannel:yn,systemRequirements:sn,VideoOrientation:gr,WidgetView:Or}),ho=b(319)({otError:Ln,Publisher:Ao}),vo=b(320)({global:ft,initPublisher:ho,otError:Ln,Publisher:Ao,Subscriber:ro}),po=b(767)({Session:vo});rt(dt);const zr=b(768),Go=b(771),mo=b(772);at(dt,"$",{name:"OT.$",getMessage:"Please use an external library like jQuery to select elements from the page.",value:St}),dt.APIKEY=Tt.value,dt.AnalyserAudioLevelSampler=Et,dt.Archive=b(331),dt.ArchiveEvent=lr.ArchiveEvent,dt.ArchiveUpdatedEvent=lr.ArchiveUpdatedEvent,dt.AudioLevelTransformer=pt,dt.AudioLevelUpdatedEvent=lr.AudioLevelUpdatedEvent,dt.Capabilities=b(169),dt.Chrome=yt,dt.Connection=b(172),dt.ConnectionCapabilities=dt.Connection.Capabilities,dt.ConnectionEvent=lr.ConnectionEvent,Object.keys(tn).forEach(yo=>{dt[yo.toUpperCase()]=tn[yo].priority}),dt.NONE=0,dt.debug=Nt.debug,dt.error=Nt.error,dt.info=Nt.info,dt.log=Nt.log,dt.warn=Nt.warn,dt.DestroyedEvent=lr.DestroyedEvent,dt.EnvLoadedEvent=lr.EnvLoadedEvent,dt.Error=Kt,dt.Error.on(nt.EXCEPTION,yo=>{if(yo.target===dt.Error){const _o=tt(yo);_o.target=dt,dt.dispatchEvent(_o)}else dt.dispatchEvent(yo)}),dt.Event=it,dt.ExceptionCodes=At,dt.ExceptionEvent=lr.ExceptionEvent,dt.getDevices=b(773),dt.getAudioOutputDevices=b(332),dt.getActiveAudioOutputDevice=b(333),dt.setAudioOutputDevice=b(774)(),dt.GetAudioLevelSampler=It,dt.HAS_REQUIREMENTS=1,dt.IntervalRunner=jr,dt.IssueReportedEvent=lr.IssueReportedEvent,dt.MediaStoppedEvent=lr.MediaStoppedEvent,dt.Microphone=xo,dt.NOT_HAS_REQUIREMENTS=0,dt.PeerConnection=un,dt.PeerConnection.QOS=b(278).default,dt.Publisher=Ao,dt.PublisherPeerConnection=Mn,dt.PublishingState=Ar,dt.MuteForcedEvent=lr.MuteForcedEvent,dt.Session=vo,dt.SessionConnectEvent=lr.SessionConnectEvent,dt.SessionDisconnectEvent=lr.SessionDisconnectEvent,dt.SessionDispatcher=b(330),dt.Signal=b(328),dt.SignalEvent=lr.SignalEvent,dt.Stream=b(170),dt.StreamChannel=yn,dt.StreamEvent=lr.StreamEvent,dt.StreamPropertyChangedEvent=lr.StreamPropertyChangedEvent,dt.StreamUpdatedEvent=lr.StreamUpdatedEvent,dt.StylableComponent=fn,dt.Subscriber=ro,dt.SubscriberPeerConnection=sr,dt.SubscribingState=b(308),dt.VideoDimensionsChangedEvent=lr.VideoDimensionsChangedEvent,dt.VideoDisableWarningEvent=lr.VideoDisableWarningEvent,dt.VideoElement=Bn,dt.VideoEnabledChangedEvent=lr.VideoEnabledChangedEvent,dt.VideoOrientation=gr,dt.WidgetView=Or,dt.getSupportedCodecs=zr,dt.hasMediaProcessorSupport=Go,dt.hasEndToEndEncryptionSupport=mo,dt._={AnalyticsHelper:st,getClientGuid:Vt.get,StaticConfig:ot},Object.defineProperty(dt,"version",{value:lt.version});const Zo={},$r=yo=>ut.includes(yo);at(Zo,"version",{value:lt.version,name:"OT.properties.version",getWarning:"Please use OT.version instead",warnOnSet:!0,setWarning:"Mutating version has no effect"}),ct.forEach(yo=>{let _o,js;if(Array.isArray(yo)){const Rs=yo[0],xa=yo[1];js=Rs,_o=lt[xa]||xa}else _o=lt[yo],js=yo;const Ql=$r(js);at(Zo,js,{value:_o,name:`OT.properties.${js}`,warnOnSet:!0,canSet:Ql,setWarning:Ql?`Mutating ${js} can cause side effects`:`Mutating ${js} has no effect`})}),dt.properties=Zo,dt.audioContext=Xn,dt.checkScreenSharingCapability=Sr.checkCapability,dt.checkSystemRequirements=sn.check,dt.components={},dt.generateSimpleStateMachine=tr,dt.getErrorTitleByCode=Kt.getTitleByCode,dt.getLogs=Nt.getLogs,dt.getStatsAdpater=b(274),dt.getStatsHelpers=b(75),dt.getUserMedia=Fr,dt.handleJsException=Kt.handleJsException,dt.initPublisher=ho,dt.setProxyUrl=b(101).setProxyUrl,dt.initSession=function(yo,_o,js){return _o==null&&(_o=yo,yo=null),Tt.value.length===0&&yo&&(Tt.value=yo,dt.APIKEY=yo),po(yo,_o,js)};const Ru=yo=>`${yo} is deprecated and will be removed in a future version of OpenTok`,jo=(yo,_o)=>()=>(console.warn(Ru(yo)),_o);Object.defineProperties(dt,{isUnloaded:{get:jo("OT.isUnloaded",Gt.isUnloaded)},onLoad:{get:jo("OT.onLoad",Gt.onLoad)},onUnload:{get:jo("OT.onUnload",Gt.onUnload)},overrideGuidStorage:{get:jo("OT.overrideGuidStorage",Vt.override)}}),dt.pickScreenSharingHelper=Sr.pickHelper,dt.publishers=on.publishers,dt.registerScreenSharingExtension=Sr.registerExtension,dt.registerScreenSharingExtensionHelper=Sr.registerExtensionHelper,dt.reportIssue=so,dt.sessions=on.sessions,dt.setLogLevel=_t,dt.shouldLog=Nt.shouldLog,dt.subscribers=on.subscribers,dt.unblockAudio=b(166),dt.upgradeSystemRequirements=sn.upgrade,Gt.onUnload(()=>{on.publishers.destroy(),on.subscribers.destroy(),on.sessions.destroy("unloaded")}),b(775)()},function(_e,et,b){var tt=b(337);typeof tt=="string"&&(tt=[[_e.i,tt,""]]);var nt,rt={hmr:!0};rt.transform=nt,rt.insertInto=void 0,b(351)(tt,rt),tt.locals&&(_e.exports=tt.locals)},function(_e,et,b){et=_e.exports=b(338)(!1);var tt=b(339),nt=tt(b(340)),rt=tt(b(341)),it=tt(b(342)),ot=tt(b(343)),st=tt(b(344)),at=tt(b(345)),ct=tt(b(346)),ut=tt(b(347)),lt=tt(b(348)),dt=tt(b(349)),ft=tt(b(350));et.push([_e.i,`/*!
 * Copyright (c) 2017 TokBox, Inc.
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 */

/**
 * OT Base styles
 */

/* Root OT object, this is where our CSS reset happens */
.OT_root,
.OT_root * {
  color: #ffffff;
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font-family: Arial, Helvetica, sans-serif;
  vertical-align: baseline;
}

/**
 * Specific Element Reset
 */

.OT_root h1,
.OT_root h2,
.OT_root h3,
.OT_root h4,
.OT_root h5,
.OT_root h6 {
  color: #ffffff;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 100%;
  font-weight: bold;
}

.OT_root header {

}

.OT_root footer {

}

.OT_root div {

}

.OT_root section {

}

.OT_root video {

}

.OT_root button {

}

.OT_root strong {
  font-weight: bold;
}

.OT_root em {
  font-style: italic;
}

.OT_root a,
.OT_root a:link,
.OT_root a:visited,
.OT_root a:hover,
.OT_root a:active {
  font-family: Arial, Helvetica, sans-serif;
}

.OT_root ul, .OT_root ol {
  margin: 1em 1em 1em 2em;
}

.OT_root ol {
  list-style: decimal outside;
}

.OT_root ul {
  list-style: disc outside;
}

.OT_root dl {
  margin: 4px;
}

.OT_root dl dt,
.OT_root dl dd {
  float: left;
  margin: 0;
  padding: 0;
}

.OT_root dl dt {
  clear: left;
  text-align: right;
  width: 50px;
}

.OT_root dl dd {
  margin-left: 10px;
}

.OT_root img {
  border: 0 none;
}

/* Modal dialog styles */

/* Modal dialog styles */

.OT_dialog-centering {
  display: table;
  width: 100%;
  height: 100%;
}

.OT_dialog-centering-child {
  display: table-cell;
  vertical-align: middle;
}

.OT_dialog {
  position: relative;

  box-sizing: border-box;
  max-width: 576px;
  margin-right: auto;
  margin-left: auto;
  padding: 36px;
  text-align: center; /* centers all the inline content */

  background-color: #363636;
  color: #fff;
  box-shadow: 2px 4px 6px #999;
  font-family: 'Didact Gothic', sans-serif;
  font-size: 13px;
  line-height: 1.4;
}

.OT_dialog * {
  font-family: inherit;
  box-sizing: inherit;
}

.OT_closeButton {
  color: #999999;
  cursor: pointer;
  font-size: 32px;
  line-height: 36px;
  position: absolute;
  right: 18px;
  top: 0;
}

.OT_dialog-messages {
  text-align: center;
}

.OT_dialog-messages-main {
  margin-bottom: 36px;
  line-height: 36px;

  font-weight: 300;
  font-size: 24px;
}

.OT_dialog-messages-minor {
  margin-bottom: 18px;

  font-size: 13px;
  line-height: 18px;
  color: #A4A4A4;
}

.OT_dialog-messages-minor strong {
  color: #ffffff;
}

.OT_dialog-actions-card {
  display: inline-block;
}

.OT_dialog-button-title {
  margin-bottom: 18px;
  line-height: 18px;

  font-weight: 300;
  text-align: center;
  font-size: 14px;
  color: #999999;
}
.OT_dialog-button-title label {
  color: #999999;
}

.OT_dialog-button-title a,
.OT_dialog-button-title a:link,
.OT_dialog-button-title a:active {
  color: #02A1DE;
}

.OT_dialog-button-title strong {
  color: #ffffff;
  font-weight: 100;
  display: block;
}

.OT_dialog-button {
  display: inline-block;

  margin-bottom: 18px;
  padding: 0 1em;

  background-color: #1CA3DC;
  text-align: center;
  cursor: pointer;
}

.OT_dialog-button:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.OT_dialog-button-large {
  line-height: 36px;
  padding-top: 9px;
  padding-bottom: 9px;

  font-weight: 100;
  font-size: 24px;
}

.OT_dialog-button-small {
  line-height: 18px;
  padding-top: 9px;
  padding-bottom: 9px;

  background-color: #444444;
  color: #999999;
  font-size: 16px;
}

.OT_dialog-progress-bar {
  display: inline-block; /* prevents margin collapse */
  width: 100%;
  margin-top: 5px;
  margin-bottom: 41px;

  border: 1px solid #4E4E4E;
  height: 8px;
}

.OT_dialog-progress-bar-fill {
  height: 100%;

  background-color: #29A4DA;
}

/* Helpers */

.OT_centered {
  position: fixed;
  left: 50%;
  top: 50%;
  margin: 0;
}

.OT_dialog-hidden {
  display: none;
}

.OT_dialog-button-block {
  display: block;
}

.OT_dialog-no-natural-margin {
  margin-bottom: 0;
}

/* Publisher and Subscriber styles */

.OT_publisher, .OT_subscriber {
  position: relative;
  min-width: 48px;
  min-height: 48px;
}

.OT_publisher .OT_video-element,
.OT_subscriber .OT_video-element {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;

  transform-origin: 0 0;
}

/* Styles that are applied when the video element should be mirrored */
.OT_publisher.OT_mirrored .OT_video-element {
  transform: scale(-1, 1);
  transform-origin: 50% 50%;
}

.OT_subscriber_error {
  background-color: #000;
  color: #fff;
  text-align: center;
}

.OT_subscriber_error > p {
  padding: 20px;
}

/* The publisher/subscriber name/mute background */
.OT_publisher .OT_bar,
.OT_subscriber .OT_bar,
.OT_publisher .OT_name,
.OT_subscriber .OT_name,
.OT_publisher .OT_archiving,
.OT_subscriber .OT_archiving,
.OT_publisher .OT_archiving-status,
.OT_subscriber .OT_archiving-status,
.OT_publisher .OT_archiving-light-box,
.OT_subscriber .OT_archiving-light-box {
  -ms-box-sizing: border-box;
  box-sizing: border-box;
  top: 0;
  left: 0;
  right: 0;
  display: block;
  height: 34px;
  position: absolute;
}

.OT_publisher .OT_bar,
.OT_subscriber .OT_bar {
  background: rgba(0, 0, 0, 0.4);
}

.OT_publisher .OT_edge-bar-item,
.OT_subscriber .OT_edge-bar-item {
  z-index: 1; /* required to get audio level meter underneath */
}

/* The publisher/subscriber name panel/archiving status bar */
.OT_publisher .OT_name,
.OT_subscriber .OT_name {
  background-color: transparent;
  color: #ffffff;
  font-size: 15px;
  line-height: 34px;
  font-weight: normal;
  padding: 0 4px 0 36px;
  letter-spacing: normal;
}

.OT_publisher .OT_archiving-status,
.OT_subscriber .OT_archiving-status {
  background: rgba(0, 0, 0, 0.4);
  top: auto;
  bottom: 0;
  left: 34px;
  padding: 0 4px;
  color: rgba(255, 255, 255, 0.8);
  font-size: 15px;
  line-height: 34px;
  font-weight: normal;
  letter-spacing: normal;
}

.OT_micro .OT_archiving-status,
.OT_micro:hover .OT_archiving-status,
.OT_mini .OT_archiving-status,
.OT_mini:hover .OT_archiving-status {
  display: none;
}

.OT_publisher .OT_archiving-light-box,
.OT_subscriber .OT_archiving-light-box {
  background: rgba(0, 0, 0, 0.4);
  top: auto;
  bottom: 0;
  right: auto;
  width: 34px;
  height: 34px;
}

.OT_archiving-light {
  width: 7px;
  height: 7px;
  border-radius: 30px;
  position: absolute;
  top: 14px;
  left: 14px;
  background-color: #575757;
  box-shadow: 0 0 5px 1px #575757;
}

.OT_archiving-light.OT_active {
  background-color: #970d13;
  -webkit-animation: OT_pulse 1.3s ease-in;
  -moz-animation: OT_pulse 1.3s ease-in;
  -webkit-animation: OT_pulse 1.3s ease-in;
  -webkit-animation-iteration-count: infinite;
  -moz-animation-iteration-count: infinite;
  -webkit-animation-iteration-count: infinite;
}

.OT_mini .OT_bar,
.OT_bar.OT_mode-mini,
.OT_bar.OT_mode-mini-auto {
  bottom: 0;
  height: auto;
}

.OT_mini .OT_name.OT_mode-off,
.OT_mini .OT_name.OT_mode-on,
.OT_mini .OT_name.OT_mode-auto,
.OT_mini:hover .OT_name.OT_mode-auto {
  display: none;
}

.OT_publisher .OT_name,
.OT_subscriber .OT_name {
    left: 10px;
    right: 37px;
    height: 34px;
    padding-left: 0;
}

.OT_publisher .OT_mute,
.OT_subscriber .OT_mute {
    border: none;
    cursor: pointer;
    display: block;
    position: absolute;
    text-align: center;
    text-indent: -9999em;
    background-color: transparent;
    background-repeat: no-repeat;
}

.OT_publisher .OT_mute,
.OT_subscriber .OT_mute {
  right: 0;
  top: 0;
  border-left: 1px solid rgba(255, 255, 255, 0.2);
  height: 36px;
  width: 37px;
}

.OT_mini .OT_mute,
.OT_publisher.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold,
.OT_subscriber.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold {
  top: 50%;
  left: 50%;
  right: auto;
  margin-top: -18px;
  margin-left: -18.5px;
  border-left: none;
}

.OT_publisher .OT_mute {
  background-image: url(`+nt+`);
  background-position: 9px 5px;
}

.OT_publisher .OT_mute.OT_active {
  background-image: url(`+rt+`);
  background-position: 9px 4px;
}

.OT_subscriber .OT_mute {
  background-image: url(`+it+`);
  background-position: 8px 7px;
}

.OT_subscriber .OT_mute.OT_active {
  background-image: url(`+ot+`);
  background-position: 7px 7px;
}

/**
 * Styles for display modes
 *
 * Note: It's important that these completely control the display and opacity
 * attributes, no other selectors should atempt to change them.
 */

/* Default display mode transitions for various chrome elements */
.OT_publisher .OT_edge-bar-item,
.OT_subscriber .OT_edge-bar-item {
  transition-property: top, bottom, opacity;
  transition-duration: 0.5s;
  transition-timing-function: ease-in;
}

.OT_publisher .OT_edge-bar-item.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_mode-off,
.OT_publisher .OT_edge-bar-item.OT_mode-auto,
.OT_subscriber .OT_edge-bar-item.OT_mode-auto,
.OT_publisher .OT_edge-bar-item.OT_mode-mini-auto,
.OT_subscriber .OT_edge-bar-item.OT_mode-mini-auto {
  top: -25px;
  opacity: 0;
}

.OT_publisher .OT_edge-bar-item.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_mode-off {
  display: none;
}

.OT_mini .OT_mute.OT_mode-auto,
.OT_publisher .OT_mute.OT_mode-mini-auto,
.OT_subscriber .OT_mute.OT_mode-mini-auto {
  top: 50%;
}

.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,
.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto {
  top: auto;
  bottom: -25px;
}

.OT_publisher .OT_edge-bar-item.OT_mode-on,
.OT_subscriber .OT_edge-bar-item.OT_mode-on,
.OT_publisher .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,
.OT_subscriber .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,
.OT_publisher:hover .OT_edge-bar-item.OT_mode-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_mode-auto,
.OT_publisher:hover .OT_edge-bar-item.OT_mode-mini-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_mode-mini-auto {
  top: 0;
  opacity: 1;
}

.OT_mini .OT_mute.OT_mode-on,
.OT_mini:hover .OT_mute.OT_mode-auto,
.OT_mute.OT_mode-mini,
.OT_root:hover .OT_mute.OT_mode-mini-auto {
  top: 50%;
}

.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,
.OT_publisher:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto {
  top: auto;
  bottom: 0;
  opacity: 1;
}


/* Contains the video element, used to fix video letter-boxing */
.OT_widget-container {
  position: absolute;
  background: linear-gradient(60.08deg, #333333 0%, #1A1A1A 100%);
  overflow: hidden;
}

.OT_hidden-audio {
  position: absolute !important;
  height: 1px !important;
  width: 1px !important;
}

/* Load animation */
.OT_root .OT_video-loading {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  display: none;

  background-color: rgba(0, 0, 0, .75);
}

.OT_root .OT_video-loading .OT_video-loading-spinner {
  background: url(`+st+`) no-repeat;
  position: absolute;
  width: 32px;
  height: 32px;
  left: 50%;
  top: 50%;
  margin-left: -16px;
  margin-top: -16px;
  animation: OT_spin 2s linear infinite;
}
@keyframes OT_spin {
  100% {
    transform: rotate(360deg);
  }
}

.OT_publisher.OT_loading .OT_video-loading,
.OT_subscriber.OT_loading .OT_video-loading {
  display: block;
}

.OT_publisher.OT_loading .OT_video-element,
.OT_subscriber.OT_loading .OT_video-element {
  /*display: none;*/
}

.OT_video-centering {
  display: table;
  width: 100%;
  height: 100%;
}

.OT_video-container {
  display: table-cell;
  vertical-align: middle;
}

.OT_video-poster {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  display: none;

  opacity: 1.0;

  background-repeat: no-repeat;
  background-image: url(`+at+`);
  background-size: auto 55%;
}

.OT_fit-mode-cover .OT_video-element {
  object-fit: cover;
}

/* Workaround for iOS freezing issue when cropping videos */
/* https://bugs.webkit.org/show_bug.cgi?id=176439 */
@media only screen
  and (orientation: portrait) {
  .OT_subscriber.OT_ForceContain.OT_fit-mode-cover .OT_video-element {
    object-fit: contain !important;
  }
}

.OT_fit-mode-contain .OT_video-element {
  object-fit: contain;
}

.OT_fit-mode-cover .OT_video-poster {
  background-position: center;
}

.OT_fit-mode-contain .OT_video-poster {
  background-position: center;
}

.OT_audio-level-meter {
  position: absolute;
  width: 25%;
  max-width: 224px;
  min-width: 21px;
  top: 0;
  right: 0;
  overflow: hidden;
}

.OT_audio-level-meter:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_audio-level-meter__audio-only-img {
  position: absolute;
  top: 22%;
  right: 15%;
  width: 40%;

  opacity: .7;

  background: url(`+ct+`) no-repeat center;
}

.OT_audio-level-meter__audio-only-img:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_audio-level-meter__value {
  will-change: transform;
  position: absolute;
  top: -100%;
  right: -100%;
  width: 200%;
  height: 200%;
  transform: scale(0);
  border-radius: 50%;
  background-image: radial-gradient(circle, rgba(151, 206, 0, 1) 0%, rgba(151, 206, 0, 0) 100%);
}

.OT_audio-level-meter.OT_mode-off {
    display: none;
}

.OT_audio-level-meter.OT_mode-on,
.OT_audio-only .OT_audio-level-meter.OT_mode-auto {
  display: block;
}

.OT_audio-only.OT_publisher .OT_video-element,
.OT_audio-only.OT_subscriber .OT_video-element {
  display: none;
}


.OT_video-disabled-indicator {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: bottom right;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 3px;
  right: 3px;
}

.OT_video-disabled {
  background-image: url(`+ut+`);
  background-size: 33px auto;
}

.OT_video-disabled-warning {
  background-image: url(`+lt+`);
  background-size: 33px auto;
}

.OT_video-disabled-indicator.OT_active {
  display: block;
}

.OT_audio-blocked-indicator {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: center;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

.OT_audio-blocked {
  background-image: url(`+dt+`);
  background-size: 90px auto;
}

.OT_container-audio-blocked {
  cursor: pointer;
}

.OT_container-audio-blocked.OT_mini .OT_edge-bar-item {
  display: none;
}

.OT_container-audio-blocked .OT_mute {
  display: none;
}

.OT_audio-blocked-indicator.OT_active {
  display: block;
}

.OT_video-unsupported {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url(`+ft+`);
  background-size: 58px auto;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  margin-top: -30px;
}

.OT_video-unsupported-bar {
  display: none;
  position: absolute;
  width: 192%; /* copy the size of the audio meter bar for symmetry */
  height: 192%;
  top: -96% /* half of the size */;
  left: -96%;
  border-radius: 50%;

  background-color: rgba(0, 0, 0, .8);
}

.OT_video-unsupported-img {
  display: none;
  position: absolute;
  top: 11%;
  left: 15%;
  width: 70%;
  opacity: .7;
  background-image: url(`+ft+`);
  background-repeat: no-repeat;
  background-position: center;
  background-size: 100% auto;
}

.OT_video-unsupported-img:before {
  /* makes the height of the container 93% of its width (90/97 px) */
  content: '';
  display: block;
  padding-top: 93%;
}

.OT_video-unsupported-text {
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  height: 100%;
  margin-top: 40px;
}

.OT_video-unsupported.OT_active {
  display: block;
}

.OT_mini .OT_video-unsupported,
.OT_micro .OT_video-unsupported {
  position: absolute;
  width: 25%;
  max-width: 224px;
  min-width: 21px;
  top: 0;
  left: 0;
  overflow: hidden;
  background: none;
  bottom: auto;
  right: auto;
  margin: auto;
}

.OT_mini .OT_video-unsupported:before,
.OT_micro .OT_video-unsupported:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_mini .OT_video-unsupported-bar,
.OT_micro .OT_video-unsupported-bar,
.OT_mini .OT_video-unsupported-img,
.OT_micro .OT_video-unsupported-img {
  display: block;
}

.OT_mini .OT_video-unsupported-text,
.OT_micro .OT_video-unsupported-text {
  display: none;
}

.OT_hide-forced {
  display: none;
}

.OT_ModalDialog {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  z-index: 1000;
  background-color: rgba(0, 0, 0, 0.2);
}

#tb_alert {
  position: fixed;
  width: 570px;
  font-family: "Lucida Grande", Arial;
  top: 50%;
  left: 50%;
  margin-top: -75px;
  margin-left: -285px;
}

#tb_alert * {
  box-sizing: border-box;
}

#tb_alert .OT_alert {
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  background-color: #333;
  position: relative;
  padding: 30px;
  overflow: visible;
  margin-left: 70px;
  border-bottom-color: rgba(255, 255, 255, 0.1);
  border-left-color: rgba(255, 255, 255, 0.1);

  background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));

  background-image: -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));

  background-size: 4px 4px;
  background-position: 0 0, 2px 2px;
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

#tb_alert .OT_alert-exclamation {
  background-color: #9c1408;
  background-image: linear-gradient(0deg, #dd0c0a 0%, #9c1408 100%);
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);

  margin: -1px 0;

  font-family: MS Trebuchet;
  font-weight: bold;
  font-size: 60px;
  text-shadow: -1px -1px 2px rgba(0, 0, 0, 0.5);

  color: white;
  width: 65px;
  position: absolute;
  padding: 42px 0;
  text-align: center;
  left: -70px;
  top: 0;
  bottom: 0;
  border-top-left-radius: 5px;
  border-bottom-left-radius: 5px;

  border-bottom-color: transparent;
  border-left: none;
  border-right: none;
}

#tb_alert .OT_alert-exclamation:after,
#tb_alert .OT_alert-exclamation:before {
  content: " ";
  position: absolute;
  right: -24px;
  top: 40%;
  border: 12px solid transparent;
  border-left-color: #9c1408;
}

#tb_alert .OT_alert-exclamation:before {
  border-left-color: #bc3428;
  top: 39%;
}

#tb_alert .OT_alert-body {
  color: #c8c5c5;
  margin: 0;
  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
  font-size: 14px;
  line-height: 1.3em;
}

#tb_alert .continue-text {
  margin-top: 12px
}

#tb_alert > * a {
  color: #a7d8df;
  text-decoration: none;
}

#tb_alert .OT_alert-header {
  font-size: 24px;
  padding-bottom: 5px;
  color: #aaa;
  font-weight: bold;
  position: relative;
  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
  margin: 0;
}

#tb_alert .OT_alert-header::before {
  content: attr(data-text);
  position: absolute;
  left: 0;
  color: white;
  -webkit-mask-image: -webkit-gradient(
    linear,
    left top, left bottom,
    from(rgba(0, 0, 0, 1)),
    color-stop(60%, rgba(0, 0, 0, 0)),
    to(rgba(0, 0, 0, 0))
  );
}

#tb_alert .OT_alert-close-button {
  position: absolute;
  right: 8px;
  top: 5px;
  background-color: #000;
  color: #666;
  border: none;
  font-size: 20px;
  /** Hack to bring it up to the proper line top */
  line-height: 14px;
  padding: 0;
  padding-bottom: 3px;
  cursor: pointer;
}

#tb_alert #section-mobile-browser,
#tb_alert #section-supported-mobile-browser {
  width: 200px;
  top: 0px;
  left: 25%;
  margin-top: 0;
  margin-left: 0;
}

@media all and (max-height: 300px) {
  #tb_alert {
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    margin-left: 0;
    margin-top: 0;
  }
  #tb_alert #section-mobile-browser,
  #tb_alert #section-supported-mobile-browser {
    margin-left: 0;
    margin-top: 10px;
    left: 0;
  }
}

#tb_alert #section-normal-install,
#tb_alert #section-upgrade-install,
#tb_alert #section-mobile-browser,
#tb_alert #section-supported-mobile-browser {
  display: none;
}
`,""])},function(_e,et,b){_e.exports=function(rt){var it=[];return it.toString=function(){return this.map(function(st){var at=tt(st,rt);return st[2]?"@media "+st[2]+"{"+at+"}":at}).join("")},it.i=function(ot,st){typeof ot=="string"&&(ot=[[null,ot,""]]);for(var at={},ct=0;ct<this.length;ct++){var ut=this[ct][0];ut!=null&&(at[ut]=!0)}for(ct=0;ct<ot.length;ct++){var lt=ot[ct];(lt[0]==null||!at[lt[0]])&&(st&&!lt[2]?lt[2]=st:st&&(lt[2]="("+lt[2]+") and ("+st+")"),it.push(lt))}},it};function tt(rt,it){var ot=rt[1]||"",st=rt[3];if(!st)return ot;if(it&&typeof btoa=="function"){var at=nt(st),ct=st.sources.map(function(ut){return"/*# sourceURL="+st.sourceRoot+ut+" */"});return[ot].concat(ct).concat([at]).join(`
`)}return[ot].join(`
`)}function nt(rt){var it=btoa(unescape(encodeURIComponent(JSON.stringify(rt)))),ot="sourceMappingURL=data:application/json;charset=utf-8;base64,"+it;return"/*# "+ot+" */"}},function(_e,et,b){_e.exports=function(nt,rt){return typeof nt!="string"?nt:(/^['"].*['"]$/.test(nt)&&(nt=nt.slice(1,-1)),/["'() \t\n]/.test(nt)||rt?'"'+nt.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':nt)}},function(_e,et){_e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII="},function(_e,et){_e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg=="},function(_e,et){_e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII="},function(_e,et){_e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg=="},function(_e,et){_e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwMTAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNiKSIgZD0iTTg2LjYgNTBBMTAwIDEwMCAwIDAxMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2MpIiBkPSJNMCAxMDBhMTAwIDEwMCAwIDAxLTg2LjYtNTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2QpIiBkPSJNLTg2LjYgNTBhMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2UpIiBkPSJNLTg2LjYtNTBBMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAxODYuNiA1MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48L2c+PC9tYXNrPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSItMjAiIHk9Ii0yMCIgbWFzaz0idXJsKCNnKSIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg=="},function(_e,et){_e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDciIGhlaWdodD0iNDciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIHI9IjIzLjUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjcuNjM0IDE4LjUwOGE0LjMwNCA0LjMwNCAwIDExLTguNjA5IDAgNC4zMDQgNC4zMDQgMCAwMTguNjA5IDB6bTQuNzEyIDEyLjgwNGMuMTIyLjUwNi0uMjc1Ljk2OS0uNzg2Ljk2OUgxNS4xYy0uNTEyIDAtLjkwOS0uNDYyLS43ODctLjk3Ljk5My00LjEzNyA0LjY1My03LjIwOCA5LjAxNi03LjIwOHM4LjAyMyAzLjA3IDkuMDE3IDcuMjA5eiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg=="},function(_e,et){_e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+"},function(_e,et){_e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg=="},function(_e,et){_e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC"},function(_e,et){_e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwMTQzIDQ0YTguOTg4IDguOTg4IDAgMDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAxMTAuMzc0LS40MkM1MS43MDIgMTkuMTE0IDU0IDI5LjIwOCA1NCA0NS4yMDhjMCAxNC41MjctMi4zNDMgMjMuODgtNy4wMyAyOC4wNThhNy4yOCA3LjI4IDAgMDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwMS01LTV2LTEzYTUgNSAwIDAxNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(_e,et){_e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMDE1IDVWNTguMThhNSA1IDAgMDEtNSA1SDkuMTFhNSA1IDAgMDEtNS01VjI1Ljk3YTUgNSAwIDAxNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwMTQuMzA0IDIuNzAydjI2LjgzNWEzIDMgMCAwMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(_e,et,b){var tt={},nt=function(kt){var Vt;return function(){return typeof Vt>"u"&&(Vt=kt.apply(this,arguments)),Vt}},rt=nt(function(){return window&&document&&document.all&&!window.atob}),it=function(kt,Vt){return Vt?Vt.querySelector(kt):document.querySelector(kt)},ot=function(kt){var Vt={};return function(Nt,tn){if(typeof Nt=="function")return Nt();if(typeof Vt[Nt]>"u"){var _t=it.call(this,Nt,tn);if(window.HTMLIFrameElement&&_t instanceof window.HTMLIFrameElement)try{_t=_t.contentDocument.head}catch{_t=null}Vt[Nt]=_t}return Vt[Nt]}}(),st=null,at=0,ct=[],ut=b(352);_e.exports=function(kt,Vt){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");Vt=Vt||{},Vt.attrs=typeof Vt.attrs=="object"?Vt.attrs:{},!Vt.singleton&&typeof Vt.singleton!="boolean"&&(Vt.singleton=rt()),Vt.insertInto||(Vt.insertInto="head"),Vt.insertAt||(Vt.insertAt="bottom");var Nt=dt(kt,Vt);return lt(Nt,Vt),function(_t){for(var Kt=[],cn=0;cn<Nt.length;cn++){var an=Nt[cn],mn=tt[an.id];mn.refs--,Kt.push(mn)}if(_t){var on=dt(_t,Vt);lt(on,Vt)}for(var cn=0;cn<Kt.length;cn++){var mn=Kt[cn];if(mn.refs===0){for(var yn=0;yn<mn.parts.length;yn++)mn.parts[yn]();delete tt[mn.id]}}}};function lt(kt,Vt){for(var Nt=0;Nt<kt.length;Nt++){var tn=kt[Nt],_t=tt[tn.id];if(_t){_t.refs++;for(var Kt=0;Kt<_t.parts.length;Kt++)_t.parts[Kt](tn.parts[Kt]);for(;Kt<tn.parts.length;Kt++)_t.parts.push(Et(tn.parts[Kt],Vt))}else{for(var cn=[],Kt=0;Kt<tn.parts.length;Kt++)cn.push(Et(tn.parts[Kt],Vt));tt[tn.id]={id:tn.id,refs:1,parts:cn}}}}function dt(kt,Vt){for(var Nt=[],tn={},_t=0;_t<kt.length;_t++){var Kt=kt[_t],cn=Vt.base?Kt[0]+Vt.base:Kt[0],an=Kt[1],mn=Kt[2],on=Kt[3],yn={css:an,media:mn,sourceMap:on};tn[cn]?tn[cn].parts.push(yn):Nt.push(tn[cn]={id:cn,parts:[yn]})}return Nt}function ft(kt,Vt){var Nt=ot(kt.insertInto);if(!Nt)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var tn=ct[ct.length-1];if(kt.insertAt==="top")tn?tn.nextSibling?Nt.insertBefore(Vt,tn.nextSibling):Nt.appendChild(Vt):Nt.insertBefore(Vt,Nt.firstChild),ct.push(Vt);else if(kt.insertAt==="bottom")Nt.appendChild(Vt);else if(typeof kt.insertAt=="object"&&kt.insertAt.before){var _t=ot(kt.insertAt.before,Nt);Nt.insertBefore(Vt,_t)}else throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`)}function St(kt){if(kt.parentNode===null)return!1;kt.parentNode.removeChild(kt);var Vt=ct.indexOf(kt);Vt>=0&&ct.splice(Vt,1)}function Tt(kt){var Vt=document.createElement("style");if(kt.attrs.type===void 0&&(kt.attrs.type="text/css"),kt.attrs.nonce===void 0){var Nt=yt();Nt&&(kt.attrs.nonce=Nt)}return gt(Vt,kt.attrs),ft(kt,Vt),Vt}function pt(kt){var Vt=document.createElement("link");return kt.attrs.type===void 0&&(kt.attrs.type="text/css"),kt.attrs.rel="stylesheet",gt(Vt,kt.attrs),ft(kt,Vt),Vt}function gt(kt,Vt){Object.keys(Vt).forEach(function(Nt){kt.setAttribute(Nt,Vt[Nt])})}function yt(){return b.nc}function Et(kt,Vt){var Nt,tn,_t,Kt;if(Vt.transform&&kt.css)if(Kt=typeof Vt.transform=="function"?Vt.transform(kt.css):Vt.transform.default(kt.css),Kt)kt.css=Kt;else return function(){};if(Vt.singleton){var cn=at++;Nt=st||(st=Tt(Vt)),tn=Gt.bind(null,Nt,cn,!1),_t=Gt.bind(null,Nt,cn,!0)}else kt.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(Nt=pt(Vt),tn=At.bind(null,Nt,Vt),_t=function(){St(Nt),Nt.href&&URL.revokeObjectURL(Nt.href)}):(Nt=Tt(Vt),tn=Wt.bind(null,Nt),_t=function(){St(Nt)});return tn(kt),function(mn){if(mn){if(mn.css===kt.css&&mn.media===kt.media&&mn.sourceMap===kt.sourceMap)return;tn(kt=mn)}else _t()}}var It=function(){var kt=[];return function(Vt,Nt){return kt[Vt]=Nt,kt.filter(Boolean).join(`
`)}}();function Gt(kt,Vt,Nt,tn){var _t=Nt?"":tn.css;if(kt.styleSheet)kt.styleSheet.cssText=It(Vt,_t);else{var Kt=document.createTextNode(_t),cn=kt.childNodes;cn[Vt]&&kt.removeChild(cn[Vt]),cn.length?kt.insertBefore(Kt,cn[Vt]):kt.appendChild(Kt)}}function Wt(kt,Vt){var Nt=Vt.css,tn=Vt.media;if(tn&&kt.setAttribute("media",tn),kt.styleSheet)kt.styleSheet.cssText=Nt;else{for(;kt.firstChild;)kt.removeChild(kt.firstChild);kt.appendChild(document.createTextNode(Nt))}}function At(kt,Vt,Nt){var tn=Nt.css,_t=Nt.sourceMap,Kt=Vt.convertToAbsoluteUrls===void 0&&_t;(Vt.convertToAbsoluteUrls||Kt)&&(tn=ut(tn)),_t&&(tn+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(_t))))+" */");var cn=new Blob([tn],{type:"text/css"}),an=kt.href;kt.href=URL.createObjectURL(cn),an&&URL.revokeObjectURL(an)}},function(_e,et){_e.exports=function(b){var tt=typeof window<"u"&&window.location;if(!tt)throw new Error("fixUrls requires window.location");if(!b||typeof b!="string")return b;var nt=tt.protocol+"//"+tt.host,rt=nt+tt.pathname.replace(/\/[^\/]*$/,"/"),it=b.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(ot,st){var at=st.trim().replace(/^"(.*)"$/,function(ut,lt){return lt}).replace(/^'(.*)'$/,function(ut,lt){return lt});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(at))return ot;var ct;return at.indexOf("//")===0?ct=at:at.indexOf("/")===0?ct=nt+at:ct=rt+at.replace(/^\.\//,""),"url("+JSON.stringify(ct)+")"});return it}},function(_e,et){function b(){this.__data__=[],this.size=0}_e.exports=b},function(_e,et,b){var tt=b(80),nt=Array.prototype,rt=nt.splice;function it(ot){var st=this.__data__,at=tt(st,ot);if(at<0)return!1;var ct=st.length-1;return at==ct?st.pop():rt.call(st,at,1),--this.size,!0}_e.exports=it},function(_e,et,b){var tt=b(80);function nt(rt){var it=this.__data__,ot=tt(it,rt);return ot<0?void 0:it[ot][1]}_e.exports=nt},function(_e,et,b){var tt=b(80);function nt(rt){return tt(this.__data__,rt)>-1}_e.exports=nt},function(_e,et,b){var tt=b(80);function nt(rt,it){var ot=this.__data__,st=tt(ot,rt);return st<0?(++this.size,ot.push([rt,it])):ot[st][1]=it,this}_e.exports=nt},function(_e,et,b){var tt=b(79);function nt(){this.__data__=new tt,this.size=0}_e.exports=nt},function(_e,et){function b(tt){var nt=this.__data__,rt=nt.delete(tt);return this.size=nt.size,rt}_e.exports=b},function(_e,et){function b(tt){return this.__data__.get(tt)}_e.exports=b},function(_e,et){function b(tt){return this.__data__.has(tt)}_e.exports=b},function(_e,et,b){var tt=b(79),nt=b(111),rt=b(112),it=200;function ot(st,at){var ct=this.__data__;if(ct instanceof tt){var ut=ct.__data__;if(!nt||ut.length<it-1)return ut.push([st,at]),this.size=++ct.size,this;ct=this.__data__=new rt(ut)}return ct.set(st,at),this.size=ct.size,this}_e.exports=ot},function(_e,et,b){var tt=b(16),nt=b(366),rt=b(11),it=b(174),ot=/[\\^$.*+?()[\]{}|]/g,st=/^\[object .+?Constructor\]$/,at=Function.prototype,ct=Object.prototype,ut=at.toString,lt=ct.hasOwnProperty,dt=RegExp("^"+ut.call(lt).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ft(St){if(!rt(St)||nt(St))return!1;var Tt=tt(St)?dt:st;return Tt.test(it(St))}_e.exports=ft},function(_e,et,b){var tt=b(39),nt=Object.prototype,rt=nt.hasOwnProperty,it=nt.toString,ot=tt?tt.toStringTag:void 0;function st(at){var ct=rt.call(at,ot),ut=at[ot];try{at[ot]=void 0;var lt=!0}catch{}var dt=it.call(at);return lt&&(ct?at[ot]=ut:delete at[ot]),dt}_e.exports=st},function(_e,et){var b=Object.prototype,tt=b.toString;function nt(rt){return tt.call(rt)}_e.exports=nt},function(_e,et,b){var tt=b(367),nt=function(){var it=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||"");return it?"Symbol(src)_1."+it:""}();function rt(it){return!!nt&&nt in it}_e.exports=rt},function(_e,et,b){var tt=b(14),nt=tt["__core-js_shared__"];_e.exports=nt},function(_e,et){function b(tt,nt){return tt==null?void 0:tt[nt]}_e.exports=b},function(_e,et,b){var tt=b(370),nt=b(79),rt=b(111);function it(){this.size=0,this.__data__={hash:new tt,map:new(rt||nt),string:new tt}}_e.exports=it},function(_e,et,b){var tt=b(371),nt=b(372),rt=b(373),it=b(374),ot=b(375);function st(at){var ct=-1,ut=at==null?0:at.length;for(this.clear();++ct<ut;){var lt=at[ct];this.set(lt[0],lt[1])}}st.prototype.clear=tt,st.prototype.delete=nt,st.prototype.get=rt,st.prototype.has=it,st.prototype.set=ot,_e.exports=st},function(_e,et,b){var tt=b(81);function nt(){this.__data__=tt?tt(null):{},this.size=0}_e.exports=nt},function(_e,et){function b(tt){var nt=this.has(tt)&&delete this.__data__[tt];return this.size-=nt?1:0,nt}_e.exports=b},function(_e,et,b){var tt=b(81),nt="__lodash_hash_undefined__",rt=Object.prototype,it=rt.hasOwnProperty;function ot(st){var at=this.__data__;if(tt){var ct=at[st];return ct===nt?void 0:ct}return it.call(at,st)?at[st]:void 0}_e.exports=ot},function(_e,et,b){var tt=b(81),nt=Object.prototype,rt=nt.hasOwnProperty;function it(ot){var st=this.__data__;return tt?st[ot]!==void 0:rt.call(st,ot)}_e.exports=it},function(_e,et,b){var tt=b(81),nt="__lodash_hash_undefined__";function rt(it,ot){var st=this.__data__;return this.size+=this.has(it)?0:1,st[it]=tt&&ot===void 0?nt:ot,this}_e.exports=rt},function(_e,et,b){var tt=b(82);function nt(rt){var it=tt(this,rt).delete(rt);return this.size-=it?1:0,it}_e.exports=nt},function(_e,et){function b(tt){var nt=typeof tt;return nt=="string"||nt=="number"||nt=="symbol"||nt=="boolean"?tt!=="__proto__":tt===null}_e.exports=b},function(_e,et,b){var tt=b(82);function nt(rt){return tt(this,rt).get(rt)}_e.exports=nt},function(_e,et,b){var tt=b(82);function nt(rt){return tt(this,rt).has(rt)}_e.exports=nt},function(_e,et,b){var tt=b(82);function nt(rt,it){var ot=tt(this,rt),st=ot.size;return ot.set(rt,it),this.size+=ot.size==st?0:1,this}_e.exports=nt},function(_e,et){function b(tt,nt){for(var rt=-1,it=Array(tt);++rt<tt;)it[rt]=nt(rt);return it}_e.exports=b},function(_e,et,b){var tt=b(29),nt=b(17),rt="[object Arguments]";function it(ot){return nt(ot)&&tt(ot)==rt}_e.exports=it},function(_e,et){function b(){return!1}_e.exports=b},function(_e,et,b){var tt=b(29),nt=b(114),rt=b(17),it="[object Arguments]",ot="[object Array]",st="[object Boolean]",at="[object Date]",ct="[object Error]",ut="[object Function]",lt="[object Map]",dt="[object Number]",ft="[object Object]",St="[object RegExp]",Tt="[object Set]",pt="[object String]",gt="[object WeakMap]",yt="[object ArrayBuffer]",Et="[object DataView]",It="[object Float32Array]",Gt="[object Float64Array]",Wt="[object Int8Array]",At="[object Int16Array]",kt="[object Int32Array]",Vt="[object Uint8Array]",Nt="[object Uint8ClampedArray]",tn="[object Uint16Array]",_t="[object Uint32Array]",Kt={};Kt[It]=Kt[Gt]=Kt[Wt]=Kt[At]=Kt[kt]=Kt[Vt]=Kt[Nt]=Kt[tn]=Kt[_t]=!0,Kt[it]=Kt[ot]=Kt[yt]=Kt[st]=Kt[Et]=Kt[at]=Kt[ct]=Kt[ut]=Kt[lt]=Kt[dt]=Kt[ft]=Kt[St]=Kt[Tt]=Kt[pt]=Kt[gt]=!1;function cn(an){return rt(an)&&nt(an.length)&&!!Kt[tt(an)]}_e.exports=cn},function(_e,et,b){var tt=b(178),nt=tt(Object.keys,Object);_e.exports=nt},function(_e,et,b){var tt=b(40),nt=b(53);function rt(it,ot){return it&&tt(ot,nt(ot),it)}_e.exports=rt},function(_e,et,b){var tt=b(11),nt=b(67),rt=b(388),it=Object.prototype,ot=it.hasOwnProperty;function st(at){if(!tt(at))return rt(at);var ct=nt(at),ut=[];for(var lt in at)lt=="constructor"&&(ct||!ot.call(at,lt))||ut.push(lt);return ut}_e.exports=st},function(_e,et){function b(tt){var nt=[];if(tt!=null)for(var rt in Object(tt))nt.push(rt);return nt}_e.exports=b},function(_e,et,b){var tt=b(40),nt=b(117);function rt(it,ot){return tt(it,nt(it),ot)}_e.exports=rt},function(_e,et){function b(tt,nt){for(var rt=-1,it=tt==null?0:tt.length,ot=0,st=[];++rt<it;){var at=tt[rt];nt(at,rt,tt)&&(st[ot++]=at)}return st}_e.exports=b},function(_e,et,b){var tt=b(40),nt=b(181);function rt(it,ot){return tt(it,nt(it),ot)}_e.exports=rt},function(_e,et,b){var tt=b(38),nt=b(14),rt=tt(nt,"DataView");_e.exports=rt},function(_e,et,b){var tt=b(38),nt=b(14),rt=tt(nt,"Promise");_e.exports=rt},function(_e,et){var b=Object.prototype,tt=b.hasOwnProperty;function nt(rt){var it=rt.length,ot=new rt.constructor(it);return it&&typeof rt[0]=="string"&&tt.call(rt,"index")&&(ot.index=rt.index,ot.input=rt.input),ot}_e.exports=nt},function(_e,et,b){var tt=b(120),nt=b(396),rt=b(397),it=b(398),ot=b(188),st="[object Boolean]",at="[object Date]",ct="[object Map]",ut="[object Number]",lt="[object RegExp]",dt="[object Set]",ft="[object String]",St="[object Symbol]",Tt="[object ArrayBuffer]",pt="[object DataView]",gt="[object Float32Array]",yt="[object Float64Array]",Et="[object Int8Array]",It="[object Int16Array]",Gt="[object Int32Array]",Wt="[object Uint8Array]",At="[object Uint8ClampedArray]",kt="[object Uint16Array]",Vt="[object Uint32Array]";function Nt(tn,_t,Kt){var cn=tn.constructor;switch(_t){case Tt:return tt(tn);case st:case at:return new cn(+tn);case pt:return nt(tn,Kt);case gt:case yt:case Et:case It:case Gt:case Wt:case At:case kt:case Vt:return ot(tn,Kt);case ct:return new cn;case ut:case ft:return new cn(tn);case lt:return rt(tn);case dt:return new cn;case St:return it(tn)}}_e.exports=Nt},function(_e,et,b){var tt=b(120);function nt(rt,it){var ot=it?tt(rt.buffer):rt.buffer;return new rt.constructor(ot,rt.byteOffset,rt.byteLength)}_e.exports=nt},function(_e,et){var b=/\w*$/;function tt(nt){var rt=new nt.constructor(nt.source,b.exec(nt));return rt.lastIndex=nt.lastIndex,rt}_e.exports=tt},function(_e,et,b){var tt=b(39),nt=tt?tt.prototype:void 0,rt=nt?nt.valueOf:void 0;function it(ot){return rt?Object(rt.call(ot)):{}}_e.exports=it},function(_e,et,b){var tt=b(400),nt=b(66),rt=b(115),it=rt&&rt.isMap,ot=it?nt(it):tt;_e.exports=ot},function(_e,et,b){var tt=b(41),nt=b(17),rt="[object Map]";function it(ot){return nt(ot)&&tt(ot)==rt}_e.exports=it},function(_e,et,b){var tt=b(402),nt=b(66),rt=b(115),it=rt&&rt.isSet,ot=it?nt(it):tt;_e.exports=ot},function(_e,et,b){var tt=b(41),nt=b(17),rt="[object Set]";function it(ot){return nt(ot)&&tt(ot)==rt}_e.exports=it},function(_e,et,b){(function(tt){et.log=it,et.formatArgs=rt,et.save=ot,et.load=st,et.useColors=nt,et.storage=ct(),et.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function nt(){var lt=at("colors");return/^(no|off|false|disabled)$/i.test(lt)?!1:typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:!!(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function rt(lt){var dt=this.useColors;if(lt[0]=(dt?"%c":"")+this.namespace+(dt?" %c":" ")+lt[0]+(dt?"%c ":" ")+"+"+_e.exports.humanize(this.diff),!!dt){var ft="color: "+this.color;lt.splice(1,0,ft,"color: inherit");var St=0,Tt=0;lt[0].replace(/%[a-zA-Z%]/g,function(pt){pt!=="%%"&&(St++,pt==="%c"&&(Tt=St))}),lt.splice(Tt,0,ft)}}function it(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function ot(lt){try{lt==null?et.storage.removeItem("debug"):et.storage.setItem("debug",lt)}catch{}}function st(){var lt;try{lt=et.storage.getItem("debug")}catch{}return!lt&&typeof tt<"u"&&"env"in tt&&(lt={}.DEBUG),lt}function at(lt){var dt="debug_"+lt.toLowerCase();try{return et.storage.getItem(dt)}catch{return typeof tt<"u"&&"env"in tt?tt.env[dt.toUpperCase()]:void 0}}function ct(){try{return localStorage}catch{}}_e.exports=b(404)(et);var ut=_e.exports.formatters;ut.j=function(lt){try{return JSON.stringify(lt)}catch(dt){return"[UnexpectedJSONParseError]: "+dt.message}}}).call(this,b(42))},function(_e,et,b){_e.exports=function(nt){it.debug=it.default=it,it.coerce=ut,it.disable=at,it.enable=st,it.enabled=ct,it.humanize=b(405),Object.keys(nt).forEach(function(lt){it[lt]=nt[lt]}),it.instances=[],it.names=[],it.skips=[],it.formatters={};function rt(lt){var dt=0,ft;for(ft in lt)dt=(dt<<5)-dt+lt.charCodeAt(ft),dt|=0;return it.colors[Math.abs(dt)%it.colors.length]}it.selectColor=rt;function it(lt){var dt;function ft(){if(ft.enabled){var St=ft,Tt=+new Date,pt=Tt-(dt||Tt);St.diff=pt,St.prev=dt,St.curr=Tt,dt=Tt;for(var gt=new Array(arguments.length),yt=0;yt<gt.length;yt++)gt[yt]=arguments[yt];gt[0]=it.coerce(gt[0]),typeof gt[0]!="string"&&gt.unshift("%O");var Et=0;gt[0]=gt[0].replace(/%([a-zA-Z%])/g,function(Gt,Wt){if(Gt==="%%")return Gt;Et++;var At=it.formatters[Wt];if(typeof At=="function"){var kt=gt[Et];Gt=At.call(St,kt),gt.splice(Et,1),Et--}return Gt}),it.formatArgs.call(St,gt);var It=St.log||it.log;It.apply(St,gt)}}return ft.namespace=lt,ft.enabled=it.enabled(lt),ft.useColors=it.useColors(),ft.color=rt(lt),ft.destroy=ot,typeof it.init=="function"&&it.init(ft),it.instances.push(ft),ft}function ot(){var lt=it.instances.indexOf(this);return lt!==-1?(it.instances.splice(lt,1),!0):!1}function st(lt){it.save(lt),it.names=[],it.skips=[];var dt,ft=(typeof lt=="string"?lt:"").split(/[\s,]+/),St=ft.length;for(dt=0;dt<St;dt++)ft[dt]&&(lt=ft[dt].replace(/\*/g,".*?"),lt[0]==="-"?it.skips.push(new RegExp("^"+lt.substr(1)+"$")):it.names.push(new RegExp("^"+lt+"$")));for(dt=0;dt<it.instances.length;dt++){var Tt=it.instances[dt];Tt.enabled=it.enabled(Tt.namespace)}}function at(){it.enable("")}function ct(lt){if(lt[lt.length-1]==="*")return!0;var dt,ft;for(dt=0,ft=it.skips.length;dt<ft;dt++)if(it.skips[dt].test(lt))return!1;for(dt=0,ft=it.names.length;dt<ft;dt++)if(it.names[dt].test(lt))return!0;return!1}function ut(lt){return lt instanceof Error?lt.stack||lt.message:lt}return it.enable(it.load()),it}},function(_e,et){var b=1e3,tt=b*60,nt=tt*60,rt=nt*24,it=rt*7,ot=rt*365.25;_e.exports=function(lt,dt){dt=dt||{};var ft=typeof lt;if(ft==="string"&&lt.length>0)return st(lt);if(ft==="number"&&isFinite(lt))return dt.long?ct(lt):at(lt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(lt))};function st(lt){if(lt=String(lt),!(lt.length>100)){var dt=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(lt);if(dt){var ft=parseFloat(dt[1]),St=(dt[2]||"ms").toLowerCase();switch(St){case"years":case"year":case"yrs":case"yr":case"y":return ft*ot;case"weeks":case"week":case"w":return ft*it;case"days":case"day":case"d":return ft*rt;case"hours":case"hour":case"hrs":case"hr":case"h":return ft*nt;case"minutes":case"minute":case"mins":case"min":case"m":return ft*tt;case"seconds":case"second":case"secs":case"sec":case"s":return ft*b;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return ft;default:return}}}}function at(lt){var dt=Math.abs(lt);return dt>=rt?Math.round(lt/rt)+"d":dt>=nt?Math.round(lt/nt)+"h":dt>=tt?Math.round(lt/tt)+"m":dt>=b?Math.round(lt/b)+"s":lt+"ms"}function ct(lt){var dt=Math.abs(lt);return dt>=rt?ut(lt,dt,rt,"day"):dt>=nt?ut(lt,dt,nt,"hour"):dt>=tt?ut(lt,dt,tt,"minute"):dt>=b?ut(lt,dt,b,"second"):lt+" ms"}function ut(lt,dt,ft,St){var Tt=dt>=ft*1.5;return Math.round(lt/ft)+" "+St+(Tt?"s":"")}},function(_e,et,b){var tt=b(407),nt=b(175),rt=b(88),it=nt?function(ot,st){return nt(ot,"toString",{configurable:!0,enumerable:!1,value:tt(st),writable:!0})}:rt;_e.exports=it},function(_e,et){function b(tt){return function(){return tt}}_e.exports=b},function(_e,et,b){const tt=b(194),nt=new tt;function rt(it,ot){if(ot===void 0)return it;nt.has(ot)||nt.set(ot,new tt);const st=nt.get(ot);return st.has(it)||st.set(it,it.bind(ot)),st.get(it)}_e.exports=rt},function(_e,et,b){_e.exports=function(){var tt,nt;if(typeof WeakMap!="function")return!1;try{tt=new WeakMap([[nt={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(tt)!=="[object WeakMap]"||typeof tt.set!="function"||tt.set({},1)!==tt||typeof tt.delete!="function"||typeof tt.has!="function"||tt.get(nt)!=="one")}},function(_e,et,b){var tt=b(43),nt=b(125),rt=b(413),it=b(31),ot=b(414),st=b(32),at=b(201),ct=b(456),ut=b(44).toStringTag,lt=b(457),dt=Array.isArray,ft=Object.defineProperty,St=Object.prototype.hasOwnProperty,Tt=Object.getPrototypeOf,pt;_e.exports=pt=function(){var gt=arguments[0],yt;if(!(this instanceof pt))throw new TypeError("Constructor requires 'new'");return yt=lt&&nt&&WeakMap!==pt?nt(new WeakMap,Tt(this)):this,tt(gt)&&(dt(gt)||(gt=at(gt))),ft(yt,"__weakMapData__",st("c","$weakMap$"+ot())),gt&&ct(gt,function(Et){it(Et),yt.set(Et[0],Et[1])}),yt},lt&&(nt&&nt(pt,WeakMap),pt.prototype=Object.create(WeakMap.prototype,{constructor:st(pt)})),Object.defineProperties(pt.prototype,{delete:st(function(gt){return St.call(rt(gt),this.__weakMapData__)?(delete gt[this.__weakMapData__],!0):!1}),get:st(function(gt){if(St.call(rt(gt),this.__weakMapData__))return gt[this.__weakMapData__]}),has:st(function(gt){return St.call(rt(gt),this.__weakMapData__)}),set:st(function(gt,yt){return ft(rt(gt),this.__weakMapData__,st("c",yt)),this}),toString:st(function(){return"[object WeakMap]"})}),ft(pt.prototype,ut,st("c","WeakMap"))},function(_e,et,b){_e.exports=function(){}},function(_e,et,b){var tt=Object.create,nt;b(195)()||(nt=b(196)),_e.exports=function(){var rt,it,ot;return!nt||nt.level!==1?tt:(rt={},it={},ot={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(st){if(st==="__proto__"){it[st]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}it[st]=ot}),Object.defineProperties(rt,it),Object.defineProperty(nt,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:rt}),function(st,at){return tt(st===null?rt:st,at)})}()},function(_e,et,b){var tt=b(197);_e.exports=function(nt){if(!tt(nt))throw new TypeError(nt+" is not an Object");return nt}},function(_e,et,b){var tt=Object.create(null),nt=Math.random;_e.exports=function(){var rt;do rt=nt().toString(36).slice(2);while(tt[rt]);return rt}},function(_e,et,b){var tt=b(416);_e.exports=function(nt){if(typeof nt!="function"||!hasOwnProperty.call(nt,"length"))return!1;try{if(typeof nt.length!="number"||typeof nt.call!="function"||typeof nt.apply!="function")return!1}catch{return!1}return!tt(nt)}},function(_e,et,b){var tt=b(126);_e.exports=function(nt){if(!tt(nt))return!1;try{return nt.constructor?nt.constructor.prototype===nt:!1}catch{return!1}}},function(_e,et,b){_e.exports=function(){var tt=Object.assign,nt;return typeof tt!="function"?!1:(nt={foo:"raz"},tt(nt,{bar:"dwa"},{trzy:"trzy"}),nt.foo+nt.bar+nt.trzy==="razdwatrzy")}},function(_e,et,b){var tt=b(419),nt=b(31),rt=Math.max;_e.exports=function(it,ot){var st,at,ct=rt(arguments.length,2),ut;for(it=Object(nt(it)),ut=function(lt){try{it[lt]=ot[lt]}catch(dt){st||(st=dt)}},at=1;at<ct;++at)ot=arguments[at],tt(ot).forEach(ut);if(st!==void 0)throw st;return it}},function(_e,et,b){_e.exports=b(420)()?Object.keys:b(421)},function(_e,et,b){_e.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(_e,et,b){var tt=b(43),nt=Object.keys;_e.exports=function(rt){return nt(tt(rt)?Object(rt):rt)}},function(_e,et,b){var tt="razdwatrzy";_e.exports=function(){return typeof tt.contains!="function"?!1:tt.contains("dwa")===!0&&tt.contains("foo")===!1}},function(_e,et,b){var tt=String.prototype.indexOf;_e.exports=function(nt){return tt.call(this,nt,arguments[1])>-1}},function(_e,et,b){var tt=b(125),nt=b(200),rt=b(32),it=b(44),ot=b(203),st=Object.defineProperty,at;at=_e.exports=function(ct,ut){if(!(this instanceof at))throw new TypeError("Constructor requires 'new'");ot.call(this,ct),ut?nt.call(ut,"key+value")?ut="key+value":nt.call(ut,"key")?ut="key":ut="value":ut="value",st(this,"__kind__",rt("",ut))},tt&&tt(at,ot),delete at.prototype.constructor,at.prototype=Object.create(ot.prototype,{_resolve:rt(function(ct){return this.__kind__==="value"?this.__list__[ct]:this.__kind__==="key+value"?[ct,this.__list__[ct]]:ct})}),st(at.prototype,it.toStringTag,rt("c","Array Iterator"))},function(_e,et,b){var tt=b(91),nt={object:!0,symbol:!0};_e.exports=function(){var rt=tt.Symbol,it;if(typeof rt!="function")return!1;it=rt("test symbol");try{String(it)}catch{return!1}return!(!nt[typeof rt.iterator]||!nt[typeof rt.toPrimitive]||!nt[typeof rt.toStringTag])}},function(_e,et,b){_e.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},function(_e,et){var b=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};_e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return b()}try{return __global__||b()}finally{delete Object.prototype.__global__}}()},function(_e,et,b){var tt=b(32),nt=b(202),rt=b(91).Symbol,it=b(430),ot=b(431),st=b(432),at=Object.create,ct=Object.defineProperties,ut=Object.defineProperty,lt,dt,ft;if(typeof rt=="function")try{String(rt()),ft=!0}catch{}else rt=null;dt=function(Tt){if(this instanceof dt)throw new TypeError("Symbol is not a constructor");return lt(Tt)},_e.exports=lt=function St(Tt){var pt;if(this instanceof St)throw new TypeError("Symbol is not a constructor");return ft?rt(Tt):(pt=at(dt.prototype),Tt=Tt===void 0?"":String(Tt),ct(pt,{__description__:tt("",Tt),__name__:tt("",it(Tt))}))},ot(lt),st(lt),ct(dt.prototype,{constructor:tt(lt),toString:tt("",function(){return this.__name__})}),ct(lt.prototype,{toString:tt(function(){return"Symbol ("+nt(this).__description__+")"}),valueOf:tt(function(){return nt(this)})}),ut(lt.prototype,lt.toPrimitive,tt("",function(){var St=nt(this);return typeof St=="symbol"?St:St.toString()})),ut(lt.prototype,lt.toStringTag,tt("c","Symbol")),ut(dt.prototype,lt.toStringTag,tt("c",lt.prototype[lt.toStringTag])),ut(dt.prototype,lt.toPrimitive,tt("c",lt.prototype[lt.toPrimitive]))},function(_e,et,b){_e.exports=function(tt){return tt?typeof tt=="symbol"?!0:!tt.constructor||tt.constructor.name!=="Symbol"?!1:tt[tt.constructor.toStringTag]==="Symbol":!1}},function(_e,et,b){var tt=b(32),nt=Object.create,rt=Object.defineProperty,it=Object.prototype,ot=nt(null);_e.exports=function(st){for(var at=0,ct,ut;ot[st+(at||"")];)++at;return st+=at||"",ot[st]=!0,ct="@@"+st,rt(it,ct,tt.gs(null,function(lt){ut||(ut=!0,rt(this,ct,tt(lt)),ut=!1)})),ct}},function(_e,et,b){var tt=b(32),nt=b(91).Symbol;_e.exports=function(rt){return Object.defineProperties(rt,{hasInstance:tt("",nt&&nt.hasInstance||rt("hasInstance")),isConcatSpreadable:tt("",nt&&nt.isConcatSpreadable||rt("isConcatSpreadable")),iterator:tt("",nt&&nt.iterator||rt("iterator")),match:tt("",nt&&nt.match||rt("match")),replace:tt("",nt&&nt.replace||rt("replace")),search:tt("",nt&&nt.search||rt("search")),species:tt("",nt&&nt.species||rt("species")),split:tt("",nt&&nt.split||rt("split")),toPrimitive:tt("",nt&&nt.toPrimitive||rt("toPrimitive")),toStringTag:tt("",nt&&nt.toStringTag||rt("toStringTag")),unscopables:tt("",nt&&nt.unscopables||rt("unscopables"))})}},function(_e,et,b){var tt=b(32),nt=b(202),rt=Object.create(null);_e.exports=function(it){return Object.defineProperties(it,{for:tt(function(ot){return rt[ot]?rt[ot]:rt[ot]=it(String(ot))}),keyFor:tt(function(ot){var st;nt(ot);for(st in rt)if(rt[st]===ot)return st})})}},function(_e,et,b){var tt=b(31);_e.exports=function(){return tt(this).length=0,this}},function(_e,et,b){var tt=b(55),nt=b(435),rt=b(439),it=b(440),ot=b(199),st=b(450),at=Function.prototype.bind,ct=Object.defineProperty,ut=Object.prototype.hasOwnProperty,lt;lt=function(dt,ft,St){var Tt=nt(ft)&&rt(ft.value),pt;return pt=it(ft),delete pt.writable,delete pt.value,pt.get=function(){return!St.overwriteDefinition&&ut.call(this,dt)?Tt:(ft.value=at.call(Tt,St.resolveContext?St.resolveContext(this):this),ct(this,dt,ft),this[dt])},pt},_e.exports=function(dt){var ft=ot(arguments[1]);return tt(ft.resolveContext)&&rt(ft.resolveContext),st(dt,function(St,Tt){return lt(Tt,St,ft)})}},function(_e,et,b){var tt=b(204),nt=b(55);_e.exports=function(rt){return nt(rt)?rt:tt(rt,"Cannot use %v",arguments[1])}},function(_e,et,b){var tt=b(55),nt=b(126),rt=Object.prototype.toString;_e.exports=function(it){if(!tt(it))return null;if(nt(it)){var ot=it.toString;if(typeof ot!="function"||ot===rt)return null}try{return""+it}catch{return null}}},function(_e,et,b){var tt=b(438),nt=/[\n\r\u2028\u2029]/g;_e.exports=function(rt){var it=tt(rt);return it===null?"<Non-coercible to string value>":(it.length>100&&(it=it.slice(0,99)+""),it=it.replace(nt,function(ot){switch(ot){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),it)}},function(_e,et,b){_e.exports=function(tt){try{return tt.toString()}catch{try{return String(tt)}catch{return null}}}},function(_e,et,b){var tt=b(204),nt=b(198);_e.exports=function(rt){return nt(rt)?rt:tt(rt,"%v is not a plain function",arguments[1])}},function(_e,et,b){var tt=b(441),nt=b(127),rt=b(31);_e.exports=function(it){var ot=Object(rt(it)),st=arguments[1],at=Object(arguments[2]);if(ot!==it&&!st)return ot;var ct={};return st?tt(st,function(ut){(at.ensure||ut in it)&&(ct[ut]=it[ut])}):nt(ct,it),ct}},function(_e,et,b){_e.exports=b(442)()?Array.from:b(443)},function(_e,et,b){_e.exports=function(){var tt=Array.from,nt,rt;return typeof tt!="function"?!1:(nt=["raz","dwa"],rt=tt(nt),!!(rt&&rt!==nt&&rt[1]==="dwa"))}},function(_e,et,b){var tt=b(44).iterator,nt=b(89),rt=b(444),it=b(445),ot=b(68),st=b(31),at=b(43),ct=b(90),ut=Array.isArray,lt=Function.prototype.call,dt={configurable:!0,enumerable:!0,writable:!0,value:null},ft=Object.defineProperty;_e.exports=function(St){var Tt=arguments[1],pt=arguments[2],gt,yt,Et,It,Gt,Wt,At,kt,Vt,Nt;if(St=Object(st(St)),at(Tt)&&ot(Tt),!this||this===Array||!rt(this)){if(!Tt){if(nt(St))return Gt=St.length,Gt!==1?Array.apply(null,St):(It=new Array(1),It[0]=St[0],It);if(ut(St)){for(It=new Array(Gt=St.length),yt=0;yt<Gt;++yt)It[yt]=St[yt];return It}}It=[]}else gt=this;if(!ut(St)){if((Vt=St[tt])!==void 0){for(At=ot(Vt).call(St),gt&&(It=new gt),kt=At.next(),yt=0;!kt.done;)Nt=Tt?lt.call(Tt,pt,kt.value,yt):kt.value,gt?(dt.value=Nt,ft(It,yt,dt)):It[yt]=Nt,kt=At.next(),++yt;Gt=yt}else if(ct(St)){for(Gt=St.length,gt&&(It=new gt),yt=0,Et=0;yt<Gt;++yt)Nt=St[yt],yt+1<Gt&&(Wt=Nt.charCodeAt(0),Wt>=55296&&Wt<=56319&&(Nt+=St[++yt])),Nt=Tt?lt.call(Tt,pt,Nt,Et):Nt,gt?(dt.value=Nt,ft(It,Et,dt)):It[Et]=Nt,++Et;Gt=Et}}if(Gt===void 0)for(Gt=it(St.length),gt&&(It=new gt(Gt)),yt=0;yt<Gt;++yt)Nt=Tt?lt.call(Tt,pt,St[yt],yt):St[yt],gt?(dt.value=Nt,ft(It,yt,dt)):It[yt]=Nt;return gt&&(dt.value=null,It.length=Gt),It}},function(_e,et,b){var tt=Object.prototype.toString,nt=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);_e.exports=function(rt){return typeof rt=="function"&&nt(tt.call(rt))}},function(_e,et,b){var tt=b(446),nt=Math.max;_e.exports=function(rt){return nt(0,tt(rt))}},function(_e,et,b){var tt=b(447),nt=Math.abs,rt=Math.floor;_e.exports=function(it){return isNaN(it)?0:(it=Number(it),it===0||!isFinite(it)?it:tt(it)*rt(nt(it)))}},function(_e,et,b){_e.exports=b(448)()?Math.sign:b(449)},function(_e,et,b){_e.exports=function(){var tt=Math.sign;return typeof tt!="function"?!1:tt(10)===1&&tt(-20)===-1}},function(_e,et,b){_e.exports=function(tt){return tt=Number(tt),isNaN(tt)||tt===0?tt:tt>0?1:-1}},function(_e,et,b){var tt=b(68),nt=b(451),rt=Function.prototype.call;_e.exports=function(it,ot){var st={},at=arguments[2];return tt(ot),nt(it,function(ct,ut,lt,dt){st[ut]=rt.call(ot,at,ct,ut,lt,dt)}),st}},function(_e,et,b){_e.exports=b(452)("forEach")},function(_e,et,b){var tt=b(68),nt=b(31),rt=Function.prototype.bind,it=Function.prototype.call,ot=Object.keys,st=Object.prototype.propertyIsEnumerable;_e.exports=function(at,ct){return function(ut,lt){var dt,ft=arguments[2],St=arguments[3];return ut=Object(nt(ut)),tt(lt),dt=ot(ut),St&&dt.sort(typeof St=="function"?rt.call(St,ut):void 0),typeof at!="function"&&(at=dt[at]),it.call(at,dt,function(Tt,pt){return st.call(ut,Tt)?it.call(lt,ft,ut[Tt],Tt,ut,pt):ct})}}},function(_e,et,b){var tt=b(125),nt=b(32),rt=b(44),it=b(203),ot=Object.defineProperty,st;st=_e.exports=function(at){if(!(this instanceof st))throw new TypeError("Constructor requires 'new'");at=String(at),it.call(this,at),ot(this,"__length__",nt("",at.length))},tt&&tt(st,it),delete st.prototype.constructor,st.prototype=Object.create(it.prototype,{_next:nt(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:nt(function(at){var ct=this.__list__[at],ut;return this.__nextIndex__===this.__length__?ct:(ut=ct.charCodeAt(0),ut>=55296&&ut<=56319?ct+this.__list__[this.__nextIndex__++]:ct)})}),ot(st.prototype,rt.toStringTag,nt("c","String Iterator"))},function(_e,et,b){var tt=b(455);_e.exports=function(nt){if(!tt(nt))throw new TypeError(nt+" is not iterable");return nt}},function(_e,et,b){var tt=b(89),nt=b(43),rt=b(90),it=b(44).iterator,ot=Array.isArray;_e.exports=function(st){return nt(st)?ot(st)||rt(st)||tt(st)?!0:typeof st[it]=="function":!1}},function(_e,et,b){var tt=b(89),nt=b(68),rt=b(90),it=b(201),ot=Array.isArray,st=Function.prototype.call,at=Array.prototype.some;_e.exports=function(ct,ut){var lt,dt=arguments[2],ft,St,Tt,pt,gt,yt,Et;if(ot(ct)||tt(ct)?lt="array":rt(ct)?lt="string":ct=it(ct),nt(ut),St=function(){Tt=!0},lt==="array"){at.call(ct,function(It){return st.call(ut,dt,It,St),Tt});return}if(lt==="string"){for(gt=ct.length,pt=0;pt<gt&&(yt=ct[pt],pt+1<gt&&(Et=yt.charCodeAt(0),Et>=55296&&Et<=56319&&(yt+=ct[++pt])),st.call(ut,dt,yt,St),!Tt);++pt);return}for(ft=ct.next();!ft.done;){if(st.call(ut,dt,ft.value,St),Tt)return;ft=ct.next()}}},function(_e,et,b){_e.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},function(_e,et,b){var tt=b(92),nt=b(93),rt=b(130),it=b(33),ot=b(66),st=b(94),at=Math.min;function ct(ut,lt,dt){for(var ft=dt?rt:nt,St=ut[0].length,Tt=ut.length,pt=Tt,gt=Array(Tt),yt=1/0,Et=[];pt--;){var It=ut[pt];pt&&lt&&(It=it(It,ot(lt))),yt=at(It.length,yt),gt[pt]=!dt&&(lt||St>=120&&It.length>=120)?new tt(pt&&It):void 0}It=ut[0];var Gt=-1,Wt=gt[0];e:for(;++Gt<St&&Et.length<yt;){var At=It[Gt],kt=lt?lt(At):At;if(At=dt||At!==0?At:0,!(Wt?st(Wt,kt):ft(Et,kt,dt))){for(pt=Tt;--pt;){var Vt=gt[pt];if(!(Vt?st(Vt,kt):ft(ut[pt],kt,dt)))continue e}Wt&&Wt.push(kt),Et.push(At)}}return Et}_e.exports=ct},function(_e,et){var b="__lodash_hash_undefined__";function tt(nt){return this.__data__.set(nt,b),this}_e.exports=tt},function(_e,et){function b(tt){return this.__data__.has(tt)}_e.exports=b},function(_e,et,b){var tt=b(205),nt=b(462),rt=b(463);function it(ot,st,at){return st===st?rt(ot,st,at):tt(ot,nt,at)}_e.exports=it},function(_e,et){function b(tt){return tt!==tt}_e.exports=b},function(_e,et){function b(tt,nt,rt){for(var it=rt-1,ot=tt.length;++it<ot;)if(tt[it]===nt)return it;return-1}_e.exports=b},function(_e,et,b){var tt=b(131);function nt(rt){return tt(rt)?rt:[]}_e.exports=nt},function(_e,et,b){(function(tt){var nt=b(19),rt=b(207),it=b(466),ot=b(213),st=b(132);function at(ut){var lt=new it(ut),dt=rt(it.prototype.request,lt);return nt.extend(dt,it.prototype,lt),nt.extend(dt,lt),dt}var ct=at(st);ct.Axios=it,ct.create=function(lt){return at(ot(ct.defaults,lt))},ct.Cancel=b(214),ct.CancelToken=b(480),ct.isCancel=b(212),ct.all=function(lt){return tt.all(lt)},ct.spread=b(481),ct.isAxiosError=b(482),_e.exports=ct,_e.exports.default=ct}).call(this,b(0))},function(_e,et,b){(function(tt){var nt=b(19),rt=b(208),it=b(467),ot=b(468),st=b(213),at=b(478),ct=at.validators;function ut(lt){this.defaults=lt,this.interceptors={request:new it,response:new it}}ut.prototype.request=function(dt){typeof dt=="string"?(dt=arguments[1]||{},dt.url=arguments[0]):dt=dt||{},dt=st(this.defaults,dt),dt.method?dt.method=dt.method.toLowerCase():this.defaults.method?dt.method=this.defaults.method.toLowerCase():dt.method="get";var ft=dt.transitional;ft!==void 0&&at.assertOptions(ft,{silentJSONParsing:ct.transitional(ct.boolean,"1.0.0"),forcedJSONParsing:ct.transitional(ct.boolean,"1.0.0"),clarifyTimeoutError:ct.transitional(ct.boolean,"1.0.0")},!1);var St=[],Tt=!0;this.interceptors.request.forEach(function(At){typeof At.runWhen=="function"&&At.runWhen(dt)===!1||(Tt=Tt&&At.synchronous,St.unshift(At.fulfilled,At.rejected))});var pt=[];this.interceptors.response.forEach(function(At){pt.push(At.fulfilled,At.rejected)});var gt;if(!Tt){var yt=[ot,void 0];for(Array.prototype.unshift.apply(yt,St),yt=yt.concat(pt),gt=tt.resolve(dt);yt.length;)gt=gt.then(yt.shift(),yt.shift());return gt}for(var Et=dt;St.length;){var It=St.shift(),Gt=St.shift();try{Et=It(Et)}catch(Wt){Gt(Wt);break}}try{gt=ot(Et)}catch(Wt){return tt.reject(Wt)}for(;pt.length;)gt=gt.then(pt.shift(),pt.shift());return gt},ut.prototype.getUri=function(dt){return dt=st(this.defaults,dt),rt(dt.url,dt.params,dt.paramsSerializer).replace(/^\?/,"")},nt.forEach(["delete","get","head","options"],function(dt){ut.prototype[dt]=function(ft,St){return this.request(st(St||{},{method:dt,url:ft,data:(St||{}).data}))}}),nt.forEach(["post","put","patch"],function(dt){ut.prototype[dt]=function(ft,St,Tt){return this.request(st(Tt||{},{method:dt,url:ft,data:St}))}}),_e.exports=ut}).call(this,b(0))},function(_e,et,b){var tt=b(19);function nt(){this.handlers=[]}nt.prototype.use=function(it,ot,st){return this.handlers.push({fulfilled:it,rejected:ot,synchronous:st?st.synchronous:!1,runWhen:st?st.runWhen:null}),this.handlers.length-1},nt.prototype.eject=function(it){this.handlers[it]&&(this.handlers[it]=null)},nt.prototype.forEach=function(it){tt.forEach(this.handlers,function(st){st!==null&&it(st)})},_e.exports=nt},function(_e,et,b){(function(tt){var nt=b(19),rt=b(469),it=b(212),ot=b(132);function st(at){at.cancelToken&&at.cancelToken.throwIfRequested()}_e.exports=function(ct){st(ct),ct.headers=ct.headers||{},ct.data=rt.call(ct,ct.data,ct.headers,ct.transformRequest),ct.headers=nt.merge(ct.headers.common||{},ct.headers[ct.method]||{},ct.headers),nt.forEach(["delete","get","head","post","put","patch","common"],function(dt){delete ct.headers[dt]});var ut=ct.adapter||ot.adapter;return ut(ct).then(function(dt){return st(ct),dt.data=rt.call(ct,dt.data,dt.headers,ct.transformResponse),dt},function(dt){return it(dt)||(st(ct),dt&&dt.response&&(dt.response.data=rt.call(ct,dt.response.data,dt.response.headers,ct.transformResponse))),tt.reject(dt)})}}).call(this,b(0))},function(_e,et,b){var tt=b(19),nt=b(132);_e.exports=function(it,ot,st){var at=this||nt;return tt.forEach(st,function(ut){it=ut.call(at,it,ot)}),it}},function(_e,et,b){var tt=b(19);_e.exports=function(rt,it){tt.forEach(rt,function(st,at){at!==it&&at.toUpperCase()===it.toUpperCase()&&(rt[it]=st,delete rt[at])})}},function(_e,et,b){var tt=b(211);_e.exports=function(rt,it,ot){var st=ot.config.validateStatus;!ot.status||!st||st(ot.status)?rt(ot):it(tt("Request failed with status code "+ot.status,ot.config,null,ot.request,ot))}},function(_e,et,b){var tt=b(19);_e.exports=tt.isStandardBrowserEnv()?function(){return{write:function(it,ot,st,at,ct,ut){var lt=[];lt.push(it+"="+encodeURIComponent(ot)),tt.isNumber(st)&&lt.push("expires="+new Date(st).toGMTString()),tt.isString(at)&&lt.push("path="+at),tt.isString(ct)&&lt.push("domain="+ct),ut===!0&&lt.push("secure"),document.cookie=lt.join("; ")},read:function(it){var ot=document.cookie.match(new RegExp("(^|;\\s*)("+it+")=([^;]*)"));return ot?decodeURIComponent(ot[3]):null},remove:function(it){this.write(it,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(_e,et,b){var tt=b(474),nt=b(475);_e.exports=function(it,ot){return it&&!tt(ot)?nt(it,ot):ot}},function(_e,et,b){_e.exports=function(nt){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(nt)}},function(_e,et,b){_e.exports=function(nt,rt){return rt?nt.replace(/\/+$/,"")+"/"+rt.replace(/^\/+/,""):nt}},function(_e,et,b){var tt=b(19),nt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];_e.exports=function(it){var ot={},st,at,ct;return it&&tt.forEach(it.split(`
`),function(lt){if(ct=lt.indexOf(":"),st=tt.trim(lt.substr(0,ct)).toLowerCase(),at=tt.trim(lt.substr(ct+1)),st){if(ot[st]&&nt.indexOf(st)>=0)return;st==="set-cookie"?ot[st]=(ot[st]?ot[st]:[]).concat([at]):ot[st]=ot[st]?ot[st]+", "+at:at}}),ot}},function(_e,et,b){var tt=b(19);_e.exports=tt.isStandardBrowserEnv()?function(){var rt=/(msie|trident)/i.test(navigator.userAgent),it=document.createElement("a"),ot;function st(at){var ct=at;return rt&&(it.setAttribute("href",ct),ct=it.href),it.setAttribute("href",ct),{href:it.href,protocol:it.protocol?it.protocol.replace(/:$/,""):"",host:it.host,search:it.search?it.search.replace(/^\?/,""):"",hash:it.hash?it.hash.replace(/^#/,""):"",hostname:it.hostname,port:it.port,pathname:it.pathname.charAt(0)==="/"?it.pathname:"/"+it.pathname}}return ot=st(window.location.href),function(ct){var ut=tt.isString(ct)?st(ct):ct;return ut.protocol===ot.protocol&&ut.host===ot.host}}():function(){return function(){return!0}}()},function(_e,et,b){var tt=b(479),nt={};["object","boolean","number","function","string","symbol"].forEach(function(at,ct){nt[at]=function(lt){return typeof lt===at||"a"+(ct<1?"n ":" ")+at}});var rt={},it=tt.version.split(".");function ot(at,ct){for(var ut=ct?ct.split("."):it,lt=at.split("."),dt=0;dt<3;dt++){if(ut[dt]>lt[dt])return!0;if(ut[dt]<lt[dt])return!1}return!1}nt.transitional=function(ct,ut,lt){var dt=ut&&ot(ut);function ft(St,Tt){return"[Axios v"+tt.version+"] Transitional option '"+St+"'"+Tt+(lt?". "+lt:"")}return function(St,Tt,pt){if(ct===!1)throw new Error(ft(Tt," has been removed in "+ut));return dt&&!rt[Tt]&&(rt[Tt]=!0,console.warn(ft(Tt," has been deprecated since v"+ut+" and will be removed in the near future"))),ct?ct(St,Tt,pt):!0}};function st(at,ct,ut){if(typeof at!="object")throw new TypeError("options must be an object");for(var lt=Object.keys(at),dt=lt.length;dt-- >0;){var ft=lt[dt],St=ct[ft];if(St){var Tt=at[ft],pt=Tt===void 0||St(Tt,ft,at);if(pt!==!0)throw new TypeError("option "+ft+" must be "+pt);continue}if(ut!==!0)throw Error("Unknown option "+ft)}}_e.exports={isOlderVersion:ot,assertOptions:st,validators:nt}},function(_e){_e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(_e,et,b){(function(tt){var nt=b(214);function rt(it){if(typeof it!="function")throw new TypeError("executor must be a function.");var ot;this.promise=new tt(function(ct){ot=ct});var st=this;it(function(ct){st.reason||(st.reason=new nt(ct),ot(st.reason))})}rt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},rt.source=function(){var ot,st=new rt(function(ct){ot=ct});return{token:st,cancel:ot}},_e.exports=rt}).call(this,b(0))},function(_e,et,b){_e.exports=function(nt){return function(it){return nt.apply(null,it)}}},function(_e,et,b){_e.exports=function(nt){return typeof nt=="object"&&nt.isAxiosError===!0}},function(_e,et,b){var tt=b(215),nt=tt("pick",b(47));nt.placeholder=b(133),_e.exports=nt},function(_e,et,b){var tt=b(485),nt=b(133),rt=Array.prototype.push;function it(dt,ft){return ft==2?function(St,Tt){return dt.apply(void 0,arguments)}:function(St){return dt.apply(void 0,arguments)}}function ot(dt,ft){return ft==2?function(St,Tt){return dt(St,Tt)}:function(St){return dt(St)}}function st(dt){for(var ft=dt?dt.length:0,St=Array(ft);ft--;)St[ft]=dt[ft];return St}function at(dt){return function(ft){return dt({},ft)}}function ct(dt,ft){return function(){for(var St=arguments.length,Tt=St-1,pt=Array(St);St--;)pt[St]=arguments[St];var gt=pt[ft],yt=pt.slice(0,ft);return gt&&rt.apply(yt,gt),ft!=Tt&&rt.apply(yt,pt.slice(ft+1)),dt.apply(this,yt)}}function ut(dt,ft){return function(){var St=arguments.length;if(St){for(var Tt=Array(St);St--;)Tt[St]=arguments[St];var pt=Tt[0]=ft.apply(void 0,Tt);return dt.apply(void 0,Tt),pt}}}function lt(dt,ft,St,Tt){var pt=typeof ft=="function",gt=ft===Object(ft);if(gt&&(Tt=St,St=ft,ft=void 0),St==null)throw new TypeError;Tt||(Tt={});var yt={cap:"cap"in Tt?Tt.cap:!0,curry:"curry"in Tt?Tt.curry:!0,fixed:"fixed"in Tt?Tt.fixed:!0,immutable:"immutable"in Tt?Tt.immutable:!0,rearg:"rearg"in Tt?Tt.rearg:!0},Et=pt?St:nt,It="curry"in Tt&&Tt.curry,Gt="fixed"in Tt&&Tt.fixed,Wt="rearg"in Tt&&Tt.rearg,At=pt?St.runInContext():void 0,kt=pt?St:{ary:dt.ary,assign:dt.assign,clone:dt.clone,curry:dt.curry,forEach:dt.forEach,isArray:dt.isArray,isError:dt.isError,isFunction:dt.isFunction,isWeakMap:dt.isWeakMap,iteratee:dt.iteratee,keys:dt.keys,rearg:dt.rearg,toInteger:dt.toInteger,toPath:dt.toPath},Vt=kt.ary,Nt=kt.assign,tn=kt.clone,_t=kt.curry,Kt=kt.forEach,cn=kt.isArray,an=kt.isError,mn=kt.isFunction,on=kt.isWeakMap,yn=kt.keys,fn=kt.rearg,sn=kt.toInteger,un=kt.toPath,Ln=yn(tt.aryMethod),Xn={castArray:function(Er){return function(){var xr=arguments[0];return cn(xr)?Er(st(xr)):Er.apply(void 0,arguments)}},iteratee:function(Er){return function(){var xr=arguments[0],Un=arguments[1],Mn=Er(xr,Un),sr=Mn.length;return yt.cap&&typeof Un=="number"?(Un=Un>2?Un-2:1,sr&&sr<=Un?Mn:ot(Mn,Un)):Mn}},mixin:function(Er){return function(xr){var Un=this;if(!mn(Un))return Er(Un,Object(xr));var Mn=[];return Kt(yn(xr),function(sr){mn(xr[sr])&&Mn.push([sr,Un.prototype[sr]])}),Er(Un,Object(xr)),Kt(Mn,function(sr){var Ar=sr[1];mn(Ar)?Un.prototype[sr[0]]=Ar:delete Un.prototype[sr[0]]}),Un}},nthArg:function(Er){return function(xr){var Un=xr<0?1:sn(xr)+1;return _t(Er(xr),Un)}},rearg:function(Er){return function(xr,Un){var Mn=Un?Un.length:0;return _t(Er(xr,Un),Mn)}},runInContext:function(Er){return function(xr){return lt(dt,Er(xr),Tt)}}};function pn(Er,xr){if(yt.cap){var Un=tt.iterateeRearg[Er];if(Un)return vr(xr,Un);var Mn=!pt&&tt.iterateeAry[Er];if(Mn)return Sr(xr,Mn)}return xr}function Vn(Er,xr,Un){return It||yt.curry&&Un>1?_t(xr,Un):xr}function Tn(Er,xr,Un){if(yt.fixed&&(Gt||!tt.skipFixed[Er])){var Mn=tt.methodSpread[Er],sr=Mn&&Mn.start;return sr===void 0?Vt(xr,Un):ct(xr,sr)}return xr}function Jn(Er,xr,Un){return yt.rearg&&Un>1&&(Wt||!tt.skipRearg[Er])?fn(xr,tt.methodRearg[Er]||tt.aryRearg[Un]):xr}function lr(Er,xr){xr=un(xr);for(var Un=-1,Mn=xr.length,sr=Mn-1,Ar=tn(Object(Er)),so=Ar;so!=null&&++Un<Mn;){var Bn=xr[Un],gr=so[Bn];gr!=null&&!(mn(gr)||an(gr)||on(gr))&&(so[Bn]=tn(Un==sr?gr:Object(gr))),so=so[Bn]}return Ar}function tr(Er){return jr.runInContext.convert(Er)(void 0)}function Qn(Er,xr){var Un=tt.aliasToReal[Er]||Er,Mn=tt.remap[Un]||Un,sr=Tt;return function(Ar){var so=pt?At:kt,Bn=pt?At[Mn]:xr,gr=Nt(Nt({},sr),Ar);return lt(so,Un,Bn,gr)}}function Sr(Er,xr){return Fr(Er,function(Un){return typeof Un=="function"?ot(Un,xr):Un})}function vr(Er,xr){return Fr(Er,function(Un){var Mn=xr.length;return it(fn(ot(Un,Mn),xr),Mn)})}function Fr(Er,xr){return function(){var Un=arguments.length;if(!Un)return Er();for(var Mn=Array(Un);Un--;)Mn[Un]=arguments[Un];var sr=yt.rearg?0:Un-1;return Mn[sr]=xr(Mn[sr]),Er.apply(void 0,Mn)}}function kr(Er,xr,Un){var Mn,sr=tt.aliasToReal[Er]||Er,Ar=xr,so=Xn[sr];return so?Ar=so(xr):yt.immutable&&(tt.mutate.array[sr]?Ar=ut(xr,st):tt.mutate.object[sr]?Ar=ut(xr,at(xr)):tt.mutate.set[sr]&&(Ar=ut(xr,lr))),Kt(Ln,function(Bn){return Kt(tt.aryMethod[Bn],function(gr){if(sr==gr){var Or=tt.methodSpread[sr],ro=Or&&Or.afterRearg;return Mn=ro?Tn(sr,Jn(sr,Ar,Bn),Bn):Jn(sr,Tn(sr,Ar,Bn),Bn),Mn=pn(sr,Mn),Mn=Vn(sr,Mn,Bn),!1}}),!Mn}),Mn||(Mn=Ar),Mn==xr&&(Mn=It?_t(Mn,1):function(){return xr.apply(this,arguments)}),Mn.convert=Qn(sr,xr),Mn.placeholder=xr.placeholder=Un,Mn}if(!gt)return kr(ft,St,Et);var jr=St,xo=[];return Kt(Ln,function(Er){Kt(tt.aryMethod[Er],function(xr){var Un=jr[tt.remap[xr]||xr];Un&&xo.push([xr,kr(xr,Un,jr)])})}),Kt(yn(jr),function(Er){var xr=jr[Er];if(typeof xr=="function"){for(var Un=xo.length;Un--;)if(xo[Un][0]==Er)return;xr.convert=Qn(Er,xr),xo.push([Er,xr])}}),Kt(xo,function(Er){jr[Er[0]]=Er[1]}),jr.convert=tr,jr.placeholder=jr,Kt(yn(jr),function(Er){Kt(tt.realToAlias[Er]||[],function(xr){jr[xr]=jr[Er]})}),jr}_e.exports=lt},function(_e,et){et.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},et.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},et.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},et.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},et.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},et.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},et.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},et.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},et.realToAlias=function(){var b=Object.prototype.hasOwnProperty,tt=et.aliasToReal,nt={};for(var rt in tt){var it=tt[rt];b.call(nt,it)?nt[it].push(rt):nt[it]=[rt]}return nt}(),et.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},et.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},et.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(_e,et,b){_e.exports={ary:b(487),assign:b(176),clone:b(37),curry:b(505),forEach:b(113),isArray:b(12),isError:b(506),isFunction:b(16),isWeakMap:b(507),iteratee:b(508),keys:b(116),rearg:b(523),toInteger:b(96),toPath:b(526)}},function(_e,et,b){var tt=b(134),nt=128;function rt(it,ot,st){return ot=st?void 0:ot,ot=it&&ot==null?it.length:ot,tt(it,nt,void 0,void 0,void 0,void 0,ot)}_e.exports=rt},function(_e,et,b){var tt=b(95),nt=b(14),rt=1;function it(ot,st,at){var ct=st&rt,ut=tt(ot);function lt(){var dt=this&&this!==nt&&this instanceof lt?ut:ot;return dt.apply(ct?at:this,arguments)}return lt}_e.exports=it},function(_e,et,b){var tt=b(122),nt=b(95),rt=b(218),it=b(221),ot=b(227),st=b(137),at=b(14);function ct(ut,lt,dt){var ft=nt(ut);function St(){for(var Tt=arguments.length,pt=Array(Tt),gt=Tt,yt=ot(St);gt--;)pt[gt]=arguments[gt];var Et=Tt<3&&pt[0]!==yt&&pt[Tt-1]!==yt?[]:st(pt,yt);if(Tt-=Et.length,Tt<dt)return it(ut,lt,rt,St.placeholder,void 0,pt,Et,void 0,void 0,dt-Tt);var It=this&&this!==at&&this instanceof St?ft:ut;return tt(It,this,pt)}return St}_e.exports=ct},function(_e,et){function b(tt,nt){for(var rt=tt.length,it=0;rt--;)tt[rt]===nt&&++it;return it}_e.exports=b},function(_e,et,b){var tt=b(135),nt=b(222),rt=b(492),it=b(494);function ot(st){var at=rt(st),ct=it[at];if(typeof ct!="function"||!(at in tt.prototype))return!1;if(st===ct)return!0;var ut=nt(ct);return!!ut&&st===ut[0]}_e.exports=ot},function(_e,et,b){var tt=b(493),nt=Object.prototype,rt=nt.hasOwnProperty;function it(ot){for(var st=ot.name+"",at=tt[st],ct=rt.call(tt,st)?at.length:0;ct--;){var ut=at[ct],lt=ut.func;if(lt==null||lt==ot)return ut.name}return st}_e.exports=it},function(_e,et){var b={};_e.exports=b},function(_e,et,b){var tt=b(135),nt=b(224),rt=b(136),it=b(12),ot=b(17),st=b(495),at=Object.prototype,ct=at.hasOwnProperty;function ut(lt){if(ot(lt)&&!it(lt)&&!(lt instanceof tt)){if(lt instanceof nt)return lt;if(ct.call(lt,"__wrapped__"))return st(lt)}return new nt(lt)}ut.prototype=rt.prototype,ut.prototype.constructor=ut,_e.exports=ut},function(_e,et,b){var tt=b(135),nt=b(224),rt=b(54);function it(ot){if(ot instanceof tt)return ot.clone();var st=new nt(ot.__wrapped__,ot.__chain__);return st.__actions__=rt(ot.__actions__),st.__index__=ot.__index__,st.__values__=ot.__values__,st}_e.exports=it},function(_e,et){var b=/\{\n\/\* \[wrapped with (.+)\] \*/,tt=/,? & /;function nt(rt){var it=rt.match(b);return it?it[1].split(tt):[]}_e.exports=nt},function(_e,et){var b=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function tt(nt,rt){var it=rt.length;if(!it)return nt;var ot=it-1;return rt[ot]=(it>1?"& ":"")+rt[ot],rt=rt.join(it>2?", ":" "),nt.replace(b,`{
/* [wrapped with `+rt+`] */
`)}_e.exports=tt},function(_e,et,b){var tt=b(113),nt=b(93),rt=1,it=2,ot=8,st=16,at=32,ct=64,ut=128,lt=256,dt=512,ft=[["ary",ut],["bind",rt],["bindKey",it],["curry",ot],["curryRight",st],["flip",dt],["partial",at],["partialRight",ct],["rearg",lt]];function St(Tt,pt){return tt(ft,function(gt){var yt="_."+gt[0];pt&gt[1]&&!nt(Tt,yt)&&Tt.push(yt)}),Tt.sort()}_e.exports=St},function(_e,et,b){var tt=b(54),nt=b(65),rt=Math.min;function it(ot,st){for(var at=ot.length,ct=rt(st.length,at),ut=tt(ot);ct--;){var lt=st[ct];ot[ct]=nt(lt,at)?ut[lt]:void 0}return ot}_e.exports=it},function(_e,et,b){var tt=b(122),nt=b(95),rt=b(14),it=1;function ot(st,at,ct,ut){var lt=at&it,dt=nt(st);function ft(){for(var St=-1,Tt=arguments.length,pt=-1,gt=ut.length,yt=Array(gt+Tt),Et=this&&this!==rt&&this instanceof ft?dt:st;++pt<gt;)yt[pt]=ut[pt];for(;Tt--;)yt[pt++]=arguments[++St];return tt(Et,lt?ct:this,yt)}return ft}_e.exports=ot},function(_e,et,b){var tt=b(219),nt=b(220),rt=b(137),it="__lodash_placeholder__",ot=1,st=2,at=4,ct=8,ut=128,lt=256,dt=Math.min;function ft(St,Tt){var pt=St[1],gt=Tt[1],yt=pt|gt,Et=yt<(ot|st|ut),It=gt==ut&&pt==ct||gt==ut&&pt==lt&&St[7].length<=Tt[8]||gt==(ut|lt)&&Tt[7].length<=Tt[8]&&pt==ct;if(!(Et||It))return St;gt&ot&&(St[2]=Tt[2],yt|=pt&ot?0:at);var Gt=Tt[3];if(Gt){var Wt=St[3];St[3]=Wt?tt(Wt,Gt,Tt[4]):Gt,St[4]=Wt?rt(St[3],it):Tt[4]}return Gt=Tt[5],Gt&&(Wt=St[5],St[5]=Wt?nt(Wt,Gt,Tt[6]):Gt,St[6]=Wt?rt(St[5],it):Tt[6]),Gt=Tt[7],Gt&&(St[7]=Gt),gt&ut&&(St[8]=St[8]==null?Tt[8]:dt(St[8],Tt[8])),St[9]==null&&(St[9]=Tt[9]),St[0]=Tt[0],St[1]=yt,St}_e.exports=ft},function(_e,et,b){var tt=b(228),nt=1/0,rt=17976931348623157e292;function it(ot){if(!ot)return ot===0?ot:0;if(ot=tt(ot),ot===nt||ot===-nt){var st=ot<0?-1:1;return st*rt}return ot===ot?ot:0}_e.exports=it},function(_e,et,b){var tt=b(504),nt=/^\s+/;function rt(it){return it&&it.slice(0,tt(it)+1).replace(nt,"")}_e.exports=rt},function(_e,et){var b=/\s/;function tt(nt){for(var rt=nt.length;rt--&&b.test(nt.charAt(rt)););return rt}_e.exports=tt},function(_e,et,b){var tt=b(134),nt=8;function rt(it,ot,st){ot=st?void 0:ot;var at=tt(it,nt,void 0,void 0,void 0,void 0,void 0,ot);return at.placeholder=rt.placeholder,at}rt.placeholder={},_e.exports=rt},function(_e,et,b){var tt=b(29),nt=b(17),rt=b(138),it="[object DOMException]",ot="[object Error]";function st(at){if(!nt(at))return!1;var ct=tt(at);return ct==ot||ct==it||typeof at.message=="string"&&typeof at.name=="string"&&!rt(at)}_e.exports=st},function(_e,et,b){var tt=b(41),nt=b(17),rt="[object WeakMap]";function it(ot){return nt(ot)&&tt(ot)==rt}_e.exports=it},function(_e,et,b){var tt=b(77),nt=b(35),rt=1;function it(ot){return nt(typeof ot=="function"?ot:tt(ot,rt))}_e.exports=it},function(_e,et,b){var tt=b(510),nt=b(514),rt=b(234);function it(ot){var st=nt(ot);return st.length==1&&st[0][2]?rt(st[0][0],st[0][1]):function(at){return at===ot||tt(at,ot,st)}}_e.exports=it},function(_e,et,b){var tt=b(78),nt=b(229),rt=1,it=2;function ot(st,at,ct,ut){var lt=ct.length,dt=lt,ft=!ut;if(st==null)return!dt;for(st=Object(st);lt--;){var St=ct[lt];if(ft&&St[2]?St[1]!==st[St[0]]:!(St[0]in st))return!1}for(;++lt<dt;){St=ct[lt];var Tt=St[0],pt=st[Tt],gt=St[1];if(ft&&St[2]){if(pt===void 0&&!(Tt in st))return!1}else{var yt=new tt;if(ut)var Et=ut(pt,gt,Tt,st,at,yt);if(!(Et===void 0?nt(gt,pt,rt|it,ut,yt):Et))return!1}}return!0}_e.exports=ot},function(_e,et,b){var tt=b(78),nt=b(230),rt=b(512),it=b(513),ot=b(41),st=b(12),at=b(64),ct=b(85),ut=1,lt="[object Arguments]",dt="[object Array]",ft="[object Object]",St=Object.prototype,Tt=St.hasOwnProperty;function pt(gt,yt,Et,It,Gt,Wt){var At=st(gt),kt=st(yt),Vt=At?dt:ot(gt),Nt=kt?dt:ot(yt);Vt=Vt==lt?ft:Vt,Nt=Nt==lt?ft:Nt;var tn=Vt==ft,_t=Nt==ft,Kt=Vt==Nt;if(Kt&&at(gt)){if(!at(yt))return!1;At=!0,tn=!1}if(Kt&&!tn)return Wt||(Wt=new tt),At||ct(gt)?nt(gt,yt,Et,It,Gt,Wt):rt(gt,yt,Vt,Et,It,Gt,Wt);if(!(Et&ut)){var cn=tn&&Tt.call(gt,"__wrapped__"),an=_t&&Tt.call(yt,"__wrapped__");if(cn||an){var mn=cn?gt.value():gt,on=an?yt.value():yt;return Wt||(Wt=new tt),Gt(mn,on,Et,It,Wt)}}return Kt?(Wt||(Wt=new tt),it(gt,yt,Et,It,Gt,Wt)):!1}_e.exports=pt},function(_e,et,b){var tt=b(39),nt=b(187),rt=b(52),it=b(230),ot=b(232),st=b(97),at=1,ct=2,ut="[object Boolean]",lt="[object Date]",dt="[object Error]",ft="[object Map]",St="[object Number]",Tt="[object RegExp]",pt="[object Set]",gt="[object String]",yt="[object Symbol]",Et="[object ArrayBuffer]",It="[object DataView]",Gt=tt?tt.prototype:void 0,Wt=Gt?Gt.valueOf:void 0;function At(kt,Vt,Nt,tn,_t,Kt,cn){switch(Nt){case It:if(kt.byteLength!=Vt.byteLength||kt.byteOffset!=Vt.byteOffset)return!1;kt=kt.buffer,Vt=Vt.buffer;case Et:return!(kt.byteLength!=Vt.byteLength||!Kt(new nt(kt),new nt(Vt)));case ut:case lt:case St:return rt(+kt,+Vt);case dt:return kt.name==Vt.name&&kt.message==Vt.message;case Tt:case gt:return kt==Vt+"";case ft:var an=ot;case pt:var mn=tn&at;if(an||(an=st),kt.size!=Vt.size&&!mn)return!1;var on=cn.get(kt);if(on)return on==Vt;tn|=ct,cn.set(kt,Vt);var yn=it(an(kt),an(Vt),tn,_t,Kt,cn);return cn.delete(kt),yn;case yt:if(Wt)return Wt.call(kt)==Wt.call(Vt)}return!1}_e.exports=At},function(_e,et,b){var tt=b(182),nt=1,rt=Object.prototype,it=rt.hasOwnProperty;function ot(st,at,ct,ut,lt,dt){var ft=ct&nt,St=tt(st),Tt=St.length,pt=tt(at),gt=pt.length;if(Tt!=gt&&!ft)return!1;for(var yt=Tt;yt--;){var Et=St[yt];if(!(ft?Et in at:it.call(at,Et)))return!1}var It=dt.get(st),Gt=dt.get(at);if(It&&Gt)return It==at&&Gt==st;var Wt=!0;dt.set(st,at),dt.set(at,st);for(var At=ft;++yt<Tt;){Et=St[yt];var kt=st[Et],Vt=at[Et];if(ut)var Nt=ft?ut(Vt,kt,Et,at,st,dt):ut(kt,Vt,Et,st,at,dt);if(!(Nt===void 0?kt===Vt||lt(kt,Vt,ct,ut,dt):Nt)){Wt=!1;break}At||(At=Et=="constructor")}if(Wt&&!At){var tn=st.constructor,_t=at.constructor;tn!=_t&&"constructor"in st&&"constructor"in at&&!(typeof tn=="function"&&tn instanceof tn&&typeof _t=="function"&&_t instanceof _t)&&(Wt=!1)}return dt.delete(st),dt.delete(at),Wt}_e.exports=ot},function(_e,et,b){var tt=b(233),nt=b(30);function rt(it){for(var ot=nt(it),st=ot.length;st--;){var at=ot[st],ct=it[at];ot[st]=[at,ct,tt(ct)]}return ot}_e.exports=rt},function(_e,et,b){var tt=b(229),nt=b(57),rt=b(236),it=b(139),ot=b(233),st=b(234),at=b(46),ct=1,ut=2;function lt(dt,ft){return it(dt)&&ot(ft)?st(at(dt),ft):function(St){var Tt=nt(St,dt);return Tt===void 0&&Tt===ft?rt(St,dt):tt(ft,Tt,ct|ut)}}_e.exports=lt},function(_e,et,b){var tt=b(190),nt=500;function rt(it){var ot=tt(it,function(at){return st.size===nt&&st.clear(),at}),st=ot.cache;return ot}_e.exports=rt},function(_e,et,b){var tt=b(39),nt=b(33),rt=b(12),it=b(69),ot=1/0,st=tt?tt.prototype:void 0,at=st?st.toString:void 0;function ct(ut){if(typeof ut=="string")return ut;if(rt(ut))return nt(ut,ct)+"";if(it(ut))return at?at.call(ut):"";var lt=ut+"";return lt=="0"&&1/ut==-ot?"-0":lt}_e.exports=ct},function(_e,et){function b(tt,nt){return tt!=null&&nt in Object(tt)}_e.exports=b},function(_e,et,b){var tt=b(58),nt=b(63),rt=b(12),it=b(65),ot=b(114),st=b(46);function at(ct,ut,lt){ut=tt(ut,ct);for(var dt=-1,ft=ut.length,St=!1;++dt<ft;){var Tt=st(ut[dt]);if(!(St=ct!=null&&lt(ct,Tt)))break;ct=ct[Tt]}return St||++dt!=ft?St:(ft=ct==null?0:ct.length,!!ft&&ot(ft)&&it(Tt,ft)&&(rt(ct)||nt(ct)))}_e.exports=at},function(_e,et,b){var tt=b(521),nt=b(522),rt=b(139),it=b(46);function ot(st){return rt(st)?tt(it(st)):nt(st)}_e.exports=ot},function(_e,et){function b(tt){return function(nt){return nt==null?void 0:nt[tt]}}_e.exports=b},function(_e,et,b){var tt=b(98);function nt(rt){return function(it){return tt(it,rt)}}_e.exports=nt},function(_e,et,b){var tt=b(134),nt=b(140),rt=256,it=nt(function(ot,st){return tt(ot,rt,void 0,void 0,void 0,st)});_e.exports=it},function(_e,et,b){var tt=b(237);function nt(rt){var it=rt==null?0:rt.length;return it?tt(rt,1):[]}_e.exports=nt},function(_e,et,b){var tt=b(39),nt=b(63),rt=b(12),it=tt?tt.isConcatSpreadable:void 0;function ot(st){return rt(st)||nt(st)||!!(it&&st&&st[it])}_e.exports=ot},function(_e,et,b){var tt=b(33),nt=b(54),rt=b(12),it=b(69),ot=b(235),st=b(46),at=b(59);function ct(ut){return rt(ut)?tt(ut,st):it(ut)?[ut]:nt(ot(at(ut)))}_e.exports=ct},function(_e,et,b){var tt=b(528),nt=b(236);function rt(it,ot){return tt(it,ot,function(st,at){return nt(it,at)})}_e.exports=rt},function(_e,et,b){var tt=b(98),nt=b(529),rt=b(58);function it(ot,st,at){for(var ct=-1,ut=st.length,lt={};++ct<ut;){var dt=st[ct],ft=tt(ot,dt);at(ft,dt)&&nt(lt,rt(dt,ot),ft)}return lt}_e.exports=it},function(_e,et,b){var tt=b(83),nt=b(58),rt=b(65),it=b(11),ot=b(46);function st(at,ct,ut,lt){if(!it(at))return at;ct=nt(ct,at);for(var dt=-1,ft=ct.length,St=ft-1,Tt=at;Tt!=null&&++dt<ft;){var pt=ot(ct[dt]),gt=ut;if(pt==="__proto__"||pt==="constructor"||pt==="prototype")return at;if(dt!=St){var yt=Tt[pt];gt=lt?lt(yt,pt,Tt):void 0,gt===void 0&&(gt=it(yt)?yt:rt(ct[dt+1])?[]:{})}tt(Tt,pt,gt),Tt=Tt[pt]}return at}_e.exports=st},function(_e,et,b){var tt=b(215),nt=tt("mapKeys",b(531));nt.placeholder=b(133),_e.exports=nt},function(_e,et,b){var tt=b(62),nt=b(99),rt=b(35);function it(ot,st){var at={};return st=rt(st,3),nt(ot,function(ct,ut,lt){tt(at,st(ct,ut,lt),ct)}),at}_e.exports=it},function(_e,et){function b(tt){return function(nt,rt,it){for(var ot=-1,st=Object(nt),at=it(nt),ct=at.length;ct--;){var ut=at[tt?ct:++ot];if(rt(st[ut],ut,st)===!1)break}return nt}}_e.exports=b},function(_e,et,b){(function(tt){var nt;(function(rt){et&&et.nodeType,tt&&tt.nodeType;var it=typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal);it.global===it||it.window===it||it.self;var ot,st=2147483647,at=36,ct=1,ut=26,lt=38,dt=700,ft=72,St=128,Tt="-",pt=/^xn--/,gt=/[^\x20-\x7E]/,yt=/[\x2E\u3002\uFF0E\uFF61]/g,Et={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},It=at-ct,Gt=Math.floor,Wt=String.fromCharCode;function At(fn){throw new RangeError(Et[fn])}function kt(fn,sn){for(var un=fn.length,Ln=[];un--;)Ln[un]=sn(fn[un]);return Ln}function Vt(fn,sn){var un=fn.split("@"),Ln="";un.length>1&&(Ln=un[0]+"@",fn=un[1]),fn=fn.replace(yt,".");var Xn=fn.split("."),pn=kt(Xn,sn).join(".");return Ln+pn}function Nt(fn){for(var sn=[],un=0,Ln=fn.length,Xn,pn;un<Ln;)Xn=fn.charCodeAt(un++),Xn>=55296&&Xn<=56319&&un<Ln?(pn=fn.charCodeAt(un++),(pn&64512)==56320?sn.push(((Xn&1023)<<10)+(pn&1023)+65536):(sn.push(Xn),un--)):sn.push(Xn);return sn}function tn(fn){return kt(fn,function(sn){var un="";return sn>65535&&(sn-=65536,un+=Wt(sn>>>10&1023|55296),sn=56320|sn&1023),un+=Wt(sn),un}).join("")}function _t(fn){return fn-48<10?fn-22:fn-65<26?fn-65:fn-97<26?fn-97:at}function Kt(fn,sn){return fn+22+75*(fn<26)-((sn!=0)<<5)}function cn(fn,sn,un){var Ln=0;for(fn=un?Gt(fn/dt):fn>>1,fn+=Gt(fn/sn);fn>It*ut>>1;Ln+=at)fn=Gt(fn/It);return Gt(Ln+(It+1)*fn/(fn+lt))}function an(fn){var sn=[],un=fn.length,Ln,Xn=0,pn=St,Vn=ft,Tn,Jn,lr,tr,Qn,Sr,vr,Fr,kr;for(Tn=fn.lastIndexOf(Tt),Tn<0&&(Tn=0),Jn=0;Jn<Tn;++Jn)fn.charCodeAt(Jn)>=128&&At("not-basic"),sn.push(fn.charCodeAt(Jn));for(lr=Tn>0?Tn+1:0;lr<un;){for(tr=Xn,Qn=1,Sr=at;lr>=un&&At("invalid-input"),vr=_t(fn.charCodeAt(lr++)),(vr>=at||vr>Gt((st-Xn)/Qn))&&At("overflow"),Xn+=vr*Qn,Fr=Sr<=Vn?ct:Sr>=Vn+ut?ut:Sr-Vn,!(vr<Fr);Sr+=at)kr=at-Fr,Qn>Gt(st/kr)&&At("overflow"),Qn*=kr;Ln=sn.length+1,Vn=cn(Xn-tr,Ln,tr==0),Gt(Xn/Ln)>st-pn&&At("overflow"),pn+=Gt(Xn/Ln),Xn%=Ln,sn.splice(Xn++,0,pn)}return tn(sn)}function mn(fn){var sn,un,Ln,Xn,pn,Vn,Tn,Jn,lr,tr,Qn,Sr=[],vr,Fr,kr,jr;for(fn=Nt(fn),vr=fn.length,sn=St,un=0,pn=ft,Vn=0;Vn<vr;++Vn)Qn=fn[Vn],Qn<128&&Sr.push(Wt(Qn));for(Ln=Xn=Sr.length,Xn&&Sr.push(Tt);Ln<vr;){for(Tn=st,Vn=0;Vn<vr;++Vn)Qn=fn[Vn],Qn>=sn&&Qn<Tn&&(Tn=Qn);for(Fr=Ln+1,Tn-sn>Gt((st-un)/Fr)&&At("overflow"),un+=(Tn-sn)*Fr,sn=Tn,Vn=0;Vn<vr;++Vn)if(Qn=fn[Vn],Qn<sn&&++un>st&&At("overflow"),Qn==sn){for(Jn=un,lr=at;tr=lr<=pn?ct:lr>=pn+ut?ut:lr-pn,!(Jn<tr);lr+=at)jr=Jn-tr,kr=at-tr,Sr.push(Wt(Kt(tr+jr%kr,0))),Jn=Gt(jr/kr);Sr.push(Wt(Kt(Jn,0))),pn=cn(un,Fr,Ln==Xn),un=0,++Ln}++un,++sn}return Sr.join("")}function on(fn){return Vt(fn,function(sn){return pt.test(sn)?an(sn.slice(4).toLowerCase()):sn})}function yn(fn){return Vt(fn,function(sn){return gt.test(sn)?"xn--"+mn(sn):sn})}ot={version:"1.4.1",ucs2:{decode:Nt,encode:tn},decode:an,encode:mn,toASCII:yn,toUnicode:on},nt=function(){return ot}.call(et,b,et,tt),nt!==void 0&&(tt.exports=nt)})()}).call(this,b(84)(_e))},function(_e,et,b){_e.exports={isString:function(tt){return typeof tt=="string"},isObject:function(tt){return typeof tt=="object"&&tt!==null},isNull:function(tt){return tt===null},isNullOrUndefined:function(tt){return tt==null}}},function(_e,et,b){et.decode=et.parse=b(536),et.encode=et.stringify=b(537)},function(_e,et,b){function tt(rt,it){return Object.prototype.hasOwnProperty.call(rt,it)}_e.exports=function(rt,it,ot,st){it=it||"&",ot=ot||"=";var at={};if(typeof rt!="string"||rt.length===0)return at;var ct=/\+/g;rt=rt.split(it);var ut=1e3;st&&typeof st.maxKeys=="number"&&(ut=st.maxKeys);var lt=rt.length;ut>0&&lt>ut&&(lt=ut);for(var dt=0;dt<lt;++dt){var ft=rt[dt].replace(ct,"%20"),St=ft.indexOf(ot),Tt,pt,gt,yt;St>=0?(Tt=ft.substr(0,St),pt=ft.substr(St+1)):(Tt=ft,pt=""),gt=decodeURIComponent(Tt),yt=decodeURIComponent(pt),tt(at,gt)?nt(at[gt])?at[gt].push(yt):at[gt]=[at[gt],yt]:at[gt]=yt}return at};var nt=Array.isArray||function(rt){return Object.prototype.toString.call(rt)==="[object Array]"}},function(_e,et,b){var tt=function(ot){switch(typeof ot){case"string":return ot;case"boolean":return ot?"true":"false";case"number":return isFinite(ot)?ot:"";default:return""}};_e.exports=function(ot,st,at,ct){return st=st||"&",at=at||"=",ot===null&&(ot=void 0),typeof ot=="object"?rt(it(ot),function(ut){var lt=encodeURIComponent(tt(ut))+at;return nt(ot[ut])?rt(ot[ut],function(dt){return lt+encodeURIComponent(tt(dt))}).join(st):lt+encodeURIComponent(tt(ot[ut]))}).join(st):ct?encodeURIComponent(tt(ct))+at+encodeURIComponent(tt(ot)):""};var nt=Array.isArray||function(ot){return Object.prototype.toString.call(ot)==="[object Array]"};function rt(ot,st){if(ot.map)return ot.map(st);for(var at=[],ct=0;ct<ot.length;ct++)at.push(st(ot[ct],ct));return at}var it=Object.keys||function(ot){var st=[];for(var at in ot)Object.prototype.hasOwnProperty.call(ot,at)&&st.push(at);return st}},function(_e,et,b){var tt=function(){return this||typeof self=="object"&&self}()||Function("return this")(),nt=tt.regeneratorRuntime&&Object.getOwnPropertyNames(tt).indexOf("regeneratorRuntime")>=0,rt=nt&&tt.regeneratorRuntime;if(tt.regeneratorRuntime=void 0,_e.exports=b(539),nt)tt.regeneratorRuntime=rt;else try{delete tt.regeneratorRuntime}catch{tt.regeneratorRuntime=void 0}},function(_e,et,b){(function(tt){(function(nt){var rt=Object.prototype,it=rt.hasOwnProperty,ot,st=typeof Symbol=="function"?Symbol:{},at=st.iterator||"@@iterator",ct=st.asyncIterator||"@@asyncIterator",ut=st.toStringTag||"@@toStringTag",lt=typeof _e=="object",dt=nt.regeneratorRuntime;if(dt){lt&&(_e.exports=dt);return}dt=nt.regeneratorRuntime=lt?_e.exports:{};function ft(sn,un,Ln,Xn){var pn=un&&un.prototype instanceof It?un:It,Vn=Object.create(pn.prototype),Tn=new on(Xn||[]);return Vn._invoke=Kt(sn,Ln,Tn),Vn}dt.wrap=ft;function St(sn,un,Ln){try{return{type:"normal",arg:sn.call(un,Ln)}}catch(Xn){return{type:"throw",arg:Xn}}}var Tt="suspendedStart",pt="suspendedYield",gt="executing",yt="completed",Et={};function It(){}function Gt(){}function Wt(){}var At={};At[at]=function(){return this};var kt=Object.getPrototypeOf,Vt=kt&&kt(kt(yn([])));Vt&&Vt!==rt&&it.call(Vt,at)&&(At=Vt);var Nt=Wt.prototype=It.prototype=Object.create(At);Gt.prototype=Nt.constructor=Wt,Wt.constructor=Gt,Wt[ut]=Gt.displayName="GeneratorFunction";function tn(sn){["next","throw","return"].forEach(function(un){sn[un]=function(Ln){return this._invoke(un,Ln)}})}dt.isGeneratorFunction=function(sn){var un=typeof sn=="function"&&sn.constructor;return un?un===Gt||(un.displayName||un.name)==="GeneratorFunction":!1},dt.mark=function(sn){return Object.setPrototypeOf?Object.setPrototypeOf(sn,Wt):(sn.__proto__=Wt,ut in sn||(sn[ut]="GeneratorFunction")),sn.prototype=Object.create(Nt),sn},dt.awrap=function(sn){return{__await:sn}};function _t(sn){function un(pn,Vn,Tn,Jn){var lr=St(sn[pn],sn,Vn);if(lr.type==="throw")Jn(lr.arg);else{var tr=lr.arg,Qn=tr.value;return Qn&&typeof Qn=="object"&&it.call(Qn,"__await")?tt.resolve(Qn.__await).then(function(Sr){un("next",Sr,Tn,Jn)},function(Sr){un("throw",Sr,Tn,Jn)}):tt.resolve(Qn).then(function(Sr){tr.value=Sr,Tn(tr)},function(Sr){return un("throw",Sr,Tn,Jn)})}}var Ln;function Xn(pn,Vn){function Tn(){return new tt(function(Jn,lr){un(pn,Vn,Jn,lr)})}return Ln=Ln?Ln.then(Tn,Tn):Tn()}this._invoke=Xn}tn(_t.prototype),_t.prototype[ct]=function(){return this},dt.AsyncIterator=_t,dt.async=function(sn,un,Ln,Xn){var pn=new _t(ft(sn,un,Ln,Xn));return dt.isGeneratorFunction(un)?pn:pn.next().then(function(Vn){return Vn.done?Vn.value:pn.next()})};function Kt(sn,un,Ln){var Xn=Tt;return function(Vn,Tn){if(Xn===gt)throw new Error("Generator is already running");if(Xn===yt){if(Vn==="throw")throw Tn;return fn()}for(Ln.method=Vn,Ln.arg=Tn;;){var Jn=Ln.delegate;if(Jn){var lr=cn(Jn,Ln);if(lr){if(lr===Et)continue;return lr}}if(Ln.method==="next")Ln.sent=Ln._sent=Ln.arg;else if(Ln.method==="throw"){if(Xn===Tt)throw Xn=yt,Ln.arg;Ln.dispatchException(Ln.arg)}else Ln.method==="return"&&Ln.abrupt("return",Ln.arg);Xn=gt;var tr=St(sn,un,Ln);if(tr.type==="normal"){if(Xn=Ln.done?yt:pt,tr.arg===Et)continue;return{value:tr.arg,done:Ln.done}}else tr.type==="throw"&&(Xn=yt,Ln.method="throw",Ln.arg=tr.arg)}}}function cn(sn,un){var Ln=sn.iterator[un.method];if(Ln===ot){if(un.delegate=null,un.method==="throw"){if(sn.iterator.return&&(un.method="return",un.arg=ot,cn(sn,un),un.method==="throw"))return Et;un.method="throw",un.arg=new TypeError("The iterator does not provide a 'throw' method")}return Et}var Xn=St(Ln,sn.iterator,un.arg);if(Xn.type==="throw")return un.method="throw",un.arg=Xn.arg,un.delegate=null,Et;var pn=Xn.arg;if(!pn)return un.method="throw",un.arg=new TypeError("iterator result is not an object"),un.delegate=null,Et;if(pn.done)un[sn.resultName]=pn.value,un.next=sn.nextLoc,un.method!=="return"&&(un.method="next",un.arg=ot);else return pn;return un.delegate=null,Et}tn(Nt),Nt[ut]="Generator",Nt[at]=function(){return this},Nt.toString=function(){return"[object Generator]"};function an(sn){var un={tryLoc:sn[0]};1 in sn&&(un.catchLoc=sn[1]),2 in sn&&(un.finallyLoc=sn[2],un.afterLoc=sn[3]),this.tryEntries.push(un)}function mn(sn){var un=sn.completion||{};un.type="normal",delete un.arg,sn.completion=un}function on(sn){this.tryEntries=[{tryLoc:"root"}],sn.forEach(an,this),this.reset(!0)}dt.keys=function(sn){var un=[];for(var Ln in sn)un.push(Ln);return un.reverse(),function Xn(){for(;un.length;){var pn=un.pop();if(pn in sn)return Xn.value=pn,Xn.done=!1,Xn}return Xn.done=!0,Xn}};function yn(sn){if(sn){var un=sn[at];if(un)return un.call(sn);if(typeof sn.next=="function")return sn;if(!isNaN(sn.length)){var Ln=-1,Xn=function pn(){for(;++Ln<sn.length;)if(it.call(sn,Ln))return pn.value=sn[Ln],pn.done=!1,pn;return pn.value=ot,pn.done=!0,pn};return Xn.next=Xn}}return{next:fn}}dt.values=yn;function fn(){return{value:ot,done:!0}}on.prototype={constructor:on,reset:function(sn){if(this.prev=0,this.next=0,this.sent=this._sent=ot,this.done=!1,this.delegate=null,this.method="next",this.arg=ot,this.tryEntries.forEach(mn),!sn)for(var un in this)un.charAt(0)==="t"&&it.call(this,un)&&!isNaN(+un.slice(1))&&(this[un]=ot)},stop:function(){this.done=!0;var sn=this.tryEntries[0],un=sn.completion;if(un.type==="throw")throw un.arg;return this.rval},dispatchException:function(sn){if(this.done)throw sn;var un=this;function Ln(lr,tr){return Vn.type="throw",Vn.arg=sn,un.next=lr,tr&&(un.method="next",un.arg=ot),!!tr}for(var Xn=this.tryEntries.length-1;Xn>=0;--Xn){var pn=this.tryEntries[Xn],Vn=pn.completion;if(pn.tryLoc==="root")return Ln("end");if(pn.tryLoc<=this.prev){var Tn=it.call(pn,"catchLoc"),Jn=it.call(pn,"finallyLoc");if(Tn&&Jn){if(this.prev<pn.catchLoc)return Ln(pn.catchLoc,!0);if(this.prev<pn.finallyLoc)return Ln(pn.finallyLoc)}else if(Tn){if(this.prev<pn.catchLoc)return Ln(pn.catchLoc,!0)}else if(Jn){if(this.prev<pn.finallyLoc)return Ln(pn.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(sn,un){for(var Ln=this.tryEntries.length-1;Ln>=0;--Ln){var Xn=this.tryEntries[Ln];if(Xn.tryLoc<=this.prev&&it.call(Xn,"finallyLoc")&&this.prev<Xn.finallyLoc){var pn=Xn;break}}pn&&(sn==="break"||sn==="continue")&&pn.tryLoc<=un&&un<=pn.finallyLoc&&(pn=null);var Vn=pn?pn.completion:{};return Vn.type=sn,Vn.arg=un,pn?(this.method="next",this.next=pn.finallyLoc,Et):this.complete(Vn)},complete:function(sn,un){if(sn.type==="throw")throw sn.arg;return sn.type==="break"||sn.type==="continue"?this.next=sn.arg:sn.type==="return"?(this.rval=this.arg=sn.arg,this.method="return",this.next="end"):sn.type==="normal"&&un&&(this.next=un),Et},finish:function(sn){for(var un=this.tryEntries.length-1;un>=0;--un){var Ln=this.tryEntries[un];if(Ln.finallyLoc===sn)return this.complete(Ln.completion,Ln.afterLoc),mn(Ln),Et}},catch:function(sn){for(var un=this.tryEntries.length-1;un>=0;--un){var Ln=this.tryEntries[un];if(Ln.tryLoc===sn){var Xn=Ln.completion;if(Xn.type==="throw"){var pn=Xn.arg;mn(Ln)}return pn}}throw new Error("illegal catch attempt")},delegateYield:function(sn,un,Ln){return this.delegate={iterator:yn(sn),resultName:un,nextLoc:Ln},this.method==="next"&&(this.arg=ot),Et}}})(function(){return this||typeof self=="object"&&self}()||Function("return this")())}).call(this,b(0))},function(_e,et,b){var tt=b(241),nt=b(242),rt,it,ot=0,st=0;function at(ct,ut,lt){var dt=ut&&lt||0,ft=ut||[];ct=ct||{};var St=ct.node||rt,Tt=ct.clockseq!==void 0?ct.clockseq:it;if(St==null||Tt==null){var pt=tt();St==null&&(St=rt=[pt[0]|1,pt[1],pt[2],pt[3],pt[4],pt[5]]),Tt==null&&(Tt=it=(pt[6]<<8|pt[7])&16383)}var gt=ct.msecs!==void 0?ct.msecs:new Date().getTime(),yt=ct.nsecs!==void 0?ct.nsecs:st+1,Et=gt-ot+(yt-st)/1e4;if(Et<0&&ct.clockseq===void 0&&(Tt=Tt+1&16383),(Et<0||gt>ot)&&ct.nsecs===void 0&&(yt=0),yt>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ot=gt,st=yt,it=Tt,gt+=122192928e5;var It=((gt&268435455)*1e4+yt)%4294967296;ft[dt++]=It>>>24&255,ft[dt++]=It>>>16&255,ft[dt++]=It>>>8&255,ft[dt++]=It&255;var Gt=gt/4294967296*1e4&268435455;ft[dt++]=Gt>>>8&255,ft[dt++]=Gt&255,ft[dt++]=Gt>>>24&15|16,ft[dt++]=Gt>>>16&255,ft[dt++]=Tt>>>8|128,ft[dt++]=Tt&255;for(var Wt=0;Wt<6;++Wt)ft[dt+Wt]=St[Wt];return ut||nt(ft)}_e.exports=at},function(_e,et,b){var tt=b(241),nt=b(242);function rt(it,ot,st){var at=ot&&st||0;typeof it=="string"&&(ot=it==="binary"?new Array(16):null,it=null),it=it||{};var ct=it.random||(it.rng||tt)();if(ct[6]=ct[6]&15|64,ct[8]=ct[8]&63|128,ot)for(var ut=0;ut<16;++ut)ot[at+ut]=ct[ut];return ot||nt(ct)}_e.exports=rt},function(_e,et,b){const tt=b(9),nt=b(1)("analytics"),rt=b(543),it=b(15),ot=b(243),st=b(100),at=st.prependProxyToUrlIfNeeded,ct=b(101),ut=ct.getProxyUrl,lt=it(),dt=new rt;_e.exports=function(St){var Tt=this;let pt=St.loggingUrl,gt=St.queue,yt=gt===void 0?dt:gt,Et=St.ajax,It=Et===void 0?ot:Et;this.loggingUrl=pt,this.updateEndPoints=()=>{if(!this.proxyUrl){this.proxyUrl=ut();const kt=at(this.loggingUrl,this.proxyUrl);this.loggingUrl=kt}this.endPoint=`${this.loggingUrl}/logging/ClientEvent`,this.endPointQos=`${this.loggingUrl}/logging/ClientQos`},this.updateEndPoints();const Gt={},Wt=function(Vt,Nt,tn){Nt===void 0&&(Nt=()=>{}),yt.add(_t=>{nt.debug("sending analytics:",Tt.loggingUrl,Vt),It.post(tn?Tt.endPointQos:Tt.endPoint,{body:Vt,overrideMimeType:"text/plain",headers:{Accept:"text/plain","Content-Type":"application/json"}},Kt=>{Kt&&nt.debug("Failed to send ClientEvent, moving on to the next item."),Nt(Kt||void 0),_t()})})},At=(kt,Vt,Nt)=>{if(!Nt)return!1;const tn=[Nt,Vt,kt].join("_"),_t=100;return(Gt[tn]||0)>=_t};this.logError=function(kt,Vt,Nt,tn,_t){tn===void 0&&(tn=null),_t===void 0&&(_t={});const Kt=_t,cn=Kt.partnerId;if(At(kt,Vt,cn))return;const an=[cn,Vt,kt].join("_"),mn=tn;Gt[an]=typeof Gt[an]<"u"?Gt[an]+1:1,Tt.logEvent(tt(_t,{action:`${Vt}.${kt}`,payload:mn}),!1)},this.logEvent=function(kt,Vt,Nt,tn){Vt===void 0&&(Vt=!1),tn===void 0&&(tn=()=>{}),Tt.updateEndPoints();const _t=Object.assign({},kt,{clientInstanceId:lt});if(Nt&&!isNaN(Nt)&&Math.random()>Nt){nt.debug("skipping sending analytics due to throttle:",_t);return}nt.debug("queueing analytics:",Tt.loggingUrl,_t);let Kt;try{Kt=JSON.stringify(_t)}catch(cn){tn(cn);return}Wt(Kt,tn,Vt)},this.logQOS=kt=>this.logEvent(kt,!0)}},function(_e,et,b){let tt=function(){function nt(it){let ot=it===void 0?{}:it,st=ot.waitTime,at=st===void 0?50:st;this.queue=[],this.running=!1,this.waitTime=at}var rt=nt.prototype;return rt.add=function(ot){this.queue.push(ot),this.run()},rt.run=function(){if(this.running)return;this.running=!0;const ot=()=>{if(this.queue.length===0){this.running=!1;return}this.queue.shift()(()=>{setTimeout(ot,this.waitTime)})};ot()},nt}();_e.exports=tt},function(_e,et,b){const tt=b(11),nt={for:"htmlFor",class:"className"};_e.exports=function(rt){rt.prototype.attr=function(st,at){if(tt(st)){let ct;Object.keys(st).forEach(ut=>{ct=nt[ut]||ut,this.first.setAttribute(ct,st[ut])})}else{if(at===void 0)return this.first.getAttribute(nt[st]||st);this.first.setAttribute(nt[st]||st,at)}return this},rt.prototype.removeAttr=function(st){const at=nt[st]||st;return this.forEach(ct=>{ct.removeAttribute(at)}),this},rt.prototype.html=function(st){return st!==void 0&&(this.first.innerHTML=st),this.first.innerHTML},rt.prototype.center=function(st,at){let ct;return this.forEach(ut=>{ct=new rt(ut),st=st||parseInt(ct.width(),10),at=at||parseInt(ct.height(),10);const lt=`${-.5*st}px`,dt=`${-.5*at}px`;ct.css("margin",`${dt} 0 0 ${lt}`).addClass("OT_centered")}),this},rt._attachToOTHelpers.centerElement=function(st,at,ct){return new rt(st).center(at,ct)};const it=function(at){return at.offsetWidth>0?`${at.offsetWidth}px`:new rt(at).css("width")},ot=function(at){return at.offsetHeight>0?`${at.offsetHeight}px`:new rt(at).css("height")};rt.prototype.width=function(st){return st?(this.css("width",st),this):this.isDisplayNone()?this.makeVisibleAndYield(at=>it(at))[0]:it(this.get(0))},rt._attachToOTHelpers.width=function(st,at){const ct=new rt(st).width(at);return at?rt._attachToOTHelpers:ct},rt.prototype.height=function(st){return st?(this.css("height",st),this):this.isDisplayNone()?this.makeVisibleAndYield(at=>ot(at))[0]:ot(this.get(0))},rt._attachToOTHelpers.height=function(st,at){const ct=new rt(st).height(at);return at?rt._attachToOTHelpers:ct}}},function(_e,et,b){const tt=b(2),nt=(typeof window!==void 0?window:commonjsGlobal).getComputedStyle,rt={Firefox:"moz",Opera:"O",Chrome:"Webkit",Safari:"Webkit"};function it(){return rt[tt.name]}_e.exports=function(ot,st){const at={},ct={},ut=function(yt){if(ct[yt.ownerDocument]&&ct[yt.ownerDocument][yt.nodeName])return ct[yt.ownerDocument][yt.nodeName];ct[yt.ownerDocument]||(ct[yt.ownerDocument]={});let Et=yt.ownerDocument.createElement(yt.nodeName),It;return yt.ownerDocument.body.appendChild(Et),It=new ot(Et).css("display"),ct[yt.ownerDocument][yt.nodeName]=It,new ot(Et).remove(),Et=null,It},lt=function(yt){return nt(yt).getPropertyValue("display")==="none"},dt=function(yt,Et){if(Et in yt.style)return Et;const Gt=it()+Et[0].toUpperCase()+Et.slice(1);return Gt in yt.style?Gt:Et},ft=function(yt,Et){const It=yt.style;for(const Gt in Et)Et.hasOwnProperty(Gt)&&(It[dt(yt,Gt)]=Et[Gt])},St=function(yt,Et,It){yt.style[dt(yt,Et)]=It},Tt=function(yt,Et){const It=dt(yt,Et);let Wt=nt(yt).getPropertyValue(It);return Wt===""&&(Wt=yt.style[It]),Wt},pt=function(yt,Et,It){const Gt=new ot(yt),Wt={};let At,kt;for(At in Et)Et.hasOwnProperty(At)&&(Wt[At]=yt.style[At],Gt.css(At,Et[At]));kt=It(yt);for(At in Et)Et.hasOwnProperty(At)&&Gt.css(At,Wt[At]||"");return kt};ot.prototype.show=function(){return this.forEach(gt=>{const yt=gt.style.display;(yt===""||yt==="none")&&(gt.style.display=at[gt]||"",delete at[gt]),lt(gt)&&(at[gt]="none",gt.style.display=ut(gt))})},ot.prototype.hide=function(){return this.forEach(gt=>{gt.style.display!=="none"&&(at[gt]=gt.style.display,gt.style.display="none")})},ot.prototype.css=function(gt,yt){if(this.length!==0)return typeof gt!="string"?this.forEach(Et=>{ft(Et,gt)}):yt!==void 0?this.forEach(Et=>{St(Et,gt,yt)}):Tt(this.first,gt)},ot.prototype.makeVisibleAndYield=function(gt){const yt={display:"block",visibility:"hidden"},Et=[];return this.forEach(It=>{const Gt=st(It);Gt?Et.push(pt(Gt,yt,gt)):Et.push(void 0)}),Et}}},function(_e,et,b){(function(tt){const nt=b(547),rt=nt.isiPhone,it=nt.isiPad,ot=nt.isiOS,st=b(548),at=b(549),ct=pt=>{var gt,yt;return pt=pt||((gt=typeof window!==void 0?window:commonjsGlobal)==null?void 0:gt.navigator),((yt=pt)==null?void 0:yt.userAgent.toLowerCase().indexOf("electron"))>=0},ut=()=>{var pt,gt,yt;return typeof((pt=typeof window!==void 0?window:commonjsGlobal)==null||(gt=pt.process)==null||(yt=gt.versions)==null?void 0:yt.node)=="string"&&!ct()};let lt;const dt=()=>{lt={version:-1,name:"unknown"}},ft=()=>{lt.name="Node",lt.isNode=!0,lt.version=parseInt(tt.versions.node,10),lt.userAgent=`${lt.name} ${lt.version}`},St=pt=>{if(pt=pt||(typeof window!==void 0?window:commonjsGlobal).navigator,lt.userAgent=pt.userAgent.toLowerCase(),lt.name="unknown",lt.userAgent.indexOf("opera")>-1||lt.userAgent.indexOf("opr/")>-1)lt.name="Opera",lt.isOpera=!0,/opr\/([0-9]{1,}[.0-9]{0,})/.exec(lt.userAgent)!==null&&(lt.version=parseFloat(RegExp.$1));else if(lt.userAgent.indexOf("firefox")>-1)lt.name="Firefox",lt.isFirefox=!0,/firefox\/([0-9]{1,}[.0-9]{0,})/.exec(lt.userAgent)!==null&&(lt.version=parseFloat(RegExp.$1));else if(lt.userAgent.match(/edge?\/(\d+)(?:\.\d+)+$/)){lt.name="Edge",lt.isEdge=!0;const gt=RegExp.$1;lt.version=parseInt(gt,10)}else lt.userAgent.indexOf("chrome")>-1?(lt.name="Chrome",lt.isElectron=ct(pt),lt.isElectron?lt.electronVersion=at(pt.userAgent):lt.isChrome=!0,/chrome\/([0-9]{1,}[.0-9]{0,})/.exec(lt.userAgent)!==null&&(lt.version=parseFloat(RegExp.$1))):pt.vendor&&pt.vendor.toLowerCase().indexOf("apple")>-1?(lt.name="Safari",lt.isSafari=!0,lt.isiPhone=rt(pt.userAgent),lt.isiPad=it(pt.userAgent),lt.isiOS=ot(pt.userAgent),lt.isiOS&&(lt.iOSVersion=st(pt.userAgent)),(/version\/([0-9]{1,}[.0-9]{0,})/.exec(lt.userAgent)!==null||/fxios\/([0-9]{1,}[.0-9]{0,})/.exec(lt.userAgent)!==null||/crios\/([0-9]{1,}[.0-9]{0,})/.exec(lt.userAgent)!==null)&&(lt.version=parseFloat(RegExp.$1))):lt.userAgent.indexOf("applewebkit")>-1&&lt.userAgent.indexOf("version")===-1&&(lt.isIosWebView=!0);lt.isChromiumEdge=lt.name==="Edge"&&lt.version>=79,lt.isLegacyEdge=lt.name==="Edge"&&lt.version<79,lt.isLegacyElectron=lt.isElectron&&lt.electronVersion<7,lt.isLegacyChrome=lt.isChrome&&lt.version<87,lt.isChromium=!!(lt.isChrome||lt.isChromiumEdge||lt.isElectron||lt.isOpera),lt.isAndroid=lt.userAgent.indexOf("android")>-1,lt.userAgent=pt.userAgent,lt.protocol=location.protocol,lt.hostName=location.hostName,(lt.version===-1||lt.name==="unknown"||lt.isiOS&&!lt.iOSVersion)&&(lt.error=!0)},Tt=pt=>(dt(),ut()?ft():St(pt),lt);_e.exports={parse:Tt,isNode:ut}}).call(this,b(42))},function(_e,et,b){const tt=ot=>/iPhone/.test(ot),nt=ot=>{try{return ot.includes("Mac")&&"ontouchend"in document}catch{return!1}},rt=ot=>/iPad/.test(ot)||nt(ot),it=ot=>tt(ot)||rt(ot);_e.exports={isiPhone:tt,isiPad:rt,isiOS:it}},function(_e,et,b){_e.exports=function(nt){const rt=nt.match(/OS (\d+_\d+).* like Mac/);if(!(rt===null||!rt[1]))return parseFloat(rt[1].replace("_","."))}},function(_e,et,b){const tt=/(Electron)\/([0-9]{1,}[.0-9]{0,})/;_e.exports=nt=>{const rt=nt.match(tt);return rt&&parseFloat(rt[2])}},function(_e,et,b){const tt=b(551);function nt(st,at){return at?tt()?st.classList.contains(at):st.className.indexOf(at)>-1:!1}function rt(st,at){if(!at||at.length===0||st.nodeType!==1)return;const ct=at.length;let ut=0;if(tt()){for(;ut<ct;++ut)st.classList.toggle(at[ut]);return}let lt=` ${st.className} `.replace(/[\s+]/," ");for(;ut<ct;++ut)nt(st,at[ut])?lt=lt.replace(` ${at[ut]} `," "):lt+=`${at[ut]} `;st.className=lt.trim()}function it(st,at){if(!at||at.length===0||st.nodeType!==1)return;const ct=at.length;let ut=0;if(tt()){for(;ut<ct;++ut)st.classList.add(at[ut]);return}if(!st.className&&at.length===1)st.className=at.join(" ");else{let lt=` ${st.className} `;for(;ut<ct;++ut)~lt.indexOf(` ${at[ut]} `)||(lt+=`${at[ut]} `);st.className=lt.trim()}}function ot(st,at){if(!at||at.length===0||st.nodeType!==1)return;const ct=at.length;let ut=0;if(tt()){for(;ut<ct;++ut)st.classList.remove(at[ut]);return}let lt=` ${st.className} `.replace(/[\s+]/," ");for(;ut<ct;++ut)lt=lt.replace(` ${at[ut]} `," ");st.className=lt.trim()}_e.exports=function(st){st.prototype.addClass=function(at){if(at){const ct=at.trim().split(/\s+/);this.forEach(ut=>{it(ut,ct)})}return this},st.prototype.removeClass=function(at){if(at){const ct=at.trim().split(/\s+/);this.forEach(ut=>{ot(ut,ct)})}return this},st.prototype.toggleClass=function(at){if(at){const ct=at.trim().split(/\s+/);this.forEach(ut=>{rt(ut,ct)})}return this},st.prototype.hasClass=function(at){return this.some(ct=>nt(ct,at))}}},function(_e,et,b){_e.exports=()=>typeof document<"u"&&"classList"in document.createElement("a")},function(_e,et,b){const tt=b(553);_e.exports=function(nt){let rt=0,it=0;const ot=function(ut,lt,dt){const ft={},St=function(gt){switch(gt){case"width":return new nt(ut).width();case"height":return new nt(ut).height();default:return new nt(ut).css(gt)}};lt.forEach(pt=>{ft[pt]=St(pt)});const Tt=new(typeof window!==void 0?window:commonjsGlobal).MutationObserver(pt=>{const gt={};pt.forEach(yt=>{if(yt.attributeName!=="style")return;const Et=new nt(ut).isDisplayNone();lt.forEach(It=>{if(Et&&(It==="width"||It==="height"))return;const Gt=St(It);Gt!==ft[It]&&(gt[It]=[ft[It],Gt],ft[It]=Gt)})}),tt(gt)||setTimeout(()=>{dt.call(null,gt)})});return Tt.observe(ut,{attributes:!0,attributeFilter:["style"],childList:!1,characterData:!1,subtree:!1}),Tt},st=function(ut,lt){const dt=new(typeof window!==void 0?window:commonjsGlobal).MutationObserver(St=>{let Tt=[];St.forEach(pt=>{pt.removedNodes.length&&(Tt=Tt.concat(Array.prototype.slice.call(pt.removedNodes)))}),Tt.length&&setTimeout(()=>{lt(new nt(Tt))})});dt.observe(ut,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),it++;const ft=dt.disconnect;return dt.disconnect=function(){ft.apply(dt,arguments),it--},dt},at=function(ut,lt){let dt={width:0,height:0};const ft=setInterval(()=>{const St=ut.getBoundingClientRect();(dt.width!==St.width||dt.height!==St.height)&&(lt(St,dt),dt={width:St.width,height:St.height})},1e3/5);return rt++,{disconnect(){clearInterval(ft),rt--}}};nt.prototype.observeStyleChanges=function(ct,ut){const lt=[];return this.forEach(dt=>{lt.push(ot(dt,ct,ut))}),lt},nt.prototype.observeNodeOrChildNodeRemoval=function(ct){const ut=[];return this.forEach(lt=>{ut.push(st(lt,ct))}),ut},nt.prototype.observeSize=function(ct){const ut=[];return this.forEach(lt=>{ut.push(at(lt,ct))}),ut},nt._attachToOTHelpers.observeStyleChanges=function(ct,ut,lt){return new nt(ct).observeStyleChanges(ut,lt)[0]},nt._attachToOTHelpers.observeNodeOrChildNodeRemoval=function(ct,ut){return new nt(ct).observeNodeOrChildNodeRemoval(ut)[0]},nt.__testOnly||(nt.__testOnly={}),nt.__testOnly.sizeObserverCount=function(){return rt},nt.__testOnly.nodeRemovalObserverCount=function(){return it}}},function(_e,et,b){var tt=b(116),nt=b(41),rt=b(63),it=b(12),ot=b(25),st=b(64),at=b(67),ct=b(85),ut="[object Map]",lt="[object Set]",dt=Object.prototype,ft=dt.hasOwnProperty;function St(Tt){if(Tt==null)return!0;if(ot(Tt)&&(it(Tt)||typeof Tt=="string"||typeof Tt.splice=="function"||st(Tt)||ct(Tt)||rt(Tt)))return!Tt.length;var pt=nt(Tt);if(pt==ut||pt==lt)return!Tt.size;if(at(Tt))return!tt(Tt).length;for(var gt in Tt)if(ft.call(Tt,gt))return!1;return!0}_e.exports=St},function(_e,et,b){_e.exports={1004:"Authentication error",1005:"Invalid Session ID",1006:"Connect Failed",1007:"Connect Rejected",1008:"Connect Time-out",1009:"Security Error",1010:"Not Connected",1011:"Invalid Parameter",1012:"Peer-to-peer Stream Play Failed",1013:"Connection Failed",1014:"API Response Failure",1015:"PeerConnection not connected, cannot call this method",1021:"Request Timeout",1026:"Terms of Service Violation: Export Compliance",1027:"Connection Limit Exceeded",1040:"Set Video Source Failure",1041:"Invalid Video Source",1500:"Unable to Publish",1501:"Unable to Subscribe",1502:"Unsupported Video Codec",1503:"No TURN server found",1520:"Unable to Force Disconnect",1530:"Unable to Force Unpublish",1540:"Unable to Force Mute",1553:"Publisher ICEWorkflow failed",1554:"Subscriber ICEWorkflow failed",1600:"createOffer, createAnswer, setLocalDescription, setRemoteDescription",1605:"Stream Limit Exceeded",2e3:"Internal Error",2001:"Unexpected Server Response",2021:"Proxy URL Timing Error",2022:"Proxy URL Already Set Error",2031:"getRtcStatsReport is not supported in this browser",4e3:"WebSocket Connection Failed",4001:"WebSocket Network Disconnected",5001:"Unable to access media engine"}},function(_e,et,b){const tt=b(16);_e.exports=function(rt,it,ot,st,at){let ct,ut=ot;rt.currentState=ot;const lt=function(ft){if(ut!==ft){if(it.indexOf(ft)===-1){at&&tt(at)&&at("invalidState",ft);return}rt.previousState=ut,ct=ut,rt.currentState=ft,ut=ft,st&&tt(st)&&st(ft,ct)}};return rt.is=function(){return Array.prototype.indexOf.call(arguments,ut)!==-1},rt.isNot=function(){return Array.prototype.indexOf.call(arguments,ut)===-1},lt}},function(_e,et,b){const tt=b(246),nt={};_e.exports=nt,nt.isElementNode=function(rt){return rt&&typeof rt=="object"&&rt.nodeType===1},nt.createElement=function(rt,it,ot,st){const at=(st||document).createElement(rt);it=it||{},Object.keys(it).forEach(ut=>{if(typeof it[ut]=="object"){at[ut]||(at[ut]={});const lt=it[ut];Object.keys(lt).forEach(dt=>{at[ut][dt]=lt[dt]})}else ut==="className"?at.className=it[ut]:at.setAttribute(ut,it[ut])});const ct=function(lt){typeof lt=="string"?at.innerHTML+=lt:at.appendChild(lt)};return Array.isArray(ot)?ot.forEach(ct):ot&&ct(ot),at},tt(nt)},function(_e,et,b){const tt=b(558);_e.exports=(nt,rt)=>{if(typeof nt=="string"&&typeof rt=="string"){const it=tt(nt),ot=rt.match(/(\w+:\/\/)(.*)/),st=ot[1],at=ot[2];return`${st}${it}/${at}`}return rt}},function(_e,et,b){_e.exports=tt=>tt.replace(/\/+$/,"").replace(/^.*:\/+/,"")},function(_e,et,b){const tt=b(560);_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt.isSessionProxied||b(561),it=nt,ot=it.sessionId;rt(ot)&&tt.forEach(st=>{st in nt&&(nt[st]="")})}},function(_e,et,b){_e.exports=["audioLocalAddress","audioRemoteAddress","videoLocalAddress","videoRemoteAddress"]},function(_e,et,b){const nt=b(21).sessions;_e.exports=rt=>{const it=nt.get(rt);return it?!!it._.getProxyUrl():!1}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it={architecture:"event_ua_arch",bitness:"event_ua_bitness",model:"event_ua_model",platformVersion:"event_ua_platform_version"},ot=function(){var st=(0,rt.default)(nt.default.mark(function at(ct){var ut,lt;return nt.default.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(ut={},!(ct!=null&&ct.getHighEntropyValues)){ft.next=6;break}return ft.next=4,ct.getHighEntropyValues(Object.keys(it));case 4:lt=ft.sent,lt&&Object.entries(it).forEach(St=>{let Tt=St[0],pt=St[1];lt[Tt]!==void 0&&(ut[pt]=lt[Tt])});case 6:return ft.abrupt("return",ut);case 7:case"end":return ft.stop()}},at)}));return function(ct){return st.apply(this,arguments)}}();_e.exports=ot},function(_e,et,b){const tt=["buildHash","minimumVersion","debug",["websiteURL","websiteUrl"],["cdnURL","cdnUrl"],["loggingURL","loggingUrl"],["apiURL","apiUrl"],["supportSSL",!0],["cdnURLSSL","cdnUrl"],["loggingURLSSL","loggingUrl"],["apiURLSSL","apiUrl"],["assetURL","assetUrl"]];_e.exports=tt},function(_e,et,b){const tt=["apiUrl","apiURL","apiURLSSL"];_e.exports=tt},function(_e,et,b){_e.exports=function(){const nt=(typeof window!==void 0?window:commonjsGlobal).OT,rt=(typeof window!==void 0?window:commonjsGlobal).TB;return()=>{const it=(typeof window!==void 0?window:commonjsGlobal).OT;return(typeof window!==void 0?window:commonjsGlobal).OT=nt,(typeof window!==void 0?window:commonjsGlobal).TB=rt,it}}},function(_e,et,b){const tt=nt=>{const rt={};return Object.getOwnPropertyNames(nt).forEach(it=>{rt[it]=Object.getOwnPropertyDescriptor(nt,it)}),rt};_e.exports=function(rt){function it(){for(var ot=arguments.length,st=new Array(ot),at=0;at<ot;at++)st[at]=arguments[at];const ct=new rt(...st);return Object.setPrototypeOf(ct,it.prototype),ct}return it.prototype=Object.create(rt.prototype),Object.defineProperties(it.prototype,tt(rt.prototype)),Object.keys(rt).forEach(ot=>{it[ot]=rt[ot]}),it}},function(_e,et,b){var tt=b(27);_e.exports=function(nt,rt){var it=nt&&nt.window,ot={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var st in rt)hasOwnProperty.call(rt,st)&&(ot[st]=rt[st]);var at=tt.log,ct=tt.detectBrowser(it),ut=b(568)||null,lt=b(570)||null,dt=b(574)||null,ft=b(576)||null,St=b(577)||null,Tt={browserDetails:ct,commonShim:St,extractVersion:tt.extractVersion,disableLog:tt.disableLog,disableWarnings:tt.disableWarnings};switch(ct.browser){case"chrome":if(!ut||!ut.shimPeerConnection||!ot.shimChrome)return at("Chrome shim is not included in this adapter release."),Tt;at("adapter.js shimming chrome."),Tt.browserShim=ut,St.shimCreateObjectURL(it),ut.shimGetUserMedia(it),ut.shimMediaStream(it),ut.shimSourceObject(it),ut.shimPeerConnection(it),ut.shimOnTrack(it),ut.shimAddTrackRemoveTrack(it),ut.shimGetSendersWithDtmf(it),ut.shimSenderReceiverGetStats(it),ut.fixNegotiationNeeded(it),St.shimRTCIceCandidate(it),St.shimMaxMessageSize(it),St.shimSendThrowTypeError(it);break;case"firefox":if(!dt||!dt.shimPeerConnection||!ot.shimFirefox)return at("Firefox shim is not included in this adapter release."),Tt;at("adapter.js shimming firefox."),Tt.browserShim=dt,St.shimCreateObjectURL(it),dt.shimGetUserMedia(it),dt.shimSourceObject(it),dt.shimPeerConnection(it),dt.shimOnTrack(it),dt.shimRemoveStream(it),dt.shimSenderGetStats(it),dt.shimReceiverGetStats(it),dt.shimRTCDataChannel(it),St.shimRTCIceCandidate(it),St.shimMaxMessageSize(it),St.shimSendThrowTypeError(it);break;case"edge":if(!lt||!lt.shimPeerConnection||!ot.shimEdge)return at("MS edge shim is not included in this adapter release."),Tt;at("adapter.js shimming edge."),Tt.browserShim=lt,St.shimCreateObjectURL(it),lt.shimGetUserMedia(it),lt.shimPeerConnection(it),lt.shimReplaceTrack(it),lt.shimGetDisplayMedia(it),St.shimMaxMessageSize(it),St.shimSendThrowTypeError(it);break;case"safari":if(!ft||!ot.shimSafari)return at("Safari shim is not included in this adapter release."),Tt;at("adapter.js shimming safari."),Tt.browserShim=ft,St.shimCreateObjectURL(it),ft.shimRTCIceServerUrls(it),ft.shimCreateOfferLegacy(it),ft.shimCallbacksAPI(it),ft.shimLocalStreamsAPI(it),ft.shimRemoteStreamsAPI(it),ft.shimTrackEventTransceiver(it),ft.shimGetUserMedia(it),St.shimRTCIceCandidate(it),St.shimMaxMessageSize(it),St.shimSendThrowTypeError(it);break;default:at("Unsupported browser!");break}return Tt}},function(_e,et,b){(function(tt){var nt=b(27),rt=nt.log;function it(st,at,ct){!at||ct.has(at.id)||(ct.set(at.id,at),Object.keys(at).forEach(function(ut){ut.endsWith("Id")?it(st,st.get(at[ut]),ct):ut.endsWith("Ids")&&at[ut].forEach(function(lt){it(st,st.get(lt),ct)})}))}function ot(st,at,ct){var ut=ct?"outbound-rtp":"inbound-rtp",lt=new Map;if(at===null)return lt;var dt=[];return st.forEach(function(ft){ft.type==="track"&&ft.trackIdentifier===at.id&&dt.push(ft)}),dt.forEach(function(ft){st.forEach(function(St){St.type===ut&&St.trackId===ft.id&&it(st,St,lt)})}),lt}_e.exports={shimGetUserMedia:b(569),shimMediaStream:function(st){st.MediaStream=st.MediaStream||st.webkitMediaStream},shimOnTrack:function(st){if(typeof st=="object"&&st.RTCPeerConnection&&!("ontrack"in st.RTCPeerConnection.prototype)){Object.defineProperty(st.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(ct){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=ct)},enumerable:!0,configurable:!0});var at=st.RTCPeerConnection.prototype.setRemoteDescription;st.RTCPeerConnection.prototype.setRemoteDescription=function(){var ct=this;return ct._ontrackpoly||(ct._ontrackpoly=function(ut){ut.stream.addEventListener("addtrack",function(lt){var dt;st.RTCPeerConnection.prototype.getReceivers?dt=ct.getReceivers().find(function(St){return St.track&&St.track.id===lt.track.id}):dt={track:lt.track};var ft=new Event("track");ft.track=lt.track,ft.receiver=dt,ft.transceiver={receiver:dt},ft.streams=[ut.stream],ct.dispatchEvent(ft)}),ut.stream.getTracks().forEach(function(lt){var dt;st.RTCPeerConnection.prototype.getReceivers?dt=ct.getReceivers().find(function(St){return St.track&&St.track.id===lt.id}):dt={track:lt};var ft=new Event("track");ft.track=lt,ft.receiver=dt,ft.transceiver={receiver:dt},ft.streams=[ut.stream],ct.dispatchEvent(ft)})},ct.addEventListener("addstream",ct._ontrackpoly)),at.apply(ct,arguments)}}else nt.wrapPeerConnectionEvent(st,"track",function(ct){return ct.transceiver||Object.defineProperty(ct,"transceiver",{value:{receiver:ct.receiver}}),ct})},shimGetSendersWithDtmf:function(st){if(typeof st=="object"&&st.RTCPeerConnection&&!("getSenders"in st.RTCPeerConnection.prototype)&&"createDTMFSender"in st.RTCPeerConnection.prototype){var at=function(St,Tt){return{track:Tt,get dtmf(){return this._dtmf===void 0&&(Tt.kind==="audio"?this._dtmf=St.createDTMFSender(Tt):this._dtmf=null),this._dtmf},_pc:St}};if(!st.RTCPeerConnection.prototype.getSenders){st.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var ct=st.RTCPeerConnection.prototype.addTrack;st.RTCPeerConnection.prototype.addTrack=function(St,Tt){var pt=this,gt=ct.apply(pt,arguments);return gt||(gt=at(pt,St),pt._senders.push(gt)),gt};var ut=st.RTCPeerConnection.prototype.removeTrack;st.RTCPeerConnection.prototype.removeTrack=function(St){var Tt=this;ut.apply(Tt,arguments);var pt=Tt._senders.indexOf(St);pt!==-1&&Tt._senders.splice(pt,1)}}var lt=st.RTCPeerConnection.prototype.addStream;st.RTCPeerConnection.prototype.addStream=function(St){var Tt=this;Tt._senders=Tt._senders||[],lt.apply(Tt,[St]),St.getTracks().forEach(function(pt){Tt._senders.push(at(Tt,pt))})};var dt=st.RTCPeerConnection.prototype.removeStream;st.RTCPeerConnection.prototype.removeStream=function(St){var Tt=this;Tt._senders=Tt._senders||[],dt.apply(Tt,[St]),St.getTracks().forEach(function(pt){var gt=Tt._senders.find(function(yt){return yt.track===pt});gt&&Tt._senders.splice(Tt._senders.indexOf(gt),1)})}}else if(typeof st=="object"&&st.RTCPeerConnection&&"getSenders"in st.RTCPeerConnection.prototype&&"createDTMFSender"in st.RTCPeerConnection.prototype&&st.RTCRtpSender&&!("dtmf"in st.RTCRtpSender.prototype)){var ft=st.RTCPeerConnection.prototype.getSenders;st.RTCPeerConnection.prototype.getSenders=function(){var St=this,Tt=ft.apply(St,[]);return Tt.forEach(function(pt){pt._pc=St}),Tt},Object.defineProperty(st.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(st){if(typeof st=="object"&&st.RTCPeerConnection&&st.RTCRtpSender&&st.RTCRtpReceiver){if(!("getStats"in st.RTCRtpSender.prototype)){var at=st.RTCPeerConnection.prototype.getSenders;at&&(st.RTCPeerConnection.prototype.getSenders=function(){var dt=this,ft=at.apply(dt,[]);return ft.forEach(function(St){St._pc=dt}),ft});var ct=st.RTCPeerConnection.prototype.addTrack;ct&&(st.RTCPeerConnection.prototype.addTrack=function(){var dt=ct.apply(this,arguments);return dt._pc=this,dt}),st.RTCRtpSender.prototype.getStats=function(){var dt=this;return this._pc.getStats().then(function(ft){return ot(ft,dt.track,!0)})}}if(!("getStats"in st.RTCRtpReceiver.prototype)){var ut=st.RTCPeerConnection.prototype.getReceivers;ut&&(st.RTCPeerConnection.prototype.getReceivers=function(){var dt=this,ft=ut.apply(dt,[]);return ft.forEach(function(St){St._pc=dt}),ft}),nt.wrapPeerConnectionEvent(st,"track",function(dt){return dt.receiver._pc=dt.srcElement,dt}),st.RTCRtpReceiver.prototype.getStats=function(){var dt=this;return this._pc.getStats().then(function(ft){return ot(ft,dt.track,!1)})}}if("getStats"in st.RTCRtpSender.prototype&&"getStats"in st.RTCRtpReceiver.prototype){var lt=st.RTCPeerConnection.prototype.getStats;st.RTCPeerConnection.prototype.getStats=function(){var dt=this;if(arguments.length>0&&arguments[0]instanceof st.MediaStreamTrack){var ft=arguments[0],St,Tt,pt;return dt.getSenders().forEach(function(gt){gt.track===ft&&(St?pt=!0:St=gt)}),dt.getReceivers().forEach(function(gt){return gt.track===ft&&(Tt?pt=!0:Tt=gt),gt.track===ft}),pt||St&&Tt?tt.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):St?St.getStats():Tt?Tt.getStats():tt.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return lt.apply(dt,arguments)}}}},shimSourceObject:function(st){var at=st&&st.URL;typeof st=="object"&&st.HTMLMediaElement&&!("srcObject"in st.HTMLMediaElement.prototype)&&Object.defineProperty(st.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(ct){var ut=this;if(this._srcObject=ct,this.src&&at.revokeObjectURL(this.src),!ct){this.src="";return}this.src=at.createObjectURL(ct),ct.addEventListener("addtrack",function(){ut.src&&at.revokeObjectURL(ut.src),ut.src=at.createObjectURL(ct)}),ct.addEventListener("removetrack",function(){ut.src&&at.revokeObjectURL(ut.src),ut.src=at.createObjectURL(ct)})}})},shimAddTrackRemoveTrackWithNative:function(st){st.RTCPeerConnection.prototype.getLocalStreams=function(){var dt=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(ft){return dt._shimmedLocalStreams[ft][0]})};var at=st.RTCPeerConnection.prototype.addTrack;st.RTCPeerConnection.prototype.addTrack=function(dt,ft){if(!ft)return at.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var St=at.apply(this,arguments);return this._shimmedLocalStreams[ft.id]?this._shimmedLocalStreams[ft.id].indexOf(St)===-1&&this._shimmedLocalStreams[ft.id].push(St):this._shimmedLocalStreams[ft.id]=[ft,St],St};var ct=st.RTCPeerConnection.prototype.addStream;st.RTCPeerConnection.prototype.addStream=function(dt){var ft=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},dt.getTracks().forEach(function(pt){var gt=ft.getSenders().find(function(yt){return yt.track===pt});if(gt)throw new DOMException("Track already exists.","InvalidAccessError")});var St=ft.getSenders();ct.apply(this,arguments);var Tt=ft.getSenders().filter(function(pt){return St.indexOf(pt)===-1});this._shimmedLocalStreams[dt.id]=[dt].concat(Tt)};var ut=st.RTCPeerConnection.prototype.removeStream;st.RTCPeerConnection.prototype.removeStream=function(dt){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[dt.id],ut.apply(this,arguments)};var lt=st.RTCPeerConnection.prototype.removeTrack;st.RTCPeerConnection.prototype.removeTrack=function(dt){var ft=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},dt&&Object.keys(this._shimmedLocalStreams).forEach(function(St){var Tt=ft._shimmedLocalStreams[St].indexOf(dt);Tt!==-1&&ft._shimmedLocalStreams[St].splice(Tt,1),ft._shimmedLocalStreams[St].length===1&&delete ft._shimmedLocalStreams[St]}),lt.apply(this,arguments)}},shimAddTrackRemoveTrack:function(st){if(!st.RTCPeerConnection)return;var at=nt.detectBrowser(st);if(st.RTCPeerConnection.prototype.addTrack&&at.version>=65)return this.shimAddTrackRemoveTrackWithNative(st);var ct=st.RTCPeerConnection.prototype.getLocalStreams;st.RTCPeerConnection.prototype.getLocalStreams=function(){var pt=this,gt=ct.apply(this);return pt._reverseStreams=pt._reverseStreams||{},gt.map(function(yt){return pt._reverseStreams[yt.id]})};var ut=st.RTCPeerConnection.prototype.addStream;st.RTCPeerConnection.prototype.addStream=function(pt){var gt=this;if(gt._streams=gt._streams||{},gt._reverseStreams=gt._reverseStreams||{},pt.getTracks().forEach(function(Et){var It=gt.getSenders().find(function(Gt){return Gt.track===Et});if(It)throw new DOMException("Track already exists.","InvalidAccessError")}),!gt._reverseStreams[pt.id]){var yt=new st.MediaStream(pt.getTracks());gt._streams[pt.id]=yt,gt._reverseStreams[yt.id]=pt,pt=yt}ut.apply(gt,[pt])};var lt=st.RTCPeerConnection.prototype.removeStream;st.RTCPeerConnection.prototype.removeStream=function(pt){var gt=this;gt._streams=gt._streams||{},gt._reverseStreams=gt._reverseStreams||{},lt.apply(gt,[gt._streams[pt.id]||pt]),delete gt._reverseStreams[gt._streams[pt.id]?gt._streams[pt.id].id:pt.id],delete gt._streams[pt.id]},st.RTCPeerConnection.prototype.addTrack=function(pt,gt){var yt=this;if(yt.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var Et=[].slice.call(arguments,1);if(Et.length!==1||!Et[0].getTracks().find(function(At){return At===pt}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var It=yt.getSenders().find(function(At){return At.track===pt});if(It)throw new DOMException("Track already exists.","InvalidAccessError");yt._streams=yt._streams||{},yt._reverseStreams=yt._reverseStreams||{};var Gt=yt._streams[gt.id];if(Gt)Gt.addTrack(pt),tt.resolve().then(function(){yt.dispatchEvent(new Event("negotiationneeded"))});else{var Wt=new st.MediaStream([pt]);yt._streams[gt.id]=Wt,yt._reverseStreams[Wt.id]=gt,yt.addStream(Wt)}return yt.getSenders().find(function(At){return At.track===pt})};function dt(pt,gt){var yt=gt.sdp;return Object.keys(pt._reverseStreams||[]).forEach(function(Et){var It=pt._reverseStreams[Et],Gt=pt._streams[It.id];yt=yt.replace(new RegExp(Gt.id,"g"),It.id)}),new RTCSessionDescription({type:gt.type,sdp:yt})}function ft(pt,gt){var yt=gt.sdp;return Object.keys(pt._reverseStreams||[]).forEach(function(Et){var It=pt._reverseStreams[Et],Gt=pt._streams[It.id];yt=yt.replace(new RegExp(It.id,"g"),Gt.id)}),new RTCSessionDescription({type:gt.type,sdp:yt})}["createOffer","createAnswer"].forEach(function(pt){var gt=st.RTCPeerConnection.prototype[pt];st.RTCPeerConnection.prototype[pt]=function(){var yt=this,Et=arguments,It=arguments.length&&typeof arguments[0]=="function";return It?gt.apply(yt,[function(Gt){var Wt=dt(yt,Gt);Et[0].apply(null,[Wt])},function(Gt){Et[1]&&Et[1].apply(null,Gt)},arguments[2]]):gt.apply(yt,arguments).then(function(Gt){return dt(yt,Gt)})}});var St=st.RTCPeerConnection.prototype.setLocalDescription;st.RTCPeerConnection.prototype.setLocalDescription=function(){var pt=this;return!arguments.length||!arguments[0].type||(arguments[0]=ft(pt,arguments[0])),St.apply(pt,arguments)};var Tt=Object.getOwnPropertyDescriptor(st.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(st.RTCPeerConnection.prototype,"localDescription",{get:function(){var pt=this,gt=Tt.get.apply(this);return gt.type===""?gt:dt(pt,gt)}}),st.RTCPeerConnection.prototype.removeTrack=function(pt){var gt=this;if(gt.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!pt._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var yt=pt._pc===gt;if(!yt)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");gt._streams=gt._streams||{};var Et;Object.keys(gt._streams).forEach(function(It){var Gt=gt._streams[It].getTracks().find(function(Wt){return pt.track===Wt});Gt&&(Et=gt._streams[It])}),Et&&(Et.getTracks().length===1?gt.removeStream(gt._reverseStreams[Et.id]):Et.removeTrack(pt.track),gt.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(st){var at=nt.detectBrowser(st);if(!st.RTCPeerConnection&&st.webkitRTCPeerConnection&&(st.RTCPeerConnection=function(lt,dt){return rt("PeerConnection"),lt&&lt.iceTransportPolicy&&(lt.iceTransports=lt.iceTransportPolicy),new st.webkitRTCPeerConnection(lt,dt)},st.RTCPeerConnection.prototype=st.webkitRTCPeerConnection.prototype,st.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(st.RTCPeerConnection,"generateCertificate",{get:function(){return st.webkitRTCPeerConnection.generateCertificate}})),!!st.RTCPeerConnection){var ct=st.RTCPeerConnection.prototype.getStats;st.RTCPeerConnection.prototype.getStats=function(lt,dt,ft){var St=this,Tt=arguments;if(arguments.length>0&&typeof lt=="function")return ct.apply(this,arguments);if(ct.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return ct.apply(this,[]);var pt=function(Et){var It={},Gt=Et.result();return Gt.forEach(function(Wt){var At={id:Wt.id,timestamp:Wt.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[Wt.type]||Wt.type};Wt.names().forEach(function(kt){At[kt]=Wt.stat(kt)}),It[At.id]=At}),It},gt=function(Et){return new Map(Object.keys(Et).map(function(It){return[It,Et[It]]}))};if(arguments.length>=2){var yt=function(Et){Tt[1](gt(pt(Et)))};return ct.apply(this,[yt,arguments[0]])}return new tt(function(Et,It){ct.apply(St,[function(Gt){Et(gt(pt(Gt)))},It])}).then(dt,ft)},at.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(lt){var dt=st.RTCPeerConnection.prototype[lt];st.RTCPeerConnection.prototype[lt]=function(){var ft=arguments,St=this,Tt=new tt(function(pt,gt){dt.apply(St,[ft[0],pt,gt])});return ft.length<2?Tt:Tt.then(function(){ft[1].apply(null,[])},function(pt){ft.length>=3&&ft[2].apply(null,[pt])})}}),at.version<52&&["createOffer","createAnswer"].forEach(function(lt){var dt=st.RTCPeerConnection.prototype[lt];st.RTCPeerConnection.prototype[lt]=function(){var ft=this;if(arguments.length<1||arguments.length===1&&typeof arguments[0]=="object"){var St=arguments.length===1?arguments[0]:void 0;return new tt(function(Tt,pt){dt.apply(ft,[Tt,pt,St])})}return dt.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(lt){var dt=st.RTCPeerConnection.prototype[lt];st.RTCPeerConnection.prototype[lt]=function(){return arguments[0]=new(lt==="addIceCandidate"?st.RTCIceCandidate:st.RTCSessionDescription)(arguments[0]),dt.apply(this,arguments)}});var ut=st.RTCPeerConnection.prototype.addIceCandidate;st.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?ut.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),tt.resolve())}}},fixNegotiationNeeded:function(st){nt.wrapPeerConnectionEvent(st,"negotiationneeded",function(at){var ct=at.target;if(ct.signalingState==="stable")return at})},shimGetDisplayMedia:function(st,at){if(!(!st.navigator||!st.navigator.mediaDevices||"getDisplayMedia"in st.navigator.mediaDevices)){if(typeof at!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}st.navigator.mediaDevices.getDisplayMedia=function(ct){return at(ct).then(function(ut){var lt=ct.video&&ct.video.width,dt=ct.video&&ct.video.height,ft=ct.video&&ct.video.frameRate;return ct.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:ut,maxFrameRate:ft||3}},lt&&(ct.video.mandatory.maxWidth=lt),dt&&(ct.video.mandatory.maxHeight=dt),st.navigator.mediaDevices.getUserMedia(ct)})},st.navigator.getDisplayMedia=function(ct){return nt.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),st.navigator.mediaDevices.getDisplayMedia(ct)}}}}}).call(this,b(0))},function(_e,et,b){(function(tt){var nt=b(27),rt=nt.log;_e.exports=function(it){var ot=nt.detectBrowser(it),st=it&&it.navigator,at=function(St){if(typeof St!="object"||St.mandatory||St.optional)return St;var Tt={};return Object.keys(St).forEach(function(pt){if(!(pt==="require"||pt==="advanced"||pt==="mediaSource")){var gt=typeof St[pt]=="object"?St[pt]:{ideal:St[pt]};gt.exact!==void 0&&typeof gt.exact=="number"&&(gt.min=gt.max=gt.exact);var yt=function(It,Gt){return It?It+Gt.charAt(0).toUpperCase()+Gt.slice(1):Gt==="deviceId"?"sourceId":Gt};if(gt.ideal!==void 0){Tt.optional=Tt.optional||[];var Et={};typeof gt.ideal=="number"?(Et[yt("min",pt)]=gt.ideal,Tt.optional.push(Et),Et={},Et[yt("max",pt)]=gt.ideal,Tt.optional.push(Et)):(Et[yt("",pt)]=gt.ideal,Tt.optional.push(Et))}gt.exact!==void 0&&typeof gt.exact!="number"?(Tt.mandatory=Tt.mandatory||{},Tt.mandatory[yt("",pt)]=gt.exact):["min","max"].forEach(function(It){gt[It]!==void 0&&(Tt.mandatory=Tt.mandatory||{},Tt.mandatory[yt(It,pt)]=gt[It])})}}),St.advanced&&(Tt.optional=(Tt.optional||[]).concat(St.advanced)),Tt},ct=function(St,Tt){if(ot.version>=61)return Tt(St);if(St=JSON.parse(JSON.stringify(St)),St&&typeof St.audio=="object"){var pt=function(It,Gt,Wt){Gt in It&&!(Wt in It)&&(It[Wt]=It[Gt],delete It[Gt])};St=JSON.parse(JSON.stringify(St)),pt(St.audio,"autoGainControl","googAutoGainControl"),pt(St.audio,"noiseSuppression","googNoiseSuppression"),St.audio=at(St.audio)}if(St&&typeof St.video=="object"){var gt=St.video.facingMode;gt=gt&&(typeof gt=="object"?gt:{ideal:gt});var yt=ot.version<66;if(gt&&(gt.exact==="user"||gt.exact==="environment"||gt.ideal==="user"||gt.ideal==="environment")&&!(st.mediaDevices.getSupportedConstraints&&st.mediaDevices.getSupportedConstraints().facingMode&&!yt)){delete St.video.facingMode;var Et;if(gt.exact==="environment"||gt.ideal==="environment"?Et=["back","rear"]:(gt.exact==="user"||gt.ideal==="user")&&(Et=["front"]),Et)return st.mediaDevices.enumerateDevices().then(function(It){It=It.filter(function(Wt){return Wt.kind==="videoinput"});var Gt=It.find(function(Wt){return Et.some(function(At){return Wt.label.toLowerCase().indexOf(At)!==-1})});return!Gt&&It.length&&Et.indexOf("back")!==-1&&(Gt=It[It.length-1]),Gt&&(St.video.deviceId=gt.exact?{exact:Gt.deviceId}:{ideal:Gt.deviceId}),St.video=at(St.video),rt("chrome: "+JSON.stringify(St)),Tt(St)})}St.video=at(St.video)}return rt("chrome: "+JSON.stringify(St)),Tt(St)},ut=function(St){return ot.version>=64?St:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[St.name]||St.name,message:St.message,constraint:St.constraint||St.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},lt=function(St,Tt,pt){ct(St,function(gt){st.webkitGetUserMedia(gt,Tt,function(yt){pt&&pt(ut(yt))})})};st.getUserMedia=lt;var dt=function(St){return new tt(function(Tt,pt){st.getUserMedia(St,Tt,pt)})};if(st.mediaDevices||(st.mediaDevices={getUserMedia:dt,enumerateDevices:function(){return new tt(function(St){var Tt={audio:"audioinput",video:"videoinput"};return it.MediaStreamTrack.getSources(function(pt){St(pt.map(function(gt){return{label:gt.label,kind:Tt[gt.kind],deviceId:gt.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),!st.mediaDevices.getUserMedia)st.mediaDevices.getUserMedia=function(St){return dt(St)};else{var ft=st.mediaDevices.getUserMedia.bind(st.mediaDevices);st.mediaDevices.getUserMedia=function(St){return ct(St,function(Tt){return ft(Tt).then(function(pt){if(Tt.audio&&!pt.getAudioTracks().length||Tt.video&&!pt.getVideoTracks().length)throw pt.getTracks().forEach(function(gt){gt.stop()}),new DOMException("","NotFoundError");return pt},function(pt){return tt.reject(ut(pt))})})}}typeof st.mediaDevices.addEventListener>"u"&&(st.mediaDevices.addEventListener=function(){rt("Dummy mediaDevices.addEventListener called.")}),typeof st.mediaDevices.removeEventListener>"u"&&(st.mediaDevices.removeEventListener=function(){rt("Dummy mediaDevices.removeEventListener called.")})}}).call(this,b(0))},function(_e,et,b){var tt=b(27),nt=b(571),rt=b(572);_e.exports={shimGetUserMedia:b(573),shimPeerConnection:function(it){var ot=tt.detectBrowser(it);if(it.RTCIceGatherer&&(it.RTCIceCandidate||(it.RTCIceCandidate=function(ct){return ct}),it.RTCSessionDescription||(it.RTCSessionDescription=function(ct){return ct}),ot.version<15025)){var st=Object.getOwnPropertyDescriptor(it.MediaStreamTrack.prototype,"enabled");Object.defineProperty(it.MediaStreamTrack.prototype,"enabled",{set:function(ct){st.set.call(this,ct);var ut=new Event("enabled");ut.enabled=ct,this.dispatchEvent(ut)}})}it.RTCRtpSender&&!("dtmf"in it.RTCRtpSender.prototype)&&Object.defineProperty(it.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new it.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),it.RTCDtmfSender&&!it.RTCDTMFSender&&(it.RTCDTMFSender=it.RTCDtmfSender);var at=rt(it,ot.version);it.RTCPeerConnection=function(ct){return ct&&ct.iceServers&&(ct.iceServers=nt(ct.iceServers)),new at(ct)},it.RTCPeerConnection.prototype=at.prototype},shimReplaceTrack:function(it){it.RTCRtpSender&&!("replaceTrack"in it.RTCRtpSender.prototype)&&(it.RTCRtpSender.prototype.replaceTrack=it.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(it,ot){if(!(!("getDisplayMedia"in it.navigator)||!it.navigator.mediaDevices||"getDisplayMedia"in it.navigator.mediaDevices)){var st=it.navigator.getDisplayMedia;it.navigator.mediaDevices.getDisplayMedia=function(at){return st.call(it.navigator,at)},it.navigator.getDisplayMedia=function(at){return tt.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),st.call(it.navigator,at)}}}}},function(_e,et,b){var tt=b(27);_e.exports=function(nt,rt){var it=!1;return nt=JSON.parse(JSON.stringify(nt)),nt.filter(function(ot){if(ot&&(ot.urls||ot.url)){var st=ot.urls||ot.url;ot.url&&!ot.urls&&tt.deprecated("RTCIceServer.url","RTCIceServer.urls");var at=typeof st=="string";return at&&(st=[st]),st=st.filter(function(ct){var ut=ct.indexOf("turn:")===0&&ct.indexOf("transport=udp")!==-1&&ct.indexOf("turn:[")===-1&&!it;return ut?(it=!0,!0):ct.indexOf("stun:")===0&&rt>=14393&&ct.indexOf("?transport=udp")===-1}),delete ot.url,ot.urls=at?st[0]:st,!!st.length}})}},function(_e,et,b){(function(tt){var nt=b(250);function rt(lt){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[lt.type]||lt.type}function it(lt,dt,ft,St,Tt){var pt=nt.writeRtpDescription(lt.kind,dt);if(pt+=nt.writeIceParameters(lt.iceGatherer.getLocalParameters()),pt+=nt.writeDtlsParameters(lt.dtlsTransport.getLocalParameters(),ft==="offer"?"actpass":Tt||"active"),pt+="a=mid:"+lt.mid+`\r
`,lt.rtpSender&&lt.rtpReceiver?pt+=`a=sendrecv\r
`:lt.rtpSender?pt+=`a=sendonly\r
`:lt.rtpReceiver?pt+=`a=recvonly\r
`:pt+=`a=inactive\r
`,lt.rtpSender){var gt=lt.rtpSender._initialTrackId||lt.rtpSender.track.id;lt.rtpSender._initialTrackId=gt;var yt="msid:"+(St?St.id:"-")+" "+gt+`\r
`;pt+="a="+yt,pt+="a=ssrc:"+lt.sendEncodingParameters[0].ssrc+" "+yt,lt.sendEncodingParameters[0].rtx&&(pt+="a=ssrc:"+lt.sendEncodingParameters[0].rtx.ssrc+" "+yt,pt+="a=ssrc-group:FID "+lt.sendEncodingParameters[0].ssrc+" "+lt.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return pt+="a=ssrc:"+lt.sendEncodingParameters[0].ssrc+" cname:"+nt.localCName+`\r
`,lt.rtpSender&&lt.sendEncodingParameters[0].rtx&&(pt+="a=ssrc:"+lt.sendEncodingParameters[0].rtx.ssrc+" cname:"+nt.localCName+`\r
`),pt}function ot(lt,dt){var ft=!1;return lt=JSON.parse(JSON.stringify(lt)),lt.filter(function(St){if(St&&(St.urls||St.url)){var Tt=St.urls||St.url;St.url&&!St.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var pt=typeof Tt=="string";return pt&&(Tt=[Tt]),Tt=Tt.filter(function(gt){var yt=gt.indexOf("turn:")===0&&gt.indexOf("transport=udp")!==-1&&gt.indexOf("turn:[")===-1&&!ft;return yt?(ft=!0,!0):gt.indexOf("stun:")===0&&dt>=14393&&gt.indexOf("?transport=udp")===-1}),delete St.url,St.urls=pt?Tt[0]:Tt,!!Tt.length}})}function st(lt,dt){var ft={codecs:[],headerExtensions:[],fecMechanisms:[]},St=function(pt,gt){pt=parseInt(pt,10);for(var yt=0;yt<gt.length;yt++)if(gt[yt].payloadType===pt||gt[yt].preferredPayloadType===pt)return gt[yt]},Tt=function(pt,gt,yt,Et){var It=St(pt.parameters.apt,yt),Gt=St(gt.parameters.apt,Et);return It&&Gt&&It.name.toLowerCase()===Gt.name.toLowerCase()};return lt.codecs.forEach(function(pt){for(var gt=0;gt<dt.codecs.length;gt++){var yt=dt.codecs[gt];if(pt.name.toLowerCase()===yt.name.toLowerCase()&&pt.clockRate===yt.clockRate){if(pt.name.toLowerCase()==="rtx"&&pt.parameters&&yt.parameters.apt&&!Tt(pt,yt,lt.codecs,dt.codecs))continue;yt=JSON.parse(JSON.stringify(yt)),yt.numChannels=Math.min(pt.numChannels,yt.numChannels),ft.codecs.push(yt),yt.rtcpFeedback=yt.rtcpFeedback.filter(function(Et){for(var It=0;It<pt.rtcpFeedback.length;It++)if(pt.rtcpFeedback[It].type===Et.type&&pt.rtcpFeedback[It].parameter===Et.parameter)return!0;return!1});break}}}),lt.headerExtensions.forEach(function(pt){for(var gt=0;gt<dt.headerExtensions.length;gt++){var yt=dt.headerExtensions[gt];if(pt.uri===yt.uri){ft.headerExtensions.push(yt);break}}}),ft}function at(lt,dt,ft){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[dt][lt].indexOf(ft)!==-1}function ct(lt,dt){var ft=lt.getRemoteCandidates().find(function(St){return dt.foundation===St.foundation&&dt.ip===St.ip&&dt.port===St.port&&dt.priority===St.priority&&dt.protocol===St.protocol&&dt.type===St.type});return ft||lt.addRemoteCandidate(dt),!ft}function ut(lt,dt){var ft=new Error(dt);return ft.name=lt,ft.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[lt],ft}_e.exports=function(lt,dt){function ft(Et,It){It.addTrack(Et),It.dispatchEvent(new lt.MediaStreamTrackEvent("addtrack",{track:Et}))}function St(Et,It){It.removeTrack(Et),It.dispatchEvent(new lt.MediaStreamTrackEvent("removetrack",{track:Et}))}function Tt(Et,It,Gt,Wt){var At=new Event("track");At.track=It,At.receiver=Gt,At.transceiver={receiver:Gt},At.streams=Wt,lt.setTimeout(function(){Et._dispatchEvent("track",At)})}var pt=function(Et){var It=this,Gt=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(At){It[At]=Gt[At].bind(Gt)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",Et=JSON.parse(JSON.stringify(Et||{})),this.usingBundle=Et.bundlePolicy==="max-bundle",Et.rtcpMuxPolicy==="negotiate")throw ut("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(Et.rtcpMuxPolicy||(Et.rtcpMuxPolicy="require"),Et.iceTransportPolicy){case"all":case"relay":break;default:Et.iceTransportPolicy="all";break}switch(Et.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:Et.bundlePolicy="balanced";break}if(Et.iceServers=ot(Et.iceServers||[],dt),this._iceGatherers=[],Et.iceCandidatePoolSize)for(var Wt=Et.iceCandidatePoolSize;Wt>0;Wt--)this._iceGatherers.push(new lt.RTCIceGatherer({iceServers:Et.iceServers,gatherPolicy:Et.iceTransportPolicy}));else Et.iceCandidatePoolSize=0;this._config=Et,this.transceivers=[],this._sdpSessionId=nt.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(pt.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(pt.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),pt.prototype.onicecandidate=null,pt.prototype.onaddstream=null,pt.prototype.ontrack=null,pt.prototype.onremovestream=null,pt.prototype.onsignalingstatechange=null,pt.prototype.oniceconnectionstatechange=null,pt.prototype.onconnectionstatechange=null,pt.prototype.onicegatheringstatechange=null,pt.prototype.onnegotiationneeded=null,pt.prototype.ondatachannel=null,pt.prototype._dispatchEvent=function(Et,It){this._isClosed||(this.dispatchEvent(It),typeof this["on"+Et]=="function"&&this["on"+Et](It))},pt.prototype._emitGatheringStateChange=function(){var Et=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",Et)},pt.prototype.getConfiguration=function(){return this._config},pt.prototype.getLocalStreams=function(){return this.localStreams},pt.prototype.getRemoteStreams=function(){return this.remoteStreams},pt.prototype._createTransceiver=function(Et,It){var Gt=this.transceivers.length>0,Wt={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:Et,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&Gt)Wt.iceTransport=this.transceivers[0].iceTransport,Wt.dtlsTransport=this.transceivers[0].dtlsTransport;else{var At=this._createIceAndDtlsTransports();Wt.iceTransport=At.iceTransport,Wt.dtlsTransport=At.dtlsTransport}return It||this.transceivers.push(Wt),Wt},pt.prototype.addTrack=function(Et,It){if(this._isClosed)throw ut("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var Gt=this.transceivers.find(function(kt){return kt.track===Et});if(Gt)throw ut("InvalidAccessError","Track already exists.");for(var Wt,At=0;At<this.transceivers.length;At++)!this.transceivers[At].track&&this.transceivers[At].kind===Et.kind&&(Wt=this.transceivers[At]);return Wt||(Wt=this._createTransceiver(Et.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(It)===-1&&this.localStreams.push(It),Wt.track=Et,Wt.stream=It,Wt.rtpSender=new lt.RTCRtpSender(Et,Wt.dtlsTransport),Wt.rtpSender},pt.prototype.addStream=function(Et){var It=this;if(dt>=15025)Et.getTracks().forEach(function(Wt){It.addTrack(Wt,Et)});else{var Gt=Et.clone();Et.getTracks().forEach(function(Wt,At){var kt=Gt.getTracks()[At];Wt.addEventListener("enabled",function(Vt){kt.enabled=Vt.enabled})}),Gt.getTracks().forEach(function(Wt){It.addTrack(Wt,Gt)})}},pt.prototype.removeTrack=function(Et){if(this._isClosed)throw ut("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(Et instanceof lt.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var It=this.transceivers.find(function(At){return At.rtpSender===Et});if(!It)throw ut("InvalidAccessError","Sender was not created by this connection.");var Gt=It.stream;It.rtpSender.stop(),It.rtpSender=null,It.track=null,It.stream=null;var Wt=this.transceivers.map(function(At){return At.stream});Wt.indexOf(Gt)===-1&&this.localStreams.indexOf(Gt)>-1&&this.localStreams.splice(this.localStreams.indexOf(Gt),1),this._maybeFireNegotiationNeeded()},pt.prototype.removeStream=function(Et){var It=this;Et.getTracks().forEach(function(Gt){var Wt=It.getSenders().find(function(At){return At.track===Gt});Wt&&It.removeTrack(Wt)})},pt.prototype.getSenders=function(){return this.transceivers.filter(function(Et){return!!Et.rtpSender}).map(function(Et){return Et.rtpSender})},pt.prototype.getReceivers=function(){return this.transceivers.filter(function(Et){return!!Et.rtpReceiver}).map(function(Et){return Et.rtpReceiver})},pt.prototype._createIceGatherer=function(Et,It){var Gt=this;if(It&&Et>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var Wt=new lt.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(Wt,"state",{value:"new",writable:!0}),this.transceivers[Et].bufferedCandidateEvents=[],this.transceivers[Et].bufferCandidates=function(At){var kt=!At.candidate||Object.keys(At.candidate).length===0;Wt.state=kt?"completed":"gathering",Gt.transceivers[Et].bufferedCandidateEvents!==null&&Gt.transceivers[Et].bufferedCandidateEvents.push(At)},Wt.addEventListener("localcandidate",this.transceivers[Et].bufferCandidates),Wt},pt.prototype._gather=function(Et,It){var Gt=this,Wt=this.transceivers[It].iceGatherer;if(!Wt.onlocalcandidate){var At=this.transceivers[It].bufferedCandidateEvents;this.transceivers[It].bufferedCandidateEvents=null,Wt.removeEventListener("localcandidate",this.transceivers[It].bufferCandidates),Wt.onlocalcandidate=function(kt){if(!(Gt.usingBundle&&It>0)){var Vt=new Event("icecandidate");Vt.candidate={sdpMid:Et,sdpMLineIndex:It};var Nt=kt.candidate,tn=!Nt||Object.keys(Nt).length===0;if(tn)(Wt.state==="new"||Wt.state==="gathering")&&(Wt.state="completed");else{Wt.state==="new"&&(Wt.state="gathering"),Nt.component=1,Nt.ufrag=Wt.getLocalParameters().usernameFragment;var _t=nt.writeCandidate(Nt);Vt.candidate=Object.assign(Vt.candidate,nt.parseCandidate(_t)),Vt.candidate.candidate=_t,Vt.candidate.toJSON=function(){return{candidate:Vt.candidate.candidate,sdpMid:Vt.candidate.sdpMid,sdpMLineIndex:Vt.candidate.sdpMLineIndex,usernameFragment:Vt.candidate.usernameFragment}}}var Kt=nt.getMediaSections(Gt._localDescription.sdp);tn?Kt[Vt.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:Kt[Vt.candidate.sdpMLineIndex]+="a="+Vt.candidate.candidate+`\r
`,Gt._localDescription.sdp=nt.getDescription(Gt._localDescription.sdp)+Kt.join("");var cn=Gt.transceivers.every(function(an){return an.iceGatherer&&an.iceGatherer.state==="completed"});Gt.iceGatheringState!=="gathering"&&(Gt.iceGatheringState="gathering",Gt._emitGatheringStateChange()),tn||Gt._dispatchEvent("icecandidate",Vt),cn&&(Gt._dispatchEvent("icecandidate",new Event("icecandidate")),Gt.iceGatheringState="complete",Gt._emitGatheringStateChange())}},lt.setTimeout(function(){At.forEach(function(kt){Wt.onlocalcandidate(kt)})},0)}},pt.prototype._createIceAndDtlsTransports=function(){var Et=this,It=new lt.RTCIceTransport(null);It.onicestatechange=function(){Et._updateIceConnectionState(),Et._updateConnectionState()};var Gt=new lt.RTCDtlsTransport(It);return Gt.ondtlsstatechange=function(){Et._updateConnectionState()},Gt.onerror=function(){Object.defineProperty(Gt,"state",{value:"failed",writable:!0}),Et._updateConnectionState()},{iceTransport:It,dtlsTransport:Gt}},pt.prototype._disposeIceAndDtlsTransports=function(Et){var It=this.transceivers[Et].iceGatherer;It&&(delete It.onlocalcandidate,delete this.transceivers[Et].iceGatherer);var Gt=this.transceivers[Et].iceTransport;Gt&&(delete Gt.onicestatechange,delete this.transceivers[Et].iceTransport);var Wt=this.transceivers[Et].dtlsTransport;Wt&&(delete Wt.ondtlsstatechange,delete Wt.onerror,delete this.transceivers[Et].dtlsTransport)},pt.prototype._transceive=function(Et,It,Gt){var Wt=st(Et.localCapabilities,Et.remoteCapabilities);It&&Et.rtpSender&&(Wt.encodings=Et.sendEncodingParameters,Wt.rtcp={cname:nt.localCName,compound:Et.rtcpParameters.compound},Et.recvEncodingParameters.length&&(Wt.rtcp.ssrc=Et.recvEncodingParameters[0].ssrc),Et.rtpSender.send(Wt)),Gt&&Et.rtpReceiver&&Wt.codecs.length>0&&(Et.kind==="video"&&Et.recvEncodingParameters&&dt<15019&&Et.recvEncodingParameters.forEach(function(At){delete At.rtx}),Et.recvEncodingParameters.length?Wt.encodings=Et.recvEncodingParameters:Wt.encodings=[{}],Wt.rtcp={compound:Et.rtcpParameters.compound},Et.rtcpParameters.cname&&(Wt.rtcp.cname=Et.rtcpParameters.cname),Et.sendEncodingParameters.length&&(Wt.rtcp.ssrc=Et.sendEncodingParameters[0].ssrc),Et.rtpReceiver.receive(Wt))},pt.prototype.setLocalDescription=function(Et){var It=this;if(["offer","answer"].indexOf(Et.type)===-1)return tt.reject(ut("TypeError",'Unsupported type "'+Et.type+'"'));if(!at("setLocalDescription",Et.type,It.signalingState)||It._isClosed)return tt.reject(ut("InvalidStateError","Can not set local "+Et.type+" in state "+It.signalingState));var Gt,Wt;if(Et.type==="offer")Gt=nt.splitSections(Et.sdp),Wt=Gt.shift(),Gt.forEach(function(kt,Vt){var Nt=nt.parseRtpParameters(kt);It.transceivers[Vt].localCapabilities=Nt}),It.transceivers.forEach(function(kt,Vt){It._gather(kt.mid,Vt)});else if(Et.type==="answer"){Gt=nt.splitSections(It._remoteDescription.sdp),Wt=Gt.shift();var At=nt.matchPrefix(Wt,"a=ice-lite").length>0;Gt.forEach(function(kt,Vt){var Nt=It.transceivers[Vt],tn=Nt.iceGatherer,_t=Nt.iceTransport,Kt=Nt.dtlsTransport,cn=Nt.localCapabilities,an=Nt.remoteCapabilities,mn=nt.isRejected(kt)&&nt.matchPrefix(kt,"a=bundle-only").length===0;if(!mn&&!Nt.rejected){var on=nt.getIceParameters(kt,Wt),yn=nt.getDtlsParameters(kt,Wt);At&&(yn.role="server"),(!It.usingBundle||Vt===0)&&(It._gather(Nt.mid,Vt),_t.state==="new"&&_t.start(tn,on,At?"controlling":"controlled"),Kt.state==="new"&&Kt.start(yn));var fn=st(cn,an);It._transceive(Nt,fn.codecs.length>0,!1)}})}return It._localDescription={type:Et.type,sdp:Et.sdp},Et.type==="offer"?It._updateSignalingState("have-local-offer"):It._updateSignalingState("stable"),tt.resolve()},pt.prototype.setRemoteDescription=function(Et){var It=this;if(["offer","answer"].indexOf(Et.type)===-1)return tt.reject(ut("TypeError",'Unsupported type "'+Et.type+'"'));if(!at("setRemoteDescription",Et.type,It.signalingState)||It._isClosed)return tt.reject(ut("InvalidStateError","Can not set remote "+Et.type+" in state "+It.signalingState));var Gt={};It.remoteStreams.forEach(function(_t){Gt[_t.id]=_t});var Wt=[],At=nt.splitSections(Et.sdp),kt=At.shift(),Vt=nt.matchPrefix(kt,"a=ice-lite").length>0,Nt=nt.matchPrefix(kt,"a=group:BUNDLE ").length>0;It.usingBundle=Nt;var tn=nt.matchPrefix(kt,"a=ice-options:")[0];return tn?It.canTrickleIceCandidates=tn.substr(14).split(" ").indexOf("trickle")>=0:It.canTrickleIceCandidates=!1,At.forEach(function(_t,Kt){var cn=nt.splitLines(_t),an=nt.getKind(_t),mn=nt.isRejected(_t)&&nt.matchPrefix(_t,"a=bundle-only").length===0,on=cn[0].substr(2).split(" ")[2],yn=nt.getDirection(_t,kt),fn=nt.parseMsid(_t),sn=nt.getMid(_t)||nt.generateIdentifier();if(mn||an==="application"&&(on==="DTLS/SCTP"||on==="UDP/DTLS/SCTP")){It.transceivers[Kt]={mid:sn,kind:an,protocol:on,rejected:!0};return}!mn&&It.transceivers[Kt]&&It.transceivers[Kt].rejected&&(It.transceivers[Kt]=It._createTransceiver(an,!0));var un,Ln,Xn,pn,Vn,Tn,Jn,lr,tr,Qn=nt.parseRtpParameters(_t),Sr,vr;mn||(Sr=nt.getIceParameters(_t,kt),vr=nt.getDtlsParameters(_t,kt),vr.role="client"),Jn=nt.parseRtpEncodingParameters(_t);var Fr=nt.parseRtcpParameters(_t),kr=nt.matchPrefix(_t,"a=end-of-candidates",kt).length>0,jr=nt.matchPrefix(_t,"a=candidate:").map(function(Mn){return nt.parseCandidate(Mn)}).filter(function(Mn){return Mn.component===1});if((Et.type==="offer"||Et.type==="answer")&&!mn&&Nt&&Kt>0&&It.transceivers[Kt]&&(It._disposeIceAndDtlsTransports(Kt),It.transceivers[Kt].iceGatherer=It.transceivers[0].iceGatherer,It.transceivers[Kt].iceTransport=It.transceivers[0].iceTransport,It.transceivers[Kt].dtlsTransport=It.transceivers[0].dtlsTransport,It.transceivers[Kt].rtpSender&&It.transceivers[Kt].rtpSender.setTransport(It.transceivers[0].dtlsTransport),It.transceivers[Kt].rtpReceiver&&It.transceivers[Kt].rtpReceiver.setTransport(It.transceivers[0].dtlsTransport)),Et.type==="offer"&&!mn){un=It.transceivers[Kt]||It._createTransceiver(an),un.mid=sn,un.iceGatherer||(un.iceGatherer=It._createIceGatherer(Kt,Nt)),jr.length&&un.iceTransport.state==="new"&&(kr&&(!Nt||Kt===0)?un.iceTransport.setRemoteCandidates(jr):jr.forEach(function(Mn){ct(un.iceTransport,Mn)})),lr=lt.RTCRtpReceiver.getCapabilities(an),dt<15019&&(lr.codecs=lr.codecs.filter(function(Mn){return Mn.name!=="rtx"})),Tn=un.sendEncodingParameters||[{ssrc:(2*Kt+2)*1001}];var xo=!1;if(yn==="sendrecv"||yn==="sendonly"){if(xo=!un.rtpReceiver,Vn=un.rtpReceiver||new lt.RTCRtpReceiver(un.dtlsTransport,an),xo){var Er;tr=Vn.track,fn&&fn.stream==="-"||(fn?(Gt[fn.stream]||(Gt[fn.stream]=new lt.MediaStream,Object.defineProperty(Gt[fn.stream],"id",{get:function(){return fn.stream}})),Object.defineProperty(tr,"id",{get:function(){return fn.track}}),Er=Gt[fn.stream]):(Gt.default||(Gt.default=new lt.MediaStream),Er=Gt.default)),Er&&(ft(tr,Er),un.associatedRemoteMediaStreams.push(Er)),Wt.push([tr,Vn,Er])}}else un.rtpReceiver&&un.rtpReceiver.track&&(un.associatedRemoteMediaStreams.forEach(function(Mn){var sr=Mn.getTracks().find(function(Ar){return Ar.id===un.rtpReceiver.track.id});sr&&St(sr,Mn)}),un.associatedRemoteMediaStreams=[]);un.localCapabilities=lr,un.remoteCapabilities=Qn,un.rtpReceiver=Vn,un.rtcpParameters=Fr,un.sendEncodingParameters=Tn,un.recvEncodingParameters=Jn,It._transceive(It.transceivers[Kt],!1,xo)}else if(Et.type==="answer"&&!mn){un=It.transceivers[Kt],Ln=un.iceGatherer,Xn=un.iceTransport,pn=un.dtlsTransport,Vn=un.rtpReceiver,Tn=un.sendEncodingParameters,lr=un.localCapabilities,It.transceivers[Kt].recvEncodingParameters=Jn,It.transceivers[Kt].remoteCapabilities=Qn,It.transceivers[Kt].rtcpParameters=Fr,jr.length&&Xn.state==="new"&&((Vt||kr)&&(!Nt||Kt===0)?Xn.setRemoteCandidates(jr):jr.forEach(function(Mn){ct(un.iceTransport,Mn)})),(!Nt||Kt===0)&&(Xn.state==="new"&&Xn.start(Ln,Sr,"controlling"),pn.state==="new"&&pn.start(vr));var xr=st(un.localCapabilities,un.remoteCapabilities),Un=xr.codecs.filter(function(Mn){return Mn.name.toLowerCase()==="rtx"}).length;!Un&&un.sendEncodingParameters[0].rtx&&delete un.sendEncodingParameters[0].rtx,It._transceive(un,yn==="sendrecv"||yn==="recvonly",yn==="sendrecv"||yn==="sendonly"),Vn&&(yn==="sendrecv"||yn==="sendonly")?(tr=Vn.track,fn?(Gt[fn.stream]||(Gt[fn.stream]=new lt.MediaStream),ft(tr,Gt[fn.stream]),Wt.push([tr,Vn,Gt[fn.stream]])):(Gt.default||(Gt.default=new lt.MediaStream),ft(tr,Gt.default),Wt.push([tr,Vn,Gt.default]))):delete un.rtpReceiver}}),It._dtlsRole===void 0&&(It._dtlsRole=Et.type==="offer"?"active":"passive"),It._remoteDescription={type:Et.type,sdp:Et.sdp},Et.type==="offer"?It._updateSignalingState("have-remote-offer"):It._updateSignalingState("stable"),Object.keys(Gt).forEach(function(_t){var Kt=Gt[_t];if(Kt.getTracks().length){if(It.remoteStreams.indexOf(Kt)===-1){It.remoteStreams.push(Kt);var cn=new Event("addstream");cn.stream=Kt,lt.setTimeout(function(){It._dispatchEvent("addstream",cn)})}Wt.forEach(function(an){var mn=an[0],on=an[1];Kt.id===an[2].id&&Tt(It,mn,on,[Kt])})}}),Wt.forEach(function(_t){_t[2]||Tt(It,_t[0],_t[1],[])}),lt.setTimeout(function(){It&&It.transceivers&&It.transceivers.forEach(function(_t){_t.iceTransport&&_t.iceTransport.state==="new"&&_t.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),_t.iceTransport.addRemoteCandidate({}))})},4e3),tt.resolve()},pt.prototype.close=function(){this.transceivers.forEach(function(Et){Et.iceTransport&&Et.iceTransport.stop(),Et.dtlsTransport&&Et.dtlsTransport.stop(),Et.rtpSender&&Et.rtpSender.stop(),Et.rtpReceiver&&Et.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},pt.prototype._updateSignalingState=function(Et){this.signalingState=Et;var It=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",It)},pt.prototype._maybeFireNegotiationNeeded=function(){var Et=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,lt.setTimeout(function(){if(Et.needNegotiation){Et.needNegotiation=!1;var It=new Event("negotiationneeded");Et._dispatchEvent("negotiationneeded",It)}},0))},pt.prototype._updateIceConnectionState=function(){var Et,It={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Wt){Wt.iceTransport&&!Wt.rejected&&It[Wt.iceTransport.state]++}),Et="new",It.failed>0?Et="failed":It.checking>0?Et="checking":It.disconnected>0?Et="disconnected":It.new>0?Et="new":It.connected>0?Et="connected":It.completed>0&&(Et="completed"),Et!==this.iceConnectionState){this.iceConnectionState=Et;var Gt=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",Gt)}},pt.prototype._updateConnectionState=function(){var Et,It={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Wt){Wt.iceTransport&&Wt.dtlsTransport&&!Wt.rejected&&(It[Wt.iceTransport.state]++,It[Wt.dtlsTransport.state]++)}),It.connected+=It.completed,Et="new",It.failed>0?Et="failed":It.connecting>0?Et="connecting":It.disconnected>0?Et="disconnected":It.new>0?Et="new":It.connected>0&&(Et="connected"),Et!==this.connectionState){this.connectionState=Et;var Gt=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",Gt)}},pt.prototype.createOffer=function(){var Et=this;if(Et._isClosed)return tt.reject(ut("InvalidStateError","Can not call createOffer after close"));var It=Et.transceivers.filter(function(Vt){return Vt.kind==="audio"}).length,Gt=Et.transceivers.filter(function(Vt){return Vt.kind==="video"}).length,Wt=arguments[0];if(Wt){if(Wt.mandatory||Wt.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");Wt.offerToReceiveAudio!==void 0&&(Wt.offerToReceiveAudio===!0?It=1:Wt.offerToReceiveAudio===!1?It=0:It=Wt.offerToReceiveAudio),Wt.offerToReceiveVideo!==void 0&&(Wt.offerToReceiveVideo===!0?Gt=1:Wt.offerToReceiveVideo===!1?Gt=0:Gt=Wt.offerToReceiveVideo)}for(Et.transceivers.forEach(function(Vt){Vt.kind==="audio"?(It--,It<0&&(Vt.wantReceive=!1)):Vt.kind==="video"&&(Gt--,Gt<0&&(Vt.wantReceive=!1))});It>0||Gt>0;)It>0&&(Et._createTransceiver("audio"),It--),Gt>0&&(Et._createTransceiver("video"),Gt--);var At=nt.writeSessionBoilerplate(Et._sdpSessionId,Et._sdpSessionVersion++);Et.transceivers.forEach(function(Vt,Nt){var tn=Vt.track,_t=Vt.kind,Kt=Vt.mid||nt.generateIdentifier();Vt.mid=Kt,Vt.iceGatherer||(Vt.iceGatherer=Et._createIceGatherer(Nt,Et.usingBundle));var cn=lt.RTCRtpSender.getCapabilities(_t);dt<15019&&(cn.codecs=cn.codecs.filter(function(mn){return mn.name!=="rtx"})),cn.codecs.forEach(function(mn){mn.name==="H264"&&mn.parameters["level-asymmetry-allowed"]===void 0&&(mn.parameters["level-asymmetry-allowed"]="1"),Vt.remoteCapabilities&&Vt.remoteCapabilities.codecs&&Vt.remoteCapabilities.codecs.forEach(function(on){mn.name.toLowerCase()===on.name.toLowerCase()&&mn.clockRate===on.clockRate&&(mn.preferredPayloadType=on.payloadType)})}),cn.headerExtensions.forEach(function(mn){var on=Vt.remoteCapabilities&&Vt.remoteCapabilities.headerExtensions||[];on.forEach(function(yn){mn.uri===yn.uri&&(mn.id=yn.id)})});var an=Vt.sendEncodingParameters||[{ssrc:(2*Nt+1)*1001}];tn&&dt>=15019&&_t==="video"&&!an[0].rtx&&(an[0].rtx={ssrc:an[0].ssrc+1}),Vt.wantReceive&&(Vt.rtpReceiver=new lt.RTCRtpReceiver(Vt.dtlsTransport,_t)),Vt.localCapabilities=cn,Vt.sendEncodingParameters=an}),Et._config.bundlePolicy!=="max-compat"&&(At+="a=group:BUNDLE "+Et.transceivers.map(function(Vt){return Vt.mid}).join(" ")+`\r
`),At+=`a=ice-options:trickle\r
`,Et.transceivers.forEach(function(Vt,Nt){At+=it(Vt,Vt.localCapabilities,"offer",Vt.stream,Et._dtlsRole),At+=`a=rtcp-rsize\r
`,Vt.iceGatherer&&Et.iceGatheringState!=="new"&&(Nt===0||!Et.usingBundle)&&(Vt.iceGatherer.getLocalCandidates().forEach(function(tn){tn.component=1,At+="a="+nt.writeCandidate(tn)+`\r
`}),Vt.iceGatherer.state==="completed"&&(At+=`a=end-of-candidates\r
`))});var kt=new lt.RTCSessionDescription({type:"offer",sdp:At});return tt.resolve(kt)},pt.prototype.createAnswer=function(){var Et=this;if(Et._isClosed)return tt.reject(ut("InvalidStateError","Can not call createAnswer after close"));if(!(Et.signalingState==="have-remote-offer"||Et.signalingState==="have-local-pranswer"))return tt.reject(ut("InvalidStateError","Can not call createAnswer in signalingState "+Et.signalingState));var It=nt.writeSessionBoilerplate(Et._sdpSessionId,Et._sdpSessionVersion++);Et.usingBundle&&(It+="a=group:BUNDLE "+Et.transceivers.map(function(At){return At.mid}).join(" ")+`\r
`),It+=`a=ice-options:trickle\r
`;var Gt=nt.getMediaSections(Et._remoteDescription.sdp).length;Et.transceivers.forEach(function(At,kt){if(!(kt+1>Gt)){if(At.rejected){At.kind==="application"?At.protocol==="DTLS/SCTP"?It+=`m=application 0 DTLS/SCTP 5000\r
`:It+="m=application 0 "+At.protocol+` webrtc-datachannel\r
`:At.kind==="audio"?It+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:At.kind==="video"&&(It+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),It+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+At.mid+`\r
`;return}if(At.stream){var Vt;At.kind==="audio"?Vt=At.stream.getAudioTracks()[0]:At.kind==="video"&&(Vt=At.stream.getVideoTracks()[0]),Vt&&dt>=15019&&At.kind==="video"&&!At.sendEncodingParameters[0].rtx&&(At.sendEncodingParameters[0].rtx={ssrc:At.sendEncodingParameters[0].ssrc+1})}var Nt=st(At.localCapabilities,At.remoteCapabilities),tn=Nt.codecs.filter(function(_t){return _t.name.toLowerCase()==="rtx"}).length;!tn&&At.sendEncodingParameters[0].rtx&&delete At.sendEncodingParameters[0].rtx,It+=it(At,Nt,"answer",At.stream,Et._dtlsRole),At.rtcpParameters&&At.rtcpParameters.reducedSize&&(It+=`a=rtcp-rsize\r
`)}});var Wt=new lt.RTCSessionDescription({type:"answer",sdp:It});return tt.resolve(Wt)},pt.prototype.addIceCandidate=function(Et){var It=this,Gt;return Et&&!(Et.sdpMLineIndex!==void 0||Et.sdpMid)?tt.reject(new TypeError("sdpMLineIndex or sdpMid required")):new tt(function(Wt,At){if(It._remoteDescription)if(!Et||Et.candidate==="")for(var kt=0;kt<It.transceivers.length&&!(!It.transceivers[kt].rejected&&(It.transceivers[kt].iceTransport.addRemoteCandidate({}),Gt=nt.getMediaSections(It._remoteDescription.sdp),Gt[kt]+=`a=end-of-candidates\r
`,It._remoteDescription.sdp=nt.getDescription(It._remoteDescription.sdp)+Gt.join(""),It.usingBundle));kt++);else{var Vt=Et.sdpMLineIndex;if(Et.sdpMid){for(var Nt=0;Nt<It.transceivers.length;Nt++)if(It.transceivers[Nt].mid===Et.sdpMid){Vt=Nt;break}}var tn=It.transceivers[Vt];if(tn){if(tn.rejected)return Wt();var _t=Object.keys(Et.candidate).length>0?nt.parseCandidate(Et.candidate):{};if(_t.protocol==="tcp"&&(_t.port===0||_t.port===9)||_t.component&&_t.component!==1)return Wt();if((Vt===0||Vt>0&&tn.iceTransport!==It.transceivers[0].iceTransport)&&!ct(tn.iceTransport,_t))return At(ut("OperationError","Can not add ICE candidate"));var Kt=Et.candidate.trim();Kt.indexOf("a=")===0&&(Kt=Kt.substr(2)),Gt=nt.getMediaSections(It._remoteDescription.sdp),Gt[Vt]+="a="+(_t.type?Kt:"end-of-candidates")+`\r
`,It._remoteDescription.sdp=nt.getDescription(It._remoteDescription.sdp)+Gt.join("")}else return At(ut("OperationError","Can not add ICE candidate"))}else return At(ut("InvalidStateError","Can not add ICE candidate without a remote description"));Wt()})},pt.prototype.getStats=function(Et){if(Et&&Et instanceof lt.MediaStreamTrack){var It=null;if(this.transceivers.forEach(function(Wt){Wt.rtpSender&&Wt.rtpSender.track===Et?It=Wt.rtpSender:Wt.rtpReceiver&&Wt.rtpReceiver.track===Et&&(It=Wt.rtpReceiver)}),!It)throw ut("InvalidAccessError","Invalid selector.");return It.getStats()}var Gt=[];return this.transceivers.forEach(function(Wt){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(At){Wt[At]&&Gt.push(Wt[At].getStats())})}),tt.all(Gt).then(function(Wt){var At=new Map;return Wt.forEach(function(kt){kt.forEach(function(Vt){At.set(Vt.id,Vt)})}),At})};var gt=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];gt.forEach(function(Et){var It=lt[Et];if(It&&It.prototype&&It.prototype.getStats){var Gt=It.prototype.getStats;It.prototype.getStats=function(){return Gt.apply(this).then(function(Wt){var At=new Map;return Object.keys(Wt).forEach(function(kt){Wt[kt].type=rt(Wt[kt]),At.set(kt,Wt[kt])}),At})}}});var yt=["createOffer","createAnswer"];return yt.forEach(function(Et){var It=pt.prototype[Et];pt.prototype[Et]=function(){var Gt=arguments;return typeof Gt[0]=="function"||typeof Gt[1]=="function"?It.apply(this,[arguments[2]]).then(function(Wt){typeof Gt[0]=="function"&&Gt[0].apply(null,[Wt])},function(Wt){typeof Gt[1]=="function"&&Gt[1].apply(null,[Wt])}):It.apply(this,arguments)}}),yt=["setLocalDescription","setRemoteDescription","addIceCandidate"],yt.forEach(function(Et){var It=pt.prototype[Et];pt.prototype[Et]=function(){var Gt=arguments;return typeof Gt[1]=="function"||typeof Gt[2]=="function"?It.apply(this,arguments).then(function(){typeof Gt[1]=="function"&&Gt[1].apply(null)},function(Wt){typeof Gt[2]=="function"&&Gt[2].apply(null,[Wt])}):It.apply(this,arguments)}}),["getStats"].forEach(function(Et){var It=pt.prototype[Et];pt.prototype[Et]=function(){var Gt=arguments;return typeof Gt[1]=="function"?It.apply(this,arguments).then(function(){typeof Gt[1]=="function"&&Gt[1].apply(null)}):It.apply(this,arguments)}}),pt}}).call(this,b(0))},function(_e,et,b){(function(tt){_e.exports=function(nt){var rt=nt&&nt.navigator,it=function(st){return{name:{PermissionDeniedError:"NotAllowedError"}[st.name]||st.name,message:st.message,constraint:st.constraint,toString:function(){return this.name}}},ot=rt.mediaDevices.getUserMedia.bind(rt.mediaDevices);rt.mediaDevices.getUserMedia=function(st){return ot(st).catch(function(at){return tt.reject(it(at))})}}}).call(this,b(0))},function(_e,et,b){(function(tt){var nt=b(27);_e.exports={shimGetUserMedia:b(575),shimOnTrack:function(rt){typeof rt=="object"&&rt.RTCPeerConnection&&!("ontrack"in rt.RTCPeerConnection.prototype)&&Object.defineProperty(rt.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(it){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=it),this.addEventListener("addstream",this._ontrackpoly=function(ot){ot.stream.getTracks().forEach(function(st){var at=new Event("track");at.track=st,at.receiver={track:st},at.transceiver={receiver:at.receiver},at.streams=[ot.stream],this.dispatchEvent(at)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),typeof rt=="object"&&rt.RTCTrackEvent&&"receiver"in rt.RTCTrackEvent.prototype&&!("transceiver"in rt.RTCTrackEvent.prototype)&&Object.defineProperty(rt.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(rt){typeof rt=="object"&&rt.HTMLMediaElement&&!("srcObject"in rt.HTMLMediaElement.prototype)&&Object.defineProperty(rt.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(it){this.mozSrcObject=it}})},shimPeerConnection:function(rt){var it=nt.detectBrowser(rt);if(!(typeof rt!="object"||!(rt.RTCPeerConnection||rt.mozRTCPeerConnection))){rt.RTCPeerConnection||(rt.RTCPeerConnection=function(ut,lt){if(it.version<38&&ut&&ut.iceServers){for(var dt=[],ft=0;ft<ut.iceServers.length;ft++){var St=ut.iceServers[ft];if(St.hasOwnProperty("urls"))for(var Tt=0;Tt<St.urls.length;Tt++){var pt={url:St.urls[Tt]};St.urls[Tt].indexOf("turn")===0&&(pt.username=St.username,pt.credential=St.credential),dt.push(pt)}else dt.push(ut.iceServers[ft])}ut.iceServers=dt}return new rt.mozRTCPeerConnection(ut,lt)},rt.RTCPeerConnection.prototype=rt.mozRTCPeerConnection.prototype,rt.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(rt.RTCPeerConnection,"generateCertificate",{get:function(){return rt.mozRTCPeerConnection.generateCertificate}}),rt.RTCSessionDescription=rt.mozRTCSessionDescription,rt.RTCIceCandidate=rt.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(ut){var lt=rt.RTCPeerConnection.prototype[ut];rt.RTCPeerConnection.prototype[ut]=function(){return arguments[0]=new(ut==="addIceCandidate"?rt.RTCIceCandidate:rt.RTCSessionDescription)(arguments[0]),lt.apply(this,arguments)}});var ot=rt.RTCPeerConnection.prototype.addIceCandidate;rt.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?ot.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),tt.resolve())};var st=function(ut){var lt=new Map;return Object.keys(ut).forEach(function(dt){lt.set(dt,ut[dt]),lt[dt]=ut[dt]}),lt},at={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},ct=rt.RTCPeerConnection.prototype.getStats;rt.RTCPeerConnection.prototype.getStats=function(ut,lt,dt){return ct.apply(this,[ut||null]).then(function(ft){if(it.version<48&&(ft=st(ft)),it.version<53&&!lt)try{ft.forEach(function(St){St.type=at[St.type]||St.type})}catch(St){if(St.name!=="TypeError")throw St;ft.forEach(function(Tt,pt){ft.set(pt,Object.assign({},Tt,{type:at[Tt.type]||Tt.type}))})}return ft}).then(lt,dt)}}},shimSenderGetStats:function(rt){if(typeof rt=="object"&&rt.RTCPeerConnection&&rt.RTCRtpSender&&!(rt.RTCRtpSender&&"getStats"in rt.RTCRtpSender.prototype)){var it=rt.RTCPeerConnection.prototype.getSenders;it&&(rt.RTCPeerConnection.prototype.getSenders=function(){var st=this,at=it.apply(st,[]);return at.forEach(function(ct){ct._pc=st}),at});var ot=rt.RTCPeerConnection.prototype.addTrack;ot&&(rt.RTCPeerConnection.prototype.addTrack=function(){var st=ot.apply(this,arguments);return st._pc=this,st}),rt.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):tt.resolve(new Map)}}},shimReceiverGetStats:function(rt){if(typeof rt=="object"&&rt.RTCPeerConnection&&rt.RTCRtpSender&&!(rt.RTCRtpSender&&"getStats"in rt.RTCRtpReceiver.prototype)){var it=rt.RTCPeerConnection.prototype.getReceivers;it&&(rt.RTCPeerConnection.prototype.getReceivers=function(){var ot=this,st=it.apply(ot,[]);return st.forEach(function(at){at._pc=ot}),st}),nt.wrapPeerConnectionEvent(rt,"track",function(ot){return ot.receiver._pc=ot.srcElement,ot}),rt.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(rt){!rt.RTCPeerConnection||"removeStream"in rt.RTCPeerConnection.prototype||(rt.RTCPeerConnection.prototype.removeStream=function(it){var ot=this;nt.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(st){st.track&&it.getTracks().indexOf(st.track)!==-1&&ot.removeTrack(st)})})},shimRTCDataChannel:function(rt){rt.DataChannel&&!rt.RTCDataChannel&&(rt.RTCDataChannel=rt.DataChannel)},shimGetDisplayMedia:function(rt,it){!rt.navigator||!rt.navigator.mediaDevices||"getDisplayMedia"in rt.navigator.mediaDevices||(rt.navigator.mediaDevices.getDisplayMedia=function(ot){if(!(ot&&ot.video)){var st=new DOMException("getDisplayMedia without video constraints is undefined");return st.name="NotFoundError",st.code=8,tt.reject(st)}return ot.video===!0?ot.video={mediaSource:it}:ot.video.mediaSource=it,rt.navigator.mediaDevices.getUserMedia(ot)},rt.navigator.getDisplayMedia=function(ot){return nt.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),rt.navigator.mediaDevices.getDisplayMedia(ot)})}}}).call(this,b(0))},function(_e,et,b){(function(tt){var nt=b(27),rt=nt.log;_e.exports=function(it){var ot=nt.detectBrowser(it),st=it&&it.navigator,at=it&&it.MediaStreamTrack,ct=function(yt){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[yt.name]||yt.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[yt.message]||yt.message,constraint:yt.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},ut=function(yt,Et,It){var Gt=function(Wt){if(typeof Wt!="object"||Wt.require)return Wt;var At=[];return Object.keys(Wt).forEach(function(kt){if(!(kt==="require"||kt==="advanced"||kt==="mediaSource")){var Vt=Wt[kt]=typeof Wt[kt]=="object"?Wt[kt]:{ideal:Wt[kt]};if((Vt.min!==void 0||Vt.max!==void 0||Vt.exact!==void 0)&&At.push(kt),Vt.exact!==void 0&&(typeof Vt.exact=="number"?Vt.min=Vt.max=Vt.exact:Wt[kt]=Vt.exact,delete Vt.exact),Vt.ideal!==void 0){Wt.advanced=Wt.advanced||[];var Nt={};typeof Vt.ideal=="number"?Nt[kt]={min:Vt.ideal,max:Vt.ideal}:Nt[kt]=Vt.ideal,Wt.advanced.push(Nt),delete Vt.ideal,Object.keys(Vt).length||delete Wt[kt]}}}),At.length&&(Wt.require=At),Wt};return yt=JSON.parse(JSON.stringify(yt)),ot.version<38&&(rt("spec: "+JSON.stringify(yt)),yt.audio&&(yt.audio=Gt(yt.audio)),yt.video&&(yt.video=Gt(yt.video)),rt("ff37: "+JSON.stringify(yt))),st.mozGetUserMedia(yt,Et,function(Wt){It(ct(Wt))})},lt=function(yt){return new tt(function(Et,It){ut(yt,Et,It)})};if(st.mediaDevices||(st.mediaDevices={getUserMedia:lt,addEventListener:function(){},removeEventListener:function(){}}),st.mediaDevices.enumerateDevices=st.mediaDevices.enumerateDevices||function(){return new tt(function(yt){var Et=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];yt(Et)})},ot.version<41){var dt=st.mediaDevices.enumerateDevices.bind(st.mediaDevices);st.mediaDevices.enumerateDevices=function(){return dt().then(void 0,function(yt){if(yt.name==="NotFoundError")return[];throw yt})}}if(ot.version<49){var ft=st.mediaDevices.getUserMedia.bind(st.mediaDevices);st.mediaDevices.getUserMedia=function(yt){return ft(yt).then(function(Et){if(yt.audio&&!Et.getAudioTracks().length||yt.video&&!Et.getVideoTracks().length)throw Et.getTracks().forEach(function(It){It.stop()}),new DOMException("The object can not be found here.","NotFoundError");return Et},function(Et){return tt.reject(ct(Et))})}}if(!(ot.version>55&&"autoGainControl"in st.mediaDevices.getSupportedConstraints())){var St=function(yt,Et,It){Et in yt&&!(It in yt)&&(yt[It]=yt[Et],delete yt[Et])},Tt=st.mediaDevices.getUserMedia.bind(st.mediaDevices);if(st.mediaDevices.getUserMedia=function(yt){return typeof yt=="object"&&typeof yt.audio=="object"&&(yt=JSON.parse(JSON.stringify(yt)),St(yt.audio,"autoGainControl","mozAutoGainControl"),St(yt.audio,"noiseSuppression","mozNoiseSuppression")),Tt(yt)},at&&at.prototype.getSettings){var pt=at.prototype.getSettings;at.prototype.getSettings=function(){var yt=pt.apply(this,arguments);return St(yt,"mozAutoGainControl","autoGainControl"),St(yt,"mozNoiseSuppression","noiseSuppression"),yt}}if(at&&at.prototype.applyConstraints){var gt=at.prototype.applyConstraints;at.prototype.applyConstraints=function(yt){return this.kind==="audio"&&typeof yt=="object"&&(yt=JSON.parse(JSON.stringify(yt)),St(yt,"autoGainControl","mozAutoGainControl"),St(yt,"noiseSuppression","mozNoiseSuppression")),gt.apply(this,[yt])}}}st.getUserMedia=function(yt,Et,It){if(ot.version<44)return ut(yt,Et,It);nt.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),st.mediaDevices.getUserMedia(yt).then(Et,It)}}}).call(this,b(0))},function(_e,et,b){(function(tt){var nt=b(27);_e.exports={shimLocalStreamsAPI:function(rt){if(!(typeof rt!="object"||!rt.RTCPeerConnection)){if("getLocalStreams"in rt.RTCPeerConnection.prototype||(rt.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in rt.RTCPeerConnection.prototype||(rt.RTCPeerConnection.prototype.getStreamById=function(ot){var st=null;return this._localStreams&&this._localStreams.forEach(function(at){at.id===ot&&(st=at)}),this._remoteStreams&&this._remoteStreams.forEach(function(at){at.id===ot&&(st=at)}),st}),!("addStream"in rt.RTCPeerConnection.prototype)){var it=rt.RTCPeerConnection.prototype.addTrack;rt.RTCPeerConnection.prototype.addStream=function(ot){this._localStreams||(this._localStreams=[]),this._localStreams.indexOf(ot)===-1&&this._localStreams.push(ot);var st=this;ot.getTracks().forEach(function(at){it.call(st,at,ot)})},rt.RTCPeerConnection.prototype.addTrack=function(ot,st){return st&&(this._localStreams?this._localStreams.indexOf(st)===-1&&this._localStreams.push(st):this._localStreams=[st]),it.call(this,ot,st)}}"removeStream"in rt.RTCPeerConnection.prototype||(rt.RTCPeerConnection.prototype.removeStream=function(ot){this._localStreams||(this._localStreams=[]);var st=this._localStreams.indexOf(ot);if(st!==-1){this._localStreams.splice(st,1);var at=this,ct=ot.getTracks();this.getSenders().forEach(function(ut){ct.indexOf(ut.track)!==-1&&at.removeTrack(ut)})}})}},shimRemoteStreamsAPI:function(rt){if(!(typeof rt!="object"||!rt.RTCPeerConnection)&&("getRemoteStreams"in rt.RTCPeerConnection.prototype||(rt.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in rt.RTCPeerConnection.prototype))){Object.defineProperty(rt.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(ot){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=ot)}});var it=rt.RTCPeerConnection.prototype.setRemoteDescription;rt.RTCPeerConnection.prototype.setRemoteDescription=function(){var ot=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(st){st.streams.forEach(function(at){if(ot._remoteStreams||(ot._remoteStreams=[]),!(ot._remoteStreams.indexOf(at)>=0)){ot._remoteStreams.push(at);var ct=new Event("addstream");ct.stream=at,ot.dispatchEvent(ct)}})}),it.apply(ot,arguments)}}},shimCallbacksAPI:function(rt){if(!(typeof rt!="object"||!rt.RTCPeerConnection)){var it=rt.RTCPeerConnection.prototype,ot=it.createOffer,st=it.createAnswer,at=it.setLocalDescription,ct=it.setRemoteDescription,ut=it.addIceCandidate;it.createOffer=function(dt,ft){var St=arguments.length>=2?arguments[2]:arguments[0],Tt=ot.apply(this,[St]);return ft?(Tt.then(dt,ft),tt.resolve()):Tt},it.createAnswer=function(dt,ft){var St=arguments.length>=2?arguments[2]:arguments[0],Tt=st.apply(this,[St]);return ft?(Tt.then(dt,ft),tt.resolve()):Tt};var lt=function(dt,ft,St){var Tt=at.apply(this,[dt]);return St?(Tt.then(ft,St),tt.resolve()):Tt};it.setLocalDescription=lt,lt=function(dt,ft,St){var Tt=ct.apply(this,[dt]);return St?(Tt.then(ft,St),tt.resolve()):Tt},it.setRemoteDescription=lt,lt=function(dt,ft,St){var Tt=ut.apply(this,[dt]);return St?(Tt.then(ft,St),tt.resolve()):Tt},it.addIceCandidate=lt}},shimGetUserMedia:function(rt){var it=rt&&rt.navigator;it.getUserMedia||(it.webkitGetUserMedia?it.getUserMedia=it.webkitGetUserMedia.bind(it):it.mediaDevices&&it.mediaDevices.getUserMedia&&(it.getUserMedia=function(ot,st,at){it.mediaDevices.getUserMedia(ot).then(st,at)}.bind(it)))},shimRTCIceServerUrls:function(rt){var it=rt.RTCPeerConnection;rt.RTCPeerConnection=function(ot,st){if(ot&&ot.iceServers){for(var at=[],ct=0;ct<ot.iceServers.length;ct++){var ut=ot.iceServers[ct];!ut.hasOwnProperty("urls")&&ut.hasOwnProperty("url")?(nt.deprecated("RTCIceServer.url","RTCIceServer.urls"),ut=JSON.parse(JSON.stringify(ut)),ut.urls=ut.url,delete ut.url,at.push(ut)):at.push(ot.iceServers[ct])}ot.iceServers=at}return new it(ot,st)},rt.RTCPeerConnection.prototype=it.prototype,"generateCertificate"in rt.RTCPeerConnection&&Object.defineProperty(rt.RTCPeerConnection,"generateCertificate",{get:function(){return it.generateCertificate}})},shimTrackEventTransceiver:function(rt){typeof rt=="object"&&rt.RTCPeerConnection&&"receiver"in rt.RTCTrackEvent.prototype&&!rt.RTCTransceiver&&Object.defineProperty(rt.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(rt){var it=rt.RTCPeerConnection.prototype.createOffer;rt.RTCPeerConnection.prototype.createOffer=function(ot){var st=this;if(ot){typeof ot.offerToReceiveAudio<"u"&&(ot.offerToReceiveAudio=!!ot.offerToReceiveAudio);var at=st.getTransceivers().find(function(ut){return ut.sender.track&&ut.sender.track.kind==="audio"});ot.offerToReceiveAudio===!1&&at?at.direction==="sendrecv"?at.setDirection?at.setDirection("sendonly"):at.direction="sendonly":at.direction==="recvonly"&&(at.setDirection?at.setDirection("inactive"):at.direction="inactive"):ot.offerToReceiveAudio===!0&&!at&&st.addTransceiver("audio"),typeof ot.offerToReceiveVideo<"u"&&(ot.offerToReceiveVideo=!!ot.offerToReceiveVideo);var ct=st.getTransceivers().find(function(ut){return ut.sender.track&&ut.sender.track.kind==="video"});ot.offerToReceiveVideo===!1&&ct?ct.direction==="sendrecv"?ct.setDirection("sendonly"):ct.direction==="recvonly"&&ct.setDirection("inactive"):ot.offerToReceiveVideo===!0&&!ct&&st.addTransceiver("video")}return it.apply(st,arguments)}}}}).call(this,b(0))},function(_e,et,b){var tt=b(250),nt=b(27);_e.exports={shimRTCIceCandidate:function(rt){if(!(!rt.RTCIceCandidate||rt.RTCIceCandidate&&"foundation"in rt.RTCIceCandidate.prototype)){var it=rt.RTCIceCandidate;rt.RTCIceCandidate=function(ot){if(typeof ot=="object"&&ot.candidate&&ot.candidate.indexOf("a=")===0&&(ot=JSON.parse(JSON.stringify(ot)),ot.candidate=ot.candidate.substr(2)),ot.candidate&&ot.candidate.length){var st=new it(ot),at=tt.parseCandidate(ot.candidate),ct=Object.assign(st,at);return ct.toJSON=function(){return{candidate:ct.candidate,sdpMid:ct.sdpMid,sdpMLineIndex:ct.sdpMLineIndex,usernameFragment:ct.usernameFragment}},ct}return new it(ot)},rt.RTCIceCandidate.prototype=it.prototype,nt.wrapPeerConnectionEvent(rt,"icecandidate",function(ot){return ot.candidate&&Object.defineProperty(ot,"candidate",{value:new rt.RTCIceCandidate(ot.candidate),writable:"false"}),ot})}},shimCreateObjectURL:function(rt){var it=rt&&rt.URL;if(typeof rt=="object"&&rt.HTMLMediaElement&&"srcObject"in rt.HTMLMediaElement.prototype&&it.createObjectURL&&it.revokeObjectURL){var ot=it.createObjectURL.bind(it),st=it.revokeObjectURL.bind(it),at=new Map,ct=0;it.createObjectURL=function(dt){if("getTracks"in dt){var ft="polyblob:"+ ++ct;return at.set(ft,dt),nt.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),ft}return ot(dt)},it.revokeObjectURL=function(dt){st(dt),at.delete(dt)};var ut=Object.getOwnPropertyDescriptor(rt.HTMLMediaElement.prototype,"src");Object.defineProperty(rt.HTMLMediaElement.prototype,"src",{get:function(){return ut.get.apply(this)},set:function(dt){return this.srcObject=at.get(dt)||null,ut.set.apply(this,[dt])}});var lt=rt.HTMLMediaElement.prototype.setAttribute;rt.HTMLMediaElement.prototype.setAttribute=function(){return arguments.length===2&&(""+arguments[0]).toLowerCase()==="src"&&(this.srcObject=at.get(arguments[1])||null),lt.apply(this,arguments)}}},shimMaxMessageSize:function(rt){if(!(rt.RTCSctpTransport||!rt.RTCPeerConnection)){var it=nt.detectBrowser(rt);"sctp"in rt.RTCPeerConnection.prototype||Object.defineProperty(rt.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp}});var ot=function(lt){var dt=tt.splitSections(lt.sdp);return dt.shift(),dt.some(function(ft){var St=tt.parseMLine(ft);return St&&St.kind==="application"&&St.protocol.indexOf("SCTP")!==-1})},st=function(lt){var dt=lt.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(dt===null||dt.length<2)return-1;var ft=parseInt(dt[1],10);return ft!==ft?-1:ft},at=function(lt){var dt=65536;return it.browser==="firefox"&&(it.version<57?lt===-1?dt=16384:dt=2147483637:it.version<60?dt=it.version===57?65535:65536:dt=2147483637),dt},ct=function(lt,dt){var ft=65536;it.browser==="firefox"&&it.version===57&&(ft=65535);var St=tt.matchPrefix(lt.sdp,"a=max-message-size:");return St.length>0?ft=parseInt(St[0].substr(19),10):it.browser==="firefox"&&dt!==-1&&(ft=2147483637),ft},ut=rt.RTCPeerConnection.prototype.setRemoteDescription;rt.RTCPeerConnection.prototype.setRemoteDescription=function(){var lt=this;if(lt._sctp=null,ot(arguments[0])){var dt=st(arguments[0]),ft=at(dt),St=ct(arguments[0],dt),Tt;ft===0&&St===0?Tt=Number.POSITIVE_INFINITY:ft===0||St===0?Tt=Math.max(ft,St):Tt=Math.min(ft,St);var pt={};Object.defineProperty(pt,"maxMessageSize",{get:function(){return Tt}}),lt._sctp=pt}return ut.apply(lt,arguments)}}},shimSendThrowTypeError:function(rt){if(!(rt.RTCPeerConnection&&"createDataChannel"in rt.RTCPeerConnection.prototype))return;function it(st,at){var ct=st.send;st.send=function(){var ut=arguments[0],lt=ut.length||ut.size||ut.byteLength;if(st.readyState==="open"&&at.sctp&&lt>at.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+at.sctp.maxMessageSize+" bytes)");return ct.apply(st,arguments)}}var ot=rt.RTCPeerConnection.prototype.createDataChannel;rt.RTCPeerConnection.prototype.createDataChannel=function(){var st=this,at=ot.apply(st,arguments);return it(at,st),at},nt.wrapPeerConnectionEvent(rt,"datachannel",function(st){return it(st.channel,st.target),st})}}},function(_e,et,b){(function(tt){const nt=b(6);function rt(){return typeof document>"u"||document.readyState==="complete"||document.readyState==="interactive"&&document.body}let it=!1;const ot={isDomLoaded:rt,isDomUnloaded(){return it},whenUnloaded:new tt(st=>{if(typeof window<"u"){const at=()=>{it=!0,ot.emit("unload"),st()};window.addEventListener("unload",at)}}),whenLoaded:new tt(st=>{if(rt()){st();return}const at=()=>{document.removeEventListener("DOMContentLoaded",at),document.removeEventListener("load",at),ot.emit("load"),st()};document.addEventListener("DOMContentLoaded",at),document.addEventListener("load",at)})};nt(ot),_e.exports=ot}).call(this,b(0))},function(_e,et,b){var tt=b(78),nt=b(255),rt=b(238),it=b(580),ot=b(11),st=b(53),at=b(256);function ct(ut,lt,dt,ft,St){ut!==lt&&rt(lt,function(Tt,pt){if(St||(St=new tt),ot(Tt))it(ut,lt,pt,dt,ct,ft,St);else{var gt=ft?ft(at(ut,pt),Tt,pt+"",ut,lt,St):void 0;gt===void 0&&(gt=Tt),nt(ut,pt,gt)}},st)}_e.exports=ct},function(_e,et,b){var tt=b(255),nt=b(179),rt=b(188),it=b(54),ot=b(189),st=b(63),at=b(12),ct=b(131),ut=b(64),lt=b(16),dt=b(11),ft=b(138),St=b(85),Tt=b(256),pt=b(581);function gt(yt,Et,It,Gt,Wt,At,kt){var Vt=Tt(yt,It),Nt=Tt(Et,It),tn=kt.get(Nt);if(tn){tt(yt,It,tn);return}var _t=At?At(Vt,Nt,It+"",yt,Et,kt):void 0,Kt=_t===void 0;if(Kt){var cn=at(Nt),an=!cn&&ut(Nt),mn=!cn&&!an&&St(Nt);_t=Nt,cn||an||mn?at(Vt)?_t=Vt:ct(Vt)?_t=it(Vt):an?(Kt=!1,_t=nt(Nt,!0)):mn?(Kt=!1,_t=rt(Nt,!0)):_t=[]:ft(Nt)||st(Nt)?(_t=Vt,st(Vt)?_t=pt(Vt):(!dt(Vt)||lt(Vt))&&(_t=ot(Nt))):Kt=!1}Kt&&(kt.set(Nt,_t),Wt(_t,Nt,Gt,At,kt),kt.delete(Nt)),tt(yt,It,_t)}_e.exports=gt},function(_e,et,b){var tt=b(40),nt=b(53);function rt(it){return tt(it,nt(it))}_e.exports=rt},function(_e,et,b){const tt=b(148),nt=b(257),rt=b(258),it=b(263),ot=b(1)("normalizeConstraintInput"),st={"320x240":{width:320,height:240},"320x180":{width:320,height:180},"640x480":{width:640,height:480},"640x360":{width:640,height:360},"1280x720":{width:1280,height:720},"1280x960":{width:1280,height:960},"1920x1080":{width:1920,height:1080}},at=[1,7,15,30];function ct(Tt){return Tt._inject&&Tt._inject.logging||ot}function ut(Tt,pt,gt,yt,Et){if(pt===void 0)return;const It=gt(pt);return It||Et.warn(`Invalid ${Tt} passed to the Publisher. Got: ${pt}, expecting one of ${yt}`),It}function lt(Tt,pt){const gt=ct(pt),yt=(()=>{const It=pt[`publish${rt(Tt)}`];return It!==void 0?!!It:!0})();let Et=(()=>{const It=pt[`${Tt}Source`];return It===void 0?!0:It===null||It===!1?!1:typeof It=="object"?pt[`isCustom${rt(Tt)}Track`]?!1:typeof It.deviceId!="string"?(gt.warn(`Invalid ${Tt}Source passed to Publisher. Expected either a device ID or device.`),!0):It.deviceId:typeof It!="string"?(gt.warn(`Ignoring invalid ${Tt}Source parameter`),!0):It})();return Tt==="audio"&&pt.isScreenSharing&&!it&&Et!==!1&&(pt.audioSource&&ct(pt).warn("Invalid audioSource passed to Publisher - when using screen sharing no audioSource may be used"),Et=!1),{source:Et,publish:yt}}function dt(Tt,pt){return Tt.name==="Chrome"&&Tt.userAgent.indexOf("Mac OS X")!==-1&&pt===1?2:pt}const ft=["user","environment","left","right"],St=(Tt,pt)=>{if(Tt===void 0||ft.indexOf(Tt)>=0)return Tt;ct(pt).warn(`Invalid facingMode passed to Publisher. Expected one of: ${ft.join(", ")}`)};_e.exports=function(pt){const gt=ct(pt),yt=pt.env||{},Et=pt.isScreenSharing,It=pt.isCustomAudioTrack,Gt=pt.isCustomVideoTrack;return Et&&!nt&&tt(pt.usingOptionalMandatoryStyle,"Screensharing only uses optional-mandatory constraints right now"),["echoCancellation","autoGainControl","noiseSuppression"].forEach(Wt=>{pt[Wt]!==!1&&Object.assign(pt,{[Wt]:!0})}),{isScreenSharing:Et,isCustomAudioTrack:It,isCustomVideoTrack:Gt,audio:lt("audio",pt),video:lt("video",pt),usingOptionalMandatoryStyle:pt.usingOptionalMandatoryStyle,enableRenegotiation:pt.enableRenegotiation,enableStereo:pt.enableStereo,noiseSuppression:pt.noiseSuppression,autoGainControl:pt.autoGainControl,echoCancellation:pt.echoCancellation,disableAudioProcessing:pt.disableAudioProcessing,videoDimensions:ut("resolution",pt.resolution,Wt=>st[Wt],`"${Object.keys(st).join('", "')}"`,gt),frameRate:dt(yt,ut("frameRate",pt.frameRate,Wt=>at.indexOf(Wt)!==-1?Wt:void 0,at.join(","),gt)),maxResolution:function(){if(pt.maxResolution===void 0)return Et?{width:1920,height:1920}:void 0;const Wt={width:pt.maxResolution.width,height:pt.maxResolution.height};return Object.keys(Wt).forEach(At=>{const kt=Wt[At];(typeof kt!="number"||kt>1920)&&(gt.warn(`Invalid maxResolution passed to the Publisher. maxResolution.${At} must be less than or equal to 1920`),Wt[At]=1920)}),Wt}(),facingMode:St(pt.facingMode,pt)}}},function(_e,et,b){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var tt=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;function it(st){if(st==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(st)}function ot(){try{if(!Object.assign)return!1;var st=new String("abc");if(st[5]="de",Object.getOwnPropertyNames(st)[0]==="5")return!1;for(var at={},ct=0;ct<10;ct++)at["_"+String.fromCharCode(ct)]=ct;var ut=Object.getOwnPropertyNames(at).map(function(dt){return at[dt]});if(ut.join("")!=="0123456789")return!1;var lt={};return"abcdefghijklmnopqrst".split("").forEach(function(dt){lt[dt]=dt}),Object.keys(Object.assign({},lt)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}_e.exports=ot()?Object.assign:function(st,at){for(var ct,ut=it(st),lt,dt=1;dt<arguments.length;dt++){ct=Object(arguments[dt]);for(var ft in ct)nt.call(ct,ft)&&(ut[ft]=ct[ft]);if(tt){lt=tt(ct);for(var St=0;St<lt.length;St++)rt.call(ct,lt[St])&&(ut[lt[St]]=ct[lt[St]])}}return ut}},function(_e,et,b){(function(tt,nt){var rt=Object.getOwnPropertyDescriptors||function(Vn){for(var Tn=Object.keys(Vn),Jn={},lr=0;lr<Tn.length;lr++)Jn[Tn[lr]]=Object.getOwnPropertyDescriptor(Vn,Tn[lr]);return Jn},it=/%[sdj%]/g;et.format=function(pn){if(!At(pn)){for(var Vn=[],Tn=0;Tn<arguments.length;Tn++)Vn.push(at(arguments[Tn]));return Vn.join(" ")}for(var Tn=1,Jn=arguments,lr=Jn.length,tr=String(pn).replace(it,function(Sr){if(Sr==="%%")return"%";if(Tn>=lr)return Sr;switch(Sr){case"%s":return String(Jn[Tn++]);case"%d":return Number(Jn[Tn++]);case"%j":try{return JSON.stringify(Jn[Tn++])}catch{return"[Circular]"}default:return Sr}}),Qn=Jn[Tn];Tn<lr;Qn=Jn[++Tn])It(Qn)||!tn(Qn)?tr+=" "+Qn:tr+=" "+at(Qn);return tr},et.deprecate=function(pn,Vn){if(typeof tt<"u"&&tt.noDeprecation===!0)return pn;if(typeof tt>"u")return function(){return et.deprecate(pn,Vn).apply(this,arguments)};var Tn=!1;function Jn(){if(!Tn){if(tt.throwDeprecation)throw new Error(Vn);tt.traceDeprecation?console.trace(Vn):console.error(Vn),Tn=!0}return pn.apply(this,arguments)}return Jn};var ot={},st;et.debuglog=function(pn){if(Vt(st)&&(st={}.NODE_DEBUG||""),pn=pn.toUpperCase(),!ot[pn])if(new RegExp("\\b"+pn+"\\b","i").test(st)){var Vn=tt.pid;ot[pn]=function(){var Tn=et.format.apply(et,arguments);console.error("%s %d: %s",pn,Vn,Tn)}}else ot[pn]=function(){};return ot[pn]};function at(pn,Vn){var Tn={seen:[],stylize:ut};return arguments.length>=3&&(Tn.depth=arguments[2]),arguments.length>=4&&(Tn.colors=arguments[3]),Et(Vn)?Tn.showHidden=Vn:Vn&&et._extend(Tn,Vn),Vt(Tn.showHidden)&&(Tn.showHidden=!1),Vt(Tn.depth)&&(Tn.depth=2),Vt(Tn.colors)&&(Tn.colors=!1),Vt(Tn.customInspect)&&(Tn.customInspect=!0),Tn.colors&&(Tn.stylize=ct),dt(Tn,pn,Tn.depth)}et.inspect=at,at.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},at.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ct(pn,Vn){var Tn=at.styles[Vn];return Tn?"\x1B["+at.colors[Tn][0]+"m"+pn+"\x1B["+at.colors[Tn][1]+"m":pn}function ut(pn,Vn){return pn}function lt(pn){var Vn={};return pn.forEach(function(Tn,Jn){Vn[Tn]=!0}),Vn}function dt(pn,Vn,Tn){if(pn.customInspect&&Vn&&cn(Vn.inspect)&&Vn.inspect!==et.inspect&&!(Vn.constructor&&Vn.constructor.prototype===Vn)){var Jn=Vn.inspect(Tn,pn);return At(Jn)||(Jn=dt(pn,Jn,Tn)),Jn}var lr=ft(pn,Vn);if(lr)return lr;var tr=Object.keys(Vn),Qn=lt(tr);if(pn.showHidden&&(tr=Object.getOwnPropertyNames(Vn)),Kt(Vn)&&(tr.indexOf("message")>=0||tr.indexOf("description")>=0))return St(Vn);if(tr.length===0){if(cn(Vn)){var Sr=Vn.name?": "+Vn.name:"";return pn.stylize("[Function"+Sr+"]","special")}if(Nt(Vn))return pn.stylize(RegExp.prototype.toString.call(Vn),"regexp");if(_t(Vn))return pn.stylize(Date.prototype.toString.call(Vn),"date");if(Kt(Vn))return St(Vn)}var vr="",Fr=!1,kr=["{","}"];if(yt(Vn)&&(Fr=!0,kr=["[","]"]),cn(Vn)){var jr=Vn.name?": "+Vn.name:"";vr=" [Function"+jr+"]"}if(Nt(Vn)&&(vr=" "+RegExp.prototype.toString.call(Vn)),_t(Vn)&&(vr=" "+Date.prototype.toUTCString.call(Vn)),Kt(Vn)&&(vr=" "+St(Vn)),tr.length===0&&(!Fr||Vn.length==0))return kr[0]+vr+kr[1];if(Tn<0)return Nt(Vn)?pn.stylize(RegExp.prototype.toString.call(Vn),"regexp"):pn.stylize("[Object]","special");pn.seen.push(Vn);var xo;return Fr?xo=Tt(pn,Vn,Tn,Qn,tr):xo=tr.map(function(Er){return pt(pn,Vn,Tn,Qn,Er,Fr)}),pn.seen.pop(),gt(xo,vr,kr)}function ft(pn,Vn){if(Vt(Vn))return pn.stylize("undefined","undefined");if(At(Vn)){var Tn="'"+JSON.stringify(Vn).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return pn.stylize(Tn,"string")}if(Wt(Vn))return pn.stylize(""+Vn,"number");if(Et(Vn))return pn.stylize(""+Vn,"boolean");if(It(Vn))return pn.stylize("null","null")}function St(pn){return"["+Error.prototype.toString.call(pn)+"]"}function Tt(pn,Vn,Tn,Jn,lr){for(var tr=[],Qn=0,Sr=Vn.length;Qn<Sr;++Qn)sn(Vn,String(Qn))?tr.push(pt(pn,Vn,Tn,Jn,String(Qn),!0)):tr.push("");return lr.forEach(function(vr){vr.match(/^\d+$/)||tr.push(pt(pn,Vn,Tn,Jn,vr,!0))}),tr}function pt(pn,Vn,Tn,Jn,lr,tr){var Qn,Sr,vr;if(vr=Object.getOwnPropertyDescriptor(Vn,lr)||{value:Vn[lr]},vr.get?vr.set?Sr=pn.stylize("[Getter/Setter]","special"):Sr=pn.stylize("[Getter]","special"):vr.set&&(Sr=pn.stylize("[Setter]","special")),sn(Jn,lr)||(Qn="["+lr+"]"),Sr||(pn.seen.indexOf(vr.value)<0?(It(Tn)?Sr=dt(pn,vr.value,null):Sr=dt(pn,vr.value,Tn-1),Sr.indexOf(`
`)>-1&&(tr?Sr=Sr.split(`
`).map(function(Fr){return"  "+Fr}).join(`
`).substr(2):Sr=`
`+Sr.split(`
`).map(function(Fr){return"   "+Fr}).join(`
`))):Sr=pn.stylize("[Circular]","special")),Vt(Qn)){if(tr&&lr.match(/^\d+$/))return Sr;Qn=JSON.stringify(""+lr),Qn.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Qn=Qn.substr(1,Qn.length-2),Qn=pn.stylize(Qn,"name")):(Qn=Qn.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Qn=pn.stylize(Qn,"string"))}return Qn+": "+Sr}function gt(pn,Vn,Tn){var Jn=pn.reduce(function(lr,tr){return tr.indexOf(`
`)>=0,lr+tr.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Jn>60?Tn[0]+(Vn===""?"":Vn+`
 `)+" "+pn.join(`,
  `)+" "+Tn[1]:Tn[0]+Vn+" "+pn.join(", ")+" "+Tn[1]}function yt(pn){return Array.isArray(pn)}et.isArray=yt;function Et(pn){return typeof pn=="boolean"}et.isBoolean=Et;function It(pn){return pn===null}et.isNull=It;function Gt(pn){return pn==null}et.isNullOrUndefined=Gt;function Wt(pn){return typeof pn=="number"}et.isNumber=Wt;function At(pn){return typeof pn=="string"}et.isString=At;function kt(pn){return typeof pn=="symbol"}et.isSymbol=kt;function Vt(pn){return pn===void 0}et.isUndefined=Vt;function Nt(pn){return tn(pn)&&mn(pn)==="[object RegExp]"}et.isRegExp=Nt;function tn(pn){return typeof pn=="object"&&pn!==null}et.isObject=tn;function _t(pn){return tn(pn)&&mn(pn)==="[object Date]"}et.isDate=_t;function Kt(pn){return tn(pn)&&(mn(pn)==="[object Error]"||pn instanceof Error)}et.isError=Kt;function cn(pn){return typeof pn=="function"}et.isFunction=cn;function an(pn){return pn===null||typeof pn=="boolean"||typeof pn=="number"||typeof pn=="string"||typeof pn=="symbol"||typeof pn>"u"}et.isPrimitive=an,et.isBuffer=b(585);function mn(pn){return Object.prototype.toString.call(pn)}function on(pn){return pn<10?"0"+pn.toString(10):pn.toString(10)}var yn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function fn(){var pn=new Date,Vn=[on(pn.getHours()),on(pn.getMinutes()),on(pn.getSeconds())].join(":");return[pn.getDate(),yn[pn.getMonth()],Vn].join(" ")}et.log=function(){console.log("%s - %s",fn(),et.format.apply(et,arguments))},et.inherits=b(586),et._extend=function(pn,Vn){if(!Vn||!tn(Vn))return pn;for(var Tn=Object.keys(Vn),Jn=Tn.length;Jn--;)pn[Tn[Jn]]=Vn[Tn[Jn]];return pn};function sn(pn,Vn){return Object.prototype.hasOwnProperty.call(pn,Vn)}var un=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;et.promisify=function(Vn){if(typeof Vn!="function")throw new TypeError('The "original" argument must be of type Function');if(un&&Vn[un]){var Tn=Vn[un];if(typeof Tn!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Tn,un,{value:Tn,enumerable:!1,writable:!1,configurable:!0}),Tn}function Tn(){for(var Jn,lr,tr=new nt(function(vr,Fr){Jn=vr,lr=Fr}),Qn=[],Sr=0;Sr<arguments.length;Sr++)Qn.push(arguments[Sr]);Qn.push(function(vr,Fr){vr?lr(vr):Jn(Fr)});try{Vn.apply(this,Qn)}catch(vr){lr(vr)}return tr}return Object.setPrototypeOf(Tn,Object.getPrototypeOf(Vn)),un&&Object.defineProperty(Tn,un,{value:Tn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Tn,rt(Vn))},et.promisify.custom=un;function Ln(pn,Vn){if(!pn){var Tn=new Error("Promise was rejected with a falsy value");Tn.reason=pn,pn=Tn}return Vn(pn)}function Xn(pn){if(typeof pn!="function")throw new TypeError('The "original" argument must be of type Function');function Vn(){for(var Tn=[],Jn=0;Jn<arguments.length;Jn++)Tn.push(arguments[Jn]);var lr=Tn.pop();if(typeof lr!="function")throw new TypeError("The last argument must be of type Function");var tr=this,Qn=function(){return lr.apply(tr,arguments)};pn.apply(this,Tn).then(function(Sr){tt.nextTick(Qn,null,Sr)},function(Sr){tt.nextTick(Ln,Sr,Qn)})}return Object.setPrototypeOf(Vn,Object.getPrototypeOf(pn)),Object.defineProperties(Vn,rt(pn)),Vn}et.callbackify=Xn}).call(this,b(42),b(0))},function(_e,et){_e.exports=function(tt){return tt&&typeof tt=="object"&&typeof tt.copy=="function"&&typeof tt.fill=="function"&&typeof tt.readUInt8=="function"}},function(_e,et){typeof Object.create=="function"?_e.exports=function(tt,nt){tt.super_=nt,tt.prototype=Object.create(nt.prototype,{constructor:{value:tt,enumerable:!1,writable:!0,configurable:!0}})}:_e.exports=function(tt,nt){tt.super_=nt;var rt=function(){};rt.prototype=nt.prototype,tt.prototype=new rt,tt.prototype.constructor=tt}},function(_e,et,b){var tt=b(588),nt=b(261),rt=b(262),it=b(59);function ot(st){return function(at){at=it(at);var ct=nt(at)?rt(at):void 0,ut=ct?ct[0]:at.charAt(0),lt=ct?tt(ct,1).join(""):at.slice(1);return ut[st]()+lt}}_e.exports=ot},function(_e,et,b){var tt=b(260);function nt(rt,it,ot){var st=rt.length;return ot=ot===void 0?st:ot,!it&&ot>=st?rt:tt(rt,it,ot)}_e.exports=nt},function(_e,et){function b(tt){return tt.split("")}_e.exports=b},function(_e,et){var b="\\ud800-\\udfff",tt="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",rt="\\u20d0-\\u20ff",it=tt+nt+rt,ot="\\ufe0e\\ufe0f",st="["+b+"]",at="["+it+"]",ct="\\ud83c[\\udffb-\\udfff]",ut="(?:"+at+"|"+ct+")",lt="[^"+b+"]",dt="(?:\\ud83c[\\udde6-\\uddff]){2}",ft="[\\ud800-\\udbff][\\udc00-\\udfff]",St="\\u200d",Tt=ut+"?",pt="["+ot+"]?",gt="(?:"+St+"(?:"+[lt,dt,ft].join("|")+")"+pt+Tt+")*",yt=pt+Tt+gt,Et="(?:"+[lt+at+"?",at,dt,ft,st].join("|")+")",It=RegExp(ct+"(?="+ct+")|"+Et+yt,"g");function Gt(Wt){return Wt.match(It)||[]}_e.exports=Gt},function(_e,et,b){_e.exports=["screen","window","tab","browser","application"]},function(_e,et,b){const tt=b(1),nt=b(34)(),rt=b(50),it=b(121),ot=b(594),st=b(597),at="/opentok/webrtc/docs/js/release-notes.html",ct=nt.onlyLocal(),ut=tt("setLogLevel"),lt=`
          
   
               
               
              
                   `,dt=rt(()=>{ut.info(`%c${lt}`,'font-family: "Fire Code", Courier, "Courier New", Consolas, "DejaVu Sans Mono"'),ut.info(`OpenTok JS SDK ${ct.version}`),ut.info(`Release notes: ${ct.websiteUrl}${at}`),ut.info(`Known issues: ${ct.websiteUrl}${at}l#knownIssues`)});function ft(St){if(St===void 0||!ot(it,{priority:St})&&St!==0){const pt=st(it,(gt,yt)=>`OT.${yt.toUpperCase()} = ${gt.priority}`).join(", ");ut.error(`level must be one of: OT.NONE = 0, ${pt}`),ut.warn("Using OT.WARN instead"),St=it.warn.priority}tt.setLogLevel(St),St>=it.debug.priority&&dt();const Tt="https://www.npmjs.com/package/debug#browser-support";return ut.info(`OpenTok JS SDK now uses the debug library. More info at ${Tt}`),ut.info(`Changed log level to: ${St}`),St}ft(ct.debug?it.debug.priority:it.warn.priority),_e.exports=ft},function(_e,et,b){var tt=b(96),nt="Expected a function";function rt(it,ot){var st;if(typeof ot!="function")throw new TypeError(nt);return it=tt(it),function(){return--it>0&&(st=ot.apply(this,arguments)),it<=1&&(ot=void 0),st}}_e.exports=rt},function(_e,et,b){var tt=b(231),nt=b(35),rt=b(595),it=b(12),ot=b(124);function st(at,ct,ut){var lt=it(at)?tt:rt;return ut&&ot(at,ct,ut)&&(ct=void 0),lt(at,nt(ct,3))}_e.exports=st},function(_e,et,b){var tt=b(265);function nt(rt,it){var ot;return tt(rt,function(st,at,ct){return ot=it(st,at,ct),!ot}),!!ot}_e.exports=nt},function(_e,et,b){var tt=b(25);function nt(rt,it){return function(ot,st){if(ot==null)return ot;if(!tt(ot))return rt(ot,st);for(var at=ot.length,ct=it?at:-1,ut=Object(ot);(it?ct--:++ct<at)&&st(ut[ct],ct,ut)!==!1;);return ot}}_e.exports=nt},function(_e,et,b){var tt=b(33),nt=b(35),rt=b(598),it=b(12);function ot(st,at){var ct=it(st)?tt:rt;return ct(st,nt(at,3))}_e.exports=ot},function(_e,et,b){var tt=b(265),nt=b(25);function rt(it,ot){var st=-1,at=nt(it)?Array(it.length):[];return tt(it,function(ct,ut,lt){at[++st]=ot(ct,ut,lt)}),at}_e.exports=rt},function(_e,et,b){_e.exports=function(nt){return nt.substr(0,5)!=="http:"&&nt.substr(0,6)!=="https:"&&nt.substr(0,22)!=="data:image/png;base64,"?`data:image/png;base64,${nt}`:nt}},function(_e,et,b){const tt=b(56),nt=b(1)("Style");_e.exports=function(it,ot){const st=this,at={},ct={buttonDisplayMode:["auto","mini","mini-auto","off","on"],nameDisplayMode:["auto","off","on"],audioLevelDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showSpeakerButton:null,showMicButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showArchiveStatus:[!0,!1],archiveStatusDisplayMode:["auto","off","on"],videoDisabledDisplayMode:["auto","off","on"],audioBlockedDisplayMode:["auto","off","on"]},ut=function(ft,St){const Tt=ct[ft];return Tt===void 0?!1:Tt===null?!0:Tt.indexOf(St)!==-1},lt=function(ft){switch(ft){case"true":return!0;case"false":return!1;default:return ft}};st.getAll=function(){return tt(at)},st.get=function(dt){return dt?at[dt]:st.getAll()},st.setAll=function(dt,ft){return Object.keys(dt).forEach(St=>{st.set(St,dt[St],ft)}),st},st.set=function(dt,ft,St){nt.debug(`setStyle: ${dt.toString()}`);let Tt;const pt=lt(ft);return ut(dt,pt)?(Tt=at[dt],pt!==Tt&&(at[dt]=pt,St||ot(dt,ft,Tt)),st):(nt.warn(`Style.set::Invalid style property passed ${dt} : ${pt}`),st)},it&&st.setAll(it,!0)}},function(_e,et,b){const tt=b(2),nt=b(269),rt=()=>tt.isIosWebView?!1:nt()?!0:(typeof window!==void 0?window:commonjsGlobal).navigator.mediaDevices&&(typeof window!==void 0?window:commonjsGlobal).navigator.mediaDevices.getUserMedia||(typeof window!==void 0?window:commonjsGlobal).navigator.webkitGetUserMedia||(typeof window!==void 0?window:commonjsGlobal).navigator.mozGetUserMedia;_e.exports=()=>!!(tt.name!=="Node"&&rt())},function(_e,et,b){const tt=b(2);_e.exports=()=>tt.name==="Node"?!1:typeof(typeof window!==void 0?window:commonjsGlobal).webkitRTCPeerConnection=="function"&&(typeof window!==void 0?window:commonjsGlobal).webkitRTCPeerConnection.prototype.addTrack||typeof(typeof window!==void 0?window:commonjsGlobal).RTCPeerConnection=="function"?!0:typeof(typeof window!==void 0?window:commonjsGlobal).mozRTCPeerConnection=="function"&&tt.version>20},function(_e,et,b){_e.exports=(typeof window!==void 0?window:commonjsGlobal).WebSocket!==void 0},function(_e,et){_e.exports=`<div id="tb_alert"><div id="section-normal-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div></div><div id="section-upgrade-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-supported-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com.au/chrome/browser/mobile/">Google Chrome</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application is not supported on your mobile device's browser at this time.</div></div></div>`},function(_e,et,b){var tt=b(3),nt=tt(b(48));const rt=b(18);_e.exports=function(it){(0,nt.default)(ot,it);function ot(at,ct){var ut;let lt=ct===void 0?{}:ct,dt=lt.destroyOnClose,ft=dt===void 0?!0:dt;ut=it.call(this)||this,ut.modalDiv=document.createElement("div"),ut.modalDiv.classList.add("OT_ModalDialog"),ut.modalDiv.innerHTML=at;const St=ut.modalDiv.querySelectorAll("[role=OT_close]");return[].forEach.call(St,Tt=>Tt.addEventListener("click",pt=>{pt.preventDefault(),ut.close()})),ut.close(),document.body.appendChild(ut.modalDiv),ft&&ut.on("closed",()=>ut.destroy()),ut}var st=ot.prototype;return st.open=function(){this.modalDiv.style.display="block",this.emit("opened")},st.close=function(){this.modalDiv.style.display="none",this.emit("closed")},st.destroy=function(){this.modalDiv.innerHTML="",this.modalDiv.parentNode.removeChild(this.modalDiv),this.emit("destroyed")},st.el=function(ct){return this.modalDiv.querySelector(ct)},ot}(rt)},function(_e,et,b){const tt=b(20);_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt.env||b(2),it=nt.analytics||new tt;it.logEvent({action:"UserAgentParsing",variation:"Attempt",payload:{userAgent:rt.userAgent}}),it.logEvent({action:"UserAgentParsing",variation:rt.error?"Failure":"Success",payload:{userAgent:rt.userAgent}})}},function(_e,et,b){var tt=b(608),nt=b(270),rt=b(609),it=b(610);function ot(st){var at=typeof Map=="function"?new Map:void 0;return _e.exports=ot=function(ut){if(ut===null||!rt(ut))return ut;if(typeof ut!="function")throw new TypeError("Super expression must either be null or a function");if(typeof at<"u"){if(at.has(ut))return at.get(ut);at.set(ut,lt)}function lt(){return it(ut,arguments,tt(this).constructor)}return lt.prototype=Object.create(ut.prototype,{constructor:{value:lt,enumerable:!1,writable:!0,configurable:!0}}),nt(lt,ut)},ot(st)}_e.exports=ot},function(_e,et){function b(tt){return _e.exports=b=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},b(tt)}_e.exports=b},function(_e,et){function b(tt){return Function.toString.call(tt).indexOf("[native code]")!==-1}_e.exports=b},function(_e,et,b){var tt=b(270);function nt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function rt(it,ot,st){return nt()?_e.exports=rt=Reflect.construct:_e.exports=rt=function(ct,ut,lt){var dt=[null];dt.push.apply(dt,ut);var ft=Function.bind.apply(ct,dt),St=new ft;return lt&&tt(St,lt.prototype),St},rt.apply(null,arguments)}_e.exports=rt},function(_e,et,b){(function(tt){_e.exports=(nt,rt)=>(rt=rt||(()=>{}),nt.then(it=>new tt(ot=>{ot(rt())}).then(()=>it),it=>new tt(ot=>{ot(rt())}).then(()=>{throw it})))}).call(this,b(0))},function(_e,et,b){var tt=b(58),nt=b(613),rt=b(614),it=b(46);function ot(st,at){return at=tt(at,st),st=rt(st,at),st==null||delete st[it(nt(at))]}_e.exports=ot},function(_e,et){function b(tt){var nt=tt==null?0:tt.length;return nt?tt[nt-1]:void 0}_e.exports=b},function(_e,et,b){var tt=b(98),nt=b(260);function rt(it,ot){return ot.length<2?it:tt(it,nt(ot,0,-1))}_e.exports=rt},function(_e,et,b){var tt=b(138);function nt(rt){return tt(rt)?void 0:rt}_e.exports=nt},function(_e,et,b){var tt=b(35),nt=b(25),rt=b(30);function it(ot){return function(st,at,ct){var ut=Object(st);if(!nt(st)){var lt=tt(at,3);st=rt(st),at=function(ft){return lt(ut[ft],ft,ut)}}var dt=ot(st,at,ct);return dt>-1?ut[lt?st[dt]:dt]:void 0}}_e.exports=it},function(_e,et,b){var tt=b(92),nt=b(93),rt=b(130),it=b(94),ot=b(618),st=b(97),at=200;function ct(ut,lt,dt){var ft=-1,St=nt,Tt=ut.length,pt=!0,gt=[],yt=gt;if(dt)pt=!1,St=rt;else if(Tt>=at){var Et=lt?null:ot(ut);if(Et)return st(Et);pt=!1,St=it,yt=new tt}else yt=lt?[]:gt;e:for(;++ft<Tt;){var It=ut[ft],Gt=lt?lt(It):It;if(It=dt||It!==0?It:0,pt&&Gt===Gt){for(var Wt=yt.length;Wt--;)if(yt[Wt]===Gt)continue e;lt&&yt.push(Gt),gt.push(It)}else St(yt,Gt,dt)||(yt!==gt&&yt.push(Gt),gt.push(It))}return gt}_e.exports=ct},function(_e,et,b){var tt=b(185),nt=b(223),rt=b(97),it=1/0,ot=tt&&1/rt(new tt([,-0]))[1]==it?function(st){return new tt(st)}:nt;_e.exports=ot},function(_e,et,b){const tt=it=>it&&it.replace(/\D+/g,"")||"0",nt=it=>it.substring(0,9),rt=it=>parseInt(it,10);_e.exports=it=>rt(nt(tt(it)))},function(_e,et,b){(function(tt){var nt=b(3),rt=nt(b(4)),it=nt(b(5));const st=b(1)("hasValidPeerConnection");function at(lt){return new tt(dt=>{lt.addEventListener("signalingstatechange",()=>dt(!0)),lt.createOffer({offerToReceiveAudio:1}).then(ft=>lt.setLocalDescription(ft)).then(()=>setTimeout(()=>{dt(!1)},1e3))})}function ct(lt){return ut.apply(this,arguments)}function ut(){return ut=(0,it.default)(rt.default.mark(function lt(dt){var ft;return rt.default.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:Tt.prev=0,ft=new dt({iceServers:[]}),Tt.next=8;break;case 4:return Tt.prev=4,Tt.t0=Tt.catch(0),st.error("Error occurred creating PeerConnection",Tt.t0),Tt.abrupt("return",!1);case 8:return Tt.prev=8,Tt.next=11,at(ft);case 11:Tt.next=18;break;case 13:Tt.prev=13,Tt.t1=Tt.catch(8),st.error("Error occurred checking the validity of the PeerConnection",Tt.t1);try{ft.close()}catch{}return Tt.abrupt("return",!1);case 18:Tt.prev=18,ft.close(),Tt.next=26;break;case 22:return Tt.prev=22,Tt.t2=Tt.catch(18),st.error("Error occurred closing PeerConnection",Tt.t2),Tt.abrupt("return",!1);case 26:return Tt.abrupt("return",!0);case 27:case"end":return Tt.stop()}},lt,null,[[0,4],[8,13],[18,22]])})),ut.apply(this,arguments)}_e.exports=ct}).call(this,b(0))},function(_e,et,b){(function(tt){const nt=b(37),rt=b(2),it=b(622),ot=b(72),st=b(1)("createPeerConnection");_e.exports=function(ct){let ut=ct.window,lt=ct.config,dt=ct.constraints;st.debug("called");const ft=nt(lt);ft.iceServers=it(rt,ft.iceServers),ot()&&(ft.sdpSemantics="plan-b");const St=new ut.RTCPeerConnection(ft,dt);return tt.resolve(St)}}).call(this,b(0))},function(_e,et,b){const tt=b(9),nt=b(271),rt={Edge(it){let ot=!1;return it.map(st=>{if(!st)return;const at=st.urls||st.url&&[st.url];if(!at)return;const ct=at.filter(ut=>ut.indexOf("turn:")===0&&ut.indexOf("transport=udp")!==-1&&ut.indexOf("turn:[")===-1&&!ot?(ot=!0,!0):ut.indexOf("stun:")===0);if(ct.length!==0)return tt(nt(st,["url","urls"]),{urls:ct})}).filter(st=>st!==void 0)},Safari(it){return it.map(ot=>{if(ot.urls!==void 0&&ot.url===void 0)return ot;const st=ot.urls||ot.url&&[ot.url];return tt(nt(ot,["url","urls"]),{urls:st})})}};_e.exports=function(ot,st){let at=ot.name;ot.isEdge&&(at=ot.isLegacyEdge?"Edge":"ChromiumEdge");const ct=rt[at];return ct?ct(st):st}},function(_e,et,b){const tt=b(28),nt=b(2),rt={h264:{baseline:"42001f",constBaseline:"42e01f"}},it=ot=>{let st=ot.sdp,at=ot.from,ct=ot.to;return st.replace(new RegExp(`^(a=fmtp:\\d+ .*profile-level-id=)${at}`,"gmi"),`$1${ct}`)};_e.exports={local:{offer:function(st,at){let ct=st===void 0?{}:st,ut=ct.numSimulcastStreams,lt=ct.audioBitrate,dt=ct.priorityVideoCodec,ft=dt===void 0?"":dt,St=ct.codecFlags,Tt=St===void 0?{}:St,pt=ct.enableStereo,gt=pt===void 0?!1:pt,yt=ct.enableDtx,Et=yt===void 0?!1:yt,It=ct.replaceBaselineProfile,Gt=It===void 0?!1:It,Wt=ct.removeVideoOrientation,At=Wt===void 0?!1:Wt,kt=tt.filterExcessSSRCs(at);ut>1&&(kt=tt.enableSimulcast(kt,ut)),lt>0&&(kt=tt.setAudioBitrate(kt,lt)),At&&(kt=tt.removeVideoOrientation(kt)),kt=tt.modifyReceiveStereo(kt,!1),kt=tt.modifySendStereo(kt,!!gt),kt=tt.modifyDtx(kt,!!Et),nt.isLegacyEdge||Object.keys(Tt).filter(Nt=>Tt[Nt]===!1).forEach(Nt=>{kt=tt.removeVideoCodec(kt,Nt)}),ft&&!nt.isLegacyEdge?kt=tt.reprioritizeVideoCodec(kt,ft,"top"):ft!=="h264"&&(kt=tt.reprioritizeVideoCodec(kt,"h264","bottom"));let Vt=kt;return Gt&&(Vt=it({sdp:Vt,from:rt.h264.baseline,to:rt.h264.constBaseline})),{local:kt,remote:Vt}},answer:function(st,at){let ct=st===void 0?{}:st,ut=ct.audioBitrate,lt=ct.codecFlags,dt=ct.enableStereo,ft=dt===void 0?!1:dt,St=ct.enableDtx,Tt=St===void 0?!1:St,pt=ct.replaceBaselineProfile,gt=pt===void 0?!1:pt,yt=ct.sourceStreamId,Et=at;ut>0&&(Et=tt.setAudioBitrate(Et,ut)),Et=tt.modifyReceiveStereo(Et,!!ft),Et=tt.modifySendStereo(Et,!1),Et=tt.modifyDtx(Et,!!Tt),yt==="MANTIS"&&tt.getSetupRole(Et)==="passive"&&(Et=tt.setSetupRole(Et,"active")),lt&&Object.keys(lt).filter(Gt=>lt[Gt]===!1).forEach(Gt=>{Et=tt.removeVideoCodec(Et,Gt)});let It=Et;return gt&&(It=it({sdp:It,from:rt.h264.baseline,to:rt.h264.constBaseline})),{local:Et,remote:It}}},remote:{offer:(ot,st)=>{let at=ot.replaceBaselineProfile,ct=at===void 0?!1:at,ut=st;if(ut.indexOf("a=rtcp-fb")===-1){const lt=`a=rtcp-fb:* ccm fir\r
a=rtcp-fb:* nack `;ut=ut.replace(/^m=video(.*)$/gmi,`m=video$1\r
${lt}`)}return ct&&(ut=it({sdp:ut,from:rt.h264.constBaseline,to:rt.h264.baseline})),{local:ut}},answer:function(st,at){let ct=st===void 0?{}:st,ut=ct.audioBitrate,lt=ct.replaceBaselineProfile,dt=lt===void 0?!1:lt,ft=at;return ut>0&&(ft=tt.setAudioBitrate(ft,ut)),dt&&(ft=it({sdp:ft,from:rt.h264.constBaseline,to:rt.h264.baseline})),{local:ft}}}}},function(_e,et,b){var tt=b(39),nt=b(54),rt=b(41),it=b(25),ot=b(275),st=b(625),at=b(232),ct=b(97),ut=b(262),lt=b(276),dt="[object Map]",ft="[object Set]",St=tt?tt.iterator:void 0;function Tt(pt){if(!pt)return[];if(it(pt))return ot(pt)?ut(pt):nt(pt);if(St&&pt[St])return st(pt[St]());var gt=rt(pt),yt=gt==dt?at:gt==ft?ct:lt;return yt(pt)}_e.exports=Tt},function(_e,et){function b(tt){for(var nt,rt=[];!(nt=tt.next()).done;)rt.push(nt.value);return rt}_e.exports=b},function(_e,et,b){var tt=b(33);function nt(rt,it){return tt(it,function(ot){return rt[ot]})}_e.exports=nt},function(_e,et,b){_e.exports=(tt,nt)=>{let rt=[],it=null;if(typeof tt.getReceivers=="function"){const ot=tt.getReceivers().find(st=>st.track.kind==="audio");ot&&(rt=ot.getSynchronizationSources())}else it=new Error("peerConnection does not support getReceivers function");nt&&nt(it,rt)}},function(_e,et,b){(function(tt){const nt=b(629),rt=function(ot){this.pending=[],this._processBinding=this.maybeProcessPending.bind(this),ot&&this.setPeerConnection(ot)};rt.prototype.setPeerConnection=function(ot){if(this.pc)throw new Error("Peer connection already set");this.pc=ot,this._forwardIceCandidate=nt(this.pc,"addIceCandidate"),this.pc.addEventListener("signalingstatechange",this._processBinding),this.maybeProcessPending()},rt.prototype.canAddCandidates=function(){return!!(this.pc&&this.pc.iceConnectionState!=="closed"&&this.pc.remoteDescription&&this.pc.remoteDescription.type&&this.pc.localDescription&&this.pc.localDescription.type)},rt.prototype.addIceCandidate=function(ot){if(this.canAddCandidates())return this._forwardIceCandidate(ot);const st=this.pending;return new tt((at,ct)=>{st.push({iceCandidate:ot,resolve:at,reject:ct})})},rt.prototype.maybeProcessPending=function(){this.canAddCandidates()&&this.process()},rt.prototype.process=function(){for(;this.pending.length;){const ot=this.pending.shift();this._forwardIceCandidate(ot.iceCandidate).then(ot.resolve).catch(ot.reject)}},rt.prototype.destroy=function(){this.pc&&this.pc.removeEventListener("signalingstatechange",this._processBinding),this._processBinding=null,this.pc=null},_e.exports=rt}).call(this,b(0))},function(_e,et,b){(function(tt){_e.exports=function(rt,it){const ot=rt[it];return function(st){return new tt((at,ct)=>{const ut=ot.apply(rt,[st,at,ct]);ut&&typeof ut.then=="function"&&at(ut)})}}}).call(this,b(0))},function(_e,et,b){const tt=b(156),nt=b(2),rt=b(1)("offerProcessor"),it=b(28),ot=b(631);_e.exports=function(at,ct,ut,lt,dt,ft,St,Tt,pt,gt,yt,Et,It){const Gt=(tn,_t)=>Kt=>{rt.error(tn),rt.error(Kt),gt&&gt(tn,Kt,_t)},Wt=tn=>{const _t=it.hasSendStereo(ft.sdp),Kt=it.hasSendDtx(ft.sdp),cn=it.getAudioBitrate(ft.sdp),an=tt(dt,"local","answer",{enableStereo:_t,enableDtx:Kt,audioBitrate:cn,replaceBaselineProfile:Et,codecFlags:St,sourceStreamId:It},tn.sdp),mn=new lt({type:tn.type,sdp:an.local}),on={type:tn.type,sdp:an.remote};return at.setLocalDescription(mn).then(()=>pt(on)).catch(Gt("Error while setting LocalDescription","SetLocalDescription"))},At=()=>at.createAnswer().then(Wt).catch(Gt("Error while setting createAnswer","CreateAnswer")),kt=new lt({type:ft.type,sdp:tt(dt,"remote","offer",{replaceBaselineProfile:Et},ft.sdp).local}),Vt=Gt("Error while setting RemoteDescription","SetRemoteDescription");return ot(kt,Tt,nt,ct,ut).then(()=>(yt(!0),kt)).catch(tn=>{if(yt(!1),!it.hasMediaType(kt.sdp,"audio"))throw new Error("Unsupported video without audio for fallback");rt.debug("Couldn't set remote description",kt,tn,", trying without video");const _t=new lt({type:ft.type,sdp:it.disableMediaType(kt.sdp,"video")});return rt.debug("offer without video",_t.sdp),_t}).then(tn=>at.setRemoteDescription(tn)).then(At).catch(Vt)}},function(_e,et,b){(function(tt){const nt=b(72),rt=(it,ot,st,at,ct)=>{if(!at)return tt.resolve(!0);const ut={iceServers:[]};nt()&&(ut.sdpSemantics="plan-b");const lt=new at(ut),dt=()=>{try{lt.close()}catch{}};return lt.setRemoteDescription(new ct(it)).then(()=>{dt()}).catch(ft=>{throw dt(),ft})};_e.exports=rt}).call(this,b(0))},function(_e,et,b){const tt=b(60),nt=b(633);_e.exports=function(it){let ot=[];const st={};let at={sentMessages:0,recvMessages:0};const ct=function(dt){ot.filter(ft=>dt!==ft)},ut=function(dt){const ft=new nt(dt);return ot.push(ft),ft.on("close",()=>{ct(ft)}),ft};return st.add=function(lt,dt){return ut(it.createDataChannel(lt,dt))},st.addMany=function(lt){for(const dt in lt)lt.hasOwnProperty(dt)&&st.add(dt,lt[dt])},st.get=function(lt,dt){return tt(ot,ft=>ft.equals(lt,dt))},st.getOrAdd=function(lt,dt){let ft=st.get(lt,dt);return ft||(ft=st.add(lt,dt)),ft},st.getQosData=function(){const lt={sentMessages:0,recvMessages:0};return ot.forEach(dt=>{lt.sentMessages+=dt.getQosData().sentMessages,lt.recvMessages+=dt.getQosData().recvMessages}),lt},st.sampleQos=function(){const lt=st.getQosData(),dt={sentMessages:lt.sentMessages-at.sentMessages,recvMessages:lt.recvMessages-at.recvMessages};return at=lt,dt},st.destroy=function(){ot.forEach(lt=>{lt.close()}),ot=[]},it.addEventListener("datachannel",lt=>{ut(lt.channel)}),st}},function(_e,et,b){const tt=b(6),nt=b(1)("DataChannel"),rt=function(ot){this.data=ot.data,this.source=ot.source,this.lastEventId=ot.lastEventId,this.origin=ot.origin,this.timeStamp=ot.timeStamp,this.type=ot.type,this.ports=ot.ports,this.path=ot.path};_e.exports=function(ot){const st={},at=[],ct={sentMessages:0,recvMessages:0},ut=function(yt){return at.push(yt),st},lt=function(yt){return ot.send(yt),ct.sentMessages++,st},dt=function(){let yt;for(;yt=at.shift();)st.send(yt)},ft=function(){st.send=lt,dt()},St=function(yt){st.send=ut,st.trigger("close",yt)},Tt=function(yt){nt.error(yt)},pt=function(yt){const Et=new rt(yt);ct.recvMessages++,st.trigger("message",Et)};return tt(st,!0),st.label=ot.label,st.id=ot.id,st.reliable=ot.reliable,st.negotiated=ot.negotiated,st.ordered=ot.ordered,st.protocol=ot.protocol,st._channel=ot,st.close=function(){ot.close()},st.equals=function(gt,yt){if(st.label!==gt)return!1;for(const Et in yt)if(yt.hasOwnProperty(Et)&&st[Et]!==yt[Et])return!1;return!0},st.getQosData=function(){return ct},st.send=ut,ot.addEventListener("open",ft,!1),ot.addEventListener("close",St,!1),ot.addEventListener("error",Tt,!1),ot.addEventListener("message",pt,!1),st}},function(_e,et,b){const tt=b(9),nt=b(156),rt=b(1)("subscribeProcessor"),it=b(28);_e.exports=function(st){let at=st.peerConnection,ct=st.NativeRTCSessionDescription,ut=st.sdpTransforms,lt=st.numSimulcastStreams,dt=st.offerOverrides,ft=st.offerConstraints,St=st.replaceBaselineProfile,Tt=st.removeVideoOrientation,pt=st.removeUnusedCodecs;const gt=(Et,It)=>Gt=>{rt.error(Et,Gt);const Wt=new Error(Et);throw Wt.reason=Gt,Wt.prefix=It,Wt},yt=Et=>{rt.debug("subscribeProcessor: offer created",Et);let It=Et.sdp;if(pt){var Gt;It=it.removeUnusedCodecs(It,(Gt=at.currentLocalDescription)==null?void 0:Gt.sdp)}const Wt=nt(ut,"local","offer",tt({numSimulcastStreams:lt,replaceBaselineProfile:St,removeVideoOrientation:Tt},dt),It),At=new ct({type:Et.type,sdp:Wt.local}),kt=new ct({type:Et.type,sdp:Wt.remote});return rt.debug("subscribeProcessor: setting local description"),at.setLocalDescription(At).then(()=>kt,gt("Error while setting LocalDescription","SetLocalDescription"))};return rt.debug("subscribeProcessor: creating offer"),at.createOffer(ft).then(yt,gt("Error while creating Offer","CreateOffer")).then(Et=>({sdp:Et.sdp,type:Et.type}))}},function(_e,et,b){const tt=b(636);let nt=function(){function rt(ot){this.state=tt.RESOLVED,this.offerAnswerQueue=[],this.logAnalyticsEvent=ot}var it=rt.prototype;return it.setPending=function(){this.state=tt.PENDING},it.setResolved=function(){this.state=tt.RESOLVED;const st=this.offerAnswerQueue.shift();st&&(this.logAnalyticsEvent("dequeueOfferAnswer","Event"),this.setPending(),st())},it.isPending=function(){return this.state===tt.PENDING},it.enqueueOfferAnswer=function(st){this.isPending()?(this.offerAnswerQueue.push(st),this.logAnalyticsEvent("enqueueOfferAnswer","Event")):(this.setPending(),st())},rt}();_e.exports=nt},function(_e,et,b){_e.exports={PENDING:"pending",RESOLVED:"resolved"}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=b(28),ot=it.mediaDirections,st=ot.RECVONLY,at=ot.INACTIVE,ct=function(){var ut=(0,rt.default)(nt.default.mark(function lt(dt,ft){var St,Tt,pt;return nt.default.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(dt){yt.next=2;break}return yt.abrupt("return");case 2:return yt.next=4,dt.createOffer();case 4:return St=yt.sent,yt.next=7,dt.setLocalDescription(St);case 7:Tt=dt.remoteDescription.sdp,pt=it.changeMediaDirection(Tt,ft),dt.setRemoteDescription({type:dt.remoteDescription.type,sdp:pt});case 10:case"end":return yt.stop()}},lt)}));return function(dt,ft){return ut.apply(this,arguments)}}();_e.exports={changeMediaDirectionToInactive:ut=>ct(ut,at),changeMediaDirectionToRecvOnly:ut=>ct(ut,st)}},function(_e,et,b){et.__esModule=!0,et.default=Et,et.parseStatsNewAPI=yt,et.parseStatsOldAPI=gt;function tt(Gt,Wt){var At=typeof Symbol<"u"&&Gt[Symbol.iterator]||Gt["@@iterator"];if(At)return(At=At.call(Gt)).next.bind(At);if(Array.isArray(Gt)||(At=nt(Gt))||Wt&&Gt&&typeof Gt.length=="number"){At&&(Gt=At);var kt=0;return function(){return kt>=Gt.length?{done:!0}:{done:!1,value:Gt[kt++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nt(Gt,Wt){if(Gt){if(typeof Gt=="string")return rt(Gt,Wt);var At=Object.prototype.toString.call(Gt).slice(8,-1);if(At==="Object"&&Gt.constructor&&(At=Gt.constructor.name),At==="Map"||At==="Set")return Array.from(Gt);if(At==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(At))return rt(Gt,Wt)}}function rt(Gt,Wt){(Wt==null||Wt>Gt.length)&&(Wt=Gt.length);for(var At=0,kt=new Array(Wt);At<Wt;At++)kt[At]=Gt[At];return kt}const it=b(2),ot=b(8),st=b(1)("QoS"),at=b(28),ct=b(279),ut=b(639),lt=b(103)(),dt=b(157),ft=["audioCodec","audioSentBytes","audioSentPackets","audioSentPacketsLost","audioRtt","videoCodec","videoHeight","videoHeightInput","videoSentBytes","videoFrameRateSent","videoSentPackets","videoRtt","videoSentPacketsLost","videoWidthInput","videoWidth","srtpCipher"],St=["audioCodec","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoCodec","videoHeight","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost","videoFrameRateReceived","videoWidth","srtpCipher"],Tt=(Gt,Wt)=>st.debug(`Raw stats for peer conn ${Gt.id}:`,Wt),pt=Gt=>{const Wt=Gt.portNumber||Gt.port;return`${Gt.ipAddress||Gt.address||Gt.ip}:${Wt}`};function gt(Gt,Wt,At,kt,Vt){const Nt=Kt=>(Number(Kt.stat("googFrameRateSent"))>0?(At.videoSentBytes=Number(Kt.stat("bytesSent")),At.videoSentPackets=Number(Kt.stat("packetsSent")),At.videoSentPacketsLost=Number(Kt.stat("packetsLost")),At.videoRtt=Number(Kt.stat("googRtt"))/1e3,At.videoFrameRate=Number(Kt.stat("googFrameRateInput")),At.videoWidth=Number(Kt.stat("googFrameWidthSent")),At.videoHeight=Number(Kt.stat("googFrameHeightSent")),At.videoFrameRateSent=Number(Kt.stat("googFrameRateSent")),At.videoWidthInput=Number(Kt.stat("googFrameWidthInput")),At.videoHeightInput=Number(Kt.stat("googFrameHeightInput")),At.videoCodec=Kt.stat("googCodecName"),At.videoBandwidthLimitedResolution=Kt.stat("googBandwidthLimitedResolution")==="true",At.cpuLimitedResolution=Kt.stat("googCpuLimitedResolution")==="true"):Number(Kt.stat("googFrameRateReceived"))>0&&(At.videoRecvBytes=Number(Kt.stat("bytesReceived")),At.videoRecvPackets=Number(Kt.stat("packetsReceived")),At.videoRecvPacketsLost=Number(Kt.stat("packetsLost")),At.videoFrameRate=Number(Kt.stat("googFrameRateOutput")),At.videoFrameRateReceived=Number(Kt.stat("googFrameRateReceived")),At.videoFrameRateDecoded=Number(Kt.stat("googFrameRateDecoded")),At.videoWidth=Number(Kt.stat("googFrameWidthReceived")),At.videoHeight=Number(Kt.stat("googFrameHeightReceived")),At.videoCodec=Kt.stat("googCodecName")),null),tn=Kt=>{Number(Kt.stat("audioInputLevel"))>0?(At.audioSentPackets=Number(Kt.stat("packetsSent")),At.audioSentPacketsLost=Number(Kt.stat("packetsLost")),At.audioSentBytes=Number(Kt.stat("bytesSent")),At.audioCodec=Kt.stat("googCodecName"),At.audioRtt=Number(Kt.stat("googRtt"))/1e3):Number(Kt.stat("audioOutputLevel"))>0&&(At.audioRecvPackets=Number(Kt.stat("packetsReceived")),At.audioRecvPacketsLost=Number(Kt.stat("packetsLost")),At.audioRecvBytes=Number(Kt.stat("bytesReceived")),At.audioCodec=Kt.stat("googCodecName"))},_t=Kt=>{if(Kt.result){const cn=Kt.result();Tt(Gt,cn);const an=(yn,fn)=>cn.filter(sn=>sn.id===fn.stat(yn))[0],mn=yn=>an("localCandidateId",yn),on=yn=>an("remoteCandidateId",yn);for(let yn=0;yn<cn.length;yn++){const fn=cn[yn];fn.stat&&(fn.stat("googActiveConnection")==="true"&&(fn.stat("googChannelId").indexOf("audio")>-1?(At.audioLocalAddress=fn.stat("googLocalAddress"),At.audioRemoteAddress=fn.stat("googRemoteAddress"),At.audioLocalCandidateType=fn.stat("googLocalCandidateType"),At.audioRemoteCandidateType=fn.stat("googRemoteCandidateType"),At.audioTransportType=fn.stat("googTransportType"),At.audioLocalRelayProtocol=ct(mn(fn).stat("priority")),At.audioRemoteRelayProtocol=ct(on(fn).stat("priority"))):fn.stat("googChannelId").indexOf("video")>-1&&(At.videoLocalAddress=fn.stat("googLocalAddress"),At.videoRemoteAddress=fn.stat("googRemoteAddress"),At.videoLocalCandidateType=fn.stat("googLocalCandidateType"),At.videoRemoteCandidateType=fn.stat("googRemoteCandidateType"),At.videoTransportType=fn.stat("googTransportType"),At.videoLocalRelayProtocol=ct(mn(fn).stat("priority")),At.videoRemoteRelayProtocol=ct(on(fn).stat("priority")))),Number(fn.stat("googAvailableSendBandwidth"))>0&&(At.videoSentEstimatedBandwidth=Number(fn.stat("googAvailableSendBandwidth"))),Number(fn.stat("googAvailableReceiveBandwidth"))>0&&(At.videoRecvEstimatedBandwidth=Number(fn.stat("googAvailableReceiveBandwidth"))),tn(fn),Nt(fn))}"videoCodec"in At&&!At.videoLocalAddress&&["LocalAddress","RemoteAddress","LocalCandidateType","RemoteCandidateType","TransportType","LocalRelayProtocol","RemoteRelayProtocol"].forEach(yn=>{At[`video${yn}`]=At[`audio${yn}`]})}Vt(null,At)};Gt.getStats(_t)}function yt(Gt,Wt,At,kt,Vt){const Nt=function(an){Vt(an)},tn=(cn,an)=>{if(an==="outboundrtp"?(At.audioSentPackets=cn.packetsSent,At.audioSentPacketsLost=cn.packetsLost,At.audioSentBytes=cn.bytesSent):an==="inboundrtp"&&(At.audioRecvPackets=cn.packetsReceived,At.audioRecvPacketsLost=cn.packetsLost,At.audioRecvBytes=cn.bytesReceived),At.audioCodec===void 0&&["Safari"].indexOf(ot.env.name)!==-1&&cn.codecId!==void 0){const mn=Gt.remoteDescription.type==="answer"?Gt.remoteDescription:Gt.localDescription,on=mn.sdp,yn=cn.codecId.lastIndexOf("_"),fn=at.getCodecsAndCodecMap(on,"audio");yn!==-1&&fn!==void 0&&(At.audioCodec=fn.codecMap[cn.codecId.substring(yn+1)])}},_t=cn=>{const an={packetsSent:"videoSentPackets",packetsLost:"videoSentPacketsLost",bytesSent:"videoSentBytes",framesPerSecond:"videoFrameRate",framesSent:"videoFrameRateSent",framesReceived:"videoFramesReceived",frameWidth:"videoWidth",frameHeight:"videoHeight"},mn=["videoSentPackets","videoSentBytes"];for(const on in an)if(on in cn){const yn=an[on];mn.includes(yn)&&Number.isSafeInteger(At[yn])?At[yn]+=cn[on]:At[yn]=cn[on]}},Kt=(cn,an)=>{const mn=()=>{if(!("videoSentBytes"in At?At.videoSentBytes>0:At.videoRecvBytes>0))return 0;let yn=0;if(it.isFirefox&&it.version<96)yn=Number(cn.framerateMean);else{const fn=an==="outboundrtp"?"framesEncoded":"framesDecoded";At[fn]=cn[fn],yn=dt({currentStatFrames:cn[fn],currentTimestamp:cn.timestamp,prevStatFrames:Wt[fn],prevTimestamp:Wt.timeStamp||Date.now()})}return yn};if(an==="outboundrtp"?(cn.hasOwnProperty("qualityLimitationReason")&&(At.videoBandwidthLimitedResolution=cn.qualityLimitationReason==="bandwidth",At.cpuLimitedResolution=cn.qualityLimitationReason==="cpu"),_t(cn)):an==="inboundrtp"&&(At.videoRecvPackets=cn.packetsReceived,At.videoRecvPacketsLost=cn.packetsLost,At.videoRecvBytes=cn.bytesReceived),(it.isFirefox&&["outboundrtp","inboundrtp"].includes(an)||!kt&&an==="inboundrtp")&&(At.videoFrameRate=mn()),At.videoCodec===void 0&&["Safari"].indexOf(ot.env.name)!==-1&&cn.codecId!==void 0){const on=Gt.remoteDescription.type==="answer"?Gt.remoteDescription:Gt.localDescription,yn=on.sdp,fn=cn.codecId.lastIndexOf("_"),sn=at.getCodecsAndCodecMap(yn,"video");fn!==-1&&sn!==void 0&&(At.videoCodec=sn.codecMap[cn.codecId.substring(fn+1)])}};Gt.getStats(null).then(cn=>{let an,mn,on,yn,fn,sn,un,Ln;const Xn=[],pn=()=>{if(Xn.length===0)return null;const tr=Xn.filter(vr=>vr>0),Qn=tr.reduce((vr,Fr)=>vr+Fr,0);return tr.length?Qn/tr.length:0},Vn=tr=>tr.toLowerCase().replace(/[^a-z]/g,""),Tn=tr=>{const Qn=Vn(tr.type),Sr=tr.id.toLowerCase();if(/(in|out)boundrtp$/.test(Qn)){const vr=/rtp/.test(Sr),Fr=vr&&/audio/.test(Sr),kr=vr&&/video/.test(Sr),jr=Fr||tr.kind==="audio",xo=kr||tr.kind==="video";if(jr?tn(tr,Qn):xo&&Kt(tr,Qn),tr.hasOwnProperty("roundTripTime")){const Er=tr.mediaType||tr.kind;Er==="video"?Xn.push(tr.roundTripTime):Er==="audio"&&(At.audioRtt=tr.roundTripTime)}if(Qn==="remoteinboundrtp"&&tr.hasOwnProperty("packetsLost")){const xr=`${tr.kind}SentPacketsLost`;At[xr]||(At[xr]=0),At[xr]+=tr.packetsLost}}else if(Qn==="transport"){const vr=tr.selectedCandidatePairId,Fr=tr.srtpCipher;At.srtpCipher=Fr,vr&&(yn=ut(vr,cn))}else if(Qn==="localcandidate")an=tr.candidateType,on=pt(tr),sn=tr.protocol||tr.transport;else if(Qn==="remotecandidate")mn=tr.candidateType,fn=pt(tr);else if(Qn==="track"&&Sr.indexOf("video")!==0)un=tr.frameWidth,Ln=tr.frameHeight,_t(tr);else if(Qn==="mediasource")tr.hasOwnProperty("framesPerSecond")&&(At.videoFrameRate=tr.framesPerSecond),tr.hasOwnProperty("width")&&(At.videoWidthInput=tr.width),tr.hasOwnProperty("height")&&(At.videoHeightInput=tr.height);else if(Qn==="candidatepair"&&tr.hasOwnProperty("availableOutgoingBitrate")){const vr=`video${kt?"Sent":"Recv"}EstimatedBandwidth`;At[vr]=parseInt(tr.availableOutgoingBitrate,10)}};if(typeof cn[Symbol.iterator]=="function"){Tt(Gt,Array.from(cn));for(var Jn=tt(cn),lr;!(lr=Jn()).done;){const tr=lr.value,Qn=Array.isArray(tr)?tr[1]:tr;Tn(Qn)}}else{Tt(Gt,cn);for(const tr in cn)cn.hasOwnProperty(tr)&&Tn(cn[tr])}if(Gt.currentRemoteDescription&&(At.useDtx=at.hasSendDtx(Gt.currentRemoteDescription.sdp)),kt&&(At.videoRtt=pn()),(At.audioRecvBytes||At.audioSentBytes)&&(At.audioLocalCandidateType=an,At.audioLocalAddress=on,At.audioRemoteCandidateType=mn,At.audioRemoteAddress=fn,At.audioTransportType=sn,At.audioLocalRelayProtocol=yn,At.audioCodec===void 0)){const tr=Gt.remoteDescription.type==="answer"?Gt.remoteDescription:Gt.localDescription,Qn=tr.sdp,Sr=at.getCodecs(Qn,"audio");At.audioCodec=Sr[0]}if((At.videoRecvBytes||At.videoSentBytes)&&(At.videoLocalCandidateType=an,At.videoLocalAddress=on,At.videoRemoteCandidateType=mn,At.videoRemoteAddress=fn,At.videoTransportType=sn,At.videoLocalRelayProtocol=yn,At.videoCodec===void 0)){const tr=Gt.remoteDescription.type==="answer"?Gt.remoteDescription:Gt.localDescription,Qn=tr.sdp,Sr=at.getCodecs(Qn,"video");At.videoCodec=Sr[0]}It(At,kt),At.videoWidth=At.videoWidth||un,At.videoHeight=At.videoHeight||Ln,Vt(null,At)}).catch(Nt)}function Et(Gt,Wt,At,kt,Vt){return lt?yt(Gt,Wt,At,kt,Vt):gt(Gt,Wt,At,kt,Vt)}function It(Gt,Wt){(Wt?ft:St).forEach(kt=>{Gt.hasOwnProperty(kt)||(Gt[kt]=null)})}},function(_e,et,b){const tt=b(279);_e.exports=(nt,rt)=>{let it="";if(!nt||!rt)return it;const ot=rt.get(nt);if(ot){const st=ot.localCandidateId;if(st){const at=rt.get(st);if(at){const ct=at.relayProtocol,ut=at.priority;ct?it=`TURN/${ct.toUpperCase()}`:it=tt(ut)}}}return it}},function(_e,et,b){et.__esModule=!0,et.default=void 0;let tt=function(){function nt(){this.value=null,this.changeCount=0}var rt=nt.prototype;return rt.onValue=function(ot){ot&&ot!==this.value&&(this.value&&(this.changeCount+=1),this.value=ot)},nt}();et.default=tt},function(_e,et,b){var tt=b(11),nt=b(642),rt=b(228),it="Expected a function",ot=Math.max,st=Math.min;function at(ct,ut,lt){var dt,ft,St,Tt,pt,gt,yt=0,Et=!1,It=!1,Gt=!0;if(typeof ct!="function")throw new TypeError(it);ut=rt(ut)||0,tt(lt)&&(Et=!!lt.leading,It="maxWait"in lt,St=It?ot(rt(lt.maxWait)||0,ut):St,Gt="trailing"in lt?!!lt.trailing:Gt);function Wt(an){var mn=dt,on=ft;return dt=ft=void 0,yt=an,Tt=ct.apply(on,mn),Tt}function At(an){return yt=an,pt=setTimeout(Nt,ut),Et?Wt(an):Tt}function kt(an){var mn=an-gt,on=an-yt,yn=ut-mn;return It?st(yn,St-on):yn}function Vt(an){var mn=an-gt,on=an-yt;return gt===void 0||mn>=ut||mn<0||It&&on>=St}function Nt(){var an=nt();if(Vt(an))return tn(an);pt=setTimeout(Nt,kt(an))}function tn(an){return pt=void 0,Gt&&dt?Wt(an):(dt=ft=void 0,Tt)}function _t(){pt!==void 0&&clearTimeout(pt),yt=0,dt=gt=ft=pt=void 0}function Kt(){return pt===void 0?Tt:tn(nt())}function cn(){var an=nt(),mn=Vt(an);if(dt=arguments,ft=this,gt=an,mn){if(pt===void 0)return At(gt);if(It)return clearTimeout(pt),pt=setTimeout(Nt,ut),Wt(gt)}return pt===void 0&&(pt=setTimeout(Nt,ut)),Tt}return cn.cancel=_t,cn.flush=Kt,cn}_e.exports=at},function(_e,et,b){var tt=b(14),nt=function(){return tt.Date.now()};_e.exports=nt},function(_e,et,b){const tt=b(50);et.check=function(nt){nt===void 0&&(nt={});const rt=nt.env||b(2);return rt.name==="Chrome"&&rt.userAgent.toLowerCase().indexOf("android")>-1&&rt.version<65},et.once=tt(()=>et.check())},function(_e,et,b){const tt=b(2);_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt,it=rt.env,ot=it===void 0?tt:it;return!!(ot.isiOS&&ot.iOSVersion>10)}},function(_e,et,b){const tt=b(36),nt=b(8);_e.exports=function(it){let ot,st,at,ct,ut;const lt=this;let dt=it.archiving;const ft=it.archivingStarted||"Archiving on",St=it.archivingEnded||"Archiving off";let Tt=!0;const pt=function(Et){ct.nodeValue=Et,ot.setAttribute("title",Et)},gt=function(){ut&&(clearTimeout(ut),ut=null),dt?nt.addClass(st,"OT_active"):nt.removeClass(st,"OT_active"),nt.removeClass(lt.domElement,`OT_archiving-${dt?"off":"on"}`),nt.addClass(lt.domElement,`OT_archiving-${dt?"on":"off"}`),it.show&&dt?(pt(ft),nt.addClass(at,"OT_mode-on"),nt.removeClass(at,"OT_mode-auto"),lt.setDisplayMode("on"),ut=setTimeout(()=>{nt.addClass(at,"OT_mode-auto"),nt.removeClass(at,"OT_mode-on")},5e3)):it.show&&!Tt?(nt.addClass(at,"OT_mode-on"),nt.removeClass(at,"OT_mode-auto"),lt.setDisplayMode("on"),pt(St),ut=setTimeout(()=>{lt.setDisplayMode("off")},5e3)):lt.setDisplayMode("off")};tt(this,{mode:dt&&it.show&&"on"||"off",nodeName:"h1",htmlAttributes:{className:"OT_archiving OT_edge-bar-item OT_edge-bottom"},onCreate(){ot=nt.createElement("div",{className:"OT_archiving-light-box"},""),st=nt.createElement("div",{className:"OT_archiving-light"},""),ot.appendChild(st),at=nt.createElement("div",{className:"OT_archiving-status OT_mode-on OT_edge-bar-item OT_edge-bottom"},""),ct=document.createTextNode(""),at.appendChild(ct),lt.domElement.appendChild(ot),lt.domElement.appendChild(at),gt()}}),this.setShowArchiveStatus=function(yt){it.show=yt,lt.domElement&&gt.call(lt)},this.setArchiving=function(yt){dt=yt,Tt=!1,lt.domElement&&gt.call(lt)}}},function(_e,et,b){_e.exports=function(tt){tt===void 0&&(tt={});const nt=tt.global||(typeof window!==void 0?window:commonjsGlobal);return()=>nt.navigator&&nt.navigator.mediaDevices}},function(_e,et,b){(function(tt){const nt=b(9),rt=b(11),it=b(107),ot=b(648),st=b(20),at=b(22),ct=b(6);_e.exports=function(lt){lt===void 0&&(lt={});const dt=lt.env||b(2),ft=lt.Errors||b(7),St=lt.otError||b(13)(),Tt=lt.logging||b(1)("getUserMedia"),pt=lt.screenSharing||b(161)(),gt=lt.getDisplayMediaExtensionHelper||b(288),yt=lt.customGetUserMedia,Et=lt.global||(typeof window!==void 0?window:commonjsGlobal),It=lt.analytics||new st,Gt=Et.navigator,Wt=Et.location,At=()=>{if(yt)return yt;if(Gt.mediaDevices){var an;return(an=Gt.mediaDevices).getUserMedia.bind(an)}},kt=function(){const mn=At();return mn?mn(...arguments):tt.reject(new Error("Cannot find getUserMedia"))},Vt=()=>{if(yt)return yt;if(Gt.mediaDevices&&Gt.getDisplayMedia)return Gt.getDisplayMedia.bind(Gt);if(Gt.mediaDevices&&Gt.mediaDevices.getDisplayMedia){var an;return(an=Gt.mediaDevices).getDisplayMedia.bind(an)}},Nt=function(){const mn=Vt();return mn?mn(...arguments):tt.reject(new Error("Cannot find getDisplayMedia"))},tn=(()=>{const an={name:ft.USER_MEDIA_ACCESS_DENIED,message:"End-user denied permission to hardware devices"},mn={name:ft.NOT_SUPPORTED,message:"A constraint specified is not supported by the browser."},on={name:ft.CONSTRAINTS_NOT_SATISFIED,message:"It's not possible to satisfy one or more constraints passed into the getUserMedia function"},yn={name:ft.NO_DEVICES_FOUND,message:"No voice or video input devices are available on this machine."},fn={name:ft.HARDWARE_UNAVAILABLE,message:"The selected voice or video devices are unavailable. Verify that the chosen devices are not in use by another application."},sn={name:ft.UNABLE_TO_CAPTURE_SCREEN,message:"Unable to capture screen. Unknown error occurred"},Ln={AbortError:{name:ft.UNABLE_TO_CAPTURE_MEDIA,message:"Unable to capture media. Unknown error occurred"},NotAllowedError:an,NotFoundError:yn,NotReadableError:fn,OverconstrainedError:on,SecurityError:nt({},an,{message:"End-user denied permission to hardware devices or user media support may be disabled on this page"}),TypeError:on,PermissionDeniedError:an,PermissionDismissedError:an,NotSupportedError:mn,ConstraintNotSatisfiedError:on,MandatoryUnsatisfiedError:on,OverConstrainedError:on,DevicesNotFoundError:yn,NoDevicesFoundError:yn,HardwareUnavailableError:fn,SourceUnavailableError:fn,TrackStartError:fn,ScreenCaptureError:sn,TabCaptureError:sn};return ot({objectToTrack:Ln,keys:["PermissionDeniedError","PermissionDismissedError","NotSupportedError","ConstraintNotSatisfiedError","MandatoryUnsatisfiedError","OverConstrainedError","DevicesNotFoundError","NoDevicesFoundError","HardwareUnavailableError","SourceUnavailableError","TrackStartError","ScreenCaptureError","TabCaptureError"],onUsage(Xn){It.logEvent({action:"DeprecatedPropertyUsage:getUserMedia:errorMap",variation:"Event",payload:{key:Xn}})}}),Ln})(),_t=(an,mn)=>{let on=an;on==="AbortError"&&typeof mn=="string"&&mn.match(/(screen|tab).?capture/i)&&(on="ScreenCaptureError");const yn=tn[on];let fn;return yn?fn=St(yn.name,new Error(`${yn.message} (getUserMedia error: ${an})`)):fn=new Error(`Unknown error while getting user media: ${an}`),fn.originalMessage=mn,fn.originalName=an,fn},Kt=an=>{if(rt(an)&&an.name){let mn=an.name,on=an.message;if((on==="Cannot find getUserMedia"||on==="Cannot find getDisplayMedia")&&(dt.name==="Chrome"&&dt.version>73&&Et.location.protocol!=="https:"?mn="NotAllowedError":mn="NotSupportedError"),dt.name==="Safari"&&mn==="Error"){const sn=Object.prototype.toString.call(an).match(/^\[object (\w+Error)\]$/);sn&&(mn=sn[1])}const yn=_t(mn,on);return yn.constraintName=an.constraint||an.constraintName,yn instanceof at||It.logEvent({action:"UnexpectedError:getUserMedia:parseErrorEvent",variation:"Event",payload:{name:yn.name,message:yn.message,originalMessage:yn.originalMessage}}),yn}if(typeof an=="string"){const mn=_t(an);return It.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error is string",error:an}}),mn}return It.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error was not string or object with name property",error:an}}),new Error("Unknown error type while getting media")},cn=function(mn){if(!mn||!rt(mn))return!0;for(const on in mn)if(mn.hasOwnProperty(on)&&mn[on])return!1;return!0};return function(an,mn){if(mn===void 0&&(mn=!1),Tt.debug("getUserMedia wrapper called with",an),cn(an))return Tt.error("Couldn't get UserMedia: All constraints were false"),ct(tt.reject(St(ft.NO_VALID_CONSTRAINTS,new Error("Video and Audio was disabled, you need to enable at least one"))));const on=mn&&gt.isSupportedInThisBrowser?Nt:kt,yn=ct(on(an).catch(Ln=>{const Xn=Kt(Ln);if(Xn.name===ft.UNABLE_TO_CAPTURE_SCREEN)return new tt((pn,Vn)=>{pt.checkCapability(Tn=>{if(Tn.extensionRequired==="chrome"){if(Tn.extensionRegistered&&!Tn.extensionInstalled){const Jn=St(ft.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,Xn);Jn.message="Screen sharing extension not installed see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",Vn(Jn)}else if(!Tn.extensionRegistered){const Jn=St(ft.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,Xn);Jn.message="Screen sharing extension not registered see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",Vn(Jn)}}else Vn(Xn)})});throw Xn}).then(Ln=>(Tt.debug("got stream:",{stream:Ln,tracks:Ln.getTracks(),trackLabels:Ln.getTracks().map(Xn=>Xn.label)}),Ln))),fn=Wt.protocol.indexOf("https")!==-1?500:100;let sn=!0;const un=()=>{sn=!1};return yn.then(un,un),it(fn).then(()=>{if(!sn)return;const Ln=()=>{yn.emit("accessDialogClosed")};yn.emit("accessDialogOpened"),yn.then(Ln,Ln)}),yn}}}).call(this,b(0))},function(_e,et,b){_e.exports=function(tt){let nt=tt===void 0?{}:tt,rt=nt.objectToTrack,it=nt.keys,ot=nt.onUsage;if(!Array.isArray(it)&&it!==void 0)throw new Error("keys must be an array, or undefined");if(typeof ot!="function")throw new Error("onUsage must be a function");if(rt==null)throw new Error("Expected objectToTrack to be a trackable object");Object.keys(rt).forEach(st=>{if(it!==void 0&&it.indexOf(st)===-1)return;let at=rt[st];Object.defineProperty(rt,st,{get(){return ot(st),at},set(ct){at=ct,ot(st,at)},enumerable:!0})})}},function(_e,et,b){const tt=b(2),nt=b(650),rt=nt.isCallbackBasedAPI;let it=b(264),ot=null;const st=(lt,dt)=>{ot.getSources(lt,dt)},at=(lt,dt)=>{ot.getSources(lt).then(ft=>{dt(void 0,ft)},dt)},ct=()=>rt?st:at,ut=(lt,dt)=>{ct()({types:[lt]},(St,Tt)=>{if(St){dt(St);return}const pt=Tt[0];if(!pt){dt(new Error("Could not find Electron source for screensharing"));return}const gt={audio:!1,video:{mandatory:{chromeMediaSource:lt,chromeMediaSourceId:pt.id}}};dt(void 0,gt)})};_e.exports=function(dt){dt===void 0&&(dt={});try{const ft=()=>{let Tt=typeof window!==void 0?window:commonjsGlobal;for(;typeof Tt.require!="function"&&Tt.parent&&Tt.parent!==Tt;)Tt=Tt.parent;return Tt},St=()=>{const Tt=ft();return(Tt.require?Tt.require("electron"):Tt.electron).desktopCapturer};ot=dt.desktopCapturer||(tt.isElectron?St():null),it=dt.isElectronScreenSharingSource||it}catch{}return{isSupportedInThisBrowser:ot!==null,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!0,window:!0,browser:!0},register:()=>({isInstalled:ft=>ft(!0),getConstraints(ft,St,Tt){it(ft)?Tt(void 0,{audio:!0,video:!1}):ut(ft,Tt)}})}}},function(_e,et,b){const nt=b(2).version<78,rt=!nt;_e.exports={isCallbackBasedAPI:nt,isPromiseBasedAPI:rt}},function(_e,et,b){const tt=b(2),nt=b(159).default,rt=()=>tt.isFirefox?!nt:!1;_e.exports={isSupportedInThisBrowser:rt(),autoRegisters:!0,extensionRequired:!1,extensionInstalled:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:!0,browser:!1},register(){return{isInstalled(it){it(typeof OTScreenSharing=="object")},getConstraints(it,ot,st){ot.video={mediaSource:it},ot.browserWindow&&(ot.video.browserWindow=ot.browserWindow,delete ot.browserWindow),typeof ot.scrollWithPage<"u"&&(ot.video.scrollWithPage=ot.scrollWithPage,delete ot.scrollWithPage),st(void 0,ot)}}}}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=b(653),ot=it.normaliseOptions,st=b(289),at=st.isMediaStreamTrack,ct=b(148),ut=b(9),lt=b(141),dt=b(290).default,ft=b(7),St=b(47),Tt=b(13)(),pt=b(291),gt=pt.isValidVideoContentHint,yt=b(6),Et=b(149),It=b(2),Gt=b(263),Wt="getUserMedia request was aborted";_e.exports=function(kt){kt===void 0&&(kt={}),["deviceHelpers","getUserMediaHelper"].forEach(fn=>{ct(kt[fn],`${fn} dependency must be injected into processPubOptions`)});const Vt=kt.generateConstraintInfo||b(253),Nt=kt.global||(typeof window!==void 0?window:commonjsGlobal),tn=kt.logging||b(1)("processPubOptions"),_t=kt.navigator||Nt.navigator,Kt=kt.screenSharing||b(161)(),cn=kt.env||It,an=b(654)({navigator:_t||{}}),mn=kt,on=mn.deviceHelpers,yn=mn.getUserMediaHelper;return(fn,sn,un)=>{var Ln,Xn,pn;const Vn=ot(fn,sn,tn),Tn=Et(Vn.videoSource),Jn=at(Vn.audioSource),lr=at(Vn.videoSource),tr=!Jn&&Vn.audioSource!==null,Qn=!lr&&Vn.videoSource!==null,Sr=tr||Qn,vr=Un=>typeof Un=="boolean",Fr=!Tn||Jn||Gt,kr=lt(Vn,{mirror:!Tn&&!lr,publishAudio:!0,publishVideo:!0,showControls:!0,fitMode:Tn?"contain":"cover",insertDefaultUI:!0,enableRenegotiation:!1,enableStereo:!1,enableDtx:!1,disableAudioProcessing:!1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),jr=Vn.audioFallback,xo=jr===void 0?{}:jr,Er=Vn.audioFallbackEnabled;if(kr.publisherAudioFallbackEnabled=(Ln=xo.publisher)!=null?Ln:!1,kr.subscriberAudioFallbackEnabled=(Xn=(pn=xo.subscriber)!=null?pn:Er)!=null?Xn:!Tn,kr.videoContentHint!==void 0&&!gt(kr.videoContentHint)&&(tn.warn(`${sn}: Invalid content hint. Valid content hints are "text", "detail", "motion", or ""`),kr.videoContentHint=""),kr.name&&(kr.name=String(kr.name)),vr(kr.enableDtx)||(kr.enableDtx=!1),vr(kr.enableStereo)||(kr.enableStereo=!1),kr.initials&&(typeof kr.initials!="string"&&(kr.initials=""),kr.initials.length>2&&(kr.initials="",tn.warn("Publisher initials cleared. Only one or two characters allowed for publisher initials.")),kr.initials=kr.initials.toUpperCase()),kr.constraints)tn.warn(`${sn}: You have passed your own constraints not using ours`);else{const Un=Vt(Object.assign({isScreenSharing:Tn,isCustomAudioTrack:Jn,isCustomVideoTrack:lr},St(kr,["audioSource","publishAudio","videoSource","publishVideo","resolution","maxResolution","frameRate","facingMode","enableRenegotiation","enableStereo","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl"]),{env:cn,usingOptionalMandatoryStyle:an(Tn)}));ut(kr,Un)}const xr={isScreenSharing:Tn,isCustomAudioTrack:Jn,isCustomVideoTrack:lr,shouldAllowAudio:Fr,properties:kr};return yt(xr),xr.getUserMedia=(0,rt.default)(nt.default.mark(function Un(){var Mn,sr,Ar,so,Bn,gr,Or,ro,Ao;return nt.default.wrap(function(vo){for(;;)switch(vo.prev=vo.next){case 0:if(Mn=function(){for(var zr=arguments.length,Go=new Array(zr),mo=0;mo<zr;mo++)Go[mo]=arguments[mo];return xr.emit("accessDialogOpened",...Go)},sr=function(){for(var zr=arguments.length,Go=new Array(zr),mo=0;mo<zr;mo++)Go[mo]=arguments[mo];return xr.emit("accessDialogClosed",...Go)},Sr){vo.next=7;break}return Ar=new Nt.MediaStream,Jn&&Ar.addTrack(Vn.audioSource),lr&&Ar.addTrack(Vn.videoSource),vo.abrupt("return",Ar);case 7:if(!Tn){vo.next=15;break}return vo.next=10,Kt.getConstraints({onAccessDialogOpened:Mn,onAccessDialogClosed:sr,videoSource:Vn.videoSource,constraints:kr.constraints});case 10:if(kr.constraints=vo.sent,!un()){vo.next=13;break}throw Tt(ft.CANCEL,new Error(Wt));case 13:vo.next=25;break;case 15:return vo.next=17,on.shouldAskForDevices();case 17:if(so=vo.sent,!un()){vo.next=20;break}throw Tt(ft.CANCEL,new Error(Wt));case 20:tn.debug(`${sn}: shouldAskForDevices:`,so),so.video||(tn.warn(`${sn}: Setting video constraint to false, there are no video sources`),kr.constraints.video=!1),so.audio||(tn.warn(`${sn}: Setting audio constraint to false, there are no audio sources`),kr.constraints.audio=!1),xr.videoDevices=so.videoDevices,xr.audioDevices=so.audioDevices;case 25:if(Bn=kr.constraints,tn.debug(`${sn}: onConstraintsFound`,Bn),!un()){vo.next=29;break}throw Tt(ft.CANCEL,new Error(Wt));case 29:return gr="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=188088",Or="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=204106",ro=po=>po.originalName==="NotReadableError"&&po.originalMessage==="Failed starting capture of a video track",Ao=function(){var po=(0,rt.default)(nt.default.mark(function zr(){var Go,mo,Zo,$r,Ru;return nt.default.wrap(function(yo){for(;;)switch(yo.prev=yo.next){case 0:return Go=yn(Bn,Tn),Go.on("accessDialogOpened",Mn),Go.on("accessDialogClosed",sr),yo.prev=3,yo.next=6,Go;case 6:if(mo=yo.sent,!(cn.isiOS&&kr.publishVideo&&mo.getVideoTracks().length&&mo.getVideoTracks()[0].readyState==="ended")){yo.next=11;break}throw mo.getTracks().forEach(_o=>_o.stop()),Zo=new Error(gr),Zo;case 11:return yo.abrupt("return",mo);case 14:if(yo.prev=14,yo.t0=yo.catch(3),!cn.isiOS){yo.next=34;break}if(!(ro(yo.t0)&&cn.iOSVersion>=13&&cn.iOSVersion<13.4)){yo.next=32;break}return yo.prev=18,$r=yn({audio:!0,video:!1},!1),yo.next=22,$r;case 22:Ru=yo.sent,Ru.getTracks().forEach(_o=>_o.stop()),yo.next=29;break;case 26:yo.prev=26,yo.t1=yo.catch(18),tn.debug(`${sn}: error disposing audio track`,yo.t1);case 29:throw new Error(Or);case 32:if(yo.t0.name!==ft.HARDWARE_UNAVAILABLE){yo.next=34;break}throw new Error(gr);case 34:throw yo.t0;case 35:return yo.prev=35,setTimeout(()=>{Go.off("accessDialogOpened",Mn),Go.off("accessDialogClosed",sr)}),yo.finish(35);case 38:case"end":return yo.stop()}},zr,null,[[3,14,35,38],[18,26]])}));return function(){return po.apply(this,arguments)}}(),vo.next=35,dt(Ao,(po,zr)=>[gr,Or].includes(po.message)&&zr===1&&!un()?1e3:!1)();case 35:if(Ar=vo.sent,!un()){vo.next=39;break}throw Ar.getTracks().forEach(po=>{po.stop()}),Tt(ft.CANCEL,new Error(Wt));case 39:return Jn&&Ar.addTrack(Vn.audioSource),lr&&Ar.addTrack(Vn.videoSource),vo.abrupt("return",Ar);case 42:case"end":return vo.stop()}},Un)})),xr}}},function(_e,et,b){const tt=b(289),nt=tt.isMediaStreamTrack,rt=b(37),it=b(2),ot=(st,at,ct)=>{const ut=st&&typeof st=="object"?rt(st):{};if(ut.audioSource===!1&&(ut.audioSource=null),ut.videoSource===!1&&(ut.videoSource=null),ut.minVideoBitrate!==void 0&&!(typeof ut.minVideoBitrate=="number"&&ut.minVideoBitrate>0)&&(ct.warn(`${at}: Invalid minVideoBitrate in publisher properties. minVideoBitrate must be a positive number`),delete ut.minVideoBitrate),ut.audioBitrate!==void 0&&!(ut.audioBitrate>=6*1e3&&ut.audioBitrate<=510*1e3)&&(ct.warn(`${at}: Invalid audioBitrate in publisher properties. audioBitrate must be a number between ${6*1e3} and ${510*1e3} bits per second`),delete ut.audioBitrate),it.name==="Firefox"&&it.version<49){const lt="Firefox 48 and below";nt(ut.audioSource)&&(ut.audioSource=null,ct.warn(`${at}: Cannot use custom tracks with ${lt}. Setting audioSource to null`)),nt(ut.videoSource)&&(ut.videoSource=null,ct.warn(`${at}: Cannot use custom tracks with ${lt}. Setting videoSource to null`))}return ut};et.normaliseOptions=ot},function(_e,et,b){const tt=b(2),nt=tt.name,rt=tt.version,it=b(257);_e.exports=function(st){let at=st===void 0?{}:st,ct=at.navigator,ut=ct===void 0?window.navigator:ct;return function(dt){return dt&&!it||!(ut.mediaDevices&&ut.mediaDevices.getUserMedia)||nt==="Chrome"&&rt<61}}},function(_e,et,b){_e.exports=function(nt){nt===void 0&&(nt={}),["processPubOptions"].forEach(at=>{if(!nt[at])throw new Error(`${at} dependency must be injected into OT.getUserMedia`)});const rt=nt.logging||b(1)("getUserMedia"),it=nt,ot=it.processPubOptions;return function(ct){return ct===void 0&&(ct={}),ot(ct,"OT.getUserMedia",()=>!1).getUserMedia().catch(lt=>{throw rt.error(`OT.getUserMedia failed to getUserMedia: ${lt}`),lt})}}},function(_e,et,b){_e.exports=function(nt,rt){const it=(ot,st)=>()=>{throw new Error(`Cannot ${ot} ${st}, ${nt} is destroyed`)};Object.keys(rt).forEach(ot=>{typeof rt[ot]=="function"?rt[ot]=it("call",ot):Object.defineProperty(rt,ot,{get:it("get",ot),set:it("set",ot)})})}},function(_e,et,b){_e.exports=tt=>{if("srcObject"in tt)return;const nt=window&&window.URL;"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(tt,"srcObject",{get(){return this._srcObject},set(rt){const it=this;if(this._srcObject=rt,this.src&&nt.revokeObjectURL(this.src),!rt){this.src="";return}return this.src=nt.createObjectURL(rt),rt.addEventListener("addtrack",()=>{it.src&&nt.revokeObjectURL(it.src),it.src=nt.createObjectURL(rt)}),rt.addEventListener("removetrack",()=>{it.src&&nt.revokeObjectURL(it.src),it.src=nt.createObjectURL(rt)}),this._srcObject}})}},function(_e,et,b){const tt=it=>!(!it||typeof it.getBoundingClientRect!="function"),nt=it=>{const ot=it.getBoundingClientRect(),st=window.innerHeight||document.documentElement.clientHeight,at=window.innerWidth||document.documentElement.clientWidth,ct=ot.top<=st&&ot.top+ot.height>=0,ut=ot.left<=at&&ot.left+ot.width>=0;return ct&&ut},rt=it=>{const ot=st=>st.style&&st.style.visibility==="hidden"?!0:st.parentNode?ot(st.parentNode):!1;return it.offsetParent!==null&&!ot(it)};_e.exports=it=>tt(it)&&nt(it)&&rt(it)},function(_e,et,b){const tt=b(105),nt=b(8),rt={0:"rotate(0deg)",270:"rotate(90deg)",90:"rotate(-90deg)",180:"rotate(180deg)"};_e.exports=function(ot,st,at){let ct=at;tt(ot,{isRotated:{get(){return this.orientation()&&(this.orientation().videoOrientation===270||this.orientation().videoOrientation===90)}},orientation:{get(){return ct},set(ut){ct=ut;const lt=rt[ut.videoOrientation]||rt.ROTATED_NORMAL;switch(nt.env.name){case"Chrome":case"Safari":st().style.webkitTransform=lt;break;default:st().style.transform=lt}ot.trigger("orientationChanged",ct)}},audioChannelType:{get(){return"mozAudioChannelType"in this.domElement?this.domElement.mozAudioChannelType:"unknown"},set(ut){"mozAudioChannelType"in this.domElement&&(this.domElement.mozAudioChannelType=ut)}}})}},function(_e,et,b){_e.exports=function(){function nt(rt){return rt.getTracks().every(it=>it.readyState==="ended")}return function(it,ot,st){const at=[];function ct(ft){setTimeout(()=>{if(at.length)if(nt(it))lt(),typeof ot=="function"&&ot();else{const St=ft.target;ut(St),typeof st=="function"&&st(St)}},100)}function ut(ft){ft.onended===ct&&(ft.onended=null);const St=at.indexOf(ft);St>=0&&at.splice(St,1)}function lt(){at.slice().forEach(ut)}function dt(){it.getTracks().forEach(ft=>{at.push(ft),ft.onended=ct})}return dt(),{stop:lt,refresh:()=>{lt(),dt()}}}}},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(18)),rt=tt(b(1)),it=tt(b(108)),ot=b(74);const st=(0,rt.default)("AudioFallbackState");var ct=()=>{const ut=new nt.default;let lt=ot.CongestionLevels.LOW,dt=it.default.ACTIVE_VIDEO;const ft=yt=>{dt=yt,ut.emit("stateChange",{state:yt})},St=()=>{lt=ot.CongestionLevels.LOW,ft(it.default.ACTIVE_VIDEO)},Tt=()=>{lt===ot.CongestionLevels.LOW&&ft(it.default.ACTIVE_VIDEO_WITH_WARNING),lt=ot.CongestionLevels.MEDIUM},pt=()=>{lt=ot.CongestionLevels.CRITICAL,ft(it.default.SUSPENDED_VIDEO)},gt={[ot.CongestionLevels.LOW]:St,[ot.CongestionLevels.MEDIUM]:Tt,[ot.CongestionLevels.CRITICAL]:pt};return Object.assign(ut,{setCongestionLevel(yt){if(this.congestionLevel===yt){st.warn(`Congestion level already set: ${yt}`);return}const Et=gt[yt];Et?Et():st.warn(`Invalid congestion level: ${yt}`)},getState(){return dt},reset(){lt=ot.CongestionLevels.LOW,dt=it.default.ACTIVE_VIDEO}})};et.default=ct},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(663)),rt=tt(b(664)),it=tt(b(665)),ot=tt(b(667)),st=tt(b(668));const at=b(18);var ut=function(dt,ft){dt===void 0&&(dt={}),ft===void 0&&(ft={});const St=new at,Tt=dt,pt=Tt.videoResolution,gt=Tt.getStats,yt=ft,Et=yt.createMovingAverageTracker,It=Et===void 0?ot.default:Et,Gt=yt.createTimeBasedCongestionLevel,Wt=Gt===void 0?nt.default:Gt,At=yt.createBasicCongestionLevel,kt=At===void 0?rt.default:At,Vt=yt.getFairQualityBandwidthForResolution,Nt=Vt===void 0?st.default:Vt,tn=yt.CongestionLevelStats,_t=tn===void 0?it.default:tn,Kt={bandwidthFairThreshold:Nt(pt)},cn=Wt(Kt),an=kt(Kt),mn=It(),on=It(),yn=It(),fn=()=>cn.getLevel({bandwidth:yn.getMovingAverageValue(),audioPacketLoss:mn.getMovingAverageValue()}),sn=()=>an.getLevel({bandwidth:yn.getMovingAverageValue(),audioPacketLoss:mn.getMovingAverageValue()}),un=()=>{const pn=fn(),Vn=sn(),Tn=Math.max(pn,Vn);St.emit("congestionLevel",Tn)},Ln=pn=>{let Vn=pn.audioPacketLoss,Tn=pn.videoPacketLoss,Jn=pn.bandwidth;mn.addValue(Vn),on.addValue(Tn),yn.addValue(Jn),un()},Xn=new _t(gt);return Xn.on("statsAvailable",pn=>{Ln(pn)}),Object.assign(St,{start(){Xn.start()},stop(){Xn.stop()}})};et.default=ut},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(297)),rt=b(74),ot=function(at){at===void 0&&(at={});const ct=Object.assign({},nt.default,at);let ut=!1,lt;return{getLevel(dt){if(dt.audioPacketLoss<ct.packetLossCriticalThreshold)return ut=!1,rt.LOW;const St=Date.now();return ut||(lt=St,ut=!0),St>lt+ct.criticalCongestionPeriod?rt.CRITICAL:St>lt+ct.criticalCongestionPeriod/2?rt.MEDIUM:rt.LOW}}};et.default=ot},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(297)),rt=b(74),ot=function(at){at===void 0&&(at={});const ct=Object.assign({},nt.default,at);return{getLevel(ut){let lt=ut.bandwidth,dt=ut.audioPacketLoss,ft;if(lt<=0)return dt>ct.packetLossCriticalThresholdMediumBw?ft=rt.CRITICAL:ft=rt.LOW,ft;if(lt>=ct.bandwidthFairThreshold?ft=rt.LOW:lt>=ct.bandwidthCriticalThreshold?lt>=(ct.bandwidthCriticalThreshold+ct.bandwidthFairThreshold)/2?dt>ct.packetLossCriticalThresholdMediumBw*2?ft=rt.CRITICAL:ft=rt.MEDIUM:dt>ct.packetLossCriticalThresholdMediumBw?ft=rt.CRITICAL:ft=rt.MEDIUM:dt>ct.packetLossCriticalThreshold?ft=rt.CRITICAL:ft=rt.MEDIUM,ft===void 0)throw new Error("undefined congestion level");return ft}}};et.default=ot},function(_e,et,b){et.__esModule=!0,et.default=void 0;var tt=rt(b(666));function nt(ut){if(typeof WeakMap!="function")return null;var lt=new WeakMap,dt=new WeakMap;return(nt=function(St){return St?dt:lt})(ut)}function rt(ut,lt){if(!lt&&ut&&ut.__esModule)return ut;if(ut===null||typeof ut!="object"&&typeof ut!="function")return{default:ut};var dt=nt(lt);if(dt&&dt.has(ut))return dt.get(ut);var ft={},St=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Tt in ut)if(Tt!=="default"&&Object.prototype.hasOwnProperty.call(ut,Tt)){var pt=St?Object.getOwnPropertyDescriptor(ut,Tt):null;pt&&(pt.get||pt.set)?Object.defineProperty(ft,Tt,pt):ft[Tt]=ut[Tt]}return ft.default=ut,dt&&dt.set(ut,ft),ft}const it=b(18),ot=1e3,st=500;var ct=function(lt,dt){dt===void 0&&(dt={});const ft=dt.StatsUtils||tt,St=new it;let Tt;const pt=Et=>{const It=ft.parseStats(Et);if(!Tt){Tt=It;return}const Gt=ft.getAudioPacketLoss(It,Tt),Wt=ft.getVideoPacketLoss(It,Tt),At=It.bandwidth;Tt=It,St.emit("statsAvailable",{audioPacketLoss:Gt,videoPacketLoss:Wt,bandwidth:At})},gt=()=>{lt((Et,It)=>{Et||pt(It)})};let yt;return Object.assign(St,{start(){yt=setTimeout(()=>{gt(),yt=setInterval(()=>{gt()},st)},ot)},stop(){clearInterval(yt)}})};et.default=ct},function(_e,et,b){et.__esModule=!0,et.parseStats=et.getVideoResolution=et.getVideoPacketStats=et.getVideoPacketLoss=et.getBandwidth=et.getAudioPacketStats=et.getAudioPacketLoss=void 0;const tt=(dt,ft)=>{const St=dt.filter(yt=>{let Et=yt.type,It=yt.kind;return Et==="outbound-rtp"&&It===ft}),Tt=dt.filter(yt=>{let Et=yt.type,It=yt.kind;return Et==="remote-inbound-rtp"&&It===ft}),pt=St.reduce((yt,Et)=>yt+Et.packetsSent,0),gt=Tt.reduce((yt,Et)=>yt+Et.packetsLost,0);return{packetsSent:pt,packetsLost:gt}},nt=dt=>dt.filter(Tt=>{let pt=Tt.type,gt=Tt.kind;return pt==="outbound-rtp"&&gt==="video"}).reduce((Tt,pt)=>({width:Math.max(Tt.width,pt.frameWidth),height:Math.max(Tt.height,pt.frameHeight)}),{width:0,height:0});et.getVideoResolution=nt;const rt=dt=>{const ft=tt(dt,"audio"),St=ft.packetsSent;return{audioPacketsLost:ft.packetsLost,audioPacketsSent:St}};et.getAudioPacketStats=rt;const it=dt=>{const ft=tt(dt,"video"),St=ft.packetsSent;return{videoPacketsLost:ft.packetsLost,videoPacketsSent:St}};et.getVideoPacketStats=it;const ot=dt=>dt.find(St=>St.type==="candidate-pair").availableOutgoingBitrate;et.getBandwidth=ot;const st=dt=>{const ft=rt(dt),St=ft.audioPacketsSent,Tt=ft.audioPacketsLost,pt=it(dt),gt=pt.videoPacketsSent,yt=pt.videoPacketsLost;return{bandwidth:ot(dt),audioPacketsSent:St,audioPacketsLost:Tt,videoPacketsSent:gt,videoPacketsLost:yt}};et.parseStats=st;const at=(dt,ft)=>ft===0?0:dt/ft,ct=(dt,ft,St)=>{const Tt=ft[`${dt}PacketsSent`]-St[`${dt}PacketsSent`],pt=ft[`${dt}PacketsLost`]-St[`${dt}PacketsLost`];return at(pt,Tt)},ut=(dt,ft)=>ct("audio",dt,ft);et.getAudioPacketLoss=ut;const lt=(dt,ft)=>ct("video",dt,ft);et.getVideoPacketLoss=lt},function(_e,et,b){et.__esModule=!0,et.default=void 0;var nt=function(it){it===void 0&&(it=0);let ot=it,st=1e4,at;const ct=()=>{const ut=Date.now();if(!at)return at=ut,1;const lt=ut-at,dt=1-Math.exp(-lt/st);return at=ut,dt};return{setPeriod(ut){st=ut},getMovingAverageValue(){return ot},addValue(ut){const lt=ct();ot=ut*lt+ot*(1-lt)}}};et.default=nt},function(_e,et,b){const tt=[{width:"320",height:"180",fairQualityBitrate:12e4},{width:"320",height:"240",fairQualityBitrate:12e4},{width:"352",height:"288",fairQualityBitrate:125e3},{width:"480",height:"270",fairQualityBitrate:125e3},{width:"640",height:"360",fairQualityBitrate:15e4},{width:"640",height:"480",fairQualityBitrate:15e4},{width:"960",height:"540",fairQualityBitrate:15e4},{width:"1280",height:"720",fairQualityBitrate:4e5},{width:"1920",height:"1080",fairQualityBitrate:5e5}].sort((ot,st)=>ot.fairQualityBitrate-st.fairQualityBitrate),nt=25e4,rt=tt.reduce((ot,st)=>{let at=st.fairQualityBitrate;return Math.max(ot,at)},nt),it=(ot,st)=>{var at;return!ot||!st?nt:((at=tt.find(ut=>{let lt=ut.height,dt=ut.width;return st*ot<=lt*dt}))==null?void 0:at.fairQualityBitrate)||rt};_e.exports=it},function(_e,et,b){const tt=nt=>nt>=15&&nt<15.4;_e.exports=nt=>(nt=nt||b(2),nt.isiPad?!0:nt.isiPhone?tt(nt.iOSVersion):nt.isSafari?tt(nt.version):!1)},function(_e,et,b){const tt=[{width:320,height:180,maxBitrate:3e5},{width:320,height:240,maxBitrate:4e5},{width:352,height:288,maxBitrate:5e5},{width:480,height:270,maxBitrate:55e4},{width:640,height:360,maxBitrate:8e5},{width:640,height:480,maxBitrate:8e5},{width:960,height:540,maxBitrate:11e5},{width:1280,height:720,maxBitrate:25e5},{width:1920,height:1080,maxBitrate:45e5}].sort((it,ot)=>it.maxBitrate-ot.maxBitrate),nt=45e5,rt=(it,ot)=>{var st;return!it||!ot?nt:((st=tt.find(ct=>{let ut=ct.height,lt=ct.width;return ot*it<=ut*lt}))==null?void 0:st.maxBitrate)||nt};_e.exports=rt},function(_e,et,b){var tt=b(62),nt=b(99),rt=b(35);function it(ot,st){var at={};return st=rt(st,3),nt(ot,function(ct,ut,lt){tt(at,ut,st(ct,ut,lt))}),at}_e.exports=it},function(_e,et,b){_e.exports=function(nt,rt){const it=setTimeout(()=>{nt((ot,st)=>{if(!ot)for(let at=0;at<st.length;at+=1){const ct=st[at];ct.id.indexOf("_send")!==-1&&ct.type==="ssrc"&&(ct.kind==="audio"||ct.mediaType==="audio")&&parseInt(ct.bytesSent,10)===0&&rt()}})},3e3);return function(){clearTimeout(it)}}},function(_e,et,b){const tt=b(6),nt=b(301),rt=b(15);_e.exports=function(){return function(st,at){const ct={},ut=[];let lt=!1,dt=!1;this._id=rt();const ft=()=>{this.trigger("iceConnected"),lt=!0},St=()=>this.trigger("close"),Tt=At=>this.trigger("remoteVideoSupported",At),pt=At=>{let kt=At.reason,Vt=At.prefix;return this.trigger("error",kt,Vt)},gt=At=>this.trigger("iceConnectionStateChange",At),yt=At=>this.trigger("signalingStateChange",At),Et=At=>this.trigger("signalingStateStable",At),It=()=>{dt&&(dt=!1,at.removeFromSinglePeerConnection(this._id))};tt(this);const Gt=at.getPeerConnection(st,this);Gt.on({iceConnected:ft,close:St,signalingStateChange:yt,signalingStateStable:Et,error:pt,qos:At=>this.trigger("qos",At),iceConnectionStateChange:gt,remoteVideoSupported:Tt,negotiationNeeded:It},this);const Wt=()=>Gt.iceConnectionStateIsConnected()&&!lt;this._onTrackAdded=At=>{const kt=At.track,Vt=At.transceiver;ct[kt.id]=Vt.mid,ut.push(kt),Wt()&&ft(),this.trigger("trackAdded",At)},this.disconnect=()=>{dt=!0,at.removeSubscriber(this._id,Object.values(ct))},this.removeTrack=At=>{ct[At.id]&&at.removeSubscriber(this._id,[ct[At.id]]),nt(ut,At),at.removeTrack(At,this._id)},this.remoteTracks=()=>ut,this.generateOfferAndSend=()=>Gt.generateOfferAndSend(),this.getDataChannel=(At,kt,Vt)=>{Gt.getDataChannel(At,kt,Vt)},this.getSourceStreamId=()=>Gt.getSourceStreamId(),this.processMessage=(At,kt)=>{(At==="offer"||At==="answer")&&at.cacheOfferAnswer(kt.content.sdp),Gt.processMessage(At,kt)},this.remoteDescription=()=>Gt.remoteDescription(),this.getStats=At=>{Gt.getStats(At)},this.getSynchronizationSources=At=>{Gt.getSynchronizationSources(At)},this.getRtcStatsReport=At=>{Gt.getRtcStatsReport(At)},this.remoteStreams=()=>Gt.remoteStreams(),this.hasRelayCandidates=()=>Gt.hasRelayCandidates(),this.iceRestart=()=>Gt.iceRestart(),this.iceConnectionStateIsConnected=()=>Gt.iceConnectionStateIsConnected()}}},function(_e,et,b){_e.exports=function(rt,it,ot){ot===void 0&&(ot=!1);let st=null,at=0,ct=null,ut=ot;const lt=gt=>gt.type==="inbound-rtp"&&(gt.kind||gt.mediaType)==="audio",dt=gt=>gt.id===ct&&gt.type==="track"&&(gt.kind||gt.mediaType)==="audio",ft=(gt,yt)=>gt===st&&yt===at,St=(gt,yt)=>!ut&&gt===0&&st===0&&yt>at,Tt=()=>{setTimeout(()=>{ut=!0},3e3)},pt=setInterval(()=>{rt((gt,yt)=>{if(gt)return;ct=(yt.find(lt)||{}).trackId;const It=yt.find(dt);if(It){const Gt=It.audioLevel,Wt=It.totalSamplesReceived;if(Gt===void 0)return;ft(Gt,Wt)?(clearInterval(pt),it("audioLevelStuck")):St(Gt,Wt)&&(clearInterval(pt),it("audioLevelStuckAt0")),st=Gt,at=Wt}})},500);return ot||Tt(),{stop:()=>{clearInterval(pt)}}}},function(_e,et,b){(function(tt){const nt=b(20),rt=new nt;_e.exports=function(ot){ot===void 0&&(ot={});const st=ot.analytics||rt,at=ot.errors||b(7),ct=ot.ExceptionCodes||b(10),ut=ot.otError||b(13)(),lt=ot.sessionObjects||b(21),dt=ot.uuid||b(15);return function(St){St===void 0&&(St=()=>{});const Tt=dt();function pt(gt){gt?St(ut(at.REPORT_ISSUE_FAILED,new Error("Error calling OT.reportIssue(). Check the client's network connection."),ct.REPORT_ISSUE_ERROR)):St(null,Tt)}lt.sessions.length()===0?st.logEvent({action:"ReportIssue",variation:"Event",payload:{reportIssueId:Tt}},null,pt):tt.all(lt.sessions.map(gt=>gt.reportIssue({id:Tt}))).then(()=>pt(),gt=>pt(gt))}}}).call(this,b(0))},function(_e,et,b){_e.exports=tt=>{let nt=tt.window,rt=!1;try{const it=Object.defineProperty({},"passive",{get(){rt=!0}});nt.addEventListener("testPassive",null,it),nt.removeEventListener("testPassive",null,it)}catch{}return rt}},function(_e,et,b){Object.defineProperty(et,"__esModule",{value:!0});var tt=function(){function ct(ut,lt){for(var dt=0;dt<lt.length;dt++){var ft=lt[dt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(ut,ft.key,ft)}}return function(ut,lt,dt){return lt&&ct(ut.prototype,lt),dt&&ct(ut,dt),ut}}(),nt=b(303),rt=it(nt);function it(ct){return ct&&ct.__esModule?ct:{default:ct}}function ot(ct,ut){if(!(ct instanceof ut))throw new TypeError("Cannot call a class as a function")}var st=function(){},at=function(){function ct(){ot(this,ct),this.internalIsCanceled=!1,this.listeners=[]}return tt(ct,[{key:"isCanceled",value:function(){return this.internalIsCanceled}},{key:"cancel",value:function(){this.internalIsCanceled||(this.internalIsCanceled=!0,this.listeners.forEach(function(lt){return lt()}),this.listeners=null)}},{key:"throwIfCanceled",value:function(){if(this.internalIsCanceled)throw new rt.default("Operation has been canceled.")}},{key:"onCancel",value:function(lt){var dt=this;return this.internalIsCanceled?st:(this.listeners.push(lt),function(){if(dt.listeners){var ft=dt.listeners.indexOf(lt);ft!==-1&&dt.listeners.splice(ft,1)}})}},{key:"fork",value:function(){if(this.internalIsCanceled)return ct.CANCELED;var lt=new ct;return this.onCancel(function(){return lt.cancel()}),lt}}]),ct}();et.default=at,at.CANCELED=new at,at.CANCELED.internalIsCanceled=!0},function(_e,et,b){(function(tt){const nt=b(61),rt=b(304).default,it=b(154);b(109)();function ot(st,at){const ct=nt(st),ut=new tt(lt=>{const dt=()=>{(st.videoWidth()>2||st.videoHeight()>2)&&lt(!0)};ct.on("videoDimensionsChanged",dt),dt()});return rt(it(ut,at,()=>!1),()=>ct.removeAll())}_e.exports=ot}).call(this,b(0))},function(_e,et,b){(function(tt){const nt=b(61),rt=b(304).default,it=b(154);b(109)();function ot(st,at){at===void 0&&(at=5e3);const ct=nt(st),ut=new tt(lt=>{ct.on("timeupdate",lt),ct.on("loadedmetadata",lt)});return rt(it(ut,at,()=>!1),()=>ct.removeAll())}_e.exports=ot}).call(this,b(0))},function(_e,et,b){const tt=b(1)("WidgetView:fixMini"),nt=128,rt=128,it=64,ot=64;_e.exports=function(at){const ct=at.clientWidth,ut=at.clientHeight;at.classList.remove("OT_micro"),at.classList.remove("OT_mini"),(ct<it||ut<ot)&&(at.classList.add("OT_micro"),tt.debug("OT_micro class added",{clientWidth:ct,clientHeight:ut,microWidth:it,microHeight:ot})),(ct<nt||ut<rt)&&(at.classList.add("OT_mini"),tt.debug("OT_mini class added",{clientWidth:ct,clientHeight:ut,miniWidth:nt,miniHeight:rt}))}},function(_e,et,b){const tt=b(15);_e.exports=function(rt,it){let ot,st;if(rt&&rt.nodeName?(ot=rt,(!ot.getAttribute("id")||ot.getAttribute("id").length===0)&&ot.setAttribute("id",`OT_${tt()}`),st=ot.getAttribute("id")):rt&&(ot=document.getElementById(rt),ot&&(st=rt)),st||(st=`OT_${tt().replace(/-/g,"_")}`),!ot)return ot=document.createElement("div"),ot.id=st,ot.setAttribute("id",st),ot.style.backgroundColor="#000000",document.body.appendChild(ot),ot;const at=document.createElement("div");switch(at.id=`OT_${tt()}`,it){case"append":return ot.appendChild(at),at;case"before":return ot.parentNode.insertBefore(at,ot),at;case"after":return ot.parentNode.insertBefore(at,ot.nextSibling),at;case"replace":default:for(;ot.firstChild;)ot.removeChild(ot.firstChild);return ot}}},function(_e,et,b){_e.exports=function(nt,rt){return rt===void 0&&(rt="px"),String(parseFloat(nt,10))===String(nt).trim()?`${String(nt).trim()}${rt}`:nt}},function(_e,et,b){const tt=()=>{const rt=document.createElementNS("http://www.w3.org/2000/svg","circle");return rt.setAttribute("cx","50%"),rt.setAttribute("cy","50%"),rt.setAttribute("r","50%"),rt.setAttribute("fill","%23000000"),rt},nt=rt=>{const it=document.createElementNS("http://www.w3.org/2000/svg","text");it.setAttribute("x","50%"),it.setAttribute("y","50%"),it.setAttribute("dy","5%"),it.setAttribute("line-height","133%"),it.setAttribute("font-size","108"),it.setAttribute("font-weight","500"),it.setAttribute("font-style","normal"),it.setAttribute("fill","%23FFFFFF"),it.setAttribute("font-family","spezia,sans-serif"),it.setAttribute("dominant-baseline","middle"),it.setAttribute("text-anchor","middle");const ot=document.createTextNode(rt);return it.appendChild(ot),it};_e.exports=rt=>{const it=document.createElementNS("http://www.w3.org/2000/svg","svg");it.setAttribute("viewBox","0 0 300 300"),it.setAttribute("style","width: 50%; dominant-baseline: middle; text-anchor: middle;");const ot=tt(),st=nt(rt);return it.appendChild(ot),it.appendChild(st),it}},function(_e,et,b){(function(tt){const nt=b(73);_e.exports=function(it,ot){let st=ot===void 0?{}:ot,at=st.frequency,ct=at===void 0?60:at,ut=st.timeout,lt=ut===void 0?2e3:ut;return new tt((dt,ft)=>{let St;const Tt=new nt(()=>{function pt(){try{return it()}catch{return!1}}pt()&&(clearTimeout(St),Tt.stop(),dt())},ct);St=setTimeout(()=>{Tt.stop(),ft(new Error("TIMEOUT"))},lt),Tt.start()})}}).call(this,b(0))},function(_e,et,b){const tt=b(13)(),nt=b(7),rt=b(10);_e.exports=it=>String(it.code)==="404"?tt(nt.STREAM_NOT_FOUND,new Error("stream not found"),rt.UNABLE_TO_SUBSCRIBE):String(it.code)==="409"&&it.message==="streamLimitExceeded"?tt(nt.STREAM_LIMIT_EXCEEDED,new Error("The limit for concurrent streams in the session has been reached"),rt.STREAM_LIMIT_EXCEEDED):String(it.code)==="405"&&it.message==="IncompatibleEncryptionSettings"?tt(nt.UNABLE_TO_SUBSCRIBE,new Error("Tried to subscribe to an encrypted stream without enabling encryption"),rt.UNABLE_TO_SUBSCRIBE):String(it.code)==="500"&&it.message==="Not connected."?tt(nt.UNABLE_TO_SUBSCRIBE,new Error("Tried to subscribe to a stream while disconnected."),rt.UNABLE_TO_SUBSCRIBE):tt(nt.UNABLE_TO_SUBSCRIBE,new Error(`subscriberCreate failed with unexpected code ${it.code}: ${it.message}`),rt.UNEXPECTED_SERVER_RESPONSE)},function(_e,et,b){const tt=b(26),nt=b(49),rt=b(104),it=b(23)();_e.exports=ot=>{let st=ot.subscriber,at=ot.audioLevelSampler,ct=0,ut=0;const lt=new rt(()=>{const dt=st.listenerCount(tt.AUDIO_LEVEL_UPDATED);if((()=>nt()-ut>1e4&&dt===0)()){lt.stop();return}ct=at.sample(),dt>0&&st.dispatchEvent(new it.AudioLevelUpdatedEvent(ct))});return Object.defineProperty(st,"loudness",{get(){return lt.start(),ut=nt(),ct},set(){throw new TypeError("Cannot set readonly property loudness")},configurable:!0}),st.listenerCount(tt.AUDIO_LEVEL_UPDATED)&&lt.start(),st.on("audioLevelUpdated:added",()=>{lt.start()}),st.once(tt.SUBSCRIBER_DESTROYED,()=>{lt.stop()}),{destroy(){at.destroy(),lt.stop()}}}},function(_e,et,b){const tt=b(252),nt=b(146),rt=b(688),it=b(306),ot=b(307),st=b(158)(),at=b(689),ct=b(1)("Subscriber");_e.exports=function(ut,lt){lt===void 0&&(lt={});const dt=lt.hasGetSynchronizationSupport;if(ut){if(rt({hasGetSynchronizationSupport:dt}))return new tt(ut.getSynchronizationSources);if(it())return new tt(ut.getStats);if(ot()){let ft;try{ft=lt.audioContext||st()}catch(St){ct.warn("Failed to get AudioContext()",St)}if(at(ft))return new nt(ft)}}}},function(_e,et,b){const nt=b(2),rt=()=>window.RTCRtpReceiver&&"getSynchronizationSources"in window.RTCRtpReceiver.prototype;_e.exports=function(it){it===void 0&&(it={});const ot=it.hasGetSynchronizationSupport||rt;return(typeof it.isEnabled=="boolean"?it.isEnabled:!1)&&ot()&&!nt.isFirefox}},function(_e,et,b){_e.exports=tt=>(typeof window!==void 0?window:commonjsGlobal).AudioContext&&tt instanceof(typeof window!==void 0?window:commonjsGlobal).AudioContext||(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext&&tt instanceof(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext},function(_e,et,b){const tt=b(36),nt=b(8);_e.exports=function(it){let ot=!1;const st=ct=>{const ut=["auto","on"].indexOf(this.getDisplayMode())>-1;nt.removeClass(ct,["OT_audio-blocked","OT_active"].join(" ")),ut&&(ot&&nt.addClass(ct,"OT_audio-blocked"),nt.addClass(ct,"OT_active"))};this.setAudioBlocked=ct=>{ot=ct,st(this.domElement)},tt(this,{mode:it.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-blocked-indicator"}});const at=this.setDisplayMode.bind(this);this.setDisplayMode=ct=>{at(ct),st(this.domElement)}}},function(_e,et,b){const tt=b(36),nt=b(8);_e.exports=function(it){let ot=!1;const st=ct=>{const ut=["auto","on"].indexOf(this.getDisplayMode())>-1;nt.removeClass(ct,["OT_active"].join(" ")),!(!ut||!ot)&&nt.addClass(ct,"OT_active")};this.setVideoUnsupported=ct=>{ot=ct,st(this.domElement)},tt(this,{mode:it.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-unsupported"},htmlContent:'<div class="OT_video-unsupported-bar"></div><div class="OT_video-unsupported-img"></div><span class="OT_video-unsupported-text">Video format not supported</span>'});const at=this.setDisplayMode.bind(this);this.setDisplayMode=ct=>{at(ct),st(this.domElement)}}},function(_e,et,b){const tt=b(47),nt=b(9),rt=b(60),it=b(75),ot=b(157),st=function(ct,ut){ut===void 0&&(ut=5e3);let lt,dt=!1;const ft={},St=function(gt){return gt===void 0&&(gt=[]),rt(gt,yt=>it.isVideoInboundRtpStat(yt))},Tt=()=>{dt||ct((pt,gt)=>{if(!dt){if(!pt){const yt=St(gt);yt?nt(ft,tt(yt,["timestamp","framesDecoded"])):ft.timestamp||nt(ft,{timestamp:Date.now(),framesDecoded:0})}lt=setTimeout(Tt,ut)}})};return Tt(),{getFrameRateFromStat(pt){return ot({currentStatFrames:pt.framesDecoded,currentTimestamp:pt.timestamp,prevStatFrames:ft.framesDecoded,prevTimestamp:ft.timestamp})},destroy(){dt=!0,lt&&(clearTimeout(lt),lt=null)}}};_e.exports=st},function(_e,et,b){_e.exports=tt=>{let nt=tt.connectivityState,rt=tt.onWarning,it=tt.onTimeout,ot=tt.warningMs,st=tt.timeoutMs;const at=[],ct=()=>{at.forEach(ut=>clearTimeout(ut))};nt.observe({onEnterConnecting(){at.push(setTimeout(rt,ot),setTimeout(it,st))},onEnterConnected:ct,onEnterDisconnected:ct})}},function(_e,et,b){const tt=b(310);_e.exports=nt=>{let rt=nt.onInvalidTransition;return new tt({init:"disconnected",transitions:[{name:"beginConnect",from:"disconnected",to:"connecting"},{name:"connect",from:"connecting",to:"connected"},{name:"fail",from:["connecting","connected"],to:"disconnected"},{name:"cancel",from:["connecting","connected"],to:"disconnected"},{name:"disconnect",from:["connecting","connected"],to:"disconnected"}],methods:{onInvalidTransition:rt}})}},function(_e,et,b){const tt=b(73);_e.exports=nt=>{let rt=nt.connectivityState,it=nt.logAttempt;const ot=new tt(it,1/5,6);rt.observe({onEnterConnecting(){ot.start()},onEnterDisconnected(){ot.stop()},onEnterConnected(){ot.stop()}})}},function(_e,et){function b(tt){if(tt==null)throw new TypeError("Cannot destructure undefined")}_e.exports=b},function(_e,et){function b(){return _e.exports=b=Object.assign||function(tt){for(var nt=1;nt<arguments.length;nt++){var rt=arguments[nt];for(var it in rt)Object.prototype.hasOwnProperty.call(rt,it)&&(tt[it]=rt[it])}return tt},b.apply(this,arguments)}_e.exports=b},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(4)),rt=tt(b(5)),it=tt(b(18)),ot=tt(b(699)),st=tt(b(108)),at=tt(b(313)),ct=b(74);const ut=st.default.ACTIVE_VIDEO,lt=st.default.ACTIVE_VIDEO_WITH_WARNING,dt=st.default.SUSPENDED_VIDEO;var St=Tt=>{let pt=Tt.getAllPeerConnections,gt=Tt.setEncodersActiveState,yt=gt===void 0?at.default:gt;const Et=new it.default,It=(0,ot.default)();It.on("stateChange",function(){for(var At=arguments.length,kt=new Array(At),Vt=0;Vt<At;Vt++)kt[Vt]=arguments[Vt];return Et.emit("stateChange",...kt)});const Gt=function(){var At=(0,rt.default)(nt.default.mark(function kt(){var Vt,Nt;return nt.default.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.next=2,pt();case 2:Vt=_t.sent,Nt=Vt.reduce((Kt,cn)=>Math.max(Kt,cn.getAudioFallbackState()),ut),It.setState(Nt);case 5:case"end":return _t.stop()}},kt)}));return function(){return At.apply(this,arguments)}}();return Object.assign(Et,{onPeerConnectionStateChange:At=>{let kt=At.state,Vt=At.peerConnection,Nt=At.publishVideo,tn=At.stream,_t=At.peerId;if(Nt){const Kt=Vt.getSourceStreamId()==="MANTIS"?void 0:_t;switch(kt){case ut:yt(Vt,!0),tn.setChannelActiveState("video",!0,"auto",ct.LOW,Kt);break;case lt:tn.setChannelActiveState("video",!0,"auto",ct.MEDIUM,Kt);break;case dt:yt(Vt,!1),tn.setChannelActiveState("video",!1,"auto",ct.CRITICAL,Kt);break}}Gt()},onPeerConnectionDisconnected:()=>{Gt()},reset:()=>It.reset()})};et.default=St},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(18)),rt=tt(b(108)),ot=()=>{const st=new nt.default;let at=rt.default.ACTIVE_VIDEO;return Object.assign(st,{setState(ct){if(!Object.values(rt.default).includes(ct))throw new Error("Invalid video state: ",ct);if(ct===at)return;const ut=at;at=ct,st.emit("stateChange",{state:at,previousState:ut})},reset(){at=rt.default.ACTIVE_VIDEO}})};et.default=ot},function(_e,et,b){var tt=b(701),nt=b(259),rt=tt(function(it,ot,st){return it+(st?" ":"")+nt(ot)});_e.exports=rt},function(_e,et,b){var tt=b(702),nt=b(703),rt=b(706),it="[']",ot=RegExp(it,"g");function st(at){return function(ct){return tt(rt(nt(ct).replace(ot,"")),at,"")}}_e.exports=st},function(_e,et){function b(tt,nt,rt,it){var ot=-1,st=tt==null?0:tt.length;for(it&&st&&(rt=tt[++ot]);++ot<st;)rt=nt(rt,tt[ot],ot,tt);return rt}_e.exports=b},function(_e,et,b){var tt=b(704),nt=b(59),rt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,it="\\u0300-\\u036f",ot="\\ufe20-\\ufe2f",st="\\u20d0-\\u20ff",at=it+ot+st,ct="["+at+"]",ut=RegExp(ct,"g");function lt(dt){return dt=nt(dt),dt&&dt.replace(rt,tt).replace(ut,"")}_e.exports=lt},function(_e,et,b){var tt=b(705),nt={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},rt=tt(nt);_e.exports=rt},function(_e,et){function b(tt){return function(nt){return tt==null?void 0:tt[nt]}}_e.exports=b},function(_e,et,b){var tt=b(707),nt=b(708),rt=b(59),it=b(709);function ot(st,at,ct){return st=rt(st),at=ct?void 0:at,at===void 0?nt(st)?it(st):tt(st):st.match(at)||[]}_e.exports=ot},function(_e,et){var b=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function tt(nt){return nt.match(b)||[]}_e.exports=tt},function(_e,et){var b=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function tt(nt){return b.test(nt)}_e.exports=tt},function(_e,et){var b="\\ud800-\\udfff",tt="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",rt="\\u20d0-\\u20ff",it=tt+nt+rt,ot="\\u2700-\\u27bf",st="a-z\\xdf-\\xf6\\xf8-\\xff",at="\\xac\\xb1\\xd7\\xf7",ct="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ut="\\u2000-\\u206f",lt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dt="A-Z\\xc0-\\xd6\\xd8-\\xde",ft="\\ufe0e\\ufe0f",St=at+ct+ut+lt,Tt="[']",pt="["+St+"]",gt="["+it+"]",yt="\\d+",Et="["+ot+"]",It="["+st+"]",Gt="[^"+b+St+yt+ot+st+dt+"]",Wt="\\ud83c[\\udffb-\\udfff]",At="(?:"+gt+"|"+Wt+")",kt="[^"+b+"]",Vt="(?:\\ud83c[\\udde6-\\uddff]){2}",Nt="[\\ud800-\\udbff][\\udc00-\\udfff]",tn="["+dt+"]",_t="\\u200d",Kt="(?:"+It+"|"+Gt+")",cn="(?:"+tn+"|"+Gt+")",an="(?:"+Tt+"(?:d|ll|m|re|s|t|ve))?",mn="(?:"+Tt+"(?:D|LL|M|RE|S|T|VE))?",on=At+"?",yn="["+ft+"]?",fn="(?:"+_t+"(?:"+[kt,Vt,Nt].join("|")+")"+yn+on+")*",sn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",un="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ln=yn+on+fn,Xn="(?:"+[Et,Vt,Nt].join("|")+")"+Ln,pn=RegExp([tn+"?"+It+"+"+an+"(?="+[pt,tn,"$"].join("|")+")",cn+"+"+mn+"(?="+[pt,tn+Kt,"$"].join("|")+")",tn+"?"+Kt+"+"+an,tn+"+"+mn,un,sn,yt,Xn].join("|"),"g");function Vn(Tn){return Tn.match(pn)||[]}_e.exports=Vn},function(_e,et,b){const tt=b(47),nt=b(268),rt=b(315);_e.exports=it=>{const ot=tt(it,["audioDeviceId","audioFallback","audioFallbackEnabled","audioSource","channels","classNames","constraints","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl","enableRenegotiation","enableStereo","facingMode","fitMode","frameRate","height","insertDefaultUI","insertMode","audioBitrate","maxResolution","minVideoBitrate","mirror","name","publishAudio","publishVideo","publishCaptions","resolution","scalableScreenshare","scalableVideo","showControls","style","videoContentHint","videoDeviceId","videoDimensions","videoFilter","videoSource","width"]);return ot.style&&(ot.style=nt(ot.style)),ot.videoFilter&&(ot.videoFilter=rt(ot.videoFilter)),ot}},function(_e,et,b){const tt=b(26),nt=b(49),rt=b(104),it=b(23)();_e.exports=ot=>{let st=ot.publisher,at=ot.widgetView,ct=0,ut=0;const lt=new rt(()=>{const dt=st.listenerCount(tt.AUDIO_LEVEL_UPDATED);if((()=>nt()-ut>1e4&&dt===0)()){lt.stop();return}const St=at&&at.video();if(St){const Tt=St.getAudioInputLevel();ct=Tt,dt>0&&st.dispatchEvent(new it.AudioLevelUpdatedEvent(Tt))}});Object.defineProperty(st,"loudness",{get(){return lt.start(),ut=nt(),ct},set(){throw new TypeError("Cannot set readonly property loudness")}}),st.listenerCount(tt.AUDIO_LEVEL_UPDATED)&&lt.start(),st.on("audioLevelUpdated:added",()=>{lt.start()}),st.once(tt.PUBLISHER_DESTROYED,()=>{lt.stop()})}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));_e.exports=function(ot){let st=!1;return function(){var at=(0,rt.default)(nt.default.mark(function ut(){var lt,dt,ft,St=arguments;return nt.default.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(!st){pt.next=2;break}throw new Error("The previous call to this function has not yet completed.");case 2:for(st=!0,pt.prev=3,lt=St.length,dt=new Array(lt),ft=0;ft<lt;ft++)dt[ft]=St[ft];return pt.next=7,ot.call(this,...dt);case 7:return pt.abrupt("return",pt.sent);case 8:return pt.prev=8,st=!1,pt.finish(8);case 11:case"end":return pt.stop()}},ut,this,[[3,,8,11]])}));function ct(){return at.apply(this,arguments)}return ct}()}},function(_e,et,b){const tt=b(13)(),nt=b(7);_e.exports=function(it){const ot=document.createElement("canvas");if(!ot.captureStream)throw tt(nt.NOT_SUPPORTED,new Error("Your browser does not support HTMLCanvasElement.captureStream()"));ot.width=it.width,ot.height=it.height,ot.getContext("2d").fillRect(0,0,1,1);const st=ot.captureStream().getVideoTracks(),at=st[0];return at.isCreatedCanvas=!0,at.enabled=!1,at}},function(_e,et,b){const tt=ot=>ot.getSettings&&ot.getSettings().deviceId,nt=ot=>{let st;return ot.getConstraints&&ot.getConstraints().deviceId&&(st=ot.getConstraints().deviceId.exact),st},rt=(ot,st)=>{let at;if(st&&st.length){const ct=st.find(ut=>ut.label===ot.label);ct&&(at=ct.deviceId)}return at},it=(ot,st)=>tt(ot)||nt(ot)||rt(ot,st);_e.exports=(ot,st)=>{if(!ot)return null;const at=ot.getVideoTracks(),ct=at[0];return ct?it(ct,st):null}},function(_e,et,b){const tt=b(7),nt=b(10),rt=b(13)();_e.exports=it=>{const ot=["403","404","409"],st=String(it.code);return st==="405"&&it.message==="IncompatibleEncryptionSettings"?rt(tt.STREAM_CREATE_FAILED,new Error("IncompatibleEncryptionSettings: Tried to publish a stream to an encrypted session without enabling encryption"),nt.UNABLE_TO_PUBLISH):ot.includes(st)?rt(tt.STREAM_CREATE_FAILED,new Error(`Failed to create stream in server model: ${it.message}`),nt.UNABLE_TO_PUBLISH):rt(tt.UNEXPECTED_SERVER_RESPONSE,new Error(`Unexpected server response: ${it.message}`),nt.UNEXPECTED_SERVER_RESPONSE)}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=b(2),ot=b(316),st=b(718),at=b(1)("MediaProcessor"),ct=b(101),ut=ct.getProxyUrl;function lt(dt){var ft=this;dt===void 0&&(dt={});const St=dt,Tt=St.ML,pt=Tt===void 0?ot:Tt,gt=St.MediaTransform,yt=gt===void 0?st:gt,Et=St.getProxyUrl,It=Et===void 0?ut:Et;let Gt,Wt,At,kt;this.isValidVideoFilter=Vt=>{const Nt=Vt.type;return yt.isSupported(Nt)&&yt.isValidConfig(Vt)},this.canUpdateVideoFilter=Vt=>["backgroundBlur","backgroundReplacement"].includes(Vt),this.updateVideoFilter=function(){var Vt=(0,rt.default)(nt.default.mark(function Nt(tn){var _t,Kt,cn;return nt.default.wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:if(_t=tn.type,ft.canUpdateVideoFilter(_t)){mn.next=4;break}return at.warn(`Ignoring: filter "${_t}" doesn't support real-time updates`),mn.abrupt("return");case 4:return Kt=yt.getConfigurator(_t),cn=Kt.getConfig(Object.assign({proxyUrl:It()},tn)),mn.next=8,Wt.setBackgroundOptions(cn);case 8:At=tn;case 9:case"end":return mn.stop()}},Nt)}));return function(Nt){return Vt.apply(this,arguments)}}(),this.setVideoFilter=function(){var Vt=(0,rt.default)(nt.default.mark(function Nt(tn){var _t,Kt,cn,an;return nt.default.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:if(_t=tn.type,Kt=yt.getConfigurator(_t),Kt){on.next=5;break}return at.warn(`Ignoring: filter "${_t}" isn't supported`),on.abrupt("return");case 5:if(cn=Kt.getConfig(Object.assign({proxyUrl:It()},tn)),cn){on.next=9;break}return at.warn(`Ignoring: couldn't configure filter ${_t}`),on.abrupt("return");case 9:if(an=!!ft.getVideoFilter(),!an){on.next=20;break}return on.prev=11,on.next=14,ft.destroy();case 14:on.next=20;break;case 16:return on.prev=16,on.t0=on.catch(11),at.warn(`Ignoring, couldn't remove previous filter: ${on.t0}`),on.abrupt("return");case 20:return on.next=22,pt.createProcessor(cn);case 22:return Wt=on.sent,on.next=25,Wt.getConnector();case 25:Gt=on.sent,At=tn;case 27:case"end":return on.stop()}},Nt,null,[[11,16]])}));return function(Nt){return Vt.apply(this,arguments)}}(),this.getVideoFilter=()=>At,this.getOriginalVideoTrack=()=>kt,this.setMediaStream=function(){var Vt=(0,rt.default)(nt.default.mark(function Nt(tn){var _t,Kt,cn;return nt.default.wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:if(_t=tn.getVideoTracks(),Kt=_t[0],Kt){mn.next=4;break}return at.warn("Ignoring. No video track found"),mn.abrupt("return",null);case 4:return cn=null,mn.prev=5,mn.next=8,Gt.setTrack(Kt);case 8:cn=mn.sent,kt=Kt,mn.next=15;break;case 12:mn.prev=12,mn.t0=mn.catch(5),at.error(`Error setting media stream: ${mn.t0}`);case 15:return mn.abrupt("return",cn);case 16:case"end":return mn.stop()}},Nt,null,[[5,12]])}));return function(Nt){return Vt.apply(this,arguments)}}(),this.setVideoTrack=function(){var Vt=(0,rt.default)(nt.default.mark(function Nt(tn){var _t;return nt.default.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return _t=null,cn.prev=1,cn.next=4,Gt.setTrack(tn);case 4:_t=cn.sent,kt=tn,cn.next=11;break;case 8:cn.prev=8,cn.t0=cn.catch(1),at.error(`Error setting video track: ${cn.t0}`);case 11:return cn.abrupt("return",_t);case 12:case"end":return cn.stop()}},Nt,null,[[1,8]])}));return function(Nt){return Vt.apply(this,arguments)}}(),this._setConnector=Vt=>{Gt=Vt},this.destroy=(0,rt.default)(nt.default.mark(function Vt(){return nt.default.wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tn.prev=0,tn.next=3,Gt.destroy();case 3:tn.next=8;break;case 5:tn.prev=5,tn.t0=tn.catch(0),at.warn(`Error destroying connector: ${tn.t0}`);case 8:Gt=null,At=null,kt=null;case 11:case"end":return tn.stop()}},Vt,null,[[0,5]])})),this.enableLogging=Vt=>{if(!Vt){at.warn("Error enabling logging: invalid API key");return}const Nt={appId:Vt,sourceType:"video"},tn=It();tn&&(Nt.proxyUrl=tn),pt.setMetadata(Nt)},this.disableLogging=()=>{pt.setMetadata()}}lt.isSupported=function(dt){dt===void 0&&(dt={});const ft=dt,St=ft.env,Tt=St===void 0?it:St,pt=ft.ML,gt=pt===void 0?ot:pt;return!!Tt.isChromium&&gt.isSupported()},_e.exports=lt},function(_e,et,b){b.r(et),function(tt,nt){b.d(et,"ErrorFunction",function(){return Yp}),b.d(et,"MediaProcessor",function(){return dm}),b.d(et,"MediaProcessorConnector",function(){return Hu}),b.d(et,"PipelineInfoData",function(){return tm}),b.d(et,"VonageSourceType",function(){return Rr}),b.d(et,"WarningType",function(){return Lp}),b.d(et,"getVonageMetadata",function(){return wo}),b.d(et,"isSupported",function(){return rt}),b.d(et,"setVonageMetadata",function(){return Zr});function rt(){return new tt((Gn,Qt)=>{typeof MediaStreamTrackProcessor>"u"||typeof MediaStreamTrackGenerator>"u"?Qt("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):Gn()})}class it{}it.updates={transformer_new:"New transformer",transformer_null:"Null transformer"},it.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"};var ot={exports:{}},st=function(Qt,Zn){return function(){for(var nr=new Array(arguments.length),_r=0;_r<nr.length;_r++)nr[_r]=arguments[_r];return Qt.apply(Zn,nr)}},at=st,ct=Object.prototype.toString;function ut(Gn){return Array.isArray(Gn)}function lt(Gn){return typeof Gn>"u"}function dt(Gn){return Gn!==null&&!lt(Gn)&&Gn.constructor!==null&&!lt(Gn.constructor)&&typeof Gn.constructor.isBuffer=="function"&&Gn.constructor.isBuffer(Gn)}function ft(Gn){return ct.call(Gn)==="[object ArrayBuffer]"}function St(Gn){return ct.call(Gn)==="[object FormData]"}function Tt(Gn){var Qt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Qt=ArrayBuffer.isView(Gn):Qt=Gn&&Gn.buffer&&ft(Gn.buffer),Qt}function pt(Gn){return typeof Gn=="string"}function gt(Gn){return typeof Gn=="number"}function yt(Gn){return Gn!==null&&typeof Gn=="object"}function Et(Gn){if(ct.call(Gn)!=="[object Object]")return!1;var Qt=Object.getPrototypeOf(Gn);return Qt===null||Qt===Object.prototype}function It(Gn){return ct.call(Gn)==="[object Date]"}function Gt(Gn){return ct.call(Gn)==="[object File]"}function Wt(Gn){return ct.call(Gn)==="[object Blob]"}function At(Gn){return ct.call(Gn)==="[object Function]"}function kt(Gn){return yt(Gn)&&At(Gn.pipe)}function Vt(Gn){return ct.call(Gn)==="[object URLSearchParams]"}function Nt(Gn){return Gn.trim?Gn.trim():Gn.replace(/^\s+|\s+$/g,"")}function tn(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function _t(Gn,Qt){if(!(Gn===null||typeof Gn>"u"))if(typeof Gn!="object"&&(Gn=[Gn]),ut(Gn))for(var Zn=0,er=Gn.length;Zn<er;Zn++)Qt.call(null,Gn[Zn],Zn,Gn);else for(var nr in Gn)Object.prototype.hasOwnProperty.call(Gn,nr)&&Qt.call(null,Gn[nr],nr,Gn)}function Kt(){var Gn={};function Qt(nr,_r){Et(Gn[_r])&&Et(nr)?Gn[_r]=Kt(Gn[_r],nr):Et(nr)?Gn[_r]=Kt({},nr):ut(nr)?Gn[_r]=nr.slice():Gn[_r]=nr}for(var Zn=0,er=arguments.length;Zn<er;Zn++)_t(arguments[Zn],Qt);return Gn}function cn(Gn,Qt,Zn){return _t(Qt,function(nr,_r){Zn&&typeof nr=="function"?Gn[_r]=at(nr,Zn):Gn[_r]=nr}),Gn}function an(Gn){return Gn.charCodeAt(0)===65279&&(Gn=Gn.slice(1)),Gn}var mn={isArray:ut,isArrayBuffer:ft,isBuffer:dt,isFormData:St,isArrayBufferView:Tt,isString:pt,isNumber:gt,isObject:yt,isPlainObject:Et,isUndefined:lt,isDate:It,isFile:Gt,isBlob:Wt,isFunction:At,isStream:kt,isURLSearchParams:Vt,isStandardBrowserEnv:tn,forEach:_t,merge:Kt,extend:cn,trim:Nt,stripBOM:an},on=mn;function yn(Gn){return encodeURIComponent(Gn).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var fn=function(Qt,Zn,er){if(!Zn)return Qt;var nr;if(er)nr=er(Zn);else if(on.isURLSearchParams(Zn))nr=Zn.toString();else{var _r=[];on.forEach(Zn,function(oo,du){oo===null||typeof oo>"u"||(on.isArray(oo)?du=du+"[]":oo=[oo],on.forEach(oo,function(Vl){on.isDate(Vl)?Vl=Vl.toISOString():on.isObject(Vl)&&(Vl=JSON.stringify(Vl)),_r.push(yn(du)+"="+yn(Vl))}))}),nr=_r.join("&")}if(nr){var _i=Qt.indexOf("#");_i!==-1&&(Qt=Qt.slice(0,_i)),Qt+=(Qt.indexOf("?")===-1?"?":"&")+nr}return Qt},sn=mn;function un(){this.handlers=[]}un.prototype.use=function(Qt,Zn,er){return this.handlers.push({fulfilled:Qt,rejected:Zn,synchronous:er?er.synchronous:!1,runWhen:er?er.runWhen:null}),this.handlers.length-1},un.prototype.eject=function(Qt){this.handlers[Qt]&&(this.handlers[Qt]=null)},un.prototype.forEach=function(Qt){sn.forEach(this.handlers,function(er){er!==null&&Qt(er)})};var Ln=un,Xn=mn,pn=function(Qt,Zn){Xn.forEach(Qt,function(nr,_r){_r!==Zn&&_r.toUpperCase()===Zn.toUpperCase()&&(Qt[Zn]=nr,delete Qt[_r])})},Vn=function(Qt,Zn,er,nr,_r){return Qt.config=Zn,er&&(Qt.code=er),Qt.request=nr,Qt.response=_r,Qt.isAxiosError=!0,Qt.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},Qt},Tn=Vn,Jn=function(Qt,Zn,er,nr,_r){var _i=new Error(Qt);return Tn(_i,Zn,er,nr,_r)},lr=Jn,tr=function(Qt,Zn,er){var nr=er.config.validateStatus;!er.status||!nr||nr(er.status)?Qt(er):Zn(lr("Request failed with status code "+er.status,er.config,null,er.request,er))},Qn=mn,Sr=Qn.isStandardBrowserEnv()?function(){return{write:function(Zn,er,nr,_r,_i,co){var oo=[];oo.push(Zn+"="+encodeURIComponent(er)),Qn.isNumber(nr)&&oo.push("expires="+new Date(nr).toGMTString()),Qn.isString(_r)&&oo.push("path="+_r),Qn.isString(_i)&&oo.push("domain="+_i),co===!0&&oo.push("secure"),document.cookie=oo.join("; ")},read:function(Zn){var er=document.cookie.match(new RegExp("(^|;\\s*)("+Zn+")=([^;]*)"));return er?decodeURIComponent(er[3]):null},remove:function(Zn){this.write(Zn,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),vr=function(Qt){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Qt)},Fr=function(Qt,Zn){return Zn?Qt.replace(/\/+$/,"")+"/"+Zn.replace(/^\/+/,""):Qt},kr=vr,jr=Fr,xo=function(Qt,Zn){return Qt&&!kr(Zn)?jr(Qt,Zn):Zn},Er=mn,xr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Un=function(Qt){var Zn={},er,nr,_r;return Qt&&Er.forEach(Qt.split(`
`),function(co){if(_r=co.indexOf(":"),er=Er.trim(co.substr(0,_r)).toLowerCase(),nr=Er.trim(co.substr(_r+1)),er){if(Zn[er]&&xr.indexOf(er)>=0)return;er==="set-cookie"?Zn[er]=(Zn[er]?Zn[er]:[]).concat([nr]):Zn[er]=Zn[er]?Zn[er]+", "+nr:nr}}),Zn},Mn=mn,sr=Mn.isStandardBrowserEnv()?function(){var Qt=/(msie|trident)/i.test(navigator.userAgent),Zn=document.createElement("a"),er;function nr(_r){var _i=_r;return Qt&&(Zn.setAttribute("href",_i),_i=Zn.href),Zn.setAttribute("href",_i),{href:Zn.href,protocol:Zn.protocol?Zn.protocol.replace(/:$/,""):"",host:Zn.host,search:Zn.search?Zn.search.replace(/^\?/,""):"",hash:Zn.hash?Zn.hash.replace(/^#/,""):"",hostname:Zn.hostname,port:Zn.port,pathname:Zn.pathname.charAt(0)==="/"?Zn.pathname:"/"+Zn.pathname}}return er=nr(window.location.href),function(_i){var co=Mn.isString(_i)?nr(_i):_i;return co.protocol===er.protocol&&co.host===er.host}}():function(){return function(){return!0}}();function Ar(Gn){this.message=Gn}Ar.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Ar.prototype.__CANCEL__=!0;var so=Ar,Bn=mn,gr=tr,Or=Sr,ro=fn,Ao=xo,ho=Un,vo=sr,po=Jn,zr=Rs,Go=so,mo=function(Qt){return new tt(function(er,nr){var _r=Qt.data,_i=Qt.headers,co=Qt.responseType,oo;function du(){Qt.cancelToken&&Qt.cancelToken.unsubscribe(oo),Qt.signal&&Qt.signal.removeEventListener("abort",oo)}Bn.isFormData(_r)&&delete _i["Content-Type"];var Lo=new XMLHttpRequest;if(Qt.auth){var Vl=Qt.auth.username||"",Wp=Qt.auth.password?unescape(encodeURIComponent(Qt.auth.password)):"";_i.Authorization="Basic "+btoa(Vl+":"+Wp)}var bu=Ao(Qt.baseURL,Qt.url);Lo.open(Qt.method.toUpperCase(),ro(bu,Qt.params,Qt.paramsSerializer),!0),Lo.timeout=Qt.timeout;function Mp(){if(Lo){var Ou="getAllResponseHeaders"in Lo?ho(Lo.getAllResponseHeaders()):null,op=!co||co==="text"||co==="json"?Lo.responseText:Lo.response,Cp={data:op,status:Lo.status,statusText:Lo.statusText,headers:Ou,config:Qt,request:Lo};gr(function(Bp){er(Bp),du()},function(Bp){nr(Bp),du()},Cp),Lo=null}}if("onloadend"in Lo?Lo.onloadend=Mp:Lo.onreadystatechange=function(){!Lo||Lo.readyState!==4||Lo.status===0&&!(Lo.responseURL&&Lo.responseURL.indexOf("file:")===0)||setTimeout(Mp)},Lo.onabort=function(){Lo&&(nr(po("Request aborted",Qt,"ECONNABORTED",Lo)),Lo=null)},Lo.onerror=function(){nr(po("Network Error",Qt,null,Lo)),Lo=null},Lo.ontimeout=function(){var op=Qt.timeout?"timeout of "+Qt.timeout+"ms exceeded":"timeout exceeded",Cp=Qt.transitional||zr.transitional;Qt.timeoutErrorMessage&&(op=Qt.timeoutErrorMessage),nr(po(op,Qt,Cp.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Lo)),Lo=null},Bn.isStandardBrowserEnv()){var wu=(Qt.withCredentials||vo(bu))&&Qt.xsrfCookieName?Or.read(Qt.xsrfCookieName):void 0;wu&&(_i[Qt.xsrfHeaderName]=wu)}"setRequestHeader"in Lo&&Bn.forEach(_i,function(op,Cp){typeof _r>"u"&&Cp.toLowerCase()==="content-type"?delete _i[Cp]:Lo.setRequestHeader(Cp,op)}),Bn.isUndefined(Qt.withCredentials)||(Lo.withCredentials=!!Qt.withCredentials),co&&co!=="json"&&(Lo.responseType=Qt.responseType),typeof Qt.onDownloadProgress=="function"&&Lo.addEventListener("progress",Qt.onDownloadProgress),typeof Qt.onUploadProgress=="function"&&Lo.upload&&Lo.upload.addEventListener("progress",Qt.onUploadProgress),(Qt.cancelToken||Qt.signal)&&(oo=function(Ou){Lo&&(nr(!Ou||Ou&&Ou.type?new Go("canceled"):Ou),Lo.abort(),Lo=null)},Qt.cancelToken&&Qt.cancelToken.subscribe(oo),Qt.signal&&(Qt.signal.aborted?oo():Qt.signal.addEventListener("abort",oo))),_r||(_r=null),Lo.send(_r)})},Zo=mn,$r=pn,Ru=Vn,jo={"Content-Type":"application/x-www-form-urlencoded"};function yo(Gn,Qt){!Zo.isUndefined(Gn)&&Zo.isUndefined(Gn["Content-Type"])&&(Gn["Content-Type"]=Qt)}function _o(){var Gn;return(typeof XMLHttpRequest<"u"||typeof nt<"u"&&Object.prototype.toString.call(nt)==="[object process]")&&(Gn=mo),Gn}function js(Gn,Qt,Zn){if(Zo.isString(Gn))try{return(Qt||JSON.parse)(Gn),Zo.trim(Gn)}catch(er){if(er.name!=="SyntaxError")throw er}return(Zn||JSON.stringify)(Gn)}var Ql={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:_o(),transformRequest:[function(Qt,Zn){return $r(Zn,"Accept"),$r(Zn,"Content-Type"),Zo.isFormData(Qt)||Zo.isArrayBuffer(Qt)||Zo.isBuffer(Qt)||Zo.isStream(Qt)||Zo.isFile(Qt)||Zo.isBlob(Qt)?Qt:Zo.isArrayBufferView(Qt)?Qt.buffer:Zo.isURLSearchParams(Qt)?(yo(Zn,"application/x-www-form-urlencoded;charset=utf-8"),Qt.toString()):Zo.isObject(Qt)||Zn&&Zn["Content-Type"]==="application/json"?(yo(Zn,"application/json"),js(Qt)):Qt}],transformResponse:[function(Qt){var Zn=this.transitional||Ql.transitional,er=Zn&&Zn.silentJSONParsing,nr=Zn&&Zn.forcedJSONParsing,_r=!er&&this.responseType==="json";if(_r||nr&&Zo.isString(Qt)&&Qt.length)try{return JSON.parse(Qt)}catch(_i){if(_r)throw _i.name==="SyntaxError"?Ru(_i,this,"E_JSON_PARSE"):_i}return Qt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(Qt){return Qt>=200&&Qt<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Zo.forEach(["delete","get","head"],function(Qt){Ql.headers[Qt]={}}),Zo.forEach(["post","put","patch"],function(Qt){Ql.headers[Qt]=Zo.merge(jo)});var Rs=Ql,xa=mn,Iu=Rs,Gu=function(Qt,Zn,er){var nr=this||Iu;return xa.forEach(er,function(_i){Qt=_i.call(nr,Qt,Zn)}),Qt},jp=function(Qt){return!!(Qt&&Qt.__CANCEL__)},$u=mn,Qu=Gu,Jr=jp,Qs=Rs,au=so;function Ws(Gn){if(Gn.cancelToken&&Gn.cancelToken.throwIfRequested(),Gn.signal&&Gn.signal.aborted)throw new au("canceled")}var yl=function(Qt){Ws(Qt),Qt.headers=Qt.headers||{},Qt.data=Qu.call(Qt,Qt.data,Qt.headers,Qt.transformRequest),Qt.headers=$u.merge(Qt.headers.common||{},Qt.headers[Qt.method]||{},Qt.headers),$u.forEach(["delete","get","head","post","put","patch","common"],function(nr){delete Qt.headers[nr]});var Zn=Qt.adapter||Qs.adapter;return Zn(Qt).then(function(nr){return Ws(Qt),nr.data=Qu.call(Qt,nr.data,nr.headers,Qt.transformResponse),nr},function(nr){return Jr(nr)||(Ws(Qt),nr&&nr.response&&(nr.response.data=Qu.call(Qt,nr.response.data,nr.response.headers,Qt.transformResponse))),tt.reject(nr)})},Xr=mn,Js=function(Qt,Zn){Zn=Zn||{};var er={};function nr(Lo,Vl){return Xr.isPlainObject(Lo)&&Xr.isPlainObject(Vl)?Xr.merge(Lo,Vl):Xr.isPlainObject(Vl)?Xr.merge({},Vl):Xr.isArray(Vl)?Vl.slice():Vl}function _r(Lo){if(Xr.isUndefined(Zn[Lo])){if(!Xr.isUndefined(Qt[Lo]))return nr(void 0,Qt[Lo])}else return nr(Qt[Lo],Zn[Lo])}function _i(Lo){if(!Xr.isUndefined(Zn[Lo]))return nr(void 0,Zn[Lo])}function co(Lo){if(Xr.isUndefined(Zn[Lo])){if(!Xr.isUndefined(Qt[Lo]))return nr(void 0,Qt[Lo])}else return nr(void 0,Zn[Lo])}function oo(Lo){if(Lo in Zn)return nr(Qt[Lo],Zn[Lo]);if(Lo in Qt)return nr(void 0,Qt[Lo])}var du={url:_i,method:_i,data:_i,baseURL:co,transformRequest:co,transformResponse:co,paramsSerializer:co,timeout:co,timeoutMessage:co,withCredentials:co,adapter:co,responseType:co,xsrfCookieName:co,xsrfHeaderName:co,onUploadProgress:co,onDownloadProgress:co,decompress:co,maxContentLength:co,maxBodyLength:co,transport:co,httpAgent:co,httpsAgent:co,cancelToken:co,socketPath:co,responseEncoding:co,validateStatus:oo};return Xr.forEach(Object.keys(Qt).concat(Object.keys(Zn)),function(Vl){var Wp=du[Vl]||_r,bu=Wp(Vl);Xr.isUndefined(bu)&&Wp!==oo||(er[Vl]=bu)}),er},Up={version:"0.25.0"},cu=Up.version,lu={};["object","boolean","number","function","string","symbol"].forEach(function(Gn,Qt){lu[Gn]=function(er){return typeof er===Gn||"a"+(Qt<1?"n ":" ")+Gn}});var qo={};lu.transitional=function(Qt,Zn,er){function nr(_r,_i){return"[Axios v"+cu+"] Transitional option '"+_r+"'"+_i+(er?". "+er:"")}return function(_r,_i,co){if(Qt===!1)throw new Error(nr(_i," has been removed"+(Zn?" in "+Zn:"")));return Zn&&!qo[_i]&&(qo[_i]=!0,console.warn(nr(_i," has been deprecated since v"+Zn+" and will be removed in the near future"))),Qt?Qt(_r,_i,co):!0}};function Gl(Gn,Qt,Zn){if(typeof Gn!="object")throw new TypeError("options must be an object");for(var er=Object.keys(Gn),nr=er.length;nr-- >0;){var _r=er[nr],_i=Qt[_r];if(_i){var co=Gn[_r],oo=co===void 0||_i(co,_r,Gn);if(oo!==!0)throw new TypeError("option "+_r+" must be "+oo);continue}if(Zn!==!0)throw Error("Unknown option "+_r)}}var es={assertOptions:Gl,validators:lu},ju=mn,lp=fn,$a=Ln,ep=yl,_u=Js,na=es,Yo=na.validators;function _l(Gn){this.defaults=Gn,this.interceptors={request:new $a,response:new $a}}_l.prototype.request=function(Qt,Zn){if(typeof Qt=="string"?(Zn=Zn||{},Zn.url=Qt):Zn=Qt||{},!Zn.url)throw new Error("Provided config url is not valid");Zn=_u(this.defaults,Zn),Zn.method?Zn.method=Zn.method.toLowerCase():this.defaults.method?Zn.method=this.defaults.method.toLowerCase():Zn.method="get";var er=Zn.transitional;er!==void 0&&na.assertOptions(er,{silentJSONParsing:Yo.transitional(Yo.boolean),forcedJSONParsing:Yo.transitional(Yo.boolean),clarifyTimeoutError:Yo.transitional(Yo.boolean)},!1);var nr=[],_r=!0;this.interceptors.request.forEach(function(bu){typeof bu.runWhen=="function"&&bu.runWhen(Zn)===!1||(_r=_r&&bu.synchronous,nr.unshift(bu.fulfilled,bu.rejected))});var _i=[];this.interceptors.response.forEach(function(bu){_i.push(bu.fulfilled,bu.rejected)});var co;if(!_r){var oo=[ep,void 0];for(Array.prototype.unshift.apply(oo,nr),oo=oo.concat(_i),co=tt.resolve(Zn);oo.length;)co=co.then(oo.shift(),oo.shift());return co}for(var du=Zn;nr.length;){var Lo=nr.shift(),Vl=nr.shift();try{du=Lo(du)}catch(Wp){Vl(Wp);break}}try{co=ep(du)}catch(Wp){return tt.reject(Wp)}for(;_i.length;)co=co.then(_i.shift(),_i.shift());return co},_l.prototype.getUri=function(Qt){if(!Qt.url)throw new Error("Provided config url is not valid");return Qt=_u(this.defaults,Qt),lp(Qt.url,Qt.params,Qt.paramsSerializer).replace(/^\?/,"")},ju.forEach(["delete","get","head","options"],function(Qt){_l.prototype[Qt]=function(Zn,er){return this.request(_u(er||{},{method:Qt,url:Zn,data:(er||{}).data}))}}),ju.forEach(["post","put","patch"],function(Qt){_l.prototype[Qt]=function(Zn,er,nr){return this.request(_u(nr||{},{method:Qt,url:Zn,data:er}))}});var uo=_l,tp=so;function xu(Gn){if(typeof Gn!="function")throw new TypeError("executor must be a function.");var Qt;this.promise=new tt(function(nr){Qt=nr});var Zn=this;this.promise.then(function(er){if(Zn._listeners){var nr,_r=Zn._listeners.length;for(nr=0;nr<_r;nr++)Zn._listeners[nr](er);Zn._listeners=null}}),this.promise.then=function(er){var nr,_r=new tt(function(_i){Zn.subscribe(_i),nr=_i}).then(er);return _r.cancel=function(){Zn.unsubscribe(nr)},_r},Gn(function(nr){Zn.reason||(Zn.reason=new tp(nr),Qt(Zn.reason))})}xu.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},xu.prototype.subscribe=function(Qt){if(this.reason){Qt(this.reason);return}this._listeners?this._listeners.push(Qt):this._listeners=[Qt]},xu.prototype.unsubscribe=function(Qt){if(this._listeners){var Zn=this._listeners.indexOf(Qt);Zn!==-1&&this._listeners.splice(Zn,1)}},xu.source=function(){var Qt,Zn=new xu(function(nr){Qt=nr});return{token:Zn,cancel:Qt}};var xp=xu,vs=function(Qt){return function(er){return Qt.apply(null,er)}},wp=mn,Jp=function(Qt){return wp.isObject(Qt)&&Qt.isAxiosError===!0},Op=mn,vp=st,Hp=uo,np=Js,uu=Rs;function Wu(Gn){var Qt=new Hp(Gn),Zn=vp(Hp.prototype.request,Qt);return Op.extend(Zn,Hp.prototype,Qt),Op.extend(Zn,Qt),Zn.create=function(nr){return Wu(np(Gn,nr))},Zn}var Xl=Wu(uu);Xl.Axios=Hp,Xl.Cancel=so,Xl.CancelToken=xp,Xl.isCancel=jp,Xl.VERSION=Up.version,Xl.all=function(Qt){return tt.all(Qt)},Xl.spread=vs,Xl.isAxiosError=Jp,ot.exports=Xl,ot.exports.default=Xl;var Np=ot.exports;class zn{isEmpty(){return!this.isPresent()}static of(Qt){if(Qt!=null)return new xn(Qt);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(Qt){return zn.of(Qt)}static ofNullable(Qt){return Qt!=null?new xn(Qt):new Nn}static empty(){return new Nn}static from(Qt){switch(Qt.kind){case"present":return zn.of(Qt.value);case"empty":return zn.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class xn extends zn{constructor(Qt){super(),this.payload=Qt}isPresent(){return!0}get(){return this.payload}ifPresent(Qt){Qt(this.payload)}ifPresentOrElse(Qt,Zn){Qt(this.payload)}filter(Qt){return Qt(this.payload)?this:zn.empty()}map(Qt){const Zn=Qt(this.payload);return zn.ofNullable(Zn)}flatMap(Qt){return Qt(this.payload)}or(Qt){return this}orElse(Qt){return this.payload}orElseGet(Qt){return this.payload}orElseThrow(Qt){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(Qt){return Qt.present(this.payload)}toJSON(Qt){return this.payload}}class Nn extends zn{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(Qt){}ifPresentOrElse(Qt,Zn){Zn()}filter(Qt){return this}map(Qt){return zn.empty()}flatMap(Qt){return zn.empty()}or(Qt){return Qt()}orElse(Qt){return Qt}orElseGet(Qt){return this.orElse(Qt())}orElseThrow(Qt){throw Qt()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(Qt){return Qt.empty()}toJSON(Qt){return null}}const qn="2.0.0";var Rr=(Gn=>(Gn.automation="automation",Gn.test="test",Gn.vbc="vbc",Gn.video="video",Gn.voice="voice",Gn))(Rr||{});function Zr(Gn){globalThis._vonageMediaProcessorMetadata=Gn}function wo(){return globalThis._vonageMediaProcessorMetadata}class Wo{constructor(){const Qt=wo();this._report={action:zn.empty(),applicationId:zn.ofNullable(Qt!==void 0&&Qt!=null?Qt.appId:null),timestamp:Date.now(),fps:zn.empty(),framesTransformed:zn.empty(),guid:zn.empty(),highestFrameTransformCpu:zn.empty(),message:zn.empty(),source:zn.ofNullable(Qt!==void 0&&Qt!=null?Qt.sourceType:null),transformedFps:zn.empty(),transformerType:zn.empty(),variation:zn.empty(),videoHeight:zn.empty(),videoWidth:zn.empty(),version:qn,error:zn.empty(),proxyUrl:zn.ofNullable(Qt!==void 0&&Qt!=null?Qt.proxyUrl:null)}}action(Qt){return this._report.action=zn.ofNullable(Qt),this}framesTransformed(Qt){return this._report.framesTransformed=zn.ofNullable(Qt),this}fps(Qt){return this._report.fps=zn.ofNullable(Qt),this}guid(Qt){return this._report.guid=zn.ofNullable(Qt),this}message(Qt){return this._report.message=zn.ofNullable(Qt),this}transformedFps(Qt){return this._report.transformedFps=zn.ofNullable(Qt),this}transformerType(Qt){return this._report.transformerType=zn.ofNullable(Qt),this}variation(Qt){return this._report.variation=zn.ofNullable(Qt),this}videoHeight(Qt){return this._report.videoHeight=zn.ofNullable(Qt),this}videoWidth(Qt){return this._report.videoWidth=zn.ofNullable(Qt),this}error(Qt){return this._report.error=zn.ofNullable(Qt),this}build(){return this._report}}const ws=Gn=>JSON.stringify(Gn,(Qt,Zn)=>{if(Zn!==null)return Zn});class ns{static report(Qt){return new tt((Zn,er)=>{if(Qt.applicationId.isEmpty()||Qt.source.isEmpty()){Zn("success");return}let nr=Np.create(),_r={timeout:1e4,timeoutErrorMessage:"Request timeout",headers:{"Content-Type":"application/json"}},_i="hlg.tokbox.com/prod/logging/vcp_webrtc";if(Qt.proxyUrl.isEmpty())_i="https://"+_i;else{let co;Qt.proxyUrl.get().slice(Qt.proxyUrl.get().length-1)!=="/"?co=Qt.proxyUrl.get()+"/":co=Qt.proxyUrl.get(),_i=co+_i}nr.post(_i,ws(Qt),_r).then(co=>{console.log(co),Zn("success")}).catch(co=>{console.log(co),er(co)})})}}var ds,Zs=new Uint8Array(16);function $s(){if(!ds&&(ds=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ds))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ds(Zs)}var Ap=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ms(Gn){return typeof Gn=="string"&&Ap.test(Gn)}for(var Wl=[],Us=0;Us<256;++Us)Wl.push((Us+256).toString(16).substr(1));function eu(Gn){var Qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Zn=(Wl[Gn[Qt+0]]+Wl[Gn[Qt+1]]+Wl[Gn[Qt+2]]+Wl[Gn[Qt+3]]+"-"+Wl[Gn[Qt+4]]+Wl[Gn[Qt+5]]+"-"+Wl[Gn[Qt+6]]+Wl[Gn[Qt+7]]+"-"+Wl[Gn[Qt+8]]+Wl[Gn[Qt+9]]+"-"+Wl[Gn[Qt+10]]+Wl[Gn[Qt+11]]+Wl[Gn[Qt+12]]+Wl[Gn[Qt+13]]+Wl[Gn[Qt+14]]+Wl[Gn[Qt+15]]).toLowerCase();if(!Ms(Zn))throw TypeError("Stringified UUID is invalid");return Zn}function Sp(Gn,Qt,Zn){Gn=Gn||{};var er=Gn.random||(Gn.rng||$s)();if(er[6]=er[6]&15|64,er[8]=er[8]&63|128,Qt){Zn=Zn||0;for(var nr=0;nr<16;++nr)Qt[Zn+nr]=er[nr];return Qt}return eu(er)}const rp=new WeakMap,qp=new WeakMap,_s=new WeakMap,Uu=Symbol("anyProducer"),ip=tt.resolve(),Zp=Symbol("listenerAdded"),yu=Symbol("listenerRemoved");let up=!1;function Ml(Gn){if(typeof Gn!="string"&&typeof Gn!="symbol")throw new TypeError("eventName must be a string or a symbol")}function ao(Gn){if(typeof Gn!="function")throw new TypeError("listener must be a function")}function Qo(Gn,Qt){const Zn=qp.get(Gn);return Zn.has(Qt)||Zn.set(Qt,new Set),Zn.get(Qt)}function dp(Gn,Qt){const Zn=typeof Qt=="string"||typeof Qt=="symbol"?Qt:Uu,er=_s.get(Gn);return er.has(Zn)||er.set(Zn,new Set),er.get(Zn)}function qr(Gn,Qt,Zn){const er=_s.get(Gn);if(er.has(Qt))for(const nr of er.get(Qt))nr.enqueue(Zn);if(er.has(Uu)){const nr=tt.all([Qt,Zn]);for(const _r of er.get(Uu))_r.enqueue(nr)}}function $p(Gn,Qt){Qt=Array.isArray(Qt)?Qt:[Qt];let Zn=!1,er=()=>{},nr=[];const _r={enqueue(_i){nr.push(_i),er()},finish(){Zn=!0,er()}};for(const _i of Qt)dp(Gn,_i).add(_r);return{async next(){return nr?nr.length===0?Zn?(nr=void 0,this.next()):(await new tt(_i=>{er=_i}),this.next()):{done:!1,value:await nr.shift()}:{done:!0}},async return(_i){nr=void 0;for(const co of Qt)dp(Gn,co).delete(_r);return er(),arguments.length>0?{done:!0,value:await _i}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Ks(Gn){if(Gn===void 0)return Vo;if(!Array.isArray(Gn))throw new TypeError("`methodNames` must be an array of strings");for(const Qt of Gn)if(!Vo.includes(Qt))throw typeof Qt!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${Qt} is not Emittery method`);return Gn}const fp=Gn=>Gn===Zp||Gn===yu;class Vp{static mixin(Qt,Zn){return Zn=Ks(Zn),er=>{if(typeof er!="function")throw new TypeError("`target` must be function");for(const _i of Zn)if(er.prototype[_i]!==void 0)throw new Error(`The property \`${_i}\` already exists on \`target\``);function nr(){return Object.defineProperty(this,Qt,{enumerable:!1,value:new Vp}),this[Qt]}Object.defineProperty(er.prototype,Qt,{enumerable:!1,get:nr});const _r=_i=>function(...co){return this[Qt][_i](...co)};for(const _i of Zn)Object.defineProperty(er.prototype,_i,{enumerable:!1,value:_r(_i)});return er}}static get isDebugEnabled(){if(typeof nt!="object")return up;const{env:Qt}=nt||{env:{}};return Qt.DEBUG==="emittery"||Qt.DEBUG==="*"||up}static set isDebugEnabled(Qt){up=Qt}constructor(Qt={}){rp.set(this,new Set),qp.set(this,new Map),_s.set(this,new Map),this.debug=Qt.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(Zn,er,nr,_r)=>{_r=JSON.stringify(_r),typeof nr=="symbol"&&(nr=nr.toString());const _i=new Date,co=`${_i.getHours()}:${_i.getMinutes()}:${_i.getSeconds()}.${_i.getMilliseconds()}`;console.log(`[${co}][emittery:${Zn}][${er}] Event Name: ${nr}
	data: ${_r}`)})}logIfDebugEnabled(Qt,Zn,er){(Vp.isDebugEnabled||this.debug.enabled)&&this.debug.logger(Qt,this.debug.name,Zn,er)}on(Qt,Zn){ao(Zn),Qt=Array.isArray(Qt)?Qt:[Qt];for(const er of Qt)Ml(er),Qo(this,er).add(Zn),this.logIfDebugEnabled("subscribe",er,void 0),fp(er)||this.emit(Zp,{eventName:er,listener:Zn});return this.off.bind(this,Qt,Zn)}off(Qt,Zn){ao(Zn),Qt=Array.isArray(Qt)?Qt:[Qt];for(const er of Qt)Ml(er),Qo(this,er).delete(Zn),this.logIfDebugEnabled("unsubscribe",er,void 0),fp(er)||this.emit(yu,{eventName:er,listener:Zn})}once(Qt){return new tt(Zn=>{const er=this.on(Qt,nr=>{er(),Zn(nr)})})}events(Qt){Qt=Array.isArray(Qt)?Qt:[Qt];for(const Zn of Qt)Ml(Zn);return $p(this,Qt)}async emit(Qt,Zn){Ml(Qt),this.logIfDebugEnabled("emit",Qt,Zn),qr(this,Qt,Zn);const er=Qo(this,Qt),nr=rp.get(this),_r=[...er],_i=fp(Qt)?[]:[...nr];await ip,await tt.all([..._r.map(async co=>{if(er.has(co))return co(Zn)}),..._i.map(async co=>{if(nr.has(co))return co(Qt,Zn)})])}async emitSerial(Qt,Zn){Ml(Qt),this.logIfDebugEnabled("emitSerial",Qt,Zn);const er=Qo(this,Qt),nr=rp.get(this),_r=[...er],_i=[...nr];await ip;for(const co of _r)er.has(co)&&await co(Zn);for(const co of _i)nr.has(co)&&await co(Qt,Zn)}onAny(Qt){return ao(Qt),this.logIfDebugEnabled("subscribeAny",void 0,void 0),rp.get(this).add(Qt),this.emit(Zp,{listener:Qt}),this.offAny.bind(this,Qt)}anyEvent(){return $p(this)}offAny(Qt){ao(Qt),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(yu,{listener:Qt}),rp.get(this).delete(Qt)}clearListeners(Qt){Qt=Array.isArray(Qt)?Qt:[Qt];for(const Zn of Qt)if(this.logIfDebugEnabled("clear",Zn,void 0),typeof Zn=="string"||typeof Zn=="symbol"){Qo(this,Zn).clear();const er=dp(this,Zn);for(const nr of er)nr.finish();er.clear()}else{rp.get(this).clear();for(const er of qp.get(this).values())er.clear();for(const er of _s.get(this).values()){for(const nr of er)nr.finish();er.clear()}}}listenerCount(Qt){Qt=Array.isArray(Qt)?Qt:[Qt];let Zn=0;for(const er of Qt){if(typeof er=="string"){Zn+=rp.get(this).size+Qo(this,er).size+dp(this,er).size+dp(this).size;continue}typeof er<"u"&&Ml(er),Zn+=rp.get(this).size;for(const nr of qp.get(this).values())Zn+=nr.size;for(const nr of _s.get(this).values())Zn+=nr.size}return Zn}bindMethods(Qt,Zn){if(typeof Qt!="object"||Qt===null)throw new TypeError("`target` must be an object");Zn=Ks(Zn);for(const er of Zn){if(Qt[er]!==void 0)throw new Error(`The property \`${er}\` already exists on \`target\``);Object.defineProperty(Qt,er,{enumerable:!1,value:this[er].bind(this)})}}}const Vo=Object.getOwnPropertyNames(Vp.prototype).filter(Gn=>Gn!=="constructor");Object.defineProperty(Vp,"listenerAdded",{value:Zp,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(Vp,"listenerRemoved",{value:yu,writable:!1,enumerable:!0,configurable:!1});var Gp=Vp;function qu(Gn){return typeof Gn=="object"&&Gn!==null&&"message"in Gn&&typeof Gn.message=="string"}function em(Gn){if(qu(Gn))return Gn;try{return new Error(JSON.stringify(Gn))}catch{return new Error(String(Gn))}}function om(Gn){return em(Gn).message}var Lp=(Gn=>(Gn.FPS_DROP="fps_drop",Gn))(Lp||{}),Yp=(Gn=>(Gn.start="start",Gn.transform="transform",Gn.flush="flush",Gn))(Yp||{}),tm=(Gn=>(Gn.pipeline_ended="pipeline_ended",Gn.pipeline_ended_with_error="pipeline_ended_with_error",Gn.pipeline_started="pipeline_started",Gn.pipeline_started_with_error="pipeline_started_with_error",Gn.pipeline_restarted="pipeline_restarted",Gn.pipeline_restarted_with_error="pipeline_restarted_with_error",Gn))(tm||{});const rs=500,Co=.8;class um extends Gp{constructor(Qt,Zn){super(),this.index_=Zn,this.uuid_=Sp(),this.framesTransformed_=0,this.transformer_=Qt,this.shouldStop_=!1,this.isFlashed_=!1,this.framesFromSource_=0,this.fps_=0,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in Qt&&(this.transformerType_=Qt.getTransformerType());const er=new Wo().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Create").build();ns.report(er)}setTrackExpectedRate(Qt){this.trackExpectedRate_=Qt}async start(Qt){if(this.controller_=Qt,this.transformer_&&typeof this.transformer_.start=="function")try{await this.transformer_.start(Qt)}catch(Zn){const er=new Wo().action("MediaTransformer").guid(this.uuid_).message(it.errors.transformer_start).transformerType(this.transformerType_).variation("Error").error(om(Zn)).build();ns.report(er);const nr={eventMetaData:{transformerIndex:this.index_},error:Zn,function:"start"};this.emit("error",nr)}}async transform(Qt,Zn){var er,nr,_r,_i;if(this.mediaTransformerQosReportStartTimestamp_===0&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),Qt instanceof VideoFrame&&(this.videoHeight_=(er=Qt==null?void 0:Qt.displayHeight)!=null?er:0,this.videoWidth_=(nr=Qt==null?void 0:Qt.displayWidth)!=null?nr:0),++this.framesFromSource_,this.transformer_)if(this.shouldStop_)console.warn("[Pipeline] flush from transform"),Qt.close(),this.flush(Zn),Zn.terminate();else try{await((_i=(_r=this.transformer_).transform)==null?void 0:_i.call(_r,Qt,Zn)),++this.framesTransformed_,this.framesTransformed_===rs&&this.mediaTransformerQosReport()}catch(co){const oo=new Wo().action("MediaTransformer").guid(this.uuid_).message(it.errors.transformer_transform).transformerType(this.transformerType_).variation("Error").error(om(co)).build();ns.report(oo);const du={eventMetaData:{transformerIndex:this.index_},error:co,function:"transform"};this.emit("error",du)}}async flush(Qt){if(this.transformer_&&typeof this.transformer_.flush=="function"&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(Qt)}catch(er){const nr=new Wo().action("MediaTransformer").guid(this.uuid_).message(it.errors.transformer_flush).transformerType(this.transformerType_).variation("Error").error(om(er)).build();ns.report(nr);const _r={eventMetaData:{transformerIndex:this.index_},error:er,function:"flush"};this.emit("error",_r)}}this.mediaTransformerQosReport();const Zn=new Wo().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Delete").build();ns.report(Zn)}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}mediaTransformerQosReport(){let Qt=(Date.now()-this.mediaTransformerQosReportStartTimestamp_)/1e3,Zn=this.framesFromSource_/Qt,er=this.framesTransformed_/Qt;if(this.trackExpectedRate_!=-1&&this.trackExpectedRate_*Co>Zn){const _r={eventMetaData:{transformerIndex:this.index_},warningType:"fps_drop",dropInfo:{requested:this.trackExpectedRate_,current:Zn}};this.emit("warn",_r)}const nr=new Wo().action("MediaTransformer").fps(Zn).transformedFps(er).framesTransformed(this.framesTransformed_).guid(this.uuid_).transformerType(this.transformerType_).videoHeight(this.videoHeight_).videoWidth(this.videoWidth_).variation("QoS").build();ns.report(nr),this.mediaTransformerQosReportStartTimestamp_=0,this.framesFromSource_=0,this.framesTransformed_=0}}class ym extends Gp{constructor(Qt){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let Zn=0;Zn<Qt.length;Zn++){let er=new um(Qt[Zn],Zn);er.on("error",nr=>{this.emit("error",nr)}),er.on("warn",nr=>{this.emit("warn",nr)}),this.transformers_.push(er)}}setTrackExpectedRate(Qt){this.trackExpectedRate_=Qt;for(let Zn of this.transformers_)Zn.setTrackExpectedRate(this.trackExpectedRate_)}async start(Qt,Zn){if(!this.transformers_||this.transformers_.length===0){console.log("[Pipeline] No transformers.");return}try{let er=Qt;for(let nr of this.transformers_)Qt=Qt.pipeThrough(new TransformStream(nr));Qt.pipeTo(Zn).then(async()=>{console.log("[Pipeline] Setup."),await Zn.abort(),await er.cancel(),this.emit("pipelineInfo","pipeline_ended")}).catch(async nr=>{Qt.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(_r=>{console.error("[Pipeline] Error from stream transform:",_r)}),await Zn.abort(nr),await er.cancel(nr),this.emit("pipelineInfo","pipeline_ended_with_error")})}catch{this.emit("pipelineInfo","pipeline_started_with_error"),this.destroy();return}this.emit("pipelineInfo","pipeline_started"),console.log("[Pipeline] Pipeline started.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let Qt of this.transformers_)Qt.stop()}}class dm extends Gp{constructor(){super(),this.uuid_=Sp(),this.trackExpectedRate_=-1;const Qt=new Wo().action("MediaProcessor").guid(this.uuid_).variation("Create").build();ns.report(Qt)}setTrackExpectedRate(Qt){this.trackExpectedRate_=Qt,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(Qt,Zn){return this.readable_=Qt,this.writable_=Zn,this.transformInternal()}transformInternal(){return new tt((Qt,Zn)=>{if(!this.transformers_||this.transformers_.length===0){const nr=new Wo().action("MediaProcessor").guid(this.uuid_).message(it.errors.transformer_none).variation("Error").build();ns.report(nr),Zn("[MediaProcessor] Need to set transformers.");return}if(!this.readable_){const nr=new Wo().action("MediaProcessor").guid(this.uuid_).message(it.errors.readable_null).variation("Error").build();ns.report(nr),Zn("[MediaProcessor] Readable is null.");return}if(!this.writable_){const nr=new Wo().action("MediaProcessor").guid(this.uuid_).message(it.errors.writable_null).variation("Error").build();ns.report(nr),Zn("[MediaProcessor] Writable is null.");return}let er=!1;this.pipeline_&&(er=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new ym(this.transformers_),this.pipeline_.on("warn",nr=>{this.emit("warn",nr)}),this.pipeline_.on("error",nr=>{this.emit("error",nr)}),this.pipeline_.on("pipelineInfo",nr=>{er&&(nr==="pipeline_started"?nr=tm.pipeline_restarted:nr==="pipeline_started_with_error"&&(nr=tm.pipeline_restarted_with_error)),this.emit("pipelineInfo",nr)}),this.trackExpectedRate_!=-1&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{Qt()}).catch(nr=>{Zn(nr)})})}setTransformers(Qt){const Zn=new Wo().action("MediaProcessor").guid(this.uuid_).message(it.updates.transformer_new).variation("Update").build();return ns.report(Zn),this.transformers_=Qt,this.readable_&&this.writable_?this.transformInternal():tt.resolve()}destroy(){return new tt(Qt=>{this.pipeline_&&this.pipeline_.destroy();const Zn=new Wo().action("MediaProcessor").guid(this.uuid_).variation("Delete").build();ns.report(Zn),Qt()})}}class Ep{constructor(){this.processor_=null,this.generator_=null}init(Qt){return new tt((Zn,er)=>{try{this.processor_=new MediaStreamTrackProcessor(Qt)}catch(nr){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${nr}`),er(nr)}try{Qt.kind==="audio"?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):Qt.kind==="video"?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):er("kind not supported")}catch(nr){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${nr}`),er(nr)}Zn()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class Hu{constructor(Qt){this.insertableStreamHelper_=new Ep,this.mediaProcessor_=Qt}setTrack(Qt){return new tt((Zn,er)=>{this.insertableStreamHelper_.init(Qt).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{Zn(this.insertableStreamHelper_.getProccesorTrack())}).catch(nr=>{er(nr)})}).catch(nr=>{er(nr)})})}destroy(){return new tt((Qt,Zn)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{Qt()}).catch(er=>{Zn(er)}):Zn("no processor")})}}}.call(this,b(0),b(42))},function(_e,et,b){const tt={backgroundBlur:b(719),backgroundReplacement:b(720)},nt=st=>!!tt[st],rt=st=>nt(st)?tt[st]:null,ot={isSupported:nt,getConfigurator:rt,isValidConfig:st=>{const at=st.type;return nt(at)?rt(at).isValidConfig(st):!1}};_e.exports=ot},function(_e,et,b){const tt=b(317).BlurRadius,nt=b(318),rt=tt.High,it=ut=>Object.assign({},nt.getConfig(ut),{transformerType:"BackgroundBlur",radius:rt}),ot=ut=>ut==="low"||ut==="high",st=ut=>ut==="low"?tt.Low:tt.High,ct={isValidConfig:ut=>{if((ut==null?void 0:ut.type)!=="backgroundBlur")return!1;const lt=ut.blurStrength;return lt?ot(lt):!0},getConfig:function(lt){lt===void 0&&(lt={});const dt=it(lt),ft=lt,St=ft.blurStrength;return ot(St)&&(dt.radius=st(St)),dt}};_e.exports=ct},function(_e,et,b){const tt=b(318),nt=st=>Object.assign({},tt.getConfig(st),{transformerType:"VirtualBackground"}),rt=st=>/^data:image\/(?:png|jpeg|bmp|gif);base64/.test(st)||/\.(?:png|jpe?g|bmp|gif)$/i.test(st),ot={isValidConfig:st=>{if((st==null?void 0:st.type)!=="backgroundReplacement")return!1;const at=st.backgroundImgUrl;return rt(at)},getConfig:function(at){at===void 0&&(at={});const ct=nt(at),ut=at,lt=ut.backgroundImgUrl;return rt(lt)&&(ct.backgroundAssetUri=lt),ct}};_e.exports=ot},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=b(1)("MediaProcessorConnector");let ot=function(at){var ct=this;this.setTrack=function(){var ut=(0,rt.default)(nt.default.mark(function lt(dt){var ft;return nt.default.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return ft=null,Tt.prev=1,Tt.next=4,ct.connector.setTrack(dt);case 4:ft=Tt.sent,ct.originalTrack=dt,Tt.next=11;break;case 8:Tt.prev=8,Tt.t0=Tt.catch(1),it.error(`Error setting track: ${Tt.t0}`);case 11:return Tt.abrupt("return",ft);case 12:case"end":return Tt.stop()}},lt,null,[[1,8]])}));return function(lt){return ut.apply(this,arguments)}}(),this.destroy=(0,rt.default)(nt.default.mark(function ut(){return nt.default.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.prev=0,dt.next=3,ct.connector.destroy();case 3:dt.next=8;break;case 5:dt.prev=5,dt.t0=dt.catch(0),it.warn(`Error destroying connector: ${dt.t0}`);case 8:case"end":return dt.stop()}},ut,null,[[0,5]])})),this.stopOriginalTrack=()=>{this.originalTrack&&(this.originalTrack.stop(),this.originalTrack=null)},this.connector=at};ot.isValidConnector=st=>typeof(st==null?void 0:st.setTrack)=="function"&&typeof(st==null?void 0:st.destroy)=="function",_e.exports=ot},function(_e,et,b){_e.exports=tt=>tt?!!tt.apiKey:!1},function(_e,et,b){const tt=nt=>nt===null||nt===!1;_e.exports=tt},function(_e,et,b){_e.exports=tt=>{var nt;const rt=!!(tt&&(nt=tt.videoSource)!=null&&nt.canvas),it=!!(tt&&"videoContentHint"in tt);rt&&!it&&(tt.videoContentHint="detail")}},function(_e,et,b){const tt=b(149),nt=rt=>!!(rt!=null&&rt.scalableScreenshare);_e.exports=rt=>{var it;rt||(rt={});const ot=!!tt((it=rt)==null?void 0:it.videoSource);rt.capableSimulcastScreenshare=ot&&nt(rt)}},function(_e,et,b){var tt=b(727),nt=b(99),rt=b(35);function it(ot,st){return tt(ot,rt(st,3),nt)}_e.exports=it},function(_e,et){function b(tt,nt,rt){var it;return rt(tt,function(ot,st,at){if(nt(ot,st,at))return it=st,!1}),it}_e.exports=b},function(_e,et,b){(function(tt){const nt=b(28),rt=b(72);_e.exports=it=>{let ot=it.RTCPeerConnection,st=it.env,at=it.stream,ct=it.codecFlags;if(st.isLegacyEdge)return!0;let ut,lt;const dt=()=>{try{ut.close()}catch{}try{lt.close()}catch{}ut=null,lt=null};try{const ft={iceServers:[]};rt()&&(ft.sdpSemantics="plan-b"),ut=new ot(ft),lt=new ot(ft),at.getTracks().forEach(St=>ut.addTrack(St,at))}catch{return dt(),tt.resolve(!1)}return ut.createOffer().then(ft=>{const St={type:ft.type,sdp:ft.sdp};return Object.keys(ct).forEach(Tt=>{ct[Tt]||(St.sdp=nt.removeVideoCodec(St.sdp,Tt))}),lt.setRemoteDescription(St)}).then(()=>!0).catch(()=>!1).then(ft=>(dt(),ft))}}).call(this,b(0))},function(_e,et,b){const tt=b(7),nt=tt.INVALID_PARAMETER;_e.exports=rt=>{let it=rt.otError;return ot=>{if(!ot)return;const st=(at,ct)=>{if(!at)throw it(nt,new Error(`iceConfig invalid: ${ct}`))};"includeServers"in ot&&st(["all","custom"].indexOf(ot.includeServers)!==-1,".includeServers must be all or custom"),"transportPolicy"in ot&&st(["all","relay"].indexOf(ot.transportPolicy)!==-1,".transportPolicy must be all or relay"),st(Array.isArray(ot.customServers),".customServers must be an array"),ot.customServers.forEach(at=>{st(at.urls||!("url"in at),"ice servers need .urls, not .url"),st(typeof at.urls=="string"||Array.isArray(at.urls),"ice server .urls must be a string or an array"),st(!at.username||typeof at.username=="string","ice server .username must be a string if present"),st(!at.credential||typeof at.credential=="string","ice server .credential must be a string if present")})}}},function(_e,et,b){const tt=b(2),nt=()=>tt.isChrome&&tt.version>=98;_e.exports=(rt,it)=>rt.p2pEnabled?!1:it===!0&&nt()},function(_e,et,b){const rt=it=>{if(typeof it!="string")throw new Error("secret must be a string");if(it.length<8)throw new Error("secret must have at least 8 characters");if(it.length>256)throw new Error("secret must not exceed 256 characters")};_e.exports=rt},function(_e,et,b){const tt=b(10);_e.exports=function(rt){switch(rt){case tt.AUTHENTICATION_ERROR:case tt.INVALID_SESSION_ID:case tt.TERMS_OF_SERVICE_FAILURE:case tt.UNEXPECTED_SERVER_RESPONSE:return rt;case tt.ANVIL_EMPTY_RESPONSE_BODY:case tt.ANVIL_CONNECT_FAILED:return tt.CONNECT_FAILED;case tt.ANVIL_BADLY_FORMED_RESPONSE:case tt.ANVIL_INVALID_HTTP_STATUS:case tt.ANVIL_XDOMAIN_OR_PARSING_ERROR:case tt.ANVIL_UNKNOWN_HTTP_ERROR:case tt.ANVIL_UNEXPECTED_ERROR_CODE:default:return tt.UNEXPECTED_SERVER_RESPONSE}}},function(_e,et,b){const tt=b(10),nt=b(7);_e.exports={NOT_CONNECTED:{code:nt.NOT_CONNECTED,message:"Cannot use forceMute functionality. You are not connected to the session.",exceptionCode:tt.NOT_CONNECTED},PERMISSION_DENIED:{code:nt.PERMISSION_DENIED,message:"This token does not allow forceMute usage. The role must be at least `moderator` to enable this functionality",exceptionCode:tt.UNABLE_TO_FORCE_MUTE},INVALID_PARAMETER:{code:nt.INVALID_PARAMETER,message:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",exceptionCode:tt.INVALID_PARAMETER},NOT_FOUND:{code:nt.NOT_FOUND,message:"The stream does not exist."},UNEXPECTED_SERVER_RESPONSE:{code:nt.UNEXPECTED_SERVER_RESPONSE,message:"An unexpected error occurred.",exceptionCode:tt.UNEXPECTED_SERVER_RESPONSE}}},function(_e,et,b){(function(tt){var nt=b(3);et.__esModule=!0,et.default=ut;var rt=nt(b(16)),it=nt(b(9)),ot=nt(b(50)),st=nt(b(15)),at=nt(b(323)),ct=nt(b(735));function ut(lt){lt===void 0&&(lt={});const dt=lt.convertRumorError||b(321),ft=lt.Dispatcher||b(326),St=lt.ExceptionCodes||b(10),Tt=lt.hasIceRestartsCapability||b(322),pt=lt.hasRenegotiationCapability||b(751),gt=lt.hasE2eeCapability||b(110),yt=lt.logging||b(1)("RaptorSocket"),Et=lt.Message||b(327),It=lt.OTHelpers||b(8),Gt=lt.RumorSocket||(0,ct.default)(),Wt=lt.Signal||b(328),At=lt.SignalError||b(756),kt=function Vt(Nt){var tn=this;let _t=Nt.connectionId,Kt=Nt.sessionId,cn=Nt.messagingSocketUrl,an=Nt.symphonyUrl,mn=Nt.dispatcher,on=Nt.analytics,yn=Nt.requestedCapabilities,fn=yn===void 0?[]:yn,sn,un,Ln,Xn,pn,Vn,Tn,Jn;const lr=["disconnected","connecting","connected","error","disconnecting"],tr=mn||new ft,Qn=It.statable(this,lr,"disconnected"),Sr=function(Mn){(!Mn.action||!Mn.variation)&&yt.debug("Expected action and variation"),on.logEvent((0,it.default)({sessionId:un,partnerId:sn,p2p:Vn,messagingServer:Tn,connectionId:_t},Mn))},vr=function(){for(var Mn=arguments.length,sr=new Array(Mn),Ar=0;Ar<Mn;Ar++)sr[Ar]=arguments[Ar];const so=sr[0];Qn(so?"error":"connected"),pn(...sr)},Fr=Un=>{let Mn="clientDisconnected";!this.is("disconnecting")&&Jn&&(Mn="networkDisconnected"),Un&&Un.code===4001&&(Mn="networkTimedout"),Qn("disconnected"),tr.onClose(Mn)},kr=Un=>{Jn=!0,yt.error(Un)},jr=()=>{tr.onReconnecting()},xo=()=>{Sr({action:"Reconnect",variation:"Success",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId}),tr.onReconnected()},Er=()=>{Sr({action:"Reconnect",variation:"Attempt",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})},xr=Un=>{Un.message==="connectionLimitExceeded"&&(Un.code=St.CONNECTION_LIMIT_EXCEEDED),Un.reason="ConnectToSession";const Mn=dt(Un);Sr({action:"Reconnect",variation:"Failure",failureReason:Un.reason,failureCode:Mn.code,failureMessage:Mn.message,messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})};Object.defineProperty(this,"socketId",{get(){return this._rumor.socketID}}),this.connect=function(Mn,sr,Ar,so){if(!this.is("disconnected","error")){yt.warn("Cannot connect the Raptor Socket as it is currently connected. You should disconnect first.");return}Qn("connecting"),sn=sr.partnerId,un=sr.sessionId,Vn=sr.p2pEnabled,Tn=sr.messagingServer,Ln=Mn,pn=so,Xn={apiKey:sn,sessionId:un};const Bn=`/v2/partner/${sn}/session/${un}`;this._rumor=new Vt.RumorSocket({messagingURL:cn,notifyDisconnectAddress:an,connectionId:_t,sessionId:Kt,enableReconnection:sr.reconnection}),this._rumor.on("close",Fr),this._rumor.on("error",kr),this._rumor.on("reconnecting",jr),this._rumor.on("reconnectAttempt",Er),this._rumor.on("reconnectFailure",xr),this._rumor.on("reconnected",xo),this._rumor.on("message",tr.dispatch.bind(tr));const gr=Or=>{vr({reason:"WebSocketConnection",code:Or.code,message:Or.message})};this._rumor.once("error",gr),this._rumor.once("open",()=>{this._rumor.removeListener("error",gr),yt.debug(`connected. Subscribing to ${Bn} on ${cn}`),this._rumor.subscribe([Bn]);const Or=fn;(Vt.hasIceRestartsCapability()||Vt.hasRenegotiationCapability())&&sr.renegotiation&&Or.push("renegotiation"),Vt.hasE2eeCapability()&&sr.e2ee&&Or.push("e2ee");const ho=Et.connections.create({apiKey:sn,sessionId:un,connectionId:this._rumor.id,connectionEventsSuppressed:Ar.connectionEventsSuppressed,capabilities:Or}),vo=new tt(po=>{const zr=Go=>{Go.id===this._rumor.id&&(po(Go),mn.off("connection#created",zr))};mn.on("connection#created",zr)});this.publish(ho,{"X-TB-TOKEN-AUTH":Ln},!0,(po,zr)=>{if(po){po.message==="connectionLimitExceeded"&&(po.code=St.CONNECTION_LIMIT_EXCEEDED),vr({reason:"ConnectToSession",code:po.code,message:po.message,socketId:this.socketId});return}const Go=zr&&zr.data?JSON.parse(zr.data):null;Go&&(!Go.connection||Go.connection.length===0)&&(Go.connection=[],Array.isArray(Go.stream)&&Go.stream.forEach(Zo=>{let $r=Zo.connection;return Go.connection.push($r)}));const mo=(Zo,$r)=>{Zo?vr({reason:"GetSessionState",code:Zo.code,message:Zo.message,socketId:this.socketId}):vr(void 0,$r)};vo.then(Zo=>{Go.connection.some(Ru=>Ru.id===Zo.id)||Go.connection.unshift(Zo);const $r=(0,st.default)();tr.registerCallback($r,mo),tr.emit("session#read",Go,$r)})})})},this.disconnect=function(){this.is("disconnected")||(Qn("disconnecting"),this._rumor.disconnect())},this.publish=function(Un,Mn,sr,Ar){Ar=Ar||function(){};const so=(0,ot.default)(Ar),Bn=(0,st.default)();if(yt.debug(`Publish (ID:${Bn}) ${Un}`),this._rumor.readyState!==Gt.OPEN||this._rumor.reconnecting&&!sr){const gr=new Error("Not connected.");gr.code=500,so(gr),yt.error("cannot publish until the socket is connected.");return}return tr.registerCallback(Bn,so),this._rumor.publish([an],Un,(0,it.default)({},Mn,{"Content-Type":"application/x-raptor+v2","TRANSACTION-ID":Bn,"X-TB-FROM-ADDRESS":this._rumor.id}),sr,function(gr){gr&&so(...arguments)}),Bn},this.send=function(Un,Mn,sr,Ar){sr===void 0&&(sr=!0),Ar===void 0&&(Ar=()=>{}),tn.publish((0,at.default)(Un),Mn,sr,Ar)},this.streamCreate=function(Un,Mn){Un===void 0&&(Un={}),Mn===void 0&&(Mn=()=>{});const sr=Un,Ar=sr.name,so=sr.streamId,Bn=sr.subscriberAudioFallbackEnabled,gr=sr.channels,Or=sr.minBitrate,ro=sr.maxBitrate,Ao=sr.sourceStreamId,ho=sr.e2ee,vo=sr.publisherAudioFallbackEnabled,po=sr.customProperties,zr={apiKey:sn,sessionId:un,streamId:so,name:Ar,audioFallbackEnabled:Bn,subscriberAudioFallbackEnabled:Bn,channels:gr,minBitrate:Or,maxBitrate:ro,sourceStreamId:Ao,e2ee:ho,publisherAudioFallbackEnabled:vo,customProperties:po},Go=Et.streams.create(zr);this.publish(Go,{},!0,(mo,Zo)=>{Mn(mo,so,Zo)})},this.streamDestroy=function(Un,Mn){this.publish(Et.streams.destroy(sn,un,Un,Mn),{},!0)},this.streamChannelUpdate=function(Un,Mn,sr){this.publish(Et.streamChannels.update(sn,un,Un,Mn,sr),{},!0)},this.subscriberCreate=function(Un,Mn,sr,Ar,so,Bn){const gr={apiKey:sn,sessionId:un,streamId:Un,subscriberId:Mn,connectionId:this._rumor.id,channelsToSubscribeTo:sr,sourceStreamId:Ar,e2ee:so};this.publish(Et.subscribers.create(gr),{},!0,Bn)},this.subscriberDestroy=function(Un,Mn){this.publish(Et.subscribers.destroy(sn,un,Un,Mn),{},!0)},this.subscriberUpdate=function(Un,Mn,sr){this.publish(Et.subscribers.update(sn,un,Un,Mn,sr),{},!0)},this.subscriberChannelUpdate=function(Un,Mn,sr,Ar){this.publish(Et.subscriberChannels.update(sn,un,Un,Mn,sr,Ar),{},!0)},this.forceDisconnect=function(Un,Mn){this.publish(Et.connections.destroy({apiKey:sn,sessionId:un,connectionId:Un}),{},!0,Mn)},this.forceUnpublish=function(Un,Mn){this.publish(Et.streams.destroy(sn,un,Un),{},!0,Mn)},this.forceMuteStream=function(Un,Mn){const sr={streamId:Un,active:!0};this.publish(Et.forceMute.update(Object.assign({},Xn,sr)),{},!0,Mn)},this.forceMuteAll=function(Un,Mn,sr){const Ar={excludedStreamIds:Un,active:Mn};this.publish(Et.forceMute.update(Object.assign({},Xn,Ar)),{},!0,sr)},this.signal=function(Un,Mn,sr){const Ar=new Wt(un,this._rumor.id,Un||{});if(!Ar.valid){Mn&&(0,rt.default)(Mn)&&Mn(new At(Ar.error.code,Ar.error.reason),Ar.toHash());return}this.publish(Ar.toRaptorMessage(),{},Ar.retryAfterReconnect,so=>{let Bn,gr,Or;const ro=[400,403,404,413,500];if(so){const Ao=parseInt(so.code,10);ro.includes(Ao)?(gr=Ao,Or=so.message):(gr=St.UNEXPECTED_SERVER_RESPONSE,Or="Unexpected server response. Try this operation again later."),Bn=new At(gr,Or)}else{const Ao=Ar.data?typeof Ar.data:null;sr("signal","send",{type:Ao})}Mn&&(0,rt.default)(Mn)&&Mn(Bn,Ar.toHash())})},this.id=function(){return this._rumor&&this._rumor.id}};return kt.hasIceRestartsCapability=Tt,kt.hasRenegotiationCapability=pt,kt.hasE2eeCapability=gt,kt.RumorSocket=Gt,kt}}).call(this,b(0))},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=ut;var nt=tt(b(18)),rt=tt(b(736)),it=tt(b(1)),ot=tt(b(737)),st=tt(b(742)),at=tt(b(747)),ct=tt(b(20));function ut(lt){let dt=lt===void 0?{}:lt,ft=dt.WebSocket,St=ft===void 0?at.default:ft;const Tt=(0,rt.default)(),pt=(0,ot.default)({AnalyticsHelper:ct.default,EventEmitter:nt.default,WebSocket:St,logging:it.default,allocateId:Tt});return(0,st.default)({EventEmitter:nt.default,ReconnectableSocket:pt,logging:it.default,allocateId:Tt})}},function(_e,et,b){et.__esModule=!0,et.default=tt;function tt(){let nt=0;return()=>(nt+=1,nt)}},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(4)),rt=tt(b(5)),it=tt(b(45)),ot=tt(b(324)),st=tt(b(48)),at=tt(b(325)),ct=b(76),ut=tt(b(738)),lt=tt(b(61)),dt=tt(b(739)),ft=tt(b(741));const St=yt=>function(){yt(...arguments)},Tt=yt=>yt===1e3||yt>=3e3&&yt<=4999,pt=ct.codes.CLOSE_TIMEOUT;var gt=yt=>{var Et;let It=yt.AnalyticsHelper,Gt=yt.EventEmitter,Wt=yt.WebSocket,At=yt.logging,kt=yt.allocateId,Vt=yt.BUFFER_DRAIN_INTERVAL,Nt=Vt===void 0?100:Vt,tn=yt.BUFFER_DRAIN_MAX_RETRIES,_t=tn===void 0?10:tn;return Et=function(Kt){(0,st.default)(cn,Kt);function cn(mn){var on;on=Kt.call(this)||this,on._url=void 0,on._id=kt(),on._logger=At(`ReconnectableSocket:${on._id}`),on._webSocket=void 0,on._connectTimer=void 0,on._pingTimer=void 0,on._pingWarningTimer=void 0,on._disconnectTimer=void 0,on._queuedMessages=[],on._draining=!1,on._analytics=new It,on._logAnalyticsEvent=vr=>{let Fr=vr.action,kr=vr.variation,jr=vr.payload;on._analytics.logEvent({action:Fr,variation:kr,payload:jr,sessionId:on.sessionId,connectionId:on.connectionId})};const yn=mn.url,fn=mn.connectionId,sn=mn.sessionId,un=mn.connectTimeout,Ln=un===void 0?15e3:un,Xn=mn.pingThreshold,pn=Xn===void 0?3e3:Xn,Vn=mn.pingWarningDelay,Tn=Vn===void 0?100:Vn,Jn=mn.disconnectThreshold,lr=Jn===void 0?5900:Jn,tr=mn.reconnectMaxDuration,Qn=tr===void 0?6e4:tr;if(!yn)throw new Error("Must provide url");on.connectionId=fn,on.sessionId=sn,on.readyStateMachine=(0,dt.default)({reconnectMaxDuration:Qn,CLOSED:cn.CLOSED,CLOSING:cn.CLOSING}),on._url=yn,(0,at.default)({logger:on._logger,obj:(0,ot.default)(on),eventNames:["error","open","message","needsPing","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),on.readyStateMachine.observe("onEnterOpen",vr=>{let Fr=vr.from;on._resetPingTimers(),on._resetDisconnectTimer(),on._connectTimer.clear(),Fr==="reconnecting"?(on._queuedMessages.forEach(kr=>on.send(kr,!0)),on._queuedMessages=[],on.emit("reconnected"),on._logAnalyticsEvent({action:"WebSocket:reconnect",variation:"Success"})):(on.emit("open"),on._logAnalyticsEvent({action:"WebSocket:open"}))}),on.readyStateMachine.observe("onEnterClosed",(vr,Fr)=>{let kr=vr.from,jr=vr.code,xo=vr.reason;on.emit("close",Fr),kr==="reconnecting"&&on._logAnalyticsEvent({action:"WebSocket:reconnect",variation:"Failure",payload:{code:jr,reason:xo}})}),on.readyStateMachine.observe("onEnterClosing",St(function(){var vr=(0,rt.default)(nt.default.mark(function Fr(kr,jr){var xo,Er,xr;return nt.default.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:return xo=kr.from,Er=jr.code,xr=jr.reason,on._clearTimers(),Mn.next=5,on._clearSocket({drain:xo==="open",code:Er,reason:xr});case 5:xo==="reconnecting"&&(on.emit("reconnectFailure",{code:Er,reason:xr}),on._logAnalyticsEvent({action:"WebSocket:reconnect",variation:"Failure"})),setTimeout(()=>{on.readyStateMachine.closed({code:Er,reason:xr})});case 7:case"end":return Mn.stop()}},Fr)}));return function(Fr,kr){return vr.apply(this,arguments)}}())),on.readyStateMachine.observe("onEnterReconnecting",()=>{on.emit("reconnecting"),on._logAnalyticsEvent({action:"WebSocket:reconnect",variation:"Attempt"})}),on.readyStateMachine.observe("onDisconnect",St(function(){var vr=(0,rt.default)(nt.default.mark(function Fr(kr,jr){var xo,Er,xr,Un;return nt.default.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(xo=kr.from,Er=kr.to,xr=jr.code,Un=jr.reason,Er!=="reconnecting"){sr.next=12;break}if(!on._draining){sr.next=5;break}return sr.abrupt("return");case 5:return on._clearTimers(),on.emit("reconnectAttempt"),sr.next=9,on._clearSocket({drain:xo==="open",code:xr,reason:Un});case 9:on._createSocket(),sr.next=13;break;case 12:on._logAnalyticsEvent({action:"WebSocket:disconnect",payload:{code:xr,reason:Un}});case 13:case"end":return sr.stop()}},Fr)}));return function(Fr,kr){return vr.apply(this,arguments)}}()));const Sr=(vr,Fr)=>new ut.default({name:vr,duration:Fr,logger:on._logger});return on._connectTimer=Sr("connect",Ln),on._pingTimer=Sr("ping",pn),on._pingWarningTimer=Sr("pingWarning",Tn),on._disconnectTimer=Sr("disconnect",lr),on._createSocket(),on}var an=cn.prototype;return an._createSocket=function(){const on=new Wt(this.url);on.binaryType="arraybuffer";const yn=(0,lt.default)(on);yn.on("open",()=>{this.readyStateMachine.open()}),yn.on("close",fn=>{let sn=fn.code,un=fn.reason;this.readyStateMachine.disconnect({code:sn,reason:un})}),yn.on("error",fn=>{this.emit("error",fn)}),yn.on("message",fn=>{this.readyState!==cn.CLOSING&&this._resetDisconnectTimer(),this.emit("message",fn)}),this._webSocket=on,this._webSocketEvents=yn,this._connectTimer.reset(()=>{const fn={code:pt,reason:"Timeout while opening connection"},sn=new Error(fn.reason);sn.code=pt,this.emit("error",sn),this.readyStateMachine.disconnect(fn)})},an._clearSocket=function(){var mn=(0,rt.default)(nt.default.mark(function yn(fn){var sn,un,Ln,Xn,pn;return nt.default.wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(sn=fn===void 0?{}:fn,un=sn.drain,Ln=un===void 0?!1:un,Xn=sn.code,pn=sn.reason,this._draining=!0,this._webSocketEvents&&this._webSocketEvents.removeAll(),this._webSocket.readyState===cn.CLOSED){Tn.next=9;break}if(!Ln){Tn.next=7;break}return Tn.next=7,(0,ft.default)(this._webSocket,{BUFFER_DRAIN_INTERVAL:Nt,BUFFER_DRAIN_MAX_RETRIES:_t});case 7:this._logAnalyticsEvent({action:"WebSocket:close",payload:{code:Xn,reason:pn},variation:"Attempt"});try{!Tt(Xn)||Xn===void 0&&pn===void 0?this._webSocket.close():this._webSocket.close(Xn,pn),this._logAnalyticsEvent({action:"WebSocket:close",payload:{code:Xn,reason:pn},variation:"Success"})}catch(Jn){At.error("Could not close websocket",Jn),this._logAnalyticsEvent({action:"WebSocket:close",payload:{err:Jn},variation:"Failure"})}case 9:this._draining=!1;case 10:case"end":return Tn.stop()}},yn,this)}));function on(yn){return mn.apply(this,arguments)}return on}(),an.send=function(on,yn){yn===void 0&&(yn=!0),this.readyState===cn.OPEN&&this._resetPingTimers();const fn=()=>{try{return this._webSocket.send(on),"sent"}catch(sn){if(this._webSocket.readyState===Wt.OPEN)return this._logger.debug("webSocket.send threw exception even though it was open:",sn),"dropped";throw sn}};if(this.readyStateMachine.state==="reconnecting"){if(this._webSocket.readyState===Wt.OPEN)try{fn()}catch{}return yn?(this._queuedMessages.push(on),"queued"):(this._logger.debug("Dropping message during reconnection since retryAfterReconnect is false:",on),"dropped")}return fn()},an.close=function(on,yn){if(this.readyState===cn.CLOSING)throw new Error("Can not call close on a closing ReconnectableSocket");if(this.readyState===cn.CLOSED)throw new Error("Can not call close on an already closed ReconnectableSocket");this.readyStateMachine.close({code:on,reason:yn})},an._resetPingTimers=function(){this._pingWarningTimer.clear(),this._pingTimer.reset(()=>{this._pingWarningTimer.reset(()=>{this._logger.warn("Did not send message after needsPing event. Other side may disconnect.")}),this.emit("needsPing")})},an._resetDisconnectTimer=function(){this._disconnectTimer.reset(()=>this.readyStateMachine.disconnect({code:pt,reason:"No activity"}))},an._clearTimers=function(){[this._disconnectTimer,this._connectTimer,this._pingTimer,this._pingWarningTimer].forEach(on=>on.clear())},(0,it.default)(cn,[{key:"url",get:function(){return typeof this._url=="function"?this._url():this._url}},{key:"reconnecting",get:function(){return this.readyStateMachine.state==="reconnecting"}},{key:"binaryType",get:function(){return this._webSocket.binaryType}},{key:"bufferedAmount",get:function(){return this._webSocket.bufferedAmount}},{key:"protocol",get:function(){return this._webSocket.protocol}},{key:"extensions",get:function(){return this._webSocket.extensions}},{key:"readyState",get:function(){return{reconnecting:cn.OPEN,open:cn.OPEN,closing:cn.CLOSING,closed:cn.CLOSED,connecting:cn.CONNECTING}[this.readyStateMachine.state]}}]),cn}(Gt),Et.CONNECTING=Wt.CONNECTING,Et.OPEN=Wt.OPEN,Et.CLOSING=Wt.CLOSING,Et.CLOSED=Wt.CLOSED,Et};et.default=gt},function(_e,et,b){et.__esModule=!0,et.default=void 0;let tt=function(){function nt(it){let ot=it.name,st=it.logger,at=it.duration;this.name=void 0,this.logger=void 0,this.duration=void 0,this.currId=void 0,this.name=ot,this.logger=st,this.duration=at}var rt=nt.prototype;return rt.reset=function(ot){this.clear();const st=setTimeout(()=>{this.currId!==void 0&&(this.logger.spam(`${this.name} timer with id ${this.currId} expired, entering callback`),this.currId=void 0,ot())},this.duration);this.currId=st,this.logger.spam(`Started ${this.name} timer with id ${this.currId}, expires in ${this.duration}ms`)},rt.clear=function(){this.currId!==void 0&&(clearTimeout(this.currId),this.logger.spam(`Cleared ${this.name} timer with id ${this.currId}`),this.currId=void 0)},rt.isRunning=function(){return this.currId!==void 0},nt}();et.default=tt},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(310)),rt=tt(b(740)),it=b(76),ot=tt(b(1));const st=(0,ot.default)("ReconnectableSocketStateMachine"),at=it.codes.CLOSE_UNSUPPORTED,ct=it.codes.CLOSE_UNEXPECTED_CONDITION;var ut=lt=>{let dt=lt.reconnectMaxDuration,ft=lt.CLOSED,St=lt.CLOSING,Tt;function pt(gt){let yt=gt.code;return(this.state==="open"||!Tt)&&(Tt=(0,rt.default)(dt)),dt>0&&!Tt()&&[at,ct].indexOf(yt)===-1&&[ft,St].indexOf(this.readyState)===-1?"reconnecting":"closing"}return new nt.default({init:"connecting",methods:{onInvalidTransition(gt,yt,Et){st.error("Invalid state transition",{transition:gt,from:yt,to:Et})}},transitions:[{name:"open",from:["connecting","reconnecting"],to:"open"},{name:"close",from:["connecting","reconnecting","open"],to:"closing"},{name:"closed",from:"closing",to:"closed"},{name:"disconnect",from:["reconnecting","open","connecting"],to:pt}]})};et.default=ut},function(_e,et,b){_e.exports=tt=>{let nt=!1;return setTimeout(()=>{nt=!0},tt),()=>nt}},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(4)),rt=tt(b(5)),it=tt(b(107)),ot=function(){var st=(0,rt.default)(nt.default.mark(function at(ct,ut){var lt,dt,ft,St,Tt,pt;return nt.default.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:lt=ut===void 0?{}:ut,dt=lt.BUFFER_DRAIN_INTERVAL,ft=dt===void 0?100:dt,St=lt.BUFFER_DRAIN_MAX_RETRIES,Tt=St===void 0?10:St,pt=0;case 2:if(!(pt<Tt)){yt.next=10;break}if(ct.bufferedAmount!==0){yt.next=5;break}return yt.abrupt("break",10);case 5:return yt.next=7,(0,it.default)(ft);case 7:pt+=1,yt.next=2;break;case 10:case"end":return yt.stop()}},at)}));return function(at,ct){return st.apply(this,arguments)}}();et.default=ot},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(45)),rt=tt(b(324)),it=tt(b(48)),ot=tt(b(15)),st=tt(b(325)),at=tt(b(743)),ct=ft(b(171)),ut=tt(b(746)),lt=b(76);function dt(Tt){if(typeof WeakMap!="function")return null;var pt=new WeakMap,gt=new WeakMap;return(dt=function(Et){return Et?gt:pt})(Tt)}function ft(Tt,pt){if(!pt&&Tt&&Tt.__esModule)return Tt;if(Tt===null||typeof Tt!="object"&&typeof Tt!="function")return{default:Tt};var gt=dt(pt);if(gt&&gt.has(Tt))return gt.get(Tt);var yt={},Et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var It in Tt)if(It!=="default"&&Object.prototype.hasOwnProperty.call(Tt,It)){var Gt=Et?Object.getOwnPropertyDescriptor(Tt,It):null;Gt&&(Gt.get||Gt.set)?Object.defineProperty(yt,It,Gt):yt[It]=Tt[It]}return yt.default=Tt,gt&&gt.set(Tt,yt),yt}var St=Tt=>{var pt;let gt=Tt.EventEmitter,yt=Tt.ReconnectableSocket,Et=Tt.logging,It=Tt.allocateId;return pt=function(Gt){(0,it.default)(Wt,Gt);function Wt(kt){var Vt;let Nt=kt.messagingURL,tn=kt.notifyDisconnectAddress,_t=kt.connectionId,Kt=kt.sessionId,cn=kt.enableReconnection,an=kt.pingThreshold,mn=an===void 0?2e3:an,on=kt.disconnectThreshold,yn=on===void 0?(cn?3:25)*mn-100:on,fn=kt.reconnectMaxDuration,sn=fn===void 0?cn?6e4:0:fn;Vt=Gt.call(this)||this,Vt.url=void 0,Vt.id=void 0,Vt._opened=!1,Vt._socket=void 0,Vt._reconnectAttempts=0,Vt._socketID=(0,ot.default)(),Vt._receivedTransactionIDs=[],Vt._notifyDisconnectAddress=void 0,Vt._enableReconnection=void 0,Vt._pendingMessages=[],Vt._logger=Et(`RumorSocket:${It()}`),(0,st.default)({logger:Vt._logger,obj:(0,rt.default)(Vt),eventNames:["open","message","error","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),Vt.url=Nt,Vt.id=_t,Vt._notifyDisconnectAddress=tn,Vt._enableReconnection=cn,Vt.on("error",Ln=>{Vt._logger.error(Ln.message)});try{Vt._socket=new yt({url:()=>Vt._enableReconnection?[Vt.url,Vt.url.indexOf("?")>=0?"&":"?",`socketId=${Vt._socketID}`,Vt._socket&&Vt._socket.reconnecting?"&reconnect=true":"",`&attempt=${(0,ot.default)()}`].join(""):Vt.url,pingThreshold:mn,disconnectThreshold:yn,reconnectMaxDuration:sn,connectionId:_t,sessionId:Kt})}catch(Ln){Vt._logger.error(Ln),Vt.emit("error",new ut.default(lt.codes.CLOSE_CONNECT_EXCEPTION))}const un=()=>{Vt._opened=!0,Vt._socket.send(at.default.Connect(Vt.id,tn).serialize()),Vt.emit("open",Vt.id)};return Vt._socket.once("open",un),Vt._socket.on("message",Ln=>Vt._receiveMessage(Ln)),Vt._socket.once("close",Ln=>{Vt._logger.debug(`ReconnectableSocket closed (code: ${Ln.code})`),Vt._clearPendingMessages();const Xn=lt.codes.CLOSE_NORMAL,pn=lt.codes.CLOSE_GOING_AWAY,Vn=lt.codes.CLOSE_TIMEOUT;[Xn,pn,Vn].indexOf(Ln.code)===-1&&Vt.emit("error",new ut.default(Ln.code)),Vt.emit("close",Ln)}),Vt._socket.on("error",Ln=>{let Xn=Ln.code;return Vt.emit("error",new ut.default(Xn))}),Vt._socket.on("needsPing",()=>{Vt._socket.send(at.default.Ping().serialize())}),Vt._socket.on("reconnecting",()=>{Vt._opened&&(Vt._clearPendingMessagesWhichShouldntRetry(),Vt.emit("reconnecting"),Vt._reconnectAttempts=0)}),Vt._socket.on("reconnectAttempt",()=>{Vt._opened&&(Vt._reconnectAttempts+=1,Vt._socket.send(at.default.Disconnect("1").serialize(),!1),Vt.emit("reconnectAttempt"))}),Vt._socket.on("reconnected",()=>{if(!Vt._opened){un();return}Vt._pendingMessages.forEach(Ln=>{Vt._socket.send(Ln.rumorMessage.serialize())}),Vt.emit("reconnected")}),Vt._socket.on("reconnectFailure",()=>{Vt._opened&&(Vt._logger.debug(`Reconnecting failed as connectivity was not restored within ${sn}ms`),Vt.emit("reconnectFailure",new ut.default))}),Vt}var At=Wt.prototype;return At._clearPendingMessagesWhichShouldntRetry=function(){const Vt=this._pendingMessages.filter(Nt=>!Nt.retryAfterReconnect);this._pendingMessages=this._pendingMessages.filter(Nt=>Nt.retryAfterReconnect),Vt.forEach(Nt=>{const tn=new Error("Not connected.");tn.code=500,Nt.completion(tn)})},At._clearPendingMessages=function(){this._pendingMessages.forEach(Vt=>{const Nt=new Error("Not connected.");Nt.code=500,Vt.completion(Nt)}),this._pendingMessages=[]},At._sendAck=function(Vt){this._socket.send(at.default.Status([Vt.fromAddress],{"TRANSACTION-ID":Vt.headers["TRANSACTION-ID"],"X-TB-FROM-ADDRESS":this.id}).serialize())},At._receiveMessage=function(Vt){const Nt=at.default.deserialize(Vt.data);if(Nt.type!==ct.PONG){if(this._logger.debug("Received:",Nt),Nt.transactionId&&(this._pendingMessages=this._pendingMessages.filter(tn=>(tn.rumorMessage.transactionId===Nt.transactionId&&(this._logger.debug("Marking",Nt.transactionId," as received"),tn.completion(void 0,Nt)),tn.rumorMessage.transactionId!==Nt.transactionId))),Nt.transactionId&&Nt.type!==ct.STATUS){if(this._sendAck(Nt),this._receivedTransactionIDs.indexOf(Nt.transactionId)>=0)return;this._receivedTransactionIDs.push(Nt.transactionId)}this.emit("message",Nt)}},At.publish=function(Vt,Nt,tn,_t,Kt){Kt===void 0&&(Kt=()=>{});const cn=at.default.Publish(Vt,Nt,tn);if(this._socket.send(cn.serialize(),!1)==="dropped"&&!_t){const mn=new Error("Not connected.");mn.code=500,Kt(mn);return}this._pendingMessages.push({rumorMessage:cn,retryAfterReconnect:_t,completion:Kt})},At.subscribe=function(Vt){this._socket.send(at.default.Subscribe(Vt).serialize())},At.unsubscribe=function(Vt){this._socket.send(at.default.Unsubscribe(Vt).serialize())},At.disconnect=function(){if(this.readyState===Wt.OPEN&&this._socket.send(at.default.Disconnect().serialize()),this._socket.readyState!==yt.CLOSED&&this._socket.readyState!==yt.CLOSING){const Vt=lt.codes.CLOSE_NORMAL;this._socket.close(Vt,lt.messages[Vt])}},At.status=function(Vt,Nt){this._socket.send(at.default.Status(Vt,{"TRANSACTION-ID":Nt,"X-TB-FROM-ADDRESS":this.id}).serialize())},At.reconnectRetriesCount=function(){return this._reconnectAttempts},At.messageQueueSize=function(){return this._pendingMessages.length},(0,nt.default)(Wt,[{key:"readyState",get:function(){return this._socket?this._socket.readyState:yt.CONNECTING}},{key:"reconnecting",get:function(){return this._opened&&this._socket&&this._socket.reconnecting}},{key:"socketID",get:function(){return this._socketID}}]),Wt}(gt),pt.CONNECTING=yt.CONNECTING,pt.OPEN=yt.OPEN,pt.CLOSING=yt.CLOSING,pt.CLOSED=yt.CLOSED,pt};et.default=St},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(15)),rt=b(744),it=st(b(171));function ot(ut){if(typeof WeakMap!="function")return null;var lt=new WeakMap,dt=new WeakMap;return(ot=function(St){return St?dt:lt})(ut)}function st(ut,lt){if(!lt&&ut&&ut.__esModule)return ut;if(ut===null||typeof ut!="object"&&typeof ut!="function")return{default:ut};var dt=ot(lt);if(dt&&dt.has(ut))return dt.get(ut);var ft={},St=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Tt in ut)if(Tt!=="default"&&Object.prototype.hasOwnProperty.call(ut,Tt)){var pt=St?Object.getOwnPropertyDescriptor(ut,Tt):null;pt&&(pt.get||pt.set)?Object.defineProperty(ft,Tt,pt):ft[Tt]=ut[Tt]}return ft.default=ut,dt&&dt.set(ut,ft),ft}const at=ut=>{const lt=new ArrayBuffer(ut.length),dt=new Uint8Array(lt);for(let ft=0;ft<ut.length;++ft)dt[ft]=ut[ft];return lt};let ct=function(){function ut(dt,ft,St,Tt){this.type=void 0,this.toAddress=void 0,this.headers=void 0,this.data=void 0,this.type=dt,this.toAddress=ft,this.headers=St,this.data=Tt,this.fromAddress=this.headers["X-TB-FROM-ADDRESS"],this.transactionId=this.headers["TRANSACTION-ID"],this.status=this.headers.STATUS,this.isError=this.status&&this.status[0]!=="2"}var lt=ut.prototype;return lt.serialize=function(){let ft,St,Tt,pt,gt=8,yt=7;const Et=[],It=[],Gt=[];for(yt++,Tt=0;Tt<this.toAddress.length;Tt++)Et.push(new rt.TextEncoder("utf-8").encode(this.toAddress[Tt])),yt+=2,yt+=Et[Tt].length;yt++,Tt=0;for(const kt in this.headers)this.headers.hasOwnProperty(kt)&&(It.push(new rt.TextEncoder("utf-8").encode(kt)),Gt.push(new rt.TextEncoder("utf-8").encode(this.headers[kt])),yt+=4,yt+=It[Tt].length,yt+=Gt[Tt].length,Tt++);St=new rt.TextEncoder("utf-8").encode(this.data),yt+=St.length;const Wt=new ArrayBuffer(yt),At=new Uint8Array(Wt,0,yt);for(yt-=4,At[0]=(yt&4278190080)>>>24,At[1]=(yt&16711680)>>>16,At[2]=(yt&65280)>>>8,At[3]=(yt&255)>>>0,At[4]=0,At[5]=0,At[6]=this.type,At[7]=this.toAddress.length,Tt=0;Tt<Et.length;Tt++)for(ft=Et[Tt],At[gt++]=ft.length>>8&255,At[gt++]=ft.length>>0&255,pt=0;pt<ft.length;pt++)At[gt++]=ft[pt];for(At[gt++]=It.length,Tt=0;Tt<It.length;Tt++){for(ft=It[Tt],At[gt++]=ft.length>>8&255,At[gt++]=ft.length>>0&255,pt=0;pt<ft.length;pt++)At[gt++]=ft[pt];for(ft=Gt[Tt],At[gt++]=ft.length>>8&255,At[gt++]=ft.length>>0&255,pt=0;pt<ft.length;pt++)At[gt++]=ft[pt]}for(Tt=0;Tt<St.length;Tt++)At[gt++]=St[Tt];return Wt},ut.deserialize=function(ft){(typeof window!==void 0?window:commonjsGlobal).Buffer&&(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer(ft)&&(ft=at(ft));let St,Tt,pt,gt,yt,Et,It,Gt,Wt=8;const At=new Uint8Array(ft);St=At[6];const kt=[];for(Gt=0;Gt<At[7];Gt++)It=At[Wt++]<<8,It+=At[Wt++],Tt=new Uint8Array(ft,Wt,It),kt[Gt]=new rt.TextDecoder("utf-8").decode(Tt),Wt+=It;for(pt=At[Wt++],gt={},Gt=0;Gt<pt;Gt++)It=At[Wt++]<<8,It+=At[Wt++],Tt=new Uint8Array(ft,Wt,It),yt=new rt.TextDecoder("utf-8").decode(Tt),Wt+=It,It=At[Wt++]<<8,It+=At[Wt++],Tt=new Uint8Array(ft,Wt,It),Et=new rt.TextDecoder("utf-8").decode(Tt),gt[yt]=Et,Wt+=It;const Vt=new Uint8Array(ft,Wt),Nt=new rt.TextDecoder("utf-8").decode(Vt);return new ut(St,kt,gt,Nt)},ut.Connect=function(ft,St){const Tt={uniqueId:ft,"TRANSACTION-ID":(0,nt.default)(),notifyDisconnectAddress:St};return new ut(it.CONNECT,[],Tt,"")},ut.Disconnect=function(ft){return new ut(it.DISCONNECT,[],{reconnect:ft},"")},ut.Subscribe=function(ft){return new ut(it.SUBSCRIBE,ft,{},"")},ut.Unsubscribe=function(ft){return new ut(it.UNSUBSCRIBE,ft,{},"")},ut.Publish=function(ft,St,Tt){return new ut(it.MESSAGE,ft,Tt||{},St||"")},ut.Status=function(ft,St){return new ut(it.STATUS,ft,St||{},"")},ut.Ping=function(){return new ut(it.PING,[],{},"")},ut}();et.default=ct},function(_e,et,b){et.__esModule=!0,et.TextEncoder=et.TextDecoder=void 0;var tt=rt(b(745));function nt(st){if(typeof WeakMap!="function")return null;var at=new WeakMap,ct=new WeakMap;return(nt=function(lt){return lt?ct:at})(st)}function rt(st,at){if(!at&&st&&st.__esModule)return st;if(st===null||typeof st!="object"&&typeof st!="function")return{default:st};var ct=nt(at);if(ct&&ct.has(st))return ct.get(st);var ut={},lt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var dt in st)if(dt!=="default"&&Object.prototype.hasOwnProperty.call(st,dt)){var ft=lt?Object.getOwnPropertyDescriptor(st,dt):null;ft&&(ft.get||ft.set)?Object.defineProperty(ut,dt,ft):ut[dt]=st[dt]}return ut.default=st,ct&&ct.set(st,ut),ut}const it=(typeof window!==void 0?window:commonjsGlobal).TextEncoder||tt.TextEncoder;et.TextEncoder=it;const ot=(typeof window!==void 0?window:commonjsGlobal).TextDecoder||tt.TextDecoder;et.TextDecoder=ot},function(_e,et,b){b.r(et),b.d(et,"TextEncoder",function(){return dt}),b.d(et,"TextDecoder",function(){return lt});function tt(Tt,pt,gt){return pt<=Tt&&Tt<=gt}function nt(Tt){if(Tt===void 0)return{};if(Tt===Object(Tt))return Tt;throw TypeError("Could not convert argument to dictionary")}function rt(Tt){for(var pt=String(Tt),gt=pt.length,yt=0,Et=[];yt<gt;){var It=pt.charCodeAt(yt);if(It<55296||It>57343)Et.push(It);else if(56320<=It&&It<=57343)Et.push(65533);else if(55296<=It&&It<=56319)if(yt===gt-1)Et.push(65533);else{var Gt=Tt.charCodeAt(yt+1);if(56320<=Gt&&Gt<=57343){var Wt=It&1023,At=Gt&1023;Et.push(65536+(Wt<<10)+At),yt+=1}else Et.push(65533)}yt+=1}return Et}function it(Tt){for(var pt="",gt=0;gt<Tt.length;++gt){var yt=Tt[gt];yt<=65535?pt+=String.fromCharCode(yt):(yt-=65536,pt+=String.fromCharCode((yt>>10)+55296,(yt&1023)+56320))}return pt}var ot=-1;function st(Tt){this.tokens=[].slice.call(Tt)}st.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ot},prepend:function(Tt){if(Array.isArray(Tt))for(var pt=Tt;pt.length;)this.tokens.unshift(pt.pop());else this.tokens.unshift(Tt)},push:function(Tt){if(Array.isArray(Tt))for(var pt=Tt;pt.length;)this.tokens.push(pt.shift());else this.tokens.push(Tt)}};var at=-1;function ct(Tt,pt){if(Tt)throw TypeError("Decoder error");return pt||65533}var ut="utf-8";function lt(Tt,pt){if(!(this instanceof lt))return new lt(Tt,pt);if(Tt=Tt!==void 0?String(Tt).toLowerCase():ut,Tt!==ut)throw new Error("Encoding not supported. Only utf-8 is supported");pt=nt(pt),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!pt.fatal,this._ignoreBOM=!!pt.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}lt.prototype={decode:function(pt,gt){var yt;typeof pt=="object"&&pt instanceof ArrayBuffer?yt=new Uint8Array(pt):typeof pt=="object"&&"buffer"in pt&&pt.buffer instanceof ArrayBuffer?yt=new Uint8Array(pt.buffer,pt.byteOffset,pt.byteLength):yt=new Uint8Array(0),gt=nt(gt),this._streaming||(this._decoder=new ft({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!gt.stream;for(var Et=new st(yt),It=[],Gt;!Et.endOfStream()&&(Gt=this._decoder.handler(Et,Et.read()),Gt!==at);)Gt!==null&&(Array.isArray(Gt)?It.push.apply(It,Gt):It.push(Gt));if(!this._streaming){do{if(Gt=this._decoder.handler(Et,Et.read()),Gt===at)break;Gt!==null&&(Array.isArray(Gt)?It.push.apply(It,Gt):It.push(Gt))}while(!Et.endOfStream());this._decoder=null}return It.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(It[0]===65279?(this._BOMseen=!0,It.shift()):this._BOMseen=!0),it(It)}};function dt(Tt,pt){if(!(this instanceof dt))return new dt(Tt,pt);if(Tt=Tt!==void 0?String(Tt).toLowerCase():ut,Tt!==ut)throw new Error("Encoding not supported. Only utf-8 is supported");pt=nt(pt),this._streaming=!1,this._encoder=null,this._options={fatal:!!pt.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}dt.prototype={encode:function(pt,gt){pt=pt?String(pt):"",gt=nt(gt),this._streaming||(this._encoder=new St(this._options)),this._streaming=!!gt.stream;for(var yt=[],Et=new st(rt(pt)),It;!Et.endOfStream()&&(It=this._encoder.handler(Et,Et.read()),It!==at);)Array.isArray(It)?yt.push.apply(yt,It):yt.push(It);if(!this._streaming){for(;It=this._encoder.handler(Et,Et.read()),It!==at;)Array.isArray(It)?yt.push.apply(yt,It):yt.push(It);this._encoder=null}return new Uint8Array(yt)}};function ft(Tt){var pt=Tt.fatal,gt=0,yt=0,Et=0,It=128,Gt=191;this.handler=function(Wt,At){if(At===ot&&Et!==0)return Et=0,ct(pt);if(At===ot)return at;if(Et===0){if(tt(At,0,127))return At;if(tt(At,194,223))Et=1,gt=At-192;else if(tt(At,224,239))At===224&&(It=160),At===237&&(Gt=159),Et=2,gt=At-224;else if(tt(At,240,244))At===240&&(It=144),At===244&&(Gt=143),Et=3,gt=At-240;else return ct(pt);return gt=gt<<6*Et,null}if(!tt(At,It,Gt))return gt=Et=yt=0,It=128,Gt=191,Wt.prepend(At),ct(pt);if(It=128,Gt=191,yt+=1,gt+=At-128<<6*(Et-yt),yt!==Et)return null;var kt=gt;return gt=Et=yt=0,kt}}function St(Tt){Tt.fatal,this.handler=function(pt,gt){if(gt===ot)return at;if(tt(gt,0,127))return gt;var yt,Et;tt(gt,128,2047)?(yt=1,Et=192):tt(gt,2048,65535)?(yt=2,Et=224):tt(gt,65536,1114111)&&(yt=3,Et=240);for(var It=[(gt>>6*yt)+Et];yt>0;){var Gt=gt>>6*(yt-1);It.push(128|Gt&63),yt-=1}return It}}},function(_e,et,b){et.__esModule=!0,et.default=void 0;var tt=rt(b(76));function nt(st){if(typeof WeakMap!="function")return null;var at=new WeakMap,ct=new WeakMap;return(nt=function(lt){return lt?ct:at})(st)}function rt(st,at){if(!at&&st&&st.__esModule)return st;if(st===null||typeof st!="object"&&typeof st!="function")return{default:st};var ct=nt(at);if(ct&&ct.has(st))return ct.get(st);var ut={},lt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var dt in st)if(dt!=="default"&&Object.prototype.hasOwnProperty.call(st,dt)){var ft=lt?Object.getOwnPropertyDescriptor(st,dt):null;ft&&(ft.get||ft.set)?Object.defineProperty(ut,dt,ft):ut[dt]=st[dt]}return ut.default=st,ct&&ct.set(st,ut),ut}const it=b(7);let ot=function(at){if(this.code=void 0,this.message=void 0,this.name=void 0,this.code=tt.codes.CLOSE_FALLBACK_CODE,Object.values(tt.codes).includes(at))switch(this.code=at,this.code){case tt.codes.CLOSE_GOING_AWAY:case tt.codes.CLOSE_PROTOCOL_ERROR:case tt.codes.CLOSE_UNSUPPORTED:case tt.codes.CLOSE_NO_STATUS:case tt.codes.CLOSE_ABNORMAL:case tt.codes.CLOSE_INCONSISTENT_DATA:case tt.codes.CLOSE_POLICY_VIOLATION:case tt.codes.CLOSE_TOO_LARGE:case tt.codes.CLOSE_UNEXPECTED_CONDITION:case tt.codes.CLOSE_CONNECTIVITY_LOSS:case tt.codes.CLOSE_CONNECT_EXCEPTION:case tt.codes.CLOSE_TIMEOUT:this.name=it.DISCONNECTED,this.message="Action failed due to session disconnection.";return}this.message=tt.messages[this.code]||"No message available from code."};et.default=ot},function(_e,et,b){var tt=b(3);et.__esModule=!0,et.default=void 0;var nt=tt(b(748)),rt=(()=>(typeof window!==void 0?window:commonjsGlobal).WebSocket?(typeof window!==void 0?window:commonjsGlobal).WebSocket:nt.default)();et.default=rt},function(_e,et,b){_e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(_e,et,b){const tt=b(750);_e.exports=function(rt){const it=tt(rt.data);return it.transactionId=rt.transactionId,it.fromAddress=rt.headers["X-TB-FROM-ADDRESS"],it}},function(_e,et,b){_e.exports=function(nt){if(nt.length===0)return{};const rt=JSON.parse(nt),it=rt.uri.substr(1).split("/");it.shift(),it[it.length-1]===""&&it.pop(),rt.params={};for(let ot=0,st=it.length;ot<st-1;ot+=2)rt.params[it[ot]]=it[ot+1];return it.length%2===0?it[it.length-2]==="channel"&&it.length>6?rt.resource=`${it[it.length-4]}_${it[it.length-2]}`:rt.resource=it[it.length-2]:it[it.length-1]==="channel"&&it.length>5?rt.resource=`${it[it.length-3]}_${it[it.length-1]}`:rt.resource=it[it.length-1],rt.signature=`${rt.resource}#${rt.method}`,rt}},function(_e,et,b){const tt=b(2),nt=tt.name,rt=b(51).once;_e.exports=()=>rt()&&["Chrome","Firefox","Safari"].indexOf(nt)>-1},function(_e,et,b){const tt=b(2),nt=b(51).once;_e.exports=()=>nt()&&(tt.name==="Chrome"||tt.name==="Firefox"||tt.name==="Node"||tt.name==="Safari"||tt.name==="Edge")},function(_e,et,b){const tt=b(51).once;_e.exports=()=>tt()},function(_e,et,b){_e.exports="DTLS_SRTP"},function(_e,et,b){_e.exports=function(nt){let rt=nt.supportsWebRTC;return{supportsWebRTC:rt==="true"||rt===!0}}},function(_e,et,b){_e.exports=function(nt,rt){this.code=nt,this.message=rt,this.reason=rt}},function(_e,et,b){const tt=function(rt){const it=[];this.enqueue=function(){it.push(Array.prototype.slice.call(arguments))},this.triggerAll=function(){let st;for(;st=it.shift();)rt.trigger(...st)}};_e.exports=tt},function(_e,et,b){const tt=b(206),nt=b(239),rt=b(57),it=b(9),ot=b(142),st=b(10),at=b(759),ct=b(760),ut=b(290).default,lt={EMPTY_RESPONSE:"Response body was empty, probably due to connectivity loss",BADLY_FORMED:"Unknown error: JSON response was badly formed",NO_ERROR:"No error message",UNEXPECTED_SERVER_RESPONSE:St=>`Unexpected server response (${St}). Try this operation again later.`},dt=[0,600,1200];function ft(St){let Tt=St===void 0?{}:St,pt=Tt.axios,gt=pt===void 0?tt:pt,yt=Tt.retryDelays,Et=yt===void 0?dt:yt;function It(Wt){let At=Wt.anvilUrl,kt=Wt.sessionId,Vt=Wt.token,Nt=Wt.clientVersion,tn=Wt.connectionId;const _t=nt.parse(At,!0),Kt=nt.format({protocol:_t.protocol,auth:_t.auth,host:_t.host,pathname:nt.resolve((_t.pathname||"").replace(/\/?$/,"/"),`session/${kt}`),query:Object.assign({},_t.query,{extended:!0})});return gt.get(Kt,{validateStatus:cn=>cn>=200&&cn<300,headers:{"X-OPENTOK-AUTH":Vt,"X-TB-VERSION":1,"X-TB-CLIENT-VERSION":Nt,"X-TB-CONNECTIONID":tn,Accept:"application/json"}}).catch(cn=>{if(cn.response){const an=new Error(lt.UNEXPECTED_SERVER_RESPONSE(`${cn.response.statusCode}${cn.response.status?` ${cn.response.status}`:""}`));throw an.code=st.ANVIL_INVALID_HTTP_STATUS,an.name=at(an.code),an}else if(cn.request){const an=new Error(lt.CONNECT_FAILED);throw an.code=st.ANVIL_CONNECT_FAILED,an.name=at(an.code),an}else{const an=st.ANVIL_UNKNOWN_HTTP_ERROR,mn=at(cn.code);throw it(cn,{code:an,name:mn}),cn}}).then(cn=>{let an=cn.data;if(typeof an=="string"){if(an.length>0)try{JSON.parse(an)}catch(fn){throw fn.message=lt.UNEXPECTED_SERVER_RESPONSE(fn.toString()),fn.code=st.ANVIL_XDOMAIN_OR_PARSING_ERROR,fn.name=at(fn.code),fn}const yn=new Error(an.length===0?lt.EMPTY_RESPONSE:lt.BADLY_FORMED);throw yn.code=an.length===0?st.ANVIL_EMPTY_RESPONSE_BODY:st.ANVIL_BADLY_FORMED_RESPONSE,yn.name=at(yn.code),yn}if(an===null||an.length===0){const yn=new Error(lt.EMPTY_RESPONSE);throw yn.code=st.ANVIL_EMPTY_RESPONSE_BODY,yn.name=at(yn.code),yn}const mn=an.filter(yn=>yn.error!=null),on=mn[0];if(on){const yn=ct(rt(on,"error.code","500"));rt(on,"error.errorMessage.message")==="Invalid token format"&&(on.error.errorMessage.message+=` Token: ${Vt}`);const fn=new Error(rt(on,"error.errorMessage.message",yn===void 0?`Unknown error: ${on.error.code}`:lt.NO_ERROR));throw fn.code=yn||st.ANVIL_UNEXPECTED_ERROR_CODE,fn.name=at(fn.code),fn}return new ot(an[0])})}return ut(It,(Wt,At)=>Wt.code&&Wt.code>=3e3&&Wt.code<=3007&&Et[At])}_e.exports=ft},function(_e,et,b){const tt=b(10),nt=b(7),rt={[tt.ANVIL_BADLY_FORMED_RESPONSE]:nt.BADLY_FORMED_RESPONSE,[tt.ANVIL_INVALID_HTTP_STATUS]:nt.INVALID_HTTP_STATUS,[tt.ANVIL_XDOMAIN_OR_PARSING_ERROR]:nt.XDOMAIN_OR_PARSING_ERROR,[tt.ANVIL_UNKNOWN_HTTP_ERROR]:nt.UNKNOWN_HTTP_ERROR,[tt.ANVIL_UNEXPECTED_ERROR_CODE]:nt.UNEXPECTED_ERROR_CODE,[tt.ANVIL_EMPTY_RESPONSE_BODY]:nt.EMPTY_RESPONSE_BODY,[tt.ANVIL_CONNECT_FAILED]:nt.CONNECT_FAILED,[tt.AUTHENTICATION_ERROR]:nt.AUTHENTICATION_ERROR,[tt.INVALID_SESSION_ID]:nt.INVALID_SESSION_ID,[tt.TERMS_OF_SERVICE_FAILURE]:nt.TERMS_OF_SERVICE_FAILURE,[tt.UNEXPECTED_SERVER_RESPONSE]:nt.UNEXPECTED_SERVER_RESPONSE};function it(ot){return rt[ot]}_e.exports=it},function(_e,et,b){const tt=b(10),nt={400:tt.INVALID_SESSION_ID,403:tt.AUTHENTICATION_ERROR,404:tt.INVALID_SESSION_ID,409:tt.TERMS_OF_SERVICE_FAILURE,500:tt.UNEXPECTED_SERVER_RESPONSE};function rt(it){return nt[it]}_e.exports=rt},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5)),it=tt(b(48));const ot=b(18),st=b(762);let at=function(ct){(0,it.default)(ut,ct);function ut(dt){var ft;return dt===void 0&&(dt={}),ft=ct.call(this)||this,ft._generateKey=dt.generateKey||st,ft}var lt=ut.prototype;return lt.set=function(){var dt=(0,rt.default)(nt.default.mark(function St(Tt,pt){var gt;return nt.default.wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return this.keyPromise=this._generateKey(Tt,pt),Et.next=3,this.keyPromise;case 3:gt=Et.sent,this.emit("keyChanged",gt);case 5:case"end":return Et.stop()}},St,this)}));function ft(St,Tt){return dt.apply(this,arguments)}return ft}(),lt.get=function(){var dt=(0,rt.default)(nt.default.mark(function St(){var Tt;return nt.default.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,this.keyPromise;case 2:return Tt=gt.sent,gt.abrupt("return",Tt);case 4:case"end":return gt.stop()}},St,this)}));function ft(){return dt.apply(this,arguments)}return ft}(),lt.clear=function(){this.keyPromise=void 0},ut}(ot);_e.exports=at},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=function(){var ot=(0,rt.default)(nt.default.mark(function st(at,ct){var ut,lt,dt,ft;return nt.default.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return ut=!1,lt=!0,dt=new TextEncoder,Tt.next=5,window.crypto.subtle.importKey("raw",dt.encode(ct),{name:"PBKDF2"},ut,["deriveBits","deriveKey"]);case 5:return ft=Tt.sent,Tt.abrupt("return",window.crypto.subtle.deriveKey({name:"PBKDF2",salt:dt.encode(at),iterations:1e5,hash:"SHA-256"},ft,{name:"AES-CTR",length:256},lt,["encrypt","decrypt"]));case 7:case"end":return Tt.stop()}},st)}));return function(at,ct){return ot.apply(this,arguments)}}();_e.exports=it},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=b(2);let ot={SFrame:{}};it.isNode||(ot=b(764));const st=ot,at=st.SFrame,ct=lt=>at.createClient(lt,{skipVp8PayloadHeader:!0});let ut=function(){function lt(){this._clientStore={}}var dt=lt.prototype;return dt.createSender=function(){var ft=(0,rt.default)(nt.default.mark(function Tt(pt){return nt.default.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(pt===void 0&&(pt=0),!this.getSender(pt)){yt.next=3;break}return yt.abrupt("return",this.getSender(pt));case 3:return this._clientStore[pt]||(this._clientStore[pt]={}),yt.next=6,ct(pt);case 6:return this._clientStore[pt].sender=yt.sent,yt.abrupt("return",this.getSender(pt));case 8:case"end":return yt.stop()}},Tt,this)}));function St(Tt){return ft.apply(this,arguments)}return St}(),dt.createReceiver=function(){var ft=(0,rt.default)(nt.default.mark(function Tt(pt){return nt.default.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(!this.getReceiver(pt)){yt.next=2;break}return yt.abrupt("return",this.getReceiver(pt));case 2:return this._clientStore[pt]||(this._clientStore[pt]={}),yt.next=5,ct(pt);case 5:return this._clientStore[pt].receiver=yt.sent,yt.abrupt("return",this.getReceiver(pt));case 7:case"end":return yt.stop()}},Tt,this)}));function St(Tt){return ft.apply(this,arguments)}return St}(),dt.getSender=function(St){var Tt;return(Tt=this._clientStore[St])==null?void 0:Tt.sender},dt.getReceiver=function(St){var Tt;return(Tt=this._clientStore[St])==null?void 0:Tt.receiver},dt.deleteReceiver=function(St){this.getReceiver(St)&&(this._clientStore[St].receiver.deleteReceiver(St),delete this._clientStore[St].receiver)},dt.deleteSender=function(St){var Tt;(Tt=this._clientStore[St])==null||delete Tt.sender},lt}();_e.exports=ut},function(_e,et,b){(function(tt){(function(rt,it){_e.exports=it()})(this,function(){return function(nt){var rt={};function it(ot){if(rt[ot])return rt[ot].exports;var st=rt[ot]={i:ot,l:!1,exports:{}};return nt[ot].call(st.exports,st,st.exports,it),st.l=!0,st.exports}return it.m=nt,it.c=rt,it.d=function(ot,st,at){it.o(ot,st)||Object.defineProperty(ot,st,{enumerable:!0,get:at})},it.r=function(ot){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ot,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ot,"__esModule",{value:!0})},it.t=function(ot,st){if(st&1&&(ot=it(ot)),st&8||st&4&&typeof ot=="object"&&ot&&ot.__esModule)return ot;var at=Object.create(null);if(it.r(at),Object.defineProperty(at,"default",{enumerable:!0,value:ot}),st&2&&typeof ot!="string")for(var ct in ot)it.d(at,ct,function(ut){return ot[ut]}.bind(null,ct));return at},it.n=function(ot){var st=ot&&ot.__esModule?function(){return ot.default}:function(){return ot};return it.d(st,"a",st),st},it.o=function(ot,st){return Object.prototype.hasOwnProperty.call(ot,st)},it.p="",it(it.s="./index.js")}({"./Client.js":function(nt,rt,it){it.r(rt),it.d(rt,"SFrame",function(){return st});var ot=it("./Worker.js");const st={createClient:async function(ut,lt){const dt=new ct;return await dt.init(ut,lt),dt}};async function at(ut){return ut instanceof CryptoKey&&ut.type=="private"?await crypto.subtle.exportKey("pkcs8",ut):ut instanceof CryptoKey?await crypto.subtle.exportKey("raw",ut):ut instanceof Uint8Array?ut.buffer.slice(0):ut.slice(0)}class ct extends EventTarget{constructor(){super(),this.worker=new ot.default,this.transId=1,this.transactions=new Map,this.worker.addEventListener("message",async lt=>{const dt=lt.data;if(dt.transId){const ft=this.transactions.get(dt.transId);this.transactions.delete(dt.transId),dt.error?ft.reject(new Error(dt.error)):ft.resolve(dt.result)}else if(dt.event){const ft=new Event(dt.event.name);ft.id=dt.event.data.id,ft.senderId=dt.event.data.senderId,this.dispatchEvent(ft)}}),this.postMessage=(lt,dt,ft)=>new tt((St,Tt)=>{const pt=this.transId++;this.worker.postMessage({transId:pt,cmd:lt,args:dt},ft),this.transactions.set(pt,{resolve:St,reject:Tt})})}async init(lt,dt){return this.postMessage("init",{senderId:lt,config:dt})}async setSenderEncryptionKey(lt){const dt=await at(lt);return this.postMessage("setSenderEncryptionKey",[dt],[dt])}async ratchetSenderEncryptionKey(){return this.postMessage("ratchetSenderEncryptionKey")}async setSenderSigningKey(lt){const dt=await at(lt);return this.postMessage("setSenderSigningKey",[dt])}async addReceiver(lt){return this.postMessage("addReceiver",[lt])}async setReceiverEncryptionKey(lt,dt){const ft=await at(dt);return this.postMessage("setReceiverEncryptionKey",[lt,ft],[ft])}async setReceiverVerifyKey(lt,dt){const ft=await at(dt);return this.postMessage("setReceiverVerifyKey",[lt,ft],[ft])}deleteReceiver(lt){return this.postMessage("deleteReceiver",[lt])}async encrypt(lt,dt){const ft=dt.track.kind,{readable:St,writable:Tt}=dt.createEncodedStreams?dt.createEncodedStreams():dt.createEncodedVideoStreams?dt.createEncodedVideoStreams():dt.createEncodedAudioStreams();return this.postMessage("encrypt",{id:lt,kind:ft,readableStream:St,writableStream:Tt},[St,Tt])}async decrypt(lt,dt){const ft=dt.track.kind,{readable:St,writable:Tt}=dt.createEncodedStreams?dt.createEncodedStreams():dt.createEncodedVideoStreams?dt.createEncodedVideoStreams():dt.createEncodedAudioStreams();return this.postMessage("decrypt",{id:lt,kind:ft,readableStream:St,writableStream:Tt},[St,Tt])}close(){this.worker.terminate();for(let lt of this.transactions.values())lt.reject(new Error("Client closed"));this.transactions.clear()}}},"./Worker.js":function(nt,rt,it){it.r(rt),it.d(rt,"default",function(){return at});var ot=it("./node_modules/worker-loader/dist/runtime/inline.js"),st=it.n(ot);function at(){return st()(`/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./Worker.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./Worker.js":
/*!*******************!*\\
  !*** ./Worker.js ***!
  \\*******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/debounce */ "./node_modules/lodash/debounce.js");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _lib_Context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/Context.js */ "./lib/Context.js");
/* harmony import */ var _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/VP8PayloadHeader.js */ "./lib/VP8PayloadHeader.js");
/* harmony import */ var _lib_Utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/Utils.js */ "./lib/Utils.js");
/* harmony import */ var _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/TaskQueue.js */ "./lib/TaskQueue.js");






const postDecryptStatusMessage = lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default()((message) => {
	postMessage(message)
},  1000, { leading: false, trailing: true });

let context; 

onmessage = async (event) => {
	//Get data
	const {transId,cmd,args} = event.data;
	
	try {
		let result = true;
		
		//Depending on the cmd
		switch(event.data.cmd)
		{
			case "init":
			{
				//Get info
				const {senderId, config} = args;
				//Crate context
				context = new _lib_Context_js__WEBPACK_IMPORTED_MODULE_1__["Context"](senderId, config);
				break;
			}
			case "encrypt":
			{
				//The recrypt queue
				const tasks = new _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__["TaskQueue"]();
				//Get event data
				const{id, kind, readableStream, writableStream} = args;
				//Create transform stream foo encrypting
				const transformStream = new TransformStream({
					transform: async (chunk, controller)=>{
						//Nothing in clear
						let skip = 0;
						//Check if it is video and we are skipping vp8 payload header
						if (kind=="video" && context.isSkippingVp8PayloadHeader())
						{
							//Get VP8 header
							const vp8 = _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__["VP8PayloadHeader"].parse(chunk.data);
							//Skip it
							skip = vp8.byteLength;
						}
						//Enqueue task
						tasks.enqueue (
							context.encrypt(kind, id, chunk.data, skip),
							(encrypted) => {
								//Set back encrypted payload
								chunk.data = encrypted.buffer;
								//write back
								controller.enqueue(chunk);
							},
							(error)=>{
								//TODO: handle errors
							}
						);
					}
				});
				//Encrypt
				readableStream
					.pipeThrough(transformStream)
					.pipeTo(writableStream);
				break;
			}
			case "decrypt":
			{
				//The recrypt queue
				const tasks = new _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__["TaskQueue"]();
				//Last reveiced senderId
				let senderId = -1;
				//Get event data
				const{id, kind, readableStream, writableStream} = args;
				//Create transform stream for encrypting
				const transformStream = new TransformStream({
					transform: async (chunk, controller)=>{
						//Nothing in clear
						let skip = 0;
						//Check if it is video and we are skipping vp8 payload header
						if (kind=="video" && context.isSkippingVp8PayloadHeader())
						{
							//Get VP8 header
							const vp8 = _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__["VP8PayloadHeader"].parse(chunk.data);
							//Skip it
							skip = vp8.byteLength;
						}

						//Enqueue task
						tasks.enqueue(
							context.decrypt(kind, id, chunk.data, skip),
							(decrypted) => {
								//Set back decrypted payload
								chunk.data = decrypted.buffer;
								//write back
								controller.enqueue(chunk);
								//If it is a sender
								if (decrypted.senderId!=senderId)
								{
									//Store it
									senderId = decrypted.senderId;
									//Launch event
									postMessage ({event: {
										name	: "authenticated",
										data	: {
											id	 : id,
											senderId : senderId
										}
									}});
								}
								if (decrypted.decryptionRestored) {
									postDecryptStatusMessage({
										event: {
											name: "decryptionRestored",
											data: {
												id,
												senderId,
											},
										},
									});
								}
							},
							(error) => {
								if (error.message === 'decryptFailed') {
									postDecryptStatusMessage({
										event: {
											name: "decryptFailed",
											data: {
												id,
												senderId,
											},
										},
								});
								}
							}
						);
					}
				});
				//Decrypt
				readableStream
					.pipeThrough(transformStream)
					.pipeTo(writableStream);
				break;
			}
			default:
				//Excute "cmd" method on context
				result = await context[cmd](...args || []);
		}
		//Send result back
		postMessage ({transId,result});
	} catch (error) {
		console.error(error);
		//Send error back
		postMessage({transId,error});
	}
};


/***/ }),

/***/ "./lib/AesCm128HmacSha256EncryptionKey.js":
/*!************************************************!*\\
  !*** ./lib/AesCm128HmacSha256EncryptionKey.js ***!
  \\************************************************/
/*! exports provided: AesCm128HmacSha256EncryptionKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AesCm128HmacSha256EncryptionKey", function() { return AesCm128HmacSha256EncryptionKey; });
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils.js */ "./lib/Utils.js");
/* harmony import */ var _Salts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Salts.js */ "./lib/Salts.js");
/* harmony import */ var _IV_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IV.js */ "./lib/IV.js");




const ratchetKey = (key) => 
	crypto.subtle.deriveBits(
		{
			name : "HKDF",
			hash : "SHA-256",
			salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].RatchetKey,
			info : new ArrayBuffer()
		},
		key,
		256
	);

class AesCm128HmacSha256EncryptionKey 
{
	constructor(){
		this.ratchets = [];
	}

	async setKey(key)
	{
		if (key instanceof CryptoKey)
		{
			//Check private key algorithm
			if (key.algorithm.name!="HKDF")
				//Error
				throw new Error("Invalid key");
		} else {
			//Import key
			key = await crypto.subtle.importKey(
				"raw",
				key,
				"HKDF",
				false,
				["deriveBits", "deriveKey"]
			);
		}
		this.key = key;
		
		//Get salt key
		this.saltKey = new Uint8Array(await crypto.subtle.deriveBits(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].SaltKey,
				info : new ArrayBuffer()
			},
			key,
			128
		));
	
		//Get encryption key
		this.encryptionKey = await crypto.subtle.deriveKey(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].EncryptionKey,
				info : new ArrayBuffer()
			},
			key,
			{
				name : "AES-CTR",
				length : 128
			},
			false,
			["encrypt","decrypt"]
		);
	
		//Get authentication key
		this.authKey = await crypto.subtle.deriveKey(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].AuthenticationKey,
				info : new ArrayBuffer()
			},
			key,
			{
				name : "HMAC",
				hash : "SHA-256",
				length : 256
			},
			false,
			["sign","verify"]
		);
	}

	
	async encrypt(type,header,payload,extraBytes,skip)
	{
		//Encure int
		skip = skip ? skip : 0;
		
		//Create IV
		const iv = _IV_js__WEBPACK_IMPORTED_MODULE_2__["IV"].generate(header.keyId, header.counter, this.saltKey);
		
		//Encrypt
		const encrypted = await crypto.subtle.encrypt(
			{
				name	: "AES-CTR",
				counter : iv,
				length  : 128
			},
			this.encryptionKey,
			payload
		);
	
		//Get auth tag length from media type
		const authTagLength = AesCm128HmacSha256EncryptionKey.getAuthTagLen(type);
		
		//Create encrypted frame
		const encryptedFrame = new Uint8Array(header.byteLength + payload.byteLength + authTagLength + extraBytes + skip);
		
		//Set header and encrypted payolad
		encryptedFrame.set(header, skip);
		encryptedFrame.set(new Uint8Array(encrypted), skip + header.length);
		
		//Authenticate
		const signature = new Uint8Array(await crypto.subtle.sign(
			"HMAC",
			this.authKey, 
			encryptedFrame.subarray(skip, skip + header.byteLength + encrypted.byteLength)
		));
	
		//Truncate
		const authTag = signature.subarray(0, authTagLength);
	
		//Append authentication tag
		encryptedFrame.set(authTag, skip + encrypted.byteLength + header.byteLength );
		
		//Done
		return [encryptedFrame,authTag];
		
	}
	
	async decrypt(type, header, encryptedFrame, extrabytes, skip)
	{
		//Encure int
		skip = skip ? skip : 0;
		
		//Create IV
		const iv = _IV_js__WEBPACK_IMPORTED_MODULE_2__["IV"].generate(header.keyId, header.counter, this.saltKey);
		
		//Get auth tag length from media type
		const authTagLength = AesCm128HmacSha256EncryptionKey.getAuthTagLen(type);
		
		//Get encrypted frame length (without extra bytes from signature)
		const frameLength = encryptedFrame.byteLength - extrabytes - skip;
		
		//Get authentication tag
		const authTag = encryptedFrame.subarray(skip + frameLength - authTagLength, skip + frameLength);
		
		//Get encrypted payload
		const encrypted = encryptedFrame.subarray(skip + header.byteLength, skip + frameLength - authTagLength);
		
		//Calculate signature
		const signature = new Uint8Array(await crypto.subtle.sign(
			"HMAC",
			this.authKey, 
			encryptedFrame.subarray(skip, skip + header.byteLength + encrypted.byteLength)
		));
	
		//Authenticate authTag
		let authenticated = true;
		//Avoid timimg attacks by iterating over all bytes
		for (let i=0;i<authTagLength;++i)
			//check signature
			authenticated &= authTag[i]===signature[i];
		
		//If not all where equal
		if (!authenticated)
			//Authentication error
			throw new Error("Authentication error");
		
		//Decrypt
		const payload = new Uint8Array (await crypto.subtle.decrypt(
			{
				name	: "AES-CTR",
				counter : iv,
				length  : 128
			},
			this.encryptionKey,
			encrypted
		));
		
		//Done
		return [payload, authTag];
	}
	
	async ratchet(index)
	{
		// return stored key if exists
		if (this.ratchets[index]) {
			return this.ratchets[index];
		}
		
		//Create new key
		const key = new AesCm128HmacSha256EncryptionKey();

		// Get previous ratchet
		const previousRatchetKey = index === 0 ? this.key : this.ratchets[index - 1].key;
		
		//Set ratchet key
		await key.setKey(await ratchetKey(previousRatchetKey));
		
		this.ratchets[index] = key;
		//Done
		return key;
	}
	
	static getAuthTagLen(type)
	{
		return type.toLowerCase()==="video" ? 10 : 4;
	};
	
	static async create(raw) 
	{
		//Create new key
		const key = new AesCm128HmacSha256EncryptionKey();
		//Set raw key
		await key.setKey(raw);
		//Done
		return key;
	}
};



/***/ }),

/***/ "./lib/Context.js":
/*!************************!*\\
  !*** ./lib/Context.js ***!
  \\************************/
/*! exports provided: Context */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return Context; });
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _Sender_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sender.js */ "./lib/Sender.js");
/* harmony import */ var _Receiver_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Receiver.js */ "./lib/Receiver.js");




class Context
{
	
	constructor(senderId, config)
	{
		//Store config
		this.config = Object.assign({}, config);
		//Only one sender per context
		this.sender = new _Sender_js__WEBPACK_IMPORTED_MODULE_1__["Sender"](senderId);
		
		//The map of known remote senders
		this.receivers = new Map();
	}
	
	isSkippingVp8PayloadHeader()
	{
		return !!this.config.skipVp8PayloadHeader;
	}
		
	async setSenderEncryptionKey(key)
	{
		//Set it
		return this.sender.setEncryptionKey(key);
	}
	
	async ratchetSenderEncryptionKey()
	{
		//Set it
		return this.sender.ratchetEncryptionKey();
	}
	
	async setSenderSigningKey(key)
	{
		//Set it
		return this.sender.setSigningKey(key);
	}
	
	addReceiver(receiverkKeyId)
	{
		//Check we don't have a receiver already for that id
		if(this.receivers.has(receiverkKeyId))
			//Error
			throw new Error("There was already a receiver for keyId "+receiverkKeyId);
		//Add new
		this.receivers.set(receiverkKeyId, new _Receiver_js__WEBPACK_IMPORTED_MODULE_2__["Receiver"](receiverkKeyId));
	}
	
	async setReceiverEncryptionKey(receiverkKeyId, key)
	{
		//Get receiver for the sender
		const receiver = this.receivers.get(receiverkKeyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId "+receiverkKeyId);
		
		//Rachet
		return receiver.setEncryptionKey(key);
	}
	
	async setReceiverVerifyKey(receiverkKeyId,key)
	{
		//Get receiver for the sender
		const receiver = this.receivers.get(receiverkKeyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId "+receiverkKeyId);
		
		//Rachet
		return receiver.setVerifyKey(key);
	}
	
	deleteReceiver(receiverkKeyId)
	{
		//Delete receiver
		return this.receivers.delete(receiverkKeyId);
	}
	
	async encrypt(type, ssrcId, frame, skip)
	{
		//Encrypt it
		return this.sender.encrypt(type, ssrcId, frame, skip);
	}
	
	async decrypt(type, ssrcId, encryptedFrame, skip)
	{
		//convert if needed
		if (!(encryptedFrame instanceof Uint8Array))
			encryptedFrame = new Uint8Array (encryptedFrame);
		
		//Parse encrypted payload
		const header = _Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].parse(encryptedFrame.subarray(skip));
		
		//Get receiver for the sender
		const receiver = this.receivers.get(header.keyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId " + header.keyId);
		
		//Decrypt it
		return receiver.decrypt(type, ssrcId, header, encryptedFrame, skip);
	}
	
};


/***/ }),

/***/ "./lib/EcdsaSignKey.js":
/*!*****************************!*\\
  !*** ./lib/EcdsaSignKey.js ***!
  \\*****************************/
/*! exports provided: EcdsaSignKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EcdsaSignKey", function() { return EcdsaSignKey; });
//TODO: Update to Ed25519 when available
// https://chromestatus.com/features/4913922408710144
// https://chromium.googlesource.com/chromium/src/+log/master/components/webcrypto/algorithms/ed25519.cc

class EcdsaSignKey
{
	
	async setKey(privKey)
	{
		//If it is a crypto key already
		if (privKey instanceof CryptoKey)
		{
			//Check private key algorithm
			if (privKey.algorithm.name!="ECDSA" || !privKey.usages.includes("sign"))
				//Error
				throw new Error("Invalid key");
			//Set it
			this.privKey = privKey;
		} else {
			//Import it
			this.privKey = await crypto.subtle.importKey(
				"pkcs8",
				privKey,
				{
					name		: "ECDSA",
					namedCurve	: "P-521"
				},
				false,
				["sign"]
			);
		}
	}
	
	async sign(authTags)
	{
		//Verify
		return new Uint8Array(await crypto.subtle.sign(
			{
			  name: "ECDSA",
			  hash: "SHA-512"
			},
			this.privKey,
			authTags
		));
	}
	
	static getSignatureLen()
	{
		return 64;
	}
	
	static async create(privKey)
	{
		//Craete key
		const key = new EcdsaSignKey();
		//Set key
		await key.setKey(privKey);
		//Done
		return key;
		
	}
};


/***/ }),

/***/ "./lib/EcdsaVerifyKey.js":
/*!*******************************!*\\
  !*** ./lib/EcdsaVerifyKey.js ***!
  \\*******************************/
/*! exports provided: EcdsaVerifyKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EcdsaVerifyKey", function() { return EcdsaVerifyKey; });

class EcdsaVerifyKey
{
	async setKey(pubKey)
	{
		//If it is a crypto key already
		if (pubKey instanceof CryptoKey)
		{
			//Check 
			if (pubKey.algorithm.name!="ECDSA" || !pubKey.usages.includes("verify"))
				//Error
				throw new Error("Invalid key");
			//Set it
			this.pubKey = pubKey;
		} else {
			//Import it
			this.pubKey = await crypto.subtle.importKey(
				"raw",
				pubKey,
				{
					name		: "ECDSA",
					namedCurve	: "P-521"
				},
				false,
				["verify"]
			);
		}
	}
	
	async verify(signed,signature)
	{
		//Verify
		return await window.crypto.subtle.verify(
			{
				name: "ECDSA",
				hash: "SHA-512"
			},
			this.pubKey,
			signature,
			signed
		);
	}
	
	static getSignatureLen()
	{
		return 64;
	}
	
	static async create(pubKey)
	{
		//Craete key
		const key = new EcdsaVerifyKey();
		//Set key
		await key.setKey(pubKey);
		//Done
		return key;
		
	}
};


/***/ }),

/***/ "./lib/Header.js":
/*!***********************!*\\
  !*** ./lib/Header.js ***!
  \\***********************/
/*! exports provided: Header */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Header", function() { return Header; });
/*
	0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+
	|S|LEN  |X|  K  |
	+-+-+-+-+-+-+-+-+
	SFrame header metadata

	Signature flag (S): 1 bit This field indicates the payload contains a signature of set. Counter Length (LEN): 3 bits This field indicates the length of the CTR fields in bytes. Extended Key Id Flag (X): 1 bit
	Indicates if the key field contains the key id or the key length. Key or Key Length: 3 bits This field contains the key id (KID) if the X flag is set to 0, or the key length (KLEN) if set to 1.

	If X flag is 0 then the KID is in the range of 0-7 and the frame counter (CTR) is found in the next LEN bytes:

	 0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+---------------------------------+
	|S|LEN  |0| KID |    CTR... (length=LEN)          |
	+-+-+-+-+-+-+-+-+---------------------------------+
	Key id (KID): 3 bits The key id (0-7). Frame counter (CTR): (Variable length) Frame counter value up to 8 bytes long.

	if X flag is 1 then KLEN is the length of the key (KID), that is found after the SFrame header metadata byte. After the key id (KID), the frame counter (CTR) will be found in the next LEN bytes:

	 0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+---------------------------+---------------------------+
	|S|LEN  |1|KLEN |   KID... (length=KLEN)    |    CTR... (length=LEN)    |
	+-+-+-+-+-+-+-+-+---------------------------+---------------------------+
*/
const Header = {
	
	parse : function(buffer) 
	{
		//Create uint view
		const view = new Uint8Array(buffer);
		
		//Get metadata
		const metadata = view[0];
		
		//Get values
		const s		= !!(metadata & 0x80);
		const len	= (metadata >> 4) & 0x07;
		const x		= !!(metadata & 0x08);
		const k		= metadata & 0x07;
		
		//Get key id
		let keyId = 0;
		//Check if it is the extented key format
		if (x)
		{
			//Read length
			for (let i=0;i<k;i++)
				keyId = (keyId * 256) + view[i+1];
		} else {
			//Short version
			keyId = k;
		}
		
		//Get ctr
		const ini = x ? k + 1 : 1;
		let counter = 0;
		//Read length
		for (let i=0;i<len;i++)
			counter = (counter * 256) + view[ini+i];
		
		//Get header buffer view
		const header = view.subarray(0, x ? k + len + 1 : len + 1);
		
		//Add parsed atributes
		header.signature   = s;
		header.keyId	   = keyId;
		header.counter	   = counter;
		
		//Done
		return header; 
	},
	generate: function(signature,keyId,counter)
	{
		//Check keyId
		Header.checkKeyId(keyId);
		
		//Calcultate variavle length
		const varlen = (x) => x ? parseInt(Math.log(x) / Math.log(256))+1 : 1;
		
		//Get key extension and length
		const x = keyId > 7;
		const k = x ? varlen(keyId) : keyId;
		
		//Get counter length
		const len = varlen(counter);
		
		//Ensure counter is not huge
		if (len>7)
			//Error
			throw new Error("Counter is too big");
		
		//Generate header
		const header = new Uint8Array( x ? 1 + k + len : 1 + len);
		
		//Set metadata header
		header[0] = !!signature;
		header[0] = header[0] << 3  | ( len & 0x07);
		header[0] = header[0] << 1  | x;
		header[0] = header[0] << 3  | ( k & 0x07);
		
		//Add parsed atributes
		header.signature   = !!signature;
		header.keyId	   = keyId;
		header.counter	   = counter;
		
		//If extended key
		if (x)
			//Add key id
			for (let i=0; i<k; ++i)
				header[i+1] = (keyId >> (k-1-i)*8) & 0xff;
		//The coutner init
		const ini = x ? k + 1 : 1;
		//Add counter
		for (let i=0; i<len; ++i)
			header[ini+i] = (counter >> (len-1-i)*8) & 0xff;
			
		
		//Done
		return header;
	}
};

Header.MaxKeyId = 0xFFFFFFFFFF;

Header.checkKeyId = function(keyId)
{
	//Check it is possitive
	if (keyId<0)
		//Error
		throw new Error("keyId must be possitive");
	//Check it is possitive
	if (keyId>Header.MaxKeyId)
		//Error
		throw new Error("keyId must be 5 bytes long at most");
};


/***/ }),

/***/ "./lib/IV.js":
/*!*******************!*\\
  !*** ./lib/IV.js ***!
  \\*******************/
/*! exports provided: IV */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IV", function() { return IV; });
const IV = 
{
	generate : function(keyId,counter,salt)
	{
		//128 bits
		const iv = new Uint8Array (16);
		//Get view
		const view = new DataView(iv.buffer);
		//Set keyId
		view.setBigUint64(0, BigInt(counter));
		//Set coutner
		view.setBigUint64(8, BigInt(keyId));
		//Xor with salt key
		for (let i=0; i<iv.byteLength; ++i)
			//xor
			view.setUint8(i,iv[i]^salt[i]); 
		//return buffer
		return iv;
	}
};


/***/ }),

/***/ "./lib/Receiver.js":
/*!*************************!*\\
  !*** ./lib/Receiver.js ***!
  \\*************************/
/*! exports provided: Receiver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Receiver", function() { return Receiver; });
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils.js */ "./lib/Utils.js");
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _EcdsaVerifyKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EcdsaVerifyKey.js */ "./lib/EcdsaVerifyKey.js");
/* harmony import */ var _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AesCm128HmacSha256EncryptionKey.js */ "./lib/AesCm128HmacSha256EncryptionKey.js");





const MaxRatchetAttempts = 5;
const ReplayWindow = 128;
const KeyTimeout = 1000;

class Receiver
{
	constructor(senderId)
	{
		//Check keyId
		_Header_js__WEBPACK_IMPORTED_MODULE_1__["Header"].checkKeyId(senderId);
		
		//Store sender id
		this.senderId = senderId;
		//Last received counter
		this.maxReceivedCounter = -1;
		//Number or ratchets of current key
		this.numKeyRatchets = 0;
		//Create keyring
		this.keyring = [];
		//Pending verified tags
		this.pending = new Map();
		// has failed decryption
		this.keyFailing = false;

		//Scheduled keys
		this.scheduledKeys = new WeakSet ();

		//Function to clear up keys up to given one
		this.schedulePreviousKeysTimeout = (key) =>{
			//If this is the only key
			if (this.keyring.length==1 && this.keyring[0]===key)
				//Do nothing
				return;
			//If has been already scheduled
			if (this.scheduledKeys.has(key))
				//Not do it twice
				return;
			//Add it
			this.scheduledKeys.add(key);
			//Schedule key timeout of previous keys
			setTimeout(()=>{
				//Find key index
				const i = this.keyring.findIndex(k=>k===key);
				//Remove previous keys
				this.keyring = this.keyring.splice(i);
			}, KeyTimeout);
		};
	}
	
	async decrypt(type, ssrcId, header, encryptedFrame, skip)
	{
		let authTag, payload, extrabytes = 0, signature, signed;
		const prevAuthTags = [];
		
		//convert if needed
		if (!(encryptedFrame instanceof Uint8Array))
			encryptedFrame = new Uint8Array (encryptedFrame);

		// Replay attack protection
		if (header.counter < this.maxReceivedCounter && (this.maxReceivedCounter - header.counter) > ReplayWindow) {
			//Error
			throw new Error("Replay check failed, frame counter too old");
		}
		
		//Check if frame contains signature
		if (header.signature)
		{
			//Start from the end
			let end = encryptedFrame.byteLength;
			
			//Get lengths
			const singatureLength = ECDSAVerifyKey.getSignatureLen();
			const authTagLength   = _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type);
			
			//Get signature
			signature = encryptedFrame.subarray(end - singatureLength, end);
			//Move backward
			end -= singatureLength;
			
			//Get number of tags
			const num = encryptedFrame[end--];
			
			//Read all tags
			for (let i=0; i<num; ++i)
			{
				//Get previous tag
				const prevTag = encryptedFrame.subarray(end - authTagLength, end);
				//Move backward
				end -= authTagLength;
				//Add tag to previous tags in hex
				prevAuthTags.push(_Utils_js__WEBPACK_IMPORTED_MODULE_0__["Utils"].toHex(prevTag))
			}
			//Get the extra bytes
			extrabytes = encryptedFrame.byteLength - end;
			
			//Move backward to start oth current frame auth tag
			end -= authTagLength;
			
			//Get singed part
			signed = encryptedFrame.subarray(end, encryptedFrame.byteLength - singatureLength)
		}

		//For each key in key ring
		for (let i=0;i<this.keyring.length;++i)
		{
			//Get key from ring
			const key = this.keyring[i];
			try {
				//Try to decrypt payload
				[payload, authTag] = await key.decrypt(type, header, encryptedFrame, extrabytes, skip);
				//Done
				break;
			} catch(e) {
				
			}
		}

		//If not found yet
		if (!payload)
		{
			//Get last key
			const key = this.keyring[this.keyring.length-1];
			//Try ratchet last key
			for (let i = 0; i < MaxRatchetAttempts; ++i)
			{
				//Ratchet key
				const ratchetKey = await key.ratchet(i);
				try {
					//Try to decrypt payload
					[payload, authTag] = await ratchetKey.decrypt(type, header, encryptedFrame, extrabytes, skip);
					// Set working ratchet as new key
					this.keyring.push(ratchetKey);
					this.schedulePreviousKeysTimeout(ratchetKey);
					//Done
					break;
				} catch(e) {

				}
			}
		}

		//Last check
		if (!payload) {
			//Decryption failed
			if (this.keyFailing)  {
				throw new Error('decryptStillFailing')
			} else {
				this.keyFailing = true;
				throw new Error("decryptFailed");
			}
		}

		//If we are sending part of the frame in clear
		if (skip)
			//Copy skiped payload
			payload.set(encryptedFrame.subarray(0,skip),0);

		//Check if have received anything from this ssrc before
		if (!this.pending.has(ssrcId))
			//Add it
			this.pending.set(ssrcId,new Set());

		//Get pending list
		const pending = this.pending.get(ssrcId);

		//Check if it constains signatures
		if (header.signed)
		{
			//try to verify list
			if (!await this.verifyKey.verify(signed,signature))
				//Error
				throw new Error("Could not verify signature");
			//For each signed tag
			for (const tag in prevAuthTags)
				//Delete from pending to be verified tags
				pending.delete(tag);
		} else {
			//Push this tag to
			pending.add(_Utils_js__WEBPACK_IMPORTED_MODULE_0__["Utils"].toHex(authTag));
		}

		//Set authenticated sender id and frame Id
		payload.senderId = header.keyId;
		payload.frameId  = header.counter;

		// inform that decryption is working after previously failing
		if (this.keyFailing) {
			payload.decryptionRestored = true;
			this.keyFailing = false;
		}

		//Store last received counter
		this.maxReceivedCounter = Math.max(header.counter, this.maxReceivedCounter);

		//Return decrypted payload
		return payload;
	}

	async setVerifyKey(key)
	{
		//Create new singing key
		this.verifyKey = _EcdsaVerifyKey_js__WEBPACK_IMPORTED_MODULE_2__["EcdsaVerifyKey"].create(key);
	}

	async setEncryptionKey(raw)
	{
		//Create new encryption key
		const key = await _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__["AesCm128HmacSha256EncryptionKey"].create(raw);
		//Append to the keyring
		this.keyring.push(key);
		//Restart ratchet count number
		this.numKeyRatchets = 0;
		//Activate
		this.schedulePreviousKeysTimeout(key);
	}
};


/***/ }),

/***/ "./lib/Salts.js":
/*!**********************!*\\
  !*** ./lib/Salts.js ***!
  \\**********************/
/*! exports provided: Salts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Salts", function() { return Salts; });
const textEncoder = new TextEncoder()

const Salts =  {
	"SaltKey"		: textEncoder.encode("SFrameSaltKey"),
	"EncryptionKey"		: textEncoder.encode("SFrameEncryptionKey"),
	"AuthenticationKey"	: textEncoder.encode("SFrameAuthenticationKey"),
	"RatchetKey"		: textEncoder.encode("SFrameRatchetKey")
};


/***/ }),

/***/ "./lib/Sender.js":
/*!***********************!*\\
  !*** ./lib/Sender.js ***!
  \\***********************/
/*! exports provided: Sender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sender", function() { return Sender; });
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EcdsaSignKey.js */ "./lib/EcdsaSignKey.js");
/* harmony import */ var _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AesCm128HmacSha256EncryptionKey.js */ "./lib/AesCm128HmacSha256EncryptionKey.js");





const SigningFrameInterval = 10;

class Sender
{
	constructor(senderId)
	{
		//Check keyId
		_Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].checkKeyId(senderId);
		
		//The global frame counter
		this.counter = 0;
		
		//Store senderId/keyId
		this.senderId = senderId;
		
		//Pending frames for signing
		this.pending = new Map();
	}
	
	async encrypt(type, ssrcId, payload, skip)
	{
		//Check we have a valid key
		if (!this.key)
			throw Error("Encryption key not set");
		
		//convert if needed
		if (!(payload instanceof Uint8Array))
			payload = new Uint8Array (payload);
		
		//Encure int
		skip = skip ? skip : 0;
		
		//Get counter for frame
		const counter = this.counter++;
		
		//If we don't have the ssrc
		// TODO FIX https://github.com/medooze/sframe/issues/15 and uncomment line below
		// if (!this.pending.has(ssrcId))
		//Create new pending frames array
			this.pending.set(ssrcId,[]);
		
		//Get pending frames for signature
		const pending = this.pending.get(ssrcId);		
		
		//Do we need to sign the frames?
		const signing = this.signingKey && pending.length > SigningFrameInterval;
		
		//Get auth tag len for type
		const authTagLen = _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type);
		
		//Calculae extra bytes
		const extraBytes = signing ? pending.length * _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type) + 1 + _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__["EcdsaSignKey"].getSignatureLen() : 0;
		
		//Generate header
		const header = _Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].generate(signing,this.senderId,counter);
		
		//Encrypt frame
		const [encryptedFrame,authTag] = await this.key.encrypt(type, header, payload, extraBytes, skip);
		
		//If we are sending part of the frame in clear
		if (skip)
			//Copy skiped payload
			encryptedFrame.set(payload.subarray(0,skip),0);
		
		//If we need to sign the frame
		if (signing)
		{
			//Append after auth tag
			let ini = skip + encryptedFrame.byteLength - extraBytes;
			
			//Get tag list view
			const authTags = encryptedFrame.subarray(ini - authTagLen, (pending.length + 1) * authTagLen);
			
			//Add all previous tags 
			for (const previousTag of pending)
			{
				//Append to frame
				encryptedFrame.set(previousTag, ini);
				//Move
				ini += authTagLen;
			}
			
			//Add number of bytes
			encryptedFrame[ini++] = pending.length;
			
			//Create signature with all auth tags (including this frame's one)
			const signature = await this.signingKey.sign(authTags);
			
			//Add signature
			encryptedFrame.set(signature, ini);
			
			//Empty pending list 
			this.pending.set(ssrcId,[]);
			
		//If we can sign
		} else if (this.signingKey) {
			//Append a copy of current tag at the begining
			pending.unshift(authTag.slice());
		}
		
		//Set authenticated sender id and frame Id
		encryptedFrame.senderId = header.keyId;
		encryptedFrame.frameId  = header.counter;
		
		//Done
		return encryptedFrame;
	}
	
	async setSigningKey(key)
	{
		//Create new singing key
		this.signingKey = await _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__["EcdsaSignKey"].create(key);
	}
	
	async setEncryptionKey(key)
	{
		//Create new encryption key
		this.key = await _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].create(key);
	}
	
	async ratchetEncryptionKey()
	{
		//Check we have a valid key
		if (!this.key)
			throw Error("Encryption key not set");
		
		//Rachet the key and store it
		this.key = await this.key.ratchet();
	}
};


/***/ }),

/***/ "./lib/TaskQueue.js":
/*!**************************!*\\
  !*** ./lib/TaskQueue.js ***!
  \\**************************/
/*! exports provided: TaskQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return TaskQueue; });
class TaskQueue
{
	constructor()
	{
		this.tasks = [];
		this.running = false;
	}
	
	enqueue(promise,callback,error)
	{
		//enqueue task
		this.tasks.push({promise,callback,error});
		//Try run 
		this.run();
	}
	
	async run()
	{
		//If already running 
		if (this.running)
			//Nothing
			return;
		//Running
		this.running = true;
		//Run all pending tasks
		while(this.tasks.length)
		{
			try {
				//Wait for first promise to finish
				const result = await this.tasks[0].promise;
				//Run callback
				this.tasks[0].callback(result); 
			} catch(e) {
				//Run error callback
				this.tasks[0].error(e); 
			}
			//Remove task from queue
			this.tasks.shift();
		}
		//Ended
		this.running = false;
	}
}


/***/ }),

/***/ "./lib/Utils.js":
/*!**********************!*\\
  !*** ./lib/Utils.js ***!
  \\**********************/
/*! exports provided: Utils */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Utils", function() { return Utils; });
const Utils = 
{
	toHex : function(buffer)
	{
		return Array.prototype.map.call(buffer instanceof Uint8Array ? buffer : new Uint8Array (buffer), x =>x.toString(16).padStart(2,"0")).join("");
	},
	fromHex: function(str)
	{
		const bytes = [];
		for (let i=0;i<str.length/2;++i)
			bytes.push(parseInt(str.substring(i*2, (i+1)*2), 16));

		return new Uint8Array(bytes);
	},
	equals : function(a,b)
	{
		if (a.byteLength != b.byteLength) return false;
		for (let i = 0 ; i != a.byteLength ; i++)
			if (a[i] != b[i]) return false;
		return true;
	}
};


/***/ }),

/***/ "./lib/VP8PayloadHeader.js":
/*!*********************************!*\\
  !*** ./lib/VP8PayloadHeader.js ***!
  \\*********************************/
/*! exports provided: VP8PayloadHeader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VP8PayloadHeader", function() { return VP8PayloadHeader; });

const VP8PayloadHeader = {
	
	parse : function(buffer) 
	{
		//Check size
		if (buffer.byteLength<3)
			//Invalid
			return null;
		
		//Create uint view
		const view = new Uint8Array(buffer);
		
		//Read comon 3 bytes
		//   0 1 2 3 4 5 6 7
                //  +-+-+-+-+-+-+-+-+
                //  |Size0|H| VER |P|
                //  +-+-+-+-+-+-+-+-+
                //  |     Size1     |
                //  +-+-+-+-+-+-+-+-+
                //  |     Size2     |
                //  +-+-+-+-+-+-+-+-+
		const firstPartitionSize	= view[0] >> 5;
		const showFrame			= view[0] >> 4 & 0x01;
		const version			= view[0] >> 1 & 0x07;
		const isKeyFrame		= (view[0] & 0x01) == 0;

		//check if more
		if (isKeyFrame)
		{
			//Check size
			if (buffer.byteLength<10)
				//Invalid
				return null;
			//Get size in le
			const hor = view[7]<<8 | view[6];
			const ver = view[9]<<8 | view[8];
			//Get dimensions and scale
			const width		= hor & 0x3fff;
			const horizontalScale   = hor >> 14;
			const height		= ver & 0x3fff;
			const verticalScale	= ver >> 14;
			//Key frame
			return view.subarray (0,10);
		}
		
		//No key frame
		return view.subarray (0,3);
	}
};

		


/***/ }),

/***/ "./node_modules/lodash/_Symbol.js":
/*!****************************************!*\\
  !*** ./node_modules/lodash/_Symbol.js ***!
  \\****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");

/** Built-in value references. */
var Symbol = root.Symbol;

module.exports = Symbol;


/***/ }),

/***/ "./node_modules/lodash/_baseGetTag.js":
/*!********************************************!*\\
  !*** ./node_modules/lodash/_baseGetTag.js ***!
  \\********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js"),
    getRawTag = __webpack_require__(/*! ./_getRawTag */ "./node_modules/lodash/_getRawTag.js"),
    objectToString = __webpack_require__(/*! ./_objectToString */ "./node_modules/lodash/_objectToString.js");

/** \`Object#toString\` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * The base implementation of \`getTag\` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the \`toStringTag\`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

module.exports = baseGetTag;


/***/ }),

/***/ "./node_modules/lodash/_baseTrim.js":
/*!******************************************!*\\
  !*** ./node_modules/lodash/_baseTrim.js ***!
  \\******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var trimmedEndIndex = __webpack_require__(/*! ./_trimmedEndIndex */ "./node_modules/lodash/_trimmedEndIndex.js");

/** Used to match leading whitespace. */
var reTrimStart = /^\\s+/;

/**
 * The base implementation of \`_.trim\`.
 *
 * @private
 * @param {string} string The string to trim.
 * @returns {string} Returns the trimmed string.
 */
function baseTrim(string) {
  return string
    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')
    : string;
}

module.exports = baseTrim;


/***/ }),

/***/ "./node_modules/lodash/_freeGlobal.js":
/*!********************************************!*\\
  !*** ./node_modules/lodash/_freeGlobal.js ***!
  \\********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable \`global\` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

module.exports = freeGlobal;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/lodash/_getRawTag.js":
/*!*******************************************!*\\
  !*** ./node_modules/lodash/_getRawTag.js ***!
  \\*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [\`toStringTag\`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * A specialized version of \`baseGetTag\` which ignores \`Symbol.toStringTag\` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw \`toStringTag\`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
      tag = value[symToStringTag];

  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}

module.exports = getRawTag;


/***/ }),

/***/ "./node_modules/lodash/_objectToString.js":
/*!************************************************!*\\
  !*** ./node_modules/lodash/_objectToString.js ***!
  \\************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [\`toStringTag\`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/**
 * Converts \`value\` to a string using \`Object.prototype.toString\`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

module.exports = objectToString;


/***/ }),

/***/ "./node_modules/lodash/_root.js":
/*!**************************************!*\\
  !*** ./node_modules/lodash/_root.js ***!
  \\**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var freeGlobal = __webpack_require__(/*! ./_freeGlobal */ "./node_modules/lodash/_freeGlobal.js");

/** Detect free variable \`self\`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

module.exports = root;


/***/ }),

/***/ "./node_modules/lodash/_trimmedEndIndex.js":
/*!*************************************************!*\\
  !*** ./node_modules/lodash/_trimmedEndIndex.js ***!
  \\*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/** Used to match a single whitespace character. */
var reWhitespace = /\\s/;

/**
 * Used by \`_.trim\` and \`_.trimEnd\` to get the index of the last non-whitespace
 * character of \`string\`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the last non-whitespace character.
 */
function trimmedEndIndex(string) {
  var index = string.length;

  while (index-- && reWhitespace.test(string.charAt(index))) {}
  return index;
}

module.exports = trimmedEndIndex;


/***/ }),

/***/ "./node_modules/lodash/debounce.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/debounce.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),
    now = __webpack_require__(/*! ./now */ "./node_modules/lodash/now.js"),
    toNumber = __webpack_require__(/*! ./toNumber */ "./node_modules/lodash/toNumber.js");

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Built-in method references for those with the same name as other \`lodash\` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Creates a debounced function that delays invoking \`func\` until after \`wait\`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a \`cancel\` method to cancel
 * delayed \`func\` invocations and a \`flush\` method to immediately invoke them.
 * Provide \`options\` to indicate whether \`func\` should be invoked on the
 * leading and/or trailing edge of the \`wait\` timeout. The \`func\` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last \`func\`
 * invocation.
 *
 * **Note:** If \`leading\` and \`trailing\` options are \`true\`, \`func\` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the \`wait\` timeout.
 *
 * If \`wait\` is \`0\` and \`leading\` is \`false\`, \`func\` invocation is deferred
 * until to the next tick, similar to \`setTimeout\` with a timeout of \`0\`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between \`_.debounce\` and \`_.throttle\`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time \`func\` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke \`sendMail\` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure \`batchLog\` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any \`maxWait\` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        timeWaiting = wait - timeSinceLastCall;

    return maxing
      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
      : timeWaiting;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the \`maxWait\` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have \`lastArgs\` which means \`func\` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        clearTimeout(timerId);
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

module.exports = debounce;


/***/ }),

/***/ "./node_modules/lodash/isObject.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/isObject.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Checks if \`value\` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of \`Object\`. (e.g. arrays, functions, objects, regexes, \`new Number(0)\`, and \`new String('')\`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is an object, else \`false\`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

module.exports = isObject;


/***/ }),

/***/ "./node_modules/lodash/isObjectLike.js":
/*!*********************************************!*\\
  !*** ./node_modules/lodash/isObjectLike.js ***!
  \\*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Checks if \`value\` is object-like. A value is object-like if it's not \`null\`
 * and has a \`typeof\` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is object-like, else \`false\`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

module.exports = isObjectLike;


/***/ }),

/***/ "./node_modules/lodash/isSymbol.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/isSymbol.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__(/*! ./_baseGetTag */ "./node_modules/lodash/_baseGetTag.js"),
    isObjectLike = __webpack_require__(/*! ./isObjectLike */ "./node_modules/lodash/isObjectLike.js");

/** \`Object#toString\` result references. */
var symbolTag = '[object Symbol]';

/**
 * Checks if \`value\` is classified as a \`Symbol\` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is a symbol, else \`false\`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && baseGetTag(value) == symbolTag);
}

module.exports = isSymbol;


/***/ }),

/***/ "./node_modules/lodash/now.js":
/*!************************************!*\\
  !*** ./node_modules/lodash/now.js ***!
  \\************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

module.exports = now;


/***/ }),

/***/ "./node_modules/lodash/toNumber.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/toNumber.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var baseTrim = __webpack_require__(/*! ./_baseTrim */ "./node_modules/lodash/_baseTrim.js"),
    isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),
    isSymbol = __webpack_require__(/*! ./isSymbol */ "./node_modules/lodash/isSymbol.js");

/** Used as references for various \`Number\` constants. */
var NAN = 0 / 0;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on \`root\`. */
var freeParseInt = parseInt;

/**
 * Converts \`value\` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = baseTrim(value);
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = toNumber;


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\\
  !*** (webpack)/buildin/global.js ***!
  \\***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ })

/******/ });
`,"Worker",void 0,void 0)}},"./index.js":function(nt,rt,it){it.r(rt);var ot=it("./lib/Utils.js");it.d(rt,"Utils",function(){return ot.Utils});var st=it("./Client.js");it.d(rt,"SFrame",function(){return st.SFrame})},"./lib/Utils.js":function(nt,rt,it){it.r(rt),it.d(rt,"Utils",function(){return ot});const ot={toHex:function(st){return Array.prototype.map.call(st instanceof Uint8Array?st:new Uint8Array(st),at=>at.toString(16).padStart(2,"0")).join("")},fromHex:function(st){const at=[];for(let ct=0;ct<st.length/2;++ct)at.push(parseInt(st.substring(ct*2,(ct+1)*2),16));return new Uint8Array(at)},equals:function(st,at){if(st.byteLength!=at.byteLength)return!1;for(let ct=0;ct!=st.byteLength;ct++)if(st[ct]!=at[ct])return!1;return!0}}},"./node_modules/worker-loader/dist/runtime/inline.js":function(nt,rt,it){nt.exports=function(ot,st,at,ct){var ut=self||window;try{try{var lt;try{lt=new ut.Blob([ot])}catch{var dt=ut.BlobBuilder||ut.WebKitBlobBuilder||ut.MozBlobBuilder||ut.MSBlobBuilder;lt=new dt,lt.append(ot),lt=lt.getBlob()}var ft=ut.URL||ut.webkitURL,St=ft.createObjectURL(lt),Tt=new ut[st](St,at);return ft.revokeObjectURL(St),Tt}catch{return new ut[st]("data:application/javascript,".concat(encodeURIComponent(ot)),at)}}catch{if(!ct)throw Error("Inline worker is not supported");return new ut[st](ct,at)}}}})})}).call(this,b(0))},function(_e,et,b){const tt=b(6),nt=b(301),rt=b(71)(),it=b(766),ot=b(28);let st=function(){function at(ut,lt){lt===void 0&&(lt={}),this._session=ut,this.PeerConnection=lt.PeerConnection||rt,this._subscriberCreateQueue=new it,this._originalSendMessages={},this._tracks=[],this._subscriberPcs={},this._sendMessage=()=>{},tt(this)}var ct=at.prototype;return ct.parseOptions=function(lt){return Object.assign({},lt,{removeUnusedCodecs:!0,sendMessage:(dt,ft)=>this.trigger("sendMessage",dt,ft)})},ct.addTrackAddedListener=function(){this._peerConnection&&this._peerConnection.on("trackAdded",lt=>{const dt=lt.track;this._tracks.includes(dt.id)||(this._subscriberPcs[this._subscriberPcToAdd._id].push(dt.id),this._tracks.push(dt.id),this._subscriberPcToAdd._onTrackAdded(lt))})},ct.getPeerConnection=function(lt,dt){if(this._subscriberPcToAdd=dt,this._sendMessage=lt.sendMessage,this._originalSendMessages[dt._id]=this._sendMessage,this._peerConnection)this._peerConnection.addOptions(lt);else{this._firstSubscriberPc=dt._id,this.on("sendMessage",(St,Tt)=>{this._sendMessage(St,Tt)});const ft=this.parseOptions(lt);this._peerConnection=new this.PeerConnection(ft),this.addTrackAddedListener()}return this._subscriberPcs[dt._id]=[],this._peerConnection},ct.removeMessageSender=function(lt){delete this._originalSendMessages[lt];const dt=Object.values(this._originalSendMessages);this._sendMessage=dt[dt.length-1]||function(){}},ct.removeSubscriber=function(lt,dt){this.removeMessageSender(lt),this._peerConnection.stopTransceivers(dt)},ct.removeFromSinglePeerConnection=function(lt){if(this._firstSubscriberPc===lt)this._peerConnection.iceRestart(),this._peerConnection.generateOfferAndSend();else{const dt=ft=>{this.cachedSdp=ot.updateSDPWithNewOffer(this.cachedSdp,ft.sdp);const St=ot.createSDP(this.cachedSdp.headers,this.cachedSdp.trackSections);this._peerConnection.processMessage("answer",{content:{sdp:St}})};this._peerConnection.generateOfferAndAnswer(dt)}delete this._subscriberPcs[lt],Object.keys(this._subscriberPcs).length||(this._peerConnection.disconnect(),this._peerConnection=null)},ct.removeTrack=function(lt,dt){nt(this._tracks,lt.id),nt(this._subscriberPcs[dt]||[],lt.id)},ct.destroy=function(){this._subscriberPcToAdd=null,this._subscriberPcs=null,this._session=null,this._tracks=null,this._peerConnection&&(this._peerConnection.disconnect(),this._peerConnection=null)},ct.addSubscriber=function(lt){this._subscriberCreateQueue.add(lt)},ct.subscriberComplete=function(){this._subscriberCreateQueue.next()},ct.cacheOfferAnswer=function(lt){this.cachedSdp=ot.parseSDP(lt)},at}();_e.exports=st},function(_e,et,b){let tt=function(){function nt(){this.queue=[],this.isAddingSubscriber=!1}var rt=nt.prototype;return rt.add=function(ot){this.isAddingSubscriber?this.queue.push(ot):(this.isAddingSubscriber=!0,ot())},rt.next=function(){const ot=this.queue.shift();ot?ot():this.isAddingSubscriber=!1},nt}();_e.exports=tt},function(_e,et,b){_e.exports=function(nt){nt===void 0&&(nt={});const rt=nt.Session||b(320)(),it=nt.sessionObjects||b(21);return function(st,at,ct){at==null&&(at=st,st=null),Array.isArray(at)&&at.length===1&&(at=at[0]);let ut=it.sessions.get(at);return ut||(ut=new rt(st,at,ct),it.sessions.add(ut)),ut}}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=b(769),ot=b(273),st=b(2),at=b(7),ct=b(10),ut=b(13)(),lt=b(28),dt=b(72),ft=b(143)(typeof window!==void 0?window:commonjsGlobal);function St(pt){return ot(it(pt,["AV1X","AV1","VP9","rtx","red","ulpfec","H265","X-H264UC","x-ulpfecuc"]))}const Tt=function(){var pt=(0,rt.default)(nt.default.mark(function gt(){var yt,Et,It,Gt,Wt,At,kt;return nt.default.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(!(typeof window>"u")){Nt.next=2;break}return Nt.abrupt("return",{videoEncoders:[],videoDecoders:[]});case 2:if(yt=ft.RTCPeerConnection,!(window.RTCRtpSender&&"getCapabilities"in window.RTCRtpSender)){Nt.next=7;break}return Et=window.RTCRtpSender.getCapabilities("video").codecs.map(tn=>tn.mimeType||tn.name).map(tn=>tn.replace("video/","")),Et=St(Et),Nt.abrupt("return",{videoEncoders:Et,videoDecoders:Et});case 7:if(!(st.name==="Chrome"&&!("captureStream"in window.HTMLCanvasElement.prototype))){Nt.next=9;break}return Nt.abrupt("return",{videoEncoders:["VP8"],videoDecoders:["VP8"]});case 9:if(!st.isLegacyEdge){Nt.next=11;break}return Nt.abrupt("return",{videoEncoders:["H264","VP8"],videoDecoders:["H264","VP8"]});case 11:return It=window.document.createElement("canvas"),It.getContext("2d"),Gt=It.captureStream(),Nt.prev=14,At={iceServers:[]},dt()&&(At.sdpSemantics="plan-b"),Wt=new yt(At),Wt.addTrack?Wt.addTrack(Gt.getVideoTracks()[0],Gt):Wt.addStream&&Wt.addStream(Gt),Nt.next=21,Wt.createOffer();case 21:return kt=Nt.sent,Et=lt.getCodecs(kt.sdp,"video")||[],Et=St(Et),Nt.abrupt("return",{videoEncoders:Et,videoDecoders:Et});case 27:throw Nt.prev=27,Nt.t0=Nt.catch(14),ut(at.UNABLE_TO_ACCESS_MEDIA_ENGINE,new Error("OT.getSupportedCodecs was not able to get the list of supported codecs"),ct.UNABLE_TO_ACCESS_MEDIA_ENGINE);case 30:return Nt.prev=30,Wt.close(),Nt.finish(30);case 33:case"end":return Nt.stop()}},gt,null,[[14,27,30,33]])}));return function(){return pt.apply(this,arguments)}}();_e.exports=Tt},function(_e,et,b){var tt=b(770),nt=b(237),rt=b(87),it=b(131),ot=rt(function(st,at){return it(st)?tt(st,nt(at,1,it,!0)):[]});_e.exports=ot},function(_e,et,b){var tt=b(92),nt=b(93),rt=b(130),it=b(33),ot=b(66),st=b(94),at=200;function ct(ut,lt,dt,ft){var St=-1,Tt=nt,pt=!0,gt=ut.length,yt=[],Et=lt.length;if(!gt)return yt;dt&&(lt=it(lt,ot(dt))),ft?(Tt=rt,pt=!1):lt.length>=at&&(Tt=st,pt=!1,lt=new tt(lt));e:for(;++St<gt;){var It=ut[St],Gt=dt==null?It:dt(It);if(It=ft||It!==0?It:0,pt&&Gt===Gt){for(var Wt=Et;Wt--;)if(lt[Wt]===Gt)continue e;yt.push(It)}else Tt(lt,Gt,ft)||yt.push(It)}return yt}_e.exports=ct},function(_e,et,b){const tt=b(316),nt=tt.isSupported;_e.exports=nt},function(_e,et,b){const tt=b(110);_e.exports=tt},function(_e,et,b){const tt=b(24)(),nt=tt.getInputMediaDevices;_e.exports=function(it){nt().then(ot=>it(void 0,ot),it)}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));_e.exports=function(it){it===void 0&&(it={});const ot=it.deviceHelpers||b(24)(),st=ot.hasAudioOutputApiSupport,at=ot.hasDevice,ct=it.getAudioOutputDevices||b(332),ut=it.updateSubscribersSinkId||b(334),lt=b(13)(),dt=b(7);return function(){var St=(0,rt.default)(nt.default.mark(function Tt(pt){var gt,yt;return nt.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(st()){It.next=2;break}throw lt(dt.UNSUPPORTED_BROWSER,new Error("setAudioOutputDevice is not supported in your browser."));case 2:return It.next=4,ct();case 4:if(gt=It.sent,yt=at(gt,pt),yt){It.next=8;break}throw lt(dt.INVALID_AUDIO_OUTPUT_SOURCE,new Error("The requested device is not valid."));case 8:return It.prev=8,It.next=11,ut(pt);case 11:It.next=16;break;case 13:throw It.prev=13,It.t0=It.catch(8),lt(dt.REQUESTED_DEVICE_PERMISSION_DENIED,new Error("No permission to use the requested device."));case 16:case"end":return It.stop()}},Tt,null,[[8,13]])}));return function(pt){return St.apply(this,arguments)}}()}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));const it=b(776)(),ot=b(24)(),st=ot.hasAudioOutputApiSupport,at=ot.getNativeMediaDevices;_e.exports=()=>{if(st()){const ct=at();let ut=!1;ct.addEventListener("devicechange",(0,rt.default)(nt.default.mark(function lt(){return nt.default.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(!ut){ft.next=2;break}return ft.abrupt("return");case 2:return ut=!0,ft.next=5,it();case 5:ut=!1;case 6:case"end":return ft.stop()}},lt)})))}}},function(_e,et,b){var tt=b(3),nt=tt(b(4)),rt=tt(b(5));_e.exports=function(it){it===void 0&&(it={});const ot=it.deviceHelpers||b(24)(),st=ot.getAudioOutputMediaDevices,at=ot.getDefaultAudioOutputDeviceId,ct=ot.hasDevice,ut=it.currentAudioOutputDevice||b(106),lt=ut.getCurrentAudioOutputDeviceId,dt=ut.setCurrentAudioOutputDeviceId,ft=it.updateSubscribersSinkId||b(334),St=it.logging||b(1)("currentAudioOutputDevice");return function(){var pt=(0,rt.default)(nt.default.mark(function gt(){var yt,Et,It;return nt.default.wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return Wt.next=2,st();case 2:if(yt=Wt.sent,yt.length!==0){Wt.next=6;break}return dt(""),Wt.abrupt("return");case 6:if(Et=ct(yt,lt()),!Et){Wt.next=9;break}return Wt.abrupt("return");case 9:return It=at(yt),dt(It),Wt.prev=11,Wt.next=14,ft(It);case 14:Wt.next=19;break;case 16:Wt.prev=16,Wt.t0=Wt.catch(11),St.debug("Failed to set the default audio output device.",Wt.t0);case 19:case"end":return Wt.stop()}},gt,null,[[11,16]])}));return function(){return pt.apply(this,arguments)}}()}}])})})(opentok);const OT$1=getDefaultExportFromCjs(opentokExports),baseURL="https://opentok-node.onrender.com",addMember=async _e=>{try{if(!(await fetch(`${baseURL}/add-member`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({member:_e})})).ok)throw Error("error while adding a member")}catch(et){throw et}},getMembers=async()=>{try{const _e=await fetch(`${baseURL}/get-members`);if(!_e.ok)throw Error("error while retrieving members");return _e.json()}catch(_e){throw _e}},removeMember=async _e=>{try{if(!(await fetch(`${baseURL}/remove-member`,{headers:{"Content-Type":"application/json"},method:"DELETE",body:JSON.stringify({member:_e})})).ok)throw Error("error while removing member")}catch(et){throw et}},apiKey="45828062",sessionId="1_MX40NTgyODA2Mn5-MTY4NDkzNDA3Nzg4NH55dUV1TlJSOGZGUWw3bkg5d0QwUWFQS1J-UH5-",token="T1==cGFydG5lcl9pZD00NTgyODA2MiZzaWc9YTMzMWUwOGZkZTY0MTIxMjM3ZjJjNGQ0MTdkOGE4Y2VjMTdkYWUxYzpzZXNzaW9uX2lkPTFfTVg0ME5UZ3lPREEyTW41LU1UWTRORGt6TkRBM056ZzROSDU1ZFVWMVRsSlNPR1pHVVd3M2JrZzVkMFF3VVdGUVMxSi1VSDUtJmNyZWF0ZV90aW1lPTE2ODQ5MzgxNjImbm9uY2U9MC40MDU5MTk4MjQ3NzM1MzA5NSZyb2xlPXB1Ymxpc2hlciZleHBpcmVfdGltZT0xNjg1MDI0NTYy";function createPublisherListernerMap(){return createMapFor(["accessAllowed","accessDenied","accessDialogClosed","accessDialogOpened","destroyed","mediaStopped","muteForced","streamCreated","streamDestroyed","videoDimensionsChanged","videoElementCreated"],"publisher")}function createSubscriberListenerMap(){return createMapFor(["connected","captionReceived","destroyed","disconnected","encryptionSecretMismatch","encryptionSecretMatch","videoDisabled","videoDimensionsChanged","videoDisabled","videoDisableWarning","videoDisableWarningLifted","videoElementCreated","videoEnabled"],"subscriber")}function createSessionListenersMap(){return createMapFor(["archiveStarted","archiveStopped","connectionCreated","connectionDestroyed","sessionDisconnected","sessionConnected","sessionReconnected","sessionReconnecting","signal","streamCreated","streamDestroyed","streamPropertyChanged","muteForced"],"session")}function createMapFor(_e,et){return _e.reduce((b,tt)=>({...b,[tt]:()=>console.log(`triggered from ${et}: ${tt}`)}),{})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$1=window,e$2=t$1.ShadowRoot&&(t$1.ShadyCSS===void 0||t$1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$3=Symbol(),n$3=new WeakMap;let o$3=class{constructor(et,b,tt){if(this._$cssResult$=!0,tt!==s$3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=et,this.t=b}get styleSheet(){let et=this.o;const b=this.t;if(e$2&&et===void 0){const tt=b!==void 0&&b.length===1;tt&&(et=n$3.get(b)),et===void 0&&((this.o=et=new CSSStyleSheet).replaceSync(this.cssText),tt&&n$3.set(b,et))}return et}toString(){return this.cssText}};const r$2=_e=>new o$3(typeof _e=="string"?_e:_e+"",void 0,s$3),i$1=(_e,...et)=>{const b=_e.length===1?_e[0]:et.reduce((tt,nt,rt)=>tt+(it=>{if(it._$cssResult$===!0)return it.cssText;if(typeof it=="number")return it;throw Error("Value passed to 'css' function must be a 'css' function result: "+it+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(nt)+_e[rt+1],_e[0]);return new o$3(b,_e,s$3)},S$1=(_e,et)=>{e$2?_e.adoptedStyleSheets=et.map(b=>b instanceof CSSStyleSheet?b:b.styleSheet):et.forEach(b=>{const tt=document.createElement("style"),nt=t$1.litNonce;nt!==void 0&&tt.setAttribute("nonce",nt),tt.textContent=b.cssText,_e.appendChild(tt)})},c$1=e$2?_e=>_e:_e=>_e instanceof CSSStyleSheet?(et=>{let b="";for(const tt of et.cssRules)b+=tt.cssText;return r$2(b)})(_e):_e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$2;const e$1=window,r$1=e$1.trustedTypes,h$1=r$1?r$1.emptyScript:"",o$2=e$1.reactiveElementPolyfillSupport,n$2={toAttribute(_e,et){switch(et){case Boolean:_e=_e?h$1:null;break;case Object:case Array:_e=_e==null?_e:JSON.stringify(_e)}return _e},fromAttribute(_e,et){let b=_e;switch(et){case Boolean:b=_e!==null;break;case Number:b=_e===null?null:Number(_e);break;case Object:case Array:try{b=JSON.parse(_e)}catch{b=null}}return b}},a$1=(_e,et)=>et!==_e&&(et==et||_e==_e),l$2={attribute:!0,type:String,converter:n$2,reflect:!1,hasChanged:a$1};let d$1=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(et){var b;this.finalize(),((b=this.h)!==null&&b!==void 0?b:this.h=[]).push(et)}static get observedAttributes(){this.finalize();const et=[];return this.elementProperties.forEach((b,tt)=>{const nt=this._$Ep(tt,b);nt!==void 0&&(this._$Ev.set(nt,tt),et.push(nt))}),et}static createProperty(et,b=l$2){if(b.state&&(b.attribute=!1),this.finalize(),this.elementProperties.set(et,b),!b.noAccessor&&!this.prototype.hasOwnProperty(et)){const tt=typeof et=="symbol"?Symbol():"__"+et,nt=this.getPropertyDescriptor(et,tt,b);nt!==void 0&&Object.defineProperty(this.prototype,et,nt)}}static getPropertyDescriptor(et,b,tt){return{get(){return this[b]},set(nt){const rt=this[et];this[b]=nt,this.requestUpdate(et,rt,tt)},configurable:!0,enumerable:!0}}static getPropertyOptions(et){return this.elementProperties.get(et)||l$2}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const et=Object.getPrototypeOf(this);if(et.finalize(),et.h!==void 0&&(this.h=[...et.h]),this.elementProperties=new Map(et.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const b=this.properties,tt=[...Object.getOwnPropertyNames(b),...Object.getOwnPropertySymbols(b)];for(const nt of tt)this.createProperty(nt,b[nt])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(et){const b=[];if(Array.isArray(et)){const tt=new Set(et.flat(1/0).reverse());for(const nt of tt)b.unshift(c$1(nt))}else et!==void 0&&b.push(c$1(et));return b}static _$Ep(et,b){const tt=b.attribute;return tt===!1?void 0:typeof tt=="string"?tt:typeof et=="string"?et.toLowerCase():void 0}u(){var et;this._$E_=new Promise(b=>this.enableUpdating=b),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(et=this.constructor.h)===null||et===void 0||et.forEach(b=>b(this))}addController(et){var b,tt;((b=this._$ES)!==null&&b!==void 0?b:this._$ES=[]).push(et),this.renderRoot!==void 0&&this.isConnected&&((tt=et.hostConnected)===null||tt===void 0||tt.call(et))}removeController(et){var b;(b=this._$ES)===null||b===void 0||b.splice(this._$ES.indexOf(et)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((et,b)=>{this.hasOwnProperty(b)&&(this._$Ei.set(b,this[b]),delete this[b])})}createRenderRoot(){var et;const b=(et=this.shadowRoot)!==null&&et!==void 0?et:this.attachShadow(this.constructor.shadowRootOptions);return S$1(b,this.constructor.elementStyles),b}connectedCallback(){var et;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(et=this._$ES)===null||et===void 0||et.forEach(b=>{var tt;return(tt=b.hostConnected)===null||tt===void 0?void 0:tt.call(b)})}enableUpdating(et){}disconnectedCallback(){var et;(et=this._$ES)===null||et===void 0||et.forEach(b=>{var tt;return(tt=b.hostDisconnected)===null||tt===void 0?void 0:tt.call(b)})}attributeChangedCallback(et,b,tt){this._$AK(et,tt)}_$EO(et,b,tt=l$2){var nt;const rt=this.constructor._$Ep(et,tt);if(rt!==void 0&&tt.reflect===!0){const it=(((nt=tt.converter)===null||nt===void 0?void 0:nt.toAttribute)!==void 0?tt.converter:n$2).toAttribute(b,tt.type);this._$El=et,it==null?this.removeAttribute(rt):this.setAttribute(rt,it),this._$El=null}}_$AK(et,b){var tt;const nt=this.constructor,rt=nt._$Ev.get(et);if(rt!==void 0&&this._$El!==rt){const it=nt.getPropertyOptions(rt),ot=typeof it.converter=="function"?{fromAttribute:it.converter}:((tt=it.converter)===null||tt===void 0?void 0:tt.fromAttribute)!==void 0?it.converter:n$2;this._$El=rt,this[rt]=ot.fromAttribute(b,it.type),this._$El=null}}requestUpdate(et,b,tt){let nt=!0;et!==void 0&&(((tt=tt||this.constructor.getPropertyOptions(et)).hasChanged||a$1)(this[et],b)?(this._$AL.has(et)||this._$AL.set(et,b),tt.reflect===!0&&this._$El!==et&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(et,tt))):nt=!1),!this.isUpdatePending&&nt&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(b){Promise.reject(b)}const et=this.scheduleUpdate();return et!=null&&await et,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var et;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((nt,rt)=>this[rt]=nt),this._$Ei=void 0);let b=!1;const tt=this._$AL;try{b=this.shouldUpdate(tt),b?(this.willUpdate(tt),(et=this._$ES)===null||et===void 0||et.forEach(nt=>{var rt;return(rt=nt.hostUpdate)===null||rt===void 0?void 0:rt.call(nt)}),this.update(tt)):this._$Ek()}catch(nt){throw b=!1,this._$Ek(),nt}b&&this._$AE(tt)}willUpdate(et){}_$AE(et){var b;(b=this._$ES)===null||b===void 0||b.forEach(tt=>{var nt;return(nt=tt.hostUpdated)===null||nt===void 0?void 0:nt.call(tt)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(et)),this.updated(et)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(et){return!0}update(et){this._$EC!==void 0&&(this._$EC.forEach((b,tt)=>this._$EO(tt,this[tt],b)),this._$EC=void 0),this._$Ek()}updated(et){}firstUpdated(et){}};d$1.finalized=!0,d$1.elementProperties=new Map,d$1.elementStyles=[],d$1.shadowRootOptions={mode:"open"},o$2==null||o$2({ReactiveElement:d$1}),((s$2=e$1.reactiveElementVersions)!==null&&s$2!==void 0?s$2:e$1.reactiveElementVersions=[]).push("1.6.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t;const i=window,s$1=i.trustedTypes,e=s$1?s$1.createPolicy("lit-html",{createHTML:_e=>_e}):void 0,o$1="$lit$",n$1=`lit$${(Math.random()+"").slice(9)}$`,l$1="?"+n$1,h=`<${l$1}>`,r=document,d=()=>r.createComment(""),u=_e=>_e===null||typeof _e!="object"&&typeof _e!="function",c=Array.isArray,v=_e=>c(_e)||typeof(_e==null?void 0:_e[Symbol.iterator])=="function",a=`[ 	
\f\r]`,f=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${a}(?:([^\\s"'>=/]+)(${a}*=${a}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),g=/'/g,$=/"/g,y=/^(?:script|style|textarea|title)$/i,w=_e=>(et,...b)=>({_$litType$:_e,strings:et,values:b}),x=w(1),T=Symbol.for("lit-noChange"),A=Symbol.for("lit-nothing"),E=new WeakMap,C=r.createTreeWalker(r,129,null,!1),P=(_e,et)=>{const b=_e.length-1,tt=[];let nt,rt=et===2?"<svg>":"",it=f;for(let st=0;st<b;st++){const at=_e[st];let ct,ut,lt=-1,dt=0;for(;dt<at.length&&(it.lastIndex=dt,ut=it.exec(at),ut!==null);)dt=it.lastIndex,it===f?ut[1]==="!--"?it=_:ut[1]!==void 0?it=m:ut[2]!==void 0?(y.test(ut[2])&&(nt=RegExp("</"+ut[2],"g")),it=p):ut[3]!==void 0&&(it=p):it===p?ut[0]===">"?(it=nt??f,lt=-1):ut[1]===void 0?lt=-2:(lt=it.lastIndex-ut[2].length,ct=ut[1],it=ut[3]===void 0?p:ut[3]==='"'?$:g):it===$||it===g?it=p:it===_||it===m?it=f:(it=p,nt=void 0);const ft=it===p&&_e[st+1].startsWith("/>")?" ":"";rt+=it===f?at+h:lt>=0?(tt.push(ct),at.slice(0,lt)+o$1+at.slice(lt)+n$1+ft):at+n$1+(lt===-2?(tt.push(void 0),st):ft)}const ot=rt+(_e[b]||"<?>")+(et===2?"</svg>":"");if(!Array.isArray(_e)||!_e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e!==void 0?e.createHTML(ot):ot,tt]};class V{constructor({strings:et,_$litType$:b},tt){let nt;this.parts=[];let rt=0,it=0;const ot=et.length-1,st=this.parts,[at,ct]=P(et,b);if(this.el=V.createElement(at,tt),C.currentNode=this.el.content,b===2){const ut=this.el.content,lt=ut.firstChild;lt.remove(),ut.append(...lt.childNodes)}for(;(nt=C.nextNode())!==null&&st.length<ot;){if(nt.nodeType===1){if(nt.hasAttributes()){const ut=[];for(const lt of nt.getAttributeNames())if(lt.endsWith(o$1)||lt.startsWith(n$1)){const dt=ct[it++];if(ut.push(lt),dt!==void 0){const ft=nt.getAttribute(dt.toLowerCase()+o$1).split(n$1),St=/([.?@])?(.*)/.exec(dt);st.push({type:1,index:rt,name:St[2],strings:ft,ctor:St[1]==="."?k:St[1]==="?"?I:St[1]==="@"?L:R})}else st.push({type:6,index:rt})}for(const lt of ut)nt.removeAttribute(lt)}if(y.test(nt.tagName)){const ut=nt.textContent.split(n$1),lt=ut.length-1;if(lt>0){nt.textContent=s$1?s$1.emptyScript:"";for(let dt=0;dt<lt;dt++)nt.append(ut[dt],d()),C.nextNode(),st.push({type:2,index:++rt});nt.append(ut[lt],d())}}}else if(nt.nodeType===8)if(nt.data===l$1)st.push({type:2,index:rt});else{let ut=-1;for(;(ut=nt.data.indexOf(n$1,ut+1))!==-1;)st.push({type:7,index:rt}),ut+=n$1.length-1}rt++}}static createElement(et,b){const tt=r.createElement("template");return tt.innerHTML=et,tt}}function N(_e,et,b=_e,tt){var nt,rt,it,ot;if(et===T)return et;let st=tt!==void 0?(nt=b._$Co)===null||nt===void 0?void 0:nt[tt]:b._$Cl;const at=u(et)?void 0:et._$litDirective$;return(st==null?void 0:st.constructor)!==at&&((rt=st==null?void 0:st._$AO)===null||rt===void 0||rt.call(st,!1),at===void 0?st=void 0:(st=new at(_e),st._$AT(_e,b,tt)),tt!==void 0?((it=(ot=b)._$Co)!==null&&it!==void 0?it:ot._$Co=[])[tt]=st:b._$Cl=st),st!==void 0&&(et=N(_e,st._$AS(_e,et.values),st,tt)),et}class S{constructor(et,b){this._$AV=[],this._$AN=void 0,this._$AD=et,this._$AM=b}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(et){var b;const{el:{content:tt},parts:nt}=this._$AD,rt=((b=et==null?void 0:et.creationScope)!==null&&b!==void 0?b:r).importNode(tt,!0);C.currentNode=rt;let it=C.nextNode(),ot=0,st=0,at=nt[0];for(;at!==void 0;){if(ot===at.index){let ct;at.type===2?ct=new M(it,it.nextSibling,this,et):at.type===1?ct=new at.ctor(it,at.name,at.strings,this,et):at.type===6&&(ct=new z(it,this,et)),this._$AV.push(ct),at=nt[++st]}ot!==(at==null?void 0:at.index)&&(it=C.nextNode(),ot++)}return rt}v(et){let b=0;for(const tt of this._$AV)tt!==void 0&&(tt.strings!==void 0?(tt._$AI(et,tt,b),b+=tt.strings.length-2):tt._$AI(et[b])),b++}}class M{constructor(et,b,tt,nt){var rt;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=et,this._$AB=b,this._$AM=tt,this.options=nt,this._$Cp=(rt=nt==null?void 0:nt.isConnected)===null||rt===void 0||rt}get _$AU(){var et,b;return(b=(et=this._$AM)===null||et===void 0?void 0:et._$AU)!==null&&b!==void 0?b:this._$Cp}get parentNode(){let et=this._$AA.parentNode;const b=this._$AM;return b!==void 0&&(et==null?void 0:et.nodeType)===11&&(et=b.parentNode),et}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(et,b=this){et=N(this,et,b),u(et)?et===A||et==null||et===""?(this._$AH!==A&&this._$AR(),this._$AH=A):et!==this._$AH&&et!==T&&this._(et):et._$litType$!==void 0?this.g(et):et.nodeType!==void 0?this.$(et):v(et)?this.T(et):this._(et)}k(et){return this._$AA.parentNode.insertBefore(et,this._$AB)}$(et){this._$AH!==et&&(this._$AR(),this._$AH=this.k(et))}_(et){this._$AH!==A&&u(this._$AH)?this._$AA.nextSibling.data=et:this.$(r.createTextNode(et)),this._$AH=et}g(et){var b;const{values:tt,_$litType$:nt}=et,rt=typeof nt=="number"?this._$AC(et):(nt.el===void 0&&(nt.el=V.createElement(nt.h,this.options)),nt);if(((b=this._$AH)===null||b===void 0?void 0:b._$AD)===rt)this._$AH.v(tt);else{const it=new S(rt,this),ot=it.u(this.options);it.v(tt),this.$(ot),this._$AH=it}}_$AC(et){let b=E.get(et.strings);return b===void 0&&E.set(et.strings,b=new V(et)),b}T(et){c(this._$AH)||(this._$AH=[],this._$AR());const b=this._$AH;let tt,nt=0;for(const rt of et)nt===b.length?b.push(tt=new M(this.k(d()),this.k(d()),this,this.options)):tt=b[nt],tt._$AI(rt),nt++;nt<b.length&&(this._$AR(tt&&tt._$AB.nextSibling,nt),b.length=nt)}_$AR(et=this._$AA.nextSibling,b){var tt;for((tt=this._$AP)===null||tt===void 0||tt.call(this,!1,!0,b);et&&et!==this._$AB;){const nt=et.nextSibling;et.remove(),et=nt}}setConnected(et){var b;this._$AM===void 0&&(this._$Cp=et,(b=this._$AP)===null||b===void 0||b.call(this,et))}}class R{constructor(et,b,tt,nt,rt){this.type=1,this._$AH=A,this._$AN=void 0,this.element=et,this.name=b,this._$AM=nt,this.options=rt,tt.length>2||tt[0]!==""||tt[1]!==""?(this._$AH=Array(tt.length-1).fill(new String),this.strings=tt):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(et,b=this,tt,nt){const rt=this.strings;let it=!1;if(rt===void 0)et=N(this,et,b,0),it=!u(et)||et!==this._$AH&&et!==T,it&&(this._$AH=et);else{const ot=et;let st,at;for(et=rt[0],st=0;st<rt.length-1;st++)at=N(this,ot[tt+st],b,st),at===T&&(at=this._$AH[st]),it||(it=!u(at)||at!==this._$AH[st]),at===A?et=A:et!==A&&(et+=(at??"")+rt[st+1]),this._$AH[st]=at}it&&!nt&&this.j(et)}j(et){et===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,et??"")}}class k extends R{constructor(){super(...arguments),this.type=3}j(et){this.element[this.name]=et===A?void 0:et}}const H=s$1?s$1.emptyScript:"";class I extends R{constructor(){super(...arguments),this.type=4}j(et){et&&et!==A?this.element.setAttribute(this.name,H):this.element.removeAttribute(this.name)}}class L extends R{constructor(et,b,tt,nt,rt){super(et,b,tt,nt,rt),this.type=5}_$AI(et,b=this){var tt;if((et=(tt=N(this,et,b,0))!==null&&tt!==void 0?tt:A)===T)return;const nt=this._$AH,rt=et===A&&nt!==A||et.capture!==nt.capture||et.once!==nt.once||et.passive!==nt.passive,it=et!==A&&(nt===A||rt);rt&&this.element.removeEventListener(this.name,this,nt),it&&this.element.addEventListener(this.name,this,et),this._$AH=et}handleEvent(et){var b,tt;typeof this._$AH=="function"?this._$AH.call((tt=(b=this.options)===null||b===void 0?void 0:b.host)!==null&&tt!==void 0?tt:this.element,et):this._$AH.handleEvent(et)}}class z{constructor(et,b,tt){this.element=et,this.type=6,this._$AN=void 0,this._$AM=b,this.options=tt}get _$AU(){return this._$AM._$AU}_$AI(et){N(this,et)}}const j=i.litHtmlPolyfillSupport;j==null||j(V,M),((t=i.litHtmlVersions)!==null&&t!==void 0?t:i.litHtmlVersions=[]).push("2.7.3");const B=(_e,et,b)=>{var tt,nt;const rt=(tt=b==null?void 0:b.renderBefore)!==null&&tt!==void 0?tt:et;let it=rt._$litPart$;if(it===void 0){const ot=(nt=b==null?void 0:b.renderBefore)!==null&&nt!==void 0?nt:null;rt._$litPart$=it=new M(et.insertBefore(d(),ot),ot,void 0,b??{})}return it._$AI(_e),it};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l,o;class s extends d$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var et,b;const tt=super.createRenderRoot();return(et=(b=this.renderOptions).renderBefore)!==null&&et!==void 0||(b.renderBefore=tt.firstChild),tt}update(et){const b=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(et),this._$Do=B(b,this.renderRoot,this.renderOptions)}connectedCallback(){var et;super.connectedCallback(),(et=this._$Do)===null||et===void 0||et.setConnected(!0)}disconnectedCallback(){var et;super.disconnectedCallback(),(et=this._$Do)===null||et===void 0||et.setConnected(!1)}render(){return T}}s.finalized=!0,s._$litElement$=!0,(l=globalThis.litElementHydrateSupport)===null||l===void 0||l.call(globalThis,{LitElement:s});const n=globalThis.litElementPolyfillSupport;n==null||n({LitElement:s});((o=globalThis.litElementVersions)!==null&&o!==void 0?o:globalThis.litElementVersions=[]).push("3.3.2");class ScreenShare extends s{static get styles(){return i$1`
      :host {
        display: block;
        padding: 25px;
        color: var(--screen-share-text-color, #000);
      }
    `}static get properties(){return{publisher:{},session:{},token:{},properties:{type:Object},buttonStartText:{type:String,attribute:"start-text"},buttonStopText:{type:String,attribute:"stop-text"},isSharing:{type:Boolean}}}constructor(){super(),this.session={},this.token="",this.properties={},this.buttonStartText="start screenshare",this.buttonStopText="stop screenshare",this.isSharing=!1}updated(et){et.get("session")&&this.session.connect(this.token)}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.publisher.destroy()}async __handleStartScreenshare(){this.properties={...this.properties,videoSource:"screen",insertMode:"append"},window.OT?this.publisher=OT.initPublisher(document.querySelector("screen-share"),this.properties,et=>{et?console.error("error: ",et):this.session.publish(this.publisher,b=>{b?console.error("session error: ",b.message):this.isSharing=!0})}):console.error("Please load Vonage Video library.")}async __handleStopScreenshare(){this.publisher.destroy(),this.isSharing=!1}displayButton(){return this.isSharing?x`<button part="button" @click=${this.__handleStopScreenshare}>${this.buttonStopText}</button>`:x`<button part="button" @click=${this.__handleStartScreenshare}>${this.buttonStartText}</button>`}render(){return x`
      ${this.displayButton()}
      <br/>
      <slot></slot>
    `}}window.customElements.define("screen-share",ScreenShare);function handleError(_e){_e&&alert(_e.message)}const callProperties={insertMode:"append",width:"100%",height:"100%"},Call=({userId:_e})=>{const[et,b]=reactExports.useState(0),tt=reactExports.useRef(null);let nt,rt,it;const ot=at=>nt.subscribe(at,"subscriber",callProperties,handleError),st=()=>{const at=OT$1.initPublisher("publisher",callProperties,handleError),ct=createPublisherListernerMap();return at.on({...ct}),at};return reactExports.useEffect(()=>{(async()=>{try{await addMember(_e)}catch(ut){console.error(ut)}})(),nt=OT$1.initSession(apiKey,sessionId),nt.connect(token,ut=>{console.log("session connect"),ut&&handleError(ut)});const ct=createSessionListenersMap();return nt.on({...ct,sessionConnected:()=>{console.log("on session connected"),it=st(),nt.publish(it,handleError)},streamCreated:ut=>{console.log("streamCreated",ut),rt=ot(ut.stream);const lt=createSubscriberListenerMap();rt.on({...lt})}}),tt.current.session=nt,tt.current.token=token,()=>{console.log("unmounting component"),rt&&(nt.unsubscribe(rt),rt.off(),console.log("subscriber unsubscribed from session")),it&&(nt.unpublish(it),it.off(),it.destroy(),console.log("session unpublished the publisher, publisher destroyed")),nt.off(),nt.disconnect(),console.log("session disconnected")}},[et]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{id:"videos",children:[jsxRuntimeExports.jsx("div",{id:"subscriber"}),jsxRuntimeExports.jsx("div",{id:"publisher"})]},et),jsxRuntimeExports.jsx("button",{style:{marginTop:"10px"},onClick:()=>b(at=>at+1),children:"Add Value manually"}),jsxRuntimeExports.jsx("screen-share",{"start-text":"start","stop-text":"stop",width:"300px",height:"240px",ref:tt})]})},Member=({userId:_e})=>jsxRuntimeExports.jsx(Call,{userId:_e}),Therapist=({userId:_e})=>jsxRuntimeExports.jsx(Call,{userId:_e}),deviceSelect="",DeviceSelect=({label:_e,devices:et,updateDeviceId:b})=>{const[tt,nt]=reactExports.useState(et[0].deviceId),rt=et.map(({deviceId:it,label:ot})=>jsxRuntimeExports.jsx("option",{value:it,children:ot},it));return jsxRuntimeExports.jsxs("div",{className:"device-select",children:[jsxRuntimeExports.jsx("label",{children:_e}),jsxRuntimeExports.jsx("select",{value:tt,onChange:it=>{const ot=it.target.value;nt(ot),b(ot)},children:rt})]})},useDevices=()=>{const[_e,et]=reactExports.useState(),[b,tt]=reactExports.useState(),[nt,rt]=reactExports.useState();return reactExports.useEffect(()=>{var it;if(!((it=navigator.mediaDevices)!=null&&it.enumerateDevices)){console.log("enumerateDevices() not supported.");return}navigator.mediaDevices.enumerateDevices().then(ot=>{const st=[],at=[],ct=[];ot.forEach(ut=>{switch(ut.kind){case"audioinput":ct.push(ut);break;case"audiooutput":at.push(ut);break;case"videoinput":st.push(ut)}}),et(st),tt(at),rt(ct)}).catch(ot=>{console.error(`${ot.name}: ${ot.message}`)})},[]),{videoDevices:_e,speakerDevices:b,microphoneDevices:nt}},devices="",Lobby=({memberId:_e,linkTo:et})=>{const{videoDevices:b,speakerDevices:tt,microphoneDevices:nt}=useDevices(),[rt,it]=reactExports.useState(),[ot,st]=reactExports.useState(),[at,ct]=reactExports.useState(),[ut,lt]=reactExports.useState(!0),[dt,ft]=reactExports.useState([]);reactExports.useEffect(()=>{lt(!0);let pt;return(async()=>{await removeMember(_e),pt=setInterval(async()=>{try{const{members:yt}=await getMembers();ft(yt),lt(!1)}catch(yt){console.error(yt)}},2e3)})(),()=>{clearInterval(pt)}},[]);const St=dt.map(pt=>jsxRuntimeExports.jsx("li",{children:pt},pt)),Tt=!!rt&&!!ot&&!!at;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ut?jsxRuntimeExports.jsx("div",{children:"Loading data..."}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:dt.length?jsxRuntimeExports.jsxs("div",{children:["The following members are already in the call:",jsxRuntimeExports.jsx("ul",{children:St})]}):jsxRuntimeExports.jsx("div",{children:"There are no connected members"})}),jsxRuntimeExports.jsxs("div",{id:"devices",children:[b&&jsxRuntimeExports.jsx(DeviceSelect,{label:"Pick your video input",devices:b,updateDeviceId:it}),tt&&jsxRuntimeExports.jsx(DeviceSelect,{label:"Pick your audio output",devices:tt,updateDeviceId:st}),nt&&jsxRuntimeExports.jsx(DeviceSelect,{label:"Pick your audio output",devices:nt,updateDeviceId:ct})]}),!ut&&jsxRuntimeExports.jsx(Link,{to:`/opentok-react/${et}`,children:jsxRuntimeExports.jsx("button",{disabled:Tt,children:`Go to ${et}`})})]})},memberName="John Kennedy",therapistName="Nikita Khrushev",App=()=>jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/opentok-react",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/opentok-react/lobby/member",element:jsxRuntimeExports.jsx(Lobby,{memberId:memberName,linkTo:"member"})}),jsxRuntimeExports.jsx(Route,{path:"/opentok-react/lobby/therapist",element:jsxRuntimeExports.jsx(Lobby,{memberId:therapistName,linkTo:"therapist"})}),jsxRuntimeExports.jsx(Route,{path:"/opentok-react/member",element:jsxRuntimeExports.jsx(Member,{userId:memberName})}),jsxRuntimeExports.jsx(Route,{path:"/opentok-react/therapist",element:jsxRuntimeExports.jsx(Therapist,{userId:therapistName})})]}),index="";client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})}));
