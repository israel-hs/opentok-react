function _mergeNamespaces(e,s){for(var i=0;i<s.length;i++){const o=s[i];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(o,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntimeExports={},jsxRuntime={get exports(){return jsxRuntimeExports},set exports(e){jsxRuntimeExports=e}},reactJsxRuntime_production_min={},reactExports={},react={get exports(){return reactExports},set exports(e){reactExports=e}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,s,i){var o,a={},c=null,d=null;if(s!=null)for(o in s.ref!==void 0&&(d=s.ref),s.key!==void 0&&(c=""+s.key),s)J.call(s,o)&&!L$1.hasOwnProperty(o)&&(a[o]=s[o]);var h=arguments.length-2;if(h===1)a.children=i;else if(1<h){for(var g=Array(h),b=0;b<h;b++)g[b]=arguments[b+2];a.children=g}if(e&&e.defaultProps)for(o in h=e.defaultProps,h)a[o]===void 0&&(a[o]=h[o]);return{$$typeof:l$1,type:e,key:c,ref:d,props:a,_owner:K$1.current}}function N$1(e,s){return{$$typeof:l$1,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape$1(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return s[i]})}var P$1=/\/+/g;function Q$1(e,s){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):s.toString(36)}function R$1(e,s,i,o,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=e,a=a(d),e=o===""?"."+Q$1(d,0):o,I$1(a)?(i="",e!=null&&(i=e.replace(P$1,"$&/")+"/"),R$1(a,s,i,"",function(b){return b})):a!=null&&(O$1(a)&&(a=N$1(a,i+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(P$1,"$&/")+"/")+e)),s.push(a)),1;if(d=0,o=o===""?".":o+":",I$1(e))for(var h=0;h<e.length;h++){c=e[h];var g=o+Q$1(c,h);d+=R$1(c,s,i,g,a)}else if(g=A$1(e),typeof g=="function")for(e=g.call(e),h=0;!(c=e.next()).done;)c=c.value,g=o+Q$1(c,h++),d+=R$1(c,s,i,g,a);else if(c==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(e,s,i){if(e==null)return e;var o=[],a=0;return R$1(e,o,"","",function(c){return s.call(i,c,a++)}),o}function T$1(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(e,s,i){S$1(e,function(){s.apply(this,arguments)},i)},count:function(e){var s=0;return S$1(e,function(){s++}),s},toArray:function(e){return S$1(e,function(s){return s})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(e,s,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=C$1({},e.props),a=e.key,c=e.ref,d=e._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,d=K$1.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(g in s)J.call(s,g)&&!L$1.hasOwnProperty(g)&&(o[g]=s[g]===void 0&&h!==void 0?h[g]:s[g])}var g=arguments.length-2;if(g===1)o.children=i;else if(1<g){h=Array(g);for(var b=0;b<g;b++)h[b]=arguments[b+2];o.children=h}return{$$typeof:l$1,type:e.type,key:a,ref:c,props:o,_owner:d}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var s=M$1.bind(null,e);return s.type=e,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,s){return{$$typeof:x,type:e,compare:s===void 0?null:s}};react_production_min.startTransition=function(e){var s=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=s}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(e,s){return U$1.current.useCallback(e,s)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,s){return U$1.current.useEffect(e,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,s,i){return U$1.current.useImperativeHandle(e,s,i)};react_production_min.useInsertionEffect=function(e,s){return U$1.current.useInsertionEffect(e,s)};react_production_min.useLayoutEffect=function(e,s){return U$1.current.useLayoutEffect(e,s)};react_production_min.useMemo=function(e,s){return U$1.current.useMemo(e,s)};react_production_min.useReducer=function(e,s,i){return U$1.current.useReducer(e,s,i)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,s,i){return U$1.current.useSyncExternalStore(e,s,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";(function(e){e.exports=react_production_min})(react);const index$1=getDefaultExportFromCjs(reactExports),React=_mergeNamespaces({__proto__:null,default:index$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,i){var o,a={},c=null,d=null;i!==void 0&&(c=""+i),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(d=s.ref);for(o in s)m$1.call(s,o)&&!p$1.hasOwnProperty(o)&&(a[o]=s[o]);if(e&&e.defaultProps)for(o in s=e.defaultProps,s)a[o]===void 0&&(a[o]=s[o]);return{$$typeof:k,type:e,key:c,ref:d,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;(function(e){e.exports=reactJsxRuntime_production_min})(jsxRuntime);var client={},reactDomExports={},reactDom={get exports(){return reactDomExports},set exports(e){reactDomExports=e}},reactDom_production_min={},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports(e){schedulerExports=e}},scheduler_production_min={};(function(e){/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function s(Bt,sn){var qt=Bt.length;Bt.push(sn);e:for(;0<qt;){var Kt=qt-1>>>1,$t=Bt[Kt];if(0<a($t,sn))Bt[Kt]=sn,Bt[qt]=$t,qt=Kt;else break e}}function i(Bt){return Bt.length===0?null:Bt[0]}function o(Bt){if(Bt.length===0)return null;var sn=Bt[0],qt=Bt.pop();if(qt!==sn){Bt[0]=qt;e:for(var Kt=0,$t=Bt.length,Sn=$t>>>1;Kt<Sn;){var On=2*(Kt+1)-1,tn=Bt[On],bn=On+1,dn=Bt[bn];if(0>a(tn,qt))bn<$t&&0>a(dn,tn)?(Bt[Kt]=dn,Bt[bn]=qt,Kt=bn):(Bt[Kt]=tn,Bt[On]=qt,Kt=On);else if(bn<$t&&0>a(dn,qt))Bt[Kt]=dn,Bt[bn]=qt,Kt=bn;else break e}}return sn}function a(Bt,sn){var qt=Bt.sortIndex-sn.sortIndex;return qt!==0?qt:Bt.id-sn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var g=[],b=[],j=1,_=null,$=3,_e=!1,et=!1,ct=!1,dt=typeof setTimeout=="function"?setTimeout:null,nt=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function st(Bt){for(var sn=i(b);sn!==null;){if(sn.callback===null)o(b);else if(sn.startTime<=Bt)o(b),sn.sortIndex=sn.expirationTime,s(g,sn);else break;sn=i(b)}}function lt(Bt){if(ct=!1,st(Bt),!et)if(i(g)!==null)et=!0,zt(ht);else{var sn=i(b);sn!==null&&nn(lt,sn.startTime-Bt)}}function ht(Bt,sn){et=!1,ct&&(ct=!1,nt(vt),vt=-1),_e=!0;var qt=$;try{for(st(sn),_=i(g);_!==null&&(!(_.expirationTime>sn)||Bt&&!Ct());){var Kt=_.callback;if(typeof Kt=="function"){_.callback=null,$=_.priorityLevel;var $t=Kt(_.expirationTime<=sn);sn=e.unstable_now(),typeof $t=="function"?_.callback=$t:_===i(g)&&o(g),st(sn)}else o(g);_=i(g)}if(_!==null)var Sn=!0;else{var On=i(b);On!==null&&nn(lt,On.startTime-sn),Sn=!1}return Sn}finally{_=null,$=qt,_e=!1}}var Tt=!1,Rt=null,vt=-1,Et=5,bt=-1;function Ct(){return!(e.unstable_now()-bt<Et)}function Ut(){if(Rt!==null){var Bt=e.unstable_now();bt=Bt;var sn=!0;try{sn=Rt(!0,Bt)}finally{sn?Xt():(Tt=!1,Rt=null)}}else Tt=!1}var Xt;if(typeof it=="function")Xt=function(){it(Ut)};else if(typeof MessageChannel<"u"){var Nt=new MessageChannel,Jt=Nt.port2;Nt.port1.onmessage=Ut,Xt=function(){Jt.postMessage(null)}}else Xt=function(){dt(Ut,0)};function zt(Bt){Rt=Bt,Tt||(Tt=!0,Xt())}function nn(Bt,sn){vt=dt(function(){Bt(e.unstable_now())},sn)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Bt){Bt.callback=null},e.unstable_continueExecution=function(){et||_e||(et=!0,zt(ht))},e.unstable_forceFrameRate=function(Bt){0>Bt||125<Bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Et=0<Bt?Math.floor(1e3/Bt):5},e.unstable_getCurrentPriorityLevel=function(){return $},e.unstable_getFirstCallbackNode=function(){return i(g)},e.unstable_next=function(Bt){switch($){case 1:case 2:case 3:var sn=3;break;default:sn=$}var qt=$;$=sn;try{return Bt()}finally{$=qt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Bt,sn){switch(Bt){case 1:case 2:case 3:case 4:case 5:break;default:Bt=3}var qt=$;$=Bt;try{return sn()}finally{$=qt}},e.unstable_scheduleCallback=function(Bt,sn,qt){var Kt=e.unstable_now();switch(typeof qt=="object"&&qt!==null?(qt=qt.delay,qt=typeof qt=="number"&&0<qt?Kt+qt:Kt):qt=Kt,Bt){case 1:var $t=-1;break;case 2:$t=250;break;case 5:$t=1073741823;break;case 4:$t=1e4;break;default:$t=5e3}return $t=qt+$t,Bt={id:j++,callback:sn,priorityLevel:Bt,startTime:qt,expirationTime:$t,sortIndex:-1},qt>Kt?(Bt.sortIndex=qt,s(b,Bt),i(g)===null&&Bt===i(b)&&(ct?(nt(vt),vt=-1):ct=!0,nn(lt,qt-Kt))):(Bt.sortIndex=$t,s(g,Bt),et||_e||(et=!0,zt(ht))),Bt},e.unstable_shouldYield=Ct,e.unstable_wrapCallback=function(Bt){var sn=$;return function(){var qt=$;$=sn;try{return Bt.apply(this,arguments)}finally{$=qt}}}})(scheduler_production_min);(function(e){e.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,s){ha(e,s),ha(e+"Capture",s)}function ha(e,s){for(ea[e]=s,e=0;e<s.length;e++)da.add(s[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,s,i,o){if(i!==null&&i.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,s,i,o){if(s===null||typeof s>"u"||pa(e,s,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(e,s,i,o,a,c,d){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=e,this.type=s,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];z[s]=new v(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,s,i,o){var a=z.hasOwnProperty(s)?z[s]:null;(a!==null?a.type!==0:o||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,i,a,o)&&(i=null),o||a===null?oa(s)&&(i===null?e.removeAttribute(s):e.setAttribute(s,""+i)):a.mustUseProperty?e[a.propertyName]=i===null?a.type===3?!1:"":i:(s=a.attributeName,o=a.attributeNamespace,i===null?e.removeAttribute(s):(a=a.type,i=a===3||a===4&&i===!0?"":""+i,o?e.setAttributeNS(o,s,i):e.setAttribute(s,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+e}var Na=!1;function Oa(e,s){if(!e||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(b){var o=b}Reflect.construct(e,[],s)}else{try{s.call()}catch(b){o=b}e.call(s.prototype)}else{try{throw Error()}catch(b){o=b}e()}}catch(b){if(b&&o&&typeof b.stack=="string"){for(var a=b.stack.split(`
`),c=o.stack.split(`
`),d=a.length-1,h=c.length-1;1<=d&&0<=h&&a[d]!==c[h];)h--;for(;1<=d&&0<=h;d--,h--)if(a[d]!==c[h]){if(d!==1||h!==1)do if(d--,h--,0>h||a[d]!==c[h]){var g=`
`+a[d].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=d&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return s=e.displayName||null,s!==null?s:Qa(e.type)||"Memo";case Ha:s=e._payload,e=e._init;try{return Qa(e(s))}catch{}}return null}function Ra(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(e){var s=Ta(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),o=""+e[s];if(!e.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,c=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(d){o=""+d,c.call(this,d)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),o="";return e&&(o=Ta(e)?e.checked?"true":"false":e.value),e=o,e!==i?(s.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,s){var i=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Za(e,s){var i=s.defaultValue==null?"":s.defaultValue,o=s.checked!=null?s.checked:s.defaultChecked;i=Sa(s.value!=null?s.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(e,s){s=s.checked,s!=null&&ta(e,"checked",s,!1)}function bb(e,s){ab(e,s);var i=Sa(s.value),o=s.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?cb(e,s.type,i):s.hasOwnProperty("defaultValue")&&cb(e,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function db(e,s,i){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var o=s.type;if(!(o!=="submit"&&o!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,i||s===e.value||(e.value=s),e.defaultValue=s}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function cb(e,s,i){(s!=="number"||Xa(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var eb=Array.isArray;function fb(e,s,i,o){if(e=e.options,s){s={};for(var a=0;a<i.length;a++)s["$"+i[a]]=!0;for(i=0;i<e.length;i++)a=s.hasOwnProperty("$"+e[i].value),e[i].selected!==a&&(e[i].selected=a),a&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Sa(i),s=null,a=0;a<e.length;a++){if(e[a].value===i){e[a].selected=!0,o&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function gb(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,s){var i=s.value;if(i==null){if(i=s.children,s=s.defaultValue,i!=null){if(s!=null)throw Error(p(92));if(eb(i)){if(1<i.length)throw Error(p(93));i=i[0]}s=i}s==null&&(s=""),i=s}e._wrapperState={initialValue:Sa(i)}}function ib(e,s){var i=Sa(s.value),o=Sa(s.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),s.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function jb(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,i,o,a){MSApp.execUnsafeLocalFunction(function(){return e(s,i,o,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function ob(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),pb[s]=pb[e]})});function rb(e,s,i){return s==null||typeof s=="boolean"||s===""?"":i||typeof s!="number"||s===0||pb.hasOwnProperty(e)&&pb[e]?(""+s).trim():s+"px"}function sb(e,s){e=e.style;for(var i in s)if(s.hasOwnProperty(i)){var o=i.indexOf("--")===0,a=rb(i,s[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,a):e[i]=a}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,s){if(s){if(tb[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function vb(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var s=e.stateNode;s&&(s=Db(s),yb(e.stateNode,e.type,s))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,s=Ab;if(Ab=zb=null,Bb(e),s)for(e=0;e<s.length;e++)Bb(s[e])}}function Gb(e,s){return e(s)}function Hb(){}var Ib=!1;function Jb(e,s,i){if(Ib)return e(s,i);Ib=!0;try{return Gb(e,s,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,s){var i=e.stateNode;if(i===null)return null;var o=Db(i);if(o===null)return null;i=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(p(231,s,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,s,i,o,a,c,d,h,g){var b=Array.prototype.slice.call(arguments,3);try{s.apply(i,b)}catch(j){this.onError(j)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,s,i,o,a,c,d,h,g){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,s,i,o,a,c,d,h,g){if(Tb.apply(this,arguments),Ob){if(Ob){var b=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=b)}}function Vb(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function Wb(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var s=e.alternate;if(!s){if(s=Vb(e),s===null)throw Error(p(188));return s!==e?null:e}for(var i=e,o=s;;){var a=i.return;if(a===null)break;var c=a.alternate;if(c===null){if(o=a.return,o!==null){i=o;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===i)return Xb(a),e;if(c===o)return Xb(a),s;c=c.sibling}throw Error(p(188))}if(i.return!==o.return)i=a,o=c;else{for(var d=!1,h=a.child;h;){if(h===i){d=!0,i=a,o=c;break}if(h===o){d=!0,o=a,i=c;break}h=h.sibling}if(!d){for(h=c.child;h;){if(h===i){d=!0,i=c,o=a;break}if(h===o){d=!0,o=c,i=a;break}h=h.sibling}if(!d)throw Error(p(189))}}if(i.alternate!==o)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?e:s}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=$b(e);if(s!==null)return s;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,s){var i=e.pendingLanes;if(i===0)return 0;var o=0,a=e.suspendedLanes,c=e.pingedLanes,d=i&268435455;if(d!==0){var h=d&~a;h!==0?o=tc(h):(c&=d,c!==0&&(o=tc(c)))}else d=i&~a,d!==0?o=tc(d):c!==0&&(o=tc(c));if(o===0)return 0;if(s!==0&&s!==o&&!(s&a)&&(a=o&-o,c=s&-s,a>=c||a===16&&(c&4194240)!==0))return s;if(o&4&&(o|=i&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=o;0<s;)i=31-oc(s),a=1<<i,o|=e[i],s&=~a;return o}function vc(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,s){for(var i=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-oc(c),h=1<<d,g=a[d];g===-1?(!(h&i)||h&o)&&(a[d]=vc(h,s)):g<=s&&(e.expiredLanes|=h),c&=~h}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function Ac(e,s,i){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-oc(s),e[s]=i}function Bc(e,s){var i=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var a=31-oc(i),c=1<<a;s[a]=0,o[a]=-1,e[a]=-1,i&=~c}}function Cc(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var o=31-oc(i),a=1<<o;a&s|e[o]&s&&(e[o]|=s),i&=~a}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,s){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(e,s,i,o,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:s,domEventName:i,eventSystemFlags:o,nativeEvent:c,targetContainers:[a]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),e):(e.eventSystemFlags|=o,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function Uc(e,s,i,o,a){switch(s){case"focusin":return Lc=Tc(Lc,e,s,i,o,a),!0;case"dragenter":return Mc=Tc(Mc,e,s,i,o,a),!0;case"mouseover":return Nc=Tc(Nc,e,s,i,o,a),!0;case"pointerover":var c=a.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,e,s,i,o,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc.set(c,Tc(Pc.get(c)||null,e,s,i,o,a)),!0}return!1}function Vc(e){var s=Wc(e.target);if(s!==null){var i=Vb(s);if(i!==null){if(s=i.tag,s===13){if(s=Wb(i),s!==null){e.blockedOn=s,Ic(e.priority,function(){Gc(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Yc(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);wb=o,i.target.dispatchEvent(o),wb=null}else return s=Cb(i),s!==null&&Fc(s),e.blockedOn=i,!1;s.shift()}return!0}function Zc(e,s,i){Xc(e)&&i.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,s){e.blockedOn===s&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function s(a){return ad(a,e)}if(0<Kc.length){ad(Kc[0],e);for(var i=1;i<Kc.length;i++){var o=Kc[i];o.blockedOn===e&&(o.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(s),Pc.forEach(s),i=0;i<Qc.length;i++)o=Qc[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,s,i,o){var a=C,c=cd.transition;cd.transition=null;try{C=1,fd(e,s,i,o)}finally{C=a,cd.transition=c}}function gd(e,s,i,o){var a=C,c=cd.transition;cd.transition=null;try{C=4,fd(e,s,i,o)}finally{C=a,cd.transition=c}}function fd(e,s,i,o){if(dd){var a=Yc(e,s,i,o);if(a===null)hd(e,s,o,id,i),Sc(e,o);else if(Uc(a,e,s,i,o))o.stopPropagation();else if(Sc(e,o),s&4&&-1<Rc.indexOf(e)){for(;a!==null;){var c=Cb(a);if(c!==null&&Ec(c),c=Yc(e,s,i,o),c===null&&hd(e,s,o,id,i),c===a)break;a=c}a!==null&&o.stopPropagation()}else hd(e,s,o,null,i)}}var id=null;function Yc(e,s,i,o){if(id=null,e=xb(o),e=Wc(e),e!==null)if(s=Vb(e),s===null)e=null;else if(i=s.tag,i===13){if(e=Wb(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return id=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,s=ld,i=s.length,o,a="value"in kd?kd.value:kd.textContent,c=a.length;for(e=0;e<i&&s[e]===a[e];e++);var d=i-e;for(o=1;o<=d&&s[i-o]===a[c-o];o++);return md=a.slice(e,1<o?1-o:void 0)}function od(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function s(i,o,a,c,d){this._reactName=i,this._targetInst=a,this.type=o,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(i=e[h],this[h]=i?i(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Od[e])?!!s[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var s=Md[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(e,s){switch(e){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,s){switch(e){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe=!0,ee);case"textInput":return e=s.data,e===ee&&fe?null:e;default:return null}}function ke(e,s){if(ie)return e==="compositionend"||!ae&&ge(e,s)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!le[e.type]:s==="textarea"}function ne(e,s,i,o){Eb(o),s=oe(s,"onChange"),0<s.length&&(i=new td("onChange","change",null,i,o),e.push({event:i,listeners:s}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var s=ue(e);if(Wa(s))return e}function ve(e,s){if(e==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,e,xb(e)),Jb(re,s)}}function Ce(e,s,i){e==="focusin"?(Ae(),pe=s,qe=i,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,s){if(e==="click")return te(s)}function Fe(e,s){if(e==="input"||e==="change")return te(s)}function Ge(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,s){if(He(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),o=Object.keys(s);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var a=i[o];if(!ja.call(s,a)||!He(e[a],s[a]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,s){var i=Je(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=s&&o>=s)return{node:i,offset:s-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Le(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var e=window,s=Xa();s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)e=s.contentWindow;else break;s=Xa(e.document)}return s}function Ne(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Oe(e){var s=Me(),i=e.focusedElem,o=e.selectionRange;if(s!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(o!==null&&Ne(i)){if(s=o.start,e=o.end,e===void 0&&(e=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(e,i.value.length);else if(e=(s=i.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=i.textContent.length,c=Math.min(o.start,a);o=o.end===void 0?c:Math.min(o.end,a),!e.extend&&c>o&&(a=o,o=c,c=a),a=Ke(i,c);var d=Ke(i,o);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),c>o?(e.addRange(s),e.extend(d.node,d.offset)):(s.setEnd(d.node,d.offset),e.addRange(s)))}}for(s=[],e=i;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)e=s[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,s,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie(Se,o)||(Se=o,o=oe(Re,"onSelect"),0<o.length&&(s=new td("onSelect","select",null,s,i),e.push({event:s,listeners:o}),s.target=Qe)))}function Ve(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var s=We[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in Ye)return Xe[e]=s[i];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,s){df.set(e,s),fa(s,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,s,i){var o=e.type||"unknown-event";e.currentTarget=i,Ub(o,s,void 0,e),e.currentTarget=null}function se(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],a=o.event;o=o.listeners;e:{var c=void 0;if(s)for(var d=o.length-1;0<=d;d--){var h=o[d],g=h.instance,b=h.currentTarget;if(h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,b),c=g}else for(d=0;d<o.length;d++){if(h=o[d],g=h.instance,b=h.currentTarget,h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,b),c=g}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,s){var i=s[of];i===void 0&&(i=s[of]=new Set);var o=e+"__bubble";i.has(o)||(pf(s,e,2,!1),i.add(o))}function qf(e,s,i){var o=0;s&&(o|=4),pf(i,e,o,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,e),qf(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(e,s,i,o){switch(jd(s)){case 1:var a=ed;break;case 4:a=gd;break;default:a=fd}i=a.bind(null,s,i,e),a=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),o?a!==void 0?e.addEventListener(s,i,{capture:!0,passive:a}):e.addEventListener(s,i,!0):a!==void 0?e.addEventListener(s,i,{passive:a}):e.addEventListener(s,i,!1)}function hd(e,s,i,o,a){var c=o;if(!(s&1)&&!(s&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var h=o.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(d===4)for(d=o.return;d!==null;){var g=d.tag;if((g===3||g===4)&&(g=d.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;d=d.return}for(;h!==null;){if(d=Wc(h),d===null)return;if(g=d.tag,g===5||g===6){o=c=d;continue e}h=h.parentNode}}o=o.return}Jb(function(){var b=c,j=xb(i),_=[];e:{var $=df.get(e);if($!==void 0){var _e=td,et=e;switch(e){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":_e=Rd;break;case"focusin":et="focus",_e=Fd;break;case"focusout":et="blur",_e=Fd;break;case"beforeblur":case"afterblur":_e=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Vd;break;case $e:case af:case bf:_e=Hd;break;case cf:_e=Xd;break;case"scroll":_e=vd;break;case"wheel":_e=Zd;break;case"copy":case"cut":case"paste":_e=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Td}var ct=(s&4)!==0,dt=!ct&&e==="scroll",nt=ct?$!==null?$+"Capture":null:$;ct=[];for(var it=b,st;it!==null;){st=it;var lt=st.stateNode;if(st.tag===5&&lt!==null&&(st=lt,nt!==null&&(lt=Kb(it,nt),lt!=null&&ct.push(tf(it,lt,st)))),dt)break;it=it.return}0<ct.length&&($=new _e($,et,null,i,j),_.push({event:$,listeners:ct}))}}if(!(s&7)){e:{if($=e==="mouseover"||e==="pointerover",_e=e==="mouseout"||e==="pointerout",$&&i!==wb&&(et=i.relatedTarget||i.fromElement)&&(Wc(et)||et[uf]))break e;if((_e||$)&&($=j.window===j?j:($=j.ownerDocument)?$.defaultView||$.parentWindow:window,_e?(et=i.relatedTarget||i.toElement,_e=b,et=et?Wc(et):null,et!==null&&(dt=Vb(et),et!==dt||et.tag!==5&&et.tag!==6)&&(et=null)):(_e=null,et=b),_e!==et)){if(ct=Bd,lt="onMouseLeave",nt="onMouseEnter",it="mouse",(e==="pointerout"||e==="pointerover")&&(ct=Td,lt="onPointerLeave",nt="onPointerEnter",it="pointer"),dt=_e==null?$:ue(_e),st=et==null?$:ue(et),$=new ct(lt,it+"leave",_e,i,j),$.target=dt,$.relatedTarget=st,lt=null,Wc(j)===b&&(ct=new ct(nt,it+"enter",et,i,j),ct.target=st,ct.relatedTarget=dt,lt=ct),dt=lt,_e&&et)t:{for(ct=_e,nt=et,it=0,st=ct;st;st=vf(st))it++;for(st=0,lt=nt;lt;lt=vf(lt))st++;for(;0<it-st;)ct=vf(ct),it--;for(;0<st-it;)nt=vf(nt),st--;for(;it--;){if(ct===nt||nt!==null&&ct===nt.alternate)break t;ct=vf(ct),nt=vf(nt)}ct=null}else ct=null;_e!==null&&wf(_,$,_e,ct,!1),et!==null&&dt!==null&&wf(_,dt,et,ct,!0)}}e:{if($=b?ue(b):window,_e=$.nodeName&&$.nodeName.toLowerCase(),_e==="select"||_e==="input"&&$.type==="file")var ht=ve;else if(me($))if(we)ht=Fe;else{ht=De;var Tt=Ce}else(_e=$.nodeName)&&_e.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ht=Ee);if(ht&&(ht=ht(e,b))){ne(_,ht,i,j);break e}Tt&&Tt(e,$,b),e==="focusout"&&(Tt=$._wrapperState)&&Tt.controlled&&$.type==="number"&&cb($,"number",$.value)}switch(Tt=b?ue(b):window,e){case"focusin":(me(Tt)||Tt.contentEditable==="true")&&(Qe=Tt,Re=b,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(_,i,j);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_,i,j)}var Rt;if(ae)e:{switch(e){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ie?ge(e,i)&&(vt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(vt="onCompositionStart");vt&&(de&&i.locale!=="ko"&&(ie||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ie&&(Rt=nd()):(kd=j,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Tt=oe(b,vt),0<Tt.length&&(vt=new Ld(vt,e,null,i,j),_.push({event:vt,listeners:Tt}),Rt?vt.data=Rt:(Rt=he(i),Rt!==null&&(vt.data=Rt)))),(Rt=ce?je(e,i):ke(e,i))&&(b=oe(b,"onBeforeInput"),0<b.length&&(j=new Ld("onBeforeInput","beforeinput",null,i,j),_.push({event:j,listeners:b}),j.data=Rt))}se(_,s)})}function tf(e,s,i){return{instance:e,listener:s,currentTarget:i}}function oe(e,s){for(var i=s+"Capture",o=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb(e,i),c!=null&&o.unshift(tf(e,c,a)),c=Kb(e,s),c!=null&&o.push(tf(e,c,a))),e=e.return}return o}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,s,i,o,a){for(var c=s._reactName,d=[];i!==null&&i!==o;){var h=i,g=h.alternate,b=h.stateNode;if(g!==null&&g===o)break;h.tag===5&&b!==null&&(h=b,a?(g=Kb(i,c),g!=null&&d.unshift(tf(i,g,h))):a||(g=Kb(i,c),g!=null&&d.push(tf(i,g,h)))),i=i.return}d.length!==0&&e.push({event:s,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,s,i){if(s=zf(s),zf(e)!==s&&i)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,s){var i=s,o=0;do{var a=i.nextSibling;if(e.removeChild(i),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(o===0){e.removeChild(a),bd(s);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=a}while(i);bd(s)}function Lf(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var s=e[Of];if(s)return s;for(var i=e.parentNode;i;){if(s=i[uf]||i[Of]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=Mf(e);e!==null;){if(i=e[Of])return i;e=Mf(e)}return s}e=i,i=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,s){Tf++,Sf[Tf]=e.current,e.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,s){var i=e.type.contextTypes;if(!i)return Vf;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===s)return o.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in i)a[c]=s[c];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,s,i){if(H.current!==Vf)throw Error(p(168));G(H,s),G(Wf,i)}function bg(e,s,i){var o=e.stateNode;if(s=s.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var a in o)if(!(a in s))throw Error(p(108,Ra(e)||"Unknown",a));return A({},i,o)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,s,i){var o=e.stateNode;if(!o)throw Error(p(169));i?(e=bg(e,s,Xf),o.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,s=C;try{var i=eg;for(C=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),a}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,s){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=s}function ug(e,s,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var o=rg;e=sg;var a=32-oc(o)-1;o&=~(1<<a),i+=1;var c=32-oc(s)+a;if(30<c){var d=a-a%5;c=(o&(1<<d)-1).toString(32),o>>=d,a-=d,rg=1<<32-oc(s)+a|i<<a|o,sg=c+e}else rg=1<<c|i<<a|o,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,s){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=s,i.return=e,s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)}function Cg(e,s){switch(e.tag){case 5:var i=e.type;return s=s.nodeType!==1||i.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,xg=e,yg=Lf(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,xg=e,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(i=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:s,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=s,i.return=e,e.child=i,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var s=yg;if(s){var i=s;if(!Cg(e,s)){if(Dg(e))throw Error(p(418));s=Lf(i.nextSibling);var o=xg;s&&Cg(e,s)?Ag(o,i):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ef(e.type,e.memoizedProps)),s&&(s=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;s;)Ag(e,s),s=Lf(s.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(s===0){yg=Lf(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,s){if(e&&e.defaultProps){s=A({},s),e=e.defaultProps;for(var i in e)s[i]===void 0&&(s[i]=e[i]);return s}return s}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(e){var s=Mg.current;E(Mg),e._currentValue=s}function Sg(e,s,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),e===i)break;e=e.return}}function Tg(e,s){Ng=e,Pg=Og=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(Ug=!0),e.firstContext=null)}function Vg(e){var s=e._currentValue;if(Pg!==e)if(e={context:e,memoizedValue:s,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=e,Ng.dependencies={lanes:0,firstContext:e}}else Og=Og.next=e;return s}var Wg=null;function Xg(e){Wg===null?Wg=[e]:Wg.push(e)}function Yg(e,s,i,o){var a=s.interleaved;return a===null?(i.next=i,Xg(s)):(i.next=a.next,a.next=i),s.interleaved=i,Zg(e,o)}function Zg(e,s){e.lanes|=s;var i=e.alternate;for(i!==null&&(i.lanes|=s),i=e,e=e.return;e!==null;)e.childLanes|=s,i=e.alternate,i!==null&&(i.childLanes|=s),i=e,e=e.return;return i.tag===3?i.stateNode:null}var $g=!1;function ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ch(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function dh(e,s,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,K&2){var a=o.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),o.pending=s,Zg(e,i)}return a=o.interleaved,a===null?(s.next=s,Xg(o)):(s.next=a.next,a.next=s),o.interleaved=s,Zg(e,i)}function eh(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194240)!==0)){var o=s.lanes;o&=e.pendingLanes,i|=o,s.lanes=i,Cc(e,i)}}function fh(e,s){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var a=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?a=c=d:c=c.next=d,i=i.next}while(i!==null);c===null?a=c=s:c=c.next=s}else a=c=s;i={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}function gh(e,s,i,o){var a=e.updateQueue;$g=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var g=h,b=g.next;g.next=null,d===null?c=b:d.next=b,d=g;var j=e.alternate;j!==null&&(j=j.updateQueue,h=j.lastBaseUpdate,h!==d&&(h===null?j.firstBaseUpdate=b:h.next=b,j.lastBaseUpdate=g))}if(c!==null){var _=a.baseState;d=0,j=b=g=null,h=c;do{var $=h.lane,_e=h.eventTime;if((o&$)===$){j!==null&&(j=j.next={eventTime:_e,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var et=e,ct=h;switch($=s,_e=i,ct.tag){case 1:if(et=ct.payload,typeof et=="function"){_=et.call(_e,_,$);break e}_=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=ct.payload,$=typeof et=="function"?et.call(_e,_,$):et,$==null)break e;_=A({},_,$);break e;case 2:$g=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,$=a.effects,$===null?a.effects=[h]:$.push(h))}else _e={eventTime:_e,lane:$,tag:h.tag,payload:h.payload,callback:h.callback,next:null},j===null?(b=j=_e,g=_):j=j.next=_e,d|=$;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;$=h,h=$.next,$.next=null,a.lastBaseUpdate=$,a.shared.pending=null}}while(1);if(j===null&&(g=_),a.baseState=g,a.firstBaseUpdate=b,a.lastBaseUpdate=j,s=a.shared.interleaved,s!==null){a=s;do d|=a.lane,a=a.next;while(a!==s)}else c===null&&(a.shared.lanes=0);hh|=d,e.lanes=d,e.memoizedState=_}}function ih(e,s,i){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var o=e[s],a=o.callback;if(a!==null){if(o.callback=null,o=i,typeof a!="function")throw Error(p(191,a));a.call(o)}}}var jh=new aa.Component().refs;function kh(e,s,i,o){s=e.memoizedState,i=i(o,s),i=i==null?s:A({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var nh={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,s,i){e=e._reactInternals;var o=L(),a=lh(e),c=ch(o,a);c.payload=s,i!=null&&(c.callback=i),s=dh(e,c,a),s!==null&&(mh(s,e,a,o),eh(s,e,a))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var o=L(),a=lh(e),c=ch(o,a);c.tag=1,c.payload=s,i!=null&&(c.callback=i),s=dh(e,c,a),s!==null&&(mh(s,e,a,o),eh(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=L(),o=lh(e),a=ch(i,o);a.tag=2,s!=null&&(a.callback=s),s=dh(e,a,o),s!==null&&(mh(s,e,o,i),eh(s,e,o))}};function oh(e,s,i,o,a,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,c,d):s.prototype&&s.prototype.isPureReactComponent?!Ie(i,o)||!Ie(a,c):!0}function ph(e,s,i){var o=!1,a=Vf,c=s.contextType;return typeof c=="object"&&c!==null?c=Vg(c):(a=Zf(s)?Xf:H.current,o=s.contextTypes,c=(o=o!=null)?Yf(e,a):Vf),s=new s(i,c),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=nh,e.stateNode=s,s._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),s}function qh(e,s,i,o){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,o),s.state!==e&&nh.enqueueReplaceState(s,s.state,null)}function rh(e,s,i,o){var a=e.stateNode;a.props=i,a.state=e.memoizedState,a.refs=jh,ah(e);var c=s.contextType;typeof c=="object"&&c!==null?a.context=Vg(c):(c=Zf(s)?Xf:H.current,a.context=Yf(e,c)),a.state=e.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(kh(e,s,c,i),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&nh.enqueueReplaceState(a,a.state,null),gh(e,i,a,o),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function sh(e,s,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p(309));var o=i.stateNode}if(!o)throw Error(p(147,e));var a=o,c=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(d){var h=a.refs;h===jh&&(h=a.refs={}),d===null?delete h[c]:h[c]=d},s._stringRef=c,s)}if(typeof e!="string")throw Error(p(284));if(!i._owner)throw Error(p(290,e))}return e}function th(e,s){throw e=Object.prototype.toString.call(s),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function uh(e){var s=e._init;return s(e._payload)}function vh(e){function s(nt,it){if(e){var st=nt.deletions;st===null?(nt.deletions=[it],nt.flags|=16):st.push(it)}}function i(nt,it){if(!e)return null;for(;it!==null;)s(nt,it),it=it.sibling;return null}function o(nt,it){for(nt=new Map;it!==null;)it.key!==null?nt.set(it.key,it):nt.set(it.index,it),it=it.sibling;return nt}function a(nt,it){return nt=wh(nt,it),nt.index=0,nt.sibling=null,nt}function c(nt,it,st){return nt.index=st,e?(st=nt.alternate,st!==null?(st=st.index,st<it?(nt.flags|=2,it):st):(nt.flags|=2,it)):(nt.flags|=1048576,it)}function d(nt){return e&&nt.alternate===null&&(nt.flags|=2),nt}function h(nt,it,st,lt){return it===null||it.tag!==6?(it=xh(st,nt.mode,lt),it.return=nt,it):(it=a(it,st),it.return=nt,it)}function g(nt,it,st,lt){var ht=st.type;return ht===ya?j(nt,it,st.props.children,lt,st.key):it!==null&&(it.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Ha&&uh(ht)===it.type)?(lt=a(it,st.props),lt.ref=sh(nt,it,st),lt.return=nt,lt):(lt=yh(st.type,st.key,st.props,null,nt.mode,lt),lt.ref=sh(nt,it,st),lt.return=nt,lt)}function b(nt,it,st,lt){return it===null||it.tag!==4||it.stateNode.containerInfo!==st.containerInfo||it.stateNode.implementation!==st.implementation?(it=zh(st,nt.mode,lt),it.return=nt,it):(it=a(it,st.children||[]),it.return=nt,it)}function j(nt,it,st,lt,ht){return it===null||it.tag!==7?(it=Ah(st,nt.mode,lt,ht),it.return=nt,it):(it=a(it,st),it.return=nt,it)}function _(nt,it,st){if(typeof it=="string"&&it!==""||typeof it=="number")return it=xh(""+it,nt.mode,st),it.return=nt,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case va:return st=yh(it.type,it.key,it.props,null,nt.mode,st),st.ref=sh(nt,null,it),st.return=nt,st;case wa:return it=zh(it,nt.mode,st),it.return=nt,it;case Ha:var lt=it._init;return _(nt,lt(it._payload),st)}if(eb(it)||Ka(it))return it=Ah(it,nt.mode,st,null),it.return=nt,it;th(nt,it)}return null}function $(nt,it,st,lt){var ht=it!==null?it.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return ht!==null?null:h(nt,it,""+st,lt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case va:return st.key===ht?g(nt,it,st,lt):null;case wa:return st.key===ht?b(nt,it,st,lt):null;case Ha:return ht=st._init,$(nt,it,ht(st._payload),lt)}if(eb(st)||Ka(st))return ht!==null?null:j(nt,it,st,lt,null);th(nt,st)}return null}function _e(nt,it,st,lt,ht){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return nt=nt.get(st)||null,h(it,nt,""+lt,ht);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case va:return nt=nt.get(lt.key===null?st:lt.key)||null,g(it,nt,lt,ht);case wa:return nt=nt.get(lt.key===null?st:lt.key)||null,b(it,nt,lt,ht);case Ha:var Tt=lt._init;return _e(nt,it,st,Tt(lt._payload),ht)}if(eb(lt)||Ka(lt))return nt=nt.get(st)||null,j(it,nt,lt,ht,null);th(it,lt)}return null}function et(nt,it,st,lt){for(var ht=null,Tt=null,Rt=it,vt=it=0,Et=null;Rt!==null&&vt<st.length;vt++){Rt.index>vt?(Et=Rt,Rt=null):Et=Rt.sibling;var bt=$(nt,Rt,st[vt],lt);if(bt===null){Rt===null&&(Rt=Et);break}e&&Rt&&bt.alternate===null&&s(nt,Rt),it=c(bt,it,vt),Tt===null?ht=bt:Tt.sibling=bt,Tt=bt,Rt=Et}if(vt===st.length)return i(nt,Rt),I&&tg(nt,vt),ht;if(Rt===null){for(;vt<st.length;vt++)Rt=_(nt,st[vt],lt),Rt!==null&&(it=c(Rt,it,vt),Tt===null?ht=Rt:Tt.sibling=Rt,Tt=Rt);return I&&tg(nt,vt),ht}for(Rt=o(nt,Rt);vt<st.length;vt++)Et=_e(Rt,nt,vt,st[vt],lt),Et!==null&&(e&&Et.alternate!==null&&Rt.delete(Et.key===null?vt:Et.key),it=c(Et,it,vt),Tt===null?ht=Et:Tt.sibling=Et,Tt=Et);return e&&Rt.forEach(function(Ct){return s(nt,Ct)}),I&&tg(nt,vt),ht}function ct(nt,it,st,lt){var ht=Ka(st);if(typeof ht!="function")throw Error(p(150));if(st=ht.call(st),st==null)throw Error(p(151));for(var Tt=ht=null,Rt=it,vt=it=0,Et=null,bt=st.next();Rt!==null&&!bt.done;vt++,bt=st.next()){Rt.index>vt?(Et=Rt,Rt=null):Et=Rt.sibling;var Ct=$(nt,Rt,bt.value,lt);if(Ct===null){Rt===null&&(Rt=Et);break}e&&Rt&&Ct.alternate===null&&s(nt,Rt),it=c(Ct,it,vt),Tt===null?ht=Ct:Tt.sibling=Ct,Tt=Ct,Rt=Et}if(bt.done)return i(nt,Rt),I&&tg(nt,vt),ht;if(Rt===null){for(;!bt.done;vt++,bt=st.next())bt=_(nt,bt.value,lt),bt!==null&&(it=c(bt,it,vt),Tt===null?ht=bt:Tt.sibling=bt,Tt=bt);return I&&tg(nt,vt),ht}for(Rt=o(nt,Rt);!bt.done;vt++,bt=st.next())bt=_e(Rt,nt,vt,bt.value,lt),bt!==null&&(e&&bt.alternate!==null&&Rt.delete(bt.key===null?vt:bt.key),it=c(bt,it,vt),Tt===null?ht=bt:Tt.sibling=bt,Tt=bt);return e&&Rt.forEach(function(Ut){return s(nt,Ut)}),I&&tg(nt,vt),ht}function dt(nt,it,st,lt){if(typeof st=="object"&&st!==null&&st.type===ya&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case va:e:{for(var ht=st.key,Tt=it;Tt!==null;){if(Tt.key===ht){if(ht=st.type,ht===ya){if(Tt.tag===7){i(nt,Tt.sibling),it=a(Tt,st.props.children),it.return=nt,nt=it;break e}}else if(Tt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Ha&&uh(ht)===Tt.type){i(nt,Tt.sibling),it=a(Tt,st.props),it.ref=sh(nt,Tt,st),it.return=nt,nt=it;break e}i(nt,Tt);break}else s(nt,Tt);Tt=Tt.sibling}st.type===ya?(it=Ah(st.props.children,nt.mode,lt,st.key),it.return=nt,nt=it):(lt=yh(st.type,st.key,st.props,null,nt.mode,lt),lt.ref=sh(nt,it,st),lt.return=nt,nt=lt)}return d(nt);case wa:e:{for(Tt=st.key;it!==null;){if(it.key===Tt)if(it.tag===4&&it.stateNode.containerInfo===st.containerInfo&&it.stateNode.implementation===st.implementation){i(nt,it.sibling),it=a(it,st.children||[]),it.return=nt,nt=it;break e}else{i(nt,it);break}else s(nt,it);it=it.sibling}it=zh(st,nt.mode,lt),it.return=nt,nt=it}return d(nt);case Ha:return Tt=st._init,dt(nt,it,Tt(st._payload),lt)}if(eb(st))return et(nt,it,st,lt);if(Ka(st))return ct(nt,it,st,lt);th(nt,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,it!==null&&it.tag===6?(i(nt,it.sibling),it=a(it,st),it.return=nt,nt=it):(i(nt,it),it=xh(st,nt.mode,lt),it.return=nt,nt=it),d(nt)):i(nt,it)}return dt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(e){if(e===Dh)throw Error(p(174));return e}function Ih(e,s){switch(G(Gh,s),G(Fh,e),G(Eh,Dh),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=lb(s,e)}E(Eh),G(Eh,s)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(e){Hh(Gh.current);var s=Hh(Eh.current),i=lb(s,e.type);s!==i&&(G(Fh,e),G(Eh,i))}function Lh(e){Fh.current===e&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nh=[];function Oh(){for(var e=0;e<Nh.length;e++)Nh[e]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321))}function Wh(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!He(e[i],s[i]))return!1;return!0}function Xh(e,s,i,o,a,c){if(Rh=c,N=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ph.current=e===null||e.memoizedState===null?Yh:Zh,e=i(o,a),Th){c=0;do{if(Th=!1,Uh=0,25<=c)throw Error(p(301));c+=1,P=O=null,s.updateQueue=null,Ph.current=$h,e=i(o,a)}while(Th)}if(Ph.current=ai,s=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,s)throw Error(p(300));return e}function bi(){var e=Uh!==0;return Uh=0,e}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=e:P=P.next=e,P}function di(){if(O===null){var e=N.alternate;e=e!==null?e.memoizedState:null}else e=O.next;var s=P===null?N.memoizedState:P.next;if(s!==null)P=s,O=e;else{if(e===null)throw Error(p(310));O=e,e={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=e:P=P.next=e}return P}function ei(e,s){return typeof s=="function"?s(e):s}function fi(e){var s=di(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var o=O,a=o.baseQueue,c=i.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}o.baseQueue=a=c,i.pending=null}if(a!==null){c=a.next,o=o.baseState;var h=d=null,g=null,b=c;do{var j=b.lane;if((Rh&j)===j)g!==null&&(g=g.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),o=b.hasEagerState?b.eagerState:e(o,b.action);else{var _={lane:j,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};g===null?(h=g=_,d=o):g=g.next=_,N.lanes|=j,hh|=j}b=b.next}while(b!==null&&b!==c);g===null?d=o:g.next=h,He(o,s.memoizedState)||(Ug=!0),s.memoizedState=o,s.baseState=d,s.baseQueue=g,i.lastRenderedState=o}if(e=i.interleaved,e!==null){a=e;do c=a.lane,N.lanes|=c,hh|=c,a=a.next;while(a!==e)}else a===null&&(i.lanes=0);return[s.memoizedState,i.dispatch]}function gi(e){var s=di(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var o=i.dispatch,a=i.pending,c=s.memoizedState;if(a!==null){i.pending=null;var d=a=a.next;do c=e(c,d.action),d=d.next;while(d!==a);He(c,s.memoizedState)||(Ug=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),i.lastRenderedState=c}return[c,o]}function hi(){}function ii(e,s){var i=N,o=di(),a=s(),c=!He(o.memoizedState,a);if(c&&(o.memoizedState=a,Ug=!0),o=o.queue,ji(ki.bind(null,i,o,e),[e]),o.getSnapshot!==s||c||P!==null&&P.memoizedState.tag&1){if(i.flags|=2048,li(9,mi.bind(null,i,o,a,s),void 0,null),R===null)throw Error(p(349));Rh&30||ni(i,s,a)}return a}function ni(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=N.updateQueue,s===null?(s={lastEffect:null,stores:null},N.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function mi(e,s,i,o){s.value=i,s.getSnapshot=o,oi(s)&&pi(e)}function ki(e,s,i){return i(function(){oi(s)&&pi(e)})}function oi(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!He(e,i)}catch{return!0}}function pi(e){var s=Zg(e,1);s!==null&&mh(s,e,1,-1)}function qi(e){var s=ci();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:e},s.queue=e,e=e.dispatch=ri.bind(null,N,e),[s.memoizedState,e]}function li(e,s,i,o){return e={tag:e,create:s,destroy:i,deps:o,next:null},s=N.updateQueue,s===null?(s={lastEffect:null,stores:null},N.updateQueue=s,s.lastEffect=e.next=e):(i=s.lastEffect,i===null?s.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,s.lastEffect=e)),e}function si(){return di().memoizedState}function ti(e,s,i,o){var a=ci();N.flags|=e,a.memoizedState=li(1|s,i,void 0,o===void 0?null:o)}function ui(e,s,i,o){var a=di();o=o===void 0?null:o;var c=void 0;if(O!==null){var d=O.memoizedState;if(c=d.destroy,o!==null&&Wh(o,d.deps)){a.memoizedState=li(s,i,c,o);return}}N.flags|=e,a.memoizedState=li(1|s,i,c,o)}function vi(e,s){return ti(8390656,8,e,s)}function ji(e,s){return ui(2048,8,e,s)}function wi(e,s){return ui(4,2,e,s)}function xi(e,s){return ui(4,4,e,s)}function yi(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function zi(e,s,i){return i=i!=null?i.concat([e]):null,ui(4,4,yi.bind(null,s,e),i)}function Ai(){}function Bi(e,s){var i=di();s=s===void 0?null:s;var o=i.memoizedState;return o!==null&&s!==null&&Wh(s,o[1])?o[0]:(i.memoizedState=[e,s],e)}function Ci(e,s){var i=di();s=s===void 0?null:s;var o=i.memoizedState;return o!==null&&s!==null&&Wh(s,o[1])?o[0]:(e=e(),i.memoizedState=[e,s],e)}function Di(e,s,i){return Rh&21?(He(i,s)||(i=yc(),N.lanes|=i,hh|=i,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,Ug=!0),e.memoizedState=i)}function Ei(e,s){var i=C;C=i!==0&&4>i?i:4,e(!0);var o=Qh.transition;Qh.transition={};try{e(!1),s()}finally{C=i,Qh.transition=o}}function Fi(){return di().memoizedState}function Gi(e,s,i){var o=lh(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},Hi(e))Ii(s,i);else if(i=Yg(e,s,i,o),i!==null){var a=L();mh(i,e,o,a),Ji(i,s,o)}}function ri(e,s,i){var o=lh(e),a={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(Hi(e))Ii(s,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var d=s.lastRenderedState,h=c(d,i);if(a.hasEagerState=!0,a.eagerState=h,He(h,d)){var g=s.interleaved;g===null?(a.next=a,Xg(s)):(a.next=g.next,g.next=a),s.interleaved=a;return}}catch{}finally{}i=Yg(e,s,a,o),i!==null&&(a=L(),mh(i,e,o,a),Ji(i,s,o))}}function Hi(e){var s=e.alternate;return e===N||s!==null&&s===N}function Ii(e,s){Th=Sh=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Ji(e,s,i){if(i&4194240){var o=s.lanes;o&=e.pendingLanes,i|=o,s.lanes=i,Cc(e,i)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(e,s){return ci().memoizedState=[e,s===void 0?null:s],e},useContext:Vg,useEffect:vi,useImperativeHandle:function(e,s,i){return i=i!=null?i.concat([e]):null,ti(4194308,4,yi.bind(null,s,e),i)},useLayoutEffect:function(e,s){return ti(4194308,4,e,s)},useInsertionEffect:function(e,s){return ti(4,2,e,s)},useMemo:function(e,s){var i=ci();return s=s===void 0?null:s,e=e(),i.memoizedState=[e,s],e},useReducer:function(e,s,i){var o=ci();return s=i!==void 0?i(s):s,o.memoizedState=o.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},o.queue=e,e=e.dispatch=Gi.bind(null,N,e),[o.memoizedState,e]},useRef:function(e){var s=ci();return e={current:e},s.memoizedState=e},useState:qi,useDebugValue:Ai,useDeferredValue:function(e){return ci().memoizedState=e},useTransition:function(){var e=qi(!1),s=e[0];return e=Ei.bind(null,e[1]),ci().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,i){var o=N,a=ci();if(I){if(i===void 0)throw Error(p(407));i=i()}else{if(i=s(),R===null)throw Error(p(349));Rh&30||ni(o,s,i)}a.memoizedState=i;var c={value:i,getSnapshot:s};return a.queue=c,vi(ki.bind(null,o,c,e),[e]),o.flags|=2048,li(9,mi.bind(null,o,c,i,s),void 0,null),i},useId:function(){var e=ci(),s=R.identifierPrefix;if(I){var i=sg,o=rg;i=(o&~(1<<32-oc(o)-1)).toString(32)+i,s=":"+s+"R"+i,i=Uh++,0<i&&(s+="H"+i.toString(32)),s+=":"}else i=Vh++,s=":"+s+"r"+i.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(e){var s=di();return Di(s,O.memoizedState,e)},useTransition:function(){var e=fi(ei)[0],s=di().memoizedState;return[e,s]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(e){var s=di();return O===null?s.memoizedState=e:Di(s,O.memoizedState,e)},useTransition:function(){var e=gi(ei)[0],s=di().memoizedState;return[e,s]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(e,s){try{var i="",o=s;do i+=Pa(o),o=o.return;while(o);var a=i}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:s,stack:a,digest:null}}function Li(e,s,i){return{value:e,source:null,stack:i??null,digest:s??null}}function Mi(e,s){try{console.error(s.value)}catch(i){setTimeout(function(){throw i})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(e,s,i){i=ch(-1,i),i.tag=3,i.payload={element:null};var o=s.value;return i.callback=function(){Pi||(Pi=!0,Qi=o),Mi(e,s)},i}function Ri(e,s,i){i=ch(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var a=s.value;i.payload=function(){return o(a)},i.callback=function(){Mi(e,s)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){Mi(e,s),typeof o!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var d=s.stack;this.componentDidCatch(s.value,{componentStack:d!==null?d:""})}),i}function Ti(e,s,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Ni;var a=new Set;o.set(s,a)}else a=o.get(s),a===void 0&&(a=new Set,o.set(s,a));a.has(i)||(a.add(i),e=Ui.bind(null,e,s,i),s.then(e,e))}function Vi(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Wi(e,s,i,o,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(s=ch(-1,1),s.tag=2,dh(i,s,1))),i.lanes|=1),e)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(e,s,i,o){s.child=e===null?Ch(s,null,i,o):Bh(s,e.child,i,o)}function Zi(e,s,i,o,a){i=i.render;var c=s.ref;return Tg(s,a),o=Xh(e,s,i,o,c,a),i=bi(),e!==null&&!Ug?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,$i(e,s,a)):(I&&i&&vg(s),s.flags|=1,Yi(e,s,o,a),s.child)}function aj(e,s,i,o,a){if(e===null){var c=i.type;return typeof c=="function"&&!bj(c)&&c.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(s.tag=15,s.type=c,cj(e,s,c,o,a)):(e=yh(i.type,null,o,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(c=e.child,!(e.lanes&a)){var d=c.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(d,o)&&e.ref===s.ref)return $i(e,s,a)}return s.flags|=1,e=wh(c,o),e.ref=s.ref,e.return=s,s.child=e}function cj(e,s,i,o,a){if(e!==null){var c=e.memoizedProps;if(Ie(c,o)&&e.ref===s.ref)if(Ug=!1,s.pendingProps=o=c,(e.lanes&a)!==0)e.flags&131072&&(Ug=!0);else return s.lanes=e.lanes,$i(e,s,a)}return dj(e,s,i,o,a)}function ej(e,s,i){var o=s.pendingProps,a=o.children,c=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=i;else{if(!(i&1073741824))return e=c!==null?c.baseLanes|i:i,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,G(fj,gj),gj|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:i,G(fj,gj),gj|=o}else c!==null?(o=c.baseLanes|i,s.memoizedState=null):o=i,G(fj,gj),gj|=o;return Yi(e,s,a,i),s.child}function hj(e,s){var i=s.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(s.flags|=512,s.flags|=2097152)}function dj(e,s,i,o,a){var c=Zf(i)?Xf:H.current;return c=Yf(s,c),Tg(s,a),i=Xh(e,s,i,o,c,a),o=bi(),e!==null&&!Ug?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,$i(e,s,a)):(I&&o&&vg(s),s.flags|=1,Yi(e,s,i,a),s.child)}function ij(e,s,i,o,a){if(Zf(i)){var c=!0;cg(s)}else c=!1;if(Tg(s,a),s.stateNode===null)jj(e,s),ph(s,i,o),rh(s,i,o,a),o=!0;else if(e===null){var d=s.stateNode,h=s.memoizedProps;d.props=h;var g=d.context,b=i.contextType;typeof b=="object"&&b!==null?b=Vg(b):(b=Zf(i)?Xf:H.current,b=Yf(s,b));var j=i.getDerivedStateFromProps,_=typeof j=="function"||typeof d.getSnapshotBeforeUpdate=="function";_||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==o||g!==b)&&qh(s,d,o,b),$g=!1;var $=s.memoizedState;d.state=$,gh(s,o,d,a),g=s.memoizedState,h!==o||$!==g||Wf.current||$g?(typeof j=="function"&&(kh(s,i,j,o),g=s.memoizedState),(h=$g||oh(s,i,h,o,$,g,b))?(_||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=g),d.props=o,d.state=g,d.context=b,o=h):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{d=s.stateNode,bh(e,s),h=s.memoizedProps,b=s.type===s.elementType?h:Lg(s.type,h),d.props=b,_=s.pendingProps,$=d.context,g=i.contextType,typeof g=="object"&&g!==null?g=Vg(g):(g=Zf(i)?Xf:H.current,g=Yf(s,g));var _e=i.getDerivedStateFromProps;(j=typeof _e=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==_||$!==g)&&qh(s,d,o,g),$g=!1,$=s.memoizedState,d.state=$,gh(s,o,d,a);var et=s.memoizedState;h!==_||$!==et||Wf.current||$g?(typeof _e=="function"&&(kh(s,i,_e,o),et=s.memoizedState),(b=$g||oh(s,i,b,o,$,et,g)||!1)?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,et,g),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,et,g)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&$===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&$===e.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=et),d.props=o,d.state=et,d.context=g,o=b):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&$===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&$===e.memoizedState||(s.flags|=1024),o=!1)}return kj(e,s,i,o,c,a)}function kj(e,s,i,o,a,c){hj(e,s);var d=(s.flags&128)!==0;if(!o&&!d)return a&&dg(s,i,!1),$i(e,s,c);o=s.stateNode,Xi.current=s;var h=d&&typeof i.getDerivedStateFromError!="function"?null:o.render();return s.flags|=1,e!==null&&d?(s.child=Bh(s,e.child,null,c),s.child=Bh(s,null,h,c)):Yi(e,s,h,c),s.memoizedState=o.state,a&&dg(s,i,!0),s.child}function lj(e){var s=e.stateNode;s.pendingContext?ag(e,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(e,s.context,!1),Ih(e,s.containerInfo)}function mj(e,s,i,o,a){return Ig(),Jg(a),s.flags|=256,Yi(e,s,i,o),s.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj(e,s,i){var o=s.pendingProps,a=M.current,c=!1,d=(s.flags&128)!==0,h;if((h=d)||(h=e!==null&&e.memoizedState===null?!1:(a&2)!==0),h?(c=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),G(M,a&1),e===null)return Eg(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(d=o.children,e=o.fallback,c?(o=s.mode,c=s.child,d={mode:"hidden",children:d},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=qj(d,o,0,null),e=Ah(e,o,i,null),c.return=s,e.return=s,c.sibling=e,s.child=c,s.child.memoizedState=oj(i),s.memoizedState=nj,e):rj(s,d));if(a=e.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return sj(e,s,d,o,h,a,i);if(c){c=o.fallback,d=s.mode,a=e.child,h=a.sibling;var g={mode:"hidden",children:o.children};return!(d&1)&&s.child!==a?(o=s.child,o.childLanes=0,o.pendingProps=g,s.deletions=null):(o=wh(a,g),o.subtreeFlags=a.subtreeFlags&14680064),h!==null?c=wh(h,c):(c=Ah(c,d,i,null),c.flags|=2),c.return=s,o.return=s,o.sibling=c,s.child=o,o=c,c=s.child,d=e.child.memoizedState,d=d===null?oj(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~i,s.memoizedState=nj,o}return c=e.child,e=c.sibling,o=wh(c,{mode:"visible",children:o.children}),!(s.mode&1)&&(o.lanes=i),o.return=s,o.sibling=null,e!==null&&(i=s.deletions,i===null?(s.deletions=[e],s.flags|=16):i.push(e)),s.child=o,s.memoizedState=null,o}function rj(e,s){return s=qj({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function tj(e,s,i,o){return o!==null&&Jg(o),Bh(s,e.child,null,i),e=rj(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function sj(e,s,i,o,a,c,d){if(i)return s.flags&256?(s.flags&=-257,o=Li(Error(p(422))),tj(e,s,d,o)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(c=o.fallback,a=s.mode,o=qj({mode:"visible",children:o.children},a,0,null),c=Ah(c,a,d,null),c.flags|=2,o.return=s,c.return=s,o.sibling=c,s.child=o,s.mode&1&&Bh(s,e.child,null,d),s.child.memoizedState=oj(d),s.memoizedState=nj,c);if(!(s.mode&1))return tj(e,s,d,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var h=o.dgst;return o=h,c=Error(p(419)),o=Li(c,o,void 0),tj(e,s,d,o)}if(h=(d&e.childLanes)!==0,Ug||h){if(o=R,o!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Zg(e,a),mh(o,e,a,-1))}return uj(),o=Li(Error(p(421))),tj(e,s,d,o)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=vj.bind(null,e),a._reactRetry=s,null):(e=c.treeContext,yg=Lf(a.nextSibling),xg=s,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=s),s=rj(s,o.children),s.flags|=4096,s)}function wj(e,s,i){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s),Sg(e.return,s,i)}function xj(e,s,i,o,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:a}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=i,c.tailMode=a)}function yj(e,s,i){var o=s.pendingProps,a=o.revealOrder,c=o.tail;if(Yi(e,s,o.children,i),o=M.current,o&2)o=o&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wj(e,i,s);else if(e.tag===19)wj(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(G(M,o),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(i=s.child,a=null;i!==null;)e=i.alternate,e!==null&&Mh(e)===null&&(a=i),i=i.sibling;i=a,i===null?(a=s.child,s.child=null):(a=i.sibling,i.sibling=null),xj(s,!1,a,i,c);break;case"backwards":for(i=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Mh(e)===null){s.child=a;break}e=a.sibling,a.sibling=i,i=a,a=e}xj(s,!0,i,null,c);break;case"together":xj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function jj(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function $i(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),hh|=s.lanes,!(i&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(p(153));if(s.child!==null){for(e=s.child,i=wh(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=wh(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function zj(e,s,i){switch(s.tag){case 3:lj(s),Ig();break;case 5:Kh(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:Ih(s,s.stateNode.containerInfo);break;case 10:var o=s.type._context,a=s.memoizedProps.value;G(Mg,o._currentValue),o._currentValue=a;break;case 13:if(o=s.memoizedState,o!==null)return o.dehydrated!==null?(G(M,M.current&1),s.flags|=128,null):i&s.child.childLanes?pj(e,s,i):(G(M,M.current&1),e=$i(e,s,i),e!==null?e.sibling:null);G(M,M.current&1);break;case 19:if(o=(i&s.childLanes)!==0,e.flags&128){if(o)return yj(e,s,i);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(M,M.current),o)break;return null;case 22:case 23:return s.lanes=0,ej(e,s,i)}return $i(e,s,i)}var Aj,Bj,Cj,Dj;Aj=function(e,s){for(var i=s.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Bj=function(){};Cj=function(e,s,i,o){var a=e.memoizedProps;if(a!==o){e=s.stateNode,Hh(Eh.current);var c=null;switch(i){case"input":a=Ya(e,a),o=Ya(e,o),c=[];break;case"select":a=A({},a,{value:void 0}),o=A({},o,{value:void 0}),c=[];break;case"textarea":a=gb(e,a),o=gb(e,o),c=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Bf)}ub(i,o);var d;i=null;for(b in a)if(!o.hasOwnProperty(b)&&a.hasOwnProperty(b)&&a[b]!=null)if(b==="style"){var h=a[b];for(d in h)h.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea.hasOwnProperty(b)?c||(c=[]):(c=c||[]).push(b,null));for(b in o){var g=o[b];if(h=a!=null?a[b]:void 0,o.hasOwnProperty(b)&&g!==h&&(g!=null||h!=null))if(b==="style")if(h){for(d in h)!h.hasOwnProperty(d)||g&&g.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in g)g.hasOwnProperty(d)&&h[d]!==g[d]&&(i||(i={}),i[d]=g[d])}else i||(c||(c=[]),c.push(b,i)),i=g;else b==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(c=c||[]).push(b,g)):b==="children"?typeof g!="string"&&typeof g!="number"||(c=c||[]).push(b,""+g):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(ea.hasOwnProperty(b)?(g!=null&&b==="onScroll"&&D("scroll",e),c||h===g||(c=[])):(c=c||[]).push(b,g))}i&&(c=c||[]).push("style",i);var b=c;(s.updateQueue=b)&&(s.flags|=4)}};Dj=function(e,s,i,o){i!==o&&(s.flags|=4)};function Ej(e,s){if(!I)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function S(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(s)for(var a=e.child;a!==null;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=o,e.childLanes=i,s}function Fj(e,s,i){var o=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf(s.type)&&$f(),S(s),null;case 3:return o=s.stateNode,Jh(),E(Wf),E(H),Oh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Gg(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(e,s),S(s),null;case 5:Lh(s);var a=Hh(Gh.current);if(i=s.type,e!==null&&s.stateNode!=null)Cj(e,s,i,o,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!o){if(s.stateNode===null)throw Error(p(166));return S(s),null}if(e=Hh(Eh.current),Gg(s)){o=s.stateNode,i=s.type;var c=s.memoizedProps;switch(o[Of]=s,o[Pf]=c,e=(s.mode&1)!==0,i){case"dialog":D("cancel",o),D("close",o);break;case"iframe":case"object":case"embed":D("load",o);break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],o);break;case"source":D("error",o);break;case"img":case"image":case"link":D("error",o),D("load",o);break;case"details":D("toggle",o);break;case"input":Za(o,c),D("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},D("invalid",o);break;case"textarea":hb(o,c),D("invalid",o)}ub(i,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var h=c[d];d==="children"?typeof h=="string"?o.textContent!==h&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,h,e),a=["children",h]):typeof h=="number"&&o.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,h,e),a=["children",""+h]):ea.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&D("scroll",o)}switch(i){case"input":Va(o),db(o,c,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=Bf)}o=a,s.updateQueue=o,o!==null&&(s.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=d.createElement(i,{is:o.is}):(e=d.createElement(i),i==="select"&&(d=e,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):e=d.createElementNS(e,i),e[Of]=s,e[Pf]=o,Aj(e,s,!1,!1),s.stateNode=e;e:{switch(d=vb(i,o),i){case"dialog":D("cancel",e),D("close",e),a=o;break;case"iframe":case"object":case"embed":D("load",e),a=o;break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],e);a=o;break;case"source":D("error",e),a=o;break;case"img":case"image":case"link":D("error",e),D("load",e),a=o;break;case"details":D("toggle",e),a=o;break;case"input":Za(e,o),a=Ya(e,o),D("invalid",e);break;case"option":a=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},a=A({},o,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,o),a=gb(e,o),D("invalid",e);break;default:a=o}ub(i,a),h=a;for(c in h)if(h.hasOwnProperty(c)){var g=h[c];c==="style"?sb(e,g):c==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&nb(e,g)):c==="children"?typeof g=="string"?(i!=="textarea"||g!=="")&&ob(e,g):typeof g=="number"&&ob(e,""+g):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?g!=null&&c==="onScroll"&&D("scroll",e):g!=null&&ta(e,c,g,d))}switch(i){case"input":Va(e),db(e,o,!1);break;case"textarea":Va(e),jb(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Sa(o.value));break;case"select":e.multiple=!!o.multiple,c=o.value,c!=null?fb(e,!!o.multiple,c,!1):o.defaultValue!=null&&fb(e,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(e&&s.stateNode!=null)Dj(e,s,e.memoizedProps,o);else{if(typeof o!="string"&&s.stateNode===null)throw Error(p(166));if(i=Hh(Gh.current),Hh(Eh.current),Gg(s)){if(o=s.stateNode,i=s.memoizedProps,o[Of]=s,(c=o.nodeValue!==i)&&(e=xg,e!==null))switch(e.tag){case 3:Af(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,i,(e.mode&1)!==0)}c&&(s.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Of]=s,s.stateNode=o}return S(s),null;case 13:if(E(M),o=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,c=!1;else if(c=Gg(s),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),c=!1}else zg!==null&&(Gj(zg),zg=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=i,s):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(s.child.flags|=8192,s.mode&1&&(e===null||M.current&1?T===0&&(T=3):uj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return Jh(),Bj(e,s),e===null&&sf(s.stateNode.containerInfo),S(s),null;case 10:return Rg(s.type._context),S(s),null;case 17:return Zf(s.type)&&$f(),S(s),null;case 19:if(E(M),c=s.memoizedState,c===null)return S(s),null;if(o=(s.flags&128)!==0,d=c.rendering,d===null)if(o)Ej(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(d=Mh(e),d!==null){for(s.flags|=128,Ej(c,!1),o=d.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),s.subtreeFlags=0,o=i,i=s.child;i!==null;)c=i,e=o,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return G(M,M.current&1|2),s.child}e=e.sibling}c.tail!==null&&B()>Hj&&(s.flags|=128,o=!0,Ej(c,!1),s.lanes=4194304)}else{if(!o)if(e=Mh(d),e!==null){if(s.flags|=128,o=!0,i=e.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),Ej(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(s),null}else 2*B()-c.renderingStartTime>Hj&&i!==1073741824&&(s.flags|=128,o=!0,Ej(c,!1),s.lanes=4194304);c.isBackwards?(d.sibling=s.child,s.child=d):(i=c.last,i!==null?i.sibling=d:s.child=d,c.last=d)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=B(),s.sibling=null,i=M.current,G(M,o?i&1|2:i&1),s):(S(s),null);case 22:case 23:return Ij(),o=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(s.flags|=8192),o&&s.mode&1?gj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Jj(e,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Jh(),E(Wf),E(H),Oh(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Lh(s),null;case 13:if(E(M),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Ig()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(s.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(e,s){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){W(e,s,o)}else i.current=null}function Nj(e,s,i){try{i()}catch(o){W(e,s,o)}}var Oj=!1;function Pj(e,s){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var a=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var d=0,h=-1,g=-1,b=0,j=0,_=e,$=null;t:for(;;){for(var _e;_!==i||a!==0&&_.nodeType!==3||(h=d+a),_!==c||o!==0&&_.nodeType!==3||(g=d+o),_.nodeType===3&&(d+=_.nodeValue.length),(_e=_.firstChild)!==null;)$=_,_=_e;for(;;){if(_===e)break t;if($===i&&++b===a&&(h=d),$===c&&++j===o&&(g=d),(_e=_.nextSibling)!==null)break;_=$,$=_.parentNode}_=_e}i=h===-1||g===-1?null:{start:h,end:g}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:e,selectionRange:i},dd=!1,V=s;V!==null;)if(s=V,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,V=e;else for(;V!==null;){s=V;try{var et=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var ct=et.memoizedProps,dt=et.memoizedState,nt=s.stateNode,it=nt.getSnapshotBeforeUpdate(s.elementType===s.type?ct:Lg(s.type,ct),dt);nt.__reactInternalSnapshotBeforeUpdate=it}break;case 3:var st=s.stateNode.containerInfo;st.nodeType===1?st.textContent="":st.nodeType===9&&st.documentElement&&st.removeChild(st.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(lt){W(s,s.return,lt)}if(e=s.sibling,e!==null){e.return=s.return,V=e;break}V=s.return}return et=Oj,Oj=!1,et}function Qj(e,s,i){var o=s.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&Nj(s,i,c)}a=a.next}while(a!==o)}}function Rj(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==s)}}function Sj(e){var s=e.ref;if(s!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof s=="function"?s(e):s.current=e}}function Tj(e){var s=e.alternate;s!==null&&(e.alternate=null,Tj(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj(e){return e.tag===5||e.tag===3||e.tag===4}function Vj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wj(e,s,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?i.nodeType===8?i.parentNode.insertBefore(e,s):i.insertBefore(e,s):(i.nodeType===8?(s=i.parentNode,s.insertBefore(e,i)):(s=i,s.appendChild(e)),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Bf));else if(o!==4&&(e=e.child,e!==null))for(Wj(e,s,i),e=e.sibling;e!==null;)Wj(e,s,i),e=e.sibling}function Xj(e,s,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Xj(e,s,i),e=e.sibling;e!==null;)Xj(e,s,i),e=e.sibling}var X=null,Yj=!1;function Zj(e,s,i){for(i=i.child;i!==null;)ak(e,s,i),i=i.sibling}function ak(e,s,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Mj(i,s);case 6:var o=X,a=Yj;X=null,Zj(e,s,i),X=o,Yj=a,X!==null&&(Yj?(e=X,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):X.removeChild(i.stateNode));break;case 18:X!==null&&(Yj?(e=X,i=i.stateNode,e.nodeType===8?Kf(e.parentNode,i):e.nodeType===1&&Kf(e,i),bd(e)):Kf(X,i.stateNode));break;case 4:o=X,a=Yj,X=i.stateNode.containerInfo,Yj=!0,Zj(e,s,i),X=o,Yj=a;break;case 0:case 11:case 14:case 15:if(!U&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Nj(i,s,d),a=a.next}while(a!==o)}Zj(e,s,i);break;case 1:if(!U&&(Mj(i,s),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(h){W(i,s,h)}Zj(e,s,i);break;case 21:Zj(e,s,i);break;case 22:i.mode&1?(U=(o=U)||i.memoizedState!==null,Zj(e,s,i),U=o):Zj(e,s,i);break;default:Zj(e,s,i)}}function bk(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Lj),s.forEach(function(o){var a=ck.bind(null,e,o);i.has(o)||(i.add(o),o.then(a,a))})}}function dk(e,s){var i=s.deletions;if(i!==null)for(var o=0;o<i.length;o++){var a=i[o];try{var c=e,d=s,h=d;e:for(;h!==null;){switch(h.tag){case 5:X=h.stateNode,Yj=!1;break e;case 3:X=h.stateNode.containerInfo,Yj=!0;break e;case 4:X=h.stateNode.containerInfo,Yj=!0;break e}h=h.return}if(X===null)throw Error(p(160));ak(c,d,a),X=null,Yj=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(b){W(a,s,b)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ek(s,e),s=s.sibling}function ek(e,s){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dk(s,e),fk(e),o&4){try{Qj(3,e,e.return),Rj(3,e)}catch(ct){W(e,e.return,ct)}try{Qj(5,e,e.return)}catch(ct){W(e,e.return,ct)}}break;case 1:dk(s,e),fk(e),o&512&&i!==null&&Mj(i,i.return);break;case 5:if(dk(s,e),fk(e),o&512&&i!==null&&Mj(i,i.return),e.flags&32){var a=e.stateNode;try{ob(a,"")}catch(ct){W(e,e.return,ct)}}if(o&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,d=i!==null?i.memoizedProps:c,h=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&ab(a,c),vb(h,d);var b=vb(h,c);for(d=0;d<g.length;d+=2){var j=g[d],_=g[d+1];j==="style"?sb(a,_):j==="dangerouslySetInnerHTML"?nb(a,_):j==="children"?ob(a,_):ta(a,j,_,b)}switch(h){case"input":bb(a,c);break;case"textarea":ib(a,c);break;case"select":var $=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var _e=c.value;_e!=null?fb(a,!!c.multiple,_e,!1):$!==!!c.multiple&&(c.defaultValue!=null?fb(a,!!c.multiple,c.defaultValue,!0):fb(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(ct){W(e,e.return,ct)}}break;case 6:if(dk(s,e),fk(e),o&4){if(e.stateNode===null)throw Error(p(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(ct){W(e,e.return,ct)}}break;case 3:if(dk(s,e),fk(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(ct){W(e,e.return,ct)}break;case 4:dk(s,e),fk(e);break;case 13:dk(s,e),fk(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(gk=B())),o&4&&bk(e);break;case 22:if(j=i!==null&&i.memoizedState!==null,e.mode&1?(U=(b=U)||j,dk(s,e),U=b):dk(s,e),fk(e),o&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!j&&e.mode&1)for(V=e,j=e.child;j!==null;){for(_=V=j;V!==null;){switch($=V,_e=$.child,$.tag){case 0:case 11:case 14:case 15:Qj(4,$,$.return);break;case 1:Mj($,$.return);var et=$.stateNode;if(typeof et.componentWillUnmount=="function"){o=$,i=$.return;try{s=o,et.props=s.memoizedProps,et.state=s.memoizedState,et.componentWillUnmount()}catch(ct){W(o,i,ct)}}break;case 5:Mj($,$.return);break;case 22:if($.memoizedState!==null){hk(_);continue}}_e!==null?(_e.return=$,V=_e):hk(_)}j=j.sibling}e:for(j=null,_=e;;){if(_.tag===5){if(j===null){j=_;try{a=_.stateNode,b?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=_.stateNode,g=_.memoizedProps.style,d=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=rb("display",d))}catch(ct){W(e,e.return,ct)}}}else if(_.tag===6){if(j===null)try{_.stateNode.nodeValue=b?"":_.memoizedProps}catch(ct){W(e,e.return,ct)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;j===_&&(j=null),_=_.return}j===_&&(j=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:dk(s,e),fk(e),o&4&&bk(e);break;case 21:break;default:dk(s,e),fk(e)}}function fk(e){var s=e.flags;if(s&2){try{e:{for(var i=e.return;i!==null;){if(Uj(i)){var o=i;break e}i=i.return}throw Error(p(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(ob(a,""),o.flags&=-33);var c=Vj(e);Xj(e,c,a);break;case 3:case 4:var d=o.stateNode.containerInfo,h=Vj(e);Wj(e,h,d);break;default:throw Error(p(161))}}catch(g){W(e,e.return,g)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function ik(e,s,i){V=e,jk(e)}function jk(e,s,i){for(var o=(e.mode&1)!==0;V!==null;){var a=V,c=a.child;if(a.tag===22&&o){var d=a.memoizedState!==null||Kj;if(!d){var h=a.alternate,g=h!==null&&h.memoizedState!==null||U;h=Kj;var b=U;if(Kj=d,(U=g)&&!b)for(V=a;V!==null;)d=V,g=d.child,d.tag===22&&d.memoizedState!==null?kk(a):g!==null?(g.return=d,V=g):kk(a);for(;c!==null;)V=c,jk(c),c=c.sibling;V=a,Kj=h,U=b}lk(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V=c):lk(e)}}function lk(e){for(;V!==null;){var s=V;if(s.flags&8772){var i=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Rj(5,s);break;case 1:var o=s.stateNode;if(s.flags&4&&!U)if(i===null)o.componentDidMount();else{var a=s.elementType===s.type?i.memoizedProps:Lg(s.type,i.memoizedProps);o.componentDidUpdate(a,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&ih(s,c,o);break;case 3:var d=s.updateQueue;if(d!==null){if(i=null,s.child!==null)switch(s.child.tag){case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}ih(s,d,i)}break;case 5:var h=s.stateNode;if(i===null&&s.flags&4){i=h;var g=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&i.focus();break;case"img":g.src&&(i.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var b=s.alternate;if(b!==null){var j=b.memoizedState;if(j!==null){var _=j.dehydrated;_!==null&&bd(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||s.flags&512&&Sj(s)}catch($){W(s,s.return,$)}}if(s===e){V=null;break}if(i=s.sibling,i!==null){i.return=s.return,V=i;break}V=s.return}}function hk(e){for(;V!==null;){var s=V;if(s===e){V=null;break}var i=s.sibling;if(i!==null){i.return=s.return,V=i;break}V=s.return}}function kk(e){for(;V!==null;){var s=V;try{switch(s.tag){case 0:case 11:case 15:var i=s.return;try{Rj(4,s)}catch(g){W(s,i,g)}break;case 1:var o=s.stateNode;if(typeof o.componentDidMount=="function"){var a=s.return;try{o.componentDidMount()}catch(g){W(s,a,g)}}var c=s.return;try{Sj(s)}catch(g){W(s,c,g)}break;case 5:var d=s.return;try{Sj(s)}catch(g){W(s,d,g)}}}catch(g){W(s,s.return,g)}if(s===e){V=null;break}var h=s.sibling;if(h!==null){h.return=s.return,V=h;break}V=s.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function mh(e,s,i,o){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(e,i,o),(!(K&2)||e!==R)&&(e===R&&(!(K&2)&&(rk|=i),T===4&&Dk(e,Z)),Ek(e,o),i===1&&K===0&&!(s.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(e,s){var i=e.callbackNode;wc(e,s);var o=uc(e,e===R?Z:0);if(o===0)i!==null&&bc(i),e.callbackNode=null,e.callbackPriority=0;else if(s=o&-o,e.callbackPriority!==s){if(i!=null&&bc(i),s===1)e.tag===0?ig(Fk.bind(null,e)):hg(Fk.bind(null,e)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(o)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Gk(i,Hk.bind(null,e))}e.callbackPriority=s,e.callbackNode=i}}function Hk(e,s){if(Bk=-1,Ck=0,K&6)throw Error(p(327));var i=e.callbackNode;if(Ik()&&e.callbackNode!==i)return null;var o=uc(e,e===R?Z:0);if(o===0)return null;if(o&30||o&e.expiredLanes||s)s=Jk(e,o);else{s=o;var a=K;K|=2;var c=Kk();(R!==e||Z!==s)&&(vk=null,Hj=B()+500,Lk(e,s));do try{Mk();break}catch(h){Nk(e,h)}while(1);Qg(),nk.current=c,K=a,Y!==null?s=0:(R=null,Z=0,s=T)}if(s!==0){if(s===2&&(a=xc(e),a!==0&&(o=a,s=Ok(e,a))),s===1)throw i=qk,Lk(e,0),Dk(e,o),Ek(e,B()),i;if(s===6)Dk(e,o);else{if(a=e.current.alternate,!(o&30)&&!Pk(a)&&(s=Jk(e,o),s===2&&(c=xc(e),c!==0&&(o=c,s=Ok(e,c))),s===1))throw i=qk,Lk(e,0),Dk(e,o),Ek(e,B()),i;switch(e.finishedWork=a,e.finishedLanes=o,s){case 0:case 1:throw Error(p(345));case 2:Qk(e,uk,vk);break;case 3:if(Dk(e,o),(o&130023424)===o&&(s=gk+500-B(),10<s)){if(uc(e,0)!==0)break;if(a=e.suspendedLanes,(a&o)!==o){L(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ff(Qk.bind(null,e,uk,vk),s);break}Qk(e,uk,vk);break;case 4:if(Dk(e,o),(o&4194240)===o)break;for(s=e.eventTimes,a=-1;0<o;){var d=31-oc(o);c=1<<d,d=s[d],d>a&&(a=d),o&=~c}if(o=a,o=B()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*mk(o/1960))-o,10<o){e.timeoutHandle=Ff(Qk.bind(null,e,uk,vk),o);break}Qk(e,uk,vk);break;case 5:Qk(e,uk,vk);break;default:throw Error(p(329))}}}return Ek(e,B()),e.callbackNode===i?Hk.bind(null,e):null}function Ok(e,s){var i=tk;return e.current.memoizedState.isDehydrated&&(Lk(e,s).flags|=256),e=Jk(e,s),e!==2&&(s=uk,uk=i,s!==null&&Gj(s)),e}function Gj(e){uk===null?uk=e:uk.push.apply(uk,e)}function Pk(e){for(var s=e;;){if(s.flags&16384){var i=s.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var a=i[o],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Dk(e,s){for(s&=~sk,s&=~rk,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var i=31-oc(s),o=1<<i;e[i]=-1,s&=~o}}function Fk(e){if(K&6)throw Error(p(327));Ik();var s=uc(e,0);if(!(s&1))return Ek(e,B()),null;var i=Jk(e,s);if(e.tag!==0&&i===2){var o=xc(e);o!==0&&(s=o,i=Ok(e,o))}if(i===1)throw i=qk,Lk(e,0),Dk(e,s),Ek(e,B()),i;if(i===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Qk(e,uk,vk),Ek(e,B()),null}function Rk(e,s){var i=K;K|=1;try{return e(s)}finally{K=i,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(e){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var s=K;K|=1;var i=pk.transition,o=C;try{if(pk.transition=null,C=1,e)return e()}finally{C=o,pk.transition=i,K=s,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(e,s){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var o=i;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(o);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(o.type._context);break;case 22:case 23:Ij()}i=i.return}if(R=e,Y=e=wh(e.current,null),Z=gj=s,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(s=0;s<Wg.length;s++)if(i=Wg[s],o=i.interleaved,o!==null){i.interleaved=null;var a=o.next,c=i.pending;if(c!==null){var d=c.next;c.next=a,o.next=d}i.pending=o}Wg=null}return e}function Nk(e,s){do{var i=Y;try{if(Qg(),Ph.current=ai,Sh){for(var o=N.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,i===null||i.return===null){T=1,qk=s,Y=null;break}e:{var c=e,d=i.return,h=i,g=s;if(s=Z,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var b=g,j=h,_=j.tag;if(!(j.mode&1)&&(_===0||_===11||_===15)){var $=j.alternate;$?(j.updateQueue=$.updateQueue,j.memoizedState=$.memoizedState,j.lanes=$.lanes):(j.updateQueue=null,j.memoizedState=null)}var _e=Vi(d);if(_e!==null){_e.flags&=-257,Wi(_e,d,h,c,s),_e.mode&1&&Ti(c,b,s),s=_e,g=b;var et=s.updateQueue;if(et===null){var ct=new Set;ct.add(g),s.updateQueue=ct}else et.add(g);break e}else{if(!(s&1)){Ti(c,b,s),uj();break e}g=Error(p(426))}}else if(I&&h.mode&1){var dt=Vi(d);if(dt!==null){!(dt.flags&65536)&&(dt.flags|=256),Wi(dt,d,h,c,s),Jg(Ki(g,h));break e}}c=g=Ki(g,h),T!==4&&(T=2),tk===null?tk=[c]:tk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var nt=Oi(c,g,s);fh(c,nt);break e;case 1:h=g;var it=c.type,st=c.stateNode;if(!(c.flags&128)&&(typeof it.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Si===null||!Si.has(st)))){c.flags|=65536,s&=-s,c.lanes|=s;var lt=Ri(c,h,s);fh(c,lt);break e}}c=c.return}while(c!==null)}Tk(i)}catch(ht){s=ht,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(1)}function Kk(){var e=nk.current;return nk.current=ai,e===null?ai:e}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(e,s){var i=K;K|=2;var o=Kk();(R!==e||Z!==s)&&(vk=null,Lk(e,s));do try{Uk();break}catch(a){Nk(e,a)}while(1);if(Qg(),K=i,nk.current=o,Y!==null)throw Error(p(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(e){var s=Wk(e.alternate,e,gj);e.memoizedProps=e.pendingProps,s===null?Tk(e):Y=s,ok.current=null}function Tk(e){var s=e;do{var i=s.alternate;if(e=s.return,s.flags&32768){if(i=Jj(i,s),i!==null){i.flags&=32767,Y=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(i=Fj(i,s,gj),i!==null){Y=i;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=e}while(s!==null);T===0&&(T=5)}function Qk(e,s,i){var o=C,a=pk.transition;try{pk.transition=null,C=1,Xk(e,s,i,o)}finally{pk.transition=a,C=o}return null}function Xk(e,s,i,o){do Ik();while(xk!==null);if(K&6)throw Error(p(327));i=e.finishedWork;var a=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=i.lanes|i.childLanes;if(Bc(e,c),e===R&&(Y=R=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),c=(i.flags&15990)!==0,i.subtreeFlags&15990||c){c=pk.transition,pk.transition=null;var d=C;C=1;var h=K;K|=4,ok.current=null,Pj(e,i),ek(i,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=i,ik(i),dc(),K=h,C=d,pk.transition=c}else e.current=i;if(wk&&(wk=!1,xk=e,yk=a),c=e.pendingLanes,c===0&&(Si=null),mc(i.stateNode),Ek(e,B()),s!==null)for(o=e.onRecoverableError,i=0;i<s.length;i++)a=s[i],o(a.value,{componentStack:a.stack,digest:a.digest});if(Pi)throw Pi=!1,e=Qi,Qi=null,e;return yk&1&&e.tag!==0&&Ik(),c=e.pendingLanes,c&1?e===Ak?zk++:(zk=0,Ak=e):zk=0,jg(),null}function Ik(){if(xk!==null){var e=Dc(yk),s=pk.transition,i=C;try{if(pk.transition=null,C=16>e?16:e,xk===null)var o=!1;else{if(e=xk,xk=null,yk=0,K&6)throw Error(p(331));var a=K;for(K|=4,V=e.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var h=c.deletions;if(h!==null){for(var g=0;g<h.length;g++){var b=h[g];for(V=b;V!==null;){var j=V;switch(j.tag){case 0:case 11:case 15:Qj(8,j,c)}var _=j.child;if(_!==null)_.return=j,V=_;else for(;V!==null;){j=V;var $=j.sibling,_e=j.return;if(Tj(j),j===b){V=null;break}if($!==null){$.return=_e,V=$;break}V=_e}}}var et=c.alternate;if(et!==null){var ct=et.child;if(ct!==null){et.child=null;do{var dt=ct.sibling;ct.sibling=null,ct=dt}while(ct!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Qj(9,c,c.return)}var nt=c.sibling;if(nt!==null){nt.return=c.return,V=nt;break e}V=c.return}}var it=e.current;for(V=it;V!==null;){d=V;var st=d.child;if(d.subtreeFlags&2064&&st!==null)st.return=d,V=st;else e:for(d=it;V!==null;){if(h=V,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Rj(9,h)}}catch(ht){W(h,h.return,ht)}if(h===d){V=null;break e}var lt=h.sibling;if(lt!==null){lt.return=h.return,V=lt;break e}V=h.return}}if(K=a,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}o=!0}return o}finally{C=i,pk.transition=s}}return!1}function Yk(e,s,i){s=Ki(i,s),s=Oi(e,s,1),e=dh(e,s,1),s=L(),e!==null&&(Ac(e,1,s),Ek(e,s))}function W(e,s,i){if(e.tag===3)Yk(e,e,i);else for(;s!==null;){if(s.tag===3){Yk(s,e,i);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Si===null||!Si.has(o))){e=Ki(i,e),e=Ri(s,e,1),s=dh(s,e,1),e=L(),s!==null&&(Ac(s,1,e),Ek(s,e));break}}s=s.return}}function Ui(e,s,i){var o=e.pingCache;o!==null&&o.delete(s),s=L(),e.pingedLanes|=e.suspendedLanes&i,R===e&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(e,0):sk|=i),Ek(e,s)}function Zk(e,s){s===0&&(e.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var i=L();e=Zg(e,s),e!==null&&(Ac(e,s,i),Ek(e,i))}function vj(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),Zk(e,i)}function ck(e,s){var i=0;switch(e.tag){case 13:var o=e.stateNode,a=e.memoizedState;a!==null&&(i=a.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(p(314))}o!==null&&o.delete(s),Zk(e,i)}var Wk;Wk=function(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps||Wf.current)Ug=!0;else{if(!(e.lanes&i)&&!(s.flags&128))return Ug=!1,zj(e,s,i);Ug=!!(e.flags&131072)}else Ug=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var o=s.type;jj(e,s),e=s.pendingProps;var a=Yf(s,H.current);Tg(s,i),a=Xh(null,s,o,e,a,i);var c=bi();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(o)?(c=!0,cg(s)):c=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ah(s),a.updater=nh,s.stateNode=a,a._reactInternals=s,rh(s,o,e,i),s=kj(null,s,o,!0,c,i)):(s.tag=0,I&&c&&vg(s),Yi(null,s,a,i),s=s.child),s;case 16:o=s.elementType;e:{switch(jj(e,s),e=s.pendingProps,a=o._init,o=a(o._payload),s.type=o,a=s.tag=$k(o),e=Lg(o,e),a){case 0:s=dj(null,s,o,e,i);break e;case 1:s=ij(null,s,o,e,i);break e;case 11:s=Zi(null,s,o,e,i);break e;case 14:s=aj(null,s,o,Lg(o.type,e),i);break e}throw Error(p(306,o,""))}return s;case 0:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Lg(o,a),dj(e,s,o,a,i);case 1:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Lg(o,a),ij(e,s,o,a,i);case 3:e:{if(lj(s),e===null)throw Error(p(387));o=s.pendingProps,c=s.memoizedState,a=c.element,bh(e,s),gh(s,o,null,i);var d=s.memoizedState;if(o=d.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){a=Ki(Error(p(423)),s),s=mj(e,s,o,i,a);break e}else if(o!==a){a=Ki(Error(p(424)),s),s=mj(e,s,o,i,a);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,i=Ch(s,null,o,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),o===a){s=$i(e,s,i);break e}Yi(e,s,o,i)}s=s.child}return s;case 5:return Kh(s),e===null&&Eg(s),o=s.type,a=s.pendingProps,c=e!==null?e.memoizedProps:null,d=a.children,Ef(o,a)?d=null:c!==null&&Ef(o,c)&&(s.flags|=32),hj(e,s),Yi(e,s,d,i),s.child;case 6:return e===null&&Eg(s),null;case 13:return pj(e,s,i);case 4:return Ih(s,s.stateNode.containerInfo),o=s.pendingProps,e===null?s.child=Bh(s,null,o,i):Yi(e,s,o,i),s.child;case 11:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Lg(o,a),Zi(e,s,o,a,i);case 7:return Yi(e,s,s.pendingProps,i),s.child;case 8:return Yi(e,s,s.pendingProps.children,i),s.child;case 12:return Yi(e,s,s.pendingProps.children,i),s.child;case 10:e:{if(o=s.type._context,a=s.pendingProps,c=s.memoizedProps,d=a.value,G(Mg,o._currentValue),o._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===a.children&&!Wf.current){s=$i(e,s,i);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var h=c.dependencies;if(h!==null){d=c.child;for(var g=h.firstContext;g!==null;){if(g.context===o){if(c.tag===1){g=ch(-1,i&-i),g.tag=2;var b=c.updateQueue;if(b!==null){b=b.shared;var j=b.pending;j===null?g.next=g:(g.next=j.next,j.next=g),b.pending=g}}c.lanes|=i,g=c.alternate,g!==null&&(g.lanes|=i),Sg(c.return,i,s),h.lanes|=i;break}g=g.next}}else if(c.tag===10)d=c.type===s.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=i,h=d.alternate,h!==null&&(h.lanes|=i),Sg(d,i,s),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===s){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Yi(e,s,a.children,i),s=s.child}return s;case 9:return a=s.type,o=s.pendingProps.children,Tg(s,i),a=Vg(a),o=o(a),s.flags|=1,Yi(e,s,o,i),s.child;case 14:return o=s.type,a=Lg(o,s.pendingProps),a=Lg(o.type,a),aj(e,s,o,a,i);case 15:return cj(e,s,s.type,s.pendingProps,i);case 17:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Lg(o,a),jj(e,s),s.tag=1,Zf(o)?(e=!0,cg(s)):e=!1,Tg(s,i),ph(s,o,a),rh(s,o,a,i),kj(null,s,o,!0,e,i);case 19:return yj(e,s,i);case 22:return ej(e,s,i)}throw Error(p(156,s.tag))};function Gk(e,s){return ac(e,s)}function al(e,s,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,s,i,o){return new al(e,s,i,o)}function bj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $k(e){if(typeof e=="function")return bj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function wh(e,s){var i=e.alternate;return i===null?(i=Bg(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function yh(e,s,i,o,a,c){var d=2;if(o=e,typeof e=="function")bj(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ya:return Ah(i.children,a,c,s);case za:d=8,a|=8;break;case Aa:return e=Bg(12,i,s,a|2),e.elementType=Aa,e.lanes=c,e;case Ea:return e=Bg(13,i,s,a),e.elementType=Ea,e.lanes=c,e;case Fa:return e=Bg(19,i,s,a),e.elementType=Fa,e.lanes=c,e;case Ia:return qj(i,a,c,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,o=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return s=Bg(d,i,s,a),s.elementType=e,s.type=o,s.lanes=c,s}function Ah(e,s,i,o){return e=Bg(7,e,o,s),e.lanes=i,e}function qj(e,s,i,o){return e=Bg(22,e,o,s),e.elementType=Ia,e.lanes=i,e.stateNode={isHidden:!1},e}function xh(e,s,i){return e=Bg(6,e,null,s),e.lanes=i,e}function zh(e,s,i){return s=Bg(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function bl(e,s,i,o,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cl(e,s,i,o,a,c,d,h,g){return e=new bl(e,s,i,h,g),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Bg(3,null,null,s),e.current=c,c.stateNode=e,c.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(c),e}function dl(e,s,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:o==null?null:""+o,children:e,containerInfo:s,implementation:i}}function el(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(e.tag===1){var i=e.type;if(Zf(i))return bg(e,i,s)}return s}function fl(e,s,i,o,a,c,d,h,g){return e=cl(i,o,!0,e,a,c,d,h,g),e.context=el(null),i=e.current,o=L(),a=lh(i),c=ch(o,a),c.callback=s??null,dh(i,c,a),e.current.lanes=a,Ac(e,a,o),Ek(e,o),e}function gl(e,s,i,o){var a=s.current,c=L(),d=lh(a);return i=el(i),s.context===null?s.context=i:s.pendingContext=i,s=ch(c,d),s.payload={element:e},o=o===void 0?null:o,o!==null&&(s.callback=o),e=dh(a,s,d),e!==null&&(mh(e,a,d,c),eh(e,a,d)),d}function hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function il(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function jl(e,s){il(e,s),(e=e.alternate)&&il(e,s)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(e){console.error(e)};function ml(e){this._internalRoot=e}nl.prototype.render=ml.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(p(409));gl(e,s,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Sk(function(){gl(null,e,null,null)}),s[uf]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var s=Hc();e={blockedOn:null,target:e,priority:s};for(var i=0;i<Qc.length&&s!==0&&s<Qc[i].priority;i++);Qc.splice(i,0,e),i===0&&Vc(e)}};function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(e,s,i,o,a){if(a){if(typeof o=="function"){var c=o;o=function(){var b=hl(d);c.call(b)}}var d=fl(s,o,e,0,null,!1,!1,"",ql);return e._reactRootContainer=d,e[uf]=d.current,sf(e.nodeType===8?e.parentNode:e),Sk(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof o=="function"){var h=o;o=function(){var b=hl(g);h.call(b)}}var g=cl(e,0,!1,null,null,!1,!1,"",ql);return e._reactRootContainer=g,e[uf]=g.current,sf(e.nodeType===8?e.parentNode:e),Sk(function(){gl(s,g,i,o)}),g}function sl(e,s,i,o,a){var c=i._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var h=a;a=function(){var g=hl(d);h.call(g)}}gl(s,d,e,a)}else d=rl(i,s,e,a,o);return hl(d)}Ec=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var i=tc(s.pendingLanes);i!==0&&(Cc(s,i|1),Ek(s,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var o=Zg(e,1);if(o!==null){var a=L();mh(o,e,1,a)}}),jl(e,1)}};Fc=function(e){if(e.tag===13){var s=Zg(e,134217728);if(s!==null){var i=L();mh(s,e,134217728,i)}jl(e,134217728)}};Gc=function(e){if(e.tag===13){var s=lh(e),i=Zg(e,s);if(i!==null){var o=L();mh(i,e,s,o)}jl(e,s)}};Hc=function(){return C};Ic=function(e,s){var i=C;try{return C=e,s()}finally{C=i}};yb=function(e,s,i){switch(s){case"input":if(bb(e,i),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<i.length;s++){var o=i[s];if(o!==e&&o.form===e.form){var a=Db(o);if(!a)throw Error(p(90));Wa(o),bb(o,a)}}}break;case"textarea":ib(e,i);break;case"select":s=i.value,s!=null&&fb(e,!!i.multiple,s,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(e,s){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(s))throw Error(p(200));return dl(e,s,null,i)};reactDom_production_min.createRoot=function(e,s){if(!ol(e))throw Error(p(299));var i=!1,o="",a=ll;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=cl(e,1,!1,null,null,i,!1,o,a),e[uf]=s.current,sf(e.nodeType===8?e.parentNode:e),new ml(s)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(s),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Sk(e)};reactDom_production_min.hydrate=function(e,s,i){if(!pl(s))throw Error(p(200));return sl(null,e,s,!0,i)};reactDom_production_min.hydrateRoot=function(e,s,i){if(!ol(e))throw Error(p(405));var o=i!=null&&i.hydratedSources||null,a=!1,c="",d=ll;if(i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),s=fl(s,null,e,1,i??null,a,!1,c,d),e[uf]=s.current,sf(e),o)for(e=0;e<o.length;e++)i=o[e],a=i._getVersion,a=a(i._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[i,a]:s.mutableSourceEagerHydrationData.push(i,a);return new nl(s)};reactDom_production_min.render=function(e,s,i){if(!pl(s))throw Error(p(200));return sl(null,e,s,!1,i)};reactDom_production_min.unmountComponentAtNode=function(e){if(!pl(e))throw Error(p(40));return e._reactRootContainer?(Sk(function(){sl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,s,i,o){if(!pl(i))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return sl(e,s,i,!1,o)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(e){function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(i){console.error(i)}}s(),e.exports=reactDom_production_min})(reactDom);var m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_extends$2.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(e){e===void 0&&(e={});function s(o,a){let{pathname:c,search:d,hash:h}=o.location;return createLocation("",{pathname:c,search:d,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function i(o,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(s,i,null,e)}function invariant(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function warning(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,s){return{usr:e.state,key:e.key,idx:s}}function createLocation(e,s,i,o){return i===void 0&&(i=null),_extends$2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof s=="string"?parsePath(s):s,{state:i,key:s&&s.key||o||createKey()})}function createPath(e){let{pathname:s="/",search:i="",hash:o=""}=e;return i&&i!=="?"&&(s+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(s+=o.charAt(0)==="#"?o:"#"+o),s}function parsePath(e){let s={};if(e){let i=e.indexOf("#");i>=0&&(s.hash=e.substr(i),e=e.substr(0,i));let o=e.indexOf("?");o>=0&&(s.search=e.substr(o),e=e.substr(0,o)),e&&(s.pathname=e)}return s}function getUrlBasedHistory(e,s,i,o){o===void 0&&(o={});let{window:a=document.defaultView,v5Compat:c=!1}=o,d=a.history,h=Action.Pop,g=null,b=j();b==null&&(b=0,d.replaceState(_extends$2({},d.state,{idx:b}),""));function j(){return(d.state||{idx:null}).idx}function _(){h=Action.Pop;let dt=j(),nt=dt==null?null:dt-b;b=dt,g&&g({action:h,location:ct.location,delta:nt})}function $(dt,nt){h=Action.Push;let it=createLocation(ct.location,dt,nt);i&&i(it,dt),b=j()+1;let st=getHistoryState(it,b),lt=ct.createHref(it);try{d.pushState(st,"",lt)}catch{a.location.assign(lt)}c&&g&&g({action:h,location:ct.location,delta:1})}function _e(dt,nt){h=Action.Replace;let it=createLocation(ct.location,dt,nt);i&&i(it,dt),b=j();let st=getHistoryState(it,b),lt=ct.createHref(it);d.replaceState(st,"",lt),c&&g&&g({action:h,location:ct.location,delta:0})}function et(dt){let nt=a.location.origin!=="null"?a.location.origin:a.location.href,it=typeof dt=="string"?dt:createPath(dt);return invariant(nt,"No window.location.(origin|href) available to create URL for href: "+it),new URL(it,nt)}let ct={get action(){return h},get location(){return e(a,d)},listen(dt){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,_),g=dt,()=>{a.removeEventListener(PopStateEventType,_),g=null}},createHref(dt){return s(a,dt)},createURL:et,encodeLocation(dt){let nt=et(dt);return{pathname:nt.pathname,search:nt.search,hash:nt.hash}},push:$,replace:_e,go(dt){return d.go(dt)}};return ct}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));function matchRoutes(e,s,i){i===void 0&&(i="/");let o=typeof s=="string"?parsePath(s):s,a=stripBasename(o.pathname||"/",i);if(a==null)return null;let c=flattenRoutes(e);rankRouteBranches(c);let d=null;for(let h=0;d==null&&h<c.length;++h)d=matchRouteBranch(c[h],safelyDecodeURI(a));return d}function flattenRoutes(e,s,i,o){s===void 0&&(s=[]),i===void 0&&(i=[]),o===void 0&&(o="");let a=(c,d,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};g.relativePath.startsWith("/")&&(invariant(g.relativePath.startsWith(o),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(o.length));let b=joinPaths([o,g.relativePath]),j=i.concat(g);c.children&&c.children.length>0&&(invariant(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),flattenRoutes(c.children,s,j,b)),!(c.path==null&&!c.index)&&s.push({path:b,score:computeScore(b,c.index),routesMeta:j})};return e.forEach((c,d)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))a(c,d);else for(let g of explodeOptionalSegments(c.path))a(c,d,g)}),s}function explodeOptionalSegments(e){let s=e.split("/");if(s.length===0)return[];let[i,...o]=s,a=i.endsWith("?"),c=i.replace(/\?$/,"");if(o.length===0)return a?[c,""]:[c];let d=explodeOptionalSegments(o.join("/")),h=[];return h.push(...d.map(g=>g===""?c:[c,g].join("/"))),a&&h.push(...d),h.map(g=>e.startsWith("/")&&g===""?"/":g)}function rankRouteBranches(e){e.sort((s,i)=>s.score!==i.score?i.score-s.score:compareIndexes(s.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,s){let i=e.split("/"),o=i.length;return i.some(isSplat)&&(o+=splatPenalty),s&&(o+=indexRouteValue),i.filter(a=>!isSplat(a)).reduce((a,c)=>a+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(e,s){return e.length===s.length&&e.slice(0,-1).every((o,a)=>o===s[a])?e[e.length-1]-s[s.length-1]:0}function matchRouteBranch(e,s){let{routesMeta:i}=e,o={},a="/",c=[];for(let d=0;d<i.length;++d){let h=i[d],g=d===i.length-1,b=a==="/"?s:s.slice(a.length)||"/",j=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},b);if(!j)return null;Object.assign(o,j.params);let _=h.route;c.push({params:o,pathname:joinPaths([a,j.pathname]),pathnameBase:normalizePathname(joinPaths([a,j.pathnameBase])),route:_}),j.pathnameBase!=="/"&&(a=joinPaths([a,j.pathnameBase]))}return c}function matchPath(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,o]=compilePath(e.path,e.caseSensitive,e.end),a=s.match(i);if(!a)return null;let c=a[0],d=c.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:o.reduce((b,j,_)=>{if(j==="*"){let $=h[_]||"";d=c.slice(0,c.length-$.length).replace(/(.)\/+$/,"$1")}return b[j]=safelyDecodeURIComponent(h[_]||"",j),b},{}),pathname:c,pathnameBase:d,pattern:e}}function compilePath(e,s,i){s===void 0&&(s=!1),i===void 0&&(i=!0),warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(d,h)=>(o.push(h),"/([^\\/]+)"));return e.endsWith("*")?(o.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),o]}function safelyDecodeURI(e){try{return decodeURI(e)}catch(s){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),e}}function safelyDecodeURIComponent(e,s){try{return decodeURIComponent(e)}catch(i){return warning(!1,'The value for the URL param "'+s+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),e}}function stripBasename(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let i=s.endsWith("/")?s.length-1:s.length,o=e.charAt(i);return o&&o!=="/"?null:e.slice(i)||"/"}function resolvePath(e,s){s===void 0&&(s="/");let{pathname:i,search:o="",hash:a=""}=typeof e=="string"?parsePath(e):e;return{pathname:i?i.startsWith("/")?i:resolvePathname(i,s):s,search:normalizeSearch(o),hash:normalizeHash(a)}}function resolvePathname(e,s){let i=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?i.length>1&&i.pop():a!=="."&&i.push(a)}),i.length>1?i.join("/"):"/"}function getInvalidPathError(e,s,i,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(e){return e.filter((s,i)=>i===0||s.route.path&&s.route.path.length>0)}function resolveTo(e,s,i,o){o===void 0&&(o=!1);let a;typeof e=="string"?a=parsePath(e):(a=_extends$2({},e),invariant(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let c=e===""||a.pathname==="",d=c?"/":a.pathname,h;if(o||d==null)h=i;else{let _=s.length-1;if(d.startsWith("..")){let $=d.split("/");for(;$[0]==="..";)$.shift(),_-=1;a.pathname=$.join("/")}h=_>=0?s[_]:"/"}let g=resolvePath(a,h),b=d&&d!=="/"&&d.endsWith("/"),j=(c||d===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(b||j)&&(g.pathname+="/"),g}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function isPolyfill(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}const is=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React;function useSyncExternalStore$2(e,s,i){const o=s(),[{inst:a},c]=useState({inst:{value:o,getSnapshot:s}});return useLayoutEffect(()=>{a.value=o,a.getSnapshot=s,checkIfSnapshotChanged(a)&&c({inst:a})},[e,o,s]),useEffect(()=>(checkIfSnapshotChanged(a)&&c({inst:a}),e(()=>{checkIfSnapshotChanged(a)&&c({inst:a})})),[e]),useDebugValue(o),o}function checkIfSnapshotChanged(e){const s=e.getSnapshot,i=e.value;try{const o=s();return!is(i,o)}catch{return!0}}function useSyncExternalStore$1(e,s,i){return s()}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM,shim=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2;"useSyncExternalStore"in React&&(e=>e.useSyncExternalStore)(React);const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[]}),RouteErrorContext=reactExports.createContext(null);function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_extends$1.apply(this,arguments)}function useHref(e,s){let{relative:i}=s===void 0?{}:s;useInRouterContext()||invariant(!1);let{basename:o,navigator:a}=reactExports.useContext(NavigationContext),{hash:c,pathname:d,search:h}=useResolvedPath(e,{relative:i}),g=d;return o!=="/"&&(g=d==="/"?o:joinPaths([o,d])),a.createHref({pathname:g,search:h,hash:c})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant(!1);let{basename:e,navigator:s}=reactExports.useContext(NavigationContext),{matches:i}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),a=JSON.stringify(getPathContributingMatches(i).map(h=>h.pathnameBase)),c=reactExports.useRef(!1);return reactExports.useEffect(()=>{c.current=!0}),reactExports.useCallback(function(h,g){if(g===void 0&&(g={}),!c.current)return;if(typeof h=="number"){s.go(h);return}let b=resolveTo(h,JSON.parse(a),o,g.relative==="path");e!=="/"&&(b.pathname=b.pathname==="/"?e:joinPaths([e,b.pathname])),(g.replace?s.replace:s.push)(b,g.state,g)},[e,s,a,o])}function useResolvedPath(e,s){let{relative:i}=s===void 0?{}:s,{matches:o}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),c=JSON.stringify(getPathContributingMatches(o).map(d=>d.pathnameBase));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(c),a,i==="path"),[e,c,a,i])}function useRoutes(e,s){useInRouterContext()||invariant(!1);let{navigator:i}=reactExports.useContext(NavigationContext),o=reactExports.useContext(DataRouterStateContext),{matches:a}=reactExports.useContext(RouteContext),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let g=useLocation(),b;if(s){var j;let ct=typeof s=="string"?parsePath(s):s;h==="/"||(j=ct.pathname)!=null&&j.startsWith(h)||invariant(!1),b=ct}else b=g;let _=b.pathname||"/",$=h==="/"?_:_.slice(h.length)||"/",_e=matchRoutes(e,{pathname:$}),et=_renderMatches(_e&&_e.map(ct=>Object.assign({},ct,{params:Object.assign({},d,ct.params),pathname:joinPaths([h,i.encodeLocation?i.encodeLocation(ct.pathname).pathname:ct.pathname]),pathnameBase:ct.pathnameBase==="/"?h:joinPaths([h,i.encodeLocation?i.encodeLocation(ct.pathnameBase).pathname:ct.pathnameBase])})),a,o||void 0);return s&&et?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:Action.Pop}},et):et}function DefaultErrorComponent(){let e=useRouteError(),s=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},c=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},s),i?reactExports.createElement("pre",{style:a},i):null,c)}class RenderErrorBoundary extends reactExports.Component{constructor(s){super(s),this.state={location:s.location,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,i){return i.location!==s.location?{error:s.error,location:s.location}:{error:s.error||i.error,location:i.location}}componentDidCatch(s,i){console.error("React Router caught the following error during render",s,i)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:s,match:i,children:o}=e,a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),reactExports.createElement(RouteContext.Provider,{value:s},o)}function _renderMatches(e,s,i){if(s===void 0&&(s=[]),e==null)if(i!=null&&i.errors)e=i.matches;else return null;let o=e,a=i==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));c>=0||invariant(!1),o=o.slice(0,Math.min(o.length,c+1))}return o.reduceRight((c,d,h)=>{let g=d.route.id?a==null?void 0:a[d.route.id]:null,b=null;i&&(d.route.ErrorBoundary?b=reactExports.createElement(d.route.ErrorBoundary,null):d.route.errorElement?b=d.route.errorElement:b=reactExports.createElement(DefaultErrorComponent,null));let j=s.concat(o.slice(0,h+1)),_=()=>{let $=c;return g?$=b:d.route.Component?$=reactExports.createElement(d.route.Component,null):d.route.element&&($=d.route.element),reactExports.createElement(RenderedRoute,{match:d,routeContext:{outlet:c,matches:j},children:$})};return i&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?reactExports.createElement(RenderErrorBoundary,{location:i.location,component:b,error:g,children:_(),routeContext:{outlet:null,matches:j}}):_()},null)}var DataRouterHook$1;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState(e){let s=reactExports.useContext(DataRouterStateContext);return s||invariant(!1),s}function useRouteContext(e){let s=reactExports.useContext(RouteContext);return s||invariant(!1),s}function useCurrentRouteId(e){let s=useRouteContext(),i=s.matches[s.matches.length-1];return i.route.id||invariant(!1),i.route.id}function useRouteError(){var e;let s=reactExports.useContext(RouteErrorContext),i=useDataRouterState(DataRouterStateHook$1.UseRouteError),o=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return s||((e=i.errors)==null?void 0:e[o])}function Route(e){invariant(!1)}function Router(e){let{basename:s="/",children:i=null,location:o,navigationType:a=Action.Pop,navigator:c,static:d=!1}=e;useInRouterContext()&&invariant(!1);let h=s.replace(/^\/*/,"/"),g=reactExports.useMemo(()=>({basename:h,navigator:c,static:d}),[h,c,d]);typeof o=="string"&&(o=parsePath(o));let{pathname:b="/",search:j="",hash:_="",state:$=null,key:_e="default"}=o,et=reactExports.useMemo(()=>{let ct=stripBasename(b,h);return ct==null?null:{location:{pathname:ct,search:j,hash:_,state:$,key:_e},navigationType:a}},[h,b,j,_,$,_e,a]);return et==null?null:reactExports.createElement(NavigationContext.Provider,{value:g},reactExports.createElement(LocationContext.Provider,{children:i,value:et}))}function Routes(e){let{children:s,location:i}=e,o=reactExports.useContext(DataRouterContext),a=o&&!s?o.router.routes:createRoutesFromChildren(s);return useRoutes(a,i)}var AwaitRenderStatus;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren(e,s){s===void 0&&(s=[]);let i=[];return reactExports.Children.forEach(e,(o,a)=>{if(!reactExports.isValidElement(o))return;let c=[...s,a];if(o.type===reactExports.Fragment){i.push.apply(i,createRoutesFromChildren(o.props.children,c));return}o.type!==Route&&invariant(!1),!o.props.index||!o.props.children||invariant(!1);let d={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=createRoutesFromChildren(o.props.children,c)),i.push(d)}),i}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,s){if(e==null)return{};var i={},o=Object.keys(e),a,c;for(c=0;c<o.length;c++)a=o[c],!(s.indexOf(a)>=0)&&(i[a]=e[a]);return i}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,s){return e.button===0&&(!s||s==="_self")&&!isModifiedEvent(e)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function BrowserRouter(e){let{basename:s,children:i,window:o}=e,a=reactExports.useRef();a.current==null&&(a.current=createBrowserHistory({window:o,v5Compat:!0}));let c=a.current,[d,h]=reactExports.useState({action:c.action,location:c.location});return reactExports.useLayoutEffect(()=>c.listen(h),[c]),reactExports.createElement(Router,{basename:s,children:i,location:d.location,navigationType:d.action,navigator:c})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(s,i){let{onClick:o,relative:a,reloadDocument:c,replace:d,state:h,target:g,to:b,preventScrollReset:j}=s,_=_objectWithoutPropertiesLoose(s,_excluded),{basename:$}=reactExports.useContext(NavigationContext),_e,et=!1;if(typeof b=="string"&&ABSOLUTE_URL_REGEX.test(b)&&(_e=b,isBrowser)){let it=new URL(window.location.href),st=b.startsWith("//")?new URL(it.protocol+b):new URL(b),lt=stripBasename(st.pathname,$);st.origin===it.origin&&lt!=null?b=lt+st.search+st.hash:et=!0}let ct=useHref(b,{relative:a}),dt=useLinkClickHandler(b,{replace:d,state:h,target:g,preventScrollReset:j,relative:a});function nt(it){o&&o(it),it.defaultPrevented||dt(it)}return reactExports.createElement("a",_extends({},_,{href:_e||ct,onClick:et||c?o:nt,ref:i,target:g}))});var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(e,s){let{target:i,replace:o,state:a,preventScrollReset:c,relative:d}=s===void 0?{}:s,h=useNavigate(),g=useLocation(),b=useResolvedPath(e,{relative:d});return reactExports.useCallback(j=>{if(shouldProcessLinkClick(j,i)){j.preventDefault();let _=o!==void 0?o:createPath(g)===createPath(b);h(e,{replace:_,state:a,preventScrollReset:c,relative:d})}},[g,h,b,o,a,i,e,c,d])}const Home=()=>jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/opentok-react/lobby/member",children:"Member Lobby"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/opentok-react/lobby/therapist",children:"Therapist Lobby"})})]});var opentokExports={},opentok={get exports(){return opentokExports},set exports(e){opentokExports=e}};/**
 * @license OpenTok.js 2.25.1 8d76a4b67
 *
 * Copyright (c) 2010-2023 TokBox, Inc.
 * Subject to the applicable Software Development Kit (SDK) License Agreement:
 * https://www.vonage.com/legal/communications-apis/terms-of-use/
 *
 * Date: Fri, 14 Apr 2023 14:30:20 GMT
 */(function(module,exports){(function(s,i){module.exports=i()})(window,function(){return function(e){var s={};function i(o){if(s[o])return s[o].exports;var a=s[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=s,i.d=function(o,a,c){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:c})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(a&1&&(o=i(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(i.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var d in o)i.d(c,d,function(h){return o[h]}.bind(null,d));return c},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=335)}([function(e,s,i){(function(o){/*!
* @overview es6-promise - a tiny implementation of Promises/A+.
* @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
* @license   Licensed under MIT license
*            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
* @version   v4.2.8+1e68dce6
*/(function(a,c){e.exports=c()})(this,function(){function a(kn){var ir=typeof kn;return kn!==null&&(ir==="object"||ir==="function")}function c(kn){return typeof kn=="function"}var d=void 0;Array.isArray?d=Array.isArray:d=function(kn){return Object.prototype.toString.call(kn)==="[object Array]"};var h=d,g=0,b=void 0,j=void 0,_=function(ir,gr){vt[g]=ir,vt[g+1]=gr,g+=2,g===2&&(j?j(Et):Ct())};function $(kn){j=kn}function _e(kn){_=kn}var et=typeof window<"u"?window:void 0,ct=et||{},dt=ct.MutationObserver||ct.WebKitMutationObserver,nt=typeof self>"u"&&typeof o<"u"&&{}.toString.call(o)==="[object process]",it=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function st(){return function(){return o.nextTick(Et)}}function lt(){return typeof b<"u"?function(){b(Et)}:Rt()}function ht(){var kn=0,ir=new dt(Et),gr=document.createTextNode("");return ir.observe(gr,{characterData:!0}),function(){gr.data=kn=++kn%2}}function Tt(){var kn=new MessageChannel;return kn.port1.onmessage=Et,function(){return kn.port2.postMessage(0)}}function Rt(){var kn=setTimeout;return function(){return kn(Et,1)}}var vt=new Array(1e3);function Et(){for(var kn=0;kn<g;kn+=2){var ir=vt[kn],gr=vt[kn+1];ir(gr),vt[kn]=void 0,vt[kn+1]=void 0}g=0}function bt(){try{var kn=Function("return this")().require("vertx");return b=kn.runOnLoop||kn.runOnContext,lt()}catch{return Rt()}}var Ct=void 0;nt?Ct=st():dt?Ct=ht():it?Ct=Tt():et===void 0?Ct=bt():Ct=Rt();function Ut(kn,ir){var gr=this,Br=new this.constructor(Jt);Br[Nt]===void 0&&Er(Br);var vo=gr._state;if(vo){var eo=arguments[vo-1];_(function(){return Fn(vo,Br,eo,gr._result)})}else $n(gr,Br,kn,ir);return Br}function Xt(kn){var ir=this;if(kn&&typeof kn=="object"&&kn.constructor===ir)return kn;var gr=new ir(Jt);return tn(gr,kn),gr}var Nt=Math.random().toString(36).substring(2);function Jt(){}var zt=void 0,nn=1,Bt=2;function sn(){return new TypeError("You cannot resolve a promise with itself")}function qt(){return new TypeError("A promises callback cannot return that same promise.")}function Kt(kn,ir,gr,Br){try{kn.call(ir,gr,Br)}catch(vo){return vo}}function $t(kn,ir,gr){_(function(Br){var vo=!1,eo=Kt(gr,ir,function(io){vo||(vo=!0,ir!==io?tn(Br,io):dn(Br,io))},function(io){vo||(vo=!0,Mn(Br,io))},"Settle: "+(Br._label||" unknown promise"));!vo&&eo&&(vo=!0,Mn(Br,eo))},kn)}function Sn(kn,ir){ir._state===nn?dn(kn,ir._result):ir._state===Bt?Mn(kn,ir._result):$n(ir,void 0,function(gr){return tn(kn,gr)},function(gr){return Mn(kn,gr)})}function On(kn,ir,gr){ir.constructor===kn.constructor&&gr===Ut&&ir.constructor.resolve===Xt?Sn(kn,ir):gr===void 0?dn(kn,ir):c(gr)?$t(kn,ir,gr):dn(kn,ir)}function tn(kn,ir){if(kn===ir)Mn(kn,sn());else if(a(ir)){var gr=void 0;try{gr=ir.then}catch(Br){Mn(kn,Br);return}On(kn,ir,gr)}else dn(kn,ir)}function bn(kn){kn._onerror&&kn._onerror(kn._result),Un(kn)}function dn(kn,ir){kn._state===zt&&(kn._result=ir,kn._state=nn,kn._subscribers.length!==0&&_(Un,kn))}function Mn(kn,ir){kn._state===zt&&(kn._state=Bt,kn._result=ir,_(bn,kn))}function $n(kn,ir,gr,Br){var vo=kn._subscribers,eo=vo.length;kn._onerror=null,vo[eo]=ir,vo[eo+nn]=gr,vo[eo+Bt]=Br,eo===0&&kn._state&&_(Un,kn)}function Un(kn){var ir=kn._subscribers,gr=kn._state;if(ir.length!==0){for(var Br=void 0,vo=void 0,eo=kn._result,io=0;io<ir.length;io+=3)Br=ir[io],vo=ir[io+gr],Br?Fn(gr,Br,vo,eo):vo(eo);kn._subscribers.length=0}}function Fn(kn,ir,gr,Br){var vo=c(gr),eo=void 0,io=void 0,to=!0;if(vo){try{eo=gr(Br)}catch(Wr){to=!1,io=Wr}if(ir===eo){Mn(ir,qt());return}}else eo=Br;ir._state!==zt||(vo&&to?tn(ir,eo):to===!1?Mn(ir,io):kn===nn?dn(ir,eo):kn===Bt&&Mn(ir,eo))}function cr(kn,ir){try{ir(function(Br){tn(kn,Br)},function(Br){Mn(kn,Br)})}catch(gr){Mn(kn,gr)}}var or=0;function wr(){return or++}function Er(kn){kn[Nt]=or++,kn._state=void 0,kn._result=void 0,kn._subscribers=[]}function Zr(){return new Error("Array Methods must be provided an Array")}var po=function(){function kn(ir,gr){this._instanceConstructor=ir,this.promise=new ir(Jt),this.promise[Nt]||Er(this.promise),h(gr)?(this.length=gr.length,this._remaining=gr.length,this._result=new Array(this.length),this.length===0?dn(this.promise,this._result):(this.length=this.length||0,this._enumerate(gr),this._remaining===0&&dn(this.promise,this._result))):Mn(this.promise,Zr())}return kn.prototype._enumerate=function(gr){for(var Br=0;this._state===zt&&Br<gr.length;Br++)this._eachEntry(gr[Br],Br)},kn.prototype._eachEntry=function(gr,Br){var vo=this._instanceConstructor,eo=vo.resolve;if(eo===Xt){var io=void 0,to=void 0,Wr=!1;try{io=gr.then}catch(no){Wr=!0,to=no}if(io===Ut&&gr._state!==zt)this._settledAt(gr._state,Br,gr._result);else if(typeof io!="function")this._remaining--,this._result[Br]=gr;else if(vo===vr){var To=new vo(Jt);Wr?Mn(To,to):On(To,gr,io),this._willSettleAt(To,Br)}else this._willSettleAt(new vo(function(no){return no(gr)}),Br)}else this._willSettleAt(eo(gr),Br)},kn.prototype._settledAt=function(gr,Br,vo){var eo=this.promise;eo._state===zt&&(this._remaining--,gr===Bt?Mn(eo,vo):this._result[Br]=vo),this._remaining===0&&dn(eo,this._result)},kn.prototype._willSettleAt=function(gr,Br){var vo=this;$n(gr,void 0,function(eo){return vo._settledAt(nn,Br,eo)},function(eo){return vo._settledAt(Bt,Br,eo)})},kn}();function lr(kn){return new po(this,kn).promise}function pr(kn){var ir=this;return h(kn)?new ir(function(gr,Br){for(var vo=kn.length,eo=0;eo<vo;eo++)ir.resolve(kn[eo]).then(gr,Br)}):new ir(function(gr,Br){return Br(new TypeError("You must pass an array to race."))})}function Vn(kn){var ir=this,gr=new ir(Jt);return Mn(gr,kn),gr}function In(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function zn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var vr=function(){function kn(ir){this[Nt]=wr(),this._result=this._state=void 0,this._subscribers=[],Jt!==ir&&(typeof ir!="function"&&In(),this instanceof kn?cr(this,ir):zn())}return kn.prototype.catch=function(gr){return this.then(null,gr)},kn.prototype.finally=function(gr){var Br=this,vo=Br.constructor;return c(gr)?Br.then(function(eo){return vo.resolve(gr()).then(function(){return eo})},function(eo){return vo.resolve(gr()).then(function(){throw eo})}):Br.then(gr,gr)},kn}();vr.prototype.then=Ut,vr.all=lr,vr.race=pr,vr.resolve=Xt,vr.reject=Vn,vr._setScheduler=$,vr._setAsap=_e,vr._asap=_;function Jr(){var kn=void 0;if(typeof(typeof window!==void 0?window:commonjsGlobal)<"u")kn=typeof window!==void 0?window:commonjsGlobal;else if(typeof self<"u")kn=self;else try{kn=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ir=kn.Promise;if(ir){var gr=null;try{gr=Object.prototype.toString.call(ir.resolve())}catch{}if(gr==="[object Promise]"&&!ir.cast)return}kn.Promise=vr}return vr.polyfill=Jr,vr.Promise=vr,vr})}).call(this,i(42))},function(e,s,i){const o=i(403),a=i(190),c=i(121),d=a(h=>{const g={};return(()=>{Object.keys(c).forEach(j=>{const _=c[j].method,$=o(`OpenTok:${h}:${j.toLowerCase()}`);$.log=console[_].bind(console),g[j.toLowerCase()]=$})})(),g});d.setLogLevel=h=>{let g;try{g=(typeof window!==void 0?window:commonjsGlobal).localStorage.debug}catch{g=""}const j=[...Object.keys(c).map(_=>`${h>=c[_].priority?"":"-"}(autogen)?OpenTok:*:${_.toLowerCase()}`),...(g||"").split(/[\s,]/).filter(_=>_.indexOf("(autogen)?")===-1)].filter(_=>_).join(",");o.enable(j)},e.exports=d},function(e,s,i){const a=i(546).parse();e.exports=a},function(e,s){function i(o){return o&&o.__esModule?o:{default:o}}e.exports=i},function(e,s,i){e.exports=i(538)},function(e,s,i){(function(o){function a(d,h,g,b,j,_,$){try{var _e=d[_]($),et=_e.value}catch(ct){g(ct);return}_e.done?h(et):o.resolve(et).then(b,j)}function c(d){return function(){var h=this,g=arguments;return new o(function(b,j){var _=d.apply(h,g);function $(et){a(_,b,j,$,_e,"next",et)}function _e(et){a(_,b,j,$,_e,"throw",et)}$(void 0)})}}e.exports=c}).call(this,i(0))},function(e,s,i){const o=i(18),a=i(16),c=i(1)("Events"),d=i(9),h=i(408);e.exports=function(b){const j=new o;return j.on("newListener",$=>{j.emit(`${$}:added`)}),j.on("removeListener",$=>{j.emit(`${$}:removed`)}),d(b,{eventsDispatched:{},on($,_e,et){return typeof $=="string"&&_e?$.split(" ").forEach(ct=>{j.on(ct,h(_e,et))}):Object.keys($).forEach(ct=>{j.on(ct,h($[ct],_e))}),this},off($,_e,et){return typeof $=="string"?this.off($.split(" "),_e,et):Array.isArray($)?$.forEach(ct=>{_e&&a(_e)?j.removeListener(ct,h(_e,et)):j.removeAllListeners(ct)}):$?Object.keys($).forEach(ct=>{j.removeListener(ct,h($[ct],_e))}):j.removeAllListeners(),this},once($,_e,et){return typeof $=="string"&&_e?$.split(" ").forEach(ct=>{j.once(ct,h(_e,et))}):Object.keys($).forEach(ct=>{j.once(ct,h($[ct],_e))}),this},dispatchEvent($){if(!$.type)throw new Error("dispatchEvent: Event has no type");return $.target||($.target=this),this.trigger($.type,$),this},dispatchEventOnce($,_e){this.isEventDispatched($.type,_e)||(this.dispatchEvent($),this.eventsDispatched[$.type]?this.eventsDispatched[$.type].push(_e):this.eventsDispatched[$.type]=[_e])},isEventDispatched($,_e){var et;return(et=this.eventsDispatched[$])==null?void 0:et.includes(_e)},trigger($){try{for(var _e=arguments.length,et=new Array(_e>1?_e-1:0),ct=1;ct<_e;ct++)et[ct-1]=arguments[ct];j.emit($,...et)}catch(dt){c.error("An error occurred in an event handler",dt)}return this},emit(){return b.trigger(...arguments)},addEventListener($,_e,et){return c.warn("The addEventListener() method is deprecated. Use on() or once() instead."),b.on($,_e,et)},removeEventListener($,_e,et){return c.warn("The removeEventListener() method is deprecated. Use off() instead."),b.off($,_e,et)},listenerCount($){return j.listenerCount($)}})}},function(e,s,i){e.exports={AUTHENTICATION_ERROR:"OT_AUTHENTICATION_ERROR",BADLY_FORMED_RESPONSE:"OT_BADLY_FORMED_RESPONSE",CHROME_MICROPHONE_ACQUISITION_ERROR:"OT_CHROME_MICROPHONE_ACQUISITION_ERROR",CONNECT_FAILED:"OT_CONNECT_FAILED",CONNECTION_LIMIT_EXCEEDED:"OT_CONNECTION_LIMIT_EXCEEDED",CONSTRAINTS_NOT_SATISFIED:"OT_CONSTRAINTS_NOT_SATISFIED",CREATE_PEER_CONNECTION_FAILED:"OT_CREATE_PEER_CONNECTION_FAILED",DISCONNECTED:"OT_DISCONNECTED",EMPTY_RESPONSE_BODY:"OT_EMPTY_RESPONSE_BODY",GET_RTC_STATS_REPORT_NOT_SUPPORTED:"OT_GET_RTC_STATS_REPORT_NOT_SUPPORTED",HARDWARE_UNAVAILABLE:"OT_HARDWARE_UNAVAILABLE",ICE_WORKFLOW_FAILED:"OT_ICE_WORKFLOW_FAILED",INVALID_HTTP_STATUS:"OT_INVALID_HTTP_STATUS",INVALID_PARAMETER:"OT_INVALID_PARAMETER",INVALID_SESSION_ID:"OT_INVALID_SESSION_ID",MEDIA_ERR_ABORTED:"OT_MEDIA_ERR_ABORTED",MEDIA_ERR_DECODE:"OT_MEDIA_ERR_DECODE",MEDIA_ERR_NETWORK:"OT_MEDIA_ERR_NETWORK",MEDIA_ERR_SRC_NOT_SUPPORTED:"OT_MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ENDED:"OT_MEDIA_ENDED",NO_DEVICES_FOUND:"OT_NO_DEVICES_FOUND",NO_VALID_CONSTRAINTS:"OT_NO_VALID_CONSTRAINTS",NOT_CONNECTED:"OT_NOT_CONNECTED",NOT_FOUND:"OT_NOT_FOUND",NOT_SUPPORTED:"OT_NOT_SUPPORTED",PEER_CONNECTION_NOT_CONNECTED:"OT_PEER_CONNECTION_NOT_CONNECTED",PERMISSION_DENIED:"OT_PERMISSION_DENIED",RATE_LIMIT_EXCEEDED:"OT_RATE_LIMIT_EXCEEDED",REPORT_ISSUE_FAILED:"OT_REPORT_ISSUE_FAILED",SCREEN_SHARING_EXTENSION_NOT_INSTALLED:"OT_SCREEN_SHARING_EXTENSION_NOT_INSTALLED",SCREEN_SHARING_EXTENSION_NOT_REGISTERED:"OT_SCREEN_SHARING_EXTENSION_NOT_REGISTERED",SCREEN_SHARING_NOT_SUPPORTED:"OT_SCREEN_SHARING_NOT_SUPPORTED",SET_REMOTE_DESCRIPTION_FAILED:"OT_SET_REMOTE_DESCRIPTION_FAILED",FAILED_SET_CONFIGURATION:"OT_FAILED_SET_CONFIGURATION",SOCKET_ALREADY_CONNECTED_CONNECTING:"OT_SOCKET_ALREADY_CONNECTED_CONNECTING",SOCKET_CLOSE_ABNORMAL:"OT_SOCKET_CLOSE_ABNORMAL",SOCKET_CLOSE_CONNECT_EXCEPTION:"OT_SOCKET_CLOSE_CONNECT_EXCEPTION",SOCKET_CLOSE_CONNECTIVITY_LOSS:"OT_SOCKET_CLOSE_CONNECTIVITY_LOSS",SOCKET_CLOSE_FALLBACK_CODE:"OT_SOCKET_CLOSE_FALLBACK_CODE",SOCKET_CLOSE_INCONSISTENT_DATA:"OT_SOCKET_CLOSE_INCONSISTENT_DATA",SOCKET_CLOSE_NO_STATUS:"OT_SOCKET_CLOSE_NO_STATUS",SOCKET_CLOSE_POLICY_VIOLATION:"OT_SOCKET_CLOSE_POLICY_VIOLATION",SOCKET_CLOSE_GOING_AWAY:"OT_SOCKET_CLOSE_GOING_AWAY",SOCKET_CLOSE_PROTOCOL_ERROR:"OT_SOCKET_CLOSE_PROTOCOL_ERROR",SOCKET_CLOSE_TIMEOUT:"OT_SOCKET_CLOSE_TIMEOUT",SOCKET_CLOSE_TOO_LARGE:"OT_SOCKET_CLOSE_TOO_LARGE",SOCKET_CLOSE_UNEXPECTED_CONDITION:"OT_SOCKET_CLOSE_UNEXPECTED_CONDITION",SOCKET_CLOSE_UNSUPPORTED:"OT_SOCKET_CLOSE_UNSUPPORTED",STREAM_CREATE_FAILED:"OT_STREAM_CREATE_FAILED",STREAM_DESTROYED:"OT_STREAM_DESTROYED",STREAM_LIMIT_EXCEEDED:"OT_STREAM_LIMIT_EXCEEDED",STREAM_NOT_FOUND:"OT_STREAM_NOT_FOUND",UNABLE_TO_SUBSCRIBE:"OT_UNABLE_TO_SUBSCRIBE",TERMS_OF_SERVICE_FAILURE:"OT_TERMS_OF_SERVICE_FAILURE",TIMEOUT:"OT_TIMEOUT",CANCEL:"OT_CANCEL",UNABLE_TO_CAPTURE_MEDIA:"OT_UNABLE_TO_CAPTURE_MEDIA",UNABLE_TO_CAPTURE_SCREEN:"OT_UNABLE_TO_CAPTURE_SCREEN",UNEXPECTED_ERROR_CODE:"OT_UNEXPECTED_ERROR_CODE",UNEXPECTED_HTTP_STATUS:"OT_UNEXPECTED_HTTP_STATUS",UNEXPECTED_SERVER_RESPONSE:"OT_UNEXPECTED_SERVER_RESPONSE",UNKNOWN_HTTP_ERROR:"OT_UNKNOWN_HTTP_ERROR",UNSUPPORTED_BROWSER:"OT_UNSUPPORTED_BROWSER",USER_MEDIA_ACCESS_DENIED:"OT_USER_MEDIA_ACCESS_DENIED",XDOMAIN_OR_PARSING_ERROR:"OT_XDOMAIN_OR_PARSING_ERROR",API_KEY_DISABLED:"OT_API_KEY_DISABLED",UNABLE_TO_ACCESS_MEDIA_ENGINE:"OT_UNABLE_TO_ACCESS_MEDIA_ENGINE",SET_PROXY_URL_TIMING_ERROR:"OT_SET_PROXY_URL_TIMING_ERROR",PROXY_URL_ALREADY_SET_ERROR:"OT_PROXY_URL_ALREADY_SET_ERROR",SET_VIDEO_SOURCE_FAILURE:"OT_SET_VIDEO_SOURCE_FAILURE",INVALID_VIDEO_SOURCE:"OT_INVALID_VIDEO_SOURCE",REQUESTED_DEVICE_PERMISSION_DENIED:"OT_REQUESTED_DEVICE_PERMISSION_DENIED",INVALID_AUDIO_OUTPUT_SOURCE:"OT_INVALID_AUDIO_OUTPUT_SOURCE",INVALID_ENCRYPTION_SECRET:"OT_INVALID_ENCRYPTION_SECRET"}},function(e,s,i){const o=i(244),a=i(248),c=i(6),d=i(1);o.logging=d("OT.$"),o.ElementCollection=i(245),o.env=i(2),o.ajax=i(243),o.statable=i(555),o.Analytics=i(20),o.Collection=i(247),o.domExtras=i(556),o.Error=i(249),a(o,"useLogHelpers",{value(h){const g=d("useLogHelpersDeprecatedMixin");return Object.keys(g).forEach(b=>{h[b]=g[b]}),h},name:"OT.useLogHelpers",getWarning:"Please use an external library for your debugging needs"}),o.defaults=i(141),a(o,"eventing",{value:c,name:"OT.$.eventing",getWarning:"Please use an external library to create an event emitter."}),Object.keys(o).forEach(h=>{const b=o[h]._attachToOTHelpers||{};Object.keys(b).forEach(j=>{Object.hasOwnProperty.call(o,j)&&!(h==="util"&&j==="bind")&&console.warn(`More than one module is trying to define ${j} on OTHelpers.`),o[j]=b[j]})}),e.exports=o},function(e,s,i){var o=i(83),a=i(40),c=i(191),d=i(25),h=i(67),g=i(30),b=Object.prototype,j=b.hasOwnProperty,_=c(function($,_e){if(h(_e)||d(_e)){a(_e,g(_e),$);return}for(var et in _e)j.call(_e,et)&&o($,et,_e[et])});e.exports=_},function(e,s,i){e.exports={JS_EXCEPTION:2e3,AUTHENTICATION_ERROR:1004,INVALID_SESSION_ID:1005,CONNECT_FAILED:1006,CONNECT_REJECTED:1007,CONNECTION_TIMEOUT:1008,NOT_CONNECTED:1010,INVALID_PARAMETER:1011,P2P_CONNECTION_FAILED:1013,API_RESPONSE_FAILURE:1014,PEER_CONNECTION_NOT_CONNECTED:1015,TERMS_OF_SERVICE_FAILURE:1026,CONNECTION_LIMIT_EXCEEDED:1027,UNABLE_TO_PUBLISH:1500,UNABLE_TO_SUBSCRIBE:1501,UNSUPPORTED_VIDEO_CODEC:1502,UNABLE_TO_FORCE_DISCONNECT:1520,UNABLE_TO_FORCE_UNPUBLISH:1530,UNABLE_TO_FORCE_MUTE:1540,PUBLISHER_ICE_WORKFLOW_FAILED:1553,SUBSCRIBER_ICE_WORKFLOW_FAILED:1554,STREAM_LIMIT_EXCEEDED:1605,UNEXPECTED_SERVER_RESPONSE:2001,REPORT_ISSUE_ERROR:2011,SET_PROXY_URL_TIMING_ERROR:2021,PROXY_URL_ALREADY_SET_ERROR:2022,GET_RTC_STATS_REPORT_NOT_SUPPORTED:2031,ANVIL_BADLY_FORMED_RESPONSE:3001,ANVIL_INVALID_HTTP_STATUS:3002,ANVIL_XDOMAIN_OR_PARSING_ERROR:3003,ANVIL_UNKNOWN_HTTP_ERROR:3004,ANVIL_UNEXPECTED_ERROR_CODE:3005,ANVIL_EMPTY_RESPONSE_BODY:3006,ANVIL_CONNECT_FAILED:3007,UNABLE_TO_ACCESS_MEDIA_ENGINE:5001}},function(e,s){function i(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}e.exports=i},function(e,s){var i=Array.isArray;e.exports=i},function(e,s,i){e.exports=function(a){a===void 0&&(a={});const c=a.Errors||i(7),d=a.OTErrorClass||i(22),h=Object.keys(c).map(g=>c[g]);return function(b,j,_){if(h.indexOf(b)===-1)return new Error(`Attempt to use invalid error name (${b}). Original message: ${j.message}`);if(!(j instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(j))))return new Error(`Did not pass Error as second argument: ${j}`);const $=new d(void 0,j.message);if($.name=b,!j.stack)try{throw j}catch{}return $.stack=j.stack,_&&($.code=_),$}}},function(e,s,i){var o=i(173),a=typeof self=="object"&&self&&self.Object===Object&&self,c=o||a||Function("return this")();e.exports=c},function(e,s,i){var o=i(540),a=i(541),c=a;c.v1=o,c.v4=a,e.exports=c},function(e,s,i){var o=i(29),a=i(11),c="[object AsyncFunction]",d="[object Function]",h="[object GeneratorFunction]",g="[object Proxy]";function b(j){if(!a(j))return!1;var _=o(j);return _==d||_==h||_==c||_==g}e.exports=b},function(e,s){function i(o){return o!=null&&typeof o=="object"}e.exports=i},function(e,s,i){(function(o){var a=typeof Reflect=="object"?Reflect:null,c=a&&typeof a.apply=="function"?a.apply:function(Et,bt,Ct){return Function.prototype.apply.call(Et,bt,Ct)},d;a&&typeof a.ownKeys=="function"?d=a.ownKeys:Object.getOwnPropertySymbols?d=function(Et){return Object.getOwnPropertyNames(Et).concat(Object.getOwnPropertySymbols(Et))}:d=function(Et){return Object.getOwnPropertyNames(Et)};function h(vt){console&&console.warn&&console.warn(vt)}var g=Number.isNaN||function(Et){return Et!==Et};function b(){b.init.call(this)}e.exports=b,e.exports.once=ht,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var j=10;function _(vt){if(typeof vt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof vt)}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(vt){if(typeof vt!="number"||vt<0||g(vt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+vt+".");j=vt}}),b.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(Et){if(typeof Et!="number"||Et<0||g(Et))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Et+".");return this._maxListeners=Et,this};function $(vt){return vt._maxListeners===void 0?b.defaultMaxListeners:vt._maxListeners}b.prototype.getMaxListeners=function(){return $(this)},b.prototype.emit=function(Et){for(var bt=[],Ct=1;Ct<arguments.length;Ct++)bt.push(arguments[Ct]);var Ut=Et==="error",Xt=this._events;if(Xt!==void 0)Ut=Ut&&Xt.error===void 0;else if(!Ut)return!1;if(Ut){var Nt;if(bt.length>0&&(Nt=bt[0]),Nt instanceof Error)throw Nt;var Jt=new Error("Unhandled error."+(Nt?" ("+Nt.message+")":""));throw Jt.context=Nt,Jt}var zt=Xt[Et];if(zt===void 0)return!1;if(typeof zt=="function")c(zt,this,bt);else for(var nn=zt.length,Bt=it(zt,nn),Ct=0;Ct<nn;++Ct)c(Bt[Ct],this,bt);return!0};function _e(vt,Et,bt,Ct){var Ut,Xt,Nt;if(_(bt),Xt=vt._events,Xt===void 0?(Xt=vt._events=Object.create(null),vt._eventsCount=0):(Xt.newListener!==void 0&&(vt.emit("newListener",Et,bt.listener?bt.listener:bt),Xt=vt._events),Nt=Xt[Et]),Nt===void 0)Nt=Xt[Et]=bt,++vt._eventsCount;else if(typeof Nt=="function"?Nt=Xt[Et]=Ct?[bt,Nt]:[Nt,bt]:Ct?Nt.unshift(bt):Nt.push(bt),Ut=$(vt),Ut>0&&Nt.length>Ut&&!Nt.warned){Nt.warned=!0;var Jt=new Error("Possible EventEmitter memory leak detected. "+Nt.length+" "+String(Et)+" listeners added. Use emitter.setMaxListeners() to increase limit");Jt.name="MaxListenersExceededWarning",Jt.emitter=vt,Jt.type=Et,Jt.count=Nt.length,h(Jt)}return vt}b.prototype.addListener=function(Et,bt){return _e(this,Et,bt,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(Et,bt){return _e(this,Et,bt,!0)};function et(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ct(vt,Et,bt){var Ct={fired:!1,wrapFn:void 0,target:vt,type:Et,listener:bt},Ut=et.bind(Ct);return Ut.listener=bt,Ct.wrapFn=Ut,Ut}b.prototype.once=function(Et,bt){return _(bt),this.on(Et,ct(this,Et,bt)),this},b.prototype.prependOnceListener=function(Et,bt){return _(bt),this.prependListener(Et,ct(this,Et,bt)),this},b.prototype.removeListener=function(Et,bt){var Ct,Ut,Xt,Nt,Jt;if(_(bt),Ut=this._events,Ut===void 0)return this;if(Ct=Ut[Et],Ct===void 0)return this;if(Ct===bt||Ct.listener===bt)--this._eventsCount===0?this._events=Object.create(null):(delete Ut[Et],Ut.removeListener&&this.emit("removeListener",Et,Ct.listener||bt));else if(typeof Ct!="function"){for(Xt=-1,Nt=Ct.length-1;Nt>=0;Nt--)if(Ct[Nt]===bt||Ct[Nt].listener===bt){Jt=Ct[Nt].listener,Xt=Nt;break}if(Xt<0)return this;Xt===0?Ct.shift():st(Ct,Xt),Ct.length===1&&(Ut[Et]=Ct[0]),Ut.removeListener!==void 0&&this.emit("removeListener",Et,Jt||bt)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(Et){var bt,Ct,Ut;if(Ct=this._events,Ct===void 0)return this;if(Ct.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Ct[Et]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Ct[Et]),this;if(arguments.length===0){var Xt=Object.keys(Ct),Nt;for(Ut=0;Ut<Xt.length;++Ut)Nt=Xt[Ut],Nt!=="removeListener"&&this.removeAllListeners(Nt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(bt=Ct[Et],typeof bt=="function")this.removeListener(Et,bt);else if(bt!==void 0)for(Ut=bt.length-1;Ut>=0;Ut--)this.removeListener(Et,bt[Ut]);return this};function dt(vt,Et,bt){var Ct=vt._events;if(Ct===void 0)return[];var Ut=Ct[Et];return Ut===void 0?[]:typeof Ut=="function"?bt?[Ut.listener||Ut]:[Ut]:bt?lt(Ut):it(Ut,Ut.length)}b.prototype.listeners=function(Et){return dt(this,Et,!0)},b.prototype.rawListeners=function(Et){return dt(this,Et,!1)},b.listenerCount=function(vt,Et){return typeof vt.listenerCount=="function"?vt.listenerCount(Et):nt.call(vt,Et)},b.prototype.listenerCount=nt;function nt(vt){var Et=this._events;if(Et!==void 0){var bt=Et[vt];if(typeof bt=="function")return 1;if(bt!==void 0)return bt.length}return 0}b.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]};function it(vt,Et){for(var bt=new Array(Et),Ct=0;Ct<Et;++Ct)bt[Ct]=vt[Ct];return bt}function st(vt,Et){for(;Et+1<vt.length;Et++)vt[Et]=vt[Et+1];vt.pop()}function lt(vt){for(var Et=new Array(vt.length),bt=0;bt<Et.length;++bt)Et[bt]=vt[bt].listener||vt[bt];return Et}function ht(vt,Et){return new o(function(bt,Ct){function Ut(Nt){vt.removeListener(Et,Xt),Ct(Nt)}function Xt(){typeof vt.removeListener=="function"&&vt.removeListener("error",Ut),bt([].slice.call(arguments))}Rt(vt,Et,Xt,{once:!0}),Et!=="error"&&Tt(vt,Ut,{once:!0})})}function Tt(vt,Et,bt){typeof vt.on=="function"&&Rt(vt,"error",Et,bt)}function Rt(vt,Et,bt,Ct){if(typeof vt.on=="function")Ct.once?vt.once(Et,bt):vt.on(Et,bt);else if(typeof vt.addEventListener=="function")vt.addEventListener(Et,function Ut(Xt){Ct.once&&vt.removeEventListener(Et,Ut),bt(Xt)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof vt)}}).call(this,i(0))},function(e,s,i){var o=i(207),a=Object.prototype.toString;function c(Ct){return a.call(Ct)==="[object Array]"}function d(Ct){return typeof Ct>"u"}function h(Ct){return Ct!==null&&!d(Ct)&&Ct.constructor!==null&&!d(Ct.constructor)&&typeof Ct.constructor.isBuffer=="function"&&Ct.constructor.isBuffer(Ct)}function g(Ct){return a.call(Ct)==="[object ArrayBuffer]"}function b(Ct){return typeof FormData<"u"&&Ct instanceof FormData}function j(Ct){var Ut;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Ut=ArrayBuffer.isView(Ct):Ut=Ct&&Ct.buffer&&Ct.buffer instanceof ArrayBuffer,Ut}function _(Ct){return typeof Ct=="string"}function $(Ct){return typeof Ct=="number"}function _e(Ct){return Ct!==null&&typeof Ct=="object"}function et(Ct){if(a.call(Ct)!=="[object Object]")return!1;var Ut=Object.getPrototypeOf(Ct);return Ut===null||Ut===Object.prototype}function ct(Ct){return a.call(Ct)==="[object Date]"}function dt(Ct){return a.call(Ct)==="[object File]"}function nt(Ct){return a.call(Ct)==="[object Blob]"}function it(Ct){return a.call(Ct)==="[object Function]"}function st(Ct){return _e(Ct)&&it(Ct.pipe)}function lt(Ct){return typeof URLSearchParams<"u"&&Ct instanceof URLSearchParams}function ht(Ct){return Ct.trim?Ct.trim():Ct.replace(/^\s+|\s+$/g,"")}function Tt(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Rt(Ct,Ut){if(!(Ct===null||typeof Ct>"u"))if(typeof Ct!="object"&&(Ct=[Ct]),c(Ct))for(var Xt=0,Nt=Ct.length;Xt<Nt;Xt++)Ut.call(null,Ct[Xt],Xt,Ct);else for(var Jt in Ct)Object.prototype.hasOwnProperty.call(Ct,Jt)&&Ut.call(null,Ct[Jt],Jt,Ct)}function vt(){var Ct={};function Ut(Jt,zt){et(Ct[zt])&&et(Jt)?Ct[zt]=vt(Ct[zt],Jt):et(Jt)?Ct[zt]=vt({},Jt):c(Jt)?Ct[zt]=Jt.slice():Ct[zt]=Jt}for(var Xt=0,Nt=arguments.length;Xt<Nt;Xt++)Rt(arguments[Xt],Ut);return Ct}function Et(Ct,Ut,Xt){return Rt(Ut,function(Jt,zt){Xt&&typeof Jt=="function"?Ct[zt]=o(Jt,Xt):Ct[zt]=Jt}),Ct}function bt(Ct){return Ct.charCodeAt(0)===65279&&(Ct=Ct.slice(1)),Ct}e.exports={isArray:c,isArrayBuffer:g,isBuffer:h,isFormData:b,isArrayBufferView:j,isString:_,isNumber:$,isObject:_e,isPlainObject:et,isUndefined:d,isDate:ct,isFile:dt,isBlob:nt,isFunction:it,isStream:st,isURLSearchParams:lt,isStandardBrowserEnv:Tt,forEach:Rt,merge:vt,extend:Et,trim:ht,stripBOM:bt}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5)),d=o(i(45));const h=i(240),g=i(542),b=i(142),j=i(34)(),_=i(557),$=i(6),_e=i(559),et=i(562),ct="2";let dt=function(){function nt(st){let lt=st===void 0?{}:st,ht=lt.staticConfig,Tt=ht===void 0?j.onlyLocal():ht,Rt=lt.sessionInfo,vt=Rt===void 0?new b:Rt,Et=lt.ajax,bt=lt.queue,Ct=lt.getUserAgentClientHintData,Ut=Ct===void 0?et:Ct,Xt=lt.userAgentData,Nt=Xt===void 0?typeof navigator<"u"&&navigator.userAgentData:Xt;this.getTurnServerName=Jt=>{let zt,nn;return!Jt||typeof Jt!="object"?zt:((Array.isArray(Jt)?Jt:[Jt]).forEach(sn=>{const qt=sn.urls||sn.url;(Array.isArray(qt)?qt:[qt]).forEach($t=>{const Sn=$t.indexOf(":")+1,On=$t.lastIndexOf(":");$t.includes("turns")?nn=$t.substring(Sn,On):zt=$t.substring(Sn,On)})}),nn||zt)},this.ajax=Et,this.queue=bt,this.sessionInfo=vt,this.getUserAgentClientHintData=Ut,this.userAgentData=Nt,this.staticConfig=Tt}var it=nt.prototype;return it._getCachedUserAgentData=function(){var st=(0,c.default)(a.default.mark(function ht(){return a.default.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:if(this.cachedUserAgentData){Rt.next=4;break}return Rt.next=3,this.getUserAgentClientHintData(this.userAgentData);case 3:this.cachedUserAgentData=Rt.sent;case 4:return Rt.abrupt("return",this.cachedUserAgentData);case 5:case"end":return Rt.stop()}},ht,this)}));function lt(){return st.apply(this,arguments)}return lt}(),it.commonQoSFields=function(){const lt=this._analytics.proxyUrl,ht=this.sessionInfo.messagingURL;return{clientVersion:this.staticConfig.clientVersion,buildHash:this.staticConfig.buildHash,source:(typeof window!==void 0?window:commonjsGlobal).location&&(typeof window!==void 0?window:commonjsGlobal).location.href,logVersion:ct,apiServer:this.staticConfig.apiUrl,clientSystemTime:new Date().getTime(),sessionId:this.sessionInfo.sessionId,mediaServerName:this.sessionInfo.mediaServerName,relayServer:this.getTurnServerName(this.sessionInfo.iceServers),p2p:this.sessionInfo.p2pEnabled,messagingServer:this.sessionInfo.messagingServer,messagingUrl:_(lt,ht),version:this.staticConfig.version,partnerId:this.sessionInfo.partnerId}},it._getCommonDataFields=function(){var st=(0,c.default)(a.default.mark(function ht(){var Tt,Rt;return a.default.wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Et.next=2,h.getAsync();case 2:return Tt=Et.sent,Et.next=5,this._getCachedUserAgentData();case 5:return Rt=Et.sent,Et.abrupt("return",Object.assign({guid:Tt},this.commonQoSFields(),Rt));case 7:case"end":return Et.stop()}},ht,this)}));function lt(){return st.apply(this,arguments)}return lt}(),it.logError=function(lt,ht,Tt,Rt,vt){vt===void 0&&(vt={}),this._getCommonDataFields().then(Et=>{const bt=[lt,ht,Tt,Rt,Object.assign({},Et,vt)];nt.emit("logError",...bt),this._analytics.logError(...bt)})},it.logEvent=function(lt,ht,Tt){lt===void 0&&(lt={}),this._getCommonDataFields().then(Rt=>{const vt=Object.assign({},Rt,lt);nt.emit("logEvent",vt),this._analytics.logEvent(vt,!1,ht,Tt)})},it.logQOS=function(lt){lt===void 0&&(lt={}),this._getCommonDataFields().then(ht=>{const Tt=Object.assign({duration:0},ht,lt);_e(Tt),nt.emit("logQOS",Tt),this._analytics.logQOS(Tt)})},(0,d.default)(nt,[{key:"staticConfig",get:function(){return this._staticConfig},set:function(lt){this._staticConfig=lt,this._analytics=new g({loggingUrl:this.staticConfig.loggingUrl,ajax:this.ajax,queue:this.queue})}}]),nt}();$(dt),e.exports=dt},function(e,s,i){const o=i(247),a={publishers:new o("guid"),subscribers:new o("widgetId"),sessions:new o};e.exports=a},function(e,s,i){const o=i(1)("GlobalExceptionHandler"),a=i(6),c=i(26),d=i(554),h=i(23)(),g=function(j,_){Error.call(this),this.code=j,this.message=_};g.prototype=Object.create(Error.prototype),g.prototype.constructor=g,e.exports=g,a(g),g.getTitleByCode=function(b){return d[+b]},g.handleJsException=b=>{let j=b.error,_=b.errorMsg,$=b.code,_e=b.target,et=b.analytics;if(!_e)throw new Error("handleJsException requires target");const ct=()=>$!==void 0?$:j&&j.code,dt=()=>_!==void 0?_:j&&j.message,nt=g.getTitleByCode(ct());o.error(`OT.exception :: title: ${nt} (${ct()}) msg: ${dt()}`);try{const it={partnerId:_e.session?_e.session.apiKey:_e.apiKey,sessionId:_e.session?_e.session.sessionId:_e.sessionId};et.logError(ct(),"tb.exception",nt,{details:dt()},it);const st=new h.ExceptionEvent(c.EXCEPTION,dt(),nt,ct(),_e,_e,j);if(j)st.stack=j.stack;else try{throw new Error}catch(lt){st.stack=lt.stack}g.dispatchEvent(st)}catch(it){o.error(`OT.exception :: Failed to dispatch exception - ${it.toString()}`)}}},function(e,s,i){var o=i(3),a=o(i(45)),c=o(i(48));const d=i(128),h=i(26);e.exports=function(b){b===void 0&&(b={});const j=b.logging||i(1)("Events"),_={};_.ExceptionEvent=function(it,st,lt,ht,Tt,Rt,vt){return new d(it,!1,{error:vt,message:st,title:lt,code:ht,component:Tt,target:Rt})},_.IssueReportedEvent=function(it,st){return new d(it,!1,{issueId:st})},_.EnvLoadedEvent=function(it){return new d(it,!1)};let $=!1;_.ConnectionEvent=function(nt){(0,c.default)(it,nt);function it(st,lt,ht){return nt.call(this,st,!1,{connection:lt,reason:ht})||this}return(0,a.default)(it,[{key:"connections",get:function(){return $||(j.warn("OT.ConnectionEvent connections property is deprecated, use connection instead."),$=!0),[this.connection]}}]),it}(d);let _e=!1;_.StreamEvent=function(nt){(0,c.default)(it,nt);function it(st,lt,ht,Tt){return nt.call(this,st,Tt,{stream:lt,reason:ht})||this}return(0,a.default)(it,[{key:"streams",get:function(){return _e||(j.warn("OT.StreamEvent streams property is deprecated, use stream instead."),_e=!0),[this.stream]}}]),it}(d);let et=!1,ct=!1,dt=!1;return _.SessionConnectEvent=function(nt){(0,c.default)(it,nt);function it(st){return nt.call(this,st,!1)||this}return(0,a.default)(it,[{key:"connections",get:function(){return et||(j.warn("OT.SessionConnectedEvent no longer includes connections. Listen for connectionCreated events instead."),et=!0),[]}},{key:"streams",get:function(){return ct||(j.warn("OT.SessionConnectedEvent no longer includes streams. Listen for streamCreated events instead."),ct=!0),[]}},{key:"archives",get:function(){return dt||(j.warn("OT.SessionConnectedEvent no longer includes archives. Listen for archiveStarted events instead."),dt=!0),[]}}]),it}(d),_.SessionReconnectingEvent=function(){return new d(h.SESSION_RECONNECTING,!1)},_.SessionReconnectedEvent=function(){return new d(h.SESSION_RECONNECTED)},_.SessionDisconnectEvent=function(it,st,lt){return new d(it,lt,{reason:st})},_.StreamPropertyChangedEvent=function(it,st,lt,ht,Tt){return new d(it,!1,{stream:st,changedProperty:lt,oldValue:ht,newValue:Tt})},_.VideoDimensionsChangedEvent=function(it,st,lt){return new d("videoDimensionsChanged",!1,{target:it,oldValue:st,newValue:lt})},_.ArchiveEvent=function(it,st){return new d(it,!1,{id:st.id,name:st.name,status:st.status,archive:st})},_.ArchiveUpdatedEvent=function(it,st,lt,ht){return new d("updated",!1,{target:it,changedProperty:st,oldValue:lt,newValue:ht})},_.SignalEvent=function(it,st,lt){return new d(it?`signal:${it}`:h.SIGNAL,!1,{data:st,from:lt})},_.CaptionReceivedEvent=function(it,st,lt){return new d("caption",!1,{caption:it,streamId:st,isFinal:lt})},_.PublisherCaptionsEnabled=function(it){return new d("publisherCaptionsEnabled",!1,{captionsEnabled:it})},_.StreamUpdatedEvent=function(it,st,lt,ht){return new d("updated",!1,{target:it,changedProperty:st,oldValue:lt,newValue:ht})},_.DestroyedEvent=function(it,st,lt){return new d(it,!1,{target:st,reason:lt})},_.ConnectionStateChangedEvent=function(it,st){return new d(it,!1,{target:st})},_.VideoEnabledChangedEvent=function(it,st){return new d(it,!1,{reason:st.reason})},_.VideoDisableWarningEvent=function(it){return new d(it,!1)},_.AudioLevelUpdatedEvent=function(it){return new d(h.AUDIO_LEVEL_UPDATED,!1,{audioLevel:it})},_.MediaStoppedEvent=function(it,st){return new d(h.MEDIA_STOPPED,!0,{target:it,track:st})},_.MuteForcedEvent=function(it){return new d(h.MUTE_FORCED,!1,it)},_.VideoElementCreatedEvent=function(it){return new d(h.VIDEO_ELEMENT_CREATED,!1,{element:it})},_}},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5));e.exports=function(h){h===void 0&&(h={});const g=h.getNativeEnumerateDevices||i(287)(),b=h.getNativeMediaDevices||i(646)(),j=h.currentAudioOutputDevice||i(106),_=j.getCurrentAudioOutputDeviceId,$=h.env||i(2),_e=h.global||(typeof window!==void 0?window:commonjsGlobal),et={},ct={audio:"audioInput",video:"videoInput",audioinput:"audioInput",videoinput:"videoInput",audiooutput:"audioOutput",audioInput:"audioInput",videoInput:"videoInput",audioOutput:"audioOutput"},dt=()=>g()();return et.getNativeMediaDevices=()=>b(),et.hasEnumerateDevicesCapability=()=>typeof g()=="function",et.hasDeviceChangeCapability=()=>{const nt=b();return!!(nt&&"ondevicechange"in nt)},et.hasSetSinkIdCapability=()=>"setSinkId"in(_e==null?void 0:_e.HTMLMediaElement.prototype),et.hasAudioOutputApiSupport=()=>et.hasSetSinkIdCapability()&&et.hasDeviceChangeCapability(),et.hasEnumerateDevicesBug=()=>$.isSafari&&$.version===13.1,et.getMediaDevices=()=>et.hasEnumerateDevicesCapability()?dt().then(nt=>nt.map(it=>({deviceId:it.deviceId||it.id,label:it.label,kind:ct[it.kind]}))):o.reject(new Error("This browser does not support enumerateDevices APIs")),et.getInputMediaDevices=()=>et.getMediaDevices().then(nt=>nt.filter(it=>/^(audio|video)Input$/.test(it.kind))),et.getAudioOutputMediaDevices=()=>et.getMediaDevices().then(nt=>nt.filter(it=>it.kind==="audioOutput").map(it=>{let st=it.deviceId,lt=it.label;return{deviceId:st,label:lt}})),et.shouldAskForDevices=()=>et.hasEnumerateDevicesCapability()?et.getInputMediaDevices().then(nt=>{if(nt.length===0)return{video:!0,audio:!0};const it=nt.filter(lt=>lt.kind==="audioInput"),st=nt.filter(lt=>lt.kind==="videoInput");return et.hasEnumerateDevicesBug()&&st.length===0?{audio:!0,video:!0}:{video:st.length>0,audio:it.length>0,videoDevices:st,audioDevices:it}}).catch(()=>({video:!0,audio:!0})):o.resolve({video:!0,audio:!0}),et.getDefaultAudioOutputDeviceId=nt=>!Array.isArray(nt)||nt.length===0?"":(nt.find(lt=>lt.deviceId==="default")||nt[0]).deviceId,et.hasDevice=(nt,it)=>{let st=nt;return Array.isArray(st)||(st=[]),st.some(lt=>lt.deviceId===it)},et.getActiveAudioOutputDevice=(0,d.default)(c.default.mark(function nt(){var it,st,lt;return c.default.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return Tt.prev=0,Tt.next=3,et.getAudioOutputMediaDevices();case 3:it=Tt.sent,Tt.next=9;break;case 6:throw Tt.prev=6,Tt.t0=Tt.catch(0),Tt.t0;case 9:if(it.length!==0){Tt.next=11;break}return Tt.abrupt("return",{deviceId:null,label:null});case 11:return st=it.find(Rt=>Rt.deviceId===_()),st||(lt=et.getDefaultAudioOutputDeviceId(it),st=it.find(Rt=>Rt.deviceId===lt)),Tt.abrupt("return",st);case 14:case"end":return Tt.stop()}},nt,null,[[0,6]])})),et}}).call(this,i(0))},function(e,s,i){var o=i(16),a=i(114);function c(d){return d!=null&&a(d.length)&&!o(d)}e.exports=c},function(e,s,i){e.exports={ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",ISSUE_REPORTED:"issueReported",SESSION_CONNECTED:"sessionConnected",SESSION_RECONNECTING:"sessionReconnecting",SESSION_RECONNECTED:"sessionReconnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL:"signal",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",INVALID_DEVICE_NAME:"invalidDeviceName",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ACCESS_DIALOG_OPENED:"accessDialogOpened",ACCESS_DIALOG_CLOSED:"accessDialogClosed",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",MEDIA_STOPPED:"mediaStopped",PUBLISHER_DESTROYED:"destroyed",MUTE_FORCED:"muteForced",SUBSCRIBER_DESTROYED:"destroyed",SUBSCRIBER_CONNECTED:"connected",SUBSCRIBER_DISCONNECTED:"disconnected",SUBSCRIBER_CAPTION_RECEIVED:"captionReceived",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",MICLEVEL:"microphoneActivityLevel",MICGAINCHANGED:"microphoneGainChanged",ENV_LOADED:"envLoaded",ENV_UNLOADED:"envUnloaded",AUDIO_LEVEL_UPDATED:"audioLevelUpdated",VIDEO_ELEMENT_CREATED:"videoElementCreated"}},function(e,s,i){var o=!0,a=!0;function c(h,g,b){var j=h.match(g);return j&&j.length>=b&&parseInt(j[b],10)}function d(h,g,b){if(h.RTCPeerConnection){var j=h.RTCPeerConnection.prototype,_=j.addEventListener;j.addEventListener=function(_e,et){if(_e!==g)return _.apply(this,arguments);var ct=function(dt){var nt=b(dt);nt&&et(nt)};return this._eventMap=this._eventMap||{},this._eventMap[et]=ct,_.apply(this,[_e,ct])};var $=j.removeEventListener;j.removeEventListener=function(_e,et){if(_e!==g||!this._eventMap||!this._eventMap[et])return $.apply(this,arguments);var ct=this._eventMap[et];return delete this._eventMap[et],$.apply(this,[_e,ct])},Object.defineProperty(j,"on"+g,{get:function(){return this["_on"+g]},set:function(_e){this["_on"+g]&&(this.removeEventListener(g,this["_on"+g]),delete this["_on"+g]),_e&&this.addEventListener(g,this["_on"+g]=_e)},enumerable:!0,configurable:!0})}}e.exports={extractVersion:c,wrapPeerConnectionEvent:d,disableLog:function(h){return typeof h!="boolean"?new Error("Argument type: "+typeof h+". Please use a boolean."):(o=h,h?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(h){return typeof h!="boolean"?new Error("Argument type: "+typeof h+". Please use a boolean."):(a=!h,"adapter.js deprecation warnings "+(h?"disabled":"enabled"))},log:function(){if(typeof window=="object"){if(o)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}},deprecated:function(h,g){a&&console.warn(h+" is deprecated, please use "+g+" instead.")},detectBrowser:function(h){var g=h&&h.navigator,b={};if(b.browser=null,b.version=null,typeof h>"u"||!h.navigator)return b.browser="Not a browser.",b;if(g.mozGetUserMedia)b.browser="firefox",b.version=c(g.userAgent,/Firefox\/(\d+)\./,1);else if(g.webkitGetUserMedia)b.browser="chrome",b.version=c(g.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(g.mediaDevices&&g.userAgent.match(/Edge\/(\d+).(\d+)$/))b.browser="edge",b.version=c(g.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(h.RTCPeerConnection&&g.userAgent.match(/AppleWebKit\/(\d+)\./))b.browser="safari",b.version=c(g.userAgent,/AppleWebKit\/(\d+)\./,1);else return b.browser="Not a supported browser.",b;return b}}},function(e,s,i){function o(nt,it){var st=typeof Symbol<"u"&&nt[Symbol.iterator]||nt["@@iterator"];if(st)return(st=st.call(nt)).next.bind(st);if(Array.isArray(nt)||(st=a(nt))||it&&nt&&typeof nt.length=="number"){st&&(nt=st);var lt=0;return function(){return lt>=nt.length?{done:!0}:{done:!1,value:nt[lt++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(nt,it){if(nt){if(typeof nt=="string")return c(nt,it);var st=Object.prototype.toString.call(nt).slice(8,-1);if(st==="Object"&&nt.constructor&&(st=nt.constructor.name),st==="Map"||st==="Set")return Array.from(nt);if(st==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st))return c(nt,it)}}function c(nt,it){(it==null||it>nt.length)&&(it=nt.length);for(var st=0,lt=new Array(it);st<it;st++)lt[st]=nt[st];return lt}const d=i(9),h=i(60),g=i(272),b=i(129),j=i(273),_=i(1)("SDPHelpers"),$=1e4,_e=2e4,et={getSections(nt){return nt.split(/\r\n|\r|\n/).reduce((it,st)=>{const lt=st.match(/^m=(\w+) \d+/);return lt&&(it.sections[it.section=lt[1]]=[]),it.sections[it.section].push(st),it},{sections:{header:[]},section:"header"}).sections},getCodecsFromSection(nt){const it=nt[0].match(/m=\w+ \d+ [A-Z/]+ ([\d ]+)$/)[1].split(" "),st=d(...nt.filter(lt=>lt.match(/^a=rtpmap:\d+/)).map(lt=>lt.match(/^a=rtpmap:(\d+) ([\w-]+)/).splice(1)).map(lt=>{let ht=lt[0],Tt=lt[1];return{[ht]:Tt}}));return{codecs:it,codecMap:st}},getCodecsAndCodecMap(nt,it){const st=et.getSections(nt)[it];if(!st)throw new Error(`no mediaType ${it}`);return et.getCodecsFromSection(st)},getCodecs(nt,it){const st=et.getCodecsAndCodecMap(nt,it);return st.codecs.map(lt=>st.codecMap[lt]||"Unknown codec")},mediaDirections:{INACTIVE:"inactive",RECVONLY:"recvonly",SENDONLY:"sendonly",SENDRECV:"sendrecv"}};e.exports=et,et.getMLineIndex=function(it,st){const lt=`m=${st}`;return g(it,ht=>ht.indexOf(lt)!==-1)},et.getMLine=function(it,st){const lt=et.getMLineIndex(it,st);return lt>-1?it[lt]:void 0},et.hasMediaType=(nt,it)=>{const st=new RegExp(`^m=${it}`),lt=nt.split(`\r
`);return g(lt,ht=>st.test(ht))>=0},et.hasMLinePayloadType=function(it,st,lt){const ht=et.getMLine(it,st);return et.getMLinePayloadTypes(ht,st).indexOf(lt)>-1},et.getMLinePayloadTypes=function(it,st){const lt=new RegExp(`^m=${st} \\d+(/\\d+)? [a-zA-Z0-9/]+(( [a-zA-Z0-9/]+)+)$`,"i"),ht=it.match(lt);return!ht||ht.length<2?[]:ht[2].trim().split(" ")},et.splitSections=function(it){return it.split(`
m=`).map((lt,ht)=>(ht>0?"m="+lt:lt).trim()+`\r
`)},et.changeMediaDirection=function(it,st){const lt=vt=>{const Et=st===et.mediaDirections.RECVONLY?"a=inactive":"a=recvonly",bt=new RegExp(Et,"g");return vt.replace(bt,`a=${st}`)},ht=et.splitSections(it);let Rt=ht.shift();return ht.forEach(vt=>{const Et=vt.includes("m=video")?lt(vt):vt;Rt+=Et}),Rt},et.removeTypesFromMLine=function(it,st){const lt=/[0-9 ]*$/.exec(it)[0],ht=lt.split(" ").filter(Tt=>Tt!==""&&st.indexOf(Tt)===-1);return it.replace(lt,` ${ht.join(" ")}`)},et.removeMediaEncoding=function(it,st,lt){let ht,Tt,Rt,vt,Et=it.split(`\r
`);const bt=et.getMLineIndex(Et,st),Ct=bt>-1?Et[bt]:void 0,Ut=[];if(bt===-1||(ht=et.getMLinePayloadTypes(Ct,st),ht.length===0))return Et.join(`\r
`);for(Tt=bt;Tt<Et.length;Tt++){const Xt=new RegExp(lt,"i");Et[Tt].indexOf("a=rtpmap:")===0&&(vt=Et[Tt].split(" "),vt.length===2&&Xt.test(vt[1])&&Ut.push(vt[0].substr(9)))}if(!Ut.length)return Et.join(`\r
`);for(Tt=bt;Tt<Et.length;Tt++)if(Et[Tt].indexOf("a=fmtp:")===0)for(vt=Et[Tt].split(" "),Rt=0;Rt<Ut.length;Rt++)vt.length===2&&vt[1]===`apt=${Ut[Rt]}`&&Ut.push(vt[0].substr(7));return Et=Et.filter(Xt=>{for(let Nt=0;Nt<Ut.length;Nt++)if(Xt.indexOf(`a=rtpmap:${Ut[Nt]} `)===0||Xt.indexOf(`a=fmtp:${Ut[Nt]} `)===0||Xt.indexOf(`a=rtcp-fb:${Ut[Nt]} `)===0)return!1;return!0}),Ut.length>0&&bt>-1&&(Et[bt]=et.removeTypesFromMLine(Ct,Ut)),Et.join(`\r
`)},et.disableMediaType=function(it,st){const lt=it.split(`\r
`),ht=[];let Tt;lt.forEach(Et=>{let bt=Et;/^m=/.test(bt)&&(Tt=void 0),Tt||(Tt=[],ht.push(Tt)),Tt.push(bt)});const Rt=new RegExp(`^m=${st} \\d+ ([^ ]+) [0-9 ]+$`),vt=ht.map(Et=>{const bt=Et[0].match(Rt);return bt?[`m=${st} 0 ${bt[1]} 0`,"a=inactive",...Et.filter(Ct=>/^c=/.test(Ct)||/^a=mid:/.test(Ct)||Ct==="")]:Et});return[].concat(...vt).join(`\r
`)},et.removeVideoCodec=function(it,st){return et.removeMediaEncoding(it,"video",st)};const ct=function(it,st){let lt=st.filterByName("ssrc-group:FID");switch(lt.length===0?lt=[]:lt=lt[0].value.split(" "),lt.length){case 0:case 1:var Tt=st.find(vt=>vt.name.indexOf("rtpmap:")===0&&vt.value.indexOf("rtx/90000")>-1);if(!Tt)return!1;var Rt=Tt.name.split(":")[1];return Rt.indexOf("/")>-1&&(Rt=Rt.split("/")[0]),et.hasMLinePayloadType(it,"video",Rt);default:return _.debug("SDP Helpers: There are more than two FIDs, RTX is definitely enabled"),!0}};et.getAttributesForMediaType=function(it,st){let lt,ht,Tt,Rt,vt,Et,bt,Ct,Ut,Xt;const Nt=et.getMLineIndex(it,st),Jt=new RegExp(`m=(?!${st}).+ `,"i"),zt=new RegExp("a=ssrc:\\d+ .*","i"),nn=new RegExp("a=ssrc-group:(SIM|FID) (\\d+).*?","i"),Bt=new RegExp("a=([a-z0-9:/-]+) (.*)","i"),sn=[];for(let qt=Nt+1;qt<it.length;qt++){if(Jt.test(it[qt])){lt!==void 0&&(ht=qt-1);break}vt=it[qt].match(nn),Et=it[qt].match(zt),lt===void 0&&(vt||Et)&&(lt=qt,vt&&(Rt=/^(FID|SIM)$/.test(vt[1])?vt[2]:vt[1])),bt=it[qt].match(`a=ssrc:${Rt} msid:(.+)`),bt&&(Ct=bt[1]);const Kt=zt.test(it[qt]),$t=nn.test(it[qt]);lt!==void 0&&(ht===void 0&&!Kt&&!$t?ht=qt-1:qt===it.length-1&&(ht=qt));const Sn=it[qt].match(/a=mid:(.+)/);Sn&&(Ut=Sn[1],Xt=qt),Tt=Bt.exec(it[qt]),Tt&&Tt.length===3&&sn.push({lineIndex:qt,name:Tt[1],value:Tt[2]})}return sn.ssrcStartIndex=lt,sn.ssrcEndIndex=ht,sn.msid=Ct,sn.mid=Ut,sn.midIndex=Xt,sn.isUsingRTX=ct.bind(null,it,sn),sn.filterByName=function(Kt){return this.filter($t=>$t.name===Kt)},sn.getRtpNumber=qt=>{const Kt=new RegExp("rtpmap:(.+)");return h(sn.map($t=>{const Sn=$t.name.match(Kt);return Sn&&$t.value.indexOf(qt)>=0?Sn[1]:null}),$t=>$t!==null)},sn},et.modifyDtx=(nt,it)=>{const st=nt.split(`\r
`);if(!et.getMLine(st,"audio"))return _.debug("No audio m-line, not enabling dtx."),nt;const lt=et.getAttributesForMediaType(st,"audio"),ht=lt.getRtpNumber("opus");if(!ht)return _.debug("Could not find rtp number for opus, not enabling dtx."),nt;const Tt=lt.find(Et=>Et.name===`fmtp:${ht}`);if(!Tt)return _.debug("Could not find a=fmtp line for opus, not enabling dtx."),nt;let Rt=st[Tt.lineIndex];const vt=/usedtx=\d+([\s;]*)/;return vt.test(Tt.value)?Rt=Rt.replace(vt,it?"usedtx=1$1":""):it&&(Rt+="; usedtx=1"),Rt=Rt.replace(/[;\s]*$/,""),st[Tt.lineIndex]=Rt,st.join(`\r
`)};const dt=(nt,it,st)=>{const lt=it.split(`\r
`);if(!et.getMLine(lt,"audio"))return _.debug("No audio m-line, not enabling stereo."),it;const ht=et.getAttributesForMediaType(lt,"audio"),Tt=ht.getRtpNumber("opus");if(!Tt)return _.debug("Could not find rtp number for opus, not enabling stereo."),it;const Rt=ht.find(bt=>bt.name===`fmtp:${Tt}`);if(!Rt)return _.debug("Could not find a=fmtp line for opus, not enabling stereo."),it;let vt=lt[Rt.lineIndex],Et;switch(nt){case"send":Et=/sprop-stereo=\d+([\s;]*)/,Et.test(Rt.value)?vt=vt.replace(Et,st?"sprop-stereo=1$1":""):st&&(vt+="; sprop-stereo=1");break;case"receive":Et=/([^-])stereo=\d+([\s;]*)/,Et.test(Rt.value)?vt=vt.replace(Et,st?"$1stereo=1$2":"$1"):st&&(vt+="; stereo=1");break;default:throw new Error(`Invalid type ${nt} passed into enableStereo`)}return vt=vt.replace(/[;\s]*$/,""),lt[Rt.lineIndex]=vt,lt.join(`\r
`)};et.modifySendStereo=dt.bind(null,"send"),et.modifyReceiveStereo=dt.bind(null,"receive"),et.setAudioBitrate=(nt,it)=>{const st=et.getAudioBitrate(nt);if(st!==void 0)return _.debug(`Audio bitrate already set to ${st}, not setting audio bitrate`),nt;const lt=nt.split(`\r
`);if(!et.getMLine(lt,"audio"))return _.debug("No audio m-line, not setting audio bitrate"),nt;const ht=et.getAttributesForMediaType(lt,"audio"),Tt=ht.getRtpNumber("opus");if(!Tt)return _.debug("Could not find rtp number for opus, not setting audio bitrate."),nt;const Rt=ht.find(Et=>Et.name===`fmtp:${Tt}`);if(!Rt)return _.debug("Could not find a=fmtp line for opus, not setting audio bitrate."),nt;let vt=lt[Rt.lineIndex];return vt+=`; maxaveragebitrate=${it}`,vt=vt.replace(/[;\s]*$/,""),lt[Rt.lineIndex]=vt,lt.join(`\r
`)},et.removeVideoOrientation=nt=>{let it=nt.split(`\r
`);return it=it.filter(st=>!st.includes("urn:3gpp:video-orientation")),it.join(`\r
`)},et.hasSendStereo=nt=>/[\s;]sprop-stereo=1/.test(nt),et.hasSendDtx=nt=>/[\s;]usedtx=1/.test(nt),et.getAudioBitrate=nt=>{const it=nt.match(/[\s;]maxaveragebitrate=(\d+)/);if(it)return Number(it[1])},et.MAX_SSRCS=10,et.getSSRCGroupType=nt=>["SIM","FID"].find(st=>nt.filterByName(`ssrc-group:${st}`)[0]),et.getSSRCGroup=nt=>{const it=et.getSSRCGroupType(nt);return nt.filterByName(`ssrc-group:${it}`)[0]},et.getSSRCGroupSSRCs=nt=>{const it=et.getSSRCGroup(nt);return it?it.value.split(" ").slice(0,et.MAX_SSRCS):[]},et.getAllowedSSRCs=(nt,it)=>{const st=it.slice();return nt.filterByName("ssrc-group:FID").forEach(lt=>{const ht=lt.value.split(" ");b(st,ht).length&&Array.prototype.push.apply(st,ht)}),j(st)},et.filterExcessSSRCs=nt=>{const it=nt.split(`\r
`),st=et.getAttributesForMediaType(it,"video"),lt=et.getSSRCGroupType(st),ht=st.ssrcStartIndex;if(ht===void 0)return nt;let Tt;const Rt=Et=>{let bt=null;return Et.match(/^a=ssrc:(\d+)/)&&(bt=RegExp.$1),bt};if(lt){const Et=et.getSSRCGroupSSRCs(st),bt=[`a=ssrc-group:${lt}`,...Et].join(" "),Ct=st.find(Ut=>Ut.name.startsWith("ssrc-group:")).lineIndex;it[Ct]=bt,Tt=et.getAllowedSSRCs(st,Et)}else Tt=[],st.ssrcStartIndex&&Tt.push(Rt(it[st.ssrcStartIndex]));return it.filter((Et,bt)=>{if(bt<ht||bt>st.ssrcEndIndex)return!0;if(bt===ht){if(!lt){const Ut=Rt(Et);return Ut?Tt.includes(Ut):!/^a=ssrc:(\d+)/.test(Et)}return!0}const Ct=Rt(Et);if(Ct)return Tt.includes(Ct);if(Et.match(/^a=ssrc-group:FID (\d+)/)){const Ut=RegExp.$1;return Tt.includes(Ut)}return!Et.match(/^a=ssrc-group:SIM /)}).join(`\r
`)},et.enableSimulcast=function(it,st){let lt,ht;const Tt=it.split(`\r
`);if(!et.getMLine(Tt,"video"))return _.debug("No video m-line, not enabling simulcast."),it;const Rt=et.getAttributesForMediaType(Tt,"video");if(Rt.filterByName("ssrc-group:SIM").length>0)return _.debug("Simulcast is already enabled in this SDP, not attempting to enable again."),et.filterExcessSSRCs(it);if(!Rt.msid)return _.debug("No local stream attached, not enabling simulcast."),it;const vt=Rt.isUsingRTX(),Et=[],bt=[];for(ht=0;ht<st;++ht)Et.push($+ht),vt&&bt.push(_e+ht);if(lt=[`a=ssrc-group:SIM ${Et.join(" ")}`],vt)for(ht=0;ht<st;++ht)lt.push(`a=ssrc-group:FID ${Et[ht]} ${bt[ht]}`);for(ht=0;ht<st;++ht)lt.push(`a=ssrc:${Et[ht]} cname:localCname`,`a=ssrc:${Et[ht]} msid:${Rt.msid}`);if(vt)for(ht=0;ht<st;++ht)lt.push(`a=ssrc:${bt[ht]} cname:localCname`,`a=ssrc:${bt[ht]} msid:${Rt.msid}`);return lt.unshift(Rt.ssrcStartIndex,Rt.ssrcEndIndex-Rt.ssrcStartIndex+1),Tt.splice(...lt),Tt.join(`\r
`)},et.reprioritizeVideoCodec=function(it,st,lt){const ht=it.split(`\r
`),Tt=et.getMLineIndex(ht,"video");if(Tt===-1)return it;const Rt=et.getMLinePayloadTypes(ht[Tt],"video"),vt=new RegExp(`^a=rtpmap:(\\d+).* ${st}`,"i"),Et=ht.map(Xt=>Xt.match(vt)).filter(Xt=>Xt!==null);if(Et.length===0)return it;const bt=Et.map(Xt=>Xt[1]);let Ct=Rt.filter(Xt=>bt.indexOf(Xt)===-1);lt==="top"?Ct.unshift(...bt):lt==="bottom"?Ct.push(...bt):(_.error(`Unexpected location param: ${lt}; not changing ${st} priority`),Ct=Rt);const Ut=ht[Tt].replace(Rt.join(" "),Ct.join(" "));return ht[Tt]=Ut,ht.join(`\r
`)},et.getSetupRole=nt=>{for(var it=o(nt.split(/\r\n|\r|\n/)),st;!(st=it()).done;){const ht=st.value.match(/^a=setup:(\w+)/);if(ht)return ht[1]}return""},et.setSetupRole=(nt,it)=>nt.split(/\r\n|\r|\n/).map(st=>st.match(/^a=setup:(\w+)/)?`a=setup:${it}`:st).join(`\r
`),et.changeSetupRole=(nt,it,st)=>nt.map(lt=>lt.includes(`a=setup:${it}`)?`a=setup:${st}`:lt),et.patterns={bundle:"a=group:BUNDLE",address:"c=IN IP4",rtcp:"a=rtcp:",direction:["a=inactive","a=sendonly","a=recvonly","a=sendrecv"],rsize:"a=rtcp-rsize",ssrc:"a=ssrc:",msid:"a=msid:"},et.getIndexStartingWith=(nt,it,st)=>{const lt=nt.slice(st),ht=it.map(Tt=>lt.findIndex(Rt=>Rt.includes(Tt))).filter(Tt=>Tt>-1);return ht.length?st+Math.min(...ht):nt.length},et.getLastIndexPriorTo=(nt,it,st)=>nt.slice(0,st).findLastIndex(ht=>ht.includes(it)),et.includesAny=(nt,it)=>{for(let st=0;st<it.length;st++)if(nt.includes(it[st]))return!0;return!1},et.isVersionLine=nt=>/^o=/.test(nt),et.getVersionLine=nt=>nt.find(et.isVersionLine),et.getVersion=nt=>{const it=et.getVersionLine(nt);if(it===void 0)return;const st=Number(it.match(/ (\d+) IN /)[1]);return Number.isInteger(st)?st:void 0},et.updateVersion=(nt,it,st)=>{const lt=[...nt],ht=lt.findIndex(Tt=>et.isVersionLine(Tt));return lt[ht]=lt[ht].replace(` ${it} `,` ${st} `),lt},et.isBundleLine=nt=>nt.includes(et.patterns.bundle),et.getBundleLine=nt=>nt.find(et.isBundleLine),et.createBundleLine=nt=>`${et.patterns.bundle} ${nt.join(" ")}`,et.updateBundleLine=(nt,it)=>{const st=[...nt],lt=et.createBundleLine(it),ht=st.findIndex(Tt=>et.isBundleLine(Tt));return st[ht]=lt,st},et.parseMLine=nt=>{const it=nt.match(/^(m=(?:audio|video)) (\d+) (.+)/),st=it[1],lt=it[2],ht=it[3];return{port:lt,transport:ht,mediaType:st}},et.disableTrack=nt=>{const it=et.parseMLine(nt),st=it.mediaType,lt=it.transport;return`${st} 0 ${lt}`},et.setMediaDirection=(nt,it)=>{if(!Object.values(et.mediaDirections).includes(it))return nt;const lt=nt.slice(),ht=lt.findIndex(Tt=>et.includesAny(Tt,et.patterns.direction));return ht===-1||(lt[ht]=`a=${it}`),lt},et.disableTrackSection=nt=>{const it=nt.mid,st=nt.sdp;let lt=st.filter(ht=>{const Tt=et.patterns,Rt=Tt.address,vt=Tt.rtcp,Et=Tt.rsize,bt=Tt.ssrc,Ct=Tt.msid;return!et.includesAny(ht,[Rt,vt,Et,bt,Ct])});return lt[0]=et.disableTrack(st[0]),lt=et.setMediaDirection(lt,et.mediaDirections.INACTIVE),{mid:it,sdp:lt}},et.getEnabledTracks=nt=>et.getBundleLine(nt).match(new RegExp(`^${et.patterns.bundle} (.+)$`))[1].split(" "),et.getDisabledTracks=(nt,it)=>nt.filter(st=>!it.includes(st)),et.getTrackSection=(nt,it)=>{const st=nt.findIndex(vt=>vt.includes(`a=mid:${it}`)),lt=it.includes("a")?"audio":"video",ht=et.getLastIndexPriorTo(nt,`m=${lt}`,st),Tt=et.getIndexStartingWith(nt,["m=audio","m=video"],st),Rt=nt.slice(ht,Tt);return{mid:it,sdp:Rt}},et.getHeaders=nt=>{const it=nt.findIndex(st=>st.includes("m=audio")||st.includes("m=video"));return nt.slice(0,it)},et.disableTracks=(nt,it)=>nt.map(st=>it.includes(st.mid)?et.disableTrackSection(st):st),et.getSDPLines=nt=>nt.split(`\r
`).filter(it=>it),et.parseSDP=nt=>{const it=et.getSDPLines(nt),st=et.changeSetupRole(it,"actpass","passive"),lt={bundle:et.getBundleLine(st),headers:et.getHeaders(st),version:et.getVersion(st),tracks:et.getEnabledTracks(st)};return lt.trackSections=lt.tracks.map(ht=>et.getTrackSection(st,ht)),lt},et.createSDP=(nt,it)=>{const st=nt;return it.forEach(lt=>st.push(...lt.sdp)),st.push(""),st.join(`\r
`)},et.removePayloadTypeFromSection=(nt,it)=>nt.filter(st=>!st.includes(`a=rtpmap:${it} `)&&!st.includes(`a=fmtp:${it} `)&&!st.includes(`a=rtcp-fb:${it} `)),et.getRtxPayloadType=(nt,it)=>{const st=nt.filter(ht=>ht.includes(`apt=${it}`))[0];return st==null?void 0:st.match(/^a=fmtp:(\d+) /)[1]},et.removeRtxPayloadTypeFromSection=(nt,it)=>{let st=[...nt];const lt=et.getRtxPayloadType(st,it);return lt&&(st=et.removePayloadTypeFromSection(st,lt)),st},et.trimUnusedCodecs=(nt,it)=>{const st=nt[0].split(" "),lt=st.slice(3),ht=st.slice(0,3),Tt=et.getCodecsFromSection(nt);let Rt=[...nt];return lt.forEach(vt=>{const Et=Tt.codecMap[vt];if(!it.includes(Et))Rt=et.removePayloadTypeFromSection(Rt,vt),Rt=et.removeRtxPayloadTypeFromSection(Rt,vt);else{ht.push(vt);const bt=et.getRtxPayloadType(Rt,vt);bt&&ht.push(bt)}}),Rt[0]=ht.join(" "),Rt},et.removeUnusedCodecs=(nt,it)=>{if(!it)return nt;const st=et.getSDPLines(nt),lt=et.getSDPLines(it),ht={header:et.getHeaders(st)};et.getEnabledTracks(lt).forEach(vt=>{const Et=et.getTrackSection(st,vt).sdp,bt=et.getTrackSection(lt,vt).sdp,Ct=Object.values(et.getCodecsFromSection(bt).codecMap);ht[vt]=et.trimUnusedCodecs(Et,Ct)});const Rt=[];return Object.values(ht).forEach(vt=>Rt.push(...vt)),Rt.push(""),Rt.join(`\r
`)},et.updateSDPWithNewOffer=(nt,it)=>{const st=nt.headers,lt=nt.version,ht=nt.tracks,Tt=nt.trackSections,Rt=et.getSDPLines(it),vt={};vt.version=et.getVersion(Rt),vt.headers=et.updateVersion(st,lt,vt.version),vt.tracks=et.getEnabledTracks(Rt);const Et=et.getDisabledTracks(ht,vt.tracks);return vt.headers=et.updateBundleLine(vt.headers,vt.tracks),vt.trackSections=et.disableTracks(Tt,Et),vt}},function(e,s,i){var o=i(39),a=i(364),c=i(365),d="[object Null]",h="[object Undefined]",g=o?o.toStringTag:void 0;function b(j){return j==null?j===void 0?h:d:g&&g in Object(j)?a(j):c(j)}e.exports=b},function(e,s,i){var o=i(177),a=i(116),c=i(25);function d(h){return c(h)?o(h):a(h)}e.exports=d},function(e,s,i){var o=i(43);e.exports=function(a){if(!o(a))throw new TypeError("Cannot use null or undefined");return a}},function(e,s,i){var o=i(55),a=i(198),c=i(127),d=i(199),h=i(200),g=e.exports=function(b,j){var _,$,_e,et,ct;return arguments.length<2||typeof b!="string"?(et=j,j=b,b=null):et=arguments[2],o(b)?(_=h.call(b,"c"),$=h.call(b,"e"),_e=h.call(b,"w")):(_=_e=!0,$=!1),ct={value:j,configurable:_,enumerable:$,writable:_e},et?c(d(et),ct):ct};g.gs=function(b,j,_){var $,_e,et,ct;return typeof b!="string"?(et=_,_=j,j=b,b=null):et=arguments[3],o(j)?a(j)?o(_)?a(_)||(et=_,_=void 0):_=void 0:(et=j,j=_=void 0):j=void 0,o(b)?($=h.call(b,"c"),_e=h.call(b,"e")):($=!0,_e=!1),ct={get:j,set:_,configurable:$,enumerable:_e},et?c(d(et),ct):ct}},function(e,s){function i(o,a){for(var c=-1,d=o==null?0:o.length,h=Array(d);++c<d;)h[c]=a(o[c],c,o);return h}e.exports=i},function(e,s,i){(function(o){var a=i(3),c=a(i(45));const d=i(206),h=i(56),g=i(483),b=i(530),j=i(1)("StaticConfig"),_=i(100),$=_.prependProxyToUrlIfNeeded,_e=h({version:"v2.25.1",buildHash:"8d76a4b67",minimumVersion:{firefox:52,chrome:49},debug:!1,websiteURL:"http://www.tokbox.com",configURL:"https://config.opentok.com",ipWhitelistConfigURL:"",cdnURL:"https://static.opentok.com",loggingURL:"https://hlg.tokbox.com/prod",apiURL:"https://anvil.opentok.com"}),et=g(["apiURL","assetURL","cdnURL","sessionInfoOverrides","loggingURL"]),ct={apiUrl:"apiURL",loggingUrl:"loggingURL"},dt=b(it=>ct[it]);function nt(it){let st=it===void 0?{}:it,lt=st.axios,ht=lt===void 0?d:lt;return function(){Rt.onlyLocal=function(){const Et=h((typeof window!==void 0?window:commonjsGlobal).OTProperties);return new Rt(Object.assign({},_e,et(Et)))},Rt.get=function(Et){let bt=Et.partnerId,Ct=Et.token,Ut=Et.useIpWhitelistConfigUrl,Xt=Et.proxyUrl;return(()=>{const Jt=this.onlyLocal();if(!Jt.configUrl)return o.resolve({});if(Ut===!0&&!Jt.ipWhitelistConfigUrl)return o.resolve({});let zt=Ut===!0?Jt.ipWhitelistConfigUrl:Jt.configUrl;return zt=$(zt,Xt),ht.get(`${zt}/project/${bt}/config.json`,{headers:{"X-TB-TOKEN-AUTH":Ct}}).then(nn=>nn.data)})().catch(Jt=>(j.error("could not reach live config service",Jt),{})).then(Jt=>{const zt=h((typeof window!==void 0?window:commonjsGlobal).OTProperties),nn=Object.assign({},_e,et(zt),dt(Jt));return new Rt(nn)})};function Rt(vt){Object.defineProperty(this,"config",{value:Object.freeze(h(vt))})}return(0,c.default)(Rt,[{key:"configUrl",get:function(){return this.config.configURL}},{key:"ipWhitelistConfigUrl",get:function(){return this.config.ipWhitelistConfigURL}},{key:"apiUrl",get:function(){return this.config.apiURL}},{key:"loggingUrl",get:function(){return this.config.loggingURL}},{key:"apiEnabled",get:function(){return typeof this.config.apiEnabled<"u"?this.config.apiEnabled:!0}},{key:"version",get:function(){return this.config.version}},{key:"clientVersion",get:function(){return`js-${(this.version||"unknown").replace("v","")}`}},{key:"buildHash",get:function(){return this.config.buildHash}},{key:"minimumVersion",get:function(){return this.config.minimumVersion}},{key:"websiteUrl",get:function(){return this.config.websiteURL}},{key:"debug",get:function(){return this.config.debug==="true"||this.config.debug===!0}},{key:"sessionInfoOverrides",get:function(){return this.config.sessionInfoOverrides}},{key:"cdnUrl",get:function(){return this.config.cdnURL||`${(typeof window!==void 0?window:commonjsGlobal).location.protocol}//${(typeof window!==void 0?window:commonjsGlobal).location.host}`}},{key:"assetUrl",get:function(){return this.config.assetURL||`${this.cdnUrl}/webrtc/${this.version}`}}]),Rt}()}e.exports=nt}).call(this,i(0))},function(e,s,i){var o=i(509),a=i(515),c=i(88),d=i(12),h=i(520);function g(b){return typeof b=="function"?b:b==null?c:typeof b=="object"?d(b)?a(b[0],b[1]):o(b):h(b)}e.exports=g},function(e,s,i){const o=i(8);e.exports=function(c,d){let h;const g=d||{};c.setDisplayMode=function(b){const j=b||"auto";h!==j&&(o.removeClass(this.domElement,`OT_mode-${h}`),o.addClass(this.domElement,`OT_mode-${j}`),h=j)},c.getDisplayMode=function(){return h},c.showAfterLoading=function(){o.removeClass(this.domElement,"OT_hide-forced")},c.hideWhileLoading=function(){o.addClass(this.domElement,"OT_hide-forced")},c.destroy=function(){return g.onDestroy&&g.onDestroy(this.domElement),this.domElement&&o.removeElement(this.domElement),c},c.appendTo=function(b){return this.domElement=o.createElement(g.nodeName||"div",g.htmlAttributes,g.htmlContent),g.onCreate&&g.onCreate(this.domElement),c.setDisplayMode(g.mode),g.mode==="auto"&&(o.addClass(c.domElement,"OT_mode-on-hold"),setTimeout(()=>{o.removeClass(c.domElement,"OT_mode-on-hold")},2e3)),b.appendChild(this.domElement),c}}},function(e,s,i){var o=i(77),a=4;function c(d){return o(d,a)}e.exports=c},function(e,s,i){var o=i(363),a=i(368);function c(d,h){var g=a(d,h);return o(g)?g:void 0}e.exports=c},function(e,s,i){var o=i(14),a=o.Symbol;e.exports=a},function(e,s,i){var o=i(83),a=i(62);function c(d,h,g,b){var j=!g;g||(g={});for(var _=-1,$=h.length;++_<$;){var _e=h[_],et=b?b(g[_e],d[_e],_e,g,d):void 0;et===void 0&&(et=d[_e]),j?a(g,_e,et):o(g,_e,et)}return g}e.exports=c},function(e,s,i){var o=i(392),a=i(111),c=i(393),d=i(185),h=i(186),g=i(29),b=i(174),j="[object Map]",_="[object Object]",$="[object Promise]",_e="[object Set]",et="[object WeakMap]",ct="[object DataView]",dt=b(o),nt=b(a),it=b(c),st=b(d),lt=b(h),ht=g;(o&&ht(new o(new ArrayBuffer(1)))!=ct||a&&ht(new a)!=j||c&&ht(c.resolve())!=$||d&&ht(new d)!=_e||h&&ht(new h)!=et)&&(ht=function(Tt){var Rt=g(Tt),vt=Rt==_?Tt.constructor:void 0,Et=vt?b(vt):"";if(Et)switch(Et){case dt:return ct;case nt:return j;case it:return $;case st:return _e;case lt:return et}return Rt}),e.exports=ht},function(e,s){var i=e.exports={},o,a;function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=c}catch{o=c}try{typeof clearTimeout=="function"?a=clearTimeout:a=d}catch{a=d}})();function h(nt){if(o===setTimeout)return setTimeout(nt,0);if((o===c||!o)&&setTimeout)return o=setTimeout,setTimeout(nt,0);try{return o(nt,0)}catch{try{return o.call(null,nt,0)}catch{return o.call(this,nt,0)}}}function g(nt){if(a===clearTimeout)return clearTimeout(nt);if((a===d||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(nt);try{return a(nt)}catch{try{return a.call(null,nt)}catch{return a.call(this,nt)}}}var b=[],j=!1,_,$=-1;function _e(){!j||!_||(j=!1,_.length?b=_.concat(b):$=-1,b.length&&et())}function et(){if(!j){var nt=h(_e);j=!0;for(var it=b.length;it;){for(_=b,b=[];++$<it;)_&&_[$].run();$=-1,it=b.length}_=null,j=!1,g(nt)}}i.nextTick=function(nt){var it=new Array(arguments.length-1);if(arguments.length>1)for(var st=1;st<arguments.length;st++)it[st-1]=arguments[st];b.push(new ct(nt,it)),b.length===1&&!j&&h(et)};function ct(nt,it){this.fun=nt,this.array=it}ct.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function dt(){}i.on=dt,i.addListener=dt,i.once=dt,i.off=dt,i.removeListener=dt,i.removeAllListeners=dt,i.emit=dt,i.prependListener=dt,i.prependOnceListener=dt,i.listeners=function(nt){return[]},i.binding=function(nt){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(nt){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,s,i){var o=i(411)();e.exports=function(a){return a!==o&&a!==null}},function(e,s,i){e.exports=i(425)()?i(91).Symbol:i(428)},function(e,s){function i(a,c){for(var d=0;d<c.length;d++){var h=c[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(a,h.key,h)}}function o(a,c,d){return c&&i(a.prototype,c),d&&i(a,d),a}e.exports=o},function(e,s,i){var o=i(69),a=1/0;function c(d){if(typeof d=="string"||o(d))return d;var h=d+"";return h=="0"&&1/d==-a?"-0":h}e.exports=c},function(e,s,i){var o=i(527),a=i(140),c=a(function(d,h){return d==null?{}:o(d,h)});e.exports=c},function(e,s){function i(o,a){o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a}e.exports=i},function(e,s,i){const o=(typeof window!==void 0?window:commonjsGlobal).performance||{};e.exports=function(){return o.now?o.timing.navigationStart+o.now():Date.now()}},function(e,s,i){var o=i(593);function a(c){return o(2,c)}e.exports=a},function(e,s,i){const o=i(50),a=i(34)();s.check=function(c){c===void 0&&(c={});const d=c.env||i(2),h=c.hasGetUserMediaCapability||i(601),g=c.hasPeerConnectionCapability||i(602),b=c.logging||i(1)("hasOpenTokSupport"),$=((c.staticConfig||a.onlyLocal()).minimumVersion||{})[d.name.toLowerCase()];return $&&$>d.version?(b.debug("Support for",d.name,"is disabled because we require",$,"but this is",d.version),!1):d.name==="Node"?!0:h()&&g()},s.once=o(()=>s.check())},function(e,s){function i(o,a){return o===a||o!==o&&a!==a}e.exports=i},function(e,s,i){var o=i(177),a=i(387),c=i(25);function d(h){return c(h)?o(h,!0):a(h)}e.exports=d},function(e,s){function i(o,a){var c=-1,d=o.length;for(a||(a=Array(d));++c<d;)a[c]=o[c];return a}e.exports=i},function(e,s,i){var o=void 0;e.exports=function(a){return a!==o&&a!==null}},function(e,s,i){var o=i(77),a=1,c=4;function d(h){return o(h,a|c)}e.exports=d},function(e,s,i){var o=i(98);function a(c,d,h){var g=c==null?void 0:o(c,d);return g===void 0?h:g}e.exports=a},function(e,s,i){var o=i(12),a=i(139),c=i(235),d=i(59);function h(g,b){return o(g)?g:a(g,b)?[g]:c(d(g))}e.exports=h},function(e,s,i){var o=i(517);function a(c){return c==null?"":o(c)}e.exports=a},function(e,s,i){var o=i(616),a=i(272),c=o(a);e.exports=c},function(e,s,i){e.exports=function(a){const c=[];return{on(d,h){for(var g=arguments.length,b=new Array(g>2?g-2:0),j=2;j<g;j++)b[j-2]=arguments[j];if(c.push({eventName:d,handler:h,args:b}),a.on)a.on(d,h);else if(a.addEventListener)a.addEventListener(d,h,...b);else throw new Error("Object does not support events",a)},off(d,h){if(a.off)a.off(d,h);else if(a.removeEventListener){for(var g=arguments.length,b=new Array(g>2?g-2:0),j=2;j<g;j++)b[j-2]=arguments[j];a.removeEventListener(d,h,...b)}else throw new Error("Object does not support events",a)},once(d,h){for(var g=arguments.length,b=new Array(g>2?g-2:0),j=2;j<g;j++)b[j-2]=arguments[j];c.push({eventName:d,handler:h,args:b}),a.once(d,h)},removeAll(){c.forEach(d=>{let h=d.eventName,g=d.handler,b=d.args;this.off(h,g,...b)}),c.splice(0,c.length)}}}},function(e,s,i){var o=i(175);function a(c,d,h){d=="__proto__"&&o?o(c,d,{configurable:!0,enumerable:!0,value:h,writable:!0}):c[d]=h}e.exports=a},function(e,s,i){var o=i(382),a=i(17),c=Object.prototype,d=c.hasOwnProperty,h=c.propertyIsEnumerable,g=o(function(){return arguments}())?o:function(b){return a(b)&&d.call(b,"callee")&&!h.call(b,"callee")};e.exports=g},function(e,s,i){(function(o){var a=i(14),c=i(383),d=s&&!s.nodeType&&s,h=d&&typeof o=="object"&&o&&!o.nodeType&&o,g=h&&h.exports===d,b=g?a.Buffer:void 0,j=b?b.isBuffer:void 0,_=j||c;o.exports=_}).call(this,i(84)(e))},function(e,s){var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function a(c,d){var h=typeof c;return d=d??i,!!d&&(h=="number"||h!="symbol"&&o.test(c))&&c>-1&&c%1==0&&c<d}e.exports=a},function(e,s){function i(o){return function(a){return o(a)}}e.exports=i},function(e,s){var i=Object.prototype;function o(a){var c=a&&a.constructor,d=typeof c=="function"&&c.prototype||i;return a===d}e.exports=o},function(e,s,i){e.exports=function(o){if(typeof o!="function")throw new TypeError(o+" is not a function");return o}},function(e,s,i){var o=i(29),a=i(17),c="[object Symbol]";function d(h){return typeof h=="symbol"||a(h)&&o(h)==c}e.exports=d},function(e,s,i){if(i(8).env.name==="Node")e.exports={value:""};else{var a,c;const d=(a=Array.prototype.slice.call(document.getElementsByTagName("script")))==null||(c=a.pop())==null?void 0:c.getAttribute("src"),h=d&&d.match(/[?&]apikey=([^&]+)/i)||[],g=h[1];e.exports={value:g||""}}},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5));const h=i(154),g=i(49),b=i(9),j=i(56),_=i(129),$=i(271),_e=i(15),et=i(6),ct=i(249),dt=i(155),nt=i(28),it=i(72),st=i(619);e.exports=function(ht){ht===void 0&&(ht={});const Tt=ht.hasValidPeerConnection||i(620),Rt=ht.applySdpTransform||i(156),vt=ht.createPeerConnection||i(621),Et=ht.env||i(2),bt=ht.sdpTransformDefaults||i(623),Ct=ht.getStatsAdapter||i(274),Ut=ht.getRtcStatsReportAdapter||i(277),Xt=ht.getSynchronizationSources||i(627),Nt=ht.IceCandidateProcessor||i(628),Jt=ht.logging||i(1),zt=ht.offerProcessor||i(630),nn=ht.PeerConnectionChannels||i(632),Bt=ht.subscribeProcessor||i(634),sn=i(635),qt=ht.changeMediaDirection||i(637),Kt=qt.changeMediaDirectionToInactive,$t=qt.changeMediaDirectionToRecvOnly,Sn=ht.Qos||i(278).default,On=ht.global||(typeof window!==void 0?window:commonjsGlobal),tn=ht.debounce||i(641),bn=ht.needsToSwapH264Profiles||i(643).once,dn=()=>Tt(On.RTCPeerConnection),Mn=ht.NativeRTCIceCandidate||On.RTCIceCandidate,$n=ht.NativeRTCSessionDescription||On.RTCSessionDescription,Un=ht.Errors||i(7),Fn=ht.OTErrorClass||i(22),cr=ht.ExceptionCodes||i(10),or=ht.hasPictureInPictureBug||i(644),wr=1e4,Er=po=>{let lr=po.sendMessage,pr=po.logging;const Vn={};return In=>{In.candidate?(Vn[In.candidate.sdpMid]=In.candidate.sdpMLineIndex,lr("candidate",{candidate:In.candidate.candidate,sdpMid:In.candidate.sdpMid||"",sdpMLineIndex:In.candidate.sdpMLineIndex||0})):pr.debug("IceCandidateForwarder: No more ICE candidates.")}},Zr=()=>{};return function(lr){lr===void 0&&(lr={});let pr=!1;const Vn=lr,In=Vn.iceConfig,zn=In===void 0?{servers:[]}:In,vr=Vn.sendMessage,Jr=Vn.isPublisher,kn=Vn.offerOverrides,ir=Vn.answerOverrides,gr=Vn.p2p,Br=Vn.codecFlags,vo=Vn.sourceStreamId,eo=Vn.keyStore,io=Vn.sFrameClientStore,to=Vn.isE2ee,Wr=Vn.removeUnusedCodecs;let To=lr,no=To.logAnalyticsEvent,yo=no===void 0?Zr:no,Pr=To.remoteConnectionId,fu=!1,Zo;const oo=bn();let Xo=0,Zs=!1,Pl,fs,Ys,hu;const Tu=new sn(yo),Zp=dt();function Pu(pn,Cn){pr||["candidate","offer","answer","pranswer"].indexOf(pn)>-1&&(pr=(pn==="candidate"?Cn.candidate:Cn.sdp).indexOf("typ relay")!==-1),vr(pn,Cn)}const Fu=g();yo("createPeerConnection","Attempt");const Mr={};Mr.id=_e();const Fs=Jt(`PeerConnection:${Mr.id}`);Fs.debug("construct",{id:Mr.id,options:lr});const zl=bt,Rs=pn=>zn.transportPolicy==="relay"&&pn!=null&&pn.candidate.indexOf("typ relay")===-1,Js=$(lr,["isPublisher","logAnalyticsEvent","offerOverrides","answerOverrides","sendMessage"]);let Or,Ms,Vp,Jl,Ql,Do=[];const El=(()=>{let pn=Js.overrideSimulcastEnabled||!1;return{get(){return pn},set(Cn){const Dn=!!Cn&&Js.capableSimulcastStreams>1;Dn!==pn&&Js.overrideSimulcastEnabled===void 0&&(pn=Dn,Mr.generateOfferAndSend())}}})(),jo=()=>{Mr.iceConnectionStateIsConnected()?Fs.debug("iceRestart is going to wait until we disconnect or negotiationNeeded and then restart ice"):Mr.generateOfferAndSend()},Zu=(()=>{let pn=!1;return{get(){return pn},set(Cn){const Dn=!!Cn;Dn!==pn&&(pn=Dn,pn&&jo())}}})(),_d={clean(){delete this.promise,delete this.resolve,delete this.reject}};_d.promise=new o((pn,Cn)=>{_d.resolve=pn,_d.reject=Cn});let Bs=new Nt,Yu="new";Object.defineProperty(Mr,"signalingState",{get(){return Or.signalingState},set(pn){return Or.signalingState=pn,pn}}),et(Mr),Mr.addOptions=pn=>{Pr=pn.remoteConnectionId,yo=pn.logAnalyticsEvent},Mr.startEncryption=function(){var pn=(0,d.default)(c.default.mark(function Cn(Dn){var fr;return c.default.wrap(function(mo){for(;;)switch(mo.prev=mo.next){case 0:if(to){mo.next=2;break}return mo.abrupt("return");case 2:return Ys=st(Dn),mo.next=5,io.createSender(Ys);case 5:return fs=mo.sent,mo.next=8,eo.get();case 8:return fr=mo.sent,mo.next=11,fs.setSenderEncryptionKey(fr);case 11:hu=Ro=>{fs.setSenderEncryptionKey(Ro)},eo.on("keyChanged",hu),Or.getTransceivers().forEach(Ro=>fs.encrypt(Ro.mid,Ro.sender));case 14:case"end":return mo.stop()}},Cn)}));return function(Cn){return pn.apply(this,arguments)}}(),Mr.once("iceConnected",(0,d.default)(c.default.mark(function pn(){var Cn,Dn;return c.default.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:Cn="",Dn={pcc:parseInt(g()-Fu,10),hasRelayCandidates:pr,proxyInfo:Cn},Or&&Or.proxyInfo&&(Dn.proxyInfo=Or.proxyInfo),yo("createPeerConnection","Success",Dn);case 4:case"end":return yr.stop()}},pn)}))),_d.resolve();const Xu=function(){var pn=(0,d.default)(c.default.mark(function Cn(){var Dn;return c.default.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return yr.next=2,eo.get();case 2:if(Dn=yr.sent,Ys=st(Pr),Pl=io.getReceiver(Ys),Pl){yr.next=14;break}return yr.next=8,io.createReceiver(Ys);case 8:Pl=yr.sent,Pl.addReceiver(Ys),Pl.setReceiverEncryptionKey(Ys,Dn),eo.on("keyChanged",mo=>{Pl.setReceiverEncryptionKey(Ys,mo)}),Pl.addEventListener("decryptFailed",()=>{Mr.trigger("decryptFailed")}),Pl.addEventListener("decryptionRestored",()=>{Mr.trigger("decryptRestored")});case 14:case"end":return yr.stop()}},Cn)}));return function(){return pn.apply(this,arguments)}}(),js=pn=>{if(Fs.debug("internalCreatePeerConnection: called"),Or){Fs.debug("internalCreatePeerConnection: resolving synchronously"),pn.call(null,null,Or);return}if(Do.push(pn),!(Do.length>1)){if(Fs.debug(`Creating peer connection config "${JSON.stringify(Js)}".`),zn.servers.length===0&&(Fs.error("No ice servers present"),yo("Error","noIceServers")),zn.transportPolicy==="relay"){const Cn=Dn=>Dn&&Dn.indexOf("turn")===0;zn.servers=zn.servers.map(Dn=>{const fr=j(Dn);return Array.isArray(fr.urls)||(fr.urls=[fr.urls]),fr.urls=fr.urls.filter(Cn),fr.urls.length===0?void 0:fr}).filter(Dn=>Dn!==void 0)}Js.iceTransportPolicy=zn.transportPolicy,Js.iceServers=zn.servers,to&&(Js.forceEncodedVideoInsertableStreams=!0,Js.forceEncodedAudioInsertableStreams=!0,Js.encodedInsertableStreams=!0),dn().then(Cn=>{if(!Cn)throw Fs.error("createPeerConnection: Invalid RTCPeerConnection object"),new Error("Failed to create valid RTCPeerConnection object");return vt({window:On,config:Js})}).then(function(){var Cn=(0,d.default)(c.default.mark(function Dn(fr){return c.default.wrap(function(mo){for(;;)switch(mo.prev=mo.next){case 0:if(!(!Jr&&to)){mo.next=3;break}return mo.next=3,Xu();case 3:Go(null,fr);case 4:case"end":return mo.stop()}},Dn)}));return function(Dn){return Cn.apply(this,arguments)}}(),Cn=>Go(Cn))}},Go=(pn,Cn)=>{if(pn){Ku({reason:`Failed to create PeerConnection, exception: ${pn}`,prefix:"NewPeerConnection"}),Do=[];return}Fs.debug("OT attachEventsToPeerConnection"),Or=Cn,Bs&&Bs.setPeerConnection(Cn),Ms=new nn(Or),Js.channels&&Ms.addMany(Js.channels);const Dn=Er({sendMessage:Pu,logging:Fs}),fr=Ho=>{if(_d.resolve(),Rs(Ho.candidate)){Fs.debug("Ignore candidate",Ho.candidate.candidate);return}Dn(Ho)},yr=function(){var Ho=(0,d.default)(c.default.mark(function _o(ys){return c.default.wrap(function(vp){for(;;)switch(vp.prev=vp.next){case 0:os(ys),!Jr&&Pl&&Pl.decrypt(ys.transceiver.mid,ys.receiver);case 2:case"end":return vp.stop()}},_o)}));return function(ys){return Ho.apply(this,arguments)}}();let mo=Or.iceConnectionState;const Ro=Ho=>{Or?(Fs.debug("iceconnectionstatechange",Or.iceConnectionState),Or.iceConnectionState==="connected"?(mo==="disconnected"&&Mr.clearFailedTimeout(),Mr.emit("iceConnected"),Zu.set(!1)):Or.iceConnectionState==="completed"&&Et.isLegacyEdge&&setTimeout(()=>Wn.startCollecting(Or),1e3)):Fs.debug("iceconnectionstatechange on peerConnection that no longer exists",Mr);const _o=Ho.target.iceConnectionState;Mr.trigger("iceConnectionStateChange",_o),yo("attachEventsToPeerConnection","iceconnectionstatechange",_o),_o==="disconnected"&&(Zu.get()?(Fs.debug("Restarting ice!"),Mr.generateOfferAndSend()):it()||(Ql=setTimeout(()=>{const ys="failed";yo("attachEventsToPeerConnection","iceconnectionstatechange",ys),mo=ys,Mr.trigger("iceConnectionStateChange",ys)},wr))),mo!=="disconnected"&&_o==="failed"&&Ku({reason:"The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",prefix:"ICEWorkflow"}),mo=_o},ms=()=>{yo("peerConnection:negotiationNeeded","Event"),Jr&&Mr.generateOfferAndSend(),Mr.trigger("negotiationNeeded")};Or.addEventListener("track",yr),Or.addEventListener("icecandidate",fr),Or.addEventListener("signalingstatechange",Bu),Or.addEventListener("negotiationneeded",ms),Or.addEventListener("iceconnectionstatechange",Ro),Zp.add(()=>{Or&&(Or.removeEventListener("track",yr),Or.removeEventListener("icecandidate",fr),Or.removeEventListener("signalingstatechange",Bu),Or.removeEventListener("negotiationneeded",ms),Or.removeEventListener("iceconnectionstatechange",Ro))}),Fl()},Fl=()=>{for(;Do.length;)Do.shift().call(null)},qr=()=>{Bs&&(Bs.destroy(),Bs=null),Do=[],Wn.stopCollecting(),Zp.releaseAll(),_d.clean(),Or!==null&&(Or.destroy&&Or.destroy(),Or=null,Mr.trigger("close")),Mr.off()},Bu=pn=>{const Cn=pn.target.signalingState;if(Mr.emit("signalingStateChange",Cn),Cn==="stable"&&Mr.emit("signalingStateStable"),Cn&&Cn!==Yu)switch(Yu=Cn,Fs.debug(`stateChange: ${Yu}`),Yu){case"closed":qr();break}},pu=pn=>{pn.dataChannels=Ms.sampleQos(),Mr.trigger("qos",{parsedStats:pn,simulcastEnabled:El.get()})},pp=()=>{let pn;if(Or.getRemoteStreams)pn=Or.getRemoteStreams();else if(Or.remoteStreams)pn=Or.remoteStreams;else throw new Error("Invalid Peer Connection object implements no method for retrieving remote streams");return Array.prototype.slice.call(pn)},os=pn=>{var Cn;const Dn=pn.track,fr=pn.transceiver,yr=pn.stream||((Cn=pn.streams)==null?void 0:Cn[0]);yo("createPeerConnection","TrackAdded"),Mr.trigger("trackAdded",{stream:yr,track:Dn,transceiver:fr})},mp=(pn,Cn,Dn)=>{fu=!1,Ku({reason:`PeerConnection.offerProcessor ${pn}: ${Cn}`,prefix:Dn})},Mp=pn=>{if(fu){Zo=pn;return}fu=!0,yo("peerConnection:processOffer","Event");const Cn=new $n({type:"offer",sdp:pn.content.sdp}),Dn=yr=>{fu=!1,Bs&&Bs.process(),Pu("answer",yr),Et.isLegacyEdge||Wn.startCollecting(Or,Jr),Zo&&(Mp(Zo),Zo=null)},fr=yr=>Mr.trigger("remoteVideoSupported",yr);js(()=>{zt(Or,On.RTCPeerConnection,On.RTCSessionDescription,$n,zl,Cn,Br,gr,Dn,mp,fr,oo,vo)})},gp=pn=>{yo("peerConnection:processAnswer","Event");const Cn="Failed to parse SessionDescription. a=extmap-allow-mixed Expects at least 2 fields.",Dn=fr=>{fr.includes(Cn)&&(fr="SessionDescription issue has been fixed in Chrome 71 and above. Please update your browser."),Ku({reason:`Error while setting RemoteDescription ${fr}`,prefix:"SetRemoteDescription"})};if(!pn.content.sdp){Dn("Weird answer message, no SDP.");return}Jl=new $n({type:"answer",sdp:Rt(zl,"remote","answer",b({replaceBaselineProfile:oo},ir),pn.content.sdp).local}),(()=>{const fr=()=>{Fs.debug("processAnswer: setRemoteDescription Success"),Bs&&Bs.process()};Or.setRemoteDescription(Jl).then(fr).catch(Dn),Tu.setResolved()})(),Et.isLegacyEdge||Wn.startCollecting(Or,Jr)},op=pn=>{var Cn,Dn;if(((Cn=Or)==null||(Dn=Cn.signalingState)==null?void 0:Dn.toLowerCase())==="closed")return;yo("peerConnection:processSubscribe","Event"),Fs.debug("processSubscribe: Sending offer to subscriber.");let fr=El.get()?Js.capableSimulcastStreams:1;vo==="P2P"&&!gr&&(fr=1),js(()=>{Bt({peerConnection:Or,NativeRTCSessionDescription:$n,sdpTransforms:zl,numSimulcastStreams:fr,removeVideoOrientation:or(),offerOverrides:kn,offerConstraints:{iceRestart:Zu.get()},replaceBaselineProfile:oo,removeUnusedCodecs:Wr}).then(mo=>{Fs.debug("processSubscribe: got offer, waiting for _readyToCompleteOffer"),Vp=mo,_d.promise.then(()=>pn(Vp))},mo=>{Ku({reason:`subscribeProcessor ${mo.message}: ${mo.reason}`,prefix:mo.prefix})}),Zu.set(!1)})},Lp=()=>{typeof hu=="function"&&eo.off("keyChanged",hu),fs=null,Ys=null};Mr.generateOfferAndSend=()=>{const pn=Cn=>{Fs.debug("processSubscribe: sending offer"),Pu("offer",Cn)};Mr.generateOffer(pn)},Mr.generateOfferAndAnswer=pn=>{const Cn=Dn=>{pn(Dn)};Mr.generateOffer(Cn)},Mr.generateOffer=tn(function(pn){pn===void 0&&(pn=()=>{}),Tu.enqueueOfferAnswer(()=>op(pn))},100);const Ku=pn=>{let Cn=pn.reason,Dn=pn.prefix;Fs.error(Cn,"in state",Or?{connectionState:Or.connectionState,iceConnectionState:Or.iceConnectionState,iceGatheringState:Or.iceGatheringState,signalingState:Or.signalingState}:"(none)"),Mr.trigger("error",{reason:Cn,prefix:Dn})};Mr.addTrack=(pn,Cn)=>{const Dn=new o((fr,yr)=>{js(mo=>{if(mo)return yr(mo);fr()})}).then(()=>{if(Or.addTrack)return Or.addTrack(pn,Cn);const fr=Or.getLocalStreams()[0];if(fr===void 0)throw new Error("PeerConnection has no existing streams, cannot addTrack");fr.addTrack(pn),Mr.generateOfferAndSend()}).then(()=>new o(fr=>{Mr.once("signalingStateStable",()=>{fr()})}));return h(Dn,15e3,"Renegotiation timed out")};function $l(pn){this.track=pn}Mr.setIceConfig=pn=>{try{Et.isFirefox&&(pn.certificates=Or.getConfiguration().certificates),Or.setConfiguration(pn)}catch(Cn){throw new ct(`A peer connection failed to set configuration with ${Cn.message}`,Un.FAILED_SET_CONFIGURATION)}return Zu.set(!0),Or},Mr.removeTrack=pn=>{const Cn=o.resolve().then(()=>{if(pn instanceof $l){Or.getLocalStreams()[0].removeTrack(pn.track),Mr.generateOfferAndSend();return}return Or.removeTrack(pn)}).then(()=>new o(Dn=>{Mr.once("signalingStateStable",()=>{Dn()})}));return h(Cn,15e3,"Renegotiation timed out")},Mr.addLocalStream=pn=>new o((Cn,Dn)=>{js(fr=>{if(fr){Dn(fr);return}try{pn.getTracks&&pn.getTracks().forEach(yr=>Or.addTrack(yr,pn))}catch(yr){Dn(yr);return}Cn()})}),Mr.getLocalStreams=()=>Or.getLocalStreams(),Mr.getSenders=()=>Or.getSenders?Or.getSenders():Or.getLocalStreams()[0].getTracks().map(pn=>new $l(pn)),Mr.disconnect=()=>{var pn;Bs&&(Bs.destroy(),Bs=null),(pn=Or)!=null&&pn.signalingState&&Or.signalingState.toLowerCase()!=="closed"&&(Or.close(),Lp(),setTimeout(qr))},Mr.iceRestart=()=>Zu.set(!0),Mr.clearFailedTimeout=()=>clearTimeout(Ql);const Ru=pn=>{const Cn=pn?Kt:$t;return new o(fr=>{Tu.enqueueOfferAnswer((0,d.default)(c.default.mark(function yr(){return c.default.wrap(function(Ro){for(;;)switch(Ro.prev=Ro.next){case 0:return Ro.next=2,Cn(Or);case 2:Tu.setResolved(),fr();case 4:case"end":return Ro.stop()}},yr)})))})};Mr.changeMediaDirectionToRecvOnly=()=>Ru(!1),Mr.changeMediaDirectionToInactive=()=>Ru(!0),Mr.processMessage=(pn,Cn)=>{switch(Fs.debug(`processMessage: Received ${pn} from ${Cn.fromAddress}`,Cn),Fs.debug(Cn),pn){case"generateoffer":Cn.content&&Cn.content.simulcastEnabled!==void 0&&El.set(Cn.content.simulcastEnabled),Mr.generateOfferAndSend(),fr();break;case"offer":Mp(Cn),fr();break;case"answer":case"pranswer":gp(Cn);break;case"candidate":var Dn=new Mn(Cn.content);if(Rs(Dn))return Fs.debug("Ignore candidate",Dn.candidate),Mr;Bs&&Bs.addIceCandidate(Dn).catch(yr=>{Fs.warn(`Error while adding ICE candidate: ${JSON.stringify(Dn)}: ${yr.toString()}`)});break;default:Fs.debug(`processMessage: Received an unexpected message of type ${pn} from ${Cn.fromAddress}: ${JSON.stringify(Cn)}`)}function fr(){Xo+=1,Wn.handleOfferMessageReceived(),Xo>1&&(yo("Renegotiation","Attempt"),Zs=!0)}return Mr};const xl=pn=>{const Cn=(Dn,fr)=>Dn.mid<fr.mid?1:Dn.mid>fr.mid?-1:0;return pn.sort(Cn)};Mr.stopTransceivers=pn=>{const Cn=Or.getTransceivers().filter(Dn=>pn.includes(Dn.mid));xl(Cn).forEach(Dn=>Dn.stop())},Mr.remoteStreams=()=>Or?pp():[],Mr.remoteTracks=()=>Or?Or.getReceivers?Array.prototype.slice.apply(Or.getReceivers()).map(pn=>pn.track):Array.prototype.concat.apply([],pp().map(pn=>pn.getTracks())):[],Mr.remoteDescription=()=>Or.remoteDescription,Mr.getStats=pn=>{if(!Or){const Cn=cr.PEER_CONNECTION_NOT_CONNECTED;pn(new ct(Fn.getTitleByCode(Cn),Un.PEER_CONNECTION_NOT_CONNECTED,{code:Cn}));return}Ct(Or,pn)},Mr.getRtcStatsReport=pn=>{if(!Or){const Cn=cr.PEER_CONNECTION_NOT_CONNECTED;pn(new ct(Fn.getTitleByCode(Cn),Un.PEER_CONNECTION_NOT_CONNECTED,{code:Cn}));return}Ut(Or,pn)},Mr.getSynchronizationSources=pn=>{if(!Jr){if(!Or){const Cn=cr.PEER_CONNECTION_NOT_CONNECTED;pn(new ct(Fn.getTitleByCode(Cn),Un.PEER_CONNECTION_NOT_CONNECTED,{code:Cn}));return}Xt(Or,pn)}};const Cp=function pn(Cn,Dn,fr,yr){let mo;const Ro=Ms.get(Dn,fr);if(!Ro){if(Cn>0){setTimeout(pn.bind(null,Cn-1,Dn,fr,yr),200);return}mo=new ct(`A channel with that label and options could not be found. Label:${Dn}. Options: ${JSON.stringify(fr)}`)}yr(mo,Ro)};Mr.getDataChannel=(pn,Cn,Dn)=>{if(!Or){Dn(new ct("Cannot create a DataChannel before there is a connection."));return}Cp(100,pn,Cn,Dn)},Mr.getSourceStreamId=()=>vo,Mr.iceConnectionStateIsConnected=()=>Or&&["connected","completed"].indexOf(Or.iceConnectionState)>-1,Mr.findAndReplaceTrack=(pn,Cn)=>o.resolve().then(()=>{const Dn=Or.getSenders().filter(fr=>fr.track===pn)[0];if(!Dn)return o.resolve();if(typeof Dn.replaceTrack!="function")throw new Error("Sender does not support replaceTrack");return Dn.replaceTrack(Cn)}),Mr.hasRelayCandidates=()=>pr,Mr.getNegotiatedCodecs=()=>{if(!Or.localDescription||!Or.remoteDescription)return null;const pn=Cn=>_(nt.getCodecs(Or.localDescription.sdp,Cn),nt.getCodecs(Or.remoteDescription.sdp,Cn));return{audio:pn("audio"),video:pn("video")}},Mr.on("signalingStateStable",()=>{Zs&&(Zs=!1,yo("Renegotiation","Success",Mr.getNegotiatedCodecs()))}),Mr.on("error",pn=>{let Cn=pn.prefix;Zs&&["CreateOffer","SetRemoteDescription"].indexOf(Cn)!==-1&&(Zs=!1,yo("Renegotiation","Failure"))}),Mr.on("close",()=>{Zs&&(Zs=!1,yo("Renegotiation","Cancel"))});const Wn=new Sn;return Wn.on("stats",pu),Mr}}}).call(this,i(0))},function(e,s,i){const o=i(2),a=()=>(o.isChrome||o.isElectron)&&o.version>=90||o.isOpera&&o.version>=76;e.exports=()=>!a()&&(o.isChrome&&o.version>71||o.isChromiumEdge&&o.version<90||o.isOpera&&o.version>58)},function(e,s,i){function o(a,c,d){d===void 0&&(d=1/0);let h=null,g=!1,b=1;const j=1e3/c,_=()=>{!g||b>d||(b+=1,a(),h=setTimeout(_,j))};this.start=()=>{g||(g=!0,setTimeout(_,j))},this.stop=()=>{(typeof window!==void 0?window:commonjsGlobal).clearTimeout(h),g=!1}}e.exports=o},function(e,s,i){s.__esModule=!0,s.MEDIUM=s.LOW=s.CongestionLevels=s.CRITICAL=void 0;const o=2;s.CRITICAL=o;const a=1;s.MEDIUM=a;const c=0;s.LOW=c;const d={CRITICAL:o,MEDIUM:a,LOW:c};s.CongestionLevels=d},function(e,s,i){const o=i(47),a=i(671),c=i(11),d=i(157),h={};function g(et){return Number(et.framerateMean||et.googFrameRateSent||et.googFrameRateReceived||et.googFrameRateInput||et.googFrameRateOutput||0)}function b(et){return Number(et.framesEncoded||et.framesDecoded)}function j(et,ct){if(g(et))return g(et);if(!b(et))return;let dt=0;const nt=h[et.id]?h[et.id].frames:0,it=h[et.id]?h[et.id].timestamp:ct;return dt=d({currentStatFrames:b(et),currentTimestamp:et.timestamp,prevStatFrames:nt,prevTimestamp:it}),h[et.id]={frames:b(et),timestamp:et.timestamp},dt}function _(et,ct){if(!ct)return{};const dt=ct.filter(nt=>nt.id===et.mediaTrackId);return dt.length?dt[0]:{}}function $(et,ct){return"packetsLost"in ct?et+ct.packetsLost:et}const _e={isVideoStat(et,ct){const dt=_(et,ct);return et.kind==="video"&&["outbound-rtp","inbound-rtp"].includes(et.type)||et.mediaType==="video"||"googFrameWidthReceived"in et||"googFrameWidthInput"in et||et.type==="inbound-rtp"&&et.id.indexOf("Video")!==-1||et.type==="inboundrtp"&&dt.frameWidth!==0},isAudioStat(et,ct){const dt=_(et,ct);return et.kind==="audio"&&["outbound-rtp","inbound-rtp"].includes(et.type)||et.mediaType==="audio"||"audioInputLevel"in et||"audioOutputLevel"in et||et.type==="inbound-rtp"&&et.id.indexOf("Audio")!==-1||et.type==="inboundrtp"&&dt.frameWidth===0},isInboundStat(et){return"bytesReceived"in et||"packetsReceived"in et},isOutboundStat(et){return"bytesSent"in et||"packetsSent"in et},isVideoTrackStat(et){return et.type==="track"&&(et.frameHeight>0||et.frameWidth>0||et.framesCorrupted>0||et.framesDecoded>0||et.framesPerSecond>0||et.framesSent>0||et.framesReceived>0)},isVideoRemoteInboundRtpStat(et){return et.type==="remote-inbound-rtp"&&et.kind==="video"},isAudioRemoteInboundRtpStat(et){return et.type==="remote-inbound-rtp"&&et.kind==="audio"},isVideoInboundRtpStat(et){return et.type==="inbound-rtp"&&et.kind==="video"},parseStatCategory(et){const ct={packetsLost:0,packetsReceived:0,bytesReceived:0};return"packetsReceived"in et&&(ct.packetsReceived=parseInt(et.packetsReceived,10)),"packetsLost"in et&&(ct.packetsLost=parseInt(et.packetsLost,10)),"bytesReceived"in et&&(ct.bytesReceived=parseInt(et.bytesReceived,10)),this.isVideoStat(et)&&("framerateMean"in et?ct.frameRate=Number(et.framerateMean):"googFrameRateOutput"in et?ct.frameRate=Number(et.googFrameRateOutput):"googFrameRateInput"in et&&(ct.frameRate=Number(et.googFrameRateInput))),ct},getVideoPacketsLost(et){return et.filter(ct=>this.isVideoRemoteInboundRtpStat(ct,et)).reduce($,0)},getAudioPacketsLost(et){return et.filter(ct=>this.isAudioRemoteInboundRtpStat(ct,et)).reduce($,0)},normalizeTimestamp(et,ct){return ct===void 0&&(ct=Date.now()),c(et)&&"getTime"in et?et.getTime():Math.abs(et/(1e3*ct)-1)<.05?et/1e3:et},normalizeStats(et,ct,dt){ct===void 0&&(ct=!0);const nt=et.filter(Ct=>_e.isVideoStat(Ct,et)).filter(Ct=>_e.isInboundStat(Ct)===ct),it=et.filter(Ct=>this.isAudioStat(Ct,et)).filter(Ct=>this.isInboundStat(Ct)===ct)[0],st=nt[0];if(!it&&!st)throw new Error("could not find stats for either audio or video");const lt=_e.normalizeTimestamp(st?st.timestamp:it.timestamp),ht={timestamp:lt};st&&!ct&&st.packetsLost===void 0&&(st.packetsLost=this.getVideoPacketsLost(et)),it&&!ct&&it.packetsLost===void 0&&(it.packetsLost=this.getAudioPacketsLost(et));const Tt=["packetsSent","packetsLost","bytesSent"],Et=ct?Ct=>o(Ct,["packetsReceived","packetsLost","bytesReceived"]):Ct=>o(Ct,Tt),bt=Ct=>{const Ut=["framerateMean","googFrameRateSent","googFrameRateReceived","googFrameRateInput","googFrameRateOutput","framesEncoded","framesDecoded"],Xt=Tt.concat(Ut),Nt={timestamp:lt,id:st.id};return Xt.forEach(Jt=>{Nt[Jt]=Ct.map(zt=>Number(zt[Jt]||0)).reduce((zt,nn)=>zt+nn,0)}),Nt};if(nt&&nt.length>0){const Ct=bt(nt);ht.video=Object.assign({frameRate:j(Ct,dt)},a(Et(Ct),Number))}return it&&(ht.audio=a(Et(it),Number)),ht}};e.exports=_e},function(e,s,i){s.__esModule=!0,s.messages=s.codes=void 0;const o={1e3:"The connection successfully completed the purpose for which it was created.",1001:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.",1002:"The endpoint is terminating the connection due to a protocol error. (CLOSE_PROTOCOL_ERROR)",1003:"The connection is being terminated because the endpoint has indicated that reconnections are not available. (CLOSE_UNSUPPORTED)",1005:"Indicates that no status code was provided even though one was expected. (CLOSE_NO_STATUS)",1006:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected. (CLOSE_ABNORMAL)",1007:"Indicates that an endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [RFC3629] data within a text message)",1008:"Indicates that an endpoint is terminating the connection because it has received a message that violates its policy.  This is a generic status code that can be returned when there is no other more suitable status code (e.g., 1003 or 1009) or if there is a need to hide specific details about the policy",1009:"Indicates that an endpoint is terminating the connection because it has received a message that is too big for it to process (CLOSE_TOO_LARGE)",1011:"Indicates that a server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request",4001:"Connectivity loss was detected as it was too long since the socket received the last PONG message",4010:"Timed out while waiting for the Rumor socket to connect.",4020:"Error code unavailable.",4030:"Exception was thrown during Rumor connection, possibly because of a blocked port."};s.messages=o;const a={CLOSE_NORMAL:1e3,CLOSE_GOING_AWAY:1001,CLOSE_PROTOCOL_ERROR:1002,CLOSE_UNSUPPORTED:1003,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006,CLOSE_INCONSISTENT_DATA:1007,CLOSE_POLICY_VIOLATION:1008,CLOSE_TOO_LARGE:1009,CLOSE_UNEXPECTED_CONDITION:1011,CLOSE_CONNECTIVITY_LOSS:4001,CLOSE_TIMEOUT:4010,CLOSE_FALLBACK_CODE:4020,CLOSE_CONNECT_EXCEPTION:4030,ALREADY_CONNECTED_CONNECTING:null};s.codes=a},function(e,s,i){var o=i(78),a=i(113),c=i(83),d=i(176),h=i(386),g=i(179),b=i(54),j=i(389),_=i(391),$=i(182),_e=i(184),et=i(41),ct=i(394),dt=i(395),nt=i(189),it=i(12),st=i(64),lt=i(399),ht=i(11),Tt=i(401),Rt=i(30),vt=i(53),Et=1,bt=2,Ct=4,Ut="[object Arguments]",Xt="[object Array]",Nt="[object Boolean]",Jt="[object Date]",zt="[object Error]",nn="[object Function]",Bt="[object GeneratorFunction]",sn="[object Map]",qt="[object Number]",Kt="[object Object]",$t="[object RegExp]",Sn="[object Set]",On="[object String]",tn="[object Symbol]",bn="[object WeakMap]",dn="[object ArrayBuffer]",Mn="[object DataView]",$n="[object Float32Array]",Un="[object Float64Array]",Fn="[object Int8Array]",cr="[object Int16Array]",or="[object Int32Array]",wr="[object Uint8Array]",Er="[object Uint8ClampedArray]",Zr="[object Uint16Array]",po="[object Uint32Array]",lr={};lr[Ut]=lr[Xt]=lr[dn]=lr[Mn]=lr[Nt]=lr[Jt]=lr[$n]=lr[Un]=lr[Fn]=lr[cr]=lr[or]=lr[sn]=lr[qt]=lr[Kt]=lr[$t]=lr[Sn]=lr[On]=lr[tn]=lr[wr]=lr[Er]=lr[Zr]=lr[po]=!0,lr[zt]=lr[nn]=lr[bn]=!1;function pr(Vn,In,zn,vr,Jr,kn){var ir,gr=In&Et,Br=In&bt,vo=In&Ct;if(zn&&(ir=Jr?zn(Vn,vr,Jr,kn):zn(Vn)),ir!==void 0)return ir;if(!ht(Vn))return Vn;var eo=it(Vn);if(eo){if(ir=ct(Vn),!gr)return b(Vn,ir)}else{var io=et(Vn),to=io==nn||io==Bt;if(st(Vn))return g(Vn,gr);if(io==Kt||io==Ut||to&&!Jr){if(ir=Br||to?{}:nt(Vn),!gr)return Br?_(Vn,h(ir,Vn)):j(Vn,d(ir,Vn))}else{if(!lr[io])return Jr?Vn:{};ir=dt(Vn,io,gr)}}kn||(kn=new o);var Wr=kn.get(Vn);if(Wr)return Wr;kn.set(Vn,ir),Tt(Vn)?Vn.forEach(function(yo){ir.add(pr(yo,In,zn,yo,Vn,kn))}):lt(Vn)&&Vn.forEach(function(yo,Pr){ir.set(Pr,pr(yo,In,zn,Pr,Vn,kn))});var To=vo?Br?_e:$:Br?vt:Rt,no=eo?void 0:To(Vn);return a(no||Vn,function(yo,Pr){no&&(Pr=yo,yo=Vn[Pr]),c(ir,Pr,pr(yo,In,zn,Pr,Vn,kn))}),ir}e.exports=pr},function(e,s,i){var o=i(79),a=i(358),c=i(359),d=i(360),h=i(361),g=i(362);function b(j){var _=this.__data__=new o(j);this.size=_.size}b.prototype.clear=a,b.prototype.delete=c,b.prototype.get=d,b.prototype.has=h,b.prototype.set=g,e.exports=b},function(e,s,i){var o=i(353),a=i(354),c=i(355),d=i(356),h=i(357);function g(b){var j=-1,_=b==null?0:b.length;for(this.clear();++j<_;){var $=b[j];this.set($[0],$[1])}}g.prototype.clear=o,g.prototype.delete=a,g.prototype.get=c,g.prototype.has=d,g.prototype.set=h,e.exports=g},function(e,s,i){var o=i(52);function a(c,d){for(var h=c.length;h--;)if(o(c[h][0],d))return h;return-1}e.exports=a},function(e,s,i){var o=i(38),a=o(Object,"create");e.exports=a},function(e,s,i){var o=i(377);function a(c,d){var h=c.__data__;return o(d)?h[typeof d=="string"?"string":"hash"]:h.map}e.exports=a},function(e,s,i){var o=i(62),a=i(52),c=Object.prototype,d=c.hasOwnProperty;function h(g,b,j){var _=g[b];(!(d.call(g,b)&&a(_,j))||j===void 0&&!(b in g))&&o(g,b,j)}e.exports=h},function(e,s){e.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(e,s,i){var o=i(384),a=i(66),c=i(115),d=c&&c.isTypedArray,h=d?a(d):o;e.exports=h},function(e,s,i){var o=i(11),a=Object.create,c=function(){function d(){}return function(h){if(!o(h))return{};if(a)return a(h);d.prototype=h;var g=new d;return d.prototype=void 0,g}}();e.exports=c},function(e,s,i){var o=i(88),a=i(192),c=i(123);function d(h,g){return c(a(h,g,o),h+"")}e.exports=d},function(e,s){function i(o){return o}e.exports=i},function(e,s,i){var o=Object.prototype.toString,a=o.call(function(){return arguments}());e.exports=function(c){return o.call(c)===a}},function(e,s,i){var o=Object.prototype.toString,a=o.call("");e.exports=function(c){return typeof c=="string"||c&&typeof c=="object"&&(c instanceof String||o.call(c)===a)||!1}},function(e,s,i){e.exports=i(426)()?globalThis:i(427)},function(e,s,i){var o=i(112),a=i(459),c=i(460);function d(h){var g=-1,b=h==null?0:h.length;for(this.__data__=new o;++g<b;)this.add(h[g])}d.prototype.add=d.prototype.push=a,d.prototype.has=c,e.exports=d},function(e,s,i){var o=i(461);function a(c,d){var h=c==null?0:c.length;return!!h&&o(c,d,0)>-1}e.exports=a},function(e,s){function i(o,a){return o.has(a)}e.exports=i},function(e,s,i){var o=i(86),a=i(11);function c(d){return function(){var h=arguments;switch(h.length){case 0:return new d;case 1:return new d(h[0]);case 2:return new d(h[0],h[1]);case 3:return new d(h[0],h[1],h[2]);case 4:return new d(h[0],h[1],h[2],h[3]);case 5:return new d(h[0],h[1],h[2],h[3],h[4]);case 6:return new d(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new d(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var g=o(d.prototype),b=d.apply(g,h);return a(b)?b:g}}e.exports=c},function(e,s,i){var o=i(502);function a(c){var d=o(c),h=d%1;return d===d?h?d-h:d:0}e.exports=a},function(e,s){function i(o){var a=-1,c=Array(o.size);return o.forEach(function(d){c[++a]=d}),c}e.exports=i},function(e,s,i){var o=i(58),a=i(46);function c(d,h){h=o(h,d);for(var g=0,b=h.length;d!=null&&g<b;)d=d[a(h[g++])];return g&&g==b?d:void 0}e.exports=c},function(e,s,i){var o=i(238),a=i(30);function c(d,h){return d&&o(d,h,a)}e.exports=c},function(e,s,i){const o=i(239),a=d=>d.replace(/\/$/,""),c=(d,h)=>{if(!h)return d;const g=o.parse(h),b=o.parse(d);if(!g.protocol||!b.protocol)return d;const j=g.protocol.match(/^https/),$=(b.protocol.match(/^ws/i)?"ws":"http")+(j?"s":""),_e=a(`${$}://${g.host}${g.pathname}`),et=a(`${b.host}${b.pathname}${b.search||""}`);return`${_e}/${et}`};e.exports={prependProxyToUrlIfNeeded:c}},function(e,s,i){const o=i(21),a=i(13),c=i(7),d=i(10),h=i(22);let g;const b={SET_PROXY_URL_TIMING_ERROR:"The proxyUrl was set after a session or publisher was created.",PROXY_URL_ALREADY_SET_ERROR:"The proxyUrl has already been set. Setting it again will not have any effect."};e.exports={errorMessages:b,setProxyUrl:j=>{const _=i(20),$=i(70),_e=new _,et=o.sessions.length()>0,ct=o.publishers.length()>0;let dt;if(et){const it=o.sessions.find(st=>st.currentState==="connected");dt=it?it.sessionId:o.sessions.find().sessionId}else dt="";const nt={sessionId:dt,apiKey:$.value};if(ct||et){const it=a()(c.SET_PROXY_URL_TIMING_ERROR,new Error(b.SET_PROXY_URL_TIMING_ERROR),d.SET_PROXY_URL_TIMING_ERROR);h.handleJsException({error:it,target:nt,analytics:_e})}else if(g){const it=a()(c.PROXY_URL_ALREADY_SET_ERROR,new Error(b.PROXY_URL_ALREADY_SET_ERROR),d.PROXY_URL_ALREADY_SET_ERROR);h.handleJsException({error:it,target:nt,analytics:_e})}else g=j},getProxyUrl:()=>g,clearProxyUrl:()=>{g=null}}},function(e,s,i){s.adaptIceServers=function(a){return a.map(c=>({url:c.url,urls:c.urls||[c.url],username:c.username,credential:c.credential}))},s.parseIceServers=function(a){let c;try{c=JSON.parse(a.data).content.iceServers}catch{return[]}return s.adaptIceServers(c)}},function(e,s,i){const o=i(2);e.exports=()=>o.name==="Chrome"&&o.version>=58||["Firefox","Edge","Safari","Opera"].indexOf(o.name)!==-1},function(e,s,i){e.exports=function(a){let c=null,d=!1;const h=()=>{d&&(a(),c=window.requestAnimationFrame(h))};this.start=()=>{d||(d=!0,window.requestAnimationFrame(h))},this.stop=()=>{window.cancelAnimationFrame(c),d=!1}}},function(e,s,i){const o=i(9),a=(c,d,h)=>d&&!h?()=>d.call(c):d&&h?g=>(g!==void 0&&h.call(c,g),d.call(c)):g=>{g!==void 0&&h.call(c,g)};e.exports=(c,d)=>{const h={};Object.keys(d).forEach(g=>{h[g]=a(c,d[g].get,d[g].set)}),o(c,h)}},function(e,s,i){let o="";const a=d=>{o=d},c=()=>o;e.exports={getCurrentAudioOutputDeviceId:c,setCurrentAudioOutputDeviceId:a}},function(e,s,i){(function(o){e.exports=function(c){return new o(d=>setTimeout(d,c))}}).call(this,i(0))},function(e,s,i){s.__esModule=!0,s.default=void 0;var a={ACTIVE_VIDEO:0,ACTIVE_VIDEO_WITH_WARNING:1,SUSPENDED_VIDEO:2};s.default=a},function(e,s,i){const o=i(294);function a(c){let d=c===void 0?{}:c,h=d.NativeVideoElementWrapper;const b=h===void 0?o():h,j=50;function _($){let _e=$===void 0?{}:$,et=_e.fallbackText,ct=et===void 0?"Sorry, Web RTC is not available in your browser":et,dt=_e.fitMode,nt=_e.muted,it=_e._inject,st=_e.widgetType;return new b({fallbackText:ct,fitMode:dt,muted:nt,defaultAudioVolume:j,_inject:it,widgetType:st})}return _}e.exports=a},function(e,s,i){const o=!!window.crypto,a=!!window.RTCRtpSender.prototype.createEncodedStreams||!!window.RTCRtpSender.prototype.createdEncodedVideoStreams,c=!!window.Worker,d=()=>o&&a&&c;e.exports=function(h){h===void 0&&(h={});const g=h.hasOpenTokSupport||i(51).once,b=h.isE2eeSupported||d;return g()&&b()}},function(e,s,i){var o=i(38),a=i(14),c=o(a,"Map");e.exports=c},function(e,s,i){var o=i(369),a=i(376),c=i(378),d=i(379),h=i(380);function g(b){var j=-1,_=b==null?0:b.length;for(this.clear();++j<_;){var $=b[j];this.set($[0],$[1])}}g.prototype.clear=o,g.prototype.delete=a,g.prototype.get=c,g.prototype.has=d,g.prototype.set=h,e.exports=g},function(e,s){function i(o,a){for(var c=-1,d=o==null?0:o.length;++c<d&&a(o[c],c,o)!==!1;);return o}e.exports=i},function(e,s){var i=9007199254740991;function o(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=i}e.exports=o},function(e,s,i){(function(o){var a=i(173),c=s&&!s.nodeType&&s,d=c&&typeof o=="object"&&o&&!o.nodeType&&o,h=d&&d.exports===c,g=h&&a.process,b=function(){try{var j=d&&d.require&&d.require("util").types;return j||g&&g.binding&&g.binding("util")}catch{}}();o.exports=b}).call(this,i(84)(e))},function(e,s,i){var o=i(67),a=i(385),c=Object.prototype,d=c.hasOwnProperty;function h(g){if(!o(g))return a(g);var b=[];for(var j in Object(g))d.call(g,j)&&j!="constructor"&&b.push(j);return b}e.exports=h},function(e,s,i){var o=i(390),a=i(180),c=Object.prototype,d=c.propertyIsEnumerable,h=Object.getOwnPropertySymbols,g=h?function(b){return b==null?[]:(b=Object(b),o(h(b),function(j){return d.call(b,j)}))}:a;e.exports=g},function(e,s){function i(o,a){for(var c=-1,d=a.length,h=o.length;++c<d;)o[h+c]=a[c];return o}e.exports=i},function(e,s,i){var o=i(178),a=o(Object.getPrototypeOf,Object);e.exports=a},function(e,s,i){var o=i(187);function a(c){var d=new c.constructor(c.byteLength);return new o(d).set(new o(c)),d}e.exports=a},function(e,s,i){e.exports={error:{priority:1,method:"error"},warn:{priority:2,method:"warn"},info:{priority:3,method:"info"},log:{priority:4,method:"log"},debug:{priority:5,method:"debug"},spam:{priority:6,method:"log"}}},function(e,s){function i(o,a,c){switch(c.length){case 0:return o.call(a);case 1:return o.call(a,c[0]);case 2:return o.call(a,c[0],c[1]);case 3:return o.call(a,c[0],c[1],c[2])}return o.apply(a,c)}e.exports=i},function(e,s,i){var o=i(406),a=i(193),c=a(o);e.exports=c},function(e,s,i){var o=i(52),a=i(25),c=i(65),d=i(11);function h(g,b,j){if(!d(j))return!1;var _=typeof b;return(_=="number"?a(j)&&c(b,j.length):_=="string"&&b in j)?o(j[b],g):!1}e.exports=h},function(e,s,i){e.exports=i(195)()?Object.setPrototypeOf:i(196)},function(e,s,i){var o=i(55),a={object:!0,function:!0,undefined:!0};e.exports=function(c){return o(c)?hasOwnProperty.call(a,typeof c):!1}},function(e,s,i){e.exports=i(417)()?Object.assign:i(418)},function(e,s,i){const o=i(1)("Event"),a=i(9),c=i(129);e.exports=function(){function d(g,b,j){b===void 0&&(b=!0),j===void 0&&(j={}),this.type=g,this.cancelable=b,this._defaultPrevented=!1;const _=c(Object.keys(this),Object.keys(j));if(_.length>0)throw new Error(`Cannot used reserved property names: ${_.join(",")}`);a(this,j)}var h=d.prototype;return h.preventDefault=function(){this.cancelable?this._defaultPrevented=!0:o.warn("Event.preventDefault :: Trying to preventDefault on an event that isn't cancelable")},h.isDefaultPrevented=function(){return this._defaultPrevented},d}()},function(e,s,i){var o=i(33),a=i(458),c=i(87),d=i(464),h=c(function(g){var b=o(g,d);return b.length&&b[0]===g[0]?a(b):[]});e.exports=h},function(e,s){function i(o,a,c){for(var d=-1,h=o==null?0:o.length;++d<h;)if(c(a,o[d]))return!0;return!1}e.exports=i},function(e,s,i){var o=i(25),a=i(17);function c(d){return a(d)&&o(d)}e.exports=c},function(e,s,i){(function(o){var a=i(19),c=i(470),d=i(209),h={"Content-Type":"application/x-www-form-urlencoded"};function g($,_e){!a.isUndefined($)&&a.isUndefined($["Content-Type"])&&($["Content-Type"]=_e)}function b(){var $;return(typeof XMLHttpRequest<"u"||typeof o<"u"&&Object.prototype.toString.call(o)==="[object process]")&&($=i(210)),$}function j($,_e,et){if(a.isString($))try{return(_e||JSON.parse)($),a.trim($)}catch(ct){if(ct.name!=="SyntaxError")throw ct}return(et||JSON.stringify)($)}var _={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:b(),transformRequest:[function(_e,et){return c(et,"Accept"),c(et,"Content-Type"),a.isFormData(_e)||a.isArrayBuffer(_e)||a.isBuffer(_e)||a.isStream(_e)||a.isFile(_e)||a.isBlob(_e)?_e:a.isArrayBufferView(_e)?_e.buffer:a.isURLSearchParams(_e)?(g(et,"application/x-www-form-urlencoded;charset=utf-8"),_e.toString()):a.isObject(_e)||et&&et["Content-Type"]==="application/json"?(g(et,"application/json"),j(_e)):_e}],transformResponse:[function(_e){var et=this.transitional,ct=et&&et.silentJSONParsing,dt=et&&et.forcedJSONParsing,nt=!ct&&this.responseType==="json";if(nt||dt&&a.isString(_e)&&_e.length)try{return JSON.parse(_e)}catch(it){if(nt)throw it.name==="SyntaxError"?d(it,this,"E_JSON_PARSE"):it}return _e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(_e){return _e>=200&&_e<300}};_.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],function(_e){_.headers[_e]={}}),a.forEach(["post","put","patch"],function(_e){_.headers[_e]=a.merge(h)}),e.exports=_}).call(this,i(42))},function(e,s){e.exports={}},function(e,s,i){var o=i(216),a=i(488),c=i(489),d=i(218),h=i(500),g=i(222),b=i(501),j=i(225),_=i(226),$=i(96),_e="Expected a function",et=1,ct=2,dt=8,nt=16,it=32,st=64,lt=Math.max;function ht(Tt,Rt,vt,Et,bt,Ct,Ut,Xt){var Nt=Rt&ct;if(!Nt&&typeof Tt!="function")throw new TypeError(_e);var Jt=Et?Et.length:0;if(Jt||(Rt&=~(it|st),Et=bt=void 0),Ut=Ut===void 0?Ut:lt($(Ut),0),Xt=Xt===void 0?Xt:$(Xt),Jt-=bt?bt.length:0,Rt&st){var zt=Et,nn=bt;Et=bt=void 0}var Bt=Nt?void 0:g(Tt),sn=[Tt,Rt,vt,Et,bt,zt,nn,Ct,Ut,Xt];if(Bt&&b(sn,Bt),Tt=sn[0],Rt=sn[1],vt=sn[2],Et=sn[3],bt=sn[4],Xt=sn[9]=sn[9]===void 0?Nt?0:Tt.length:lt(sn[9]-Jt,0),!Xt&&Rt&(dt|nt)&&(Rt&=~(dt|nt)),!Rt||Rt==et)var qt=a(Tt,Rt,vt);else Rt==dt||Rt==nt?qt=c(Tt,Rt,Xt):(Rt==it||Rt==(et|it))&&!bt.length?qt=h(Tt,Rt,vt,Et):qt=d.apply(void 0,sn);var Kt=Bt?o:j;return _(Kt(qt,sn),Tt,Rt)}e.exports=ht},function(e,s,i){var o=i(86),a=i(136),c=4294967295;function d(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}d.prototype=o(a.prototype),d.prototype.constructor=d,e.exports=d},function(e,s){function i(){}e.exports=i},function(e,s){var i="__lodash_placeholder__";function o(a,c){for(var d=-1,h=a.length,g=0,b=[];++d<h;){var j=a[d];(j===c||j===i)&&(a[d]=i,b[g++]=d)}return b}e.exports=o},function(e,s,i){var o=i(29),a=i(119),c=i(17),d="[object Object]",h=Function.prototype,g=Object.prototype,b=h.toString,j=g.hasOwnProperty,_=b.call(Object);function $(_e){if(!c(_e)||o(_e)!=d)return!1;var et=a(_e);if(et===null)return!0;var ct=j.call(et,"constructor")&&et.constructor;return typeof ct=="function"&&ct instanceof ct&&b.call(ct)==_}e.exports=$},function(e,s,i){var o=i(12),a=i(69),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function h(g,b){if(o(g))return!1;var j=typeof g;return j=="number"||j=="symbol"||j=="boolean"||g==null||a(g)?!0:d.test(g)||!c.test(g)||b!=null&&g in Object(b)}e.exports=h},function(e,s,i){var o=i(524),a=i(192),c=i(123);function d(h){return c(a(h,void 0,o),h+"")}e.exports=d},function(e,s,i){var o=i(87),a=i(52),c=i(124),d=i(53),h=Object.prototype,g=h.hasOwnProperty,b=o(function(j,_){j=Object(j);var $=-1,_e=_.length,et=_e>2?_[2]:void 0;for(et&&c(_[0],_[1],et)&&(_e=1);++$<_e;)for(var ct=_[$],dt=d(ct),nt=-1,it=dt.length;++nt<it;){var st=dt[nt],lt=j[st];(lt===void 0||a(lt,h[st])&&!g.call(j,st))&&(j[st]=ct[st])}return j});e.exports=b},function(e,s,i){var o=i(3),a=o(i(45));const c=i(57),d=i(56);let h=function(){function g(b){b===void 0&&(b={}),Object.defineProperty(this,"_rawSessionInfo",{value:d(b)})}return(0,a.default)(g,[{key:"sessionId",get:function(){return this._rawSessionInfo.session_id}},{key:"partnerId",get:function(){return this._rawSessionInfo.partner_id}},{key:"messagingServer",get:function(){return this._rawSessionInfo.messaging_server_url}},{key:"mediaServerName",get:function(){return this._rawSessionInfo.media_server_hostname}},{key:"messagingURL",get:function(){return this._rawSessionInfo.messaging_url}},{key:"symphonyAddress",get:function(){return this._rawSessionInfo.symphony_address}},{key:"iceServers",get:function(){return this._rawSessionInfo.ice_servers}},{key:"simulcast",get:function(){return c(this._rawSessionInfo,"properties.simulcast")}},{key:"e2ee",get:function(){return c(this._rawSessionInfo,"properties.e2ee",!1)}},{key:"reconnection",get:function(){return c(this._rawSessionInfo,"properties.reconnection",!1)}},{key:"renegotiation",get:function(){return c(this._rawSessionInfo,"properties.renegotiation",!1)}},{key:"p2pEnabled",get:function(){return c(this._rawSessionInfo,"properties.p2p.preference.value")==="enabled"}},{key:"hybridSession",get:function(){return c(this._rawSessionInfo,"properties.hybridSession",!1)}},{key:"isAdaptiveEnabled",get:function(){return c(this._rawSessionInfo,"properties.p2p.preference.value")==="adaptive"}},{key:"priorityVideoCodec",get:function(){return c(this._rawSessionInfo,"properties.priorityVideoCodec","")}},{key:"h264",get:function(){return c(this._rawSessionInfo,"properties.h264",!0)}},{key:"vp8",get:function(){return c(this._rawSessionInfo,"properties.vp8",!0)}},{key:"vp9",get:function(){return c(this._rawSessionInfo,"properties.vp9",!0)}},{key:"clientCandidates",get:function(){const j=c(this._rawSessionInfo,"properties.clientCandidates");return j==="relayed"?"relay":j}}]),g}();e.exports=h},function(module,exports,__webpack_require__){const extendES5Native=__webpack_require__(566),webrtcAdapter=__webpack_require__(567),logging=__webpack_require__(1)("createWindowMock"),env=__webpack_require__(2),windowKeys=[{key:"location",type:"object"},{key:"setTimeout",type:"function"},{key:"requestAnimationFrame",type:"function"},{key:"URL",type:"function"},{key:"MediaStream",type:"class"},{key:"webkitMediaStream",type:"class"},{key:"RTCIceCandidate",type:"class"},{key:"mozRTCIceCandidate",type:"class"},{key:"RTCSessionDescription",type:"class"},{key:"mozRTCSessionDescription",type:"class"},{key:"RTCIceGatherer",type:"class"},{key:"RTCIceTransport",type:"class"},{key:"RTCDtlsTransport",type:"class"},{key:"RTCSctpTransport",type:"class"},{key:"RTCRtpReceiver",type:"class"},{key:"HTMLMediaElement",type:"class"},{key:"RTCPeerConnection",type:"class"},{key:"webkitRTCPeerConnection",type:"class"},{key:"mozRTCPeerConnection",type:"class"},{key:"MediaStreamTrack",type:"class"},{key:"RTCRtpSender",type:"class"},{key:"RTCTrackEvent",type:"class"},{key:"RTCTransceiver",type:"class"},{key:"RTCDtmfSender",type:"class"},{key:"RTCDTMFSender",type:"class"},{key:"MediaStreamTrackEvent",type:"class"}],navigatorKeys=[{key:"userAgent",type:"string"},{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"webkitGetUserMedia",type:"function"},{key:"mozGetUserMedia",type:"function"}],mediaDevicesKeys=[{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"enumerateDevices",type:"function"},{key:"getSupportedConstraints",type:"function"},{key:"addEventListener",type:"function"},{key:"removeEventListener",type:"function"}],bindWithStaticProperties=(e,s)=>{if(typeof s!="function")return logging.warn("Non-function passed into bindWithStaticProperties()"),s;const i=s.bind(e);return Object.keys(s).forEach(o=>{i[o]=s[o]}),i},extendParentClass=ParentClass=>{try{const ChildClass=eval(`
      "use strict"; // Chrome<49 requires strict mode

      const getOwnProperties = (target) => {
        const properties = {};
        Object.getOwnPropertyNames(target).forEach((key) => {
          properties[key] = Object.getOwnPropertyDescriptor(target, key);
        });
        return properties;
      };

      class ChildClass extends ParentClass {
        constructor(...args) {
          super(...args);
          try {
            this.__proto__ = ChildClass.prototype;
          } catch (e) {}
        }
      };

      Object.defineProperties(ChildClass.prototype, getOwnProperties(ParentClass.prototype));
      Object.keys(ParentClass)
        .forEach((staticKey) => {
          ChildClass[staticKey] = ParentClass[staticKey];
        });

      ChildClass; // Ensure the final statement is returned in FF
    `);if(ChildClass&&ChildClass.prototype instanceof ParentClass)return ChildClass}catch(e){}return null},canUseES6Class=e=>{const s=e.RTCPeerConnection||e.webkitRTCPeerConnection||e.mozRTCPeerConnection,i=extendParentClass(s);if(i)try{i.prototype.foo="bar";const o=new i({iceServers:[]}),a=o.foo==="bar";try{o.close()}catch{}return a}catch{}return!1},extendClass=(e,s,i)=>{if(typeof e!="function")return logging.warn("Non-function passed into extendClass()"),e;let o=i&&extendParentClass(e);return o||(o=extendES5Native(e)),o},getCopyProperties=e=>(s,i,o)=>{o.forEach(a=>{let c=a.key,d=a.type,h=i[c];if(h!==void 0){switch(d){case"function":h=bindWithStaticProperties(i,h);break;case"class":h=extendClass(h,c,e);break;case"string":case"object":break;default:throw new Error(`Invalid type of window key: ${d}`)}s[c]=h}})},cloneWindow=e=>{const s={},i=getCopyProperties(canUseES6Class(e));return i(s,e,windowKeys),e.navigator!==void 0&&(s.navigator={},i(s.navigator,e.navigator,navigatorKeys),e.navigator.mediaDevices!==void 0&&(s.navigator.mediaDevices={},i(s.navigator.mediaDevices,e.navigator.mediaDevices,mediaDevicesKeys))),s};module.exports=function e(s){if(s.adapter!==void 0||env.isLegacyEdge)return s;const i=cloneWindow(s);return webrtcAdapter({window:i}),i}},function(e,s,i){e.exports=function(){let a=null;this.transform=c=>{a===null||c>=a?a=c:a=c*.3+a*.7;const d=Math.log(a)/Math.LN10/1.5+1;return Math.min(Math.max(d,0),1)}}},function(e,s,i){const o=i(6),a=d=>Object.keys(d).map(h=>d[h]),c=i(9);e.exports=function(h){const g={},b=(j,_)=>{c(_,{parent:this}),_.appendTo(h.parent),g[j]=_,this[j]=_};h.parent&&(o(this),this.destroy=()=>{this.off(),this.hideWhileLoading(),a(g).forEach(j=>j.destroy())},this.showAfterLoading=()=>{a(g).forEach(j=>j.showAfterLoading())},this.hideWhileLoading=()=>{a(g).forEach(j=>j.hideWhileLoading())},this.set=(j,_)=>(typeof j=="string"&&_?b(j,_):Object.keys(j).forEach($=>{b($,j[$])}),this))}},function(e,s,i){e.exports=function(){function o(c){this._analyser=null,this._timeDomainData=null,this._sourceNode=null,this._audioContext=c}var a=o.prototype;return a._initAudioAnalyser=function(d){this._analyser=this._audioContext.createAnalyser(),this._sourceNode=this._audioContext.createMediaStreamSource(d),this._sourceNode.connect(this._analyser),this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount)},a.webRTCStream=function(d){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._audioContext.state==="suspended"&&this._audioContext.resume(),this._initAudioAnalyser(d)},a.destroy=function(){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._timeDomainData=null},a.sample=function(d){if(typeof d=="function")throw new Error("sample no longer takes a callback");if(this._analyser&&this._timeDomainData){this._analyser.getByteTimeDomainData(this._timeDomainData);let h=0;for(let g=this._timeDomainData.length-1;g>=0;g-=1)h=Math.max(h,Math.abs(this._timeDomainData[g]-128));return h/128}return null},o}()},function(e,s,i){const o=i(578),a=i(26),c=i(6),d=i(23)();function h(){const g=this;c(g);function b(){return o.isDomLoaded()&&!o.isDomUnloaded()}function j(){b()&&g.dispatchEvent(new d.EnvLoadedEvent(a.ENV_LOADED))}function _(){o.whenUnloaded.then($),j()}function $(){g.dispatchEvent(new d.EnvLoadedEvent(a.ENV_UNLOADED))}o.whenLoaded.then(_),this.onLoad=function(_e,et){if(b()){_e.call(et);return}g.on(a.ENV_LOADED,_e,et)},this.onUnload=function(_e,et){if(this.isUnloaded()){_e.call(et);return}g.on(a.ENV_UNLOADED,_e,et)},this.isUnloaded=function(){return o.isDomUnloaded()}}e.exports=new h},function(e,s,i){var o=i(583);/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function a(Xt,Nt){if(Xt===Nt)return 0;for(var Jt=Xt.length,zt=Nt.length,nn=0,Bt=Math.min(Jt,zt);nn<Bt;++nn)if(Xt[nn]!==Nt[nn]){Jt=Xt[nn],zt=Nt[nn];break}return Jt<zt?-1:zt<Jt?1:0}function c(Xt){return(typeof window!==void 0?window:commonjsGlobal).Buffer&&typeof(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer=="function"?(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer(Xt):!!(Xt!=null&&Xt._isBuffer)}var d=i(584),h=Object.prototype.hasOwnProperty,g=Array.prototype.slice,b=function(){return function(){}.name==="foo"}();function j(Xt){return Object.prototype.toString.call(Xt)}function _(Xt){return c(Xt)||typeof(typeof window!==void 0?window:commonjsGlobal).ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(Xt):Xt?!!(Xt instanceof DataView||Xt.buffer&&Xt.buffer instanceof ArrayBuffer):!1}var $=e.exports=st,_e=/\s*function\s+([^\(\s]*)\s*/;function et(Xt){if(d.isFunction(Xt)){if(b)return Xt.name;var Nt=Xt.toString(),Jt=Nt.match(_e);return Jt&&Jt[1]}}$.AssertionError=function(Nt){this.name="AssertionError",this.actual=Nt.actual,this.expected=Nt.expected,this.operator=Nt.operator,Nt.message?(this.message=Nt.message,this.generatedMessage=!1):(this.message=nt(this),this.generatedMessage=!0);var Jt=Nt.stackStartFunction||it;if(Error.captureStackTrace)Error.captureStackTrace(this,Jt);else{var zt=new Error;if(zt.stack){var nn=zt.stack,Bt=et(Jt),sn=nn.indexOf(`
`+Bt);if(sn>=0){var qt=nn.indexOf(`
`,sn+1);nn=nn.substring(qt+1)}this.stack=nn}}},d.inherits($.AssertionError,Error);function ct(Xt,Nt){return typeof Xt=="string"?Xt.length<Nt?Xt:Xt.slice(0,Nt):Xt}function dt(Xt){if(b||!d.isFunction(Xt))return d.inspect(Xt);var Nt=et(Xt),Jt=Nt?": "+Nt:"";return"[Function"+Jt+"]"}function nt(Xt){return ct(dt(Xt.actual),128)+" "+Xt.operator+" "+ct(dt(Xt.expected),128)}function it(Xt,Nt,Jt,zt,nn){throw new $.AssertionError({message:Jt,actual:Xt,expected:Nt,operator:zt,stackStartFunction:nn})}$.fail=it;function st(Xt,Nt){Xt||it(Xt,!0,Nt,"==",$.ok)}$.ok=st,$.equal=function(Nt,Jt,zt){Nt!=Jt&&it(Nt,Jt,zt,"==",$.equal)},$.notEqual=function(Nt,Jt,zt){Nt==Jt&&it(Nt,Jt,zt,"!=",$.notEqual)},$.deepEqual=function(Nt,Jt,zt){lt(Nt,Jt,!1)||it(Nt,Jt,zt,"deepEqual",$.deepEqual)},$.deepStrictEqual=function(Nt,Jt,zt){lt(Nt,Jt,!0)||it(Nt,Jt,zt,"deepStrictEqual",$.deepStrictEqual)};function lt(Xt,Nt,Jt,zt){if(Xt===Nt)return!0;if(c(Xt)&&c(Nt))return a(Xt,Nt)===0;if(d.isDate(Xt)&&d.isDate(Nt))return Xt.getTime()===Nt.getTime();if(d.isRegExp(Xt)&&d.isRegExp(Nt))return Xt.source===Nt.source&&Xt.global===Nt.global&&Xt.multiline===Nt.multiline&&Xt.lastIndex===Nt.lastIndex&&Xt.ignoreCase===Nt.ignoreCase;if((Xt===null||typeof Xt!="object")&&(Nt===null||typeof Nt!="object"))return Jt?Xt===Nt:Xt==Nt;if(_(Xt)&&_(Nt)&&j(Xt)===j(Nt)&&!(Xt instanceof Float32Array||Xt instanceof Float64Array))return a(new Uint8Array(Xt.buffer),new Uint8Array(Nt.buffer))===0;if(c(Xt)!==c(Nt))return!1;zt=zt||{actual:[],expected:[]};var nn=zt.actual.indexOf(Xt);return nn!==-1&&nn===zt.expected.indexOf(Nt)?!0:(zt.actual.push(Xt),zt.expected.push(Nt),Tt(Xt,Nt,Jt,zt))}function ht(Xt){return Object.prototype.toString.call(Xt)=="[object Arguments]"}function Tt(Xt,Nt,Jt,zt){if(Xt==null||Nt===null||Nt===void 0)return!1;if(d.isPrimitive(Xt)||d.isPrimitive(Nt))return Xt===Nt;if(Jt&&Object.getPrototypeOf(Xt)!==Object.getPrototypeOf(Nt))return!1;var nn=ht(Xt),Bt=ht(Nt);if(nn&&!Bt||!nn&&Bt)return!1;if(nn)return Xt=g.call(Xt),Nt=g.call(Nt),lt(Xt,Nt,Jt);var sn=Ut(Xt),qt=Ut(Nt),Kt,$t;if(sn.length!==qt.length)return!1;for(sn.sort(),qt.sort(),$t=sn.length-1;$t>=0;$t--)if(sn[$t]!==qt[$t])return!1;for($t=sn.length-1;$t>=0;$t--)if(Kt=sn[$t],!lt(Xt[Kt],Nt[Kt],Jt,zt))return!1;return!0}$.notDeepEqual=function(Nt,Jt,zt){lt(Nt,Jt,!1)&&it(Nt,Jt,zt,"notDeepEqual",$.notDeepEqual)},$.notDeepStrictEqual=Rt;function Rt(Xt,Nt,Jt){lt(Xt,Nt,!0)&&it(Xt,Nt,Jt,"notDeepStrictEqual",Rt)}$.strictEqual=function(Nt,Jt,zt){Nt!==Jt&&it(Nt,Jt,zt,"===",$.strictEqual)},$.notStrictEqual=function(Nt,Jt,zt){Nt===Jt&&it(Nt,Jt,zt,"!==",$.notStrictEqual)};function vt(Xt,Nt){if(!Xt||!Nt)return!1;if(Object.prototype.toString.call(Nt)=="[object RegExp]")return Nt.test(Xt);try{if(Xt instanceof Nt)return!0}catch{}return Error.isPrototypeOf(Nt)?!1:Nt.call({},Xt)===!0}function Et(Xt){var Nt;try{Xt()}catch(Jt){Nt=Jt}return Nt}function bt(Xt,Nt,Jt,zt){var nn;if(typeof Nt!="function")throw new TypeError('"block" argument must be a function');typeof Jt=="string"&&(zt=Jt,Jt=null),nn=Et(Nt),zt=(Jt&&Jt.name?" ("+Jt.name+").":".")+(zt?" "+zt:"."),Xt&&!nn&&it(nn,Jt,"Missing expected exception"+zt);var Bt=typeof zt=="string",sn=!Xt&&d.isError(nn),qt=!Xt&&nn&&!Jt;if((sn&&Bt&&vt(nn,Jt)||qt)&&it(nn,Jt,"Got unwanted exception"+zt),Xt&&nn&&Jt&&!vt(nn,Jt)||!Xt&&nn)throw nn}$.throws=function(Xt,Nt,Jt){bt(!0,Xt,Nt,Jt)},$.doesNotThrow=function(Xt,Nt,Jt){bt(!1,Xt,Nt,Jt)},$.ifError=function(Xt){if(Xt)throw Xt};function Ct(Xt,Nt){Xt||it(Xt,!0,Nt,"==",Ct)}$.strict=o(Ct,$,{equal:$.strictEqual,deepEqual:$.deepStrictEqual,notEqual:$.notStrictEqual,notDeepEqual:$.notDeepStrictEqual}),$.strict.strict=$.strict;var Ut=Object.keys||function(Xt){var Nt=[];for(var Jt in Xt)h.call(Xt,Jt)&&Nt.push(Jt);return Nt}},function(e,s,i){const o=i(591),a=i(264),c=i(2);e.exports=d=>c.isElectron?d==="screen"?!0:a(d):o.indexOf(d)>-1},function(e,s,i){const o=i(267),a=i(6),c=i(1)("StreamChannel"),d=i(151)();e.exports=function(g){this.id=g.id,this.type=g.type,this.active=o(g.active),this.orientation=g.orientation||d.ROTATED_NORMAL,g.frameRate&&(this.frameRate=parseFloat(g.frameRate)),g.preferredFrameRate&&(this.preferredFrameRate=parseFloat(g.preferredFrameRate)),g.preferredWidth&&(this.preferredWidth=parseInt(g.preferredWidth,10)),g.preferredHeight&&(this.preferredHeight=parseInt(g.preferredHeight,10)),this.width=parseInt(g.width,10),this.height=parseInt(g.height,10),this.source=g.source||"camera",this.fitMode=g.fitMode||"cover",a(this),this.update=function(b){const j={},_={};for(const $ in b){if(!b.hasOwnProperty($))continue;const _e=this[$];switch($){case"active":this.active=o(b[$]);break;case"disableWarning":this.disableWarning=o(b[$]);break;case"frameRate":this.frameRate=parseFloat(b[$],10);break;case"width":case"height":this[$]=parseInt(b[$],10),j[$]=this[$],_[$]=_e;break;case"orientation":this[$]=b[$],j[$]=this[$],_[$]=_e;break;case"fitMode":this[$]=b[$];break;case"source":this[$]=b[$];break;default:return c.warn(`Tried to update unknown key ${$} on ${this.type} channel ${this.id}`),!1}this.trigger("update",this,$,_e,this[$])}return Object.keys(j).length&&this.trigger("update",this,"videoDimensions",_,j),!0}}},function(e,s,i){e.exports=function(){return{ROTATED_NORMAL:0,ROTATED_LEFT:270,ROTATED_RIGHT:90,ROTATED_UPSIDE_DOWN:180}}},function(e,s,i){const o=i(599),a=i(1)("StylableComponent"),c=i(600),d=i(268);e.exports=function(g,b,j,_){if(!g.trigger)throw new Error("OT.StylableComponent is dependent on the eventing mixin. Ensure that this is included in the object before StylableComponent.");_=_||function(){};let $=!1;const _e=function(dt,nt,it){it?g.trigger("styleValueChanged",dt,nt,it):g.trigger("styleValueChanged",dt,nt)};j===!1&&(b={buttonDisplayMode:"off",nameDisplayMode:"off",audioLevelDisplayMode:"off",videoDisabledDisplayMode:"off",audioBlockedDisplayMode:"off"},$=!0,_({showControls:!1}));const et=new c(b,_e);g.getStyle=function(ct){return et.get(ct)},g.setStyle=function(ct,dt,nt){if($)return a.warn("Calling setStyle() has no effect because theshowControls option was set to false"),this;let it;return typeof ct!="string"?it=ct:(it={},it[ct]=dt),it.backgroundImageURI&&(it.backgroundImageURI=o(it.backgroundImageURI)),et.setAll(it,nt),_(d(it)),this}}},function(e,s,i){const o=i(50),a=i(34)(),c=i(20),d=i(70),h=i(147),g=i(51).once,b=i(603),j=i(8),_=i(1)("systemRequirements"),$=i(604),_e=i(605),et=a.onlyLocal(),ct=new c,dt=o(()=>{ct.logEvent({action:"checkSystemRequirements",variation:"notHasRequirements",partnerId:d.value,payload:{userAgent:j.env.userAgent}})}),nt=o(()=>{i(606)()});let it=!1;e.exports={check(){_.debug("OT.checkSystemRequirements()");const st=Number(b&&g());return nt(),st||dt(),st},upgrade(st){let lt=st===void 0?{}:st,ht=lt.isSupportedButOld,Tt=ht===void 0?j.env.name.toLowerCase()in et.minimumVersion:ht,Rt=lt.userAgent,vt=Rt===void 0?navigator.userAgent:Rt;h.onLoad(()=>{if(it)return;const Et=new _e($);it=!0,Et.on("close",()=>{it=!1}),Et.open();let bt;vt.match(/(iPad|iPhone|iPod|android|webOS)/i)?bt=`${Tt?"supported-":""}mobile-browser`:bt=`${Tt?"upgrade":"normal"}-install`,Et.el(`#section-${bt}`).style.display="block"})}}},function(e,s,i){(function(o){var a=i(3),c=a(i(48)),d=a(i(607));const h=i(611);let g=function(b){(0,c.default)(j,b);function j(_){var $;return $=b.call(this,_)||this,$.name="TimeoutError",$}return j}((0,d.default)(Error));e.exports=(b,j,_)=>new o(($,_e)=>{if(typeof j!="number"||j<0)throw new TypeError("Expected `ms` to be a positive number");const et=setTimeout(()=>{if(typeof _=="function"){try{$(_())}catch(nt){_e(nt)}return}const ct=typeof _=="string"?_:`Promise timed out after ${j} milliseconds`,dt=_ instanceof Error?_:new g(ct);typeof b.cancel=="function"&&b.cancel(),_e(dt)},j);h(b.then($,_e),()=>{clearTimeout(et)})}),e.exports.TimeoutError=g}).call(this,i(0))},function(e,s,i){function o(){const a=[];return{add(c){a.push(c)},remove(c){const d=a.indexOf(c);d>=0&&a.splice(d,1)},releaseAll(){const c=[];for(;a.length>0;){const h=a.pop();try{h()}catch(g){c.push(g)}}const d=c.length;if(d>0)throw new Error(`Failed to complete ${d} cleanup job${d===1?"":"s"}: ${c.map(h=>`<${h}>`).join(", ")}`)}}}e.exports=o},function(e,s,i){const o=i(1)("applySdpTransform");e.exports=(a,c,d,h,g)=>{const b=a[c][d],j=`${c} ${d}`,$=`sdpTransforms (${j==="local offer"||j==="remote answer"?"publisher":"subscriber"}): ${c} ${d}`,_e=c==="local"?"created":"received";o.debug(`${$}: ${_e}:
${g}`);const et=b(h,g);return et.local===g?o.debug(`${$}: not modified`):o.debug(`${$}: modified to:
${et.local}`),et}},function(e,s,i){const o=function(c){if(c===void 0&&(c={}),!c)return 0;const d=c,h=d.currentStatFrames,g=h===void 0?0:h,b=d.prevStatFrames,j=b===void 0?0:b,_=d.currentTimestamp,$=_===void 0?0:_,_e=d.prevTimestamp,et=_e===void 0?0:_e;if(g>=j&&$>et){const ct=(g-j)/(($-et)/1e3);return Math.round(ct*100)/100}return 0};e.exports=o},function(e,s,i){let o;e.exports=function(c){c===void 0&&(c={});const d=c.AudioContext||(typeof window!==void 0?window:commonjsGlobal).AudioContext||(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext;return function(){if(o=o||d&&new d,o==null)throw new Error("AudioContext could not be created, hardware limit reached.");return o}}},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(57)),d=typeof(0,a.default)(typeof window!==void 0?window:commonjsGlobal,"navigator.getDisplayMedia",(0,a.default)(typeof window!==void 0?window:commonjsGlobal,"navigator.mediaDevices.getDisplayMedia"))=="function";s.default=d},function(e,s,i){const o=i(37);e.exports=function(){return function(d,h,g){const b=h.slice(),j=o(g),_=function(et){return b.indexOf(et)!==-1},$=function(et,ct){return j[et]&&j[et].indexOf(ct)!==-1};return function(_e){let et=d,ct=null;this.current=et;function dt(it,st){_e({message:it,newState:st,currentState:et,previousState:ct})}function nt(it){return _(it)?$(et,it)?!0:(dt(`'${et}' cannot transition to '${it}'`,it),!1):(dt(`'${it}' is not a valid state`,it),!1)}this.set=function(it){nt(it)&&(ct=et,this.current=it,et=it)}}}}},function(e,s,i){(function(o){const a=i(60);e.exports=function(d){d===void 0&&(d={});const h=d.chromeExtensionHelper||i(280)(),g=d.electronExtensionHelper||i(649)(),b=d.Errors||i(7),j=d.firefoxExtensionHelper||i(651),_=d.getDisplayMediaExtensionHelper||i(288),$=d.otError||i(13)(),_e=d.OTHelpers||i(8),et={};et.extensionByKind={},et.extensionClasses={},et.registerExtensionHelper=(nt,it)=>{et.extensionClasses[nt]=it,it.autoRegisters&&it.isSupportedInThisBrowser&&et.registerExtension(nt)},et.registerExtension=function(nt){if(et.extensionClasses[nt]==null)throw new Error("Unsupported kind passed to OT.registerScreenSharingExtension");for(var it=arguments.length,st=new Array(it>1?it-1:0),lt=1;lt<it;lt++)st[lt-1]=arguments[lt];const ht=et.extensionClasses[nt].register(...st);et.extensionByKind[nt]=ht};const ct=()=>{const nt=a(Object.keys(et.extensionClasses).sort(it=>it==="electron"?-1:1),it=>et.extensionClasses[it].isSupportedInThisBrowser);return nt===void 0?{}:{name:nt,proto:et.extensionClasses[nt],instance:et.extensionByKind[nt]}};et.pickHelper=()=>ct(),et.checkCapability=nt=>{const it={supported:!1,extensionRequired:void 0,extensionRegistered:void 0,extensionInstalled:void 0,supportedSources:{}},st=ct();if(st.name===void 0){setTimeout(nt.bind(null,it));return}if(it.supported=!0,it.extensionRequired=st.proto.extensionRequired?st.name:void 0,it.supportedSources={screen:st.proto.sources.screen,application:st.proto.sources.application,window:st.proto.sources.window,browser:st.proto.sources.browser},!st.instance){it.extensionRegistered=!1,it.extensionRequired&&(it.extensionInstalled=!1),setTimeout(nt.bind(null,it));return}it.extensionRegistered=it.extensionRequired?!0:void 0,st.instance.isInstalled(lt=>{it.extensionInstalled=it.extensionRequired||_e.env.name==="Firefox"?lt:void 0,nt(it)})},et.registerExtensionHelper("electron",g),et.registerExtensionHelper("getDisplayMedia",_),et.registerExtensionHelper("chrome",h),et.registerExtensionHelper("firefox",j);const dt=()=>{};return et.getConstraints=nt=>{const it=nt.onAccessDialogOpened,st=it===void 0?dt:it,lt=nt.onAccessDialogClosed,ht=lt===void 0?dt:lt,Tt=nt.videoSource,Rt=nt.constraints;return new o((vt,Et)=>{et.checkCapability(bt=>{if(bt.supported)if(bt.extensionRegistered===!1)Et($(b.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,new Error("Screen Sharing support in this browser requires an extension, but one has not been registered.")));else if(bt.extensionRequired&&bt.extensionInstalled===!1)Et($(b.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Screen Sharing support in this browser requires an extension, but the extension is not installed.")));else{const Ct=et.pickHelper();Ct.proto.getConstraintsShowsPermissionUI&&st(),Ct.instance.getConstraints(Tt,Rt,(Ut,Xt)=>{Ct.proto.getConstraintsShowsPermissionUI&&ht(),Ut?Et(Ut):vt(Xt)})}else{let Ct="Screen Sharing is not supported in this browser";_e.env.isElectron?Ct="Set the webPreferences.contextIsolation option of the Electron BrowserWindow to false or use a preload script to access the desktop capturer. For more information, see https://tokbox.com/developer/guides/screen-sharing/js/.":_e.env.name==="Chrome"&&_e.env.version>73&&(typeof window!==void 0?window:commonjsGlobal).location.protocol!=="https:"&&(Ct="https:// is required for screen sharing"),Et($(b.SCREEN_SHARING_NOT_SUPPORTED,new Error(Ct)))}})})},et}}).call(this,i(0))},function(e,s,i){e.exports=function(a){a===void 0&&(a={});const c=a.Errors||i(7),d=a.ExceptionCodes||i(10),h=a.otError||i(13)(),g={ICEWorkflow:c.ICE_WORKFLOW_FAILED,NewPeerConnection:c.CREATE_PEER_CONNECTION_FAILED,SetRemoteDescription:c.SET_REMOTE_DESCRIPTION_FAILED,Subscribe:{404:c.STREAM_NOT_FOUND,[d.STREAM_LIMIT_EXCEEDED]:c.STREAM_LIMIT_EXCEEDED}};return function(j,_,$,_e,et){const ct=`${($?`${$}: `:"")+et} PeerConnection with connection ${_e} failed: ${_}`,dt=g[$]||{},nt=typeof dt=="string"?dt:dt[j],it=et==="Publisher"?d.UNABLE_TO_PUBLISH:d.UNABLE_TO_SUBSCRIBE;if(!nt){const lt=new Error(ct);return lt.code=it,lt}const st=(()=>$==="ICEWorkflow"?et==="Publisher"?d.PUBLISHER_ICE_WORKFLOW_FAILED:d.SUBSCRIBER_ICE_WORKFLOW_FAILED:nt===c.STREAM_LIMIT_EXCEEDED?d.STREAM_LIMIT_EXCEEDED:it)();return h(nt,new Error(ct),st)}}},function(e,s,i){e.exports=function(a){a===void 0&&(a={});const c=a.OTHelpers||i(8),h=(a.global||(typeof window!==void 0?window:commonjsGlobal)).RTCPeerConnection;return function(b,j){c.env.name==="Firefox"&&h&&h.generateCertificate?h.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}).catch(_=>{j(_)}).then(_=>{b.certificates=[_],j(void 0,b)}):setTimeout(()=>{j(void 0,b)})}}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5)),d=o(i(45));const h=i(6),g=i(676),b=i(1)("WidgetView"),j=i(8),_=i(2),$=i(165),_e=$.default,et=$.CancellationError,ct=i(166),dt=i(678),nt=i(679),it=i(680),st=i(681),lt=i(682),ht=i(61),Tt=i(683),Rt=i(109);Rt();function vt(Et){let bt=Et===void 0?{}:Et,Ct=bt.logging,Ut=Ct===void 0?b:Ct,Xt=bt.OTHelpers,Nt=Xt===void 0?j:Xt,Jt=bt.waitForVideoToBePlaying,zt=Jt===void 0?nt:Jt,nn=bt.VideoElementFacade,Bt=nn===void 0?Rt():nn,sn=bt.env,qt=sn===void 0?_:sn;const Kt=g({window:typeof window!==void 0?window:commonjsGlobal}),$t=On=>{if(On.isCanceled())throw Ut.debug("bindVideo bailing due to cancellation"),new et("CANCEL")};return function(){function On(bn,dn){let Mn=dn===void 0?{}:dn,$n=Mn.insertDefaultUI,Un=$n===void 0?!0:$n,Fn=Mn.width,cr=Fn===void 0?264:Fn,or=Mn.height,wr=or===void 0?198:or,Er=Mn.fitMode,Zr=Er===void 0?"cover":Er,po=Mn.mirror,lr=po===void 0?!1:po,pr=Mn.insertMode,Vn=Mn.classNames,In=Mn.style,zn=Mn.widgetType,vr=Mn.initials;this._videoElementFacade=void 0,this._container=void 0,this._posterContainer=document.createElement("div"),this._widgetContainer=document.createElement("div"),this._loading=!0,this._audioOnly=!1,this._showPoster=void 0,this._poster=void 0,this._cancelBind=void 0,this.MAX_VIDEO_LOADED=5*1e3,h(this),/^(contain|cover)$/.test(Zr)===!1&&Ut.warn(`Invalid fit value "${Zr}" passed. Only "contain" and "cover" can be used.`),this._widgetType=zn,this._fitMode=Zr,this._insertDefaultUI=Un;const Jr=ht(this._widgetContainer);if(Jr.on("click",this.userGesture.bind(this)),Jr.on("touchstart",this.userGesture.bind(this),Kt?{passive:!0}:!1),this.once("destroy",()=>Jr.removeAll()),this._widgetContainer.classList.add("OT_widget-container"),this._widgetContainer.style.width="100%",this._widgetContainer.style.height="100%",Un!==!1){this._container=st(bn,pr),qt.isSafari&&qt.isiOS&&qt.iOSVersion&&qt.iOSVersion<11.2&&this._container.classList.add("OT_ForceContain"),this._container.style.width=lt(cr),this._container.style.height=lt(wr),this._container.style.overflow="hidden",it(this._container),lr&&Nt.addClass(this._container,"OT_mirrored"),Vn&&Vn.trim().split(/\s+/).forEach(io=>this._container.classList.add(io)),this._container.classList.add("OT_loading"),this._container.classList.add(`OT_fit-mode-${Zr}`),this._container.appendChild(this._widgetContainer);const Br=Nt(this._container).observeSize(()=>it(this._container)),vo=Br[0],eo=Nt.observeNodeOrChildNodeRemoval(this._container,io=>{if(!this._videoElementFacade)return;io.some(Wr=>Wr===this._widgetContainer||Wr===this._videoElementFacade.domElement())&&this.destroyVideo()});this.once("destroy",()=>{Ut.debug("disconnecting observers"),vo.disconnect(),eo.disconnect()})}this._posterContainer.classList.add("OT_video-poster"),this._widgetContainer.appendChild(this._posterContainer);const kn=document.createElement("div");kn.classList.add("OT_video-loading");const ir=document.createElement("div");ir.classList.add("OT_video-loading-spinner"),kn.appendChild(ir),this._widgetContainer.appendChild(kn),In&&In.backgroundImageURI?this.setBackgroundImageURI(In.backgroundImageURI):vr&&this.setInitials(vr)}var tn=On.prototype;return tn.addError=function(dn,Mn,$n){this._container&&(this._container.innerHTML=`<p>${dn}${Mn?` <span class="ot-help-message">${Mn}</span>`:""}</p>`,Nt.addClass(this._container,$n||"OT_subscriber_error"),this._container.querySelector("p").offsetHeight>this._container.offsetHeight&&(this._container.querySelector("span").style.display="none"))},tn.destroy=function(){this.emit("destroy"),this.destroyVideo(),this._container&&(Nt.removeElement(this._container),this._container=null)},tn.setBackgroundImageURI=function(dn){Nt.css(this._posterContainer,"backgroundImage",`url(${dn})`),Nt.css(this._posterContainer,"backgroundSize","contain"),Nt.css(this._posterContainer,"opacity","1.0")},tn.setInitials=function(dn){const Mn=Tt(dn),$n=new XMLSerializer().serializeToString(Mn);Nt.css(this._posterContainer,"backgroundImage",`url('data:image/svg+xml,${$n}')`),Nt.css(this._posterContainer,"backgroundSize","auto 55%"),Nt.css(this._posterContainer,"opacity","1.0")},tn.isAudioBlocked=function(){return!!(this._videoElementFacade&&this._videoElementFacade.isAudioBlocked())},tn.unblockAudio=function(){return this._videoElementFacade.unblockAudio()},tn.userGesture=function(){this.isAudioBlocked()&&ct().then(()=>Ut.debug("Successfully unblocked audio"),dn=>Ut.error("Error retrying audio on user interaction:",dn))},tn.setAudioBlockedUi=function(dn){this._container&&(dn?this._container.classList.add("OT_container-audio-blocked"):this._container.classList.remove("OT_container-audio-blocked"))},tn.rebindSrcObject=function(){this._videoElementFacade&&this._videoElementFacade._rebindSrcObject()},tn.pauseAndPlayVideoElement=function(){this._videoElementFacade&&this._videoElementFacade._pauseAndPlay()},tn._createBufferVideoElement=function(){var bn=(0,c.default)(a.default.mark(function Mn($n,Un){var Fn,cr,or;return a.default.wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Un===void 0&&(Un={}),Fn=Un.createElement?Un:document,cr=!1,or=Fn.createElement("video"),or.srcObject=$n,Er.prev=5,or.play(),Er.next=9,zt(or,this.MAX_VIDEO_LOADED);case 9:return cr=Er.sent,Er.abrupt("return",cr?or:null);case 13:return Er.prev=13,Er.t0=Er.catch(5),Er.abrupt("return",null);case 16:case"end":return Er.stop()}},Mn,this,[[5,13]])}));function dn(Mn,$n){return bn.apply(this,arguments)}return dn}(),tn._emitAMREvent=function(dn,Mn,$n){this.emit("amrLogEvent",dn,Mn,$n)},tn._createVideoElementFacade=function(dn){let Mn=dn._inject,$n=dn.audioVolume,Un=dn.fallbackText,Fn=dn.muted;this._videoElementFacade=new Bt({defaultAudioVolume:parseFloat($n),fallbackText:Un,fitMode:this._fitMode,_inject:Mn,muted:Fn,widgetType:this._widgetType});const cr=ht(this._videoElementFacade);if(this._videoFacadeEvents=cr,cr.on("error",()=>{this.trigger("error")}),cr.on("videoDimensionsChanged",(or,wr)=>{this.trigger("videoDimensionsChanged",or,wr)}),cr.on("mediaStopped",or=>{this.trigger("mediaStopped",or)}),cr.on("audioBlocked",()=>this.trigger("audioBlocked")),cr.on("audioUnblocked",()=>this.trigger("audioUnblocked")),this._videoElementFacade.audioChannelType("telephony"),Ut.debug("Appending the video facade"),this._videoElementFacade.appendTo(this._widgetContainer),typeof $n<"u")try{this._videoElementFacade.setAudioVolume($n)}catch(or){Ut.warn(`bindVideo ${or}`)}},tn._bindToStream=function(){var bn=(0,c.default)(a.default.mark(function Mn($n,Un){return a.default.wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return cr.prev=0,cr.next=3,this._videoElementFacade.bindToStream($n);case 3:cr.next=14;break;case 5:if(cr.prev=5,cr.t0=cr.catch(0),!Un.isCanceled()){cr.next=12;break}throw Ut.debug("Refusing to destroyVideo as bindVideo was cancelled"),new et("CANCEL");case 12:throw this.destroyVideo(),cr.t0;case 14:case"end":return cr.stop()}},Mn,this,[[0,5]])}));function dn(Mn,$n){return bn.apply(this,arguments)}return dn}(),tn._getNewBindCancellation=function(){this._cancelBind&&(Ut.debug("Cancelling last bindVideo request"),this._cancelBind.cancel());const dn=new _e;return this._cancelBind=dn,this.once("destroy",()=>dn.cancel()),dn},tn._triggerVideoElementCreated=function(){const dn=Mn=>{this.trigger("videoElementCreated",Mn),this._insertDefaultUI&&Nt.addClass(Mn,"OT_video-element")};this._videoElementFacade.domElement()?dn(this._videoElementFacade.domElement()):this._videoFacadeEvents.on("videoElementCreated",Mn=>{dn(Mn)})},tn._waitForVideoResolution=function(){var bn=(0,c.default)(a.default.mark(function Mn($n){return a.default.wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:if(!(!this.audioOnly()&&$n.getVideoTracks().length>0)){Fn.next=5;break}return Ut.debug("Waiting for correct resolution"),Fn.next=4,dt(this._videoElementFacade,5e3);case 4:Ut.debug(`Resolution: ${this._videoElementFacade.videoWidth()}x${this._videoElementFacade.videoHeight()}`);case 5:case"end":return Fn.stop()}},Mn,this)}));function dn(Mn){return bn.apply(this,arguments)}return dn}(),tn.bindVideo=function(){var bn=(0,c.default)(a.default.mark(function Mn($n,Un,Fn){var cr,or,wr,Er,Zr,po,lr,pr;return a.default.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(cr=Un.audioVolume,or=Un.muted,wr=Un.fallbackText,Er=Un._inject,Fn===void 0&&(Fn=!1),Ut.debug("bindVideo ",{webRTCStream:$n}),Zr=!!this._videoElementFacade,lr=this._getNewBindCancellation(),Zr){In.next=9;break}this._createVideoElementFacade({_inject:Er,audioVolume:cr,fallbackText:wr,muted:or}),In.next=22;break;case 9:if(!($n instanceof MediaStream)){In.next=22;break}return this._emitAMREvent("AMRLoadVideoBuffer","Attempt"),In.next=13,this._createBufferVideoElement($n);case 13:if(po=In.sent,po){In.next=20;break}if(this._emitAMREvent("AMRLoadVideoBuffer","Failure"),!Fn){In.next=18;break}throw new Error("bufferFailed: videoBuffer failed to load or timeout");case 18:In.next=21;break;case 20:this._emitAMREvent("AMRLoadVideoBuffer","Success");case 21:this._videoFacadeEvents.on("amrLogEvent",(zn,vr,Jr)=>{this._emitAMREvent(zn,vr,Jr)});case 22:return In.next=24,this._bindToStream($n,lr);case 24:return Zr||this._triggerVideoElementCreated(),$t(lr),pr=zt(this._videoElementFacade,5e3),In.next=29,this._waitForVideoResolution($n);case 29:return Ut.debug("Waiting for video to be playing"),In.next=32,pr;case 32:Ut.debug("Video is playing"),$t(lr),po&&(po.remove&&po.remove(),po=null);case 35:case"end":return In.stop()}},Mn,this)}));function dn(Mn,$n,Un){return bn.apply(this,arguments)}return dn}(),tn.bindAudioTrackOnly=function(){this._videoElementFacade&&this._videoElementFacade.bindAudioTrackOnly()},tn.destroyVideo=function(){this._videoElementFacade&&(this._videoElementFacade.destroy(),this._videoElementFacade=null)},tn.video=function(){return this._videoElementFacade},tn.showPoster=function(dn){return dn===void 0?!Nt.isDisplayNone(this._posterContainer):(this._showPoster=dn,Nt[dn?"show":"hide"](this._posterContainer),this.showPoster())},tn.poster=function(dn){return dn===void 0?Nt.css(this._posterContainer,"backgroundImage"):(this._poster=dn,Nt.css(this._posterContainer,"backgroundImage",`url(${dn})`),this.poster())},tn.loading=function(dn){return dn===void 0?this._loading:(this._loading=!!dn,this._container&&this._container.classList[dn?"add":"remove"]("OT_loading"),this.loading())},tn.audioOnly=function(dn){return dn===void 0?this._audioOnly:(this._audioOnly=dn,this._container&&this._container.classList[dn?"add":"remove"]("OT_audio-only"),this.audioOnly())},tn.domId=function(){return this._container&&this._container.getAttribute("id")},tn.setSinkId=function(dn){if(this._videoElementFacade)return this._videoElementFacade.setSinkId(dn)},(0,d.default)(On,[{key:"domElement",get:function(){return this._container}},{key:"videoElement",get:function(){return this._videoElementFacade&&this._videoElementFacade.domElement()||void 0}},{key:"width",get:function(){return this.videoElement&&this.videoElement.offsetWidth}},{key:"height",get:function(){return this.videoElement&&this.videoElement.offsetHeight}}]),On}()}e.exports=vt},function(e,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.CancellationError=s.default=void 0;var o=i(677),a=h(o),c=i(303),d=h(c);function h(g){return g&&g.__esModule?g:{default:g}}s.default=a.default,s.CancellationError=d.default},function(e,s,i){(function(o){const a=i(21);e.exports=()=>o.all(a.subscribers.where().map(c=>{if(c.isAudioBlocked())return c._.unblockAudio()}))}).call(this,i(0))},function(e,s,i){e.exports=o=>o==="P2P"?"RELAYED":"ROUTED"},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5)),h=a(i(696)),g=a(i(697)),b=a(i(108)),j=i(74),_=a(i(698));const $=i(57),_e=i(148),et=i(9),ct=i(56),dt=i(60),nt=i(275),it=i(47),st=i(50),lt=i(700),ht=i(15),Tt=i(258),Rt=i(194),vt=i(165),Et=vt.CancellationError,bt=vt.default,Ct=i(2),Ut=i(313),Xt=i(314),Nt=i(75),Jt=i(26),zt=i(6),nn=i(107),Bt=i(128),sn=i(20),qt=i(73),Kt=i(155),$t=i(710),Sn=i(164)(),On=i(711),tn=i(712),bn=i(166),dn=i(24)(),Mn=dn.getInputMediaDevices,$n=i(713),Un=i(269),Fn=i(311),cr=i(714),or=i(715),wr=i(291),Er=wr.setVideoContentHint,Zr=wr.getVideoContentHint,po=i(167),lr=i(312),pr=5*1e3,Vn=3*1e3,In=30*1e3;e.exports=function(vr){vr===void 0&&(vr={});let Jr=vr,kn=(0,g.default)({},((0,h.default)(Jr),Jr));["processPubOptions"].forEach(Jl=>{_e(kn[Jl],`${Jl} dependency must be injected into Publisher`)});const ir=kn.AnalyticsHelper||sn,gr=kn.createAudioFallbackCoordinator||_.default,Br=kn.calculateCapableSimulcastStreams||i(251),vo=kn.createChromeMixin||i(281)(),eo=kn.deviceHelpers||i(24)(),io=kn.EnvironmentLoader||i(147),to=kn.Errors||i(7),Wr=kn.Events||i(23)(),To=kn.ExceptionCodes||i(10),no=kn.interpretPeerConnectionError||i(162)(),yo=kn.IntervalRunner||qt,Pr=kn.logging||i(1)("Publisher"),fu=kn.Microphone||i(292)(),Zo=kn.otError||i(13)(),oo=kn.OTErrorClass||i(22),Xo=kn.OTHelpers||i(8),Zs=kn.parseIceServers||i(102).parseIceServers,Pl=kn.PUBLISH_MAX_DELAY||i(266),fs=kn.PublisherPeerConnection||i(296)(),Ys=kn.PublishingState||i(302)(),hu=kn.StreamChannel||i(150),Tu=kn.systemRequirements||i(153),Zp=kn.VideoOrientation||i(151)(),Pu=kn.WidgetView||Sn,Fu=kn.global||(typeof window!==void 0?window:commonjsGlobal),Mr=kn.createSendMethod||i(309),Fs=kn.setEncodersActiveState||Ut,zl=kn.MediaProcessor||i(716),Rs=i(721),Js=kn.shouldLogMediaProcessorEvents||i(722),Or=i(315),Ms=kn.processPubOptions;return function(Ql){var Do=this;Ql===void 0&&(Ql={});let El=zt({});const jo=new Rt,Zu=new lr;let _d=!1;const Bs=fn=>jo.get(fn),Yu=(fn,an)=>jo.set(fn,an);zt(this);const Xu=Kt();let js=new ir;Tu.check()||Tu.upgrade();let Go,Fl,qr;const Bu={};let pu,pp,os,mp,Mp,gp,op,Lp,Ku,$l,Ru=!1,xl,Cp,Wn,pn,Cn;const Dn={},fr={};let yr;const mo=5e3;let Ro=!1,ms,Ho;const _o=()=>this.session||Ho||{isConnected(){return!1}},ys=[],Ps=new zl;this.once("publishComplete",fn=>{if(!fn){var an;Ru=!0,xl=(an=this.session)!=null&&an.sessionInfo.p2pEnabled?"P2P":"MANTIS"}}),this.on("sourceStreamIdChanged",fn=>{xl=fn,Zu.finishTransitionTo(xl)}),this.on("audioAcquisitionProblem",fn=>{let an=fn.method;bo("publisher:audioAcquisitionProblem","Event",{didPublishComplete:Ru,method:an})});function vp(){return{connectionId:_o().isConnected()?_o().connection.connectionId:null,streamId:Fl,widgetType:"Publisher"}}const Is=fn=>{const an=Object.keys(to).map(_t=>to[_t]),vn=Zo(an.indexOf(fn.name)>-1?fn.name:to.MEDIA_ERR_ABORTED,fn,To.UNABLE_TO_PUBLISH);Pr.error(`onStreamAvailableError ${vn.name}: ${vn.message}`),os.set("Failed"),Go&&(Go.destroy(),Go=null);const Pt={failureReason:"GetUserMedia",failureCode:To.UNABLE_TO_PUBLISH,failureMessage:`OT.Publisher failed to access camera/mic: ${vn.message}`};Du("Failure",{},Pt),oo.handleJsException({error:vn,errorMsg:Pt.failureReason,code:Pt.failureCode,target:this,analytics:js}),this.trigger("publishComplete",vn)},Cl=fn=>{const an=ct(fn);an.code=To.UNABLE_TO_PUBLISH,Pr.error(`OT.Publisher.onScreenSharingError ${an.message}`),os.set("Failed"),an.message=`Screensharing: ${an.message}`,this.trigger("publishComplete",an),Du("Failure",{},{failureReason:"ScreenSharing",failureMessage:an.message}),Go&&(Go.destroy(),Go=null)},Vs=fn=>{const an=ct(fn);let vn;try{vn=window.self!==window.top}catch{}(typeof window!==void 0?window:commonjsGlobal).location.protocol!=="https:"&&(Tl?an.message+=" Note: https:// is required for screen sharing.":Un()&&Xo.env.hostName!=="localhost"&&(an.message+=` Note: ${Xo.env.name} requires HTTPS for camera and microphone access.`)),vn&&!Tl&&(an.message+=" Note: Check that the iframe has the allow attribute for camera and microphone"),Pr.error(an.message),os.set("Failed"),an.message=`OT.Publisher Access Denied: Permission Denied: ${an.message}`,an.code=To.UNABLE_TO_PUBLISH,Go&&(Go.destroy(),Go=null),Du("Cancel",{reason:"AccessDenied"}),this.trigger("publishComplete",an),this.dispatchEvent(new Bt(Jt.ACCESS_DENIED))},Xl=fn=>{throw fn instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(fn))||(fn=new Error("Unknown error has occurred. Stream is not available.")),fn.name===to.USER_MEDIA_ACCESS_DENIED||fn.name===to.NOT_SUPPORTED&&fn.originalMessage.match(/Only secure origins/)?Vs(fn):Ms.isScreenSharing?Cl(fn):Is(fn),fn},cp=()=>{bo("accessDialog","Opened"),this.dispatchEvent(new Bt(Jt.ACCESS_DIALOG_OPENED,!0))},zu=()=>{bo("accessDialog","Closed"),this.dispatchEvent(new Bt(Jt.ACCESS_DIALOG_CLOSED,!1))},Dp=ht(),Xs={};let Vu=!1,Ju={},yp=!1,su=Ms(Ql,"OT.Publisher",()=>os&&os.isDestroyed());su.on({accessDialogOpened:cp,accessDialogClosed:zu});const _f=su,Tl=_f.isScreenSharing,Qr=_f.isCustomAudioTrack,Fo=_f.isCustomVideoTrack,_h=_f.shouldAllowAudio,Dr=_f.properties,Pp=_f.getUserMedia;Object.defineProperty(this,"loudness",{writable:!1,value:void 0,configurable:!0});function Ns(fn){fn.forEach(an=>an())}const ep=(fn,an,vn)=>fn.addEventListener?(fn.addEventListener(an,vn),()=>fn.removeEventListener(an,vn)):()=>{};(function(){const an=[];El.on("streamDestroy",()=>Ns(an)),El.on("streamChange",()=>{Ns(an);const vn=qr.getAudioTracks().map(Pt=>ep(Pt,"ended",()=>{yp=!0,this.trigger("audioAcquisitionProblem",{method:"trackEndedEvent"})}));an.splice(0,an.length,...vn)})}).call(this),function(){const an=[];El.on("streamDestroy",()=>Ns(an)),El.on("streamChange",()=>{Ns(an),bp()||qr.getTracks().forEach(vn=>{vn.addEventListener&&(an.push(ep(vn,"mute",()=>{bs()})),an.push(ep(vn,"unmute",()=>{bs()})))})})}();const bp=()=>{if(Tl)return!0;const an=["text","detail"].includes(Dr.videoContentHint);return Fo&&an},bo=Ql.logAnalyticsEvent||((fn,an,vn,Pt,_t)=>{let on=et({action:fn,variation:an,payload:vn},vp(),Pt);an==="Failure"&&(on=et(Ju,on)),Ju=it(on,"sessionId","connectionId","partnerId"),js.logEvent(on,_t)}),Tp=()=>{if(!Js(this.session)){Ps.disableLogging();return}const an=this.session.apiKey;Ps.enableLogging(an)},Du=function(an,vn,Pt){vn===void 0&&(vn={}),Pt===void 0&&(Pt={}),Pt.failureReason!=="Non-fatal"&&(an==="Attempt"&&(Mp=new Date().getTime(),ms&&(ms.stop(),Pr.error("_connectivityAttemptPinger should have been cleaned up")),ms=new yo(()=>{bo("Publish","Attempting",vn,Object.assign({},vp(),Pt))},1/5,6)),an==="Failure"||an==="Success"||an==="Cancel"?(ms?(ms.stop(),ms=void 0):Pr.warn(`Received connectivity event: "${an}" without "Attempt"`),bo("Publish",an,Object.assign({videoInputDevices:op,audioInputDevices:gp,videoInputDeviceCount:op?op.length:void 0,audioInputDeviceCount:gp?gp.length:void 0,selectedVideoInputDeviceId:Lp,selectedAudioInputDeviceId:Ku},vn),Object.assign({attemptDuration:new Date().getTime()-Mp},Pt))):bo("Publish",an,vn,Pt))},jp=(fn,an)=>{bo("ICERestart",fn,an)},Kp=(fn,an,vn)=>{an==="Attempt"?(Dn[fn]=new Date().getTime(),bo(fn,an,vn)):(an==="Failure"||an==="Success")&&bo(fn,an,vn,{attemptDuration:new Date().getTime()-Dn[fn]})},Sp=function(an,vn){vn===void 0&&(vn={}),Kp("RoutedToRelayedTransition",an,vn)},Gp=function(an,vn){vn===void 0&&(vn={}),Kp("RelayedToRoutedTransition",an,vn)},Up=st(()=>{bo("GetStats","Called")}),Yo=st(()=>{bo("GetRtcStatsReport","Called")}),lo=fn=>{let an=fn.parsedStats,vn=fn.simulcastEnabled,Pt=fn.remoteConnectionId,_t=fn.peerId,on=fn.sourceStreamId;const Rn={peerId:_t,widgetType:"Publisher",connectionId:this.session&&this.session.isConnected()?this.session.connection.connectionId:null,streamId:Fl,width:Go.width,height:Go.height,audioTrack:qr&&qr.getAudioTracks().length>0,hasAudio:dp(),publishAudio:Dr.publishAudio,videoTrack:qr&&qr.getVideoTracks().length>0,hasVideo:zp(),publishVideo:Dr.publishVideo,audioSource:Qr?"Custom":void 0,duration:pu?Math.round((new Date().getTime()-pu.getTime())/1e3):0,remoteConnectionId:Pt,scalableVideo:vn,sourceStreamId:po(on)};let An=Tl&&Fo&&"Screen"||Tl&&Ql.videoSource||Fo&&"Custom"||Dr.constraints.video&&"Camera"||null;nt(An)&&(An=lt(An)),Rn.videoSource=An;const Bn={videoWidth:this.videoWidth(),videoHeight:this.videoHeight()},Jn=et({},Rn,an,Bn);js.logQOS(Jn),this.trigger("qos",Jn)},_p=()=>{var fn,an;let vn=((fn=Dr.videoDimensions)==null?void 0:fn.width)||640,Pt=((an=Dr.videoDimensions)==null?void 0:an.height)||480;if(Dr.publishVideo){var _t;const on=(_t=Go)==null?void 0:_t.video();vn=(on==null?void 0:on.videoWidth())||vn,Pt=(on==null?void 0:on.videoHeight())||Pt}return{width:vn,height:Pt}},sm=fn=>{Pr.error("OT.Publisher State Change Failed: ",fn.message),Pr.debug(fn)},qp=()=>{if(os.isDestroyed()){Go&&Go.destroyVideo();return}Pr.debug("OT.Publisher.onLoaded; resolution:",`${this.videoWidth()}x${this.videoHeight()}`),os.set("MediaBound"),bn().catch(Pr.error),Go.loading(this.session?!this.stream:!1),Vu=!0},lp=fn=>{const an=Zo(to.CONNECT_FAILED,fn,To.P2P_CONNECTION_FAILED);an.message=`OT.Publisher PeerConnection Error: ${an.message}`,Du("Failure",{},{failureReason:"PeerConnectionError",failureCode:an.code,failureMessage:an.message}),os.set("Failed"),this.trigger("publishComplete",an),oo.handleJsException({error:an,target:this,analytics:js})},Lu=()=>{qr&&(El.emit("streamDestroy"),Fu.MediaStreamTrack&&Fu.MediaStreamTrack.prototype.stop?qr.getTracks().forEach(fn=>fn.stop()):qr.stop())},Tn=()=>{const fn=Ct.isiOS&&Ct.iOSVersion>=15&&Ct.iOSVersion<15.2,an=qr.getVideoTracks()[0];if(!fn||!an)return;const vn=()=>{!document.hidden&&Go&&Go.rebindSrcObject()};document.addEventListener("visibilitychange",vn)},Ft=()=>{const fn=Ct.isiOS&&Ct.iOSVersion>=13.3,an=qr.getAudioTracks()[0];fn&&an&&(an.onmute=()=>wm(an),an.onunmute=()=>Om(an))},yn=function(){var fn=(0,d.default)(c.default.mark(function an(){var vn;return c.default.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(vn={muted:!0},Go){_t.next=3;break}throw new Error("Cannot bind video after widget view has been destroyed");case 3:return _t.abrupt("return",Go.bindVideo(qr,vn));case 4:case"end":return _t.stop()}},an)}));return function(){return fn.apply(this,arguments)}}(),jn=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt;return c.default.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:if(Pr.debug("OT.Publisher.onStreamAvailable"),os.set("BindingMedia"),Dr.videoContentHint!==void 0&&Er(vn,Dr.videoContentHint),Lu(),qr=vn,!Dr.videoFilter){on.next=14;break}return on.prev=6,on.next=9,Do.applyVideoFilter(Dr.videoFilter);case 9:on.next=14;break;case 11:on.prev=11,on.t0=on.catch(6),Pr.error(`Error applying video filter: ${on.t0}`);case 14:El.emit("streamChange"),Ft(),Tn(),Pt=(Rn,An)=>{let Bn;return Rn.forEach(Jn=>{if(Jn.deviceId)Bn=Jn.deviceId.toString();else if(Jn.label&&An){const Yn=dt(An,xo=>xo.label===Jn.label);Yn&&(Bn=Yn.deviceId)}}),Bn},Lp=Pt(qr.getVideoTracks(),op),Ku=Pt(qr.getAudioTracks(),gp),pp=new fu(qr,!Dr.publishAudio),ym(),lm(),Do.accessAllowed=!0,Do.dispatchEvent(new Bt(Jt.ACCESS_ALLOWED,!1));case 25:case"end":return on.stop()}},an,null,[[6,11]])}));return function(vn){return fn.apply(this,arguments)}}(),Hn=fn=>{Pr.error("OT.Publisher.onPublishingTimeout");let an,vn;yp?(an=to.CHROME_MICROPHONE_ACQUISITION_ERROR,vn="Unable to publish because your browser failed to get access to your microphone. You may need to fully quit and restart your browser to get it to work. See https://bugs.chromium.org/p/webrtc/issues/detail?id=4799 for more details."):(an=to.TIMEOUT,vn="Could not publish in a reasonable amount of time");const Pt={failureReason:"ICEWorkflow",failureCode:To.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to publish in a reasonable amount of time (timeout)"};Du("Failure",{},Pt),oo.handleJsException({errorMsg:Pt.failureReason,code:Pt.failureCode,target:this,analytics:js}),fn.isConnected()&&this.streamId&&fn._.streamDestroy(this.streamId),this.disconnect(),this.session=null,os.isDestroyed()||os.set("MediaBound"),this.trigger("publishComplete",Zo(an,new Error(vn),To.UNABLE_TO_PUBLISH))},Xr=fn=>{const an=Zo(to.MEDIA_ERR_DECODE,fn,To.UNABLE_TO_PUBLISH);an.message=`OT.Publisher while playing stream: ${an.message}`,Pr.error("OT.Publisher.onVideoError:",an),bo("stream",null,{reason:an.message});const vn=os.isAttemptingToPublish();os.set("Failed"),vn?this.trigger("publishComplete",an):this.trigger("error",an.message),oo.handleJsException({error:an,target:this,analytics:js})};this._setWebRTCStream=fn=>{qr=fn},this._setCurrentVideoFilter=fn=>{xu=fn},this._getCurrentVideoFilter=()=>xu,this._getMediaProcessor=()=>Ps,this._removePeerConnection=fn=>{var an;if(!fn)return;const vn=Bs(fn),Pt=vn.peerConnectionId;delete Xs[Pt],fn.destroy(),(an=um)==null||an.onPeerConnectionDisconnected()},this._removeSubscriber=fn=>{this.session.sessionInfo.isAdaptiveEnabled&&xl==="P2P"&&this._.startRelayedToRoutedTransition(),gu(fn).then(vn=>{vn.forEach(Pt=>this._removePeerConnection(Pt))})};const jr=fn=>{const an=Bs(fn),vn=an.remoteSubscriberId,Pt=an.peerConnectionId;Pr.debug("Subscriber has been disconnected from the Publisher's PeerConnection"),bo("disconnect","PeerConnection",{subscriberConnection:Pt}),this._removeSubscriber(vn)},$r=function(){var fn=(0,d.default)(c.default.mark(function an(vn,Pt){var _t,on,Rn,An,Bn,Jn,Yn,xo,Ur,Vr,xs;return c.default.wrap(function(so){for(;;)switch(so.prev=so.next){case 0:if(_t=Pt.reason,on=Pt.prefix,Rn=Do.session&&Do.session.sessionInfo,!(on==="ICEWorkflow"&&Rn&&Rn.reconnection&&Vu)){so.next=5;break}return Pr.debug("Ignoring peer connection failure due to possibility of reconnection."),so.abrupt("return");case 5:return An=Bs(vn)||{},Bn=An.remoteConnectionId,Jn=Bn===void 0?"(not found)":Bn,Yn=An.peerConnectionId,xo=no(void 0,_t,on,Jn,"Publisher"),Ur={hasRelayCandidates:vn&&vn.hasRelayCandidates()},Vr={failureReason:on||"PeerConnectionError",failureCode:xo.code,failureMessage:xo.message},os.isPublishing()?Vr.reason="Non-fatal":Do.trigger("publishComplete",xo),Du("Failure",Ur,Vr),oo.handleJsException({errorMsg:`OT.Publisher PeerConnection Error: ${_t}`,code:xo.code,target:Do,analytics:js}),so.next=14,Xs[Yn];case 14:xs=so.sent,xs.destroy(),delete Xs[Yn];case 17:case"end":return so.stop()}},an)}));return function(vn,Pt){return fn.apply(this,arguments)}}(),zr=fn=>this.session.sessionInfo.isAdaptiveEnabled&&fn.getSourceStreamId()==="P2P",_l=fn=>{const an=Bs(fn),vn=an.remoteConnectionId;jp("Success",{remoteConnectionId:vn})},So=fn=>{const an=Bs(fn),vn=an.remoteConnectionId;jp("Failure",{reason:"ICEWorkflow",message:"OT.Publisher PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",remoteConnectionId:vn})},_c=function(){var fn=(0,d.default)(c.default.mark(function an(vn,Pt){var _t,on,Rn,An,Bn,Jn,Yn;return c.default.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(_t=Do.session.sessionInfo.isAdaptiveEnabled,on=Pt.getSourceStreamId(),fr[on]=vn,vn==="disconnected"&&setTimeout(()=>{const Vr=Do.session._.isSocketReconnecting,eu=Do.session._.getSocket().is("connected")&&!Vr();if(fr[on]==="disconnected"&&eu){const so=Bs(Pt),Al=so.remoteConnectionId;jp("Attempt",{remoteConnectionId:Al}),Pt.iceRestart()}},2e3),vn!=="connected"){Ur.next=14;break}if(clearTimeout(yr),!_t){Ur.next=14;break}return Ur.next=9,Hp();case 9:return Rn=Ur.sent.iceConnectionStateIsConnected(),Ur.next=12,kp();case 12:An=Ur.sent.iceConnectionStateIsConnected(),Rn&&An&&Jp();case 14:if(vn!=="failed"){Ur.next=21;break}if(Bn=Do.session._.isSocketReconnecting,Jn=Do.session._.getSocket(),Yn=Jn.is("connected")&&!Bn(),Yn){Ur.next=20;break}return Ur.abrupt("return");case 20:_t&&on===xl&&on==="P2P"?Do._.startRelayedToRoutedTransition():yr=setTimeout(()=>{Do.session._.streamDestroy(Do.streamId,on)},mo);case 21:case"end":return Ur.stop()}},an)}));return function(vn,Pt){return fn.apply(this,arguments)}}(),Rp=fn=>{fn.setP2PMaxBitrate(),fn.startEncryption(this.session.connection.id),zr(fn)&&Sp("Success")},au=fn=>{if(os.current!=="PublishingToSession")throw new Error("assignStream called when publisher is not successfully publishing");Xu.releaseAll(),this.stream=fn,this.stream.on("destroyed",this.disconnect,this),Xu.add(()=>{this.stream&&this.stream.off("destroyed",this.disconnect,this)}),os.set("Publishing"),Go.loading(!Vu),pu=new Date,this.dispatchEvent(new Wr.StreamEvent("streamCreated",fn,null,!1)),Du("Success"),this.trigger("publishComplete",null,this)},Ip=fn=>{let an=fn.peerConnectionId,vn=fn.send,Pt=fn.log,_t=fn.logQoS,on=fn.sourceStreamId;if(Qu(an))return o.reject(new Error("PeerConnection already exists"));const Rn=Br({isChromiumEdge:Xo.env.isChromiumEdge,browserName:Xo.env.name,isScreenSharing:Tl,isCustomVideoTrack:Fo,sessionInfo:this.session.sessionInfo,constraints:Dr.constraints,videoDimensions:_p(),capableSimulcastScreenshare:Dr.capableSimulcastScreenshare,scalableVideo:Dr.scalableVideo});return Xs[an]=o.all([this.session._.getIceConfig(),this.session._.getVideoCodecsCompatible(qr)]).then(An=>{let Bn=An[0],Jn=An[1],Yn=qr;if(!Jn){Yn=qr.clone();const Ur=Yn.getVideoTracks(),Vr=Ur[0];Vr&&(Vr.stop(),Yn.removeTrack(Vr))}const xo=new fs({iceConfig:Bn,sendMessage:(Ur,Vr)=>{Ur==="offer"&&this.trigger("connected"),vn(Ur,Vr)},webRTCStream:Yn,channels:Dr.channels,capableSimulcastStreams:Rn,overrideSimulcastEnabled:Ql._enableSimulcast,logAnalyticsEvent:Pt,offerOverrides:{enableDtx:Dr.enableDtx,enableStereo:Dr.enableStereo,audioBitrate:Dr.audioBitrate,priorityVideoCodec:Dr._priorityVideoCodec||this.session.sessionInfo.priorityVideoCodec,codecFlags:Dr._codecFlags||this.session._.getCodecFlags()},answerOverrides:this.session.sessionInfo.p2pEnabled?void 0:{audioBitrate:Dr.audioBitrate},sourceStreamId:on,isP2pEnabled:this.session.sessionInfo.p2pEnabled,sessionId:this.session.id,keyStore:this.session.keyStore,sFrameClientStore:this.session.sFrameClientStore,isE2ee:this.session._.isE2ee(),audioFallbackEnabled:Dr.publisherAudioFallbackEnabled,resolution:{width:this.videoWidth(),height:this.videoHeight()}});return xo.on({disconnected:()=>jr(xo),error:Ur=>{let Vr=Ur.reason,xs=Ur.prefix;return $r(xo,{reason:Vr,prefix:xs})},qos:_t,iceRestartSuccess:()=>_l(xo),iceRestartFailure:()=>So(xo),iceConnectionStateChange:Ur=>_c(Ur,xo),audioAcquisitionProblem:()=>{yp=!0,this.trigger("audioAcquisitionProblem",{method:"getStats"})},audioFallbackStateChange:Ur=>um.onPeerConnectionStateChange(Object.assign({},Ur,{peerConnection:xo,publishVideo:Dr.publishVideo,stream:this.stream,peerId:Bs(xo).peerId}))}),xo.once("connected",()=>Rp(xo)),new o((Ur,Vr)=>{const xs=eu=>{Vr(eu)};xo.once("error",xs),xo.init(mp,eu=>{if(eu)return Vr(eu);xo.off("error",xs),Ur(xo)})})}),Qu(an)},mu=()=>o.all(Object.keys(Xs).map(Qu)),gu=fn=>mu().then(an=>an.filter(vn=>Bs(vn).remoteSubscriberId===fn)),Qu=fn=>Xs[fn],up=fn=>{const an=Object.keys(Xs).find(vn=>vn.endsWith(`~${fn}`));return Xs[an]},Hp=()=>up("MANTIS"),kp=()=>up("P2P");let Ol=vo(this,{name:Dr.name,publishAudio:Dr.publishAudio,publishVideo:Dr.publishVideo,audioSource:Dr.audioSource,showControls:Dr.showControls,shouldAllowAudio:_h,logAnalyticsEvent:bo});const Yp=()=>{this.off("publishComplete",bs),Ol&&Ol.reset(),Xu.releaseAll(),this.disconnect(),pp=null,Lu(),qr=null,Go&&(Go.destroy(),Go=null),this.session&&this._.unpublishFromSession(this.session,"reset"),Ps.getVideoFilter()&&Tm(),this.id=null,this.stream=null,Vu=!1,this.session=null,os.isDestroyed()||os.set("NotPublishing")},zp=()=>{if(!qr||qr.getVideoTracks().length===0)return!1;const an=["text","detail"].includes(Dr.videoContentHint),vn=Fo&&an,Pt=Xo.env.isChromium&&(Tl||vn);return qr.getVideoTracks().reduce((_t,on)=>_t&&(!on.muted||!!Pt)&&on.enabled&&on.readyState!=="ended",Dr.publishVideo)},dp=()=>!qr||qr.getAudioTracks().length===0?!1:qr.getAudioTracks().length>0&&qr.getAudioTracks().reduce((fn,an)=>fn&&!an.muted&&an.enabled&&an.readyState!=="ended",Dr.publishAudio),bs=fn=>{if(Go&&(Go.audioOnly(!zp()),Go.showPoster(!zp())),Ol&&Ol.setAudioOnly(!zp()&&dp()),this.stream){let an;Ro&&(an=j.CongestionLevels.LOW,Ro=!1),this.stream.setChannelActiveState("audio",dp(),fn),this.stream.setChannelActiveState("video",zp(),fn,an)}else this.off("publishComplete",bs),this.once("publishComplete",bs)},em=(fn,an)=>{let vn=!1;if(typeof fn=="function"?an=fn:vn=fn==="rtcStatsReport",vn?Yo():Up(),vn&&!Fn){const Pt=To.GET_RTC_STATS_REPORT_NOT_SUPPORTED;an(Zo(to.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(oo.getTitleByCode(Pt)),Pt));return}mu().then(Pt=>{if(Pt.length===0){const _t=To.PEER_CONNECTION_NOT_CONNECTED;throw Zo(to.PEER_CONNECTION_NOT_CONNECTED,new Error(oo.getTitleByCode(_t)),_t)}return Pt}).then(Pt=>this.session.sessionInfo.isAdaptiveEnabled?Pt.filter(on=>on.getSourceStreamId()===xl):Pt).then(Pt=>o.all(Pt.map(_t=>Xt(vn?_t.getRtcStatsReport.bind(_t):_t.getStats.bind(_t))().then(on=>({pc:_t,stats:on}))))).then(Pt=>{const _t=pu?pu.getTime():Date.now(),on=Pt.map(Rn=>{let An=Rn.pc,Bn=Rn.stats;const Jn=Bs(An),Yn=Jn.remoteConnectionId,xo=Jn.remoteSubscriberId;return et(Yn.match(/^symphony\./)?{}:{subscriberId:xo,connectionId:Yn},vn?{rtcStatsReport:Bn}:{stats:Nt.normalizeStats(Bn,!1,_t)})});an(null,on)}).catch(an)},am=fn=>em(fn),Fm=fn=>em("rtcStatsReport",fn),Iu=(fn,an)=>{const vn={name:Dr.name||"",streamId:this.streamId,subscriberAudioFallbackEnabled:Dr.subscriberAudioFallbackEnabled,channels:ys,minBitrate:Dr.minVideoBitrate,sourceStreamId:fn,e2ee:this.session._.isE2ee(),publisherAudioFallbackEnabled:Dr.publisherAudioFallbackEnabled,customProperties:{initials:Dr.initials}};this.session._.streamCreate(vn,an)},Em=fn=>{_d||(_d=!0,qr.getAudioTracks().forEach(function(){var an=(0,d.default)(c.default.mark(function vn(Pt){var _t;return c.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:return _t=Pt.clone(),_t.enabled=!1,Rn.prev=2,Rn.next=5,fn.findAndReplaceTrack(Pt,_t);case 5:Rn.next=10;break;case 7:return Rn.prev=7,Rn.t0=Rn.catch(2),Rn.abrupt("return");case 10:Bu[Pt.id]=_t;case 11:case"end":return Rn.stop()}},vn,null,[[2,7]])}));return function(vn){return an.apply(this,arguments)}}()))},cm=fn=>{qr.getAudioTracks().forEach(function(){var an=(0,d.default)(c.default.mark(function vn(Pt){return c.default.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.prev=0,on.next=3,fn.findAndReplaceTrack(Bu[Pt.id],Pt);case 3:on.next=8;break;case 5:return on.prev=5,on.t0=on.catch(0),on.abrupt("return");case 8:delete Bu[Pt.id];case 9:case"end":return on.stop()}},vn,null,[[0,5]])}));return function(vn){return an.apply(this,arguments)}}()),_d=!1},Jp=function(){var fn=(0,d.default)(c.default.mark(function an(){var vn;return c.default.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return Wn=!1,_t.next=3,Hp();case 3:if(vn=_t.sent,!vn){_t.next=17;break}return Do.trigger("sourceStreamIdChanged","P2P"),_t.next=8,nn(pr);case 8:if(!Wn){_t.next=11;break}return Pr.debug("Cancelling stop sending RTP to MANTIS."),_t.abrupt("return");case 11:return Em(vn),_t.next=14,vn.changeMediaDirectionToInactive();case 14:if(!(Xo.env.isFirefox&&Xo.env.version<96)){_t.next=17;break}return _t.next=17,tm();case 17:case"end":return _t.stop()}},an)}));return function(){return fn.apply(this,arguments)}}(),Cm=function(){var fn=(0,d.default)(c.default.mark(function an(){var vn;return c.default.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return Wn=!0,_t.next=3,Hp();case 3:if(vn=_t.sent,!vn){_t.next=10;break}return cm(vn),_t.next=8,vn.changeMediaDirectionToRecvOnly();case 8:Cp&&clearTimeout(Cp),Do.trigger("sourceStreamIdChanged","MANTIS");case 10:case"end":return _t.stop()}},an)}));return function(){return fn.apply(this,arguments)}}(),tm=function(){var fn=(0,d.default)(c.default.mark(function an(){var vn;return c.default.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.next=2,Hp();case 2:vn=_t.sent,vn&&(Cp=setTimeout((0,d.default)(c.default.mark(function on(){return c.default.wrap(function(An){for(;;)switch(An.prev=An.next){case 0:if(xl!=="P2P"){An.next=9;break}return An.next=3,vn.changeMediaDirectionToRecvOnly();case 3:return An.next=5,nn(Vn);case 5:return An.next=7,vn.changeMediaDirectionToInactive();case 7:return An.next=9,tm();case 9:case"end":return An.stop()}},on)})),In));case 4:case"end":return _t.stop()}},an)}));return function(){return fn.apply(this,arguments)}}(),gm=()=>{Sp("Attempt");const fn=vn=>{const Pt=or(vn);this.trigger("streamCreateForP2PComplete",Pt),Sp("Failure",{reason:Pt.message})};if(!this.session){Sp("Failure",{reason:"Not connected to the session."});return}const an=setTimeout(()=>{Sp("Failure",{reason:"Timeout"})},Pl);this.once("streamCreateForP2PComplete",()=>{clearTimeout(an)}),Pr.debug(`streamCreateWithSource: send a message to RUMOR for creating the stream with the sourceStreaId P2P and stream ${this.streamId}`),Iu("P2P",vn=>{vn?fn(vn):this.trigger("streamCreateForP2PComplete")})},o1=function(){var fn=(0,d.default)(c.default.mark(function an(){return c.default.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(xl==="P2P"){Pt.next=2;break}return Pt.abrupt("return");case 2:if(Gp("Attempt"),Do.session){Pt.next=6;break}return Gp("Failure",{reason:"Not connected to the session."}),Pt.abrupt("return");case 6:if(Do.streamId){Pt.next=9;break}return Gp("Failure",{reason:"No streamId available"}),Pt.abrupt("return");case 9:return Pt.next=11,Cm();case 11:return Do.session._.streamDestroy(Do.streamId,"P2P"),Pt.t0=Do,Pt.next=15,kp();case 15:Pt.t1=Pt.sent,Pt.t0._removePeerConnection.call(Pt.t0,Pt.t1),Gp("Success"),Do.trigger("streamDestroyForP2PComplete");case 19:case"end":return Pt.stop()}},an)}));return function(){return fn.apply(this,arguments)}}();this.publish=fn=>(Pr.debug("OT.Publisher: publish"),(os.isAttemptingToPublish()||os.isPublishing())&&Yp(),os.set("GetUserMedia"),Dr.style&&this.setStyle(Dr.style,null,!0),Dr.classNames="OT_root OT_publisher",io.onLoad(()=>{Pr.debug("OT.Publisher: publish: environment loaded"),Go=new Pu(fn,Object.assign({},Dr,{widgetType:"publisher"})),_h&&On({publisher:this,widgetView:Go}),Go.on("error",Xr),this.id=Go.domId(),this.element=Go.domElement,this.element&&Ol&&Ol.init(Go),Go.on("videoDimensionsChanged",(an,vn)=>{Dr.publishVideo&&(this.stream&&this.stream.setVideoDimensions(vn.width,vn.height),this.dispatchEvent(new Wr.VideoDimensionsChangedEvent(this,an,vn)))}),Go.on("mediaStopped",an=>{const vn=new Wr.MediaStoppedEvent(this,an);if(this.dispatchEvent(vn),!vn.isDefaultPrevented()){if(an){const Pt=String(an.kind).toLowerCase();Pt==="audio"?lm():Pt==="video"?ym():Pr.warn(`Track with invalid kind has ended: ${an.kind}`);return}this.session?this._.unpublishFromSession(this.session,"mediaStopped"):this.destroy("mediaStopped")}}),Go.on("videoElementCreated",an=>{const vn=new Wr.VideoElementCreatedEvent(an);this.dispatchEvent(vn)}),Pp().catch(Xl).then(function(){var an=(0,d.default)(c.default.mark(function vn(Pt){var _t;return c.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:return gp=su.audioDevices,op=su.videoDevices,_t=!!Dr.videoFilter,_t&&(vu=cr(Pt,op)),Rn.next=6,jn(Pt);case 6:return Dr.publishVideo||Do._toggleVideo(Dr.publishVideo,_p()),!Tl&&!Fo&&!_t&&(vu=cr(Pt,op),Dr.publishVideo&&fm(vu)),Rn.abrupt("return",yn().catch(An=>{if(!(An instanceof Et))throw An}).then(()=>{qp(),os.isDestroyed()||(Do.trigger("initSuccess"),Do.trigger("loaded",Do))},An=>{Pr.error(`OT.Publisher.publish failed to bind video: ${An}`),lp(An)}));case 9:case"end":return Rn.stop()}},vn)}));return function(vn){return an.apply(this,arguments)}}())}),this),this._setScalableValues=function(){var fn=(0,d.default)(c.default.mark(function an(vn,Pt){var _t,on,Rn;return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:return Bn.next=2,mu().then(Jn=>Jn[0].getSenders().filter(Yn=>Yn.track.kind==="video"));case 2:return _t=Bn.sent,on=_t[0],Rn=on.getParameters(),Rn.encodings.forEach((Jn,Yn)=>{Jn[vn]=Pt[Yn]}),Bn.next=8,on.setParameters(Rn);case 8:case"end":return Bn.stop()}},an)}));return function(an,vn){return fn.apply(this,arguments)}}(),this._setScalableFramerates=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt;return c.default.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:if(Pt=vm(vn),!(Pt&&Km(Pt))){on.next=4;break}return on.next=4,Do._setScalableValues("maxFramerate",Pt);case 4:case"end":return on.stop()}},an)}));return function(an){return fn.apply(this,arguments)}}(),this._setScalableVideoLayers=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt;return c.default.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:if(Pt=vm(vn),!(Pt&&zm(Pt))){on.next=4;break}return on.next=4,Do._setScalableValues("scaleResolutionDownBy",Pt);case 4:case"end":return on.stop()}},an)}));return function(an){return fn.apply(this,arguments)}}();const Km=fn=>{let an=0;return fn.every(vn=>vn!==15&&vn!==30||vn<an?!1:(an=vn,!0))},zm=fn=>{let an=17;return fn.every(vn=>vn<1||vn>=an?!1:(an=vn,!0))},vm=fn=>{let an;if(typeof fn!="string")return an;const vn=fn.split(":");return vn.length===0||vn.length>3||!vn.every(Pt=>!isNaN(Pt))||(an=vn.map(Pt=>parseInt(Pt,10)).reverse()),an},Qp=fn=>qr&&qr[`get${Tt(fn)}Tracks`]().length>0&&qr[`get${Tt(fn)}Tracks`]().every(an=>an.readyState!=="ended"),lm=fn=>{const an=Qp("audio")&&Dr.publishAudio;Ol&&Ol.setMuted(!an),pp&&pp.muted(!an),Cn&&Cn.originalTrack&&(Cn.originalTrack.enabled=an),bs(fn)};this.publishAudio=fn=>{bo("publishAudio","Attempt",{publishAudio:fn}),Dr.publishAudio=fn;try{lm(),bo("publishAudio","Success",{publishAudio:fn})}catch(an){bo("publishAudio","Failure",{message:an.message})}return this},this.publishCaptions=fn=>{bo("publishCaptions","Attempt");try{El.dispatchEvent(new Wr.PublisherCaptionsEnabled(fn)),this.stream.setChannelActiveState("data",fn),bo("publishCaptions","Success")}catch(an){bo("publishCaptions","Failure",{message:an.message})}};let $p,Bp=!1;const ym=()=>{const fn=Qp("video")&&Dr.publishVideo;if(Ct.name==="Chrome"&&Ct.version>=69&&(0,d.default)(c.default.mark(function an(){var vn,Pt;return c.default.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return $p&&$p.cancel(),$p=new bt,vn=$p,on.next=5,mu();case 5:Pt=on.sent,vn.isCanceled()||Pt.forEach(Rn=>{Fs(Rn,fn)});case 7:case"end":return on.stop()}},an)}))(),Fo&&Ps){const an=Ps.getOriginalVideoTrack();an&&(an.enabled=fn)}if(Fo&&pn){const an=pn.originalTrack;an&&(an.enabled=fn)}qr&&qr.getVideoTracks().forEach(an=>{an.enabled=fn,an.isCreatedCanvas&&(an.enabled=!1)}),bs()},Tm=function(){var fn=(0,d.default)(c.default.mark(function an(){var vn;return c.default.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return vn=Ps.getOriginalVideoTrack(),_t.prev=1,_t.next=4,Ps.destroy();case 4:_t.next=9;break;case 6:_t.prev=6,_t.t0=_t.catch(1),Pr.warn(`Error cleaning up mediaProcessor: ${_t.t0}`);case 9:vn.stop();case 10:case"end":return _t.stop()}},an,null,[[1,6]])}));return function(){return fn.apply(this,arguments)}}(),Rm=fn=>!xu&&!pn&&fn===_m(),Jm=(fn,an)=>xu||pn?!0:fn?vu!==an:an!==void 0;let vu,xu;this._toggleVideo=tn(function(){var fn=(0,d.default)(c.default.mark(function an(vn,Pt){var _t,on,Rn,An,Bn,Jn,Yn,xo;return c.default.wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:if(!(Tl||Fo||Bp)){Vr.next=2;break}return Vr.abrupt("return");case 2:return Vr.next=4,Sm();case 4:if(on=Vr.sent,Rn=bm(),Rn){Vr.next=8;break}throw Zo(to.NOT_SUPPORTED,new Error("Publisher._toggleVideo cannot toggleVideo when you have no video source."));case 8:if(An=(_t=on.find(xs=>xs.label===Rn.label))==null?void 0:_t.deviceId,Jm(vn,An)){Vr.next=11;break}return Vr.abrupt("return");case 11:if(Rn.readyState!=="ended"){Vr.next=14;break}return Bp=!0,Vr.abrupt("return");case 14:if(vn&&Xo.env.isAndroid&&Xo.env.isChrome&&Rn&&Rn.stop&&Rn.stop(),vn){Vr.next=31;break}Vr.prev=16,Bn=$n(Pt),Vr.next=23;break;case 20:return Vr.prev=20,Vr.t0=Vr.catch(16),Vr.abrupt("return");case 23:if(An&&(vu=An),fm(Bn.label),Jn=Ps.getVideoFilter(),!Jn){Vr.next=30;break}return xu=Jn,Vr.next=30,Tm();case 30:pn&&(pn.destroy(),pn.stopOriginalTrack());case 31:if(!(vu&&on.findIndex(xs=>xs.deviceId===vu)===-1)){Vr.next=33;break}throw Zo(to.NO_DEVICES_FOUND,new Error("Previous device no longer available - deviceId not found"));case 33:if(El.emit("streamDestroy"),!vn){Vr.next=64;break}if(!Rm(vu)){Vr.next=37;break}return Vr.abrupt("return");case 37:return Vr.prev=37,Vr.next=40,dm(vu);case 40:Bn=Vr.sent,Vr.next=47;break;case 43:throw Vr.prev=43,Vr.t1=Vr.catch(37),Pr.error(`Error getting new track for current device(${vu}): ${Vr.t1}`),Vr.t1;case 47:if(Bn){Vr.next=50;break}return Pr.error("Failed to enable video. It was not possible to get a new track from the camera"),Vr.abrupt("return");case 50:if(!xu){Vr.next=59;break}return Yn=Ps.getOriginalVideoTrack(),Vr.next=54,Ps.setVideoFilter(xu);case 54:return Vr.next=56,Ps.setMediaStream(qr);case 56:return Vr.next=58,Ps.setVideoTrack(Bn);case 58:Bn=Vr.sent;case 59:if(!pn){Vr.next=64;break}return Yn=pn.originalTrack,Vr.next=63,pn.setTrack(Bn);case 63:Bn=Vr.sent;case 64:return Vr.prev=64,Vr.next=67,nm(Rn,Bn);case 67:(xo=Yn)==null||xo.stop(),Vr.next=73;break;case 70:throw Vr.prev=70,Vr.t2=Vr.catch(64),Vr.t2;case 73:case"end":return Vr.stop()}},an,null,[[16,20],[37,43],[64,70]])}));return function(an,vn){return fn.apply(this,arguments)}}());const Im=()=>{var fn,an;um.reset(),(fn=Ol)==null||fn.videoDisabledIndicator.disableVideo(!1),(an=Ol)==null||an.videoDisabledIndicator.setWarning(!1)},s1=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt,_t;return c.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:(Pt=Ol)==null||Pt.videoDisabledIndicator.disableVideo(!1),(_t=Ol)==null||_t.videoDisabledIndicator.setWarning(!1),vn===b.default.SUSPENDED_VIDEO?Do.trigger("videoEnabled",{reason:"quality"}):Do.trigger("videoDisableWarningLifted");case 3:case"end":return Rn.stop()}},an)}));return function(vn){return fn.apply(this,arguments)}}(),Qm=()=>{if(Dr.publishVideo){var fn;(fn=Ol)==null||fn.videoDisabledIndicator.setWarning(!0)}this.trigger("videoDisableWarning")},$m=function(){var fn=(0,d.default)(c.default.mark(function an(){var vn;return c.default.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:Dr.publishVideo&&((vn=Ol)==null||vn.videoDisabledIndicator.disableVideo(!0)),Do.trigger("videoDisabled",{reason:"quality"});case 2:case"end":return _t.stop()}},an)}));return function(){return fn.apply(this,arguments)}}();let um;if(Dr.publisherAudioFallbackEnabled){um=gr({getAllPeerConnections:mu});const fn={[b.default.ACTIVE_VIDEO]:s1,[b.default.ACTIVE_VIDEO_WITH_WARNING]:Qm,[b.default.SUSPENDED_VIDEO]:$m};um.on("stateChange",an=>{let vn=an.previousState,Pt=an.state;try{fn[Pt](vn)}catch(_t){throw Pr.error(`Audio fallback error: ${_t}`),_t}})}this.publishVideo=fn=>{if(Dr.publishVideo===fn)return this;bo("publishVideo","Attempt",{publishVideo:fn});const an=_p();Dr.publishVideo=fn,Dr.publisherAudioFallbackEnabled&&(Im(),Ro=!0);try{this._toggleVideo(Dr.publishVideo,an),ym(),bo("publishVideo","Success",{publishVideo:fn})}catch(vn){bo("publishVideo","Failure",{message:vn.message})}return this},this.setVideoContentHint=fn=>Er(qr,fn),this.getVideoContentHint=()=>Zr(qr),this.destroy=function(fn,an){return os.isAttemptingToPublish()&&this.session&&Du("Cancel",{reason:"destroy"}),os.isDestroyed()?this:(os.set("Destroyed"),Yp(),su&&(su.off(),su=null),Ol&&(Ol.destroy(),Ol=null),El&&(El.off(),El=null),an!==!0&&this.dispatchEvent(new Wr.DestroyedEvent(Jt.PUBLISHER_DESTROYED,this,fn)),this.off(),pn&&(pn.destroy(),pn.stopOriginalTrack()),Cn&&(Cn.destroy(),Cn.stopOriginalTrack()),this)},this.disconnect=()=>{Object.keys(Xs).forEach(fn=>{const an=Qu(fn);delete Xs[fn],an.then(vn=>this._removePeerConnection(vn))}),ys.length=0},this.processMessage=(fn,an,vn)=>{const Pt=$(vn,"params.subscriber",an).replace(/^INVALID-STREAM$/,an),_t=$(vn,"content.peerId"),on=$(vn,"content.sourceStreamId","MANTIS"),Rn=`${Pt}~${_t}~${on}`;Pr.debug(`OT.Publisher.processMessage: Received ${fn} from ${an} for ${Rn}`),Pr.debug(vn);const An=Qu(Rn),Bn=()=>{const Yn=Mr({socket:this.session._.getSocket(),uri:vn.uri,content:{peerId:_t,sourceStreamId:on}});Ip({peerConnectionId:Rn,send:Yn,log:function(xs,eu,so,Al,rm){Al===void 0&&(Al={});const pm=Object.assign({peerId:_t,sourceStreamId:po(on)},Al);return bo(xs,eu,so,pm,rm)},logQoS:Vr=>{on===xl&&lo(Object.assign({},Vr,{peerId:_t,remoteConnectionId:an,sourceStreamId:on}))},sourceStreamId:on}).then(Vr=>(Yu(Vr,{remoteConnectionId:an,remoteSubscriberId:Pt,peerId:_t,sourceStreamId:on,peerConnectionId:Rn}),Vr.processMessage(fn,vn),null)).catch(Vr=>{Pr.error("OT.Publisher failed to create a peerConnection",Vr)})},Jn=this.session.sessionInfo.isAdaptiveEnabled;switch(fn){case"unsubscribe":this._removeSubscriber(Pt);break;default:if(An)An.then(Yn=>Yn.processMessage(fn,vn));else{if(Jn&&kp())return;Bn()}break}},this.getImgData=function(){if(!Vu)return Pr.error("OT.Publisher.getImgData: Cannot getImgData before the Publisher is publishing."),null;const fn=Go&&Go.video();return fn?fn.imgData():null};const a1=fn=>{Lu(),qr=fn,El.emit("streamChange"),pp=new fu(qr,!Dr.publishAudio)},c1=fn=>{fn.getSenders().forEach(an=>{if(an.track.kind==="audio"&&qr.getAudioTracks().length)return an.replaceTrack(qr.getAudioTracks()[0]);if(an.track.kind==="video"&&qr.getVideoTracks().length)return an.replaceTrack(qr.getVideoTracks()[0])})},l1=function(an){return an===void 0&&(an=c1),mu().then(vn=>{const Pt=[];return vn.map(an),o.all(Pt)})};{let fn=0;const an=function(){var vn=(0,d.default)(c.default.mark(function Pt(){var _t,on,Rn,An,Bn;return c.default.wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:if(!(Xo.env.isLegacyEdge||!Fu.RTCRtpSender||typeof Fu.RTCRtpSender.prototype.replaceTrack!="function")){Yn.next=2;break}throw Zo(to.UNSUPPORTED_BROWSER,new Error("Publisher#cycleVideo is not supported in your browser."),To.UNABLE_TO_PUBLISH);case 2:if(!(Fo||Tl)){Yn.next=4;break}throw Zo(to.NOT_SUPPORTED,new Error("Publisher#cycleVideo: The publisher is not using a camera video source"));case 4:if(_t=bm(),_t){Yn.next=7;break}throw Zo(to.NOT_SUPPORTED,new Error("Publisher#cycleVideo cannot cycleVideo when you have no video source."));case 7:return fn+=1,Yn.next=10,Sm();case 10:if(on=Yn.sent,Rn=on.filter(xo=>xo.deviceId!==vu).length>0,Rn){Yn.next=14;break}return Yn.abrupt("return",vu);case 14:for(;on[fn%on.length].deviceId===vu;)fn+=1;return El.emit("streamDestroy"),An=on[fn%on.length],Bn=An.deviceId,Yn.next=20,_g(Bn);case 20:return Yn.abrupt("return",vu);case 21:case"end":return Yn.stop()}},Pt)}));return function(){return vn.apply(this,arguments)}}();this.cycleVideo=tn((0,d.default)(c.default.mark(function vn(){var Pt;return c.default.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.prev=0,on.next=3,an();case 3:Pt=on.sent,on.next=10;break;case 6:throw on.prev=6,on.t0=on.catch(0),Pr.error(`Publisher#cycleVideo: could not cycle video: ${on.t0}`),on.t0;case 10:return on.abrupt("return",{deviceId:Pt});case 11:case"end":return on.stop()}},vn,null,[[0,6]])})))}const nm=function(){var fn=(0,d.default)(c.default.mark(function an(vn,Pt){var _t,on,Rn;return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:return Bn.next=2,mu();case 2:return _t=Bn.sent,Bn.next=5,o.all(_t.map(function(){var Jn=(0,d.default)(c.default.mark(function Yn(xo){return c.default.wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:return Vr.next=2,xo.findAndReplaceTrack(vn,Pt);case 2:xo.setP2PMaxBitrate();case 3:case"end":return Vr.stop()}},Yn)}));return function(Yn){return Jn.apply(this,arguments)}}()));case 5:if(qr.removeTrack(vn),qr.addTrack(Pt),vn&&vn.stop){try{on=Pt instanceof MediaStreamTrackGenerator||Object.getPrototypeOf(Pt).toString().includes("MediaStreamTrackGenerator")}catch{on=!1}on||vn.stop()}(Xo.env.name==="Firefox"||Xo.env.name==="Safari")&&(Do.videoElement().srcObject=null,Do.videoElement().srcObject=qr),Rn=Go&&Go.video(),Rn&&Rn.refreshTracks(),El.emit("streamChange"),ym();case 13:case"end":return Bn.stop()}},an)}));return function(vn,Pt){return fn.apply(this,arguments)}}(),dm=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt,_t,on,Rn,An,Bn,Jn,Yn;return c.default.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return _t=_m(),fm(vn),on=ct(Ql),on.audioSource=null,on.videoSource=vn,su=Ms(on,"OT.Publisher.getTrackFromDeviceId",()=>os&&os.isDestroyed()),su.on({accessDialogOpened:cp,accessDialogClosed:zu}),Rn=su,An=Rn.getUserMedia,Ur.prev=8,Ur.next=11,An();case 11:Bn=Ur.sent,Ur.next=18;break;case 14:throw Ur.prev=14,Ur.t0=Ur.catch(8),Pr.error(Ur.t0),Ur.t0;case 18:return Jn=(Pt=Bn)==null?void 0:Pt.getVideoTracks(),Yn=Jn[0],Yn||fm(_t),Ur.abrupt("return",Yn);case 21:case"end":return Ur.stop()}},an,null,[[8,14]])}));return function(vn){return fn.apply(this,arguments)}}(),bm=()=>qr.getVideoTracks()[0],_m=()=>$l,fm=fn=>{$l=fn},Sm=function(){var fn=(0,d.default)(c.default.mark(function an(){var vn,Pt;return c.default.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,eo.shouldAskForDevices();case 2:if(vn=on.sent,Pt=vn.videoDevices,!(!vn.video||!Pt||!Pt.length)){on.next=6;break}throw Zo(to.NO_DEVICES_FOUND,new Error("No video devices available"),To.UNABLE_TO_PUBLISH);case 6:return on.abrupt("return",Pt);case 7:case"end":return on.stop()}},an)}));return function(){return fn.apply(this,arguments)}}(),hm=function(){var fn=(0,d.default)(c.default.mark(function an(vn,Pt){var _t,on,Rn;return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:return Bn.next=2,mu();case 2:return _t=Bn.sent,Bn.next=5,o.all(_t.map(Jn=>Jn.findAndReplaceTrack(vn,Pt)));case 5:Pt&&qr.addTrack(Pt),vn&&qr.removeTrack(vn),on=Go&&Go.video(),on&&on.refreshTracks(),Ol&&(Pt&&!vn&&Ol.addAudioTrack(),vn&&!Pt&&Ol.removeAudioTrack());try{Rn=Pt instanceof MediaStreamTrackGenerator||Object.getPrototypeOf(Pt).toString().includes("MediaStreamTrackGenerator")}catch{Rn=!1}vn&&vn.stop&&!Rn&&vn.stop(),Pt&&(lm(),pp=new fu(qr,!Dr.publishAudio)),El.emit("streamChange"),bs();case 15:case"end":return Bn.stop()}},an)}));return function(vn,Pt){return fn.apply(this,arguments)}}(),xm=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt,_t;return c.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:return Pt=vn.getSettings().deviceId,Rn.prev=1,Rn.next=4,Do.setAudioSource(Pt);case 4:_t=qr.getAudioTracks()[0],_t&&(_t.onmute=()=>wm(_t),_t.onunmute=()=>Om(_t)),Rn.next=11;break;case 8:Rn.prev=8,Rn.t0=Rn.catch(1),Pr.error(Rn.t0);case 11:case"end":return Rn.stop()}},an,null,[[1,8]])}));return function(vn){return fn.apply(this,arguments)}}(),wm=fn=>{let an=!1;Dr.publishVideo&&document.hidden&&(an=!0,this.publishVideo(!1));const vn=function(){var Pt=(0,d.default)(c.default.mark(function _t(){return c.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:if(document.hidden){Rn.next=5;break}return Rn.next=3,xm(fn);case 3:an&&Do.publishVideo(!0),document.removeEventListener("visibilitychange",vn);case 5:case"end":return Rn.stop()}},_t)}));return function(){return Pt.apply(this,arguments)}}();document.addEventListener("visibilitychange",vn)},Om=fn=>{var an;dp()&&(zp()?this.videoElement().pause():xm(fn)),this==null||(an=this.session)==null||an.trigger("gsmCallEnded")},Am=!(Xo.env.isLegacyEdge||!Fu.RTCRtpSender||typeof Fu.RTCRtpSender.prototype.replaceTrack!="function"),u1=()=>Zo(to.UNSUPPORTED_BROWSER,new Error("Publisher#setAudioSource is not supported in your browser.")),Zm=()=>Zo(to.CANCEL,new Error("Operation did not succeed due to a new request."));let Vm;const qm=()=>(Vm&&Vm.cancel(),Vm=new bt,Vm),Xm=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt,_t,on,Rn,An,Bn,Jn,Yn,xo,Ur,Vr,xs;return c.default.wrap(function(so){for(;;)switch(so.prev=so.next){case 0:if(Am){so.next=2;break}throw u1();case 2:if(Pt=qm(),_t=Al=>{if(Pt.isCanceled())throw Al.getTracks(rm=>rm.stop()),Zm();return Xm(Al.getAudioTracks()[0])},on=Do.getAudioSource(),on){so.next=7;break}throw Zo(to.NOT_SUPPORTED,new Error("Publisher#setAudioSource cannot add an audio source when you started without one."));case 7:if(!(vn instanceof MediaStreamTrack)){so.next=26;break}if(!Pt.isCanceled()){so.next=10;break}throw Zm();case 10:if(!Cn){so.next=23;break}return so.prev=11,so.next=14,Cn.setTrack(vn);case 14:return Rn=so.sent,so.next=17,hm(on,Rn);case 17:return so.abrupt("return",so.sent);case 20:so.prev=20,so.t0=so.catch(11),Pr.error(`Error setting track on audioMediaProcessorConnector: ${so.t0}`);case 23:return so.abrupt("return",hm(on,vn));case 26:if(typeof vn!="string"){so.next=73;break}return An=ct(Ql),An.audioSource=vn,An.videoSource=null,su=Ms(An,"OT.Publisher.setAudioSource",()=>Pt.isCanceled()||os&&os.isDestroyed()),su.on({accessDialogOpened:cp,accessDialogClosed:zu}),Bn=on.label,Jn=on.getConstraints&&on.getSettings().deviceId||void 0,on&&on.stop(),Yn=su,xo=Yn.getUserMedia,so.prev=36,so.t1=_t,so.next=40,xo();case 40:return so.t2=so.sent,so.next=43,(0,so.t1)(so.t2);case 43:return so.abrupt("return",so.sent);case 46:if(so.prev=46,so.t3=so.catch(36),!Pt.isCanceled()){so.next=50;break}throw Zm();case 50:if(Ur=ct(Ql),Ur.videoSource=null,Ur.audioSource=Jn,!(!Ur.audioSource&&Bn)){so.next=60;break}return so.next=56,Mn();case 56:if(Vr=so.sent.find(Al=>Al.label===Bn),!Pt.isCanceled()){so.next=59;break}throw Zm();case 59:Vr&&(Ur.audioSource=Vr.deviceId);case 60:if(Ur.audioSource){so.next=63;break}throw so.t3.message+=" (could not determine previous audio device)",Zo(to.NOT_FOUND,so.t3);case 63:return su=Ms(Ur,"OT.Publisher.setAudioSource",()=>Pt.isCanceled()||os&&os.isDestroyed()),so.next=66,su.getUserMedia().catch(Al=>{throw Al.message+=" (could not obtain previous audio device)",Al});case 66:return xs=so.sent,so.next=69,_t(xs);case 69:throw so.t3.message+=" (reverted to previous audio device)",so.t3;case 71:so.next=74;break;case 73:throw Zo(to.INVALID_PARAMETER,new Error("Invalid parameter passed to OT.Publisher.setAudioSource(). Expected string or MediaStreamTrack."));case 74:case"end":return so.stop()}},an,null,[[11,20],[36,46]])}));return function(vn){return fn.apply(this,arguments)}}();this.setAudioSource=Xm,this.getAudioSource=()=>qr&&qr.getAudioTracks().length>0?qr.getAudioTracks()[0]:null;const Dm=function(){var fn=(0,d.default)(c.default.mark(function vn(Pt){var _t,on,Rn,An,Bn;return c.default.wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:if(_t=Zo(to.INVALID_VIDEO_SOURCE,new Error("Invalid video source. Video source must be a valid video input deviceId"),1041),on=Zo(to.SET_VIDEO_SOURCE_FAILURE,new Error("You cannot reset the video source on a publisher that does not currently use a camera source."),1040),!(Xo.env.isLegacyEdge||!Fu.RTCRtpSender||typeof Fu.RTCRtpSender.prototype.replaceTrack!="function")){Yn.next=4;break}throw Zo(to.UNSUPPORTED_BROWSER,new Error("setVideoSource is not supported in your browser."),To.UNABLE_TO_PUBLISH);case 4:if(typeof Pt=="string"){Yn.next=6;break}throw _t;case 6:if(Rn=!qr||qr.getVideoTracks().length===0,!(Fo||Tl||Rn)){Yn.next=9;break}throw on;case 9:return Yn.next=11,Mn();case 11:if(An=Yn.sent,Bn=An.find(xo=>xo.kind==="videoInput"&&xo.deviceId===Pt),Bn){Yn.next=15;break}throw _t;case 15:return Yn.next=17,_g(Pt);case 17:case"end":return Yn.stop()}},vn)}));function an(vn){return fn.apply(this,arguments)}return an}();this.setVideoSource=Dm;const _g=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt,_t,on,Rn,An,Bn;return c.default.wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:if(_t=vu,vu=vn,Dr.publishVideo){Yn.next=4;break}return Yn.abrupt("return");case 4:if(on=bm(),!(Dr.publishVideo&&Xo.env.isAndroid&&(Xo.env.isChrome||Xo.env.isFirefox))){Yn.next=12;break}if(!xu){Yn.next=11;break}return Rn=xu,Yn.next=10,Tm();case 10:xu=null;case 11:on&&on.stop&&on.stop();case 12:if(!Rm(vn)){Yn.next=14;break}return Yn.abrupt("return");case 14:return Yn.prev=14,Yn.next=17,dm(vn);case 17:An=Yn.sent,Yn.next=25;break;case 20:throw Yn.prev=20,Yn.t0=Yn.catch(14),vu=_t,Pr.error(Yn.t0),Yn.t0;case 25:if(An){Yn.next=28;break}return Pr.warn("Unable to aquire video track. Moving to next device."),Yn.abrupt("return");case 28:if(!xu){Yn.next=33;break}return Bn=Ps.getOriginalVideoTrack(),Yn.next=32,Ps.setVideoTrack(An);case 32:An=Yn.sent;case 33:if(!pn){Yn.next=38;break}return Bn=pn.originalTrack,Yn.next=37,pn.setTrack(An);case 37:An=Yn.sent;case 38:return Yn.next=40,nm(on,An);case 40:if(!Rn){Yn.next=43;break}return Yn.next=43,Do.applyVideoFilter(Rn);case 43:(Pt=Bn)==null||Pt.stop(),Dr.publishVideo&&(Bp=!1);case 45:case"end":return Yn.stop()}},an,null,[[14,20]])}));return function(vn){return fn.apply(this,arguments)}}();this.getVideoSource=()=>{const fn={},an=!qr||qr.getVideoTracks().length===0;return fn.track=qr&&Dr.publishVideo&&qr.getVideoTracks()[0]||null,fn.deviceId=!Tl&&!Fo&&vu?vu:null,Fo?fn.type="custom":Tl?fn.type="screen":an?fn.type=null:fn.type="camera",fn},this._={privateEvents:El,setIceConfig(fn){return(0,d.default)(c.default.mark(function an(){var vn;return c.default.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.next=2,mu();case 2:vn=_t.sent,vn.forEach(on=>on.setIceConfig(fn));case 4:case"end":return _t.stop()}},an)}))()},publishToSession:(fn,an)=>{an&&(js=an),Ho=fn,this.session=fn;const vn=ht();Fl=vn,this.streamId=vn,Du("Attempt",{dataChannels:Dr.channels,properties:$t(Dr)});const Pt=new o((An,Bn)=>{if(Vu){An();return}this.once("initSuccess",An),this.once("destroyed",Jn=>{let Yn=Jn.reason,xo="";Yn&&(xo=` Reason: ${Yn}`),Bn(new Error(`Publisher destroyed before it finished loading.${xo}`))})});Pr.debug("publishToSession: waiting for publishComplete, which is triggered by stream#created from rumor");const _t=new o((An,Bn)=>{this.once("publishComplete",Jn=>{if(Jn){Bn(Jn);return}this._setScalableFramerates(Dr.scalableFramerates),this._setScalableVideoLayers(Dr.scalableVideoLayers),this.stream&&(this.stream.setChannelActiveState("audio",dp()),this.stream.setChannelActiveState("video",zp())),Pr.debug("publishToSession: got publishComplete"),An()})}),on=An=>{const Bn=or(An);throw Du("Failure",{},{failureReason:"Publish",failureCode:Bn.code,failureMessage:Bn.message}),os.isAttemptingToPublish()&&this.trigger("publishComplete",Bn),oo.handleJsException({errorMsg:An.message,code:Bn.code,target:this,error:An,analytics:js}),Bn};Pr.debug("publishToSession: waiting for loaded");const Rn=Pt.then(()=>fn._.getVideoCodecsCompatible(qr)).then(An=>{if(Pr.debug("publishToSession: loaded"),!this.session)return;const Bn=setTimeout(()=>{Hn(fn)},Pl);this.once("publishComplete",()=>{clearTimeout(Bn)}),os.set("PublishingToSession");const Jn=An&&Go&&Go.video(),Yn=qr.getVideoTracks().length>0,xo=Dr.videoSource!==null&&Dr.videoSource!==!1;Jn&&Yn&&xo&&ys.push(new hu({id:"video1",type:"video",active:Dr.publishVideo,orientation:Zp.ROTATED_NORMAL,frameRate:Dr.frameRate,width:this.videoWidth(),height:this.videoHeight(),e2ee:fn._.isE2ee(),source:(()=>Tl?"screen":Fo?"custom":"camera")(),fitMode:Dr.fitMode}));const Ur=qr.getAudioTracks().length>0,Vr=Dr.audioSource!==null&&Dr.audioSource!==!1;return Vr&&Ur&&ys.push(new hu({id:"audio1",type:"audio",active:Dr.publishAudio})),Vr&&Ur&&ys.push(new hu({id:"caption1",type:"data",active:Dr.publishCaptions})),this._.streamChannels=ys,Pr.debug("publishToSession: creating rumor stream id"),new o((xs,eu)=>{Iu(null,(so,Al,rm)=>{if(so){eu(on(so));return}xs({streamId:Al,message:rm})})})}).then(An=>{if(An===void 0)return;const Bn=An.streamId,Jn=An.message;if(Pr.debug("publishToSession: rumor stream id created:",Bn,"(this is different from stream#created, which requires media to actually be flowing for mantis sessions)"),Bn!==vn)throw new Error("streamId response does not match request");this.streamId=Bn,mp=Zs(Jn)}).catch(An=>{throw this.trigger("publishComplete",An),An});return o.all([Rn,_t])},unpublishFromSession:(fn,an)=>{if(!this.session||fn.id!==this.session.id){if(an==="unpublished"){const vn=this.session&&this.session.id||"no session";Pr.warn(`The publisher ${Dp} is trying to unpublish from a session ${fn.id} it is not attached to (it is attached to ${vn})`)}return this}if(fn.isConnected()&&(this.stream||os.isAttemptingToPublish())&&fn._.streamDestroy(this.streamId),Xu.releaseAll(),this.disconnect(),os.isAttemptingToPublish()){Du("Cancel",{reason:"unpublish"});const vn=()=>{switch(an){case"mediaStopped":return"The video element fired the ended event, indicating there is an issue with the media";case"unpublished":return"The publisher was unpublished before it could be published";case"reset":return"The publisher was reset";default:return`The publisher was destroyed due to ${an}`}},Pt=new Error(vn());this.trigger("publishComplete",Zo(an==="mediaStopped"?to.MEDIA_ENDED:to.CANCEL,Pt))}return this.session=null,bo("unpublish","Success"),this._.streamDestroyed(an),this},unpublishStreamFromSession:(fn,an,vn)=>!Fl||fn.id!==Fl?(Pr.warn(`The publisher ${Dp} is trying to destroy a stream ${fn.id} that is not attached to it (it has ${Fl||"no stream"} attached to it)`),this):this._.unpublishFromSession(an,vn),streamDestroyed:fn=>{["reset"].indexOf(fn)<0&&(os.isDestroyed()||os.set("MediaBound"));const an=new Wr.StreamEvent("streamDestroyed",this.stream,fn,!0);this.dispatchEventOnce(an,this.streamId),an.isDefaultPrevented()||this.destroy()},archivingStatus(fn){return Ol&&Ol.setArchivingStatus(fn),fn},webRtcStream(){return qr},switchTracks(){return(0,d.default)(c.default.mark(function fn(){var an;return c.default.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.prev=0,Pt.next=3,Pp().catch(Xl);case 3:an=Pt.sent,Pt.next=10;break;case 6:throw Pt.prev=6,Pt.t0=Pt.catch(0),Pr.error(`OT.Publisher.switchTracks failed to getUserMedia: ${Pt.t0}`),Pt.t0;case 10:a1(an),Pt.prev=11,yn(),Pt.next=21;break;case 15:if(Pt.prev=15,Pt.t1=Pt.catch(11),!(Pt.t1 instanceof Et)){Pt.next=19;break}return Pt.abrupt("return");case 19:throw Pr.error("Error while binding video",Pt.t1),Pt.t1;case 21:Pt.prev=21,l1(),Pt.next=29;break;case 25:throw Pt.prev=25,Pt.t2=Pt.catch(21),Pr.error("Error replacing tracks",Pt.t2),Pt.t2;case 29:case"end":return Pt.stop()}},fn,null,[[0,6],[11,15],[21,25]])}))()},getDataChannel(fn,an,vn){const Pt=Qu(Object.keys(Xs)[0]);if(!Pt){vn(new Xo.Error("Cannot create a DataChannel before there is a subscriber."));return}Pt.then(_t=>{_t.getDataChannel(fn,an,vn)})},iceRestart(fn){fn===void 0&&(fn=!1),mu().then(an=>{an.forEach(vn=>{const Pt=Bs(vn),_t=Pt.remoteConnectionId;jp("Attempt",{remoteConnectionId:_t}),Pr.debug("Publisher: ice restart attempt"),vn.iceRestart(),fn&&vn.generateOffer()})})},getState(){return os},demoOnlyCycleVideo:this.cycleVideo,testOnlyGetFramesEncoded(){return(0,d.default)(c.default.mark(function fn(){var an;return c.default.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,mu();case 2:if(an=Pt.sent,an.length){Pt.next=5;break}throw new Error("No established PeerConnections yet");case 5:return Pt.abrupt("return",an[0]._testOnlyGetFramesEncoded());case 6:case"end":return Pt.stop()}},fn)}))()},onStreamAvailable:jn,startRoutedToRelayedTransition:()=>{Zu.startTransitionTo("P2P"),gm()},startRelayedToRoutedTransition:()=>{Zu.startTransitionTo("MANTIS",()=>o1())},forceMuteAudio:function(){bo("publishAudio","Attempt",{publishAudio:!1}),Dr.publishAudio=!1;try{lm("auto"),this.dispatchEvent(new Wr.MuteForcedEvent),bo("publishAudio","Success",{publishAudio:!1})}catch(fn){bo("publishAudio","Failure",{message:fn.message})}}.bind(this),setCongestionLevel:function(){var fn=(0,d.default)(c.default.mark(function vn(Pt,_t){var on;return c.default.wrap(function(An){for(;;)switch(An.prev=An.next){case 0:if(!um){An.next=15;break}if(!_t){An.next=8;break}return An.next=4,Qu(_t);case 4:An.t1=An.sent,An.t0=[An.t1],An.next=11;break;case 8:return An.next=10,mu();case 10:An.t0=An.sent;case 11:on=An.t0,on.forEach(Bn=>{Bn.setCongestionLevel(Pt)}),An.next=16;break;case 15:Pr.warn("Audio Fallback is not enabled");case 16:case"end":return An.stop()}},vn)}));function an(vn,Pt){return fn.apply(this,arguments)}return an}()},this.detectDevices=function(){Pr.warn("Publisher.detectDevices() is not implemented.")},this.detectMicActivity=function(){Pr.warn("Publisher.detectMicActivity() is not implemented.")},this.getEchoCancellationMode=function(){return Pr.warn("Publisher.getEchoCancellationMode() is not implemented."),"fullDuplex"},this.setMicrophoneGain=function(){Pr.warn("Publisher.setMicrophoneGain() is not implemented.")},this.getMicrophoneGain=function(){return Pr.warn("Publisher.getMicrophoneGain() is not implemented."),.5},this.setCamera=function(){Pr.warn("Publisher.setCamera() is not implemented.")},this.setMicrophone=function(){Pr.warn("Publisher.setMicrophone() is not implemented.")},this.guid=function(){return Dp},this.videoElement=function(){const fn=Go&&Go.video();return fn?fn.domElement():null},this.setStream=au,this.isWebRTC=!0,this.isLoading=function(){return Go&&Go.loading()},this.videoWidth=()=>_p().width,this.videoHeight=()=>_p().height,this.getStats=function(an){am((vn,Pt)=>{vn?an(vn):an(null,Pt)})},this.getRtcStatsReport=()=>new o((fn,an)=>{Fm((vn,Pt)=>{vn?an(vn):fn(Pt)})}),os=new Ys(sm),this.accessAllowed=!1,this.applyVideoFilter=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt,_t,on,Rn,An,Bn;return c.default.wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:if(Pt=Or(vn),bo("applyVideoFilter","Attempt",{videoFilter:Pt}),Yn.prev=2,!pn){Yn.next=5;break}throw Zo(to.NOT_SUPPORTED,new Error("Cannot apply video filter when videoMediaProcessorConnector is set."));case 5:if(_t=zl.isSupported(),_t){Yn.next=8;break}throw Zo(to.NOT_SUPPORTED,new Error("Browser does not support video filters (Insertable Streams and Worker APIs are required)"));case 8:if(Ps.isValidVideoFilter(vn)){Yn.next=10;break}throw Zo(to.INVALID_PARAMETER,new Error("Video filter has invalid configuration"));case 10:if(qr){Yn.next=15;break}return on="Ignoring. No mediaStream",bo("applyVideoFilter","Failure",{message:on}),Pr.warn(on),Yn.abrupt("return");case 15:if(!Tl){Yn.next=17;break}throw Zo(to.INVALID_PARAMETER,new Error("Video filters can not be applied to screen share"));case 17:if(Tp(),Dr.publishVideo){Yn.next=22;break}return xu=vn,bo("applyVideoFilter","Success",{videoFilter:Pt}),Yn.abrupt("return");case 22:if(!Ps.getVideoFilter()){Yn.next=37;break}if(!Ps.canUpdateVideoFilter(vn.type)){Yn.next=35;break}return Yn.prev=24,Yn.next=27,Ps.updateVideoFilter(vn);case 27:return xu=vn,bo("applyVideoFilter","Success",{videoFilter:Pt}),Yn.abrupt("return");case 32:Yn.prev=32,Yn.t0=Yn.catch(24),Pr.warn(`Error updating video filter: ${Yn.t0}`);case 35:return Yn.next=37,Do.clearVideoFilter();case 37:if(Rn=qr.getVideoTracks(),An=Rn[0],An){Yn.next=43;break}return on="Ignoring. No video",bo("applyVideoFilter","Failure",{message:on}),Pr.warn(on),Yn.abrupt("return");case 43:return Yn.next=45,Ps.setVideoFilter(vn);case 45:return Yn.next=47,Ps.setMediaStream(qr);case 47:if(Bn=Yn.sent,!Bn){Yn.next=51;break}return Yn.next=51,nm(An,Bn);case 51:Yn.next=58;break;case 53:throw Yn.prev=53,Yn.t1=Yn.catch(2),Pr.error(`Error applying video filter: ${Yn.t1}`),bo("applyVideoFilter","Failure",{message:Yn.t1.message}),Yn.t1;case 58:xu=vn,bo("applyVideoFilter","Success",{videoFilter:Pt});case 60:case"end":return Yn.stop()}},an,null,[[2,53],[24,32]])}));return function(an){return fn.apply(this,arguments)}}(),this.getVideoFilter=()=>(bo("getVideoFilter","Attempt"),bo("getVideoFilter","Success"),xu||null),this.setVideoMediaProcessorConnector=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt,_t,on,Rn,An,Bn;return c.default.wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:if(bo("setVideoMediaProcessorConnector","Attempt",{message:vn?"setting the connector":"clearing the connector"}),!Do.getVideoFilter()){Yn.next=4;break}throw bo("setVideoMediaProcessorConnector","Failure",{message:"Tried to set video MediaProcessorConnector when video filter applied."}),Zo(to.NOT_SUPPORTED,new Error("setVideoMediaProcessorConnector: Cannot use this method when videoFilter is set."));case 4:if(!pn){Yn.next=14;break}return Pt=qr.getVideoTracks(),_t=Pt[0],Yn.next=8,dm(vu);case 8:return on=Yn.sent,Yn.next=11,nm(_t,on);case 11:pn.destroy(),pn.stopOriginalTrack(),pn=null;case 14:if(vn){Yn.next=17;break}return bo("setVideoMediaProcessorConnector","Success",{message:"clearing the connector"}),Yn.abrupt("return");case 17:if(Rs.isValidConnector(vn)){Yn.next=20;break}throw bo("setVideoMediaProcessorConnector","Failure",{message:"Invalid MediaProcessorConnector"}),Zo(to.INVALID_PARAMETER,new Error("setVideoMediaProcessorConnector:  Tried to set invalid MediaProcessorConnector"));case 20:if(pn=new Rs(vn),Rn=qr.getVideoTracks(),An=Rn[0],An){Yn.next=28;break}return Bn="Connector not set as no video track is present.",bo("setVideoMediaProcessorConnector","Failure",{message:Bn}),Pr.warn(`setVideoMediaProcessorConnector: ${Bn}`),pn=null,Yn.abrupt("return");case 28:return Yn.prev=28,Yn.next=31,pn.setTrack(An);case 31:return _t=Yn.sent,Yn.next=34,nm(An,_t);case 34:Yn.next=42;break;case 36:throw Yn.prev=36,Yn.t0=Yn.catch(28),pn=null,Pr.error(`setVideoMediaProcessorConnector: Error getting track from MediaProcessorConnector: ${Yn.t0}`),bo("setVideoMediaProcessorConnector","Failure",{message:Yn.t0.message}),Yn.t0;case 42:bo("setVideoMediaProcessorConnector","Success");case 43:case"end":return Yn.stop()}},an,null,[[28,36]])}));return function(an){return fn.apply(this,arguments)}}(),this.setAudioMediaProcessorConnector=function(){var fn=(0,d.default)(c.default.mark(function an(vn){var Pt,_t,on,Rn,An;return c.default.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:if(bo("setAudioMediaProcessorConnector","Attempt",{message:vn?"setting the connector":"clearing the connector"}),!Cn){Jn.next=7;break}return Pt=qr.getAudioTracks(),_t=Pt[0],Jn.next=5,hm(_t,Cn.originalTrack);case 5:Cn.destroy(),Cn=null;case 7:if(vn){Jn.next=10;break}return bo("setAudioMediaProcessorConnector","Success",{message:"clearing the connector"}),Jn.abrupt("return");case 10:if(Rs.isValidConnector(vn)){Jn.next=13;break}throw bo("setAudioMediaProcessorConnector","Failure",{message:"Invalid MediaProcessorConnector"}),Zo(to.INVALID_PARAMETER,new Error("setAudioMediaProcessorConnector:  Tried to set invalid MediaProcessorConnector"));case 13:if(on=qr.getAudioTracks(),Rn=on[0],Rn){Jn.next=20;break}return An="Connector not set as no audio track is present.",bo("setAudioMediaProcessorConnector","Failure",{message:An}),Pr.warn(`setAudioMediaProcessorConnector: ${An}`),Cn=null,Jn.abrupt("return");case 20:return Cn=new Rs(vn),Jn.prev=21,Jn.next=24,Cn.setTrack(Rn);case 24:return _t=Jn.sent,Jn.next=27,hm(Do.getAudioSource(),_t);case 27:Jn.next=35;break;case 29:throw Jn.prev=29,Jn.t0=Jn.catch(21),Cn=null,Pr.error(`setAudioMediaProcessorConnector: Error getting track from MediaProcessorConnector: ${Jn.t0}`),bo("setAudioMediaProcessorConnector","Failure",{message:Jn.t0.message}),Jn.t0;case 35:bo("setAudioMediaProcessorConnector","Success");case 36:case"end":return Jn.stop()}},an,null,[[21,29]])}));return function(an){return fn.apply(this,arguments)}}(),this.clearVideoFilter=(0,d.default)(c.default.mark(function fn(){var an,vn,Pt,_t,on;return c.default.wrap(function(An){for(;;)switch(An.prev=An.next){case 0:if(bo("clearVideoFilter","Attempt"),!(!Dr.publishVideo&&!Ps.getVideoFilter())){An.next=5;break}return xu=null,bo("clearVideoFilter","Success"),An.abrupt("return");case 5:if(!(!Ps.getVideoFilter()&&!xu)){An.next=10;break}return an="Ignoring. No video filter applied",bo("clearVideoFilter","Success",{message:an}),Pr.debug(an),An.abrupt("return");case 10:if(zl.isSupported()){An.next=15;break}return an='Ignoring. "clearVideoFilter" not supported.',bo("clearVideoFilter","Success",{message:an}),Pr.warn(an),An.abrupt("return");case 15:if(qr){An.next=20;break}return an="Ignoring. No mediaStream",bo("clearVideoFilter","Success",{message:an}),Pr.warn(an),An.abrupt("return");case 20:return vn=xu,xu=null,Pt=qr.getVideoTracks(),_t=Pt[0],An.prev=23,An.next=26,dm(vu);case 26:on=An.sent,An.next=33;break;case 29:return An.prev=29,An.t0=An.catch(23),Pr.error(An.t0),An.abrupt("return");case 33:if(on){An.next=36;break}return Pr.warn("Failed to clear filter because there is no video track."),An.abrupt("return");case 36:return An.prev=36,An.next=39,nm(_t,on);case 39:return An.next=41,Tm();case 41:An.next=46;break;case 43:An.prev=43,An.t1=An.catch(36),xu=vn;case 46:bo("clearVideoFilter","Success");case 47:case"end":return An.stop()}},fn,null,[[23,29],[36,43]])}))}}}).call(this,i(0))},function(e,s,i){const o=i(51).once;e.exports=function(c,d){d===void 0&&(d={});const h=d.hasE2eeCapability||i(110),g=d.hasOpenTokSupport||o;this.publish=c.indexOf("publish")!==-1?1:0,this.subscribe=c.indexOf("subscribe")!==-1?1:0,this.forceUnpublish=c.indexOf("forceunpublish")!==-1?1:0,this.forceDisconnect=c.indexOf("forcedisconnect")!==-1?1:0,this.forceMute=c.indexOf("forcemute")!==-1?1:0,this.supportsE2ee=h()?1:0,this.supportsWebRTC=g()?1:0,this.permittedTo=b=>Object.prototype.hasOwnProperty.call(this,b)&&this[b]===1}},function(e,s,i){const o=i(1)("Stream"),a=i(8),c=i(21),d=i(6),h=i(23)(),g=["name","archiving"];e.exports=function(j,_,$,_e,et,ct,dt){const nt=this;let it;this.id=j,this.streamId=j,this.name=_,this.creationTime=Number($),this.initials=dt||"",this.connection=_e,this.channel=ct,this.publisher=c.publishers.find({streamId:this.id}),d(this);const st=function(bt,Ct,Ut,Xt){let Nt=Ct;switch(Nt){case"active":Nt=bt.type==="audio"?"hasAudio":"hasVideo",nt[Nt]=Xt;break;case"disableWarning":if(Nt=bt.type==="audio"?"audioDisableWarning":"videoDisableWarning",nt[Nt]=Xt,!nt[bt.type==="audio"?"hasAudio":"hasVideo"])return;break;case"fitMode":Nt="defaultFitMode",nt[Nt]=Xt;break;case"source":Nt=bt.type==="audio"?"audioType":"videoType",nt[Nt]=Xt;break;case"videoDimensions":nt.videoDimensions=Xt;break;case"orientation":case"width":case"height":return}nt.dispatchEvent(new h.StreamUpdatedEvent(nt,Nt,Ut,Xt))},lt=function(){return nt.publisher?nt.publisher:c.subscribers.find(bt=>bt.stream&&bt.stream.id===nt.id&&bt.session.id===et.id)},ht=function(){return!nt.publisher};this.getChannelsOfType=function(bt){return nt.channel.filter(Ct=>Ct.type===bt)},this.getChannel=function(bt){for(let Ct=0;Ct<nt.channel.length;++Ct)if(nt.channel[Ct].id===bt)return nt.channel[Ct];return null};const Tt=this.getChannelsOfType("audio")[0],Rt=this.getChannelsOfType("video")[0];this.hasAudio=Tt!=null&&Tt.active,this.hasVideo=Rt!=null&&Rt.active,this.videoType=Rt&&Rt.source,this.defaultFitMode=Rt&&Rt.fitMode,this.videoDimensions={},Rt&&(this.videoDimensions.width=Rt.width,this.videoDimensions.height=Rt.height,this.videoDimensions.orientation=Rt.orientation,Rt.on("update",st),this.frameRate=Rt.frameRate),Tt&&Tt.on("update",st),this.setChannelActiveState=function(bt,Ct,Ut,Xt,Nt){const Jt={active:Ct};Ut&&(Jt.activeReason=Ut),Xt!==void 0&&(Jt.congestionLevel=Xt),Nt&&(Jt.subscriberId=Nt),vt(bt,Jt)},this.setVideoDimensions=function(bt,Ct){vt("video",{width:bt,height:Ct,orientation:0})},this.setRestrictFrameRate=function(bt){vt("video",{restrictFrameRate:bt})},this.setPreferredResolution=function(bt){if(!ht()){o.warn("setPreferredResolution has no affect when called by a publisher");return}if(et.sessionInfo.p2pEnabled){o.warn("Stream.setPreferredResolution will not work in a P2P Session");return}if(bt&&bt.width===void 0&&bt.height===void 0)return;const Ct=nt.getChannelsOfType("video")[0];if(Ct){if(bt&&bt.width){if(isNaN(parseInt(bt.width,10)))throw new a.Error("stream preferred width must be an integer","Subscriber");Ct.preferredWidth=parseInt(bt.width,10)}else Ct.preferredWidth=void 0;if(bt&&bt.height){if(isNaN(parseInt(bt.height,10)))throw new a.Error("stream preferred height must be an integer","Subscriber");Ct.preferredHeight=parseInt(bt.height,10)}else Ct.preferredHeight=void 0;et._.subscriberChannelUpdate(nt,lt(),Ct,{preferredWidth:Ct.preferredWidth||0,preferredHeight:Ct.preferredHeight||0})}},this.getPreferredResolution=function(){const bt=nt.getChannelsOfType("video")[0];if(!(!bt||!bt.preferredWidth&&!bt.preferredHeight))return{width:bt.preferredWidth,height:bt.preferredHeight}},this.setPreferredFrameRate=function(bt){if(!ht()){o.warn("setPreferredFrameRate has no affect when called by a publisher");return}if(et.sessionInfo.p2pEnabled){o.warn("Stream.setPreferredFrameRate will not work in a P2P Session");return}if(bt&&isNaN(parseFloat(bt)))throw new a.Error("stream preferred frameRate must be a number","Subscriber");const Ct=nt.getChannelsOfType("video")[0];Ct&&(Ct.preferredFrameRate=bt?parseFloat(bt):null,et._.subscriberChannelUpdate(nt,lt(),Ct,{preferredFrameRate:Ct.preferredFrameRate||0}))},this.getPreferredFrameRate=function(){const bt=nt.getChannelsOfType("video")[0];return bt?bt.preferredFrameRate:null};let vt=function(bt,Ct){let Ut;if(nt.publisher)Ut=Xt=>et._.streamChannelUpdate(nt,Xt,Ct);else{const Xt=lt();Ut=Nt=>et._.subscriberChannelUpdate(nt,Xt,Nt,Ct)}nt.getChannelsOfType(bt).forEach(Ut)};this.destroyed=!1,this.destroyedReason=void 0,this.destroy=function(bt,Ct){bt===void 0&&(bt="clientDisconnected"),it=bt,nt.destroyed=!0,nt.destroyedReason=it,Ct!==!0&&nt.dispatchEvent(new h.DestroyedEvent("destroyed",nt,it))},this._={},this._.updateProperty=function(bt,Ct){if(g.indexOf(bt)===-1){o.warn(`Unknown stream property "${bt}" was modified to "${Ct}".`);return}const Ut=nt[bt],Xt=Ct;switch(bt){case"name":nt[bt]=Xt;break;case"archiving":var Nt=lt();nt.publisher&&Nt&&Nt._.archivingStatus(Xt),nt[bt]=Xt;break}const Jt=new h.StreamUpdatedEvent(nt,bt,Ut,Xt);nt.dispatchEvent(Jt)},this._.update=function(bt){for(const Ct in bt)bt.hasOwnProperty(Ct)&&nt._.updateProperty(Ct,bt[Ct])},this._.forceMute=function(bt){bt.hasOwnProperty("channels")&&bt.channels.includes("audio")&&nt.publisher&&nt.publisher._.forceMuteAudio()},this._.updateChannel=function(bt,Ct){const Ut=nt.getChannel(bt);Ut&&Ut.update(Ct)}}},function(e,s,i){s.__esModule=!0,s.UNSUBSCRIBE=s.SUBSCRIBE=s.STATUS=s.PONG=s.PING=s.MESSAGE=s.DISCONNECT=s.CONNECT=void 0;const o=0;s.SUBSCRIBE=o;const a=1;s.UNSUBSCRIBE=a;const c=2;s.MESSAGE=c;const d=3;s.CONNECT=d;const h=4;s.DISCONNECT=h;const g=7;s.PING=g;const b=8;s.PONG=b;const j=9;s.STATUS=j},function(e,s,i){const o=i(9),a=i(169),c=i(6),d=i(23)(),h=i(755);function g(b,j,_,$,_e){let et;this.id=b,this.connectionId=b,this.creationTime=j?Number(j):null,this.data=_,this.capabilities=h($),this.permissions=new a(_e),this.quality=null,c(this),this.destroy=(ct,dt)=>{et=ct||"clientDisconnected",dt!==!0&&this.dispatchEvent(new d.DestroyedEvent("destroyed",this,et))},this.destroyed=()=>et!==void 0,this.destroyedReason=()=>et}g.fromHash=b=>{let j=b.id,_=b.creationTime,$=b.data,_e=b.capablities,et=b.permissions;return new g(j,_,$,o(_e||{},{supportsWebRTC:!0}),et||[])},e.exports=g},function(e,s){var i=typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)&&(typeof window!==void 0?window:commonjsGlobal).Object===Object&&(typeof window!==void 0?window:commonjsGlobal);e.exports=i},function(e,s){var i=Function.prototype,o=i.toString;function a(c){if(c!=null){try{return o.call(c)}catch{}try{return c+""}catch{}}return""}e.exports=a},function(e,s,i){var o=i(38),a=function(){try{var c=o(Object,"defineProperty");return c({},"",{}),c}catch{}}();e.exports=a},function(e,s,i){var o=i(40),a=i(30);function c(d,h){return d&&o(h,a(h),d)}e.exports=c},function(e,s,i){var o=i(381),a=i(63),c=i(12),d=i(64),h=i(65),g=i(85),b=Object.prototype,j=b.hasOwnProperty;function _($,_e){var et=c($),ct=!et&&a($),dt=!et&&!ct&&d($),nt=!et&&!ct&&!dt&&g($),it=et||ct||dt||nt,st=it?o($.length,String):[],lt=st.length;for(var ht in $)(_e||j.call($,ht))&&!(it&&(ht=="length"||dt&&(ht=="offset"||ht=="parent")||nt&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||h(ht,lt)))&&st.push(ht);return st}e.exports=_},function(e,s){function i(o,a){return function(c){return o(a(c))}}e.exports=i},function(e,s,i){(function(o){var a=i(14),c=s&&!s.nodeType&&s,d=c&&typeof o=="object"&&o&&!o.nodeType&&o,h=d&&d.exports===c,g=h?a.Buffer:void 0,b=g?g.allocUnsafe:void 0;function j(_,$){if($)return _.slice();var _e=_.length,et=b?b(_e):new _.constructor(_e);return _.copy(et),et}o.exports=j}).call(this,i(84)(e))},function(e,s){function i(){return[]}e.exports=i},function(e,s,i){var o=i(118),a=i(119),c=i(117),d=i(180),h=Object.getOwnPropertySymbols,g=h?function(b){for(var j=[];b;)o(j,c(b)),b=a(b);return j}:d;e.exports=g},function(e,s,i){var o=i(183),a=i(117),c=i(30);function d(h){return o(h,c,a)}e.exports=d},function(e,s,i){var o=i(118),a=i(12);function c(d,h,g){var b=h(d);return a(d)?b:o(b,g(d))}e.exports=c},function(e,s,i){var o=i(183),a=i(181),c=i(53);function d(h){return o(h,c,a)}e.exports=d},function(e,s,i){var o=i(38),a=i(14),c=o(a,"Set");e.exports=c},function(e,s,i){var o=i(38),a=i(14),c=o(a,"WeakMap");e.exports=c},function(e,s,i){var o=i(14),a=o.Uint8Array;e.exports=a},function(e,s,i){var o=i(120);function a(c,d){var h=d?o(c.buffer):c.buffer;return new c.constructor(h,c.byteOffset,c.length)}e.exports=a},function(e,s,i){var o=i(86),a=i(119),c=i(67);function d(h){return typeof h.constructor=="function"&&!c(h)?o(a(h)):{}}e.exports=d},function(e,s,i){var o=i(112),a="Expected a function";function c(d,h){if(typeof d!="function"||h!=null&&typeof h!="function")throw new TypeError(a);var g=function(){var b=arguments,j=h?h.apply(this,b):b[0],_=g.cache;if(_.has(j))return _.get(j);var $=d.apply(this,b);return g.cache=_.set(j,$)||_,$};return g.cache=new(c.Cache||o),g}c.Cache=o,e.exports=c},function(e,s,i){var o=i(87),a=i(124);function c(d){return o(function(h,g){var b=-1,j=g.length,_=j>1?g[j-1]:void 0,$=j>2?g[2]:void 0;for(_=d.length>3&&typeof _=="function"?(j--,_):void 0,$&&a(g[0],g[1],$)&&(_=j<3?void 0:_,j=1),h=Object(h);++b<j;){var _e=g[b];_e&&d(h,_e,b,_)}return h})}e.exports=c},function(e,s,i){var o=i(122),a=Math.max;function c(d,h,g){return h=a(h===void 0?d.length-1:h,0),function(){for(var b=arguments,j=-1,_=a(b.length-h,0),$=Array(_);++j<_;)$[j]=b[h+j];j=-1;for(var _e=Array(h+1);++j<h;)_e[j]=b[j];return _e[h]=g($),o(d,this,_e)}}e.exports=c},function(e,s){var i=800,o=16,a=Date.now;function c(d){var h=0,g=0;return function(){var b=a(),j=o-(b-g);if(g=b,j>0){if(++h>=i)return arguments[0]}else h=0;return d.apply(void 0,arguments)}}e.exports=c},function(e,s,i){e.exports=i(409)()?WeakMap:i(410)},function(e,s,i){var o=Object.create,a=Object.getPrototypeOf,c={};e.exports=function(){var d=Object.setPrototypeOf,h=arguments[0]||o;return typeof d!="function"?!1:a(d(h(null),c))===c}},function(e,s,i){var o=i(197),a=i(31),c=Object.prototype.isPrototypeOf,d=Object.defineProperty,h={configurable:!0,enumerable:!1,writable:!0,value:void 0},g;g=function(b,j){if(a(b),j===null||o(j))return b;throw new TypeError("Prototype must be null or an object")},e.exports=function(b){var j,_;return b?(b.level===2?b.set?(_=b.set,j=function($,_e){return _.call(g($,_e),_e),$}):j=function($,_e){return g($,_e).__proto__=_e,$}:j=function $(_e,et){var ct;return g(_e,et),ct=c.call($.nullPolyfill,_e),ct&&delete $.nullPolyfill.__proto__,et===null&&(et=$.nullPolyfill),_e.__proto__=et,ct&&d($.nullPolyfill,"__proto__",h),_e},Object.defineProperty(j,"level",{configurable:!1,enumerable:!1,writable:!1,value:b.level})):null}(function(){var b=Object.create(null),j={},_,$=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if($){try{_=$.set,_.call(b,j)}catch{}if(Object.getPrototypeOf(b)===j)return{set:_,level:2}}return b.__proto__=j,Object.getPrototypeOf(b)===j?{level:2}:(b={},b.__proto__=j,Object.getPrototypeOf(b)===j?{level:1}:!1)}()),i(412)},function(e,s,i){var o=i(43),a={function:!0,object:!0};e.exports=function(c){return o(c)&&a[typeof c]||!1}},function(e,s,i){var o=i(415),a=/^\s*class[\s{/}]/,c=Function.prototype.toString;e.exports=function(d){return!(!o(d)||a.test(c.call(d)))}},function(e,s,i){var o=i(43),a=Array.prototype.forEach,c=Object.create,d=function(h,g){var b;for(b in h)g[b]=h[b]};e.exports=function(h){var g=c(null);return a.call(arguments,function(b){o(b)&&d(Object(b),g)}),g}},function(e,s,i){e.exports=i(422)()?String.prototype.contains:i(423)},function(e,s,i){var o=i(89),a=i(90),c=i(424),d=i(453),h=i(454),g=i(44).iterator;e.exports=function(b){return typeof h(b)[g]=="function"?b[g]():o(b)?new c(b):a(b)?new d(b):new c(b)}},function(e,s,i){var o=i(429);e.exports=function(a){if(!o(a))throw new TypeError(a+" is not a symbol");return a}},function(e,s,i){var o=i(433),a=i(127),c=i(68),d=i(31),h=i(32),g=i(434),b=i(44),j=Object.defineProperty,_=Object.defineProperties,$;e.exports=$=function(_e,et){if(!(this instanceof $))throw new TypeError("Constructor requires 'new'");_(this,{__list__:h("w",d(_e)),__context__:h("w",et),__nextIndex__:h("w",0)}),et&&(c(et.on),et.on("_add",this._onAdd),et.on("_delete",this._onDelete),et.on("_clear",this._onClear))},delete $.prototype.constructor,_($.prototype,a({_next:h(function(){var _e;if(this.__list__){if(this.__redo__&&(_e=this.__redo__.shift(),_e!==void 0))return _e;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(_e){return _e===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(_e)}}),_resolve:h(function(_e){return this.__list__[_e]}),_unBind:h(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:h(function(){return"[object "+(this[b.toStringTag]||"Object")+"]"})},g({_onAdd:h(function(_e){if(!(_e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){j(this,"__redo__",h("c",[_e]));return}this.__redo__.forEach(function(et,ct){et>=_e&&(this.__redo__[ct]=++et)},this),this.__redo__.push(_e)}}),_onDelete:h(function(_e){var et;_e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(et=this.__redo__.indexOf(_e),et!==-1&&this.__redo__.splice(et,1),this.__redo__.forEach(function(ct,dt){ct>_e&&(this.__redo__[dt]=--ct)},this)))}),_onClear:h(function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0})}))),j($.prototype,b.iterator,h(function(){return this}))},function(e,s,i){var o=i(55),a=i(126),c=i(436),d=i(437),h=function(g,b){return g.replace("%v",d(b))};e.exports=function(g,b,j){if(!a(j))throw new TypeError(h(b,g));if(!o(g)){if("default"in j)return j.default;if(j.isOptional)return null}var _=c(j.errorMessage);throw o(_)||(_=b),new TypeError(h(_,g))}},function(e,s){function i(o,a,c,d){for(var h=o.length,g=c+(d?1:-1);d?g--:++g<h;)if(a(o[g],g,o))return g;return-1}e.exports=i},function(e,s,i){e.exports=i(465)},function(e,s,i){e.exports=function(a,c){return function(){for(var h=new Array(arguments.length),g=0;g<h.length;g++)h[g]=arguments[g];return a.apply(c,h)}}},function(e,s,i){var o=i(19);function a(c){return encodeURIComponent(c).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(d,h,g){if(!h)return d;var b;if(g)b=g(h);else if(o.isURLSearchParams(h))b=h.toString();else{var j=[];o.forEach(h,function(_e,et){_e===null||typeof _e>"u"||(o.isArray(_e)?et=et+"[]":_e=[_e],o.forEach(_e,function(dt){o.isDate(dt)?dt=dt.toISOString():o.isObject(dt)&&(dt=JSON.stringify(dt)),j.push(a(et)+"="+a(dt))}))}),b=j.join("&")}if(b){var _=d.indexOf("#");_!==-1&&(d=d.slice(0,_)),d+=(d.indexOf("?")===-1?"?":"&")+b}return d}},function(e,s,i){e.exports=function(a,c,d,h,g){return a.config=c,d&&(a.code=d),a.request=h,a.response=g,a.isAxiosError=!0,a.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},a}},function(e,s,i){(function(o){var a=i(19),c=i(471),d=i(472),h=i(208),g=i(473),b=i(476),j=i(477),_=i(211);e.exports=function(_e){return new o(function(ct,dt){var nt=_e.data,it=_e.headers,st=_e.responseType;a.isFormData(nt)&&delete it["Content-Type"];var lt=new XMLHttpRequest;if(_e.auth){var ht=_e.auth.username||"",Tt=_e.auth.password?unescape(encodeURIComponent(_e.auth.password)):"";it.Authorization="Basic "+btoa(ht+":"+Tt)}var Rt=g(_e.baseURL,_e.url);lt.open(_e.method.toUpperCase(),h(Rt,_e.params,_e.paramsSerializer),!0),lt.timeout=_e.timeout;function vt(){if(lt){var bt="getAllResponseHeaders"in lt?b(lt.getAllResponseHeaders()):null,Ct=!st||st==="text"||st==="json"?lt.responseText:lt.response,Ut={data:Ct,status:lt.status,statusText:lt.statusText,headers:bt,config:_e,request:lt};c(ct,dt,Ut),lt=null}}if("onloadend"in lt?lt.onloadend=vt:lt.onreadystatechange=function(){!lt||lt.readyState!==4||lt.status===0&&!(lt.responseURL&&lt.responseURL.indexOf("file:")===0)||setTimeout(vt)},lt.onabort=function(){lt&&(dt(_("Request aborted",_e,"ECONNABORTED",lt)),lt=null)},lt.onerror=function(){dt(_("Network Error",_e,null,lt)),lt=null},lt.ontimeout=function(){var Ct="timeout of "+_e.timeout+"ms exceeded";_e.timeoutErrorMessage&&(Ct=_e.timeoutErrorMessage),dt(_(Ct,_e,_e.transitional&&_e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",lt)),lt=null},a.isStandardBrowserEnv()){var Et=(_e.withCredentials||j(Rt))&&_e.xsrfCookieName?d.read(_e.xsrfCookieName):void 0;Et&&(it[_e.xsrfHeaderName]=Et)}"setRequestHeader"in lt&&a.forEach(it,function(Ct,Ut){typeof nt>"u"&&Ut.toLowerCase()==="content-type"?delete it[Ut]:lt.setRequestHeader(Ut,Ct)}),a.isUndefined(_e.withCredentials)||(lt.withCredentials=!!_e.withCredentials),st&&st!=="json"&&(lt.responseType=_e.responseType),typeof _e.onDownloadProgress=="function"&&lt.addEventListener("progress",_e.onDownloadProgress),typeof _e.onUploadProgress=="function"&&lt.upload&&lt.upload.addEventListener("progress",_e.onUploadProgress),_e.cancelToken&&_e.cancelToken.promise.then(function(Ct){lt&&(lt.abort(),dt(Ct),lt=null)}),nt||(nt=null),lt.send(nt)})}}).call(this,i(0))},function(e,s,i){var o=i(209);e.exports=function(c,d,h,g,b){var j=new Error(c);return o(j,d,h,g,b)}},function(e,s,i){e.exports=function(a){return!!(a&&a.__CANCEL__)}},function(e,s,i){var o=i(19);e.exports=function(c,d){d=d||{};var h={},g=["url","method","data"],b=["headers","auth","proxy","params"],j=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],_=["validateStatus"];function $(dt,nt){return o.isPlainObject(dt)&&o.isPlainObject(nt)?o.merge(dt,nt):o.isPlainObject(nt)?o.merge({},nt):o.isArray(nt)?nt.slice():nt}function _e(dt){o.isUndefined(d[dt])?o.isUndefined(c[dt])||(h[dt]=$(void 0,c[dt])):h[dt]=$(c[dt],d[dt])}o.forEach(g,function(nt){o.isUndefined(d[nt])||(h[nt]=$(void 0,d[nt]))}),o.forEach(b,_e),o.forEach(j,function(nt){o.isUndefined(d[nt])?o.isUndefined(c[nt])||(h[nt]=$(void 0,c[nt])):h[nt]=$(void 0,d[nt])}),o.forEach(_,function(nt){nt in d?h[nt]=$(c[nt],d[nt]):nt in c&&(h[nt]=$(void 0,c[nt]))});var et=g.concat(b).concat(j).concat(_),ct=Object.keys(c).concat(Object.keys(d)).filter(function(nt){return et.indexOf(nt)===-1});return o.forEach(ct,_e),h}},function(e,s,i){function o(a){this.message=a}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,e.exports=o},function(e,s,i){var o=i(484),a=i(486);function c(d,h,g){return o(a,d,h,g)}e.exports=c},function(e,s,i){var o=i(88),a=i(217),c=a?function(d,h){return a.set(d,h),d}:o;e.exports=c},function(e,s,i){var o=i(186),a=o&&new o;e.exports=a},function(e,s,i){var o=i(219),a=i(220),c=i(490),d=i(95),h=i(221),g=i(227),b=i(499),j=i(137),_=i(14),$=1,_e=2,et=8,ct=16,dt=128,nt=512;function it(st,lt,ht,Tt,Rt,vt,Et,bt,Ct,Ut){var Xt=lt&dt,Nt=lt&$,Jt=lt&_e,zt=lt&(et|ct),nn=lt&nt,Bt=Jt?void 0:d(st);function sn(){for(var qt=arguments.length,Kt=Array(qt),$t=qt;$t--;)Kt[$t]=arguments[$t];if(zt)var Sn=g(sn),On=c(Kt,Sn);if(Tt&&(Kt=o(Kt,Tt,Rt,zt)),vt&&(Kt=a(Kt,vt,Et,zt)),qt-=On,zt&&qt<Ut){var tn=j(Kt,Sn);return h(st,lt,it,sn.placeholder,ht,Kt,tn,bt,Ct,Ut-qt)}var bn=Nt?ht:this,dn=Jt?bn[st]:st;return qt=Kt.length,bt?Kt=b(Kt,bt):nn&&qt>1&&Kt.reverse(),Xt&&Ct<qt&&(Kt.length=Ct),this&&this!==_&&this instanceof sn&&(dn=Bt||d(dn)),dn.apply(bn,Kt)}return sn}e.exports=it},function(e,s){var i=Math.max;function o(a,c,d,h){for(var g=-1,b=a.length,j=d.length,_=-1,$=c.length,_e=i(b-j,0),et=Array($+_e),ct=!h;++_<$;)et[_]=c[_];for(;++g<j;)(ct||g<b)&&(et[d[g]]=a[g]);for(;_e--;)et[_++]=a[g++];return et}e.exports=o},function(e,s){var i=Math.max;function o(a,c,d,h){for(var g=-1,b=a.length,j=-1,_=d.length,$=-1,_e=c.length,et=i(b-_,0),ct=Array(et+_e),dt=!h;++g<et;)ct[g]=a[g];for(var nt=g;++$<_e;)ct[nt+$]=c[$];for(;++j<_;)(dt||g<b)&&(ct[nt+d[j]]=a[g++]);return ct}e.exports=o},function(e,s,i){var o=i(491),a=i(225),c=i(226),d=1,h=2,g=4,b=8,j=32,_=64;function $(_e,et,ct,dt,nt,it,st,lt,ht,Tt){var Rt=et&b,vt=Rt?st:void 0,Et=Rt?void 0:st,bt=Rt?it:void 0,Ct=Rt?void 0:it;et|=Rt?j:_,et&=~(Rt?_:j),et&g||(et&=~(d|h));var Ut=[_e,et,nt,bt,vt,Ct,Et,lt,ht,Tt],Xt=ct.apply(void 0,Ut);return o(_e)&&a(Xt,Ut),Xt.placeholder=dt,c(Xt,_e,et)}e.exports=$},function(e,s,i){var o=i(217),a=i(223),c=o?function(d){return o.get(d)}:a;e.exports=c},function(e,s){function i(){}e.exports=i},function(e,s,i){var o=i(86),a=i(136);function c(d,h){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=void 0}c.prototype=o(a.prototype),c.prototype.constructor=c,e.exports=c},function(e,s,i){var o=i(216),a=i(193),c=a(o);e.exports=c},function(e,s,i){var o=i(496),a=i(497),c=i(123),d=i(498);function h(g,b,j){var _=b+"";return c(g,a(_,d(o(_),j)))}e.exports=h},function(e,s){function i(o){var a=o;return a.placeholder}e.exports=i},function(e,s,i){var o=i(503),a=i(11),c=i(69),d=0/0,h=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,b=/^0o[0-7]+$/i,j=parseInt;function _($){if(typeof $=="number")return $;if(c($))return d;if(a($)){var _e=typeof $.valueOf=="function"?$.valueOf():$;$=a(_e)?_e+"":_e}if(typeof $!="string")return $===0?$:+$;$=o($);var et=g.test($);return et||b.test($)?j($.slice(2),et?2:8):h.test($)?d:+$}e.exports=_},function(e,s,i){var o=i(511),a=i(17);function c(d,h,g,b,j){return d===h?!0:d==null||h==null||!a(d)&&!a(h)?d!==d&&h!==h:o(d,h,g,b,c,j)}e.exports=c},function(e,s,i){var o=i(92),a=i(231),c=i(94),d=1,h=2;function g(b,j,_,$,_e,et){var ct=_&d,dt=b.length,nt=j.length;if(dt!=nt&&!(ct&&nt>dt))return!1;var it=et.get(b),st=et.get(j);if(it&&st)return it==j&&st==b;var lt=-1,ht=!0,Tt=_&h?new o:void 0;for(et.set(b,j),et.set(j,b);++lt<dt;){var Rt=b[lt],vt=j[lt];if($)var Et=ct?$(vt,Rt,lt,j,b,et):$(Rt,vt,lt,b,j,et);if(Et!==void 0){if(Et)continue;ht=!1;break}if(Tt){if(!a(j,function(bt,Ct){if(!c(Tt,Ct)&&(Rt===bt||_e(Rt,bt,_,$,et)))return Tt.push(Ct)})){ht=!1;break}}else if(!(Rt===vt||_e(Rt,vt,_,$,et))){ht=!1;break}}return et.delete(b),et.delete(j),ht}e.exports=g},function(e,s){function i(o,a){for(var c=-1,d=o==null?0:o.length;++c<d;)if(a(o[c],c,o))return!0;return!1}e.exports=i},function(e,s){function i(o){var a=-1,c=Array(o.size);return o.forEach(function(d,h){c[++a]=[h,d]}),c}e.exports=i},function(e,s,i){var o=i(11);function a(c){return c===c&&!o(c)}e.exports=a},function(e,s){function i(o,a){return function(c){return c==null?!1:c[o]===a&&(a!==void 0||o in Object(c))}}e.exports=i},function(e,s,i){var o=i(516),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,d=o(function(h){var g=[];return h.charCodeAt(0)===46&&g.push(""),h.replace(a,function(b,j,_,$){g.push(_?$.replace(c,"$1"):j||b)}),g});e.exports=d},function(e,s,i){var o=i(518),a=i(519);function c(d,h){return d!=null&&a(d,h,o)}e.exports=c},function(e,s,i){var o=i(118),a=i(525);function c(d,h,g,b,j){var _=-1,$=d.length;for(g||(g=a),j||(j=[]);++_<$;){var _e=d[_];h>0&&g(_e)?h>1?c(_e,h-1,g,b,j):o(j,_e):b||(j[j.length]=_e)}return j}e.exports=c},function(e,s,i){var o=i(532),a=o();e.exports=a},function(e,s,i){var o=i(533),a=i(534);s.parse=ht,s.resolve=Rt,s.resolveObject=vt,s.format=Tt,s.Url=c;function c(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var d=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,g=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,b=["<",">",'"',"`"," ","\r",`
`,"	"],j=["{","}","|","\\","^","`"].concat(b),_=["'"].concat(j),$=["%","/","?",";","#"].concat(_),_e=["/","?","#"],et=255,ct=/^[+a-z0-9A-Z_-]{0,63}$/,dt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,nt={javascript:!0,"javascript:":!0},it={javascript:!0,"javascript:":!0},st={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},lt=i(535);function ht(Et,bt,Ct){if(Et&&a.isObject(Et)&&Et instanceof c)return Et;var Ut=new c;return Ut.parse(Et,bt,Ct),Ut}c.prototype.parse=function(Et,bt,Ct){if(!a.isString(Et))throw new TypeError("Parameter 'url' must be a string, not "+typeof Et);var Ut=Et.indexOf("?"),Xt=Ut!==-1&&Ut<Et.indexOf("#")?"?":"#",Nt=Et.split(Xt),Jt=/\\/g;Nt[0]=Nt[0].replace(Jt,"/"),Et=Nt.join(Xt);var zt=Et;if(zt=zt.trim(),!Ct&&Et.split("#").length===1){var nn=g.exec(zt);if(nn)return this.path=zt,this.href=zt,this.pathname=nn[1],nn[2]?(this.search=nn[2],bt?this.query=lt.parse(this.search.substr(1)):this.query=this.search.substr(1)):bt&&(this.search="",this.query={}),this}var Bt=d.exec(zt);if(Bt){Bt=Bt[0];var sn=Bt.toLowerCase();this.protocol=sn,zt=zt.substr(Bt.length)}if(Ct||Bt||zt.match(/^\/\/[^@\/]+@[^@\/]+/)){var qt=zt.substr(0,2)==="//";qt&&!(Bt&&it[Bt])&&(zt=zt.substr(2),this.slashes=!0)}if(!it[Bt]&&(qt||Bt&&!st[Bt])){for(var Kt=-1,$t=0;$t<_e.length;$t++){var Sn=zt.indexOf(_e[$t]);Sn!==-1&&(Kt===-1||Sn<Kt)&&(Kt=Sn)}var On,tn;Kt===-1?tn=zt.lastIndexOf("@"):tn=zt.lastIndexOf("@",Kt),tn!==-1&&(On=zt.slice(0,tn),zt=zt.slice(tn+1),this.auth=decodeURIComponent(On)),Kt=-1;for(var $t=0;$t<$.length;$t++){var Sn=zt.indexOf($[$t]);Sn!==-1&&(Kt===-1||Sn<Kt)&&(Kt=Sn)}Kt===-1&&(Kt=zt.length),this.host=zt.slice(0,Kt),zt=zt.slice(Kt),this.parseHost(),this.hostname=this.hostname||"";var bn=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!bn)for(var dn=this.hostname.split(/\./),$t=0,Mn=dn.length;$t<Mn;$t++){var $n=dn[$t];if($n&&!$n.match(ct)){for(var Un="",Fn=0,cr=$n.length;Fn<cr;Fn++)$n.charCodeAt(Fn)>127?Un+="x":Un+=$n[Fn];if(!Un.match(ct)){var or=dn.slice(0,$t),wr=dn.slice($t+1),Er=$n.match(dt);Er&&(or.push(Er[1]),wr.unshift(Er[2])),wr.length&&(zt="/"+wr.join(".")+zt),this.hostname=or.join(".");break}}}this.hostname.length>et?this.hostname="":this.hostname=this.hostname.toLowerCase(),bn||(this.hostname=o.toASCII(this.hostname));var Zr=this.port?":"+this.port:"",po=this.hostname||"";this.host=po+Zr,this.href+=this.host,bn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),zt[0]!=="/"&&(zt="/"+zt))}if(!nt[sn])for(var $t=0,Mn=_.length;$t<Mn;$t++){var lr=_[$t];if(zt.indexOf(lr)!==-1){var pr=encodeURIComponent(lr);pr===lr&&(pr=escape(lr)),zt=zt.split(lr).join(pr)}}var Vn=zt.indexOf("#");Vn!==-1&&(this.hash=zt.substr(Vn),zt=zt.slice(0,Vn));var In=zt.indexOf("?");if(In!==-1?(this.search=zt.substr(In),this.query=zt.substr(In+1),bt&&(this.query=lt.parse(this.query)),zt=zt.slice(0,In)):bt&&(this.search="",this.query={}),zt&&(this.pathname=zt),st[sn]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Zr=this.pathname||"",zn=this.search||"";this.path=Zr+zn}return this.href=this.format(),this};function Tt(Et){return a.isString(Et)&&(Et=ht(Et)),Et instanceof c?Et.format():c.prototype.format.call(Et)}c.prototype.format=function(){var Et=this.auth||"";Et&&(Et=encodeURIComponent(Et),Et=Et.replace(/%3A/i,":"),Et+="@");var bt=this.protocol||"",Ct=this.pathname||"",Ut=this.hash||"",Xt=!1,Nt="";this.host?Xt=Et+this.host:this.hostname&&(Xt=Et+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Xt+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(Nt=lt.stringify(this.query));var Jt=this.search||Nt&&"?"+Nt||"";return bt&&bt.substr(-1)!==":"&&(bt+=":"),this.slashes||(!bt||st[bt])&&Xt!==!1?(Xt="//"+(Xt||""),Ct&&Ct.charAt(0)!=="/"&&(Ct="/"+Ct)):Xt||(Xt=""),Ut&&Ut.charAt(0)!=="#"&&(Ut="#"+Ut),Jt&&Jt.charAt(0)!=="?"&&(Jt="?"+Jt),Ct=Ct.replace(/[?#]/g,function(zt){return encodeURIComponent(zt)}),Jt=Jt.replace("#","%23"),bt+Xt+Ct+Jt+Ut};function Rt(Et,bt){return ht(Et,!1,!0).resolve(bt)}c.prototype.resolve=function(Et){return this.resolveObject(ht(Et,!1,!0)).format()};function vt(Et,bt){return Et?ht(Et,!1,!0).resolveObject(bt):bt}c.prototype.resolveObject=function(Et){if(a.isString(Et)){var bt=new c;bt.parse(Et,!1,!0),Et=bt}for(var Ct=new c,Ut=Object.keys(this),Xt=0;Xt<Ut.length;Xt++){var Nt=Ut[Xt];Ct[Nt]=this[Nt]}if(Ct.hash=Et.hash,Et.href==="")return Ct.href=Ct.format(),Ct;if(Et.slashes&&!Et.protocol){for(var Jt=Object.keys(Et),zt=0;zt<Jt.length;zt++){var nn=Jt[zt];nn!=="protocol"&&(Ct[nn]=Et[nn])}return st[Ct.protocol]&&Ct.hostname&&!Ct.pathname&&(Ct.path=Ct.pathname="/"),Ct.href=Ct.format(),Ct}if(Et.protocol&&Et.protocol!==Ct.protocol){if(!st[Et.protocol]){for(var Bt=Object.keys(Et),sn=0;sn<Bt.length;sn++){var qt=Bt[sn];Ct[qt]=Et[qt]}return Ct.href=Ct.format(),Ct}if(Ct.protocol=Et.protocol,!Et.host&&!it[Et.protocol]){for(var Mn=(Et.pathname||"").split("/");Mn.length&&!(Et.host=Mn.shift()););Et.host||(Et.host=""),Et.hostname||(Et.hostname=""),Mn[0]!==""&&Mn.unshift(""),Mn.length<2&&Mn.unshift(""),Ct.pathname=Mn.join("/")}else Ct.pathname=Et.pathname;if(Ct.search=Et.search,Ct.query=Et.query,Ct.host=Et.host||"",Ct.auth=Et.auth,Ct.hostname=Et.hostname||Et.host,Ct.port=Et.port,Ct.pathname||Ct.search){var Kt=Ct.pathname||"",$t=Ct.search||"";Ct.path=Kt+$t}return Ct.slashes=Ct.slashes||Et.slashes,Ct.href=Ct.format(),Ct}var Sn=Ct.pathname&&Ct.pathname.charAt(0)==="/",On=Et.host||Et.pathname&&Et.pathname.charAt(0)==="/",tn=On||Sn||Ct.host&&Et.pathname,bn=tn,dn=Ct.pathname&&Ct.pathname.split("/")||[],Mn=Et.pathname&&Et.pathname.split("/")||[],$n=Ct.protocol&&!st[Ct.protocol];if($n&&(Ct.hostname="",Ct.port=null,Ct.host&&(dn[0]===""?dn[0]=Ct.host:dn.unshift(Ct.host)),Ct.host="",Et.protocol&&(Et.hostname=null,Et.port=null,Et.host&&(Mn[0]===""?Mn[0]=Et.host:Mn.unshift(Et.host)),Et.host=null),tn=tn&&(Mn[0]===""||dn[0]==="")),On)Ct.host=Et.host||Et.host===""?Et.host:Ct.host,Ct.hostname=Et.hostname||Et.hostname===""?Et.hostname:Ct.hostname,Ct.search=Et.search,Ct.query=Et.query,dn=Mn;else if(Mn.length)dn||(dn=[]),dn.pop(),dn=dn.concat(Mn),Ct.search=Et.search,Ct.query=Et.query;else if(!a.isNullOrUndefined(Et.search)){if($n){Ct.hostname=Ct.host=dn.shift();var Un=Ct.host&&Ct.host.indexOf("@")>0?Ct.host.split("@"):!1;Un&&(Ct.auth=Un.shift(),Ct.host=Ct.hostname=Un.shift())}return Ct.search=Et.search,Ct.query=Et.query,(!a.isNull(Ct.pathname)||!a.isNull(Ct.search))&&(Ct.path=(Ct.pathname?Ct.pathname:"")+(Ct.search?Ct.search:"")),Ct.href=Ct.format(),Ct}if(!dn.length)return Ct.pathname=null,Ct.search?Ct.path="/"+Ct.search:Ct.path=null,Ct.href=Ct.format(),Ct;for(var Fn=dn.slice(-1)[0],cr=(Ct.host||Et.host||dn.length>1)&&(Fn==="."||Fn==="..")||Fn==="",or=0,wr=dn.length;wr>=0;wr--)Fn=dn[wr],Fn==="."?dn.splice(wr,1):Fn===".."?(dn.splice(wr,1),or++):or&&(dn.splice(wr,1),or--);if(!tn&&!bn)for(;or--;or)dn.unshift("..");tn&&dn[0]!==""&&(!dn[0]||dn[0].charAt(0)!=="/")&&dn.unshift(""),cr&&dn.join("/").substr(-1)!=="/"&&dn.push("");var Er=dn[0]===""||dn[0]&&dn[0].charAt(0)==="/";if($n){Ct.hostname=Ct.host=Er?"":dn.length?dn.shift():"";var Un=Ct.host&&Ct.host.indexOf("@")>0?Ct.host.split("@"):!1;Un&&(Ct.auth=Un.shift(),Ct.host=Ct.hostname=Un.shift())}return tn=tn||Ct.host&&dn.length,tn&&!Er&&dn.unshift(""),dn.length?Ct.pathname=dn.join("/"):(Ct.pathname=null,Ct.path=null),(!a.isNull(Ct.pathname)||!a.isNull(Ct.search))&&(Ct.path=(Ct.pathname?Ct.pathname:"")+(Ct.search?Ct.search:"")),Ct.auth=Et.auth||Ct.auth,Ct.slashes=Ct.slashes||Et.slashes,Ct.href=Ct.format(),Ct},c.prototype.parseHost=function(){var Et=this.host,bt=h.exec(Et);bt&&(bt=bt[0],bt!==":"&&(this.port=bt.substr(1)),Et=Et.substr(0,Et.length-bt.length)),Et&&(this.hostname=Et)}},function(e,s,i){(function(o){const a=i(16),c=i(15),d=i(1)("guidStorage"),h={};e.exports=h;let g,b;const j=function(_e){return!(a(_e.get)&&a(_e.set))},_=function(_e){if(b){_e(null,b);return}g.get(_e)};h.override=$=>{if(j($))throw new Error("The storageInterface argument does not seem to be valid, it must implement get and set methods");g!==$&&(g=$,b&&g.set(b,_e=>{_e&&d.error(`Failed to send initial Guid value (${b}) to the newly assigned Guid Storage. The error was: ${_e}`)}))},h.get=$=>{_((_e,et)=>{if(_e){$(_e);return}et?b||(b=et):(et=c(),g.set(et,ct=>{if(ct){$(ct);return}b=et})),$(null,b)})},h.getAsync=()=>new o(($,_e)=>{h.get((et,ct)=>et?_e(et):$(ct))}),h.override({get($){let _e;try{_e=(typeof window!==void 0?window:commonjsGlobal).localStorage.getItem("opentok_client_id")}catch{_e||(_e=c())}$(null,_e)},set($,_e){try{(typeof window!==void 0?window:commonjsGlobal).localStorage.setItem("opentok_client_id",$)}catch{}_e(null)}}),h.set=$=>{b=$}}).call(this,i(0))},function(e,s){var i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(i){var o=new Uint8Array(16);e.exports=function(){return i(o),o}}else{var a=new Array(16);e.exports=function(){for(var d=0,h;d<16;d++)d&3||(h=Math.random()*4294967296),a[d]=h>>>((d&3)<<3)&255;return a}}},function(e,s){for(var i=[],o=0;o<256;++o)i[o]=(o+256).toString(16).substr(1);function a(c,d){var h=d||0,g=i;return[g[c[h++]],g[c[h++]],g[c[h++]],g[c[h++]],"-",g[c[h++]],g[c[h++]],"-",g[c[h++]],g[c[h++]],"-",g[c[h++]],g[c[h++]],"-",g[c[h++]],g[c[h++]],g[c[h++]],g[c[h++]],g[c[h++]],g[c[h++]]].join("")}e.exports=a},function(e,s,i){const o=i(244),a=i(2),c=i(246),d=i(9),h={};e.exports=h;function g(b){if(typeof b=="string")return b;const j=[];return Object.keys(b).forEach(_=>{j.push(`${encodeURIComponent(_)}=${encodeURIComponent(b[_])}`)}),j.join("&").replace(/\+/g,"%20")}a.name!=="Node"&&(h.request=function(b,j,_){const $=new(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest,_e=j||{};if(!_e.method){_(new Error("No HTTP method specified in options"));return}j.overrideMimeType&&($.overrideMimeType&&$.overrideMimeType(j.overrideMimeType),delete j.overrideMimeType),_&&(o($).on("load",ct=>{const dt=ct.target.status;dt>=200&&(dt<300||dt===304)?_(null,ct):_(ct)}),o($).on("error",_)),$.open(j.method,b,!0),_e.headers||(_e.headers={});for(const ct in _e.headers)Object.prototype.hasOwnProperty.call(_e.headers,ct)&&$.setRequestHeader(ct,_e.headers[ct]);$.send(j.body&&g(j.body))},h.get=function(b,j,_){const $=d(j||{},{method:"GET"});h.request(b,$,_)},h.post=function(b,j,_){const $=d(j||{},{method:"POST"});h.request(b,$,_)},h.getJSON=function(b,j,_){j=j||{};const $=function(ct,dt){if(ct)_(ct,dt&&dt.target&&dt.target.responseText);else{let nt;try{nt=JSON.parse(dt.target.responseText)}catch(it){_(it,dt&&dt.target&&dt.target.responseText);return}_(null,nt,dt)}},_e=d({Accept:"application/json"},j.headers||{});h.get(b,d(j||{},{headers:_e}),$)},c(h))},function(e,s,i){const o=i(245);e.exports=function(a,c){return new o(a,c)}},function(e,s,i){const o=i(16),a={attributes:i(544),css:i(545),classNames:i(550),observers:i(552)},c=/^#([\w-]*)$/,d=function(_){return Array.prototype.slice.call(_)},h=function(_,$){let _e;if(typeof _>"u")return[];if(typeof _=="string"){_e=[];const et=c.exec(_);if($=$||document,et&&et[1]){const ct=$.getElementById(et[1]);ct&&_e.push(ct)}else _e=$.querySelectorAll(_)}else _&&(_.nodeType||(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest&&_ instanceof(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest||_===(typeof window!==void 0?window:commonjsGlobal))?(_e=[_],$=_):Array.isArray(_)?(_e=_.slice(),$=null):_e=d(_e);return _e},g=function(_,$){const _e=h(_,$);this.context=$,this.toArray=function(){return _e},this.length=_e.length,this.first=_e[0],this.last=_e[_e.length-1],this.get=function(et){return et===void 0?_e:_e[et]}};e.exports=g,g._attachToOTHelpers={},g._attachToOTHelpers.removeElement=function(j){return new g(j).remove()},g.prototype.getAsArray=function(){let j=this.get();return o(j.forEach)||(j=d(j)),j},g.prototype.some=function(j,_){return this.getAsArray().some(j,_)},g.prototype.forEach=function(j,_){return this.getAsArray().forEach(j,_),this},g.prototype.map=function(j,_){return new g(this.getAsArray().map(j,_),this.context)},g.prototype.filter=function(j,_){return new g(this.getAsArray().filter(j,_),this.context)},g.prototype.find=function(j){return new g(j,this.first)},g.prototype.on=function(j,_){return this.forEach($=>{$.addEventListener(j,_,!1)})},g.prototype.off=function(j,_){return this.forEach($=>{$.removeEventListener(j,_,!1)})},g.prototype.once=function(j,_){const $=function(){this.off(j,$),_(...arguments)}.bind(this);return this.on(j,$)},g.prototype.appendTo=function(j){if(!j)throw new Error("appendTo requires a DOMElement to append to.");return this.forEach(_=>{j.appendChild(_)})},g.prototype.append=function(){const j=this.first;return j?(Array.prototype.forEach.call(arguments,_=>{j.appendChild(_)}),this):this},g.prototype.prepend=function(){if(arguments.length===0)return this;const j=this.first;let _;return j?(_=Array.prototype.slice.call(arguments),j.firstElementChild||j.appendChild(_.shift()),_.forEach($=>{j.insertBefore($,j.firstElementChild)}),this):this},g.prototype.after=function(j){if(!j)throw new Error("after requires a DOMElement to insert after");return this.forEach(_=>{_.parentElement&&(j!==_.parentNode.lastChild?_.parentElement.insertBefore(_,j):_.parentElement.appendChild(_))})},g.prototype.before=function(j){if(!j)throw new Error("before requires a DOMElement to insert before");return this.forEach(_=>{_.parentElement&&_.parentElement.insertBefore(_,j)})},g.prototype.remove=function(){return this.forEach(j=>{j.parentNode&&j.parentNode.removeChild(j)})},g.prototype.empty=function(){return this.forEach(j=>{for(;j.firstChild;)j.removeChild(j.firstChild)})},g.prototype.isDisplayNone=function(){return this.some(j=>(j.offsetWidth===0||j.offsetHeight===0)&&new g(j).css("display")==="none"?!0:j.parentNode&&j.parentNode.style?new g(j.parentNode).isDisplayNone():!1)};const b=function j(_){return(_.offsetWidth===0||_.offsetHeight===0)&&new g(_).css("display")==="none"?_:_.parentNode&&_.parentNode.style?j(_.parentNode):null};g._attachToOTHelpers.emptyElement=function(j){return new g(j).empty()},g._attachToOTHelpers._findElementWithDisplayNone=b,a.css(g,b),a.attributes(g),a.classNames(g),a.observers(g),["on","off","isDisplayNone","show","hide","css","makeVisibleAndYield","addClass","removeClass"].forEach(j=>{g._attachToOTHelpers[j]=function(){const _=Array.prototype.slice.apply(arguments),$=_.shift(),_e=new g($);return g.prototype[j].apply(_e,_)}})},function(e,s,i){e.exports=function(o){const a={};Object.keys(o).forEach(c=>{a[c]=o[c]}),o._attachToOTHelpers=a}},function(e,s,i){const o=i(16),a=i(6),c=i(1)("Collection");e.exports=function(h){let g=[],b={};const j=h||"id";a(this);const _=function(ct,dt){return o(ct[dt])?ct[dt]():ct[dt]},$=function(ct){this.trigger("update",ct),this.trigger(`update:${ct.target.id}`,ct)}.bind(this),_e=function(ct){this.remove(ct.target,ct.reason)}.bind(this);this.reset=function(){g.forEach(function(et){et.off("updated",$,this),et.off("destroyed",_e,this)},this),g=[],b={}},this.destroy=function(et){g.forEach(ct=>{ct&&typeof ct.destroy=="function"&&ct.destroy(et,!0)}),this.reset(),this.off()},this.get=function(et){return et&&b[et]!==void 0?g[b[et]]:void 0},this.has=function(et){return et&&b[et]!==void 0},this.toString=function(){return g.toString()},this.where=function(et,ct){return o(et)?g.filter(et,ct):g.filter(dt=>{for(const nt in et)if(et.hasOwnProperty(nt)&&_(dt,nt)!==et[nt])return!1;return!0})},this.find=function(et,ct){let dt;o(et)?dt=et:dt=function(it){for(const st in et)if(et.hasOwnProperty(st)&&_(it,st)!==et[st])return!1;return!0},dt=dt.bind(ct);for(let nt=0;nt<g.length;++nt)if(dt(g[nt])===!0)return g[nt];return null},this.forEach=function(et,ct){return g.forEach(et,ct),this},this.map=function(et){return g.map(et)},this.add=function(et){const ct=_(et,j);return this.has(ct)?(c.warn(`Model ${ct} is already in the collection`,g),this):(b[ct]=g.push(et)-1,et.on("updated",$,this),et.on("destroyed",_e,this),this.trigger("add",et),this.trigger(`add:${ct}`,et),this)},this.remove=function(et,ct){const dt=_(et,j);g.splice(b[dt],1);for(let nt=b[dt];nt<g.length;++nt)b[_(g[nt],j)]=nt;return delete b[dt],et.off("updated",$,this),et.off("destroyed",_e,this),this.trigger("remove",et,ct),this.trigger(`remove:${dt}`,et,ct),this},this._triggerAddEvents=function(){this.where.apply(this,arguments).forEach(function(et){this.trigger("add",et),this.trigger(`add:${_(et,j)}`,et)},this)},this.length=function(){return g.length}}},function(e,s,i){const o=i(1)("deprecation");e.exports=function(c,d,h){let g=h===void 0?{}:h,b=g.value,j=g.name,_=j===void 0?`${d}`:j,$=g.getWarning,_e=$===void 0?"":$,et=g.setWarning,ct=et===void 0?"":et,dt=g.canSet,nt=dt===void 0?!1:dt,it=g.warnOnSet,st=it===void 0?!1:it,lt=b,ht=!1,Tt=!st;Object.defineProperty(c,d,{get(){return ht||(ht=!0,o.warn(`${_} is deprecated, and will be removed in the future. ${_e}`.trim())),lt},set(vt){nt&&(lt=vt),Tt||(Tt=!0,nt?o.warn(`${_} is deprecated. ${ct}`.trim()):o.warn(`${_} is deprecated, and will be removed in the future. ${ct}`.trim()))}})}},function(e,s,i){const o=i(2),a=i(11);let c;const d=["description","fileName","lineNumber","message","name","number","stack"],h=function(j,_,$){switch(arguments.length){case 1:a(j)&&($=j,_=void 0,j=void 0);break;case 2:a(_)&&($=_,_=void 0);break}if($ instanceof Error)for(let _e=0,et=d.length;_e<et;++_e)this[d[_e]]=$[d[_e]];else if(a($))for(const _e in $)$.hasOwnProperty(_e)&&(this[_e]=$[_e]);if(!(this.fileName&&this.lineNumber&&this.columnNumber&&this.stack)){const _e=c();!this.fileName&&_e.fileName&&(this.fileName=_e.fileName),!this.lineNumber&&_e.lineNumber&&(this.lineNumber=_e.lineNumber),!this.columnNumber&&_e.columnNumber&&(this.columnNumber=_e.columnNumber),!this.stack&&_e.stack&&(this.stack=_e.stack)}!this.message&&j&&(this.message=j),(!this.name||this.name==="Error")&&_&&(this.name=_)};e.exports=h,h.prototype=Object.create(Error.prototype),h.prototype.toString=function(){let b="";return this.fileName&&(b+=` ${this.fileName}`),this.lineNumber&&(b+=` ${this.lineNumber}`,this.columnNumber&&(b+=`:${this.columnNumber}`)),`<${this.name?`${this.name} `:""}${this.message}${b}>`},h.prototype.valueOf=h.prototype.toString;const g=function(j,_){return _.slice(2).map($=>{const _e={fileName:$.getFileName(),linenumber:$.getLineNumber(),columnNumber:$.getColumnNumber()};return $.getFunctionName()&&(_e.functionName=$.getFunctionName()),$.getMethodName()&&(_e.methodName=$.getMethodName()),$.getThis()&&(_e.self=$.getThis()),_e})};c=function(){const j={};let _,$,_e;switch(o.name){case"Firefox":case"Safari":try{(typeof window!==void 0?window:commonjsGlobal).call.js.is.explody()}catch(dt){_e=dt}_=(_e.stack||"").split(`
`),_.shift(),_.shift(),j.stack=_,$=/@(.+?):([0-9]+)(:([0-9]+))?$/.exec(_[0]),$&&(j.fileName=$[1],j.lineNumber=parseInt($[2],10),$.length>3&&(j.columnNumber=parseInt($[4],10)));break;case"Chrome":case"Node":case"Opera":var et=Error.prepareStackTrace;Error.prepareStackTrace=g,_e=new Error,j.stack=_e.stack,Error.prepareStackTrace=et;var ct=j.stack[0];j.lineNumber=ct.lineNumber,j.columnNumber=ct.columnNumber,j.fileName=ct.fileName,ct.functionName&&(j.functionName=ct.functionName),ct.methodName&&(j.methodName=ct.methodName),ct.self&&(j.self=ct.self);break;default:_e=new Error,_e.stack&&(j.stack=_e.stack.split(`
`));break}return _e.message&&(j.message=_e.message),j}},function(e,s,i){var o={};o.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},o.localCName=o.generateIdentifier(),o.splitLines=function(a){return a.trim().split(`
`).map(function(c){return c.trim()})},o.splitSections=function(a){var c=a.split(`
m=`);return c.map(function(d,h){return(h>0?"m="+d:d).trim()+`\r
`})},o.getDescription=function(a){var c=o.splitSections(a);return c&&c[0]},o.getMediaSections=function(a){var c=o.splitSections(a);return c.shift(),c},o.matchPrefix=function(a,c){return o.splitLines(a).filter(function(d){return d.indexOf(c)===0})},o.parseCandidate=function(a){var c;a.indexOf("a=candidate:")===0?c=a.substring(12).split(" "):c=a.substring(10).split(" ");for(var d={foundation:c[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},h=8;h<c.length;h+=2)switch(c[h]){case"raddr":d.relatedAddress=c[h+1];break;case"rport":d.relatedPort=parseInt(c[h+1],10);break;case"tcptype":d.tcpType=c[h+1];break;case"ufrag":d.ufrag=c[h+1],d.usernameFragment=c[h+1];break;default:d[c[h]]=c[h+1];break}return d},o.writeCandidate=function(a){var c=[];c.push(a.foundation),c.push(a.component),c.push(a.protocol.toUpperCase()),c.push(a.priority),c.push(a.address||a.ip),c.push(a.port);var d=a.type;return c.push("typ"),c.push(d),d!=="host"&&a.relatedAddress&&a.relatedPort&&(c.push("raddr"),c.push(a.relatedAddress),c.push("rport"),c.push(a.relatedPort)),a.tcpType&&a.protocol.toLowerCase()==="tcp"&&(c.push("tcptype"),c.push(a.tcpType)),(a.usernameFragment||a.ufrag)&&(c.push("ufrag"),c.push(a.usernameFragment||a.ufrag)),"candidate:"+c.join(" ")},o.parseIceOptions=function(a){return a.substr(14).split(" ")},o.parseRtpMap=function(a){var c=a.substr(9).split(" "),d={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),d.name=c[0],d.clockRate=parseInt(c[1],10),d.channels=c.length===3?parseInt(c[2],10):1,d.numChannels=d.channels,d},o.writeRtpMap=function(a){var c=a.payloadType;a.preferredPayloadType!==void 0&&(c=a.preferredPayloadType);var d=a.channels||a.numChannels||1;return"a=rtpmap:"+c+" "+a.name+"/"+a.clockRate+(d!==1?"/"+d:"")+`\r
`},o.parseExtmap=function(a){var c=a.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},o.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+(a.direction&&a.direction!=="sendrecv"?"/"+a.direction:"")+" "+a.uri+`\r
`},o.parseFmtp=function(a){for(var c={},d,h=a.substr(a.indexOf(" ")+1).split(";"),g=0;g<h.length;g++)d=h[g].trim().split("="),c[d[0].trim()]=d[1];return c},o.writeFmtp=function(a){var c="",d=a.payloadType;if(a.preferredPayloadType!==void 0&&(d=a.preferredPayloadType),a.parameters&&Object.keys(a.parameters).length){var h=[];Object.keys(a.parameters).forEach(function(g){a.parameters[g]?h.push(g+"="+a.parameters[g]):h.push(g)}),c+="a=fmtp:"+d+" "+h.join(";")+`\r
`}return c},o.parseRtcpFb=function(a){var c=a.substr(a.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},o.writeRtcpFb=function(a){var c="",d=a.payloadType;return a.preferredPayloadType!==void 0&&(d=a.preferredPayloadType),a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(function(h){c+="a=rtcp-fb:"+d+" "+h.type+(h.parameter&&h.parameter.length?" "+h.parameter:"")+`\r
`}),c},o.parseSsrcMedia=function(a){var c=a.indexOf(" "),d={ssrc:parseInt(a.substr(7,c-7),10)},h=a.indexOf(":",c);return h>-1?(d.attribute=a.substr(c+1,h-c-1),d.value=a.substr(h+1)):d.attribute=a.substr(c+1),d},o.parseSsrcGroup=function(a){var c=a.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(d){return parseInt(d,10)})}},o.getMid=function(a){var c=o.matchPrefix(a,"a=mid:")[0];if(c)return c.substr(6)},o.parseFingerprint=function(a){var c=a.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},o.getDtlsParameters=function(a,c){var d=o.matchPrefix(a+c,"a=fingerprint:");return{role:"auto",fingerprints:d.map(o.parseFingerprint)}},o.writeDtlsParameters=function(a,c){var d="a=setup:"+c+`\r
`;return a.fingerprints.forEach(function(h){d+="a=fingerprint:"+h.algorithm+" "+h.value+`\r
`}),d},o.parseCryptoLine=function(a){var c=a.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},o.writeCryptoLine=function(a){return"a=crypto:"+a.tag+" "+a.cryptoSuite+" "+(typeof a.keyParams=="object"?o.writeCryptoKeyParams(a.keyParams):a.keyParams)+(a.sessionParams?" "+a.sessionParams.join(" "):"")+`\r
`},o.parseCryptoKeyParams=function(a){if(a.indexOf("inline:")!==0)return null;var c=a.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},o.writeCryptoKeyParams=function(a){return a.keyMethod+":"+a.keySalt+(a.lifeTime?"|"+a.lifeTime:"")+(a.mkiValue&&a.mkiLength?"|"+a.mkiValue+":"+a.mkiLength:"")},o.getCryptoParameters=function(a,c){var d=o.matchPrefix(a+c,"a=crypto:");return d.map(o.parseCryptoLine)},o.getIceParameters=function(a,c){var d=o.matchPrefix(a+c,"a=ice-ufrag:")[0],h=o.matchPrefix(a+c,"a=ice-pwd:")[0];return d&&h?{usernameFragment:d.substr(12),password:h.substr(10)}:null},o.writeIceParameters=function(a){return"a=ice-ufrag:"+a.usernameFragment+`\r
a=ice-pwd:`+a.password+`\r
`},o.parseRtpParameters=function(a){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},d=o.splitLines(a),h=d[0].split(" "),g=3;g<h.length;g++){var b=h[g],j=o.matchPrefix(a,"a=rtpmap:"+b+" ")[0];if(j){var _=o.parseRtpMap(j),$=o.matchPrefix(a,"a=fmtp:"+b+" ");switch(_.parameters=$.length?o.parseFmtp($[0]):{},_.rtcpFeedback=o.matchPrefix(a,"a=rtcp-fb:"+b+" ").map(o.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase());break}}}return o.matchPrefix(a,"a=extmap:").forEach(function(_e){c.headerExtensions.push(o.parseExtmap(_e))}),c},o.writeRtpDescription=function(a,c){var d="";d+="m="+a+" ",d+=c.codecs.length>0?"9":"0",d+=" UDP/TLS/RTP/SAVPF ",d+=c.codecs.map(function(g){return g.preferredPayloadType!==void 0?g.preferredPayloadType:g.payloadType}).join(" ")+`\r
`,d+=`c=IN IP4 0.0.0.0\r
`,d+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,c.codecs.forEach(function(g){d+=o.writeRtpMap(g),d+=o.writeFmtp(g),d+=o.writeRtcpFb(g)});var h=0;return c.codecs.forEach(function(g){g.maxptime>h&&(h=g.maxptime)}),h>0&&(d+="a=maxptime:"+h+`\r
`),d+=`a=rtcp-mux\r
`,c.headerExtensions&&c.headerExtensions.forEach(function(g){d+=o.writeExtmap(g)}),d},o.parseRtpEncodingParameters=function(a){var c=[],d=o.parseRtpParameters(a),h=d.fecMechanisms.indexOf("RED")!==-1,g=d.fecMechanisms.indexOf("ULPFEC")!==-1,b=o.matchPrefix(a,"a=ssrc:").map(function(et){return o.parseSsrcMedia(et)}).filter(function(et){return et.attribute==="cname"}),j=b.length>0&&b[0].ssrc,_,$=o.matchPrefix(a,"a=ssrc-group:FID").map(function(et){var ct=et.substr(17).split(" ");return ct.map(function(dt){return parseInt(dt,10)})});$.length>0&&$[0].length>1&&$[0][0]===j&&(_=$[0][1]),d.codecs.forEach(function(et){if(et.name.toUpperCase()==="RTX"&&et.parameters.apt){var ct={ssrc:j,codecPayloadType:parseInt(et.parameters.apt,10)};j&&_&&(ct.rtx={ssrc:_}),c.push(ct),h&&(ct=JSON.parse(JSON.stringify(ct)),ct.fec={ssrc:j,mechanism:g?"red+ulpfec":"red"},c.push(ct))}}),c.length===0&&j&&c.push({ssrc:j});var _e=o.matchPrefix(a,"b=");return _e.length&&(_e[0].indexOf("b=TIAS:")===0?_e=parseInt(_e[0].substr(7),10):_e[0].indexOf("b=AS:")===0?_e=parseInt(_e[0].substr(5),10)*1e3*.95-50*40*8:_e=void 0,c.forEach(function(et){et.maxBitrate=_e})),c},o.parseRtcpParameters=function(a){var c={},d=o.matchPrefix(a,"a=ssrc:").map(function(b){return o.parseSsrcMedia(b)}).filter(function(b){return b.attribute==="cname"})[0];d&&(c.cname=d.value,c.ssrc=d.ssrc);var h=o.matchPrefix(a,"a=rtcp-rsize");c.reducedSize=h.length>0,c.compound=h.length===0;var g=o.matchPrefix(a,"a=rtcp-mux");return c.mux=g.length>0,c},o.parseMsid=function(a){var c,d=o.matchPrefix(a,"a=msid:");if(d.length===1)return c=d[0].substr(7).split(" "),{stream:c[0],track:c[1]};var h=o.matchPrefix(a,"a=ssrc:").map(function(g){return o.parseSsrcMedia(g)}).filter(function(g){return g.attribute==="msid"});if(h.length>0)return c=h[0].value.split(" "),{stream:c[0],track:c[1]}},o.parseSctpDescription=function(a){var c=o.parseMLine(a),d=o.matchPrefix(a,"a=max-message-size:"),h;d.length>0&&(h=parseInt(d[0].substr(19),10)),isNaN(h)&&(h=65536);var g=o.matchPrefix(a,"a=sctp-port:");if(g.length>0)return{port:parseInt(g[0].substr(12),10),protocol:c.fmt,maxMessageSize:h};var b=o.matchPrefix(a,"a=sctpmap:");if(b.length>0){var j=o.matchPrefix(a,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(j[0],10),protocol:j[1],maxMessageSize:h}}},o.writeSctpDescription=function(a,c){var d=[];return a.protocol!=="DTLS/SCTP"?d=["m="+a.kind+" 9 "+a.protocol+" "+c.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+c.port+`\r
`]:d=["m="+a.kind+" 9 "+a.protocol+" "+c.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+c.port+" "+c.protocol+` 65535\r
`],c.maxMessageSize!==void 0&&d.push("a=max-message-size:"+c.maxMessageSize+`\r
`),d.join("")},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(a,c,d){var h,g=c!==void 0?c:2;a?h=a:h=o.generateSessionId();var b=d||"thisisadapterortc";return`v=0\r
o=`+b+" "+h+" "+g+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},o.writeMediaSection=function(a,c,d,h){var g=o.writeRtpDescription(a.kind,c);if(g+=o.writeIceParameters(a.iceGatherer.getLocalParameters()),g+=o.writeDtlsParameters(a.dtlsTransport.getLocalParameters(),d==="offer"?"actpass":"active"),g+="a=mid:"+a.mid+`\r
`,a.direction?g+="a="+a.direction+`\r
`:a.rtpSender&&a.rtpReceiver?g+=`a=sendrecv\r
`:a.rtpSender?g+=`a=sendonly\r
`:a.rtpReceiver?g+=`a=recvonly\r
`:g+=`a=inactive\r
`,a.rtpSender){var b="msid:"+h.id+" "+a.rtpSender.track.id+`\r
`;g+="a="+b,g+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" "+b,a.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" "+b,g+="a=ssrc-group:FID "+a.sendEncodingParameters[0].ssrc+" "+a.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return g+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+`\r
`,a.rtpSender&&a.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+`\r
`),g},o.getDirection=function(a,c){for(var d=o.splitLines(a),h=0;h<d.length;h++)switch(d[h]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return d[h].substr(2)}return c?o.getDirection(c):"sendrecv"},o.getKind=function(a){var c=o.splitLines(a),d=c[0].split(" ");return d[0].substr(2)},o.isRejected=function(a){return a.split(" ",2)[1]==="0"},o.parseMLine=function(a){var c=o.splitLines(a),d=c[0].substr(2).split(" ");return{kind:d[0],port:parseInt(d[1],10),protocol:d[2],fmt:d.slice(3).join(" ")}},o.parseOLine=function(a){var c=o.matchPrefix(a,"o=")[0],d=c.substr(2).split(" ");return{username:d[0],sessionId:d[1],sessionVersion:parseInt(d[2],10),netType:d[3],addressType:d[4],address:d[5]}},o.isValidSDP=function(a){if(typeof a!="string"||a.length===0)return!1;for(var c=o.splitLines(a),d=0;d<c.length;d++)if(c[d].length<2||c[d].charAt(1)!=="=")return!1;return!0},e.exports=o},function(e,s,i){e.exports=function(a){return["Chrome","Safari","Edge","Opera"].indexOf(a.browserName)===-1||a.browserName==="Edge"&&!a.isChromiumEdge||a.isScreenSharing&&!a.capableSimulcastScreenshare||a.sessionInfo.p2pEnabled||!a.constraints.video&&!a.isCustomVideoTrack||a.scalableVideo===!1?1:a.videoDimensions.width>640&&a.videoDimensions.height>480?3:2}},function(e,s,i){const o=i(49);e.exports=function(){function a(d,h){var g;let b=h===void 0?{}:h,j=b.requestAnimationFrame,_=j===void 0?(g=window).requestAnimationFrame.bind(g):j;this._lastCalled=o(),this._audioLevel=void 0,this._running=!1,this._requestAnimationFrame=_,this._getAudioLevel=d,this._startLoop()}var c=a.prototype;return c._startLoop=function(){this._running||(this._running=!0,this._requestAnimationFrame(this._loop.bind(this)))},c._loop=function(){this._getAudioLevel((h,g)=>{let b=null;if(!h){for(let j=0;j<g.length;j+=1){const _=g[j];let $=null;if(_.audioOutputLevel!==void 0){const _e=parseFloat(_.audioOutputLevel)/32768;isNaN(_e)||($=_e)}else _.audioLevel!==void 0&&($=_.audioLevel);$!==null&&(b===null||$>b)&&(b=$)}this._audioLevel=b,this._running&&o()-this._lastCalled<1e4?this._requestAnimationFrame(this._loop.bind(this)):this._running=!1}})},c.destroy=function(){this._running=!1},c.sample=function(h){if(typeof h=="function")throw new Error("sample no longer takes a callback");return this._startLoop(),this._lastCalled=o(),this._audioLevel},a}()},function(e,s,i){const o=i(254),a=i(582),c=i(149);function d(j,_,$){return!j.publish&&_?!1:typeof j.source=="boolean"?j.source:$?{mandatory:{sourceId:j.source}}:c(j.source)?{}:{deviceId:{exact:j.source}}}function h(j){let _=d(j.audio,j.enableRenegotiation,j.usingOptionalMandatoryStyle);if(_===!1)return!1;const $=j.usingOptionalMandatoryStyle,_e=j.enableStereo,et=j.echoCancellation,ct=j.noiseSuppression,dt=j.autoGainControl,nt=j.disableAudioProcessing,it=st=>{typeof _=="object"&&($?(o(_,{optional:[]}),_.optional.push(st)):o(_,st))};return(_e||nt||!et||!ct||!dt)&&_===!0&&(_={}),_e&&it({channelCount:2}),["echoCancellation","autoGainControl","noiseSuppression"].forEach(st=>{const lt=!nt&&j[st];it({[st]:lt})}),_}function g(j){let _=d(j.video,j.enableRenegotiation,j.usingOptionalMandatoryStyle);if(_===!1)return!1;const $=j.videoDimensions,_e=j.frameRate,et=j.maxResolution,ct=j.facingMode,dt=j.usingOptionalMandatoryStyle;if(($||_e||et||ct)&&_===!0&&(_={}),$){const nt=$.width,it=$.height;dt?(o(_,{optional:[]}),_.optional.push({minWidth:nt},{maxWidth:nt},{minHeight:it},{maxHeight:it})):o(_,{width:{ideal:nt},height:{ideal:it}})}return _e&&(dt?(o(_,{optional:[]}),_.optional.push({minFrameRate:_e},{maxFrameRate:_e})):o(_,{frameRate:{ideal:_e}})),et&&(dt?o(_,{mandatory:{maxWidth:et.width,maxHeight:et.height}}):o(_,{width:{max:et.width},height:{max:et.height}})),ct&&(dt?(o(_,{optional:[]}),_.optional.push({facingMode:ct})):o(_,{facingMode:{ideal:ct}})),_}function b(j){return{audio:h(j),video:g(j)}}e.exports=function(_){const $=a(_);return{constraints:b($),publishAudio:$.audio.publish,publishVideo:$.video.publish,frameRate:$.frameRate,videoDimensions:$.videoDimensions,audioDeviceId:typeof $.audio.source=="string"?$.audio.source:void 0,videoDeviceId:typeof $.video.source=="string"?$.video.source:void 0}}},function(e,s,i){var o=i(579),a=i(191),c=a(function(d,h,g){o(d,h,g)});e.exports=c},function(e,s,i){var o=i(62),a=i(52);function c(d,h,g){(g!==void 0&&!a(d[h],g)||g===void 0&&!(h in d))&&o(d,h,g)}e.exports=c},function(e,s){function i(o,a){if(!(a==="constructor"&&typeof o[a]=="function")&&a!="__proto__")return o[a]}e.exports=i},function(e,s,i){const o=i(2),a=o.name,c=o.version,d=o.isChromiumEdge;e.exports=d||a==="Chrome"&&c>=72||a==="Firefox"&&c>=66||a==="Opera"&&c>=60||a==="Safari"},function(e,s,i){var o=i(59),a=i(259);function c(d){return a(o(d).toLowerCase())}e.exports=c},function(e,s,i){var o=i(587),a=o("toUpperCase");e.exports=a},function(e,s){function i(o,a,c){var d=-1,h=o.length;a<0&&(a=-a>h?0:h+a),c=c>h?h:c,c<0&&(c+=h),h=a>c?0:c-a>>>0,a>>>=0;for(var g=Array(h);++d<h;)g[d]=o[d+a];return g}e.exports=i},function(e,s){var i="\\ud800-\\udfff",o="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",d=o+a+c,h="\\ufe0e\\ufe0f",g="\\u200d",b=RegExp("["+g+i+d+h+"]");function j(_){return b.test(_)}e.exports=j},function(e,s,i){var o=i(589),a=i(261),c=i(590);function d(h){return a(h)?c(h):o(h)}e.exports=d},function(e,s,i){const o=i(2);e.exports=!!(o.isChrome&&o.version>=74||o.isEdge&&o.version>=79)},function(e,s,i){const o=i(2);e.exports=a=>o.isElectron?a instanceof MediaStreamTrack&&a.label==="Screen":!1},function(e,s,i){var o=i(99),a=i(596),c=a(o);e.exports=c},function(e,s,i){e.exports=15e3},function(e,s,i){e.exports=function(o,a){return a===void 0&&(a=!1),o===void 0?a:o==="true"||o===!0}},function(e,s,i){const o=i(56);e.exports=function(c){const d=o(c);if(d.backgroundImageURI){const h=d.backgroundImageURI.split(":")[0];d.backgroundImageURI=["http","https","data"].indexOf(h)!==-1?h:"other"}return d}},function(e,s,i){const o=i(2);e.exports=()=>!o.isNode&&!o.isElectron?(o.isChrome||o.isOpera||o.isChromiumEdge)&&o.version>=74||o.isFirefox&&o.version>=68||o.isSafari&&o.version>=11:!1},function(e,s){function i(o,a){return e.exports=i=Object.setPrototypeOf||function(d,h){return d.__proto__=h,d},i(o,a)}e.exports=i},function(e,s,i){var o=i(33),a=i(77),c=i(612),d=i(58),h=i(40),g=i(615),b=i(140),j=i(184),_=1,$=2,_e=4,et=b(function(ct,dt){var nt={};if(ct==null)return nt;var it=!1;dt=o(dt,function(lt){return lt=d(lt,ct),it||(it=lt.length>1),lt}),h(ct,j(ct),nt),it&&(nt=a(nt,_|$|_e,g));for(var st=dt.length;st--;)c(nt,dt[st]);return nt});e.exports=et},function(e,s,i){var o=i(205),a=i(35),c=i(96),d=Math.max;function h(g,b,j){var _=g==null?0:g.length;if(!_)return-1;var $=j==null?0:c(j);return $<0&&($=d(_+$,0)),o(g,a(b,3),$)}e.exports=h},function(e,s,i){var o=i(617);function a(c){return c&&c.length?o(c):[]}e.exports=a},function(e,s,i){const o=i(624),a=i(277),c=i(103)();e.exports=(d,h)=>{a(d,(g,b)=>{let j=[];c?typeof b.values=="function"?j=o(b.values()):typeof b.forEach!="function"?j=Object.keys(b).map(_=>b[_]):b.forEach(_=>{j.push(_)}):b.result().forEach(_=>{const $={};_.names().forEach(_e=>{$[_e]=_.stat(_e)}),$.id=_.id,$.type=_.type,$.timestamp=_.timestamp,j.push($)}),h(null,j)})}},function(e,s,i){var o=i(29),a=i(12),c=i(17),d="[object String]";function h(g){return typeof g=="string"||!a(g)&&c(g)&&o(g)==d}e.exports=h},function(e,s,i){var o=i(626),a=i(30);function c(d){return d==null?[]:o(d,a(d))}e.exports=c},function(e,s,i){const o=i(103)(),a=(h,g)=>{h.getStats(null).then(b=>g(null,b)).catch(g)},c=(h,g)=>{h.getStats(b=>{g(null,b)},g)},d=(h,g)=>{(o?a:c)(h,g)};e.exports=d},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(48)),c=i(18),d=o(i(37)),h=o(i(638)),g=o(i(640)),b=o(i(49)),j=o(i(1));const _=(0,j.default)("QoS");let $=function(et){(0,a.default)(ct,et);function ct(){for(var nt,it=arguments.length,st=new Array(it),lt=0;lt<it;lt++)st[lt]=arguments[lt];return nt=et.call(this,...st)||this,nt._peerConnection=void 0,nt._isPublisher=void 0,nt.timeoutId=void 0,nt._creationTime=(0,b.default)(),nt.offerMessagesReceived=0,nt.prevStats={timeStamp:(0,b.default)()},nt.changeCounters={videoCodec:new g.default,audioCodec:new g.default},nt}var dt=ct.prototype;return dt.startCollecting=function(it,st){if(!it||!it.getStats)return;this._isPublisher=st;const lt=!!this._peerConnection;if(this._peerConnection=it,lt)return;const ht=Tt=>{const Rt=(0,b.default)(),vt={timeStamp:Rt,duration:Math.round((Rt-this._creationTime)/1e3),period:Math.round((Rt-this.prevStats.timeStamp)/1e3)};(0,h.default)(this._peerConnection,this.prevStats,vt,this._isPublisher,(Et,bt)=>{if(Et){_.error("Failed to Parse QOS Stats:",Et);return}this.handleParsedStats(bt),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>ht(ct.INTERVAL),Tt)})};this.timeoutId=setTimeout(()=>ht(ct.INTERVAL-ct.INITIAL_INTERVAL),ct.INITIAL_INTERVAL)},dt.stopCollecting=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this._peerConnection=null},dt.handleOfferMessageReceived=function(){this.offerMessagesReceived+=1},dt.handleParsedStats=function(it){Object.keys(this.changeCounters).forEach(ht=>{this.changeCounters[ht].onValue(it[ht]),it[`${ht}ChangeCount`]=this.changeCounters[ht].changeCount}),it.offerMessagesReceived=this.offerMessagesReceived;const st=(0,d.default)(it);if(["audioSentBytes","audioSentPackets","audioSentPacketsLost","videoSentBytes","videoSentPackets","videoSentPacketsLost","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost"].forEach(ht=>{st[ht]=this.prevStats&&this.prevStats[ht]?it[ht]-this.prevStats[ht]:it[ht]}),this.prevStats&&this.prevStats.videoFramesReceived){const ht=it.videoFramesReceived-this.prevStats.videoFramesReceived,Tt=it.period;st.videoFrameRateReceived=Math.round(ht/Tt)}this.prevStats=it,delete st.framesDecoded,delete st.framesEncoded,this.emit("stats",st)},ct}(c.EventEmitter);$.INITIAL_INTERVAL=1e3,$.INTERVAL=3e4;var _e=$;s.default=_e},function(e,s,i){e.exports=o=>{switch(o>>24){case 0:return"TURN/TLS";case 1:return"TURN/TCP";case 2:return"TURN/UDP";default:return""}}},function(e,s,i){const o=i(15),a=i(159),c=a.default,d=i(7),h=i(13);e.exports=function(b){let j=b===void 0?{}:b,_=j.haveGetDisplayMedia,$=_===void 0?c:_,_e=j.global,et=_e===void 0?typeof window!==void 0?window:commonjsGlobal:_e,ct=j.Errors,dt=ct===void 0?d:ct,nt=j.otError,it=nt===void 0?h():nt;const st=!$&&!!et.navigator.webkitGetUserMedia&&!et.navigator.userAgent.match(/android/i)&&typeof et.chrome<"u";return{isSupportedInThisBrowser:st,autoRegisters:!1,extensionRequired:!0,getConstraintsShowsPermissionUI:!0,sources:{screen:!0,application:!1,window:!0,browser:!0},register(lt,ht){return ht===2?this.registerVersion2(lt):this.registerVersion1(lt)},registerVersion1(lt){if(!lt)throw new Error("initChromeScreenSharingExtensionHelper: extensionID is required.");const ht=st,Tt={};let Rt;const vt=`com.tokbox.screenSharing.${lt}`,Et=function(Nt,Jt){const zt={payload:Jt,from:"jsapi"};return zt[vt]=Nt,zt},bt=function(Nt,Jt){let zt;const nn=o();return Tt[nn]=function(){clearTimeout(zt),zt=null,Nt(...arguments)},Jt&&(zt=setTimeout(()=>{delete Tt[nn],Nt(it(dt.TIMEOUT,new Error("Timeout waiting for response to screensharing request.")))},Jt)),nn},Ct=function(Nt){if(!Nt)throw new Error("isAvailable: callback is required.");if(!ht){setTimeout(Nt.bind(null,!1));return}if(Rt!==void 0)setTimeout(Nt.bind(null,Rt));else{const Jt=bt(nn=>{Rt!==!0&&(Rt=nn==="extensionLoaded"),Nt(Rt)},2e3),zt=Et("isExtensionInstalled",{requestId:Jt});et.postMessage(zt,"*")}},Ut=function(Nt,Jt,zt){if(!zt)throw new Error("getSourceId: callback is required");Ct(nn=>{if(!nn)return zt(it(dt.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));const Bt=bt((sn,qt)=>{typeof sn=="object"&&sn.name&&sn.stack?zt(sn):sn==="permissionDenied"?zt(it(dt.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):(Jt.video||(Jt.video={}),Jt.video.mandatory||(Jt.video.mandatory={}),Jt.video.mandatory.chromeMediaSource="desktop",Jt.video.mandatory.chromeMediaSourceId=qt.sourceId,zt(void 0,Jt))});et.postMessage(Et("getSourceId",{requestId:Bt,source:Nt}),"*")})};return et.addEventListener("message",Xt=>{if(Xt.origin!==et.location.origin||!(Xt.data!=null&&typeof Xt.data=="object")||Xt.data.from!=="extension")return;const Nt=Xt.data[vt],Jt=Xt.data.payload;if(Jt&&Jt.requestId){const zt=Tt[Jt.requestId];delete Tt[Jt.requestId],zt&&zt(Nt,Jt)}Nt==="extensionLoaded"&&(Rt=!0)}),{extensionAPIVersion:1,extensionID:lt,isInstalled:Ct,getConstraints:Ut}},registerVersion2(lt){const ht=st&&typeof et.chrome.runtime<"u",Tt=function(Et){if(!Et)throw new Error("isAvailable: callback is required.");if(!ht){setTimeout(Et.bind(null,!1));return}et.chrome.runtime.sendMessage(lt,{type:"isInstalled"},null,bt=>{setTimeout(Et.bind(null,!!bt))})};return{extensionAPIVersion:2,extensionID:lt,isInstalled:Tt,getConstraints:function(Et,bt,Ct){if(!Ct)throw new Error("getSourceId: callback is required");Tt(Ut=>{if(!Ut)return Ct(it(dt.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));et.chrome.runtime.sendMessage(lt,{type:"getSourceId",source:Et},null,Xt=>{Xt.error==="permissionDenied"?Ct(it(dt.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):Xt.error?Ct(new Error(`UnexpectError: ${Xt.error}`)):(bt.video||(bt.video={}),bt.video.mandatory||(bt.video.mandatory={}),bt.video.mandatory.chromeMediaSource="desktop",bt.video.mandatory.chromeMediaSourceId=Xt.sourceId,Ct(void 0,bt))})})}}}}}},function(e,s,i){(function(o){const a=i(155),c=i(104);e.exports=function(h){h===void 0&&(h={});const g=h.Archiving||i(645),b=h.AudioLevelMeter||i(282),j=h.AudioLevelTransformer||i(144),_=h.BackingBar||i(283),$=h.Chrome||i(145),_e=h.MuteButton||i(284)(),et=h.NamePanel||i(285),ct=h.VideoDisabledIndicator||i(286),dt=h.StylableComponent||i(152),nt=h.logging||i(1)("createChromeMixin");return function(st,lt){let ht=lt===void 0?{}:lt,Tt=ht.name,Rt=ht.publishAudio,vt=ht.publishVideo,Et=ht.audioSource,bt=ht.showControls,Ct=ht.shouldAllowAudio,Ut=ht.logAnalyticsEvent,Xt,Nt,Jt;const zt={},nn=a(),Bt=Kt=>{if(Kt===!1)return"off";const $t=st.getStyle("buttonDisplayMode");return $t===!1?"on":$t};let sn=new o((Kt,$t)=>{zt.init=Sn=>{st.getStyle("showArchiveStatus")||Ut("showArchiveStatus","createChrome",{mode:"off"});const On={backingBar:new _({nameMode:Tt?st.getStyle("nameDisplayMode"):"off",muteMode:Bt(st.getStyle("buttonDisplayMode"))}),name:new et({name:Tt,mode:st.getStyle("nameDisplayMode")}),archive:new g({show:!!st.getStyle("showArchiveStatus")&&st.getStyle("archiveStatusDisplayMode")!=="off",archiving:!1}),muteButton:new _e({muted:Rt===!1,mode:Bt.call(null,st.getStyle("buttonDisplayMode"))})};Xt=new b({mode:st.getStyle("audioLevelDisplayMode")});const tn=new j,bn=new c(()=>{const dn=Rt?tn.transform(st.loudness):0;Xt.setValue(dn)});Xt.watchVisibilityChanged(dn=>{dn?bn.start():bn.stop()}),Xt.audioOnly(!vt&&Rt),On.audioLevel=Xt,On.videoDisabledIndicator=new ct({mode:st.getStyle("videoDisabledDisplayMode")}),Sn&&Sn.domElement&&(Jt=Sn,Nt=new $({parent:Jt.domElement}).set(On).on({muted:()=>st.publishAudio(!1),unmuted:()=>st.publishAudio(!0)}),(Et===null||Et===!1)&&zt.removeAudioTrack(),Kt())},zt.reset=()=>{$t(new Error("Chrome still being created")),Nt&&(Nt.destroy(),Nt=null)},zt.destroy=()=>{zt.reset(),nn.releaseAll(),sn=null}});sn.catch(Kt=>{(!Kt||Kt.message!=="Chrome still being created")&&nt.error("createChromeMixin failed to setup UI",Kt)}),zt.setAudioOnly=Kt=>{Xt&&Xt.audioOnly(Kt)},zt.setArchivingStatus=Kt=>{Nt&&Nt.archive.setArchiving(Kt)},zt.setMuted=Kt=>{Nt&&Nt.muteButton&&Nt.muteButton.muted(Kt)},zt.removeAudioTrack=()=>{Nt&&Nt.muteButton&&Nt.muteButton.remove()},zt.addAudioTrack=()=>{Nt&&Nt.muteButton&&Nt.muteButton.add()},zt.videoDisabledIndicator={disableVideo:function(){for(var $t,Sn=arguments.length,On=new Array(Sn),tn=0;tn<Sn;tn++)On[tn]=arguments[tn];return($t=Nt)==null?void 0:$t.videoDisabledIndicator.disableVideo(...On)},setWarning:function(){for(var $t,Sn=arguments.length,On=new Array(Sn),tn=0;tn<Sn;tn++)On[tn]=arguments[tn];return($t=Nt)==null?void 0:$t.videoDisabledIndicator.setWarning(...On)}},dt(st,{showArchiveStatus:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioLevelDisplayMode:Ct?"auto":"off",archiveStatusDisplayMode:"auto",backgroundImageURI:null},bt,Kt=>{Ut("SetStyle","Publisher",Kt,null,.1)});const qt=(Kt,$t)=>{sn.then(()=>{switch(Kt){case"nameDisplayMode":Nt.name.setDisplayMode($t),Nt.backingBar.setNameMode($t);break;case"showArchiveStatus":Ut("showArchiveStatus","styleChange",{mode:$t?"on":"off"}),Nt.archive.setShowArchiveStatus(!!$t);break;case"archiveStatusDisplayMode":Nt.archive.setShowArchiveStatus($t!=="off");break;case"buttonDisplayMode":Nt.muteButton.setDisplayMode($t),Nt.backingBar.setMuteMode($t);break;case"audioLevelDisplayMode":Nt.audioLevel.setDisplayMode($t);break;case"backgroundImageURI":Jt.setBackgroundImageURI($t);break}})};return st.on("styleValueChanged",qt),nn.add(()=>st.off("styleValueChanged",qt)),zt}}}).call(this,i(0))},function(e,s,i){(function(o){const a=i(105),c=i(36),d=i(8),h=i(18);e.exports=function(b){const j=this,_=new h;let $,_e,et,ct,dt=!0,nt=!1,it="auto";const st=b.maxValue||1,lt=b.minValue||0;function ht(){_e=d.createElement("div",{className:"OT_audio-level-meter__value"},""),$=d.createElement("div",{className:"OT_audio-level-meter__audio-only-img"},"");const bt=j.domElement;bt.appendChild($),bt.appendChild(_e),j.watchVisibilityChanged(Ct=>{Ct?d.removeClass(j.domElement,"OT_hide-forced"):d.addClass(j.domElement,"OT_hide-forced")})}function Tt(){_.removeAllListeners("visibilityChanged")}function Rt(){const bt=(et-lt)/(st-lt);_e.style.transform=`scale(${Math.sqrt(bt)})`}function vt(){const bt=(nt&&it==="auto"||it==="on")&&dt;ct!==bt&&(ct=bt,_.emit("visibilityChanged",bt))}a(j,{audioOnly:{get(){return nt},set(bt){nt=bt,vt()}}}),j.setValue=function(bt){et=bt,Rt()},j.watchVisibilityChanged=function(bt){return _.on("visibilityChanged",bt),o.resolve().then(()=>{bt(ct)}),function(){_.removeListener("visibilityChanged",bt)}};const Et={mode:b?b.mode:"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-level-meter"},onCreate:ht,onDestroy:Tt};c(this,Et),j.setDisplayMode=function(bt){it=bt,vt()},j.getDisplayMode=function(){return it},j.showAfterLoading=function(){dt=!0,vt()},j.hideWhileLoading=function(){dt=!1,vt()},vt()}}).call(this,i(0))},function(e,s,i){const o=i(36);e.exports=function(c){let d=c.nameMode,h=c.muteMode;function g(){return d==="on"||h==="on"?"on":d==="mini"||h==="mini"?"mini":d==="mini-auto"||h==="mini-auto"?"mini-auto":d==="auto"||h==="auto"?"auto":"off"}o(this,{mode:g(),nodeName:"div",htmlContent:"",htmlAttributes:{className:"OT_bar OT_edge-bar-item"}}),this.setNameMode=function(b){d=b,this.setDisplayMode(g())},this.setMuteMode=function(b){h=b,this.setDisplayMode(g())}}},function(e,s,i){const o=i(8),a=i(36),c=i(105);e.exports=function(h){h===void 0&&(h={});const g=h.OTHelpers||o,b=h.Widget||a;return function(_){let $=_.muted||!1;const _e=()=>{$?g.addClass(this.domElement,"OT_active"):g.removeClass(this.domElement,"OT_active ")},et=()=>($=!$,_e(),$?this.parent.trigger("muted",this):this.parent.trigger("unmuted",this),!1),ct=st=>{g.on(st,"click",et)},dt=st=>{g.off(st,"click",et)};c(this,{muted:{get(){return $},set(st){$=st,_e()}}});const nt=$?"OT_edge-bar-item OT_mute OT_active":"OT_edge-bar-item OT_mute";b(this,{mode:_.mode,nodeName:"button",htmlContent:"Mute",htmlAttributes:{className:nt,type:"button"},onCreate:ct,onDestroy:dt});let it;this.remove=()=>{this.domElement&&this.domElement.parentNode&&(it=this.domElement.parentNode,this.domElement.parentNode.removeChild(this.domElement))},this.add=()=>{it&&this.domElement&&!this.domElement.parentNode&&it.appendChild(this.domElement)}}}},function(e,s,i){const o=i(36),a=c=>{const d=document.createElement("div");return d.textContent=c,d.innerHTML};e.exports=function(d){let h=d.name;(!h||h.trim().length==="")&&(h=null,d.mode="off"),this.setName=function(g){h||this.setDisplayMode("auto"),h=a(g),this.domElement.innerHTML=h}.bind(this),h=a(h),o(this,{mode:d.mode,nodeName:"h1",htmlContent:h,htmlAttributes:{className:"OT_name OT_edge-bar-item"}})}},function(e,s,i){const o=i(36),a=i(8);e.exports=function(d){let h=!1,g=!1;const b=function(_){const $=["auto","on"].indexOf(this.getDisplayMode())>-1;a.removeClass(_,"OT_video-disabled OT_video-disabled-warning OT_active"),$&&(h?a.addClass(_,"OT_video-disabled"):g&&a.addClass(_,"OT_video-disabled-warning"),a.addClass(_,"OT_active"))}.bind(this);this.disableVideo=function(_){h=_,_===!0&&(g=!1),b(this.domElement)},this.setWarning=function(_){g=_,b(this.domElement)},o(this,{mode:d.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-disabled-indicator"}});const j=this.setDisplayMode.bind(this);this.setDisplayMode=function(_){j(_),b(this.domElement)}}},function(e,s,i){e.exports=function(a){a===void 0&&(a={});const c=a.global||(typeof window!==void 0?window:commonjsGlobal);return function(){if(c.navigator.mediaDevices){const h=c.navigator.mediaDevices;return h.enumerateDevices&&h.enumerateDevices.bind(h)}}}},function(e,s,i){const o=i(2),a=i(159).default,c=()=>!o.isLegacyEdge&&!o.isElectron&&a&&!o.isAndroid;e.exports={isSupportedInThisBrowser:c(),autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:o.name!=="Safari",browser:o.name!=="Safari"},register(){return{isInstalled(d){d(void 0)},getConstraints(d,h,g){g(void 0,{video:h.video,audio:h.audio})}}}}},function(e,s,i){const o=a=>a&&typeof a=="object"&&typeof a.kind=="string"&&typeof a.stop=="function"&&typeof a.enabled=="boolean";s.isMediaStreamTrack=o},function(e,s,i){i.r(s),function(o){var a=function(b,j,_,$){return new(_||(_=o))(function(_e,et){function ct(it){try{nt($.next(it))}catch(st){et(st)}}function dt(it){try{nt($.throw(it))}catch(st){et(st)}}function nt(it){it.done?_e(it.value):new _(function(st){st(it.value)}).then(ct,dt)}nt(($=$.apply(b,j||[])).next())})},c=function(b,j){var _={label:0,sent:function(){if(et[0]&1)throw et[1];return et[1]},trys:[],ops:[]},$,_e,et,ct;return ct={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ct[Symbol.iterator]=function(){return this}),ct;function dt(it){return function(st){return nt([it,st])}}function nt(it){if($)throw new TypeError("Generator is already executing.");for(;_;)try{if($=1,_e&&(et=_e[it[0]&2?"return":it[0]?"throw":"next"])&&!(et=et.call(_e,it[1])).done)return et;switch(_e=0,et&&(it=[0,et.value]),it[0]){case 0:case 1:et=it;break;case 4:return _.label++,{value:it[1],done:!1};case 5:_.label++,_e=it[1],it=[0];continue;case 7:it=_.ops.pop(),_.trys.pop();continue;default:if(et=_.trys,!(et=et.length>0&&et[et.length-1])&&(it[0]===6||it[0]===2)){_=0;continue}if(it[0]===3&&(!et||it[1]>et[0]&&it[1]<et[3])){_.label=it[1];break}if(it[0]===6&&_.label<et[1]){_.label=et[1],et=it;break}if(et&&_.label<et[2]){_.label=et[2],_.ops.push(it);break}et[2]&&_.ops.pop(),_.trys.pop();continue}it=j.call(b,_)}catch(st){it=[6,st],_e=0}finally{$=et=0}if(it[0]&5)throw it[1];return{value:it[0]?it[1]:void 0,done:!0}}};function d(){return typeof window<"u"||typeof window!==void 0?window:commonjsGlobal}var h="onFailure must return boolean, or delay in ms";function g(b,j,_){return _===void 0&&(_=10),function(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return a(this,void 0,void 0,function(){var et,ct,dt;return c(this,function(nt){switch(nt.label){case 0:et=0,ct=function(){var it,st,lt;return c(this,function(ht){switch(ht.label){case 0:return ht.trys.push([0,2,,6]),it={},[4,b.apply(void 0,$)];case 1:return[2,(it.value=ht.sent(),it)];case 2:if(st=ht.sent(),lt=j(st,et),lt===!1||lt==null||et>=_)throw st;return typeof lt!="number"?[3,4]:[4,new o(function(Tt){return d().setTimeout(Tt,lt)})];case 3:return ht.sent(),[3,5];case 4:if(lt!==!0)throw new Error(h);ht.label=5;case 5:return[3,6];case 6:return[2]}})},nt.label=1;case 1:return(et+=1)?[5,ct()]:[3,3];case 2:return dt=nt.sent(),typeof dt=="object"?[2,dt.value]:[3,1];case 3:return[2]}})})}}s.default=g}.call(this,i(0))},function(e,s,i){const o=i(1)("videoContentHint"),a=["","text","motion","detail"],c=b=>a.includes(b),d=b=>{var j;return b==null||(j=b.getVideoTracks())==null?void 0:j[0]},h=(b,j)=>{if(!c(j)){o.warn('Invalid content hint. Valid content hints are "text", "detail", "motion", or ""');return}const _=d(b);if(!_){o.warn("Tried to set contentHint but no video track is present");return}if(_.contentHint===void 0){o.warn("contentHint not supported by this browser");return}_.contentHint=j},g=b=>{const j=d(b);return(j==null?void 0:j.contentHint)||""};e.exports={isValidVideoContentHint:c,setVideoContentHint:h,getVideoContentHint:g}},function(e,s,i){const o=i(105);e.exports=function(){return function(d,h){let g;o(this,{muted:{get(){return g},set(b){if(g===b)return;g=b;const j=d.getAudioTracks();for(let _=0,$=j.length;_<$;++_)j[_].enabled=!g}}}),h!==void 0?this.muted(h===!0):d.getAudioTracks().length?this.muted(!d.getAudioTracks()[0].enabled):this.muted(!1)}}},function(e,s,i){e.exports=function(a){a===void 0&&(a={});const c=a.Errors||i(7),d=a.otError||i(13)(),h={};return(typeof window!==void 0?window:commonjsGlobal).MediaError&&(h[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_ABORTED]={name:c.MEDIA_ERR_ABORTED,message:"The fetching process for the media resource was aborted by the user agent at the user's request."},h[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_NETWORK]={name:c.MEDIA_ERR_NETWORK,message:"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable."},h[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_DECODE]={name:c.MEDIA_ERR_DECODE,message:"An error of some description occurred while decoding the media resource, after the resource was established to be usable."},h[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]={name:c.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"The media resource indicated by the src attribute was not suitable."}),function(b){const j=h[b.code];return j?d(j.name,new Error(`There was an unexpected problem with the Video Stream: ${j.message}`)):new Error(`An unknown error occurred${b.message?`: ${b.message}`:"."}`)}}},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5));const h=i(6),g=i(61),b=i(656),j=i(657),_=i(658),$=i(107),_e=i(2),et=i(24)(),ct=et.hasAudioOutputApiSupport,dt=i(295),nt=i(106),it=nt.getCurrentAudioOutputDeviceId;function st(Tt,Rt){const vt=document.createElement("video");return j(vt),vt.autoplay=!0,vt.playsinline=!0,vt.innerHTML=Tt,vt.setAttribute("autoplay",""),vt.setAttribute("playsinline",""),Rt===!0&&(vt.muted="true"),vt}function lt(){const Tt=st("");return Tt.setAttribute("style","display:none"),Tt}function ht(Tt){Tt===void 0&&(Tt={});const Rt=Tt.audioContext||i(158)(),vt=Tt.canBeOrientatedMixin||i(659),Et=Tt.document||(typeof window!==void 0?window:commonjsGlobal).document,bt=Tt.listenForTracksEnded||i(660)(),Ct=Tt.logging||i(1),Ut=Tt.OTHelpers||i(8),Xt=Tt.videoElementErrorMap||i(293)(),Nt=Tt.WebaudioAudioLevelSampler||i(146),Jt=Tt.global||(typeof window!==void 0?window:commonjsGlobal);let zt=1;return function(){function Bt(qt,Kt){var $t=this;let Sn=qt._inject,On=Sn===void 0?{}:Sn,tn=On.createVideoElement,bn=tn===void 0?st:tn,dn=On.createAudioOnlyVideoElement,Mn=dn===void 0?lt:dn,$n=qt.muted,Un=qt.fallbackText,Fn=qt.widgetType;this._domElement=void 0,this._domAudioOnlyVideoElement=void 0,this._blockedVolume=void 0,this._mediaStoppedListener=void 0,this._audioLevelSampler=void 0,this._playInterrupts=0,this._isVideoLoadedMetaData=!1,this._audioOnlyVideoElementWatcher=void 0,this._blinkStartTime=null,this.logging=Ct(`NativeVideoElementWrapper:${zt}`),zt+=1,h(this),this._defaultAudioVolume=Kt,this._widgetType=Fn,this._emitVideoPlayAttempt=()=>{this._blinkStartTime=new Date().getTime(),this.trigger("amrLogEvent","AMRTransitionVideo","Attempt")},this._emitVideoPlaySuccess=()=>{const Er=new Date().getTime()-this._blinkStartTime;this.trigger("amrLogEvent","AMRTransitionVideo","Success",{attemptDuration:Er}),this._blinkStartTime=null},this._emitVideoPlayFailure=()=>{this.trigger("amrLogEvent","AMRTransitionVideo","Failure")};let cr=!1;const or=()=>{cr||(this.logging.warn("Video element paused, auto-resuming. If you intended to do this, use publishVideo(false) or subscribeToVideo(false) instead."),cr=!0),this.play()};this._domElement=bn(Un,$n),this.trigger("videoElementCreated",this._domElement),this._domElementEvents=g(this._domElement),this._domElementEvents.on("loadstart",()=>this._onDomElementLoadStart()),this._domElementEvents.on("timeupdate",function(){for(var Er=arguments.length,Zr=new Array(Er),po=0;po<Er;po++)Zr[po]=arguments[po];return $t.trigger("timeupdate",...Zr)}),this._domElementEvents.on("loadedmetadata",(0,d.default)(c.default.mark(function Er(){var Zr,po,lr,pr,Vn=arguments;return c.default.wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:for($t._isVideoLoadedMetaData=!0,Zr=Vn.length,po=new Array(Zr),lr=0;lr<Zr;lr++)po[lr]=Vn[lr];if($t.trigger("loadedmetadata",...po),!$t._domAudioOnlyVideoElement){zn.next=10;break}if(pr=$t._domAudioOnlyVideoElement.srcObject,$t._removeAudioOnlyVideoElement(),!pr){zn.next=10;break}return zn.next=9,dt();case 9:$t.play();case 10:case"end":return zn.stop()}},Er)})));const wr=Er=>{this.trigger("error",Xt(Er.target.error))};this._domElementEvents.on("error",wr,!1),this._domElementEvents.on("pause",or),this.on("destroyed",()=>{this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll()}),vt(this,()=>this._domElement),_e.isSafari&&this._widgetType==="subscriber"&&(this._domAudioOnlyVideoElement=Mn(),this._bindAudioOnlyVideoElementEvents())}var sn=Bt.prototype;return sn._onDomElementLoadStart=function(){var qt=(0,d.default)(c.default.mark(function $t(){return c.default.wrap(function(On){for(;;)switch(On.prev=On.next){case 0:if(!(this._widgetType==="subscriber"&&ct())){On.next=3;break}return On.next=3,this._setActiveAudioOutputDevice();case 3:case"end":return On.stop()}},$t,this)}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn._setActiveAudioOutputDevice=function(){var qt=(0,d.default)(c.default.mark(function $t(){var Sn;return c.default.wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(Sn=it(),!(Sn===""||Sn==="default")){tn.next=3;break}return tn.abrupt("return");case 3:return tn.next=5,this.setSinkId(Sn);case 5:case"end":return tn.stop()}},$t,this)}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn._rebindSrcObject=function(){this._domElement&&(this._domElement.srcObject=this._domElement.srcObject)},sn._pauseAndPlay=function(){this._domElement&&(this._domElement.pause(),this._domElement.play())},sn._startAudioOnlyVideoElementWatcher=function(){var qt=(0,d.default)(c.default.mark(function $t(){var Sn,On;return c.default.wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return Sn=1e3,On=_e.isiOS,this._audioOnlyVideoElementWatcher=setInterval(()=>{this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.paused&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject,On&&this._domAudioOnlyVideoElement.play())},100),bn.next=5,$(Sn);case 5:clearInterval(this._audioOnlyVideoElementWatcher),this._audioOnlyVideoElementWatcher=null;case 7:case"end":return bn.stop()}},$t,this)}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn._removeAudioOnlyVideoElement=function(){var qt=(0,d.default)(c.default.mark(function $t(){return c.default.wrap(function(On){for(;;)switch(On.prev=On.next){case 0:this._domAudioOnlyVideoElement.srcObject=null,this._domAudioOnlyVideoElement.parentNode.removeChild(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._domAudioOnlyVideoElement=null;case 4:case"end":return On.stop()}},$t,this)}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn.bindAudioTrackOnly=function(){var qt=(0,d.default)(c.default.mark(function $t(){var Sn,On,tn,bn,dn,Mn,$n;return c.default.wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return Sn=this._stream.getVideoTracks(),On=this._stream.getAudioTracks(),tn=Sn[0],bn=tn===void 0?{}:tn,dn=On[0],Mn=dn===void 0?{}:dn,Fn.next=6,dt();case 6:$n=!bn.enabled&&Mn.enabled,!this._isVideoLoadedMetaData&&$n&&this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=new Jt.MediaStream(On),this._startAudioOnlyVideoElementWatcher());case 8:case"end":return Fn.stop()}},$t,this)}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn._bindAudioOnlyVideoElementEvents=function(){var Kt=this;this._domAudioOnlyVideoElementEvents=g(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents.on("pause",()=>this.play()),this._domAudioOnlyVideoElementEvents.on("timeupdate",function(){for(var $t=arguments.length,Sn=new Array($t),On=0;On<$t;On++)Sn[On]=arguments[On];return Kt.trigger("timeupdate",...Sn)}),this._domAudioOnlyVideoElementEvents.on("loadedmetadata",function(){for(var $t=arguments.length,Sn=new Array($t),On=0;On<$t;On++)Sn[On]=arguments[On];return Kt.trigger("loadedmetadata",...Sn)})},sn.whenTimeIncrements=function(Kt,$t){this.once("timeupdate",()=>{Kt.call($t,this)})},sn.domElement=function(){return this._domElement},sn.videoWidth=function(){return this._domElement?Number(this._domElement[`video${this.isRotated()?"Height":"Width"}`]):0},sn.videoHeight=function(){return this._domElement?Number(this._domElement[`video${this.isRotated()?"Width":"Height"}`]):0},sn.aspectRatio=function(){return this.videoWidth()/this.videoHeight()},sn.imgData=function(){const Kt=Ut.createElement("canvas",{width:this.videoWidth(),height:this.videoHeight(),style:{display:"none"}});Et.body.appendChild(Kt);let $t=null;try{Kt.getContext("2d").drawImage(this._domElement,0,0,Kt.width,Kt.height),$t=Kt.toDataURL("image/png")}catch{}return Ut.removeElement(Kt),$t===null||$t==="data:,"?(this.logging.warn("Cannot get image data yet"),null):$t.replace("data:image/png;base64,","").trim()},sn.appendTo=function(Kt){return Kt.appendChild(this._domElement),this._domAudioOnlyVideoElement&&Kt.appendChild(this._domAudioOnlyVideoElement),this},sn.isAudioBlocked=function(){return this._blockedVolume!==void 0},sn.unblockAudio=function(){var qt=(0,d.default)(c.default.mark(function $t(){var Sn;return c.default.wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(this.isAudioBlocked()){tn.next=3;break}return this.logging.warn("Unexpected call to unblockAudio() without blocked audio"),tn.abrupt("return");case 3:return Sn=this._blockedVolume,this._blockedVolume=void 0,this.setAudioVolume(Sn),tn.prev=6,tn.next=9,this.play();case 9:tn.next=16;break;case 11:throw tn.prev=11,tn.t0=tn.catch(6),this._blockedVolume=Sn,this._domElement.muted=!0,tn.t0;case 16:this.trigger("audioUnblocked");case 17:case"end":return tn.stop()}},$t,this,[[6,11]])}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn.rebind=function(){var qt=(0,d.default)(c.default.mark(function $t(){return c.default.wrap(function(On){for(;;)switch(On.prev=On.next){case 0:if(this._domElement){On.next=2;break}throw new Error("Can't rebind because _domElement no longer exists");case 2:this._playInterrupts++,this._domElement.srcObject=this._domElement.srcObject,this._hasAudioOnlyVideoElement()&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject);case 5:case"end":return On.stop()}},$t,this)}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn._createAudioLevelSampler=function(){if(this._removeAudioLevelSampler(),this._stream.getAudioTracks().length>0){try{this._audioContext=Rt()}catch(Kt){this.logging.warn("Failed to get AudioContext(), audio level visualisation will not work",Kt)}this._audioContext&&(this._audioLevelSampler=new Nt(this._audioContext),this._audioLevelSampler.webRTCStream(this._stream))}},sn._removeAudioLevelSampler=function(){this._audioContext&&(delete this._audioContext,delete this._audioLevelSampler)},sn._toggleVideoTracks=function(){var qt=(0,d.default)(c.default.mark(function $t(){var Sn,On,tn;return c.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:if(Sn=this._domElement.srcObject.getTracks().filter(Mn=>Mn.enabled),On=Sn.length>1,!On){dn.next=8;break}return tn=Sn.filter(Mn=>Mn.kind==="video"),tn.forEach(Mn=>{Mn.enabled=!1}),dn.next=7,dt();case 7:tn.forEach(Mn=>{Mn.enabled=!0});case 8:case"end":return dn.stop()}},$t,this)}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn._hasAudioOnlyVideoElement=function(){return this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.srcObject},sn.play=function(){var qt=(0,d.default)(c.default.mark(function $t(){var Sn,On,tn,bn,dn,Mn,$n,Un,Fn,cr,or,wr;return c.default.wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:if(Sn=this._playInterrupts,On=this._hasAudioOnlyVideoElement()?this._domAudioOnlyVideoElement:this._domElement,!_e.isSafari){Zr.next=5;break}return Zr.next=5,dt();case 5:if(!(_e.isiOS&&_e.isSafari)){Zr.next=15;break}if(this._widgetType!=="publisher"){Zr.next=14;break}if(tn=_e.iOSVersion>=14&&_e.iOSVersion<=14.2,bn=this._stream.getVideoTracks(),dn=bn[0],Mn=dn===void 0?{}:dn,$n=this._stream.getAudioTracks(),Un=$n[0],Fn=Un===void 0?{}:Un,!(tn&&!_(On)&&Mn.enabled)){Zr.next=12;break}return Zr.abrupt("return");case 12:if(!Fn.muted){Zr.next=14;break}return Zr.abrupt("return");case 14:this._toggleVideoTracks();case 15:return Zr.prev=15,this._emitVideoPlayAttempt(),Zr.next=19,On.play();case 19:return this._emitVideoPlaySuccess(),Zr.abrupt("return");case 23:if(Zr.prev=23,Zr.t0=Zr.catch(15),this._emitVideoPlayFailure(),cr=Zr.t0||{},or=cr.name,wr=or==="AbortError",wr&&this._playInterrupts++,!(this._playInterrupts>Sn)){Zr.next=33;break}return Zr.next=32,this.play();case 32:return Zr.abrupt("return");case 33:throw Zr.t0;case 34:case"end":return Zr.stop()}},$t,this,[[15,23]])}));function Kt(){return qt.apply(this,arguments)}return Kt}(),sn._bindToStream=function(Kt){this._stream=Kt,this._domElement.srcObject=Kt,this._domAudioOnlyVideoElement&&this.bindAudioTrackOnly()},sn.bindToStream=function(){var qt=(0,d.default)(c.default.mark(function $t(Sn){var On=this,tn,bn,dn;return c.default.wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:if(this._domElement){$n.next=2;break}throw new Error("Can't bind because _domElement no longer exists");case 2:return this._bindToStream(Sn),(0,d.default)(c.default.mark(function Un(){var Fn;return c.default.wrap(function(or){for(;;)switch(or.prev=or.next){case 0:return or.prev=0,or.next=3,On.play();case 3:or.next=26;break;case 5:if(or.prev=5,or.t0=or.catch(0),Fn=!!Sn.getAudioTracks().length,!(On._hasAudioOnlyVideoElement()&&or.t0.name==="NotAllowedError")){or.next=15;break}return On._domAudioOnlyVideoElement.muted=!0,or.next=12,On.play();case 12:On._domAudioOnlyVideoElement.muted=!1,or.next=26;break;case 15:if(!Fn){or.next=23;break}return On._blockedVolume=On.getAudioVolume(),On._domElement.muted=!0,or.next=20,On.play();case 20:On.trigger("audioBlocked"),or.next=26;break;case 23:return On._domElement.muted=!0,or.next=26,On.play();case 26:case"end":return or.stop()}},Un,null,[[0,5]])}))().catch(Un=>{this.logging.debug(".play() failed: ",Un)}),tn={width:this._domElement.videoWidth,height:this._domElement.videoHeight},this.trigger("videoDimensionsChanged",Object.assign({},tn),Object.assign({},tn)),this._domElementEvents.on("resize",()=>{const Un=this._domElement,Fn=Un.videoWidth,cr=Un.videoHeight,or=Fn!==tn.width,wr=cr!==tn.height;(or||wr)&&(this.trigger("videoDimensionsChanged",Object.assign({},tn),{width:Fn,height:cr}),tn.width=Fn,tn.height=cr)}),bn=()=>{this._mediaStoppedListener.stop(),this._domElement&&(this._domElement.onended=null),this.trigger("mediaStopped")},dn=Un=>{this.trigger("mediaStopped",Un)},this._domElement.onended=()=>bn(),this._mediaStoppedListener=bt(Sn,bn,dn),this._createAudioLevelSampler(),$n.abrupt("return",void 0);case 13:case"end":return $n.stop()}},$t,this)}));function Kt($t){return qt.apply(this,arguments)}return Kt}(),sn.unbindStream=function(){return this._domElement&&(this._domElement.srcObject=null),this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=null),this._removeAudioLevelSampler(),this},sn.setAudioVolume=function(Kt){if(this.isAudioBlocked()){this._blockedVolume=Kt;return}const $t=parseFloat(Kt)/100,Sn=[this.domElement()];this._domAudioOnlyVideoElement&&Sn.push(this._domAudioOnlyVideoElement),Sn.forEach(On=>{On&&(On.volume=$t,On.muted=$t===0)})},sn.getAudioVolume=function(){if(this.isAudioBlocked())return this._blockedVolume;const Kt=this.domElement();return Kt?Kt.muted?0:Kt.volume*100:this._defaultAudioVolume},sn.audioChannelType=function(Kt){const $t=this.domElement();return Kt!==void 0&&($t.mozAudioChannelType=Kt),"mozAudioChannelType"in this._domElement?$t.mozAudioChannelType:"unknown"},sn.getAudioInputLevel=function(){return this._audioLevelSampler.sample()},sn.refreshTracks=function(){this._mediaStoppedListener&&this._mediaStoppedListener.refresh(),this._createAudioLevelSampler()},sn.destroy=function(){this._mediaStoppedListener&&this._mediaStoppedListener.stop(),this.logging.debug("removing domElementEvents"),this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._audioOnlyVideoElementWatcher&&clearInterval(this._audioOnlyVideoElementWatcher),this.unbindStream(),this._domElement&&(Ut.removeElement(this._domElement),this._domElement=null),this._domAudioOnlyVideoElement&&(Ut.removeElement(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElement=null),this.trigger("destroyed"),b("NativeVideoElementWrapper",this)},sn.setSinkId=function(Kt){const Sn=[this._domElement,this._domAudioOnlyVideoElement].map(On=>{if(On)return On.setSinkId(Kt)});return o.all(Sn)},Bt}()}e.exports=ht}).call(this,i(0))},function(e,s,i){(function(o){e.exports=()=>new o(a=>setTimeout(a))}).call(this,i(0))},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5)),h=a(i(661)),g=a(i(662)),b=a(i(1));const j=i(9),_=i(47),$=i(60),_e=i(6),et=i(298),ct=i(299),dt=i(670),nt=(0,b.default)("PublisherPeerConnection");e.exports=function(st){st===void 0&&(st={});const lt=st.getStatsHelpers||i(75),ht=st.OTHelpers||i(8),Tt=st.PeerConnection||i(71)(),Rt=st.setCertificates||i(163)(),vt=st.watchAudioAcquisition||i(672),Et=st.createAudioFallbackStateMachine||h.default,bt=st.createCongestionLevelEstimator||g.default;return function(Ut){var Xt=this;let Nt=Ut.iceConfig,Jt=Ut.webRTCStream,zt=Ut.channels,nn=Ut.sendMessage,Bt=Ut.capableSimulcastStreams,sn=Ut.overrideSimulcastEnabled,qt=Ut.logAnalyticsEvent,Kt=Ut.offerOverrides,$t=Ut.answerOverrides,Sn=Ut.sourceStreamId,On=Ut.isP2pEnabled,tn=Ut.sessionId,bn=Ut.keyStore,dn=Ut.sFrameClientStore,Mn=Ut.isE2ee,$n=Ut.audioFallbackEnabled,Un=Ut.resolution,Fn,cr=!1,or,wr,Er;const Zr=function(){this.destroy(),cr&&(cr=!1,this.trigger("iceRestartFailure")),this.trigger("disconnected")},po=function(zn){let vr=zn.reason,Jr=zn.prefix;this.trigger("error",{reason:vr,prefix:Jr})},lr=function(zn){cr&&Fn.iceConnectionStateIsConnected()&&(cr=!1,this.trigger("iceRestartSuccess")),zn==="connected"&&(ht.env.name==="Chrome"&&(or&&or(),or=vt(Fn.getStats.bind(Fn),()=>this.trigger("audioAcquisitionProblem"))),this.trigger("connected")),this.trigger("iceConnectionStateChange",zn)};_e(this),this.setCongestionLevel=In=>{var zn;(zn=wr)==null||zn.setCongestionLevel(In)},this.getAudioFallbackState=()=>{var In;return(In=wr)==null?void 0:In.getState()},this.startEncryption=In=>{Fn&&Fn.startEncryption(In)},this.changeMediaDirectionToInactive=()=>{Fn&&Fn.changeMediaDirectionToInactive()},this.changeMediaDirectionToRecvOnly=()=>{Fn&&Fn.changeMediaDirectionToRecvOnly()},this.getDataChannel=function(In,zn,vr){Fn.getDataChannel(In,zn,vr)},this.getSourceStreamId=()=>Fn.getSourceStreamId(),this.destroy=function(){var In;(In=Er)==null||In.stop(),or&&(or(),or=null),Fn&&(Fn.disconnect(),Fn=null),this.off()},this.processMessage=function(In,zn){Fn.processMessage(In,zn)},this.addTrack=function(In,zn,vr){return Fn.addTrack(In,zn,vr)},this.removeTrack=function(In){return Fn.removeTrack(In)},this.getLocalStreams=function(){return Fn.getLocalStreams()},this.init=function(In,zn){et(Sn)&&ct(Nt);const vr={iceConfig:Nt.needRumorIceServersFallback?j(Nt,{servers:[...In,...Nt.servers]}):Nt,channels:zt,capableSimulcastStreams:Bt,overrideSimulcastEnabled:sn};Rt(vr,(Jr,kn)=>{if(Jr){zn(Jr);return}const ir=j({logAnalyticsEvent:qt,isPublisher:!0,offerOverrides:Kt,answerOverrides:$t,sourceStreamId:Sn,p2p:On,sessionId:tn,keyStore:bn,sFrameClientStore:dn,isE2ee:Mn},kn);Fn=new Tt(j({sendMessage:nn},ir)),Fn.on({close:Zr,error:po,qos:gr=>this.trigger("qos",gr),iceConnectionStateChange:lr},this),Fn.addLocalStream(Jt).then(()=>{zn(void 0)}).catch(zn)})},this.setIceConfig=In=>{Fn.setIceConfig(In)},this.generateOffer=()=>{Fn.generateOfferAndSend()},this.getSenders=function(){return Fn.getSenders()},this.iceRestart=function(){Fn&&(cr=!0,Fn.iceRestart())},this.hasRelayCandidates=()=>Fn.hasRelayCandidates(),this.iceConnectionStateIsConnected=function(){return Fn.iceConnectionStateIsConnected()},this.findAndReplaceTrack=(In,zn)=>Fn.findAndReplaceTrack(In,zn),this._testOnlyGetFramesEncoded=()=>new o((In,zn)=>{Fn.getStats((vr,Jr)=>{if(vr){zn(vr);return}const kn=$(Jr,ir=>lt.isVideoStat(ir,Jr)&&lt.isOutboundStat(ir));if(!kn){zn(new Error("Could not find framesEncoded in getStats report"));return}In(_(kn,["timestamp","framesEncoded"]))})}),this.getStats=In=>Fn.getStats(In),this.getRtcStatsReport=In=>Fn.getRtcStatsReport(In),this.setP2PMaxBitrate=(0,d.default)(c.default.mark(function In(){var zn,vr,Jr,kn,ir,gr,Br;return c.default.wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:if(Xt.getSourceStreamId()==="P2P"){eo.next=2;break}return eo.abrupt("return");case 2:if(vr=Xt.getSenders().find(io=>io.track.kind==="video"),vr){eo.next=5;break}return eo.abrupt("return");case 5:return Jr=(vr==null||(zn=vr.track)==null||zn.getSettings==null?void 0:zn.getSettings())||{},kn=Jr.width,ir=Jr.height,gr=dt(kn,ir),Br=vr.getParameters(),Br.encodings.forEach(io=>{io.maxBitrate=gr}),eo.prev=9,eo.next=12,vr.setParameters(Br);case 12:eo.next=16;break;case 14:eo.prev=14,eo.t0=eo.catch(9);case 16:case"end":return eo.stop()}},In,null,[[9,14]])}));const pr=()=>{wr=Et(),wr.on("stateChange",In=>{let zn=In.previousState,vr=In.state;this.trigger("audioFallbackStateChange",{previousState:zn,state:vr})})},Vn=()=>{Er=bt({resolution:Un,getStats:this.getStats}),this.on("connected",()=>{Er.start()})};$n&&(pr(),Vn(),(()=>{let zn;Er.on("congestionLevel",vr=>{vr!==zn&&(zn=vr,nt.info(`Congestion level changed to: ${vr}`))})})())}}}).call(this,i(0))},function(e,s,i){s.__esModule=!0,s.default=void 0;var a={bandwidthCriticalThreshold:7e4,bandwidthFairThreshold:0,packetLossCriticalThreshold:.15,packetLossCriticalThresholdMediumBw:.2,criticalCongestionPeriod:4e3};s.default=a},function(e,s,i){const o=i(669);e.exports=a=>a!=="P2P"?!1:o()},function(e,s,i){e.exports=o=>{o.transportPolicy="relay",o.customServers=o.customServers||[]}},function(e,s,i){const o=i(9),a=i(6),c=i(298),d=i(299);e.exports=function(g){g===void 0&&(g={});const b=g.OTHelpers||i(8),j=g.PeerConnection||i(71)(),_=g.SinglePeerConnectionAdapter||i(673)(),$=g.setCertificates||i(163)(),_e=g.Errors||i(7),et=g.ExceptionCodes||i(10),ct=g.OTErrorClass||i(22),dt=g.watchSubscriberAudio||i(674);return function(it){let st=it.clientCandidates,lt=it.iceConfig,ht=it.send,Tt=it.logAnalyticsEvent,Rt=it.p2p,vt=it.codecFlags,Et=it.sourceStreamId,bt=it.remoteConnectionId,Ct=it._singlePeerConnectionController,Ut=it.keyStore,Xt=it.sFrameClientStore,Nt=it.isE2ee;const Jt=this;let zt,nn=!1,Bt=!1,sn=null;const qt=!!Ct;let Kt=!1;const $t=[],Sn=[],On=function(){this.destroy(),Bt&&this.trigger("iceRestartFailure",this),this.trigger("disconnected",this)},tn=Vn=>{this.trigger("remoteStreamRemoved",Vn,this)},bn=Vn=>{const In=Vn.kind==="video"?$t:Sn,zn=In.indexOf(Vn);zn>-1&&In.splice(zn,1)},dn=Vn=>{const In=Vn.kind==="video"?$t:Sn;In.includes(Vn)||In.push(Vn)},Mn=100,$n=Vn=>{Kt||(Vn.onremovetrack=In=>{bn(In),qt&&zt&&zt.removeTrack(In),setTimeout(()=>{!$t.length&&!Sn.length&&tn(Vn)},Mn)},Kt=!0)},Un=Vn=>{const In=Vn.stream,zn=Vn.track;dn(zn),$n(In),this.trigger("remoteTrackAdded",Vn,this)},Fn=Vn=>{this.trigger("remoteVideoSupported",Vn)},cr=()=>{this.trigger("decryptFailed")},or=()=>{this.trigger("decryptRestored")},wr=function(In){let zn=In.reason,vr=In.prefix;this.trigger("error",null,zn,this,vr)},Er=function(In){Bt&&(In==="connected"||In==="completed")&&(Bt=!1,this.trigger("iceRestartSuccess")),In==="connected"&&this.trigger("connected"),this.trigger("iceConnectionStateChange",In)},Zr=function(In){this.trigger("signalingStateChange",In)},po=function(In){this.trigger("signalingStateStable",In)},lr=(Vn,In)=>{(Vn==="answer"||Vn==="pranswer")&&this.trigger("connected"),ht(Vn,In)};a(this),this._hasAudioTracks=()=>Sn.length>0,this._hasVideoTracks=()=>$t.length>0,this._getVideoTracks=()=>$t,this._getAudioTracks=()=>Sn,this._getTracks=()=>[...Sn,...$t],this.close=function(){nn||(nn=!0,zt&&(zt.disconnect(),zt=null),this.off())},this.destroy=function(){this.stopAudioStatsWatcher(),!nn&&this.close()},this.getDataChannel=function(Vn,In,zn){zt.getDataChannel(Vn,In,zn)},this.getSourceStreamId=()=>zt.getSourceStreamId(),this.processMessage=function(Vn,In){zt.processMessage(Vn,In)},this.remoteDescription=function(){return zt.remoteDescription()},this.getStats=function(Vn){if(zt)zt.getStats(Vn);else{const In=et.PEER_CONNECTION_NOT_CONNECTED;Vn(new b.Error(ct.getTitleByCode(In),_e.PEER_CONNECTION_NOT_CONNECTED,{code:In}))}},this.getSynchronizationSources=function(Vn){if(!zt){const In=et.PEER_CONNECTION_NOT_CONNECTED;Vn(new b.Error(ct.getTitleByCode(In),_e.PEER_CONNECTION_NOT_CONNECTED,{code:In}));return}zt.getSynchronizationSources(Vn)},this.getRtcStatsReport=function(Vn){if(zt)zt.getRtcStatsReport(Vn);else{const In=et.PEER_CONNECTION_NOT_CONNECTED;Vn(new b.Error(ct.getTitleByCode(In),_e.PEER_CONNECTION_NOT_CONNECTED,{code:In}))}},this.setIceConfig=Vn=>{zt.setIceConfig(Vn)},this.generateOffer=()=>{zt.generateOfferAndSend()},this.startAudioStatsWatcher=function(Vn){sn||(sn=dt(zt.getStats.bind(zt),In=>{this.stopAudioStatsWatcher(),this.trigger("audioLevelStuckWarning",In)},Vn))},this.stopAudioStatsWatcher=function(){sn&&sn.stop(),sn=null};const pr=function(In){return function(zn){const vr=In==="video"?$t:Sn;zt&&zt.remoteTracks().forEach(Jr=>{Jr.kind===In&&Jr.enabled!==zn&&vr.includes(Jr)&&(Jr.enabled=zn)})}};this.subscribeToAudio=pr("audio"),this.subscribeToVideo=pr("video"),this.hasRelayCandidates=function(){return zt.hasRelayCandidates()},this.iceRestart=function(){return Bt=!0,zt.iceRestart()},this.iceConnectionStateIsConnected=function(){return zt.iceConnectionStateIsConnected()},this.init=function(Vn){c(Et)&&d(lt),$({iceConfig:lt},(zn,vr)=>{if(zn){Vn(zn);return}const Jr=o({logAnalyticsEvent:Tt,clientCandidates:st,codecFlags:vt,sourceStreamId:Et,keyStore:Ut,sFrameClientStore:Xt,isE2ee:Nt},vr),kn=o({sendMessage:lr,p2p:Rt},Jr,{remoteConnectionId:bt});qt?zt=new _(kn,Ct):zt=new j(kn),zt.on({iceConnected:()=>Jt.emit("iceConnected"),close:On,trackAdded:Un,signalingStateChange:Zr,signalingStateStable:po,error:wr,qos:ir=>this.trigger("qos",ir),iceConnectionStateChange:Er,remoteVideoSupported:Fn,decryptFailed:cr,decryptRestored:or},Jt),!qt&&zt.remoteTracks().length>0?zt.remoteStreams().forEach(ir=>{ir.getTracks().forEach(gr=>Un({stream:ir,track:gr}))}):Vn(void 0,Jt)})}}}},function(e,s,i){e.exports=(o,a)=>{o.forEach((c,d)=>{const h=c.id||c,g=a.id||a;h===g&&o.splice(d,1)})}},function(e,s,i){e.exports=function(a){a===void 0&&(a={});const b=(a.generateSimpleStateMachine||i(160)())("NotPublishing",["NotPublishing","GetUserMedia","BindingMedia","MediaBound","PublishingToSession","Publishing","Failed","Destroyed"],{NotPublishing:["NotPublishing","GetUserMedia","Destroyed"],GetUserMedia:["BindingMedia","Failed","NotPublishing","Destroyed"],BindingMedia:["MediaBound","Failed","NotPublishing","Destroyed"],MediaBound:["NotPublishing","PublishingToSession","Failed","Destroyed"],PublishingToSession:["NotPublishing","Publishing","Failed","Destroyed","MediaBound"],Publishing:["NotPublishing","MediaBound","Failed","Destroyed"],Failed:["Destroyed"],Destroyed:[]});return b.prototype.isDestroyed=function(){return this.current==="Destroyed"},b.prototype.isAttemptingToPublish=function(){return["GetUserMedia","BindingMedia","MediaBound","PublishingToSession"].indexOf(this.current)!==-1},b.prototype.isPublishing=function(){return this.current==="Publishing"},b}},function(e,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=o;function o(a){this.message=a||"Operation has been canceled.",this.name="CancellationError",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}o.prototype=Object.create(Error.prototype),o.prototype.constructor=o},function(e,s,i){var o=i(0);Object.defineProperty(s,"__esModule",{value:!0});function a(c,d){return o.resolve(c).then(h=>o.resolve(d()).then(()=>h),h=>o.resolve(d()).then(()=>o.reject(h)))}s.default=a},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5));const h=i(141),g=i(254),b=i(9),j=i(276),_=i(57),$=i(50),_e=i(165),et=_e.CancellationError,ct=i(15),dt=i(18),nt=i(49),it=i(267),st=i(26),lt=i(6),ht=i(684),Tt=i(104),Rt=i(61),vt=i(685),Et=i(7),bt=i(164)(),Ct=i(686),Ut=i(282),Xt=i(144),Nt=i(283),Jt=i(145),zt=i(2),nn=i(7),Bt=i(23)(),sn=i(10),qt=i(75),Kt=i(306),$t=i(307),Sn=i(687),On=i(162)(),tn=i(1)("Subscriber"),bn=i(284)(),dn=i(285),Mn=i(13)(),$n=i(22),Un=i(8),Fn=i(152),cr=i(143)(typeof window!==void 0?window:commonjsGlobal),or=i(71)({global:cr}),wr=i(300)({PeerConnection:or}),Er=i(308),Zr=i(286),po=i(690),lr=i(691),pr=i(692),Vn=i(309),In=i(102).parseIceServers,zn=i(693),vr=i(694),Jr=i(695),kn=i(311),ir=i(167),gr=i(312),Br=100,vo=(Wr,To)=>Wr.connection.id===To.connection.id,eo=Wr=>{let To=Wr.apiKey,no=Wr.sessionId,yo=Wr.streamId,Pr=Wr.subscriberId;return["/v2/partner",To,"session",no,"stream",yo,"subscriber",Pr].join("/")};function io(Wr){return Math.max(0,Math.min(100,parseInt(Wr,10)))}function to(Wr){return Wr.audioVolume!==void 0?Wr.audioVolume:Wr.subscribeToAudio===!1?0:Br}e.exports=function(To){let no=To===void 0?{}:To,yo=no.AudioLevelMeter,Pr=yo===void 0?Ut:yo,fu=no.AudioLevelTransformer,Zo=fu===void 0?Xt:fu,oo=no.BackingBar,Xo=oo===void 0?Nt:oo,Zs=no.Chrome,Pl=Zs===void 0?Jt:Zs,fs=no.env,Ys=fs===void 0?zt:fs,hu=no.Errors,Tu=hu===void 0?nn:hu,Zp=no.Events,Pu=Zp===void 0?Bt:Zp,Fu=no.ExceptionCodes,Mr=Fu===void 0?sn:Fu,Fs=no.audioLevelSampler,zl=Fs===void 0?Sn:Fs,Rs=no.getStatsHelpers,Js=Rs===void 0?qt:Rs,Or=no.hasAudioOutputLevelStatCapability,Ms=Or===void 0?Kt:Or,Vp=no.hasRemoteStreamsWithWebAudio,Jl=Vp===void 0?$t:Vp,Ql=no.interpretPeerConnectionError,Do=Ql===void 0?On:Ql,El=no.logging,jo=El===void 0?tn:El,Zu=no.MuteButton,_d=Zu===void 0?bn:Zu,Bs=no.NamePanel,Yu=Bs===void 0?dn:Bs,Xu=no.otError,js=Xu===void 0?Mn:Xu,Go=no.OTErrorClass,Fl=Go===void 0?$n:Go,qr=no.OTHelpers,Bu=qr===void 0?Un:qr,pu=no.StylableComponent,pp=pu===void 0?Fn:pu,os=no.SubscriberPeerConnection,mp=os===void 0?wr:os,Mp=no.SubscribingState,gp=Mp===void 0?Er:Mp,op=no.VideoDisabledIndicator,Lp=op===void 0?Zr:op,Ku=no.AudioBlockedIndicator,$l=Ku===void 0?po:Ku,Ru=no.VideoUnsupportedIndicator,xl=Ru===void 0?lr:Ru,Cp=no.watchFrameRate,Wn=Cp===void 0?pr:Cp,pn=no.createSendMethod,Cn=pn===void 0?Vn:pn,Dn=no.parseIceServers,fr=Dn===void 0?In:Dn,yr=no.document,mo=yr===void 0?(typeof window!==void 0?window:commonjsGlobal).document:yr,Ro=no.WidgetView,ms=Ro===void 0?bt:Ro;const Ho=3e4,_o=15e3,ys=function Ps(vp,Is,Cl){var Vs=this,Xl;if(Is===void 0&&(Is={}),Cl===void 0&&(Cl=()=>{}),Is.analytics===void 0)throw new Error("Subscriber requires an instance of analytics");const cp=Is.analytics,zu=ct(),Dp=Ps.hasAudioOutputLevelStatCapability()||Jl(),Xs=this,Vu={},Ju={},yp={},su={},_f={},Tl=new gr;let Qr,Fo,_h,Dr,Pp,Ns,ep,bp,bo,Tp,Du,jp,Kp,Sp,Gp=!1,Up=vp||zu,Yo=Is.session,lo=Is.stream;const _p=Is,sm=_p._singlePeerConnectionController,qp=sm!==void 0;let lp,Lu,Tn,Ft=!1,yn,jn={},Hn=null,Xr=!1,jr=!0,$r=[],zr=h({},Is,{showControls:!0,testNetwork:!1,fitMode:lo.defaultFitMode||"cover",insertDefaultUI:!0,initials:lo.initials}),_l;const So=Yo.sessionInfo.isAdaptiveEnabled,_c={P2P:st.SUBSCRIBER_DISCONNECTED,MANTIS:st.SUBSCRIBER_DISCONNECTED},Rp=Ys.name==="Chrome"&&Ys.version>=58||Ys.isChromiumEdge||Ys.isOpera,au=Yo._.getSocket(),Ip=()=>j(Ju),mu=Pt=>Ju[Pt],gu=()=>Ju[_l],Qu=function(){var Pt=(0,d.default)(c.default.mark(function _t(on){var Rn;return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:return Bn.next=2,Ju[on];case 2:Rn=Bn.sent,Rn==null||Rn.close(),delete Ju[on];case 5:case"end":return Bn.stop()}},_t)}));return function(on){return Pt.apply(this,arguments)}}(),up=Pt=>{delete yp[Pt]},Hp=()=>{Ip().forEach(function(){var Pt=(0,d.default)(c.default.mark(function _t(on){return c.default.wrap(function(An){for(;;)switch(An.prev=An.next){case 0:return An.next=2,on;case 2:An.sent.destroy();case 3:case"end":return An.stop()}},_t)}));return function(_t){return Pt.apply(this,arguments)}}()),Object.keys(Ju).forEach(Pt=>{delete Ju[Pt]})},kp=function(){var Pt=(0,d.default)(c.default.mark(function _t(on){var Rn,An;return c.default.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:if(on){Jn.next=2;break}return Jn.abrupt("return");case 2:return Rn={error:$p,audioVolume:Lu},An=So&&_l==="P2P",Jn.prev=4,Jn.next=7,Qr.bindVideo(on,Rn,An);case 7:Jn.next=18;break;case 9:if(Jn.prev=9,Jn.t0=Jn.catch(4),!(Jn.t0 instanceof et||Ns.isDestroyed())){Jn.next=13;break}return Jn.abrupt("return");case 13:if(!Jn.t0.message.includes("bufferFailed")){Jn.next=16;break}return Vs._.startRelayedToRoutedTransition(),Jn.abrupt("return");case 16:throw $p(Jn.t0),Jn.t0;case 18:case"end":return Jn.stop()}},_t,null,[[4,9]])}));return function(on){return Pt.apply(this,arguments)}}(),Ol=function(){var Pt=(0,d.default)(c.default.mark(function _t(on,Rn){var An,Bn,Jn,Yn;return c.default.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(An=!1,typeof on=="function"?Rn=on:An=on==="rtcStatsReport",An?fm():_m(),!(An&&!kn)){Ur.next=7;break}return Bn=Mr.GET_RTC_STATS_REPORT_NOT_SUPPORTED,Rn(js(Et.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(Fl.getTitleByCode(Bn)),Bn)),Ur.abrupt("return");case 7:if(gu()){Ur.next=11;break}return Bn=Mr.PEER_CONNECTION_NOT_CONNECTED,Rn(js(Tu.PEER_CONNECTION_NOT_CONNECTED,new Error(Fl.getTitleByCode(Bn)),Bn)),Ur.abrupt("return");case 11:return Ur.next=13,gu();case 13:Jn=Ur.sent,Yn=An?Jn.getRtcStatsReport:Jn.getStats,Yn((Vr,xs)=>{Vr?(Vr.code===Mr.PEER_CONNECTION_NOT_CONNECTED&&(Vr=js(Tu.PEER_CONNECTION_NOT_CONNECTED,Vr,Mr.PEER_CONNECTION_NOT_CONNECTED)),Rn(Vr)):Rn(null,xs)});case 16:case"end":return Ur.stop()}},_t)}));return function(on,Rn){return Pt.apply(this,arguments)}}(),Yp=Pt=>Ol(Pt),zp=Pt=>Ol("rtcStatsReport",Pt),dp=Pt=>!bo||!lp?!1:Pt==="video"?bo.getVideoTracks().length>0&&lp.getVideoTracks().length>0:bo.getAudioTracks().length>0&&lp.getAudioTracks().length>0,bs=(Pt,_t,on,Rn,An)=>{let Bn=b({action:Pt,variation:_t,payload:on,streamId:lo?lo.id:null,sessionId:Yo?Yo.sessionId:null,connectionId:Yo&&Yo.isConnected()?Yo.connection.connectionId:null,partnerId:Yo&&Yo.sessionInfo?Yo.sessionInfo.partnerId:null,subscriberId:zu,widgetType:"Subscriber"},Rn);(_t==="Failure"||_t==="iceconnectionstatechange"&&on==="closed")&&(Bn=b(Bn,jn));const Jn=[Bn];An&&Jn.push(An),cp.logEvent(...Jn)},em=(Pt,_t,on)=>{_t==="Attempt"?(su[Pt]=new Date().getTime(),bs(Pt,_t,on)):(_t==="Failure"||_t==="Success")&&bs(Pt,_t,on,{attemptDuration:new Date().getTime()-su[Pt]})},am=function(_t,on){on===void 0&&(on={}),em("RoutedToRelayedTransition",_t,on)},Fm=function(_t,on){on===void 0&&(on={}),em("RelayedToRoutedTransition",_t,on)},Iu=vr({onInvalidTransition(Pt,_t){const on=`Invalid state transition: Event '${Pt}' not possible in state '${_t}'`;jo.error(on),bs("Subscriber:InvalidStateTransition","Event",{details:on})}});{const Pt="Unable to subscribe to stream in a reasonable amount of time";zn({connectivityState:Iu,onWarning(){cm("Warning",{})},onTimeout:()=>{if(Qr&&Qr.addError(Pt),Ns.isAttemptingToSubscribe()){Ns.set("Failed"),this._disconnect({noStateTransition:!0});const _t=js(Et.TIMEOUT,new Error(Pt),Mr.UNABLE_TO_SUBSCRIBE);Iu.fail({options:{failureReason:"Subscribe",failureMessage:Pt,failureCode:Mr.UNABLE_TO_SUBSCRIBE},error:_t})}},warningMs:_o,timeoutMs:Ho})}if(Vu.promise=new o((Pt,_t)=>{Vu.resolve=Pt,Vu.reject=_t}),zr.testNetwork&&Yo.sessionInfo.p2pEnabled&&jo.warn("You cannot test your network with a relayed session. Use a routed session."),this.id=Up,this.widgetId=zu,this.session=Yo,this.stream=zr.stream,lo=zr.stream,this.streamId=lo.id,!Yo)return Fl.handleJsException({errorMsg:"OT.Subscriber must be passed a session option",code:2e3,target:this,analytics:cp}),null;lt(this),Xs.once("subscribeComplete",function(){try{Cl(...arguments)}catch(Pt){jo.error("Completion handler threw an exception",Pt)}}),Yo.on("captionReceived",Pt=>{Pt.streamId===Xs.streamId&&(this.dispatchEvent(Pt),this.trigger(st.SUBSCRIBER_CAPTION_RECEIVED,Pt))});const Em=Pt=>{let _t=Pt.transition,on=Pt.from;return _t==="fail"?on==="connected"?"Disconnect":"Failure":_t==="disconnect"&&on==="connected"?"Disconnect":"Cancel"};Iu.observe({onEnterConnecting(){cm("Attempt",null,{})},onEnterConnected(){cm("Success",null,{})},onEnterDisconnected(Pt,_t){let on=_t===void 0?{}:_t,Rn=on.options,An=Rn===void 0?{}:Rn,Bn=on.payload,Jn=Bn===void 0?null:Bn;cm(Em(Pt),Jn,An)}}),Iu.observe({onEnterConnected:()=>{this.trigger("subscribeComplete",void 0,this)},onEnterDisconnected:function(_t,on){let Rn=_t.from,An=on===void 0?{}:on,Bn=An.error;Rn==="connecting"&&Vs.trigger("subscribeComplete",Bn||new Error("An unknown error occurred"),Vs)}}),Jr({connectivityState:Iu,logAttempt(){bs("Subscribe","Attempting",null,{connectionId:Yo&&Yo.isConnected()?Yo.connection.connectionId:null})}});const cm=function(_t,on,Rn){on===void 0&&(on={}),_t==="Failure"||_t==="Success"||_t==="Cancel"?bs("Subscribe",_t,on,Object.assign({},Rn,{attemptDuration:new Date().getTime()-jp})):_t==="Attempt"?(jp=new Date().getTime(),bs("Subscribe",_t,Object.assign({},on,{testNetwork:zr.testNetwork}),Rn)):bs("Subscribe",_t,on,Rn)},Jp=(Pt,_t)=>{bs("ICERestart",Pt,_t)},Cm=Pt=>{var _t,on;let Rn=Pt.parsedStats,An=Pt.remoteConnectionId,Bn=Pt.peerId,Jn=Pt.sourceStreamId;const Yn={widgetType:"Subscriber",width:Qr.width,height:Qr.height,audioTrack:dp("audio"),hasAudio:lo&&lo.hasAudio,subscribeToAudio:Sp,audioVolume:this.getAudioVolume(),videoTrack:dp("video"),connectionId:Yo?Yo.connection.connectionId:null,hasVideo:lo&&lo.hasVideo,subscribeToVideo:zr.subscribeToVideo,congestionLevel:Hn,streamId:lo.id,subscriberId:zu,duration:Math.round((nt()-Pp)/1e3),remoteConnectionId:An,peerId:Bn,sourceStreamId:ir(Jn),preferredResolutionHeight:(_t=zr.preferredResolution)==null?void 0:_t.height,preferredResolutionWidth:(on=zr.preferredResolution)==null?void 0:on.width,preferredFrameRate:zr.preferredFrameRate,audioFallback:!Tp&&Du==="auto",initials:lo.initials},xo=b(Yn,Rn);cp.logQOS(xo),this.trigger("qos",Object.assign({},cp.commonQoSFields(),xo))},tm=Pt=>{jo.error("OT.Subscriber State Change Failed: ",Pt.message),jo.debug(Pt)},gm=()=>{Ns.isSubscribing()||!Qr||!Qr.video()||(Gp=!0,Xr||(Iu.connect(),Xr=!0),jo.debug("OT.Subscriber.onLoaded"),Ns.set("Subscribing"),Pp=nt(),Qr.loading(!1),Fo&&Fo.showAfterLoading(),Ft&&lo.setRestrictFrameRate(!0),Dr&&Dr.audioOnly(Qr.audioOnly()),this.setAudioVolume(Lu),this.trigger("loaded",this))},o1=()=>lo&&lo.hasAudio&&Sp&&this.getAudioVolume()>0&&!this.isAudioBlocked(),Km=()=>lo&&lo.hasVideo,zm=Pt=>{const _t=Pt==="audioLevelStuckAt0"&&(!o1()||Km());let on=!1;if(!_t&&(bs("subscriber:onAudioWarning","Event",{reason:Pt}),Qr)){if(Qr.rebindSrcObject(),bs("subscriber:rebindSrcObject","Called"),Pt==="audioLevelStuck")return;on=!0}vm(on)},vm=function(){var Pt=(0,d.default)(c.default.mark(function _t(on){var Rn;return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:if(on===void 0&&(on=!1),!Rp){Bn.next=6;break}return Bn.next=4,gu();case 4:Rn=Bn.sent,Rn.startAudioStatsWatcher(on);case 6:case"end":return Bn.stop()}},_t)}));return function(on){return Pt.apply(this,arguments)}}(),Qp=Pt=>{So&&Pt.getSourceStreamId()==="P2P"&&am("Success")},lm=()=>{jo.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection"),Iu.fail({options:{failureReason:"PeerConnectionError",failureCode:Mr.UNABLE_TO_PUBLISH,failureMessage:"PeerConnection disconnected"},error:js(Tu.DISCONNECTED,new Error("ClientDisconnected"))}),this._disconnect({noStateTransition:!0}),(Ns.isAttemptingToSubscribe()||Ns.isSubscribing())&&Ns.set("Failed")},$p=Pt=>{const _t=js(Tu.MEDIA_ERR_DECODE,Pt,Pt.code||Mr.P2P_CONNECTION_FAILED);_t.message=`OT.Subscriber while playing stream: ${_t.message}`,jo.error("OT.Subscriber.onVideoError"),Iu.fail({options:{failureReason:"VideoElement",failureMessage:_t.message,failureCode:_t.code||Mr.P2P_CONNECTION_FAILED},error:_t});const on=Ns.isAttemptingToSubscribe();Ns.set("Failed"),on||Xs.trigger("error",_t.message),Fl.handleJsException({error:_t,code:Mr.UNABLE_TO_SUBSCRIBE,target:Xs,analytics:cp})},Bp=Pt=>{const _t=vt(Pt);Fl.handleJsException({error:_t,code:_t.code,target:Xs,analytics:cp}),this._disconnect({noStateTransition:!0});const on={failureReason:"Subscribe",failureMessage:`OT.Subscriber PeerConnection Error: ${_t.message}`,failureCode:Mr.P2P_CONNECTION_FAILED};dm(_t.code,_t.message),Iu.fail({options:on,error:js(_t.name,new Error(`Subscribe: Subscriber PeerConnection with connection (not found) failed: ${_t.message}`),_t.code)}),_t.name===Et.STREAM_NOT_FOUND&&this._destroy({reason:"streamNotFound",noStateTransition:!0})},ym=(Pt,_t,on,Rn)=>{if(Rn==="SetRemoteDescription"&&!jr&&_t.match(/Unsupported video without audio for fallback/)){Qr&&Qr.addError("The stream is unable to be played.","Your browser does not support the video format.");let Yn;Bu.env.name==="Safari"?Yn=new Error("VP8 is not supported in this version of Safari. You might want to consider switching to an H264 project. See https://tokbox.com/safari for more information."):Yn=new Error("Video format not supported in this browser."),Yn.code=Mr.UNSUPPORTED_VIDEO_CODEC,$p(Yn);return}if(Rn==="ICEWorkflow"&&Yo.sessionInfo.reconnection&&Gp){jo.debug("Ignoring peer connection failure due to possibility of reconnection.");return}let An;Rn==="ICEWorkflow"?An=Mr.SUBSCRIBER_ICE_WORKFLOW_FAILED:Pt===Mr.STREAM_LIMIT_EXCEEDED?An=Pt:An=Mr.P2P_CONNECTION_FAILED;const Bn={failureReason:Rn||"PeerConnectionError",failureMessage:`OT.Subscriber PeerConnection Error: ${_t}`,failureCode:An},Jn=Do(Pt,_t,Rn,"(not found)","Subscriber");if(Iu.fail({options:Bn,error:Jn}),Ns.isAttemptingToSubscribe()){const Yn={hasRelayCandidates:on&&on.hasRelayCandidates()};bs("createPeerConnection","Failure",Yn,Bn),Ns.set("Failed")}else Ns.isSubscribing()&&(Ns.set("Failed"),this.trigger("error",_t));this._disconnect({noStateTransition:!0}),Number(Pt)===404&&this._destroy({noStateTransition:!0}),Fl.handleJsException({error:Jn,errorMsg:`OT.Subscriber PeerConnection Error: ${_t}`,code:An,target:this,analytics:cp}),dm(Pt)},Tm=Pt=>{const _t=Pt._hasVideoTracks(),on=Pt._hasAudioTracks(),Rn=lo&&lo.hasVideo&&!_t,An=lo&&lo.hasAudio&&!on;return!(Rn||An)},Rm=function(){var Pt=(0,d.default)(c.default.mark(function _t(on,Rn){var An;return c.default.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:return Jn.prev=0,Jn.next=3,ht(()=>Tm(Rn));case 3:Jn.next=12;break;case 5:if(Jn.prev=5,Jn.t0=Jn.catch(0),Jn.t0.message!=="TIMEOUT"){Jn.next=11;break}jo.error("The expected tracks never arrived"),Jn.next=12;break;case 11:throw Jn.t0;case 12:return An=Rn.getSourceStreamId(),qp&&An==="MANTIS"&&sm.subscriberComplete(),Jn.next=16,Jm(on.stream,Rn);case 16:case"end":return Jn.stop()}},_t,null,[[0,5]])}));return function(on,Rn){return Pt.apply(this,arguments)}}(),Jm=function(){var Pt=(0,d.default)(c.default.mark(function _t(on,Rn){var An,Bn,Jn,Yn,xo,Ur,Vr,xs;return c.default.wrap(function(so){for(;;)switch(so.prev=so.next){case 0:return lp=on,qp&&(lp=new MediaStream(Rn._getTracks())),An=Object.keys(yp).length===1,Bn=Rn==null?void 0:Rn.getSourceStreamId(),Jn=Yo,Yn=Jn.sessionInfo,bo=on,Bn&&(yp[Bn]=on),jo.debug("OT.Subscriber.onRemoteStreamAdded with sourceStreamId",Bn),Ns.set("BindingRemoteStream"),Vs.subscribeToAudio(Sp),Du="loading",Vs.subscribeToVideo(zr.subscribeToVideo,"loading"),!Yn.p2pEnabled&&Bn!=="P2P"&&(Vs.setPreferredResolution(zr.preferredResolution),Vs.setPreferredFrameRate(zr.preferredFrameRate)),Rn&&Rn._getVideoTracks().forEach(Al=>{(typeof window!==void 0?window:commonjsGlobal).webkitMediaStream?Al.enabled=!1:Al.enabled=lo.hasVideo&&zr.subscribeToVideo}),so.next=16,kp(lp);case 16:if(vm(),!Ns.isDestroyed()){so.next=19;break}throw new Error("Subscriber destroyed");case 19:return Rn&&(typeof window!==void 0?window:commonjsGlobal).webkitMediaStream&&Rn._getVideoTracks().forEach(Al=>{Al.enabled=lo.hasVideo&&zr.subscribeToVideo}),xo=Qr&&Qr.video(),xo&&xo.orientation({width:lo.videoDimensions.width,height:lo.videoDimensions.height,videoOrientation:lo.videoDimensions.orientation}),Ur=Fo&&Fo.videoUnsupportedIndicator,Ur&&Ur.setVideoUnsupported(!jr),Vr=new o((Al,rm)=>{const pm=Qr&&Qr.video();if(pm&&pm.domElement()){Al();return}Qr.once("videoElementCreated",Al),Xs.once("destroyed",rm)}),so.next=27,Vr;case 27:return so.next=29,Vu.promise;case 29:An?Ns.set("Subscribing"):gm(),ep&&"webRTCStream"in ep&&Rn._hasAudioTracks()&&ep.webRTCStream(on),xs=Bu.env,(xs.isSafari||xs.isChromiumEdge||xs.isOpera||xs.name==="Chrome"&&xs.version>=58||xs.isFirefox&&xs.version>=96)&&(yn&&(yn.destroy(),yn=null),Rn&&(yn=Wn(Rn.getStats.bind(Rn)))),An||Vs.trigger("streamAdded",Vs),Tl.finishTransitionTo(_l);case 35:case"end":return so.stop()}},_t)}));return function(on,Rn){return Pt.apply(this,arguments)}}(),vu=Pt=>{jo.debug("OT.Subscriber.onStreamRemoved");const _t=Qr&&Qr.video();_t&&_t.stream===Pt&&Qr.destroyVideo(),up(_l),lp=null,this.trigger("streamRemoved",this)},xu=Pt=>{jr!==Pt&&this.dispatchEvent(new Pu.VideoEnabledChangedEvent(Pt?"videoEnabled":"videoDisabled",{reason:Pt?"codecChanged":"codecNotSupported"})),jr=Pt},Im=Pt=>{Qr.setAudioBlockedUi(Pt);const _t=Fo&&Fo.audioBlockedIndicator;_t&&_t.setAudioBlocked(Pt);const on=Fo&&Fo.videoUnsupportedIndicator;on&&on.setVideoUnsupported(!Pt&&!jr)};this.on("audioBlocked",()=>{Im(!0)}),this.on("audioUnblocked",()=>{Im(!1)});const s1={new:st.SUBSCRIBER_DISCONNECTED,checking:st.SUBSCRIBER_DISCONNECTED,connected:st.SUBSCRIBER_CONNECTED,completed:st.SUBSCRIBER_CONNECTED,disconnected:st.SUBSCRIBER_DISCONNECTED},Qm=(Pt,_t)=>{const on=s1[Pt],Rn=_t.getSourceStreamId(),An=_c[Rn];on&&on!==An&&(_c[Rn]=on,Pt==="disconnected"&&Rn!=="P2P"&&setTimeout((0,d.default)(c.default.mark(function Jn(){var Yn;return c.default.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:if(Yn=Yo._.isSocketReconnecting,!(_c[Rn]==="disconnected"&&au.is("connected")&&!Yn())){Ur.next=4;break}return Ur.next=4,Vs._.iceRestart("peer connection disconnected");case 4:case"end":return Ur.stop()}},Jn)})),2e3),Qr&&Qr.loading(on!==st.SUBSCRIBER_CONNECTED),jo.debug(`OT.Subscriber.connectionStateChanged to ${Pt}`),this.dispatchEvent(new Pu.ConnectionStateChangedEvent(on,this)))},$m=()=>{Jp("Success")},um=()=>{Jp("Failure",{reason:"ICEWorkflow",message:"OT.Subscriber PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall."})},a1=Pt=>{const _t=Qr&&Qr.video();switch(Pt.changedProperty){case"videoDimensions":if(!_t)break;_t.orientation({width:Pt.newValue.width,height:Pt.newValue.height,videoOrientation:Pt.newValue.orientation}),this.dispatchEvent(new Pu.VideoDimensionsChangedEvent(this,Pt.oldValue,Pt.newValue));break;case"videoDisableWarning":Fo&&Fo.videoDisabledIndicator.setWarning(Pt.newValue),this.dispatchEvent(new Pu.VideoDisableWarningEvent(Pt.newValue?"videoDisableWarning":"videoDisableWarningLifted")),Hn=Pt.newValue?1:null;break;case"hasVideo":bm(!lo.hasVideo||!zr.subscribeToVideo),Ys.isSafari&&!lo.hasVideo&&Qr&&Qr.bindAudioTrackOnly(),this.dispatchEvent(new Pu.VideoEnabledChangedEvent(lo.hasVideo?"videoEnabled":"videoDisabled",{reason:"publishVideo"}));break;case"hasAudio":_h.update();break}},c1=()=>lo.getChannelsOfType("audio").length>0;_h={get(){return c1()?Xs.getStyle("buttonDisplayMode"):"off"},update(){const Pt=_h.get();Fo&&(Fo.muteButton.setDisplayMode(Pt),Fo.backingBar.setMuteMode(Pt))}};const l1=(Pt,_t)=>{if(Fo)switch(Pt){case"nameDisplayMode":Fo.name.setDisplayMode(_t),Fo.backingBar.setNameMode(_t);break;case"videoUnsupportedDisplayMode":Fo.videoUnsupportedIndicator.setDisplayMode(_t);break;case"videoDisabledDisplayMode":Fo.videoDisabledIndicator.setDisplayMode(_t);break;case"audioBlockedDisplayMode":Fo.audioBlockedIndicator.setDisplayMode(_t);break;case"showArchiveStatus":Fo.archive.setShowArchiveStatus(_t);break;case"buttonDisplayMode":_h.update();break;case"audioLevelDisplayMode":Fo.audioLevel.setDisplayMode(_t);break;case"bugDisplayMode":break;case"backgroundImageURI":Qr.setBackgroundImageURI(_t);break}},nm=()=>{const Pt={backingBar:new Xo({nameMode:zr.name?this.getStyle("nameDisplayMode"):"off",muteMode:_h.get()}),name:new Yu({name:zr.name,mode:this.getStyle("nameDisplayMode")}),muteButton:new _d({muted:Lu===0,mode:_h.get()})};if(Dp){const _t=new Zo;Dr=new Pr({mode:Xs.getStyle("audioLevelDisplayMode")});const on=new Tt(()=>{Dr.setValue(_t.transform(this.loudness))});Dr.watchVisibilityChanged(Rn=>{Rn?on.start():on.stop()}),Dr.setDisplayMode(this.getStyle("audioLevelDisplayMode")),Dr.audioOnly(!1),Pt.audioLevel=Dr}Pt.videoDisabledIndicator=new Lp({mode:this.getStyle("videoDisabledDisplayMode")}),Pt.audioBlockedIndicator=new $l({mode:this.getStyle("audioBlockedDisplayMode")}),Pt.videoUnsupportedIndicator=new xl({mode:this.getStyle("videoUnsupportedDisplayMode")}),Qr&&Qr.domElement&&(Fo=new Pl({parent:Qr.domElement}).set(Pt).on({muted(){Xs.setAudioVolume(0)},unmuted(){Xs.setAudioVolume(Tn)}},this),Fo.hideWhileLoading())},dm=(Pt,_t)=>{let on,Rn;Qr&&(Pt===Mr.STREAM_LIMIT_EXCEEDED?(on="The stream was unable to connect.",Rn="The limit for the number of media streams has been reached."):_t==="Tried to subscribe to an encrypted stream without enabling encryption"?(on="Unable to subscribe to an encrypted stream without enabling encryption.",Rn=""):(on="The stream was unable to connect due to a network error.",Xr?Rn="Ensure you have a stable connection and try again.":Rn="Make sure you have a stable network connection and that it isn't blocked by a firewall."),Qr.addError(on,Rn))};pp(this,{nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioBlockedDisplayMode:"auto",backgroundImageURI:null,showArchiveStatus:!0,showMicButton:!0},zr.showControls,Pt=>{bs("SetStyle","Subscriber",Pt,null,.1)});function bm(Pt){Ip().forEach(function(){var on=(0,d.default)(c.default.mark(function Rn(An){return c.default.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:return Jn.next=2,An;case 2:Jn.sent.subscribeToVideo(!Pt);case 3:case"end":return Jn.stop()}},Rn)}));return function(Rn){return on.apply(this,arguments)}}());const _t=Pt||!lp||!lp.getVideoTracks().length;Qr&&(Qr.audioOnly(_t),Qr.showPoster(_t)),Dr&&Dr.audioOnly(_t)}const _m=$(()=>{bs("GetStats","Called")}),fm=$(()=>{bs("GetRtcStatsReport","Called")}),Sm=function(){var Pt=(0,d.default)(c.default.mark(function _t(on){return c.default.wrap(function(An){for(;;)switch(An.prev=An.next){case 0:return bp&&(bp.destroy(),bp=void 0),An.prev=1,An.next=4,ht(()=>on._hasAudioTracks());case 4:An.next=9;break;case 6:return An.prev=6,An.t0=An.catch(1),An.abrupt("return");case 9:ep=zl(on),ep?bp=Ct({subscriber:Vs,audioLevelSampler:ep}):Object.prototype.hasOwnProperty.call(Vs,"loudness")||(Object.defineProperty(Vs,"loudness",{value:void 0,configurable:!0,writable:!1}),jo.error("No suitable audio level samplers found, audio level visualisation will not work"));case 11:case"end":return An.stop()}},_t,null,[[1,6]])}));return function(on){return Pt.apply(this,arguments)}}(),hm=(Pt,_t)=>{if(_f[_t]){_f[_t].removeAll();const Rn=()=>{Pt.off("error",Rn),Pt.off("disconnected",Rn)};Pt.on("error",Rn),Pt.on("disconnected",Rn)}const on=Rt(Pt);on.once("connected",()=>Qp(Pt)),on.on("disconnected",lm),on.on("error",ym),on.once("remoteTrackAdded",(0,d.default)(c.default.mark(function Rn(){var An=arguments;return c.default.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:return Jn.next=2,Sm(Pt);case 2:return Jn.prev=2,Jn.next=5,Rm(...An);case 5:Jn.next=10;break;case 7:Jn.prev=7,Jn.t0=Jn.catch(2),jo.error(Jn.t0);case 10:case"end":return Jn.stop()}},Rn,null,[[2,7]])}))),on.on("audioLevelStuckWarning",zm),on.on("signalingStateStable",(0,d.default)(c.default.mark(function Rn(){var An;return c.default.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:Xs.trigger("signalingStateStable"),An=Qr&&Qr.video(),An&&bo&&ep&&"webRTCStream"in ep&&Pt._hasAudioTracks()&&ep.webRTCStream(bo);case 3:case"end":return Jn.stop()}},Rn)}))),on.on("iceConnectionStateChange",Rn=>Qm(Rn,Pt)),on.on("iceRestartSuccess",$m),on.on("iceRestartFailure",um),on.on("remoteVideoSupported",xu),on.on("remoteStreamRemoved",vu),on.on("decryptFailed",()=>{this.trigger("encryptionSecretMismatch"),bs("encryptionSecretMismatch","Event"),jo.warn("Media cannot be decrypted due to an encryption secret mismatch.")}),on.on("decryptRestored",()=>{this.trigger("encryptionSecretMatch"),bs("encryptionSecretMatch","Event")}),_f[_t]=_f},xm=function(){var Pt=(0,d.default)(c.default.mark(function _t(){var on;return c.default.wrap(function(An){for(;;)switch(An.prev=An.next){case 0:return am("Attempt"),An.next=3,mu("MANTIS");case 3:if(on=An.sent,on!=null&&on.iceConnectionStateIsConnected()){An.next=7;break}return am("Failure",{reason:"Attempted to transition to Relayed without being connected in Routed mode."}),An.abrupt("return");case 7:au.subscriberCreate(lo.id,zu,Dm,"P2P",Yo._.isE2ee(),(Bn,Jn)=>{Bn&&!Iu.is("disconnected")&&am("Failure",Bn),jo.debug("message received when created a subscriber with source",Jn)});case 8:case"end":return An.stop()}},_t)}));return function(){return Pt.apply(this,arguments)}}(),wm=function(){var Pt=(0,d.default)(c.default.mark(function _t(){var on,Rn;return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:if(!(zr.testNetwork||vo(lo,Yo)||_l!=="P2P")){Bn.next=2;break}return Bn.abrupt("return");case 2:if(Fm("Attempt"),bo=yp.MANTIS,lp=bo,!qp){Bn.next=10;break}return Bn.next=8,mu("MANTIS");case 8:on=Bn.sent,lp=new MediaStream(on._getTracks());case 10:return Bn.next=12,kp(lp);case 12:return Qr.loading(!1),Qu("P2P"),_l="MANTIS",up("P2P"),Bn.next=18,gu();case 18:return Rn=Bn.sent,Bn.next=21,Sm(Rn);case 21:Fm("Success");case 22:case"end":return Bn.stop()}},_t)}));return function(){return Pt.apply(this,arguments)}}();this._destroy=Pt=>{let _t=Pt.reason,on=_t===void 0?"Unknown":_t,Rn=Pt.quiet,An=Pt.noStateTransition,Bn=An===void 0?!1:An;return Ns.isDestroyed()?this:(Ns.set("Destroyed"),yn&&(yn.destroy(),yn=null),jn={sessionId:Yo.sessionId,connectionId:Yo&&Yo.isConnected()?Yo.connection.connectionId:null,partnerId:Yo&&Yo.sessionInfo?Yo.sessionInfo.partnerId:null,streamId:lo&&!lo.destroyed?lo.id:null},this._disconnect({reason:on,noStateTransition:Bn}),Fo&&(Fo.destroy(),Fo=null),Qr&&(Qr.destroy(),Qr.off(),Qr=null,this.element=null),lo&&!lo.destroyed&&bs("unsubscribe",null,{streamId:lo.id}),lo.off(Kp,this),this.id=null,Up=null,this.stream=null,lo=null,this.streamId=null,this.session=null,Yo=null,zr=null,Rn!==!0&&(this.dispatchEvent(new Pu.DestroyedEvent(st.SUBSCRIBER_DESTROYED,this,on)),this.off()),this)},this.destroy=function(Pt,_t){Pt===void 0&&(Pt="Unsubscribe"),jo.warn("Subscriber#destroy is deprecated and will be removed. Please use Session#unsubscribe instead"),Vs._destroy({reason:Pt,quiet:_t})},this._disconnect=function(Pt){let _t=Pt===void 0?{}:Pt,on=_t.reason,Rn=on===void 0?"Unknown":on;if(!_t.noStateTransition&&!Iu.is("disconnected")){const Bn=Rn==="Unsubscribe"?void 0:js(Tu.STREAM_DESTROYED,new Error("Stream was destroyed before it could be subscribed to"));Iu.disconnect({payload:{reason:Rn},error:Bn})}!Ns.isDestroyed()&&!Ns.isFailed()&&Ns.set("NotSubscribing"),Qr&&Qr.destroyVideo(),au.is("connected")&&lo&&!lo.destroyed&&au.subscriberDestroy(lo.id,Vs.widgetId),Hp()},this.disconnect=()=>{jo.warn("Subscriber#disconnect is deprecated and will be removed. Please use Session#unsubscribe instead"),this._disconnect({reason:"Unsubscribe"})};const Om=function(){var Pt=(0,d.default)(c.default.mark(function _t(on){var Rn,An,Bn,Jn,Yn,xo,Ur;return c.default.wrap(function(xs){for(;;)switch(xs.prev=xs.next){case 0:return Rn=on.peerId,An=on.fromConnectionId,Bn=on.sourceStreamId,Jn=eo({apiKey:Yo.apiKey,sessionId:Yo.sessionId,streamId:lo.id,subscriberId:Vs.widgetId}),Yn=Cn({socket:Vs.session._.getSocket(),uri:Jn,content:{peerId:Rn,sourceStreamId:Bn}}),xo=function(so,Al,rm,pm,P1){pm===void 0&&(pm={});const F1=Object.assign({peerId:Rn,sourceStreamId:ir(Bn)},pm);return bs(so,Al,rm,F1,P1)},Ur=eu=>{_l===Bn&&Cm(Object.assign({},eu,{peerId:Rn,remoteConnectionId:An,sourceStreamId:Bn}))},xs.abrupt("return",Vs._setupPeerConnection({send:Yn,log:xo,logQoS:Ur,sourceStreamId:Bn}));case 6:case"end":return xs.stop()}},_t)}));return function(on){return Pt.apply(this,arguments)}}();this.processMessage=function(){var Pt=(0,d.default)(c.default.mark(function _t(on,Rn,An){var Bn,Jn,Yn;return c.default.wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return jo.debug(`OT.Subscriber.processMessage: Received ${on} message from ${Rn}`),jo.debug(An),Bn=_(An,"content.peerId"),Jn=_(An,"content.sourceStreamId"),Ur.next=6,mu(Jn);case 6:if(Yn=Ur.sent,!Yn){Ur.next=11;break}Yn.processMessage(on,An),Ur.next=16;break;case 11:if(on!=="offer"){Ur.next=16;break}return Ur.next=14,Om({peerId:Bn,fromConnectionId:Rn,sourceStreamId:Jn});case 14:Yn=Ur.sent,qp?Yn.processMessage("offer",An):Vs.session._.addSubscriberToPeerConnectionsQueue(Yn,An);case 16:case"end":return Ur.stop()}},_t)}));return function(_t,on,Rn){return Pt.apply(this,arguments)}}(),this.disableVideo=Pt=>{if(!Pt)jo.warn("Due to high packet loss and low bandwidth, video has been disabled");else if(Du==="auto")jo.info("Video has been re-enabled");else{jo.info("Video was not re-enabled because it was manually disabled");return}this.subscribeToVideo(Pt,"auto"),bs("updateQuality","video",Pt?{videoEnabled:!0}:{videoDisabled:!0})},this.getImgData=()=>{if(!this.isSubscribing())return jo.error("OT.Subscriber.getImgData: Cannot getImgData before the Subscriber is subscribing."),null;const Pt=Qr&&Qr.video();return Pt?Pt.imgData():null},this.getStats=Pt=>{Yp((_t,on)=>{if(_t){Pt(_t);return}const Rn={timestamp:0};on.forEach(An=>{if(Js.isInboundStat(An)){const Bn=Js.isVideoStat(An,on),Jn=Js.isAudioStat(An,on);(Jn||Bn)&&(Rn.timestamp=Js.normalizeTimestamp(An.timestamp)),Bn?(g(Rn,{video:Js.parseStatCategory(An)}),yn&&g(Rn,{video:{frameRate:yn.getFrameRateFromStat(An)}})):Jn&&g(Rn,{audio:Js.parseStatCategory(An)})}}),Pt(null,Rn)})},this.getRtcStatsReport=()=>new o((Pt,_t)=>{zp((on,Rn)=>{on?_t(on):Pt(Rn)})});function Am(Pt){const _t=Qr&&Qr.video();if(_t)try{_t.setAudioVolume(Pt)}catch(on){jo.warn(`setAudioVolume: ${on}`),Lu===0&&(jo.info("Using subscribeToAudio to mute Audio because setAudioVolume(0) failed"),Xs.subscribeToAudio(!1))}Fo&&Fo.muteButton.muted(Pt===0)}this.setAudioVolume=Pt=>{const _t=io(Pt);return bs("setAudioVolume","Attempt",{audioVolume:_t}),isNaN(_t)?(jo.error("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),bs("setAudioVolume","Failure",{message:"value should be an integer between 0 and 100"}),this):(_t!==Pt&&jo.warn("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),_t===Lu?(Am(Lu),bs("setAudioVolume","Success",{audioVolume:Lu,message:"Requested volume is same as already set audioVolume"}),this):(Lu>0&&(Tn=Lu),Lu=_t,Am(Lu),Lu>0&&!Sp&&(Tn=Lu,this.subscribeToAudio(!0)),bs("setAudioVolume","Success",{audioVolume:Lu}),this))},this.getAudioVolume=()=>{const Pt=Qr&&Qr.video();if(Pt)try{return Pt.getAudioVolume()}catch(_t){jo.warn(`getAudioVolume ${_t}`)}return Lu},this.subscribeToAudio=Pt=>{const _t=it(Pt,!0);Ip().forEach(function(){var Rn=(0,d.default)(c.default.mark(function An(Bn){return c.default.wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return Yn.next=2,Bn;case 2:Yn.sent.subscribeToAudio(_t);case 3:case"end":return Yn.stop()}},An)}));return function(An){return Rn.apply(this,arguments)}}()),lo&&Ip().length!==0&&lo.setChannelActiveState("audio",_t);const on=Sp!==_t;return Sp=_t,on&&this.setAudioVolume(_t?Tn:0),bs("subscribeToAudio","Event",{subscribeToAudio:_t}),this};const u1={auto:"quality",publishVideo:"publishVideo",subscribeToVideo:"subscribeToVideo"};if(Ys.name==="Safari"){const Pt=()=>{!mo.hidden&&zr.subscribeToVideo&&(jo.debug("document visibility restored in Safari - resubscribing to video"),this.subscribeToVideo(!1),this.subscribeToVideo(!0))};mo.addEventListener("visibilitychange",Pt),this.once("destroyed",()=>{mo.removeEventListener("visibilitychange",Pt)})}if(this.subscribeToVideo=(Pt,_t)=>{const on=it(Pt,!0),Rn=!on&&_t==="auto";return Rn&&(Hn=2),bs("subscribeToVideo","Attempt",{subscribeToVideo:on,reason:_t}),bm(!on||!lo.hasVideo||!bo),lo.hasVideo&&!dp("video")?(on&&jo.info("Subscriber is audio-only due to incompatibility, can't subscribeToVideo."),zr.subscribeToVideo=!1,bs("subscribeToVideo","Failure",{message:"No video tracks available"}),this):(Fo&&Fo.videoDisabledIndicator&&Fo.videoDisabledIndicator.disableVideo(Rn),Ip().length>0&&Yo&&lo&&(on!==zr.subscribeToVideo||_t!==Du)&&lo.setChannelActiveState("video",on,_t),zr.subscribeToVideo=on,Du=_t,Tp=on,bs("subscribeToVideo","Success",{subscribeToVideo:on,reason:_t}),_t!=="loading"&&this.dispatchEvent(new Pu.VideoEnabledChangedEvent(on?"videoEnabled":"videoDisabled",{reason:u1[_t]||"subscribeToVideo"})),this)},this.setPreferredResolution=Pt=>{if(Ns.isDestroyed()||Ip().length===0&&!Ns.current==="Connecting"){jo.warn("Cannot set the max Resolution when not subscribing to a publisher");return}if(zr.preferredResolution=Pt,Yo.sessionInfo.p2pEnabled){jo.warn("OT.Subscriber.setPreferredResolution will not work in a P2P Session");return}if(!Ns.isStreamAdded())return;const _t=lo.getPreferredResolution();_t&&Pt&&_t.width===Pt.width&&_t.height===Pt.height||!_t&&!Pt||lo.setPreferredResolution(Pt)},this.setPreferredFrameRate=Pt=>{if(Ns.isDestroyed()||Ip().length===0&&!Ns.current==="Connecting"){jo.warn("Cannot set the max frameRate when not subscribing to a publisher");return}if(zr.preferredFrameRate=Pt,Yo.sessionInfo.p2pEnabled){jo.warn("OT.Subscriber.setPreferredFrameRate will not work in a P2P Session");return}const _t=lo.getPreferredFrameRate();Pt&&_t&&_t===Pt||!_t&&!Pt||lo.setPreferredFrameRate(Pt)},this.isSubscribing=()=>Ns.isSubscribing(),this.isWebRTC=!0,this.isLoading=()=>Qr&&Qr.loading(),this.isAudioBlocked=()=>!!(Qr&&Qr.isAudioBlocked()),this.videoElement=()=>{const Pt=Qr&&Qr.video();return Pt?Pt.domElement():null},this.videoWidth=()=>{const Pt=Qr&&Qr.video();return Pt?Pt.videoWidth():void 0},this.videoHeight=()=>{const Pt=Qr&&Qr.video();return Pt?Pt.videoHeight():void 0},this._subscribeToSelf=(0,d.default)(c.default.mark(function Pt(){var _t;return c.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:if(_t=Yo.getPublisherForStream(lo),_t&&_t._.webRtcStream()){Rn.next=5;break}Iu.fail({payload:{reason:"streamNotFound"},error:js(Tu.STREAM_DESTROYED,new Error("Tried to subscribe to a local publisher, but its stream no longer exists"))}),Rn.next=14;break;case 5:return Vu.resolve(),Rn.prev=6,Rn.next=9,Jm(_t._.webRtcStream());case 9:Rn.next=14;break;case 11:Rn.prev=11,Rn.t0=Rn.catch(6),jo.error(Rn.t0);case 14:case"end":return Rn.stop()}},Pt,null,[[6,11]])})),this._setupPeerConnection=function(){var Pt=(0,d.default)(c.default.mark(function _t(on){var Rn,An,Bn,Jn;return c.default.wrap(function(xo){for(;;)switch(xo.prev=xo.next){case 0:return Rn=on.send,An=on.log,Bn=on.logQoS,Jn=on.sourceStreamId,zr.testNetwork&&Vs.setAudioVolume(0),Ip().length===0&&Ns.set("Connecting"),_l=Jn,Ju[Jn]=new o((Ur,Vr)=>{Yo._.getIceConfig().then(xs=>{xs.needRumorIceServersFallback&&(xs.servers=[...$r||[],...xs.servers||[]]);const eu={iceConfig:xs,subscriberId:Vs.widgetId,send:Rn,logAnalyticsEvent:An,p2p:Yo.sessionInfo.p2pEnabled,sourceStreamId:Jn,remoteConnectionId:lo.connection.id,_singlePeerConnectionController:Jn==="MANTIS"&&sm,keyStore:Yo.keyStore,sFrameClientStore:Yo.sFrameClientStore,isE2ee:Yo._.isE2ee()};Object.prototype.hasOwnProperty.call(zr,"codecFlags")&&(eu.codecFlags=zr.codecFlags);const so=new Ps.SubscriberPeerConnection(eu);so.once("iceConnected",Vu.resolve),so.once("error",Vu.reject),so.on("qos",Bn),hm(so,Jn),so.init(Al=>{Al?Vr(Al):Ur(so)})})}),xo.abrupt("return",Ju[Jn]);case 6:case"end":return xo.stop()}},_t)}));return function(_t){return Pt.apply(this,arguments)}}(),this.restrictFrameRate=Pt=>(jo.debug(`OT.Subscriber.restrictFrameRate(${Pt})`),bs("restrictFrameRate",Pt.toString(),{streamId:lo.id}),Yo.sessionInfo.p2pEnabled&&jo.warn("OT.Subscriber.restrictFrameRate: Cannot restrictFrameRate on a P2P session"),typeof Pt!="boolean"?jo.error(`OT.Subscriber.restrictFrameRate: expected a boolean value got a ${typeof Pt}`):(Ft=Pt,lo.setRestrictFrameRate(Pt)),this),this.on("styleValueChanged",l1,this),this._={getDataChannel(Pt,_t,on){return(0,d.default)(c.default.mark(function Rn(){return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:if(gu()){Bn.next=3;break}return on(new Bu.Error("Cannot create a DataChannel before there is a publisher connection.")),Bn.abrupt("return");case 3:return Bn.next=5,gu();case 5:Bn.sent.getDataChannel(Pt,_t,on);case 6:case"end":return Bn.stop()}},Rn)}))()},iceRestart(Pt,_t){return(0,d.default)(c.default.mark(function on(){var Rn;return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:return _t===void 0&&(_t=!1),Bn.next=3,mu("MANTIS");case 3:Rn=Bn.sent,Rn?(Jp("Attempt",{reason:Pt}),jo.debug("Subscriber: iceRestart attempt"),Rn.iceRestart(),_t&&Rn.generateOffer()):jo.debug("Subscriber: Skipping ice restart, we have no peer connection");case 5:case"end":return Bn.stop()}},on)}))()},unblockAudio:()=>Qr&&Qr.unblockAudio(),webRtcStream:()=>bo,setIceConfig:function(){var Pt=(0,d.default)(c.default.mark(function on(Rn){return c.default.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:Ip().forEach(function(){var Jn=(0,d.default)(c.default.mark(function Yn(xo){return c.default.wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:return Vr.next=2,xo;case 2:return Vr.abrupt("return",Vr.sent.setIceConfig(Rn));case 3:case"end":return Vr.stop()}},Yn)}));return function(Yn){return Jn.apply(this,arguments)}}());case 1:case"end":return Bn.stop()}},on)}));function _t(on){return Pt.apply(this,arguments)}return _t}(),privateEvents:new dt,startRoutedToRelayedTransition(){zr.testNetwork||vo(lo,Yo)||(Tl.startTransitionTo("P2P"),xm())},startRelayedToRoutedTransition(){Tl.startTransitionTo("MANTIS",()=>wm())},setSinkId(Pt){if(Qr&&Qr.video())return Qr.setSinkId(Pt);jo.debug("Called setAudioOutputDevice on a subscriber without a video element")},pauseAndPlayVideoElement(){Qr&&Qr.pauseAndPlayVideoElement()}},Ns=new gp(tm),jo.debug(`OT.Subscriber: subscribe to ${lo.id}`),Ns.set("Init"),!lo)return jo.error("OT.Subscriber: No stream parameter."),!1;Kp={updated:a1},lo.on(Kp,this),zr.name=zr.name||lo.name,zr.classNames="OT_root OT_subscriber",zr.style&&this.setStyle(zr.style,null,!0),Tn=Br,zr.subscribeToVideo=it(zr.subscribeToVideo,!0),zr.subscribeToAudio=it(zr.subscribeToAudio,!0),this.subscribeToAudio(zr.subscribeToAudio),this.setAudioVolume(to(zr)),Qr=new Ps.WidgetView(vp,Object.assign({},zr,{widgetType:"subscriber"})),Qr.on("error",$p),Qr.on("audioBlocked",()=>this.trigger("audioBlocked")),Qr.on("audioUnblocked",()=>this.trigger("audioUnblocked")),Qr.on("amrLogEvent",(Pt,_t,on)=>{bs(Pt,_t,{},on)}),this.id=Qr.domId(),Up=Qr.domId(),this.element=Qr.domElement,Qr.on("videoElementCreated",Pt=>{const _t=new Pu.VideoElementCreatedEvent(Pt),on=this;Gp?this.dispatchEvent(_t):this.once("loaded",()=>{on.dispatchEvent(_t)})}),this.element&&nm.call(this);const Zm=lo.getChannelsOfType("audio"),Vm=lo.getChannelsOfType("video"),qm=lo.getChannelsOfType("data");let Xm=qm.some(Pt=>Pt.id==="caption1"&&Pt.active);this.subscribeToCaptions=function(){var Pt=(0,d.default)(c.default.mark(function _t(on){var Rn,An;return c.default.wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:Rn=it(on,!0),An={active:Rn},Xm=Rn,bs("subscribeToCaptions","Attempt",{subscribeToCaptions:Rn}),au.subscriberChannelUpdate(lo.id,Vs.widgetId,"caption1",An),bs("subscribeToCaptions","Success",{subscribeToCaptions:Rn});case 6:case"end":return Jn.stop()}},_t)}));return function(_t){return Pt.apply(this,arguments)}}(),this.isSubscribedToCaptions=()=>Xm;const Dm=Zm.map(Pt=>({id:Pt.id,type:Pt.type,active:zr.subscribeToAudio})).concat(Vm.map(Pt=>{const _t={id:Pt.id,type:Pt.type,active:zr.subscribeToVideo,restrictFrameRate:zr.restrictFrameRate!==void 0?zr.restrictFrameRate:!1};return zr.preferredFrameRate!==void 0&&(_t.preferredFrameRate=parseFloat(zr.preferredFrameRate)),zr.preferredHeight!==void 0&&(_t.preferredHeight=parseInt(zr.preferredHeight,10)),zr.preferredWidth!==void 0&&(_t.preferredWidth=parseInt(zr.preferredWidth,10)),_t})).concat(qm.map(Pt=>({id:Pt.id,type:Pt.type,active:Pt.active}))),_g=(Xl=lo.getChannelsOfType("data")[0])==null?void 0:Xl.active,fn=!zr.testNetwork&&vo(lo,Yo)&&!_g;(()=>{var Pt;const _t=Yo.getPublisherForStream(lo);if(_t!=null&&(Pt=_t._)!=null&&Pt.privateEvents&&fn){let on=!1;_t._.privateEvents.on("publisherCaptionsEnabled",Rn=>{!on&&Rn.captionsEnabled&&(Dm.find(An=>An.id==="caption1").active=!0,vn(),on=!0)})}})(),Iu.beginConnect();const vn=()=>{au.subscriberCreate(lo.id,zu,Dm,null,Yo._.isE2ee(),(Pt,_t)=>{Pt&&!Iu.is("disconnected")&&Bp(Pt),$r=fr(_t)})};return fn?(this._subscribeToSelf(),this):(qp?sm.addSubscriber(vn):vn(),this)};return ys.hasAudioOutputLevelStatCapability=Ms,ys.WidgetView=ms,ys.SubscriberPeerConnection=mp,ys}}).call(this,i(0))},function(e,s,i){const o=i(2);e.exports=()=>["Chrome","Opera","Safari"].indexOf(o.name)>-1},function(e,s,i){const o=i(2),a=o.name;e.exports=()=>["Firefox","Safari","Edge","Chrome","Opera"].indexOf(a)>-1},function(e,s,i){const h=i(160)()("NotSubscribing",["NotSubscribing","Init","Connecting","BindingRemoteStream","Subscribing","Failed","Destroyed"],{NotSubscribing:["NotSubscribing","Init","Destroyed"],Init:["NotSubscribing","Connecting","BindingRemoteStream","Destroyed"],Connecting:["NotSubscribing","BindingRemoteStream","Failed","Destroyed"],BindingRemoteStream:["NotSubscribing","Subscribing","Failed","Destroyed","BindingRemoteStream"],Subscribing:["NotSubscribing","Failed","Destroyed","BindingRemoteStream"],Failed:["Destroyed"],Destroyed:[]});h.prototype.isDestroyed=function(){return this.current==="Destroyed"},h.prototype.isFailed=function(){return this.current==="Failed"},h.prototype.isSubscribing=function(){return this.current==="Subscribing"},h.prototype.isAttemptingToSubscribe=function(){return["Init","Connecting","BindingRemoteStream"].indexOf(this.current)!==-1},h.prototype.isStreamAdded=function(){return this.current==="BindingRemoteStream"||this.isSubscribing()},e.exports=h},function(e,s,i){e.exports=o=>{let a=o.socket,c=o.uri,d=o.content;return(h,g)=>a.send({uri:c,method:h,content:Object.assign({},d,g)})}},function(e,s,i){(function(a,c){e.exports=c()})(this,function(){return function(o){var a={};function c(d){if(a[d])return a[d].exports;var h=a[d]={i:d,l:!1,exports:{}};return o[d].call(h.exports,h,h.exports,c),h.l=!0,h.exports}return c.m=o,c.c=a,c.i=function(d){return d},c.d=function(d,h,g){c.o(d,h)||Object.defineProperty(d,h,{configurable:!1,enumerable:!0,get:g})},c.n=function(d){var h=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(h,"a",h),h},c.o=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)},c.p="",c(c.s=5)}([function(o,a,c){o.exports=function(d,h){var g,b,j;for(g=1;g<arguments.length;g++){b=arguments[g];for(j in b)b.hasOwnProperty(j)&&(d[j]=b[j])}return d}},function(o,a,c){var d=c(0);o.exports={build:function(h,g){var b,j,_,$=g.plugins;for(b=0,j=$.length;b<j;b++)_=$[b],_.methods&&d(h,_.methods),_.properties&&Object.defineProperties(h,_.properties)},hook:function(h,g,b){var j,_,$,_e,et=h.config.plugins,ct=[h.context];for(b&&(ct=ct.concat(b)),j=0,_=et.length;j<_;j++)_e=et[j],$=et[j][g],$&&$.apply(_e,ct)}}},function(o,a,c){function d(h){if(h.length===0)return h;var g,b,j=h.split(/[_-]/);if(j.length===1&&j[0][0].toLowerCase()===j[0][0])return h;for(b=j[0].toLowerCase(),g=1;g<j.length;g++)b=b+j[g].charAt(0).toUpperCase()+j[g].substring(1).toLowerCase();return b}d.prepended=function(h,g){return g=d(g),h+g[0].toUpperCase()+g.substring(1)},o.exports=d},function(o,a,c){var d=c(0),h=c(2);function g(b,j){b=b||{},this.options=b,this.defaults=j.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(b.init),this.data=this.configureData(b.data),this.methods=this.configureMethods(b.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(b.transitions||[]),this.plugins=this.configurePlugins(b.plugins,j.plugin)}d(g.prototype,{addState:function(b){this.map[b]||(this.states.push(b),this.addStateLifecycleNames(b),this.map[b]={})},addStateLifecycleNames:function(b){this.lifecycle.onEnter[b]=h.prepended("onEnter",b),this.lifecycle.onLeave[b]=h.prepended("onLeave",b),this.lifecycle.on[b]=h.prepended("on",b)},addTransition:function(b){this.transitions.indexOf(b)<0&&(this.transitions.push(b),this.addTransitionLifecycleNames(b))},addTransitionLifecycleNames:function(b){this.lifecycle.onBefore[b]=h.prepended("onBefore",b),this.lifecycle.onAfter[b]=h.prepended("onAfter",b),this.lifecycle.on[b]=h.prepended("on",b)},mapTransition:function(b){var j=b.name,_=b.from,$=b.to;return this.addState(_),typeof $!="function"&&this.addState($),this.addTransition(j),this.map[_][j]=b,b},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(b){return typeof b=="string"?this.mapTransition(d({},this.defaults.init,{to:b,active:!0})):typeof b=="object"?this.mapTransition(d({},this.defaults.init,b,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(b){return typeof b=="function"?b:typeof b=="object"?function(){return b}:function(){return{}}},configureMethods:function(b){return b||{}},configurePlugins:function(b,j){b=b||[];var _,$,_e;for(_=0,$=b.length;_<$;_++)_e=b[_],typeof _e=="function"&&(b[_]=_e=_e()),_e.configure&&_e.configure(this);return b},configureTransitions:function(b){var j,_,$,_e,et,ct=this.defaults.wildcard;for(_=0;_<b.length;_++)for($=b[_],_e=Array.isArray($.from)?$.from:[$.from||ct],et=$.to||ct,j=0;j<_e.length;j++)this.mapTransition({name:$.name,from:_e[j],to:et})},transitionFor:function(b,j){var _=this.defaults.wildcard;return this.map[b][j]||this.map[_][j]},transitionsFor:function(b){var j=this.defaults.wildcard;return Object.keys(this.map[b]).concat(Object.keys(this.map[j]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),o.exports=g},function(o,a,c){var d=c(0),h=c(6),g=c(1),b=[null,[]];function j(_,$){this.context=_,this.config=$,this.state=$.init.from,this.observers=[_]}d(j.prototype,{init:function(_){if(d(this.context,this.config.data.apply(this.context,_)),g.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(_){return Array.isArray(_)?_.indexOf(this.state)>=0:this.state===_},isPending:function(){return this.pending},can:function(_){return!this.isPending()&&!!this.seek(_)},cannot:function(_){return!this.can(_)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(_,$){var _e=this.config.defaults.wildcard,et=this.config.transitionFor(this.state,_),ct=et&&et.to;return typeof ct=="function"?ct.apply(this.context,$):ct===_e?this.state:ct},fire:function(_,$){return this.transit(_,this.state,this.seek(_,$),$)},transit:function(_,$,_e,et){var ct=this.config.lifecycle,dt=this.config.options.observeUnchangedState||$!==_e;return _e?this.isPending()?this.context.onPendingTransition(_,$,_e):(this.config.addState(_e),this.beginTransit(),et.unshift({transition:_,from:$,to:_e,fsm:this.context}),this.observeEvents([this.observersForEvent(ct.onBefore.transition),this.observersForEvent(ct.onBefore[_]),dt?this.observersForEvent(ct.onLeave.state):b,dt?this.observersForEvent(ct.onLeave[$]):b,this.observersForEvent(ct.on.transition),dt?["doTransit",[this]]:b,dt?this.observersForEvent(ct.onEnter.state):b,dt?this.observersForEvent(ct.onEnter[_e]):b,dt?this.observersForEvent(ct.on[_e]):b,this.observersForEvent(ct.onAfter.transition),this.observersForEvent(ct.onAfter[_]),this.observersForEvent(ct.on[_])],et)):this.context.onInvalidTransition(_,$,_e)},beginTransit:function(){this.pending=!0},endTransit:function(_){return this.pending=!1,_},failTransit:function(_){throw this.pending=!1,_},doTransit:function(_){this.state=_.to},observe:function(_){if(_.length===2){var $={};$[_[0]]=_[1],this.observers.push($)}else this.observers.push(_[0])},observersForEvent:function(_){for(var $=0,_e=this.observers.length,et,ct=[];$<_e;$++)et=this.observers[$],et[_]&&ct.push(et);return[_,ct,!0]},observeEvents:function(_,$,_e,et){if(_.length===0)return this.endTransit(et===void 0?!0:et);var ct=_[0][0],dt=_[0][1],nt=_[0][2];if($[0].event=ct,ct&&nt&&ct!==_e&&g.hook(this,"lifecycle",$),dt.length===0)return _.shift(),this.observeEvents(_,$,ct,et);var it=dt.shift(),st=it[ct].apply(it,$);return st&&typeof st.then=="function"?st.then(this.observeEvents.bind(this,_,$,ct)).catch(this.failTransit.bind(this)):st===!1?this.endTransit(!1):this.observeEvents(_,$,ct,st)},onInvalidTransition:function(_,$,_e){throw new h("transition is invalid in current state",_,$,_e,this.state)},onPendingTransition:function(_,$,_e){throw new h("transition is invalid while previous transition is still in progress",_,$,_e,this.state)}}),o.exports=j},function(o,a,c){var d=c(0),h=c(2),g=c(1),b=c(3),j=c(4),_={is:function(nt){return this._fsm.is(nt)},can:function(nt){return this._fsm.can(nt)},cannot:function(nt){return this._fsm.cannot(nt)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(nt,it,st){return this._fsm.onInvalidTransition(nt,it,st)},onPendingTransition:function(nt,it,st){return this._fsm.onPendingTransition(nt,it,st)}},$={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(nt){throw Error("use transitions to change state")}}};function _e(nt){return ct(this||{},nt)}function et(){var nt,it;typeof arguments[0]=="function"?(nt=arguments[0],it=arguments[1]||{}):(nt=function(){this._fsm.apply(this,arguments)},it=arguments[0]||{});var st=new b(it,_e);return dt(nt.prototype,st),nt.prototype._fsm.config=st,nt}function ct(nt,it){var st=new b(it,_e);return dt(nt,st),nt._fsm(),nt}function dt(nt,it){if(typeof nt!="object"||Array.isArray(nt))throw Error("StateMachine can only be applied to objects");g.build(nt,it),Object.defineProperties(nt,$),d(nt,_),d(nt,it.methods),it.allTransitions().forEach(function(st){nt[h(st)]=function(){return this._fsm.fire(st,[].slice.call(arguments))}}),nt._fsm=function(){this._fsm=new j(this,it),this._fsm.init(arguments)}}_e.version="3.0.1",_e.factory=et,_e.apply=ct,_e.defaults={wildcard:"*",init:{name:"init",from:"none"}},o.exports=_e},function(o,a,c){o.exports=function(d,h,g,b,j){this.message=d,this.transition=h,this.from=g,this.to=b,this.current=j}}])})},function(e,s,i){const o=i(103)();e.exports=o},function(e,s,i){let o=function(){function a(){this.processTransition=()=>{},this.routedToRelayedOngoing=!1,this.relayedToRoutedPending=!1}var c=a.prototype;return c.startTransitionTo=function(h,g){g===void 0&&(g=()=>{}),h==="P2P"?this.startRoutedToRelayed():h==="MANTIS"&&this.startRelayedToRouted(g)},c.finishTransitionTo=function(h){h==="P2P"&&this.finishRoutedToRelayed()},c.startRoutedToRelayed=function(){this.routedToRelayedOngoing=!0},c.finishRoutedToRelayed=function(){this.routedToRelayedOngoing=!1,this.relayedToRoutedPending&&(this.relayedToRoutedPending=!1,this.processTransition())},c.startRelayedToRouted=function(h){this.routedToRelayedOngoing?(this.relayedToRoutedPending=!0,this.processTransition=h):h()},a}();e.exports=o},function(e,s,i){e.exports=(o,a)=>{const c=o.getSenders().find(h=>h.track.kind==="video"),d=c.getParameters();d.encodings.forEach(h=>{h.active=a}),c.setParameters(d)}},function(e,s,i){(function(o){e.exports=function(c){return function(){for(var h=arguments.length,g=new Array(h),b=0;b<h;b++)g[b]=arguments[b];return new o((j,_)=>{c(...g,function($){if($){_($);return}for(var _e=arguments.length,et=new Array(_e>1?_e-1:0),ct=1;ct<_e;ct++)et[ct-1]=arguments[ct];if(et.length===1){j(et[0]);return}j(et)})})}}}).call(this,i(0))},function(e,s,i){e.exports=o=>{var a;const c=Object.assign({},o);return(o==null||(a=o.backgroundImgUrl)==null?void 0:a.includes("base64"))&&delete c.backgroundImgUrl,c}},function(e,s,i){const o=i(717),a=o.setVonageMetadata,c=i(317),d=c.createVonageMediaProcessor,g={isSupported:()=>typeof MediaStreamTrackProcessor<"u"&&typeof MediaStreamTrackGenerator<"u",setMetadata:a,createProcessor:d};e.exports=g},function(e,s,i){i.r(s),function(o,a){i.d(s,"BackgroundTransformer",function(){return wv}),i.d(s,"BackgroundTransformerType",function(){return jn}),i.d(s,"BlurRadius",function(){return yn}),i.d(s,"ErrorFunction",function(){return Yo}),i.d(s,"MediapipeHelper",function(){return zp}),i.d(s,"PipelineInfoData",function(){return lo}),i.d(s,"SelfieSegmentationType",function(){return Hn}),i.d(s,"VonageMediaProcessor",function(){return m0}),i.d(s,"WarningType",function(){return Up}),i.d(s,"createVonageMediaProcessor",function(){return sS}),i.d(s,"getSupportedBrowserFeatures",function(){return au}),i.d(s,"getVonageFaceDetection",function(){return nS}),i.d(s,"getVonageFaceMash",function(){return rS}),i.d(s,"getVonageHands",function(){return eS}),i.d(s,"getVonageHolistic",function(){return tS}),i.d(s,"getVonageObjectron",function(){return iS}),i.d(s,"getVonagePose",function(){return oS}),i.d(s,"getVonageSelfieSegmentation",function(){return q4}),i.d(s,"isSupported",function(){return Rp});var c=Object.defineProperty,d=(at,ot,ut)=>ot in at?c(at,ot,{enumerable:!0,configurable:!0,writable:!0,value:ut}):at[ot]=ut,h=(at,ot,ut)=>(d(at,typeof ot!="symbol"?ot+"":ot,ut),ut);function g(){return new o((at,ot)=>{typeof MediaStreamTrackProcessor>"u"||typeof MediaStreamTrackGenerator>"u"?ot("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):at()})}class b{}b.updates={transformer_new:"New transformer",transformer_null:"Null transformer"},b.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"};var j={exports:{}},_=function(at,ot){return function(){for(var ut=new Array(arguments.length),Ot=0;Ot<ut.length;Ot++)ut[Ot]=arguments[Ot];return at.apply(ot,ut)}},$=_,_e=Object.prototype.toString;function et(at){return Array.isArray(at)}function ct(at){return typeof at>"u"}function dt(at){return at!==null&&!ct(at)&&at.constructor!==null&&!ct(at.constructor)&&typeof at.constructor.isBuffer=="function"&&at.constructor.isBuffer(at)}function nt(at){return _e.call(at)==="[object ArrayBuffer]"}function it(at){return _e.call(at)==="[object FormData]"}function st(at){var ot;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ot=ArrayBuffer.isView(at):ot=at&&at.buffer&&nt(at.buffer),ot}function lt(at){return typeof at=="string"}function ht(at){return typeof at=="number"}function Tt(at){return at!==null&&typeof at=="object"}function Rt(at){if(_e.call(at)!=="[object Object]")return!1;var ot=Object.getPrototypeOf(at);return ot===null||ot===Object.prototype}function vt(at){return _e.call(at)==="[object Date]"}function Et(at){return _e.call(at)==="[object File]"}function bt(at){return _e.call(at)==="[object Blob]"}function Ct(at){return _e.call(at)==="[object Function]"}function Ut(at){return Tt(at)&&Ct(at.pipe)}function Xt(at){return _e.call(at)==="[object URLSearchParams]"}function Nt(at){return at.trim?at.trim():at.replace(/^\s+|\s+$/g,"")}function Jt(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function zt(at,ot){if(!(at===null||typeof at>"u"))if(typeof at!="object"&&(at=[at]),et(at))for(var ut=0,Ot=at.length;ut<Ot;ut++)ot.call(null,at[ut],ut,at);else for(var Gt in at)Object.prototype.hasOwnProperty.call(at,Gt)&&ot.call(null,at[Gt],Gt,at)}function nn(){var at={};function ot(Gt,en){Rt(at[en])&&Rt(Gt)?at[en]=nn(at[en],Gt):Rt(Gt)?at[en]=nn({},Gt):et(Gt)?at[en]=Gt.slice():at[en]=Gt}for(var ut=0,Ot=arguments.length;ut<Ot;ut++)zt(arguments[ut],ot);return at}function Bt(at,ot,ut){return zt(ot,function(Ot,Gt){ut&&typeof Ot=="function"?at[Gt]=$(Ot,ut):at[Gt]=Ot}),at}function sn(at){return at.charCodeAt(0)===65279&&(at=at.slice(1)),at}var qt={isArray:et,isArrayBuffer:nt,isBuffer:dt,isFormData:it,isArrayBufferView:st,isString:lt,isNumber:ht,isObject:Tt,isPlainObject:Rt,isUndefined:ct,isDate:vt,isFile:Et,isBlob:bt,isFunction:Ct,isStream:Ut,isURLSearchParams:Xt,isStandardBrowserEnv:Jt,forEach:zt,merge:nn,extend:Bt,trim:Nt,stripBOM:sn},Kt=qt;function $t(at){return encodeURIComponent(at).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Sn=function(at,ot,ut){if(!ot)return at;var Ot;if(ut)Ot=ut(ot);else if(Kt.isURLSearchParams(ot))Ot=ot.toString();else{var Gt=[];Kt.forEach(ot,function(hn,ln){hn===null||typeof hn>"u"||(Kt.isArray(hn)?ln=ln+"[]":hn=[hn],Kt.forEach(hn,function(En){Kt.isDate(En)?En=En.toISOString():Kt.isObject(En)&&(En=JSON.stringify(En)),Gt.push($t(ln)+"="+$t(En))}))}),Ot=Gt.join("&")}if(Ot){var en=at.indexOf("#");en!==-1&&(at=at.slice(0,en)),at+=(at.indexOf("?")===-1?"?":"&")+Ot}return at},On=qt;function tn(){this.handlers=[]}tn.prototype.use=function(at,ot,ut){return this.handlers.push({fulfilled:at,rejected:ot,synchronous:ut?ut.synchronous:!1,runWhen:ut?ut.runWhen:null}),this.handlers.length-1},tn.prototype.eject=function(at){this.handlers[at]&&(this.handlers[at]=null)},tn.prototype.forEach=function(at){On.forEach(this.handlers,function(ot){ot!==null&&at(ot)})};var bn=tn,dn=qt,Mn=function(at,ot){dn.forEach(at,function(ut,Ot){Ot!==ot&&Ot.toUpperCase()===ot.toUpperCase()&&(at[ot]=ut,delete at[Ot])})},$n=function(at,ot,ut,Ot,Gt){return at.config=ot,ut&&(at.code=ut),at.request=Ot,at.response=Gt,at.isAxiosError=!0,at.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},at},Un=$n,Fn=function(at,ot,ut,Ot,Gt){var en=new Error(at);return Un(en,ot,ut,Ot,Gt)},cr=Fn,or=function(at,ot,ut){var Ot=ut.config.validateStatus;!ut.status||!Ot||Ot(ut.status)?at(ut):ot(cr("Request failed with status code "+ut.status,ut.config,null,ut.request,ut))},wr=qt,Er=wr.isStandardBrowserEnv()?function(){return{write:function(at,ot,ut,Ot,Gt,en){var hn=[];hn.push(at+"="+encodeURIComponent(ot)),wr.isNumber(ut)&&hn.push("expires="+new Date(ut).toGMTString()),wr.isString(Ot)&&hn.push("path="+Ot),wr.isString(Gt)&&hn.push("domain="+Gt),en===!0&&hn.push("secure"),document.cookie=hn.join("; ")},read:function(at){var ot=document.cookie.match(new RegExp("(^|;\\s*)("+at+")=([^;]*)"));return ot?decodeURIComponent(ot[3]):null},remove:function(at){this.write(at,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Zr=function(at){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(at)},po=function(at,ot){return ot?at.replace(/\/+$/,"")+"/"+ot.replace(/^\/+/,""):at},lr=Zr,pr=po,Vn=function(at,ot){return at&&!lr(ot)?pr(at,ot):ot},In=qt,zn=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],vr=function(at){var ot={},ut,Ot,Gt;return at&&In.forEach(at.split(`
`),function(en){if(Gt=en.indexOf(":"),ut=In.trim(en.substr(0,Gt)).toLowerCase(),Ot=In.trim(en.substr(Gt+1)),ut){if(ot[ut]&&zn.indexOf(ut)>=0)return;ut==="set-cookie"?ot[ut]=(ot[ut]?ot[ut]:[]).concat([Ot]):ot[ut]=ot[ut]?ot[ut]+", "+Ot:Ot}}),ot},Jr=qt,kn=Jr.isStandardBrowserEnv()?function(){var at=/(msie|trident)/i.test(navigator.userAgent),ot=document.createElement("a"),ut;function Ot(Gt){var en=Gt;return at&&(ot.setAttribute("href",en),en=ot.href),ot.setAttribute("href",en),{href:ot.href,protocol:ot.protocol?ot.protocol.replace(/:$/,""):"",host:ot.host,search:ot.search?ot.search.replace(/^\?/,""):"",hash:ot.hash?ot.hash.replace(/^#/,""):"",hostname:ot.hostname,port:ot.port,pathname:ot.pathname.charAt(0)==="/"?ot.pathname:"/"+ot.pathname}}return ut=Ot(window.location.href),function(Gt){var en=Jr.isString(Gt)?Ot(Gt):Gt;return en.protocol===ut.protocol&&en.host===ut.host}}():function(){return function(){return!0}}();function ir(at){this.message=at}ir.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ir.prototype.__CANCEL__=!0;var gr=ir,Br=qt,vo=or,eo=Er,io=Sn,to=Vn,Wr=vr,To=kn,no=Fn,yo=Tu,Pr=gr,fu=function(at){return new o(function(ot,ut){var Ot=at.data,Gt=at.headers,en=at.responseType,hn;function ln(){at.cancelToken&&at.cancelToken.unsubscribe(hn),at.signal&&at.signal.removeEventListener("abort",hn)}Br.isFormData(Ot)&&delete Gt["Content-Type"];var En=new XMLHttpRequest;if(at.auth){var rr=at.auth.username||"",br=at.auth.password?unescape(encodeURIComponent(at.auth.password)):"";Gt.Authorization="Basic "+btoa(rr+":"+br)}var Tr=to(at.baseURL,at.url);En.open(at.method.toUpperCase(),io(Tr,at.params,at.paramsSerializer),!0),En.timeout=at.timeout;function ho(){if(En){var Ir="getAllResponseHeaders"in En?Wr(En.getAllResponseHeaders()):null,Ar=!en||en==="text"||en==="json"?En.responseText:En.response,ko={data:Ar,status:En.status,statusText:En.statusText,headers:Ir,config:at,request:En};vo(function(Vo){ot(Vo),ln()},function(Vo){ut(Vo),ln()},ko),En=null}}if("onloadend"in En?En.onloadend=ho:En.onreadystatechange=function(){!En||En.readyState!==4||En.status===0&&!(En.responseURL&&En.responseURL.indexOf("file:")===0)||setTimeout(ho)},En.onabort=function(){!En||(ut(no("Request aborted",at,"ECONNABORTED",En)),En=null)},En.onerror=function(){ut(no("Network Error",at,null,En)),En=null},En.ontimeout=function(){var Ir=at.timeout?"timeout of "+at.timeout+"ms exceeded":"timeout exceeded",Ar=at.transitional||yo.transitional;at.timeoutErrorMessage&&(Ir=at.timeoutErrorMessage),ut(no(Ir,at,Ar.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",En)),En=null},Br.isStandardBrowserEnv()){var Eo=(at.withCredentials||To(Tr))&&at.xsrfCookieName?eo.read(at.xsrfCookieName):void 0;Eo&&(Gt[at.xsrfHeaderName]=Eo)}"setRequestHeader"in En&&Br.forEach(Gt,function(Ir,Ar){typeof Ot>"u"&&Ar.toLowerCase()==="content-type"?delete Gt[Ar]:En.setRequestHeader(Ar,Ir)}),Br.isUndefined(at.withCredentials)||(En.withCredentials=!!at.withCredentials),en&&en!=="json"&&(En.responseType=at.responseType),typeof at.onDownloadProgress=="function"&&En.addEventListener("progress",at.onDownloadProgress),typeof at.onUploadProgress=="function"&&En.upload&&En.upload.addEventListener("progress",at.onUploadProgress),(at.cancelToken||at.signal)&&(hn=function(Ir){!En||(ut(!Ir||Ir&&Ir.type?new Pr("canceled"):Ir),En.abort(),En=null)},at.cancelToken&&at.cancelToken.subscribe(hn),at.signal&&(at.signal.aborted?hn():at.signal.addEventListener("abort",hn))),Ot||(Ot=null),En.send(Ot)})},Zo=qt,oo=Mn,Xo=$n,Zs={"Content-Type":"application/x-www-form-urlencoded"};function Pl(at,ot){!Zo.isUndefined(at)&&Zo.isUndefined(at["Content-Type"])&&(at["Content-Type"]=ot)}function fs(){var at;return(typeof XMLHttpRequest<"u"||typeof a<"u"&&Object.prototype.toString.call(a)==="[object process]")&&(at=fu),at}function Ys(at,ot,ut){if(Zo.isString(at))try{return(ot||JSON.parse)(at),Zo.trim(at)}catch(Ot){if(Ot.name!=="SyntaxError")throw Ot}return(ut||JSON.stringify)(at)}var hu={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:fs(),transformRequest:[function(at,ot){return oo(ot,"Accept"),oo(ot,"Content-Type"),Zo.isFormData(at)||Zo.isArrayBuffer(at)||Zo.isBuffer(at)||Zo.isStream(at)||Zo.isFile(at)||Zo.isBlob(at)?at:Zo.isArrayBufferView(at)?at.buffer:Zo.isURLSearchParams(at)?(Pl(ot,"application/x-www-form-urlencoded;charset=utf-8"),at.toString()):Zo.isObject(at)||ot&&ot["Content-Type"]==="application/json"?(Pl(ot,"application/json"),Ys(at)):at}],transformResponse:[function(at){var ot=this.transitional||hu.transitional,ut=ot&&ot.silentJSONParsing,Ot=ot&&ot.forcedJSONParsing,Gt=!ut&&this.responseType==="json";if(Gt||Ot&&Zo.isString(at)&&at.length)try{return JSON.parse(at)}catch(en){if(Gt)throw en.name==="SyntaxError"?Xo(en,this,"E_JSON_PARSE"):en}return at}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(at){return at>=200&&at<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Zo.forEach(["delete","get","head"],function(at){hu.headers[at]={}}),Zo.forEach(["post","put","patch"],function(at){hu.headers[at]=Zo.merge(Zs)});var Tu=hu,Zp=qt,Pu=Tu,Fu=function(at,ot,ut){var Ot=this||Pu;return Zp.forEach(ut,function(Gt){at=Gt.call(Ot,at,ot)}),at},Mr=function(at){return!!(at&&at.__CANCEL__)},Fs=qt,zl=Fu,Rs=Mr,Js=Tu,Or=gr;function Ms(at){if(at.cancelToken&&at.cancelToken.throwIfRequested(),at.signal&&at.signal.aborted)throw new Or("canceled")}var Vp=function(at){Ms(at),at.headers=at.headers||{},at.data=zl.call(at,at.data,at.headers,at.transformRequest),at.headers=Fs.merge(at.headers.common||{},at.headers[at.method]||{},at.headers),Fs.forEach(["delete","get","head","post","put","patch","common"],function(ut){delete at.headers[ut]});var ot=at.adapter||Js.adapter;return ot(at).then(function(ut){return Ms(at),ut.data=zl.call(at,ut.data,ut.headers,at.transformResponse),ut},function(ut){return Rs(ut)||(Ms(at),ut&&ut.response&&(ut.response.data=zl.call(at,ut.response.data,ut.response.headers,at.transformResponse))),o.reject(ut)})},Jl=qt,Ql=function(at,ot){ot=ot||{};var ut={};function Ot(rr,br){return Jl.isPlainObject(rr)&&Jl.isPlainObject(br)?Jl.merge(rr,br):Jl.isPlainObject(br)?Jl.merge({},br):Jl.isArray(br)?br.slice():br}function Gt(rr){if(Jl.isUndefined(ot[rr])){if(!Jl.isUndefined(at[rr]))return Ot(void 0,at[rr])}else return Ot(at[rr],ot[rr])}function en(rr){if(!Jl.isUndefined(ot[rr]))return Ot(void 0,ot[rr])}function hn(rr){if(Jl.isUndefined(ot[rr])){if(!Jl.isUndefined(at[rr]))return Ot(void 0,at[rr])}else return Ot(void 0,ot[rr])}function ln(rr){if(rr in ot)return Ot(at[rr],ot[rr]);if(rr in at)return Ot(void 0,at[rr])}var En={url:en,method:en,data:en,baseURL:hn,transformRequest:hn,transformResponse:hn,paramsSerializer:hn,timeout:hn,timeoutMessage:hn,withCredentials:hn,adapter:hn,responseType:hn,xsrfCookieName:hn,xsrfHeaderName:hn,onUploadProgress:hn,onDownloadProgress:hn,decompress:hn,maxContentLength:hn,maxBodyLength:hn,transport:hn,httpAgent:hn,httpsAgent:hn,cancelToken:hn,socketPath:hn,responseEncoding:hn,validateStatus:ln};return Jl.forEach(Object.keys(at).concat(Object.keys(ot)),function(rr){var br=En[rr]||Gt,Tr=br(rr);Jl.isUndefined(Tr)&&br!==ln||(ut[rr]=Tr)}),ut},Do={version:"0.25.0"},El=Do.version,jo={};["object","boolean","number","function","string","symbol"].forEach(function(at,ot){jo[at]=function(ut){return typeof ut===at||"a"+(ot<1?"n ":" ")+at}});var Zu={};jo.transitional=function(at,ot,ut){function Ot(Gt,en){return"[Axios v"+El+"] Transitional option '"+Gt+"'"+en+(ut?". "+ut:"")}return function(Gt,en,hn){if(at===!1)throw new Error(Ot(en," has been removed"+(ot?" in "+ot:"")));return ot&&!Zu[en]&&(Zu[en]=!0,console.warn(Ot(en," has been deprecated since v"+ot+" and will be removed in the near future"))),at?at(Gt,en,hn):!0}};function _d(at,ot,ut){if(typeof at!="object")throw new TypeError("options must be an object");for(var Ot=Object.keys(at),Gt=Ot.length;Gt-- >0;){var en=Ot[Gt],hn=ot[en];if(hn){var ln=at[en],En=ln===void 0||hn(ln,en,at);if(En!==!0)throw new TypeError("option "+en+" must be "+En);continue}if(ut!==!0)throw Error("Unknown option "+en)}}var Bs={assertOptions:_d,validators:jo},Yu=qt,Xu=Sn,js=bn,Go=Vp,Fl=Ql,qr=Bs,Bu=qr.validators;function pu(at){this.defaults=at,this.interceptors={request:new js,response:new js}}pu.prototype.request=function(at,ot){if(typeof at=="string"?(ot=ot||{},ot.url=at):ot=at||{},!ot.url)throw new Error("Provided config url is not valid");ot=Fl(this.defaults,ot),ot.method?ot.method=ot.method.toLowerCase():this.defaults.method?ot.method=this.defaults.method.toLowerCase():ot.method="get";var ut=ot.transitional;ut!==void 0&&qr.assertOptions(ut,{silentJSONParsing:Bu.transitional(Bu.boolean),forcedJSONParsing:Bu.transitional(Bu.boolean),clarifyTimeoutError:Bu.transitional(Bu.boolean)},!1);var Ot=[],Gt=!0;this.interceptors.request.forEach(function(Tr){typeof Tr.runWhen=="function"&&Tr.runWhen(ot)===!1||(Gt=Gt&&Tr.synchronous,Ot.unshift(Tr.fulfilled,Tr.rejected))});var en=[];this.interceptors.response.forEach(function(Tr){en.push(Tr.fulfilled,Tr.rejected)});var hn;if(!Gt){var ln=[Go,void 0];for(Array.prototype.unshift.apply(ln,Ot),ln=ln.concat(en),hn=o.resolve(ot);ln.length;)hn=hn.then(ln.shift(),ln.shift());return hn}for(var En=ot;Ot.length;){var rr=Ot.shift(),br=Ot.shift();try{En=rr(En)}catch(Tr){br(Tr);break}}try{hn=Go(En)}catch(Tr){return o.reject(Tr)}for(;en.length;)hn=hn.then(en.shift(),en.shift());return hn},pu.prototype.getUri=function(at){if(!at.url)throw new Error("Provided config url is not valid");return at=Fl(this.defaults,at),Xu(at.url,at.params,at.paramsSerializer).replace(/^\?/,"")},Yu.forEach(["delete","get","head","options"],function(at){pu.prototype[at]=function(ot,ut){return this.request(Fl(ut||{},{method:at,url:ot,data:(ut||{}).data}))}}),Yu.forEach(["post","put","patch"],function(at){pu.prototype[at]=function(ot,ut,Ot){return this.request(Fl(Ot||{},{method:at,url:ot,data:ut}))}});var pp=pu,os=gr;function mp(at){if(typeof at!="function")throw new TypeError("executor must be a function.");var ot;this.promise=new o(function(Ot){ot=Ot});var ut=this;this.promise.then(function(Ot){if(ut._listeners){var Gt,en=ut._listeners.length;for(Gt=0;Gt<en;Gt++)ut._listeners[Gt](Ot);ut._listeners=null}}),this.promise.then=function(Ot){var Gt,en=new o(function(hn){ut.subscribe(hn),Gt=hn}).then(Ot);return en.cancel=function(){ut.unsubscribe(Gt)},en},at(function(Ot){ut.reason||(ut.reason=new os(Ot),ot(ut.reason))})}mp.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},mp.prototype.subscribe=function(at){if(this.reason){at(this.reason);return}this._listeners?this._listeners.push(at):this._listeners=[at]},mp.prototype.unsubscribe=function(at){if(this._listeners){var ot=this._listeners.indexOf(at);ot!==-1&&this._listeners.splice(ot,1)}},mp.source=function(){var at,ot=new mp(function(ut){at=ut});return{token:ot,cancel:at}};var Mp=mp,gp=function(at){return function(ot){return at.apply(null,ot)}},op=qt,Lp=function(at){return op.isObject(at)&&at.isAxiosError===!0},Ku=qt,$l=_,Ru=pp,xl=Ql,Cp=Tu;function Wn(at){var ot=new Ru(at),ut=$l(Ru.prototype.request,ot);return Ku.extend(ut,Ru.prototype,ot),Ku.extend(ut,ot),ut.create=function(Ot){return Wn(xl(at,Ot))},ut}var pn=Wn(Cp);pn.Axios=Ru,pn.Cancel=gr,pn.CancelToken=Mp,pn.isCancel=Mr,pn.VERSION=Do.version,pn.all=function(at){return o.all(at)},pn.spread=gp,pn.isAxiosError=Lp,j.exports=pn,j.exports.default=pn;var Cn=j.exports;class Dn{isEmpty(){return!this.isPresent()}static of(ot){if(ot!=null)return new fr(ot);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(ot){return Dn.of(ot)}static ofNullable(ot){return ot!=null?new fr(ot):new yr}static empty(){return new yr}static from(ot){switch(ot.kind){case"present":return Dn.of(ot.value);case"empty":return Dn.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class fr extends Dn{constructor(ot){super(),this.payload=ot}isPresent(){return!0}get(){return this.payload}ifPresent(ot){ot(this.payload)}ifPresentOrElse(ot,ut){ot(this.payload)}filter(ot){return ot(this.payload)?this:Dn.empty()}map(ot){const ut=ot(this.payload);return Dn.ofNullable(ut)}flatMap(ot){return ot(this.payload)}or(ot){return this}orElse(ot){return this.payload}orElseGet(ot){return this.payload}orElseThrow(ot){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(ot){return ot.present(this.payload)}toJSON(ot){return this.payload}}class yr extends Dn{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(ot){}ifPresentOrElse(ot,ut){ut()}filter(ot){return this}map(ot){return Dn.empty()}flatMap(ot){return Dn.empty()}or(ot){return ot()}orElse(ot){return ot}orElseGet(ot){return this.orElse(ot())}orElseThrow(ot){throw ot()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(ot){return ot.empty()}toJSON(ot){return null}}const mo="2.0.0";function Ro(at){globalThis._vonageMediaProcessorMetadata=at}function ms(){return globalThis._vonageMediaProcessorMetadata}class Ho{constructor(){const ot=ms();this._report={action:Dn.empty(),applicationId:Dn.ofNullable(ot!==void 0&&ot!=null?ot.appId:null),timestamp:Date.now(),fps:Dn.empty(),framesTransformed:Dn.empty(),guid:Dn.empty(),highestFrameTransformCpu:Dn.empty(),message:Dn.empty(),source:Dn.ofNullable(ot!==void 0&&ot!=null?ot.sourceType:null),transformedFps:Dn.empty(),transformerType:Dn.empty(),variation:Dn.empty(),videoHeight:Dn.empty(),videoWidth:Dn.empty(),version:mo,error:Dn.empty(),proxyUrl:Dn.ofNullable(ot!==void 0&&ot!=null?ot.proxyUrl:null)}}action(ot){return this._report.action=Dn.ofNullable(ot),this}framesTransformed(ot){return this._report.framesTransformed=Dn.ofNullable(ot),this}fps(ot){return this._report.fps=Dn.ofNullable(ot),this}guid(ot){return this._report.guid=Dn.ofNullable(ot),this}message(ot){return this._report.message=Dn.ofNullable(ot),this}transformedFps(ot){return this._report.transformedFps=Dn.ofNullable(ot),this}transformerType(ot){return this._report.transformerType=Dn.ofNullable(ot),this}variation(ot){return this._report.variation=Dn.ofNullable(ot),this}videoHeight(ot){return this._report.videoHeight=Dn.ofNullable(ot),this}videoWidth(ot){return this._report.videoWidth=Dn.ofNullable(ot),this}error(ot){return this._report.error=Dn.ofNullable(ot),this}build(){return this._report}}const _o=at=>JSON.stringify(at,(ot,ut)=>{if(ut!==null)return ut});class ys{static report(ot){return new o((ut,Ot)=>{if(ot.applicationId.isEmpty()||ot.source.isEmpty()){ut("success");return}let Gt=Cn.create(),en={timeout:1e4,timeoutErrorMessage:"Request timeout",headers:{"Content-Type":"application/json"}},hn="hlg.tokbox.com/prod/logging/vcp_webrtc";if(ot.proxyUrl.isEmpty())hn="https://"+hn;else{let ln;ot.proxyUrl.get().slice(ot.proxyUrl.get().length-1)!=="/"?ln=ot.proxyUrl.get()+"/":ln=ot.proxyUrl.get(),hn=ln+hn}Gt.post(hn,_o(ot),en).then(ln=>{console.log(ln),ut("success")}).catch(ln=>{console.log(ln),Ot(ln)})})}}var Ps,vp=new Uint8Array(16);function Is(){if(!Ps&&(Ps=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ps))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ps(vp)}var Cl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vs(at){return typeof at=="string"&&Cl.test(at)}for(var Xl=[],cp=0;cp<256;++cp)Xl.push((cp+256).toString(16).substr(1));function zu(at){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ut=(Xl[at[ot+0]]+Xl[at[ot+1]]+Xl[at[ot+2]]+Xl[at[ot+3]]+"-"+Xl[at[ot+4]]+Xl[at[ot+5]]+"-"+Xl[at[ot+6]]+Xl[at[ot+7]]+"-"+Xl[at[ot+8]]+Xl[at[ot+9]]+"-"+Xl[at[ot+10]]+Xl[at[ot+11]]+Xl[at[ot+12]]+Xl[at[ot+13]]+Xl[at[ot+14]]+Xl[at[ot+15]]).toLowerCase();if(!Vs(ut))throw TypeError("Stringified UUID is invalid");return ut}function Dp(at,ot,ut){at=at||{};var Ot=at.random||(at.rng||Is)();if(Ot[6]=Ot[6]&15|64,Ot[8]=Ot[8]&63|128,ot){ut=ut||0;for(var Gt=0;Gt<16;++Gt)ot[ut+Gt]=Ot[Gt];return ot}return zu(Ot)}const Xs=new WeakMap,Vu=new WeakMap,Ju=new WeakMap,yp=Symbol("anyProducer"),su=o.resolve(),_f=Symbol("listenerAdded"),Tl=Symbol("listenerRemoved");let Qr=!1;function Fo(at){if(typeof at!="string"&&typeof at!="symbol")throw new TypeError("eventName must be a string or a symbol")}function _h(at){if(typeof at!="function")throw new TypeError("listener must be a function")}function Dr(at,ot){const ut=Vu.get(at);return ut.has(ot)||ut.set(ot,new Set),ut.get(ot)}function Pp(at,ot){const ut=typeof ot=="string"||typeof ot=="symbol"?ot:yp,Ot=Ju.get(at);return Ot.has(ut)||Ot.set(ut,new Set),Ot.get(ut)}function Ns(at,ot,ut){const Ot=Ju.get(at);if(Ot.has(ot))for(const Gt of Ot.get(ot))Gt.enqueue(ut);if(Ot.has(yp)){const Gt=o.all([ot,ut]);for(const en of Ot.get(yp))en.enqueue(Gt)}}function ep(at,ot){ot=Array.isArray(ot)?ot:[ot];let ut=!1,Ot=()=>{},Gt=[];const en={enqueue(hn){Gt.push(hn),Ot()},finish(){ut=!0,Ot()}};for(const hn of ot)Pp(at,hn).add(en);return{async next(){return Gt?Gt.length===0?ut?(Gt=void 0,this.next()):(await new o(hn=>{Ot=hn}),this.next()):{done:!1,value:await Gt.shift()}:{done:!0}},async return(hn){Gt=void 0;for(const ln of ot)Pp(at,ln).delete(en);return Ot(),arguments.length>0?{done:!0,value:await hn}:{done:!0}},[Symbol.asyncIterator](){return this}}}function bp(at){if(at===void 0)return Du;if(!Array.isArray(at))throw new TypeError("`methodNames` must be an array of strings");for(const ot of at)if(!Du.includes(ot))throw typeof ot!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${ot} is not Emittery method`);return at}const bo=at=>at===_f||at===Tl;class Tp{static mixin(ot,ut){return ut=bp(ut),Ot=>{if(typeof Ot!="function")throw new TypeError("`target` must be function");for(const hn of ut)if(Ot.prototype[hn]!==void 0)throw new Error(`The property \`${hn}\` already exists on \`target\``);function Gt(){return Object.defineProperty(this,ot,{enumerable:!1,value:new Tp}),this[ot]}Object.defineProperty(Ot.prototype,ot,{enumerable:!1,get:Gt});const en=hn=>function(...ln){return this[ot][hn](...ln)};for(const hn of ut)Object.defineProperty(Ot.prototype,hn,{enumerable:!1,value:en(hn)});return Ot}}static get isDebugEnabled(){if(typeof a!="object")return Qr;const{env:ot}=a||{env:{}};return ot.DEBUG==="emittery"||ot.DEBUG==="*"||Qr}static set isDebugEnabled(ot){Qr=ot}constructor(ot={}){Xs.set(this,new Set),Vu.set(this,new Map),Ju.set(this,new Map),this.debug=ot.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(ut,Ot,Gt,en)=>{en=JSON.stringify(en),typeof Gt=="symbol"&&(Gt=Gt.toString());const hn=new Date,ln=`${hn.getHours()}:${hn.getMinutes()}:${hn.getSeconds()}.${hn.getMilliseconds()}`;console.log(`[${ln}][emittery:${ut}][${Ot}] Event Name: ${Gt}
	data: ${en}`)})}logIfDebugEnabled(ot,ut,Ot){(Tp.isDebugEnabled||this.debug.enabled)&&this.debug.logger(ot,this.debug.name,ut,Ot)}on(ot,ut){_h(ut),ot=Array.isArray(ot)?ot:[ot];for(const Ot of ot)Fo(Ot),Dr(this,Ot).add(ut),this.logIfDebugEnabled("subscribe",Ot,void 0),bo(Ot)||this.emit(_f,{eventName:Ot,listener:ut});return this.off.bind(this,ot,ut)}off(ot,ut){_h(ut),ot=Array.isArray(ot)?ot:[ot];for(const Ot of ot)Fo(Ot),Dr(this,Ot).delete(ut),this.logIfDebugEnabled("unsubscribe",Ot,void 0),bo(Ot)||this.emit(Tl,{eventName:Ot,listener:ut})}once(ot){return new o(ut=>{const Ot=this.on(ot,Gt=>{Ot(),ut(Gt)})})}events(ot){ot=Array.isArray(ot)?ot:[ot];for(const ut of ot)Fo(ut);return ep(this,ot)}async emit(ot,ut){Fo(ot),this.logIfDebugEnabled("emit",ot,ut),Ns(this,ot,ut);const Ot=Dr(this,ot),Gt=Xs.get(this),en=[...Ot],hn=bo(ot)?[]:[...Gt];await su,await o.all([...en.map(async ln=>{if(Ot.has(ln))return ln(ut)}),...hn.map(async ln=>{if(Gt.has(ln))return ln(ot,ut)})])}async emitSerial(ot,ut){Fo(ot),this.logIfDebugEnabled("emitSerial",ot,ut);const Ot=Dr(this,ot),Gt=Xs.get(this),en=[...Ot],hn=[...Gt];await su;for(const ln of en)Ot.has(ln)&&await ln(ut);for(const ln of hn)Gt.has(ln)&&await ln(ot,ut)}onAny(ot){return _h(ot),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Xs.get(this).add(ot),this.emit(_f,{listener:ot}),this.offAny.bind(this,ot)}anyEvent(){return ep(this)}offAny(ot){_h(ot),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Tl,{listener:ot}),Xs.get(this).delete(ot)}clearListeners(ot){ot=Array.isArray(ot)?ot:[ot];for(const ut of ot)if(this.logIfDebugEnabled("clear",ut,void 0),typeof ut=="string"||typeof ut=="symbol"){Dr(this,ut).clear();const Ot=Pp(this,ut);for(const Gt of Ot)Gt.finish();Ot.clear()}else{Xs.get(this).clear();for(const Ot of Vu.get(this).values())Ot.clear();for(const Ot of Ju.get(this).values()){for(const Gt of Ot)Gt.finish();Ot.clear()}}}listenerCount(ot){ot=Array.isArray(ot)?ot:[ot];let ut=0;for(const Ot of ot){if(typeof Ot=="string"){ut+=Xs.get(this).size+Dr(this,Ot).size+Pp(this,Ot).size+Pp(this).size;continue}typeof Ot<"u"&&Fo(Ot),ut+=Xs.get(this).size;for(const Gt of Vu.get(this).values())ut+=Gt.size;for(const Gt of Ju.get(this).values())ut+=Gt.size}return ut}bindMethods(ot,ut){if(typeof ot!="object"||ot===null)throw new TypeError("`target` must be an object");ut=bp(ut);for(const Ot of ut){if(ot[Ot]!==void 0)throw new Error(`The property \`${Ot}\` already exists on \`target\``);Object.defineProperty(ot,Ot,{enumerable:!1,value:this[Ot].bind(this)})}}}const Du=Object.getOwnPropertyNames(Tp.prototype).filter(at=>at!=="constructor");Object.defineProperty(Tp,"listenerAdded",{value:_f,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(Tp,"listenerRemoved",{value:Tl,writable:!1,enumerable:!0,configurable:!1});var jp=Tp;function Kp(at){return typeof at=="object"&&at!==null&&"message"in at&&typeof at.message=="string"}function Sp(at){if(Kp(at))return at;try{return new Error(JSON.stringify(at))}catch{return new Error(String(at))}}function Gp(at){return Sp(at).message}var Up=(at=>(at.FPS_DROP="fps_drop",at))(Up||{}),Yo=(at=>(at.start="start",at.transform="transform",at.flush="flush",at))(Yo||{}),lo=(at=>(at.pipeline_ended="pipeline_ended",at.pipeline_ended_with_error="pipeline_ended_with_error",at.pipeline_started="pipeline_started",at.pipeline_started_with_error="pipeline_started_with_error",at.pipeline_restarted="pipeline_restarted",at.pipeline_restarted_with_error="pipeline_restarted_with_error",at))(lo||{});const _p=500,sm=.8;class qp extends jp{constructor(ot,ut){super(),this.index_=ut,this.uuid_=Dp(),this.framesTransformed_=0,this.transformer_=ot,this.shouldStop_=!1,this.isFlashed_=!1,this.framesFromSource_=0,this.fps_=0,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in ot&&(this.transformerType_=ot.getTransformerType());const Ot=new Ho().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Create").build();ys.report(Ot)}setTrackExpectedRate(ot){this.trackExpectedRate_=ot}async start(ot){if(this.controller_=ot,this.transformer_&&typeof this.transformer_.start=="function")try{await this.transformer_.start(ot)}catch(ut){const Ot=new Ho().action("MediaTransformer").guid(this.uuid_).message(b.errors.transformer_start).transformerType(this.transformerType_).variation("Error").error(Gp(ut)).build();ys.report(Ot);const Gt={eventMetaData:{transformerIndex:this.index_},error:ut,function:"start"};this.emit("error",Gt)}}async transform(ot,ut){var Ot,Gt,en,hn;if(this.mediaTransformerQosReportStartTimestamp_===0&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),ot instanceof VideoFrame&&(this.videoHeight_=(Ot=ot==null?void 0:ot.displayHeight)!=null?Ot:0,this.videoWidth_=(Gt=ot==null?void 0:ot.displayWidth)!=null?Gt:0),++this.framesFromSource_,this.transformer_)if(this.shouldStop_)console.warn("[Pipeline] flush from transform"),ot.close(),this.flush(ut),ut.terminate();else try{await((hn=(en=this.transformer_).transform)==null?void 0:hn.call(en,ot,ut)),++this.framesTransformed_,this.framesTransformed_===_p&&this.mediaTransformerQosReport()}catch(ln){const En=new Ho().action("MediaTransformer").guid(this.uuid_).message(b.errors.transformer_transform).transformerType(this.transformerType_).variation("Error").error(Gp(ln)).build();ys.report(En);const rr={eventMetaData:{transformerIndex:this.index_},error:ln,function:"transform"};this.emit("error",rr)}}async flush(ot){if(this.transformer_&&typeof this.transformer_.flush=="function"&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(ot)}catch(Ot){const Gt=new Ho().action("MediaTransformer").guid(this.uuid_).message(b.errors.transformer_flush).transformerType(this.transformerType_).variation("Error").error(Gp(Ot)).build();ys.report(Gt);const en={eventMetaData:{transformerIndex:this.index_},error:Ot,function:"flush"};this.emit("error",en)}}this.mediaTransformerQosReport();const ut=new Ho().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Delete").build();ys.report(ut)}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}mediaTransformerQosReport(){let ot=(Date.now()-this.mediaTransformerQosReportStartTimestamp_)/1e3,ut=this.framesFromSource_/ot,Ot=this.framesTransformed_/ot;if(this.trackExpectedRate_!=-1&&this.trackExpectedRate_*sm>ut){const en={eventMetaData:{transformerIndex:this.index_},warningType:"fps_drop",dropInfo:{requested:this.trackExpectedRate_,current:ut}};this.emit("warn",en)}const Gt=new Ho().action("MediaTransformer").fps(ut).transformedFps(Ot).framesTransformed(this.framesTransformed_).guid(this.uuid_).transformerType(this.transformerType_).videoHeight(this.videoHeight_).videoWidth(this.videoWidth_).variation("QoS").build();ys.report(Gt),this.mediaTransformerQosReportStartTimestamp_=0,this.framesFromSource_=0,this.framesTransformed_=0}}class lp extends jp{constructor(ot){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let ut=0;ut<ot.length;ut++){let Ot=new qp(ot[ut],ut);Ot.on("error",Gt=>{this.emit("error",Gt)}),Ot.on("warn",Gt=>{this.emit("warn",Gt)}),this.transformers_.push(Ot)}}setTrackExpectedRate(ot){this.trackExpectedRate_=ot;for(let ut of this.transformers_)ut.setTrackExpectedRate(this.trackExpectedRate_)}async start(ot,ut){if(!this.transformers_||this.transformers_.length===0){console.log("[Pipeline] No transformers.");return}try{let Ot=ot;for(let Gt of this.transformers_)ot=ot.pipeThrough(new TransformStream(Gt));ot.pipeTo(ut).then(async()=>{console.log("[Pipeline] Setup."),await ut.abort(),await Ot.cancel(),this.emit("pipelineInfo","pipeline_ended")}).catch(async Gt=>{ot.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(en=>{console.error("[Pipeline] Error from stream transform:",en)}),await ut.abort(Gt),await Ot.cancel(Gt),this.emit("pipelineInfo","pipeline_ended_with_error")})}catch{this.emit("pipelineInfo","pipeline_started_with_error"),this.destroy();return}this.emit("pipelineInfo","pipeline_started"),console.log("[Pipeline] Pipeline started.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let ot of this.transformers_)ot.stop()}}class Lu extends jp{constructor(){super(),this.uuid_=Dp(),this.trackExpectedRate_=-1;const ot=new Ho().action("MediaProcessor").guid(this.uuid_).variation("Create").build();ys.report(ot)}setTrackExpectedRate(ot){this.trackExpectedRate_=ot,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(ot,ut){return this.readable_=ot,this.writable_=ut,this.transformInternal()}transformInternal(){return new o((ot,ut)=>{if(!this.transformers_||this.transformers_.length===0){const Gt=new Ho().action("MediaProcessor").guid(this.uuid_).message(b.errors.transformer_none).variation("Error").build();ys.report(Gt),ut("[MediaProcessor] Need to set transformers.");return}if(!this.readable_){const Gt=new Ho().action("MediaProcessor").guid(this.uuid_).message(b.errors.readable_null).variation("Error").build();ys.report(Gt),ut("[MediaProcessor] Readable is null.");return}if(!this.writable_){const Gt=new Ho().action("MediaProcessor").guid(this.uuid_).message(b.errors.writable_null).variation("Error").build();ys.report(Gt),ut("[MediaProcessor] Writable is null.");return}let Ot=!1;this.pipeline_&&(Ot=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new lp(this.transformers_),this.pipeline_.on("warn",Gt=>{this.emit("warn",Gt)}),this.pipeline_.on("error",Gt=>{this.emit("error",Gt)}),this.pipeline_.on("pipelineInfo",Gt=>{Ot&&(Gt==="pipeline_started"?Gt=lo.pipeline_restarted:Gt==="pipeline_started_with_error"&&(Gt=lo.pipeline_restarted_with_error)),this.emit("pipelineInfo",Gt)}),this.trackExpectedRate_!=-1&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{ot()}).catch(Gt=>{ut(Gt)})})}setTransformers(ot){const ut=new Ho().action("MediaProcessor").guid(this.uuid_).message(b.updates.transformer_new).variation("Update").build();return ys.report(ut),this.transformers_=ot,this.readable_&&this.writable_?this.transformInternal():o.resolve()}destroy(){return new o(ot=>{this.pipeline_&&this.pipeline_.destroy();const ut=new Ho().action("MediaProcessor").guid(this.uuid_).variation("Delete").build();ys.report(ut),ot()})}}class Tn{constructor(){this.processor_=null,this.generator_=null}init(ot){return new o((ut,Ot)=>{try{this.processor_=new MediaStreamTrackProcessor(ot)}catch(Gt){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${Gt}`),Ot(Gt)}try{ot.kind==="audio"?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):ot.kind==="video"?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):Ot("kind not supported")}catch(Gt){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${Gt}`),Ot(Gt)}ut()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class Ft{constructor(ot){this.insertableStreamHelper_=new Tn,this.mediaProcessor_=ot}setTrack(ot){return new o((ut,Ot)=>{this.insertableStreamHelper_.init(ot).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{ut(this.insertableStreamHelper_.getProccesorTrack())}).catch(Gt=>{Ot(Gt)})}).catch(Gt=>{Ot(Gt)})})}destroy(){return new o((ot,ut)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{ot()}).catch(Ot=>{ut(Ot)}):ut("no processor")})}}var yn=(at=>(at.Low="Low",at.High="High",at))(yn||{}),jn=(at=>(at.BackgroundBlur="BackgroundBlur",at.VirtualBackground="VirtualBackground",at.VideoBackground="VideoBackground",at.SilhouetteBlur="SilhouetteBlur",at))(jn||{}),Hn=(at=>(at.FAST="FAST",at.PRECISE="PRECISE",at))(Hn||{});const Xr=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));var jr=function(){var at=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(ot){ot=ot||{};var ut=typeof ot<"u"?ot:{},Ot,Gt;ut.ready=new o(function(ur,mr){Ot=ur,Gt=mr});var en={},hn;for(hn in ut)ut.hasOwnProperty(hn)&&(en[hn]=ut[hn]);var ln="./this.program",En=function(ur,mr){throw mr},rr=!0,br="";function Tr(ur){return ut.locateFile?ut.locateFile(ur,br):br+ur}var ho;typeof document<"u"&&document.currentScript&&(br=document.currentScript.src),at&&(br=at),br.indexOf("blob:")!==0?br=br.substr(0,br.replace(/[?#].*/,"").lastIndexOf("/")+1):br="";var Eo=ut.print||console.log.bind(console),Ir=ut.printErr||console.warn.bind(console);for(hn in en)en.hasOwnProperty(hn)&&(ut[hn]=en[hn]);en=null,ut.arguments&&ut.arguments,ut.thisProgram&&(ln=ut.thisProgram),ut.quit&&(En=ut.quit);var Ar;ut.wasmBinary&&(Ar=ut.wasmBinary);var ko=ut.noExitRuntime||!0;typeof WebAssembly!="object"&&Ss("no native wasm support detected");var Vo,rs=!1,qn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function bu(ur,mr,xr){for(var Jo=mr+xr,gs=mr;ur[gs]&&!(gs>=Jo);)++gs;if(gs-mr>16&&ur.subarray&&qn)return qn.decode(ur.subarray(mr,gs));for(var hs="";mr<gs;){var fo=ur[mr++];if(!(fo&128)){hs+=String.fromCharCode(fo);continue}var Cs=ur[mr++]&63;if((fo&224)==192){hs+=String.fromCharCode((fo&31)<<6|Cs);continue}var xa=ur[mr++]&63;if((fo&240)==224?fo=(fo&15)<<12|Cs<<6|xa:fo=(fo&7)<<18|Cs<<12|xa<<6|ur[mr++]&63,fo<65536)hs+=String.fromCharCode(fo);else{var Ul=fo-65536;hs+=String.fromCharCode(55296|Ul>>10,56320|Ul&1023)}}return hs}function cu(ur,mr){return ur?bu(Hr,ur,mr):""}function Us(ur,mr,xr){for(var Jo=0;Jo<ur.length;++Jo)vs[mr++>>0]=ur.charCodeAt(Jo);xr||(vs[mr>>0]=0)}function qo(ur,mr){return ur%mr>0&&(ur+=mr-ur%mr),ur}var wp,vs,Hr,Su;function Op(ur){wp=ur,ut.HEAP8=vs=new Int8Array(ur),ut.HEAP16=new Int16Array(ur),ut.HEAP32=Su=new Int32Array(ur),ut.HEAPU8=Hr=new Uint8Array(ur),ut.HEAPU16=new Uint16Array(ur),ut.HEAPU32=new Uint32Array(ur),ut.HEAPF32=new Float32Array(ur),ut.HEAPF64=new Float64Array(ur)}ut.INITIAL_MEMORY;var Hs,Oo=[],$s=[],tu=[],ku=0;function np(){return ko||ku>0}function ju(){if(ut.preRun)for(typeof ut.preRun=="function"&&(ut.preRun=[ut.preRun]);ut.preRun.length;)Eu(ut.preRun.shift());Qo(Oo)}function sp(){Qo($s)}function lu(){if(ut.postRun)for(typeof ut.postRun=="function"&&(ut.postRun=[ut.postRun]);ut.postRun.length;)rp(ut.postRun.shift());Qo(tu)}function Eu(ur){Oo.unshift(ur)}function fp(ur){$s.unshift(ur)}function rp(ur){tu.unshift(ur)}var Ll=0,Zl=null;function Uu(ur){Ll++,ut.monitorRunDependencies&&ut.monitorRunDependencies(Ll)}function Nu(ur){if(Ll--,ut.monitorRunDependencies&&ut.monitorRunDependencies(Ll),Ll==0&&Zl){var mr=Zl;Zl=null,mr()}}ut.preloadedImages={},ut.preloadedAudios={};function Ss(ur){ut.onAbort&&ut.onAbort(ur),ur="Aborted("+ur+")",Ir(ur),rs=!0,ur+=". Build with -s ASSERTIONS=1 for more info.";var mr=new WebAssembly.RuntimeError(ur);throw Gt(mr),mr}var Qs="data:application/octet-stream;base64,";function Gl(ur){return ur.startsWith(Qs)}var ss;ss="tflite-simd.wasm",Gl(ss)||(ss=Tr(ss));function Ds(ur){try{if(ur==ss&&Ar)return new Uint8Array(Ar);if(!ho)throw"both async and sync fetching of the wasm failed"}catch(mr){Ss(mr)}}function nu(){return!Ar&&rr&&typeof fetch=="function"?fetch(ss,{credentials:"same-origin"}).then(function(ur){if(!ur.ok)throw"failed to load wasm binary file at '"+ss+"'";return ur.arrayBuffer()}).catch(function(){return Ds(ss)}):o.resolve().then(function(){return Ds(ss)})}function Rl(){var ur={a:Es};function mr(fo,Cs){var xa=fo.exports;ut.asm=xa,Vo=ut.asm.q,Op(Vo.buffer),Hs=ut.asm.E,fp(ut.asm.r),Nu()}Uu();function xr(fo){mr(fo.instance)}function Jo(fo){return nu().then(function(Cs){return WebAssembly.instantiate(Cs,ur)}).then(function(Cs){return Cs}).then(fo,function(Cs){Ir("failed to asynchronously prepare wasm: "+Cs),Ss(Cs)})}function gs(){return!Ar&&typeof WebAssembly.instantiateStreaming=="function"&&!Gl(ss)&&typeof fetch=="function"?fetch(ss,{credentials:"same-origin"}).then(function(fo){var Cs=WebAssembly.instantiateStreaming(fo,ur);return Cs.then(xr,function(xa){return Ir("wasm streaming compile failed: "+xa),Ir("falling back to ArrayBuffer instantiation"),Jo(xr)})}):Jo(xr)}if(ut.instantiateWasm)try{var hs=ut.instantiateWasm(ur,mr);return hs}catch(fo){return Ir("Module.instantiateWasm callback failed with error: "+fo),!1}return gs().catch(Gt),{}}function Qo(ur){for(;ur.length>0;){var mr=ur.shift();if(typeof mr=="function"){mr(ut);continue}var xr=mr.func;typeof xr=="number"?mr.arg===void 0?Hs.get(xr)():Hs.get(xr)(mr.arg):xr(mr.arg===void 0?null:mr.arg)}}function Ls(ur,mr,xr,Jo){Ss("Assertion failed: "+cu(ur)+", at: "+[mr?cu(mr):"unknown filename",xr,Jo?cu(Jo):"unknown function"])}function ba(ur,mr){Ss("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function Po(ur,mr){Ss("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function Ks(){Ss("")}var Bo;Bo=function(){return performance.now()};var Os=!0;function _s(ur){return Su[wo()>>2]=ur,ur}function Dl(ur,mr){var xr;if(ur===0)xr=Date.now();else if((ur===1||ur===4)&&Os)xr=Bo();else return _s(28),-1;return Su[mr>>2]=xr/1e3|0,Su[mr+4>>2]=xr%1e3*1e3*1e3|0,0}function Ws(){return 2147483648}function Ko(ur,mr,xr){Hr.copyWithin(ur,mr,mr+xr)}function Vl(ur){try{return Vo.grow(ur-wp.byteLength+65535>>>16),Op(Vo.buffer),1}catch{}}function Nl(ur){var mr=Hr.length;ur=ur>>>0;var xr=2147483648;if(ur>xr)return!1;for(var Jo=1;Jo<=4;Jo*=2){var gs=mr*(1+.2/Jo);gs=Math.min(gs,ur+100663296);var hs=Math.min(xr,qo(Math.max(ur,gs),65536)),fo=Vl(hs);if(fo)return!0}return!1}function zs(ur){for(var mr=Bo();Bo()-mr<ur;);}var Wu={};function ru(){return ln||"./this.program"}function Wl(){if(!Wl.strings){var ur=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",mr={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:ur,_:ru()};for(var xr in Wu)Wu[xr]===void 0?delete mr[xr]:mr[xr]=Wu[xr];var Jo=[];for(var xr in mr)Jo.push(xr+"="+mr[xr]);Wl.strings=Jo}return Wl.strings}var iu={mappings:{},buffers:[null,[],[]],printChar:function(ur,mr){var xr=iu.buffers[ur];mr===0||mr===10?((ur===1?Eo:Ir)(bu(xr,0)),xr.length=0):xr.push(mr)},varargs:void 0,get:function(){iu.varargs+=4;var ur=Su[iu.varargs-4>>2];return ur},getStr:function(ur){var mr=cu(ur);return mr},get64:function(ur,mr){return ur}};function Gs(ur,mr){var xr=0;return Wl().forEach(function(Jo,gs){var hs=mr+xr;Su[ur+gs*4>>2]=hs,Us(Jo,hs),xr+=Jo.length+1}),0}function qs(ur,mr){var xr=Wl();Su[ur>>2]=xr.length;var Jo=0;return xr.forEach(function(gs){Jo+=gs.length+1}),Su[mr>>2]=Jo,0}function ks(ur){ns(ur)}function as(ur){return 0}function Ml(ur,mr,xr,Jo,gs){}function ts(ur,mr,xr,Jo){for(var gs=0,hs=0;hs<xr;hs++){for(var fo=Su[mr+hs*8>>2],Cs=Su[mr+(hs*8+4)>>2],xa=0;xa<Cs;xa++)iu.printChar(ur,Hr[fo+xa]);gs+=Cs}return Su[Jo>>2]=gs,0}function zo(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var ur=new Uint8Array(1);return function(){return crypto.getRandomValues(ur),ur[0]}}else return function(){Ss("randomDevice")}}function uu(ur,mr){uu.randomDevice||(uu.randomDevice=zo());for(var xr=0;xr<mr;xr++)vs[ur+xr>>0]=uu.randomDevice();return 0}var Es={a:Ls,e:ba,d:Po,b:Ks,n:Dl,h:Ws,l:Ko,m:Nl,p:zs,f:Gs,g:qs,j:ks,i:as,k:Ml,c:ts,o:uu};Rl(),ut.___wasm_call_ctors=function(){return(ut.___wasm_call_ctors=ut.asm.r).apply(null,arguments)},ut._getModelBufferMemoryOffset=function(){return(ut._getModelBufferMemoryOffset=ut.asm.s).apply(null,arguments)},ut._getInputMemoryOffset=function(){return(ut._getInputMemoryOffset=ut.asm.t).apply(null,arguments)},ut._getInputHeight=function(){return(ut._getInputHeight=ut.asm.u).apply(null,arguments)},ut._getInputWidth=function(){return(ut._getInputWidth=ut.asm.v).apply(null,arguments)},ut._getInputChannelCount=function(){return(ut._getInputChannelCount=ut.asm.w).apply(null,arguments)},ut._getOutputMemoryOffset=function(){return(ut._getOutputMemoryOffset=ut.asm.x).apply(null,arguments)},ut._getOutputHeight=function(){return(ut._getOutputHeight=ut.asm.y).apply(null,arguments)},ut._getOutputWidth=function(){return(ut._getOutputWidth=ut.asm.z).apply(null,arguments)},ut._getOutputChannelCount=function(){return(ut._getOutputChannelCount=ut.asm.A).apply(null,arguments)},ut._loadModel=function(){return(ut._loadModel=ut.asm.B).apply(null,arguments)},ut._runInference=function(){return(ut._runInference=ut.asm.C).apply(null,arguments)},ut._isGPUEnabled=function(){return(ut._isGPUEnabled=ut.asm.D).apply(null,arguments)};var wo=ut.___errno_location=function(){return(wo=ut.___errno_location=ut.asm.F).apply(null,arguments)},ro;function cs(ur){this.name="ExitStatus",this.message="Program terminated with exit("+ur+")",this.status=ur}Zl=function ur(){ro||na(),ro||(Zl=ur)};function na(ur){if(Ll>0||(ju(),Ll>0))return;function mr(){ro||(ro=!0,ut.calledRun=!0,!rs&&(sp(),Ot(ut),ut.onRuntimeInitialized&&ut.onRuntimeInitialized(),lu()))}ut.setStatus?(ut.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ut.setStatus("")},1),mr()},1)):mr()}ut.run=na;function ns(ur,mr){ls(ur)}function ls(ur){np()||(ut.onExit&&ut.onExit(ur),rs=!0),En(ur,new cs(ur))}if(ut.preInit)for(typeof ut.preInit=="function"&&(ut.preInit=[ut.preInit]);ut.preInit.length>0;)ut.preInit.pop()();return na(),ot.ready}}();class $r{constructor(){h(this,"selectedTFLite"),h(this,"isSIMDSupported",!1),h(this,"isThreadsSupported",!1),h(this,"inputWidth",0),h(this,"inputHeight",0),h(this,"inputChannelCount",0),h(this,"inputMemoryOffset",0),h(this,"outputWidth",0),h(this,"outputHeight",0),h(this,"outputChannelCount",0),h(this,"outputMemoryOffset",0)}}const zr="https://d3opqjmqzxf057.cloudfront.net/vonage-tensorflow-wasm/tflite-simd-wasm/1.1.3/",_l="https://d3opqjmqzxf057.cloudfront.net/ml/selfie_segmentation/4.0.0/";async function So(at=zr,ot=_l){let ut=new $r;var Ot=new o(function(Gt,en){async function hn(){return jr({locateFile:function(En){return at+En}})}async function ln(En){return new o(async(rr,br)=>{const Tr=En;if(typeof Tr>"u")return br("TFLite backend unavailable: wasmSimd");const ho="selfie_segmentation_landscape";console.log("Loading tflite model:",ho);let Eo=ot+`${ho}.tflite`;console.log("TFLite modelUrl: "+Eo);try{const Ir=await(await fetch(Eo)).arrayBuffer();console.log("Model buffer size:",Ir.byteLength);const Ar=Tr._getModelBufferMemoryOffset();console.log("Model buffer memory offset:",Ar),console.log("Loading model buffer..."),Tr.HEAPU8.set(new Uint8Array(Ir),Ar);const ko=Tr._loadModel(Ir.byteLength);if(console.log("Load model result:",ko),ko!==0){br("Cannot load model");return}ut.inputWidth=Tr._getInputWidth(),ut.inputHeight=Tr._getInputHeight(),ut.inputChannelCount=Tr._getInputChannelCount(),ut.inputMemoryOffset=Tr._getInputMemoryOffset(),console.log("Input memory offset:",ut.inputMemoryOffset),console.log("Input height:",ut.inputHeight),console.log("Input width:",ut.inputWidth),console.log("Input channels:",ut.inputChannelCount),ut.outputMemoryOffset=Tr._getOutputMemoryOffset(),ut.outputWidth=Tr._getOutputWidth(),ut.outputHeight=Tr._getOutputHeight(),ut.outputChannelCount=Tr._getOutputChannelCount(),console.log("Output memory offset:",ut.outputMemoryOffset),console.log("Output height:",ut.outputHeight),console.log("Output width:",ut.outputWidth),console.log("Output channels:",ut.outputChannelCount),ut.selectedTFLite=Tr}catch(Ir){br(Ir);return}rr()})}hn().then(En=>{if(En===null)throw console.error("loadTFLite null"),"loadTFLite null";ln(En).then(rr=>{Gt(ut)}).catch(rr=>{console.error("loadTFLiteModel error"),en("loadTFLiteModel error")})}).catch(En=>{console.error("loadTFLite error:",En),en("loadTFLite error:"+En)})});return Ot}class _c{constructor(){h(this,"canvas",new OffscreenCanvas(0,0)),h(this,"context",this.canvas.getContext("2d",{willReadFrequently:!0})),h(this,"pixelCount",0),h(this,"inputOffset",0),h(this,"outputOffset",0),h(this,"infos"),h(this,"mask")}async init(ot,ut){await this.initWasm(ot,ut),this.infos&&(this.canvas.width=this.infos.inputWidth,this.canvas.height=this.infos.inputHeight,this.pixelCount=this.infos.inputWidth*this.infos.inputHeight,this.mask=new ImageData(this.infos.inputWidth,this.infos.inputHeight),this.inputOffset=this.infos.inputMemoryOffset/4,this.outputOffset=this.infos.outputMemoryOffset/4)}async initWasm(ot,ut){this.infos=await So(ot,ut)}getOutputDimensions(){var ot,ut,Ot,Gt;return{width:(ut=(ot=this.infos)==null?void 0:ot.outputWidth)!=null?ut:0,height:(Gt=(Ot=this.infos)==null?void 0:Ot.outputHeight)!=null?Gt:0}}async process(ot){if(!this.mask||!this.infos)return;const ut=this.infos.inputWidth,Ot=this.infos.inputHeight;this.context.drawImage(ot,0,0,ot.width,ot.height,0,0,ut,Ot);const Gt=this.context.getImageData(0,0,ut,Ot),en=this.infos.selectedTFLite.HEAPF32;for(let hn=0;hn<this.pixelCount;hn++){const ln=this.inputOffset+hn*3;en[ln]=Gt.data[hn*4]/255,en[ln+1]=Gt.data[hn*4+1]/255,en[ln+2]=Gt.data[hn*4+2]/255}this.infos.selectedTFLite._runInference();for(let hn=0;hn<this.pixelCount;hn++){const ln=this.infos.selectedTFLite.HEAPF32[this.outputOffset+hn];this.mask.data[hn*4]=this.mask.data[hn*4+3]=255*ln}return createImageBitmap(this.mask)}isGpuSupported(){var ot,ut,Ot;return(Ot=(ut=(ot=this.infos)==null?void 0:ot.selectedTFLite)==null?void 0:ut._isGPUEnabled())!=null?Ot:!1}}async function Rp(at,ot){const{wasm:ut,insertableStreams:Ot,simd:Gt,webgl:en}=await au(at,ot);if(!ut.supported)throw ut.message;if(!Ot.supported)throw Ot.message;if(!Gt.supported)throw Gt.message;if(!en.supported)throw en.message}async function au(at,ot){const ut=new _c;await ut.initWasm(at,ot);const Ot={wasm:{supported:typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function",message:"Your browser does not support WebAssembly features."},simd:{supported:await Xr(),message:"Your browser does not support simd features."},insertableStreams:{supported:!0},gpu:{supported:ut.isGpuSupported(),message:"Your browser does not support gpu features."},webgl:Ip()};try{await g()}catch(Gt){Ot.insertableStreams.supported=!1,Ot.insertableStreams.message=Gt}return Ot}function Ip(){return OffscreenCanvas?new OffscreenCanvas(0,0).getContext("webgl2")?{supported:!0}:{supported:!1,message:"Your browser does not support webgl 2"}:{supported:!1,message:"Your browser does not support offscreen canvas"}}const mu={};(function(){var at;function ot(At){var Dt=0;return function(){return Dt<At.length?{done:!1,value:At[Dt++]}:{done:!0}}}var ut=typeof Object.defineProperties=="function"?Object.defineProperty:function(At,Dt,jt){return At==Array.prototype||At==Object.prototype||(At[Dt]=jt.value),At};function Ot(At){At=[typeof globalThis=="object"&&globalThis,At,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Dt=0;Dt<At.length;++Dt){var jt=At[Dt];if(jt&&jt.Math==Math)return jt}throw Error("Cannot find global object")}var Gt=Ot(this);function en(At,Dt){if(Dt)e:{var jt=Gt;At=At.split(".");for(var Zn=0;Zn<At.length-1;Zn++){var _n=At[Zn];if(!(_n in jt))break e;jt=jt[_n]}At=At[At.length-1],Zn=jt[At],Dt=Dt(Zn),Dt!=Zn&&Dt!=null&&ut(jt,At,{configurable:!0,writable:!0,value:Dt})}}en("Symbol",function(At){function Dt(Sr){if(this instanceof Dt)throw new TypeError("Symbol is not a constructor");return new jt(Zn+(Sr||"")+"_"+_n++,Sr)}function jt(Sr,Qn){this.g=Sr,ut(this,"description",{configurable:!0,writable:!0,value:Qn})}if(At)return At;jt.prototype.toString=function(){return this.g};var Zn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",_n=0;return Dt}),en("Symbol.iterator",function(At){if(At)return At;At=Symbol("Symbol.iterator");for(var Dt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),jt=0;jt<Dt.length;jt++){var Zn=Gt[Dt[jt]];typeof Zn=="function"&&typeof Zn.prototype[At]!="function"&&ut(Zn.prototype,At,{configurable:!0,writable:!0,value:function(){return hn(ot(this))}})}return At});function hn(At){return At={next:At},At[Symbol.iterator]=function(){return this},At}function ln(At){var Dt=typeof Symbol<"u"&&Symbol.iterator&&At[Symbol.iterator];return Dt?Dt.call(At):{next:ot(At)}}function En(At){if(!(At instanceof Array)){At=ln(At);for(var Dt,jt=[];!(Dt=At.next()).done;)jt.push(Dt.value);At=jt}return At}var rr=typeof Object.create=="function"?Object.create:function(At){function Dt(){}return Dt.prototype=At,new Dt},br;if(typeof Object.setPrototypeOf=="function")br=Object.setPrototypeOf;else{var Tr;e:{var ho={a:!0},Eo={};try{Eo.__proto__=ho,Tr=Eo.a;break e}catch{}Tr=!1}br=Tr?function(At,Dt){if(At.__proto__=Dt,At.__proto__!==Dt)throw new TypeError(At+" is not extensible");return At}:null}var Ir=br;function Ar(At,Dt){if(At.prototype=rr(Dt.prototype),At.prototype.constructor=At,Ir)Ir(At,Dt);else for(var jt in Dt)if(jt!="prototype")if(Object.defineProperties){var Zn=Object.getOwnPropertyDescriptor(Dt,jt);Zn&&Object.defineProperty(At,jt,Zn)}else At[jt]=Dt[jt];At.ea=Dt.prototype}function ko(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Vo(At){if(At.l)throw new TypeError("Generator is already running");At.l=!0}ko.prototype.o=function(At){this.h=At};function rs(At,Dt){At.j={U:Dt,V:!0},At.g=At.m||At.s}ko.prototype.return=function(At){this.j={return:At},this.g=this.s};function qn(At,Dt,jt){return At.g=jt,{value:Dt}}function bu(At){this.g=new ko,this.h=At}function cu(At,Dt){Vo(At.g);var jt=At.g.i;return jt?Us(At,"return"in jt?jt.return:function(Zn){return{value:Zn,done:!0}},Dt,At.g.return):(At.g.return(Dt),qo(At))}function Us(At,Dt,jt,Zn){try{var _n=Dt.call(At.g.i,jt);if(!(_n instanceof Object))throw new TypeError("Iterator result "+_n+" is not an object");if(!_n.done)return At.g.l=!1,_n;var Sr=_n.value}catch(Qn){return At.g.i=null,rs(At.g,Qn),qo(At)}return At.g.i=null,Zn.call(At.g,Sr),qo(At)}function qo(At){for(;At.g.g;)try{var Dt=At.h(At.g);if(Dt)return At.g.l=!1,{value:Dt.value,done:!1}}catch(jt){At.g.h=void 0,rs(At.g,jt)}if(At.g.l=!1,At.g.j){if(Dt=At.g.j,At.g.j=null,Dt.V)throw Dt.U;return{value:Dt.return,done:!0}}return{value:void 0,done:!0}}function wp(At){this.next=function(Dt){return Vo(At.g),At.g.i?Dt=Us(At,At.g.i.next,Dt,At.g.o):(At.g.o(Dt),Dt=qo(At)),Dt},this.throw=function(Dt){return Vo(At.g),At.g.i?Dt=Us(At,At.g.i.throw,Dt,At.g.o):(rs(At.g,Dt),Dt=qo(At)),Dt},this.return=function(Dt){return cu(At,Dt)},this[Symbol.iterator]=function(){return this}}function vs(At,Dt){return Dt=new wp(new bu(Dt)),Ir&&At.prototype&&Ir(Dt,At.prototype),Dt}function Hr(At,Dt){At instanceof String&&(At+="");var jt=0,Zn=!1,_n={next:function(){if(!Zn&&jt<At.length){var Sr=jt++;return{value:Dt(Sr,At[Sr]),done:!1}}return Zn=!0,{done:!0,value:void 0}}};return _n[Symbol.iterator]=function(){return _n},_n}var Su=typeof Object.assign=="function"?Object.assign:function(At,Dt){for(var jt=1;jt<arguments.length;jt++){var Zn=arguments[jt];if(Zn)for(var _n in Zn)Object.prototype.hasOwnProperty.call(Zn,_n)&&(At[_n]=Zn[_n])}return At};en("Object.assign",function(At){return At||Su}),en("Promise",function(At){function Dt(Qn){this.h=0,this.i=void 0,this.g=[],this.o=!1;var hr=this.j();try{Qn(hr.resolve,hr.reject)}catch(Nr){hr.reject(Nr)}}function jt(){this.g=null}function Zn(Qn){return Qn instanceof Dt?Qn:new Dt(function(hr){hr(Qn)})}if(At)return At;jt.prototype.h=function(Qn){if(this.g==null){this.g=[];var hr=this;this.i(function(){hr.l()})}this.g.push(Qn)};var _n=Gt.setTimeout;jt.prototype.i=function(Qn){_n(Qn,0)},jt.prototype.l=function(){for(;this.g&&this.g.length;){var Qn=this.g;this.g=[];for(var hr=0;hr<Qn.length;++hr){var Nr=Qn[hr];Qn[hr]=null;try{Nr()}catch(ao){this.j(ao)}}}this.g=null},jt.prototype.j=function(Qn){this.i(function(){throw Qn})},Dt.prototype.j=function(){function Qn(ao){return function(Wo){Nr||(Nr=!0,ao.call(hr,Wo))}}var hr=this,Nr=!1;return{resolve:Qn(this.C),reject:Qn(this.l)}},Dt.prototype.C=function(Qn){if(Qn===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Qn instanceof Dt)this.F(Qn);else{e:switch(typeof Qn){case"object":var hr=Qn!=null;break e;case"function":hr=!0;break e;default:hr=!1}hr?this.u(Qn):this.m(Qn)}},Dt.prototype.u=function(Qn){var hr=void 0;try{hr=Qn.then}catch(Nr){this.l(Nr);return}typeof hr=="function"?this.G(hr,Qn):this.m(Qn)},Dt.prototype.l=function(Qn){this.s(2,Qn)},Dt.prototype.m=function(Qn){this.s(1,Qn)},Dt.prototype.s=function(Qn,hr){if(this.h!=0)throw Error("Cannot settle("+Qn+", "+hr+"): Promise already settled in state"+this.h);this.h=Qn,this.i=hr,this.h===2&&this.D(),this.A()},Dt.prototype.D=function(){var Qn=this;_n(function(){if(Qn.B()){var hr=Gt.console;typeof hr<"u"&&hr.error(Qn.i)}},1)},Dt.prototype.B=function(){if(this.o)return!1;var Qn=Gt.CustomEvent,hr=Gt.Event,Nr=Gt.dispatchEvent;return typeof Nr>"u"?!0:(typeof Qn=="function"?Qn=new Qn("unhandledrejection",{cancelable:!0}):typeof hr=="function"?Qn=new hr("unhandledrejection",{cancelable:!0}):(Qn=Gt.document.createEvent("CustomEvent"),Qn.initCustomEvent("unhandledrejection",!1,!0,Qn)),Qn.promise=this,Qn.reason=this.i,Nr(Qn))},Dt.prototype.A=function(){if(this.g!=null){for(var Qn=0;Qn<this.g.length;++Qn)Sr.h(this.g[Qn]);this.g=null}};var Sr=new jt;return Dt.prototype.F=function(Qn){var hr=this.j();Qn.J(hr.resolve,hr.reject)},Dt.prototype.G=function(Qn,hr){var Nr=this.j();try{Qn.call(hr,Nr.resolve,Nr.reject)}catch(ao){Nr.reject(ao)}},Dt.prototype.then=function(Qn,hr){function Nr(es,Lo){return typeof es=="function"?function(go){try{ao(es(go))}catch(No){Wo(No)}}:Lo}var ao,Wo,Ao=new Dt(function(es,Lo){ao=es,Wo=Lo});return this.J(Nr(Qn,ao),Nr(hr,Wo)),Ao},Dt.prototype.catch=function(Qn){return this.then(void 0,Qn)},Dt.prototype.J=function(Qn,hr){function Nr(){switch(ao.h){case 1:Qn(ao.i);break;case 2:hr(ao.i);break;default:throw Error("Unexpected state: "+ao.h)}}var ao=this;this.g==null?Sr.h(Nr):this.g.push(Nr),this.o=!0},Dt.resolve=Zn,Dt.reject=function(Qn){return new Dt(function(hr,Nr){Nr(Qn)})},Dt.race=function(Qn){return new Dt(function(hr,Nr){for(var ao=ln(Qn),Wo=ao.next();!Wo.done;Wo=ao.next())Zn(Wo.value).J(hr,Nr)})},Dt.all=function(Qn){var hr=ln(Qn),Nr=hr.next();return Nr.done?Zn([]):new Dt(function(ao,Wo){function Ao(go){return function(No){es[go]=No,Lo--,Lo==0&&ao(es)}}var es=[],Lo=0;do es.push(void 0),Lo++,Zn(Nr.value).J(Ao(es.length-1),Wo),Nr=hr.next();while(!Nr.done)})},Dt}),en("Object.is",function(At){return At||function(Dt,jt){return Dt===jt?Dt!==0||1/Dt===1/jt:Dt!==Dt&&jt!==jt}}),en("Array.prototype.includes",function(At){return At||function(Dt,jt){var Zn=this;Zn instanceof String&&(Zn=String(Zn));var _n=Zn.length;for(jt=jt||0,0>jt&&(jt=Math.max(jt+_n,0));jt<_n;jt++){var Sr=Zn[jt];if(Sr===Dt||Object.is(Sr,Dt))return!0}return!1}}),en("String.prototype.includes",function(At){return At||function(Dt,jt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Dt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Dt,jt||0)!==-1}}),en("Array.prototype.keys",function(At){return At||function(){return Hr(this,function(Dt){return Dt})}});var Op=this||self;function Hs(At,Dt){At=At.split(".");var jt=Op;At[0]in jt||typeof jt.execScript>"u"||jt.execScript("var "+At[0]);for(var Zn;At.length&&(Zn=At.shift());)At.length||Dt===void 0?jt[Zn]&&jt[Zn]!==Object.prototype[Zn]?jt=jt[Zn]:jt=jt[Zn]={}:jt[Zn]=Dt}function Oo(At,Dt){return Dt=String.fromCharCode.apply(null,Dt),At==null?Dt:At+Dt}var $s,tu=typeof TextDecoder<"u",ku,np=typeof TextEncoder<"u";function ju(At){if(np)At=(ku||(ku=new TextEncoder)).encode(At);else{var Dt=void 0;Dt=Dt===void 0?!1:Dt;for(var jt=0,Zn=new Uint8Array(3*At.length),_n=0;_n<At.length;_n++){var Sr=At.charCodeAt(_n);if(128>Sr)Zn[jt++]=Sr;else{if(2048>Sr)Zn[jt++]=Sr>>6|192;else{if(55296<=Sr&&57343>=Sr){if(56319>=Sr&&_n<At.length){var Qn=At.charCodeAt(++_n);if(56320<=Qn&&57343>=Qn){Sr=1024*(Sr-55296)+Qn-56320+65536,Zn[jt++]=Sr>>18|240,Zn[jt++]=Sr>>12&63|128,Zn[jt++]=Sr>>6&63|128,Zn[jt++]=Sr&63|128;continue}else _n--}if(Dt)throw Error("Found an unpaired surrogate");Sr=65533}Zn[jt++]=Sr>>12|224,Zn[jt++]=Sr>>6&63|128}Zn[jt++]=Sr&63|128}}At=Zn.subarray(0,jt)}return At}var sp={},lu=null;function Eu(At,Dt){Dt===void 0&&(Dt=0),Ll(),Dt=sp[Dt];for(var jt=Array(Math.floor(At.length/3)),Zn=Dt[64]||"",_n=0,Sr=0;_n<At.length-2;_n+=3){var Qn=At[_n],hr=At[_n+1],Nr=At[_n+2],ao=Dt[Qn>>2];Qn=Dt[(Qn&3)<<4|hr>>4],hr=Dt[(hr&15)<<2|Nr>>6],Nr=Dt[Nr&63],jt[Sr++]=ao+Qn+hr+Nr}switch(ao=0,Nr=Zn,At.length-_n){case 2:ao=At[_n+1],Nr=Dt[(ao&15)<<2]||Zn;case 1:At=At[_n],jt[Sr]=Dt[At>>2]+Dt[(At&3)<<4|ao>>4]+Nr+Zn}return jt.join("")}function fp(At){var Dt=At.length,jt=3*Dt/4;jt%3?jt=Math.floor(jt):"=.".indexOf(At[Dt-1])!=-1&&(jt="=.".indexOf(At[Dt-2])!=-1?jt-2:jt-1);var Zn=new Uint8Array(jt),_n=0;return rp(At,function(Sr){Zn[_n++]=Sr}),Zn.subarray(0,_n)}function rp(At,Dt){function jt(Nr){for(;Zn<At.length;){var ao=At.charAt(Zn++),Wo=lu[ao];if(Wo!=null)return Wo;if(!/^[\s\xa0]*$/.test(ao))throw Error("Unknown base64 encoding at char: "+ao)}return Nr}Ll();for(var Zn=0;;){var _n=jt(-1),Sr=jt(0),Qn=jt(64),hr=jt(64);if(hr===64&&_n===-1)break;Dt(_n<<2|Sr>>4),Qn!=64&&(Dt(Sr<<4&240|Qn>>2),hr!=64&&Dt(Qn<<6&192|hr))}}function Ll(){if(!lu){lu={};for(var At="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Dt=["+/=","+/","-_=","-_.","-_"],jt=0;5>jt;jt++){var Zn=At.concat(Dt[jt].split(""));sp[jt]=Zn;for(var _n=0;_n<Zn.length;_n++){var Sr=Zn[_n];lu[Sr]===void 0&&(lu[Sr]=_n)}}}}var Zl=typeof Uint8Array.prototype.slice=="function",Uu;function Nu(At,Dt,jt){return Dt===jt?Uu||(Uu=new Uint8Array(0)):Zl?At.slice(Dt,jt):new Uint8Array(At.subarray(Dt,jt))}var Ss=0,Qs=0;function Gl(At,Dt){Dt=Dt===void 0?{}:Dt,Dt=Dt.v===void 0?!1:Dt.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=Dt,At&&ss(this,At)}function ss(At,Dt){Dt=Dt.constructor===Uint8Array?Dt:Dt.constructor===ArrayBuffer?new Uint8Array(Dt):Dt.constructor===Array?new Uint8Array(Dt):Dt.constructor===String?fp(Dt):Dt instanceof Uint8Array?new Uint8Array(Dt.buffer,Dt.byteOffset,Dt.byteLength):new Uint8Array(0),At.h=Dt,At.j=0,At.i=At.h.length,At.g=At.j}Gl.prototype.reset=function(){this.g=this.j};function Ds(At){var Dt=At.h,jt=Dt[At.g],Zn=jt&127;return 128>jt?(At.g+=1,Zn):(jt=Dt[At.g+1],Zn|=(jt&127)<<7,128>jt?(At.g+=2,Zn):(jt=Dt[At.g+2],Zn|=(jt&127)<<14,128>jt?(At.g+=3,Zn):(jt=Dt[At.g+3],Zn|=(jt&127)<<21,128>jt?(At.g+=4,Zn):(jt=Dt[At.g+4],Zn|=(jt&15)<<28,128>jt?(At.g+=5,Zn>>>0):(At.g+=5,128<=Dt[At.g++]&&128<=Dt[At.g++]&&128<=Dt[At.g++]&&128<=Dt[At.g++]&&At.g++,Zn)))))}function nu(At){var Dt=At.h[At.g],jt=At.h[At.g+1],Zn=At.h[At.g+2],_n=At.h[At.g+3];return At.g+=4,jt=(Dt<<0|jt<<8|Zn<<16|_n<<24)>>>0,At=2*(jt>>31)+1,Dt=jt>>>23&255,jt&=8388607,Dt==255?jt?NaN:1/0*At:Dt==0?At*Math.pow(2,-149)*jt:At*Math.pow(2,Dt-150)*(jt+Math.pow(2,23))}var Rl=[];function Qo(){this.g=new Uint8Array(64),this.h=0}Qo.prototype.push=function(At){if(!(this.h+1<this.g.length)){var Dt=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(Dt)}this.g[this.h++]=At},Qo.prototype.length=function(){return this.h},Qo.prototype.end=function(){var At=this.g,Dt=this.h;return this.h=0,Nu(At,0,Dt)};function Ls(At,Dt){for(;127<Dt;)At.push(Dt&127|128),Dt>>>=7;At.push(Dt)}function ba(At){var Dt={},jt=Dt.N===void 0?!1:Dt.N;this.o={v:Dt.v===void 0?!1:Dt.v},this.N=jt,Dt=this.o,Rl.length?(jt=Rl.pop(),Dt&&(jt.v=Dt.v),At&&ss(jt,At),At=jt):At=new Gl(At,Dt),this.g=At,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}ba.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function Po(At){var Dt=At.g;if((Dt=Dt.g==Dt.i)||(Dt=At.j)||(Dt=At.g,Dt=Dt.l||0>Dt.g||Dt.g>Dt.i),Dt)return!1;At.m=At.g.g,Dt=Ds(At.g);var jt=Dt&7;return jt!=0&&jt!=5&&jt!=1&&jt!=2&&jt!=3&&jt!=4?(At.j=!0,!1):(At.i=Dt,At.l=Dt>>>3,At.h=jt,!0)}function Ks(At){switch(At.h){case 0:if(At.h!=0)Ks(At);else{for(At=At.g;At.h[At.g]&128;)At.g++;At.g++}break;case 1:At.h!=1?Ks(At):(At=At.g,At.g+=8);break;case 2:if(At.h!=2)Ks(At);else{var Dt=Ds(At.g);At=At.g,At.g+=Dt}break;case 5:At.h!=5?Ks(At):(At=At.g,At.g+=4);break;case 3:Dt=At.l;do{if(!Po(At)){At.j=!0;break}if(At.h==4){At.l!=Dt&&(At.j=!0);break}Ks(At)}while(1);break;default:At.j=!0}}function Bo(At,Dt,jt){var Zn=At.g.i,_n=Ds(At.g);return _n=At.g.g+_n,At.g.i=_n,jt(Dt,At),At.g.g=_n,At.g.i=Zn,Dt}function Os(At){var Dt=Ds(At.g);At=At.g;var jt=At.g;At.g+=Dt,At=At.h;var Zn;if(tu)(Zn=$s)||(Zn=$s=new TextDecoder("utf-8",{fatal:!1})),Zn=Zn.decode(At.subarray(jt,jt+Dt));else{Dt=jt+Dt;for(var _n=[],Sr=null,Qn,hr,Nr;jt<Dt;)Qn=At[jt++],128>Qn?_n.push(Qn):224>Qn?jt>=Dt?_n.push(65533):(hr=At[jt++],194>Qn||(hr&192)!==128?(jt--,_n.push(65533)):_n.push((Qn&31)<<6|hr&63)):240>Qn?jt>=Dt-1?_n.push(65533):(hr=At[jt++],(hr&192)!==128||Qn===224&&160>hr||Qn===237&&160<=hr||((Zn=At[jt++])&192)!==128?(jt--,_n.push(65533)):_n.push((Qn&15)<<12|(hr&63)<<6|Zn&63)):244>=Qn?jt>=Dt-2?_n.push(65533):(hr=At[jt++],(hr&192)!==128||(Qn<<28)+(hr-144)>>30||((Zn=At[jt++])&192)!==128||((Nr=At[jt++])&192)!==128?(jt--,_n.push(65533)):(Qn=(Qn&7)<<18|(hr&63)<<12|(Zn&63)<<6|Nr&63,Qn-=65536,_n.push((Qn>>10&1023)+55296,(Qn&1023)+56320))):_n.push(65533),8192<=_n.length&&(Sr=Oo(Sr,_n),_n.length=0);Zn=Oo(Sr,_n)}return Zn}function _s(){this.h=[],this.i=0,this.g=new Qo}function Dl(At,Dt){Dt.length!==0&&(At.h.push(Dt),At.i+=Dt.length)}function Ws(At){var Dt=At.i+At.g.length();if(Dt===0)return new Uint8Array(0);Dt=new Uint8Array(Dt);for(var jt=At.h,Zn=jt.length,_n=0,Sr=0;Sr<Zn;Sr++){var Qn=jt[Sr];Qn.length!==0&&(Dt.set(Qn,_n),_n+=Qn.length)}return jt=At.g,Zn=jt.h,Zn!==0&&(Dt.set(jt.g.subarray(0,Zn),_n),jt.h=0),At.h=[Dt],Dt}function Ko(At,Dt,jt){if(jt!=null){Ls(At.g,8*Dt+5),At=At.g;var Zn=jt;Zn=(jt=0>Zn?1:0)?-Zn:Zn,Zn===0?0<1/Zn?Ss=Qs=0:(Qs=0,Ss=2147483648):isNaN(Zn)?(Qs=0,Ss=2147483647):34028234663852886e22<Zn?(Qs=0,Ss=(jt<<31|2139095040)>>>0):11754943508222875e-54>Zn?(Zn=Math.round(Zn/Math.pow(2,-149)),Qs=0,Ss=(jt<<31|Zn)>>>0):(Dt=Math.floor(Math.log(Zn)/Math.LN2),Zn*=Math.pow(2,-Dt),Zn=Math.round(8388608*Zn)&8388607,Qs=0,Ss=(jt<<31|Dt+127<<23|Zn)>>>0),jt=Ss,At.push(jt>>>0&255),At.push(jt>>>8&255),At.push(jt>>>16&255),At.push(jt>>>24&255)}}var Vl=typeof Uint8Array=="function";function Nl(At,Dt,jt){if(At!=null)return typeof At=="object"?Vl&&At instanceof Uint8Array?jt(At):zs(At,Dt,jt):Dt(At)}function zs(At,Dt,jt){if(Array.isArray(At)){for(var Zn=Array(At.length),_n=0;_n<At.length;_n++)Zn[_n]=Nl(At[_n],Dt,jt);return Array.isArray(At)&&At.W&&Wl(Zn),Zn}Zn={};for(_n in At)Zn[_n]=Nl(At[_n],Dt,jt);return Zn}function Wu(At){return typeof At=="number"?isFinite(At)?At:String(At):At}var ru={W:{value:!0,configurable:!0}};function Wl(At){return Array.isArray(At)&&!Object.isFrozen(At)&&Object.defineProperties(At,ru),At}var iu;function Gs(At,Dt,jt){var Zn=iu;iu=null,At||(At=Zn),Zn=this.constructor.ca,At||(At=Zn?[Zn]:[]),this.j=Zn?0:-1,this.i=null,this.g=At;e:{if(Zn=this.g.length,At=Zn-1,Zn&&(Zn=this.g[At],Zn!==null&&typeof Zn=="object"&&Zn.constructor===Object)){this.l=At-this.j,this.h=Zn;break e}Dt!==void 0&&-1<Dt?(this.l=Math.max(Dt,At+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(jt)for(Dt=0;Dt<jt.length;Dt++)At=jt[Dt],At<this.l?(At+=this.j,(Zn=this.g[At])?Wl(Zn):this.g[At]=qs):(ks(this),(Zn=this.h[At])?Wl(Zn):this.h[At]=qs)}var qs=Object.freeze(Wl([]));function ks(At){var Dt=At.l+At.j;At.g[Dt]||(At.h=At.g[Dt]={})}function as(At,Dt,jt){return Dt===-1?null:jt!==void 0&&jt||Dt>=At.l?At.h?At.h[Dt]:void 0:At.g[Dt+At.j]}function Ml(At){var Dt=Dt===void 0?!1:Dt,jt=as(At,1,Dt);return jt==null&&(jt=qs),jt===qs&&(jt=Wl([]),zo(At,1,jt,Dt)),jt}function ts(At,Dt,jt){return At=as(At,Dt),At=At==null?At:+At,At??(jt===void 0?0:jt)}function zo(At,Dt,jt,Zn){Zn!==void 0&&Zn||Dt>=At.l?(ks(At),At.h[Dt]=jt):At.g[Dt+At.j]=jt}function uu(At,Dt){At.i||(At.i={});var jt=At.i[1];if(!jt){var Zn=Ml(At);jt=[];for(var _n=0;_n<Zn.length;_n++)jt[_n]=new Dt(Zn[_n]);At.i[1]=jt}return jt}function Es(At,Dt,jt,Zn){var _n=uu(At,jt);Dt=Dt||new jt,At=Ml(At),Zn!=null?(_n.splice(Zn,0,Dt),At.splice(Zn,0,wo(Dt))):(_n.push(Dt),At.push(wo(Dt)))}Gs.prototype.toJSON=function(){var At=wo(this);return zs(At,Wu,Eu)};function wo(At,Dt){if(At.i)for(var jt in At.i){var Zn=At.i[jt];if(Array.isArray(Zn))for(var _n=0;_n<Zn.length;_n++)Zn[_n]&&wo(Zn[_n]);else Zn&&wo(Zn)}return At.g}Gs.prototype.toString=function(){return wo(this).toString()};function ro(At,Dt){return At=as(At,Dt),At??0}function cs(At,Dt){return At=as(At,Dt),At??""}function na(At,Dt){if(At=At.m){Dl(Dt,Dt.g.end());for(var jt=0;jt<At.length;jt++)Dl(Dt,At[jt])}}function ns(At,Dt){if(Dt.h==4)return!1;var jt=Dt.m;return Ks(Dt),Dt.N||(Dt=Nu(Dt.g.h,jt,Dt.g.g),(jt=At.m)?jt.push(Dt):At.m=[Dt]),!0}function ls(At,Dt){var jt=void 0;return new(jt||(jt=o))(function(Zn,_n){function Sr(Nr){try{hr(Dt.next(Nr))}catch(ao){_n(ao)}}function Qn(Nr){try{hr(Dt.throw(Nr))}catch(ao){_n(ao)}}function hr(Nr){Nr.done?Zn(Nr.value):new jt(function(ao){ao(Nr.value)}).then(Sr,Qn)}hr((Dt=Dt.apply(At,void 0)).next())})}function ur(At){Gs.call(this,At)}Ar(ur,Gs);function mr(At,Dt){for(;Po(Dt);)switch(Dt.i){case 8:var jt=Ds(Dt.g);zo(At,1,jt);break;case 21:jt=nu(Dt.g),zo(At,2,jt);break;case 26:jt=Os(Dt),zo(At,3,jt);break;case 34:jt=Os(Dt),zo(At,4,jt);break;default:if(!ns(At,Dt))return At}return At}function xr(At){Gs.call(this,At,-1,Jo)}Ar(xr,Gs),xr.prototype.addClassification=function(At,Dt){Es(this,At,ur,Dt)};var Jo=[1];function gs(At){Gs.call(this,At)}Ar(gs,Gs);function hs(At,Dt){for(;Po(Dt);)switch(Dt.i){case 13:var jt=nu(Dt.g);zo(At,1,jt);break;case 21:jt=nu(Dt.g),zo(At,2,jt);break;case 29:jt=nu(Dt.g),zo(At,3,jt);break;case 37:jt=nu(Dt.g),zo(At,4,jt);break;case 45:jt=nu(Dt.g),zo(At,5,jt);break;default:if(!ns(At,Dt))return At}return At}function fo(At){Gs.call(this,At,-1,Cs)}Ar(fo,Gs);var Cs=[1];function xa(At){Gs.call(this,At)}Ar(xa,Gs);function Ul(At,Dt,jt){if(jt=At.createShader(jt===0?At.VERTEX_SHADER:At.FRAGMENT_SHADER),At.shaderSource(jt,Dt),At.compileShader(jt),!At.getShaderParameter(jt,At.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+At.getShaderInfoLog(jt));return jt}function Hl(At){return uu(At,ur).map(function(Dt){return{index:ro(Dt,1),Y:ts(Dt,2),label:as(Dt,3)!=null?cs(Dt,3):void 0,displayName:as(Dt,4)!=null?cs(Dt,4):void 0}})}function du(At){return{x:ts(At,1),y:ts(At,2),z:ts(At,3),visibility:as(At,4)!=null?ts(At,4):void 0}}function Cu(At,Dt){this.h=At,this.g=Dt,this.l=0}function ga(At,Dt,jt){return Yl(At,Dt),typeof At.g.canvas.transferToImageBitmap=="function"?o.resolve(At.g.canvas.transferToImageBitmap()):jt?o.resolve(At.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(At.g.canvas):(At.i===void 0&&(At.i=document.createElement("canvas")),new o(function(Zn){At.i.height=At.g.canvas.height,At.i.width=At.g.canvas.width,At.i.getContext("2d",{}).drawImage(At.g.canvas,0,0,At.g.canvas.width,At.g.canvas.height),Zn(At.i)}))}function Yl(At,Dt){var jt=At.g;if(At.m===void 0){var Zn=Ul(jt,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),_n=Ul(jt,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Sr=jt.createProgram();if(jt.attachShader(Sr,Zn),jt.attachShader(Sr,_n),jt.linkProgram(Sr),!jt.getProgramParameter(Sr,jt.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+jt.getProgramInfoLog(Sr));Zn=At.m=Sr,jt.useProgram(Zn),_n=jt.getUniformLocation(Zn,"sampler0"),At.j={I:jt.getAttribLocation(Zn,"aVertex"),H:jt.getAttribLocation(Zn,"aTex"),da:_n},At.s=jt.createBuffer(),jt.bindBuffer(jt.ARRAY_BUFFER,At.s),jt.enableVertexAttribArray(At.j.I),jt.vertexAttribPointer(At.j.I,2,jt.FLOAT,!1,0,0),jt.bufferData(jt.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),jt.STATIC_DRAW),jt.bindBuffer(jt.ARRAY_BUFFER,null),At.o=jt.createBuffer(),jt.bindBuffer(jt.ARRAY_BUFFER,At.o),jt.enableVertexAttribArray(At.j.H),jt.vertexAttribPointer(At.j.H,2,jt.FLOAT,!1,0,0),jt.bufferData(jt.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),jt.STATIC_DRAW),jt.bindBuffer(jt.ARRAY_BUFFER,null),jt.uniform1i(_n,0)}Zn=At.j,jt.useProgram(At.m),jt.canvas.width=Dt.width,jt.canvas.height=Dt.height,jt.viewport(0,0,Dt.width,Dt.height),jt.activeTexture(jt.TEXTURE0),At.h.bindTexture2d(Dt.glName),jt.enableVertexAttribArray(Zn.I),jt.bindBuffer(jt.ARRAY_BUFFER,At.s),jt.vertexAttribPointer(Zn.I,2,jt.FLOAT,!1,0,0),jt.enableVertexAttribArray(Zn.H),jt.bindBuffer(jt.ARRAY_BUFFER,At.o),jt.vertexAttribPointer(Zn.H,2,jt.FLOAT,!1,0,0),jt.bindFramebuffer(jt.DRAW_FRAMEBUFFER?jt.DRAW_FRAMEBUFFER:jt.FRAMEBUFFER,null),jt.clearColor(0,0,0,0),jt.clear(jt.COLOR_BUFFER_BIT),jt.colorMask(!0,!0,!0,!0),jt.drawArrays(jt.TRIANGLE_FAN,0,4),jt.disableVertexAttribArray(Zn.I),jt.disableVertexAttribArray(Zn.H),jt.bindBuffer(jt.ARRAY_BUFFER,null),At.h.bindTexture2d(0)}function Ap(At){this.g=At}var Bl=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function $a(At,Dt){return Dt+At}function Ou(At,Dt){window[At]=Dt}function Hu(At){var Dt=document.createElement("script");return Dt.setAttribute("src",At),Dt.setAttribute("crossorigin","anonymous"),new o(function(jt){Dt.addEventListener("load",function(){jt()},!1),Dt.addEventListener("error",function(){jt()},!1),document.body.appendChild(Dt)})}function Il(){return ls(this,function At(){return vs(At,function(Dt){switch(Dt.g){case 1:return Dt.m=2,qn(Dt,WebAssembly.instantiate(Bl),4);case 4:Dt.g=3,Dt.m=0;break;case 2:return Dt.m=0,Dt.j=null,Dt.return(!1);case 3:return Dt.return(!0)}})})}function hp(At){if(this.g=At,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=o.resolve(),this.P="",this.B={},this.locateFile=At&&At.locateFile||$a,typeof window=="object")var Dt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Dt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=Dt,At.options){Dt=ln(Object.keys(At.options));for(var jt=Dt.next();!jt.done;jt=Dt.next()){jt=jt.value;var Zn=At.options[jt].default;Zn!==void 0&&(this.j[jt]=typeof Zn=="function"?Zn():Zn)}}}at=hp.prototype,at.close=function(){return this.i&&this.i.delete(),o.resolve()};function Kl(At,Dt){return At.g.files===void 0?[]:typeof At.g.files=="function"?At.g.files(Dt):At.g.files}function Au(At){return ls(At,function Dt(){var jt=this,Zn,_n,Sr,Qn,hr,Nr,ao,Wo,Ao,es,Lo;return vs(Dt,function(go){switch(go.g){case 1:return Zn=jt,jt.R?(_n=Kl(jt,jt.j),qn(go,Il(),2)):go.return();case 2:if(Sr=go.h,typeof window=="object")return Ou("createMediapipeSolutionsWasm",{locateFile:jt.locateFile}),Ou("createMediapipeSolutionsPackedAssets",{locateFile:jt.locateFile}),Nr=_n.filter(function(No){return No.data!==void 0}),ao=_n.filter(function(No){return No.data===void 0}),Wo=o.all(Nr.map(function(No){var $o=ou(Zn,No.url);if(No.path!==void 0){var ps=No.path;$o=$o.then(function(Ts){return Zn.overrideFile(ps,Ts),o.resolve(Ts)})}return $o})),Ao=o.all(ao.map(function(No){return No.simd===void 0||No.simd&&Sr||!No.simd&&!Sr?Hu(Zn.locateFile(No.url,Zn.S)):o.resolve()})).then(function(){return ls(Zn,function No(){var $o,ps,Ts=this;return vs(No,function(As){if(As.g==1)return $o=window.createMediapipeSolutionsWasm,ps=window.createMediapipeSolutionsPackedAssets,qn(As,$o(ps),2);Ts.h=As.h,As.g=0})})}),es=function(){return ls(Zn,function No(){var $o=this;return vs(No,function(ps){return $o.g.graph&&$o.g.graph.url?ps=qn(ps,ou($o,$o.g.graph.url),0):(ps.g=0,ps=void 0),ps})})}(),qn(go,o.all([Ao,Wo,es]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Qn=_n.filter(function(No){return No.simd===void 0||No.simd&&Sr||!No.simd&&!Sr}).map(function(No){return Zn.locateFile(No.url,Zn.S)}),importScripts.apply(null,En(Qn)),qn(go,createMediapipeSolutionsWasm(Module),6);case 6:jt.h=go.h,jt.l=new OffscreenCanvas(1,1),jt.h.canvas=jt.l,hr=jt.h.GL.createContext(jt.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),jt.h.GL.makeContextCurrent(hr),go.g=4;break;case 7:if(jt.l=document.createElement("canvas"),Lo=jt.l.getContext("webgl2",{}),!Lo&&(Lo=jt.l.getContext("webgl",{}),!Lo))return alert("Failed to create WebGL canvas context when passing video frame."),go.return();jt.D=Lo,jt.h.canvas=jt.l,jt.h.createContext(jt.l,!0,!0,{});case 4:jt.i=new jt.h.SolutionWasm,jt.R=!1,go.g=0}})})}function $u(At){return ls(At,function Dt(){var jt=this,Zn,_n,Sr,Qn,hr,Nr,ao,Wo;return vs(Dt,function(Ao){if(Ao.g==1){if(jt.g.graph&&jt.g.graph.url&&jt.P===jt.g.graph.url)return Ao.return();if(jt.o=!0,!jt.g.graph||!jt.g.graph.url){Ao.g=2;return}return jt.P=jt.g.graph.url,qn(Ao,ou(jt,jt.g.graph.url),3)}for(Ao.g!=2&&(Zn=Ao.h,jt.i.loadGraph(Zn)),_n=ln(Object.keys(jt.B)),Sr=_n.next();!Sr.done;Sr=_n.next())Qn=Sr.value,jt.i.overrideFile(Qn,jt.B[Qn]);if(jt.B={},jt.g.listeners)for(hr=ln(jt.g.listeners),Nr=hr.next();!Nr.done;Nr=hr.next())ao=Nr.value,Xp(jt,ao);Wo=jt.j,jt.j={},jt.setOptions(Wo),Ao.g=0})})}at.reset=function(){return ls(this,function At(){var Dt=this;return vs(At,function(jt){Dt.i&&(Dt.i.reset(),Dt.m={},Dt.s={}),jt.g=0})})},at.setOptions=function(At,Dt){var jt=this;if(Dt=Dt||this.g.options){for(var Zn=[],_n=[],Sr={},Qn=ln(Object.keys(At)),hr=Qn.next();!hr.done;Sr={K:Sr.K,L:Sr.L},hr=Qn.next()){var Nr=hr.value;Nr in this.j&&this.j[Nr]===At[Nr]||(this.j[Nr]=At[Nr],hr=Dt[Nr],hr!==void 0&&(hr.onChange&&(Sr.K=hr.onChange,Sr.L=At[Nr],Zn.push(function(ao){return function(){return ls(jt,function Wo(){var Ao,es=this;return vs(Wo,function(Lo){if(Lo.g==1)return qn(Lo,ao.K(ao.L),2);Ao=Lo.h,Ao===!0&&(es.o=!0),Lo.g=0})})}}(Sr))),hr.graphOptionXref&&(Nr={valueNumber:hr.type===1?At[Nr]:0,valueBoolean:hr.type===0?At[Nr]:!1,valueString:hr.type===2?At[Nr]:""},hr=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),hr.graphOptionXref),Nr),_n.push(hr))))}(Zn.length!==0||_n.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(_n),this.u=(this.u===void 0?[]:this.u).concat(Zn))}};function Ep(At){return ls(At,function Dt(){var jt=this,Zn,_n,Sr,Qn,hr,Nr,ao;return vs(Dt,function(Wo){switch(Wo.g){case 1:if(!jt.o)return Wo.return();if(!jt.u){Wo.g=2;break}Zn=ln(jt.u),_n=Zn.next();case 3:if(_n.done){Wo.g=5;break}return Sr=_n.value,qn(Wo,Sr(),4);case 4:_n=Zn.next(),Wo.g=3;break;case 5:jt.u=void 0;case 2:if(jt.A){for(Qn=new jt.h.GraphOptionChangeRequestList,hr=ln(jt.A),Nr=hr.next();!Nr.done;Nr=hr.next())ao=Nr.value,Qn.push_back(ao);jt.i.changeOptions(Qn),Qn.delete(),jt.A=void 0}jt.o=!1,Wo.g=0}})})}at.initialize=function(){return ls(this,function At(){var Dt=this;return vs(At,function(jt){return jt.g==1?qn(jt,Au(Dt),2):jt.g!=3?qn(jt,$u(Dt),3):qn(jt,Ep(Dt),0)})})};function ou(At,Dt){return ls(At,function jt(){var Zn=this,_n,Sr;return vs(jt,function(Qn){return Dt in Zn.F?Qn.return(Zn.F[Dt]):(_n=Zn.locateFile(Dt,""),Sr=fetch(_n).then(function(hr){return hr.arrayBuffer()}),Zn.F[Dt]=Sr,Qn.return(Sr))})})}at.overrideFile=function(At,Dt){this.i?this.i.overrideFile(At,Dt):this.B[At]=Dt},at.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},at.send=function(At,Dt){return ls(this,function jt(){var Zn=this,_n,Sr,Qn,hr,Nr,ao,Wo,Ao,es;return vs(jt,function(Lo){switch(Lo.g){case 1:return Zn.g.inputs?(_n=1e3*(Dt??performance.now()),qn(Lo,Zn.C,2)):Lo.return();case 2:return qn(Lo,Zn.initialize(),3);case 3:for(Sr=new Zn.h.PacketDataList,Qn=ln(Object.keys(At)),hr=Qn.next();!hr.done;hr=Qn.next())if(Nr=hr.value,ao=Zn.g.inputs[Nr]){e:{var go=Zn,No=At[Nr];switch(ao.type){case"video":var $o=go.m[ao.stream];if($o||($o=new Cu(go.h,go.D),go.m[ao.stream]=$o),go=$o,go.l===0&&(go.l=go.h.createTexture()),typeof HTMLVideoElement<"u"&&No instanceof HTMLVideoElement){var ps=No.videoWidth;$o=No.videoHeight}else typeof HTMLImageElement<"u"&&No instanceof HTMLImageElement?(ps=No.naturalWidth,$o=No.naturalHeight):(ps=No.width,$o=No.height);$o={glName:go.l,width:ps,height:$o},ps=go.g,ps.canvas.width=$o.width,ps.canvas.height=$o.height,ps.activeTexture(ps.TEXTURE0),go.h.bindTexture2d(go.l),ps.texImage2D(ps.TEXTURE_2D,0,ps.RGBA,ps.RGBA,ps.UNSIGNED_BYTE,No),go.h.bindTexture2d(0),go=$o;break e;case"detections":for($o=go.m[ao.stream],$o||($o=new Ap(go.h),go.m[ao.stream]=$o),go=$o,go.data||(go.data=new go.g.DetectionListData),go.data.reset(No.length),$o=0;$o<No.length;++$o){ps=No[$o];var Ts=go.data,As=Ts.setBoundingBox,_a=$o,xt=ps.T,Vt=new xa;zo(Vt,1,xt.Z),zo(Vt,2,xt.$),zo(Vt,3,xt.height),zo(Vt,4,xt.width),zo(Vt,5,xt.rotation),zo(Vt,6,xt.X);var Wt=xt=new _s;Ko(Wt,1,as(Vt,1)),Ko(Wt,2,as(Vt,2)),Ko(Wt,3,as(Vt,3)),Ko(Wt,4,as(Vt,4)),Ko(Wt,5,as(Vt,5));var gn=as(Vt,6);if(gn!=null&&gn!=null){Ls(Wt.g,48);var Nn=Wt.g,er=gn;gn=0>er,er=Math.abs(er);var Pn=er>>>0;for(er=Math.floor((er-Pn)/4294967296),er>>>=0,gn&&(er=~er>>>0,Pn=(~Pn>>>0)+1,4294967295<Pn&&(Pn=0,er++,4294967295<er&&(er=0))),Ss=Pn,Qs=er,gn=Ss,Pn=Qs;0<Pn||127<gn;)Nn.push(gn&127|128),gn=(gn>>>7|Pn<<25)>>>0,Pn>>>=7;Nn.push(gn)}if(na(Vt,Wt),xt=Ws(xt),As.call(Ts,_a,xt),ps.O)for(Ts=0;Ts<ps.O.length;++Ts)Vt=ps.O[Ts],Wt=!!Vt.visibility,As=go.data,_a=As.addNormalizedLandmark,xt=$o,Vt=Object.assign(Object.assign({},Vt),{visibility:Wt?Vt.visibility:0}),Wt=new gs,zo(Wt,1,Vt.x),zo(Wt,2,Vt.y),zo(Wt,3,Vt.z),Vt.visibility&&zo(Wt,4,Vt.visibility),Nn=Vt=new _s,Ko(Nn,1,as(Wt,1)),Ko(Nn,2,as(Wt,2)),Ko(Nn,3,as(Wt,3)),Ko(Nn,4,as(Wt,4)),Ko(Nn,5,as(Wt,5)),na(Wt,Nn),Vt=Ws(Vt),_a.call(As,xt,Vt);if(ps.M)for(Ts=0;Ts<ps.M.length;++Ts){if(As=go.data,_a=As.addClassification,xt=$o,Vt=ps.M[Ts],Wt=new ur,zo(Wt,2,Vt.Y),Vt.index&&zo(Wt,1,Vt.index),Vt.label&&zo(Wt,3,Vt.label),Vt.displayName&&zo(Wt,4,Vt.displayName),Nn=Vt=new _s,Pn=as(Wt,1),Pn!=null&&Pn!=null)if(Ls(Nn.g,8),gn=Nn.g,0<=Pn)Ls(gn,Pn);else{for(er=0;9>er;er++)gn.push(Pn&127|128),Pn>>=7;gn.push(1)}Ko(Nn,2,as(Wt,2)),gn=as(Wt,3),gn!=null&&(gn=ju(gn),Ls(Nn.g,26),Ls(Nn.g,gn.length),Dl(Nn,Nn.g.end()),Dl(Nn,gn)),gn=as(Wt,4),gn!=null&&(gn=ju(gn),Ls(Nn.g,34),Ls(Nn.g,gn.length),Dl(Nn,Nn.g.end()),Dl(Nn,gn)),na(Wt,Nn),Vt=Ws(Vt),_a.call(As,xt,Vt)}}go=go.data;break e;default:go={}}}switch(Wo=go,Ao=ao.stream,ao.type){case"video":Sr.pushTexture2d(Object.assign(Object.assign({},Wo),{stream:Ao,timestamp:_n}));break;case"detections":es=Wo,es.stream=Ao,es.timestamp=_n,Sr.pushDetectionList(es);break;default:throw Error("Unknown input config type: '"+ao.type+"'")}}return Zn.i.send(Sr),qn(Lo,Zn.C,4);case 4:Sr.delete(),Lo.g=0}})})};function _u(At,Dt,jt){return ls(At,function Zn(){var _n,Sr,Qn,hr,Nr,ao,Wo=this,Ao,es,Lo,go,No,$o,ps,Ts;return vs(Zn,function(As){switch(As.g){case 1:if(!jt)return As.return(Dt);for(_n={},Sr=0,Qn=ln(Object.keys(jt)),hr=Qn.next();!hr.done;hr=Qn.next())Nr=hr.value,ao=jt[Nr],typeof ao!="string"&&ao.type==="texture"&&Dt[ao.stream]!==void 0&&++Sr;1<Sr&&(Wo.G=!1),Ao=ln(Object.keys(jt)),hr=Ao.next();case 2:if(hr.done){As.g=4;break}if(es=hr.value,Lo=jt[es],typeof Lo=="string")return ps=_n,Ts=es,qn(As,Fp(Wo,es,Dt[Lo]),14);if(go=Dt[Lo.stream],Lo.type==="detection_list"){if(go){for(var _a=go.getRectList(),xt=go.getLandmarksList(),Vt=go.getClassificationsList(),Wt=[],gn=0;gn<_a.size();++gn){var Nn=_a.get(gn);e:{var er=new xa;for(Nn=new ba(Nn);Po(Nn);)switch(Nn.i){case 13:var Pn=nu(Nn.g);zo(er,1,Pn);break;case 21:Pn=nu(Nn.g),zo(er,2,Pn);break;case 29:Pn=nu(Nn.g),zo(er,3,Pn);break;case 37:Pn=nu(Nn.g),zo(er,4,Pn);break;case 45:Pn=nu(Nn.g),zo(er,5,Pn);break;case 48:for(var ar=Nn.g,Rr=128,pt=0,Mt=Pn=0;4>Mt&&128<=Rr;Mt++)Rr=ar.h[ar.g++],pt|=(Rr&127)<<7*Mt;if(128<=Rr&&(Rr=ar.h[ar.g++],pt|=(Rr&127)<<28,Pn|=(Rr&127)>>4),128<=Rr)for(Mt=0;5>Mt&&128<=Rr;Mt++)Rr=ar.h[ar.g++],Pn|=(Rr&127)<<7*Mt+3;128>Rr?(ar=pt>>>0,Rr=Pn>>>0,(Pn=Rr&2147483648)&&(ar=~ar+1>>>0,Rr=~Rr>>>0,ar==0&&(Rr=Rr+1>>>0)),ar=4294967296*Rr+(ar>>>0),Pn=Pn?-ar:ar):(ar.l=!0,Pn=void 0),zo(er,6,Pn);break;default:if(!ns(er,Nn))break e}}er={Z:ts(er,1),$:ts(er,2),height:ts(er,3),width:ts(er,4),rotation:ts(er,5,0),X:ro(er,6)},Pn=xt.get(gn);e:for(Nn=new fo,Pn=new ba(Pn);Po(Pn);)switch(Pn.i){case 10:ar=Bo(Pn,new gs,hs),Es(Nn,ar,gs,void 0);break;default:if(!ns(Nn,Pn))break e}Nn=uu(Nn,gs).map(du),ar=Vt.get(gn);e:for(Pn=new xr,ar=new ba(ar);Po(ar);)switch(ar.i){case 10:Pn.addClassification(Bo(ar,new ur,mr));break;default:if(!ns(Pn,ar))break e}er={T:er,O:Nn,M:Hl(Pn)},Wt.push(er)}_a=Wt}else _a=[];_n[es]=_a,As.g=7;break}if(Lo.type==="proto_list"){if(go){for(_a=Array(go.size()),xt=0;xt<go.size();xt++)_a[xt]=go.get(xt);go.delete()}else _a=[];_n[es]=_a,As.g=7;break}if(go===void 0){As.g=3;break}if(Lo.type==="float_list"){_n[es]=go,As.g=7;break}if(Lo.type==="proto"){_n[es]=go,As.g=7;break}if(Lo.type!=="texture")throw Error("Unknown output config type: '"+Lo.type+"'");return No=Wo.s[es],No||(No=new Cu(Wo.h,Wo.D),Wo.s[es]=No),qn(As,ga(No,go,Wo.G),13);case 13:$o=As.h,_n[es]=$o;case 7:Lo.transform&&_n[es]&&(_n[es]=Lo.transform(_n[es])),As.g=3;break;case 14:ps[Ts]=As.h;case 3:hr=Ao.next(),As.g=2;break;case 4:return As.return(_n)}})})}function Fp(At,Dt,jt){return ls(At,function Zn(){var _n=this,Sr;return vs(Zn,function(Qn){return typeof jt=="number"||jt instanceof Uint8Array||jt instanceof _n.h.Uint8BlobList?Qn.return(jt):jt instanceof _n.h.Texture2dDataOut?(Sr=_n.s[Dt],Sr||(Sr=new Cu(_n.h,_n.D),_n.s[Dt]=Sr),Qn.return(ga(Sr,jt,_n.G))):Qn.return(void 0)})})}function Xp(At,Dt){for(var jt=Dt.name||"$",Zn=[].concat(En(Dt.wants)),_n=new At.h.StringList,Sr=ln(Dt.wants),Qn=Sr.next();!Qn.done;Qn=Sr.next())_n.push_back(Qn.value);Sr=At.h.PacketListener.implement({onResults:function(hr){for(var Nr={},ao=0;ao<Dt.wants.length;++ao)Nr[Zn[ao]]=hr.get(ao);var Wo=At.listeners[jt];Wo&&(At.C=_u(At,Nr,Dt.outs).then(function(Ao){Ao=Wo(Ao);for(var es=0;es<Dt.wants.length;++es){var Lo=Nr[Zn[es]];typeof Lo=="object"&&Lo.hasOwnProperty&&Lo.hasOwnProperty("delete")&&Lo.delete()}Ao&&(At.C=Ao)}))}}),At.i.attachMultiListener(_n,Sr),_n.delete()}at.onResults=function(At,Dt){this.listeners[Dt||"$"]=At},Hs("Solution",hp),Hs("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function qu(At){switch(At===void 0&&(At=0),At){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function ip(At){var Dt=this;At=At||{},this.g=new hp({locateFile:At.locateFile,files:function(jt){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:qu(jt.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(jt){return ls(Dt,function Zn(){var _n,Sr,Qn=this,hr;return vs(Zn,function(Nr){return Nr.g==1?(_n=qu(jt),Sr="third_party/mediapipe/modules/selfie_segmentation/"+_n,qn(Nr,ou(Qn.g,_n),2)):(hr=Nr.h,Qn.g.overrideFile(Sr,hr),Nr.return(!0))})})}}}})}at=ip.prototype,at.close=function(){return this.g.close(),o.resolve()},at.onResults=function(At){this.g.onResults(At)},at.initialize=function(){return ls(this,function At(){var Dt=this;return vs(At,function(jt){return qn(jt,Dt.g.initialize(),0)})})},at.reset=function(){this.g.reset()},at.send=function(At){return ls(this,function Dt(){var jt=this;return vs(Dt,function(Zn){return qn(Zn,jt.g.send(At),0)})})},at.setOptions=function(At){this.g.setOptions(At)},Hs("SelfieSegmentation",ip),Hs("VERSION","0.1.1632777926")}).call(mu);const gu={};(function(){var at;function ot(gt){var kt=0;return function(){return kt<gt.length?{done:!1,value:gt[kt++]}:{done:!0}}}var ut=typeof Object.defineProperties=="function"?Object.defineProperty:function(gt,kt,Yt){return gt==Array.prototype||gt==Object.prototype||(gt[kt]=Yt.value),gt};function Ot(gt){gt=[typeof globalThis=="object"&&globalThis,gt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var kt=0;kt<gt.length;++kt){var Yt=gt[kt];if(Yt&&Yt.Math==Math)return Yt}throw Error("Cannot find global object")}var Gt=Ot(this);function en(gt,kt){if(kt)e:{var Yt=Gt;gt=gt.split(".");for(var rn=0;rn<gt.length-1;rn++){var wn=gt[rn];if(!(wn in Yt))break e;Yt=Yt[wn]}gt=gt[gt.length-1],rn=Yt[gt],kt=kt(rn),kt!=rn&&kt!=null&&ut(Yt,gt,{configurable:!0,writable:!0,value:kt})}}en("Symbol",function(gt){function kt(ft){if(this instanceof kt)throw new TypeError("Symbol is not a constructor");return new Yt(rn+(ft||"")+"_"+wn++,ft)}function Yt(ft,It){this.g=ft,ut(this,"description",{configurable:!0,writable:!0,value:It})}if(gt)return gt;Yt.prototype.toString=function(){return this.g};var rn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",wn=0;return kt}),en("Symbol.iterator",function(gt){if(gt)return gt;gt=Symbol("Symbol.iterator");for(var kt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Yt=0;Yt<kt.length;Yt++){var rn=Gt[kt[Yt]];typeof rn=="function"&&typeof rn.prototype[gt]!="function"&&ut(rn.prototype,gt,{configurable:!0,writable:!0,value:function(){return hn(ot(this))}})}return gt});function hn(gt){return gt={next:gt},gt[Symbol.iterator]=function(){return this},gt}function ln(gt){var kt=typeof Symbol<"u"&&Symbol.iterator&&gt[Symbol.iterator];return kt?kt.call(gt):{next:ot(gt)}}function En(gt){if(!(gt instanceof Array)){gt=ln(gt);for(var kt,Yt=[];!(kt=gt.next()).done;)Yt.push(kt.value);gt=Yt}return gt}var rr=typeof Object.create=="function"?Object.create:function(gt){function kt(){}return kt.prototype=gt,new kt},br;if(typeof Object.setPrototypeOf=="function")br=Object.setPrototypeOf;else{var Tr;e:{var ho={a:!0},Eo={};try{Eo.__proto__=ho,Tr=Eo.a;break e}catch{}Tr=!1}br=Tr?function(gt,kt){if(gt.__proto__=kt,gt.__proto__!==kt)throw new TypeError(gt+" is not extensible");return gt}:null}var Ir=br;function Ar(gt,kt){if(gt.prototype=rr(kt.prototype),gt.prototype.constructor=gt,Ir)Ir(gt,kt);else for(var Yt in kt)if(Yt!="prototype")if(Object.defineProperties){var rn=Object.getOwnPropertyDescriptor(kt,Yt);rn&&Object.defineProperty(gt,Yt,rn)}else gt[Yt]=kt[Yt];gt.ra=kt.prototype}function ko(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Vo(gt){if(gt.l)throw new TypeError("Generator is already running");gt.l=!0}ko.prototype.s=function(gt){this.h=gt};function rs(gt,kt){gt.j={fa:kt,ga:!0},gt.g=gt.o||gt.u}ko.prototype.return=function(gt){this.j={return:gt},this.g=this.u};function qn(gt,kt,Yt){return gt.g=Yt,{value:kt}}function bu(gt){this.g=new ko,this.h=gt}function cu(gt,kt){Vo(gt.g);var Yt=gt.g.i;return Yt?Us(gt,"return"in Yt?Yt.return:function(rn){return{value:rn,done:!0}},kt,gt.g.return):(gt.g.return(kt),qo(gt))}function Us(gt,kt,Yt,rn){try{var wn=kt.call(gt.g.i,Yt);if(!(wn instanceof Object))throw new TypeError("Iterator result "+wn+" is not an object");if(!wn.done)return gt.g.l=!1,wn;var ft=wn.value}catch(It){return gt.g.i=null,rs(gt.g,It),qo(gt)}return gt.g.i=null,rn.call(gt.g,ft),qo(gt)}function qo(gt){for(;gt.g.g;)try{var kt=gt.h(gt.g);if(kt)return gt.g.l=!1,{value:kt.value,done:!1}}catch(Yt){gt.g.h=void 0,rs(gt.g,Yt)}if(gt.g.l=!1,gt.g.j){if(kt=gt.g.j,gt.g.j=null,kt.ga)throw kt.fa;return{value:kt.return,done:!0}}return{value:void 0,done:!0}}function wp(gt){this.next=function(kt){return Vo(gt.g),gt.g.i?kt=Us(gt,gt.g.i.next,kt,gt.g.s):(gt.g.s(kt),kt=qo(gt)),kt},this.throw=function(kt){return Vo(gt.g),gt.g.i?kt=Us(gt,gt.g.i.throw,kt,gt.g.s):(rs(gt.g,kt),kt=qo(gt)),kt},this.return=function(kt){return cu(gt,kt)},this[Symbol.iterator]=function(){return this}}function vs(gt){function kt(rn){return gt.next(rn)}function Yt(rn){return gt.throw(rn)}return new o(function(rn,wn){function ft(It){It.done?rn(It.value):o.resolve(It.value).then(kt,Yt).then(ft,wn)}ft(gt.next())})}function Hr(gt){return vs(new wp(new bu(gt)))}en("Promise",function(gt){function kt(It){this.h=0,this.i=void 0,this.g=[],this.s=!1;var Lt=this.j();try{It(Lt.resolve,Lt.reject)}catch(rt){Lt.reject(rt)}}function Yt(){this.g=null}function rn(It){return It instanceof kt?It:new kt(function(Lt){Lt(It)})}if(gt)return gt;Yt.prototype.h=function(It){if(this.g==null){this.g=[];var Lt=this;this.i(function(){Lt.l()})}this.g.push(It)};var wn=Gt.setTimeout;Yt.prototype.i=function(It){wn(It,0)},Yt.prototype.l=function(){for(;this.g&&this.g.length;){var It=this.g;this.g=[];for(var Lt=0;Lt<It.length;++Lt){var rt=It[Lt];It[Lt]=null;try{rt()}catch(yt){this.j(yt)}}}this.g=null},Yt.prototype.j=function(It){this.i(function(){throw It})},kt.prototype.j=function(){function It(yt){return function(wt){rt||(rt=!0,yt.call(Lt,wt))}}var Lt=this,rt=!1;return{resolve:It(this.D),reject:It(this.l)}},kt.prototype.D=function(It){if(It===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(It instanceof kt)this.H(It);else{e:switch(typeof It){case"object":var Lt=It!=null;break e;case"function":Lt=!0;break e;default:Lt=!1}Lt?this.A(It):this.o(It)}},kt.prototype.A=function(It){var Lt=void 0;try{Lt=It.then}catch(rt){this.l(rt);return}typeof Lt=="function"?this.I(Lt,It):this.o(It)},kt.prototype.l=function(It){this.u(2,It)},kt.prototype.o=function(It){this.u(1,It)},kt.prototype.u=function(It,Lt){if(this.h!=0)throw Error("Cannot settle("+It+", "+Lt+"): Promise already settled in state"+this.h);this.h=It,this.i=Lt,this.h===2&&this.G(),this.B()},kt.prototype.G=function(){var It=this;wn(function(){if(It.C()){var Lt=Gt.console;typeof Lt<"u"&&Lt.error(It.i)}},1)},kt.prototype.C=function(){if(this.s)return!1;var It=Gt.CustomEvent,Lt=Gt.Event,rt=Gt.dispatchEvent;return typeof rt>"u"?!0:(typeof It=="function"?It=new It("unhandledrejection",{cancelable:!0}):typeof Lt=="function"?It=new Lt("unhandledrejection",{cancelable:!0}):(It=Gt.document.createEvent("CustomEvent"),It.initCustomEvent("unhandledrejection",!1,!0,It)),It.promise=this,It.reason=this.i,rt(It))},kt.prototype.B=function(){if(this.g!=null){for(var It=0;It<this.g.length;++It)ft.h(this.g[It]);this.g=null}};var ft=new Yt;return kt.prototype.H=function(It){var Lt=this.j();It.M(Lt.resolve,Lt.reject)},kt.prototype.I=function(It,Lt){var rt=this.j();try{It.call(Lt,rt.resolve,rt.reject)}catch(yt){rt.reject(yt)}},kt.prototype.then=function(It,Lt){function rt(mt,St){return typeof mt=="function"?function(Zt){try{yt(mt(Zt))}catch(Qt){wt(Qt)}}:St}var yt,wt,tt=new kt(function(mt,St){yt=mt,wt=St});return this.M(rt(It,yt),rt(Lt,wt)),tt},kt.prototype.catch=function(It){return this.then(void 0,It)},kt.prototype.M=function(It,Lt){function rt(){switch(yt.h){case 1:It(yt.i);break;case 2:Lt(yt.i);break;default:throw Error("Unexpected state: "+yt.h)}}var yt=this;this.g==null?ft.h(rt):this.g.push(rt),this.s=!0},kt.resolve=rn,kt.reject=function(It){return new kt(function(Lt,rt){rt(It)})},kt.race=function(It){return new kt(function(Lt,rt){for(var yt=ln(It),wt=yt.next();!wt.done;wt=yt.next())rn(wt.value).M(Lt,rt)})},kt.all=function(It){var Lt=ln(It),rt=Lt.next();return rt.done?rn([]):new kt(function(yt,wt){function tt(Zt){return function(Qt){mt[Zt]=Qt,St--,St==0&&yt(mt)}}var mt=[],St=0;do mt.push(void 0),St++,rn(rt.value).M(tt(mt.length-1),wt),rt=Lt.next();while(!rt.done)})},kt});function Su(gt,kt){gt instanceof String&&(gt+="");var Yt=0,rn=!1,wn={next:function(){if(!rn&&Yt<gt.length){var ft=Yt++;return{value:kt(ft,gt[ft]),done:!1}}return rn=!0,{done:!0,value:void 0}}};return wn[Symbol.iterator]=function(){return wn},wn}var Op=typeof Object.assign=="function"?Object.assign:function(gt,kt){for(var Yt=1;Yt<arguments.length;Yt++){var rn=arguments[Yt];if(rn)for(var wn in rn)Object.prototype.hasOwnProperty.call(rn,wn)&&(gt[wn]=rn[wn])}return gt};en("Object.assign",function(gt){return gt||Op}),en("Object.is",function(gt){return gt||function(kt,Yt){return kt===Yt?kt!==0||1/kt===1/Yt:kt!==kt&&Yt!==Yt}}),en("Array.prototype.includes",function(gt){return gt||function(kt,Yt){var rn=this;rn instanceof String&&(rn=String(rn));var wn=rn.length;for(Yt=Yt||0,0>Yt&&(Yt=Math.max(Yt+wn,0));Yt<wn;Yt++){var ft=rn[Yt];if(ft===kt||Object.is(ft,kt))return!0}return!1}}),en("String.prototype.includes",function(gt){return gt||function(kt,Yt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(kt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(kt,Yt||0)!==-1}}),en("Array.prototype.keys",function(gt){return gt||function(){return Su(this,function(kt){return kt})}});var Hs=this||self;function Oo(gt,kt){gt=gt.split(".");var Yt=Hs;gt[0]in Yt||typeof Yt.execScript>"u"||Yt.execScript("var "+gt[0]);for(var rn;gt.length&&(rn=gt.shift());)gt.length||kt===void 0?Yt[rn]&&Yt[rn]!==Object.prototype[rn]?Yt=Yt[rn]:Yt=Yt[rn]={}:Yt[rn]=kt}function $s(){throw Error("Invalid UTF8")}function tu(gt,kt){return kt=String.fromCharCode.apply(null,kt),gt==null?kt:gt+kt}var ku,np=typeof TextDecoder<"u",ju,sp=typeof TextEncoder<"u",lu={},Eu=null;function fp(gt){var kt;kt===void 0&&(kt=0),Zl(),kt=lu[kt];for(var Yt=Array(Math.floor(gt.length/3)),rn=kt[64]||"",wn=0,ft=0;wn<gt.length-2;wn+=3){var It=gt[wn],Lt=gt[wn+1],rt=gt[wn+2],yt=kt[It>>2];It=kt[(It&3)<<4|Lt>>4],Lt=kt[(Lt&15)<<2|rt>>6],rt=kt[rt&63],Yt[ft++]=yt+It+Lt+rt}switch(yt=0,rt=rn,gt.length-wn){case 2:yt=gt[wn+1],rt=kt[(yt&15)<<2]||rn;case 1:gt=gt[wn],Yt[ft]=kt[gt>>2]+kt[(gt&3)<<4|yt>>4]+rt+rn}return Yt.join("")}function rp(gt){var kt=gt.length,Yt=3*kt/4;Yt%3?Yt=Math.floor(Yt):"=.".indexOf(gt[kt-1])!=-1&&(Yt="=.".indexOf(gt[kt-2])!=-1?Yt-2:Yt-1);var rn=new Uint8Array(Yt),wn=0;return Ll(gt,function(ft){rn[wn++]=ft}),wn!==Yt?rn.subarray(0,wn):rn}function Ll(gt,kt){function Yt(rt){for(;rn<gt.length;){var yt=gt.charAt(rn++),wt=Eu[yt];if(wt!=null)return wt;if(!/^[\s\xa0]*$/.test(yt))throw Error("Unknown base64 encoding at char: "+yt)}return rt}Zl();for(var rn=0;;){var wn=Yt(-1),ft=Yt(0),It=Yt(64),Lt=Yt(64);if(Lt===64&&wn===-1)break;kt(wn<<2|ft>>4),It!=64&&(kt(ft<<4&240|It>>2),Lt!=64&&kt(It<<6&192|Lt))}}function Zl(){if(!Eu){Eu={};for(var gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),kt=["+/=","+/","-_=","-_.","-_"],Yt=0;5>Yt;Yt++){var rn=gt.concat(kt[Yt].split(""));lu[Yt]=rn;for(var wn=0;wn<rn.length;wn++){var ft=rn[wn];Eu[ft]===void 0&&(Eu[ft]=wn)}}}}var Uu=typeof Uint8Array=="function";function Nu(gt){return Uu&&gt!=null&&gt instanceof Uint8Array}var Ss;function Qs(gt){if(this.L=gt,gt!==null&&gt.length===0)throw Error("ByteString should be constructed with non-empty values")}var Gl=typeof Uint8Array.prototype.slice=="function",ss=0,Ds=0;function nu(gt,kt){if(gt.constructor===Uint8Array)return gt;if(gt.constructor===ArrayBuffer)return new Uint8Array(gt);if(gt.constructor===Array)return new Uint8Array(gt);if(gt.constructor===String)return rp(gt);if(gt.constructor===Qs)return!kt&&(kt=gt.L)&&kt.constructor===Uint8Array?kt:(kt=gt.L,kt=kt==null||Nu(kt)?kt:typeof kt=="string"?rp(kt):null,(gt=gt.L=kt)?new Uint8Array(gt):Ss||(Ss=new Uint8Array(0)));if(gt instanceof Uint8Array)return new Uint8Array(gt.buffer,gt.byteOffset,gt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Rl(gt,kt){return Error("Invalid wire type: "+gt+" (at position "+kt+")")}function Qo(){return Error("Failed to read varint, encoding is invalid.")}function Ls(gt,kt){kt=kt===void 0?{}:kt,kt=kt.v===void 0?!1:kt.v,this.h=null,this.g=this.i=this.j=0,this.v=kt,gt&&ba(this,gt)}function ba(gt,kt){gt.h=nu(kt,gt.v),gt.j=0,gt.i=gt.h.length,gt.g=gt.j}Ls.prototype.reset=function(){this.g=this.j};function Po(gt){if(gt.g>gt.i)throw Error("Tried to read past the end of the data "+gt.g+" > "+gt.i)}function Ks(gt){var kt=gt.h,Yt=kt[gt.g],rn=Yt&127;if(128>Yt)return gt.g+=1,Po(gt),rn;if(Yt=kt[gt.g+1],rn|=(Yt&127)<<7,128>Yt)return gt.g+=2,Po(gt),rn;if(Yt=kt[gt.g+2],rn|=(Yt&127)<<14,128>Yt)return gt.g+=3,Po(gt),rn;if(Yt=kt[gt.g+3],rn|=(Yt&127)<<21,128>Yt)return gt.g+=4,Po(gt),rn;if(Yt=kt[gt.g+4],gt.g+=5,rn|=(Yt&15)<<28,128>Yt)return Po(gt),rn;if(128<=kt[gt.g++]&&128<=kt[gt.g++]&&128<=kt[gt.g++]&&128<=kt[gt.g++]&&128<=kt[gt.g++])throw Qo();return Po(gt),rn}var Bo=[];function Os(){this.g=[]}Os.prototype.length=function(){return this.g.length},Os.prototype.end=function(){var gt=this.g;return this.g=[],gt};function _s(gt,kt){for(;127<kt;)gt.g.push(kt&127|128),kt>>>=7;gt.g.push(kt)}function Dl(gt){var kt={},Yt=kt.W===void 0?!1:kt.W;this.l={v:kt.v===void 0?!1:kt.v},this.W=Yt,kt=this.l,Bo.length?(Yt=Bo.pop(),kt&&(Yt.v=kt.v),gt&&ba(Yt,gt),gt=Yt):gt=new Ls(gt,kt),this.g=gt,this.j=this.g.g,this.h=this.i=-1}Dl.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function Ws(gt){var kt=gt.g;if(kt.g==kt.i)return!1;gt.j=gt.g.g;var Yt=Ks(gt.g)>>>0;if(kt=Yt>>>3,Yt&=7,!(0<=Yt&&5>=Yt))throw Rl(Yt,gt.j);if(1>kt)throw Error("Invalid field number: "+kt+" (at position "+gt.j+")");return gt.i=kt,gt.h=Yt,!0}function Ko(gt){switch(gt.h){case 0:if(gt.h!=0)Ko(gt);else e:{gt=gt.g;for(var kt=gt.g,Yt=kt+10;kt<Yt;)if(!(gt.h[kt++]&128)){gt.g=kt,Po(gt);break e}throw Qo()}break;case 1:gt=gt.g,gt.g+=8,Po(gt);break;case 2:gt.h!=2?Ko(gt):(kt=Ks(gt.g)>>>0,gt=gt.g,gt.g+=kt,Po(gt));break;case 5:gt=gt.g,gt.g+=4,Po(gt);break;case 3:kt=gt.i;do{if(!Ws(gt))throw Error("Unmatched start-group tag: stream EOF");if(gt.h==4){if(gt.i!=kt)throw Error("Unmatched end-group tag");break}Ko(gt)}while(1);break;default:throw Rl(gt.h,gt.j)}}var Vl=[];function Nl(){this.i=[],this.h=0,this.g=new Os}function zs(gt,kt){kt.length!==0&&(gt.i.push(kt),gt.h+=kt.length)}function Wu(gt,kt){if(kt=kt.ca){zs(gt,gt.g.end());for(var Yt=0;Yt<kt.length;Yt++)zs(gt,kt[Yt])}}var ru=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Wl(gt,kt){Object.isFrozen(gt)||(ru?gt[ru]|=kt:gt.N!==void 0?gt.N|=kt:Object.defineProperties(gt,{N:{value:kt,configurable:!0,writable:!0,enumerable:!1}}))}function iu(gt){var kt;return ru?kt=gt[ru]:kt=gt.N,kt??0}function Gs(gt){return Wl(gt,1),gt}function qs(gt){return Array.isArray(gt)?!!(iu(gt)&2):!1}function ks(gt){if(!Array.isArray(gt))throw Error("cannot mark non-array as immutable");Wl(gt,2)}function as(gt){return gt!==null&&typeof gt=="object"&&!Array.isArray(gt)&&gt.constructor===Object}var Ml=Object.freeze(Gs([]));function ts(gt){if(qs(gt.m))throw Error("Cannot mutate an immutable Message")}var zo=typeof Symbol<"u"&&typeof Symbol.hasInstance<"u";function uu(gt){return{value:gt,configurable:!1,writable:!1,enumerable:!1}}function Es(gt,kt,Yt){return kt===-1?null:kt>=gt.i?gt.g?gt.g[kt]:void 0:Yt!==void 0&&Yt&&gt.g&&(Yt=gt.g[kt],Yt!=null)?Yt:gt.m[kt+gt.h]}function wo(gt,kt,Yt,rn){rn=rn===void 0?!1:rn,ts(gt),kt<gt.i&&!rn?gt.m[kt+gt.h]=Yt:(gt.g||(gt.g=gt.m[gt.i+gt.h]={}))[kt]=Yt}function ro(gt,kt,Yt,rn){Yt=Yt===void 0?!0:Yt,rn=rn===void 0?!1:rn;var wn=Es(gt,kt,rn);return wn==null&&(wn=Ml),qs(gt.m)?Yt&&(ks(wn),Object.freeze(wn)):(wn===Ml||qs(wn))&&(wn=Gs(wn.slice()),wo(gt,kt,wn,rn)),wn}function cs(gt,kt,Yt){return gt=Es(gt,kt),gt=gt==null?gt:+gt,gt??(Yt===void 0?0:Yt)}function na(gt,kt,Yt,rn){gt.j||(gt.j={});var wn=qs(gt.m),ft=gt.j[Yt];if(!ft){rn=ro(gt,Yt,!0,rn===void 0?!1:rn),ft=[],wn=wn||qs(rn);for(var It=0;It<rn.length;It++)ft[It]=new kt(rn[It]),wn&&ks(ft[It].m);wn&&(ks(ft),Object.freeze(ft)),gt.j[Yt]=ft}return ft}function ns(gt,kt,Yt,rn,wn){var ft=ft===void 0?!1:ft;return ts(gt),ft=na(gt,Yt,kt,ft),Yt=rn||new Yt,gt=ro(gt,kt),wn!=null?(ft.splice(wn,0,Yt),gt.splice(wn,0,Yt.m)):(ft.push(Yt),gt.push(Yt.m)),Yt}function ls(gt,kt){return gt=Es(gt,kt),gt??0}function ur(gt,kt){return gt=Es(gt,kt),gt??""}function mr(gt){switch(typeof gt){case"number":return isFinite(gt)?gt:String(gt);case"object":if(gt&&!Array.isArray(gt)){if(Nu(gt))return fp(gt);if(gt instanceof Qs){var kt=gt.L;return kt=kt==null||typeof kt=="string"?kt:Uu&&kt instanceof Uint8Array?fp(kt):null,(gt.L=kt)||""}}}return gt}function xr(gt){var kt=hs;return kt=kt===void 0?fo:kt,gs(gt,kt)}function Jo(gt,kt){if(gt!=null){if(Array.isArray(gt))gt=gs(gt,kt);else if(as(gt)){var Yt={},rn;for(rn in gt)Yt[rn]=Jo(gt[rn],kt);gt=Yt}else gt=kt(gt);return gt}}function gs(gt,kt){for(var Yt=gt.slice(),rn=0;rn<Yt.length;rn++)Yt[rn]=Jo(Yt[rn],kt);return Array.isArray(gt)&&iu(gt)&1&&Gs(Yt),Yt}function hs(gt){return gt&&typeof gt=="object"&&gt.toJSON?gt.toJSON():(gt=mr(gt),Array.isArray(gt)?xr(gt):gt)}function fo(gt){return Nu(gt)?new Uint8Array(gt):gt}function Cs(gt,kt,Yt){gt||(gt=xa),xa=null;var rn=this.constructor.h;gt||(gt=rn?[rn]:[]),this.h=(rn?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=gt;e:{if(rn=this.m.length,gt=rn-1,rn&&(rn=this.m[gt],as(rn))){this.i=gt-this.h,this.g=rn;break e}kt!==void 0&&-1<kt?(this.i=Math.max(kt,gt+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(Yt)for(kt=0;kt<Yt.length;kt++)if(gt=Yt[kt],gt<this.i)gt+=this.h,(rn=this.m[gt])?Array.isArray(rn)&&Gs(rn):this.m[gt]=Ml;else{rn=this.g||(this.g=this.m[this.i+this.h]={});var wn=rn[gt];wn?Array.isArray(wn)&&Gs(wn):rn[gt]=Ml}}Cs.prototype.toJSON=function(){return xr(this.m)},Cs.prototype.toString=function(){return this.m.toString()};var xa;function Ul(){Cs.apply(this,arguments)}if(Ar(Ul,Cs),zo){var Hl={};Object.defineProperties(Ul,(Hl[Symbol.hasInstance]=uu(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Hl))}function du(gt,kt,Yt){if(Yt){var rn={},wn;for(wn in Yt){var ft=Yt[wn],It=ft.ja;It||(rn.F=ft.pa||ft.ha.P,ft.ba?(rn.U=Hu(ft.ba),It=function(Lt){return function(rt,yt,wt){return Lt.F(rt,yt,wt,Lt.U)}}(rn)):ft.da?(rn.T=Il(ft.X.g,ft.da),It=function(Lt){return function(rt,yt,wt){return Lt.F(rt,yt,wt,Lt.T)}}(rn)):It=rn.F,ft.ja=It),It(kt,gt,ft.X),rn={F:rn.F,U:rn.U,T:rn.T}}}Wu(kt,gt)}var Cu=Symbol();function ga(gt,kt,Yt){return gt[Cu]||(gt[Cu]=function(rn,wn){return kt(rn,wn,Yt)})}function Yl(gt){var kt=gt[Cu];if(!kt){var Yt=At(gt);kt=function(rn,wn){return Dt(rn,wn,Yt)},gt[Cu]=kt}return kt}function Ap(gt){var kt=gt.ba;if(kt)return Yl(kt);if(kt=gt.oa)return ga(gt.X.g,kt,gt.da)}function Bl(gt){var kt=Ap(gt),Yt=gt.X,rn=gt.ha.O;return kt?function(wn,ft){return rn(wn,ft,Yt,kt)}:function(wn,ft){return rn(wn,ft,Yt)}}function $a(gt,kt,Yt,rn,wn,ft){gt=gt();var It=0;for(gt.length&&typeof gt[0]!="number"&&(Yt(kt,gt[0]),It++);It<gt.length;){Yt=gt[It++];for(var Lt=It+1;Lt<gt.length&&typeof gt[Lt]!="number";)Lt++;var rt=gt[It++];switch(Lt-=It,Lt){case 0:rn(kt,Yt,rt);break;case 1:rn(kt,Yt,rt,gt[It++]);break;case 2:wn(kt,Yt,rt,gt[It++],gt[It++]);break;case 3:Lt=gt[It++];var yt=gt[It++],wt=gt[It++];Array.isArray(wt)?wn(kt,Yt,rt,Lt,yt,wt):ft(kt,Yt,rt,Lt,yt,wt);break;case 4:ft(kt,Yt,rt,gt[It++],gt[It++],gt[It++],gt[It++]);break;default:throw Error("unexpected number of binary field arguments: "+Lt)}}return kt}var Ou=Symbol();function Hu(gt){var kt=gt[Ou];if(!kt){var Yt=ou(gt);kt=function(rn,wn){return Zn(rn,wn,Yt)},gt[Ou]=kt}return kt}function Il(gt,kt){var Yt=gt[Ou];return Yt||(Yt=function(rn,wn){return du(rn,wn,kt)},gt[Ou]=Yt),Yt}var hp=Symbol();function Kl(gt,kt){gt.push(kt)}function Au(gt,kt,Yt){gt.push(kt,Yt.P)}function $u(gt,kt,Yt,rn,wn){var ft=Hu(wn),It=Yt.P;gt.push(kt,function(Lt,rt,yt){return It(Lt,rt,yt,rn,ft)})}function Ep(gt,kt,Yt,rn,wn,ft){var It=Il(rn,ft),Lt=Yt.P;gt.push(kt,function(rt,yt,wt){return Lt(rt,yt,wt,rn,It)})}function ou(gt){var kt=gt[hp];return kt||$a(gt,gt[hp]=[],Kl,Au,$u,Ep)}var _u=Symbol();function Fp(gt,kt){gt[0]=kt}function Xp(gt,kt,Yt,rn){var wn=Yt.O;gt[kt]=rn?function(ft,It,Lt){return wn(ft,It,Lt,rn)}:wn}function qu(gt,kt,Yt,rn,wn,ft){var It=Yt.O,Lt=Yl(wn);gt[kt]=function(rt,yt,wt){return It(rt,yt,wt,rn,Lt,ft)}}function ip(gt,kt,Yt,rn,wn,ft,It){var Lt=Yt.O,rt=ga(rn,wn,ft);gt[kt]=function(yt,wt,tt){return Lt(yt,wt,tt,rn,rt,It)}}function At(gt){var kt=gt[_u];return kt||$a(gt,gt[_u]={},Fp,Xp,qu,ip)}function Dt(gt,kt,Yt){for(;Ws(kt)&&kt.h!=4;){var rn=kt.i,wn=Yt[rn];if(!wn){var ft=Yt[0];ft&&(ft=ft[rn])&&(wn=Yt[rn]=Bl(ft))}if((!wn||!wn(kt,gt,rn))&&(wn=kt,rn=gt,ft=wn.j,Ko(wn),!wn.W)){var It=wn.g.h;wn=wn.g.g,wn=ft===wn?Ss||(Ss=new Uint8Array(0)):Gl?It.slice(ft,wn):new Uint8Array(It.subarray(ft,wn)),(ft=rn.ca)?ft.push(wn):rn.ca=[wn]}}return gt}function jt(gt,kt,Yt){if(Vl.length){var rn=Vl.pop();gt&&(ba(rn.g,gt),rn.i=-1,rn.h=-1),gt=rn}else gt=new Dl(gt);try{return Dt(new kt,gt,At(Yt))}finally{kt=gt.g,kt.h=null,kt.j=0,kt.i=0,kt.g=0,kt.v=!1,gt.i=-1,gt.h=-1,100>Vl.length&&Vl.push(gt)}}function Zn(gt,kt,Yt){for(var rn=Yt.length,wn=rn%2==1,ft=wn?1:0;ft<rn;ft+=2)(0,Yt[ft+1])(kt,gt,Yt[ft]);du(gt,kt,wn?Yt[0]:void 0)}function _n(gt,kt){var Yt=new Nl;Zn(gt,Yt,ou(kt)),zs(Yt,Yt.g.end()),gt=new Uint8Array(Yt.h),kt=Yt.i;for(var rn=kt.length,wn=0,ft=0;ft<rn;ft++){var It=kt[ft];gt.set(It,wn),wn+=It.length}return Yt.i=[gt],gt}function Sr(gt,kt){return{O:gt,P:kt}}var Qn=Sr(function(gt,kt,Yt){if(gt.h!==5)return!1;gt=gt.g;var rn=gt.h[gt.g],wn=gt.h[gt.g+1],ft=gt.h[gt.g+2],It=gt.h[gt.g+3];return gt.g+=4,Po(gt),wn=(rn<<0|wn<<8|ft<<16|It<<24)>>>0,gt=2*(wn>>31)+1,rn=wn>>>23&255,wn&=8388607,wo(kt,Yt,rn==255?wn?NaN:1/0*gt:rn==0?gt*Math.pow(2,-149)*wn:gt*Math.pow(2,rn-150)*(wn+Math.pow(2,23))),!0},function(gt,kt,Yt){if(kt=Es(kt,Yt),kt!=null){_s(gt.g,8*Yt+5),gt=gt.g;var rn=kt;rn=(Yt=0>rn?1:0)?-rn:rn,rn===0?0<1/rn?ss=Ds=0:(Ds=0,ss=2147483648):isNaN(rn)?(Ds=0,ss=2147483647):34028234663852886e22<rn?(Ds=0,ss=(Yt<<31|2139095040)>>>0):11754943508222875e-54>rn?(rn=Math.round(rn/Math.pow(2,-149)),Ds=0,ss=(Yt<<31|rn)>>>0):(kt=Math.floor(Math.log(rn)/Math.LN2),rn*=Math.pow(2,-kt),rn=Math.round(8388608*rn),16777216<=rn&&++kt,Ds=0,ss=(Yt<<31|kt+127<<23|rn&8388607)>>>0),Yt=ss,gt.g.push(Yt>>>0&255),gt.g.push(Yt>>>8&255),gt.g.push(Yt>>>16&255),gt.g.push(Yt>>>24&255)}}),hr=Sr(function(gt,kt,Yt){if(gt.h!==0)return!1;for(var rn=gt.g,wn=128,ft=0,It=gt=0;4>It&&128<=wn;It++)wn=rn.h[rn.g++],Po(rn),ft|=(wn&127)<<7*It;if(128<=wn&&(wn=rn.h[rn.g++],Po(rn),ft|=(wn&127)<<28,gt|=(wn&127)>>4),128<=wn)for(It=0;5>It&&128<=wn;It++)wn=rn.h[rn.g++],Po(rn),gt|=(wn&127)<<7*It+3;if(128>wn)rn=ft>>>0,wn=gt>>>0,(gt=wn&2147483648)&&(rn=~rn+1>>>0,wn=~wn>>>0,rn==0&&(wn=wn+1>>>0)),rn=4294967296*wn+(rn>>>0);else throw Qo();return wo(kt,Yt,gt?-rn:rn),!0},function(gt,kt,Yt){if(kt=Es(kt,Yt),kt!=null&&kt!=null){_s(gt.g,8*Yt),gt=gt.g;var rn=kt;for(Yt=0>rn,rn=Math.abs(rn),kt=rn>>>0,rn=Math.floor((rn-kt)/4294967296),rn>>>=0,Yt&&(rn=~rn>>>0,kt=(~kt>>>0)+1,4294967295<kt&&(kt=0,rn++,4294967295<rn&&(rn=0))),ss=kt,Ds=rn,Yt=ss,kt=Ds;0<kt||127<Yt;)gt.g.push(Yt&127|128),Yt=(Yt>>>7|kt<<25)>>>0,kt>>>=7;gt.g.push(Yt)}}),Nr=Sr(function(gt,kt,Yt){return gt.h!==0?!1:(wo(kt,Yt,Ks(gt.g)),!0)},function(gt,kt,Yt){if(kt=Es(kt,Yt),kt!=null&&kt!=null)if(_s(gt.g,8*Yt),gt=gt.g,Yt=kt,0<=Yt)_s(gt,Yt);else{for(kt=0;9>kt;kt++)gt.g.push(Yt&127|128),Yt>>=7;gt.g.push(1)}}),ao=Sr(function(gt,kt,Yt){if(gt.h!==2)return!1;var rn=Ks(gt.g)>>>0;gt=gt.g;var wn=gt.g;gt.g+=rn,Po(gt),gt=gt.h;var ft;if(np)(ft=ku)||(ft=ku=new TextDecoder("utf-8",{fatal:!0})),ft=ft.decode(gt.subarray(wn,wn+rn));else{rn=wn+rn;for(var It=[],Lt=null,rt,yt,wt;wn<rn;)rt=gt[wn++],128>rt?It.push(rt):224>rt?wn>=rn?$s():(yt=gt[wn++],194>rt||(yt&192)!==128?(wn--,$s()):It.push((rt&31)<<6|yt&63)):240>rt?wn>=rn-1?$s():(yt=gt[wn++],(yt&192)!==128||rt===224&&160>yt||rt===237&&160<=yt||((ft=gt[wn++])&192)!==128?(wn--,$s()):It.push((rt&15)<<12|(yt&63)<<6|ft&63)):244>=rt?wn>=rn-2?$s():(yt=gt[wn++],(yt&192)!==128||(rt<<28)+(yt-144)>>30||((ft=gt[wn++])&192)!==128||((wt=gt[wn++])&192)!==128?(wn--,$s()):(rt=(rt&7)<<18|(yt&63)<<12|(ft&63)<<6|wt&63,rt-=65536,It.push((rt>>10&1023)+55296,(rt&1023)+56320))):$s(),8192<=It.length&&(Lt=tu(Lt,It),It.length=0);ft=tu(Lt,It)}return wo(kt,Yt,ft),!0},function(gt,kt,Yt){if(kt=Es(kt,Yt),kt!=null){var rn=!1;if(rn=rn===void 0?!1:rn,sp){if(rn&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(kt))throw Error("Found an unpaired surrogate");kt=(ju||(ju=new TextEncoder)).encode(kt)}else{for(var wn=0,ft=new Uint8Array(3*kt.length),It=0;It<kt.length;It++){var Lt=kt.charCodeAt(It);if(128>Lt)ft[wn++]=Lt;else{if(2048>Lt)ft[wn++]=Lt>>6|192;else{if(55296<=Lt&&57343>=Lt){if(56319>=Lt&&It<kt.length){var rt=kt.charCodeAt(++It);if(56320<=rt&&57343>=rt){Lt=1024*(Lt-55296)+rt-56320+65536,ft[wn++]=Lt>>18|240,ft[wn++]=Lt>>12&63|128,ft[wn++]=Lt>>6&63|128,ft[wn++]=Lt&63|128;continue}else It--}if(rn)throw Error("Found an unpaired surrogate");Lt=65533}ft[wn++]=Lt>>12|224,ft[wn++]=Lt>>6&63|128}ft[wn++]=Lt&63|128}}kt=ft.subarray(0,wn)}_s(gt.g,8*Yt+2),_s(gt.g,kt.length),zs(gt,gt.g.end()),zs(gt,kt)}}),Wo=Sr(function(gt,kt,Yt,rn,wn){if(gt.h!==2)return!1;kt=ns(kt,Yt,rn),Yt=gt.g.i,rn=Ks(gt.g)>>>0;var ft=gt.g.g+rn,It=ft-Yt;if(0>=It&&(gt.g.i=ft,wn(kt,gt),It=ft-gt.g.g),It)throw Error("Message parsing ended unexpectedly. Expected to read "+(rn+" bytes, instead read "+(rn-It)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return gt.g.g=ft,gt.g.i=Yt,!0},function(gt,kt,Yt,rn,wn){if(kt=na(kt,rn,Yt),kt!=null)for(rn=0;rn<kt.length;rn++){var ft=gt;_s(ft.g,8*Yt+2);var It=ft.g.end();zs(ft,It),It.push(ft.h),ft=It,wn(kt[rn],gt),It=gt;var Lt=ft.pop();for(Lt=It.h+It.g.length()-Lt;127<Lt;)ft.push(Lt&127|128),Lt>>>=7,It.h++;ft.push(Lt),It.h++}});function Ao(){Ul.apply(this,arguments)}if(Ar(Ao,Ul),zo){var es={};Object.defineProperties(Ao,(es[Symbol.hasInstance]=uu(Object[Symbol.hasInstance]),es))}function Lo(gt){Ao.call(this,gt)}Ar(Lo,Ao);function go(){return[1,Nr,2,Qn,3,ao,4,ao]}function No(gt){Ao.call(this,gt,-1,ps)}Ar(No,Ao),No.prototype.addClassification=function(gt,kt){return ns(this,1,Lo,gt,kt),this};function $o(){return[1,Wo,Lo,go]}var ps=[1];function Ts(gt){Ao.call(this,gt)}Ar(Ts,Ao);function As(){return[1,Qn,2,Qn,3,Qn,4,Qn,5,Qn]}function _a(gt){Ao.call(this,gt,-1,Vt)}Ar(_a,Ao);function xt(){return[1,Wo,Ts,As]}var Vt=[1];function Wt(gt){Ao.call(this,gt)}Ar(Wt,Ao);function gn(){return[1,Qn,2,Qn,3,Qn,4,Qn,5,Qn,6,hr]}function Nn(gt,kt,Yt){if(Yt=gt.createShader(Yt===0?gt.VERTEX_SHADER:gt.FRAGMENT_SHADER),gt.shaderSource(Yt,kt),gt.compileShader(Yt),!gt.getShaderParameter(Yt,gt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+gt.getShaderInfoLog(Yt));return Yt}function er(gt){return na(gt,Lo,1).map(function(kt){return{index:ls(kt,1),score:cs(kt,2),label:Es(kt,3)!=null?ur(kt,3):void 0,displayName:Es(kt,4)!=null?ur(kt,4):void 0}})}function Pn(gt){return{x:cs(gt,1),y:cs(gt,2),z:cs(gt,3),visibility:Es(gt,4)!=null?cs(gt,4):void 0}}function ar(gt){return gt.map(function(kt){return na(jt(kt,_a,xt),Ts,1).map(Pn)})}function Rr(gt,kt){this.h=gt,this.g=kt,this.l=0}function pt(gt,kt,Yt){return Mt(gt,kt),typeof gt.g.canvas.transferToImageBitmap=="function"?o.resolve(gt.g.canvas.transferToImageBitmap()):Yt?o.resolve(gt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(gt.g.canvas):(gt.i===void 0&&(gt.i=document.createElement("canvas")),new o(function(rn){gt.i.height=gt.g.canvas.height,gt.i.width=gt.g.canvas.width,gt.i.getContext("2d",{}).drawImage(gt.g.canvas,0,0,gt.g.canvas.width,gt.g.canvas.height),rn(gt.i)}))}function Mt(gt,kt){var Yt=gt.g;if(gt.o===void 0){var rn=Nn(Yt,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),wn=Nn(Yt,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),ft=Yt.createProgram();if(Yt.attachShader(ft,rn),Yt.attachShader(ft,wn),Yt.linkProgram(ft),!Yt.getProgramParameter(ft,Yt.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Yt.getProgramInfoLog(ft));rn=gt.o=ft,Yt.useProgram(rn),wn=Yt.getUniformLocation(rn,"sampler0"),gt.j={K:Yt.getAttribLocation(rn,"aVertex"),J:Yt.getAttribLocation(rn,"aTex"),qa:wn},gt.u=Yt.createBuffer(),Yt.bindBuffer(Yt.ARRAY_BUFFER,gt.u),Yt.enableVertexAttribArray(gt.j.K),Yt.vertexAttribPointer(gt.j.K,2,Yt.FLOAT,!1,0,0),Yt.bufferData(Yt.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Yt.STATIC_DRAW),Yt.bindBuffer(Yt.ARRAY_BUFFER,null),gt.s=Yt.createBuffer(),Yt.bindBuffer(Yt.ARRAY_BUFFER,gt.s),Yt.enableVertexAttribArray(gt.j.J),Yt.vertexAttribPointer(gt.j.J,2,Yt.FLOAT,!1,0,0),Yt.bufferData(Yt.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Yt.STATIC_DRAW),Yt.bindBuffer(Yt.ARRAY_BUFFER,null),Yt.uniform1i(wn,0)}rn=gt.j,Yt.useProgram(gt.o),Yt.canvas.width=kt.width,Yt.canvas.height=kt.height,Yt.viewport(0,0,kt.width,kt.height),Yt.activeTexture(Yt.TEXTURE0),gt.h.bindTexture2d(kt.glName),Yt.enableVertexAttribArray(rn.K),Yt.bindBuffer(Yt.ARRAY_BUFFER,gt.u),Yt.vertexAttribPointer(rn.K,2,Yt.FLOAT,!1,0,0),Yt.enableVertexAttribArray(rn.J),Yt.bindBuffer(Yt.ARRAY_BUFFER,gt.s),Yt.vertexAttribPointer(rn.J,2,Yt.FLOAT,!1,0,0),Yt.bindFramebuffer(Yt.DRAW_FRAMEBUFFER?Yt.DRAW_FRAMEBUFFER:Yt.FRAMEBUFFER,null),Yt.clearColor(0,0,0,0),Yt.clear(Yt.COLOR_BUFFER_BIT),Yt.colorMask(!0,!0,!0,!0),Yt.drawArrays(Yt.TRIANGLE_FAN,0,4),Yt.disableVertexAttribArray(rn.K),Yt.disableVertexAttribArray(rn.J),Yt.bindBuffer(Yt.ARRAY_BUFFER,null),gt.h.bindTexture2d(0)}function Ht(gt){this.g=gt}var cn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function xn(gt,kt){return kt+gt}function Xn(gt,kt){window[gt]=kt}function Gn(gt){var kt=document.createElement("script");return kt.setAttribute("src",gt),kt.setAttribute("crossorigin","anonymous"),new o(function(Yt){kt.addEventListener("load",function(){Yt()},!1),kt.addEventListener("error",function(){Yt()},!1),document.body.appendChild(kt)})}function dr(){return Hr(function(gt){switch(gt.g){case 1:return gt.o=2,qn(gt,WebAssembly.instantiate(cn),4);case 4:gt.g=3,gt.o=0;break;case 2:return gt.o=0,gt.j=null,gt.return(!1);case 3:return gt.return(!0)}})}function sr(gt){if(this.g=gt,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.$=!0,this.D=o.resolve(),this.Z="",this.C={},this.locateFile=gt&&gt.locateFile||xn,typeof window=="object")var kt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")kt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.aa=kt,gt.options){kt=ln(Object.keys(gt.options));for(var Yt=kt.next();!Yt.done;Yt=kt.next()){Yt=Yt.value;var rn=gt.options[Yt].default;rn!==void 0&&(this.j[Yt]=typeof rn=="function"?rn():rn)}}}at=sr.prototype,at.close=function(){return this.i&&this.i.delete(),o.resolve()};function Fr(gt){var kt,Yt,rn,wn,ft,It,Lt,rt,yt,wt,tt;return Hr(function(mt){switch(mt.g){case 1:return gt.$?(kt=gt.g.files===void 0?[]:typeof gt.g.files=="function"?gt.g.files(gt.j):gt.g.files,qn(mt,dr(),2)):mt.return();case 2:if(Yt=mt.h,typeof window=="object")return Xn("createMediapipeSolutionsWasm",{locateFile:gt.locateFile}),Xn("createMediapipeSolutionsPackedAssets",{locateFile:gt.locateFile}),It=kt.filter(function(St){return St.data!==void 0}),Lt=kt.filter(function(St){return St.data===void 0}),rt=o.all(It.map(function(St){var Zt=co(gt,St.url);if(St.path!==void 0){var Qt=St.path;Zt=Zt.then(function(un){return gt.overrideFile(Qt,un),o.resolve(un)})}return Zt})),yt=o.all(Lt.map(function(St){return St.simd===void 0||St.simd&&Yt||!St.simd&&!Yt?Gn(gt.locateFile(St.url,gt.aa)):o.resolve()})).then(function(){var St,Zt,Qt;return Hr(function(un){if(un.g==1)return St=window.createMediapipeSolutionsWasm,Zt=window.createMediapipeSolutionsPackedAssets,Qt=gt,qn(un,St(Zt),2);Qt.h=un.h,un.g=0})}),wt=function(){return Hr(function(St){return gt.g.graph&&gt.g.graph.url?St=qn(St,co(gt,gt.g.graph.url),0):(St.g=0,St=void 0),St})}(),qn(mt,o.all([yt,rt,wt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return rn=kt.filter(function(St){return St.simd===void 0||St.simd&&Yt||!St.simd&&!Yt}).map(function(St){return gt.locateFile(St.url,gt.aa)}),importScripts.apply(null,En(rn)),wn=gt,qn(mt,createMediapipeSolutionsWasm(Module),6);case 6:wn.h=mt.h,gt.l=new OffscreenCanvas(1,1),gt.h.canvas=gt.l,ft=gt.h.GL.createContext(gt.l,{antialias:!1,alpha:!1,na:typeof WebGL2RenderingContext<"u"?2:1}),gt.h.GL.makeContextCurrent(ft),mt.g=4;break;case 7:if(gt.l=document.createElement("canvas"),tt=gt.l.getContext("webgl2",{}),!tt&&(tt=gt.l.getContext("webgl",{}),!tt))return alert("Failed to create WebGL canvas context when passing video frame."),mt.return();gt.G=tt,gt.h.canvas=gt.l,gt.h.createContext(gt.l,!0,!0,{});case 4:gt.i=new gt.h.SolutionWasm,gt.$=!1,mt.g=0}})}function _r(gt){var kt,Yt,rn,wn,ft,It,Lt,rt;return Hr(function(yt){if(yt.g==1){if(gt.g.graph&&gt.g.graph.url&&gt.Z===gt.g.graph.url)return yt.return();if(gt.s=!0,!gt.g.graph||!gt.g.graph.url){yt.g=2;return}return gt.Z=gt.g.graph.url,qn(yt,co(gt,gt.g.graph.url),3)}for(yt.g!=2&&(kt=yt.h,gt.i.loadGraph(kt)),Yt=ln(Object.keys(gt.C)),rn=Yt.next();!rn.done;rn=Yt.next())wn=rn.value,gt.i.overrideFile(wn,gt.C[wn]);if(gt.C={},gt.g.listeners)for(ft=ln(gt.g.listeners),It=ft.next();!It.done;It=ft.next())Lt=It.value,uo(gt,Lt);rt=gt.j,gt.j={},gt.setOptions(rt),yt.g=0})}at.reset=function(){var gt=this;return Hr(function(kt){gt.i&&(gt.i.reset(),gt.o={},gt.u={}),kt.g=0})},at.setOptions=function(gt,kt){var Yt=this;if(kt=kt||this.g.options){for(var rn=[],wn=[],ft={},It=ln(Object.keys(gt)),Lt=It.next();!Lt.done;ft={R:ft.R,S:ft.S},Lt=It.next()){var rt=Lt.value;rt in this.j&&this.j[rt]===gt[rt]||(this.j[rt]=gt[rt],Lt=kt[rt],Lt!==void 0&&(Lt.onChange&&(ft.R=Lt.onChange,ft.S=gt[rt],rn.push(function(yt){return function(){var wt;return Hr(function(tt){if(tt.g==1)return qn(tt,yt.R(yt.S),2);wt=tt.h,wt===!0&&(Yt.s=!0),tt.g=0})}}(ft))),Lt.graphOptionXref&&(rt={valueNumber:Lt.type===1?gt[rt]:0,valueBoolean:Lt.type===0?gt[rt]:!1,valueString:Lt.type===2?gt[rt]:""},Lt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Lt.graphOptionXref),rt),wn.push(Lt))))}(rn.length!==0||wn.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(wn),this.A=(this.A===void 0?[]:this.A).concat(rn))}};function Mo(gt){var kt,Yt,rn,wn,ft,It,Lt;return Hr(function(rt){switch(rt.g){case 1:if(!gt.s)return rt.return();if(!gt.A){rt.g=2;break}kt=ln(gt.A),Yt=kt.next();case 3:if(Yt.done){rt.g=5;break}return rn=Yt.value,qn(rt,rn(),4);case 4:Yt=kt.next(),rt.g=3;break;case 5:gt.A=void 0;case 2:if(gt.B){for(wn=new gt.h.GraphOptionChangeRequestList,ft=ln(gt.B),It=ft.next();!It.done;It=ft.next())Lt=It.value,wn.push_back(Lt);gt.i.changeOptions(wn),wn.delete(),gt.B=void 0}gt.s=!1,rt.g=0}})}at.initialize=function(){var gt=this;return Hr(function(kt){return kt.g==1?qn(kt,Fr(gt),2):kt.g!=3?qn(kt,_r(gt),3):qn(kt,Mo(gt),0)})};function co(gt,kt){var Yt,rn;return Hr(function(wn){return kt in gt.H?wn.return(gt.H[kt]):(Yt=gt.locateFile(kt,""),rn=fetch(Yt).then(function(ft){return ft.arrayBuffer()}),gt.H[kt]=rn,wn.return(rn))})}at.overrideFile=function(gt,kt){this.i?this.i.overrideFile(gt,kt):this.C[gt]=kt},at.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},at.send=function(gt,kt){var Yt=this,rn,wn,ft,It,Lt,rt,yt,wt,tt;return Hr(function(mt){switch(mt.g){case 1:return Yt.g.inputs?(rn=1e3*(kt??performance.now()),qn(mt,Yt.D,2)):mt.return();case 2:return qn(mt,Yt.initialize(),3);case 3:for(wn=new Yt.h.PacketDataList,ft=ln(Object.keys(gt)),It=ft.next();!It.done;It=ft.next())if(Lt=It.value,rt=Yt.g.inputs[Lt]){e:{var St=gt[Lt];switch(rt.type){case"video":var Zt=Yt.o[rt.stream];if(Zt||(Zt=new Rr(Yt.h,Yt.G),Yt.o[rt.stream]=Zt),Zt.l===0&&(Zt.l=Zt.h.createTexture()),typeof HTMLVideoElement<"u"&&St instanceof HTMLVideoElement)var Qt=St.videoWidth,un=St.videoHeight;else typeof HTMLImageElement<"u"&&St instanceof HTMLImageElement?(Qt=St.naturalWidth,un=St.naturalHeight):(Qt=St.width,un=St.height);un={glName:Zt.l,width:Qt,height:un},Qt=Zt.g,Qt.canvas.width=un.width,Qt.canvas.height=un.height,Qt.activeTexture(Qt.TEXTURE0),Zt.h.bindTexture2d(Zt.l),Qt.texImage2D(Qt.TEXTURE_2D,0,Qt.RGBA,Qt.RGBA,Qt.UNSIGNED_BYTE,St),Zt.h.bindTexture2d(0),Zt=un;break e;case"detections":for(Zt=Yt.o[rt.stream],Zt||(Zt=new Ht(Yt.h),Yt.o[rt.stream]=Zt),Zt.data||(Zt.data=new Zt.g.DetectionListData),Zt.data.reset(St.length),un=0;un<St.length;++un){Qt=St[un];var mn=Zt.data,Ln=mn.setBoundingBox,Kn=un,tr=Qt.ea,nr=new Wt;if(wo(nr,1,tr.ka),wo(nr,2,tr.la),wo(nr,3,tr.height),wo(nr,4,tr.width),wo(nr,5,tr.rotation),wo(nr,6,tr.ia),tr=_n(nr,gn),Ln.call(mn,Kn,tr),Qt.Y)for(mn=0;mn<Qt.Y.length;++mn){nr=Qt.Y[mn];var Cr=!!nr.visibility;Ln=Zt.data,Kn=Ln.addNormalizedLandmark,tr=un,nr=Object.assign(Object.assign({},nr),{visibility:Cr?nr.visibility:0}),Cr=new Ts,wo(Cr,1,nr.x),wo(Cr,2,nr.y),wo(Cr,3,nr.z),nr.visibility&&wo(Cr,4,nr.visibility),nr=_n(Cr,As),Kn.call(Ln,tr,nr)}if(Qt.V)for(mn=0;mn<Qt.V.length;++mn)Ln=Zt.data,Kn=Ln.addClassification,tr=un,nr=Qt.V[mn],Cr=new Lo,wo(Cr,2,nr.score),nr.index&&wo(Cr,1,nr.index),nr.label&&wo(Cr,3,nr.label),nr.displayName&&wo(Cr,4,nr.displayName),nr=_n(Cr,go),Kn.call(Ln,tr,nr)}Zt=Zt.data;break e;default:Zt={}}}switch(yt=Zt,wt=rt.stream,rt.type){case"video":wn.pushTexture2d(Object.assign(Object.assign({},yt),{stream:wt,timestamp:rn}));break;case"detections":tt=yt,tt.stream=wt,tt.timestamp=rn,wn.pushDetectionList(tt);break;default:throw Error("Unknown input config type: '"+rt.type+"'")}}return Yt.i.send(wn),qn(mt,Yt.D,4);case 4:wn.delete(),mt.g=0}})};function Lr(gt,kt,Yt){var rn,wn,ft,It,Lt,rt,yt,wt,tt,mt,St,Zt,Qt,un;return Hr(function(mn){switch(mn.g){case 1:if(!Yt)return mn.return(kt);for(rn={},wn=0,ft=ln(Object.keys(Yt)),It=ft.next();!It.done;It=ft.next())Lt=It.value,rt=Yt[Lt],typeof rt!="string"&&rt.type==="texture"&&kt[rt.stream]!==void 0&&++wn;1<wn&&(gt.I=!1),yt=ln(Object.keys(Yt)),It=yt.next();case 2:if(It.done){mn.g=4;break}if(wt=It.value,tt=Yt[wt],typeof tt=="string")return Qt=rn,un=wt,qn(mn,_i(gt,wt,kt[tt]),14);if(mt=kt[tt.stream],tt.type==="detection_list"){if(mt){for(var Ln=mt.getRectList(),Kn=mt.getLandmarksList(),tr=mt.getClassificationsList(),nr=[],Cr=0;Cr<Ln.size();++Cr){var Gr=jt(Ln.get(Cr),Wt,gn);Gr={ea:{ka:cs(Gr,1),la:cs(Gr,2),height:cs(Gr,3),width:cs(Gr,4),rotation:cs(Gr,5,0),ia:ls(Gr,6)},Y:na(jt(Kn.get(Cr),_a,xt),Ts,1).map(Pn),V:er(jt(tr.get(Cr),No,$o))},nr.push(Gr)}Ln=nr}else Ln=[];rn[wt]=Ln,mn.g=7;break}if(tt.type==="proto_list"){if(mt){for(Ln=Array(mt.size()),Kn=0;Kn<mt.size();Kn++)Ln[Kn]=mt.get(Kn);mt.delete()}else Ln=[];rn[wt]=Ln,mn.g=7;break}if(mt===void 0){mn.g=3;break}if(tt.type==="float_list"){rn[wt]=mt,mn.g=7;break}if(tt.type==="proto"){rn[wt]=mt,mn.g=7;break}if(tt.type!=="texture")throw Error("Unknown output config type: '"+tt.type+"'");return St=gt.u[wt],St||(St=new Rr(gt.h,gt.G),gt.u[wt]=St),qn(mn,pt(St,mt,gt.I),13);case 13:Zt=mn.h,rn[wt]=Zt;case 7:tt.transform&&rn[wt]&&(rn[wt]=tt.transform(rn[wt])),mn.g=3;break;case 14:Qt[un]=mn.h;case 3:It=yt.next(),mn.g=2;break;case 4:return mn.return(rn)}})}function _i(gt,kt,Yt){var rn;return Hr(function(wn){return typeof Yt=="number"||Yt instanceof Uint8Array||Yt instanceof gt.h.Uint8BlobList?wn.return(Yt):Yt instanceof gt.h.Texture2dDataOut?(rn=gt.u[kt],rn||(rn=new Rr(gt.h,gt.G),gt.u[kt]=rn),wn.return(pt(rn,Yt,gt.I))):wn.return(void 0)})}function uo(gt,kt){for(var Yt=kt.name||"$",rn=[].concat(En(kt.wants)),wn=new gt.h.StringList,ft=ln(kt.wants),It=ft.next();!It.done;It=ft.next())wn.push_back(It.value);ft=gt.h.PacketListener.implement({onResults:function(Lt){for(var rt={},yt=0;yt<kt.wants.length;++yt)rt[rn[yt]]=Lt.get(yt);var wt=gt.listeners[Yt];wt&&(gt.D=Lr(gt,rt,kt.outs).then(function(tt){tt=wt(tt);for(var mt=0;mt<kt.wants.length;++mt){var St=rt[rn[mt]];typeof St=="object"&&St.hasOwnProperty&&St.hasOwnProperty("delete")&&St.delete()}tt&&(gt.D=tt)}))}}),gt.i.attachMultiListener(wn,ft),wn.delete()}at.onResults=function(gt,kt){this.listeners[kt||"$"]=gt},Oo("Solution",sr),Oo("OptionType",{BOOL:0,NUMBER:1,ma:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Co(gt){return gt===void 0&&(gt=0),gt===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Io(gt){var kt=this;gt=gt||{},this.g=new sr({locateFile:gt.locateFile,files:function(Yt){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Co(Yt.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:ar},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:ar},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(Yt){return Yt.map(function(rn){return er(jt(rn,No,$o))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(Yt){var rn,wn,ft;return Hr(function(It){return It.g==1?(rn=Co(Yt),wn="third_party/mediapipe/modules/hand_landmark/"+rn,qn(It,co(kt.g,rn),2)):(ft=It.h,kt.g.overrideFile(wn,ft),It.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}at=Io.prototype,at.close=function(){return this.g.close(),o.resolve()},at.onResults=function(gt){this.g.onResults(gt)},at.initialize=function(){var gt=this;return Hr(function(kt){return qn(kt,gt.g.initialize(),0)})},at.reset=function(){this.g.reset()},at.send=function(gt){var kt=this;return Hr(function(Yt){return qn(Yt,kt.g.send(gt),0)})},at.setOptions=function(gt){this.g.setOptions(gt)},Oo("Hands",Io),Oo("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Oo("VERSION","0.4.1646424915")}).call(gu);var Qu={};(function(){var at;function ot(rt){var yt=0;return function(){return yt<rt.length?{done:!1,value:rt[yt++]}:{done:!0}}}var ut=typeof Object.defineProperties=="function"?Object.defineProperty:function(rt,yt,wt){return rt==Array.prototype||rt==Object.prototype||(rt[yt]=wt.value),rt};function Ot(rt){rt=[typeof globalThis=="object"&&globalThis,rt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var yt=0;yt<rt.length;++yt){var wt=rt[yt];if(wt&&wt.Math==Math)return wt}throw Error("Cannot find global object")}var Gt=Ot(this);function en(rt,yt){if(yt)e:{var wt=Gt;rt=rt.split(".");for(var tt=0;tt<rt.length-1;tt++){var mt=rt[tt];if(!(mt in wt))break e;wt=wt[mt]}rt=rt[rt.length-1],tt=wt[rt],yt=yt(tt),yt!=tt&&yt!=null&&ut(wt,rt,{configurable:!0,writable:!0,value:yt})}}en("Symbol",function(rt){function yt(St){if(this instanceof yt)throw new TypeError("Symbol is not a constructor");return new wt(tt+(St||"")+"_"+mt++,St)}function wt(St,Zt){this.g=St,ut(this,"description",{configurable:!0,writable:!0,value:Zt})}if(rt)return rt;wt.prototype.toString=function(){return this.g};var tt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",mt=0;return yt}),en("Symbol.iterator",function(rt){if(rt)return rt;rt=Symbol("Symbol.iterator");for(var yt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),wt=0;wt<yt.length;wt++){var tt=Gt[yt[wt]];typeof tt=="function"&&typeof tt.prototype[rt]!="function"&&ut(tt.prototype,rt,{configurable:!0,writable:!0,value:function(){return hn(ot(this))}})}return rt});function hn(rt){return rt={next:rt},rt[Symbol.iterator]=function(){return this},rt}function ln(rt){var yt=typeof Symbol<"u"&&Symbol.iterator&&rt[Symbol.iterator];return yt?yt.call(rt):{next:ot(rt)}}function En(rt){if(!(rt instanceof Array)){rt=ln(rt);for(var yt,wt=[];!(yt=rt.next()).done;)wt.push(yt.value);rt=wt}return rt}var rr=typeof Object.create=="function"?Object.create:function(rt){function yt(){}return yt.prototype=rt,new yt},br;if(typeof Object.setPrototypeOf=="function")br=Object.setPrototypeOf;else{var Tr;e:{var ho={a:!0},Eo={};try{Eo.__proto__=ho,Tr=Eo.a;break e}catch{}Tr=!1}br=Tr?function(rt,yt){if(rt.__proto__=yt,rt.__proto__!==yt)throw new TypeError(rt+" is not extensible");return rt}:null}var Ir=br;function Ar(rt,yt){if(rt.prototype=rr(yt.prototype),rt.prototype.constructor=rt,Ir)Ir(rt,yt);else for(var wt in yt)if(wt!="prototype")if(Object.defineProperties){var tt=Object.getOwnPropertyDescriptor(yt,wt);tt&&Object.defineProperty(rt,wt,tt)}else rt[wt]=yt[wt];rt.da=yt.prototype}function ko(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Vo(rt){if(rt.l)throw new TypeError("Generator is already running");rt.l=!0}ko.prototype.o=function(rt){this.h=rt};function rs(rt,yt){rt.j={U:yt,V:!0},rt.g=rt.m||rt.s}ko.prototype.return=function(rt){this.j={return:rt},this.g=this.s};function qn(rt,yt,wt){return rt.g=wt,{value:yt}}function bu(rt){this.g=new ko,this.h=rt}function cu(rt,yt){Vo(rt.g);var wt=rt.g.i;return wt?Us(rt,"return"in wt?wt.return:function(tt){return{value:tt,done:!0}},yt,rt.g.return):(rt.g.return(yt),qo(rt))}function Us(rt,yt,wt,tt){try{var mt=yt.call(rt.g.i,wt);if(!(mt instanceof Object))throw new TypeError("Iterator result "+mt+" is not an object");if(!mt.done)return rt.g.l=!1,mt;var St=mt.value}catch(Zt){return rt.g.i=null,rs(rt.g,Zt),qo(rt)}return rt.g.i=null,tt.call(rt.g,St),qo(rt)}function qo(rt){for(;rt.g.g;)try{var yt=rt.h(rt.g);if(yt)return rt.g.l=!1,{value:yt.value,done:!1}}catch(wt){rt.g.h=void 0,rs(rt.g,wt)}if(rt.g.l=!1,rt.g.j){if(yt=rt.g.j,rt.g.j=null,yt.V)throw yt.U;return{value:yt.return,done:!0}}return{value:void 0,done:!0}}function wp(rt){this.next=function(yt){return Vo(rt.g),rt.g.i?yt=Us(rt,rt.g.i.next,yt,rt.g.o):(rt.g.o(yt),yt=qo(rt)),yt},this.throw=function(yt){return Vo(rt.g),rt.g.i?yt=Us(rt,rt.g.i.throw,yt,rt.g.o):(rs(rt.g,yt),yt=qo(rt)),yt},this.return=function(yt){return cu(rt,yt)},this[Symbol.iterator]=function(){return this}}function vs(rt){function yt(tt){return rt.next(tt)}function wt(tt){return rt.throw(tt)}return new o(function(tt,mt){function St(Zt){Zt.done?tt(Zt.value):o.resolve(Zt.value).then(yt,wt).then(St,mt)}St(rt.next())})}function Hr(rt){return vs(new wp(new bu(rt)))}en("Promise",function(rt){function yt(Zt){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Qt=this.j();try{Zt(Qt.resolve,Qt.reject)}catch(un){Qt.reject(un)}}function wt(){this.g=null}function tt(Zt){return Zt instanceof yt?Zt:new yt(function(Qt){Qt(Zt)})}if(rt)return rt;wt.prototype.h=function(Zt){if(this.g==null){this.g=[];var Qt=this;this.i(function(){Qt.l()})}this.g.push(Zt)};var mt=Gt.setTimeout;wt.prototype.i=function(Zt){mt(Zt,0)},wt.prototype.l=function(){for(;this.g&&this.g.length;){var Zt=this.g;this.g=[];for(var Qt=0;Qt<Zt.length;++Qt){var un=Zt[Qt];Zt[Qt]=null;try{un()}catch(mn){this.j(mn)}}}this.g=null},wt.prototype.j=function(Zt){this.i(function(){throw Zt})},yt.prototype.j=function(){function Zt(mn){return function(Ln){un||(un=!0,mn.call(Qt,Ln))}}var Qt=this,un=!1;return{resolve:Zt(this.C),reject:Zt(this.l)}},yt.prototype.C=function(Zt){if(Zt===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Zt instanceof yt)this.F(Zt);else{e:switch(typeof Zt){case"object":var Qt=Zt!=null;break e;case"function":Qt=!0;break e;default:Qt=!1}Qt?this.v(Zt):this.m(Zt)}},yt.prototype.v=function(Zt){var Qt=void 0;try{Qt=Zt.then}catch(un){this.l(un);return}typeof Qt=="function"?this.G(Qt,Zt):this.m(Zt)},yt.prototype.l=function(Zt){this.s(2,Zt)},yt.prototype.m=function(Zt){this.s(1,Zt)},yt.prototype.s=function(Zt,Qt){if(this.h!=0)throw Error("Cannot settle("+Zt+", "+Qt+"): Promise already settled in state"+this.h);this.h=Zt,this.i=Qt,this.h===2&&this.D(),this.A()},yt.prototype.D=function(){var Zt=this;mt(function(){if(Zt.B()){var Qt=Gt.console;typeof Qt<"u"&&Qt.error(Zt.i)}},1)},yt.prototype.B=function(){if(this.o)return!1;var Zt=Gt.CustomEvent,Qt=Gt.Event,un=Gt.dispatchEvent;return typeof un>"u"?!0:(typeof Zt=="function"?Zt=new Zt("unhandledrejection",{cancelable:!0}):typeof Qt=="function"?Zt=new Qt("unhandledrejection",{cancelable:!0}):(Zt=Gt.document.createEvent("CustomEvent"),Zt.initCustomEvent("unhandledrejection",!1,!0,Zt)),Zt.promise=this,Zt.reason=this.i,un(Zt))},yt.prototype.A=function(){if(this.g!=null){for(var Zt=0;Zt<this.g.length;++Zt)St.h(this.g[Zt]);this.g=null}};var St=new wt;return yt.prototype.F=function(Zt){var Qt=this.j();Zt.J(Qt.resolve,Qt.reject)},yt.prototype.G=function(Zt,Qt){var un=this.j();try{Zt.call(Qt,un.resolve,un.reject)}catch(mn){un.reject(mn)}},yt.prototype.then=function(Zt,Qt){function un(tr,nr){return typeof tr=="function"?function(Cr){try{mn(tr(Cr))}catch(Gr){Ln(Gr)}}:nr}var mn,Ln,Kn=new yt(function(tr,nr){mn=tr,Ln=nr});return this.J(un(Zt,mn),un(Qt,Ln)),Kn},yt.prototype.catch=function(Zt){return this.then(void 0,Zt)},yt.prototype.J=function(Zt,Qt){function un(){switch(mn.h){case 1:Zt(mn.i);break;case 2:Qt(mn.i);break;default:throw Error("Unexpected state: "+mn.h)}}var mn=this;this.g==null?St.h(un):this.g.push(un),this.o=!0},yt.resolve=tt,yt.reject=function(Zt){return new yt(function(Qt,un){un(Zt)})},yt.race=function(Zt){return new yt(function(Qt,un){for(var mn=ln(Zt),Ln=mn.next();!Ln.done;Ln=mn.next())tt(Ln.value).J(Qt,un)})},yt.all=function(Zt){var Qt=ln(Zt),un=Qt.next();return un.done?tt([]):new yt(function(mn,Ln){function Kn(Cr){return function(Gr){tr[Cr]=Gr,nr--,nr==0&&mn(tr)}}var tr=[],nr=0;do tr.push(void 0),nr++,tt(un.value).J(Kn(tr.length-1),Ln),un=Qt.next();while(!un.done)})},yt});function Su(rt,yt){rt instanceof String&&(rt+="");var wt=0,tt=!1,mt={next:function(){if(!tt&&wt<rt.length){var St=wt++;return{value:yt(St,rt[St]),done:!1}}return tt=!0,{done:!0,value:void 0}}};return mt[Symbol.iterator]=function(){return mt},mt}var Op=typeof Object.assign=="function"?Object.assign:function(rt,yt){for(var wt=1;wt<arguments.length;wt++){var tt=arguments[wt];if(tt)for(var mt in tt)Object.prototype.hasOwnProperty.call(tt,mt)&&(rt[mt]=tt[mt])}return rt};en("Object.assign",function(rt){return rt||Op}),en("Object.is",function(rt){return rt||function(yt,wt){return yt===wt?yt!==0||1/yt===1/wt:yt!==yt&&wt!==wt}}),en("Array.prototype.includes",function(rt){return rt||function(yt,wt){var tt=this;tt instanceof String&&(tt=String(tt));var mt=tt.length;for(wt=wt||0,0>wt&&(wt=Math.max(wt+mt,0));wt<mt;wt++){var St=tt[wt];if(St===yt||Object.is(St,yt))return!0}return!1}}),en("String.prototype.includes",function(rt){return rt||function(yt,wt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(yt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(yt,wt||0)!==-1}}),en("Array.prototype.keys",function(rt){return rt||function(){return Su(this,function(yt){return yt})}});var Hs=this||self;function Oo(rt,yt){rt=rt.split(".");var wt=Hs;rt[0]in wt||typeof wt.execScript>"u"||wt.execScript("var "+rt[0]);for(var tt;rt.length&&(tt=rt.shift());)rt.length||yt===void 0?wt[tt]&&wt[tt]!==Object.prototype[tt]?wt=wt[tt]:wt=wt[tt]={}:wt[tt]=yt}function $s(rt){Hs.setTimeout(function(){throw rt},0)}function tu(rt){$s(rt)}function ku(rt,yt){tu(Error("Invalid wire type: "+rt+" (at position "+yt+")"))}function np(){tu(Error("Failed to read varint, encoding is invalid."))}function ju(rt,yt){return yt=String.fromCharCode.apply(null,yt),rt==null?yt:rt+yt}var sp,lu=typeof TextDecoder<"u",Eu,fp=typeof TextEncoder<"u";function rp(rt){if(fp)rt=(Eu||(Eu=new TextEncoder)).encode(rt);else{var yt=void 0;yt=yt===void 0?!1:yt;for(var wt=0,tt=new Uint8Array(3*rt.length),mt=0;mt<rt.length;mt++){var St=rt.charCodeAt(mt);if(128>St)tt[wt++]=St;else{if(2048>St)tt[wt++]=St>>6|192;else{if(55296<=St&&57343>=St){if(56319>=St&&mt<rt.length){var Zt=rt.charCodeAt(++mt);if(56320<=Zt&&57343>=Zt){St=1024*(St-55296)+Zt-56320+65536,tt[wt++]=St>>18|240,tt[wt++]=St>>12&63|128,tt[wt++]=St>>6&63|128,tt[wt++]=St&63|128;continue}else mt--}if(yt)throw Error("Found an unpaired surrogate");St=65533}tt[wt++]=St>>12|224,tt[wt++]=St>>6&63|128}tt[wt++]=St&63|128}}rt=tt.subarray(0,wt)}return rt}var Ll={},Zl=null;function Uu(rt){var yt;yt===void 0&&(yt=0),Qs(),yt=Ll[yt];for(var wt=Array(Math.floor(rt.length/3)),tt=yt[64]||"",mt=0,St=0;mt<rt.length-2;mt+=3){var Zt=rt[mt],Qt=rt[mt+1],un=rt[mt+2],mn=yt[Zt>>2];Zt=yt[(Zt&3)<<4|Qt>>4],Qt=yt[(Qt&15)<<2|un>>6],un=yt[un&63],wt[St++]=mn+Zt+Qt+un}switch(mn=0,un=tt,rt.length-mt){case 2:mn=rt[mt+1],un=yt[(mn&15)<<2]||tt;case 1:rt=rt[mt],wt[St]=yt[rt>>2]+yt[(rt&3)<<4|mn>>4]+un+tt}return wt.join("")}function Nu(rt){var yt=rt.length,wt=3*yt/4;wt%3?wt=Math.floor(wt):"=.".indexOf(rt[yt-1])!=-1&&(wt="=.".indexOf(rt[yt-2])!=-1?wt-2:wt-1);var tt=new Uint8Array(wt),mt=0;return Ss(rt,function(St){tt[mt++]=St}),tt.subarray(0,mt)}function Ss(rt,yt){function wt(un){for(;tt<rt.length;){var mn=rt.charAt(tt++),Ln=Zl[mn];if(Ln!=null)return Ln;if(!/^[\s\xa0]*$/.test(mn))throw Error("Unknown base64 encoding at char: "+mn)}return un}Qs();for(var tt=0;;){var mt=wt(-1),St=wt(0),Zt=wt(64),Qt=wt(64);if(Qt===64&&mt===-1)break;yt(mt<<2|St>>4),Zt!=64&&(yt(St<<4&240|Zt>>2),Qt!=64&&yt(Zt<<6&192|Qt))}}function Qs(){if(!Zl){Zl={};for(var rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),yt=["+/=","+/","-_=","-_.","-_"],wt=0;5>wt;wt++){var tt=rt.concat(yt[wt].split(""));Ll[wt]=tt;for(var mt=0;mt<tt.length;mt++){var St=tt[mt];Zl[St]===void 0&&(Zl[St]=mt)}}}}var Gl=typeof Uint8Array=="function",ss;function Ds(rt){if(this.g=rt,rt!==null&&rt.length===0)throw Error("ByteString should be constructed with non-empty values")}Ds.prototype.toJSON=function(){if(this.g==null)var rt="";else rt=this.g,rt=this.g=rt==null||typeof rt=="string"?rt:Gl&&rt instanceof Uint8Array?Uu(rt):null;return rt};var nu=typeof Uint8Array.prototype.slice=="function";function Rl(rt,yt,wt){return yt===wt?ss||(ss=new Uint8Array(0)):nu?rt.slice(yt,wt):new Uint8Array(rt.subarray(yt,wt))}var Qo=0,Ls=0;function ba(rt){if(rt.constructor===Uint8Array)return rt;if(rt.constructor===ArrayBuffer)return new Uint8Array(rt);if(rt.constructor===Array)return new Uint8Array(rt);if(rt.constructor===String)return Nu(rt);if(rt.constructor===Ds){if(rt.g==null)var yt=ss||(ss=new Uint8Array(0));else{yt=Uint8Array;var wt=rt.g;wt=wt==null||Gl&&wt!=null&&wt instanceof Uint8Array?wt:typeof wt=="string"?Nu(wt):null,rt=rt.g=wt,yt=new yt(rt)}return yt}if(rt instanceof Uint8Array)return new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Po(rt,yt){yt=yt===void 0?{}:yt,yt=yt.u===void 0?!1:yt.u,this.h=null,this.g=this.i=this.m=0,this.l=!1,this.u=yt,rt&&Ks(this,rt)}function Ks(rt,yt){rt.h=ba(yt),rt.m=0,rt.i=rt.h.length,rt.g=rt.m}Po.prototype.reset=function(){this.g=this.m};function Bo(rt){for(var yt=128,wt=0,tt=0,mt=0;4>mt&&128<=yt;mt++)yt=rt.h[rt.g++],wt|=(yt&127)<<7*mt;if(128<=yt&&(yt=rt.h[rt.g++],wt|=(yt&127)<<28,tt|=(yt&127)>>4),128<=yt)for(mt=0;5>mt&&128<=yt;mt++)yt=rt.h[rt.g++],tt|=(yt&127)<<7*mt+3;if(128>yt)return rt=wt>>>0,yt=tt>>>0,(tt=yt&2147483648)&&(rt=~rt+1>>>0,yt=~yt>>>0,rt==0&&(yt=yt+1>>>0)),rt=4294967296*yt+(rt>>>0),tt?-rt:rt;rt.l=!0,np()}function Os(rt){rt.g>rt.i&&(rt.l=!0,tu(Error("Tried to read past the end of the data "+rt.g+" > "+rt.i)))}Po.prototype.j=function(){var rt=this.h,yt=rt[this.g],wt=yt&127;return 128>yt?(this.g+=1,Os(this),wt):(yt=rt[this.g+1],wt|=(yt&127)<<7,128>yt?(this.g+=2,Os(this),wt):(yt=rt[this.g+2],wt|=(yt&127)<<14,128>yt?(this.g+=3,Os(this),wt):(yt=rt[this.g+3],wt|=(yt&127)<<21,128>yt?(this.g+=4,Os(this),wt):(yt=rt[this.g+4],wt|=(yt&15)<<28,128>yt?(this.g+=5,Os(this),wt>>>0):(this.g+=5,128<=rt[this.g++]&&128<=rt[this.g++]&&128<=rt[this.g++]&&128<=rt[this.g++]&&128<=rt[this.g++]?(this.l=!0,np(),wt):(Os(this),wt))))))},Po.prototype.o=function(){var rt=this.h[this.g],yt=this.h[this.g+1],wt=this.h[this.g+2],tt=this.h[this.g+3];return this.g+=4,Os(this),wt=(rt<<0|yt<<8|wt<<16|tt<<24)>>>0,rt=2*(wt>>31)+1,yt=wt>>>23&255,wt&=8388607,yt==255?wt?NaN:1/0*rt:yt==0?rt*Math.pow(2,-149)*wt:rt*Math.pow(2,yt-150)*(wt+Math.pow(2,23))};var _s=[];function Dl(){this.g=new Uint8Array(64),this.h=0}function Ws(rt,yt){if(!(rt.h+1<rt.g.length)){var wt=rt.g;rt.g=new Uint8Array(Math.ceil(1+2*rt.g.length)),rt.g.set(wt)}rt.g[rt.h++]=yt}Dl.prototype.length=function(){return this.h},Dl.prototype.end=function(){var rt=this.g,yt=this.h;return this.h=0,Rl(rt,0,yt)};function Ko(rt,yt){for(;127<yt;)Ws(rt,yt&127|128),yt>>>=7;Ws(rt,yt)}function Vl(rt){var yt={},wt=yt.N===void 0?!1:yt.N;this.m={u:yt.u===void 0?!1:yt.u},this.N=wt,yt=this.m,_s.length?(wt=_s.pop(),yt&&(wt.u=yt.u),rt&&Ks(wt,rt),rt=wt):rt=new Po(rt,yt),this.g=rt,this.l=this.g.g,this.h=this.i=-1,this.j=!1}Vl.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function Nl(rt){var yt=rt.g;if((yt=yt.g==yt.i)||(yt=rt.j)||(yt=rt.g,yt=yt.l||0>yt.g||yt.g>yt.i),yt)return!1;rt.l=rt.g.g;var wt=rt.g.j();return yt=wt>>>3,wt&=7,0<=wt&&5>=wt?(rt.i=yt,rt.h=wt,!0):(rt.j=!0,ku(wt,rt.l),!1)}function zs(rt){switch(rt.h){case 0:if(rt.h!=0)zs(rt);else e:{rt=rt.g;for(var yt=rt.g,wt=0;10>wt;wt++){if(!(rt.h[yt]&128)){rt.g=yt+1,Os(rt);break e}yt++}rt.l=!0,np()}break;case 1:rt=rt.g,rt.g+=8,Os(rt);break;case 2:rt.h!=2?zs(rt):(yt=rt.g.j(),rt=rt.g,rt.g+=yt,Os(rt));break;case 5:rt=rt.g,rt.g+=4,Os(rt);break;case 3:yt=rt.i;do{if(!Nl(rt)){rt.j=!0,tu(Error("Unmatched start-group tag: stream EOF"));break}if(rt.h==4){rt.i!=yt&&(rt.j=!0,tu(Error("Unmatched end-group tag")));break}zs(rt)}while(1);break;default:rt.j=!0,ku(rt.h,rt.l)}}function Wu(rt,yt,wt){rt.N||(rt=Rl(rt.g.h,wt,rt.g.g),(wt=yt.o)?wt.push(rt):yt.o=[rt])}function ru(rt,yt,wt){var tt=rt.g.i,mt=rt.g.j(),St=rt.g.g+mt;if(rt.g.i=St,wt(yt,rt),wt=St-rt.g.g,wt!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(mt+" bytes, instead read "+(mt-wt)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return rt.g.g=St,rt.g.i=tt,yt}function Wl(rt,yt,wt){var tt=rt.g.j();for(tt=rt.g.g+tt;rt.g.g<tt;)wt.push(yt.call(rt.g))}var iu=[];function Gs(){this.h=[],this.i=0,this.g=new Dl}function qs(rt,yt){yt.length!==0&&(rt.h.push(yt),rt.i+=yt.length)}function ks(rt,yt,wt){Ko(rt.g,8*yt+2),Ko(rt.g,wt.length),qs(rt,rt.g.end()),qs(rt,wt)}var as=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Ml(rt,yt){Object.isFrozen(rt)||(as?rt[as]|=yt:rt.g!==void 0?rt.g|=yt:Object.defineProperties(rt,{g:{value:yt,configurable:!0,writable:!0,enumerable:!1}}))}function ts(rt){if(!rt)return 0;var yt;return as?yt=rt[as]:yt=rt.g,yt??0}function zo(rt){return Array.isArray(rt)&&Ml(rt,1),rt}function uu(rt){if(!Array.isArray(rt))throw Error("cannot mark non-array as immutable");Ml(rt,2)}function Es(rt){return rt!==null&&typeof rt=="object"&&rt.constructor===Object}function wo(rt){switch(typeof rt){case"number":return isFinite(rt)?rt:String(rt);case"object":return Gl&&rt!=null&&rt instanceof Uint8Array?Uu(rt):rt;default:return rt}}function ro(rt,yt){if(rt!=null)return Array.isArray(rt)||Es(rt)?cs(rt,yt):yt(rt)}function cs(rt,yt){if(Array.isArray(rt)){for(var wt=Array(rt.length),tt=0;tt<rt.length;tt++)wt[tt]=ro(rt[tt],yt);return ts(rt)&1&&zo(wt),wt}wt={};for(tt in rt)wt[tt]=ro(rt[tt],yt);return wt}var na;function ns(rt,yt,wt){var tt=na;na=null,rt||(rt=tt),tt=this.constructor.ba,rt||(rt=tt?[tt]:[]),this.j=(tt?0:-1)-(this.constructor.$||0),this.m=this.g=null,this.h=rt;e:{if(tt=this.h.length,rt=tt-1,tt&&(tt=this.h[rt],Es(tt))){this.l=rt-this.j,this.i=tt;break e}yt!==void 0&&-1<yt?(this.l=Math.max(yt,rt+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(wt)for(yt=0;yt<wt.length;yt++)rt=wt[yt],rt<this.l?(rt+=this.j,(tt=this.h[rt])?zo(tt):this.h[rt]=ls):(ur(this),(tt=this.i[rt])?zo(tt):this.i[rt]=ls)}var ls=Object.freeze(zo([]));function ur(rt){var yt=rt.l+rt.j;rt.h[yt]||(rt.i=rt.h[yt]={})}function mr(rt,yt,wt){return yt===-1?null:wt!==void 0&&wt||yt>=rt.l?rt.i?rt.i[yt]:void 0:rt.h[yt+rt.j]}function xr(rt,yt,wt){wt=wt===void 0?!0:wt;var tt=tt===void 0?!1:tt,mt=mr(rt,yt,tt);return mt==null&&(mt=ls),mt===ls?(mt=zo([]),fo(rt,yt,mt,tt)):wt&&Array.isArray(mt)&&ts(mt)&2&&(mt=mt.slice(),fo(rt,yt,mt,tt)),mt}function Jo(rt){var yt=xr(rt,3,!1);if(rt.m||(rt.m={}),!rt.m[3]){for(var wt=0;wt<yt.length;wt++)yt[wt]=+yt[wt];rt.m[3]=!0}return yt}function gs(rt,yt,wt){return rt=mr(rt,yt),rt??wt}function hs(rt,yt,wt){return rt=mr(rt,yt),rt=rt==null?rt:+rt,rt??(wt===void 0?0:wt)}function fo(rt,yt,wt,tt){tt!==void 0&&tt||yt>=rt.l?(ur(rt),rt.i[yt]=wt):rt.h[yt+rt.j]=wt}function Cs(rt,yt,wt){if(wt===-1)return null;rt.g||(rt.g={});var tt=rt.g[wt];if(tt)return tt;var mt=mr(rt,wt,!1);return mt==null?tt:(yt=new yt(mt),rt.g[wt]=yt)}function xa(rt,yt,wt){rt.g||(rt.g={});var tt=rt.g[wt];if(!tt){var mt=xr(rt,wt,!1);tt=[];for(var St=Array.isArray(mt)?!!(ts(mt)&2):!1,Zt=0;Zt<mt.length;Zt++)tt[Zt]=new yt(mt[Zt]),St&&uu(tt[Zt].h);St&&(uu(tt),Object.freeze(tt)),rt.g[wt]=tt}return tt}function Ul(rt,yt,wt,tt,mt){var St=xa(rt,tt,yt);wt=wt||new tt,rt=xr(rt,yt),mt!=null?(St.splice(mt,0,wt),rt.splice(mt,0,Hl(wt))):(St.push(wt),rt.push(Hl(wt)))}ns.prototype.toJSON=function(){var rt=Hl(this);return cs(rt,wo)};function Hl(rt){if(rt.g)for(var yt in rt.g){var wt=rt.g[yt];if(Array.isArray(wt))for(var tt=0;tt<wt.length;tt++)wt[tt]&&Hl(wt[tt]);else wt&&Hl(wt)}return rt.h}ns.prototype.toString=function(){return Hl(this).toString()};function du(rt,yt){if(rt=rt.o){qs(yt,yt.g.end());for(var wt=0;wt<rt.length;wt++)qs(yt,rt[wt])}}function Cu(rt){var yt=rt[0];switch(rt.length){case 2:var wt=rt[1];return function(un,mn,Ln){return yt(un,mn,Ln,wt)};case 3:var tt=rt[1],mt=rt[2];return function(un,mn,Ln){return yt(un,mn,Ln,tt,mt)};case 4:var St=rt[1],Zt=rt[2],Qt=rt[3];return function(un,mn,Ln){return yt(un,mn,Ln,St,Zt,Qt)};default:throw Error("unsupported number of parameters, expected [2-4], got "+rt.length)}}function ga(rt,yt,wt){for(;Nl(yt)&&yt.h!=4;){var tt=yt.i,mt=wt[tt];if(mt){if(Array.isArray(mt)&&(mt=wt[tt]=Cu(mt)),!mt(yt,rt,tt)){tt=yt,mt=rt;var St=tt.l;zs(tt),Wu(tt,mt,St)}}else tt=yt,mt=rt,St=tt.l,zs(tt),Wu(tt,mt,St)}return rt}function Yl(rt,yt){var wt=new Gs;if(yt(rt,wt),rt=wt.i+wt.g.length(),rt===0)wt=new Uint8Array(0);else{rt=new Uint8Array(rt);for(var tt=wt.h,mt=tt.length,St=yt=0;St<mt;St++){var Zt=tt[St];Zt.length!==0&&(rt.set(Zt,yt),yt+=Zt.length)}tt=wt.g,mt=tt.h,mt!==0&&(rt.set(tt.g.subarray(0,mt),yt),tt.h=0),wt.h=[rt],wt=rt}return wt}function Ap(rt,yt,wt){if(iu.length){var tt=iu.pop();rt&&(Ks(tt.g,rt),tt.i=-1,tt.h=-1),rt=tt}else rt=new Vl(rt);try{return wt(new yt,rt)}finally{yt=rt.g,yt.h=null,yt.m=0,yt.i=0,yt.g=0,yt.l=!1,yt.u=!1,rt.i=-1,rt.h=-1,rt.j=!1,100>iu.length&&iu.push(rt)}}function Bl(rt,yt,wt){if(yt=mr(yt,wt),yt!=null){Ko(rt.g,8*wt+5),rt=rt.g;var tt=yt;tt=(wt=0>tt?1:0)?-tt:tt,tt===0?0<1/tt?Qo=Ls=0:(Ls=0,Qo=2147483648):isNaN(tt)?(Ls=0,Qo=2147483647):34028234663852886e22<tt?(Ls=0,Qo=(wt<<31|2139095040)>>>0):11754943508222875e-54>tt?(tt=Math.round(tt/Math.pow(2,-149)),Ls=0,Qo=(wt<<31|tt)>>>0):(yt=Math.floor(Math.log(tt)/Math.LN2),tt*=Math.pow(2,-yt),tt=Math.round(8388608*tt),16777216<=tt&&++yt,Ls=0,Qo=(wt<<31|yt+127<<23|tt&8388607)>>>0),wt=Qo,Ws(rt,wt>>>0&255),Ws(rt,wt>>>8&255),Ws(rt,wt>>>16&255),Ws(rt,wt>>>24&255)}}function $a(rt,yt,wt){return rt.h!==5?!1:(fo(yt,wt,rt.g.o()),!0)}function Ou(rt,yt,wt){return rt.h!==5&&rt.h!==2?!1:(yt=xr(yt,wt),rt.h==2?Wl(rt,Po.prototype.o,yt):yt.push(rt.g.o()),!0)}function Hu(rt,yt,wt){return rt.h!==0?!1:(fo(yt,wt,Bo(rt.g)),!0)}function Il(rt,yt,wt){return rt.h!==0?!1:(fo(yt,wt,rt.g.j()),!0)}function hp(rt,yt,wt){if(rt.h!==2)return!1;var tt=rt.g.j();rt=rt.g;var mt=rt.g;rt.g+=tt,Os(rt),rt=rt.h;var St;if(lu)(St=sp)||(St=sp=new TextDecoder("utf-8",{fatal:!1})),St=St.decode(rt.subarray(mt,mt+tt));else{tt=mt+tt;for(var Zt=[],Qt=null,un,mn,Ln;mt<tt;)un=rt[mt++],128>un?Zt.push(un):224>un?mt>=tt?Zt.push(65533):(mn=rt[mt++],194>un||(mn&192)!==128?(mt--,Zt.push(65533)):Zt.push((un&31)<<6|mn&63)):240>un?mt>=tt-1?Zt.push(65533):(mn=rt[mt++],(mn&192)!==128||un===224&&160>mn||un===237&&160<=mn||((St=rt[mt++])&192)!==128?(mt--,Zt.push(65533)):Zt.push((un&15)<<12|(mn&63)<<6|St&63)):244>=un?mt>=tt-2?Zt.push(65533):(mn=rt[mt++],(mn&192)!==128||(un<<28)+(mn-144)>>30||((St=rt[mt++])&192)!==128||((Ln=rt[mt++])&192)!==128?(mt--,Zt.push(65533)):(un=(un&7)<<18|(mn&63)<<12|(St&63)<<6|Ln&63,un-=65536,Zt.push((un>>10&1023)+55296,(un&1023)+56320))):Zt.push(65533),8192<=Zt.length&&(Qt=ju(Qt,Zt),Zt.length=0);St=ju(Qt,Zt)}return fo(yt,wt,St),!0}function Kl(rt,yt,wt,tt,mt){if(rt.h!==2)return!1;rt=ru(rt,new tt,mt);var St=St===void 0?!1:St;return yt.g||(yt.g={}),tt=rt&&Hl(rt),yt.g[wt]=rt,fo(yt,wt,tt,St),!0}function Au(rt,yt,wt,tt,mt){return rt.h!==2?!1:(rt=ru(rt,new tt,mt),Ul(yt,wt,rt,tt,void 0),!0)}function $u(rt,yt,wt){return rt.h!==0&&rt.h!==2?!1:(yt=xr(yt,wt),rt.h==2?Wl(rt,Po.prototype.j,yt):yt.push(rt.g.j()),!0)}function Ep(rt,yt,wt){return rt.h!==0?!1:(fo(yt,wt,Bo(rt.g)),!0)}function ou(rt){ns.call(this,rt,-1,Xp)}var _u;Ar(ou,ns),ou.prototype.getRows=function(){return mr(this,1)},ou.prototype.getCols=function(){return mr(this,2)},ou.prototype.getPackedDataList=function(){return Jo(this)},ou.prototype.getLayout=function(){return gs(this,4,0)};function Fp(rt,yt){return ga(rt,yt,_u||(_u={1:Il,2:Il,3:Ou,4:Ep}))}var Xp=[3];function qu(rt){ns.call(this,rt)}var ip;Ar(qu,ns);function At(rt,yt){var wt=mr(rt,1);if(wt!=null&&wt!=null){Ko(yt.g,8);var tt=yt.g;if(0<=wt)Ko(tt,wt);else{for(var mt=0;9>mt;mt++)Ws(tt,wt&127|128),wt>>=7;Ws(tt,1)}}Bl(yt,rt,2),tt=mr(rt,3),tt!=null&&ks(yt,3,rp(tt)),tt=mr(rt,4),tt!=null&&ks(yt,4,rp(tt)),du(rt,yt)}function Dt(rt,yt){return ga(rt,yt,ip||(ip={1:Il,2:$a,3:hp,4:hp}))}function jt(rt){ns.call(this,rt,-1,Sr)}var Zn;Ar(jt,ns),jt.prototype.addClassification=function(rt,yt){return Ul(this,1,rt,qu,yt),this};function _n(rt,yt){return ga(rt,yt,Zn||(Zn={1:[Au,qu,Dt]}))}var Sr=[1];function Qn(rt){ns.call(this,rt)}var hr;Ar(Qn,ns);function Nr(rt,yt){Bl(yt,rt,1),Bl(yt,rt,2),Bl(yt,rt,3),Bl(yt,rt,4),Bl(yt,rt,5),du(rt,yt)}function ao(rt,yt){return ga(rt,yt,hr||(hr={1:$a,2:$a,3:$a,4:$a,5:$a}))}function Wo(rt){ns.call(this,rt,-1,Lo)}var Ao;Ar(Wo,ns);function es(rt,yt){return ga(rt,yt,Ao||(Ao={1:[Au,Qn,ao]}))}var Lo=[1];function go(rt){ns.call(this,rt)}var No;Ar(go,ns);function $o(rt,yt){Bl(yt,rt,1),Bl(yt,rt,2),Bl(yt,rt,3),Bl(yt,rt,4),Bl(yt,rt,5);var wt=mr(rt,6);if(wt!=null&&wt!=null){Ko(yt.g,48);var tt=yt.g,mt=wt;wt=0>mt,mt=Math.abs(mt);var St=mt>>>0;for(mt=Math.floor((mt-St)/4294967296),mt>>>=0,wt&&(mt=~mt>>>0,St=(~St>>>0)+1,4294967295<St&&(St=0,mt++,4294967295<mt&&(mt=0))),Qo=St,Ls=mt,wt=Qo,St=Ls;0<St||127<wt;)Ws(tt,wt&127|128),wt=(wt>>>7|St<<25)>>>0,St>>>=7;Ws(tt,wt)}du(rt,yt)}function ps(rt,yt){return ga(rt,yt,No||(No={1:$a,2:$a,3:$a,4:$a,5:$a,6:Hu}))}function Ts(rt){ns.call(this,rt,-1,xt)}var As;Ar(Ts,ns),Ts.prototype.getVertexType=function(){return gs(this,1,0)},Ts.prototype.getPrimitiveType=function(){return gs(this,2,0)},Ts.prototype.getVertexBufferList=function(){return Jo(this)},Ts.prototype.getIndexBufferList=function(){return xr(this,4)};function _a(rt,yt){return ga(rt,yt,As||(As={1:Ep,2:Ep,3:Ou,4:$u}))}var xt=[3,4];function Vt(rt){ns.call(this,rt)}var Wt;Ar(Vt,ns),Vt.prototype.getMesh=function(){return Cs(this,Ts,1)},Vt.prototype.getPoseTransformMatrix=function(){return Cs(this,ou,2)};function gn(rt,yt){return ga(rt,yt,Wt||(Wt={1:[Kl,Ts,_a],2:[Kl,ou,Fp]}))}var Nn=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],er=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Pn=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],ar=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Rr=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],pt=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Mt=[].concat(En(Nn),En(er),En(Pn),En(ar),En(Rr),En(pt));function Ht(rt,yt,wt){if(wt=rt.createShader(wt===0?rt.VERTEX_SHADER:rt.FRAGMENT_SHADER),rt.shaderSource(wt,yt),rt.compileShader(wt),!rt.getShaderParameter(wt,rt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+rt.getShaderInfoLog(wt));return wt}function cn(rt){return xa(rt,qu,1).map(function(yt){return{index:gs(yt,1,0),score:hs(yt,2),label:mr(yt,3)!=null?gs(yt,3,""):void 0,displayName:mr(yt,4)!=null?gs(yt,4,""):void 0}})}function xn(rt){return{x:hs(rt,1),y:hs(rt,2),z:hs(rt,3),visibility:mr(rt,4)!=null?hs(rt,4):void 0}}function Xn(rt){return xa(Ap(rt,Wo,es),Qn,1).map(xn)}function Gn(rt,yt){this.h=rt,this.g=yt,this.l=0}function dr(rt,yt,wt){return sr(rt,yt),typeof rt.g.canvas.transferToImageBitmap=="function"?o.resolve(rt.g.canvas.transferToImageBitmap()):wt?o.resolve(rt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(rt.g.canvas):(rt.i===void 0&&(rt.i=document.createElement("canvas")),new o(function(tt){rt.i.height=rt.g.canvas.height,rt.i.width=rt.g.canvas.width,rt.i.getContext("2d",{}).drawImage(rt.g.canvas,0,0,rt.g.canvas.width,rt.g.canvas.height),tt(rt.i)}))}function sr(rt,yt){var wt=rt.g;if(rt.m===void 0){var tt=Ht(wt,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),mt=Ht(wt,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),St=wt.createProgram();if(wt.attachShader(St,tt),wt.attachShader(St,mt),wt.linkProgram(St),!wt.getProgramParameter(St,wt.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+wt.getProgramInfoLog(St));tt=rt.m=St,wt.useProgram(tt),mt=wt.getUniformLocation(tt,"sampler0"),rt.j={I:wt.getAttribLocation(tt,"aVertex"),H:wt.getAttribLocation(tt,"aTex"),ca:mt},rt.s=wt.createBuffer(),wt.bindBuffer(wt.ARRAY_BUFFER,rt.s),wt.enableVertexAttribArray(rt.j.I),wt.vertexAttribPointer(rt.j.I,2,wt.FLOAT,!1,0,0),wt.bufferData(wt.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),wt.STATIC_DRAW),wt.bindBuffer(wt.ARRAY_BUFFER,null),rt.o=wt.createBuffer(),wt.bindBuffer(wt.ARRAY_BUFFER,rt.o),wt.enableVertexAttribArray(rt.j.H),wt.vertexAttribPointer(rt.j.H,2,wt.FLOAT,!1,0,0),wt.bufferData(wt.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),wt.STATIC_DRAW),wt.bindBuffer(wt.ARRAY_BUFFER,null),wt.uniform1i(mt,0)}tt=rt.j,wt.useProgram(rt.m),wt.canvas.width=yt.width,wt.canvas.height=yt.height,wt.viewport(0,0,yt.width,yt.height),wt.activeTexture(wt.TEXTURE0),rt.h.bindTexture2d(yt.glName),wt.enableVertexAttribArray(tt.I),wt.bindBuffer(wt.ARRAY_BUFFER,rt.s),wt.vertexAttribPointer(tt.I,2,wt.FLOAT,!1,0,0),wt.enableVertexAttribArray(tt.H),wt.bindBuffer(wt.ARRAY_BUFFER,rt.o),wt.vertexAttribPointer(tt.H,2,wt.FLOAT,!1,0,0),wt.bindFramebuffer(wt.DRAW_FRAMEBUFFER?wt.DRAW_FRAMEBUFFER:wt.FRAMEBUFFER,null),wt.clearColor(0,0,0,0),wt.clear(wt.COLOR_BUFFER_BIT),wt.colorMask(!0,!0,!0,!0),wt.drawArrays(wt.TRIANGLE_FAN,0,4),wt.disableVertexAttribArray(tt.I),wt.disableVertexAttribArray(tt.H),wt.bindBuffer(wt.ARRAY_BUFFER,null),rt.h.bindTexture2d(0)}function Fr(rt){this.g=rt}var _r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Mo(rt,yt){return yt+rt}function co(rt,yt){window[rt]=yt}function Lr(rt){var yt=document.createElement("script");return yt.setAttribute("src",rt),yt.setAttribute("crossorigin","anonymous"),new o(function(wt){yt.addEventListener("load",function(){wt()},!1),yt.addEventListener("error",function(){wt()},!1),document.body.appendChild(yt)})}function _i(){return Hr(function(rt){switch(rt.g){case 1:return rt.m=2,qn(rt,WebAssembly.instantiate(_r),4);case 4:rt.g=3,rt.m=0;break;case 2:return rt.m=0,rt.j=null,rt.return(!1);case 3:return rt.return(!0)}})}function uo(rt){if(this.g=rt,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=o.resolve(),this.P="",this.B={},this.locateFile=rt&&rt.locateFile||Mo,typeof window=="object")var yt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")yt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=yt,rt.options){yt=ln(Object.keys(rt.options));for(var wt=yt.next();!wt.done;wt=yt.next()){wt=wt.value;var tt=rt.options[wt].default;tt!==void 0&&(this.j[wt]=typeof tt=="function"?tt():tt)}}}at=uo.prototype,at.close=function(){return this.i&&this.i.delete(),o.resolve()};function Co(rt){var yt,wt,tt,mt,St,Zt,Qt,un,mn,Ln,Kn;return Hr(function(tr){switch(tr.g){case 1:return rt.R?(yt=rt.g.files===void 0?[]:typeof rt.g.files=="function"?rt.g.files(rt.j):rt.g.files,qn(tr,_i(),2)):tr.return();case 2:if(wt=tr.h,typeof window=="object")return co("createMediapipeSolutionsWasm",{locateFile:rt.locateFile}),co("createMediapipeSolutionsPackedAssets",{locateFile:rt.locateFile}),Zt=yt.filter(function(nr){return nr.data!==void 0}),Qt=yt.filter(function(nr){return nr.data===void 0}),un=o.all(Zt.map(function(nr){var Cr=kt(rt,nr.url);if(nr.path!==void 0){var Gr=nr.path;Cr=Cr.then(function(kr){return rt.overrideFile(Gr,kr),o.resolve(kr)})}return Cr})),mn=o.all(Qt.map(function(nr){return nr.simd===void 0||nr.simd&&wt||!nr.simd&&!wt?Lr(rt.locateFile(nr.url,rt.S)):o.resolve()})).then(function(){var nr,Cr,Gr;return Hr(function(kr){if(kr.g==1)return nr=window.createMediapipeSolutionsWasm,Cr=window.createMediapipeSolutionsPackedAssets,Gr=rt,qn(kr,nr(Cr),2);Gr.h=kr.h,kr.g=0})}),Ln=function(){return Hr(function(nr){return rt.g.graph&&rt.g.graph.url?nr=qn(nr,kt(rt,rt.g.graph.url),0):(nr.g=0,nr=void 0),nr})}(),qn(tr,o.all([mn,un,Ln]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return tt=yt.filter(function(nr){return nr.simd===void 0||nr.simd&&wt||!nr.simd&&!wt}).map(function(nr){return rt.locateFile(nr.url,rt.S)}),importScripts.apply(null,En(tt)),mt=rt,qn(tr,createMediapipeSolutionsWasm(Module),6);case 6:mt.h=tr.h,rt.l=new OffscreenCanvas(1,1),rt.h.canvas=rt.l,St=rt.h.GL.createContext(rt.l,{antialias:!1,alpha:!1,aa:typeof WebGL2RenderingContext<"u"?2:1}),rt.h.GL.makeContextCurrent(St),tr.g=4;break;case 7:if(rt.l=document.createElement("canvas"),Kn=rt.l.getContext("webgl2",{}),!Kn&&(Kn=rt.l.getContext("webgl",{}),!Kn))return alert("Failed to create WebGL canvas context when passing video frame."),tr.return();rt.D=Kn,rt.h.canvas=rt.l,rt.h.createContext(rt.l,!0,!0,{});case 4:rt.i=new rt.h.SolutionWasm,rt.R=!1,tr.g=0}})}function Io(rt){var yt,wt,tt,mt,St,Zt,Qt,un;return Hr(function(mn){if(mn.g==1){if(rt.g.graph&&rt.g.graph.url&&rt.P===rt.g.graph.url)return mn.return();if(rt.o=!0,!rt.g.graph||!rt.g.graph.url){mn.g=2;return}return rt.P=rt.g.graph.url,qn(mn,kt(rt,rt.g.graph.url),3)}for(mn.g!=2&&(yt=mn.h,rt.i.loadGraph(yt)),wt=ln(Object.keys(rt.B)),tt=wt.next();!tt.done;tt=wt.next())mt=tt.value,rt.i.overrideFile(mt,rt.B[mt]);if(rt.B={},rt.g.listeners)for(St=ln(rt.g.listeners),Zt=St.next();!Zt.done;Zt=St.next())Qt=Zt.value,wn(rt,Qt);un=rt.j,rt.j={},rt.setOptions(un),mn.g=0})}at.reset=function(){var rt=this;return Hr(function(yt){rt.i&&(rt.i.reset(),rt.m={},rt.s={}),yt.g=0})},at.setOptions=function(rt,yt){var wt=this;if(yt=yt||this.g.options){for(var tt=[],mt=[],St={},Zt=ln(Object.keys(rt)),Qt=Zt.next();!Qt.done;St={K:St.K,L:St.L},Qt=Zt.next()){var un=Qt.value;un in this.j&&this.j[un]===rt[un]||(this.j[un]=rt[un],Qt=yt[un],Qt!==void 0&&(Qt.onChange&&(St.K=Qt.onChange,St.L=rt[un],tt.push(function(mn){return function(){var Ln;return Hr(function(Kn){if(Kn.g==1)return qn(Kn,mn.K(mn.L),2);Ln=Kn.h,Ln===!0&&(wt.o=!0),Kn.g=0})}}(St))),Qt.graphOptionXref&&(un={valueNumber:Qt.type===1?rt[un]:0,valueBoolean:Qt.type===0?rt[un]:!1,valueString:Qt.type===2?rt[un]:""},Qt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Qt.graphOptionXref),un),mt.push(Qt))))}(tt.length!==0||mt.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(mt),this.v=(this.v===void 0?[]:this.v).concat(tt))}};function gt(rt){var yt,wt,tt,mt,St,Zt,Qt;return Hr(function(un){switch(un.g){case 1:if(!rt.o)return un.return();if(!rt.v){un.g=2;break}yt=ln(rt.v),wt=yt.next();case 3:if(wt.done){un.g=5;break}return tt=wt.value,qn(un,tt(),4);case 4:wt=yt.next(),un.g=3;break;case 5:rt.v=void 0;case 2:if(rt.A){for(mt=new rt.h.GraphOptionChangeRequestList,St=ln(rt.A),Zt=St.next();!Zt.done;Zt=St.next())Qt=Zt.value,mt.push_back(Qt);rt.i.changeOptions(mt),mt.delete(),rt.A=void 0}rt.o=!1,un.g=0}})}at.initialize=function(){var rt=this;return Hr(function(yt){return yt.g==1?qn(yt,Co(rt),2):yt.g!=3?qn(yt,Io(rt),3):qn(yt,gt(rt),0)})};function kt(rt,yt){var wt,tt;return Hr(function(mt){return yt in rt.F?mt.return(rt.F[yt]):(wt=rt.locateFile(yt,""),tt=fetch(wt).then(function(St){return St.arrayBuffer()}),rt.F[yt]=tt,mt.return(tt))})}at.overrideFile=function(rt,yt){this.i?this.i.overrideFile(rt,yt):this.B[rt]=yt},at.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},at.send=function(rt,yt){var wt=this,tt,mt,St,Zt,Qt,un,mn,Ln,Kn;return Hr(function(tr){switch(tr.g){case 1:return wt.g.inputs?(tt=1e3*(yt??performance.now()),qn(tr,wt.C,2)):tr.return();case 2:return qn(tr,wt.initialize(),3);case 3:for(mt=new wt.h.PacketDataList,St=ln(Object.keys(rt)),Zt=St.next();!Zt.done;Zt=St.next())if(Qt=Zt.value,un=wt.g.inputs[Qt]){e:{var nr=rt[Qt];switch(un.type){case"video":var Cr=wt.m[un.stream];if(Cr||(Cr=new Gn(wt.h,wt.D),wt.m[un.stream]=Cr),Cr.l===0&&(Cr.l=Cr.h.createTexture()),typeof HTMLVideoElement<"u"&&nr instanceof HTMLVideoElement)var Gr=nr.videoWidth,kr=nr.videoHeight;else typeof HTMLImageElement<"u"&&nr instanceof HTMLImageElement?(Gr=nr.naturalWidth,kr=nr.naturalHeight):(Gr=nr.width,kr=nr.height);kr={glName:Cr.l,width:Gr,height:kr},Gr=Cr.g,Gr.canvas.width=kr.width,Gr.canvas.height=kr.height,Gr.activeTexture(Gr.TEXTURE0),Cr.h.bindTexture2d(Cr.l),Gr.texImage2D(Gr.TEXTURE_2D,0,Gr.RGBA,Gr.RGBA,Gr.UNSIGNED_BYTE,nr),Cr.h.bindTexture2d(0),Cr=kr;break e;case"detections":for(Cr=wt.m[un.stream],Cr||(Cr=new Fr(wt.h),wt.m[un.stream]=Cr),Cr.data||(Cr.data=new Cr.g.DetectionListData),Cr.data.reset(nr.length),kr=0;kr<nr.length;++kr){Gr=nr[kr];var Kr=Cr.data,Yr=Kr.setBoundingBox,Uo=kr,us=Gr.T,ds=new go;if(fo(ds,1,us.X),fo(ds,2,us.Y),fo(ds,3,us.height),fo(ds,4,us.width),fo(ds,5,us.rotation),fo(ds,6,us.W),us=Yl(ds,$o),Yr.call(Kr,Uo,us),Gr.O)for(Kr=0;Kr<Gr.O.length;++Kr){ds=Gr.O[Kr];var yl=!!ds.visibility;Yr=Cr.data,Uo=Yr.addNormalizedLandmark,us=kr,ds=Object.assign(Object.assign({},ds),{visibility:yl?ds.visibility:0}),yl=new Qn,fo(yl,1,ds.x),fo(yl,2,ds.y),fo(yl,3,ds.z),ds.visibility&&fo(yl,4,ds.visibility),ds=Yl(yl,Nr),Uo.call(Yr,us,ds)}if(Gr.M)for(Kr=0;Kr<Gr.M.length;++Kr)Yr=Cr.data,Uo=Yr.addClassification,us=kr,ds=Gr.M[Kr],yl=new qu,fo(yl,2,ds.score),ds.index&&fo(yl,1,ds.index),ds.label&&fo(yl,3,ds.label),ds.displayName&&fo(yl,4,ds.displayName),ds=Yl(yl,At),Uo.call(Yr,us,ds)}Cr=Cr.data;break e;default:Cr={}}}switch(mn=Cr,Ln=un.stream,un.type){case"video":mt.pushTexture2d(Object.assign(Object.assign({},mn),{stream:Ln,timestamp:tt}));break;case"detections":Kn=mn,Kn.stream=Ln,Kn.timestamp=tt,mt.pushDetectionList(Kn);break;default:throw Error("Unknown input config type: '"+un.type+"'")}}return wt.i.send(mt),qn(tr,wt.C,4);case 4:mt.delete(),tr.g=0}})};function Yt(rt,yt,wt){var tt,mt,St,Zt,Qt,un,mn,Ln,Kn,tr,nr,Cr,Gr,kr;return Hr(function(Kr){switch(Kr.g){case 1:if(!wt)return Kr.return(yt);for(tt={},mt=0,St=ln(Object.keys(wt)),Zt=St.next();!Zt.done;Zt=St.next())Qt=Zt.value,un=wt[Qt],typeof un!="string"&&un.type==="texture"&&yt[un.stream]!==void 0&&++mt;1<mt&&(rt.G=!1),mn=ln(Object.keys(wt)),Zt=mn.next();case 2:if(Zt.done){Kr.g=4;break}if(Ln=Zt.value,Kn=wt[Ln],typeof Kn=="string")return Gr=tt,kr=Ln,qn(Kr,rn(rt,Ln,yt[Kn]),14);if(tr=yt[Kn.stream],Kn.type==="detection_list"){if(tr){for(var Yr=tr.getRectList(),Uo=tr.getLandmarksList(),us=tr.getClassificationsList(),ds=[],yl=0;yl<Yr.size();++yl){var Mu=Ap(Yr.get(yl),go,ps);Mu={T:{X:hs(Mu,1),Y:hs(Mu,2),height:hs(Mu,3),width:hs(Mu,4),rotation:hs(Mu,5,0),W:gs(Mu,6,0)},O:Xn(Uo.get(yl)),M:cn(Ap(us.get(yl),jt,_n))},ds.push(Mu)}Yr=ds}else Yr=[];tt[Ln]=Yr,Kr.g=7;break}if(Kn.type==="proto_list"){if(tr){for(Yr=Array(tr.size()),Uo=0;Uo<tr.size();Uo++)Yr[Uo]=tr.get(Uo);tr.delete()}else Yr=[];tt[Ln]=Yr,Kr.g=7;break}if(tr===void 0){Kr.g=3;break}if(Kn.type==="float_list"){tt[Ln]=tr,Kr.g=7;break}if(Kn.type==="proto"){tt[Ln]=tr,Kr.g=7;break}if(Kn.type!=="texture")throw Error("Unknown output config type: '"+Kn.type+"'");return nr=rt.s[Ln],nr||(nr=new Gn(rt.h,rt.D),rt.s[Ln]=nr),qn(Kr,dr(nr,tr,rt.G),13);case 13:Cr=Kr.h,tt[Ln]=Cr;case 7:Kn.transform&&tt[Ln]&&(tt[Ln]=Kn.transform(tt[Ln])),Kr.g=3;break;case 14:Gr[kr]=Kr.h;case 3:Zt=mn.next(),Kr.g=2;break;case 4:return Kr.return(tt)}})}function rn(rt,yt,wt){var tt;return Hr(function(mt){return typeof wt=="number"||wt instanceof Uint8Array||wt instanceof rt.h.Uint8BlobList?mt.return(wt):wt instanceof rt.h.Texture2dDataOut?(tt=rt.s[yt],tt||(tt=new Gn(rt.h,rt.D),rt.s[yt]=tt),mt.return(dr(tt,wt,rt.G))):mt.return(void 0)})}function wn(rt,yt){for(var wt=yt.name||"$",tt=[].concat(En(yt.wants)),mt=new rt.h.StringList,St=ln(yt.wants),Zt=St.next();!Zt.done;Zt=St.next())mt.push_back(Zt.value);St=rt.h.PacketListener.implement({onResults:function(Qt){for(var un={},mn=0;mn<yt.wants.length;++mn)un[tt[mn]]=Qt.get(mn);var Ln=rt.listeners[wt];Ln&&(rt.C=Yt(rt,un,yt.outs).then(function(Kn){Kn=Ln(Kn);for(var tr=0;tr<yt.wants.length;++tr){var nr=un[tt[tr]];typeof nr=="object"&&nr.hasOwnProperty&&nr.hasOwnProperty("delete")&&nr.delete()}Kn&&(rt.C=Kn)}))}}),rt.i.attachMultiListener(mt,St),mt.delete()}at.onResults=function(rt,yt){this.listeners[yt||"$"]=rt},Oo("Solution",uo),Oo("OptionType",{BOOL:0,NUMBER:1,Z:2,0:"BOOL",1:"NUMBER",2:"STRING"});function ft(rt){return rt.map(It)}function It(rt){rt=Ap(rt,Vt,gn);var yt=rt.getMesh();if(!yt)return rt;var wt=new Float32Array(yt.getVertexBufferList());yt.getVertexBufferList=function(){return wt};var tt=new Uint32Array(yt.getIndexBufferList());return yt.getIndexBufferList=function(){return tt},rt}function Lt(rt){var yt=this;rt=rt||{},this.g=new uo({locateFile:rt.locateFile,files:[{url:"holistic_solution_packed_assets_loader.js"},{simd:!1,url:"holistic_solution_wasm_bin.js"},{simd:!0,url:"holistic_solution_simd_wasm_bin.js"}],graph:{url:"holistic.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:"left_hand_landmarks right_hand_landmarks face_landmarks pose_landmarks world_landmarks segmentation_mask image_transformed multi_face_geometry".split(" "),outs:{image:{type:"texture",stream:"image_transformed"},leftHandLandmarks:{type:"proto",stream:"left_hand_landmarks",transform:Xn},rightHandLandmarks:{type:"proto",stream:"right_hand_landmarks",transform:Xn},faceLandmarks:{type:"proto",stream:"face_landmarks",transform:Xn},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:Xn},ea:{type:"proto",stream:"world_landmarks",transform:Xn},segmentationMask:{type:"texture",stream:"segmentation_mask"},multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:ft}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,default:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(wt){var tt,mt,St,Zt;return Hr(function(Qt){if(Qt.g==1){switch(tt="",wt){case 1:tt="pose_landmark_full.tflite";break;case 2:tt="pose_landmark_heavy.tflite";break;default:tt="pose_landmark_lite.tflite"}return mt="third_party/mediapipe/modules/pose_landmark/"+tt,St=yt.g.locateFile(tt,""),qn(Qt,fetch(St),3)}return Qt.g!=2?qn(Qt,Qt.h.arrayBuffer(),2):(Zt=Qt.h,yt.g.overrideFile(mt,Zt),qn(Qt,yt.g.reset(),0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},refineFaceLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineFaceLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}})}at=Lt.prototype,at.close=function(){return this.g.close(),o.resolve()},at.onResults=function(rt){this.g.onResults(rt)},at.initialize=function(){var rt=this;return Hr(function(yt){return qn(yt,rt.g.initialize(),0)})},at.reset=function(){this.g.reset()},at.send=function(rt){var yt=this;return Hr(function(wt){return qn(wt,yt.g.send(rt),0)})},at.setOptions=function(rt){this.g.setOptions(rt)},Oo("Holistic",Lt),Oo("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),Oo("FACEMESH_LIPS",Nn),Oo("FACEMESH_LEFT_EYE",er),Oo("FACEMESH_LEFT_EYEBROW",Pn),Oo("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),Oo("FACEMESH_RIGHT_EYE",ar),Oo("FACEMESH_RIGHT_EYEBROW",Rr),Oo("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),Oo("FACEMESH_FACE_OVAL",pt),Oo("FACEMESH_CONTOURS",Mt),Oo("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Oo("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Oo("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Oo("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Oo("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Oo("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Oo("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Oo("matrixDataToMatrix",function(rt){for(var yt=rt.getCols(),wt=rt.getRows(),tt=rt.getPackedDataList(),mt=[],St=0;St<wt;St++)mt.push(Array(yt));for(St=0;St<wt;St++)for(var Zt=0;Zt<yt;Zt++){var Qt=rt.getLayout()===1?St*yt+Zt:Zt*wt+St;mt[St][Zt]=tt[Qt]}return mt}),Oo("VERSION","0.5.1635989137")}).call(Qu);const up={};(function(){var at;function ot(ft){var It=0;return function(){return It<ft.length?{done:!1,value:ft[It++]}:{done:!0}}}var ut=typeof Object.defineProperties=="function"?Object.defineProperty:function(ft,It,Lt){return ft==Array.prototype||ft==Object.prototype||(ft[It]=Lt.value),ft};function Ot(ft){ft=[typeof globalThis=="object"&&globalThis,ft,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var It=0;It<ft.length;++It){var Lt=ft[It];if(Lt&&Lt.Math==Math)return Lt}throw Error("Cannot find global object")}var Gt=Ot(this);function en(ft,It){if(It)e:{var Lt=Gt;ft=ft.split(".");for(var rt=0;rt<ft.length-1;rt++){var yt=ft[rt];if(!(yt in Lt))break e;Lt=Lt[yt]}ft=ft[ft.length-1],rt=Lt[ft],It=It(rt),It!=rt&&It!=null&&ut(Lt,ft,{configurable:!0,writable:!0,value:It})}}en("Symbol",function(ft){function It(wt){if(this instanceof It)throw new TypeError("Symbol is not a constructor");return new Lt(rt+(wt||"")+"_"+yt++,wt)}function Lt(wt,tt){this.g=wt,ut(this,"description",{configurable:!0,writable:!0,value:tt})}if(ft)return ft;Lt.prototype.toString=function(){return this.g};var rt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",yt=0;return It}),en("Symbol.iterator",function(ft){if(ft)return ft;ft=Symbol("Symbol.iterator");for(var It="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Lt=0;Lt<It.length;Lt++){var rt=Gt[It[Lt]];typeof rt=="function"&&typeof rt.prototype[ft]!="function"&&ut(rt.prototype,ft,{configurable:!0,writable:!0,value:function(){return hn(ot(this))}})}return ft});function hn(ft){return ft={next:ft},ft[Symbol.iterator]=function(){return this},ft}function ln(ft){var It=typeof Symbol<"u"&&Symbol.iterator&&ft[Symbol.iterator];return It?It.call(ft):{next:ot(ft)}}function En(ft){if(!(ft instanceof Array)){ft=ln(ft);for(var It,Lt=[];!(It=ft.next()).done;)Lt.push(It.value);ft=Lt}return ft}var rr=typeof Object.create=="function"?Object.create:function(ft){function It(){}return It.prototype=ft,new It},br;if(typeof Object.setPrototypeOf=="function")br=Object.setPrototypeOf;else{var Tr;e:{var ho={a:!0},Eo={};try{Eo.__proto__=ho,Tr=Eo.a;break e}catch{}Tr=!1}br=Tr?function(ft,It){if(ft.__proto__=It,ft.__proto__!==It)throw new TypeError(ft+" is not extensible");return ft}:null}var Ir=br;function Ar(ft,It){if(ft.prototype=rr(It.prototype),ft.prototype.constructor=ft,Ir)Ir(ft,It);else for(var Lt in It)if(Lt!="prototype")if(Object.defineProperties){var rt=Object.getOwnPropertyDescriptor(It,Lt);rt&&Object.defineProperty(ft,Lt,rt)}else ft[Lt]=It[Lt];ft.na=It.prototype}function ko(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Vo(ft){if(ft.l)throw new TypeError("Generator is already running");ft.l=!0}ko.prototype.s=function(ft){this.h=ft};function rs(ft,It){ft.j={da:It,ea:!0},ft.g=ft.o||ft.u}ko.prototype.return=function(ft){this.j={return:ft},this.g=this.u};function qn(ft,It,Lt){return ft.g=Lt,{value:It}}function bu(ft){this.g=new ko,this.h=ft}function cu(ft,It){Vo(ft.g);var Lt=ft.g.i;return Lt?Us(ft,"return"in Lt?Lt.return:function(rt){return{value:rt,done:!0}},It,ft.g.return):(ft.g.return(It),qo(ft))}function Us(ft,It,Lt,rt){try{var yt=It.call(ft.g.i,Lt);if(!(yt instanceof Object))throw new TypeError("Iterator result "+yt+" is not an object");if(!yt.done)return ft.g.l=!1,yt;var wt=yt.value}catch(tt){return ft.g.i=null,rs(ft.g,tt),qo(ft)}return ft.g.i=null,rt.call(ft.g,wt),qo(ft)}function qo(ft){for(;ft.g.g;)try{var It=ft.h(ft.g);if(It)return ft.g.l=!1,{value:It.value,done:!1}}catch(Lt){ft.g.h=void 0,rs(ft.g,Lt)}if(ft.g.l=!1,ft.g.j){if(It=ft.g.j,ft.g.j=null,It.ea)throw It.da;return{value:It.return,done:!0}}return{value:void 0,done:!0}}function wp(ft){this.next=function(It){return Vo(ft.g),ft.g.i?It=Us(ft,ft.g.i.next,It,ft.g.s):(ft.g.s(It),It=qo(ft)),It},this.throw=function(It){return Vo(ft.g),ft.g.i?It=Us(ft,ft.g.i.throw,It,ft.g.s):(rs(ft.g,It),It=qo(ft)),It},this.return=function(It){return cu(ft,It)},this[Symbol.iterator]=function(){return this}}function vs(ft){function It(rt){return ft.next(rt)}function Lt(rt){return ft.throw(rt)}return new o(function(rt,yt){function wt(tt){tt.done?rt(tt.value):o.resolve(tt.value).then(It,Lt).then(wt,yt)}wt(ft.next())})}function Hr(ft){return vs(new wp(new bu(ft)))}en("Promise",function(ft){function It(tt){this.h=0,this.i=void 0,this.g=[],this.s=!1;var mt=this.j();try{tt(mt.resolve,mt.reject)}catch(St){mt.reject(St)}}function Lt(){this.g=null}function rt(tt){return tt instanceof It?tt:new It(function(mt){mt(tt)})}if(ft)return ft;Lt.prototype.h=function(tt){if(this.g==null){this.g=[];var mt=this;this.i(function(){mt.l()})}this.g.push(tt)};var yt=Gt.setTimeout;Lt.prototype.i=function(tt){yt(tt,0)},Lt.prototype.l=function(){for(;this.g&&this.g.length;){var tt=this.g;this.g=[];for(var mt=0;mt<tt.length;++mt){var St=tt[mt];tt[mt]=null;try{St()}catch(Zt){this.j(Zt)}}}this.g=null},Lt.prototype.j=function(tt){this.i(function(){throw tt})},It.prototype.j=function(){function tt(Zt){return function(Qt){St||(St=!0,Zt.call(mt,Qt))}}var mt=this,St=!1;return{resolve:tt(this.D),reject:tt(this.l)}},It.prototype.D=function(tt){if(tt===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(tt instanceof It)this.H(tt);else{e:switch(typeof tt){case"object":var mt=tt!=null;break e;case"function":mt=!0;break e;default:mt=!1}mt?this.A(tt):this.o(tt)}},It.prototype.A=function(tt){var mt=void 0;try{mt=tt.then}catch(St){this.l(St);return}typeof mt=="function"?this.I(mt,tt):this.o(tt)},It.prototype.l=function(tt){this.u(2,tt)},It.prototype.o=function(tt){this.u(1,tt)},It.prototype.u=function(tt,mt){if(this.h!=0)throw Error("Cannot settle("+tt+", "+mt+"): Promise already settled in state"+this.h);this.h=tt,this.i=mt,this.h===2&&this.G(),this.B()},It.prototype.G=function(){var tt=this;yt(function(){if(tt.C()){var mt=Gt.console;typeof mt<"u"&&mt.error(tt.i)}},1)},It.prototype.C=function(){if(this.s)return!1;var tt=Gt.CustomEvent,mt=Gt.Event,St=Gt.dispatchEvent;return typeof St>"u"?!0:(typeof tt=="function"?tt=new tt("unhandledrejection",{cancelable:!0}):typeof mt=="function"?tt=new mt("unhandledrejection",{cancelable:!0}):(tt=Gt.document.createEvent("CustomEvent"),tt.initCustomEvent("unhandledrejection",!1,!0,tt)),tt.promise=this,tt.reason=this.i,St(tt))},It.prototype.B=function(){if(this.g!=null){for(var tt=0;tt<this.g.length;++tt)wt.h(this.g[tt]);this.g=null}};var wt=new Lt;return It.prototype.H=function(tt){var mt=this.j();tt.M(mt.resolve,mt.reject)},It.prototype.I=function(tt,mt){var St=this.j();try{tt.call(mt,St.resolve,St.reject)}catch(Zt){St.reject(Zt)}},It.prototype.then=function(tt,mt){function St(mn,Ln){return typeof mn=="function"?function(Kn){try{Zt(mn(Kn))}catch(tr){Qt(tr)}}:Ln}var Zt,Qt,un=new It(function(mn,Ln){Zt=mn,Qt=Ln});return this.M(St(tt,Zt),St(mt,Qt)),un},It.prototype.catch=function(tt){return this.then(void 0,tt)},It.prototype.M=function(tt,mt){function St(){switch(Zt.h){case 1:tt(Zt.i);break;case 2:mt(Zt.i);break;default:throw Error("Unexpected state: "+Zt.h)}}var Zt=this;this.g==null?wt.h(St):this.g.push(St),this.s=!0},It.resolve=rt,It.reject=function(tt){return new It(function(mt,St){St(tt)})},It.race=function(tt){return new It(function(mt,St){for(var Zt=ln(tt),Qt=Zt.next();!Qt.done;Qt=Zt.next())rt(Qt.value).M(mt,St)})},It.all=function(tt){var mt=ln(tt),St=mt.next();return St.done?rt([]):new It(function(Zt,Qt){function un(Kn){return function(tr){mn[Kn]=tr,Ln--,Ln==0&&Zt(mn)}}var mn=[],Ln=0;do mn.push(void 0),Ln++,rt(St.value).M(un(mn.length-1),Qt),St=mt.next();while(!St.done)})},It});function Su(ft,It){ft instanceof String&&(ft+="");var Lt=0,rt=!1,yt={next:function(){if(!rt&&Lt<ft.length){var wt=Lt++;return{value:It(wt,ft[wt]),done:!1}}return rt=!0,{done:!0,value:void 0}}};return yt[Symbol.iterator]=function(){return yt},yt}var Op=typeof Object.assign=="function"?Object.assign:function(ft,It){for(var Lt=1;Lt<arguments.length;Lt++){var rt=arguments[Lt];if(rt)for(var yt in rt)Object.prototype.hasOwnProperty.call(rt,yt)&&(ft[yt]=rt[yt])}return ft};en("Object.assign",function(ft){return ft||Op}),en("Object.is",function(ft){return ft||function(It,Lt){return It===Lt?It!==0||1/It===1/Lt:It!==It&&Lt!==Lt}}),en("Array.prototype.includes",function(ft){return ft||function(It,Lt){var rt=this;rt instanceof String&&(rt=String(rt));var yt=rt.length;for(Lt=Lt||0,0>Lt&&(Lt=Math.max(Lt+yt,0));Lt<yt;Lt++){var wt=rt[Lt];if(wt===It||Object.is(wt,It))return!0}return!1}}),en("String.prototype.includes",function(ft){return ft||function(It,Lt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(It instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(It,Lt||0)!==-1}}),en("Array.prototype.keys",function(ft){return ft||function(){return Su(this,function(It){return It})}});var Hs=this||self;function Oo(ft,It){ft=ft.split(".");var Lt=Hs;ft[0]in Lt||typeof Lt.execScript>"u"||Lt.execScript("var "+ft[0]);for(var rt;ft.length&&(rt=ft.shift());)ft.length||It===void 0?Lt[rt]&&Lt[rt]!==Object.prototype[rt]?Lt=Lt[rt]:Lt=Lt[rt]={}:Lt[rt]=It}function $s(){throw Error("Invalid UTF8")}function tu(ft,It){return It=String.fromCharCode.apply(null,It),ft==null?It:ft+It}var ku,np=typeof TextDecoder<"u",ju,sp=typeof TextEncoder<"u",lu={},Eu=null;function fp(ft){var It;It===void 0&&(It=0),Zl(),It=lu[It];for(var Lt=Array(Math.floor(ft.length/3)),rt=It[64]||"",yt=0,wt=0;yt<ft.length-2;yt+=3){var tt=ft[yt],mt=ft[yt+1],St=ft[yt+2],Zt=It[tt>>2];tt=It[(tt&3)<<4|mt>>4],mt=It[(mt&15)<<2|St>>6],St=It[St&63],Lt[wt++]=Zt+tt+mt+St}switch(Zt=0,St=rt,ft.length-yt){case 2:Zt=ft[yt+1],St=It[(Zt&15)<<2]||rt;case 1:ft=ft[yt],Lt[wt]=It[ft>>2]+It[(ft&3)<<4|Zt>>4]+St+rt}return Lt.join("")}function rp(ft){var It=ft.length,Lt=3*It/4;Lt%3?Lt=Math.floor(Lt):"=.".indexOf(ft[It-1])!=-1&&(Lt="=.".indexOf(ft[It-2])!=-1?Lt-2:Lt-1);var rt=new Uint8Array(Lt),yt=0;return Ll(ft,function(wt){rt[yt++]=wt}),yt!==Lt?rt.subarray(0,yt):rt}function Ll(ft,It){function Lt(St){for(;rt<ft.length;){var Zt=ft.charAt(rt++),Qt=Eu[Zt];if(Qt!=null)return Qt;if(!/^[\s\xa0]*$/.test(Zt))throw Error("Unknown base64 encoding at char: "+Zt)}return St}Zl();for(var rt=0;;){var yt=Lt(-1),wt=Lt(0),tt=Lt(64),mt=Lt(64);if(mt===64&&yt===-1)break;It(yt<<2|wt>>4),tt!=64&&(It(wt<<4&240|tt>>2),mt!=64&&It(tt<<6&192|mt))}}function Zl(){if(!Eu){Eu={};for(var ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),It=["+/=","+/","-_=","-_.","-_"],Lt=0;5>Lt;Lt++){var rt=ft.concat(It[Lt].split(""));lu[Lt]=rt;for(var yt=0;yt<rt.length;yt++){var wt=rt[yt];Eu[wt]===void 0&&(Eu[wt]=yt)}}}}var Uu=typeof Uint8Array=="function";function Nu(ft){return Uu&&ft!=null&&ft instanceof Uint8Array}var Ss;function Qs(ft){if(this.L=ft,ft!==null&&ft.length===0)throw Error("ByteString should be constructed with non-empty values")}var Gl=typeof Uint8Array.prototype.slice=="function",ss=0,Ds=0;function nu(ft,It){if(ft.constructor===Uint8Array)return ft;if(ft.constructor===ArrayBuffer)return new Uint8Array(ft);if(ft.constructor===Array)return new Uint8Array(ft);if(ft.constructor===String)return rp(ft);if(ft.constructor===Qs)return!It&&(It=ft.L)&&It.constructor===Uint8Array?It:(It=ft.L,It=It==null||Nu(It)?It:typeof It=="string"?rp(It):null,(ft=ft.L=It)?new Uint8Array(ft):Ss||(Ss=new Uint8Array(0)));if(ft instanceof Uint8Array)return new Uint8Array(ft.buffer,ft.byteOffset,ft.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Rl(ft,It){return Error("Invalid wire type: "+ft+" (at position "+It+")")}function Qo(){return Error("Failed to read varint, encoding is invalid.")}function Ls(ft,It){It=It===void 0?{}:It,It=It.v===void 0?!1:It.v,this.h=null,this.g=this.i=this.j=0,this.v=It,ft&&ba(this,ft)}function ba(ft,It){ft.h=nu(It,ft.v),ft.j=0,ft.i=ft.h.length,ft.g=ft.j}Ls.prototype.reset=function(){this.g=this.j};function Po(ft){if(ft.g>ft.i)throw Error("Tried to read past the end of the data "+ft.g+" > "+ft.i)}function Ks(ft){var It=ft.h,Lt=It[ft.g],rt=Lt&127;if(128>Lt)return ft.g+=1,Po(ft),rt;if(Lt=It[ft.g+1],rt|=(Lt&127)<<7,128>Lt)return ft.g+=2,Po(ft),rt;if(Lt=It[ft.g+2],rt|=(Lt&127)<<14,128>Lt)return ft.g+=3,Po(ft),rt;if(Lt=It[ft.g+3],rt|=(Lt&127)<<21,128>Lt)return ft.g+=4,Po(ft),rt;if(Lt=It[ft.g+4],ft.g+=5,rt|=(Lt&15)<<28,128>Lt)return Po(ft),rt;if(128<=It[ft.g++]&&128<=It[ft.g++]&&128<=It[ft.g++]&&128<=It[ft.g++]&&128<=It[ft.g++])throw Qo();return Po(ft),rt}var Bo=[];function Os(){this.g=[]}Os.prototype.length=function(){return this.g.length},Os.prototype.end=function(){var ft=this.g;return this.g=[],ft};function _s(ft,It){for(;127<It;)ft.g.push(It&127|128),It>>>=7;ft.g.push(It)}function Dl(ft){var It={},Lt=It.W===void 0?!1:It.W;this.l={v:It.v===void 0?!1:It.v},this.W=Lt,It=this.l,Bo.length?(Lt=Bo.pop(),It&&(Lt.v=It.v),ft&&ba(Lt,ft),ft=Lt):ft=new Ls(ft,It),this.g=ft,this.j=this.g.g,this.h=this.i=-1}Dl.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function Ws(ft){var It=ft.g;if(It.g==It.i)return!1;ft.j=ft.g.g;var Lt=Ks(ft.g)>>>0;if(It=Lt>>>3,Lt&=7,!(0<=Lt&&5>=Lt))throw Rl(Lt,ft.j);if(1>It)throw Error("Invalid field number: "+It+" (at position "+ft.j+")");return ft.i=It,ft.h=Lt,!0}function Ko(ft){switch(ft.h){case 0:if(ft.h!=0)Ko(ft);else e:{ft=ft.g;for(var It=ft.g,Lt=It+10;It<Lt;)if(!(ft.h[It++]&128)){ft.g=It,Po(ft);break e}throw Qo()}break;case 1:ft=ft.g,ft.g+=8,Po(ft);break;case 2:ft.h!=2?Ko(ft):(It=Ks(ft.g)>>>0,ft=ft.g,ft.g+=It,Po(ft));break;case 5:ft=ft.g,ft.g+=4,Po(ft);break;case 3:It=ft.i;do{if(!Ws(ft))throw Error("Unmatched start-group tag: stream EOF");if(ft.h==4){if(ft.i!=It)throw Error("Unmatched end-group tag");break}Ko(ft)}while(1);break;default:throw Rl(ft.h,ft.j)}}var Vl=[];function Nl(){this.i=[],this.h=0,this.g=new Os}function zs(ft,It){It.length!==0&&(ft.i.push(It),ft.h+=It.length)}function Wu(ft,It){if(It=It.ba){zs(ft,ft.g.end());for(var Lt=0;Lt<It.length;Lt++)zs(ft,It[Lt])}}var ru=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Wl(ft,It){Object.isFrozen(ft)||(ru?ft[ru]|=It:ft.N!==void 0?ft.N|=It:Object.defineProperties(ft,{N:{value:It,configurable:!0,writable:!0,enumerable:!1}}))}function iu(ft){var It;return ru?It=ft[ru]:It=ft.N,It??0}function Gs(ft){return Wl(ft,1),ft}function qs(ft){return Array.isArray(ft)?!!(iu(ft)&2):!1}function ks(ft){if(!Array.isArray(ft))throw Error("cannot mark non-array as immutable");Wl(ft,2)}function as(ft){return ft!==null&&typeof ft=="object"&&!Array.isArray(ft)&&ft.constructor===Object}var Ml=Object.freeze(Gs([]));function ts(ft){if(qs(ft.m))throw Error("Cannot mutate an immutable Message")}var zo=typeof Symbol<"u"&&typeof Symbol.hasInstance<"u";function uu(ft){return{value:ft,configurable:!1,writable:!1,enumerable:!1}}function Es(ft,It,Lt){return It===-1?null:It>=ft.i?ft.g?ft.g[It]:void 0:Lt!==void 0&&Lt&&ft.g&&(Lt=ft.g[It],Lt!=null)?Lt:ft.m[It+ft.h]}function wo(ft,It,Lt,rt){rt=rt===void 0?!1:rt,ts(ft),It<ft.i&&!rt?ft.m[It+ft.h]=Lt:(ft.g||(ft.g=ft.m[ft.i+ft.h]={}))[It]=Lt}function ro(ft,It,Lt,rt){Lt=Lt===void 0?!0:Lt,rt=rt===void 0?!1:rt;var yt=Es(ft,It,rt);return yt==null&&(yt=Ml),qs(ft.m)?Lt&&(ks(yt),Object.freeze(yt)):(yt===Ml||qs(yt))&&(yt=Gs(yt.slice()),wo(ft,It,yt,rt)),yt}function cs(ft,It,Lt){return ft=Es(ft,It),ft=ft==null?ft:+ft,ft??(Lt===void 0?0:Lt)}function na(ft,It,Lt,rt){ft.j||(ft.j={});var yt=qs(ft.m),wt=ft.j[Lt];if(!wt){rt=ro(ft,Lt,!0,rt===void 0?!1:rt),wt=[],yt=yt||qs(rt);for(var tt=0;tt<rt.length;tt++)wt[tt]=new It(rt[tt]),yt&&ks(wt[tt].m);yt&&(ks(wt),Object.freeze(wt)),ft.j[Lt]=wt}return wt}function ns(ft,It,Lt,rt,yt){var wt=wt===void 0?!1:wt;return ts(ft),wt=na(ft,Lt,It,wt),Lt=rt||new Lt,ft=ro(ft,It),yt!=null?(wt.splice(yt,0,Lt),ft.splice(yt,0,Lt.m)):(wt.push(Lt),ft.push(Lt.m)),Lt}function ls(ft,It){return ft=Es(ft,It),ft??0}function ur(ft,It){return ft=Es(ft,It),ft??""}function mr(ft){switch(typeof ft){case"number":return isFinite(ft)?ft:String(ft);case"object":if(ft&&!Array.isArray(ft)){if(Nu(ft))return fp(ft);if(ft instanceof Qs){var It=ft.L;return It=It==null||typeof It=="string"?It:Uu&&It instanceof Uint8Array?fp(It):null,(ft.L=It)||""}}}return ft}function xr(ft){var It=hs;return It=It===void 0?fo:It,gs(ft,It)}function Jo(ft,It){if(ft!=null){if(Array.isArray(ft))ft=gs(ft,It);else if(as(ft)){var Lt={},rt;for(rt in ft)Lt[rt]=Jo(ft[rt],It);ft=Lt}else ft=It(ft);return ft}}function gs(ft,It){for(var Lt=ft.slice(),rt=0;rt<Lt.length;rt++)Lt[rt]=Jo(Lt[rt],It);return Array.isArray(ft)&&iu(ft)&1&&Gs(Lt),Lt}function hs(ft){return ft&&typeof ft=="object"&&ft.toJSON?ft.toJSON():(ft=mr(ft),Array.isArray(ft)?xr(ft):ft)}function fo(ft){return Nu(ft)?new Uint8Array(ft):ft}function Cs(ft,It,Lt){ft||(ft=xa),xa=null;var rt=this.constructor.h;ft||(ft=rt?[rt]:[]),this.h=(rt?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=ft;e:{if(rt=this.m.length,ft=rt-1,rt&&(rt=this.m[ft],as(rt))){this.i=ft-this.h,this.g=rt;break e}It!==void 0&&-1<It?(this.i=Math.max(It,ft+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(Lt)for(It=0;It<Lt.length;It++)if(ft=Lt[It],ft<this.i)ft+=this.h,(rt=this.m[ft])?Array.isArray(rt)&&Gs(rt):this.m[ft]=Ml;else{rt=this.g||(this.g=this.m[this.i+this.h]={});var yt=rt[ft];yt?Array.isArray(yt)&&Gs(yt):rt[ft]=Ml}}Cs.prototype.toJSON=function(){return xr(this.m)},Cs.prototype.toString=function(){return this.m.toString()};var xa;function Ul(){Cs.apply(this,arguments)}if(Ar(Ul,Cs),zo){var Hl={};Object.defineProperties(Ul,(Hl[Symbol.hasInstance]=uu(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Hl))}function du(ft,It,Lt){if(Lt){var rt={},yt;for(yt in Lt){var wt=Lt[yt],tt=wt.ha;tt||(rt.F=wt.la||wt.fa.P,wt.aa?(rt.U=Hu(wt.aa),tt=function(mt){return function(St,Zt,Qt){return mt.F(St,Zt,Qt,mt.U)}}(rt)):wt.ca?(rt.T=Il(wt.X.g,wt.ca),tt=function(mt){return function(St,Zt,Qt){return mt.F(St,Zt,Qt,mt.T)}}(rt)):tt=rt.F,wt.ha=tt),tt(It,ft,wt.X),rt={F:rt.F,U:rt.U,T:rt.T}}}Wu(It,ft)}var Cu=Symbol();function ga(ft,It,Lt){return ft[Cu]||(ft[Cu]=function(rt,yt){return It(rt,yt,Lt)})}function Yl(ft){var It=ft[Cu];if(!It){var Lt=At(ft);It=function(rt,yt){return Dt(rt,yt,Lt)},ft[Cu]=It}return It}function Ap(ft){var It=ft.aa;if(It)return Yl(It);if(It=ft.ka)return ga(ft.X.g,It,ft.ca)}function Bl(ft){var It=Ap(ft),Lt=ft.X,rt=ft.fa.O;return It?function(yt,wt){return rt(yt,wt,Lt,It)}:function(yt,wt){return rt(yt,wt,Lt)}}function $a(ft,It,Lt,rt,yt,wt){ft=ft();var tt=0;for(ft.length&&typeof ft[0]!="number"&&(Lt(It,ft[0]),tt++);tt<ft.length;){Lt=ft[tt++];for(var mt=tt+1;mt<ft.length&&typeof ft[mt]!="number";)mt++;var St=ft[tt++];switch(mt-=tt,mt){case 0:rt(It,Lt,St);break;case 1:rt(It,Lt,St,ft[tt++]);break;case 2:yt(It,Lt,St,ft[tt++],ft[tt++]);break;case 3:mt=ft[tt++];var Zt=ft[tt++],Qt=ft[tt++];Array.isArray(Qt)?yt(It,Lt,St,mt,Zt,Qt):wt(It,Lt,St,mt,Zt,Qt);break;case 4:wt(It,Lt,St,ft[tt++],ft[tt++],ft[tt++],ft[tt++]);break;default:throw Error("unexpected number of binary field arguments: "+mt)}}return It}var Ou=Symbol();function Hu(ft){var It=ft[Ou];if(!It){var Lt=ou(ft);It=function(rt,yt){return Zn(rt,yt,Lt)},ft[Ou]=It}return It}function Il(ft,It){var Lt=ft[Ou];return Lt||(Lt=function(rt,yt){return du(rt,yt,It)},ft[Ou]=Lt),Lt}var hp=Symbol();function Kl(ft,It){ft.push(It)}function Au(ft,It,Lt){ft.push(It,Lt.P)}function $u(ft,It,Lt,rt,yt){var wt=Hu(yt),tt=Lt.P;ft.push(It,function(mt,St,Zt){return tt(mt,St,Zt,rt,wt)})}function Ep(ft,It,Lt,rt,yt,wt){var tt=Il(rt,wt),mt=Lt.P;ft.push(It,function(St,Zt,Qt){return mt(St,Zt,Qt,rt,tt)})}function ou(ft){var It=ft[hp];return It||$a(ft,ft[hp]=[],Kl,Au,$u,Ep)}var _u=Symbol();function Fp(ft,It){ft[0]=It}function Xp(ft,It,Lt,rt){var yt=Lt.O;ft[It]=rt?function(wt,tt,mt){return yt(wt,tt,mt,rt)}:yt}function qu(ft,It,Lt,rt,yt,wt){var tt=Lt.O,mt=Yl(yt);ft[It]=function(St,Zt,Qt){return tt(St,Zt,Qt,rt,mt,wt)}}function ip(ft,It,Lt,rt,yt,wt,tt){var mt=Lt.O,St=ga(rt,yt,wt);ft[It]=function(Zt,Qt,un){return mt(Zt,Qt,un,rt,St,tt)}}function At(ft){var It=ft[_u];return It||$a(ft,ft[_u]={},Fp,Xp,qu,ip)}function Dt(ft,It,Lt){for(;Ws(It)&&It.h!=4;){var rt=It.i,yt=Lt[rt];if(!yt){var wt=Lt[0];wt&&(wt=wt[rt])&&(yt=Lt[rt]=Bl(wt))}if((!yt||!yt(It,ft,rt))&&(yt=It,rt=ft,wt=yt.j,Ko(yt),!yt.W)){var tt=yt.g.h;yt=yt.g.g,yt=wt===yt?Ss||(Ss=new Uint8Array(0)):Gl?tt.slice(wt,yt):new Uint8Array(tt.subarray(wt,yt)),(wt=rt.ba)?wt.push(yt):rt.ba=[yt]}}return ft}function jt(ft,It,Lt){if(Vl.length){var rt=Vl.pop();ft&&(ba(rt.g,ft),rt.i=-1,rt.h=-1),ft=rt}else ft=new Dl(ft);try{return Dt(new It,ft,At(Lt))}finally{It=ft.g,It.h=null,It.j=0,It.i=0,It.g=0,It.v=!1,ft.i=-1,ft.h=-1,100>Vl.length&&Vl.push(ft)}}function Zn(ft,It,Lt){for(var rt=Lt.length,yt=rt%2==1,wt=yt?1:0;wt<rt;wt+=2)(0,Lt[wt+1])(It,ft,Lt[wt]);du(ft,It,yt?Lt[0]:void 0)}function _n(ft,It){var Lt=new Nl;Zn(ft,Lt,ou(It)),zs(Lt,Lt.g.end()),ft=new Uint8Array(Lt.h),It=Lt.i;for(var rt=It.length,yt=0,wt=0;wt<rt;wt++){var tt=It[wt];ft.set(tt,yt),yt+=tt.length}return Lt.i=[ft],ft}function Sr(ft,It){return{O:ft,P:It}}var Qn=Sr(function(ft,It,Lt){if(ft.h!==5)return!1;ft=ft.g;var rt=ft.h[ft.g],yt=ft.h[ft.g+1],wt=ft.h[ft.g+2],tt=ft.h[ft.g+3];return ft.g+=4,Po(ft),yt=(rt<<0|yt<<8|wt<<16|tt<<24)>>>0,ft=2*(yt>>31)+1,rt=yt>>>23&255,yt&=8388607,wo(It,Lt,rt==255?yt?NaN:1/0*ft:rt==0?ft*Math.pow(2,-149)*yt:ft*Math.pow(2,rt-150)*(yt+Math.pow(2,23))),!0},function(ft,It,Lt){if(It=Es(It,Lt),It!=null){_s(ft.g,8*Lt+5),ft=ft.g;var rt=It;rt=(Lt=0>rt?1:0)?-rt:rt,rt===0?0<1/rt?ss=Ds=0:(Ds=0,ss=2147483648):isNaN(rt)?(Ds=0,ss=2147483647):34028234663852886e22<rt?(Ds=0,ss=(Lt<<31|2139095040)>>>0):11754943508222875e-54>rt?(rt=Math.round(rt/Math.pow(2,-149)),Ds=0,ss=(Lt<<31|rt)>>>0):(It=Math.floor(Math.log(rt)/Math.LN2),rt*=Math.pow(2,-It),rt=Math.round(8388608*rt),16777216<=rt&&++It,Ds=0,ss=(Lt<<31|It+127<<23|rt&8388607)>>>0),Lt=ss,ft.g.push(Lt>>>0&255),ft.g.push(Lt>>>8&255),ft.g.push(Lt>>>16&255),ft.g.push(Lt>>>24&255)}}),hr=Sr(function(ft,It,Lt){if(ft.h!==0)return!1;for(var rt=ft.g,yt=128,wt=0,tt=ft=0;4>tt&&128<=yt;tt++)yt=rt.h[rt.g++],Po(rt),wt|=(yt&127)<<7*tt;if(128<=yt&&(yt=rt.h[rt.g++],Po(rt),wt|=(yt&127)<<28,ft|=(yt&127)>>4),128<=yt)for(tt=0;5>tt&&128<=yt;tt++)yt=rt.h[rt.g++],Po(rt),ft|=(yt&127)<<7*tt+3;if(128>yt)rt=wt>>>0,yt=ft>>>0,(ft=yt&2147483648)&&(rt=~rt+1>>>0,yt=~yt>>>0,rt==0&&(yt=yt+1>>>0)),rt=4294967296*yt+(rt>>>0);else throw Qo();return wo(It,Lt,ft?-rt:rt),!0},function(ft,It,Lt){if(It=Es(It,Lt),It!=null&&It!=null){_s(ft.g,8*Lt),ft=ft.g;var rt=It;for(Lt=0>rt,rt=Math.abs(rt),It=rt>>>0,rt=Math.floor((rt-It)/4294967296),rt>>>=0,Lt&&(rt=~rt>>>0,It=(~It>>>0)+1,4294967295<It&&(It=0,rt++,4294967295<rt&&(rt=0))),ss=It,Ds=rt,Lt=ss,It=Ds;0<It||127<Lt;)ft.g.push(Lt&127|128),Lt=(Lt>>>7|It<<25)>>>0,It>>>=7;ft.g.push(Lt)}}),Nr=Sr(function(ft,It,Lt){return ft.h!==0?!1:(wo(It,Lt,Ks(ft.g)),!0)},function(ft,It,Lt){if(It=Es(It,Lt),It!=null&&It!=null)if(_s(ft.g,8*Lt),ft=ft.g,Lt=It,0<=Lt)_s(ft,Lt);else{for(It=0;9>It;It++)ft.g.push(Lt&127|128),Lt>>=7;ft.g.push(1)}}),ao=Sr(function(ft,It,Lt){if(ft.h!==2)return!1;var rt=Ks(ft.g)>>>0;ft=ft.g;var yt=ft.g;ft.g+=rt,Po(ft),ft=ft.h;var wt;if(np)(wt=ku)||(wt=ku=new TextDecoder("utf-8",{fatal:!0})),wt=wt.decode(ft.subarray(yt,yt+rt));else{rt=yt+rt;for(var tt=[],mt=null,St,Zt,Qt;yt<rt;)St=ft[yt++],128>St?tt.push(St):224>St?yt>=rt?$s():(Zt=ft[yt++],194>St||(Zt&192)!==128?(yt--,$s()):tt.push((St&31)<<6|Zt&63)):240>St?yt>=rt-1?$s():(Zt=ft[yt++],(Zt&192)!==128||St===224&&160>Zt||St===237&&160<=Zt||((wt=ft[yt++])&192)!==128?(yt--,$s()):tt.push((St&15)<<12|(Zt&63)<<6|wt&63)):244>=St?yt>=rt-2?$s():(Zt=ft[yt++],(Zt&192)!==128||(St<<28)+(Zt-144)>>30||((wt=ft[yt++])&192)!==128||((Qt=ft[yt++])&192)!==128?(yt--,$s()):(St=(St&7)<<18|(Zt&63)<<12|(wt&63)<<6|Qt&63,St-=65536,tt.push((St>>10&1023)+55296,(St&1023)+56320))):$s(),8192<=tt.length&&(mt=tu(mt,tt),tt.length=0);wt=tu(mt,tt)}return wo(It,Lt,wt),!0},function(ft,It,Lt){if(It=Es(It,Lt),It!=null){var rt=!1;if(rt=rt===void 0?!1:rt,sp){if(rt&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(It))throw Error("Found an unpaired surrogate");It=(ju||(ju=new TextEncoder)).encode(It)}else{for(var yt=0,wt=new Uint8Array(3*It.length),tt=0;tt<It.length;tt++){var mt=It.charCodeAt(tt);if(128>mt)wt[yt++]=mt;else{if(2048>mt)wt[yt++]=mt>>6|192;else{if(55296<=mt&&57343>=mt){if(56319>=mt&&tt<It.length){var St=It.charCodeAt(++tt);if(56320<=St&&57343>=St){mt=1024*(mt-55296)+St-56320+65536,wt[yt++]=mt>>18|240,wt[yt++]=mt>>12&63|128,wt[yt++]=mt>>6&63|128,wt[yt++]=mt&63|128;continue}else tt--}if(rt)throw Error("Found an unpaired surrogate");mt=65533}wt[yt++]=mt>>12|224,wt[yt++]=mt>>6&63|128}wt[yt++]=mt&63|128}}It=wt.subarray(0,yt)}_s(ft.g,8*Lt+2),_s(ft.g,It.length),zs(ft,ft.g.end()),zs(ft,It)}}),Wo=Sr(function(ft,It,Lt,rt,yt){if(ft.h!==2)return!1;It=ns(It,Lt,rt),Lt=ft.g.i,rt=Ks(ft.g)>>>0;var wt=ft.g.g+rt,tt=wt-Lt;if(0>=tt&&(ft.g.i=wt,yt(It,ft),tt=wt-ft.g.g),tt)throw Error("Message parsing ended unexpectedly. Expected to read "+(rt+" bytes, instead read "+(rt-tt)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return ft.g.g=wt,ft.g.i=Lt,!0},function(ft,It,Lt,rt,yt){if(It=na(It,rt,Lt),It!=null)for(rt=0;rt<It.length;rt++){var wt=ft;_s(wt.g,8*Lt+2);var tt=wt.g.end();zs(wt,tt),tt.push(wt.h),wt=tt,yt(It[rt],ft),tt=ft;var mt=wt.pop();for(mt=tt.h+tt.g.length()-mt;127<mt;)wt.push(mt&127|128),mt>>>=7,tt.h++;wt.push(mt),tt.h++}});function Ao(){Ul.apply(this,arguments)}if(Ar(Ao,Ul),zo){var es={};Object.defineProperties(Ao,(es[Symbol.hasInstance]=uu(Object[Symbol.hasInstance]),es))}function Lo(ft){Ao.call(this,ft)}Ar(Lo,Ao);function go(){return[1,Nr,2,Qn,3,ao,4,ao]}function No(ft){Ao.call(this,ft,-1,ps)}Ar(No,Ao),No.prototype.addClassification=function(ft,It){return ns(this,1,Lo,ft,It),this};function $o(){return[1,Wo,Lo,go]}var ps=[1];function Ts(ft){Ao.call(this,ft)}Ar(Ts,Ao);function As(){return[1,Qn,2,Qn,3,Qn,4,Qn,5,Qn]}function _a(ft){Ao.call(this,ft,-1,Vt)}Ar(_a,Ao);function xt(){return[1,Wo,Ts,As]}var Vt=[1];function Wt(ft){Ao.call(this,ft)}Ar(Wt,Ao);function gn(){return[1,Qn,2,Qn,3,Qn,4,Qn,5,Qn,6,hr]}var Nn=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],er=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Pn=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],ar=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Rr=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],pt=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Mt=[].concat(En(Nn),En(er),En(Pn),En(ar),En(Rr),En(pt));function Ht(ft,It,Lt){if(Lt=ft.createShader(Lt===0?ft.VERTEX_SHADER:ft.FRAGMENT_SHADER),ft.shaderSource(Lt,It),ft.compileShader(Lt),!ft.getShaderParameter(Lt,ft.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+ft.getShaderInfoLog(Lt));return Lt}function cn(ft){return na(ft,Lo,1).map(function(It){return{index:ls(It,1),ga:cs(It,2),label:Es(It,3)!=null?ur(It,3):void 0,displayName:Es(It,4)!=null?ur(It,4):void 0}})}function xn(ft){return{x:cs(ft,1),y:cs(ft,2),z:cs(ft,3),visibility:Es(ft,4)!=null?cs(ft,4):void 0}}function Xn(ft,It){this.h=ft,this.g=It,this.l=0}function Gn(ft,It,Lt){return dr(ft,It),typeof ft.g.canvas.transferToImageBitmap=="function"?o.resolve(ft.g.canvas.transferToImageBitmap()):Lt?o.resolve(ft.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(ft.g.canvas):(ft.i===void 0&&(ft.i=document.createElement("canvas")),new o(function(rt){ft.i.height=ft.g.canvas.height,ft.i.width=ft.g.canvas.width,ft.i.getContext("2d",{}).drawImage(ft.g.canvas,0,0,ft.g.canvas.width,ft.g.canvas.height),rt(ft.i)}))}function dr(ft,It){var Lt=ft.g;if(ft.o===void 0){var rt=Ht(Lt,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),yt=Ht(Lt,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),wt=Lt.createProgram();if(Lt.attachShader(wt,rt),Lt.attachShader(wt,yt),Lt.linkProgram(wt),!Lt.getProgramParameter(wt,Lt.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Lt.getProgramInfoLog(wt));rt=ft.o=wt,Lt.useProgram(rt),yt=Lt.getUniformLocation(rt,"sampler0"),ft.j={K:Lt.getAttribLocation(rt,"aVertex"),J:Lt.getAttribLocation(rt,"aTex"),ma:yt},ft.u=Lt.createBuffer(),Lt.bindBuffer(Lt.ARRAY_BUFFER,ft.u),Lt.enableVertexAttribArray(ft.j.K),Lt.vertexAttribPointer(ft.j.K,2,Lt.FLOAT,!1,0,0),Lt.bufferData(Lt.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Lt.STATIC_DRAW),Lt.bindBuffer(Lt.ARRAY_BUFFER,null),ft.s=Lt.createBuffer(),Lt.bindBuffer(Lt.ARRAY_BUFFER,ft.s),Lt.enableVertexAttribArray(ft.j.J),Lt.vertexAttribPointer(ft.j.J,2,Lt.FLOAT,!1,0,0),Lt.bufferData(Lt.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Lt.STATIC_DRAW),Lt.bindBuffer(Lt.ARRAY_BUFFER,null),Lt.uniform1i(yt,0)}rt=ft.j,Lt.useProgram(ft.o),Lt.canvas.width=It.width,Lt.canvas.height=It.height,Lt.viewport(0,0,It.width,It.height),Lt.activeTexture(Lt.TEXTURE0),ft.h.bindTexture2d(It.glName),Lt.enableVertexAttribArray(rt.K),Lt.bindBuffer(Lt.ARRAY_BUFFER,ft.u),Lt.vertexAttribPointer(rt.K,2,Lt.FLOAT,!1,0,0),Lt.enableVertexAttribArray(rt.J),Lt.bindBuffer(Lt.ARRAY_BUFFER,ft.s),Lt.vertexAttribPointer(rt.J,2,Lt.FLOAT,!1,0,0),Lt.bindFramebuffer(Lt.DRAW_FRAMEBUFFER?Lt.DRAW_FRAMEBUFFER:Lt.FRAMEBUFFER,null),Lt.clearColor(0,0,0,0),Lt.clear(Lt.COLOR_BUFFER_BIT),Lt.colorMask(!0,!0,!0,!0),Lt.drawArrays(Lt.TRIANGLE_FAN,0,4),Lt.disableVertexAttribArray(rt.K),Lt.disableVertexAttribArray(rt.J),Lt.bindBuffer(Lt.ARRAY_BUFFER,null),ft.h.bindTexture2d(0)}function sr(ft){this.g=ft}var Fr=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function _r(ft,It){return It+ft}function Mo(ft,It){window[ft]=It}function co(ft){var It=document.createElement("script");return It.setAttribute("src",ft),It.setAttribute("crossorigin","anonymous"),new o(function(Lt){It.addEventListener("load",function(){Lt()},!1),It.addEventListener("error",function(){Lt()},!1),document.body.appendChild(It)})}function Lr(){return Hr(function(ft){switch(ft.g){case 1:return ft.o=2,qn(ft,WebAssembly.instantiate(Fr),4);case 4:ft.g=3,ft.o=0;break;case 2:return ft.o=0,ft.j=null,ft.return(!1);case 3:return ft.return(!0)}})}function _i(ft){if(this.g=ft,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=o.resolve(),this.Y="",this.C={},this.locateFile=ft&&ft.locateFile||_r,typeof window=="object")var It=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")It=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.$=It,ft.options){It=ln(Object.keys(ft.options));for(var Lt=It.next();!Lt.done;Lt=It.next()){Lt=Lt.value;var rt=ft.options[Lt].default;rt!==void 0&&(this.j[Lt]=typeof rt=="function"?rt():rt)}}}at=_i.prototype,at.close=function(){return this.i&&this.i.delete(),o.resolve()};function uo(ft){var It,Lt,rt,yt,wt,tt,mt,St,Zt,Qt,un;return Hr(function(mn){switch(mn.g){case 1:return ft.Z?(It=ft.g.files===void 0?[]:typeof ft.g.files=="function"?ft.g.files(ft.j):ft.g.files,qn(mn,Lr(),2)):mn.return();case 2:if(Lt=mn.h,typeof window=="object")return Mo("createMediapipeSolutionsWasm",{locateFile:ft.locateFile}),Mo("createMediapipeSolutionsPackedAssets",{locateFile:ft.locateFile}),tt=It.filter(function(Ln){return Ln.data!==void 0}),mt=It.filter(function(Ln){return Ln.data===void 0}),St=o.all(tt.map(function(Ln){var Kn=gt(ft,Ln.url);if(Ln.path!==void 0){var tr=Ln.path;Kn=Kn.then(function(nr){return ft.overrideFile(tr,nr),o.resolve(nr)})}return Kn})),Zt=o.all(mt.map(function(Ln){return Ln.simd===void 0||Ln.simd&&Lt||!Ln.simd&&!Lt?co(ft.locateFile(Ln.url,ft.$)):o.resolve()})).then(function(){var Ln,Kn,tr;return Hr(function(nr){if(nr.g==1)return Ln=window.createMediapipeSolutionsWasm,Kn=window.createMediapipeSolutionsPackedAssets,tr=ft,qn(nr,Ln(Kn),2);tr.h=nr.h,nr.g=0})}),Qt=function(){return Hr(function(Ln){return ft.g.graph&&ft.g.graph.url?Ln=qn(Ln,gt(ft,ft.g.graph.url),0):(Ln.g=0,Ln=void 0),Ln})}(),qn(mn,o.all([Zt,St,Qt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return rt=It.filter(function(Ln){return Ln.simd===void 0||Ln.simd&&Lt||!Ln.simd&&!Lt}).map(function(Ln){return ft.locateFile(Ln.url,ft.$)}),importScripts.apply(null,En(rt)),yt=ft,qn(mn,createMediapipeSolutionsWasm(Module),6);case 6:yt.h=mn.h,ft.l=new OffscreenCanvas(1,1),ft.h.canvas=ft.l,wt=ft.h.GL.createContext(ft.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),ft.h.GL.makeContextCurrent(wt),mn.g=4;break;case 7:if(ft.l=document.createElement("canvas"),un=ft.l.getContext("webgl2",{}),!un&&(un=ft.l.getContext("webgl",{}),!un))return alert("Failed to create WebGL canvas context when passing video frame."),mn.return();ft.G=un,ft.h.canvas=ft.l,ft.h.createContext(ft.l,!0,!0,{});case 4:ft.i=new ft.h.SolutionWasm,ft.Z=!1,mn.g=0}})}function Co(ft){var It,Lt,rt,yt,wt,tt,mt,St;return Hr(function(Zt){if(Zt.g==1){if(ft.g.graph&&ft.g.graph.url&&ft.Y===ft.g.graph.url)return Zt.return();if(ft.s=!0,!ft.g.graph||!ft.g.graph.url){Zt.g=2;return}return ft.Y=ft.g.graph.url,qn(Zt,gt(ft,ft.g.graph.url),3)}for(Zt.g!=2&&(It=Zt.h,ft.i.loadGraph(It)),Lt=ln(Object.keys(ft.C)),rt=Lt.next();!rt.done;rt=Lt.next())yt=rt.value,ft.i.overrideFile(yt,ft.C[yt]);if(ft.C={},ft.g.listeners)for(wt=ln(ft.g.listeners),tt=wt.next();!tt.done;tt=wt.next())mt=tt.value,rn(ft,mt);St=ft.j,ft.j={},ft.setOptions(St),Zt.g=0})}at.reset=function(){var ft=this;return Hr(function(It){ft.i&&(ft.i.reset(),ft.o={},ft.u={}),It.g=0})},at.setOptions=function(ft,It){var Lt=this;if(It=It||this.g.options){for(var rt=[],yt=[],wt={},tt=ln(Object.keys(ft)),mt=tt.next();!mt.done;wt={R:wt.R,S:wt.S},mt=tt.next()){var St=mt.value;St in this.j&&this.j[St]===ft[St]||(this.j[St]=ft[St],mt=It[St],mt!==void 0&&(mt.onChange&&(wt.R=mt.onChange,wt.S=ft[St],rt.push(function(Zt){return function(){var Qt;return Hr(function(un){if(un.g==1)return qn(un,Zt.R(Zt.S),2);Qt=un.h,Qt===!0&&(Lt.s=!0),un.g=0})}}(wt))),mt.graphOptionXref&&(St={valueNumber:mt.type===1?ft[St]:0,valueBoolean:mt.type===0?ft[St]:!1,valueString:mt.type===2?ft[St]:""},mt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),mt.graphOptionXref),St),yt.push(mt))))}(rt.length!==0||yt.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(yt),this.A=(this.A===void 0?[]:this.A).concat(rt))}};function Io(ft){var It,Lt,rt,yt,wt,tt,mt;return Hr(function(St){switch(St.g){case 1:if(!ft.s)return St.return();if(!ft.A){St.g=2;break}It=ln(ft.A),Lt=It.next();case 3:if(Lt.done){St.g=5;break}return rt=Lt.value,qn(St,rt(),4);case 4:Lt=It.next(),St.g=3;break;case 5:ft.A=void 0;case 2:if(ft.B){for(yt=new ft.h.GraphOptionChangeRequestList,wt=ln(ft.B),tt=wt.next();!tt.done;tt=wt.next())mt=tt.value,yt.push_back(mt);ft.i.changeOptions(yt),yt.delete(),ft.B=void 0}ft.s=!1,St.g=0}})}at.initialize=function(){var ft=this;return Hr(function(It){return It.g==1?qn(It,uo(ft),2):It.g!=3?qn(It,Co(ft),3):qn(It,Io(ft),0)})};function gt(ft,It){var Lt,rt;return Hr(function(yt){return It in ft.H?yt.return(ft.H[It]):(Lt=ft.locateFile(It,""),rt=fetch(Lt).then(function(wt){return wt.arrayBuffer()}),ft.H[It]=rt,yt.return(rt))})}at.overrideFile=function(ft,It){this.i?this.i.overrideFile(ft,It):this.C[ft]=It},at.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},at.send=function(ft,It){var Lt=this,rt,yt,wt,tt,mt,St,Zt,Qt,un;return Hr(function(mn){switch(mn.g){case 1:return Lt.g.inputs?(rt=1e3*(It??performance.now()),qn(mn,Lt.D,2)):mn.return();case 2:return qn(mn,Lt.initialize(),3);case 3:for(yt=new Lt.h.PacketDataList,wt=ln(Object.keys(ft)),tt=wt.next();!tt.done;tt=wt.next())if(mt=tt.value,St=Lt.g.inputs[mt]){e:{var Ln=ft[mt];switch(St.type){case"video":var Kn=Lt.o[St.stream];if(Kn||(Kn=new Xn(Lt.h,Lt.G),Lt.o[St.stream]=Kn),Kn.l===0&&(Kn.l=Kn.h.createTexture()),typeof HTMLVideoElement<"u"&&Ln instanceof HTMLVideoElement)var tr=Ln.videoWidth,nr=Ln.videoHeight;else typeof HTMLImageElement<"u"&&Ln instanceof HTMLImageElement?(tr=Ln.naturalWidth,nr=Ln.naturalHeight):(tr=Ln.width,nr=Ln.height);nr={glName:Kn.l,width:tr,height:nr},tr=Kn.g,tr.canvas.width=nr.width,tr.canvas.height=nr.height,tr.activeTexture(tr.TEXTURE0),Kn.h.bindTexture2d(Kn.l),tr.texImage2D(tr.TEXTURE_2D,0,tr.RGBA,tr.RGBA,tr.UNSIGNED_BYTE,Ln),Kn.h.bindTexture2d(0),Kn=nr;break e;case"detections":for(Kn=Lt.o[St.stream],Kn||(Kn=new sr(Lt.h),Lt.o[St.stream]=Kn),Kn.data||(Kn.data=new Kn.g.DetectionListData),Kn.data.reset(Ln.length),nr=0;nr<Ln.length;++nr){tr=Ln[nr];var Cr=Kn.data,Gr=Cr.setBoundingBox,kr=nr,Kr=tr.boundingBox,Yr=new Wt;if(wo(Yr,1,Kr.xCenter),wo(Yr,2,Kr.yCenter),wo(Yr,3,Kr.height),wo(Yr,4,Kr.width),wo(Yr,5,Kr.rotation),wo(Yr,6,Kr.rectId),Kr=_n(Yr,gn),Gr.call(Cr,kr,Kr),tr.landmarks)for(Cr=0;Cr<tr.landmarks.length;++Cr){Yr=tr.landmarks[Cr];var Uo=!!Yr.visibility;Gr=Kn.data,kr=Gr.addNormalizedLandmark,Kr=nr,Yr=Object.assign(Object.assign({},Yr),{visibility:Uo?Yr.visibility:0}),Uo=new Ts,wo(Uo,1,Yr.x),wo(Uo,2,Yr.y),wo(Uo,3,Yr.z),Yr.visibility&&wo(Uo,4,Yr.visibility),Yr=_n(Uo,As),kr.call(Gr,Kr,Yr)}if(tr.V)for(Cr=0;Cr<tr.V.length;++Cr)Gr=Kn.data,kr=Gr.addClassification,Kr=nr,Yr=tr.V[Cr],Uo=new Lo,wo(Uo,2,Yr.ga),Yr.index&&wo(Uo,1,Yr.index),Yr.label&&wo(Uo,3,Yr.label),Yr.displayName&&wo(Uo,4,Yr.displayName),Yr=_n(Uo,go),kr.call(Gr,Kr,Yr)}Kn=Kn.data;break e;default:Kn={}}}switch(Zt=Kn,Qt=St.stream,St.type){case"video":yt.pushTexture2d(Object.assign(Object.assign({},Zt),{stream:Qt,timestamp:rt}));break;case"detections":un=Zt,un.stream=Qt,un.timestamp=rt,yt.pushDetectionList(un);break;default:throw Error("Unknown input config type: '"+St.type+"'")}}return Lt.i.send(yt),qn(mn,Lt.D,4);case 4:yt.delete(),mn.g=0}})};function kt(ft,It,Lt){var rt,yt,wt,tt,mt,St,Zt,Qt,un,mn,Ln,Kn,tr,nr;return Hr(function(Cr){switch(Cr.g){case 1:if(!Lt)return Cr.return(It);for(rt={},yt=0,wt=ln(Object.keys(Lt)),tt=wt.next();!tt.done;tt=wt.next())mt=tt.value,St=Lt[mt],typeof St!="string"&&St.type==="texture"&&It[St.stream]!==void 0&&++yt;1<yt&&(ft.I=!1),Zt=ln(Object.keys(Lt)),tt=Zt.next();case 2:if(tt.done){Cr.g=4;break}if(Qt=tt.value,un=Lt[Qt],typeof un=="string")return tr=rt,nr=Qt,qn(Cr,Yt(ft,Qt,It[un]),14);if(mn=It[un.stream],un.type==="detection_list"){if(mn){for(var Gr=mn.getRectList(),kr=mn.getLandmarksList(),Kr=mn.getClassificationsList(),Yr=[],Uo=0;Uo<Gr.size();++Uo){var us=jt(Gr.get(Uo),Wt,gn);us={boundingBox:{xCenter:cs(us,1),yCenter:cs(us,2),height:cs(us,3),width:cs(us,4),rotation:cs(us,5,0),rectId:ls(us,6)},landmarks:na(jt(kr.get(Uo),_a,xt),Ts,1).map(xn),V:cn(jt(Kr.get(Uo),No,$o))},Yr.push(us)}Gr=Yr}else Gr=[];rt[Qt]=Gr,Cr.g=7;break}if(un.type==="proto_list"){if(mn){for(Gr=Array(mn.size()),kr=0;kr<mn.size();kr++)Gr[kr]=mn.get(kr);mn.delete()}else Gr=[];rt[Qt]=Gr,Cr.g=7;break}if(mn===void 0){Cr.g=3;break}if(un.type==="float_list"){rt[Qt]=mn,Cr.g=7;break}if(un.type==="proto"){rt[Qt]=mn,Cr.g=7;break}if(un.type!=="texture")throw Error("Unknown output config type: '"+un.type+"'");return Ln=ft.u[Qt],Ln||(Ln=new Xn(ft.h,ft.G),ft.u[Qt]=Ln),qn(Cr,Gn(Ln,mn,ft.I),13);case 13:Kn=Cr.h,rt[Qt]=Kn;case 7:un.transform&&rt[Qt]&&(rt[Qt]=un.transform(rt[Qt])),Cr.g=3;break;case 14:tr[nr]=Cr.h;case 3:tt=Zt.next(),Cr.g=2;break;case 4:return Cr.return(rt)}})}function Yt(ft,It,Lt){var rt;return Hr(function(yt){return typeof Lt=="number"||Lt instanceof Uint8Array||Lt instanceof ft.h.Uint8BlobList?yt.return(Lt):Lt instanceof ft.h.Texture2dDataOut?(rt=ft.u[It],rt||(rt=new Xn(ft.h,ft.G),ft.u[It]=rt),yt.return(Gn(rt,Lt,ft.I))):yt.return(void 0)})}function rn(ft,It){for(var Lt=It.name||"$",rt=[].concat(En(It.wants)),yt=new ft.h.StringList,wt=ln(It.wants),tt=wt.next();!tt.done;tt=wt.next())yt.push_back(tt.value);wt=ft.h.PacketListener.implement({onResults:function(mt){for(var St={},Zt=0;Zt<It.wants.length;++Zt)St[rt[Zt]]=mt.get(Zt);var Qt=ft.listeners[Lt];Qt&&(ft.D=kt(ft,St,It.outs).then(function(un){un=Qt(un);for(var mn=0;mn<It.wants.length;++mn){var Ln=St[rt[mn]];typeof Ln=="object"&&Ln.hasOwnProperty&&Ln.hasOwnProperty("delete")&&Ln.delete()}un&&(ft.D=un)}))}}),ft.i.attachMultiListener(yt,wt),yt.delete()}at.onResults=function(ft,It){this.listeners[It||"$"]=ft},Oo("Solution",_i),Oo("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"});function wn(ft){var It=this;ft=ft||{};var Lt={url:"face_detection_short.binarypb"},rt={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new _i({locateFile:ft.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:Lt,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(yt){var wt,tt,mt,St,Zt,Qt;return Hr(function(un){switch(un.g){case 1:wt=yt==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"],tt=ln(wt),mt=tt.next();case 2:if(mt.done){un.g=4;break}return St=mt.value,Zt="third_party/mediapipe/modules/face_detection/"+St,qn(un,gt(It.g,St),5);case 5:Qt=un.h,It.g.overrideFile(Zt,Qt),mt=tt.next(),un.g=2;break;case 4:return Lt.url=yt==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",rt.graphOptionXref.calculatorName=yt==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",un.return(!0)}})}},minDetectionConfidence:rt}})}at=wn.prototype,at.close=function(){return this.g.close(),o.resolve()},at.onResults=function(ft){this.g.onResults(ft)},at.initialize=function(){var ft=this;return Hr(function(It){return qn(It,ft.g.initialize(),0)})},at.reset=function(){this.g.reset()},at.send=function(ft){var It=this;return Hr(function(Lt){return qn(Lt,It.g.send(ft),0)})},at.setOptions=function(ft){this.g.setOptions(ft)},Oo("FaceDetection",wn),Oo("FACEDETECTION_LIPS",Nn),Oo("FACEDETECTION_LEFT_EYE",er),Oo("FACEDETECTION_LEFT_EYEBROW",Pn),Oo("FACEDETECTION_RIGHT_EYE",ar),Oo("FACEDETECTION_RIGHT_EYEBROW",Rr),Oo("FACEDETECTION_FACE_OVAL",pt),Oo("FACEDETECTION_CONTOURS",Mt),Oo("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Oo("VERSION","0.4.1646425229")}).call(up);const Hp={};(function(){var at;function ot(xt){var Vt=0;return function(){return Vt<xt.length?{done:!1,value:xt[Vt++]}:{done:!0}}}var ut=typeof Object.defineProperties=="function"?Object.defineProperty:function(xt,Vt,Wt){return xt==Array.prototype||xt==Object.prototype||(xt[Vt]=Wt.value),xt};function Ot(xt){xt=[typeof globalThis=="object"&&globalThis,xt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Vt=0;Vt<xt.length;++Vt){var Wt=xt[Vt];if(Wt&&Wt.Math==Math)return Wt}throw Error("Cannot find global object")}var Gt=Ot(this);function en(xt,Vt){if(Vt)e:{var Wt=Gt;xt=xt.split(".");for(var gn=0;gn<xt.length-1;gn++){var Nn=xt[gn];if(!(Nn in Wt))break e;Wt=Wt[Nn]}xt=xt[xt.length-1],gn=Wt[xt],Vt=Vt(gn),Vt!=gn&&Vt!=null&&ut(Wt,xt,{configurable:!0,writable:!0,value:Vt})}}en("Symbol",function(xt){function Vt(er){if(this instanceof Vt)throw new TypeError("Symbol is not a constructor");return new Wt(gn+(er||"")+"_"+Nn++,er)}function Wt(er,Pn){this.g=er,ut(this,"description",{configurable:!0,writable:!0,value:Pn})}if(xt)return xt;Wt.prototype.toString=function(){return this.g};var gn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Nn=0;return Vt}),en("Symbol.iterator",function(xt){if(xt)return xt;xt=Symbol("Symbol.iterator");for(var Vt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Wt=0;Wt<Vt.length;Wt++){var gn=Gt[Vt[Wt]];typeof gn=="function"&&typeof gn.prototype[xt]!="function"&&ut(gn.prototype,xt,{configurable:!0,writable:!0,value:function(){return hn(ot(this))}})}return xt});function hn(xt){return xt={next:xt},xt[Symbol.iterator]=function(){return this},xt}function ln(xt){var Vt=typeof Symbol<"u"&&Symbol.iterator&&xt[Symbol.iterator];return Vt?Vt.call(xt):{next:ot(xt)}}function En(xt){if(!(xt instanceof Array)){xt=ln(xt);for(var Vt,Wt=[];!(Vt=xt.next()).done;)Wt.push(Vt.value);xt=Wt}return xt}var rr=typeof Object.create=="function"?Object.create:function(xt){function Vt(){}return Vt.prototype=xt,new Vt},br;if(typeof Object.setPrototypeOf=="function")br=Object.setPrototypeOf;else{var Tr;e:{var ho={a:!0},Eo={};try{Eo.__proto__=ho,Tr=Eo.a;break e}catch{}Tr=!1}br=Tr?function(xt,Vt){if(xt.__proto__=Vt,xt.__proto__!==Vt)throw new TypeError(xt+" is not extensible");return xt}:null}var Ir=br;function Ar(xt,Vt){if(xt.prototype=rr(Vt.prototype),xt.prototype.constructor=xt,Ir)Ir(xt,Vt);else for(var Wt in Vt)if(Wt!="prototype")if(Object.defineProperties){var gn=Object.getOwnPropertyDescriptor(Vt,Wt);gn&&Object.defineProperty(xt,Wt,gn)}else xt[Wt]=Vt[Wt];xt.ea=Vt.prototype}function ko(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Vo(xt){if(xt.l)throw new TypeError("Generator is already running");xt.l=!0}ko.prototype.o=function(xt){this.h=xt};function rs(xt,Vt){xt.j={U:Vt,V:!0},xt.g=xt.m||xt.s}ko.prototype.return=function(xt){this.j={return:xt},this.g=this.s};function qn(xt,Vt,Wt){return xt.g=Wt,{value:Vt}}function bu(xt){this.g=new ko,this.h=xt}function cu(xt,Vt){Vo(xt.g);var Wt=xt.g.i;return Wt?Us(xt,"return"in Wt?Wt.return:function(gn){return{value:gn,done:!0}},Vt,xt.g.return):(xt.g.return(Vt),qo(xt))}function Us(xt,Vt,Wt,gn){try{var Nn=Vt.call(xt.g.i,Wt);if(!(Nn instanceof Object))throw new TypeError("Iterator result "+Nn+" is not an object");if(!Nn.done)return xt.g.l=!1,Nn;var er=Nn.value}catch(Pn){return xt.g.i=null,rs(xt.g,Pn),qo(xt)}return xt.g.i=null,gn.call(xt.g,er),qo(xt)}function qo(xt){for(;xt.g.g;)try{var Vt=xt.h(xt.g);if(Vt)return xt.g.l=!1,{value:Vt.value,done:!1}}catch(Wt){xt.g.h=void 0,rs(xt.g,Wt)}if(xt.g.l=!1,xt.g.j){if(Vt=xt.g.j,xt.g.j=null,Vt.V)throw Vt.U;return{value:Vt.return,done:!0}}return{value:void 0,done:!0}}function wp(xt){this.next=function(Vt){return Vo(xt.g),xt.g.i?Vt=Us(xt,xt.g.i.next,Vt,xt.g.o):(xt.g.o(Vt),Vt=qo(xt)),Vt},this.throw=function(Vt){return Vo(xt.g),xt.g.i?Vt=Us(xt,xt.g.i.throw,Vt,xt.g.o):(rs(xt.g,Vt),Vt=qo(xt)),Vt},this.return=function(Vt){return cu(xt,Vt)},this[Symbol.iterator]=function(){return this}}function vs(xt,Vt){return Vt=new wp(new bu(Vt)),Ir&&xt.prototype&&Ir(Vt,xt.prototype),Vt}function Hr(xt,Vt){xt instanceof String&&(xt+="");var Wt=0,gn=!1,Nn={next:function(){if(!gn&&Wt<xt.length){var er=Wt++;return{value:Vt(er,xt[er]),done:!1}}return gn=!0,{done:!0,value:void 0}}};return Nn[Symbol.iterator]=function(){return Nn},Nn}var Su=typeof Object.assign=="function"?Object.assign:function(xt,Vt){for(var Wt=1;Wt<arguments.length;Wt++){var gn=arguments[Wt];if(gn)for(var Nn in gn)Object.prototype.hasOwnProperty.call(gn,Nn)&&(xt[Nn]=gn[Nn])}return xt};en("Object.assign",function(xt){return xt||Su}),en("Promise",function(xt){function Vt(Pn){this.h=0,this.i=void 0,this.g=[],this.o=!1;var ar=this.j();try{Pn(ar.resolve,ar.reject)}catch(Rr){ar.reject(Rr)}}function Wt(){this.g=null}function gn(Pn){return Pn instanceof Vt?Pn:new Vt(function(ar){ar(Pn)})}if(xt)return xt;Wt.prototype.h=function(Pn){if(this.g==null){this.g=[];var ar=this;this.i(function(){ar.l()})}this.g.push(Pn)};var Nn=Gt.setTimeout;Wt.prototype.i=function(Pn){Nn(Pn,0)},Wt.prototype.l=function(){for(;this.g&&this.g.length;){var Pn=this.g;this.g=[];for(var ar=0;ar<Pn.length;++ar){var Rr=Pn[ar];Pn[ar]=null;try{Rr()}catch(pt){this.j(pt)}}}this.g=null},Wt.prototype.j=function(Pn){this.i(function(){throw Pn})},Vt.prototype.j=function(){function Pn(pt){return function(Mt){Rr||(Rr=!0,pt.call(ar,Mt))}}var ar=this,Rr=!1;return{resolve:Pn(this.C),reject:Pn(this.l)}},Vt.prototype.C=function(Pn){if(Pn===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Pn instanceof Vt)this.F(Pn);else{e:switch(typeof Pn){case"object":var ar=Pn!=null;break e;case"function":ar=!0;break e;default:ar=!1}ar?this.u(Pn):this.m(Pn)}},Vt.prototype.u=function(Pn){var ar=void 0;try{ar=Pn.then}catch(Rr){this.l(Rr);return}typeof ar=="function"?this.G(ar,Pn):this.m(Pn)},Vt.prototype.l=function(Pn){this.s(2,Pn)},Vt.prototype.m=function(Pn){this.s(1,Pn)},Vt.prototype.s=function(Pn,ar){if(this.h!=0)throw Error("Cannot settle("+Pn+", "+ar+"): Promise already settled in state"+this.h);this.h=Pn,this.i=ar,this.h===2&&this.D(),this.A()},Vt.prototype.D=function(){var Pn=this;Nn(function(){if(Pn.B()){var ar=Gt.console;typeof ar<"u"&&ar.error(Pn.i)}},1)},Vt.prototype.B=function(){if(this.o)return!1;var Pn=Gt.CustomEvent,ar=Gt.Event,Rr=Gt.dispatchEvent;return typeof Rr>"u"?!0:(typeof Pn=="function"?Pn=new Pn("unhandledrejection",{cancelable:!0}):typeof ar=="function"?Pn=new ar("unhandledrejection",{cancelable:!0}):(Pn=Gt.document.createEvent("CustomEvent"),Pn.initCustomEvent("unhandledrejection",!1,!0,Pn)),Pn.promise=this,Pn.reason=this.i,Rr(Pn))},Vt.prototype.A=function(){if(this.g!=null){for(var Pn=0;Pn<this.g.length;++Pn)er.h(this.g[Pn]);this.g=null}};var er=new Wt;return Vt.prototype.F=function(Pn){var ar=this.j();Pn.J(ar.resolve,ar.reject)},Vt.prototype.G=function(Pn,ar){var Rr=this.j();try{Pn.call(ar,Rr.resolve,Rr.reject)}catch(pt){Rr.reject(pt)}},Vt.prototype.then=function(Pn,ar){function Rr(cn,xn){return typeof cn=="function"?function(Xn){try{pt(cn(Xn))}catch(Gn){Mt(Gn)}}:xn}var pt,Mt,Ht=new Vt(function(cn,xn){pt=cn,Mt=xn});return this.J(Rr(Pn,pt),Rr(ar,Mt)),Ht},Vt.prototype.catch=function(Pn){return this.then(void 0,Pn)},Vt.prototype.J=function(Pn,ar){function Rr(){switch(pt.h){case 1:Pn(pt.i);break;case 2:ar(pt.i);break;default:throw Error("Unexpected state: "+pt.h)}}var pt=this;this.g==null?er.h(Rr):this.g.push(Rr),this.o=!0},Vt.resolve=gn,Vt.reject=function(Pn){return new Vt(function(ar,Rr){Rr(Pn)})},Vt.race=function(Pn){return new Vt(function(ar,Rr){for(var pt=ln(Pn),Mt=pt.next();!Mt.done;Mt=pt.next())gn(Mt.value).J(ar,Rr)})},Vt.all=function(Pn){var ar=ln(Pn),Rr=ar.next();return Rr.done?gn([]):new Vt(function(pt,Mt){function Ht(Xn){return function(Gn){cn[Xn]=Gn,xn--,xn==0&&pt(cn)}}var cn=[],xn=0;do cn.push(void 0),xn++,gn(Rr.value).J(Ht(cn.length-1),Mt),Rr=ar.next();while(!Rr.done)})},Vt}),en("Object.is",function(xt){return xt||function(Vt,Wt){return Vt===Wt?Vt!==0||1/Vt===1/Wt:Vt!==Vt&&Wt!==Wt}}),en("Array.prototype.includes",function(xt){return xt||function(Vt,Wt){var gn=this;gn instanceof String&&(gn=String(gn));var Nn=gn.length;for(Wt=Wt||0,0>Wt&&(Wt=Math.max(Wt+Nn,0));Wt<Nn;Wt++){var er=gn[Wt];if(er===Vt||Object.is(er,Vt))return!0}return!1}}),en("String.prototype.includes",function(xt){return xt||function(Vt,Wt){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Vt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Vt,Wt||0)!==-1}}),en("Array.prototype.keys",function(xt){return xt||function(){return Hr(this,function(Vt){return Vt})}});var Op=this||self;function Hs(xt,Vt){xt=xt.split(".");var Wt=Op;xt[0]in Wt||typeof Wt.execScript>"u"||Wt.execScript("var "+xt[0]);for(var gn;xt.length&&(gn=xt.shift());)xt.length||Vt===void 0?Wt[gn]&&Wt[gn]!==Object.prototype[gn]?Wt=Wt[gn]:Wt=Wt[gn]={}:Wt[gn]=Vt}function Oo(xt,Vt){return Vt=String.fromCharCode.apply(null,Vt),xt==null?Vt:xt+Vt}var $s,tu=typeof TextDecoder<"u",ku,np=typeof TextEncoder<"u";function ju(xt){if(np)xt=(ku||(ku=new TextEncoder)).encode(xt);else{var Vt=void 0;Vt=Vt===void 0?!1:Vt;for(var Wt=0,gn=new Uint8Array(3*xt.length),Nn=0;Nn<xt.length;Nn++){var er=xt.charCodeAt(Nn);if(128>er)gn[Wt++]=er;else{if(2048>er)gn[Wt++]=er>>6|192;else{if(55296<=er&&57343>=er){if(56319>=er&&Nn<xt.length){var Pn=xt.charCodeAt(++Nn);if(56320<=Pn&&57343>=Pn){er=1024*(er-55296)+Pn-56320+65536,gn[Wt++]=er>>18|240,gn[Wt++]=er>>12&63|128,gn[Wt++]=er>>6&63|128,gn[Wt++]=er&63|128;continue}else Nn--}if(Vt)throw Error("Found an unpaired surrogate");er=65533}gn[Wt++]=er>>12|224,gn[Wt++]=er>>6&63|128}gn[Wt++]=er&63|128}}xt=gn.subarray(0,Wt)}return xt}var sp={},lu=null;function Eu(xt,Vt){Vt===void 0&&(Vt=0),Ll(),Vt=sp[Vt];for(var Wt=Array(Math.floor(xt.length/3)),gn=Vt[64]||"",Nn=0,er=0;Nn<xt.length-2;Nn+=3){var Pn=xt[Nn],ar=xt[Nn+1],Rr=xt[Nn+2],pt=Vt[Pn>>2];Pn=Vt[(Pn&3)<<4|ar>>4],ar=Vt[(ar&15)<<2|Rr>>6],Rr=Vt[Rr&63],Wt[er++]=pt+Pn+ar+Rr}switch(pt=0,Rr=gn,xt.length-Nn){case 2:pt=xt[Nn+1],Rr=Vt[(pt&15)<<2]||gn;case 1:xt=xt[Nn],Wt[er]=Vt[xt>>2]+Vt[(xt&3)<<4|pt>>4]+Rr+gn}return Wt.join("")}function fp(xt){var Vt=xt.length,Wt=3*Vt/4;Wt%3?Wt=Math.floor(Wt):"=.".indexOf(xt[Vt-1])!=-1&&(Wt="=.".indexOf(xt[Vt-2])!=-1?Wt-2:Wt-1);var gn=new Uint8Array(Wt),Nn=0;return rp(xt,function(er){gn[Nn++]=er}),gn.subarray(0,Nn)}function rp(xt,Vt){function Wt(Rr){for(;gn<xt.length;){var pt=xt.charAt(gn++),Mt=lu[pt];if(Mt!=null)return Mt;if(!/^[\s\xa0]*$/.test(pt))throw Error("Unknown base64 encoding at char: "+pt)}return Rr}Ll();for(var gn=0;;){var Nn=Wt(-1),er=Wt(0),Pn=Wt(64),ar=Wt(64);if(ar===64&&Nn===-1)break;Vt(Nn<<2|er>>4),Pn!=64&&(Vt(er<<4&240|Pn>>2),ar!=64&&Vt(Pn<<6&192|ar))}}function Ll(){if(!lu){lu={};for(var xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Vt=["+/=","+/","-_=","-_.","-_"],Wt=0;5>Wt;Wt++){var gn=xt.concat(Vt[Wt].split(""));sp[Wt]=gn;for(var Nn=0;Nn<gn.length;Nn++){var er=gn[Nn];lu[er]===void 0&&(lu[er]=Nn)}}}}var Zl=typeof Uint8Array.prototype.slice=="function",Uu;function Nu(xt,Vt,Wt){return Vt===Wt?Uu||(Uu=new Uint8Array(0)):Zl?xt.slice(Vt,Wt):new Uint8Array(xt.subarray(Vt,Wt))}var Ss=0,Qs=0;function Gl(xt,Vt){Vt=Vt===void 0?{}:Vt,Vt=Vt.v===void 0?!1:Vt.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=Vt,xt&&ss(this,xt)}function ss(xt,Vt){Vt=Vt.constructor===Uint8Array?Vt:Vt.constructor===ArrayBuffer?new Uint8Array(Vt):Vt.constructor===Array?new Uint8Array(Vt):Vt.constructor===String?fp(Vt):Vt instanceof Uint8Array?new Uint8Array(Vt.buffer,Vt.byteOffset,Vt.byteLength):new Uint8Array(0),xt.h=Vt,xt.l=0,xt.j=xt.h.length,xt.g=xt.l}Gl.prototype.reset=function(){this.g=this.l};function Ds(xt){for(var Vt=128,Wt=0,gn=0,Nn=0;4>Nn&&128<=Vt;Nn++)Vt=xt.h[xt.g++],Wt|=(Vt&127)<<7*Nn;if(128<=Vt&&(Vt=xt.h[xt.g++],Wt|=(Vt&127)<<28,gn|=(Vt&127)>>4),128<=Vt)for(Nn=0;5>Nn&&128<=Vt;Nn++)Vt=xt.h[xt.g++],gn|=(Vt&127)<<7*Nn+3;if(128>Vt)return xt=Wt>>>0,Vt=gn>>>0,(gn=Vt&2147483648)&&(xt=~xt+1>>>0,Vt=~Vt>>>0,xt==0&&(Vt=Vt+1>>>0)),xt=4294967296*Vt+(xt>>>0),gn?-xt:xt;xt.m=!0}Gl.prototype.i=function(){var xt=this.h,Vt=xt[this.g],Wt=Vt&127;return 128>Vt?(this.g+=1,Wt):(Vt=xt[this.g+1],Wt|=(Vt&127)<<7,128>Vt?(this.g+=2,Wt):(Vt=xt[this.g+2],Wt|=(Vt&127)<<14,128>Vt?(this.g+=3,Wt):(Vt=xt[this.g+3],Wt|=(Vt&127)<<21,128>Vt?(this.g+=4,Wt):(Vt=xt[this.g+4],Wt|=(Vt&15)<<28,128>Vt?(this.g+=5,Wt>>>0):(this.g+=5,128<=xt[this.g++]&&128<=xt[this.g++]&&128<=xt[this.g++]&&128<=xt[this.g++]&&this.g++,Wt)))))},Gl.prototype.o=function(){var xt=this.h[this.g],Vt=this.h[this.g+1],Wt=this.h[this.g+2],gn=this.h[this.g+3];return this.g+=4,Wt=(xt<<0|Vt<<8|Wt<<16|gn<<24)>>>0,xt=2*(Wt>>31)+1,Vt=Wt>>>23&255,Wt&=8388607,Vt==255?Wt?NaN:1/0*xt:Vt==0?xt*Math.pow(2,-149)*Wt:xt*Math.pow(2,Vt-150)*(Wt+Math.pow(2,23))};var nu=[];function Rl(){this.g=new Uint8Array(64),this.h=0}Rl.prototype.push=function(xt){if(!(this.h+1<this.g.length)){var Vt=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(Vt)}this.g[this.h++]=xt},Rl.prototype.length=function(){return this.h},Rl.prototype.end=function(){var xt=this.g,Vt=this.h;return this.h=0,Nu(xt,0,Vt)};function Qo(xt,Vt){for(;127<Vt;)xt.push(Vt&127|128),Vt>>>=7;xt.push(Vt)}function Ls(xt){var Vt={},Wt=Vt.N===void 0?!1:Vt.N;this.o={v:Vt.v===void 0?!1:Vt.v},this.N=Wt,Vt=this.o,nu.length?(Wt=nu.pop(),Vt&&(Wt.v=Vt.v),xt&&ss(Wt,xt),xt=Wt):xt=new Gl(xt,Vt),this.g=xt,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Ls.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function ba(xt){var Vt=xt.g;if((Vt=Vt.g==Vt.j)||(Vt=xt.j)||(Vt=xt.g,Vt=Vt.m||0>Vt.g||Vt.g>Vt.j),Vt)return!1;xt.m=xt.g.g,Vt=xt.g.i();var Wt=Vt&7;return Wt!=0&&Wt!=5&&Wt!=1&&Wt!=2&&Wt!=3&&Wt!=4?(xt.j=!0,!1):(xt.i=Vt,xt.l=Vt>>>3,xt.h=Wt,!0)}function Po(xt){switch(xt.h){case 0:if(xt.h!=0)Po(xt);else{for(xt=xt.g;xt.h[xt.g]&128;)xt.g++;xt.g++}break;case 1:xt.h!=1?Po(xt):(xt=xt.g,xt.g+=8);break;case 2:if(xt.h!=2)Po(xt);else{var Vt=xt.g.i();xt=xt.g,xt.g+=Vt}break;case 5:xt.h!=5?Po(xt):(xt=xt.g,xt.g+=4);break;case 3:Vt=xt.l;do{if(!ba(xt)){xt.j=!0;break}if(xt.h==4){xt.l!=Vt&&(xt.j=!0);break}Po(xt)}while(1);break;default:xt.j=!0}}function Ks(xt,Vt,Wt){var gn=xt.g.j,Nn=xt.g.i(),er=xt.g.g+Nn;if(xt.g.j=er,Wt(Vt,xt),Wt=er-xt.g.g,Wt!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+Nn+" bytes, instead read "+(Nn-Wt)+" bytes, either the data ended unexpectedly or the message misreported its own length");return xt.g.g=er,xt.g.j=gn,Vt}function Bo(xt){return xt.g.o()}function Os(xt){var Vt=xt.g.i();xt=xt.g;var Wt=xt.g;xt.g+=Vt,xt=xt.h;var gn;if(tu)(gn=$s)||(gn=$s=new TextDecoder("utf-8",{fatal:!1})),gn=gn.decode(xt.subarray(Wt,Wt+Vt));else{Vt=Wt+Vt;for(var Nn=[],er=null,Pn,ar,Rr;Wt<Vt;)Pn=xt[Wt++],128>Pn?Nn.push(Pn):224>Pn?Wt>=Vt?Nn.push(65533):(ar=xt[Wt++],194>Pn||(ar&192)!==128?(Wt--,Nn.push(65533)):Nn.push((Pn&31)<<6|ar&63)):240>Pn?Wt>=Vt-1?Nn.push(65533):(ar=xt[Wt++],(ar&192)!==128||Pn===224&&160>ar||Pn===237&&160<=ar||((gn=xt[Wt++])&192)!==128?(Wt--,Nn.push(65533)):Nn.push((Pn&15)<<12|(ar&63)<<6|gn&63)):244>=Pn?Wt>=Vt-2?Nn.push(65533):(ar=xt[Wt++],(ar&192)!==128||(Pn<<28)+(ar-144)>>30||((gn=xt[Wt++])&192)!==128||((Rr=xt[Wt++])&192)!==128?(Wt--,Nn.push(65533)):(Pn=(Pn&7)<<18|(ar&63)<<12|(gn&63)<<6|Rr&63,Pn-=65536,Nn.push((Pn>>10&1023)+55296,(Pn&1023)+56320))):Nn.push(65533),8192<=Nn.length&&(er=Oo(er,Nn),Nn.length=0);gn=Oo(er,Nn)}return gn}function _s(xt,Vt,Wt){var gn=xt.g.i();for(gn=xt.g.g+gn;xt.g.g<gn;)Wt.push(Vt.call(xt.g))}function Dl(xt,Vt){xt.h==2?_s(xt,Gl.prototype.o,Vt):Vt.push(Bo(xt))}function Ws(){this.h=[],this.i=0,this.g=new Rl}function Ko(xt,Vt){Vt.length!==0&&(xt.h.push(Vt),xt.i+=Vt.length)}function Vl(xt){var Vt=xt.i+xt.g.length();if(Vt===0)return new Uint8Array(0);Vt=new Uint8Array(Vt);for(var Wt=xt.h,gn=Wt.length,Nn=0,er=0;er<gn;er++){var Pn=Wt[er];Pn.length!==0&&(Vt.set(Pn,Nn),Nn+=Pn.length)}return Wt=xt.g,gn=Wt.h,gn!==0&&(Vt.set(Wt.g.subarray(0,gn),Nn),Wt.h=0),xt.h=[Vt],Vt}function Nl(xt,Vt,Wt){if(Wt!=null){Qo(xt.g,8*Vt+5),xt=xt.g;var gn=Wt;gn=(Wt=0>gn?1:0)?-gn:gn,gn===0?0<1/gn?Ss=Qs=0:(Qs=0,Ss=2147483648):isNaN(gn)?(Qs=0,Ss=2147483647):34028234663852886e22<gn?(Qs=0,Ss=(Wt<<31|2139095040)>>>0):11754943508222875e-54>gn?(gn=Math.round(gn/Math.pow(2,-149)),Qs=0,Ss=(Wt<<31|gn)>>>0):(Vt=Math.floor(Math.log(gn)/Math.LN2),gn*=Math.pow(2,-Vt),gn=Math.round(8388608*gn),16777216<=gn&&++Vt,Qs=0,Ss=(Wt<<31|Vt+127<<23|gn&8388607)>>>0),Wt=Ss,xt.push(Wt>>>0&255),xt.push(Wt>>>8&255),xt.push(Wt>>>16&255),xt.push(Wt>>>24&255)}}var zs=typeof Uint8Array=="function";function Wu(xt,Vt,Wt){if(xt!=null)return typeof xt=="object"?zs&&xt instanceof Uint8Array?Wt(xt):ru(xt,Vt,Wt):Vt(xt)}function ru(xt,Vt,Wt){if(Array.isArray(xt)){for(var gn=Array(xt.length),Nn=0;Nn<xt.length;Nn++)gn[Nn]=Wu(xt[Nn],Vt,Wt);return Array.isArray(xt)&&xt.W&&Gs(gn),gn}gn={};for(Nn in xt)gn[Nn]=Wu(xt[Nn],Vt,Wt);return gn}function Wl(xt){return typeof xt=="number"?isFinite(xt)?xt:String(xt):xt}var iu={W:{value:!0,configurable:!0}};function Gs(xt){return Array.isArray(xt)&&!Object.isFrozen(xt)&&Object.defineProperties(xt,iu),xt}var qs;function ks(xt,Vt,Wt){var gn=qs;qs=null,xt||(xt=gn),gn=this.constructor.ca,xt||(xt=gn?[gn]:[]),this.j=gn?0:-1,this.m=this.g=null,this.h=xt;e:{if(gn=this.h.length,xt=gn-1,gn&&(gn=this.h[xt],!(gn===null||typeof gn!="object"||Array.isArray(gn)||zs&&gn instanceof Uint8Array))){this.l=xt-this.j,this.i=gn;break e}Vt!==void 0&&-1<Vt?(this.l=Math.max(Vt,xt+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(Wt)for(Vt=0;Vt<Wt.length;Vt++)xt=Wt[Vt],xt<this.l?(xt+=this.j,(gn=this.h[xt])?Gs(gn):this.h[xt]=as):(Ml(this),(gn=this.i[xt])?Gs(gn):this.i[xt]=as)}var as=Object.freeze(Gs([]));function Ml(xt){var Vt=xt.l+xt.j;xt.h[Vt]||(xt.i=xt.h[Vt]={})}function ts(xt,Vt,Wt){return Vt===-1?null:Wt!==void 0&&Wt||Vt>=xt.l?xt.i?xt.i[Vt]:void 0:xt.h[Vt+xt.j]}function zo(xt,Vt){var Wt=Wt===void 0?!1:Wt,gn=ts(xt,Vt,Wt);return gn==null&&(gn=as),gn===as&&(gn=Gs([]),ro(xt,Vt,gn,Wt)),gn}function uu(xt){var Vt=zo(xt,3);if(xt.m||(xt.m={}),!xt.m[3]){for(var Wt=0;Wt<Vt.length;Wt++)Vt[Wt]=+Vt[Wt];xt.m[3]=!0}return Vt}function Es(xt,Vt,Wt){return xt=ts(xt,Vt),xt??Wt}function wo(xt,Vt,Wt){return xt=ts(xt,Vt),xt=xt==null?xt:+xt,xt??(Wt===void 0?0:Wt)}function ro(xt,Vt,Wt,gn){gn!==void 0&&gn||Vt>=xt.l?(Ml(xt),xt.i[Vt]=Wt):xt.h[Vt+xt.j]=Wt}function cs(xt,Vt,Wt){if(Wt===-1)return null;if(xt.g||(xt.g={}),!xt.g[Wt]){var gn=ts(xt,Wt,!1);gn&&(xt.g[Wt]=new Vt(gn))}return xt.g[Wt]}function na(xt,Vt){xt.g||(xt.g={});var Wt=xt.g[1];if(!Wt){var gn=zo(xt,1);Wt=[];for(var Nn=0;Nn<gn.length;Nn++)Wt[Nn]=new Vt(gn[Nn]);xt.g[1]=Wt}return Wt}function ns(xt,Vt,Wt){var gn=gn===void 0?!1:gn;xt.g||(xt.g={});var Nn=Wt&&ur(Wt);xt.g[Vt]=Wt,ro(xt,Vt,Nn,gn)}function ls(xt,Vt,Wt,gn){var Nn=na(xt,Wt);Vt=Vt||new Wt,xt=zo(xt,1),gn!=null?(Nn.splice(gn,0,Vt),xt.splice(gn,0,ur(Vt))):(Nn.push(Vt),xt.push(ur(Vt)))}ks.prototype.toJSON=function(){var xt=ur(this);return ru(xt,Wl,Eu)};function ur(xt,Vt){if(xt.g)for(var Wt in xt.g){var gn=xt.g[Wt];if(Array.isArray(gn))for(var Nn=0;Nn<gn.length;Nn++)gn[Nn]&&ur(gn[Nn]);else gn&&ur(gn)}return xt.h}ks.prototype.toString=function(){return ur(this).toString()};function mr(xt,Vt){if(xt=xt.o){Ko(Vt,Vt.g.end());for(var Wt=0;Wt<xt.length;Wt++)Ko(Vt,xt[Wt])}}function xr(xt,Vt){if(Vt.h==4)return!1;var Wt=Vt.m;return Po(Vt),Vt.N||(Vt=Nu(Vt.g.h,Wt,Vt.g.g),(Wt=xt.o)?Wt.push(Vt):xt.o=[Vt]),!0}function Jo(xt){ks.call(this,xt,-1,hs)}Ar(Jo,ks),Jo.prototype.getRows=function(){return ts(this,1)},Jo.prototype.getCols=function(){return ts(this,2)},Jo.prototype.getPackedDataList=function(){return uu(this)},Jo.prototype.getLayout=function(){return Es(this,4,0)};function gs(xt,Vt){for(;ba(Vt);)switch(Vt.i){case 8:var Wt=Vt.g.i();ro(xt,1,Wt);break;case 16:Wt=Vt.g.i(),ro(xt,2,Wt);break;case 29:case 26:Dl(Vt,xt.getPackedDataList());break;case 32:Wt=Ds(Vt.g),ro(xt,4,Wt);break;default:if(!xr(xt,Vt))return xt}return xt}var hs=[3];function fo(xt,Vt){var Wt=void 0;return new(Wt||(Wt=o))(function(gn,Nn){function er(Rr){try{ar(Vt.next(Rr))}catch(pt){Nn(pt)}}function Pn(Rr){try{ar(Vt.throw(Rr))}catch(pt){Nn(pt)}}function ar(Rr){Rr.done?gn(Rr.value):new Wt(function(pt){pt(Rr.value)}).then(er,Pn)}ar((Vt=Vt.apply(xt,void 0)).next())})}function Cs(xt){ks.call(this,xt)}Ar(Cs,ks);function xa(xt,Vt){for(;ba(Vt);)switch(Vt.i){case 8:var Wt=Vt.g.i();ro(xt,1,Wt);break;case 21:Wt=Bo(Vt),ro(xt,2,Wt);break;case 26:Wt=Os(Vt),ro(xt,3,Wt);break;case 34:Wt=Os(Vt),ro(xt,4,Wt);break;default:if(!xr(xt,Vt))return xt}return xt}function Ul(xt){ks.call(this,xt,-1,Hl)}Ar(Ul,ks),Ul.prototype.addClassification=function(xt,Vt){return ls(this,xt,Cs,Vt),this};var Hl=[1];function du(xt){ks.call(this,xt)}Ar(du,ks);function Cu(xt,Vt){for(;ba(Vt);)switch(Vt.i){case 13:var Wt=Bo(Vt);ro(xt,1,Wt);break;case 21:Wt=Bo(Vt),ro(xt,2,Wt);break;case 29:Wt=Bo(Vt),ro(xt,3,Wt);break;case 37:Wt=Bo(Vt),ro(xt,4,Wt);break;case 45:Wt=Bo(Vt),ro(xt,5,Wt);break;default:if(!xr(xt,Vt))return xt}return xt}function ga(xt){ks.call(this,xt,-1,Ap)}Ar(ga,ks);function Yl(xt){e:{var Vt=new ga;for(xt=new Ls(xt);ba(xt);)switch(xt.i){case 10:var Wt=Ks(xt,new du,Cu);ls(Vt,Wt,du,void 0);break;default:if(!xr(Vt,xt))break e}}return Vt}var Ap=[1];function Bl(xt){ks.call(this,xt)}Ar(Bl,ks);function $a(xt){ks.call(this,xt,-1,Hu)}Ar($a,ks),$a.prototype.getVertexType=function(){return Es(this,1,0)},$a.prototype.getPrimitiveType=function(){return Es(this,2,0)},$a.prototype.getVertexBufferList=function(){return uu(this)},$a.prototype.getIndexBufferList=function(){return zo(this,4)};function Ou(xt,Vt){for(;ba(Vt);)switch(Vt.i){case 8:var Wt=Ds(Vt.g);ro(xt,1,Wt);break;case 16:Wt=Ds(Vt.g),ro(xt,2,Wt);break;case 29:case 26:Dl(Vt,xt.getVertexBufferList());break;case 32:case 34:Wt=Vt;var gn=xt.getIndexBufferList();Wt.h==2?_s(Wt,Gl.prototype.i,gn):gn.push(Wt.g.i());break;default:if(!xr(xt,Vt))return xt}return xt}var Hu=[3,4];function Il(xt){ks.call(this,xt)}Ar(Il,ks),Il.prototype.getMesh=function(){return cs(this,$a,1)},Il.prototype.getPoseTransformMatrix=function(){return cs(this,Jo,2)};function hp(xt){e:{var Vt=new Il;for(xt=new Ls(xt);ba(xt);)switch(xt.i){case 10:var Wt=Ks(xt,new $a,Ou);ns(Vt,1,Wt);break;case 18:Wt=Ks(xt,new Jo,gs),ns(Vt,2,Wt);break;default:if(!xr(Vt,xt))break e}}return Vt}function Kl(xt,Vt,Wt){if(Wt=xt.createShader(Wt===0?xt.VERTEX_SHADER:xt.FRAGMENT_SHADER),xt.shaderSource(Wt,Vt),xt.compileShader(Wt),!xt.getShaderParameter(Wt,xt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+xt.getShaderInfoLog(Wt));return Wt}function Au(xt){return na(xt,Cs).map(function(Vt){return{index:Es(Vt,1,0),Y:wo(Vt,2),label:ts(Vt,3)!=null?Es(Vt,3,""):void 0,displayName:ts(Vt,4)!=null?Es(Vt,4,""):void 0}})}function $u(xt){return{x:wo(xt,1),y:wo(xt,2),z:wo(xt,3),visibility:ts(xt,4)!=null?wo(xt,4):void 0}}function Ep(xt,Vt){this.h=xt,this.g=Vt,this.l=0}function ou(xt,Vt,Wt){return _u(xt,Vt),typeof xt.g.canvas.transferToImageBitmap=="function"?o.resolve(xt.g.canvas.transferToImageBitmap()):Wt?o.resolve(xt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(xt.g.canvas):(xt.i===void 0&&(xt.i=document.createElement("canvas")),new o(function(gn){xt.i.height=xt.g.canvas.height,xt.i.width=xt.g.canvas.width,xt.i.getContext("2d",{}).drawImage(xt.g.canvas,0,0,xt.g.canvas.width,xt.g.canvas.height),gn(xt.i)}))}function _u(xt,Vt){var Wt=xt.g;if(xt.m===void 0){var gn=Kl(Wt,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Nn=Kl(Wt,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),er=Wt.createProgram();if(Wt.attachShader(er,gn),Wt.attachShader(er,Nn),Wt.linkProgram(er),!Wt.getProgramParameter(er,Wt.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Wt.getProgramInfoLog(er));gn=xt.m=er,Wt.useProgram(gn),Nn=Wt.getUniformLocation(gn,"sampler0"),xt.j={I:Wt.getAttribLocation(gn,"aVertex"),H:Wt.getAttribLocation(gn,"aTex"),da:Nn},xt.s=Wt.createBuffer(),Wt.bindBuffer(Wt.ARRAY_BUFFER,xt.s),Wt.enableVertexAttribArray(xt.j.I),Wt.vertexAttribPointer(xt.j.I,2,Wt.FLOAT,!1,0,0),Wt.bufferData(Wt.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Wt.STATIC_DRAW),Wt.bindBuffer(Wt.ARRAY_BUFFER,null),xt.o=Wt.createBuffer(),Wt.bindBuffer(Wt.ARRAY_BUFFER,xt.o),Wt.enableVertexAttribArray(xt.j.H),Wt.vertexAttribPointer(xt.j.H,2,Wt.FLOAT,!1,0,0),Wt.bufferData(Wt.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Wt.STATIC_DRAW),Wt.bindBuffer(Wt.ARRAY_BUFFER,null),Wt.uniform1i(Nn,0)}gn=xt.j,Wt.useProgram(xt.m),Wt.canvas.width=Vt.width,Wt.canvas.height=Vt.height,Wt.viewport(0,0,Vt.width,Vt.height),Wt.activeTexture(Wt.TEXTURE0),xt.h.bindTexture2d(Vt.glName),Wt.enableVertexAttribArray(gn.I),Wt.bindBuffer(Wt.ARRAY_BUFFER,xt.s),Wt.vertexAttribPointer(gn.I,2,Wt.FLOAT,!1,0,0),Wt.enableVertexAttribArray(gn.H),Wt.bindBuffer(Wt.ARRAY_BUFFER,xt.o),Wt.vertexAttribPointer(gn.H,2,Wt.FLOAT,!1,0,0),Wt.bindFramebuffer(Wt.DRAW_FRAMEBUFFER?Wt.DRAW_FRAMEBUFFER:Wt.FRAMEBUFFER,null),Wt.clearColor(0,0,0,0),Wt.clear(Wt.COLOR_BUFFER_BIT),Wt.colorMask(!0,!0,!0,!0),Wt.drawArrays(Wt.TRIANGLE_FAN,0,4),Wt.disableVertexAttribArray(gn.I),Wt.disableVertexAttribArray(gn.H),Wt.bindBuffer(Wt.ARRAY_BUFFER,null),xt.h.bindTexture2d(0)}function Fp(xt){this.g=xt}var Xp=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function qu(xt,Vt){return Vt+xt}function ip(xt,Vt){window[xt]=Vt}function At(xt){var Vt=document.createElement("script");return Vt.setAttribute("src",xt),Vt.setAttribute("crossorigin","anonymous"),new o(function(Wt){Vt.addEventListener("load",function(){Wt()},!1),Vt.addEventListener("error",function(){Wt()},!1),document.body.appendChild(Vt)})}function Dt(){return fo(this,function xt(){return vs(xt,function(Vt){switch(Vt.g){case 1:return Vt.m=2,qn(Vt,WebAssembly.instantiate(Xp),4);case 4:Vt.g=3,Vt.m=0;break;case 2:return Vt.m=0,Vt.j=null,Vt.return(!1);case 3:return Vt.return(!0)}})})}function jt(xt){if(this.g=xt,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=o.resolve(),this.P="",this.B={},this.locateFile=xt&&xt.locateFile||qu,typeof window=="object")var Vt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Vt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=Vt,xt.options){Vt=ln(Object.keys(xt.options));for(var Wt=Vt.next();!Wt.done;Wt=Vt.next()){Wt=Wt.value;var gn=xt.options[Wt].default;gn!==void 0&&(this.j[Wt]=typeof gn=="function"?gn():gn)}}}at=jt.prototype,at.close=function(){return this.i&&this.i.delete(),o.resolve()};function Zn(xt,Vt){return xt.g.files===void 0?[]:typeof xt.g.files=="function"?xt.g.files(Vt):xt.g.files}function _n(xt){return fo(xt,function Vt(){var Wt=this,gn,Nn,er,Pn,ar,Rr,pt,Mt,Ht,cn,xn;return vs(Vt,function(Xn){switch(Xn.g){case 1:return gn=Wt,Wt.R?(Nn=Zn(Wt,Wt.j),qn(Xn,Dt(),2)):Xn.return();case 2:if(er=Xn.h,typeof window=="object")return ip("createMediapipeSolutionsWasm",{locateFile:Wt.locateFile}),ip("createMediapipeSolutionsPackedAssets",{locateFile:Wt.locateFile}),Rr=Nn.filter(function(Gn){return Gn.data!==void 0}),pt=Nn.filter(function(Gn){return Gn.data===void 0}),Mt=o.all(Rr.map(function(Gn){var dr=hr(gn,Gn.url);if(Gn.path!==void 0){var sr=Gn.path;dr=dr.then(function(Fr){return gn.overrideFile(sr,Fr),o.resolve(Fr)})}return dr})),Ht=o.all(pt.map(function(Gn){return Gn.simd===void 0||Gn.simd&&er||!Gn.simd&&!er?At(gn.locateFile(Gn.url,gn.S)):o.resolve()})).then(function(){return fo(gn,function Gn(){var dr,sr,Fr=this;return vs(Gn,function(_r){if(_r.g==1)return dr=window.createMediapipeSolutionsWasm,sr=window.createMediapipeSolutionsPackedAssets,qn(_r,dr(sr),2);Fr.h=_r.h,_r.g=0})})}),cn=function(){return fo(gn,function Gn(){var dr=this;return vs(Gn,function(sr){return dr.g.graph&&dr.g.graph.url?sr=qn(sr,hr(dr,dr.g.graph.url),0):(sr.g=0,sr=void 0),sr})})}(),qn(Xn,o.all([Ht,Mt,cn]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Pn=Nn.filter(function(Gn){return Gn.simd===void 0||Gn.simd&&er||!Gn.simd&&!er}).map(function(Gn){return gn.locateFile(Gn.url,gn.S)}),importScripts.apply(null,En(Pn)),qn(Xn,createMediapipeSolutionsWasm(Module),6);case 6:Wt.h=Xn.h,Wt.l=new OffscreenCanvas(1,1),Wt.h.canvas=Wt.l,ar=Wt.h.GL.createContext(Wt.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),Wt.h.GL.makeContextCurrent(ar),Xn.g=4;break;case 7:if(Wt.l=document.createElement("canvas"),xn=Wt.l.getContext("webgl2",{}),!xn&&(xn=Wt.l.getContext("webgl",{}),!xn))return alert("Failed to create WebGL canvas context when passing video frame."),Xn.return();Wt.D=xn,Wt.h.canvas=Wt.l,Wt.h.createContext(Wt.l,!0,!0,{});case 4:Wt.i=new Wt.h.SolutionWasm,Wt.R=!1,Xn.g=0}})})}function Sr(xt){return fo(xt,function Vt(){var Wt=this,gn,Nn,er,Pn,ar,Rr,pt,Mt;return vs(Vt,function(Ht){if(Ht.g==1){if(Wt.g.graph&&Wt.g.graph.url&&Wt.P===Wt.g.graph.url)return Ht.return();if(Wt.o=!0,!Wt.g.graph||!Wt.g.graph.url){Ht.g=2;return}return Wt.P=Wt.g.graph.url,qn(Ht,hr(Wt,Wt.g.graph.url),3)}for(Ht.g!=2&&(gn=Ht.h,Wt.i.loadGraph(gn)),Nn=ln(Object.keys(Wt.B)),er=Nn.next();!er.done;er=Nn.next())Pn=er.value,Wt.i.overrideFile(Pn,Wt.B[Pn]);if(Wt.B={},Wt.g.listeners)for(ar=ln(Wt.g.listeners),Rr=ar.next();!Rr.done;Rr=ar.next())pt=Rr.value,Wo(Wt,pt);Mt=Wt.j,Wt.j={},Wt.setOptions(Mt),Ht.g=0})})}at.reset=function(){return fo(this,function xt(){var Vt=this;return vs(xt,function(Wt){Vt.i&&(Vt.i.reset(),Vt.m={},Vt.s={}),Wt.g=0})})},at.setOptions=function(xt,Vt){var Wt=this;if(Vt=Vt||this.g.options){for(var gn=[],Nn=[],er={},Pn=ln(Object.keys(xt)),ar=Pn.next();!ar.done;er={K:er.K,L:er.L},ar=Pn.next()){var Rr=ar.value;Rr in this.j&&this.j[Rr]===xt[Rr]||(this.j[Rr]=xt[Rr],ar=Vt[Rr],ar!==void 0&&(ar.onChange&&(er.K=ar.onChange,er.L=xt[Rr],gn.push(function(pt){return function(){return fo(Wt,function Mt(){var Ht,cn=this;return vs(Mt,function(xn){if(xn.g==1)return qn(xn,pt.K(pt.L),2);Ht=xn.h,Ht===!0&&(cn.o=!0),xn.g=0})})}}(er))),ar.graphOptionXref&&(Rr={valueNumber:ar.type===1?xt[Rr]:0,valueBoolean:ar.type===0?xt[Rr]:!1,valueString:ar.type===2?xt[Rr]:""},ar=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),ar.graphOptionXref),Rr),Nn.push(ar))))}(gn.length!==0||Nn.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Nn),this.u=(this.u===void 0?[]:this.u).concat(gn))}};function Qn(xt){return fo(xt,function Vt(){var Wt=this,gn,Nn,er,Pn,ar,Rr,pt;return vs(Vt,function(Mt){switch(Mt.g){case 1:if(!Wt.o)return Mt.return();if(!Wt.u){Mt.g=2;break}gn=ln(Wt.u),Nn=gn.next();case 3:if(Nn.done){Mt.g=5;break}return er=Nn.value,qn(Mt,er(),4);case 4:Nn=gn.next(),Mt.g=3;break;case 5:Wt.u=void 0;case 2:if(Wt.A){for(Pn=new Wt.h.GraphOptionChangeRequestList,ar=ln(Wt.A),Rr=ar.next();!Rr.done;Rr=ar.next())pt=Rr.value,Pn.push_back(pt);Wt.i.changeOptions(Pn),Pn.delete(),Wt.A=void 0}Wt.o=!1,Mt.g=0}})})}at.initialize=function(){return fo(this,function xt(){var Vt=this;return vs(xt,function(Wt){return Wt.g==1?qn(Wt,_n(Vt),2):Wt.g!=3?qn(Wt,Sr(Vt),3):qn(Wt,Qn(Vt),0)})})};function hr(xt,Vt){return fo(xt,function Wt(){var gn=this,Nn,er;return vs(Wt,function(Pn){return Vt in gn.F?Pn.return(gn.F[Vt]):(Nn=gn.locateFile(Vt,""),er=fetch(Nn).then(function(ar){return ar.arrayBuffer()}),gn.F[Vt]=er,Pn.return(er))})})}at.overrideFile=function(xt,Vt){this.i?this.i.overrideFile(xt,Vt):this.B[xt]=Vt},at.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},at.send=function(xt,Vt){return fo(this,function Wt(){var gn=this,Nn,er,Pn,ar,Rr,pt,Mt,Ht,cn;return vs(Wt,function(xn){switch(xn.g){case 1:return gn.g.inputs?(Nn=1e3*(Vt??performance.now()),qn(xn,gn.C,2)):xn.return();case 2:return qn(xn,gn.initialize(),3);case 3:for(er=new gn.h.PacketDataList,Pn=ln(Object.keys(xt)),ar=Pn.next();!ar.done;ar=Pn.next())if(Rr=ar.value,pt=gn.g.inputs[Rr]){e:{var Xn=gn,Gn=xt[Rr];switch(pt.type){case"video":var dr=Xn.m[pt.stream];if(dr||(dr=new Ep(Xn.h,Xn.D),Xn.m[pt.stream]=dr),Xn=dr,Xn.l===0&&(Xn.l=Xn.h.createTexture()),typeof HTMLVideoElement<"u"&&Gn instanceof HTMLVideoElement){var sr=Gn.videoWidth;dr=Gn.videoHeight}else typeof HTMLImageElement<"u"&&Gn instanceof HTMLImageElement?(sr=Gn.naturalWidth,dr=Gn.naturalHeight):(sr=Gn.width,dr=Gn.height);dr={glName:Xn.l,width:sr,height:dr},sr=Xn.g,sr.canvas.width=dr.width,sr.canvas.height=dr.height,sr.activeTexture(sr.TEXTURE0),Xn.h.bindTexture2d(Xn.l),sr.texImage2D(sr.TEXTURE_2D,0,sr.RGBA,sr.RGBA,sr.UNSIGNED_BYTE,Gn),Xn.h.bindTexture2d(0),Xn=dr;break e;case"detections":for(dr=Xn.m[pt.stream],dr||(dr=new Fp(Xn.h),Xn.m[pt.stream]=dr),Xn=dr,Xn.data||(Xn.data=new Xn.g.DetectionListData),Xn.data.reset(Gn.length),dr=0;dr<Gn.length;++dr){sr=Gn[dr];var Fr=Xn.data,_r=Fr.setBoundingBox,Mo=dr,co=sr.T,Lr=new Bl;ro(Lr,1,co.Z),ro(Lr,2,co.$),ro(Lr,3,co.height),ro(Lr,4,co.width),ro(Lr,5,co.rotation),ro(Lr,6,co.X);var _i=co=new Ws;Nl(_i,1,ts(Lr,1)),Nl(_i,2,ts(Lr,2)),Nl(_i,3,ts(Lr,3)),Nl(_i,4,ts(Lr,4)),Nl(_i,5,ts(Lr,5));var uo=ts(Lr,6);if(uo!=null&&uo!=null){Qo(_i.g,48);var Co=_i.g,Io=uo;uo=0>Io,Io=Math.abs(Io);var gt=Io>>>0;for(Io=Math.floor((Io-gt)/4294967296),Io>>>=0,uo&&(Io=~Io>>>0,gt=(~gt>>>0)+1,4294967295<gt&&(gt=0,Io++,4294967295<Io&&(Io=0))),Ss=gt,Qs=Io,uo=Ss,gt=Qs;0<gt||127<uo;)Co.push(uo&127|128),uo=(uo>>>7|gt<<25)>>>0,gt>>>=7;Co.push(uo)}if(mr(Lr,_i),co=Vl(co),_r.call(Fr,Mo,co),sr.O)for(Fr=0;Fr<sr.O.length;++Fr)Lr=sr.O[Fr],_i=!!Lr.visibility,_r=Xn.data,Mo=_r.addNormalizedLandmark,co=dr,Lr=Object.assign(Object.assign({},Lr),{visibility:_i?Lr.visibility:0}),_i=new du,ro(_i,1,Lr.x),ro(_i,2,Lr.y),ro(_i,3,Lr.z),Lr.visibility&&ro(_i,4,Lr.visibility),Co=Lr=new Ws,Nl(Co,1,ts(_i,1)),Nl(Co,2,ts(_i,2)),Nl(Co,3,ts(_i,3)),Nl(Co,4,ts(_i,4)),Nl(Co,5,ts(_i,5)),mr(_i,Co),Lr=Vl(Lr),Mo.call(_r,co,Lr);if(sr.M)for(Fr=0;Fr<sr.M.length;++Fr){if(_r=Xn.data,Mo=_r.addClassification,co=dr,Lr=sr.M[Fr],_i=new Cs,ro(_i,2,Lr.Y),Lr.index&&ro(_i,1,Lr.index),Lr.label&&ro(_i,3,Lr.label),Lr.displayName&&ro(_i,4,Lr.displayName),Co=Lr=new Ws,gt=ts(_i,1),gt!=null&&gt!=null)if(Qo(Co.g,8),uo=Co.g,0<=gt)Qo(uo,gt);else{for(Io=0;9>Io;Io++)uo.push(gt&127|128),gt>>=7;uo.push(1)}Nl(Co,2,ts(_i,2)),uo=ts(_i,3),uo!=null&&(uo=ju(uo),Qo(Co.g,26),Qo(Co.g,uo.length),Ko(Co,Co.g.end()),Ko(Co,uo)),uo=ts(_i,4),uo!=null&&(uo=ju(uo),Qo(Co.g,34),Qo(Co.g,uo.length),Ko(Co,Co.g.end()),Ko(Co,uo)),mr(_i,Co),Lr=Vl(Lr),Mo.call(_r,co,Lr)}}Xn=Xn.data;break e;default:Xn={}}}switch(Mt=Xn,Ht=pt.stream,pt.type){case"video":er.pushTexture2d(Object.assign(Object.assign({},Mt),{stream:Ht,timestamp:Nn}));break;case"detections":cn=Mt,cn.stream=Ht,cn.timestamp=Nn,er.pushDetectionList(cn);break;default:throw Error("Unknown input config type: '"+pt.type+"'")}}return gn.i.send(er),qn(xn,gn.C,4);case 4:er.delete(),xn.g=0}})})};function Nr(xt,Vt,Wt){return fo(xt,function gn(){var Nn,er,Pn,ar,Rr,pt,Mt=this,Ht,cn,xn,Xn,Gn,dr,sr,Fr;return vs(gn,function(_r){switch(_r.g){case 1:if(!Wt)return _r.return(Vt);for(Nn={},er=0,Pn=ln(Object.keys(Wt)),ar=Pn.next();!ar.done;ar=Pn.next())Rr=ar.value,pt=Wt[Rr],typeof pt!="string"&&pt.type==="texture"&&Vt[pt.stream]!==void 0&&++er;1<er&&(Mt.G=!1),Ht=ln(Object.keys(Wt)),ar=Ht.next();case 2:if(ar.done){_r.g=4;break}if(cn=ar.value,xn=Wt[cn],typeof xn=="string")return sr=Nn,Fr=cn,qn(_r,ao(Mt,cn,Vt[xn]),14);if(Xn=Vt[xn.stream],xn.type==="detection_list"){if(Xn){for(var Mo=Xn.getRectList(),co=Xn.getLandmarksList(),Lr=Xn.getClassificationsList(),_i=[],uo=0;uo<Mo.size();++uo){var Co=Mo.get(uo);e:{var Io=new Bl;for(Co=new Ls(Co);ba(Co);)switch(Co.i){case 13:var gt=Bo(Co);ro(Io,1,gt);break;case 21:gt=Bo(Co),ro(Io,2,gt);break;case 29:gt=Bo(Co),ro(Io,3,gt);break;case 37:gt=Bo(Co),ro(Io,4,gt);break;case 45:gt=Bo(Co),ro(Io,5,gt);break;case 48:gt=Ds(Co.g),ro(Io,6,gt);break;default:if(!xr(Io,Co))break e}}Io={Z:wo(Io,1),$:wo(Io,2),height:wo(Io,3),width:wo(Io,4),rotation:wo(Io,5,0),X:Es(Io,6,0)},Co=na(Yl(co.get(uo)),du).map($u);var kt=Lr.get(uo);e:for(gt=new Ul,kt=new Ls(kt);ba(kt);)switch(kt.i){case 10:gt.addClassification(Ks(kt,new Cs,xa));break;default:if(!xr(gt,kt))break e}Io={T:Io,O:Co,M:Au(gt)},_i.push(Io)}Mo=_i}else Mo=[];Nn[cn]=Mo,_r.g=7;break}if(xn.type==="proto_list"){if(Xn){for(Mo=Array(Xn.size()),co=0;co<Xn.size();co++)Mo[co]=Xn.get(co);Xn.delete()}else Mo=[];Nn[cn]=Mo,_r.g=7;break}if(Xn===void 0){_r.g=3;break}if(xn.type==="float_list"){Nn[cn]=Xn,_r.g=7;break}if(xn.type==="proto"){Nn[cn]=Xn,_r.g=7;break}if(xn.type!=="texture")throw Error("Unknown output config type: '"+xn.type+"'");return Gn=Mt.s[cn],Gn||(Gn=new Ep(Mt.h,Mt.D),Mt.s[cn]=Gn),qn(_r,ou(Gn,Xn,Mt.G),13);case 13:dr=_r.h,Nn[cn]=dr;case 7:xn.transform&&Nn[cn]&&(Nn[cn]=xn.transform(Nn[cn])),_r.g=3;break;case 14:sr[Fr]=_r.h;case 3:ar=Ht.next(),_r.g=2;break;case 4:return _r.return(Nn)}})})}function ao(xt,Vt,Wt){return fo(xt,function gn(){var Nn=this,er;return vs(gn,function(Pn){return typeof Wt=="number"||Wt instanceof Uint8Array||Wt instanceof Nn.h.Uint8BlobList?Pn.return(Wt):Wt instanceof Nn.h.Texture2dDataOut?(er=Nn.s[Vt],er||(er=new Ep(Nn.h,Nn.D),Nn.s[Vt]=er),Pn.return(ou(er,Wt,Nn.G))):Pn.return(void 0)})})}function Wo(xt,Vt){for(var Wt=Vt.name||"$",gn=[].concat(En(Vt.wants)),Nn=new xt.h.StringList,er=ln(Vt.wants),Pn=er.next();!Pn.done;Pn=er.next())Nn.push_back(Pn.value);er=xt.h.PacketListener.implement({onResults:function(ar){for(var Rr={},pt=0;pt<Vt.wants.length;++pt)Rr[gn[pt]]=ar.get(pt);var Mt=xt.listeners[Wt];Mt&&(xt.C=Nr(xt,Rr,Vt.outs).then(function(Ht){Ht=Mt(Ht);for(var cn=0;cn<Vt.wants.length;++cn){var xn=Rr[gn[cn]];typeof xn=="object"&&xn.hasOwnProperty&&xn.hasOwnProperty("delete")&&xn.delete()}Ht&&(xt.C=Ht)}))}}),xt.i.attachMultiListener(Nn,er),Nn.delete()}at.onResults=function(xt,Vt){this.listeners[Vt||"$"]=xt},Hs("Solution",jt),Hs("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Ao(xt){xt=hp(xt);var Vt=xt.getMesh();if(!Vt)return xt;var Wt=new Float32Array(Vt.getVertexBufferList());Vt.getVertexBufferList=function(){return Wt};var gn=new Uint32Array(Vt.getIndexBufferList());return Vt.getIndexBufferList=function(){return gn},xt}var es={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(xt){return xt.map(Ao)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(xt){return xt.map(function(Vt){return na(Yl(Vt),du).map($u)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Lo=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],go=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],No=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],$o=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],ps=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Ts=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],As=[].concat(En(Lo),En(go),En(No),En($o),En(ps),En(Ts));function _a(xt){xt=xt||{},xt=Object.assign(Object.assign({},es),xt),this.g=new jt(xt)}at=_a.prototype,at.close=function(){return this.g.close(),o.resolve()},at.onResults=function(xt){this.g.onResults(xt)},at.initialize=function(){return fo(this,function xt(){var Vt=this;return vs(xt,function(Wt){return qn(Wt,Vt.g.initialize(),0)})})},at.reset=function(){this.g.reset()},at.send=function(xt){return fo(this,function Vt(){var Wt=this;return vs(Vt,function(gn){return qn(gn,Wt.g.send(xt),0)})})},at.setOptions=function(xt){this.g.setOptions(xt)},Hs("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),Hs("FaceMesh",_a),Hs("FACEMESH_LIPS",Lo),Hs("FACEMESH_LEFT_EYE",go),Hs("FACEMESH_LEFT_EYEBROW",No),Hs("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),Hs("FACEMESH_RIGHT_EYE",$o),Hs("FACEMESH_RIGHT_EYEBROW",ps),Hs("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),Hs("FACEMESH_FACE_OVAL",Ts),Hs("FACEMESH_CONTOURS",As),Hs("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Hs("matrixDataToMatrix",function(xt){for(var Vt=xt.getCols(),Wt=xt.getRows(),gn=xt.getPackedDataList(),Nn=[],er=0;er<Wt;er++)Nn.push(Array(Vt));for(er=0;er<Wt;er++)for(var Pn=0;Pn<Vt;Pn++){var ar=xt.getLayout()===1?er*Vt+Pn:Pn*Wt+er;Nn[er][Pn]=gn[ar]}return Nn}),Hs("VERSION","0.4.1633559619")}).call(Hp);const kp={};(function(){var at;function ot(tt){var mt=0;return function(){return mt<tt.length?{done:!1,value:tt[mt++]}:{done:!0}}}var ut=typeof Object.defineProperties=="function"?Object.defineProperty:function(tt,mt,St){return tt==Array.prototype||tt==Object.prototype||(tt[mt]=St.value),tt};function Ot(tt){tt=[typeof globalThis=="object"&&globalThis,tt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var mt=0;mt<tt.length;++mt){var St=tt[mt];if(St&&St.Math==Math)return St}throw Error("Cannot find global object")}var Gt=Ot(this);function en(tt,mt){if(mt)e:{var St=Gt;tt=tt.split(".");for(var Zt=0;Zt<tt.length-1;Zt++){var Qt=tt[Zt];if(!(Qt in St))break e;St=St[Qt]}tt=tt[tt.length-1],Zt=St[tt],mt=mt(Zt),mt!=Zt&&mt!=null&&ut(St,tt,{configurable:!0,writable:!0,value:mt})}}en("Symbol",function(tt){function mt(un){if(this instanceof mt)throw new TypeError("Symbol is not a constructor");return new St(Zt+(un||"")+"_"+Qt++,un)}function St(un,mn){this.g=un,ut(this,"description",{configurable:!0,writable:!0,value:mn})}if(tt)return tt;St.prototype.toString=function(){return this.g};var Zt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Qt=0;return mt}),en("Symbol.iterator",function(tt){if(tt)return tt;tt=Symbol("Symbol.iterator");for(var mt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),St=0;St<mt.length;St++){var Zt=Gt[mt[St]];typeof Zt=="function"&&typeof Zt.prototype[tt]!="function"&&ut(Zt.prototype,tt,{configurable:!0,writable:!0,value:function(){return hn(ot(this))}})}return tt});function hn(tt){return tt={next:tt},tt[Symbol.iterator]=function(){return this},tt}function ln(tt){var mt=typeof Symbol<"u"&&Symbol.iterator&&tt[Symbol.iterator];return mt?mt.call(tt):{next:ot(tt)}}function En(tt){if(!(tt instanceof Array)){tt=ln(tt);for(var mt,St=[];!(mt=tt.next()).done;)St.push(mt.value);tt=St}return tt}var rr=typeof Object.create=="function"?Object.create:function(tt){function mt(){}return mt.prototype=tt,new mt},br;if(typeof Object.setPrototypeOf=="function")br=Object.setPrototypeOf;else{var Tr;e:{var ho={a:!0},Eo={};try{Eo.__proto__=ho,Tr=Eo.a;break e}catch{}Tr=!1}br=Tr?function(tt,mt){if(tt.__proto__=mt,tt.__proto__!==mt)throw new TypeError(tt+" is not extensible");return tt}:null}var Ir=br;function Ar(tt,mt){if(tt.prototype=rr(mt.prototype),tt.prototype.constructor=tt,Ir)Ir(tt,mt);else for(var St in mt)if(St!="prototype")if(Object.defineProperties){var Zt=Object.getOwnPropertyDescriptor(mt,St);Zt&&Object.defineProperty(tt,St,Zt)}else tt[St]=mt[St];tt.ka=mt.prototype}function ko(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Vo(tt){if(tt.l)throw new TypeError("Generator is already running");tt.l=!0}ko.prototype.o=function(tt){this.h=tt};function rs(tt,mt){tt.j={V:mt,X:!0},tt.g=tt.m||tt.s}ko.prototype.return=function(tt){this.j={return:tt},this.g=this.s};function qn(tt,mt,St){return tt.g=St,{value:mt}}function bu(tt){this.g=new ko,this.h=tt}function cu(tt,mt){Vo(tt.g);var St=tt.g.i;return St?Us(tt,"return"in St?St.return:function(Zt){return{value:Zt,done:!0}},mt,tt.g.return):(tt.g.return(mt),qo(tt))}function Us(tt,mt,St,Zt){try{var Qt=mt.call(tt.g.i,St);if(!(Qt instanceof Object))throw new TypeError("Iterator result "+Qt+" is not an object");if(!Qt.done)return tt.g.l=!1,Qt;var un=Qt.value}catch(mn){return tt.g.i=null,rs(tt.g,mn),qo(tt)}return tt.g.i=null,Zt.call(tt.g,un),qo(tt)}function qo(tt){for(;tt.g.g;)try{var mt=tt.h(tt.g);if(mt)return tt.g.l=!1,{value:mt.value,done:!1}}catch(St){tt.g.h=void 0,rs(tt.g,St)}if(tt.g.l=!1,tt.g.j){if(mt=tt.g.j,tt.g.j=null,mt.X)throw mt.V;return{value:mt.return,done:!0}}return{value:void 0,done:!0}}function wp(tt){this.next=function(mt){return Vo(tt.g),tt.g.i?mt=Us(tt,tt.g.i.next,mt,tt.g.o):(tt.g.o(mt),mt=qo(tt)),mt},this.throw=function(mt){return Vo(tt.g),tt.g.i?mt=Us(tt,tt.g.i.throw,mt,tt.g.o):(rs(tt.g,mt),mt=qo(tt)),mt},this.return=function(mt){return cu(tt,mt)},this[Symbol.iterator]=function(){return this}}function vs(tt){function mt(Zt){return tt.next(Zt)}function St(Zt){return tt.throw(Zt)}return new o(function(Zt,Qt){function un(mn){mn.done?Zt(mn.value):o.resolve(mn.value).then(mt,St).then(un,Qt)}un(tt.next())})}function Hr(tt){return vs(new wp(new bu(tt)))}en("Promise",function(tt){function mt(mn){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Ln=this.j();try{mn(Ln.resolve,Ln.reject)}catch(Kn){Ln.reject(Kn)}}function St(){this.g=null}function Zt(mn){return mn instanceof mt?mn:new mt(function(Ln){Ln(mn)})}if(tt)return tt;St.prototype.h=function(mn){if(this.g==null){this.g=[];var Ln=this;this.i(function(){Ln.l()})}this.g.push(mn)};var Qt=Gt.setTimeout;St.prototype.i=function(mn){Qt(mn,0)},St.prototype.l=function(){for(;this.g&&this.g.length;){var mn=this.g;this.g=[];for(var Ln=0;Ln<mn.length;++Ln){var Kn=mn[Ln];mn[Ln]=null;try{Kn()}catch(tr){this.j(tr)}}}this.g=null},St.prototype.j=function(mn){this.i(function(){throw mn})},mt.prototype.j=function(){function mn(tr){return function(nr){Kn||(Kn=!0,tr.call(Ln,nr))}}var Ln=this,Kn=!1;return{resolve:mn(this.D),reject:mn(this.l)}},mt.prototype.D=function(mn){if(mn===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(mn instanceof mt)this.G(mn);else{e:switch(typeof mn){case"object":var Ln=mn!=null;break e;case"function":Ln=!0;break e;default:Ln=!1}Ln?this.A(mn):this.m(mn)}},mt.prototype.A=function(mn){var Ln=void 0;try{Ln=mn.then}catch(Kn){this.l(Kn);return}typeof Ln=="function"?this.H(Ln,mn):this.m(mn)},mt.prototype.l=function(mn){this.s(2,mn)},mt.prototype.m=function(mn){this.s(1,mn)},mt.prototype.s=function(mn,Ln){if(this.h!=0)throw Error("Cannot settle("+mn+", "+Ln+"): Promise already settled in state"+this.h);this.h=mn,this.i=Ln,this.h===2&&this.F(),this.B()},mt.prototype.F=function(){var mn=this;Qt(function(){if(mn.C()){var Ln=Gt.console;typeof Ln<"u"&&Ln.error(mn.i)}},1)},mt.prototype.C=function(){if(this.o)return!1;var mn=Gt.CustomEvent,Ln=Gt.Event,Kn=Gt.dispatchEvent;return typeof Kn>"u"?!0:(typeof mn=="function"?mn=new mn("unhandledrejection",{cancelable:!0}):typeof Ln=="function"?mn=new Ln("unhandledrejection",{cancelable:!0}):(mn=Gt.document.createEvent("CustomEvent"),mn.initCustomEvent("unhandledrejection",!1,!0,mn)),mn.promise=this,mn.reason=this.i,Kn(mn))},mt.prototype.B=function(){if(this.g!=null){for(var mn=0;mn<this.g.length;++mn)un.h(this.g[mn]);this.g=null}};var un=new St;return mt.prototype.G=function(mn){var Ln=this.j();mn.K(Ln.resolve,Ln.reject)},mt.prototype.H=function(mn,Ln){var Kn=this.j();try{mn.call(Ln,Kn.resolve,Kn.reject)}catch(tr){Kn.reject(tr)}},mt.prototype.then=function(mn,Ln){function Kn(Gr,kr){return typeof Gr=="function"?function(Kr){try{tr(Gr(Kr))}catch(Yr){nr(Yr)}}:kr}var tr,nr,Cr=new mt(function(Gr,kr){tr=Gr,nr=kr});return this.K(Kn(mn,tr),Kn(Ln,nr)),Cr},mt.prototype.catch=function(mn){return this.then(void 0,mn)},mt.prototype.K=function(mn,Ln){function Kn(){switch(tr.h){case 1:mn(tr.i);break;case 2:Ln(tr.i);break;default:throw Error("Unexpected state: "+tr.h)}}var tr=this;this.g==null?un.h(Kn):this.g.push(Kn),this.o=!0},mt.resolve=Zt,mt.reject=function(mn){return new mt(function(Ln,Kn){Kn(mn)})},mt.race=function(mn){return new mt(function(Ln,Kn){for(var tr=ln(mn),nr=tr.next();!nr.done;nr=tr.next())Zt(nr.value).K(Ln,Kn)})},mt.all=function(mn){var Ln=ln(mn),Kn=Ln.next();return Kn.done?Zt([]):new mt(function(tr,nr){function Cr(Kr){return function(Yr){Gr[Kr]=Yr,kr--,kr==0&&tr(Gr)}}var Gr=[],kr=0;do Gr.push(void 0),kr++,Zt(Kn.value).K(Cr(Gr.length-1),nr),Kn=Ln.next();while(!Kn.done)})},mt});function Su(tt,mt){tt instanceof String&&(tt+="");var St=0,Zt=!1,Qt={next:function(){if(!Zt&&St<tt.length){var un=St++;return{value:mt(un,tt[un]),done:!1}}return Zt=!0,{done:!0,value:void 0}}};return Qt[Symbol.iterator]=function(){return Qt},Qt}var Op=typeof Object.assign=="function"?Object.assign:function(tt,mt){for(var St=1;St<arguments.length;St++){var Zt=arguments[St];if(Zt)for(var Qt in Zt)Object.prototype.hasOwnProperty.call(Zt,Qt)&&(tt[Qt]=Zt[Qt])}return tt};en("Object.assign",function(tt){return tt||Op}),en("Object.is",function(tt){return tt||function(mt,St){return mt===St?mt!==0||1/mt===1/St:mt!==mt&&St!==St}}),en("Array.prototype.includes",function(tt){return tt||function(mt,St){var Zt=this;Zt instanceof String&&(Zt=String(Zt));var Qt=Zt.length;for(St=St||0,0>St&&(St=Math.max(St+Qt,0));St<Qt;St++){var un=Zt[St];if(un===mt||Object.is(un,mt))return!0}return!1}}),en("String.prototype.includes",function(tt){return tt||function(mt,St){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(mt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(mt,St||0)!==-1}}),en("Array.prototype.keys",function(tt){return tt||function(){return Su(this,function(mt){return mt})}});var Hs=this||self;function Oo(tt,mt){tt=tt.split(".");var St=Hs;tt[0]in St||typeof St.execScript>"u"||St.execScript("var "+tt[0]);for(var Zt;tt.length&&(Zt=tt.shift());)tt.length||mt===void 0?St[Zt]&&St[Zt]!==Object.prototype[Zt]?St=St[Zt]:St=St[Zt]={}:St[Zt]=mt}function $s(tt){throw tt}function tu(tt,mt){$s(Error("Invalid wire type: "+tt+" (at position "+mt+")"))}function ku(){$s(Error("Failed to read varint, encoding is invalid."))}function np(tt,mt){return mt=String.fromCharCode.apply(null,mt),tt==null?mt:tt+mt}var ju,sp=typeof TextDecoder<"u",lu,Eu=typeof TextEncoder<"u";function fp(tt){if(Eu)tt=(lu||(lu=new TextEncoder)).encode(tt);else{var mt=void 0;mt=mt===void 0?!1:mt;for(var St=0,Zt=new Uint8Array(3*tt.length),Qt=0;Qt<tt.length;Qt++){var un=tt.charCodeAt(Qt);if(128>un)Zt[St++]=un;else{if(2048>un)Zt[St++]=un>>6|192;else{if(55296<=un&&57343>=un){if(56319>=un&&Qt<tt.length){var mn=tt.charCodeAt(++Qt);if(56320<=mn&&57343>=mn){un=1024*(un-55296)+mn-56320+65536,Zt[St++]=un>>18|240,Zt[St++]=un>>12&63|128,Zt[St++]=un>>6&63|128,Zt[St++]=un&63|128;continue}else Qt--}if(mt)throw Error("Found an unpaired surrogate");un=65533}Zt[St++]=un>>12|224,Zt[St++]=un>>6&63|128}Zt[St++]=un&63|128}}tt=Zt.subarray(0,St)}return tt}var rp={},Ll=null;function Zl(tt){var mt;mt===void 0&&(mt=0),Ss(),mt=rp[mt];for(var St=Array(Math.floor(tt.length/3)),Zt=mt[64]||"",Qt=0,un=0;Qt<tt.length-2;Qt+=3){var mn=tt[Qt],Ln=tt[Qt+1],Kn=tt[Qt+2],tr=mt[mn>>2];mn=mt[(mn&3)<<4|Ln>>4],Ln=mt[(Ln&15)<<2|Kn>>6],Kn=mt[Kn&63],St[un++]=tr+mn+Ln+Kn}switch(tr=0,Kn=Zt,tt.length-Qt){case 2:tr=tt[Qt+1],Kn=mt[(tr&15)<<2]||Zt;case 1:tt=tt[Qt],St[un]=mt[tt>>2]+mt[(tt&3)<<4|tr>>4]+Kn+Zt}return St.join("")}function Uu(tt){var mt=tt.length,St=3*mt/4;St%3?St=Math.floor(St):"=.".indexOf(tt[mt-1])!=-1&&(St="=.".indexOf(tt[mt-2])!=-1?St-2:St-1);var Zt=new Uint8Array(St),Qt=0;return Nu(tt,function(un){Zt[Qt++]=un}),Zt.subarray(0,Qt)}function Nu(tt,mt){function St(Kn){for(;Zt<tt.length;){var tr=tt.charAt(Zt++),nr=Ll[tr];if(nr!=null)return nr;if(!/^[\s\xa0]*$/.test(tr))throw Error("Unknown base64 encoding at char: "+tr)}return Kn}Ss();for(var Zt=0;;){var Qt=St(-1),un=St(0),mn=St(64),Ln=St(64);if(Ln===64&&Qt===-1)break;mt(Qt<<2|un>>4),mn!=64&&(mt(un<<4&240|mn>>2),Ln!=64&&mt(mn<<6&192|Ln))}}function Ss(){if(!Ll){Ll={};for(var tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),mt=["+/=","+/","-_=","-_.","-_"],St=0;5>St;St++){var Zt=tt.concat(mt[St].split(""));rp[St]=Zt;for(var Qt=0;Qt<Zt.length;Qt++){var un=Zt[Qt];Ll[un]===void 0&&(Ll[un]=Qt)}}}}var Qs=typeof Uint8Array=="function",Gl;function ss(tt){if(this.g=tt,tt!==null&&tt.length===0)throw Error("ByteString should be constructed with non-empty values")}var Ds=typeof Uint8Array.prototype.slice=="function";function nu(tt,mt,St){return mt===St?Gl||(Gl=new Uint8Array(0)):Ds?tt.slice(mt,St):new Uint8Array(tt.subarray(mt,St))}var Rl=0,Qo=0;function Ls(tt){if(tt.constructor===Uint8Array)return tt;if(tt.constructor===ArrayBuffer)return new Uint8Array(tt);if(tt.constructor===Array)return new Uint8Array(tt);if(tt.constructor===String)return Uu(tt);if(tt.constructor===ss){if(tt.g==null)var mt=Gl||(Gl=new Uint8Array(0));else{mt=Uint8Array;var St=tt.g;St=St==null||Qs&&St!=null&&St instanceof Uint8Array?St:typeof St=="string"?Uu(St):null,tt=tt.g=St,mt=new mt(tt)}return mt}if(tt instanceof Uint8Array)return new Uint8Array(tt.buffer,tt.byteOffset,tt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function ba(tt,mt){mt=mt===void 0?{}:mt,mt=mt.v===void 0?!1:mt.v,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.v=mt,tt&&Po(this,tt)}function Po(tt,mt){tt.h=Ls(mt),tt.l=0,tt.i=tt.h.length,tt.g=tt.l}ba.prototype.reset=function(){this.g=this.l};function Ks(tt){for(var mt=128,St=0,Zt=0,Qt=0;4>Qt&&128<=mt;Qt++)mt=tt.h[tt.g++],St|=(mt&127)<<7*Qt;if(128<=mt&&(mt=tt.h[tt.g++],St|=(mt&127)<<28,Zt|=(mt&127)>>4),128<=mt)for(Qt=0;5>Qt&&128<=mt;Qt++)mt=tt.h[tt.g++],Zt|=(mt&127)<<7*Qt+3;if(128>mt)return tt=St>>>0,mt=Zt>>>0,(Zt=mt&2147483648)&&(tt=~tt+1>>>0,mt=~mt>>>0,tt==0&&(mt=mt+1>>>0)),tt=4294967296*mt+(tt>>>0),Zt?-tt:tt;tt.j=!0,ku()}function Bo(tt){tt.g>tt.i&&(tt.j=!0,$s(Error("Tried to read past the end of the data "+tt.g+" > "+tt.i)))}function Os(tt){var mt=tt.h,St=mt[tt.g],Zt=St&127;return 128>St?(tt.g+=1,Bo(tt),Zt):(St=mt[tt.g+1],Zt|=(St&127)<<7,128>St?(tt.g+=2,Bo(tt),Zt):(St=mt[tt.g+2],Zt|=(St&127)<<14,128>St?(tt.g+=3,Bo(tt),Zt):(St=mt[tt.g+3],Zt|=(St&127)<<21,128>St?(tt.g+=4,Bo(tt),Zt):(St=mt[tt.g+4],Zt|=(St&15)<<28,128>St?(tt.g+=5,Bo(tt),Zt>>>0):(tt.g+=5,128<=mt[tt.g++]&&128<=mt[tt.g++]&&128<=mt[tt.g++]&&128<=mt[tt.g++]&&128<=mt[tt.g++]?(tt.j=!0,ku(),Zt):(Bo(tt),Zt))))))}function _s(tt){var mt=tt.h[tt.g],St=tt.h[tt.g+1],Zt=tt.h[tt.g+2],Qt=tt.h[tt.g+3];return tt.g+=4,Bo(tt),(mt<<0|St<<8|Zt<<16|Qt<<24)>>>0}ba.prototype.m=function(){var tt=_s(this),mt=2*(tt>>31)+1,St=tt>>>23&255;return tt&=8388607,St==255?tt?NaN:1/0*mt:St==0?mt*Math.pow(2,-149)*tt:mt*Math.pow(2,St-150)*(tt+Math.pow(2,23))};var Dl=[];function Ws(){this.g=new Uint8Array(64),this.h=0}function Ko(tt,mt){if(!(tt.h+1<tt.g.length)){var St=tt.g;tt.g=new Uint8Array(Math.ceil(1+2*tt.g.length)),tt.g.set(St)}tt.g[tt.h++]=mt}Ws.prototype.length=function(){return this.h},Ws.prototype.end=function(){var tt=this.g,mt=this.h;return this.h=0,nu(tt,0,mt)};function Vl(tt,mt){for(;127<mt;)Ko(tt,mt&127|128),mt>>>=7;Ko(tt,mt)}function Nl(tt){var mt={},St=mt.O===void 0?!1:mt.O;this.m={v:mt.v===void 0?!1:mt.v},this.O=St,mt=this.m,Dl.length?(St=Dl.pop(),mt&&(St.v=mt.v),tt&&Po(St,tt),tt=St):tt=new ba(tt,mt),this.g=tt,this.l=this.g.g,this.h=this.i=-1,this.j=!1}Nl.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function zs(tt){var mt=tt.g;if((mt=mt.g==mt.i)||(mt=tt.j)||(mt=tt.g,mt=mt.j||0>mt.g||mt.g>mt.i),mt)return!1;tt.l=tt.g.g;var St=Os(tt.g);return mt=St>>>3,St&=7,0<=St&&5>=St?(tt.i=mt,tt.h=St,!0):(tt.j=!0,tu(St,tt.l),!1)}function Wu(tt){switch(tt.h){case 0:if(tt.h!=0)Wu(tt);else e:{tt=tt.g;for(var mt=tt.g,St=0;10>St;St++){if(!(tt.h[mt]&128)){tt.g=mt+1,Bo(tt);break e}mt++}tt.j=!0,ku()}break;case 1:tt=tt.g,tt.g+=8,Bo(tt);break;case 2:tt.h!=2?Wu(tt):(mt=Os(tt.g),tt=tt.g,tt.g+=mt,Bo(tt));break;case 5:tt=tt.g,tt.g+=4,Bo(tt);break;case 3:mt=tt.i;do{if(!zs(tt)){tt.j=!0,$s(Error("Unmatched start-group tag: stream EOF"));break}if(tt.h==4){tt.i!=mt&&(tt.j=!0,$s(Error("Unmatched end-group tag")));break}Wu(tt)}while(1);break;default:tt.j=!0,tu(tt.h,tt.l)}}function ru(tt,mt,St){var Zt=tt.g.i,Qt=Os(tt.g),un=tt.g.g+Qt;if(tt.g.i=un,St(mt,tt),St=un-tt.g.g,St!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(Qt+" bytes, instead read "+(Qt-St)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return tt.g.g=un,tt.g.i=Zt,mt}var Wl=[];function iu(){this.h=[],this.i=0,this.g=new Ws}function Gs(tt,mt){mt.length!==0&&(tt.h.push(mt),tt.i+=mt.length)}function qs(tt,mt,St){Vl(tt.g,8*mt+2),Vl(tt.g,St.length),Gs(tt,tt.g.end()),Gs(tt,St)}var ks=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function as(tt){return Object.isFrozen(tt)||(ks?tt[ks]|=1:tt.g!==void 0?tt.g|=1:Object.defineProperties(tt,{g:{value:1,configurable:!0,writable:!0,enumerable:!1}})),tt}function Ml(tt){return tt!==null&&typeof tt=="object"&&tt.constructor===Object}function ts(tt){switch(typeof tt){case"number":return isFinite(tt)?tt:String(tt);case"object":if(Qs&&tt!=null&&tt instanceof Uint8Array)return Zl(tt);if(tt instanceof ss){if(tt.g==null)tt="";else{var mt=tt.g;mt=mt==null||typeof mt=="string"?mt:Qs&&mt instanceof Uint8Array?Zl(mt):null,tt=tt.g=mt}return tt}}return tt}function zo(tt,mt){if(tt!=null)return Array.isArray(tt)||Ml(tt)?uu(tt,mt):mt(tt)}function uu(tt,mt){if(Array.isArray(tt)){for(var St=Array(tt.length),Zt=0;Zt<tt.length;Zt++)St[Zt]=zo(tt[Zt],mt);if(mt=Array.isArray(tt)){var Qt;ks?Qt=tt[ks]:Qt=tt.g,mt=(Qt??0)&1}return mt&&as(St),St}Qt={};for(St in tt)Qt[St]=zo(tt[St],mt);return Qt}function Es(tt){return tt=ts(tt),Array.isArray(tt)?uu(tt,Es):tt}var wo;function ro(tt,mt,St){var Zt=wo;wo=null,tt||(tt=Zt),Zt=this.constructor.ha,tt||(tt=Zt?[Zt]:[]),this.i=(Zt?0:-1)-(this.constructor.fa||0),this.l=this.g=null,this.u=tt;e:{if(Zt=this.u.length,tt=Zt-1,Zt&&(Zt=this.u[tt],Ml(Zt))){this.j=tt-this.i,this.h=Zt;break e}mt!==void 0&&-1<mt?(this.j=Math.max(mt,tt+1-this.i),this.h=null):this.j=Number.MAX_VALUE}if(St)for(mt=0;mt<St.length;mt++)tt=St[mt],tt<this.j?(tt+=this.i,(Zt=this.u[tt])?Array.isArray(Zt)&&as(Zt):this.u[tt]=cs):(na(this),(Zt=this.h[tt])?Array.isArray(Zt)&&as(Zt):this.h[tt]=cs)}var cs=Object.freeze(as([]));function na(tt){var mt=tt.j+tt.i;tt.u[mt]||(tt.h=tt.u[mt]={})}function ns(tt,mt,St){return mt===-1?null:St!==void 0&&St||mt>=tt.j?tt.h?tt.h[mt]:void 0:tt.u[mt+tt.i]}function ls(tt,mt,St){St=St===void 0?!1:St;var Zt=ns(tt,mt,St);return Zt==null&&(Zt=cs),Zt===cs&&(Zt=as(Zt.slice()),xr(tt,mt,Zt,St)),Zt}function ur(tt,mt){var St=ls(tt,mt);if(tt.l||(tt.l={}),!tt.l[mt]){for(var Zt=0;Zt<St.length;Zt++)St[Zt]=+St[Zt];tt.l[mt]=!0}return St}function mr(tt,mt,St){return tt=ns(tt,mt),tt=tt==null?tt:+tt,tt??(St===void 0?0:St)}function xr(tt,mt,St,Zt){Zt!==void 0&&Zt||mt>=tt.j?(na(tt),tt.h[mt]=St):tt.u[mt+tt.i]=St}function Jo(tt,mt,St,Zt){St!==Zt?xr(tt,mt,St):xr(tt,mt,void 0,!1)}function gs(tt,mt,St){if(St===-1)return null;tt.g||(tt.g={});var Zt=tt.g[St];if(Zt)return Zt;var Qt=ns(tt,St,!1);return Qt==null?Zt:(mt=new mt(Qt),tt.g[St]=mt)}function hs(tt,mt,St){tt.g||(tt.g={});var Zt=tt.g[St];if(!Zt){var Qt=ls(tt,St,!1);Zt=[];for(var un=0;un<Qt.length;un++)Zt[un]=new mt(Qt[un]);tt.g[St]=Zt}return Zt}function fo(tt,mt,St,Zt,Qt){var un=hs(tt,Zt,mt);St=St||new Zt,tt=ls(tt,mt),Qt!=null?(un.splice(Qt,0,St),tt.splice(Qt,0,St.u)):(un.push(St),tt.push(St.u))}ro.prototype.toJSON=function(){return uu(this.u,Es)},ro.prototype.toString=function(){return this.u.toString()};function Cs(tt,mt){return tt=ns(tt,mt),tt??0}function xa(tt,mt){return tt=ns(tt,mt),tt??""}function Ul(tt,mt){if(tt=tt.m){Gs(mt,mt.g.end());for(var St=0;St<tt.length;St++)Gs(mt,tt[St])}}var Hl=Symbol();function du(tt,mt,St){return tt[Hl]||(tt[Hl]=function(Zt,Qt){return mt(Zt,Qt,St)})}function Cu(tt){var mt=tt[Hl];if(!mt){var St=tt[Bl]||(tt[Bl]=tt());mt=function(Zt,Qt){return $a(Zt,Qt,St)},tt[Hl]=mt}return mt}function ga(tt){var mt=tt.da;if(mt)return Cu(mt);if(mt=tt.ia){var St=tt.Y;return delete tt.Y,du(tt.W.g,mt,St)}}function Yl(tt){var mt=ga(tt),St=tt.W,Zt=tt.ea;return mt?function(Qt,un){return Zt(Qt,un,St,mt)}:function(Qt,un){return Zt(Qt,un,St)}}function Ap(tt){var mt=tt[0];switch(tt.length){case 2:var St=tt[1];return function(kr,Kr,Yr){return mt(kr,Kr,Yr,St)};case 3:var Zt=tt[1],Qt=Cu(tt[2]);return function(kr,Kr,Yr){return mt(kr,Kr,Yr,Zt,Qt)};case 4:var un=tt[1],mn=tt[3],Ln=Cu(tt[2]);return function(kr,Kr,Yr){return mt(kr,Kr,Yr,un,Ln,mn)};case 5:var Kn=tt[1],tr=du(Kn,tt[3],tt[4]);return function(kr,Kr,Yr){return mt(kr,Kr,Yr,Kn,tr)};case 6:var nr=tt[1],Cr=tt[5],Gr=du(nr,tt[3],tt[4]);return function(kr,Kr,Yr){return mt(kr,Kr,Yr,nr,Gr,Cr)};default:throw Error("Unsupported number of parameters, expected [2-6], got "+tt.length)}}var Bl=Symbol();function $a(tt,mt,St){for(;zs(mt)&&mt.h!=4;){var Zt=mt.i,Qt=St[Zt];if(Qt)Array.isArray(Qt)&&(Qt=St[Zt]=Ap(Qt));else{var un=St[0];un&&(un=un[Zt])&&(Qt=St[Zt]=Yl(un))}Qt&&Qt(mt,tt,Zt)||(Qt=mt,Zt=tt,un=Qt.l,Wu(Qt),Qt.O||(Qt=nu(Qt.g.h,un,Qt.g.g),(un=Zt.m)?un.push(Qt):Zt.m=[Qt]))}return tt}function Ou(tt,mt){var St=new iu;if(mt(tt,St),tt=St.i+St.g.length(),tt===0)St=new Uint8Array(0);else{tt=new Uint8Array(tt);for(var Zt=St.h,Qt=Zt.length,un=mt=0;un<Qt;un++){var mn=Zt[un];mn.length!==0&&(tt.set(mn,mt),mt+=mn.length)}Zt=St.g,Qt=Zt.h,Qt!==0&&(tt.set(Zt.g.subarray(0,Qt),mt),Zt.h=0),St.h=[tt],St=tt}return St}function Hu(tt,mt,St){if(Wl.length){var Zt=Wl.pop();tt&&(Po(Zt.g,tt),Zt.i=-1,Zt.h=-1),tt=Zt}else tt=new Nl(tt);try{var Qt=new mt;return $a(Qt,tt,St[Bl]||(St[Bl]=St()))}finally{mt=tt.g,mt.h=null,mt.l=0,mt.i=0,mt.g=0,mt.j=!1,mt.v=!1,tt.i=-1,tt.h=-1,tt.j=!1,100>Wl.length&&Wl.push(tt)}}function Il(tt,mt,St){if(mt=ns(mt,St),mt!=null){Vl(tt.g,8*St+5),tt=tt.g;var Zt=mt;Zt=(St=0>Zt?1:0)?-Zt:Zt,Zt===0?0<1/Zt?Rl=Qo=0:(Qo=0,Rl=2147483648):isNaN(Zt)?(Qo=0,Rl=2147483647):34028234663852886e22<Zt?(Qo=0,Rl=(St<<31|2139095040)>>>0):11754943508222875e-54>Zt?(Zt=Math.round(Zt/Math.pow(2,-149)),Qo=0,Rl=(St<<31|Zt)>>>0):(mt=Math.floor(Math.log(Zt)/Math.LN2),Zt*=Math.pow(2,-mt),Zt=Math.round(8388608*Zt),16777216<=Zt&&++mt,Qo=0,Rl=(St<<31|mt+127<<23|Zt&8388607)>>>0),St=Rl,Ko(tt,St>>>0&255),Ko(tt,St>>>8&255),Ko(tt,St>>>16&255),Ko(tt,St>>>24&255)}}function hp(tt,mt,St){if(tt.h!==1)return!1;var Zt=tt.g;tt=_s(Zt);var Qt=_s(Zt);Zt=2*(Qt>>31)+1;var un=Qt>>>20&2047;return tt=4294967296*(Qt&1048575)+tt,Jo(mt,St,un==2047?tt?NaN:1/0*Zt:un==0?Zt*Math.pow(2,-1074)*tt:Zt*Math.pow(2,un-1075)*(tt+4503599627370496),0),!0}function Kl(tt,mt,St){return tt.h!==5?!1:(xr(mt,St,tt.g.m()),!0)}function Au(tt,mt,St){if(tt.h!==5&&tt.h!==2)return!1;if(mt=ls(mt,St),tt.h==2){St=ba.prototype.m;var Zt=Os(tt.g);for(Zt=tt.g.g+Zt;tt.g.g<Zt;)mt.push(St.call(tt.g))}else mt.push(tt.g.m());return!0}function $u(tt,mt,St){return tt.h!==5?!1:(tt=tt.g.m(),Jo(mt,St,tt,0),!0)}function Ep(tt,mt,St){return tt.h!==0?!1:(xr(mt,St,Ks(tt.g)),!0)}function ou(tt,mt,St){return tt.h!==0?!1:(xr(mt,St,Os(tt.g)),!0)}function _u(tt,mt,St){return tt.h!==0?!1:(tt=Os(tt.g),Jo(mt,St,tt,0),!0)}function Fp(tt,mt,St){return tt.h!==0?!1:(tt=!!Os(tt.g),Jo(mt,St,tt,!1),!0)}function Xp(tt,mt,St){if(tt.h!==2)return!1;var Zt=Os(tt.g);tt=tt.g;var Qt=tt.g;tt.g+=Zt,Bo(tt),tt=tt.h;var un;if(sp)(un=ju)||(un=ju=new TextDecoder("utf-8",{fatal:!1})),un=un.decode(tt.subarray(Qt,Qt+Zt));else{Zt=Qt+Zt;for(var mn=[],Ln=null,Kn,tr,nr;Qt<Zt;)Kn=tt[Qt++],128>Kn?mn.push(Kn):224>Kn?Qt>=Zt?mn.push(65533):(tr=tt[Qt++],194>Kn||(tr&192)!==128?(Qt--,mn.push(65533)):mn.push((Kn&31)<<6|tr&63)):240>Kn?Qt>=Zt-1?mn.push(65533):(tr=tt[Qt++],(tr&192)!==128||Kn===224&&160>tr||Kn===237&&160<=tr||((un=tt[Qt++])&192)!==128?(Qt--,mn.push(65533)):mn.push((Kn&15)<<12|(tr&63)<<6|un&63)):244>=Kn?Qt>=Zt-2?mn.push(65533):(tr=tt[Qt++],(tr&192)!==128||(Kn<<28)+(tr-144)>>30||((un=tt[Qt++])&192)!==128||((nr=tt[Qt++])&192)!==128?(Qt--,mn.push(65533)):(Kn=(Kn&7)<<18|(tr&63)<<12|(un&63)<<6|nr&63,Kn-=65536,mn.push((Kn>>10&1023)+55296,(Kn&1023)+56320))):mn.push(65533),8192<=mn.length&&(Ln=np(Ln,mn),mn.length=0);un=np(Ln,mn)}return xr(mt,St,un),!0}function qu(tt,mt,St,Zt,Qt){return tt.h!==2?!1:(tt=ru(tt,new Zt,Qt),mt.g||(mt.g={}),Zt=tt&&tt.u,mt.g[St]=tt,xr(mt,St,Zt,!1),!0)}function ip(tt,mt,St,Zt,Qt){return tt.h!==2?!1:(tt=ru(tt,new Zt,Qt),fo(mt,St,tt,Zt,void 0),!0)}function At(tt,mt,St){return tt.h!==0?!1:(xr(mt,St,Ks(tt.g)),!0)}function Dt(tt){ro.call(this,tt)}Ar(Dt,ro);function jt(){return{1:ou,2:Kl,3:Xp,4:Xp}}function Zn(tt,mt){var St=ns(tt,1);if(St!=null&&St!=null){Vl(mt.g,8);var Zt=mt.g;if(0<=St)Vl(Zt,St);else{for(var Qt=0;9>Qt;Qt++)Ko(Zt,St&127|128),St>>=7;Ko(Zt,1)}}Il(mt,tt,2),Zt=ns(tt,3),Zt!=null&&qs(mt,3,fp(Zt)),Zt=ns(tt,4),Zt!=null&&qs(mt,4,fp(Zt)),Ul(tt,mt)}function _n(tt){ro.call(this,tt,-1,Qn)}Ar(_n,ro),_n.prototype.addClassification=function(tt,mt){return fo(this,1,tt,Dt,mt),this};function Sr(){return{1:[ip,Dt,jt]}}var Qn=[1];function hr(tt){ro.call(this,tt)}Ar(hr,ro);function Nr(){return{1:Kl,2:Kl,3:Kl,4:Kl,5:Kl}}function ao(tt,mt){Il(mt,tt,1),Il(mt,tt,2),Il(mt,tt,3),Il(mt,tt,4),Il(mt,tt,5),Ul(tt,mt)}function Wo(tt){ro.call(this,tt,-1,es)}Ar(Wo,ro);function Ao(){return{1:[ip,hr,Nr]}}var es=[1];function Lo(tt){ro.call(this,tt)}Ar(Lo,ro);function go(){return{1:Kl,2:Kl,3:Kl,4:Kl,5:Kl,6:Ep}}function No(tt,mt){Il(mt,tt,1),Il(mt,tt,2),Il(mt,tt,3),Il(mt,tt,4),Il(mt,tt,5);var St=ns(tt,6);if(St!=null&&St!=null){Vl(mt.g,48);var Zt=mt.g,Qt=St;St=0>Qt,Qt=Math.abs(Qt);var un=Qt>>>0;for(Qt=Math.floor((Qt-un)/4294967296),Qt>>>=0,St&&(Qt=~Qt>>>0,un=(~un>>>0)+1,4294967295<un&&(un=0,Qt++,4294967295<Qt&&(Qt=0))),Rl=un,Qo=Qt,St=Rl,un=Qo;0<un||127<St;)Ko(Zt,St&127|128),St=(St>>>7|un<<25)>>>0,un>>>=7;Ko(Zt,St)}Ul(tt,mt)}function $o(tt){ro.call(this,tt,-1,_a)}Ar($o,ro);function ps(){return{1:At,2:At,3:Au,4:[qu,Ts,As],5:ou,6:ou,7:Au,8:Au,9:Au}}function Ts(tt){ro.call(this,tt)}Ar(Ts,ro);function As(){return{1:Kl,2:Kl,3:Kl}}var _a=[3,7,8,9];function xt(tt){ro.call(this,tt)}Ar(xt,ro);function Vt(){return{1:$u,2:$u,3:$u}}function Wt(tt){ro.call(this,tt)}Ar(Wt,ro);function gn(){return{1:$u,2:$u,3:$u}}function Nn(tt){ro.call(this,tt)}Ar(Nn,ro);function er(){return{1:_u,2:[qu,Wt,gn],3:[qu,xt,Vt],4:Fp}}function Pn(tt){ro.call(this,tt,-1,Rr)}Ar(Pn,ro);function ar(){return{1:_u,2:[ip,Nn,er],3:$u,4:Au,5:Au,6:Au}}var Rr=[2,4,5,6];function pt(tt){ro.call(this,tt,-1,Ht)}Ar(pt,ro);function Mt(){return{1:_u,2:[ip,Pn,ar],3:[qu,$o,ps],4:hp,5:Au,6:Au}}var Ht=[2,5,6];function cn(tt,mt,St){if(St=tt.createShader(St===0?tt.VERTEX_SHADER:tt.FRAGMENT_SHADER),tt.shaderSource(St,mt),tt.compileShader(St),!tt.getShaderParameter(St,tt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+tt.getShaderInfoLog(St));return St}function xn(tt){return hs(tt,Dt,1).map(function(mt){return{index:Cs(mt,1),$:mr(mt,2),label:ns(mt,3)!=null?xa(mt,3):void 0,displayName:ns(mt,4)!=null?xa(mt,4):void 0}})}function Xn(tt){return{x:mr(tt,1),y:mr(tt,2),z:mr(tt,3),visibility:ns(tt,4)!=null?mr(tt,4):void 0}}function Gn(tt,mt){this.h=tt,this.g=mt,this.l=0}function dr(tt,mt,St){return sr(tt,mt),typeof tt.g.canvas.transferToImageBitmap=="function"?o.resolve(tt.g.canvas.transferToImageBitmap()):St?o.resolve(tt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(tt.g.canvas):(tt.i===void 0&&(tt.i=document.createElement("canvas")),new o(function(Zt){tt.i.height=tt.g.canvas.height,tt.i.width=tt.g.canvas.width,tt.i.getContext("2d",{}).drawImage(tt.g.canvas,0,0,tt.g.canvas.width,tt.g.canvas.height),Zt(tt.i)}))}function sr(tt,mt){var St=tt.g;if(tt.m===void 0){var Zt=cn(St,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Qt=cn(St,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),un=St.createProgram();if(St.attachShader(un,Zt),St.attachShader(un,Qt),St.linkProgram(un),!St.getProgramParameter(un,St.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+St.getProgramInfoLog(un));Zt=tt.m=un,St.useProgram(Zt),Qt=St.getUniformLocation(Zt,"sampler0"),tt.j={J:St.getAttribLocation(Zt,"aVertex"),I:St.getAttribLocation(Zt,"aTex"),ja:Qt},tt.s=St.createBuffer(),St.bindBuffer(St.ARRAY_BUFFER,tt.s),St.enableVertexAttribArray(tt.j.J),St.vertexAttribPointer(tt.j.J,2,St.FLOAT,!1,0,0),St.bufferData(St.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),St.STATIC_DRAW),St.bindBuffer(St.ARRAY_BUFFER,null),tt.o=St.createBuffer(),St.bindBuffer(St.ARRAY_BUFFER,tt.o),St.enableVertexAttribArray(tt.j.I),St.vertexAttribPointer(tt.j.I,2,St.FLOAT,!1,0,0),St.bufferData(St.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),St.STATIC_DRAW),St.bindBuffer(St.ARRAY_BUFFER,null),St.uniform1i(Qt,0)}Zt=tt.j,St.useProgram(tt.m),St.canvas.width=mt.width,St.canvas.height=mt.height,St.viewport(0,0,mt.width,mt.height),St.activeTexture(St.TEXTURE0),tt.h.bindTexture2d(mt.glName),St.enableVertexAttribArray(Zt.J),St.bindBuffer(St.ARRAY_BUFFER,tt.s),St.vertexAttribPointer(Zt.J,2,St.FLOAT,!1,0,0),St.enableVertexAttribArray(Zt.I),St.bindBuffer(St.ARRAY_BUFFER,tt.o),St.vertexAttribPointer(Zt.I,2,St.FLOAT,!1,0,0),St.bindFramebuffer(St.DRAW_FRAMEBUFFER?St.DRAW_FRAMEBUFFER:St.FRAMEBUFFER,null),St.clearColor(0,0,0,0),St.clear(St.COLOR_BUFFER_BIT),St.colorMask(!0,!0,!0,!0),St.drawArrays(St.TRIANGLE_FAN,0,4),St.disableVertexAttribArray(Zt.J),St.disableVertexAttribArray(Zt.I),St.bindBuffer(St.ARRAY_BUFFER,null),tt.h.bindTexture2d(0)}function Fr(tt){this.g=tt}var _r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Mo(tt,mt){return mt+tt}function co(tt,mt){window[tt]=mt}function Lr(tt){var mt=document.createElement("script");return mt.setAttribute("src",tt),mt.setAttribute("crossorigin","anonymous"),new o(function(St){mt.addEventListener("load",function(){St()},!1),mt.addEventListener("error",function(){St()},!1),document.body.appendChild(mt)})}function _i(){return Hr(function(tt){switch(tt.g){case 1:return tt.m=2,qn(tt,WebAssembly.instantiate(_r),4);case 4:tt.g=3,tt.m=0;break;case 2:return tt.m=0,tt.j=null,tt.return(!1);case 3:return tt.return(!0)}})}function uo(tt){if(this.g=tt,this.listeners={},this.j={},this.G={},this.m={},this.s={},this.H=this.o=this.S=!0,this.D=o.resolve(),this.R="",this.C={},this.locateFile=tt&&tt.locateFile||Mo,typeof window=="object")var mt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")mt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.T=mt,tt.options){mt=ln(Object.keys(tt.options));for(var St=mt.next();!St.done;St=mt.next()){St=St.value;var Zt=tt.options[St].default;Zt!==void 0&&(this.j[St]=typeof Zt=="function"?Zt():Zt)}}}at=uo.prototype,at.close=function(){return this.i&&this.i.delete(),o.resolve()};function Co(tt){var mt,St,Zt,Qt,un,mn,Ln,Kn,tr,nr,Cr;return Hr(function(Gr){switch(Gr.g){case 1:return tt.S?(mt=tt.g.files===void 0?[]:typeof tt.g.files=="function"?tt.g.files(tt.j):tt.g.files,qn(Gr,_i(),2)):Gr.return();case 2:if(St=Gr.h,typeof window=="object")return co("createMediapipeSolutionsWasm",{locateFile:tt.locateFile}),co("createMediapipeSolutionsPackedAssets",{locateFile:tt.locateFile}),mn=mt.filter(function(kr){return kr.data!==void 0}),Ln=mt.filter(function(kr){return kr.data===void 0}),Kn=o.all(mn.map(function(kr){var Kr=kt(tt,kr.url);if(kr.path!==void 0){var Yr=kr.path;Kr=Kr.then(function(Uo){return tt.overrideFile(Yr,Uo),o.resolve(Uo)})}return Kr})),tr=o.all(Ln.map(function(kr){return kr.simd===void 0||kr.simd&&St||!kr.simd&&!St?Lr(tt.locateFile(kr.url,tt.T)):o.resolve()})).then(function(){var kr,Kr,Yr;return Hr(function(Uo){if(Uo.g==1)return kr=window.createMediapipeSolutionsWasm,Kr=window.createMediapipeSolutionsPackedAssets,Yr=tt,qn(Uo,kr(Kr),2);Yr.h=Uo.h,Uo.g=0})}),nr=function(){return Hr(function(kr){return tt.g.graph&&tt.g.graph.url?kr=qn(kr,kt(tt,tt.g.graph.url),0):(kr.g=0,kr=void 0),kr})}(),qn(Gr,o.all([tr,Kn,nr]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Zt=mt.filter(function(kr){return kr.simd===void 0||kr.simd&&St||!kr.simd&&!St}).map(function(kr){return tt.locateFile(kr.url,tt.T)}),importScripts.apply(null,En(Zt)),Qt=tt,qn(Gr,createMediapipeSolutionsWasm(Module),6);case 6:Qt.h=Gr.h,tt.l=new OffscreenCanvas(1,1),tt.h.canvas=tt.l,un=tt.h.GL.createContext(tt.l,{antialias:!1,alpha:!1,ga:typeof WebGL2RenderingContext<"u"?2:1}),tt.h.GL.makeContextCurrent(un),Gr.g=4;break;case 7:if(tt.l=document.createElement("canvas"),Cr=tt.l.getContext("webgl2",{}),!Cr&&(Cr=tt.l.getContext("webgl",{}),!Cr))return alert("Failed to create WebGL canvas context when passing video frame."),Gr.return();tt.F=Cr,tt.h.canvas=tt.l,tt.h.createContext(tt.l,!0,!0,{});case 4:tt.i=new tt.h.SolutionWasm,tt.S=!1,Gr.g=0}})}function Io(tt){var mt,St,Zt,Qt,un,mn,Ln,Kn;return Hr(function(tr){if(tr.g==1){if(tt.g.graph&&tt.g.graph.url&&tt.R===tt.g.graph.url)return tr.return();if(tt.o=!0,!tt.g.graph||!tt.g.graph.url){tr.g=2;return}return tt.R=tt.g.graph.url,qn(tr,kt(tt,tt.g.graph.url),3)}for(tr.g!=2&&(mt=tr.h,tt.i.loadGraph(mt)),St=ln(Object.keys(tt.C)),Zt=St.next();!Zt.done;Zt=St.next())Qt=Zt.value,tt.i.overrideFile(Qt,tt.C[Qt]);if(tt.C={},tt.g.listeners)for(un=ln(tt.g.listeners),mn=un.next();!mn.done;mn=un.next())Ln=mn.value,wn(tt,Ln);Kn=tt.j,tt.j={},tt.setOptions(Kn),tr.g=0})}at.reset=function(){var tt=this;return Hr(function(mt){tt.i&&(tt.i.reset(),tt.m={},tt.s={}),mt.g=0})},at.setOptions=function(tt,mt){var St=this;if(mt=mt||this.g.options){for(var Zt=[],Qt=[],un={},mn=ln(Object.keys(tt)),Ln=mn.next();!Ln.done;un={L:un.L,M:un.M},Ln=mn.next()){var Kn=Ln.value;Kn in this.j&&this.j[Kn]===tt[Kn]||(this.j[Kn]=tt[Kn],Ln=mt[Kn],Ln!==void 0&&(Ln.onChange&&(un.L=Ln.onChange,un.M=tt[Kn],Zt.push(function(tr){return function(){var nr;return Hr(function(Cr){if(Cr.g==1)return qn(Cr,tr.L(tr.M),2);nr=Cr.h,nr===!0&&(St.o=!0),Cr.g=0})}}(un))),Ln.graphOptionXref&&(Kn={valueNumber:Ln.type===1?tt[Kn]:0,valueBoolean:Ln.type===0?tt[Kn]:!1,valueString:Ln.type===2?tt[Kn]:""},Ln=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Ln.graphOptionXref),Kn),Qt.push(Ln))))}(Zt.length!==0||Qt.length!==0)&&(this.o=!0,this.B=(this.B===void 0?[]:this.B).concat(Qt),this.A=(this.A===void 0?[]:this.A).concat(Zt))}};function gt(tt){var mt,St,Zt,Qt,un,mn,Ln;return Hr(function(Kn){switch(Kn.g){case 1:if(!tt.o)return Kn.return();if(!tt.A){Kn.g=2;break}mt=ln(tt.A),St=mt.next();case 3:if(St.done){Kn.g=5;break}return Zt=St.value,qn(Kn,Zt(),4);case 4:St=mt.next(),Kn.g=3;break;case 5:tt.A=void 0;case 2:if(tt.B){for(Qt=new tt.h.GraphOptionChangeRequestList,un=ln(tt.B),mn=un.next();!mn.done;mn=un.next())Ln=mn.value,Qt.push_back(Ln);tt.i.changeOptions(Qt),Qt.delete(),tt.B=void 0}tt.o=!1,Kn.g=0}})}at.initialize=function(){var tt=this;return Hr(function(mt){return mt.g==1?qn(mt,Co(tt),2):mt.g!=3?qn(mt,Io(tt),3):qn(mt,gt(tt),0)})};function kt(tt,mt){var St,Zt;return Hr(function(Qt){return mt in tt.G?Qt.return(tt.G[mt]):(St=tt.locateFile(mt,""),Zt=fetch(St).then(function(un){return un.arrayBuffer()}),tt.G[mt]=Zt,Qt.return(Zt))})}at.overrideFile=function(tt,mt){this.i?this.i.overrideFile(tt,mt):this.C[tt]=mt},at.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},at.send=function(tt,mt){var St=this,Zt,Qt,un,mn,Ln,Kn,tr,nr,Cr;return Hr(function(Gr){switch(Gr.g){case 1:return St.g.inputs?(Zt=1e3*(mt??performance.now()),qn(Gr,St.D,2)):Gr.return();case 2:return qn(Gr,St.initialize(),3);case 3:for(Qt=new St.h.PacketDataList,un=ln(Object.keys(tt)),mn=un.next();!mn.done;mn=un.next())if(Ln=mn.value,Kn=St.g.inputs[Ln]){e:{var kr=tt[Ln];switch(Kn.type){case"video":var Kr=St.m[Kn.stream];if(Kr||(Kr=new Gn(St.h,St.F),St.m[Kn.stream]=Kr),Kr.l===0&&(Kr.l=Kr.h.createTexture()),typeof HTMLVideoElement<"u"&&kr instanceof HTMLVideoElement)var Yr=kr.videoWidth,Uo=kr.videoHeight;else typeof HTMLImageElement<"u"&&kr instanceof HTMLImageElement?(Yr=kr.naturalWidth,Uo=kr.naturalHeight):(Yr=kr.width,Uo=kr.height);Uo={glName:Kr.l,width:Yr,height:Uo},Yr=Kr.g,Yr.canvas.width=Uo.width,Yr.canvas.height=Uo.height,Yr.activeTexture(Yr.TEXTURE0),Kr.h.bindTexture2d(Kr.l),Yr.texImage2D(Yr.TEXTURE_2D,0,Yr.RGBA,Yr.RGBA,Yr.UNSIGNED_BYTE,kr),Kr.h.bindTexture2d(0),Kr=Uo;break e;case"detections":for(Kr=St.m[Kn.stream],Kr||(Kr=new Fr(St.h),St.m[Kn.stream]=Kr),Kr.data||(Kr.data=new Kr.g.DetectionListData),Kr.data.reset(kr.length),Uo=0;Uo<kr.length;++Uo){Yr=kr[Uo];var us=Kr.data,ds=us.setBoundingBox,yl=Uo,Mu=Yr.U,Sl=new Lo;if(xr(Sl,1,Mu.aa),xr(Sl,2,Mu.ba),xr(Sl,3,Mu.height),xr(Sl,4,Mu.width),xr(Sl,5,Mu.rotation),xr(Sl,6,Mu.Z),Mu=Ou(Sl,No),ds.call(us,yl,Mu),Yr.P)for(us=0;us<Yr.P.length;++us){Sl=Yr.P[us];var ap=!!Sl.visibility;ds=Kr.data,yl=ds.addNormalizedLandmark,Mu=Uo,Sl=Object.assign(Object.assign({},Sl),{visibility:ap?Sl.visibility:0}),ap=new hr,xr(ap,1,Sl.x),xr(ap,2,Sl.y),xr(ap,3,Sl.z),Sl.visibility&&xr(ap,4,Sl.visibility),Sl=Ou(ap,ao),yl.call(ds,Mu,Sl)}if(Yr.N)for(us=0;us<Yr.N.length;++us)ds=Kr.data,yl=ds.addClassification,Mu=Uo,Sl=Yr.N[us],ap=new Dt,xr(ap,2,Sl.$),Sl.index&&xr(ap,1,Sl.index),Sl.label&&xr(ap,3,Sl.label),Sl.displayName&&xr(ap,4,Sl.displayName),Sl=Ou(ap,Zn),yl.call(ds,Mu,Sl)}Kr=Kr.data;break e;default:Kr={}}}switch(tr=Kr,nr=Kn.stream,Kn.type){case"video":Qt.pushTexture2d(Object.assign(Object.assign({},tr),{stream:nr,timestamp:Zt}));break;case"detections":Cr=tr,Cr.stream=nr,Cr.timestamp=Zt,Qt.pushDetectionList(Cr);break;default:throw Error("Unknown input config type: '"+Kn.type+"'")}}return St.i.send(Qt),qn(Gr,St.D,4);case 4:Qt.delete(),Gr.g=0}})};function Yt(tt,mt,St){var Zt,Qt,un,mn,Ln,Kn,tr,nr,Cr,Gr,kr,Kr,Yr,Uo;return Hr(function(us){switch(us.g){case 1:if(!St)return us.return(mt);for(Zt={},Qt=0,un=ln(Object.keys(St)),mn=un.next();!mn.done;mn=un.next())Ln=mn.value,Kn=St[Ln],typeof Kn!="string"&&Kn.type==="texture"&&mt[Kn.stream]!==void 0&&++Qt;1<Qt&&(tt.H=!1),tr=ln(Object.keys(St)),mn=tr.next();case 2:if(mn.done){us.g=4;break}if(nr=mn.value,Cr=St[nr],typeof Cr=="string")return Yr=Zt,Uo=nr,qn(us,rn(tt,nr,mt[Cr]),14);if(Gr=mt[Cr.stream],Cr.type==="detection_list"){if(Gr){for(var ds=Gr.getRectList(),yl=Gr.getLandmarksList(),Mu=Gr.getClassificationsList(),Sl=[],ap=0;ap<ds.size();++ap){var Pm=Hu(ds.get(ap),Lo,go);Pm={U:{aa:mr(Pm,1),ba:mr(Pm,2),height:mr(Pm,3),width:mr(Pm,4),rotation:mr(Pm,5,0),Z:Cs(Pm,6)},P:hs(Hu(yl.get(ap),Wo,Ao),hr,1).map(Xn),N:xn(Hu(Mu.get(ap),_n,Sr))},Sl.push(Pm)}ds=Sl}else ds=[];Zt[nr]=ds,us.g=7;break}if(Cr.type==="proto_list"){if(Gr){for(ds=Array(Gr.size()),yl=0;yl<Gr.size();yl++)ds[yl]=Gr.get(yl);Gr.delete()}else ds=[];Zt[nr]=ds,us.g=7;break}if(Gr===void 0){us.g=3;break}if(Cr.type==="float_list"){Zt[nr]=Gr,us.g=7;break}if(Cr.type==="proto"){Zt[nr]=Gr,us.g=7;break}if(Cr.type!=="texture")throw Error("Unknown output config type: '"+Cr.type+"'");return kr=tt.s[nr],kr||(kr=new Gn(tt.h,tt.F),tt.s[nr]=kr),qn(us,dr(kr,Gr,tt.H),13);case 13:Kr=us.h,Zt[nr]=Kr;case 7:Cr.transform&&Zt[nr]&&(Zt[nr]=Cr.transform(Zt[nr])),us.g=3;break;case 14:Yr[Uo]=us.h;case 3:mn=tr.next(),us.g=2;break;case 4:return us.return(Zt)}})}function rn(tt,mt,St){var Zt;return Hr(function(Qt){return typeof St=="number"||St instanceof Uint8Array||St instanceof tt.h.Uint8BlobList?Qt.return(St):St instanceof tt.h.Texture2dDataOut?(Zt=tt.s[mt],Zt||(Zt=new Gn(tt.h,tt.F),tt.s[mt]=Zt),Qt.return(dr(Zt,St,tt.H))):Qt.return(void 0)})}function wn(tt,mt){for(var St=mt.name||"$",Zt=[].concat(En(mt.wants)),Qt=new tt.h.StringList,un=ln(mt.wants),mn=un.next();!mn.done;mn=un.next())Qt.push_back(mn.value);un=tt.h.PacketListener.implement({onResults:function(Ln){for(var Kn={},tr=0;tr<mt.wants.length;++tr)Kn[Zt[tr]]=Ln.get(tr);var nr=tt.listeners[St];nr&&(tt.D=Yt(tt,Kn,mt.outs).then(function(Cr){Cr=nr(Cr);for(var Gr=0;Gr<mt.wants.length;++Gr){var kr=Kn[Zt[Gr]];typeof kr=="object"&&kr.hasOwnProperty&&kr.hasOwnProperty("delete")&&kr.delete()}Cr&&(tt.D=Cr)}))}}),tt.i.attachMultiListener(Qt,un),Qt.delete()}at.onResults=function(tt,mt){this.listeners[mt||"$"]=tt},Oo("Solution",uo),Oo("OptionType",{BOOL:0,NUMBER:1,ca:2,0:"BOOL",1:"NUMBER",2:"STRING"});function ft(tt){var mt=Cs(tt,1),St=gs(tt,xt,3);return St={x:mr(St,1),y:mr(St,2),depth:mr(St,3)},tt=gs(tt,Wt,2),{id:mt,point2d:St,point3d:{x:mr(tt,1),y:mr(tt,2),z:mr(tt,3)}}}function It(tt){var mt=Hu(tt,pt,Mt);tt=[],mt=hs(mt,Pn,2);for(var St=0;St<mt.length;St++)tt.push({id:Cs(mt[St],1),keypoints:hs(mt[St],Nn,2).map(ft),visibility:mr(mt[St],3),scale:ur(mt[St],6),translation:ur(mt[St],5),rotation:ur(mt[St],4)});return tt}function Lt(tt){switch(tt){case"Camera":return"object_detection_3d_camera.tflite";case"Chair":return"object_detection_3d_chair.tflite";case"Cup":return"object_detection_3d_cup.tflite";default:return"object_detection_3d_sneakers.tflite"}}function rt(tt){switch(tt){case"Camera":return"Camera";case"Chair":return"Chair";case"Cup":return"Coffee cup, Mug";default:return"Footwear"}}var yt={focalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_x"}},focalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_y"}},principalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_x"}},principalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_y"}},allowedLabels:{type:2,graphOptionXref:{calculatorName:"ConstantSidePacketCalculatorAllowedLabels",calculatorType:"ConstantSidePacketCalculator",fieldName:"string_value"}}};function wt(tt){var mt=this;tt=tt||{},this.g=new uo({locateFile:tt.locateFile,files:[{url:"objectron_solution_packed_assets_loader.js"},{simd:!1,url:"objectron_solution_wasm_bin.js"},{simd:!0,url:"objectron_solution_simd_wasm_bin.js"}],graph:{url:"objectron.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["lifted_objects","image_transformed"],outs:{image:"image_transformed",objectDetections:{type:"proto",stream:"lifted_objects",transform:It}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,default:!1,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumObjects:{type:1,default:5,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorMaxNumObjects",fieldName:"int_value"}},staticImageMode:{type:0,default:!0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"objectrongpusubgraph__ConstantSidePacketCalculator",fieldName:"bool_value"}},minDetectionConfidence:{type:1,default:.5,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"objectrongpusubgraph__objectdetectionoidv4subgraph__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,default:.99,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"objectrongpusubgraph__boxlandmarksubgraph__ThresholdingCalculator",fieldName:"threshold"}},modelName:{default:"Shoe",onChange:function(St){var Zt,Qt,un,mn;return Hr(function(Ln){return Ln.g==1?(Zt=St,mt.g.setOptions({allowedLabels:rt(Zt)},yt),Qt=Lt(Zt),un="object_detection_3d.tflite",qn(Ln,kt(mt.g,Qt),2)):(mn=Ln.h,mt.g.overrideFile(un,mn),Ln.return(!0))})}},focalLength:{default:[1,1],onChange:function(St){var Zt;return Hr(function(Qt){return Zt=St,mt.h=Zt,mt.g.setOptions({focalX:Zt[0],focalY:Zt[1]},yt),Qt.return(!0)})}},principalPoint:{default:[0,0],onChange:function(St){var Zt;return Hr(function(Qt){return Zt=St,mt.i=Zt,mt.g.setOptions({principalX:Zt[0],principalY:Zt[1]},yt),Qt.return(!0)})}},imageSize:{onChange:function(St){var Zt,Qt,un,mn;return Hr(function(Ln){if(mt.h===void 0||mt.i===void 0)return console.error('"focalLength" and "principalPoint" must be set if setting image size'),Ln.return();Zt=St,Qt=[Zt[0]/2,Zt[1]/2],un=[mt.h[0]/Qt[0],mt.h[1]/Qt[1]],mn=[mt.i[0]/Qt[0],mt.i[1]/Qt[1]],mt.setOptions({focalLength:un,principalPoint:mn}),Ln.g=0})}}}})}at=wt.prototype,at.close=function(){return this.g.close(),o.resolve()},at.onResults=function(tt){this.g.onResults(tt)},at.initialize=function(){var tt=this;return Hr(function(mt){return qn(mt,tt.g.initialize(),0)})},at.reset=function(){this.g.reset()},at.send=function(tt){var mt=this;return Hr(function(St){return qn(St,mt.g.send(tt),0)})},at.setOptions=function(tt){this.g.setOptions(tt)},Oo("Objectron",wt),Oo("BOX_CONNECTIONS",[[1,2],[2,4],[4,3],[3,1],[5,6],[6,8],[8,7],[7,5],[1,5],[2,6],[3,7],[4,8]]),Oo("BOX_KEYPOINTS",{CENTER:0,BACK_BOTTOM_LEFT:1,FRONT_BOTTOM_LEFT:2,BACK_TOP_LEFT:3,FRONT_TOP_LEFT:4,BACK_BOTTOM_RIGHT:5,FRONT_BOTTOM_RIGHT:6,BACK_TOP_RIGHT:7,FRONT_TOP_RIGHT:8}),Oo("VERSION","0.4.1636596145")}).call(kp);const Ol={};(function(){var at;function ot(pt){var Mt=0;return function(){return Mt<pt.length?{done:!1,value:pt[Mt++]}:{done:!0}}}var ut=typeof Object.defineProperties=="function"?Object.defineProperty:function(pt,Mt,Ht){return pt==Array.prototype||pt==Object.prototype||(pt[Mt]=Ht.value),pt};function Ot(pt){pt=[typeof globalThis=="object"&&globalThis,pt,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Mt=0;Mt<pt.length;++Mt){var Ht=pt[Mt];if(Ht&&Ht.Math==Math)return Ht}throw Error("Cannot find global object")}var Gt=Ot(this);function en(pt,Mt){if(Mt)e:{var Ht=Gt;pt=pt.split(".");for(var cn=0;cn<pt.length-1;cn++){var xn=pt[cn];if(!(xn in Ht))break e;Ht=Ht[xn]}pt=pt[pt.length-1],cn=Ht[pt],Mt=Mt(cn),Mt!=cn&&Mt!=null&&ut(Ht,pt,{configurable:!0,writable:!0,value:Mt})}}en("Symbol",function(pt){function Mt(Xn){if(this instanceof Mt)throw new TypeError("Symbol is not a constructor");return new Ht(cn+(Xn||"")+"_"+xn++,Xn)}function Ht(Xn,Gn){this.g=Xn,ut(this,"description",{configurable:!0,writable:!0,value:Gn})}if(pt)return pt;Ht.prototype.toString=function(){return this.g};var cn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",xn=0;return Mt}),en("Symbol.iterator",function(pt){if(pt)return pt;pt=Symbol("Symbol.iterator");for(var Mt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ht=0;Ht<Mt.length;Ht++){var cn=Gt[Mt[Ht]];typeof cn=="function"&&typeof cn.prototype[pt]!="function"&&ut(cn.prototype,pt,{configurable:!0,writable:!0,value:function(){return hn(ot(this))}})}return pt});function hn(pt){return pt={next:pt},pt[Symbol.iterator]=function(){return this},pt}function ln(pt){var Mt=typeof Symbol<"u"&&Symbol.iterator&&pt[Symbol.iterator];return Mt?Mt.call(pt):{next:ot(pt)}}function En(pt){if(!(pt instanceof Array)){pt=ln(pt);for(var Mt,Ht=[];!(Mt=pt.next()).done;)Ht.push(Mt.value);pt=Ht}return pt}var rr=typeof Object.create=="function"?Object.create:function(pt){function Mt(){}return Mt.prototype=pt,new Mt},br;if(typeof Object.setPrototypeOf=="function")br=Object.setPrototypeOf;else{var Tr;e:{var ho={a:!0},Eo={};try{Eo.__proto__=ho,Tr=Eo.a;break e}catch{}Tr=!1}br=Tr?function(pt,Mt){if(pt.__proto__=Mt,pt.__proto__!==Mt)throw new TypeError(pt+" is not extensible");return pt}:null}var Ir=br;function Ar(pt,Mt){if(pt.prototype=rr(Mt.prototype),pt.prototype.constructor=pt,Ir)Ir(pt,Mt);else for(var Ht in Mt)if(Ht!="prototype")if(Object.defineProperties){var cn=Object.getOwnPropertyDescriptor(Mt,Ht);cn&&Object.defineProperty(pt,Ht,cn)}else pt[Ht]=Mt[Ht];pt.ea=Mt.prototype}function ko(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Vo(pt){if(pt.l)throw new TypeError("Generator is already running");pt.l=!0}ko.prototype.o=function(pt){this.h=pt};function rs(pt,Mt){pt.j={U:Mt,V:!0},pt.g=pt.m||pt.s}ko.prototype.return=function(pt){this.j={return:pt},this.g=this.s};function qn(pt,Mt,Ht){return pt.g=Ht,{value:Mt}}function bu(pt){this.g=new ko,this.h=pt}function cu(pt,Mt){Vo(pt.g);var Ht=pt.g.i;return Ht?Us(pt,"return"in Ht?Ht.return:function(cn){return{value:cn,done:!0}},Mt,pt.g.return):(pt.g.return(Mt),qo(pt))}function Us(pt,Mt,Ht,cn){try{var xn=Mt.call(pt.g.i,Ht);if(!(xn instanceof Object))throw new TypeError("Iterator result "+xn+" is not an object");if(!xn.done)return pt.g.l=!1,xn;var Xn=xn.value}catch(Gn){return pt.g.i=null,rs(pt.g,Gn),qo(pt)}return pt.g.i=null,cn.call(pt.g,Xn),qo(pt)}function qo(pt){for(;pt.g.g;)try{var Mt=pt.h(pt.g);if(Mt)return pt.g.l=!1,{value:Mt.value,done:!1}}catch(Ht){pt.g.h=void 0,rs(pt.g,Ht)}if(pt.g.l=!1,pt.g.j){if(Mt=pt.g.j,pt.g.j=null,Mt.V)throw Mt.U;return{value:Mt.return,done:!0}}return{value:void 0,done:!0}}function wp(pt){this.next=function(Mt){return Vo(pt.g),pt.g.i?Mt=Us(pt,pt.g.i.next,Mt,pt.g.o):(pt.g.o(Mt),Mt=qo(pt)),Mt},this.throw=function(Mt){return Vo(pt.g),pt.g.i?Mt=Us(pt,pt.g.i.throw,Mt,pt.g.o):(rs(pt.g,Mt),Mt=qo(pt)),Mt},this.return=function(Mt){return cu(pt,Mt)},this[Symbol.iterator]=function(){return this}}function vs(pt){function Mt(cn){return pt.next(cn)}function Ht(cn){return pt.throw(cn)}return new o(function(cn,xn){function Xn(Gn){Gn.done?cn(Gn.value):o.resolve(Gn.value).then(Mt,Ht).then(Xn,xn)}Xn(pt.next())})}function Hr(pt){return vs(new wp(new bu(pt)))}en("Promise",function(pt){function Mt(Gn){this.h=0,this.i=void 0,this.g=[],this.o=!1;var dr=this.j();try{Gn(dr.resolve,dr.reject)}catch(sr){dr.reject(sr)}}function Ht(){this.g=null}function cn(Gn){return Gn instanceof Mt?Gn:new Mt(function(dr){dr(Gn)})}if(pt)return pt;Ht.prototype.h=function(Gn){if(this.g==null){this.g=[];var dr=this;this.i(function(){dr.l()})}this.g.push(Gn)};var xn=Gt.setTimeout;Ht.prototype.i=function(Gn){xn(Gn,0)},Ht.prototype.l=function(){for(;this.g&&this.g.length;){var Gn=this.g;this.g=[];for(var dr=0;dr<Gn.length;++dr){var sr=Gn[dr];Gn[dr]=null;try{sr()}catch(Fr){this.j(Fr)}}}this.g=null},Ht.prototype.j=function(Gn){this.i(function(){throw Gn})},Mt.prototype.j=function(){function Gn(Fr){return function(_r){sr||(sr=!0,Fr.call(dr,_r))}}var dr=this,sr=!1;return{resolve:Gn(this.C),reject:Gn(this.l)}},Mt.prototype.C=function(Gn){if(Gn===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Gn instanceof Mt)this.F(Gn);else{e:switch(typeof Gn){case"object":var dr=Gn!=null;break e;case"function":dr=!0;break e;default:dr=!1}dr?this.v(Gn):this.m(Gn)}},Mt.prototype.v=function(Gn){var dr=void 0;try{dr=Gn.then}catch(sr){this.l(sr);return}typeof dr=="function"?this.G(dr,Gn):this.m(Gn)},Mt.prototype.l=function(Gn){this.s(2,Gn)},Mt.prototype.m=function(Gn){this.s(1,Gn)},Mt.prototype.s=function(Gn,dr){if(this.h!=0)throw Error("Cannot settle("+Gn+", "+dr+"): Promise already settled in state"+this.h);this.h=Gn,this.i=dr,this.h===2&&this.D(),this.A()},Mt.prototype.D=function(){var Gn=this;xn(function(){if(Gn.B()){var dr=Gt.console;typeof dr<"u"&&dr.error(Gn.i)}},1)},Mt.prototype.B=function(){if(this.o)return!1;var Gn=Gt.CustomEvent,dr=Gt.Event,sr=Gt.dispatchEvent;return typeof sr>"u"?!0:(typeof Gn=="function"?Gn=new Gn("unhandledrejection",{cancelable:!0}):typeof dr=="function"?Gn=new dr("unhandledrejection",{cancelable:!0}):(Gn=Gt.document.createEvent("CustomEvent"),Gn.initCustomEvent("unhandledrejection",!1,!0,Gn)),Gn.promise=this,Gn.reason=this.i,sr(Gn))},Mt.prototype.A=function(){if(this.g!=null){for(var Gn=0;Gn<this.g.length;++Gn)Xn.h(this.g[Gn]);this.g=null}};var Xn=new Ht;return Mt.prototype.F=function(Gn){var dr=this.j();Gn.J(dr.resolve,dr.reject)},Mt.prototype.G=function(Gn,dr){var sr=this.j();try{Gn.call(dr,sr.resolve,sr.reject)}catch(Fr){sr.reject(Fr)}},Mt.prototype.then=function(Gn,dr){function sr(co,Lr){return typeof co=="function"?function(_i){try{Fr(co(_i))}catch(uo){_r(uo)}}:Lr}var Fr,_r,Mo=new Mt(function(co,Lr){Fr=co,_r=Lr});return this.J(sr(Gn,Fr),sr(dr,_r)),Mo},Mt.prototype.catch=function(Gn){return this.then(void 0,Gn)},Mt.prototype.J=function(Gn,dr){function sr(){switch(Fr.h){case 1:Gn(Fr.i);break;case 2:dr(Fr.i);break;default:throw Error("Unexpected state: "+Fr.h)}}var Fr=this;this.g==null?Xn.h(sr):this.g.push(sr),this.o=!0},Mt.resolve=cn,Mt.reject=function(Gn){return new Mt(function(dr,sr){sr(Gn)})},Mt.race=function(Gn){return new Mt(function(dr,sr){for(var Fr=ln(Gn),_r=Fr.next();!_r.done;_r=Fr.next())cn(_r.value).J(dr,sr)})},Mt.all=function(Gn){var dr=ln(Gn),sr=dr.next();return sr.done?cn([]):new Mt(function(Fr,_r){function Mo(_i){return function(uo){co[_i]=uo,Lr--,Lr==0&&Fr(co)}}var co=[],Lr=0;do co.push(void 0),Lr++,cn(sr.value).J(Mo(co.length-1),_r),sr=dr.next();while(!sr.done)})},Mt});function Su(pt,Mt){pt instanceof String&&(pt+="");var Ht=0,cn=!1,xn={next:function(){if(!cn&&Ht<pt.length){var Xn=Ht++;return{value:Mt(Xn,pt[Xn]),done:!1}}return cn=!0,{done:!0,value:void 0}}};return xn[Symbol.iterator]=function(){return xn},xn}var Op=typeof Object.assign=="function"?Object.assign:function(pt,Mt){for(var Ht=1;Ht<arguments.length;Ht++){var cn=arguments[Ht];if(cn)for(var xn in cn)Object.prototype.hasOwnProperty.call(cn,xn)&&(pt[xn]=cn[xn])}return pt};en("Object.assign",function(pt){return pt||Op}),en("Object.is",function(pt){return pt||function(Mt,Ht){return Mt===Ht?Mt!==0||1/Mt===1/Ht:Mt!==Mt&&Ht!==Ht}}),en("Array.prototype.includes",function(pt){return pt||function(Mt,Ht){var cn=this;cn instanceof String&&(cn=String(cn));var xn=cn.length;for(Ht=Ht||0,0>Ht&&(Ht=Math.max(Ht+xn,0));Ht<xn;Ht++){var Xn=cn[Ht];if(Xn===Mt||Object.is(Xn,Mt))return!0}return!1}}),en("String.prototype.includes",function(pt){return pt||function(Mt,Ht){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Mt instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Mt,Ht||0)!==-1}}),en("Array.prototype.keys",function(pt){return pt||function(){return Su(this,function(Mt){return Mt})}});var Hs=this||self;function Oo(pt,Mt){pt=pt.split(".");var Ht=Hs;pt[0]in Ht||typeof Ht.execScript>"u"||Ht.execScript("var "+pt[0]);for(var cn;pt.length&&(cn=pt.shift());)pt.length||Mt===void 0?Ht[cn]&&Ht[cn]!==Object.prototype[cn]?Ht=Ht[cn]:Ht=Ht[cn]={}:Ht[cn]=Mt}function $s(pt){Hs.setTimeout(function(){throw pt},0)}function tu(pt){$s(pt)}function ku(pt,Mt){tu(Error("Invalid wire type: "+pt+" (at position "+Mt+")"))}function np(){tu(Error("Failed to read varint, encoding is invalid."))}function ju(pt,Mt){return Mt=String.fromCharCode.apply(null,Mt),pt==null?Mt:pt+Mt}var sp,lu=typeof TextDecoder<"u",Eu,fp=typeof TextEncoder<"u";function rp(pt){if(fp)pt=(Eu||(Eu=new TextEncoder)).encode(pt);else{var Mt=void 0;Mt=Mt===void 0?!1:Mt;for(var Ht=0,cn=new Uint8Array(3*pt.length),xn=0;xn<pt.length;xn++){var Xn=pt.charCodeAt(xn);if(128>Xn)cn[Ht++]=Xn;else{if(2048>Xn)cn[Ht++]=Xn>>6|192;else{if(55296<=Xn&&57343>=Xn){if(56319>=Xn&&xn<pt.length){var Gn=pt.charCodeAt(++xn);if(56320<=Gn&&57343>=Gn){Xn=1024*(Xn-55296)+Gn-56320+65536,cn[Ht++]=Xn>>18|240,cn[Ht++]=Xn>>12&63|128,cn[Ht++]=Xn>>6&63|128,cn[Ht++]=Xn&63|128;continue}else xn--}if(Mt)throw Error("Found an unpaired surrogate");Xn=65533}cn[Ht++]=Xn>>12|224,cn[Ht++]=Xn>>6&63|128}cn[Ht++]=Xn&63|128}}pt=cn.subarray(0,Ht)}return pt}var Ll={},Zl=null;function Uu(pt){var Mt;Mt===void 0&&(Mt=0),Qs(),Mt=Ll[Mt];for(var Ht=Array(Math.floor(pt.length/3)),cn=Mt[64]||"",xn=0,Xn=0;xn<pt.length-2;xn+=3){var Gn=pt[xn],dr=pt[xn+1],sr=pt[xn+2],Fr=Mt[Gn>>2];Gn=Mt[(Gn&3)<<4|dr>>4],dr=Mt[(dr&15)<<2|sr>>6],sr=Mt[sr&63],Ht[Xn++]=Fr+Gn+dr+sr}switch(Fr=0,sr=cn,pt.length-xn){case 2:Fr=pt[xn+1],sr=Mt[(Fr&15)<<2]||cn;case 1:pt=pt[xn],Ht[Xn]=Mt[pt>>2]+Mt[(pt&3)<<4|Fr>>4]+sr+cn}return Ht.join("")}function Nu(pt){var Mt=pt.length,Ht=3*Mt/4;Ht%3?Ht=Math.floor(Ht):"=.".indexOf(pt[Mt-1])!=-1&&(Ht="=.".indexOf(pt[Mt-2])!=-1?Ht-2:Ht-1);var cn=new Uint8Array(Ht),xn=0;return Ss(pt,function(Xn){cn[xn++]=Xn}),cn.subarray(0,xn)}function Ss(pt,Mt){function Ht(sr){for(;cn<pt.length;){var Fr=pt.charAt(cn++),_r=Zl[Fr];if(_r!=null)return _r;if(!/^[\s\xa0]*$/.test(Fr))throw Error("Unknown base64 encoding at char: "+Fr)}return sr}Qs();for(var cn=0;;){var xn=Ht(-1),Xn=Ht(0),Gn=Ht(64),dr=Ht(64);if(dr===64&&xn===-1)break;Mt(xn<<2|Xn>>4),Gn!=64&&(Mt(Xn<<4&240|Gn>>2),dr!=64&&Mt(Gn<<6&192|dr))}}function Qs(){if(!Zl){Zl={};for(var pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Mt=["+/=","+/","-_=","-_.","-_"],Ht=0;5>Ht;Ht++){var cn=pt.concat(Mt[Ht].split(""));Ll[Ht]=cn;for(var xn=0;xn<cn.length;xn++){var Xn=cn[xn];Zl[Xn]===void 0&&(Zl[Xn]=xn)}}}}var Gl=typeof Uint8Array=="function",ss;function Ds(pt){if(this.g=pt,pt!==null&&pt.length===0)throw Error("ByteString should be constructed with non-empty values")}Ds.prototype.toJSON=function(){if(this.g==null)var pt="";else pt=this.g,pt=this.g=pt==null||typeof pt=="string"?pt:Gl&&pt instanceof Uint8Array?Uu(pt):null;return pt};var nu=typeof Uint8Array.prototype.slice=="function";function Rl(pt,Mt,Ht){return Mt===Ht?ss||(ss=new Uint8Array(0)):nu?pt.slice(Mt,Ht):new Uint8Array(pt.subarray(Mt,Ht))}var Qo=0,Ls=0;function ba(pt){if(pt.constructor===Uint8Array)return pt;if(pt.constructor===ArrayBuffer)return new Uint8Array(pt);if(pt.constructor===Array)return new Uint8Array(pt);if(pt.constructor===String)return Nu(pt);if(pt.constructor===Ds){if(pt.g==null)var Mt=ss||(ss=new Uint8Array(0));else{Mt=Uint8Array;var Ht=pt.g;Ht=Ht==null||Gl&&Ht!=null&&Ht instanceof Uint8Array?Ht:typeof Ht=="string"?Nu(Ht):null,pt=pt.g=Ht,Mt=new Mt(pt)}return Mt}if(pt instanceof Uint8Array)return new Uint8Array(pt.buffer,pt.byteOffset,pt.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Po(pt,Mt){Mt=Mt===void 0?{}:Mt,Mt=Mt.u===void 0?!1:Mt.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=Mt,pt&&Ks(this,pt)}function Ks(pt,Mt){pt.h=ba(Mt),pt.l=0,pt.i=pt.h.length,pt.g=pt.l}Po.prototype.reset=function(){this.g=this.l};function Bo(pt){pt.g>pt.i&&(pt.j=!0,tu(Error("Tried to read past the end of the data "+pt.g+" > "+pt.i)))}function Os(pt){var Mt=pt.h,Ht=Mt[pt.g],cn=Ht&127;return 128>Ht?(pt.g+=1,Bo(pt),cn):(Ht=Mt[pt.g+1],cn|=(Ht&127)<<7,128>Ht?(pt.g+=2,Bo(pt),cn):(Ht=Mt[pt.g+2],cn|=(Ht&127)<<14,128>Ht?(pt.g+=3,Bo(pt),cn):(Ht=Mt[pt.g+3],cn|=(Ht&127)<<21,128>Ht?(pt.g+=4,Bo(pt),cn):(Ht=Mt[pt.g+4],cn|=(Ht&15)<<28,128>Ht?(pt.g+=5,Bo(pt),cn>>>0):(pt.g+=5,128<=Mt[pt.g++]&&128<=Mt[pt.g++]&&128<=Mt[pt.g++]&&128<=Mt[pt.g++]&&128<=Mt[pt.g++]?(pt.j=!0,np(),cn):(Bo(pt),cn))))))}var _s=[];function Dl(){this.g=new Uint8Array(64),this.h=0}function Ws(pt,Mt){if(!(pt.h+1<pt.g.length)){var Ht=pt.g;pt.g=new Uint8Array(Math.ceil(1+2*pt.g.length)),pt.g.set(Ht)}pt.g[pt.h++]=Mt}Dl.prototype.length=function(){return this.h},Dl.prototype.end=function(){var pt=this.g,Mt=this.h;return this.h=0,Rl(pt,0,Mt)};function Ko(pt,Mt){for(;127<Mt;)Ws(pt,Mt&127|128),Mt>>>=7;Ws(pt,Mt)}function Vl(pt){var Mt={},Ht=Mt.N===void 0?!1:Mt.N;this.m={u:Mt.u===void 0?!1:Mt.u},this.N=Ht,Mt=this.m,_s.length?(Ht=_s.pop(),Mt&&(Ht.u=Mt.u),pt&&Ks(Ht,pt),pt=Ht):pt=new Po(pt,Mt),this.g=pt,this.l=this.g.g,this.h=this.i=-1,this.j=!1}Vl.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function Nl(pt){var Mt=pt.g;if((Mt=Mt.g==Mt.i)||(Mt=pt.j)||(Mt=pt.g,Mt=Mt.j||0>Mt.g||Mt.g>Mt.i),Mt)return!1;pt.l=pt.g.g;var Ht=Os(pt.g);return Mt=Ht>>>3,Ht&=7,0<=Ht&&5>=Ht?(pt.i=Mt,pt.h=Ht,!0):(pt.j=!0,ku(Ht,pt.l),!1)}function zs(pt){switch(pt.h){case 0:if(pt.h!=0)zs(pt);else e:{pt=pt.g;for(var Mt=pt.g,Ht=0;10>Ht;Ht++){if(!(pt.h[Mt]&128)){pt.g=Mt+1,Bo(pt);break e}Mt++}pt.j=!0,np()}break;case 1:pt=pt.g,pt.g+=8,Bo(pt);break;case 2:pt.h!=2?zs(pt):(Mt=Os(pt.g),pt=pt.g,pt.g+=Mt,Bo(pt));break;case 5:pt=pt.g,pt.g+=4,Bo(pt);break;case 3:Mt=pt.i;do{if(!Nl(pt)){pt.j=!0,tu(Error("Unmatched start-group tag: stream EOF"));break}if(pt.h==4){pt.i!=Mt&&(pt.j=!0,tu(Error("Unmatched end-group tag")));break}zs(pt)}while(1);break;default:pt.j=!0,ku(pt.h,pt.l)}}function Wu(pt,Mt,Ht){pt.N||(pt=Rl(pt.g.h,Ht,pt.g.g),(Ht=Mt.m)?Ht.push(pt):Mt.m=[pt])}var ru=[];function Wl(){this.h=[],this.i=0,this.g=new Dl}function iu(pt,Mt){Mt.length!==0&&(pt.h.push(Mt),pt.i+=Mt.length)}function Gs(pt,Mt,Ht){Ko(pt.g,8*Mt+2),Ko(pt.g,Ht.length),iu(pt,pt.g.end()),iu(pt,Ht)}var qs=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function ks(pt,Mt){Object.isFrozen(pt)||(qs?pt[qs]|=Mt:pt.g!==void 0?pt.g|=Mt:Object.defineProperties(pt,{g:{value:Mt,configurable:!0,writable:!0,enumerable:!1}}))}function as(pt){if(!pt)return 0;var Mt;return qs?Mt=pt[qs]:Mt=pt.g,Mt??0}function Ml(pt){return Array.isArray(pt)&&ks(pt,1),pt}function ts(pt){if(!Array.isArray(pt))throw Error("cannot mark non-array as immutable");ks(pt,2)}function zo(pt){return pt!==null&&typeof pt=="object"&&pt.constructor===Object}function uu(pt){switch(typeof pt){case"number":return isFinite(pt)?pt:String(pt);case"object":return Gl&&pt!=null&&pt instanceof Uint8Array?Uu(pt):pt;default:return pt}}function Es(pt,Mt){if(pt!=null)return Array.isArray(pt)||zo(pt)?wo(pt,Mt):Mt(pt)}function wo(pt,Mt){if(Array.isArray(pt)){for(var Ht=Array(pt.length),cn=0;cn<pt.length;cn++)Ht[cn]=Es(pt[cn],Mt);return as(pt)&1&&Ml(Ht),Ht}Ht={};for(cn in pt)Ht[cn]=Es(pt[cn],Mt);return Ht}var ro;function cs(pt,Mt,Ht){var cn=ro;ro=null,pt||(pt=cn),cn=this.constructor.ca,pt||(pt=cn?[cn]:[]),this.j=(cn?0:-1)-(this.constructor.aa||0),this.i=null,this.g=pt;e:{if(cn=this.g.length,pt=cn-1,cn&&(cn=this.g[pt],zo(cn))){this.l=pt-this.j,this.h=cn;break e}Mt!==void 0&&-1<Mt?(this.l=Math.max(Mt,pt+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(Ht)for(Mt=0;Mt<Ht.length;Mt++)pt=Ht[Mt],pt<this.l?(pt+=this.j,(cn=this.g[pt])?Ml(cn):this.g[pt]=na):(ns(this),(cn=this.h[pt])?Ml(cn):this.h[pt]=na)}var na=Object.freeze(Ml([]));function ns(pt){var Mt=pt.l+pt.j;pt.g[Mt]||(pt.h=pt.g[Mt]={})}function ls(pt,Mt,Ht){return Mt===-1?null:Ht!==void 0&&Ht||Mt>=pt.l?pt.h?pt.h[Mt]:void 0:pt.g[Mt+pt.j]}function ur(pt,Mt,Ht){Ht=Ht===void 0?!0:Ht;var cn=cn===void 0?!1:cn,xn=ls(pt,Mt,cn);return xn==null&&(xn=na),xn===na?(xn=Ml([]),xr(pt,Mt,xn,cn)):Ht&&Array.isArray(xn)&&as(xn)&2&&(xn=xn.slice(),xr(pt,Mt,xn,cn)),xn}function mr(pt,Mt,Ht){return pt=ls(pt,Mt),pt=pt==null?pt:+pt,pt??(Ht===void 0?0:Ht)}function xr(pt,Mt,Ht,cn){cn!==void 0&&cn||Mt>=pt.l?(ns(pt),pt.h[Mt]=Ht):pt.g[Mt+pt.j]=Ht}function Jo(pt,Mt,Ht){pt.i||(pt.i={});var cn=pt.i[Ht];if(!cn){var xn=ur(pt,Ht,!1);cn=[];for(var Xn=Array.isArray(xn)?!!(as(xn)&2):!1,Gn=0;Gn<xn.length;Gn++)cn[Gn]=new Mt(xn[Gn]),Xn&&ts(cn[Gn].g);Xn&&(ts(cn),Object.freeze(cn)),pt.i[Ht]=cn}return cn}function gs(pt,Mt,Ht,cn,xn){var Xn=Jo(pt,cn,Mt);Ht=Ht||new cn,pt=ur(pt,Mt),xn!=null?(Xn.splice(xn,0,Ht),pt.splice(xn,0,hs(Ht))):(Xn.push(Ht),pt.push(hs(Ht)))}cs.prototype.toJSON=function(){var pt=hs(this);return wo(pt,uu)};function hs(pt){if(pt.i)for(var Mt in pt.i){var Ht=pt.i[Mt];if(Array.isArray(Ht))for(var cn=0;cn<Ht.length;cn++)Ht[cn]&&hs(Ht[cn]);else Ht&&hs(Ht)}return pt.g}cs.prototype.toString=function(){return hs(this).toString()};function fo(pt,Mt){return pt=ls(pt,Mt),pt??0}function Cs(pt,Mt){return pt=ls(pt,Mt),pt??""}function xa(pt,Mt){if(pt=pt.m){iu(Mt,Mt.g.end());for(var Ht=0;Ht<pt.length;Ht++)iu(Mt,pt[Ht])}}function Ul(pt){var Mt=pt[0];switch(pt.length){case 2:var Ht=pt[1];return function(sr,Fr,_r){return Mt(sr,Fr,_r,Ht)};case 3:var cn=pt[1],xn=pt[2];return function(sr,Fr,_r){return Mt(sr,Fr,_r,cn,xn)};case 4:var Xn=pt[1],Gn=pt[2],dr=pt[3];return function(sr,Fr,_r){return Mt(sr,Fr,_r,Xn,Gn,dr)};default:throw Error("unsupported number of parameters, expected [2-4], got "+pt.length)}}function Hl(pt,Mt,Ht){for(;Nl(Mt)&&Mt.h!=4;){var cn=Mt.i,xn=Ht[cn];if(xn){if(Array.isArray(xn)&&(xn=Ht[cn]=Ul(xn)),!xn(Mt,pt,cn)){cn=Mt,xn=pt;var Xn=cn.l;zs(cn),Wu(cn,xn,Xn)}}else cn=Mt,xn=pt,Xn=cn.l,zs(cn),Wu(cn,xn,Xn)}return pt}function du(pt,Mt){var Ht=new Wl;if(Mt(pt,Ht),pt=Ht.i+Ht.g.length(),pt===0)Ht=new Uint8Array(0);else{pt=new Uint8Array(pt);for(var cn=Ht.h,xn=cn.length,Xn=Mt=0;Xn<xn;Xn++){var Gn=cn[Xn];Gn.length!==0&&(pt.set(Gn,Mt),Mt+=Gn.length)}cn=Ht.g,xn=cn.h,xn!==0&&(pt.set(cn.g.subarray(0,xn),Mt),cn.h=0),Ht.h=[pt],Ht=pt}return Ht}function Cu(pt,Mt,Ht){if(ru.length){var cn=ru.pop();pt&&(Ks(cn.g,pt),cn.i=-1,cn.h=-1),pt=cn}else pt=new Vl(pt);try{return Ht(new Mt,pt)}finally{Mt=pt.g,Mt.h=null,Mt.l=0,Mt.i=0,Mt.g=0,Mt.j=!1,Mt.u=!1,pt.i=-1,pt.h=-1,pt.j=!1,100>ru.length&&ru.push(pt)}}function ga(pt,Mt,Ht){if(Mt=ls(Mt,Ht),Mt!=null){Ko(pt.g,8*Ht+5),pt=pt.g;var cn=Mt;cn=(Ht=0>cn?1:0)?-cn:cn,cn===0?0<1/cn?Qo=Ls=0:(Ls=0,Qo=2147483648):isNaN(cn)?(Ls=0,Qo=2147483647):34028234663852886e22<cn?(Ls=0,Qo=(Ht<<31|2139095040)>>>0):11754943508222875e-54>cn?(cn=Math.round(cn/Math.pow(2,-149)),Ls=0,Qo=(Ht<<31|cn)>>>0):(Mt=Math.floor(Math.log(cn)/Math.LN2),cn*=Math.pow(2,-Mt),cn=Math.round(8388608*cn),16777216<=cn&&++Mt,Ls=0,Qo=(Ht<<31|Mt+127<<23|cn&8388607)>>>0),Ht=Qo,Ws(pt,Ht>>>0&255),Ws(pt,Ht>>>8&255),Ws(pt,Ht>>>16&255),Ws(pt,Ht>>>24&255)}}function Yl(pt,Mt,Ht){if(pt.h!==5)return!1;pt=pt.g;var cn=pt.h[pt.g],xn=pt.h[pt.g+1],Xn=pt.h[pt.g+2],Gn=pt.h[pt.g+3];return pt.g+=4,Bo(pt),xn=(cn<<0|xn<<8|Xn<<16|Gn<<24)>>>0,pt=2*(xn>>31)+1,cn=xn>>>23&255,xn&=8388607,xr(Mt,Ht,cn==255?xn?NaN:1/0*pt:cn==0?pt*Math.pow(2,-149)*xn:pt*Math.pow(2,cn-150)*(xn+Math.pow(2,23))),!0}function Ap(pt,Mt,Ht){if(pt.h!==0)return!1;for(var cn=pt.g,xn=128,Xn=0,Gn=pt=0;4>Gn&&128<=xn;Gn++)xn=cn.h[cn.g++],Xn|=(xn&127)<<7*Gn;if(128<=xn&&(xn=cn.h[cn.g++],Xn|=(xn&127)<<28,pt|=(xn&127)>>4),128<=xn)for(Gn=0;5>Gn&&128<=xn;Gn++)xn=cn.h[cn.g++],pt|=(xn&127)<<7*Gn+3;return 128>xn?(cn=Xn>>>0,xn=pt>>>0,(pt=xn&2147483648)&&(cn=~cn+1>>>0,xn=~xn>>>0,cn==0&&(xn=xn+1>>>0)),cn=4294967296*xn+(cn>>>0),pt=pt?-cn:cn):(cn.j=!0,np(),pt=void 0),xr(Mt,Ht,pt),!0}function Bl(pt,Mt,Ht){return pt.h!==0?!1:(xr(Mt,Ht,Os(pt.g)),!0)}function $a(pt,Mt,Ht){if(pt.h!==2)return!1;var cn=Os(pt.g);pt=pt.g;var xn=pt.g;pt.g+=cn,Bo(pt),pt=pt.h;var Xn;if(lu)(Xn=sp)||(Xn=sp=new TextDecoder("utf-8",{fatal:!1})),Xn=Xn.decode(pt.subarray(xn,xn+cn));else{cn=xn+cn;for(var Gn=[],dr=null,sr,Fr,_r;xn<cn;)sr=pt[xn++],128>sr?Gn.push(sr):224>sr?xn>=cn?Gn.push(65533):(Fr=pt[xn++],194>sr||(Fr&192)!==128?(xn--,Gn.push(65533)):Gn.push((sr&31)<<6|Fr&63)):240>sr?xn>=cn-1?Gn.push(65533):(Fr=pt[xn++],(Fr&192)!==128||sr===224&&160>Fr||sr===237&&160<=Fr||((Xn=pt[xn++])&192)!==128?(xn--,Gn.push(65533)):Gn.push((sr&15)<<12|(Fr&63)<<6|Xn&63)):244>=sr?xn>=cn-2?Gn.push(65533):(Fr=pt[xn++],(Fr&192)!==128||(sr<<28)+(Fr-144)>>30||((Xn=pt[xn++])&192)!==128||((_r=pt[xn++])&192)!==128?(xn--,Gn.push(65533)):(sr=(sr&7)<<18|(Fr&63)<<12|(Xn&63)<<6|_r&63,sr-=65536,Gn.push((sr>>10&1023)+55296,(sr&1023)+56320))):Gn.push(65533),8192<=Gn.length&&(dr=ju(dr,Gn),Gn.length=0);Xn=ju(dr,Gn)}return xr(Mt,Ht,Xn),!0}function Ou(pt,Mt,Ht,cn,xn){if(pt.h!==2)return!1;var Xn=new cn,Gn=pt.g.i,dr=Os(pt.g),sr=pt.g.g+dr;if(pt.g.i=sr,xn(Xn,pt),xn=sr-pt.g.g,xn!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(dr+" bytes, instead read "+(dr-xn)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return pt.g.g=sr,pt.g.i=Gn,gs(Mt,Ht,Xn,cn,void 0),!0}function Hu(pt){cs.call(this,pt)}var Il;Ar(Hu,cs);function hp(pt,Mt){var Ht=ls(pt,1);if(Ht!=null&&Ht!=null){Ko(Mt.g,8);var cn=Mt.g;if(0<=Ht)Ko(cn,Ht);else{for(var xn=0;9>xn;xn++)Ws(cn,Ht&127|128),Ht>>=7;Ws(cn,1)}}ga(Mt,pt,2),cn=ls(pt,3),cn!=null&&Gs(Mt,3,rp(cn)),cn=ls(pt,4),cn!=null&&Gs(Mt,4,rp(cn)),xa(pt,Mt)}function Kl(pt,Mt){return Hl(pt,Mt,Il||(Il={1:Bl,2:Yl,3:$a,4:$a}))}function Au(pt){cs.call(this,pt,-1,ou)}var $u;Ar(Au,cs),Au.prototype.addClassification=function(pt,Mt){return gs(this,1,pt,Hu,Mt),this};function Ep(pt,Mt){return Hl(pt,Mt,$u||($u={1:[Ou,Hu,Kl]}))}var ou=[1];function _u(pt){cs.call(this,pt)}var Fp;Ar(_u,cs);function Xp(pt,Mt){ga(Mt,pt,1),ga(Mt,pt,2),ga(Mt,pt,3),ga(Mt,pt,4),ga(Mt,pt,5),xa(pt,Mt)}function qu(pt,Mt){return Hl(pt,Mt,Fp||(Fp={1:Yl,2:Yl,3:Yl,4:Yl,5:Yl}))}function ip(pt){cs.call(this,pt,-1,jt)}var At;Ar(ip,cs);function Dt(pt,Mt){return Hl(pt,Mt,At||(At={1:[Ou,_u,qu]}))}var jt=[1];function Zn(pt){cs.call(this,pt)}var _n;Ar(Zn,cs);function Sr(pt,Mt){ga(Mt,pt,1),ga(Mt,pt,2),ga(Mt,pt,3),ga(Mt,pt,4),ga(Mt,pt,5);var Ht=ls(pt,6);if(Ht!=null&&Ht!=null){Ko(Mt.g,48);var cn=Mt.g,xn=Ht;Ht=0>xn,xn=Math.abs(xn);var Xn=xn>>>0;for(xn=Math.floor((xn-Xn)/4294967296),xn>>>=0,Ht&&(xn=~xn>>>0,Xn=(~Xn>>>0)+1,4294967295<Xn&&(Xn=0,xn++,4294967295<xn&&(xn=0))),Qo=Xn,Ls=xn,Ht=Qo,Xn=Ls;0<Xn||127<Ht;)Ws(cn,Ht&127|128),Ht=(Ht>>>7|Xn<<25)>>>0,Xn>>>=7;Ws(cn,Ht)}xa(pt,Mt)}function Qn(pt,Mt){return Hl(pt,Mt,_n||(_n={1:Yl,2:Yl,3:Yl,4:Yl,5:Yl,6:Ap}))}function hr(pt,Mt,Ht){if(Ht=pt.createShader(Ht===0?pt.VERTEX_SHADER:pt.FRAGMENT_SHADER),pt.shaderSource(Ht,Mt),pt.compileShader(Ht),!pt.getShaderParameter(Ht,pt.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+pt.getShaderInfoLog(Ht));return Ht}function Nr(pt){return Jo(pt,Hu,1).map(function(Mt){return{index:fo(Mt,1),X:mr(Mt,2),label:ls(Mt,3)!=null?Cs(Mt,3):void 0,displayName:ls(Mt,4)!=null?Cs(Mt,4):void 0}})}function ao(pt){return{x:mr(pt,1),y:mr(pt,2),z:mr(pt,3),visibility:ls(pt,4)!=null?mr(pt,4):void 0}}function Wo(pt){return Jo(Cu(pt,ip,Dt),_u,1).map(ao)}function Ao(pt,Mt){this.h=pt,this.g=Mt,this.l=0}function es(pt,Mt,Ht){return Lo(pt,Mt),typeof pt.g.canvas.transferToImageBitmap=="function"?o.resolve(pt.g.canvas.transferToImageBitmap()):Ht?o.resolve(pt.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(pt.g.canvas):(pt.i===void 0&&(pt.i=document.createElement("canvas")),new o(function(cn){pt.i.height=pt.g.canvas.height,pt.i.width=pt.g.canvas.width,pt.i.getContext("2d",{}).drawImage(pt.g.canvas,0,0,pt.g.canvas.width,pt.g.canvas.height),cn(pt.i)}))}function Lo(pt,Mt){var Ht=pt.g;if(pt.m===void 0){var cn=hr(Ht,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),xn=hr(Ht,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Xn=Ht.createProgram();if(Ht.attachShader(Xn,cn),Ht.attachShader(Xn,xn),Ht.linkProgram(Xn),!Ht.getProgramParameter(Xn,Ht.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Ht.getProgramInfoLog(Xn));cn=pt.m=Xn,Ht.useProgram(cn),xn=Ht.getUniformLocation(cn,"sampler0"),pt.j={I:Ht.getAttribLocation(cn,"aVertex"),H:Ht.getAttribLocation(cn,"aTex"),da:xn},pt.s=Ht.createBuffer(),Ht.bindBuffer(Ht.ARRAY_BUFFER,pt.s),Ht.enableVertexAttribArray(pt.j.I),Ht.vertexAttribPointer(pt.j.I,2,Ht.FLOAT,!1,0,0),Ht.bufferData(Ht.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Ht.STATIC_DRAW),Ht.bindBuffer(Ht.ARRAY_BUFFER,null),pt.o=Ht.createBuffer(),Ht.bindBuffer(Ht.ARRAY_BUFFER,pt.o),Ht.enableVertexAttribArray(pt.j.H),Ht.vertexAttribPointer(pt.j.H,2,Ht.FLOAT,!1,0,0),Ht.bufferData(Ht.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Ht.STATIC_DRAW),Ht.bindBuffer(Ht.ARRAY_BUFFER,null),Ht.uniform1i(xn,0)}cn=pt.j,Ht.useProgram(pt.m),Ht.canvas.width=Mt.width,Ht.canvas.height=Mt.height,Ht.viewport(0,0,Mt.width,Mt.height),Ht.activeTexture(Ht.TEXTURE0),pt.h.bindTexture2d(Mt.glName),Ht.enableVertexAttribArray(cn.I),Ht.bindBuffer(Ht.ARRAY_BUFFER,pt.s),Ht.vertexAttribPointer(cn.I,2,Ht.FLOAT,!1,0,0),Ht.enableVertexAttribArray(cn.H),Ht.bindBuffer(Ht.ARRAY_BUFFER,pt.o),Ht.vertexAttribPointer(cn.H,2,Ht.FLOAT,!1,0,0),Ht.bindFramebuffer(Ht.DRAW_FRAMEBUFFER?Ht.DRAW_FRAMEBUFFER:Ht.FRAMEBUFFER,null),Ht.clearColor(0,0,0,0),Ht.clear(Ht.COLOR_BUFFER_BIT),Ht.colorMask(!0,!0,!0,!0),Ht.drawArrays(Ht.TRIANGLE_FAN,0,4),Ht.disableVertexAttribArray(cn.I),Ht.disableVertexAttribArray(cn.H),Ht.bindBuffer(Ht.ARRAY_BUFFER,null),pt.h.bindTexture2d(0)}function go(pt){this.g=pt}var No=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function $o(pt,Mt){return Mt+pt}function ps(pt,Mt){window[pt]=Mt}function Ts(pt){var Mt=document.createElement("script");return Mt.setAttribute("src",pt),Mt.setAttribute("crossorigin","anonymous"),new o(function(Ht){Mt.addEventListener("load",function(){Ht()},!1),Mt.addEventListener("error",function(){Ht()},!1),document.body.appendChild(Mt)})}function As(){return Hr(function(pt){switch(pt.g){case 1:return pt.m=2,qn(pt,WebAssembly.instantiate(No),4);case 4:pt.g=3,pt.m=0;break;case 2:return pt.m=0,pt.j=null,pt.return(!1);case 3:return pt.return(!0)}})}function _a(pt){if(this.g=pt,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=o.resolve(),this.P="",this.B={},this.locateFile=pt&&pt.locateFile||$o,typeof window=="object")var Mt=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Mt=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=Mt,pt.options){Mt=ln(Object.keys(pt.options));for(var Ht=Mt.next();!Ht.done;Ht=Mt.next()){Ht=Ht.value;var cn=pt.options[Ht].default;cn!==void 0&&(this.j[Ht]=typeof cn=="function"?cn():cn)}}}at=_a.prototype,at.close=function(){return this.i&&this.i.delete(),o.resolve()};function xt(pt){var Mt,Ht,cn,xn,Xn,Gn,dr,sr,Fr,_r,Mo;return Hr(function(co){switch(co.g){case 1:return pt.R?(Mt=pt.g.files===void 0?[]:typeof pt.g.files=="function"?pt.g.files(pt.j):pt.g.files,qn(co,As(),2)):co.return();case 2:if(Ht=co.h,typeof window=="object")return ps("createMediapipeSolutionsWasm",{locateFile:pt.locateFile}),ps("createMediapipeSolutionsPackedAssets",{locateFile:pt.locateFile}),Gn=Mt.filter(function(Lr){return Lr.data!==void 0}),dr=Mt.filter(function(Lr){return Lr.data===void 0}),sr=o.all(Gn.map(function(Lr){var _i=gn(pt,Lr.url);if(Lr.path!==void 0){var uo=Lr.path;_i=_i.then(function(Co){return pt.overrideFile(uo,Co),o.resolve(Co)})}return _i})),Fr=o.all(dr.map(function(Lr){return Lr.simd===void 0||Lr.simd&&Ht||!Lr.simd&&!Ht?Ts(pt.locateFile(Lr.url,pt.S)):o.resolve()})).then(function(){var Lr,_i,uo;return Hr(function(Co){if(Co.g==1)return Lr=window.createMediapipeSolutionsWasm,_i=window.createMediapipeSolutionsPackedAssets,uo=pt,qn(Co,Lr(_i),2);uo.h=Co.h,Co.g=0})}),_r=function(){return Hr(function(Lr){return pt.g.graph&&pt.g.graph.url?Lr=qn(Lr,gn(pt,pt.g.graph.url),0):(Lr.g=0,Lr=void 0),Lr})}(),qn(co,o.all([Fr,sr,_r]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return cn=Mt.filter(function(Lr){return Lr.simd===void 0||Lr.simd&&Ht||!Lr.simd&&!Ht}).map(function(Lr){return pt.locateFile(Lr.url,pt.S)}),importScripts.apply(null,En(cn)),xn=pt,qn(co,createMediapipeSolutionsWasm(Module),6);case 6:xn.h=co.h,pt.l=new OffscreenCanvas(1,1),pt.h.canvas=pt.l,Xn=pt.h.GL.createContext(pt.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),pt.h.GL.makeContextCurrent(Xn),co.g=4;break;case 7:if(pt.l=document.createElement("canvas"),Mo=pt.l.getContext("webgl2",{}),!Mo&&(Mo=pt.l.getContext("webgl",{}),!Mo))return alert("Failed to create WebGL canvas context when passing video frame."),co.return();pt.D=Mo,pt.h.canvas=pt.l,pt.h.createContext(pt.l,!0,!0,{});case 4:pt.i=new pt.h.SolutionWasm,pt.R=!1,co.g=0}})}function Vt(pt){var Mt,Ht,cn,xn,Xn,Gn,dr,sr;return Hr(function(Fr){if(Fr.g==1){if(pt.g.graph&&pt.g.graph.url&&pt.P===pt.g.graph.url)return Fr.return();if(pt.o=!0,!pt.g.graph||!pt.g.graph.url){Fr.g=2;return}return pt.P=pt.g.graph.url,qn(Fr,gn(pt,pt.g.graph.url),3)}for(Fr.g!=2&&(Mt=Fr.h,pt.i.loadGraph(Mt)),Ht=ln(Object.keys(pt.B)),cn=Ht.next();!cn.done;cn=Ht.next())xn=cn.value,pt.i.overrideFile(xn,pt.B[xn]);if(pt.B={},pt.g.listeners)for(Xn=ln(pt.g.listeners),Gn=Xn.next();!Gn.done;Gn=Xn.next())dr=Gn.value,Pn(pt,dr);sr=pt.j,pt.j={},pt.setOptions(sr),Fr.g=0})}at.reset=function(){var pt=this;return Hr(function(Mt){pt.i&&(pt.i.reset(),pt.m={},pt.s={}),Mt.g=0})},at.setOptions=function(pt,Mt){var Ht=this;if(Mt=Mt||this.g.options){for(var cn=[],xn=[],Xn={},Gn=ln(Object.keys(pt)),dr=Gn.next();!dr.done;Xn={K:Xn.K,L:Xn.L},dr=Gn.next()){var sr=dr.value;sr in this.j&&this.j[sr]===pt[sr]||(this.j[sr]=pt[sr],dr=Mt[sr],dr!==void 0&&(dr.onChange&&(Xn.K=dr.onChange,Xn.L=pt[sr],cn.push(function(Fr){return function(){var _r;return Hr(function(Mo){if(Mo.g==1)return qn(Mo,Fr.K(Fr.L),2);_r=Mo.h,_r===!0&&(Ht.o=!0),Mo.g=0})}}(Xn))),dr.graphOptionXref&&(sr={valueNumber:dr.type===1?pt[sr]:0,valueBoolean:dr.type===0?pt[sr]:!1,valueString:dr.type===2?pt[sr]:""},dr=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),dr.graphOptionXref),sr),xn.push(dr))))}(cn.length!==0||xn.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(xn),this.v=(this.v===void 0?[]:this.v).concat(cn))}};function Wt(pt){var Mt,Ht,cn,xn,Xn,Gn,dr;return Hr(function(sr){switch(sr.g){case 1:if(!pt.o)return sr.return();if(!pt.v){sr.g=2;break}Mt=ln(pt.v),Ht=Mt.next();case 3:if(Ht.done){sr.g=5;break}return cn=Ht.value,qn(sr,cn(),4);case 4:Ht=Mt.next(),sr.g=3;break;case 5:pt.v=void 0;case 2:if(pt.A){for(xn=new pt.h.GraphOptionChangeRequestList,Xn=ln(pt.A),Gn=Xn.next();!Gn.done;Gn=Xn.next())dr=Gn.value,xn.push_back(dr);pt.i.changeOptions(xn),xn.delete(),pt.A=void 0}pt.o=!1,sr.g=0}})}at.initialize=function(){var pt=this;return Hr(function(Mt){return Mt.g==1?qn(Mt,xt(pt),2):Mt.g!=3?qn(Mt,Vt(pt),3):qn(Mt,Wt(pt),0)})};function gn(pt,Mt){var Ht,cn;return Hr(function(xn){return Mt in pt.F?xn.return(pt.F[Mt]):(Ht=pt.locateFile(Mt,""),cn=fetch(Ht).then(function(Xn){return Xn.arrayBuffer()}),pt.F[Mt]=cn,xn.return(cn))})}at.overrideFile=function(pt,Mt){this.i?this.i.overrideFile(pt,Mt):this.B[pt]=Mt},at.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},at.send=function(pt,Mt){var Ht=this,cn,xn,Xn,Gn,dr,sr,Fr,_r,Mo;return Hr(function(co){switch(co.g){case 1:return Ht.g.inputs?(cn=1e3*(Mt??performance.now()),qn(co,Ht.C,2)):co.return();case 2:return qn(co,Ht.initialize(),3);case 3:for(xn=new Ht.h.PacketDataList,Xn=ln(Object.keys(pt)),Gn=Xn.next();!Gn.done;Gn=Xn.next())if(dr=Gn.value,sr=Ht.g.inputs[dr]){e:{var Lr=pt[dr];switch(sr.type){case"video":var _i=Ht.m[sr.stream];if(_i||(_i=new Ao(Ht.h,Ht.D),Ht.m[sr.stream]=_i),_i.l===0&&(_i.l=_i.h.createTexture()),typeof HTMLVideoElement<"u"&&Lr instanceof HTMLVideoElement)var uo=Lr.videoWidth,Co=Lr.videoHeight;else typeof HTMLImageElement<"u"&&Lr instanceof HTMLImageElement?(uo=Lr.naturalWidth,Co=Lr.naturalHeight):(uo=Lr.width,Co=Lr.height);Co={glName:_i.l,width:uo,height:Co},uo=_i.g,uo.canvas.width=Co.width,uo.canvas.height=Co.height,uo.activeTexture(uo.TEXTURE0),_i.h.bindTexture2d(_i.l),uo.texImage2D(uo.TEXTURE_2D,0,uo.RGBA,uo.RGBA,uo.UNSIGNED_BYTE,Lr),_i.h.bindTexture2d(0),_i=Co;break e;case"detections":for(_i=Ht.m[sr.stream],_i||(_i=new go(Ht.h),Ht.m[sr.stream]=_i),_i.data||(_i.data=new _i.g.DetectionListData),_i.data.reset(Lr.length),Co=0;Co<Lr.length;++Co){uo=Lr[Co];var Io=_i.data,gt=Io.setBoundingBox,kt=Co,Yt=uo.T,rn=new Zn;if(xr(rn,1,Yt.Y),xr(rn,2,Yt.Z),xr(rn,3,Yt.height),xr(rn,4,Yt.width),xr(rn,5,Yt.rotation),xr(rn,6,Yt.W),Yt=du(rn,Sr),gt.call(Io,kt,Yt),uo.O)for(Io=0;Io<uo.O.length;++Io){rn=uo.O[Io];var wn=!!rn.visibility;gt=_i.data,kt=gt.addNormalizedLandmark,Yt=Co,rn=Object.assign(Object.assign({},rn),{visibility:wn?rn.visibility:0}),wn=new _u,xr(wn,1,rn.x),xr(wn,2,rn.y),xr(wn,3,rn.z),rn.visibility&&xr(wn,4,rn.visibility),rn=du(wn,Xp),kt.call(gt,Yt,rn)}if(uo.M)for(Io=0;Io<uo.M.length;++Io)gt=_i.data,kt=gt.addClassification,Yt=Co,rn=uo.M[Io],wn=new Hu,xr(wn,2,rn.X),rn.index&&xr(wn,1,rn.index),rn.label&&xr(wn,3,rn.label),rn.displayName&&xr(wn,4,rn.displayName),rn=du(wn,hp),kt.call(gt,Yt,rn)}_i=_i.data;break e;default:_i={}}}switch(Fr=_i,_r=sr.stream,sr.type){case"video":xn.pushTexture2d(Object.assign(Object.assign({},Fr),{stream:_r,timestamp:cn}));break;case"detections":Mo=Fr,Mo.stream=_r,Mo.timestamp=cn,xn.pushDetectionList(Mo);break;default:throw Error("Unknown input config type: '"+sr.type+"'")}}return Ht.i.send(xn),qn(co,Ht.C,4);case 4:xn.delete(),co.g=0}})};function Nn(pt,Mt,Ht){var cn,xn,Xn,Gn,dr,sr,Fr,_r,Mo,co,Lr,_i,uo,Co;return Hr(function(Io){switch(Io.g){case 1:if(!Ht)return Io.return(Mt);for(cn={},xn=0,Xn=ln(Object.keys(Ht)),Gn=Xn.next();!Gn.done;Gn=Xn.next())dr=Gn.value,sr=Ht[dr],typeof sr!="string"&&sr.type==="texture"&&Mt[sr.stream]!==void 0&&++xn;1<xn&&(pt.G=!1),Fr=ln(Object.keys(Ht)),Gn=Fr.next();case 2:if(Gn.done){Io.g=4;break}if(_r=Gn.value,Mo=Ht[_r],typeof Mo=="string")return uo=cn,Co=_r,qn(Io,er(pt,_r,Mt[Mo]),14);if(co=Mt[Mo.stream],Mo.type==="detection_list"){if(co){for(var gt=co.getRectList(),kt=co.getLandmarksList(),Yt=co.getClassificationsList(),rn=[],wn=0;wn<gt.size();++wn){var ft=Cu(gt.get(wn),Zn,Qn);ft={T:{Y:mr(ft,1),Z:mr(ft,2),height:mr(ft,3),width:mr(ft,4),rotation:mr(ft,5,0),W:fo(ft,6)},O:Wo(kt.get(wn)),M:Nr(Cu(Yt.get(wn),Au,Ep))},rn.push(ft)}gt=rn}else gt=[];cn[_r]=gt,Io.g=7;break}if(Mo.type==="proto_list"){if(co){for(gt=Array(co.size()),kt=0;kt<co.size();kt++)gt[kt]=co.get(kt);co.delete()}else gt=[];cn[_r]=gt,Io.g=7;break}if(co===void 0){Io.g=3;break}if(Mo.type==="float_list"){cn[_r]=co,Io.g=7;break}if(Mo.type==="proto"){cn[_r]=co,Io.g=7;break}if(Mo.type!=="texture")throw Error("Unknown output config type: '"+Mo.type+"'");return Lr=pt.s[_r],Lr||(Lr=new Ao(pt.h,pt.D),pt.s[_r]=Lr),qn(Io,es(Lr,co,pt.G),13);case 13:_i=Io.h,cn[_r]=_i;case 7:Mo.transform&&cn[_r]&&(cn[_r]=Mo.transform(cn[_r])),Io.g=3;break;case 14:uo[Co]=Io.h;case 3:Gn=Fr.next(),Io.g=2;break;case 4:return Io.return(cn)}})}function er(pt,Mt,Ht){var cn;return Hr(function(xn){return typeof Ht=="number"||Ht instanceof Uint8Array||Ht instanceof pt.h.Uint8BlobList?xn.return(Ht):Ht instanceof pt.h.Texture2dDataOut?(cn=pt.s[Mt],cn||(cn=new Ao(pt.h,pt.D),pt.s[Mt]=cn),xn.return(es(cn,Ht,pt.G))):xn.return(void 0)})}function Pn(pt,Mt){for(var Ht=Mt.name||"$",cn=[].concat(En(Mt.wants)),xn=new pt.h.StringList,Xn=ln(Mt.wants),Gn=Xn.next();!Gn.done;Gn=Xn.next())xn.push_back(Gn.value);Xn=pt.h.PacketListener.implement({onResults:function(dr){for(var sr={},Fr=0;Fr<Mt.wants.length;++Fr)sr[cn[Fr]]=dr.get(Fr);var _r=pt.listeners[Ht];_r&&(pt.C=Nn(pt,sr,Mt.outs).then(function(Mo){Mo=_r(Mo);for(var co=0;co<Mt.wants.length;++co){var Lr=sr[cn[co]];typeof Lr=="object"&&Lr.hasOwnProperty&&Lr.hasOwnProperty("delete")&&Lr.delete()}Mo&&(pt.C=Mo)}))}}),pt.i.attachMultiListener(xn,Xn),xn.delete()}at.onResults=function(pt,Mt){this.listeners[Mt||"$"]=pt},Oo("Solution",_a),Oo("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"});function ar(pt){switch(pt===void 0&&(pt=0),pt){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function Rr(pt){var Mt=this;pt=pt||{},this.g=new _a({locateFile:pt.locateFile,files:function(Ht){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:ar(Ht.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:Wo},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:Wo},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(Ht){var cn,xn,Xn;return Hr(function(Gn){return Gn.g==1?(cn=ar(Ht),xn="third_party/mediapipe/modules/pose_landmark/"+cn,qn(Gn,gn(Mt.g,cn),2)):(Xn=Gn.h,Mt.g.overrideFile(xn,Xn),Gn.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}at=Rr.prototype,at.reset=function(){this.g.reset()},at.close=function(){return this.g.close(),o.resolve()},at.onResults=function(pt){this.g.onResults(pt)},at.initialize=function(){var pt=this;return Hr(function(Mt){return qn(Mt,pt.g.initialize(),0)})},at.send=function(pt,Mt){var Ht=this;return Hr(function(cn){return qn(cn,Ht.g.send(pt,Mt),0)})},at.setOptions=function(pt){this.g.setOptions(pt)},Oo("Pose",Rr),Oo("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Oo("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Oo("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Oo("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Oo("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Oo("VERSION","0.5.1635988162")}).call(Ol);const Yp=class{constructor(){h(this,"mediapipeMap_",new Map)}getVersion(at){switch(at){case"face_detection":return up.VERSION;case"face_mesh":return Hp.VERSION;case"hands":return gu.VERSION;case"holistic":return Qu.VERSION;case"objectron":return kp.VERSION;case"selfie_segmentation":return mu.VERSION;case"pose":return Ol.VERSION;default:return""}}initialize(at){return new o(async(ot,ut)=>{if(at.mediaPipeModelConfigArray.length==0){ut("no model was selected");return}for(let Ot=0;Ot<at.mediaPipeModelConfigArray.length;Ot++){const Gt=at.mediaPipeModelConfigArray[Ot];if(this.mediapipeMap_.has(Gt.modelType)){ut("setting same type is not supported");return}if(typeof Gt.listener!="function"){ut(`[${Gt.modelType}] ResultsListener must be provided`);return}let en;switch(Gt.modelType){case"face_mesh":en=new Hp.FaceMesh({locateFile:(hn,ln)=>(Gt.assetsUri||Yp.defaultAssetsBaseUrl+"face_mesh/"+this.getVersion("face_mesh"))+"/"+hn});break;case"face_detection":en=new up.FaceDetection({locateFile:(hn,ln)=>(Gt.assetsUri||Yp.defaultAssetsBaseUrl+"face_detection/"+this.getVersion("face_detection"))+"/"+hn});break;case"hands":en=new gu.Hands({locateFile:(hn,ln)=>(Gt.assetsUri||Yp.defaultAssetsBaseUrl+"hands/"+this.getVersion("hands"))+"/"+hn});break;case"holistic":en=new Qu.Holistic({locateFile:(hn,ln)=>(Gt.assetsUri||Yp.defaultAssetsBaseUrl+"holistic/"+this.getVersion("holistic"))+"/"+hn});break;case"objectron":en=new kp.Objectron({locateFile:(hn,ln)=>(Gt.assetsUri||Yp.defaultAssetsBaseUrl+"objectron/"+this.getVersion("objectron"))+"/"+hn});break;case"selfie_segmentation":en=new mu.SelfieSegmentation({locateFile:(hn,ln)=>(Gt.assetsUri||Yp.defaultAssetsBaseUrl+"selfie_segmentation/"+this.getVersion("selfie_segmentation"))+"/"+hn});break;case"pose":en=new Ol.Pose({locateFile:(hn,ln)=>(Gt.assetsUri||Yp.defaultAssetsBaseUrl+"pose/"+this.getVersion("pose"))+"/"+hn});break;default:ut("unknown model type");return}en.onResults(Gt.listener),Gt.options&&en.setOptions(Gt.options);try{await en.initialize(),this.mediapipeMap_.set(Gt.modelType,en)}catch(hn){ut(hn);return}}ot()})}close(at){return new o((ot,ut)=>{let Ot=[];if(at){let Gt=this.mediapipeMap_.get(at);if(Gt)this.mediapipeMap_.delete(at),Ot.push(Gt.close());else{ut("model not exit");return}}else{for(const[Gt,en]of this.mediapipeMap_.entries())Ot.push(en.close());this.mediapipeMap_.clear()}o.all(Ot).then(()=>{ot()}).catch(Gt=>{ut(Gt)})})}send(at,ot){return new o((ut,Ot)=>{let Gt=[];if(ot){let en=this.mediapipeMap_.get(ot);if(en)Gt.push(en.send({image:at}));else{Ot("model not exit");return}}else for(const[en,hn]of this.mediapipeMap_.entries())Gt.push(hn.send({image:at}));o.all(Gt).then(()=>{ut()}).catch(en=>{Ot(en)})})}reset(at){if(at){let ot=this.mediapipeMap_.get(at);ot&&typeof ot.reset=="function"&&ot.reset()}else for(const[ot,ut]of this.mediapipeMap_.entries())ut&&typeof ut.reset=="function"&&ut.reset()}};let zp=Yp;h(zp,"defaultAssetsBaseUrl","https://d3opqjmqzxf057.cloudfront.net/ml/mediapipe/");const dp=new WeakMap,bs=new WeakMap,em=new WeakMap,am=Symbol("anyProducer"),Fm=o.resolve(),Iu=Symbol("listenerAdded"),Em=Symbol("listenerRemoved");let cm=!1;function Jp(at){if(typeof at!="string"&&typeof at!="symbol")throw new TypeError("eventName must be a string or a symbol")}function Cm(at){if(typeof at!="function")throw new TypeError("listener must be a function")}function tm(at,ot){const ut=bs.get(at);return ut.has(ot)||ut.set(ot,new Set),ut.get(ot)}function gm(at,ot){const ut=typeof ot=="string"||typeof ot=="symbol"?ot:am,Ot=em.get(at);return Ot.has(ut)||Ot.set(ut,new Set),Ot.get(ut)}function o1(at,ot,ut){const Ot=em.get(at);if(Ot.has(ot))for(const Gt of Ot.get(ot))Gt.enqueue(ut);if(Ot.has(am)){const Gt=o.all([ot,ut]);for(const en of Ot.get(am))en.enqueue(Gt)}}function Km(at,ot){ot=Array.isArray(ot)?ot:[ot];let ut=!1,Ot=()=>{},Gt=[];const en={enqueue(hn){Gt.push(hn),Ot()},finish(){ut=!0,Ot()}};for(const hn of ot)gm(at,hn).add(en);return{async next(){return Gt?Gt.length===0?ut?(Gt=void 0,this.next()):(await new o(hn=>{Ot=hn}),this.next()):{done:!1,value:await Gt.shift()}:{done:!0}},async return(hn){Gt=void 0;for(const ln of ot)gm(at,ln).delete(en);return Ot(),arguments.length>0?{done:!0,value:await hn}:{done:!0}},[Symbol.asyncIterator](){return this}}}function zm(at){if(at===void 0)return lm;if(!Array.isArray(at))throw new TypeError("`methodNames` must be an array of strings");for(const ot of at)if(!lm.includes(ot))throw typeof ot!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${ot} is not Emittery method`);return at}const vm=at=>at===Iu||at===Em;class Qp{static mixin(ot,ut){return ut=zm(ut),Ot=>{if(typeof Ot!="function")throw new TypeError("`target` must be function");for(const hn of ut)if(Ot.prototype[hn]!==void 0)throw new Error(`The property \`${hn}\` already exists on \`target\``);function Gt(){return Object.defineProperty(this,ot,{enumerable:!1,value:new Qp}),this[ot]}Object.defineProperty(Ot.prototype,ot,{enumerable:!1,get:Gt});const en=hn=>function(...ln){return this[ot][hn](...ln)};for(const hn of ut)Object.defineProperty(Ot.prototype,hn,{enumerable:!1,value:en(hn)});return Ot}}static get isDebugEnabled(){if(typeof a!="object")return cm;const{env:ot}=a||{env:{}};return ot.DEBUG==="emittery"||ot.DEBUG==="*"||cm}static set isDebugEnabled(ot){cm=ot}constructor(ot={}){dp.set(this,new Set),bs.set(this,new Map),em.set(this,new Map),this.debug=ot.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(ut,Ot,Gt,en)=>{try{en=JSON.stringify(en)}catch{en=`Object with the following keys failed to stringify: ${Object.keys(en).join(",")}`}typeof Gt=="symbol"&&(Gt=Gt.toString());const hn=new Date,ln=`${hn.getHours()}:${hn.getMinutes()}:${hn.getSeconds()}.${hn.getMilliseconds()}`;console.log(`[${ln}][emittery:${ut}][${Ot}] Event Name: ${Gt}
	data: ${en}`)})}logIfDebugEnabled(ot,ut,Ot){(Qp.isDebugEnabled||this.debug.enabled)&&this.debug.logger(ot,this.debug.name,ut,Ot)}on(ot,ut){Cm(ut),ot=Array.isArray(ot)?ot:[ot];for(const Ot of ot)Jp(Ot),tm(this,Ot).add(ut),this.logIfDebugEnabled("subscribe",Ot,void 0),vm(Ot)||this.emit(Iu,{eventName:Ot,listener:ut});return this.off.bind(this,ot,ut)}off(ot,ut){Cm(ut),ot=Array.isArray(ot)?ot:[ot];for(const Ot of ot)Jp(Ot),tm(this,Ot).delete(ut),this.logIfDebugEnabled("unsubscribe",Ot,void 0),vm(Ot)||this.emit(Em,{eventName:Ot,listener:ut})}once(ot){return new o(ut=>{const Ot=this.on(ot,Gt=>{Ot(),ut(Gt)})})}events(ot){ot=Array.isArray(ot)?ot:[ot];for(const ut of ot)Jp(ut);return Km(this,ot)}async emit(ot,ut){Jp(ot),this.logIfDebugEnabled("emit",ot,ut),o1(this,ot,ut);const Ot=tm(this,ot),Gt=dp.get(this),en=[...Ot],hn=vm(ot)?[]:[...Gt];await Fm,await o.all([...en.map(async ln=>{if(Ot.has(ln))return ln(ut)}),...hn.map(async ln=>{if(Gt.has(ln))return ln(ot,ut)})])}async emitSerial(ot,ut){Jp(ot),this.logIfDebugEnabled("emitSerial",ot,ut);const Ot=tm(this,ot),Gt=dp.get(this),en=[...Ot],hn=[...Gt];await Fm;for(const ln of en)Ot.has(ln)&&await ln(ut);for(const ln of hn)Gt.has(ln)&&await ln(ot,ut)}onAny(ot){return Cm(ot),this.logIfDebugEnabled("subscribeAny",void 0,void 0),dp.get(this).add(ot),this.emit(Iu,{listener:ot}),this.offAny.bind(this,ot)}anyEvent(){return Km(this)}offAny(ot){Cm(ot),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Em,{listener:ot}),dp.get(this).delete(ot)}clearListeners(ot){ot=Array.isArray(ot)?ot:[ot];for(const ut of ot)if(this.logIfDebugEnabled("clear",ut,void 0),typeof ut=="string"||typeof ut=="symbol"){tm(this,ut).clear();const Ot=gm(this,ut);for(const Gt of Ot)Gt.finish();Ot.clear()}else{dp.get(this).clear();for(const Ot of bs.get(this).values())Ot.clear();for(const Ot of em.get(this).values()){for(const Gt of Ot)Gt.finish();Ot.clear()}}}listenerCount(ot){ot=Array.isArray(ot)?ot:[ot];let ut=0;for(const Ot of ot){if(typeof Ot=="string"){ut+=dp.get(this).size+tm(this,Ot).size+gm(this,Ot).size+gm(this).size;continue}typeof Ot<"u"&&Jp(Ot),ut+=dp.get(this).size;for(const Gt of bs.get(this).values())ut+=Gt.size;for(const Gt of em.get(this).values())ut+=Gt.size}return ut}bindMethods(ot,ut){if(typeof ot!="object"||ot===null)throw new TypeError("`target` must be an object");ut=zm(ut);for(const Ot of ut){if(ot[Ot]!==void 0)throw new Error(`The property \`${Ot}\` already exists on \`target\``);Object.defineProperty(ot,Ot,{enumerable:!1,value:this[Ot].bind(this)})}}}const lm=Object.getOwnPropertyNames(Qp.prototype).filter(at=>at!=="constructor");Object.defineProperty(Qp,"listenerAdded",{value:Iu,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(Qp,"listenerRemoved",{value:Em,writable:!1,enumerable:!0,configurable:!1});var $p=Qp,Bp=(at=>(at[at.INIT=0]="INIT",at[at.FORWARD=1]="FORWARD",at[at.TERMINATE=2]="TERMINATE",at))(Bp||{});function ym(at){return[ImageBitmap,ReadableStream,WritableStream].some(ot=>at instanceof ot)}let Tm=0;function Rm(at,ot,ut,Ot,Gt){const en=Tm++;return at.postMessage({id:en,type:ot,functionName:ut,args:Ot},Ot.filter(hn=>ym(hn))),new o(hn=>{Gt.set(en,hn)})}async function Jm(at,ot,ut){const Ot=new ot;if(Ot.addEventListener("message",({data:Gt})=>{var en;(en=ut.get(Gt.id))==null||en(Gt.result),ut.delete(Gt.id)}),!await Rm(Ot,Bp.INIT,"",[at.workerId],ut))throw"Failed to instantiate workerized class";return Ot}async function vu(at,ot,ut){const Ot={};return Object.getOwnPropertyNames(at.prototype).forEach(Gt=>{Ot[Gt]=(...en)=>Rm(ot,Bp.FORWARD,Gt,en,ut)}),Ot.terminate=async(...Gt)=>{const en=await Rm(ot,Bp.TERMINATE,"",Gt,ut);return ot.terminate(),Ot.worker=void 0,en},Ot.worker=ot,Ot}async function xu(at,ot){const ut=new Map,Ot=await Jm(at,ot,ut);return vu(at,Ot,ut)}function Im(at,ot){const{id:ut}=at,Ot=Array.isArray(ot)?ot:[ot];postMessage({id:ut,result:ot},Ot.filter(Gt=>ym(Gt)))}async function s1(at,ot){const{functionName:ut,args:Ot}=at;if(!ot.instance)throw"instance not initialized";if(!ut)throw"missing function name to call";if(!ot.instance[ut])throw`undefined function [${ut}] in class ${ot.instance.constructor.workerId}`;Im(at,await ot.instance[ut](...Ot??[]))}function Qm(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}const $m={};function um(at,ot){ot.workerId=at,Qm()&&($m[ot.workerId]=ot)}function a1(at,ot){if(!at.args)throw"Missing className while initializing worker";const[ut]=at.args,Ot=$m[ut];if(Ot)ot.instance=new Ot(at.args.slice(1));else throw`unknown worker class ${ut}`;Im(at,typeof ot.instance!==void 0)}async function c1(at,ot){const{args:ut}=at;if(!ot.instance)throw"instance not initialized";let Ot;ot.instance.terminate&&(Ot=await ot.instance.terminate(...ut??[])),Im(at,Ot)}function l1(){const at={};onmessage=async ot=>{const ut=ot.data;switch(ut.type){case Bp.INIT:a1(ut,at);break;case Bp.FORWARD:s1(ut,at);break;case Bp.TERMINATE:c1(ut,at);break}}}Qm()&&l1();class nm{static async createVideoReadable(ot){return new o((ut,Ot)=>{const Gt=document.createElement("video");let en=new AbortController,hn=new AbortController;Gt.addEventListener("canplay",()=>{en.abort(),Gt.muted=!0,Gt.loop=!0,Gt.play().then(()=>{try{const ln=Gt.captureStream(),En=new MediaStreamTrackProcessor(ln.getVideoTracks()[0]);ut(En.readable)}catch(ln){Ot(ln)}})},{once:!0,signal:hn.signal}),Gt.addEventListener("error",ln=>{hn.abort(),Ot("loading error:"+ln)},{once:!0,signal:en.signal}),Gt.crossOrigin="anonymous",Gt.src=ot})}static async createImageCanvas(ot){const ut=await(await fetch(ot)).blob();return await createImageBitmap(ut)}}async function dm(at){return new o(ot=>{setTimeout(()=>{ot()},at)})}var bm=(at=>(at.PUSH="PUSH",at.POP="POP",at))(bm||{});class _m{constructor(ot){h(this,"context"),h(this,"extension"),h(this,"queries",[]),h(this,"activeQuery"),this.context=ot,this.extension=ot.getExtension("EXT_disjoint_timer_query_webgl2")}start(){}stop(){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT)}pushContext(ot){this.createQuery("PUSH",ot)}popContext(ot){this.createQuery("POP",ot)}createQuery(ot,ut){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT),this.activeQuery=this.context.createQuery(),this.context.beginQuery(this.extension.TIME_ELAPSED_EXT,this.activeQuery),this.queries.push({name:ut,action:ot,query:this.activeQuery})}async getResolvedQueries(){const ot=(await o.all([...this.queries].map(ut=>this.resolveQuery(ut)))).filter(ut=>ut);for(let ut=1;ut<ot.length;++ut)ot[ut].timestamp+=ot[ut-1].duration+ot[ut-1].timestamp;return ot}async resolveQuery(ot){if(!await this.awaitQueryAvailable(ot)){console.log("Unawaitable query",ot);return}if(this.context.getParameter(this.extension.GPU_DISJOINT_EXT)){console.log("Disjointed query",ot);return}return{...ot,duration:this.context.getQueryParameter(ot.query,this.context.QUERY_RESULT),timestamp:0}}async awaitQueryAvailable(ot){for(let ut=0;ut<10;++ut){if(this.context.getQueryParameter(ot.query,this.context.QUERY_RESULT_AVAILABLE))return ot;await dm(200)}}}/* @license twgl.js 5.2.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const fm=5120,Sm=5121,hm=5122,xm=5123,wm=5124,Om=5125,Am=5126,u1=32819,Zm=32820,Vm=33635,qm=5131,Xm=33640,Dm=35899,_g=35902,fn=36269,an=34042,vn={};{const at=vn;at[fm]=Int8Array,at[Sm]=Uint8Array,at[hm]=Int16Array,at[xm]=Uint16Array,at[wm]=Int32Array,at[Om]=Uint32Array,at[Am]=Float32Array,at[u1]=Uint16Array,at[Zm]=Uint16Array,at[Vm]=Uint16Array,at[qm]=Uint16Array,at[Xm]=Uint32Array,at[Dm]=Uint32Array,at[_g]=Uint32Array,at[fn]=Uint32Array,at[an]=Uint32Array}function Pt(at){if(at instanceof Int8Array)return fm;if(at instanceof Uint8Array||at instanceof Uint8ClampedArray)return Sm;if(at instanceof Int16Array)return hm;if(at instanceof Uint16Array)return xm;if(at instanceof Int32Array)return wm;if(at instanceof Uint32Array)return Om;if(at instanceof Float32Array)return Am;throw new Error("unsupported typed array type")}function _t(at){if(at===Int8Array)return fm;if(at===Uint8Array||at===Uint8ClampedArray)return Sm;if(at===Int16Array)return hm;if(at===Uint16Array)return xm;if(at===Int32Array)return wm;if(at===Uint32Array)return Om;if(at===Float32Array)return Am;throw new Error("unsupported typed array type")}function on(at){const ot=vn[at];if(!ot)throw new Error("unknown gl type");return ot}const Rn=typeof SharedArrayBuffer<"u"?function(at){return at&&at.buffer&&(at.buffer instanceof ArrayBuffer||at.buffer instanceof SharedArrayBuffer)}:function(at){return at&&at.buffer&&at.buffer instanceof ArrayBuffer};function An(...at){console.error(...at)}const Bn=new Map;function Jn(at,ot){if(!at||typeof at!="object")return!1;let ut=Bn.get(ot);ut||(ut=new WeakMap,Bn.set(ot,ut));let Ot=ut.get(at);if(Ot===void 0){const Gt=Object.prototype.toString.call(at);Ot=Gt.substring(8,Gt.length-1)===ot,ut.set(at,Ot)}return Ot}function Yn(at,ot){return typeof WebGLBuffer<"u"&&Jn(ot,"WebGLBuffer")}function xo(at,ot){return typeof WebGLRenderbuffer<"u"&&Jn(ot,"WebGLRenderbuffer")}function Ur(at,ot){return typeof WebGLTexture<"u"&&Jn(ot,"WebGLTexture")}function Vr(at,ot){return typeof WebGLSampler<"u"&&Jn(ot,"WebGLSampler")}const xs=35044,eu=34962,so=34963,Al=34660,rm=5120,pm=5121,P1=5122,F1=5123,Gv=5124,kv=5125,g0=5126,v0={attribPrefix:""};function Nv(at,ot,ut,Ot,Gt){at.bindBuffer(ot,ut),at.bufferData(ot,Ot,Gt||xs)}function y0(at,ot,ut,Ot){if(Yn(at,ot))return ot;ut=ut||eu;const Gt=at.createBuffer();return Nv(at,ut,Gt,ot,Ot),Gt}function b0(at){return at==="indices"}function Wv(at){return at===Int8Array||at===Uint8Array}function Mv(at){return at.length?at:at.data}const Pv=/coord|texture/i,Fv=/color|colour/i;function Xv(at,ot){let ut;if(Pv.test(at)?ut=2:Fv.test(at)?ut=4:ut=3,ot%ut>0)throw new Error(`Can not guess numComponents for attribute '${at}'. Tried ${ut} but ${ot} values is not evenly divisible by ${ut}. You should specify it.`);return ut}function Dv(at,ot,ut){return at.numComponents||at.size||Xv(ot,ut||Mv(at).length)}function S0(at,ot){if(Rn(at))return at;if(Rn(at.data))return at.data;Array.isArray(at)&&(at={data:at});let ut=at.type?X1(at.type):void 0;return ut||(b0(ot)?ut=Uint16Array:ut=Float32Array),new ut(at.data)}function jv(at){return typeof at=="number"?at:at?_t(at):g0}function X1(at){return typeof at=="number"?on(at):at||Float32Array}function Uv(at,ot){return{buffer:ot.buffer,numValues:2*3*4,type:jv(ot.type),arrayType:X1(ot.type)}}function Hv(at,ot){const ut=ot.data||ot,Ot=X1(ot.type),Gt=ut*Ot.BYTES_PER_ELEMENT,en=at.createBuffer();return at.bindBuffer(eu,en),at.bufferData(eu,Gt,ot.drawType||xs),{buffer:en,numValues:ut,type:_t(Ot),arrayType:Ot}}function Yv(at,ot,ut){const Ot=S0(ot,ut);return{arrayType:Ot.constructor,buffer:y0(at,Ot,void 0,ot.drawType),type:Pt(Ot),numValues:0}}function Bv(at,ot){const ut={};return Object.keys(ot).forEach(function(Ot){if(!b0(Ot)){const Gt=ot[Ot],en=Gt.attrib||Gt.name||Gt.attribName||v0.attribPrefix+Ot;if(Gt.value){if(!Array.isArray(Gt.value)&&!Rn(Gt.value))throw new Error("array.value is not array or typedarray");ut[en]={value:Gt.value}}else{let hn;Gt.buffer&&Gt.buffer instanceof WebGLBuffer?hn=Uv:typeof Gt=="number"||typeof Gt.data=="number"?hn=Hv:hn=Yv;const{buffer:ln,type:En,numValues:rr,arrayType:br}=hn(at,Gt,Ot),Tr=Gt.normalize!==void 0?Gt.normalize:Wv(br),ho=Dv(Gt,Ot,rr);ut[en]={buffer:ln,numComponents:ho,type:En,normalize:Tr,stride:Gt.stride||0,offset:Gt.offset||0,divisor:Gt.divisor===void 0?void 0:Gt.divisor,drawType:Gt.drawType}}}}),at.bindBuffer(eu,null),ut}function Kv(at,ot){return ot===rm||ot===pm?1:ot===P1||ot===F1?2:ot===Gv||ot===kv||ot===g0?4:0}const D1=["position","positions","a_position"];function zv(at,ot){let ut,Ot;for(Ot=0;Ot<D1.length&&(ut=D1[Ot],!(ut in ot||(ut=v0.attribPrefix+ut,ut in ot)));++Ot);Ot===D1.length&&(ut=Object.keys(ot)[0]);const Gt=ot[ut];if(!Gt.buffer)return 1;at.bindBuffer(eu,Gt.buffer);const en=at.getBufferParameter(eu,Al);at.bindBuffer(eu,null);const hn=Kv(at,Gt.type),ln=en/hn,En=Gt.numComponents||Gt.size,rr=ln/En;if(rr%1!==0)throw new Error(`numComponents ${En} not correct for length ${length}`);return rr}function Jv(at,ot,ut){const Ot=Bv(at,ot),Gt=Object.assign({},ut||{});Gt.attribs=Object.assign({},ut?ut.attribs:{},Ot);const en=ot.indices;if(en){const hn=S0(en,"indices");Gt.indices=y0(at,hn,so),Gt.numElements=hn.length,Gt.elementType=Pt(hn)}else Gt.numElements||(Gt.numElements=zv(at,Gt.attribs));return Gt}function d1(at){return!!at.texStorage2D}const E0=function(){const at={},ot={};function ut(Ot){const Gt=Ot.constructor.name;if(!at[Gt]){for(const en in Ot)if(typeof Ot[en]=="number"){const hn=ot[Ot[en]];ot[Ot[en]]=hn?`${hn} | ${en}`:en}at[Gt]=!0}}return function(Ot,Gt){return ut(Ot),ot[Gt]||(typeof Gt=="number"?`0x${Gt.toString(16)}`:Gt)}}(),Lm={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},f1=Rn,C0=function(){let at;return function(){return at=at||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),at}}(),T0=6406,mm=6407,Gu=6408,R0=6409,I0=6410,h1=6402,x0=34041,y1=33071,Qv=9728,$v=9729,Gm=3553,km=34067,jm=32879,Um=35866,j1=34069,_v=34070,qv=34071,ey=34072,ty=34073,ny=34074,U1=10241,H1=10240,b1=10242,S1=10243,w0=32882,ry=33082,iy=33083,oy=33084,sy=33085,Y1=3317,O0=3314,A0=32878,Z0=3316,V0=3315,L0=32877,ay=37443,cy=37441,ly=37440,uy=33321,dy=36756,fy=33325,hy=33326,py=33330,my=33329,gy=33338,vy=33337,yy=33340,by=33339,Sy=33323,Ey=36757,Cy=33327,Ty=33328,Ry=33336,Iy=33335,xy=33332,wy=33331,Oy=33334,Ay=33333,Zy=32849,Vy=35905,Ly=36194,Gy=36758,ky=35898,Ny=35901,Wy=34843,My=34837,Py=36221,Fy=36239,Xy=36215,Dy=36233,jy=36209,Uy=36227,Hy=32856,Yy=35907,By=36759,Ky=32855,zy=32854,Jy=32857,Qy=34842,$y=34836,_y=36220,qy=36238,e2=36975,t2=36214,n2=36232,r2=36226,i2=36208,o2=33189,s2=33190,a2=36012,c2=36013,l2=35056,Nm=5120,wu=5121,E1=5122,e1=5123,C1=5124,Hm=5125,xp=5126,G0=32819,k0=32820,N0=33635,im=5131,p1=36193,B1=33640,u2=35899,d2=35902,f2=36269,h2=34042,T1=33319,t1=33320,R1=6403,n1=36244,r1=36248,Ym=36249;let K1;function I1(at){if(!K1){const ot={};ot[T0]={textureFormat:T0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[wu,im,p1,xp]},ot[R0]={textureFormat:R0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[wu,im,p1,xp]},ot[I0]={textureFormat:I0,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[wu,im,p1,xp]},ot[mm]={textureFormat:mm,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[wu,im,p1,xp,N0]},ot[Gu]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[wu,im,p1,xp,G0,k0]},ot[h1]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Hm,e1]},ot[uy]={textureFormat:R1,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[wu]},ot[dy]={textureFormat:R1,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Nm]},ot[fy]={textureFormat:R1,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[xp,im]},ot[hy]={textureFormat:R1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[xp]},ot[py]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[wu]},ot[my]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Nm]},ot[xy]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[e1]},ot[wy]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[E1]},ot[Oy]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Hm]},ot[Ay]={textureFormat:n1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[C1]},ot[Sy]={textureFormat:T1,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[wu]},ot[Ey]={textureFormat:T1,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Nm]},ot[Cy]={textureFormat:T1,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[xp,im]},ot[Ty]={textureFormat:T1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[xp]},ot[Ry]={textureFormat:t1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[wu]},ot[Iy]={textureFormat:t1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Nm]},ot[gy]={textureFormat:t1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[e1]},ot[vy]={textureFormat:t1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[E1]},ot[yy]={textureFormat:t1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Hm]},ot[by]={textureFormat:t1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[C1]},ot[Zy]={textureFormat:mm,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[wu]},ot[Vy]={textureFormat:mm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[wu]},ot[Ly]={textureFormat:mm,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[wu,N0]},ot[Gy]={textureFormat:mm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Nm]},ot[ky]={textureFormat:mm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[xp,im,u2]},ot[Ny]={textureFormat:mm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[xp,im,d2]},ot[Wy]={textureFormat:mm,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[xp,im]},ot[My]={textureFormat:mm,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[xp]},ot[Py]={textureFormat:r1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[wu]},ot[Fy]={textureFormat:r1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Nm]},ot[Xy]={textureFormat:r1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[e1]},ot[Dy]={textureFormat:r1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[E1]},ot[jy]={textureFormat:r1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Hm]},ot[Uy]={textureFormat:r1,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[C1]},ot[Hy]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[wu]},ot[Yy]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[wu]},ot[By]={textureFormat:Gu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Nm]},ot[Ky]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[wu,k0,B1]},ot[zy]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[wu,G0]},ot[Jy]={textureFormat:Gu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[B1]},ot[Qy]={textureFormat:Gu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[xp,im]},ot[$y]={textureFormat:Gu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[xp]},ot[_y]={textureFormat:Ym,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[wu]},ot[qy]={textureFormat:Ym,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nm]},ot[e2]={textureFormat:Ym,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[B1]},ot[t2]={textureFormat:Ym,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[e1]},ot[n2]={textureFormat:Ym,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[E1]},ot[r2]={textureFormat:Ym,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[C1]},ot[i2]={textureFormat:Ym,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Hm]},ot[o2]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[e1,Hm]},ot[s2]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Hm]},ot[a2]={textureFormat:h1,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[xp]},ot[l2]={textureFormat:x0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[h2]},ot[c2]={textureFormat:x0,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[f2]},Object.keys(ot).forEach(function(ut){const Ot=ot[ut];Ot.bytesPerElementMap={},Ot.bytesPerElement.forEach(function(Gt,en){const hn=Ot.type[en];Ot.bytesPerElementMap[hn]=Gt})}),K1=ot}return K1[at]}function p2(at,ot){const ut=I1(at);if(!ut)throw"unknown internal format";const Ot=ut.bytesPerElementMap[ot];if(Ot===void 0)throw"unknown internal format";return Ot}function m1(at){const ot=I1(at);if(!ot)throw"unknown internal format";return{format:ot.textureFormat,type:ot.type[0]}}function W0(at){return(at&at-1)===0}function m2(at,ot,ut,Ot){if(!d1(at))return W0(ot)&&W0(ut);const Gt=I1(Ot);if(!Gt)throw"unknown internal format";return Gt.colorRenderable&&Gt.textureFilterable}function g2(at){const ot=I1(at);if(!ot)throw"unknown internal format";return ot.textureFilterable}function v2(at,ot,ut){return f1(ot)?Pt(ot):ut||wu}function x1(at,ot,ut,Ot,Gt){if(Gt%1!==0)throw"can't guess dimensions";if(!ut&&!Ot){const en=Math.sqrt(Gt/(ot===km?6:1));en%1===0?(ut=en,Ot=en):(ut=Gt,Ot=1)}else if(Ot){if(!ut&&(ut=Gt/Ot,ut%1))throw"can't guess dimensions"}else if(Ot=Gt/ut,Ot%1)throw"can't guess dimensions";return{width:ut,height:Ot}}function i1(at,ot){ot.colorspaceConversion!==void 0&&at.pixelStorei(ay,ot.colorspaceConversion),ot.premultiplyAlpha!==void 0&&at.pixelStorei(cy,ot.premultiplyAlpha),ot.flipY!==void 0&&at.pixelStorei(ly,ot.flipY)}function M0(at){at.pixelStorei(Y1,4),d1(at)&&(at.pixelStorei(O0,0),at.pixelStorei(A0,0),at.pixelStorei(Z0,0),at.pixelStorei(V0,0),at.pixelStorei(L0,0))}function y2(at,ot,ut,Ot){Ot.minMag&&(ut.call(at,ot,U1,Ot.minMag),ut.call(at,ot,H1,Ot.minMag)),Ot.min&&ut.call(at,ot,U1,Ot.min),Ot.mag&&ut.call(at,ot,H1,Ot.mag),Ot.wrap&&(ut.call(at,ot,b1,Ot.wrap),ut.call(at,ot,S1,Ot.wrap),(ot===jm||Vr(at,ot))&&ut.call(at,ot,w0,Ot.wrap)),Ot.wrapR&&ut.call(at,ot,w0,Ot.wrapR),Ot.wrapS&&ut.call(at,ot,b1,Ot.wrapS),Ot.wrapT&&ut.call(at,ot,S1,Ot.wrapT),Ot.minLod&&ut.call(at,ot,ry,Ot.minLod),Ot.maxLod&&ut.call(at,ot,iy,Ot.maxLod),Ot.baseLevel&&ut.call(at,ot,oy,Ot.baseLevel),Ot.maxLevel&&ut.call(at,ot,sy,Ot.maxLevel)}function P0(at,ot,ut){const Ot=ut.target||Gm;at.bindTexture(Ot,ot),y2(at,Ot,at.texParameteri,ut)}function b2(at){return at=at||Lm.textureColor,f1(at)?at:new Uint8Array([at[0]*255,at[1]*255,at[2]*255,at[3]*255])}function z1(at,ot,ut,Ot,Gt,en){ut=ut||Lm.textureOptions,en=en||Gu;const hn=ut.target||Gm;if(Ot=Ot||ut.width,Gt=Gt||ut.height,at.bindTexture(hn,ot),m2(at,Ot,Gt,en))at.generateMipmap(hn);else{const ln=g2(en)?$v:Qv;at.texParameteri(hn,U1,ln),at.texParameteri(hn,H1,ln),at.texParameteri(hn,b1,y1),at.texParameteri(hn,S1,y1)}}function g1(at){return at.auto===!0||at.auto===void 0&&at.level===void 0}function J1(at,ot){return ot=ot||{},ot.cubeFaceOrder||[j1,_v,qv,ey,ty,ny]}function Q1(at,ot){const ut=J1(at,ot).map(function(Ot,Gt){return{face:Ot,ndx:Gt}});return ut.sort(function(Ot,Gt){return Ot.face-Gt.face}),ut}function F0(at,ot,ut,Ot){Ot=Ot||Lm.textureOptions;const Gt=Ot.target||Gm,en=Ot.level||0;let hn=ut.width,ln=ut.height;const En=Ot.internalFormat||Ot.format||Gu,rr=m1(En),br=Ot.format||rr.format,Tr=Ot.type||rr.type;if(i1(at,Ot),at.bindTexture(Gt,ot),Gt===km){const ho=ut.width,Eo=ut.height;let Ir,Ar;if(ho/6===Eo)Ir=Eo,Ar=[0,0,1,0,2,0,3,0,4,0,5,0];else if(Eo/6===ho)Ir=ho,Ar=[0,0,0,1,0,2,0,3,0,4,0,5];else if(ho/3===Eo/2)Ir=ho/3,Ar=[0,0,1,0,2,0,0,1,1,1,2,1];else if(ho/2===Eo/3)Ir=ho/2,Ar=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(ut.src?ut.src:ut.nodeName);const ko=C0();ko?(ko.canvas.width=Ir,ko.canvas.height=Ir,hn=Ir,ln=Ir,Q1(at,Ot).forEach(function(Vo){const rs=Ar[Vo.ndx*2+0]*Ir,qn=Ar[Vo.ndx*2+1]*Ir;ko.drawImage(ut,rs,qn,Ir,Ir,0,0,Ir,Ir),at.texImage2D(Vo.face,en,En,br,Tr,ko.canvas)}),ko.canvas.width=1,ko.canvas.height=1):typeof createImageBitmap<"u"&&(hn=Ir,ln=Ir,Q1(at,Ot).forEach(function(Vo){const rs=Ar[Vo.ndx*2+0]*Ir,qn=Ar[Vo.ndx*2+1]*Ir;at.texImage2D(Vo.face,en,En,Ir,Ir,0,br,Tr,null),createImageBitmap(ut,rs,qn,Ir,Ir,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(bu){i1(at,Ot),at.bindTexture(Gt,ot),at.texImage2D(Vo.face,en,En,br,Tr,bu),g1(Ot)&&z1(at,ot,Ot,hn,ln,En)})}))}else if(Gt===jm||Gt===Um){const ho=Math.min(ut.width,ut.height),Eo=Math.max(ut.width,ut.height),Ir=Eo/ho;if(Ir%1!==0)throw"can not compute 3D dimensions of element";const Ar=ut.width===Eo?1:0,ko=ut.height===Eo?1:0;at.pixelStorei(Y1,1),at.pixelStorei(O0,ut.width),at.pixelStorei(A0,0),at.pixelStorei(L0,0),at.texImage3D(Gt,en,En,ho,ho,ho,0,br,Tr,null);for(let Vo=0;Vo<Ir;++Vo){const rs=Vo*ho*Ar,qn=Vo*ho*ko;at.pixelStorei(Z0,rs),at.pixelStorei(V0,qn),at.texSubImage3D(Gt,en,0,0,Vo,ho,ho,1,br,Tr,ut)}M0(at)}else at.texImage2D(Gt,en,En,br,Tr,ut);g1(Ot)&&z1(at,ot,Ot,hn,ln,En),P0(at,ot,Ot)}function v1(){}function S2(at){if(typeof document<"u"){const ot=document.createElement("a");return ot.href=at,ot.hostname===location.hostname&&ot.port===location.port&&ot.protocol===location.protocol}else{const ot=new URL(location.href).origin;return new URL(at,location.href).origin===ot}}function E2(at,ot){return ot===void 0&&!S2(at)?"anonymous":ot}function C2(at,ot,ut){ut=ut||v1;let Ot;if(ot=ot!==void 0?ot:Lm.crossOrigin,ot=E2(at,ot),typeof Image<"u"){Ot=new Image,ot!==void 0&&(Ot.crossOrigin=ot);const Gt=function(){Ot.removeEventListener("error",en),Ot.removeEventListener("load",hn),Ot=null},en=function(){const ln="couldn't load image: "+at;An(ln),ut(ln,Ot),Gt()},hn=function(){ut(null,Ot),Gt()};return Ot.addEventListener("error",en),Ot.addEventListener("load",hn),Ot.src=at,Ot}else if(typeof ImageBitmap<"u"){let Gt,en;const hn=function(){ut(Gt,en)},ln={};ot&&(ln.mode="cors"),fetch(at,ln).then(function(En){if(!En.ok)throw En;return En.blob()}).then(function(En){return createImageBitmap(En,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(En){en=En,setTimeout(hn)}).catch(function(En){Gt=En,setTimeout(hn)}),Ot=null}return Ot}function X0(at){return typeof ImageBitmap<"u"&&at instanceof ImageBitmap||typeof ImageData<"u"&&at instanceof ImageData||typeof HTMLElement<"u"&&at instanceof HTMLElement}function $1(at,ot,ut){return X0(at)?(setTimeout(function(){ut(null,at)}),at):C2(at,ot,ut)}function _1(at,ot,ut){ut=ut||Lm.textureOptions;const Ot=ut.target||Gm;if(at.bindTexture(Ot,ot),ut.color===!1)return;const Gt=b2(ut.color);if(Ot===km)for(let en=0;en<6;++en)at.texImage2D(j1+en,0,Gu,1,1,0,Gu,wu,Gt);else Ot===jm||Ot===Um?at.texImage3D(Ot,0,Gu,1,1,1,0,Gu,wu,Gt):at.texImage2D(Ot,0,Gu,1,1,0,Gu,wu,Gt)}function T2(at,ot,ut,Ot){return Ot=Ot||v1,ut=ut||Lm.textureOptions,_1(at,ot,ut),ut=Object.assign({},ut),$1(ut.src,ut.crossOrigin,function(Gt,en){Gt?Ot(Gt,ot,en):(F0(at,ot,en,ut),Ot(null,ot,en))})}function R2(at,ot,ut,Ot){Ot=Ot||v1;const Gt=ut.src;if(Gt.length!==6)throw"there must be 6 urls for a cubemap";const en=ut.level||0,hn=ut.internalFormat||ut.format||Gu,ln=m1(hn),En=ut.format||ln.format,rr=ut.type||wu,br=ut.target||Gm;if(br!==km)throw"target must be TEXTURE_CUBE_MAP";_1(at,ot,ut),ut=Object.assign({},ut);let Tr=6;const ho=[],Eo=J1(at,ut);let Ir;function Ar(ko){return function(Vo,rs){--Tr,Vo?ho.push(Vo):rs.width!==rs.height?ho.push("cubemap face img is not a square: "+rs.src):(i1(at,ut),at.bindTexture(br,ot),Tr===5?J1().forEach(function(qn){at.texImage2D(qn,en,hn,En,rr,rs)}):at.texImage2D(ko,en,hn,En,rr,rs),g1(ut)&&at.generateMipmap(br)),Tr===0&&Ot(ho.length?ho:void 0,ot,Ir)}}Ir=Gt.map(function(ko,Vo){return $1(ko,ut.crossOrigin,Ar(Eo[Vo]))})}function I2(at,ot,ut,Ot){Ot=Ot||v1;const Gt=ut.src,en=ut.internalFormat||ut.format||Gu,hn=m1(en),ln=ut.format||hn.format,En=ut.type||wu,rr=ut.target||Um;if(rr!==jm&&rr!==Um)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";_1(at,ot,ut),ut=Object.assign({},ut);let br=Gt.length;const Tr=[];let ho;const Eo=ut.level||0;let Ir=ut.width,Ar=ut.height;const ko=Gt.length;let Vo=!0;function rs(qn){return function(bu,cu){if(--br,bu)Tr.push(bu);else{if(i1(at,ut),at.bindTexture(rr,ot),Vo){Vo=!1,Ir=ut.width||cu.width,Ar=ut.height||cu.height,at.texImage3D(rr,Eo,en,Ir,Ar,ko,0,ln,En,null);for(let Us=0;Us<ko;++Us)at.texSubImage3D(rr,Eo,0,0,Us,Ir,Ar,1,ln,En,cu)}else{let Us=cu,qo;(cu.width!==Ir||cu.height!==Ar)&&(qo=C0(),Us=qo.canvas,qo.canvas.width=Ir,qo.canvas.height=Ar,qo.drawImage(cu,0,0,Ir,Ar)),at.texSubImage3D(rr,Eo,0,0,qn,Ir,Ar,1,ln,En,Us),qo&&Us===qo.canvas&&(qo.canvas.width=0,qo.canvas.height=0)}g1(ut)&&at.generateMipmap(rr)}br===0&&Ot(Tr.length?Tr:void 0,ot,ho)}}ho=Gt.map(function(qn,bu){return $1(qn,ut.crossOrigin,rs(bu))})}function x2(at,ot,ut,Ot){Ot=Ot||Lm.textureOptions;const Gt=Ot.target||Gm;at.bindTexture(Gt,ot);let en=Ot.width,hn=Ot.height,ln=Ot.depth;const En=Ot.level||0,rr=Ot.internalFormat||Ot.format||Gu,br=m1(rr),Tr=Ot.format||br.format,ho=Ot.type||v2(at,ut,br.type);if(f1(ut))ut instanceof Uint8ClampedArray&&(ut=new Uint8Array(ut.buffer));else{const ko=on(ho);ut=new ko(ut)}const Eo=p2(rr,ho),Ir=ut.byteLength/Eo;if(Ir%1)throw"length wrong size for format: "+E0(at,Tr);let Ar;if(Gt===jm||Gt===Um)if(!en&&!hn&&!ln){const ko=Math.cbrt(Ir);if(ko%1!==0)throw"can't guess cube size of array of numElements: "+Ir;en=ko,hn=ko,ln=ko}else en&&(!hn||!ln)?(Ar=x1(at,Gt,hn,ln,Ir/en),hn=Ar.width,ln=Ar.height):hn&&(!en||!ln)?(Ar=x1(at,Gt,en,ln,Ir/hn),en=Ar.width,ln=Ar.height):(Ar=x1(at,Gt,en,hn,Ir/ln),en=Ar.width,hn=Ar.height);else Ar=x1(at,Gt,en,hn,Ir),en=Ar.width,hn=Ar.height;if(M0(at),at.pixelStorei(Y1,Ot.unpackAlignment||1),i1(at,Ot),Gt===km){const ko=Eo/ut.BYTES_PER_ELEMENT,Vo=Ir/6*ko;Q1(at,Ot).forEach(rs=>{const qn=Vo*rs.ndx,bu=ut.subarray(qn,qn+Vo);at.texImage2D(rs.face,En,rr,en,hn,0,Tr,ho,bu)})}else Gt===jm||Gt===Um?at.texImage3D(Gt,En,rr,en,hn,ln,0,Tr,ho,ut):at.texImage2D(Gt,En,rr,en,hn,0,Tr,ho,ut);return{width:en,height:hn,depth:ln,type:ho}}function w2(at,ot,ut){const Ot=ut.target||Gm;at.bindTexture(Ot,ot);const Gt=ut.level||0,en=ut.internalFormat||ut.format||Gu,hn=m1(en),ln=ut.format||hn.format,En=ut.type||hn.type;if(i1(at,ut),Ot===km)for(let rr=0;rr<6;++rr)at.texImage2D(j1+rr,Gt,en,ut.width,ut.height,0,ln,En,null);else Ot===jm||Ot===Um?at.texImage3D(Ot,Gt,en,ut.width,ut.height,ut.depth,0,ln,En,null):at.texImage2D(Ot,Gt,en,ut.width,ut.height,0,ln,En,null)}function D0(at,ot,ut){ut=ut||v1,ot=ot||Lm.textureOptions;const Ot=at.createTexture(),Gt=ot.target||Gm;let en=ot.width||1,hn=ot.height||1;const ln=ot.internalFormat||Gu;at.bindTexture(Gt,Ot),Gt===km&&(at.texParameteri(Gt,b1,y1),at.texParameteri(Gt,S1,y1));let En=ot.src;if(En)if(typeof En=="function"&&(En=En(at,ot)),typeof En=="string")T2(at,Ot,ot,ut);else if(f1(En)||Array.isArray(En)&&(typeof En[0]=="number"||Array.isArray(En[0])||f1(En[0]))){const rr=x2(at,Ot,En,ot);en=rr.width,hn=rr.height}else Array.isArray(En)&&(typeof En[0]=="string"||X0(En[0]))?Gt===km?R2(at,Ot,ot,ut):I2(at,Ot,ot,ut):(F0(at,Ot,En,ot),en=En.width,hn=En.height);else w2(at,Ot,ot);return g1(ot)&&z1(at,Ot,ot,en,hn,ln),P0(at,Ot,ot),Ot}const q1=An;function j0(at){return typeof document<"u"&&document.getElementById?document.getElementById(at):null}const w1=33984,O1=34962,O2=34963,A2=35713,Z2=35714,V2=35632,L2=35633,G2=35981,U0=35718,k2=35721,N2=35971,W2=35382,M2=35396,P2=35398,F2=35392,X2=35395,A1=5126,H0=35664,Y0=35665,B0=35666,e0=5124,K0=35667,z0=35668,J0=35669,Q0=35670,$0=35671,_0=35672,q0=35673,ev=35674,tv=35675,nv=35676,D2=35678,j2=35680,U2=35679,H2=35682,Y2=35685,B2=35686,K2=35687,z2=35688,J2=35689,Q2=35690,$2=36289,_2=36292,q2=36293,t0=5125,rv=36294,iv=36295,ov=36296,_b=36298,e3=36299,t3=36300,n3=36303,r3=36306,i3=36307,o3=36308,s3=36311,Z1=3553,V1=34067,n0=32879,L1=35866,ws={};function sv(at,ot){return ws[ot].bindPoint}function a3(at,ot){return function(ut){at.uniform1f(ot,ut)}}function c3(at,ot){return function(ut){at.uniform1fv(ot,ut)}}function l3(at,ot){return function(ut){at.uniform2fv(ot,ut)}}function u3(at,ot){return function(ut){at.uniform3fv(ot,ut)}}function d3(at,ot){return function(ut){at.uniform4fv(ot,ut)}}function av(at,ot){return function(ut){at.uniform1i(ot,ut)}}function cv(at,ot){return function(ut){at.uniform1iv(ot,ut)}}function lv(at,ot){return function(ut){at.uniform2iv(ot,ut)}}function uv(at,ot){return function(ut){at.uniform3iv(ot,ut)}}function dv(at,ot){return function(ut){at.uniform4iv(ot,ut)}}function f3(at,ot){return function(ut){at.uniform1ui(ot,ut)}}function h3(at,ot){return function(ut){at.uniform1uiv(ot,ut)}}function p3(at,ot){return function(ut){at.uniform2uiv(ot,ut)}}function m3(at,ot){return function(ut){at.uniform3uiv(ot,ut)}}function g3(at,ot){return function(ut){at.uniform4uiv(ot,ut)}}function v3(at,ot){return function(ut){at.uniformMatrix2fv(ot,!1,ut)}}function y3(at,ot){return function(ut){at.uniformMatrix3fv(ot,!1,ut)}}function b3(at,ot){return function(ut){at.uniformMatrix4fv(ot,!1,ut)}}function S3(at,ot){return function(ut){at.uniformMatrix2x3fv(ot,!1,ut)}}function E3(at,ot){return function(ut){at.uniformMatrix3x2fv(ot,!1,ut)}}function C3(at,ot){return function(ut){at.uniformMatrix2x4fv(ot,!1,ut)}}function T3(at,ot){return function(ut){at.uniformMatrix4x2fv(ot,!1,ut)}}function R3(at,ot){return function(ut){at.uniformMatrix3x4fv(ot,!1,ut)}}function I3(at,ot){return function(ut){at.uniformMatrix4x3fv(ot,!1,ut)}}function Np(at,ot,ut,Ot){const Gt=sv(at,ot);return d1(at)?function(en){let hn,ln;Ur(at,en)?(hn=en,ln=null):(hn=en.texture,ln=en.sampler),at.uniform1i(Ot,ut),at.activeTexture(w1+ut),at.bindTexture(Gt,hn),at.bindSampler(ut,ln)}:function(en){at.uniform1i(Ot,ut),at.activeTexture(w1+ut),at.bindTexture(Gt,en)}}function Wp(at,ot,ut,Ot,Gt){const en=sv(at,ot),hn=new Int32Array(Gt);for(let ln=0;ln<Gt;++ln)hn[ln]=ut+ln;return d1(at)?function(ln){at.uniform1iv(Ot,hn),ln.forEach(function(En,rr){at.activeTexture(w1+hn[rr]);let br,Tr;Ur(at,En)?(br=En,Tr=null):(br=En.texture,Tr=En.sampler),at.bindSampler(ut,Tr),at.bindTexture(en,br)})}:function(ln){at.uniform1iv(Ot,hn),ln.forEach(function(En,rr){at.activeTexture(w1+hn[rr]),at.bindTexture(en,En)})}}ws[A1]={Type:Float32Array,size:4,setter:a3,arraySetter:c3},ws[H0]={Type:Float32Array,size:8,setter:l3,cols:2},ws[Y0]={Type:Float32Array,size:12,setter:u3,cols:3},ws[B0]={Type:Float32Array,size:16,setter:d3,cols:4},ws[e0]={Type:Int32Array,size:4,setter:av,arraySetter:cv},ws[K0]={Type:Int32Array,size:8,setter:lv,cols:2},ws[z0]={Type:Int32Array,size:12,setter:uv,cols:3},ws[J0]={Type:Int32Array,size:16,setter:dv,cols:4},ws[t0]={Type:Uint32Array,size:4,setter:f3,arraySetter:h3},ws[rv]={Type:Uint32Array,size:8,setter:p3,cols:2},ws[iv]={Type:Uint32Array,size:12,setter:m3,cols:3},ws[ov]={Type:Uint32Array,size:16,setter:g3,cols:4},ws[Q0]={Type:Uint32Array,size:4,setter:av,arraySetter:cv},ws[$0]={Type:Uint32Array,size:8,setter:lv,cols:2},ws[_0]={Type:Uint32Array,size:12,setter:uv,cols:3},ws[q0]={Type:Uint32Array,size:16,setter:dv,cols:4},ws[ev]={Type:Float32Array,size:32,setter:v3,rows:2,cols:2},ws[tv]={Type:Float32Array,size:48,setter:y3,rows:3,cols:3},ws[nv]={Type:Float32Array,size:64,setter:b3,rows:4,cols:4},ws[Y2]={Type:Float32Array,size:32,setter:S3,rows:2,cols:3},ws[B2]={Type:Float32Array,size:32,setter:C3,rows:2,cols:4},ws[K2]={Type:Float32Array,size:48,setter:E3,rows:3,cols:2},ws[z2]={Type:Float32Array,size:48,setter:R3,rows:3,cols:4},ws[J2]={Type:Float32Array,size:64,setter:T3,rows:4,cols:2},ws[Q2]={Type:Float32Array,size:64,setter:I3,rows:4,cols:3},ws[D2]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:Z1},ws[j2]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:V1},ws[U2]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:n0},ws[H2]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:Z1},ws[$2]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:L1},ws[_2]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:L1},ws[q2]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:V1},ws[_b]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:Z1},ws[e3]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:n0},ws[t3]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:V1},ws[n3]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:L1},ws[r3]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:Z1},ws[i3]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:n0},ws[o3]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:V1},ws[s3]={Type:null,size:0,setter:Np,arraySetter:Wp,bindPoint:L1};function G1(at,ot){return function(ut){if(ut.value)switch(at.disableVertexAttribArray(ot),ut.value.length){case 4:at.vertexAttrib4fv(ot,ut.value);break;case 3:at.vertexAttrib3fv(ot,ut.value);break;case 2:at.vertexAttrib2fv(ot,ut.value);break;case 1:at.vertexAttrib1fv(ot,ut.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else at.bindBuffer(O1,ut.buffer),at.enableVertexAttribArray(ot),at.vertexAttribPointer(ot,ut.numComponents||ut.size,ut.type||A1,ut.normalize||!1,ut.stride||0,ut.offset||0),at.vertexAttribDivisor&&at.vertexAttribDivisor(ot,ut.divisor||0)}}function Wm(at,ot){return function(ut){if(ut.value)if(at.disableVertexAttribArray(ot),ut.value.length===4)at.vertexAttrib4iv(ot,ut.value);else throw new Error("The length of an integer constant value must be 4!");else at.bindBuffer(O1,ut.buffer),at.enableVertexAttribArray(ot),at.vertexAttribIPointer(ot,ut.numComponents||ut.size,ut.type||e0,ut.stride||0,ut.offset||0),at.vertexAttribDivisor&&at.vertexAttribDivisor(ot,ut.divisor||0)}}function k1(at,ot){return function(ut){if(ut.value)if(at.disableVertexAttribArray(ot),ut.value.length===4)at.vertexAttrib4uiv(ot,ut.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else at.bindBuffer(O1,ut.buffer),at.enableVertexAttribArray(ot),at.vertexAttribIPointer(ot,ut.numComponents||ut.size,ut.type||t0,ut.stride||0,ut.offset||0),at.vertexAttribDivisor&&at.vertexAttribDivisor(ot,ut.divisor||0)}}function r0(at,ot,ut){const Ot=ut.size,Gt=ut.count;return function(en){at.bindBuffer(O1,en.buffer);const hn=en.size||en.numComponents||Ot,ln=hn/Gt,En=en.type||A1,rr=ws[En].size*hn,br=en.normalize||!1,Tr=en.offset||0,ho=rr/Gt;for(let Eo=0;Eo<Gt;++Eo)at.enableVertexAttribArray(ot+Eo),at.vertexAttribPointer(ot+Eo,ln,En,br,rr,Tr+ho*Eo),at.vertexAttribDivisor&&at.vertexAttribDivisor(ot+Eo,en.divisor||0)}}const tp={};tp[A1]={size:4,setter:G1},tp[H0]={size:8,setter:G1},tp[Y0]={size:12,setter:G1},tp[B0]={size:16,setter:G1},tp[e0]={size:4,setter:Wm},tp[K0]={size:8,setter:Wm},tp[z0]={size:12,setter:Wm},tp[J0]={size:16,setter:Wm},tp[t0]={size:4,setter:k1},tp[rv]={size:8,setter:k1},tp[iv]={size:12,setter:k1},tp[ov]={size:16,setter:k1},tp[Q0]={size:4,setter:Wm},tp[$0]={size:8,setter:Wm},tp[_0]={size:12,setter:Wm},tp[q0]={size:16,setter:Wm},tp[ev]={size:4,setter:r0,count:2},tp[tv]={size:9,setter:r0,count:3},tp[nv]={size:16,setter:r0,count:4};const x3=/ERROR:\s*\d+:(\d+)/gi;function w3(at,ot="",ut=0){const Ot=[...ot.matchAll(x3)],Gt=new Map(Ot.map((en,hn)=>{const ln=parseInt(en[1]),En=Ot[hn+1],rr=En?En.index:ot.length,br=ot.substring(en.index,rr);return[ln-1,br]}));return at.split(`
`).map((en,hn)=>{const ln=Gt.get(hn);return`${hn+1+ut}: ${en}${ln?`

^^^ ${ln}`:""}`}).join(`
`)}const fv=/^[ \t]*\n/;function hv(at){let ot=0;return fv.test(at)&&(ot=1,at=at.replace(fv,"")),{lineOffset:ot,shaderSource:at}}function O3(at,ot){return at.errorCallback(ot),at.callback&&setTimeout(()=>{at.callback(`${ot}
${at.errors.join(`
`)}`)}),null}function A3(at,ot,ut,Ot){if(Ot=Ot||q1,!at.getShaderParameter(ut,A2)){const Gt=at.getShaderInfoLog(ut),{lineOffset:en,shaderSource:hn}=hv(at.getShaderSource(ut)),ln=`${w3(hn,Gt,en)}
Error compiling ${E0(at,ot)}: ${Gt}`;return Ot(ln),ln}return""}function i0(at,ot,ut){let Ot,Gt,en;if(typeof ot=="function"&&(ut=ot,ot=void 0),typeof at=="function")ut=at,at=void 0;else if(at&&!Array.isArray(at)){const rr=at;ut=rr.errorCallback,at=rr.attribLocations,Ot=rr.transformFeedbackVaryings,Gt=rr.transformFeedbackMode,en=rr.callback}const hn=ut||q1,ln=[],En={errorCallback(rr,...br){ln.push(rr),hn(rr,...br)},transformFeedbackVaryings:Ot,transformFeedbackMode:Gt,callback:en,errors:ln};{let rr={};Array.isArray(at)?at.forEach(function(br,Tr){rr[br]=ot?ot[Tr]:Tr}):rr=at||{},En.attribLocations=rr}return En}const Z3=["VERTEX_SHADER","FRAGMENT_SHADER"];function V3(at,ot){if(ot.indexOf("frag")>=0)return V2;if(ot.indexOf("vert")>=0)return L2}function L3(at,ot,ut){const Ot=at.getAttachedShaders(ot);for(const Gt of Ot)ut.has(Gt)&&at.deleteShader(Gt);at.deleteProgram(ot)}const G3=(at=0)=>new o(ot=>setTimeout(ot,at));function k3(at,ot,ut){const Ot=at.createProgram(),{attribLocations:Gt,transformFeedbackVaryings:en,transformFeedbackMode:hn}=i0(ut);for(let ln=0;ln<ot.length;++ln){let En=ot[ln];if(typeof En=="string"){const rr=j0(En),br=rr?rr.text:En;let Tr=at[Z3[ln]];rr&&rr.type&&(Tr=V3(at,rr.type)||Tr),En=at.createShader(Tr),at.shaderSource(En,hv(br).shaderSource),at.compileShader(En),at.attachShader(Ot,En)}}Object.entries(Gt).forEach(([ln,En])=>at.bindAttribLocation(Ot,En,ln));{let ln=en;ln&&(ln.attribs&&(ln=ln.attribs),Array.isArray(ln)||(ln=Object.keys(ln)),at.transformFeedbackVaryings(Ot,ln,hn||G2))}return at.linkProgram(Ot),Ot}function N3(at,ot,ut,Ot,Gt){const en=i0(ut,Ot,Gt),hn=new Set(ot),ln=k3(at,ot,en);function En(rr,br){const Tr=M3(rr,br,en.errorCallback);return Tr&&L3(rr,br,hn),Tr}if(en.callback){W3(at,ln).then(()=>{const rr=En(at,ln);en.callback(rr,rr?void 0:ln)});return}return En(at,ln)?void 0:ln}async function W3(at,ot){const ut=at.getExtension("KHR_parallel_shader_compile"),Ot=ut?(en,hn)=>en.getProgramParameter(hn,ut.COMPLETION_STATUS_KHR):()=>!0;let Gt=0;do await G3(Gt),Gt=1e3/60;while(!Ot(at,ot))}function M3(at,ot,ut){if(ut=ut||q1,!at.getProgramParameter(ot,Z2)){const Ot=at.getProgramInfoLog(ot);ut(`Error in program linking: ${Ot}`);const Gt=at.getAttachedShaders(ot).map(en=>A3(at,at.getShaderParameter(en,at.SHADER_TYPE),en,ut));return`${Ot}
${Gt.filter(en=>en).join(`
`)}`}}function P3(at,ot,ut,Ot,Gt){return N3(at,ot,ut,Ot,Gt)}function pv(at){const ot=at.name;return ot.startsWith("gl_")||ot.startsWith("webgl_")}const F3=/(\.|\[|]|\w+)/g,X3=at=>at>="0"&&at<="9";function D3(at,ot,ut,Ot){const Gt=at.split(F3).filter(ln=>ln!=="");let en=0,hn="";for(;;){const ln=Gt[en++];hn+=ln;const En=X3(ln[0]),rr=En?parseInt(ln):ln;if(En&&(hn+=Gt[en++]),en===Gt.length){ut[rr]=ot;break}else{const br=Gt[en++],Tr=br==="[",ho=ut[rr]||(Tr?[]:{});ut[rr]=ho,ut=ho,Ot[hn]=Ot[hn]||function(Eo){return function(Ir){mv(Eo,Ir)}}(ho),hn+=br}}}function j3(at,ot){let ut=0;function Ot(ln,En,rr){const br=En.name.endsWith("[0]"),Tr=En.type,ho=ws[Tr];if(!ho)throw new Error(`unknown type: 0x${Tr.toString(16)}`);let Eo;if(ho.bindPoint){const Ir=ut;ut+=En.size,br?Eo=ho.arraySetter(at,Tr,Ir,rr,En.size):Eo=ho.setter(at,Tr,Ir,rr,En.size)}else ho.arraySetter&&br?Eo=ho.arraySetter(at,rr):Eo=ho.setter(at,rr);return Eo.location=rr,Eo}const Gt={},en={},hn=at.getProgramParameter(ot,U0);for(let ln=0;ln<hn;++ln){const En=at.getActiveUniform(ot,ln);if(pv(En))continue;let rr=En.name;rr.endsWith("[0]")&&(rr=rr.substr(0,rr.length-3));const br=at.getUniformLocation(ot,En.name);if(br){const Tr=Ot(ot,En,br);Gt[rr]=Tr,D3(rr,Tr,en,Gt)}}return Gt}function U3(at,ot){const ut={},Ot=at.getProgramParameter(ot,N2);for(let Gt=0;Gt<Ot;++Gt){const en=at.getTransformFeedbackVarying(ot,Gt);ut[en.name]={index:Gt,type:en.type,size:en.size}}return ut}function H3(at,ot){const ut=at.getProgramParameter(ot,U0),Ot=[],Gt=[];for(let ln=0;ln<ut;++ln){Gt.push(ln),Ot.push({});const En=at.getActiveUniform(ot,ln);Ot[ln].name=En.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(ln){const En=ln[0],rr=ln[1];at.getActiveUniforms(ot,Gt,at[En]).forEach(function(br,Tr){Ot[Tr][rr]=br})});const en={},hn=at.getProgramParameter(ot,W2);for(let ln=0;ln<hn;++ln){const En=at.getActiveUniformBlockName(ot,ln),rr={index:at.getUniformBlockIndex(ot,En),usedByVertexShader:at.getActiveUniformBlockParameter(ot,ln,M2),usedByFragmentShader:at.getActiveUniformBlockParameter(ot,ln,P2),size:at.getActiveUniformBlockParameter(ot,ln,F2),uniformIndices:at.getActiveUniformBlockParameter(ot,ln,X2)};rr.used=rr.usedByVertexShader||rr.usedByFragmentShader,en[En]=rr}return{blockSpecs:en,uniformData:Ot}}function mv(at,ot){for(const ut in ot){const Ot=at[ut];typeof Ot=="function"?Ot(ot[ut]):mv(at[ut],ot[ut])}}function gv(at,...ot){const ut=at.uniformSetters||at,Ot=ot.length;for(let Gt=0;Gt<Ot;++Gt){const en=ot[Gt];if(Array.isArray(en)){const hn=en.length;for(let ln=0;ln<hn;++ln)gv(ut,en[ln])}else for(const hn in en){const ln=ut[hn];ln&&ln(en[hn])}}}function Y3(at,ot){const ut={},Ot=at.getProgramParameter(ot,k2);for(let Gt=0;Gt<Ot;++Gt){const en=at.getActiveAttrib(ot,Gt);if(pv(en))continue;const hn=at.getAttribLocation(ot,en.name),ln=tp[en.type],En=ln.setter(at,hn,ln);En.location=hn,ut[en.name]=En}return ut}function B3(at,ot){for(const ut in ot){const Ot=at[ut];Ot&&Ot(ot[ut])}}function K3(at,ot,ut){ut.vertexArrayObject?at.bindVertexArray(ut.vertexArrayObject):(B3(ot.attribSetters||ot,ut.attribs),ut.indices&&at.bindBuffer(O2,ut.indices))}function vv(at,ot){const ut=j3(at,ot),Ot=Y3(at,ot),Gt={program:ot,uniformSetters:ut,attribSetters:Ot};return d1(at)&&(Gt.uniformBlockSpec=H3(at,ot),Gt.transformFeedbackInfo=U3(at,ot)),Gt}const z3=/\s|{|}|;/;function J3(at,ot,ut,Ot,Gt){const en=i0(ut,Ot,Gt),hn=[];if(ot=ot.map(function(rr){if(!z3.test(rr)){const br=j0(rr);if(br)rr=br.text;else{const Tr=`no element with id: ${rr}`;en.errorCallback(Tr),hn.push(Tr)}}return rr}),hn.length)return O3(en,"");const ln=en.callback;ln&&(en.callback=(rr,br)=>{ln(rr,rr?void 0:vv(at,br))});const En=P3(at,ot,en);return En?vv(at,En):null}const Q3=4,yv=5123;function $3(at,ot,ut,Ot,Gt,en){ut=ut===void 0?Q3:ut;const hn=ot.indices,ln=ot.elementType,En=Ot===void 0?ot.numElements:Ot;Gt=Gt===void 0?0:Gt,ln||hn?en!==void 0?at.drawElementsInstanced(ut,En,ln===void 0?yv:ot.elementType,Gt,en):at.drawElements(ut,En,ln===void 0?yv:ot.elementType,Gt):en!==void 0?at.drawArraysInstanced(ut,Gt,En,en):at.drawArrays(ut,Gt,En)}const bv=36160,N1=36161,_3=3553,q3=5121,e4=6402,t4=6408,n4=33190,r4=36012,i4=35056,o4=36013,s4=32854,a4=32855,c4=36194,Sv=33189,Ev=6401,Cv=36168,o0=34041,s0=36064,W1=36096,Tv=36128,a0=33306,c0=33071,l0=9729,l4=[{format:t4,type:q3,min:l0,wrap:c0},{format:o0}],om={};om[o0]=a0,om[Ev]=Tv,om[Cv]=Tv,om[e4]=W1,om[Sv]=W1,om[n4]=W1,om[r4]=W1,om[i4]=a0,om[o4]=a0;function u4(at,ot){return om[at]||om[ot]}const Mm={};Mm[s4]=!0,Mm[a4]=!0,Mm[c4]=!0,Mm[o0]=!0,Mm[Sv]=!0,Mm[Ev]=!0,Mm[Cv]=!0;function d4(at){return Mm[at]}const f4=32;function h4(at){return at>=s0&&at<s0+f4}function M1(at,ot,ut,Ot){const Gt=bv,en=at.createFramebuffer();at.bindFramebuffer(Gt,en),ut=ut||at.drawingBufferWidth,Ot=Ot||at.drawingBufferHeight,ot=ot||l4;const hn=[],ln={framebuffer:en,attachments:[],width:ut,height:Ot};return ot.forEach(function(En,rr){let br=En.attachment;const Tr=En.samples,ho=En.format;let Eo=En.attachmentPoint||u4(ho,En.internalFormat);if(Eo||(Eo=s0+rr),h4(Eo)&&hn.push(Eo),!br)if(Tr!==void 0||d4(ho))br=at.createRenderbuffer(),at.bindRenderbuffer(N1,br),Tr>1?at.renderbufferStorageMultisample(N1,Tr,ho,ut,Ot):at.renderbufferStorage(N1,ho,ut,Ot);else{const Ir=Object.assign({},En);Ir.width=ut,Ir.height=Ot,Ir.auto===void 0&&(Ir.auto=!1,Ir.min=Ir.min||Ir.minMag||l0,Ir.mag=Ir.mag||Ir.minMag||l0,Ir.wrapS=Ir.wrapS||Ir.wrap||c0,Ir.wrapT=Ir.wrapT||Ir.wrap||c0),br=D0(at,Ir)}if(xo(at,br))at.framebufferRenderbuffer(Gt,Eo,N1,br);else if(Ur(at,br))En.layer!==void 0?at.framebufferTextureLayer(Gt,Eo,br,En.level||0,En.layer):at.framebufferTexture2D(Gt,Eo,En.target||_3,br,En.level||0);else throw new Error("unknown attachment type");ln.attachments.push(br)}),at.drawBuffers&&at.drawBuffers(hn),ln}function p4(at,ot,ut){ut=ut||bv,ot?(at.bindFramebuffer(ut,ot.framebuffer),at.viewport(0,0,ot.width,ot.height)):(at.bindFramebuffer(ut,null),at.viewport(0,0,at.drawingBufferWidth,at.drawingBufferHeight))}function yu(at,ot){return()=>ot instanceof WebGLTexture?ot:D0(at,{src:ot,wrap:at.CLAMP_TO_EDGE})}const Rv=2;class Bm{constructor(ot){h(this,"id","_"),h(this,"context"),h(this,"output"),h(this,"fbi"),h(this,"options"),h(this,"programInfo"),h(this,"bufferInfo"),h(this,"profiler"),h(this,"lastRun");const{context:ut,width:Ot,height:Gt}=ot;this.context=ut,this.options=ot;const en=this.buildDefines();this.programInfo=J3(this.context,[en+this.getVertexShader(),en+this.getFragmentShader()]),this.bufferInfo=Jv(this.context,this.getBuffers()),this.fbi=M1(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],Ot,Gt),this.output=this.fbi.attachments[0]}resizeOutput(ot,ut){this.fbi=M1(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],ot,ut),this.options.width=ot,this.options.height=ut,this.output=this.fbi.attachments[0]}getDefines(){return{}}getBuffers(){return{position:{numComponents:2,data:[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1]},texture_coord:{numComponents:2,data:[0,0,0,1,1,0,1,1,0,1,1,0]}}}buildDefines(){let ot="";const ut=this.getDefines();for(let Ot in ut)ot+=`#define ${Ot} ${ut[Ot].toFixed(1)}
`;return ot}run(ot){var ut,Ot,Gt,en,hn,ln;(ut=this.profiler)==null||ut.pushContext(`[${this.id}] PROG : ${this.constructor.name}`),(Ot=this.profiler)==null||Ot.pushContext(`[${this.id}] UNIFORMS`);for(const br in ot)typeof ot[br]=="function"&&((Gt=this.profiler)==null||Gt.pushContext(`[${this.id}] UNI : ${br}`),ot[br]=ot[br](),(en=this.profiler)==null||en.popContext(`[${this.id}] UNI : ${br}`));(hn=this.profiler)==null||hn.popContext(`[${this.id}] UNIFORMS`);const En=Date.now();let rr=0;this.lastRun&&(rr=(En-this.lastRun)/1e3),this.lastRun=En,this.context.viewport(0,0,this.context.canvas.width,this.context.canvas.height),this.context.useProgram(this.programInfo.program),K3(this.context,this.programInfo,this.bufferInfo),gv(this.programInfo,{delta:rr,canvas:[this.context.canvas.width,this.context.canvas.height],...ot}),p4(this.context,this.options.disableFramebuffer?null:this.fbi),$3(this.context,this.bufferInfo),(ln=this.profiler)==null||ln.popContext(`[${this.id}] PROG : ${this.constructor.name}`)}setProfiler(ot){this.profiler=ot}}const m4=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;
uniform sampler2D mask;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,g4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class v4 extends Bm{getDefines(){var ot;return{RADIUS:(ot=this.options.radius)!=null?ot:1}}getFragmentShader(){return m4+this.createLoopFunction()}getVertexShader(){return g4}createLoopFunction(){var ot;let ut=(ot=this.options.radius)!=null?ot:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${ut}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;
            float maxLength = length(normalizedRadius);

            for(int y=-${ut}; y<${ut+1}; ++y) {
                for(int x=-${ut}; x<${ut+1}; ++x) {
                    float factor = (1.- texture2D(mask, _texture_coord + diff).a) * (maxLength - length(diff)) / maxLength;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}}const y4=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D background;
uniform sampler2D foreground;
uniform sampler2D threshold;

void main() {
  vec4 backgroundColor = texture2D(background, _texture_coord);
  vec4 foregroundColor = texture2D(foreground, _texture_coord);
  vec4 tresholdColor = texture2D(threshold, _texture_coord);
  gl_FragColor = foregroundColor * tresholdColor.a +
                 backgroundColor * (1. - tresholdColor.a);
}
`,b4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  _texture_coord.y = 1. - texture_coord.y;
}
`;class u0 extends Bm{getFragmentShader(){return y4}getVertexShader(){return b4}}class d0{constructor(){h(this,"steps",[]),h(this,"profiler")}addStep(ot){this.steps.push(ot)}async run(){for(const ot of this.steps)ot.program.run(ot.getUniforms())}resizeOutput(ot,ut){var Ot,Gt;(Ot=this.profiler)==null||Ot.pushContext(`PIP [${this.constructor.name}]`);for(const en of this.steps)en.preventResize||en.program.resizeOutput(ot,ut);(Gt=this.profiler)==null||Gt.popContext(`PIP [${this.constructor.name}]`)}setProfiler(ot){this.profiler=ot;for(const ut of this.steps)ut.program.setProfiler(ot)}setId(ot){for(const ut of this.steps)ut.program.id=ot}}class f0 extends d0{constructor(){super(...arguments),h(this,"preciseMaskEnabled",!1)}}const S4=10,E4=2,C4=8;class T4 extends f0{constructor(ot,ut){super(),h(this,"inputImage"),h(this,"inputMask"),h(this,"blur"),this.context=ot,this.radius=ut;const Ot={context:ot,height:ot.canvas.height,width:ot.canvas.width};this.blur=new v4({...Ot,radius:ut,...this.getBlurTextureSize(ot.canvas.width,ot.canvas.height)});const Gt=new u0({...Ot,disableFramebuffer:!0});this.addStep({program:this.blur,preventResize:!0,getUniforms:()=>({texture:yu(ot,this.inputImage),mask:yu(ot,this.inputMask)})}),this.addStep({program:Gt,getUniforms:()=>({background:yu(ot,this.blur.output),foreground:yu(ot,this.inputImage),threshold:yu(ot,this.inputMask)})})}getBlurTextureSize(ot,ut){const Ot=this.radius>S4?C4:E4;return{width:Math.max(Rv,ot/Ot),height:Math.max(Rv,ut/Ot)}}setData(ot,ut){this.inputImage=ot,this.inputMask=ut}resizeOutput(ot,ut){super.resizeOutput(ot,ut);const Ot=this.getBlurTextureSize(ot,ut);this.blur.resizeOutput(Ot.width,Ot.height)}}class Iv extends f0{constructor(ot){super(),h(this,"inputImage"),h(this,"inputBackgroundImage"),h(this,"inputMask"),h(this,"preciseMaskEnabled",!0),this.context=ot;const ut={context:ot,height:ot.canvas.height,width:ot.canvas.width},Ot=new u0({...ut,disableFramebuffer:!0});this.addStep({program:Ot,getUniforms:()=>({background:yu(ot,this.inputBackgroundImage),foreground:yu(ot,this.inputImage),threshold:yu(ot,this.inputMask)})})}setData(ot,ut){this.inputImage=ot,this.inputMask=ut}}class R4 extends Iv{constructor(){super(...arguments),h(this,"frameReader"),h(this,"preciseMaskEnabled",!0)}set inputVideo(ot){this.frameReader=ot.getReader(),this.readNextVideoFrame()}async run(){this.frameReader&&(await super.run(),this.readNextVideoFrame())}async readNextVideoFrame(){var ot;const ut=await((ot=this.frameReader)==null?void 0:ot.read());ut!=null&&ut.value&&(this.inputBackgroundImage=await createImageBitmap(ut.value),ut.value.close())}}const I4=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,x4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;var h0=(at=>(at[at.LINEAR=0]="LINEAR",at[at.GAUSSIAN=1]="GAUSSIAN",at))(h0||{});class xv extends Bm{getDefines(){var ot;return{RADIUS:(ot=this.options.radius)!=null?ot:1}}getFragmentShader(){return I4+this.createLoopFunction()}getVertexShader(){return x4}createLoopFunction(){var ot;let ut=(ot=this.options.radius)!=null?ot:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${ut}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;

            for(int y=-${ut}; y<${ut+1}; ++y) {
                for(int x=-${ut}; x<${ut+1}; ++x) {
                    float factor = 1.;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}getFactor(ot,ut){switch(this.options.type){case 1:return this.getLinearFactor(ot,ut);case 0:default:return this.getLinearFactor(ot,ut)}}getLinearFactor(ot,ut){return 1}getGaussianFactor(ot,ut){var Ot;const Gt=Math.PI*2,en=Math.max((Ot=this.options.radius)!=null?Ot:1,1),hn=1/(Gt*en**2),ln=-(ot**2+ut**2),En=hn*ln;return hn*Math.E**En}}class w4 extends f0{constructor(ot,ut){super(),h(this,"inputImage"),h(this,"inputMask"),this.context=ot;const Ot={context:ot,height:ot.canvas.height,width:ot.canvas.width},Gt=new xv({...Ot,radius:ut,type:h0.GAUSSIAN}),en=new u0({...Ot,disableFramebuffer:!0});this.addStep({program:Gt,getUniforms:()=>({texture:yu(ot,this.inputImage)})}),this.addStep({program:en,getUniforms:()=>({background:yu(ot,this.inputImage),foreground:yu(ot,Gt.output),threshold:yu(ot,this.inputMask)})})}setData(ot,ut){this.inputImage=ot,this.inputMask=ut}}class p0 extends Bm{constructor(ot){super(ot),h(this,"fbi2"),this.fbi2=M1(ot.context,[{format:ot.context.RGBA,type:ot.context.UNSIGNED_BYTE,min:ot.context.LINEAR,mag:ot.context.LINEAR,wrap:ot.context.CLAMP_TO_EDGE}],ot.width,ot.height)}run(ot){const ut=this.fbi;this.fbi=this.fbi2,this.fbi2=ut,this.output=this.fbi.attachments[0],super.run({...ot,previous_rendering:this.fbi2.attachments[0]})}resizeOutput(ot,ut){super.resizeOutput(ot,ut),this.fbi2=M1(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],ot,ut)}}const O4=`precision mediump float;

varying vec2 _texture_coord;

// uniform float treshold;
uniform sampler2D image_now;
uniform sampler2D image_before;
uniform sampler2D mask_now;
uniform sampler2D mask_before;
uniform sampler2D previous_rendering;
uniform vec2 canvas;

uniform float delta;

float current_factor = 0.69;
float previous_factor = 0.74;
float threshold_activation = 0.54;

float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float getThreshold() {
  vec4 color = vec4(0.);
  for (float y = -6.; y < 7.; y += 1.) {
    for (float x = -6.; x < 7.; x += 1.) {
      vec4 image_now_color =
          texture2D(image_now, _texture_coord + vec2(x, y) / canvas);
      vec4 image_before_color =
          texture2D(image_before, _texture_coord + vec2(x, y) / canvas);
      color += abs(image_before_color - image_now_color);
    }
  }
  return (color.x + color.y + color.z) / (3. * 9.);
}

void main() {
  float treshold_input = .4;
  float treshold_previous_rendering = .98;

  vec4 mask_now_color = texture2D(mask_now, _texture_coord);
  vec4 mask_before_color = texture2D(mask_before, _texture_coord);
  vec4 previous_rendering_color = texture2D(previous_rendering, _texture_coord);

  vec3 mask_diff = abs(mask_before_color.xyz - mask_now_color.xyz);
  float flickering = mask_diff.x;
  float threshold = getThreshold();
  if (threshold < threshold_activation) {
    gl_FragColor = vec4(flickering, 0., 0., 1.) * current_factor +
                   previous_rendering_color * previous_factor;
    gl_FragColor *= (1. - threshold);
  }
}
`,A4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class Z4 extends p0{getFragmentShader(){return O4}getVertexShader(){return A4}}const V4=`#version 300 es
// https://github.com/Volcomix/virtual-background/blob/main/src/pipelines/webgl2/jointBilateralFilterStage.ts

precision highp float;
uniform sampler2D input_frame;
uniform sampler2D segmentation_mask;
uniform sampler2D threshold;
uniform vec2 texel_size;
uniform float step;
uniform float radius;
uniform float offset;
uniform float sigma_texel;
uniform float sigma_color;

in vec2 _texture_coord;
out vec4 outColor;

float gaussian(float x, float sigma) {
  float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);
  return exp((x * x) * coeff);
}

void main() {
  vec2 centerCoord = _texture_coord;
  vec3 centerColor = texture(input_frame, centerCoord).rgb;
  float newVal = 0.0;
  float spaceWeight = 0.0;
  float colorWeight = 0.0;
  float totalWeight = 0.0;
  // Subsample kernel space.
  for (float i = -radius + offset; i <= radius; i += step) {
    for (float j = -radius + offset; j <= radius; j += step) {
      vec2 shift = vec2(j, i) * texel_size;
      vec2 coord = vec2(centerCoord + shift);
      vec3 frameColor = texture(input_frame, coord).rgb;
      float threshold = texture(threshold, coord).a;
      float outVal = texture(segmentation_mask, coord).a;

      spaceWeight = gaussian(distance(centerCoord, coord), sigma_texel);
      colorWeight = gaussian(distance(centerColor, frameColor), sigma_color);
      totalWeight += spaceWeight * colorWeight;
      newVal += spaceWeight * colorWeight * outVal * threshold;
    }
  }
  newVal /= totalWeight;
  outColor = vec4(vec3(0.), newVal);
}`,L4=`#version 300 es
in vec2 position;
in vec2 texture_coord;
out vec2 _texture_coord;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
  _texture_coord = texture_coord;
}`;class G4 extends Bm{getFragmentShader(){return V4}getVertexShader(){return L4}}const k4=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  int count = 0;
  for (float y = -1.; y < 2.; y += 1.) {
    for (float x = -1.; x < 2.; x += 1.) {
      vec2 coord = _texture_coord + vec2(y, x) / canvas;
      vec4 color = texture2D(texture, coord);
      if (color.r > .1) {
        count++;
      }
    }
  }
  if (count > 5) {
    gl_FragColor = texture2D(texture, _texture_coord);
  }
}
`,N4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class W4 extends Bm{getFragmentShader(){return k4}getVertexShader(){return N4}}const M4=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  vec4 color = texture2D(texture, _texture_coord);
  for (float y = -2.; y < 3.; y += 1.) {
    for (float x = -2.; x < 3.; x += 1.) {
      vec2 coord = _texture_coord;
      coord += vec2(y, x) / canvas;
      color += texture2D(texture, coord) * (1. / 4.);
    }
  }

  gl_FragColor = color;
}
`,P4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class F4 extends p0{getFragmentShader(){return M4}getVertexShader(){return P4}}const X4=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D threshold;
uniform sampler2D inputs;

void main() {
  vec4 inputs_color = texture2D(inputs, _texture_coord);
  vec4 threshold_color = texture2D(threshold, _texture_coord);
  if (threshold_color.r < .1 && inputs_color.r > .5) {
    gl_FragColor = inputs_color;
  }
}
`,D4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class j4 extends p0{getFragmentShader(){return X4}getVertexShader(){return D4}}class U4 extends d0{constructor(ot,ut,Ot){super(),h(this,"inputImage"),h(this,"inputMask"),h(this,"previousInputImage"),h(this,"previousInputMask"),h(this,"output"),h(this,"options",{currentThresholdMinimum:0,currentThresholdMaximum:1,previousThresholdMinimum:0,previousThresholdMaximum:1,thresholdMinimum:0,thresholdMaximum:1,thresholdFactor:1}),this.context=ot;const Gt={context:ot,height:Ot,width:ut},en=new Z4(Gt),hn=new xv({...Gt,radius:1,type:h0.GAUSSIAN}),ln=new j4(Gt),En=new F4(Gt),rr=new W4(Gt),br=new G4({...Gt}),Tr=.66,ho=640,Eo=480,Ir=256,Ar=144;let ko=1;ko*=Math.max(ho/Ir,Eo/Ar);const Vo=Math.max(1,Math.sqrt(ko)*Tr),rs=1/ho,qn=1/Eo;this.addStep({program:en,getUniforms:()=>({image_now:yu(ot,this.inputImage),image_before:yu(ot,this.previousInputImage),mask_now:yu(ot,this.inputMask),mask_before:yu(ot,this.previousInputMask),current_threshold_minimum:this.options.currentThresholdMinimum,current_threshold_maximum:this.options.currentThresholdMaximum,previous_threshold_minimum:this.options.previousThresholdMinimum,previous_threshold_maximum:this.options.previousThresholdMaximum,threshold_minimum:this.options.thresholdMinimum,threshold_maximum:this.options.thresholdMaximum,threshold_factor:this.options.thresholdFactor})}),this.addStep({program:ln,getUniforms:()=>({inputs:yu(ot,this.inputMask),threshold:yu(ot,en.output)})}),this.addStep({program:rr,getUniforms:()=>({texture:yu(ot,ln.output)})}),this.addStep({program:En,getUniforms:()=>({texture:yu(ot,rr.output)})}),this.addStep({program:hn,getUniforms:()=>({texture:yu(ot,En.output)})}),this.addStep({program:br,getUniforms:()=>({input_frame:yu(ot,this.inputImage),segmentation_mask:yu(ot,this.inputMask),threshold:yu(ot,hn.output),texel_size:[rs,qn],step:Vo,radius:ko,offset:Vo>1?Vo*.5:0,sigma_texel:Math.max(rs,qn)*ko,sigma_color:.1})}),this.output=br.output}setData(ot,ut){this.previousInputImage=this.inputImage?this.inputImage:ot,this.previousInputMask=this.inputMask?this.inputMask:ut,this.inputImage=ot,this.inputMask=ut}setOptions(ot){this.options=ot}}const H4=`precision mediump float;

varying vec2 _texture_coord;
uniform sampler2D texture;

void main() { gl_FragColor = texture2D(texture, _texture_coord); }
`,Y4=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;
uniform bool invert_y;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  if (invert_y) {
    _texture_coord.y = 1. - texture_coord.y;
  }
}
`;class B4 extends Bm{getFragmentShader(){return H4}getVertexShader(){return Y4}}class K4 extends d0{constructor(ot,ut,Ot){super(),h(this,"inputImage"),this.context=ot;const Gt={context:ot,height:Ot,width:ut};this.addStep({program:new B4({...Gt,disableFramebuffer:!0}),getUniforms:()=>({texture:yu(ot,this.inputImage),invert_y:!0})})}setData(ot){this.inputImage=ot}}class z4{constructor(ot){h(this,"resize"),h(this,"canvas"),h(this,"context"),this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("webgl2"),this.canvas.width=ot.width,this.canvas.height=ot.height,this.resize=new K4(this.context,ot.width,ot.height)}resizeForeground(ot,ut){this.canvas.width=ot,this.canvas.height=ut,this.resize.resizeOutput(ot,ut)}async process(ot){var ut,Ot;return this.canvas.width=this.canvas.width,(ut=this.resize)==null||ut.setData(ot),(Ot=this.resize)==null||Ot.run(),this.canvas}}class J4{constructor(ot,ut){h(this,"improveMaskSegmentation"),h(this,"backgroundResizer"),h(this,"backgroundImage"),h(this,"backgroundVideo"),h(this,"profiler"),h(this,"activePipeline"),h(this,"canvas"),h(this,"options"),h(this,"context"),h(this,"virtualBGImage"),this.id=ot,this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("webgl2"),this.canvas.width=ut.foregroundWidth,this.canvas.height=ut.foregroundHeight,this.improveMaskSegmentation=new U4(this.context,ut.maskWidth,ut.maskHeight),this.backgroundImage=new Iv(this.context),this.backgroundVideo=new R4(this.context),this.backgroundResizer=new z4({width:ut.foregroundWidth,height:ut.foregroundHeight})}setBackgroundOptions(ot){switch(ot.transformerType){case"BackgroundBlur":this.activePipeline=new T4(this.context,this.getBlurSize(ot.radius));break;case"SilhouetteBlur":this.activePipeline=new w4(this.context,this.getBlurSize(ot.radius));break;case"VideoBackground":this.activePipeline=this.backgroundVideo;break;case"VirtualBackground":this.activePipeline=this.backgroundImage;break}this.options=ot}setFlickeringOptions(ot){var ut;(ut=this.improveMaskSegmentation)==null||ut.setOptions(ot)}setVideoBGReadable(ot){this.backgroundVideo.inputVideo=ot}async setVirtualBGImage(ot){this.virtualBGImage=ot,this.backgroundImage.inputBackgroundImage=await this.backgroundResizer.process(ot)}async process(ot,ut){var Ot,Gt,en,hn,ln,En,rr;if(this.activePipeline&&ot.width&&(ut!=null&&ut.width)){const br=`[${this.id}] background-filter`;(Ot=this.profiler)==null||Ot.pushContext(br);let Tr=ut;((Gt=this.options)!=null&&Gt.selfieSegmentationType&&((en=this.options)==null?void 0:en.selfieSegmentationType)==="PRECISE"||!((hn=this.options)!=null&&hn.selfieSegmentationType)&&this.activePipeline.preciseMaskEnabled)&&(this.improveMaskSegmentation.setId(this.id),this.improveMaskSegmentation.setProfiler(this.profiler),this.improveMaskSegmentation.setData(ot,ut),this.improveMaskSegmentation.run(),Tr=this.improveMaskSegmentation.output),this.activePipeline.setId(this.id),this.activePipeline.setProfiler(this.profiler),(ln=this.activePipeline)==null||ln.setData(ot,Tr),(En=this.activePipeline)==null||En.run(),(rr=this.profiler)==null||rr.popContext(br)}}async resizeForeground(ot,ut){var Ot;this.canvas.width=ot,this.canvas.height=ut,this.backgroundImage.resizeOutput(ot,ut),this.backgroundVideo.resizeOutput(ot,ut),this.backgroundResizer.resizeForeground(ot,ut),(Ot=this.activePipeline)==null||Ot.resizeOutput(ot,ut),this.virtualBGImage&&(this.backgroundImage.inputBackgroundImage=await this.backgroundResizer.process(this.virtualBGImage))}async profile(ot){const ut=new _m(this.context);return this.profiler=ut,ut.start(),await dm(ot),this.profiler=void 0,ut.stop(),ut.getResolvedQueries()}getBlurSize(ot=yn.Low){switch(ot){case yn.Low:return 5;case yn.High:return 12}return ot}}class wv{constructor(){h(this,"selfieSegmentation",new _c),h(this,"backgroundFilter"),h(this,"previousDimensions",{width:0,height:0})}async init(ot,ut){await this.selfieSegmentation.init(ut.wasmAssetUriPath,ut.tfliteAssetUriPath);const{width:Ot,height:Gt}=this.selfieSegmentation.getOutputDimensions();this.backgroundFilter=new J4(ot,{foregroundWidth:1,foregroundHeight:1,maskWidth:Ot,maskHeight:Gt})}async transform(ot,ut){var Ot,Gt,en,hn;const ln=(Ot=ot.timestamp)!=null?Ot:0,En=await createImageBitmap(ot),rr=await this.selfieSegmentation.process(En);rr?((En.width!==this.previousDimensions.width||En.height!==this.previousDimensions.height)&&(this.previousDimensions.width=En.width,this.previousDimensions.height=En.height,await((Gt=this.backgroundFilter)==null?void 0:Gt.resizeForeground(En.width,En.height))),await((en=this.backgroundFilter)==null?void 0:en.process(En,rr)),ot.close(),ut.enqueue(new VideoFrame((hn=this.backgroundFilter)==null?void 0:hn.canvas,{timestamp:ln,alpha:"discard"}))):ut.enqueue(ot)}async setBackgroundOptions(ot){var ut;await((ut=this.backgroundFilter)==null?void 0:ut.setBackgroundOptions(ot))}async setVideoBGReadable(ot){var ut;await((ut=this.backgroundFilter)==null?void 0:ut.setVideoBGReadable(ot))}async setVirtualBGImage(ot){var ut;await((ut=this.backgroundFilter)==null?void 0:ut.setVirtualBGImage(ot))}setFlickeringOptions(ot){var ut;(ut=this.backgroundFilter)==null||ut.setFlickeringOptions(ot)}async profile(ot){var ut,Ot;return(Ot=(ut=this.backgroundFilter)==null?void 0:ut.profile(ot))!=null?Ot:[]}}const Ov=class{constructor(){h(this,"backgroundTransformer",new wv),h(this,"mediaProcessor",new Lu),h(this,"rate",30),h(this,"resolveOnMediaProcessor"),h(this,"eventsQueue",[])}async init(at,ot){await this.backgroundTransformer.init(at,ot),await this.mediaProcessor.setTransformers([this.backgroundTransformer]),this.mediaProcessor.setTrackExpectedRate(this.rate),this.mediaProcessor.onAny((ut,Ot)=>{this.resolveOnMediaProcessor?(this.resolveOnMediaProcessor({name:ut,data:Ot}),this.resolveOnMediaProcessor=void 0):this.eventsQueue.push({name:ut,data:Ot})})}async onMediaProcessorEvent(){return await new o(at=>{this.eventsQueue.length>0?at(this.eventsQueue.shift()):this.resolveOnMediaProcessor=at})}async setTrackExpectedRate(at){this.rate=at,this.mediaProcessor.setTrackExpectedRate(at)}async transform(at,ot){this.mediaProcessor.transform(at,ot)}async setBackgroundOptions(at){var ot;await((ot=this.backgroundTransformer)==null?void 0:ot.setBackgroundOptions(at))}setVideoBGReadable(at){this.backgroundTransformer.setVideoBGReadable(at)}async setVirtualBGImage(at){await this.backgroundTransformer.setVirtualBGImage(at)}async terminate(){await this.mediaProcessor.destroy()}setFlickeringOptions(at){this.backgroundTransformer.setFlickeringOptions(at)}setVonageMetadata(at){Ro(at)}async profile(at){return JSON.stringify(await this.backgroundTransformer.profile(at))}};let Q4=Ov;um("ProcessorWorker",Ov);const Av="dmFyIGVkPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgdGQ9KEssdGUscmUpPT50ZSBpbiBLP2VkKEssdGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnJlfSk6S1t0ZV09cmU7dmFyIHA9KEssdGUscmUpPT4odGQoSyx0eXBlb2YgdGUhPSJzeW1ib2wiP3RlKyIiOnRlLHJlKSxyZSk7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBLPShyPT4ocltyLklOSVQ9MF09IklOSVQiLHJbci5GT1JXQVJEPTFdPSJGT1JXQVJEIixyW3IuVEVSTUlOQVRFPTJdPSJURVJNSU5BVEUiLHIpKShLfHx7fSk7ZnVuY3Rpb24gdGUocil7cmV0dXJuW0ltYWdlQml0bWFwLFJlYWRhYmxlU3RyZWFtLFdyaXRhYmxlU3RyZWFtXS5zb21lKGU9PnIgaW5zdGFuY2VvZiBlKX1mdW5jdGlvbiByZShyLGUpe2NvbnN0e2lkOnR9PXIsbj1BcnJheS5pc0FycmF5KGUpP2U6W2VdO3Bvc3RNZXNzYWdlKHtpZDp0LHJlc3VsdDplfSxuLmZpbHRlcihpPT50ZShpKSkpfWFzeW5jIGZ1bmN0aW9uIHFpKHIsZSl7Y29uc3R7ZnVuY3Rpb25OYW1lOnQsYXJnczpufT1yO2lmKCFlLmluc3RhbmNlKXRocm93Imluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7aWYoIXQpdGhyb3cibWlzc2luZyBmdW5jdGlvbiBuYW1lIHRvIGNhbGwiO2lmKCFlLmluc3RhbmNlW3RdKXRocm93YHVuZGVmaW5lZCBmdW5jdGlvbiBbJHt0fV0gaW4gY2xhc3MgJHtlLmluc3RhbmNlLmNvbnN0cnVjdG9yLndvcmtlcklkfWA7cmUocixhd2FpdCBlLmluc3RhbmNlW3RdKC4uLm4hPW51bGw/bjpbXSkpfWZ1bmN0aW9uICRyKCl7cmV0dXJuIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZTwidSImJnNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZX1jb25zdCBHcj17fTtmdW5jdGlvbiBYaShyLGUpe2Uud29ya2VySWQ9ciwkcigpJiYoR3JbZS53b3JrZXJJZF09ZSl9ZnVuY3Rpb24gWWkocixlKXtpZighci5hcmdzKXRocm93Ik1pc3NpbmcgY2xhc3NOYW1lIHdoaWxlIGluaXRpYWxpemluZyB3b3JrZXIiO2NvbnN0W3RdPXIuYXJncyxuPUdyW3RdO2lmKG4pZS5pbnN0YW5jZT1uZXcgbihyLmFyZ3Muc2xpY2UoMSkpO2Vsc2UgdGhyb3dgdW5rbm93biB3b3JrZXIgY2xhc3MgJHt0fWA7cmUocix0eXBlb2YgZS5pbnN0YW5jZSE9PXZvaWQgMCl9YXN5bmMgZnVuY3Rpb24gUWkocixlKXtjb25zdHthcmdzOnR9PXI7aWYoIWUuaW5zdGFuY2UpdGhyb3ciaW5zdGFuY2Ugbm90IGluaXRpYWxpemVkIjtsZXQgbjtlLmluc3RhbmNlLnRlcm1pbmF0ZSYmKG49YXdhaXQgZS5pbnN0YW5jZS50ZXJtaW5hdGUoLi4udCE9bnVsbD90OltdKSkscmUocixuKX1mdW5jdGlvbiBLaSgpe2NvbnN0IHI9e307b25tZXNzYWdlPWFzeW5jIGU9Pntjb25zdCB0PWUuZGF0YTtzd2l0Y2godC50eXBlKXtjYXNlIEsuSU5JVDpZaSh0LHIpO2JyZWFrO2Nhc2UgSy5GT1JXQVJEOnFpKHQscik7YnJlYWs7Y2FzZSBLLlRFUk1JTkFURTpRaSh0LHIpO2JyZWFrfX19JHIoKSYmS2koKTtjbGFzcyBuZXt9bmUudXBkYXRlcz17dHJhbnNmb3JtZXJfbmV3OiJOZXcgdHJhbnNmb3JtZXIiLHRyYW5zZm9ybWVyX251bGw6Ik51bGwgdHJhbnNmb3JtZXIifSxuZS5lcnJvcnM9e3RyYW5zZm9ybWVyX25vbmU6Ik5vIHRyYW5zZm9ybWVycyBwcm92aWRlZCIsdHJhbnNmb3JtZXJfc3RhcnQ6IkNhbm5vdCBzdGFydCB0cmFuc2Zvcm1lciIsdHJhbnNmb3JtZXJfdHJhbnNmb3JtOiJDYW5ub3QgdHJhbnNmb3JtIGZyYW1lIix0cmFuc2Zvcm1lcl9mbHVzaDoiQ2Fubm90IGZsdXNoIHRyYW5zZm9ybWVyIixyZWFkYWJsZV9udWxsOiJSZWFkYWJsZSBpcyBudWxsIix3cml0YWJsZV9udWxsOiJXcml0YWJsZSBpcyBudWxsIn07dmFyIE90PXtleHBvcnRzOnt9fSx6cj1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgaT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksbz0wO288aS5sZW5ndGg7bysrKWlbb109YXJndW1lbnRzW29dO3JldHVybiBlLmFwcGx5KHQsaSl9fSxKaT16cixvZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIE50KHIpe3JldHVybiBBcnJheS5pc0FycmF5KHIpfWZ1bmN0aW9uIFV0KHIpe3JldHVybiB0eXBlb2Ygcj4idSJ9ZnVuY3Rpb24gWmkocil7cmV0dXJuIHIhPT1udWxsJiYhVXQocikmJnIuY29uc3RydWN0b3IhPT1udWxsJiYhVXQoci5jb25zdHJ1Y3RvcikmJnR5cGVvZiByLmNvbnN0cnVjdG9yLmlzQnVmZmVyPT0iZnVuY3Rpb24iJiZyLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHIpfWZ1bmN0aW9uIEhyKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgQXJyYXlCdWZmZXJdIn1mdW5jdGlvbiBlbyhyKXtyZXR1cm4gb2UuY2FsbChyKT09PSJbb2JqZWN0IEZvcm1EYXRhXSJ9ZnVuY3Rpb24gdG8ocil7dmFyIGU7cmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlcjwidSImJkFycmF5QnVmZmVyLmlzVmlldz9lPUFycmF5QnVmZmVyLmlzVmlldyhyKTplPXImJnIuYnVmZmVyJiZIcihyLmJ1ZmZlciksZX1mdW5jdGlvbiBybyhyKXtyZXR1cm4gdHlwZW9mIHI9PSJzdHJpbmcifWZ1bmN0aW9uIG5vKHIpe3JldHVybiB0eXBlb2Ygcj09Im51bWJlciJ9ZnVuY3Rpb24gVnIocil7cmV0dXJuIHIhPT1udWxsJiZ0eXBlb2Ygcj09Im9iamVjdCJ9ZnVuY3Rpb24gamUocil7aWYob2UuY2FsbChyKSE9PSJbb2JqZWN0IE9iamVjdF0iKXJldHVybiExO3ZhciBlPU9iamVjdC5nZXRQcm90b3R5cGVPZihyKTtyZXR1cm4gZT09PW51bGx8fGU9PT1PYmplY3QucHJvdG90eXBlfWZ1bmN0aW9uIGlvKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRGF0ZV0ifWZ1bmN0aW9uIG9vKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRmlsZV0ifWZ1bmN0aW9uIHNvKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgQmxvYl0ifWZ1bmN0aW9uIFdyKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRnVuY3Rpb25dIn1mdW5jdGlvbiBhbyhyKXtyZXR1cm4gVnIocikmJldyKHIucGlwZSl9ZnVuY3Rpb24gdW8ocil7cmV0dXJuIG9lLmNhbGwocik9PT0iW29iamVjdCBVUkxTZWFyY2hQYXJhbXNdIn1mdW5jdGlvbiBjbyhyKXtyZXR1cm4gci50cmltP3IudHJpbSgpOnIucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfWZ1bmN0aW9uIGZvKCl7cmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3I8InUiJiYobmF2aWdhdG9yLnByb2R1Y3Q9PT0iUmVhY3ROYXRpdmUifHxuYXZpZ2F0b3IucHJvZHVjdD09PSJOYXRpdmVTY3JpcHQifHxuYXZpZ2F0b3IucHJvZHVjdD09PSJOUyIpPyExOnR5cGVvZiB3aW5kb3c8InUiJiZ0eXBlb2YgZG9jdW1lbnQ8InUifWZ1bmN0aW9uIEJ0KHIsZSl7aWYoIShyPT09bnVsbHx8dHlwZW9mIHI+InUiKSlpZih0eXBlb2YgciE9Im9iamVjdCImJihyPVtyXSksTnQocikpZm9yKHZhciB0PTAsbj1yLmxlbmd0aDt0PG47dCsrKWUuY2FsbChudWxsLHJbdF0sdCxyKTtlbHNlIGZvcih2YXIgaSBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLGkpJiZlLmNhbGwobnVsbCxyW2ldLGkscil9ZnVuY3Rpb24ga3QoKXt2YXIgcj17fTtmdW5jdGlvbiBlKGksbyl7amUocltvXSkmJmplKGkpP3Jbb109a3QocltvXSxpKTpqZShpKT9yW29dPWt0KHt9LGkpOk50KGkpP3Jbb109aS5zbGljZSgpOnJbb109aX1mb3IodmFyIHQ9MCxuPWFyZ3VtZW50cy5sZW5ndGg7dDxuO3QrKylCdChhcmd1bWVudHNbdF0sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gbG8ocixlLHQpe3JldHVybiBCdChlLGZ1bmN0aW9uKGksbyl7dCYmdHlwZW9mIGk9PSJmdW5jdGlvbiI/cltvXT1KaShpLHQpOnJbb109aX0pLHJ9ZnVuY3Rpb24gbW8ocil7cmV0dXJuIHIuY2hhckNvZGVBdCgwKT09PTY1Mjc5JiYocj1yLnNsaWNlKDEpKSxyfXZhciBHPXtpc0FycmF5Ok50LGlzQXJyYXlCdWZmZXI6SHIsaXNCdWZmZXI6WmksaXNGb3JtRGF0YTplbyxpc0FycmF5QnVmZmVyVmlldzp0byxpc1N0cmluZzpybyxpc051bWJlcjpubyxpc09iamVjdDpWcixpc1BsYWluT2JqZWN0OmplLGlzVW5kZWZpbmVkOlV0LGlzRGF0ZTppbyxpc0ZpbGU6b28saXNCbG9iOnNvLGlzRnVuY3Rpb246V3IsaXNTdHJlYW06YW8saXNVUkxTZWFyY2hQYXJhbXM6dW8saXNTdGFuZGFyZEJyb3dzZXJFbnY6Zm8sZm9yRWFjaDpCdCxtZXJnZTprdCxleHRlbmQ6bG8sdHJpbTpjbyxzdHJpcEJPTTptb30sRWU9RztmdW5jdGlvbiBqcihyKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHIpLnJlcGxhY2UoLyUzQS9naSwiOiIpLnJlcGxhY2UoLyUyNC9nLCIkIikucmVwbGFjZSgvJTJDL2dpLCIsIikucmVwbGFjZSgvJTIwL2csIisiKS5yZXBsYWNlKC8lNUIvZ2ksIlsiKS5yZXBsYWNlKC8lNUQvZ2ksIl0iKX12YXIgcXI9ZnVuY3Rpb24oZSx0LG4pe2lmKCF0KXJldHVybiBlO3ZhciBpO2lmKG4paT1uKHQpO2Vsc2UgaWYoRWUuaXNVUkxTZWFyY2hQYXJhbXModCkpaT10LnRvU3RyaW5nKCk7ZWxzZXt2YXIgbz1bXTtFZS5mb3JFYWNoKHQsZnVuY3Rpb24odSxmKXt1PT09bnVsbHx8dHlwZW9mIHU+InUifHwoRWUuaXNBcnJheSh1KT9mPWYrIltdIjp1PVt1XSxFZS5mb3JFYWNoKHUsZnVuY3Rpb24oZCl7RWUuaXNEYXRlKGQpP2Q9ZC50b0lTT1N0cmluZygpOkVlLmlzT2JqZWN0KGQpJiYoZD1KU09OLnN0cmluZ2lmeShkKSksby5wdXNoKGpyKGYpKyI9IitqcihkKSl9KSl9KSxpPW8uam9pbigiJiIpfWlmKGkpe3ZhciBzPWUuaW5kZXhPZigiIyIpO3MhPT0tMSYmKGU9ZS5zbGljZSgwLHMpKSxlKz0oZS5pbmRleE9mKCI/Iik9PT0tMT8iPyI6IiYiKStpfXJldHVybiBlfSxobz1HO2Z1bmN0aW9uIHFlKCl7dGhpcy5oYW5kbGVycz1bXX1xZS5wcm90b3R5cGUudXNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5oYW5kbGVycy5wdXNoKHtmdWxmaWxsZWQ6ZSxyZWplY3RlZDp0LHN5bmNocm9ub3VzOm4/bi5zeW5jaHJvbm91czohMSxydW5XaGVuOm4/bi5ydW5XaGVuOm51bGx9KSx0aGlzLmhhbmRsZXJzLmxlbmd0aC0xfSxxZS5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVyc1tlXSYmKHRoaXMuaGFuZGxlcnNbZV09bnVsbCl9LHFlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGUpe2hvLmZvckVhY2godGhpcy5oYW5kbGVycyxmdW5jdGlvbihuKXtuIT09bnVsbCYmZShuKX0pfTt2YXIgcG89cWUseW89Ryxfbz1mdW5jdGlvbihlLHQpe3lvLmZvckVhY2goZSxmdW5jdGlvbihpLG8pe28hPT10JiZvLnRvVXBwZXJDYXNlKCk9PT10LnRvVXBwZXJDYXNlKCkmJihlW3RdPWksZGVsZXRlIGVbb10pfSl9LFhyPWZ1bmN0aW9uKGUsdCxuLGksbyl7cmV0dXJuIGUuY29uZmlnPXQsbiYmKGUuY29kZT1uKSxlLnJlcXVlc3Q9aSxlLnJlc3BvbnNlPW8sZS5pc0F4aW9zRXJyb3I9ITAsZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57bWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixudW1iZXI6dGhpcy5udW1iZXIsZmlsZU5hbWU6dGhpcy5maWxlTmFtZSxsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW5OdW1iZXI6dGhpcy5jb2x1bW5OdW1iZXIsc3RhY2s6dGhpcy5zdGFjayxjb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGUsc3RhdHVzOnRoaXMucmVzcG9uc2UmJnRoaXMucmVzcG9uc2Uuc3RhdHVzP3RoaXMucmVzcG9uc2Uuc3RhdHVzOm51bGx9fSxlfSx4bz1YcixZcj1mdW5jdGlvbihlLHQsbixpLG8pe3ZhciBzPW5ldyBFcnJvcihlKTtyZXR1cm4geG8ocyx0LG4saSxvKX0sZ289WXIsYm89ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4uY29uZmlnLnZhbGlkYXRlU3RhdHVzOyFuLnN0YXR1c3x8IWl8fGkobi5zdGF0dXMpP2Uobik6dChnbygiUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAiK24uc3RhdHVzLG4uY29uZmlnLG51bGwsbi5yZXF1ZXN0LG4pKX0sWGU9Ryx2bz1YZS5pc1N0YW5kYXJkQnJvd3NlckVudigpP2Z1bmN0aW9uKCl7cmV0dXJue3dyaXRlOmZ1bmN0aW9uKHQsbixpLG8scyxhKXt2YXIgdT1bXTt1LnB1c2godCsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG4pKSxYZS5pc051bWJlcihpKSYmdS5wdXNoKCJleHBpcmVzPSIrbmV3IERhdGUoaSkudG9HTVRTdHJpbmcoKSksWGUuaXNTdHJpbmcobykmJnUucHVzaCgicGF0aD0iK28pLFhlLmlzU3RyaW5nKHMpJiZ1LnB1c2goImRvbWFpbj0iK3MpLGE9PT0hMCYmdS5wdXNoKCJzZWN1cmUiKSxkb2N1bWVudC5jb29raWU9dS5qb2luKCI7ICIpfSxyZWFkOmZ1bmN0aW9uKHQpe3ZhciBuPWRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCIoXnw7XFxzKikoIit0KyIpPShbXjtdKikiKSk7cmV0dXJuIG4/ZGVjb2RlVVJJQ29tcG9uZW50KG5bM10pOm51bGx9LHJlbW92ZTpmdW5jdGlvbih0KXt0aGlzLndyaXRlKHQsIiIsRGF0ZS5ub3coKS04NjRlNSl9fX0oKTpmdW5jdGlvbigpe3JldHVybnt3cml0ZTpmdW5jdGlvbigpe30scmVhZDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxyZW1vdmU6ZnVuY3Rpb24oKXt9fX0oKSxFbz1mdW5jdGlvbihlKXtyZXR1cm4vXihbYS16XVthLXpcZCtcLS5dKjopP1wvXC8vaS50ZXN0KGUpfSxUbz1mdW5jdGlvbihlLHQpe3JldHVybiB0P2UucmVwbGFjZSgvXC8rJC8sIiIpKyIvIit0LnJlcGxhY2UoL15cLysvLCIiKTplfSxBbz1Fbyx3bz1UbyxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiYhQW8odCk/d28oZSx0KTp0fSxMdD1HLFNvPVsiYWdlIiwiYXV0aG9yaXphdGlvbiIsImNvbnRlbnQtbGVuZ3RoIiwiY29udGVudC10eXBlIiwiZXRhZyIsImV4cGlyZXMiLCJmcm9tIiwiaG9zdCIsImlmLW1vZGlmaWVkLXNpbmNlIiwiaWYtdW5tb2RpZmllZC1zaW5jZSIsImxhc3QtbW9kaWZpZWQiLCJsb2NhdGlvbiIsIm1heC1mb3J3YXJkcyIsInByb3h5LWF1dGhvcml6YXRpb24iLCJyZWZlcmVyIiwicmV0cnktYWZ0ZXIiLCJ1c2VyLWFnZW50Il0sSW89ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbixpLG87cmV0dXJuIGUmJkx0LmZvckVhY2goZS5zcGxpdChgCmApLGZ1bmN0aW9uKGEpe2lmKG89YS5pbmRleE9mKCI6Iiksbj1MdC50cmltKGEuc3Vic3RyKDAsbykpLnRvTG93ZXJDYXNlKCksaT1MdC50cmltKGEuc3Vic3RyKG8rMSkpLG4pe2lmKHRbbl0mJlNvLmluZGV4T2Yobik+PTApcmV0dXJuO249PT0ic2V0LWNvb2tpZSI/dFtuXT0odFtuXT90W25dOltdKS5jb25jYXQoW2ldKTp0W25dPXRbbl0/dFtuXSsiLCAiK2k6aX19KSx0fSxRcj1HLEZvPVFyLmlzU3RhbmRhcmRCcm93c2VyRW52KCk/ZnVuY3Rpb24oKXt2YXIgZT0vKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLG47ZnVuY3Rpb24gaShvKXt2YXIgcz1vO3JldHVybiBlJiYodC5zZXRBdHRyaWJ1dGUoImhyZWYiLHMpLHM9dC5ocmVmKSx0LnNldEF0dHJpYnV0ZSgiaHJlZiIscykse2hyZWY6dC5ocmVmLHByb3RvY29sOnQucHJvdG9jb2w/dC5wcm90b2NvbC5yZXBsYWNlKC86JC8sIiIpOiIiLGhvc3Q6dC5ob3N0LHNlYXJjaDp0LnNlYXJjaD90LnNlYXJjaC5yZXBsYWNlKC9eXD8vLCIiKToiIixoYXNoOnQuaGFzaD90Lmhhc2gucmVwbGFjZSgvXiMvLCIiKToiIixob3N0bmFtZTp0Lmhvc3RuYW1lLHBvcnQ6dC5wb3J0LHBhdGhuYW1lOnQucGF0aG5hbWUuY2hhckF0KDApPT09Ii8iP3QucGF0aG5hbWU6Ii8iK3QucGF0aG5hbWV9fXJldHVybiBuPWkod2luZG93LmxvY2F0aW9uLmhyZWYpLGZ1bmN0aW9uKHMpe3ZhciBhPVFyLmlzU3RyaW5nKHMpP2kocyk6cztyZXR1cm4gYS5wcm90b2NvbD09PW4ucHJvdG9jb2wmJmEuaG9zdD09PW4uaG9zdH19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hMH19KCk7ZnVuY3Rpb24gJHQocil7dGhpcy5tZXNzYWdlPXJ9JHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkNhbmNlbCIrKHRoaXMubWVzc2FnZT8iOiAiK3RoaXMubWVzc2FnZToiIil9LCR0LnByb3RvdHlwZS5fX0NBTkNFTF9fPSEwO3ZhciBZZT0kdCxRZT1HLFBvPWJvLERvPXZvLE1vPXFyLENvPVJvLE9vPUlvLE5vPUZvLEd0PVlyLFVvPUplLEJvPVllLEtyPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGkpe3ZhciBvPWUuZGF0YSxzPWUuaGVhZGVycyxhPWUucmVzcG9uc2VUeXBlLHU7ZnVuY3Rpb24gZigpe2UuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUodSksZS5zaWduYWwmJmUuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0Iix1KX1RZS5pc0Zvcm1EYXRhKG8pJiZkZWxldGUgc1siQ29udGVudC1UeXBlIl07dmFyIGM9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKGUuYXV0aCl7dmFyIGQ9ZS5hdXRoLnVzZXJuYW1lfHwiIix5PWUuYXV0aC5wYXNzd29yZD91bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZS5hdXRoLnBhc3N3b3JkKSk6IiI7cy5BdXRob3JpemF0aW9uPSJCYXNpYyAiK2J0b2EoZCsiOiIreSl9dmFyIF89Q28oZS5iYXNlVVJMLGUudXJsKTtjLm9wZW4oZS5tZXRob2QudG9VcHBlckNhc2UoKSxNbyhfLGUucGFyYW1zLGUucGFyYW1zU2VyaWFsaXplciksITApLGMudGltZW91dD1lLnRpbWVvdXQ7ZnVuY3Rpb24gbSgpe2lmKCEhYyl7dmFyIHY9ImdldEFsbFJlc3BvbnNlSGVhZGVycyJpbiBjP09vKGMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpOm51bGwsYj0hYXx8YT09PSJ0ZXh0Inx8YT09PSJqc29uIj9jLnJlc3BvbnNlVGV4dDpjLnJlc3BvbnNlLEE9e2RhdGE6YixzdGF0dXM6Yy5zdGF0dXMsc3RhdHVzVGV4dDpjLnN0YXR1c1RleHQsaGVhZGVyczp2LGNvbmZpZzplLHJlcXVlc3Q6Y307UG8oZnVuY3Rpb24oQyl7bihDKSxmKCl9LGZ1bmN0aW9uKEMpe2koQyksZigpfSxBKSxjPW51bGx9fWlmKCJvbmxvYWRlbmQiaW4gYz9jLm9ubG9hZGVuZD1tOmMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7IWN8fGMucmVhZHlTdGF0ZSE9PTR8fGMuc3RhdHVzPT09MCYmIShjLnJlc3BvbnNlVVJMJiZjLnJlc3BvbnNlVVJMLmluZGV4T2YoImZpbGU6Iik9PT0wKXx8c2V0VGltZW91dChtKX0sYy5vbmFib3J0PWZ1bmN0aW9uKCl7IWN8fChpKEd0KCJSZXF1ZXN0IGFib3J0ZWQiLGUsIkVDT05OQUJPUlRFRCIsYykpLGM9bnVsbCl9LGMub25lcnJvcj1mdW5jdGlvbigpe2koR3QoIk5ldHdvcmsgRXJyb3IiLGUsbnVsbCxjKSksYz1udWxsfSxjLm9udGltZW91dD1mdW5jdGlvbigpe3ZhciBiPWUudGltZW91dD8idGltZW91dCBvZiAiK2UudGltZW91dCsibXMgZXhjZWVkZWQiOiJ0aW1lb3V0IGV4Y2VlZGVkIixBPWUudHJhbnNpdGlvbmFsfHxVby50cmFuc2l0aW9uYWw7ZS50aW1lb3V0RXJyb3JNZXNzYWdlJiYoYj1lLnRpbWVvdXRFcnJvck1lc3NhZ2UpLGkoR3QoYixlLEEuY2xhcmlmeVRpbWVvdXRFcnJvcj8iRVRJTUVET1VUIjoiRUNPTk5BQk9SVEVEIixjKSksYz1udWxsfSxRZS5pc1N0YW5kYXJkQnJvd3NlckVudigpKXt2YXIgeD0oZS53aXRoQ3JlZGVudGlhbHN8fE5vKF8pKSYmZS54c3JmQ29va2llTmFtZT9Eby5yZWFkKGUueHNyZkNvb2tpZU5hbWUpOnZvaWQgMDt4JiYoc1tlLnhzcmZIZWFkZXJOYW1lXT14KX0ic2V0UmVxdWVzdEhlYWRlciJpbiBjJiZRZS5mb3JFYWNoKHMsZnVuY3Rpb24oYixBKXt0eXBlb2Ygbz4idSImJkEudG9Mb3dlckNhc2UoKT09PSJjb250ZW50LXR5cGUiP2RlbGV0ZSBzW0FdOmMuc2V0UmVxdWVzdEhlYWRlcihBLGIpfSksUWUuaXNVbmRlZmluZWQoZS53aXRoQ3JlZGVudGlhbHMpfHwoYy53aXRoQ3JlZGVudGlhbHM9ISFlLndpdGhDcmVkZW50aWFscyksYSYmYSE9PSJqc29uIiYmKGMucmVzcG9uc2VUeXBlPWUucmVzcG9uc2VUeXBlKSx0eXBlb2YgZS5vbkRvd25sb2FkUHJvZ3Jlc3M9PSJmdW5jdGlvbiImJmMuYWRkRXZlbnRMaXN0ZW5lcigicHJvZ3Jlc3MiLGUub25Eb3dubG9hZFByb2dyZXNzKSx0eXBlb2YgZS5vblVwbG9hZFByb2dyZXNzPT0iZnVuY3Rpb24iJiZjLnVwbG9hZCYmYy51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigicHJvZ3Jlc3MiLGUub25VcGxvYWRQcm9ncmVzcyksKGUuY2FuY2VsVG9rZW58fGUuc2lnbmFsKSYmKHU9ZnVuY3Rpb24odil7IWN8fChpKCF2fHx2JiZ2LnR5cGU/bmV3IEJvKCJjYW5jZWxlZCIpOnYpLGMuYWJvcnQoKSxjPW51bGwpfSxlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnN1YnNjcmliZSh1KSxlLnNpZ25hbCYmKGUuc2lnbmFsLmFib3J0ZWQ/dSgpOmUuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0Iix1KSkpLG98fChvPW51bGwpLGMuc2VuZChvKX0pfSxPPUcsSnI9X28sa289WHIsTG89eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifTtmdW5jdGlvbiBacihyLGUpeyFPLmlzVW5kZWZpbmVkKHIpJiZPLmlzVW5kZWZpbmVkKHJbIkNvbnRlbnQtVHlwZSJdKSYmKHJbIkNvbnRlbnQtVHlwZSJdPWUpfWZ1bmN0aW9uICRvKCl7dmFyIHI7cmV0dXJuKHR5cGVvZiBYTUxIdHRwUmVxdWVzdDwidSJ8fHR5cGVvZiBwcm9jZXNzPCJ1IiYmT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpPT09IltvYmplY3QgcHJvY2Vzc10iKSYmKHI9S3IpLHJ9ZnVuY3Rpb24gR28ocixlLHQpe2lmKE8uaXNTdHJpbmcocikpdHJ5e3JldHVybihlfHxKU09OLnBhcnNlKShyKSxPLnRyaW0ocil9Y2F0Y2gobil7aWYobi5uYW1lIT09IlN5bnRheEVycm9yIil0aHJvdyBufXJldHVybih0fHxKU09OLnN0cmluZ2lmeSkocil9dmFyIEtlPXt0cmFuc2l0aW9uYWw6e3NpbGVudEpTT05QYXJzaW5nOiEwLGZvcmNlZEpTT05QYXJzaW5nOiEwLGNsYXJpZnlUaW1lb3V0RXJyb3I6ITF9LGFkYXB0ZXI6JG8oKSx0cmFuc2Zvcm1SZXF1ZXN0OltmdW5jdGlvbihlLHQpe3JldHVybiBKcih0LCJBY2NlcHQiKSxKcih0LCJDb250ZW50LVR5cGUiKSxPLmlzRm9ybURhdGEoZSl8fE8uaXNBcnJheUJ1ZmZlcihlKXx8Ty5pc0J1ZmZlcihlKXx8Ty5pc1N0cmVhbShlKXx8Ty5pc0ZpbGUoZSl8fE8uaXNCbG9iKGUpP2U6Ty5pc0FycmF5QnVmZmVyVmlldyhlKT9lLmJ1ZmZlcjpPLmlzVVJMU2VhcmNoUGFyYW1zKGUpPyhacih0LCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCIpLGUudG9TdHJpbmcoKSk6Ty5pc09iamVjdChlKXx8dCYmdFsiQ29udGVudC1UeXBlIl09PT0iYXBwbGljYXRpb24vanNvbiI/KFpyKHQsImFwcGxpY2F0aW9uL2pzb24iKSxHbyhlKSk6ZX1dLHRyYW5zZm9ybVJlc3BvbnNlOltmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyYW5zaXRpb25hbHx8S2UudHJhbnNpdGlvbmFsLG49dCYmdC5zaWxlbnRKU09OUGFyc2luZyxpPXQmJnQuZm9yY2VkSlNPTlBhcnNpbmcsbz0hbiYmdGhpcy5yZXNwb25zZVR5cGU9PT0ianNvbiI7aWYob3x8aSYmTy5pc1N0cmluZyhlKSYmZS5sZW5ndGgpdHJ5e3JldHVybiBKU09OLnBhcnNlKGUpfWNhdGNoKHMpe2lmKG8pdGhyb3cgcy5uYW1lPT09IlN5bnRheEVycm9yIj9rbyhzLHRoaXMsIkVfSlNPTl9QQVJTRSIpOnN9cmV0dXJuIGV9XSx0aW1lb3V0OjAseHNyZkNvb2tpZU5hbWU6IlhTUkYtVE9LRU4iLHhzcmZIZWFkZXJOYW1lOiJYLVhTUkYtVE9LRU4iLG1heENvbnRlbnRMZW5ndGg6LTEsbWF4Qm9keUxlbmd0aDotMSx2YWxpZGF0ZVN0YXR1czpmdW5jdGlvbihlKXtyZXR1cm4gZT49MjAwJiZlPDMwMH0saGVhZGVyczp7Y29tbW9uOntBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKiJ9fX07Ty5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCJdLGZ1bmN0aW9uKGUpe0tlLmhlYWRlcnNbZV09e319KSxPLmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSxmdW5jdGlvbihlKXtLZS5oZWFkZXJzW2VdPU8ubWVyZ2UoTG8pfSk7dmFyIEplPUtlLHpvPUcsSG89SmUsVm89ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXN8fEhvO3JldHVybiB6by5mb3JFYWNoKG4sZnVuY3Rpb24ocyl7ZT1zLmNhbGwoaSxlLHQpfSksZX0sZW49ZnVuY3Rpb24oZSl7cmV0dXJuISEoZSYmZS5fX0NBTkNFTF9fKX0sdG49Ryx6dD1WbyxXbz1lbixqbz1KZSxxbz1ZZTtmdW5jdGlvbiBIdChyKXtpZihyLmNhbmNlbFRva2VuJiZyLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKSxyLnNpZ25hbCYmci5zaWduYWwuYWJvcnRlZCl0aHJvdyBuZXcgcW8oImNhbmNlbGVkIil9dmFyIFhvPWZ1bmN0aW9uKGUpe0h0KGUpLGUuaGVhZGVycz1lLmhlYWRlcnN8fHt9LGUuZGF0YT16dC5jYWxsKGUsZS5kYXRhLGUuaGVhZGVycyxlLnRyYW5zZm9ybVJlcXVlc3QpLGUuaGVhZGVycz10bi5tZXJnZShlLmhlYWRlcnMuY29tbW9ufHx7fSxlLmhlYWRlcnNbZS5tZXRob2RdfHx7fSxlLmhlYWRlcnMpLHRuLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwicG9zdCIsInB1dCIsInBhdGNoIiwiY29tbW9uIl0sZnVuY3Rpb24oaSl7ZGVsZXRlIGUuaGVhZGVyc1tpXX0pO3ZhciB0PWUuYWRhcHRlcnx8am8uYWRhcHRlcjtyZXR1cm4gdChlKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBIdChlKSxpLmRhdGE9enQuY2FsbChlLGkuZGF0YSxpLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXNwb25zZSksaX0sZnVuY3Rpb24oaSl7cmV0dXJuIFdvKGkpfHwoSHQoZSksaSYmaS5yZXNwb25zZSYmKGkucmVzcG9uc2UuZGF0YT16dC5jYWxsKGUsaS5yZXNwb25zZS5kYXRhLGkucmVzcG9uc2UuaGVhZGVycyxlLnRyYW5zZm9ybVJlc3BvbnNlKSkpLFByb21pc2UucmVqZWN0KGkpfSl9LHo9Ryxybj1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49e307ZnVuY3Rpb24gaShjLGQpe3JldHVybiB6LmlzUGxhaW5PYmplY3QoYykmJnouaXNQbGFpbk9iamVjdChkKT96Lm1lcmdlKGMsZCk6ei5pc1BsYWluT2JqZWN0KGQpP3oubWVyZ2Uoe30sZCk6ei5pc0FycmF5KGQpP2Quc2xpY2UoKTpkfWZ1bmN0aW9uIG8oYyl7aWYoei5pc1VuZGVmaW5lZCh0W2NdKSl7aWYoIXouaXNVbmRlZmluZWQoZVtjXSkpcmV0dXJuIGkodm9pZCAwLGVbY10pfWVsc2UgcmV0dXJuIGkoZVtjXSx0W2NdKX1mdW5jdGlvbiBzKGMpe2lmKCF6LmlzVW5kZWZpbmVkKHRbY10pKXJldHVybiBpKHZvaWQgMCx0W2NdKX1mdW5jdGlvbiBhKGMpe2lmKHouaXNVbmRlZmluZWQodFtjXSkpe2lmKCF6LmlzVW5kZWZpbmVkKGVbY10pKXJldHVybiBpKHZvaWQgMCxlW2NdKX1lbHNlIHJldHVybiBpKHZvaWQgMCx0W2NdKX1mdW5jdGlvbiB1KGMpe2lmKGMgaW4gdClyZXR1cm4gaShlW2NdLHRbY10pO2lmKGMgaW4gZSlyZXR1cm4gaSh2b2lkIDAsZVtjXSl9dmFyIGY9e3VybDpzLG1ldGhvZDpzLGRhdGE6cyxiYXNlVVJMOmEsdHJhbnNmb3JtUmVxdWVzdDphLHRyYW5zZm9ybVJlc3BvbnNlOmEscGFyYW1zU2VyaWFsaXplcjphLHRpbWVvdXQ6YSx0aW1lb3V0TWVzc2FnZTphLHdpdGhDcmVkZW50aWFsczphLGFkYXB0ZXI6YSxyZXNwb25zZVR5cGU6YSx4c3JmQ29va2llTmFtZTphLHhzcmZIZWFkZXJOYW1lOmEsb25VcGxvYWRQcm9ncmVzczphLG9uRG93bmxvYWRQcm9ncmVzczphLGRlY29tcHJlc3M6YSxtYXhDb250ZW50TGVuZ3RoOmEsbWF4Qm9keUxlbmd0aDphLHRyYW5zcG9ydDphLGh0dHBBZ2VudDphLGh0dHBzQWdlbnQ6YSxjYW5jZWxUb2tlbjphLHNvY2tldFBhdGg6YSxyZXNwb25zZUVuY29kaW5nOmEsdmFsaWRhdGVTdGF0dXM6dX07cmV0dXJuIHouZm9yRWFjaChPYmplY3Qua2V5cyhlKS5jb25jYXQoT2JqZWN0LmtleXModCkpLGZ1bmN0aW9uKGQpe3ZhciB5PWZbZF18fG8sXz15KGQpO3ouaXNVbmRlZmluZWQoXykmJnkhPT11fHwobltkXT1fKX0pLG59LG5uPXt2ZXJzaW9uOiIwLjI1LjAifSxZbz1ubi52ZXJzaW9uLFZ0PXt9O1sib2JqZWN0IiwiYm9vbGVhbiIsIm51bWJlciIsImZ1bmN0aW9uIiwic3RyaW5nIiwic3ltYm9sIl0uZm9yRWFjaChmdW5jdGlvbihyLGUpe1Z0W3JdPWZ1bmN0aW9uKG4pe3JldHVybiB0eXBlb2Ygbj09PXJ8fCJhIisoZTwxPyJuICI6IiAiKStyfX0pO3ZhciBvbj17fTtWdC50cmFuc2l0aW9uYWw9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkobyxzKXtyZXR1cm4iW0F4aW9zIHYiK1lvKyJdIFRyYW5zaXRpb25hbCBvcHRpb24gJyIrbysiJyIrcysobj8iLiAiK246IiIpfXJldHVybiBmdW5jdGlvbihvLHMsYSl7aWYoZT09PSExKXRocm93IG5ldyBFcnJvcihpKHMsIiBoYXMgYmVlbiByZW1vdmVkIisodD8iIGluICIrdDoiIikpKTtyZXR1cm4gdCYmIW9uW3NdJiYob25bc109ITAsY29uc29sZS53YXJuKGkocywiIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdiIrdCsiIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlIikpKSxlP2UobyxzLGEpOiEwfX07ZnVuY3Rpb24gUW8ocixlLHQpe2lmKHR5cGVvZiByIT0ib2JqZWN0Iil0aHJvdyBuZXcgVHlwZUVycm9yKCJvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0Iik7Zm9yKHZhciBuPU9iamVjdC5rZXlzKHIpLGk9bi5sZW5ndGg7aS0tID4wOyl7dmFyIG89bltpXSxzPWVbb107aWYocyl7dmFyIGE9cltvXSx1PWE9PT12b2lkIDB8fHMoYSxvLHIpO2lmKHUhPT0hMCl0aHJvdyBuZXcgVHlwZUVycm9yKCJvcHRpb24gIitvKyIgbXVzdCBiZSAiK3UpO2NvbnRpbnVlfWlmKHQhPT0hMCl0aHJvdyBFcnJvcigiVW5rbm93biBvcHRpb24gIitvKX19dmFyIEtvPXthc3NlcnRPcHRpb25zOlFvLHZhbGlkYXRvcnM6VnR9LHNuPUcsSm89cXIsYW49cG8sdW49WG8sWmU9cm4sY249S28sVGU9Y24udmFsaWRhdG9ycztmdW5jdGlvbiBNZShyKXt0aGlzLmRlZmF1bHRzPXIsdGhpcy5pbnRlcmNlcHRvcnM9e3JlcXVlc3Q6bmV3IGFuLHJlc3BvbnNlOm5ldyBhbn19TWUucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgZT09InN0cmluZyI/KHQ9dHx8e30sdC51cmw9ZSk6dD1lfHx7fSwhdC51cmwpdGhyb3cgbmV3IEVycm9yKCJQcm92aWRlZCBjb25maWcgdXJsIGlzIG5vdCB2YWxpZCIpO3Q9WmUodGhpcy5kZWZhdWx0cyx0KSx0Lm1ldGhvZD90Lm1ldGhvZD10Lm1ldGhvZC50b0xvd2VyQ2FzZSgpOnRoaXMuZGVmYXVsdHMubWV0aG9kP3QubWV0aG9kPXRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk6dC5tZXRob2Q9ImdldCI7dmFyIG49dC50cmFuc2l0aW9uYWw7biE9PXZvaWQgMCYmY24uYXNzZXJ0T3B0aW9ucyhuLHtzaWxlbnRKU09OUGFyc2luZzpUZS50cmFuc2l0aW9uYWwoVGUuYm9vbGVhbiksZm9yY2VkSlNPTlBhcnNpbmc6VGUudHJhbnNpdGlvbmFsKFRlLmJvb2xlYW4pLGNsYXJpZnlUaW1lb3V0RXJyb3I6VGUudHJhbnNpdGlvbmFsKFRlLmJvb2xlYW4pfSwhMSk7dmFyIGk9W10sbz0hMDt0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24oXyl7dHlwZW9mIF8ucnVuV2hlbj09ImZ1bmN0aW9uIiYmXy5ydW5XaGVuKHQpPT09ITF8fChvPW8mJl8uc3luY2hyb25vdXMsaS51bnNoaWZ0KF8uZnVsZmlsbGVkLF8ucmVqZWN0ZWQpKX0pO3ZhciBzPVtdO3RoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24oXyl7cy5wdXNoKF8uZnVsZmlsbGVkLF8ucmVqZWN0ZWQpfSk7dmFyIGE7aWYoIW8pe3ZhciB1PVt1bix2b2lkIDBdO2ZvcihBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseSh1LGkpLHU9dS5jb25jYXQocyksYT1Qcm9taXNlLnJlc29sdmUodCk7dS5sZW5ndGg7KWE9YS50aGVuKHUuc2hpZnQoKSx1LnNoaWZ0KCkpO3JldHVybiBhfWZvcih2YXIgZj10O2kubGVuZ3RoOyl7dmFyIGM9aS5zaGlmdCgpLGQ9aS5zaGlmdCgpO3RyeXtmPWMoZil9Y2F0Y2goeSl7ZCh5KTticmVha319dHJ5e2E9dW4oZil9Y2F0Y2goeSl7cmV0dXJuIFByb21pc2UucmVqZWN0KHkpfWZvcig7cy5sZW5ndGg7KWE9YS50aGVuKHMuc2hpZnQoKSxzLnNoaWZ0KCkpO3JldHVybiBhfSxNZS5wcm90b3R5cGUuZ2V0VXJpPWZ1bmN0aW9uKGUpe2lmKCFlLnVybCl0aHJvdyBuZXcgRXJyb3IoIlByb3ZpZGVkIGNvbmZpZyB1cmwgaXMgbm90IHZhbGlkIik7cmV0dXJuIGU9WmUodGhpcy5kZWZhdWx0cyxlKSxKbyhlLnVybCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cPy8sIiIpfSxzbi5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsIm9wdGlvbnMiXSxmdW5jdGlvbihlKXtNZS5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KFplKG58fHt9LHttZXRob2Q6ZSx1cmw6dCxkYXRhOihufHx7fSkuZGF0YX0pKX19KSxzbi5mb3JFYWNoKFsicG9zdCIsInB1dCIsInBhdGNoIl0sZnVuY3Rpb24oZSl7TWUucHJvdG90eXBlW2VdPWZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KFplKGl8fHt9LHttZXRob2Q6ZSx1cmw6dCxkYXRhOm59KSl9fSk7dmFyIFpvPU1lLGVzPVllO2Z1bmN0aW9uIEFlKHIpe2lmKHR5cGVvZiByIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImV4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4iKTt2YXIgZTt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24oaSl7ZT1pfSk7dmFyIHQ9dGhpczt0aGlzLnByb21pc2UudGhlbihmdW5jdGlvbihuKXtpZighIXQuX2xpc3RlbmVycyl7dmFyIGksbz10Ll9saXN0ZW5lcnMubGVuZ3RoO2ZvcihpPTA7aTxvO2krKyl0Ll9saXN0ZW5lcnNbaV0obik7dC5fbGlzdGVuZXJzPW51bGx9fSksdGhpcy5wcm9taXNlLnRoZW49ZnVuY3Rpb24obil7dmFyIGksbz1uZXcgUHJvbWlzZShmdW5jdGlvbihzKXt0LnN1YnNjcmliZShzKSxpPXN9KS50aGVuKG4pO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe3QudW5zdWJzY3JpYmUoaSl9LG99LHIoZnVuY3Rpb24oaSl7dC5yZWFzb258fCh0LnJlYXNvbj1uZXcgZXMoaSksZSh0LnJlYXNvbikpfSl9QWUucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLnJlYXNvbil0aHJvdyB0aGlzLnJlYXNvbn0sQWUucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZih0aGlzLnJlYXNvbil7ZSh0aGlzLnJlYXNvbik7cmV0dXJufXRoaXMuX2xpc3RlbmVycz90aGlzLl9saXN0ZW5lcnMucHVzaChlKTp0aGlzLl9saXN0ZW5lcnM9W2VdfSxBZS5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7aWYoISF0aGlzLl9saXN0ZW5lcnMpe3ZhciB0PXRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGUpO3QhPT0tMSYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZSh0LDEpfX0sQWUuc291cmNlPWZ1bmN0aW9uKCl7dmFyIGUsdD1uZXcgQWUoZnVuY3Rpb24oaSl7ZT1pfSk7cmV0dXJue3Rva2VuOnQsY2FuY2VsOmV9fTt2YXIgdHM9QWUscnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBlLmFwcGx5KG51bGwsbil9fSxucz1HLGlzPWZ1bmN0aW9uKGUpe3JldHVybiBucy5pc09iamVjdChlKSYmZS5pc0F4aW9zRXJyb3I9PT0hMH0sZm49Ryxvcz16cixldD1abyxzcz1ybixhcz1KZTtmdW5jdGlvbiBsbihyKXt2YXIgZT1uZXcgZXQociksdD1vcyhldC5wcm90b3R5cGUucmVxdWVzdCxlKTtyZXR1cm4gZm4uZXh0ZW5kKHQsZXQucHJvdG90eXBlLGUpLGZuLmV4dGVuZCh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKGkpe3JldHVybiBsbihzcyhyLGkpKX0sdH12YXIgSj1sbihhcyk7Si5BeGlvcz1ldCxKLkNhbmNlbD1ZZSxKLkNhbmNlbFRva2VuPXRzLEouaXNDYW5jZWw9ZW4sSi5WRVJTSU9OPW5uLnZlcnNpb24sSi5hbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UuYWxsKGUpfSxKLnNwcmVhZD1ycyxKLmlzQXhpb3NFcnJvcj1pcyxPdC5leHBvcnRzPUosT3QuZXhwb3J0cy5kZWZhdWx0PUo7dmFyIHVzPU90LmV4cG9ydHM7Y2xhc3MgVHtpc0VtcHR5KCl7cmV0dXJuIXRoaXMuaXNQcmVzZW50KCl9c3RhdGljIG9mKGUpe2lmKGUhPW51bGwpcmV0dXJuIG5ldyBkbihlKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgcGFzc2VkIHZhbHVlIHdhcyBudWxsIG9yIHVuZGVmaW5lZC4iKX1zdGF0aWMgb2ZOb25OdWxsKGUpe3JldHVybiBULm9mKGUpfXN0YXRpYyBvZk51bGxhYmxlKGUpe3JldHVybiBlIT1udWxsP25ldyBkbihlKTpuZXcgbW59c3RhdGljIGVtcHR5KCl7cmV0dXJuIG5ldyBtbn1zdGF0aWMgZnJvbShlKXtzd2l0Y2goZS5raW5kKXtjYXNlInByZXNlbnQiOnJldHVybiBULm9mKGUudmFsdWUpO2Nhc2UiZW1wdHkiOnJldHVybiBULmVtcHR5KCk7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgcGFzc2VkIHZhbHVlIHdhcyBub3QgYW4gT3B0aW9uIHR5cGUuIil9fX1jbGFzcyBkbiBleHRlbmRzIFR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnBheWxvYWQ9ZX1pc1ByZXNlbnQoKXtyZXR1cm4hMH1nZXQoKXtyZXR1cm4gdGhpcy5wYXlsb2FkfWlmUHJlc2VudChlKXtlKHRoaXMucGF5bG9hZCl9aWZQcmVzZW50T3JFbHNlKGUsdCl7ZSh0aGlzLnBheWxvYWQpfWZpbHRlcihlKXtyZXR1cm4gZSh0aGlzLnBheWxvYWQpP3RoaXM6VC5lbXB0eSgpfW1hcChlKXtjb25zdCB0PWUodGhpcy5wYXlsb2FkKTtyZXR1cm4gVC5vZk51bGxhYmxlKHQpfWZsYXRNYXAoZSl7cmV0dXJuIGUodGhpcy5wYXlsb2FkKX1vcihlKXtyZXR1cm4gdGhpc31vckVsc2UoZSl7cmV0dXJuIHRoaXMucGF5bG9hZH1vckVsc2VHZXQoZSl7cmV0dXJuIHRoaXMucGF5bG9hZH1vckVsc2VUaHJvdyhlKXtyZXR1cm4gdGhpcy5wYXlsb2FkfW9yTnVsbCgpe3JldHVybiB0aGlzLnBheWxvYWR9b3JVbmRlZmluZWQoKXtyZXR1cm4gdGhpcy5wYXlsb2FkfXRvT3B0aW9uKCl7cmV0dXJue2tpbmQ6InByZXNlbnQiLHZhbHVlOnRoaXMucGF5bG9hZH19bWF0Y2hlcyhlKXtyZXR1cm4gZS5wcmVzZW50KHRoaXMucGF5bG9hZCl9dG9KU09OKGUpe3JldHVybiB0aGlzLnBheWxvYWR9fWNsYXNzIG1uIGV4dGVuZHMgVHtpc1ByZXNlbnQoKXtyZXR1cm4hMX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCl9Z2V0KCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIG9wdGlvbmFsIGlzIG5vdCBwcmVzZW50LiIpfWlmUHJlc2VudChlKXt9aWZQcmVzZW50T3JFbHNlKGUsdCl7dCgpfWZpbHRlcihlKXtyZXR1cm4gdGhpc31tYXAoZSl7cmV0dXJuIFQuZW1wdHkoKX1mbGF0TWFwKGUpe3JldHVybiBULmVtcHR5KCl9b3IoZSl7cmV0dXJuIGUoKX1vckVsc2UoZSl7cmV0dXJuIGV9b3JFbHNlR2V0KGUpe3JldHVybiB0aGlzLm9yRWxzZShlKCkpfW9yRWxzZVRocm93KGUpe3Rocm93IGUoKX1vck51bGwoKXtyZXR1cm4gbnVsbH1vclVuZGVmaW5lZCgpe310b09wdGlvbigpe3JldHVybntraW5kOiJlbXB0eSJ9fW1hdGNoZXMoZSl7cmV0dXJuIGUuZW1wdHkoKX10b0pTT04oZSl7cmV0dXJuIG51bGx9fWNvbnN0IGNzPSIyLjAuMCI7ZnVuY3Rpb24gZnMocil7Z2xvYmFsVGhpcy5fdm9uYWdlTWVkaWFQcm9jZXNzb3JNZXRhZGF0YT1yfWZ1bmN0aW9uIGxzKCl7cmV0dXJuIGdsb2JhbFRoaXMuX3ZvbmFnZU1lZGlhUHJvY2Vzc29yTWV0YWRhdGF9Y2xhc3MgSHtjb25zdHJ1Y3Rvcigpe2NvbnN0IGU9bHMoKTt0aGlzLl9yZXBvcnQ9e2FjdGlvbjpULmVtcHR5KCksYXBwbGljYXRpb25JZDpULm9mTnVsbGFibGUoZSE9PXZvaWQgMCYmZSE9bnVsbD9lLmFwcElkOm51bGwpLHRpbWVzdGFtcDpEYXRlLm5vdygpLGZwczpULmVtcHR5KCksZnJhbWVzVHJhbnNmb3JtZWQ6VC5lbXB0eSgpLGd1aWQ6VC5lbXB0eSgpLGhpZ2hlc3RGcmFtZVRyYW5zZm9ybUNwdTpULmVtcHR5KCksbWVzc2FnZTpULmVtcHR5KCksc291cmNlOlQub2ZOdWxsYWJsZShlIT09dm9pZCAwJiZlIT1udWxsP2Uuc291cmNlVHlwZTpudWxsKSx0cmFuc2Zvcm1lZEZwczpULmVtcHR5KCksdHJhbnNmb3JtZXJUeXBlOlQuZW1wdHkoKSx2YXJpYXRpb246VC5lbXB0eSgpLHZpZGVvSGVpZ2h0OlQuZW1wdHkoKSx2aWRlb1dpZHRoOlQuZW1wdHkoKSx2ZXJzaW9uOmNzLGVycm9yOlQuZW1wdHkoKSxwcm94eVVybDpULm9mTnVsbGFibGUoZSE9PXZvaWQgMCYmZSE9bnVsbD9lLnByb3h5VXJsOm51bGwpfX1hY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5hY3Rpb249VC5vZk51bGxhYmxlKGUpLHRoaXN9ZnJhbWVzVHJhbnNmb3JtZWQoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5mcmFtZXNUcmFuc2Zvcm1lZD1ULm9mTnVsbGFibGUoZSksdGhpc31mcHMoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5mcHM9VC5vZk51bGxhYmxlKGUpLHRoaXN9Z3VpZChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lmd1aWQ9VC5vZk51bGxhYmxlKGUpLHRoaXN9bWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lm1lc3NhZ2U9VC5vZk51bGxhYmxlKGUpLHRoaXN9dHJhbnNmb3JtZWRGcHMoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC50cmFuc2Zvcm1lZEZwcz1ULm9mTnVsbGFibGUoZSksdGhpc310cmFuc2Zvcm1lclR5cGUoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC50cmFuc2Zvcm1lclR5cGU9VC5vZk51bGxhYmxlKGUpLHRoaXN9dmFyaWF0aW9uKGUpe3JldHVybiB0aGlzLl9yZXBvcnQudmFyaWF0aW9uPVQub2ZOdWxsYWJsZShlKSx0aGlzfXZpZGVvSGVpZ2h0KGUpe3JldHVybiB0aGlzLl9yZXBvcnQudmlkZW9IZWlnaHQ9VC5vZk51bGxhYmxlKGUpLHRoaXN9dmlkZW9XaWR0aChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0LnZpZGVvV2lkdGg9VC5vZk51bGxhYmxlKGUpLHRoaXN9ZXJyb3IoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5lcnJvcj1ULm9mTnVsbGFibGUoZSksdGhpc31idWlsZCgpe3JldHVybiB0aGlzLl9yZXBvcnR9fWNvbnN0IGRzPXI9PkpTT04uc3RyaW5naWZ5KHIsKGUsdCk9PntpZih0IT09bnVsbClyZXR1cm4gdH0pO2NsYXNzIFZ7c3RhdGljIHJlcG9ydChlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQsbik9PntpZihlLmFwcGxpY2F0aW9uSWQuaXNFbXB0eSgpfHxlLnNvdXJjZS5pc0VtcHR5KCkpe3QoInN1Y2Nlc3MiKTtyZXR1cm59bGV0IGk9dXMuY3JlYXRlKCksbz17dGltZW91dDoxZTQsdGltZW91dEVycm9yTWVzc2FnZToiUmVxdWVzdCB0aW1lb3V0IixoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fSxzPSJobGcudG9rYm94LmNvbS9wcm9kL2xvZ2dpbmcvdmNwX3dlYnJ0YyI7aWYoZS5wcm94eVVybC5pc0VtcHR5KCkpcz0iaHR0cHM6Ly8iK3M7ZWxzZXtsZXQgYTtlLnByb3h5VXJsLmdldCgpLnNsaWNlKGUucHJveHlVcmwuZ2V0KCkubGVuZ3RoLTEpIT09Ii8iP2E9ZS5wcm94eVVybC5nZXQoKSsiLyI6YT1lLnByb3h5VXJsLmdldCgpLHM9YStzfWkucG9zdChzLGRzKGUpLG8pLnRoZW4oYT0+e2NvbnNvbGUubG9nKGEpLHQoInN1Y2Nlc3MiKX0pLmNhdGNoKGE9Pntjb25zb2xlLmxvZyhhKSxuKGEpfSl9KX19dmFyIHR0LG1zPW5ldyBVaW50OEFycmF5KDE2KTtmdW5jdGlvbiBocygpe2lmKCF0dCYmKHR0PXR5cGVvZiBjcnlwdG88InUiJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKXx8dHlwZW9mIG1zQ3J5cHRvPCJ1IiYmdHlwZW9mIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcz09ImZ1bmN0aW9uIiYmbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pLCF0dCkpdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpO3JldHVybiB0dChtcyl9dmFyIHBzPS9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtmdW5jdGlvbiB5cyhyKXtyZXR1cm4gdHlwZW9mIHI9PSJzdHJpbmciJiZwcy50ZXN0KHIpfWZvcih2YXIgTj1bXSxXdD0wO1d0PDI1NjsrK1d0KU4ucHVzaCgoV3QrMjU2KS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtmdW5jdGlvbiBfcyhyKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06MCx0PShOW3JbZSswXV0rTltyW2UrMV1dK05bcltlKzJdXStOW3JbZSszXV0rIi0iK05bcltlKzRdXStOW3JbZSs1XV0rIi0iK05bcltlKzZdXStOW3JbZSs3XV0rIi0iK05bcltlKzhdXStOW3JbZSs5XV0rIi0iK05bcltlKzEwXV0rTltyW2UrMTFdXStOW3JbZSsxMl1dK05bcltlKzEzXV0rTltyW2UrMTRdXStOW3JbZSsxNV1dKS50b0xvd2VyQ2FzZSgpO2lmKCF5cyh0KSl0aHJvdyBUeXBlRXJyb3IoIlN0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCIpO3JldHVybiB0fWZ1bmN0aW9uIGhuKHIsZSx0KXtyPXJ8fHt9O3ZhciBuPXIucmFuZG9tfHwoci5ybmd8fGhzKSgpO2lmKG5bNl09bls2XSYxNXw2NCxuWzhdPW5bOF0mNjN8MTI4LGUpe3Q9dHx8MDtmb3IodmFyIGk9MDtpPDE2OysraSllW3QraV09bltpXTtyZXR1cm4gZX1yZXR1cm4gX3Mobil9Y29uc3Qgc2U9bmV3IFdlYWtNYXAscnQ9bmV3IFdlYWtNYXAsQ2U9bmV3IFdlYWtNYXAsanQ9U3ltYm9sKCJhbnlQcm9kdWNlciIpLHBuPVByb21pc2UucmVzb2x2ZSgpLG50PVN5bWJvbCgibGlzdGVuZXJBZGRlZCIpLGl0PVN5bWJvbCgibGlzdGVuZXJSZW1vdmVkIik7bGV0IHF0PSExO2Z1bmN0aW9uIHdlKHIpe2lmKHR5cGVvZiByIT0ic3RyaW5nIiYmdHlwZW9mIHIhPSJzeW1ib2wiKXRocm93IG5ldyBUeXBlRXJyb3IoImV2ZW50TmFtZSBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgc3ltYm9sIil9ZnVuY3Rpb24gb3Qocil7aWYodHlwZW9mIHIhPSJmdW5jdGlvbiIpdGhyb3cgbmV3IFR5cGVFcnJvcigibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gUmUocixlKXtjb25zdCB0PXJ0LmdldChyKTtyZXR1cm4gdC5oYXMoZSl8fHQuc2V0KGUsbmV3IFNldCksdC5nZXQoZSl9ZnVuY3Rpb24gT2UocixlKXtjb25zdCB0PXR5cGVvZiBlPT0ic3RyaW5nInx8dHlwZW9mIGU9PSJzeW1ib2wiP2U6anQsbj1DZS5nZXQocik7cmV0dXJuIG4uaGFzKHQpfHxuLnNldCh0LG5ldyBTZXQpLG4uZ2V0KHQpfWZ1bmN0aW9uIHhzKHIsZSx0KXtjb25zdCBuPUNlLmdldChyKTtpZihuLmhhcyhlKSlmb3IoY29uc3QgaSBvZiBuLmdldChlKSlpLmVucXVldWUodCk7aWYobi5oYXMoanQpKXtjb25zdCBpPVByb21pc2UuYWxsKFtlLHRdKTtmb3IoY29uc3QgbyBvZiBuLmdldChqdCkpby5lbnF1ZXVlKGkpfX1mdW5jdGlvbiB5bihyLGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtsZXQgdD0hMSxuPSgpPT57fSxpPVtdO2NvbnN0IG89e2VucXVldWUocyl7aS5wdXNoKHMpLG4oKX0sZmluaXNoKCl7dD0hMCxuKCl9fTtmb3IoY29uc3QgcyBvZiBlKU9lKHIscykuYWRkKG8pO3JldHVybnthc3luYyBuZXh0KCl7cmV0dXJuIGk/aS5sZW5ndGg9PT0wP3Q/KGk9dm9pZCAwLHRoaXMubmV4dCgpKTooYXdhaXQgbmV3IFByb21pc2Uocz0+e249c30pLHRoaXMubmV4dCgpKTp7ZG9uZTohMSx2YWx1ZTphd2FpdCBpLnNoaWZ0KCl9Ontkb25lOiEwfX0sYXN5bmMgcmV0dXJuKHMpe2k9dm9pZCAwO2Zvcihjb25zdCBhIG9mIGUpT2UocixhKS5kZWxldGUobyk7cmV0dXJuIG4oKSxhcmd1bWVudHMubGVuZ3RoPjA/e2RvbmU6ITAsdmFsdWU6YXdhaXQgc306e2RvbmU6ITB9fSxbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCl7cmV0dXJuIHRoaXN9fX1mdW5jdGlvbiBfbihyKXtpZihyPT09dm9pZCAwKXJldHVybiB4bjtpZighQXJyYXkuaXNBcnJheShyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyIpO2Zvcihjb25zdCBlIG9mIHIpaWYoIXhuLmluY2x1ZGVzKGUpKXRocm93IHR5cGVvZiBlIT0ic3RyaW5nIj9uZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIGVsZW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpOm5ldyBFcnJvcihgJHtlfSBpcyBub3QgRW1pdHRlcnkgbWV0aG9kYCk7cmV0dXJuIHJ9Y29uc3QgWHQ9cj0+cj09PW50fHxyPT09aXQ7Y2xhc3MgaGV7c3RhdGljIG1peGluKGUsdCl7cmV0dXJuIHQ9X24odCksbj0+e2lmKHR5cGVvZiBuIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImB0YXJnZXRgIG11c3QgYmUgZnVuY3Rpb24iKTtmb3IoY29uc3QgcyBvZiB0KWlmKG4ucHJvdG90eXBlW3NdIT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihgVGhlIHByb3BlcnR5IFxgJHtzfVxgIGFscmVhZHkgZXhpc3RzIG9uIFxgdGFyZ2V0XGBgKTtmdW5jdGlvbiBpKCl7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2VudW1lcmFibGU6ITEsdmFsdWU6bmV3IGhlfSksdGhpc1tlXX1PYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsZSx7ZW51bWVyYWJsZTohMSxnZXQ6aX0pO2NvbnN0IG89cz0+ZnVuY3Rpb24oLi4uYSl7cmV0dXJuIHRoaXNbZV1bc10oLi4uYSl9O2Zvcihjb25zdCBzIG9mIHQpT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLHMse2VudW1lcmFibGU6ITEsdmFsdWU6byhzKX0pO3JldHVybiBufX1zdGF0aWMgZ2V0IGlzRGVidWdFbmFibGVkKCl7aWYodHlwZW9mIHByb2Nlc3MhPSJvYmplY3QiKXJldHVybiBxdDtjb25zdHtlbnY6ZX09cHJvY2Vzc3x8e2Vudjp7fX07cmV0dXJuIGUuREVCVUc9PT0iZW1pdHRlcnkifHxlLkRFQlVHPT09IioifHxxdH1zdGF0aWMgc2V0IGlzRGVidWdFbmFibGVkKGUpe3F0PWV9Y29uc3RydWN0b3IoZT17fSl7c2Uuc2V0KHRoaXMsbmV3IFNldCkscnQuc2V0KHRoaXMsbmV3IE1hcCksQ2Uuc2V0KHRoaXMsbmV3IE1hcCksdGhpcy5kZWJ1Zz1lLmRlYnVnfHx7fSx0aGlzLmRlYnVnLmVuYWJsZWQ9PT12b2lkIDAmJih0aGlzLmRlYnVnLmVuYWJsZWQ9ITEpLHRoaXMuZGVidWcubG9nZ2VyfHwodGhpcy5kZWJ1Zy5sb2dnZXI9KHQsbixpLG8pPT57bz1KU09OLnN0cmluZ2lmeShvKSx0eXBlb2YgaT09InN5bWJvbCImJihpPWkudG9TdHJpbmcoKSk7Y29uc3Qgcz1uZXcgRGF0ZSxhPWAke3MuZ2V0SG91cnMoKX06JHtzLmdldE1pbnV0ZXMoKX06JHtzLmdldFNlY29uZHMoKX0uJHtzLmdldE1pbGxpc2Vjb25kcygpfWA7Y29uc29sZS5sb2coYFske2F9XVtlbWl0dGVyeToke3R9XVske259XSBFdmVudCBOYW1lOiAke2l9CglkYXRhOiAke299YCl9KX1sb2dJZkRlYnVnRW5hYmxlZChlLHQsbil7KGhlLmlzRGVidWdFbmFibGVkfHx0aGlzLmRlYnVnLmVuYWJsZWQpJiZ0aGlzLmRlYnVnLmxvZ2dlcihlLHRoaXMuZGVidWcubmFtZSx0LG4pfW9uKGUsdCl7b3QodCksZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCBuIG9mIGUpd2UobiksUmUodGhpcyxuKS5hZGQodCksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlIixuLHZvaWQgMCksWHQobil8fHRoaXMuZW1pdChudCx7ZXZlbnROYW1lOm4sbGlzdGVuZXI6dH0pO3JldHVybiB0aGlzLm9mZi5iaW5kKHRoaXMsZSx0KX1vZmYoZSx0KXtvdCh0KSxlPUFycmF5LmlzQXJyYXkoZSk/ZTpbZV07Zm9yKGNvbnN0IG4gb2YgZSl3ZShuKSxSZSh0aGlzLG4pLmRlbGV0ZSh0KSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZSIsbix2b2lkIDApLFh0KG4pfHx0aGlzLmVtaXQoaXQse2V2ZW50TmFtZTpuLGxpc3RlbmVyOnR9KX1vbmNlKGUpe3JldHVybiBuZXcgUHJvbWlzZSh0PT57Y29uc3Qgbj10aGlzLm9uKGUsaT0+e24oKSx0KGkpfSl9KX1ldmVudHMoZSl7ZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCB0IG9mIGUpd2UodCk7cmV0dXJuIHluKHRoaXMsZSl9YXN5bmMgZW1pdChlLHQpe3dlKGUpLHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXQiLGUsdCkseHModGhpcyxlLHQpO2NvbnN0IG49UmUodGhpcyxlKSxpPXNlLmdldCh0aGlzKSxvPVsuLi5uXSxzPVh0KGUpP1tdOlsuLi5pXTthd2FpdCBwbixhd2FpdCBQcm9taXNlLmFsbChbLi4uby5tYXAoYXN5bmMgYT0+e2lmKG4uaGFzKGEpKXJldHVybiBhKHQpfSksLi4ucy5tYXAoYXN5bmMgYT0+e2lmKGkuaGFzKGEpKXJldHVybiBhKGUsdCl9KV0pfWFzeW5jIGVtaXRTZXJpYWwoZSx0KXt3ZShlKSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJlbWl0U2VyaWFsIixlLHQpO2NvbnN0IG49UmUodGhpcyxlKSxpPXNlLmdldCh0aGlzKSxvPVsuLi5uXSxzPVsuLi5pXTthd2FpdCBwbjtmb3IoY29uc3QgYSBvZiBvKW4uaGFzKGEpJiZhd2FpdCBhKHQpO2Zvcihjb25zdCBhIG9mIHMpaS5oYXMoYSkmJmF3YWl0IGEoZSx0KX1vbkFueShlKXtyZXR1cm4gb3QoZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlQW55Iix2b2lkIDAsdm9pZCAwKSxzZS5nZXQodGhpcykuYWRkKGUpLHRoaXMuZW1pdChudCx7bGlzdGVuZXI6ZX0pLHRoaXMub2ZmQW55LmJpbmQodGhpcyxlKX1hbnlFdmVudCgpe3JldHVybiB5bih0aGlzKX1vZmZBbnkoZSl7b3QoZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgidW5zdWJzY3JpYmVBbnkiLHZvaWQgMCx2b2lkIDApLHRoaXMuZW1pdChpdCx7bGlzdGVuZXI6ZX0pLHNlLmdldCh0aGlzKS5kZWxldGUoZSl9Y2xlYXJMaXN0ZW5lcnMoZSl7ZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCB0IG9mIGUpaWYodGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgiY2xlYXIiLHQsdm9pZCAwKSx0eXBlb2YgdD09InN0cmluZyJ8fHR5cGVvZiB0PT0ic3ltYm9sIil7UmUodGhpcyx0KS5jbGVhcigpO2NvbnN0IG49T2UodGhpcyx0KTtmb3IoY29uc3QgaSBvZiBuKWkuZmluaXNoKCk7bi5jbGVhcigpfWVsc2V7c2UuZ2V0KHRoaXMpLmNsZWFyKCk7Zm9yKGNvbnN0IG4gb2YgcnQuZ2V0KHRoaXMpLnZhbHVlcygpKW4uY2xlYXIoKTtmb3IoY29uc3QgbiBvZiBDZS5nZXQodGhpcykudmFsdWVzKCkpe2Zvcihjb25zdCBpIG9mIG4paS5maW5pc2goKTtuLmNsZWFyKCl9fX1saXN0ZW5lckNvdW50KGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtsZXQgdD0wO2Zvcihjb25zdCBuIG9mIGUpe2lmKHR5cGVvZiBuPT0ic3RyaW5nIil7dCs9c2UuZ2V0KHRoaXMpLnNpemUrUmUodGhpcyxuKS5zaXplK09lKHRoaXMsbikuc2l6ZStPZSh0aGlzKS5zaXplO2NvbnRpbnVlfXR5cGVvZiBuPCJ1IiYmd2UobiksdCs9c2UuZ2V0KHRoaXMpLnNpemU7Zm9yKGNvbnN0IGkgb2YgcnQuZ2V0KHRoaXMpLnZhbHVlcygpKXQrPWkuc2l6ZTtmb3IoY29uc3QgaSBvZiBDZS5nZXQodGhpcykudmFsdWVzKCkpdCs9aS5zaXplfXJldHVybiB0fWJpbmRNZXRob2RzKGUsdCl7aWYodHlwZW9mIGUhPSJvYmplY3QifHxlPT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJgdGFyZ2V0YCBtdXN0IGJlIGFuIG9iamVjdCIpO3Q9X24odCk7Zm9yKGNvbnN0IG4gb2YgdCl7aWYoZVtuXSE9PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7bn1cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTohMSx2YWx1ZTp0aGlzW25dLmJpbmQodGhpcyl9KX19fWNvbnN0IHhuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlLnByb3RvdHlwZSkuZmlsdGVyKHI9PnIhPT0iY29uc3RydWN0b3IiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaGUsImxpc3RlbmVyQWRkZWQiLHt2YWx1ZTpudCx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoZSwibGlzdGVuZXJSZW1vdmVkIix7dmFsdWU6aXQsd3JpdGFibGU6ITEsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITF9KTt2YXIgWXQ9aGU7ZnVuY3Rpb24gZ3Mocil7cmV0dXJuIHR5cGVvZiByPT0ib2JqZWN0IiYmciE9PW51bGwmJiJtZXNzYWdlImluIHImJnR5cGVvZiByLm1lc3NhZ2U9PSJzdHJpbmcifWZ1bmN0aW9uIGJzKHIpe2lmKGdzKHIpKXJldHVybiByO3RyeXtyZXR1cm4gbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHIpKX1jYXRjaHtyZXR1cm4gbmV3IEVycm9yKFN0cmluZyhyKSl9fWZ1bmN0aW9uIFF0KHIpe3JldHVybiBicyhyKS5tZXNzYWdlfXZhciBLdD0ocj0+KHIucGlwZWxpbmVfZW5kZWQ9InBpcGVsaW5lX2VuZGVkIixyLnBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3I9InBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3IiLHIucGlwZWxpbmVfc3RhcnRlZD0icGlwZWxpbmVfc3RhcnRlZCIsci5waXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3I9InBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciIsci5waXBlbGluZV9yZXN0YXJ0ZWQ9InBpcGVsaW5lX3Jlc3RhcnRlZCIsci5waXBlbGluZV9yZXN0YXJ0ZWRfd2l0aF9lcnJvcj0icGlwZWxpbmVfcmVzdGFydGVkX3dpdGhfZXJyb3IiLHIpKShLdHx8e30pO2NvbnN0IHZzPTUwMCxFcz0uODtjbGFzcyBUcyBleHRlbmRzIFl0e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmluZGV4Xz10LHRoaXMudXVpZF89aG4oKSx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz0wLHRoaXMudHJhbnNmb3JtZXJfPWUsdGhpcy5zaG91bGRTdG9wXz0hMSx0aGlzLmlzRmxhc2hlZF89ITEsdGhpcy5mcmFtZXNGcm9tU291cmNlXz0wLHRoaXMuZnBzXz0wLHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz0wLHRoaXMudmlkZW9IZWlnaHRfPTAsdGhpcy52aWRlb1dpZHRoXz0wLHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfPS0xLHRoaXMudHJhbnNmb3JtZXJUeXBlXz0iQ3VzdG9tIiwiZ2V0VHJhbnNmb3JtZXJUeXBlImluIGUmJih0aGlzLnRyYW5zZm9ybWVyVHlwZV89ZS5nZXRUcmFuc2Zvcm1lclR5cGUoKSk7Y29uc3Qgbj1uZXcgSCgpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmd1aWQodGhpcy51dWlkXykudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJDcmVhdGUiKS5idWlsZCgpO1YucmVwb3J0KG4pfXNldFRyYWNrRXhwZWN0ZWRSYXRlKGUpe3RoaXMudHJhY2tFeHBlY3RlZFJhdGVfPWV9YXN5bmMgc3RhcnQoZSl7aWYodGhpcy5jb250cm9sbGVyXz1lLHRoaXMudHJhbnNmb3JtZXJfJiZ0eXBlb2YgdGhpcy50cmFuc2Zvcm1lcl8uc3RhcnQ9PSJmdW5jdGlvbiIpdHJ5e2F3YWl0IHRoaXMudHJhbnNmb3JtZXJfLnN0YXJ0KGUpfWNhdGNoKHQpe2NvbnN0IG49bmV3IEgoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLnRyYW5zZm9ybWVyX3N0YXJ0KS50cmFuc2Zvcm1lclR5cGUodGhpcy50cmFuc2Zvcm1lclR5cGVfKS52YXJpYXRpb24oIkVycm9yIikuZXJyb3IoUXQodCkpLmJ1aWxkKCk7Vi5yZXBvcnQobik7Y29uc3QgaT17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sZXJyb3I6dCxmdW5jdGlvbjoic3RhcnQifTt0aGlzLmVtaXQoImVycm9yIixpKX19YXN5bmMgdHJhbnNmb3JtKGUsdCl7dmFyIG4saSxvLHM7aWYodGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfPT09MCYmKHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz1EYXRlLm5vdygpKSxlIGluc3RhbmNlb2YgVmlkZW9GcmFtZSYmKHRoaXMudmlkZW9IZWlnaHRfPShuPWU9PW51bGw/dm9pZCAwOmUuZGlzcGxheUhlaWdodCkhPW51bGw/bjowLHRoaXMudmlkZW9XaWR0aF89KGk9ZT09bnVsbD92b2lkIDA6ZS5kaXNwbGF5V2lkdGgpIT1udWxsP2k6MCksKyt0aGlzLmZyYW1lc0Zyb21Tb3VyY2VfLHRoaXMudHJhbnNmb3JtZXJfKWlmKHRoaXMuc2hvdWxkU3RvcF8pY29uc29sZS53YXJuKCJbUGlwZWxpbmVdIGZsdXNoIGZyb20gdHJhbnNmb3JtIiksZS5jbG9zZSgpLHRoaXMuZmx1c2godCksdC50ZXJtaW5hdGUoKTtlbHNlIHRyeXthd2FpdCgocz0obz10aGlzLnRyYW5zZm9ybWVyXykudHJhbnNmb3JtKT09bnVsbD92b2lkIDA6cy5jYWxsKG8sZSx0KSksKyt0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXyx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz09PXZzJiZ0aGlzLm1lZGlhVHJhbnNmb3JtZXJRb3NSZXBvcnQoKX1jYXRjaChhKXtjb25zdCB1PW5ldyBIKCkuYWN0aW9uKCJNZWRpYVRyYW5zZm9ybWVyIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy50cmFuc2Zvcm1lcl90cmFuc2Zvcm0pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRXJyb3IiKS5lcnJvcihRdChhKSkuYnVpbGQoKTtWLnJlcG9ydCh1KTtjb25zdCBmPXtldmVudE1ldGFEYXRhOnt0cmFuc2Zvcm1lckluZGV4OnRoaXMuaW5kZXhffSxlcnJvcjphLGZ1bmN0aW9uOiJ0cmFuc2Zvcm0ifTt0aGlzLmVtaXQoImVycm9yIixmKX19YXN5bmMgZmx1c2goZSl7aWYodGhpcy50cmFuc2Zvcm1lcl8mJnR5cGVvZiB0aGlzLnRyYW5zZm9ybWVyXy5mbHVzaD09ImZ1bmN0aW9uIiYmIXRoaXMuaXNGbGFzaGVkXyl7dGhpcy5pc0ZsYXNoZWRfPSEwO3RyeXthd2FpdCB0aGlzLnRyYW5zZm9ybWVyXy5mbHVzaChlKX1jYXRjaChuKXtjb25zdCBpPW5ldyBIKCkuYWN0aW9uKCJNZWRpYVRyYW5zZm9ybWVyIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy50cmFuc2Zvcm1lcl9mbHVzaCkudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJFcnJvciIpLmVycm9yKFF0KG4pKS5idWlsZCgpO1YucmVwb3J0KGkpO2NvbnN0IG89e2V2ZW50TWV0YURhdGE6e3RyYW5zZm9ybWVySW5kZXg6dGhpcy5pbmRleF99LGVycm9yOm4sZnVuY3Rpb246ImZsdXNoIn07dGhpcy5lbWl0KCJlcnJvciIsbyl9fXRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydCgpO2NvbnN0IHQ9bmV3IEgoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRGVsZXRlIikuYnVpbGQoKTtWLnJlcG9ydCh0KX1zdG9wKCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gU3RvcCBzdHJlYW0uIiksdGhpcy5jb250cm9sbGVyXyYmKHRoaXMuZmx1c2godGhpcy5jb250cm9sbGVyXyksdGhpcy5jb250cm9sbGVyXy50ZXJtaW5hdGUoKSksdGhpcy5zaG91bGRTdG9wXz0hMH1tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0KCl7bGV0IGU9KERhdGUubm93KCktdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfKS8xZTMsdD10aGlzLmZyYW1lc0Zyb21Tb3VyY2VfL2Usbj10aGlzLmZyYW1lc1RyYW5zZm9ybWVkXy9lO2lmKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfIT0tMSYmdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8qRXM+dCl7Y29uc3Qgbz17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sd2FybmluZ1R5cGU6ImZwc19kcm9wIixkcm9wSW5mbzp7cmVxdWVzdGVkOnRoaXMudHJhY2tFeHBlY3RlZFJhdGVfLGN1cnJlbnQ6dH19O3RoaXMuZW1pdCgid2FybiIsbyl9Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmZwcyh0KS50cmFuc2Zvcm1lZEZwcyhuKS5mcmFtZXNUcmFuc2Zvcm1lZCh0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXykuZ3VpZCh0aGlzLnV1aWRfKS50cmFuc2Zvcm1lclR5cGUodGhpcy50cmFuc2Zvcm1lclR5cGVfKS52aWRlb0hlaWdodCh0aGlzLnZpZGVvSGVpZ2h0XykudmlkZW9XaWR0aCh0aGlzLnZpZGVvV2lkdGhfKS52YXJpYXRpb24oIlFvUyIpLmJ1aWxkKCk7Vi5yZXBvcnQoaSksdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfPTAsdGhpcy5mcmFtZXNGcm9tU291cmNlXz0wLHRoaXMuZnJhbWVzVHJhbnNmb3JtZWRfPTB9fWNsYXNzIEFzIGV4dGVuZHMgWXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnRyYW5zZm9ybWVyc189W10sdGhpcy50cmFja0V4cGVjdGVkUmF0ZV89LTE7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2xldCBuPW5ldyBUcyhlW3RdLHQpO24ub24oImVycm9yIixpPT57dGhpcy5lbWl0KCJlcnJvciIsaSl9KSxuLm9uKCJ3YXJuIixpPT57dGhpcy5lbWl0KCJ3YXJuIixpKX0pLHRoaXMudHJhbnNmb3JtZXJzXy5wdXNoKG4pfX1zZXRUcmFja0V4cGVjdGVkUmF0ZShlKXt0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz1lO2ZvcihsZXQgdCBvZiB0aGlzLnRyYW5zZm9ybWVyc18pdC5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyl9YXN5bmMgc3RhcnQoZSx0KXtpZighdGhpcy50cmFuc2Zvcm1lcnNffHx0aGlzLnRyYW5zZm9ybWVyc18ubGVuZ3RoPT09MCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gTm8gdHJhbnNmb3JtZXJzLiIpO3JldHVybn10cnl7bGV0IG49ZTtmb3IobGV0IGkgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKWU9ZS5waXBlVGhyb3VnaChuZXcgVHJhbnNmb3JtU3RyZWFtKGkpKTtlLnBpcGVUbyh0KS50aGVuKGFzeW5jKCk9Pntjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBTZXR1cC4iKSxhd2FpdCB0LmFib3J0KCksYXdhaXQgbi5jYW5jZWwoKSx0aGlzLmVtaXQoInBpcGVsaW5lSW5mbyIsInBpcGVsaW5lX2VuZGVkIil9KS5jYXRjaChhc3luYyBpPT57ZS5jYW5jZWwoKS50aGVuKCgpPT57Y29uc29sZS5sb2coIltQaXBlbGluZV0gU2h1dHRpbmcgZG93biBzdHJlYW1zIGFmdGVyIGFib3J0LiIpfSkuY2F0Y2gobz0+e2NvbnNvbGUuZXJyb3IoIltQaXBlbGluZV0gRXJyb3IgZnJvbSBzdHJlYW0gdHJhbnNmb3JtOiIsbyl9KSxhd2FpdCB0LmFib3J0KGkpLGF3YWl0IG4uY2FuY2VsKGkpLHRoaXMuZW1pdCgicGlwZWxpbmVJbmZvIiwicGlwZWxpbmVfZW5kZWRfd2l0aF9lcnJvciIpfSl9Y2F0Y2h7dGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLCJwaXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3IiKSx0aGlzLmRlc3Ryb3koKTtyZXR1cm59dGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLCJwaXBlbGluZV9zdGFydGVkIiksY29uc29sZS5sb2coIltQaXBlbGluZV0gUGlwZWxpbmUgc3RhcnRlZC4iKX1hc3luYyBkZXN0cm95KCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gRGVzdHJveWluZyBQaXBlbGluZS4iKTtmb3IobGV0IGUgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKWUuc3RvcCgpfX1jbGFzcyB3cyBleHRlbmRzIFl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnV1aWRfPWhuKCksdGhpcy50cmFja0V4cGVjdGVkUmF0ZV89LTE7Y29uc3QgZT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLnZhcmlhdGlvbigiQ3JlYXRlIikuYnVpbGQoKTtWLnJlcG9ydChlKX1zZXRUcmFja0V4cGVjdGVkUmF0ZShlKXt0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz1lLHRoaXMucGlwZWxpbmVfJiZ0aGlzLnBpcGVsaW5lXy5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyl9dHJhbnNmb3JtKGUsdCl7cmV0dXJuIHRoaXMucmVhZGFibGVfPWUsdGhpcy53cml0YWJsZV89dCx0aGlzLnRyYW5zZm9ybUludGVybmFsKCl9dHJhbnNmb3JtSW50ZXJuYWwoKXtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9PntpZighdGhpcy50cmFuc2Zvcm1lcnNffHx0aGlzLnRyYW5zZm9ybWVyc18ubGVuZ3RoPT09MCl7Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLnRyYW5zZm9ybWVyX25vbmUpLnZhcmlhdGlvbigiRXJyb3IiKS5idWlsZCgpO1YucmVwb3J0KGkpLHQoIltNZWRpYVByb2Nlc3Nvcl0gTmVlZCB0byBzZXQgdHJhbnNmb3JtZXJzLiIpO3JldHVybn1pZighdGhpcy5yZWFkYWJsZV8pe2NvbnN0IGk9bmV3IEgoKS5hY3Rpb24oIk1lZGlhUHJvY2Vzc29yIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy5yZWFkYWJsZV9udWxsKS52YXJpYXRpb24oIkVycm9yIikuYnVpbGQoKTtWLnJlcG9ydChpKSx0KCJbTWVkaWFQcm9jZXNzb3JdIFJlYWRhYmxlIGlzIG51bGwuIik7cmV0dXJufWlmKCF0aGlzLndyaXRhYmxlXyl7Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLndyaXRhYmxlX251bGwpLnZhcmlhdGlvbigiRXJyb3IiKS5idWlsZCgpO1YucmVwb3J0KGkpLHQoIltNZWRpYVByb2Nlc3Nvcl0gV3JpdGFibGUgaXMgbnVsbC4iKTtyZXR1cm59bGV0IG49ITE7dGhpcy5waXBlbGluZV8mJihuPSEwLHRoaXMucGlwZWxpbmVfLmNsZWFyTGlzdGVuZXJzKCksdGhpcy5waXBlbGluZV8uZGVzdHJveSgpKSx0aGlzLnBpcGVsaW5lXz1uZXcgQXModGhpcy50cmFuc2Zvcm1lcnNfKSx0aGlzLnBpcGVsaW5lXy5vbigid2FybiIsaT0+e3RoaXMuZW1pdCgid2FybiIsaSl9KSx0aGlzLnBpcGVsaW5lXy5vbigiZXJyb3IiLGk9Pnt0aGlzLmVtaXQoImVycm9yIixpKX0pLHRoaXMucGlwZWxpbmVfLm9uKCJwaXBlbGluZUluZm8iLGk9PntuJiYoaT09PSJwaXBlbGluZV9zdGFydGVkIj9pPUt0LnBpcGVsaW5lX3Jlc3RhcnRlZDppPT09InBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciImJihpPUt0LnBpcGVsaW5lX3Jlc3RhcnRlZF93aXRoX2Vycm9yKSksdGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLGkpfSksdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8hPS0xJiZ0aGlzLnBpcGVsaW5lXy5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyksdGhpcy5waXBlbGluZV8uc3RhcnQodGhpcy5yZWFkYWJsZV8sdGhpcy53cml0YWJsZV8pLnRoZW4oKCk9PntlKCl9KS5jYXRjaChpPT57dChpKX0pfSl9c2V0VHJhbnNmb3JtZXJzKGUpe2NvbnN0IHQ9bmV3IEgoKS5hY3Rpb24oIk1lZGlhUHJvY2Vzc29yIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLnVwZGF0ZXMudHJhbnNmb3JtZXJfbmV3KS52YXJpYXRpb24oIlVwZGF0ZSIpLmJ1aWxkKCk7cmV0dXJuIFYucmVwb3J0KHQpLHRoaXMudHJhbnNmb3JtZXJzXz1lLHRoaXMucmVhZGFibGVfJiZ0aGlzLndyaXRhYmxlXz90aGlzLnRyYW5zZm9ybUludGVybmFsKCk6UHJvbWlzZS5yZXNvbHZlKCl9ZGVzdHJveSgpe3JldHVybiBuZXcgUHJvbWlzZShlPT57dGhpcy5waXBlbGluZV8mJnRoaXMucGlwZWxpbmVfLmRlc3Ryb3koKTtjb25zdCB0PW5ldyBIKCkuYWN0aW9uKCJNZWRpYVByb2Nlc3NvciIpLmd1aWQodGhpcy51dWlkXykudmFyaWF0aW9uKCJEZWxldGUiKS5idWlsZCgpO1YucmVwb3J0KHQpLGUoKX0pfX12YXIgc3Q9KHI9PihyLkxvdz0iTG93IixyLkhpZ2g9IkhpZ2giLHIpKShzdHx8e30pO2FzeW5jIGZ1bmN0aW9uIGduKHIpe3JldHVybiBuZXcgUHJvbWlzZShlPT57c2V0VGltZW91dCgoKT0+e2UoKX0scil9KX1jbGFzcyBSc3tjb25zdHJ1Y3RvcihlKXtwKHRoaXMsImNvbnRleHQiKTtwKHRoaXMsImV4dGVuc2lvbiIpO3AodGhpcywicXVlcmllcyIsW10pO3AodGhpcywiYWN0aXZlUXVlcnkiKTt0aGlzLmNvbnRleHQ9ZSx0aGlzLmV4dGVuc2lvbj1lLmdldEV4dGVuc2lvbigiRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5X3dlYmdsMiIpfXN0YXJ0KCl7fXN0b3AoKXt0aGlzLmFjdGl2ZVF1ZXJ5JiZ0aGlzLmNvbnRleHQuZW5kUXVlcnkodGhpcy5leHRlbnNpb24uVElNRV9FTEFQU0VEX0VYVCl9cHVzaENvbnRleHQoZSl7dGhpcy5jcmVhdGVRdWVyeSgiUFVTSCIsZSl9cG9wQ29udGV4dChlKXt0aGlzLmNyZWF0ZVF1ZXJ5KCJQT1AiLGUpfWNyZWF0ZVF1ZXJ5KGUsdCl7dGhpcy5hY3RpdmVRdWVyeSYmdGhpcy5jb250ZXh0LmVuZFF1ZXJ5KHRoaXMuZXh0ZW5zaW9uLlRJTUVfRUxBUFNFRF9FWFQpLHRoaXMuYWN0aXZlUXVlcnk9dGhpcy5jb250ZXh0LmNyZWF0ZVF1ZXJ5KCksdGhpcy5jb250ZXh0LmJlZ2luUXVlcnkodGhpcy5leHRlbnNpb24uVElNRV9FTEFQU0VEX0VYVCx0aGlzLmFjdGl2ZVF1ZXJ5KSx0aGlzLnF1ZXJpZXMucHVzaCh7bmFtZTp0LGFjdGlvbjplLHF1ZXJ5OnRoaXMuYWN0aXZlUXVlcnl9KX1hc3luYyBnZXRSZXNvbHZlZFF1ZXJpZXMoKXtjb25zdCBlPShhd2FpdCBQcm9taXNlLmFsbChbLi4udGhpcy5xdWVyaWVzXS5tYXAodD0+dGhpcy5yZXNvbHZlUXVlcnkodCkpKSkuZmlsdGVyKHQ9PnQpO2ZvcihsZXQgdD0xO3Q8ZS5sZW5ndGg7Kyt0KWVbdF0udGltZXN0YW1wKz1lW3QtMV0uZHVyYXRpb24rZVt0LTFdLnRpbWVzdGFtcDtyZXR1cm4gZX1hc3luYyByZXNvbHZlUXVlcnkoZSl7aWYoIWF3YWl0IHRoaXMuYXdhaXRRdWVyeUF2YWlsYWJsZShlKSl7Y29uc29sZS5sb2coIlVuYXdhaXRhYmxlIHF1ZXJ5IixlKTtyZXR1cm59aWYodGhpcy5jb250ZXh0LmdldFBhcmFtZXRlcih0aGlzLmV4dGVuc2lvbi5HUFVfRElTSk9JTlRfRVhUKSl7Y29uc29sZS5sb2coIkRpc2pvaW50ZWQgcXVlcnkiLGUpO3JldHVybn1yZXR1cm57Li4uZSxkdXJhdGlvbjp0aGlzLmNvbnRleHQuZ2V0UXVlcnlQYXJhbWV0ZXIoZS5xdWVyeSx0aGlzLmNvbnRleHQuUVVFUllfUkVTVUxUKSx0aW1lc3RhbXA6MH19YXN5bmMgYXdhaXRRdWVyeUF2YWlsYWJsZShlKXtmb3IobGV0IHQ9MDt0PDEwOysrdCl7aWYodGhpcy5jb250ZXh0LmdldFF1ZXJ5UGFyYW1ldGVyKGUucXVlcnksdGhpcy5jb250ZXh0LlFVRVJZX1JFU1VMVF9BVkFJTEFCTEUpKXJldHVybiBlO2F3YWl0IGduKDIwMCl9fX0vKiBAbGljZW5zZSB0d2dsLmpzIDUuMi4wIENvcHlyaWdodCAoYykgMjAxNSwgR3JlZ2cgVGF2YXJlcyBBbGwgUmlnaHRzIFJlc2VydmVkLgpBdmFpbGFibGUgdmlhIHRoZSBNSVQgbGljZW5zZS4Kc2VlOiBodHRwOi8vZ2l0aHViLmNvbS9ncmVnZ21hbi90d2dsLmpzIGZvciBkZXRhaWxzICovY29uc3QgSnQ9NTEyMCxOZT01MTIxLFp0PTUxMjIsZXI9NTEyMyx0cj01MTI0LHJyPTUxMjUsbnI9NTEyNixTcz0zMjgxOSxJcz0zMjgyMCxGcz0zMzYzNSxQcz01MTMxLERzPTMzNjQwLE1zPTM1ODk5LENzPTM1OTAyLE9zPTM2MjY5LE5zPTM0MDQyLGJuPXt9O3tjb25zdCByPWJuO3JbSnRdPUludDhBcnJheSxyW05lXT1VaW50OEFycmF5LHJbWnRdPUludDE2QXJyYXkscltlcl09VWludDE2QXJyYXksclt0cl09SW50MzJBcnJheSxyW3JyXT1VaW50MzJBcnJheSxyW25yXT1GbG9hdDMyQXJyYXkscltTc109VWludDE2QXJyYXkscltJc109VWludDE2QXJyYXkscltGc109VWludDE2QXJyYXkscltQc109VWludDE2QXJyYXkscltEc109VWludDMyQXJyYXkscltNc109VWludDMyQXJyYXkscltDc109VWludDMyQXJyYXkscltPc109VWludDMyQXJyYXkscltOc109VWludDMyQXJyYXl9ZnVuY3Rpb24gaXIocil7aWYociBpbnN0YW5jZW9mIEludDhBcnJheSlyZXR1cm4gSnQ7aWYociBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fHIgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSlyZXR1cm4gTmU7aWYociBpbnN0YW5jZW9mIEludDE2QXJyYXkpcmV0dXJuIFp0O2lmKHIgaW5zdGFuY2VvZiBVaW50MTZBcnJheSlyZXR1cm4gZXI7aWYociBpbnN0YW5jZW9mIEludDMyQXJyYXkpcmV0dXJuIHRyO2lmKHIgaW5zdGFuY2VvZiBVaW50MzJBcnJheSlyZXR1cm4gcnI7aWYociBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSlyZXR1cm4gbnI7dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCB0eXBlZCBhcnJheSB0eXBlIil9ZnVuY3Rpb24gdm4ocil7aWYocj09PUludDhBcnJheSlyZXR1cm4gSnQ7aWYocj09PVVpbnQ4QXJyYXl8fHI9PT1VaW50OENsYW1wZWRBcnJheSlyZXR1cm4gTmU7aWYocj09PUludDE2QXJyYXkpcmV0dXJuIFp0O2lmKHI9PT1VaW50MTZBcnJheSlyZXR1cm4gZXI7aWYocj09PUludDMyQXJyYXkpcmV0dXJuIHRyO2lmKHI9PT1VaW50MzJBcnJheSlyZXR1cm4gcnI7aWYocj09PUZsb2F0MzJBcnJheSlyZXR1cm4gbnI7dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCB0eXBlZCBhcnJheSB0eXBlIil9ZnVuY3Rpb24gRW4ocil7Y29uc3QgZT1ibltyXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoInVua25vd24gZ2wgdHlwZSIpO3JldHVybiBlfWNvbnN0IGF0PXR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlcjwidSI/ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuYnVmZmVyJiYoZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8ZS5idWZmZXIgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlcil9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmJ1ZmZlciYmZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcn07ZnVuY3Rpb24gVG4oLi4ucil7Y29uc29sZS5lcnJvciguLi5yKX1jb25zdCBBbj1uZXcgTWFwO2Z1bmN0aW9uIHV0KHIsZSl7aWYoIXJ8fHR5cGVvZiByIT0ib2JqZWN0IilyZXR1cm4hMTtsZXQgdD1Bbi5nZXQoZSk7dHx8KHQ9bmV3IFdlYWtNYXAsQW4uc2V0KGUsdCkpO2xldCBuPXQuZ2V0KHIpO2lmKG49PT12b2lkIDApe2NvbnN0IGk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpO249aS5zdWJzdHJpbmcoOCxpLmxlbmd0aC0xKT09PWUsdC5zZXQocixuKX1yZXR1cm4gbn1mdW5jdGlvbiBVcyhyLGUpe3JldHVybiB0eXBlb2YgV2ViR0xCdWZmZXI8InUiJiZ1dChlLCJXZWJHTEJ1ZmZlciIpfWZ1bmN0aW9uIEJzKHIsZSl7cmV0dXJuIHR5cGVvZiBXZWJHTFJlbmRlcmJ1ZmZlcjwidSImJnV0KGUsIldlYkdMUmVuZGVyYnVmZmVyIil9ZnVuY3Rpb24gb3IocixlKXtyZXR1cm4gdHlwZW9mIFdlYkdMVGV4dHVyZTwidSImJnV0KGUsIldlYkdMVGV4dHVyZSIpfWZ1bmN0aW9uIGtzKHIsZSl7cmV0dXJuIHR5cGVvZiBXZWJHTFNhbXBsZXI8InUiJiZ1dChlLCJXZWJHTFNhbXBsZXIiKX1jb25zdCB3bj0zNTA0NCxwZT0zNDk2MixMcz0zNDk2Mywkcz0zNDY2MCxHcz01MTIwLHpzPTUxMjEsSHM9NTEyMixWcz01MTIzLFdzPTUxMjQsanM9NTEyNSxSbj01MTI2LFNuPXthdHRyaWJQcmVmaXg6IiJ9O2Z1bmN0aW9uIHFzKHIsZSx0LG4saSl7ci5iaW5kQnVmZmVyKGUsdCksci5idWZmZXJEYXRhKGUsbixpfHx3bil9ZnVuY3Rpb24gSW4ocixlLHQsbil7aWYoVXMocixlKSlyZXR1cm4gZTt0PXR8fHBlO2NvbnN0IGk9ci5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gcXMocix0LGksZSxuKSxpfWZ1bmN0aW9uIEZuKHIpe3JldHVybiByPT09ImluZGljZXMifWZ1bmN0aW9uIFhzKHIpe3JldHVybiByPT09SW50OEFycmF5fHxyPT09VWludDhBcnJheX1mdW5jdGlvbiBZcyhyKXtyZXR1cm4gci5sZW5ndGg/cjpyLmRhdGF9Y29uc3QgUXM9L2Nvb3JkfHRleHR1cmUvaSxLcz0vY29sb3J8Y29sb3VyL2k7ZnVuY3Rpb24gSnMocixlKXtsZXQgdDtpZihRcy50ZXN0KHIpP3Q9MjpLcy50ZXN0KHIpP3Q9NDp0PTMsZSV0PjApdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGd1ZXNzIG51bUNvbXBvbmVudHMgZm9yIGF0dHJpYnV0ZSAnJHtyfScuIFRyaWVkICR7dH0gYnV0ICR7ZX0gdmFsdWVzIGlzIG5vdCBldmVubHkgZGl2aXNpYmxlIGJ5ICR7dH0uIFlvdSBzaG91bGQgc3BlY2lmeSBpdC5gKTtyZXR1cm4gdH1mdW5jdGlvbiBacyhyLGUsdCl7cmV0dXJuIHIubnVtQ29tcG9uZW50c3x8ci5zaXplfHxKcyhlLHR8fFlzKHIpLmxlbmd0aCl9ZnVuY3Rpb24gUG4ocixlKXtpZihhdChyKSlyZXR1cm4gcjtpZihhdChyLmRhdGEpKXJldHVybiByLmRhdGE7QXJyYXkuaXNBcnJheShyKSYmKHI9e2RhdGE6cn0pO2xldCB0PXIudHlwZT9zcihyLnR5cGUpOnZvaWQgMDtyZXR1cm4gdHx8KEZuKGUpP3Q9VWludDE2QXJyYXk6dD1GbG9hdDMyQXJyYXkpLG5ldyB0KHIuZGF0YSl9ZnVuY3Rpb24gZWEocil7cmV0dXJuIHR5cGVvZiByPT0ibnVtYmVyIj9yOnI/dm4ocik6Um59ZnVuY3Rpb24gc3Iocil7cmV0dXJuIHR5cGVvZiByPT0ibnVtYmVyIj9FbihyKTpyfHxGbG9hdDMyQXJyYXl9ZnVuY3Rpb24gdGEocixlKXtyZXR1cm57YnVmZmVyOmUuYnVmZmVyLG51bVZhbHVlczoyKjMqNCx0eXBlOmVhKGUudHlwZSksYXJyYXlUeXBlOnNyKGUudHlwZSl9fWZ1bmN0aW9uIHJhKHIsZSl7Y29uc3QgdD1lLmRhdGF8fGUsbj1zcihlLnR5cGUpLGk9dCpuLkJZVEVTX1BFUl9FTEVNRU5ULG89ci5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gci5iaW5kQnVmZmVyKHBlLG8pLHIuYnVmZmVyRGF0YShwZSxpLGUuZHJhd1R5cGV8fHduKSx7YnVmZmVyOm8sbnVtVmFsdWVzOnQsdHlwZTp2bihuKSxhcnJheVR5cGU6bn19ZnVuY3Rpb24gbmEocixlLHQpe2NvbnN0IG49UG4oZSx0KTtyZXR1cm57YXJyYXlUeXBlOm4uY29uc3RydWN0b3IsYnVmZmVyOkluKHIsbix2b2lkIDAsZS5kcmF3VHlwZSksdHlwZTppcihuKSxudW1WYWx1ZXM6MH19ZnVuY3Rpb24gaWEocixlKXtjb25zdCB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKCFGbihuKSl7Y29uc3QgaT1lW25dLG89aS5hdHRyaWJ8fGkubmFtZXx8aS5hdHRyaWJOYW1lfHxTbi5hdHRyaWJQcmVmaXgrbjtpZihpLnZhbHVlKXtpZighQXJyYXkuaXNBcnJheShpLnZhbHVlKSYmIWF0KGkudmFsdWUpKXRocm93IG5ldyBFcnJvcigiYXJyYXkudmFsdWUgaXMgbm90IGFycmF5IG9yIHR5cGVkYXJyYXkiKTt0W29dPXt2YWx1ZTppLnZhbHVlfX1lbHNle2xldCBzO2kuYnVmZmVyJiZpLmJ1ZmZlciBpbnN0YW5jZW9mIFdlYkdMQnVmZmVyP3M9dGE6dHlwZW9mIGk9PSJudW1iZXIifHx0eXBlb2YgaS5kYXRhPT0ibnVtYmVyIj9zPXJhOnM9bmE7Y29uc3R7YnVmZmVyOmEsdHlwZTp1LG51bVZhbHVlczpmLGFycmF5VHlwZTpjfT1zKHIsaSxuKSxkPWkubm9ybWFsaXplIT09dm9pZCAwP2kubm9ybWFsaXplOlhzKGMpLHk9WnMoaSxuLGYpO3Rbb109e2J1ZmZlcjphLG51bUNvbXBvbmVudHM6eSx0eXBlOnUsbm9ybWFsaXplOmQsc3RyaWRlOmkuc3RyaWRlfHwwLG9mZnNldDppLm9mZnNldHx8MCxkaXZpc29yOmkuZGl2aXNvcj09PXZvaWQgMD92b2lkIDA6aS5kaXZpc29yLGRyYXdUeXBlOmkuZHJhd1R5cGV9fX19KSxyLmJpbmRCdWZmZXIocGUsbnVsbCksdH1mdW5jdGlvbiBvYShyLGUpe3JldHVybiBlPT09R3N8fGU9PT16cz8xOmU9PT1Ic3x8ZT09PVZzPzI6ZT09PVdzfHxlPT09anN8fGU9PT1Sbj80OjB9Y29uc3QgYXI9WyJwb3NpdGlvbiIsInBvc2l0aW9ucyIsImFfcG9zaXRpb24iXTtmdW5jdGlvbiBzYShyLGUpe2xldCB0LG47Zm9yKG49MDtuPGFyLmxlbmd0aCYmKHQ9YXJbbl0sISh0IGluIGV8fCh0PVNuLmF0dHJpYlByZWZpeCt0LHQgaW4gZSkpKTsrK24pO249PT1hci5sZW5ndGgmJih0PU9iamVjdC5rZXlzKGUpWzBdKTtjb25zdCBpPWVbdF07aWYoIWkuYnVmZmVyKXJldHVybiAxO3IuYmluZEJ1ZmZlcihwZSxpLmJ1ZmZlcik7Y29uc3Qgbz1yLmdldEJ1ZmZlclBhcmFtZXRlcihwZSwkcyk7ci5iaW5kQnVmZmVyKHBlLG51bGwpO2NvbnN0IHM9b2EocixpLnR5cGUpLGE9by9zLHU9aS5udW1Db21wb25lbnRzfHxpLnNpemUsZj1hL3U7aWYoZiUxIT09MCl0aHJvdyBuZXcgRXJyb3IoYG51bUNvbXBvbmVudHMgJHt1fSBub3QgY29ycmVjdCBmb3IgbGVuZ3RoICR7bGVuZ3RofWApO3JldHVybiBmfWZ1bmN0aW9uIGFhKHIsZSx0KXtjb25zdCBuPWlhKHIsZSksaT1PYmplY3QuYXNzaWduKHt9LHR8fHt9KTtpLmF0dHJpYnM9T2JqZWN0LmFzc2lnbih7fSx0P3QuYXR0cmliczp7fSxuKTtjb25zdCBvPWUuaW5kaWNlcztpZihvKXtjb25zdCBzPVBuKG8sImluZGljZXMiKTtpLmluZGljZXM9SW4ocixzLExzKSxpLm51bUVsZW1lbnRzPXMubGVuZ3RoLGkuZWxlbWVudFR5cGU9aXIocyl9ZWxzZSBpLm51bUVsZW1lbnRzfHwoaS5udW1FbGVtZW50cz1zYShyLGkuYXR0cmlicykpO3JldHVybiBpfWZ1bmN0aW9uIFVlKHIpe3JldHVybiEhci50ZXhTdG9yYWdlMkR9Y29uc3QgRG49ZnVuY3Rpb24oKXtjb25zdCByPXt9LGU9e307ZnVuY3Rpb24gdChuKXtjb25zdCBpPW4uY29uc3RydWN0b3IubmFtZTtpZighcltpXSl7Zm9yKGNvbnN0IG8gaW4gbilpZih0eXBlb2YgbltvXT09Im51bWJlciIpe2NvbnN0IHM9ZVtuW29dXTtlW25bb11dPXM/YCR7c30gfCAke299YDpvfXJbaV09ITB9fXJldHVybiBmdW5jdGlvbihpLG8pe3JldHVybiB0KGkpLGVbb118fCh0eXBlb2Ygbz09Im51bWJlciI/YDB4JHtvLnRvU3RyaW5nKDE2KX1gOm8pfX0oKSxhZT17dGV4dHVyZUNvbG9yOm5ldyBVaW50OEFycmF5KFsxMjgsMTkyLDI1NSwyNTVdKSx0ZXh0dXJlT3B0aW9uczp7fSxjcm9zc09yaWdpbjp2b2lkIDB9LEJlPWF0LE1uPWZ1bmN0aW9uKCl7bGV0IHI7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHI9cnx8KHR5cGVvZiBkb2N1bWVudDwidSImJmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTpudWxsKSxyfX0oKSxDbj02NDA2LFo9NjQwNyxGPTY0MDgsT249NjQwOSxObj02NDEwLGtlPTY0MDIsVW49MzQwNDEsY3Q9MzMwNzEsdWE9OTcyOCxjYT05NzI5LHVlPTM1NTMsY2U9MzQwNjcseWU9MzI4NzksX2U9MzU4NjYsdXI9MzQwNjksZmE9MzQwNzAsbGE9MzQwNzEsZGE9MzQwNzIsbWE9MzQwNzMsaGE9MzQwNzQsY3I9MTAyNDEsZnI9MTAyNDAsZnQ9MTAyNDIsbHQ9MTAyNDMsQm49MzI4ODIscGE9MzMwODIseWE9MzMwODMsX2E9MzMwODQseGE9MzMwODUsbHI9MzMxNyxrbj0zMzE0LExuPTMyODc4LCRuPTMzMTYsR249MzMxNSx6bj0zMjg3NyxnYT0zNzQ0MyxiYT0zNzQ0MSx2YT0zNzQ0MCxFYT0zMzMyMSxUYT0zNjc1NixBYT0zMzMyNSx3YT0zMzMyNixSYT0zMzMzMCxTYT0zMzMyOSxJYT0zMzMzOCxGYT0zMzMzNyxQYT0zMzM0MCxEYT0zMzMzOSxNYT0zMzMyMyxDYT0zNjc1NyxPYT0zMzMyNyxOYT0zMzMyOCxVYT0zMzMzNixCYT0zMzMzNSxrYT0zMzMzMixMYT0zMzMzMSwkYT0zMzMzNCxHYT0zMzMzMyx6YT0zMjg0OSxIYT0zNTkwNSxWYT0zNjE5NCxXYT0zNjc1OCxqYT0zNTg5OCxxYT0zNTkwMSxYYT0zNDg0MyxZYT0zNDgzNyxRYT0zNjIyMSxLYT0zNjIzOSxKYT0zNjIxNSxaYT0zNjIzMyxldT0zNjIwOSx0dT0zNjIyNyxydT0zMjg1NixudT0zNTkwNyxpdT0zNjc1OSxvdT0zMjg1NSxzdT0zMjg1NCxhdT0zMjg1Nyx1dT0zNDg0MixjdT0zNDgzNixmdT0zNjIyMCxsdT0zNjIzOCxkdT0zNjk3NSxtdT0zNjIxNCxodT0zNjIzMixwdT0zNjIyNix5dT0zNjIwOCxfdT0zMzE4OSx4dT0zMzE5MCxndT0zNjAxMixidT0zNjAxMyx2dT0zNTA1NixmZT01MTIwLEk9NTEyMSxkdD01MTIyLFNlPTUxMjMsbXQ9NTEyNCx4ZT01MTI1LEI9NTEyNixIbj0zMjgxOSxWbj0zMjgyMCxXbj0zMzYzNSxqPTUxMzEsTGU9MzYxOTMsZHI9MzM2NDAsRXU9MzU4OTksVHU9MzU5MDIsQXU9MzYyNjksd3U9MzQwNDIsaHQ9MzMzMTksSWU9MzMzMjAscHQ9NjQwMyxGZT0zNjI0NCxQZT0zNjI0OCxnZT0zNjI0OTtsZXQgbXI7ZnVuY3Rpb24geXQocil7aWYoIW1yKXtjb25zdCBlPXt9O2VbQ25dPXt0ZXh0dXJlRm9ybWF0OkNuLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzEsMiwyLDRdLHR5cGU6W0ksaixMZSxCXX0sZVtPbl09e3RleHR1cmVGb3JtYXQ6T24sY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMSwyLDIsNF0sdHlwZTpbSSxqLExlLEJdfSxlW05uXT17dGV4dHVyZUZvcm1hdDpObixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsyLDQsNCw4XSx0eXBlOltJLGosTGUsQl19LGVbWl09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlszLDYsNiwxMiwyXSx0eXBlOltJLGosTGUsQixXbl19LGVbRl09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0LDgsOCwxNiwyLDJdLHR5cGU6W0ksaixMZSxCLEhuLFZuXX0sZVtrZV09e3RleHR1cmVGb3JtYXQ6a2UsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMiw0XSx0eXBlOlt4ZSxTZV19LGVbRWFdPXt0ZXh0dXJlRm9ybWF0OnB0LGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzFdLHR5cGU6W0ldfSxlW1RhXT17dGV4dHVyZUZvcm1hdDpwdCxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsxXSx0eXBlOltmZV19LGVbQWFdPXt0ZXh0dXJlRm9ybWF0OnB0LGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzQsMl0sdHlwZTpbQixqXX0sZVt3YV09e3RleHR1cmVGb3JtYXQ6cHQsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNF0sdHlwZTpbQl19LGVbUmFdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzFdLHR5cGU6W0ldfSxlW1NhXT17dGV4dHVyZUZvcm1hdDpGZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxXSx0eXBlOltmZV19LGVba2FdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W1NlXX0sZVtMYV09e3RleHR1cmVGb3JtYXQ6RmUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbZHRdfSxlWyRhXT17dGV4dHVyZUZvcm1hdDpGZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt4ZV19LGVbR2FdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W210XX0sZVtNYV09e3RleHR1cmVGb3JtYXQ6aHQsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbSV19LGVbQ2FdPXt0ZXh0dXJlRm9ybWF0Omh0LGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W2ZlXX0sZVtPYV09e3RleHR1cmVGb3JtYXQ6aHQsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbOCw0XSx0eXBlOltCLGpdfSxlW05hXT17dGV4dHVyZUZvcm1hdDpodCxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols4XSx0eXBlOltCXX0sZVtVYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbSV19LGVbQmFdPXt0ZXh0dXJlRm9ybWF0OkllLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W2ZlXX0sZVtJYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNF0sdHlwZTpbU2VdfSxlW0ZhXT17dGV4dHVyZUZvcm1hdDpJZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltkdF19LGVbUGFdPXt0ZXh0dXJlRm9ybWF0OkllLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzhdLHR5cGU6W3hlXX0sZVtEYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbOF0sdHlwZTpbbXRdfSxlW3phXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW0hhXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW1ZhXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzMsMl0sdHlwZTpbSSxXbl19LGVbV2FdPXt0ZXh0dXJlRm9ybWF0OlosY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbM10sdHlwZTpbZmVdfSxlW2phXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzEyLDYsNF0sdHlwZTpbQixqLEV1XX0sZVtxYV09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsxMiw2LDRdLHR5cGU6W0IsaixUdV19LGVbWGFdPXt0ZXh0dXJlRm9ybWF0OlosY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMTIsNl0sdHlwZTpbQixqXX0sZVtZYV09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbQl19LGVbUWFdPXt0ZXh0dXJlRm9ybWF0OlBlLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW0thXT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlszXSx0eXBlOltmZV19LGVbSmFdPXt0ZXh0dXJlRm9ybWF0OlBlLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzZdLHR5cGU6W1NlXX0sZVtaYV09e3RleHR1cmVGb3JtYXQ6UGUsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNl0sdHlwZTpbZHRdfSxlW2V1XT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbeGVdfSxlW3R1XT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbbXRdfSxlW3J1XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW251XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW2l1XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W2ZlXX0sZVtvdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0LDIsNF0sdHlwZTpbSSxWbixkcl19LGVbc3VdPXt0ZXh0dXJlRm9ybWF0OkYsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbNCwyXSx0eXBlOltJLEhuXX0sZVthdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltkcl19LGVbdXVdPXt0ZXh0dXJlRm9ybWF0OkYsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMTYsOF0sdHlwZTpbQixqXX0sZVtjdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxNl0sdHlwZTpbQl19LGVbZnVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW2x1XT17dGV4dHVyZUZvcm1hdDpnZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltmZV19LGVbZHVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W2RyXX0sZVttdV09e3RleHR1cmVGb3JtYXQ6Z2UsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbOF0sdHlwZTpbU2VdfSxlW2h1XT17dGV4dHVyZUZvcm1hdDpnZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols4XSx0eXBlOltkdF19LGVbcHVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzE2XSx0eXBlOlttdF19LGVbeXVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzE2XSx0eXBlOlt4ZV19LGVbX3VdPXt0ZXh0dXJlRm9ybWF0OmtlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzIsNF0sdHlwZTpbU2UseGVdfSxlW3h1XT17dGV4dHVyZUZvcm1hdDprZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt4ZV19LGVbZ3VdPXt0ZXh0dXJlRm9ybWF0OmtlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0JdfSxlW3Z1XT17dGV4dHVyZUZvcm1hdDpVbixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt3dV19LGVbYnVdPXt0ZXh0dXJlRm9ybWF0OlVuLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0F1XX0sT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtjb25zdCBuPWVbdF07bi5ieXRlc1BlckVsZW1lbnRNYXA9e30sbi5ieXRlc1BlckVsZW1lbnQuZm9yRWFjaChmdW5jdGlvbihpLG8pe2NvbnN0IHM9bi50eXBlW29dO24uYnl0ZXNQZXJFbGVtZW50TWFwW3NdPWl9KX0pLG1yPWV9cmV0dXJuIG1yW3JdfWZ1bmN0aW9uIFJ1KHIsZSl7Y29uc3QgdD15dChyKTtpZighdCl0aHJvdyJ1bmtub3duIGludGVybmFsIGZvcm1hdCI7Y29uc3Qgbj10LmJ5dGVzUGVyRWxlbWVudE1hcFtlXTtpZihuPT09dm9pZCAwKXRocm93InVua25vd24gaW50ZXJuYWwgZm9ybWF0IjtyZXR1cm4gbn1mdW5jdGlvbiAkZShyKXtjb25zdCBlPXl0KHIpO2lmKCFlKXRocm93InVua25vd24gaW50ZXJuYWwgZm9ybWF0IjtyZXR1cm57Zm9ybWF0OmUudGV4dHVyZUZvcm1hdCx0eXBlOmUudHlwZVswXX19ZnVuY3Rpb24gam4ocil7cmV0dXJuKHImci0xKT09PTB9ZnVuY3Rpb24gU3UocixlLHQsbil7aWYoIVVlKHIpKXJldHVybiBqbihlKSYmam4odCk7Y29uc3QgaT15dChuKTtpZighaSl0aHJvdyJ1bmtub3duIGludGVybmFsIGZvcm1hdCI7cmV0dXJuIGkuY29sb3JSZW5kZXJhYmxlJiZpLnRleHR1cmVGaWx0ZXJhYmxlfWZ1bmN0aW9uIEl1KHIpe2NvbnN0IGU9eXQocik7aWYoIWUpdGhyb3cidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiO3JldHVybiBlLnRleHR1cmVGaWx0ZXJhYmxlfWZ1bmN0aW9uIEZ1KHIsZSx0KXtyZXR1cm4gQmUoZSk/aXIoZSk6dHx8SX1mdW5jdGlvbiBfdChyLGUsdCxuLGkpe2lmKGklMSE9PTApdGhyb3ciY2FuJ3QgZ3Vlc3MgZGltZW5zaW9ucyI7aWYoIXQmJiFuKXtjb25zdCBvPU1hdGguc3FydChpLyhlPT09Y2U/NjoxKSk7byUxPT09MD8odD1vLG49byk6KHQ9aSxuPTEpfWVsc2UgaWYobil7aWYoIXQmJih0PWkvbix0JTEpKXRocm93ImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMifWVsc2UgaWYobj1pL3QsbiUxKXRocm93ImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMiO3JldHVybnt3aWR0aDp0LGhlaWdodDpufX1mdW5jdGlvbiBEZShyLGUpe2UuY29sb3JzcGFjZUNvbnZlcnNpb24hPT12b2lkIDAmJnIucGl4ZWxTdG9yZWkoZ2EsZS5jb2xvcnNwYWNlQ29udmVyc2lvbiksZS5wcmVtdWx0aXBseUFscGhhIT09dm9pZCAwJiZyLnBpeGVsU3RvcmVpKGJhLGUucHJlbXVsdGlwbHlBbHBoYSksZS5mbGlwWSE9PXZvaWQgMCYmci5waXhlbFN0b3JlaSh2YSxlLmZsaXBZKX1mdW5jdGlvbiBxbihyKXtyLnBpeGVsU3RvcmVpKGxyLDQpLFVlKHIpJiYoci5waXhlbFN0b3JlaShrbiwwKSxyLnBpeGVsU3RvcmVpKExuLDApLHIucGl4ZWxTdG9yZWkoJG4sMCksci5waXhlbFN0b3JlaShHbiwwKSxyLnBpeGVsU3RvcmVpKHpuLDApKX1mdW5jdGlvbiBQdShyLGUsdCxuKXtuLm1pbk1hZyYmKHQuY2FsbChyLGUsY3Isbi5taW5NYWcpLHQuY2FsbChyLGUsZnIsbi5taW5NYWcpKSxuLm1pbiYmdC5jYWxsKHIsZSxjcixuLm1pbiksbi5tYWcmJnQuY2FsbChyLGUsZnIsbi5tYWcpLG4ud3JhcCYmKHQuY2FsbChyLGUsZnQsbi53cmFwKSx0LmNhbGwocixlLGx0LG4ud3JhcCksKGU9PT15ZXx8a3MocixlKSkmJnQuY2FsbChyLGUsQm4sbi53cmFwKSksbi53cmFwUiYmdC5jYWxsKHIsZSxCbixuLndyYXBSKSxuLndyYXBTJiZ0LmNhbGwocixlLGZ0LG4ud3JhcFMpLG4ud3JhcFQmJnQuY2FsbChyLGUsbHQsbi53cmFwVCksbi5taW5Mb2QmJnQuY2FsbChyLGUscGEsbi5taW5Mb2QpLG4ubWF4TG9kJiZ0LmNhbGwocixlLHlhLG4ubWF4TG9kKSxuLmJhc2VMZXZlbCYmdC5jYWxsKHIsZSxfYSxuLmJhc2VMZXZlbCksbi5tYXhMZXZlbCYmdC5jYWxsKHIsZSx4YSxuLm1heExldmVsKX1mdW5jdGlvbiBYbihyLGUsdCl7Y29uc3Qgbj10LnRhcmdldHx8dWU7ci5iaW5kVGV4dHVyZShuLGUpLFB1KHIsbixyLnRleFBhcmFtZXRlcmksdCl9ZnVuY3Rpb24gRHUocil7cmV0dXJuIHI9cnx8YWUudGV4dHVyZUNvbG9yLEJlKHIpP3I6bmV3IFVpbnQ4QXJyYXkoW3JbMF0qMjU1LHJbMV0qMjU1LHJbMl0qMjU1LHJbM10qMjU1XSl9ZnVuY3Rpb24gaHIocixlLHQsbixpLG8pe3Q9dHx8YWUudGV4dHVyZU9wdGlvbnMsbz1vfHxGO2NvbnN0IHM9dC50YXJnZXR8fHVlO2lmKG49bnx8dC53aWR0aCxpPWl8fHQuaGVpZ2h0LHIuYmluZFRleHR1cmUocyxlKSxTdShyLG4saSxvKSlyLmdlbmVyYXRlTWlwbWFwKHMpO2Vsc2V7Y29uc3QgYT1JdShvKT9jYTp1YTtyLnRleFBhcmFtZXRlcmkocyxjcixhKSxyLnRleFBhcmFtZXRlcmkocyxmcixhKSxyLnRleFBhcmFtZXRlcmkocyxmdCxjdCksci50ZXhQYXJhbWV0ZXJpKHMsbHQsY3QpfX1mdW5jdGlvbiBHZShyKXtyZXR1cm4gci5hdXRvPT09ITB8fHIuYXV0bz09PXZvaWQgMCYmci5sZXZlbD09PXZvaWQgMH1mdW5jdGlvbiBwcihyLGUpe3JldHVybiBlPWV8fHt9LGUuY3ViZUZhY2VPcmRlcnx8W3VyLGZhLGxhLGRhLG1hLGhhXX1mdW5jdGlvbiB5cihyLGUpe2NvbnN0IG49cHIocixlKS5tYXAoZnVuY3Rpb24oaSxvKXtyZXR1cm57ZmFjZTppLG5keDpvfX0pO3JldHVybiBuLnNvcnQoZnVuY3Rpb24oaSxvKXtyZXR1cm4gaS5mYWNlLW8uZmFjZX0pLG59ZnVuY3Rpb24gWW4ocixlLHQsbil7bj1ufHxhZS50ZXh0dXJlT3B0aW9ucztjb25zdCBpPW4udGFyZ2V0fHx1ZSxvPW4ubGV2ZWx8fDA7bGV0IHM9dC53aWR0aCxhPXQuaGVpZ2h0O2NvbnN0IHU9bi5pbnRlcm5hbEZvcm1hdHx8bi5mb3JtYXR8fEYsZj0kZSh1KSxjPW4uZm9ybWF0fHxmLmZvcm1hdCxkPW4udHlwZXx8Zi50eXBlO2lmKERlKHIsbiksci5iaW5kVGV4dHVyZShpLGUpLGk9PT1jZSl7Y29uc3QgeT10LndpZHRoLF89dC5oZWlnaHQ7bGV0IG0seDtpZih5LzY9PT1fKW09Xyx4PVswLDAsMSwwLDIsMCwzLDAsNCwwLDUsMF07ZWxzZSBpZihfLzY9PT15KW09eSx4PVswLDAsMCwxLDAsMiwwLDMsMCw0LDAsNV07ZWxzZSBpZih5LzM9PT1fLzIpbT15LzMseD1bMCwwLDEsMCwyLDAsMCwxLDEsMSwyLDFdO2Vsc2UgaWYoeS8yPT09Xy8zKW09eS8yLHg9WzAsMCwxLDAsMCwxLDEsMSwwLDIsMSwyXTtlbHNlIHRocm93ImNhbid0IGZpZ3VyZSBvdXQgY3ViZSBtYXAgZnJvbSBlbGVtZW50OiAiKyh0LnNyYz90LnNyYzp0Lm5vZGVOYW1lKTtjb25zdCB2PU1uKCk7dj8odi5jYW52YXMud2lkdGg9bSx2LmNhbnZhcy5oZWlnaHQ9bSxzPW0sYT1tLHlyKHIsbikuZm9yRWFjaChmdW5jdGlvbihiKXtjb25zdCBBPXhbYi5uZHgqMiswXSptLFA9eFtiLm5keCoyKzFdKm07di5kcmF3SW1hZ2UodCxBLFAsbSxtLDAsMCxtLG0pLHIudGV4SW1hZ2UyRChiLmZhY2Usbyx1LGMsZCx2LmNhbnZhcyl9KSx2LmNhbnZhcy53aWR0aD0xLHYuY2FudmFzLmhlaWdodD0xKTp0eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXA8InUiJiYocz1tLGE9bSx5cihyLG4pLmZvckVhY2goZnVuY3Rpb24oYil7Y29uc3QgQT14W2IubmR4KjIrMF0qbSxQPXhbYi5uZHgqMisxXSptO3IudGV4SW1hZ2UyRChiLmZhY2Usbyx1LG0sbSwwLGMsZCxudWxsKSxjcmVhdGVJbWFnZUJpdG1hcCh0LEEsUCxtLG0se3ByZW11bHRpcGx5QWxwaGE6Im5vbmUiLGNvbG9yU3BhY2VDb252ZXJzaW9uOiJub25lIn0pLnRoZW4oZnVuY3Rpb24oQyl7RGUocixuKSxyLmJpbmRUZXh0dXJlKGksZSksci50ZXhJbWFnZTJEKGIuZmFjZSxvLHUsYyxkLEMpLEdlKG4pJiZocihyLGUsbixzLGEsdSl9KX0pKX1lbHNlIGlmKGk9PT15ZXx8aT09PV9lKXtjb25zdCB5PU1hdGgubWluKHQud2lkdGgsdC5oZWlnaHQpLF89TWF0aC5tYXgodC53aWR0aCx0LmhlaWdodCksbT1fL3k7aWYobSUxIT09MCl0aHJvdyJjYW4gbm90IGNvbXB1dGUgM0QgZGltZW5zaW9ucyBvZiBlbGVtZW50Ijtjb25zdCB4PXQud2lkdGg9PT1fPzE6MCx2PXQuaGVpZ2h0PT09Xz8xOjA7ci5waXhlbFN0b3JlaShsciwxKSxyLnBpeGVsU3RvcmVpKGtuLHQud2lkdGgpLHIucGl4ZWxTdG9yZWkoTG4sMCksci5waXhlbFN0b3JlaSh6biwwKSxyLnRleEltYWdlM0QoaSxvLHUseSx5LHksMCxjLGQsbnVsbCk7Zm9yKGxldCBiPTA7YjxtOysrYil7Y29uc3QgQT1iKnkqeCxQPWIqeSp2O3IucGl4ZWxTdG9yZWkoJG4sQSksci5waXhlbFN0b3JlaShHbixQKSxyLnRleFN1YkltYWdlM0QoaSxvLDAsMCxiLHkseSwxLGMsZCx0KX1xbihyKX1lbHNlIHIudGV4SW1hZ2UyRChpLG8sdSxjLGQsdCk7R2UobikmJmhyKHIsZSxuLHMsYSx1KSxYbihyLGUsbil9ZnVuY3Rpb24gemUoKXt9ZnVuY3Rpb24gTXUocil7aWYodHlwZW9mIGRvY3VtZW50PCJ1Iil7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7cmV0dXJuIGUuaHJlZj1yLGUuaG9zdG5hbWU9PT1sb2NhdGlvbi5ob3N0bmFtZSYmZS5wb3J0PT09bG9jYXRpb24ucG9ydCYmZS5wcm90b2NvbD09PWxvY2F0aW9uLnByb3RvY29sfWVsc2V7Y29uc3QgZT1uZXcgVVJMKGxvY2F0aW9uLmhyZWYpLm9yaWdpbjtyZXR1cm4gbmV3IFVSTChyLGxvY2F0aW9uLmhyZWYpLm9yaWdpbj09PWV9fWZ1bmN0aW9uIEN1KHIsZSl7cmV0dXJuIGU9PT12b2lkIDAmJiFNdShyKT8iYW5vbnltb3VzIjplfWZ1bmN0aW9uIE91KHIsZSx0KXt0PXR8fHplO2xldCBuO2lmKGU9ZSE9PXZvaWQgMD9lOmFlLmNyb3NzT3JpZ2luLGU9Q3UocixlKSx0eXBlb2YgSW1hZ2U8InUiKXtuPW5ldyBJbWFnZSxlIT09dm9pZCAwJiYobi5jcm9zc09yaWdpbj1lKTtjb25zdCBpPWZ1bmN0aW9uKCl7bi5yZW1vdmVFdmVudExpc3RlbmVyKCJlcnJvciIsbyksbi5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixzKSxuPW51bGx9LG89ZnVuY3Rpb24oKXtjb25zdCB1PSJjb3VsZG4ndCBsb2FkIGltYWdlOiAiK3I7VG4odSksdCh1LG4pLGkoKX0scz1mdW5jdGlvbigpe3QobnVsbCxuKSxpKCl9O3JldHVybiBuLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixvKSxuLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLHMpLG4uc3JjPXIsbn1lbHNlIGlmKHR5cGVvZiBJbWFnZUJpdG1hcDwidSIpe2xldCBpLG87Y29uc3Qgcz1mdW5jdGlvbigpe3QoaSxvKX0sYT17fTtlJiYoYS5tb2RlPSJjb3JzIiksZmV0Y2gocixhKS50aGVuKGZ1bmN0aW9uKHUpe2lmKCF1Lm9rKXRocm93IHU7cmV0dXJuIHUuYmxvYigpfSkudGhlbihmdW5jdGlvbih1KXtyZXR1cm4gY3JlYXRlSW1hZ2VCaXRtYXAodSx7cHJlbXVsdGlwbHlBbHBoYToibm9uZSIsY29sb3JTcGFjZUNvbnZlcnNpb246Im5vbmUifSl9KS50aGVuKGZ1bmN0aW9uKHUpe289dSxzZXRUaW1lb3V0KHMpfSkuY2F0Y2goZnVuY3Rpb24odSl7aT11LHNldFRpbWVvdXQocyl9KSxuPW51bGx9cmV0dXJuIG59ZnVuY3Rpb24gUW4ocil7cmV0dXJuIHR5cGVvZiBJbWFnZUJpdG1hcDwidSImJnIgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcHx8dHlwZW9mIEltYWdlRGF0YTwidSImJnIgaW5zdGFuY2VvZiBJbWFnZURhdGF8fHR5cGVvZiBIVE1MRWxlbWVudDwidSImJnIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudH1mdW5jdGlvbiBfcihyLGUsdCl7cmV0dXJuIFFuKHIpPyhzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChudWxsLHIpfSkscik6T3UocixlLHQpfWZ1bmN0aW9uIHhyKHIsZSx0KXt0PXR8fGFlLnRleHR1cmVPcHRpb25zO2NvbnN0IG49dC50YXJnZXR8fHVlO2lmKHIuYmluZFRleHR1cmUobixlKSx0LmNvbG9yPT09ITEpcmV0dXJuO2NvbnN0IGk9RHUodC5jb2xvcik7aWYobj09PWNlKWZvcihsZXQgbz0wO288NjsrK28pci50ZXhJbWFnZTJEKHVyK28sMCxGLDEsMSwwLEYsSSxpKTtlbHNlIG49PT15ZXx8bj09PV9lP3IudGV4SW1hZ2UzRChuLDAsRiwxLDEsMSwwLEYsSSxpKTpyLnRleEltYWdlMkQobiwwLEYsMSwxLDAsRixJLGkpfWZ1bmN0aW9uIE51KHIsZSx0LG4pe3JldHVybiBuPW58fHplLHQ9dHx8YWUudGV4dHVyZU9wdGlvbnMseHIocixlLHQpLHQ9T2JqZWN0LmFzc2lnbih7fSx0KSxfcih0LnNyYyx0LmNyb3NzT3JpZ2luLGZ1bmN0aW9uKG8scyl7bz9uKG8sZSxzKTooWW4ocixlLHMsdCksbihudWxsLGUscykpfSl9ZnVuY3Rpb24gVXUocixlLHQsbil7bj1ufHx6ZTtjb25zdCBpPXQuc3JjO2lmKGkubGVuZ3RoIT09Nil0aHJvdyJ0aGVyZSBtdXN0IGJlIDYgdXJscyBmb3IgYSBjdWJlbWFwIjtjb25zdCBvPXQubGV2ZWx8fDAscz10LmludGVybmFsRm9ybWF0fHx0LmZvcm1hdHx8RixhPSRlKHMpLHU9dC5mb3JtYXR8fGEuZm9ybWF0LGY9dC50eXBlfHxJLGM9dC50YXJnZXR8fHVlO2lmKGMhPT1jZSl0aHJvdyJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFX0NVQkVfTUFQIjt4cihyLGUsdCksdD1PYmplY3QuYXNzaWduKHt9LHQpO2xldCBkPTY7Y29uc3QgeT1bXSxfPXByKHIsdCk7bGV0IG07ZnVuY3Rpb24geCh2KXtyZXR1cm4gZnVuY3Rpb24oYixBKXstLWQsYj95LnB1c2goYik6QS53aWR0aCE9PUEuaGVpZ2h0P3kucHVzaCgiY3ViZW1hcCBmYWNlIGltZyBpcyBub3QgYSBzcXVhcmU6ICIrQS5zcmMpOihEZShyLHQpLHIuYmluZFRleHR1cmUoYyxlKSxkPT09NT9wcigpLmZvckVhY2goZnVuY3Rpb24oUCl7ci50ZXhJbWFnZTJEKFAsbyxzLHUsZixBKX0pOnIudGV4SW1hZ2UyRCh2LG8scyx1LGYsQSksR2UodCkmJnIuZ2VuZXJhdGVNaXBtYXAoYykpLGQ9PT0wJiZuKHkubGVuZ3RoP3k6dm9pZCAwLGUsbSl9fW09aS5tYXAoZnVuY3Rpb24odixiKXtyZXR1cm4gX3Iodix0LmNyb3NzT3JpZ2luLHgoX1tiXSkpfSl9ZnVuY3Rpb24gQnUocixlLHQsbil7bj1ufHx6ZTtjb25zdCBpPXQuc3JjLG89dC5pbnRlcm5hbEZvcm1hdHx8dC5mb3JtYXR8fEYscz0kZShvKSxhPXQuZm9ybWF0fHxzLmZvcm1hdCx1PXQudHlwZXx8SSxmPXQudGFyZ2V0fHxfZTtpZihmIT09eWUmJmYhPT1fZSl0aHJvdyJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFXzNEIG9yIFRFWFRVUkVfMkRfQVJSQVkiO3hyKHIsZSx0KSx0PU9iamVjdC5hc3NpZ24oe30sdCk7bGV0IGM9aS5sZW5ndGg7Y29uc3QgZD1bXTtsZXQgeTtjb25zdCBfPXQubGV2ZWx8fDA7bGV0IG09dC53aWR0aCx4PXQuaGVpZ2h0O2NvbnN0IHY9aS5sZW5ndGg7bGV0IGI9ITA7ZnVuY3Rpb24gQShQKXtyZXR1cm4gZnVuY3Rpb24oQyxXKXtpZigtLWMsQylkLnB1c2goQyk7ZWxzZXtpZihEZShyLHQpLHIuYmluZFRleHR1cmUoZixlKSxiKXtiPSExLG09dC53aWR0aHx8Vy53aWR0aCx4PXQuaGVpZ2h0fHxXLmhlaWdodCxyLnRleEltYWdlM0QoZixfLG8sbSx4LHYsMCxhLHUsbnVsbCk7Zm9yKGxldCBpZT0wO2llPHY7KytpZSlyLnRleFN1YkltYWdlM0QoZixfLDAsMCxpZSxtLHgsMSxhLHUsVyl9ZWxzZXtsZXQgaWU9VyxYOyhXLndpZHRoIT09bXx8Vy5oZWlnaHQhPT14KSYmKFg9TW4oKSxpZT1YLmNhbnZhcyxYLmNhbnZhcy53aWR0aD1tLFguY2FudmFzLmhlaWdodD14LFguZHJhd0ltYWdlKFcsMCwwLG0seCkpLHIudGV4U3ViSW1hZ2UzRChmLF8sMCwwLFAsbSx4LDEsYSx1LGllKSxYJiZpZT09PVguY2FudmFzJiYoWC5jYW52YXMud2lkdGg9MCxYLmNhbnZhcy5oZWlnaHQ9MCl9R2UodCkmJnIuZ2VuZXJhdGVNaXBtYXAoZil9Yz09PTAmJm4oZC5sZW5ndGg/ZDp2b2lkIDAsZSx5KX19eT1pLm1hcChmdW5jdGlvbihQLEMpe3JldHVybiBfcihQLHQuY3Jvc3NPcmlnaW4sQShDKSl9KX1mdW5jdGlvbiBrdShyLGUsdCxuKXtuPW58fGFlLnRleHR1cmVPcHRpb25zO2NvbnN0IGk9bi50YXJnZXR8fHVlO3IuYmluZFRleHR1cmUoaSxlKTtsZXQgbz1uLndpZHRoLHM9bi5oZWlnaHQsYT1uLmRlcHRoO2NvbnN0IHU9bi5sZXZlbHx8MCxmPW4uaW50ZXJuYWxGb3JtYXR8fG4uZm9ybWF0fHxGLGM9JGUoZiksZD1uLmZvcm1hdHx8Yy5mb3JtYXQseT1uLnR5cGV8fEZ1KHIsdCxjLnR5cGUpO2lmKEJlKHQpKXQgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSYmKHQ9bmV3IFVpbnQ4QXJyYXkodC5idWZmZXIpKTtlbHNle2NvbnN0IHY9RW4oeSk7dD1uZXcgdih0KX1jb25zdCBfPVJ1KGYseSksbT10LmJ5dGVMZW5ndGgvXztpZihtJTEpdGhyb3cibGVuZ3RoIHdyb25nIHNpemUgZm9yIGZvcm1hdDogIitEbihyLGQpO2xldCB4O2lmKGk9PT15ZXx8aT09PV9lKWlmKCFvJiYhcyYmIWEpe2NvbnN0IHY9TWF0aC5jYnJ0KG0pO2lmKHYlMSE9PTApdGhyb3ciY2FuJ3QgZ3Vlc3MgY3ViZSBzaXplIG9mIGFycmF5IG9mIG51bUVsZW1lbnRzOiAiK207bz12LHM9dixhPXZ9ZWxzZSBvJiYoIXN8fCFhKT8oeD1fdChyLGkscyxhLG0vbykscz14LndpZHRoLGE9eC5oZWlnaHQpOnMmJighb3x8IWEpPyh4PV90KHIsaSxvLGEsbS9zKSxvPXgud2lkdGgsYT14LmhlaWdodCk6KHg9X3QocixpLG8scyxtL2EpLG89eC53aWR0aCxzPXguaGVpZ2h0KTtlbHNlIHg9X3QocixpLG8scyxtKSxvPXgud2lkdGgscz14LmhlaWdodDtpZihxbihyKSxyLnBpeGVsU3RvcmVpKGxyLG4udW5wYWNrQWxpZ25tZW50fHwxKSxEZShyLG4pLGk9PT1jZSl7Y29uc3Qgdj1fL3QuQllURVNfUEVSX0VMRU1FTlQsYj1tLzYqdjt5cihyLG4pLmZvckVhY2goQT0+e2NvbnN0IFA9YipBLm5keCxDPXQuc3ViYXJyYXkoUCxQK2IpO3IudGV4SW1hZ2UyRChBLmZhY2UsdSxmLG8scywwLGQseSxDKX0pfWVsc2UgaT09PXllfHxpPT09X2U/ci50ZXhJbWFnZTNEKGksdSxmLG8scyxhLDAsZCx5LHQpOnIudGV4SW1hZ2UyRChpLHUsZixvLHMsMCxkLHksdCk7cmV0dXJue3dpZHRoOm8saGVpZ2h0OnMsZGVwdGg6YSx0eXBlOnl9fWZ1bmN0aW9uIEx1KHIsZSx0KXtjb25zdCBuPXQudGFyZ2V0fHx1ZTtyLmJpbmRUZXh0dXJlKG4sZSk7Y29uc3QgaT10LmxldmVsfHwwLG89dC5pbnRlcm5hbEZvcm1hdHx8dC5mb3JtYXR8fEYscz0kZShvKSxhPXQuZm9ybWF0fHxzLmZvcm1hdCx1PXQudHlwZXx8cy50eXBlO2lmKERlKHIsdCksbj09PWNlKWZvcihsZXQgZj0wO2Y8NjsrK2Ypci50ZXhJbWFnZTJEKHVyK2YsaSxvLHQud2lkdGgsdC5oZWlnaHQsMCxhLHUsbnVsbCk7ZWxzZSBuPT09eWV8fG49PT1fZT9yLnRleEltYWdlM0QobixpLG8sdC53aWR0aCx0LmhlaWdodCx0LmRlcHRoLDAsYSx1LG51bGwpOnIudGV4SW1hZ2UyRChuLGksbyx0LndpZHRoLHQuaGVpZ2h0LDAsYSx1LG51bGwpfWZ1bmN0aW9uIEtuKHIsZSx0KXt0PXR8fHplLGU9ZXx8YWUudGV4dHVyZU9wdGlvbnM7Y29uc3Qgbj1yLmNyZWF0ZVRleHR1cmUoKSxpPWUudGFyZ2V0fHx1ZTtsZXQgbz1lLndpZHRofHwxLHM9ZS5oZWlnaHR8fDE7Y29uc3QgYT1lLmludGVybmFsRm9ybWF0fHxGO3IuYmluZFRleHR1cmUoaSxuKSxpPT09Y2UmJihyLnRleFBhcmFtZXRlcmkoaSxmdCxjdCksci50ZXhQYXJhbWV0ZXJpKGksbHQsY3QpKTtsZXQgdT1lLnNyYztpZih1KWlmKHR5cGVvZiB1PT0iZnVuY3Rpb24iJiYodT11KHIsZSkpLHR5cGVvZiB1PT0ic3RyaW5nIilOdShyLG4sZSx0KTtlbHNlIGlmKEJlKHUpfHxBcnJheS5pc0FycmF5KHUpJiYodHlwZW9mIHVbMF09PSJudW1iZXIifHxBcnJheS5pc0FycmF5KHVbMF0pfHxCZSh1WzBdKSkpe2NvbnN0IGY9a3UocixuLHUsZSk7bz1mLndpZHRoLHM9Zi5oZWlnaHR9ZWxzZSBBcnJheS5pc0FycmF5KHUpJiYodHlwZW9mIHVbMF09PSJzdHJpbmcifHxRbih1WzBdKSk/aT09PWNlP1V1KHIsbixlLHQpOkJ1KHIsbixlLHQpOihZbihyLG4sdSxlKSxvPXUud2lkdGgscz11LmhlaWdodCk7ZWxzZSBMdShyLG4sZSk7cmV0dXJuIEdlKGUpJiZocihyLG4sZSxvLHMsYSksWG4ocixuLGUpLG59Y29uc3QgZ3I9VG47ZnVuY3Rpb24gSm4ocil7cmV0dXJuIHR5cGVvZiBkb2N1bWVudDwidSImJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHIpOm51bGx9Y29uc3QgeHQ9MzM5ODQsZ3Q9MzQ5NjIsJHU9MzQ5NjMsR3U9MzU3MTMsenU9MzU3MTQsSHU9MzU2MzIsVnU9MzU2MzMsV3U9MzU5ODEsWm49MzU3MTgsanU9MzU3MjEscXU9MzU5NzEsWHU9MzUzODIsWXU9MzUzOTYsUXU9MzUzOTgsS3U9MzUzOTIsSnU9MzUzOTUsYnQ9NTEyNixlaT0zNTY2NCx0aT0zNTY2NSxyaT0zNTY2Nixicj01MTI0LG5pPTM1NjY3LGlpPTM1NjY4LG9pPTM1NjY5LHNpPTM1NjcwLGFpPTM1NjcxLHVpPTM1NjcyLGNpPTM1NjczLGZpPTM1Njc0LGxpPTM1Njc1LGRpPTM1Njc2LFp1PTM1Njc4LGVjPTM1NjgwLHRjPTM1Njc5LHJjPTM1NjgyLG5jPTM1Njg1LGljPTM1Njg2LG9jPTM1Njg3LHNjPTM1Njg4LGFjPTM1Njg5LHVjPTM1NjkwLGNjPTM2Mjg5LGZjPTM2MjkyLGxjPTM2MjkzLHZyPTUxMjUsbWk9MzYyOTQsaGk9MzYyOTUscGk9MzYyOTYsZGM9MzYyOTgsbWM9MzYyOTksaGM9MzYzMDAscGM9MzYzMDMseWM9MzYzMDYsX2M9MzYzMDcseGM9MzYzMDgsZ2M9MzYzMTEsdnQ9MzU1MyxFdD0zNDA2NyxFcj0zMjg3OSxUdD0zNTg2NixFPXt9O2Z1bmN0aW9uIHlpKHIsZSl7cmV0dXJuIEVbZV0uYmluZFBvaW50fWZ1bmN0aW9uIGJjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTFmKGUsdCl9fWZ1bmN0aW9uIHZjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTFmdihlLHQpfX1mdW5jdGlvbiBFYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0yZnYoZSx0KX19ZnVuY3Rpb24gVGMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtM2Z2KGUsdCl9fWZ1bmN0aW9uIEFjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTRmdihlLHQpfX1mdW5jdGlvbiBfaShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0xaShlLHQpfX1mdW5jdGlvbiB4aShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0xaXYoZSx0KX19ZnVuY3Rpb24gZ2kocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMml2KGUsdCl9fWZ1bmN0aW9uIGJpKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTNpdihlLHQpfX1mdW5jdGlvbiB2aShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm00aXYoZSx0KX19ZnVuY3Rpb24gd2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMXVpKGUsdCl9fWZ1bmN0aW9uIFJjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTF1aXYoZSx0KX19ZnVuY3Rpb24gU2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMnVpdihlLHQpfX1mdW5jdGlvbiBJYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0zdWl2KGUsdCl9fWZ1bmN0aW9uIEZjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTR1aXYoZSx0KX19ZnVuY3Rpb24gUGMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4MmZ2KGUsITEsdCl9fWZ1bmN0aW9uIERjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybU1hdHJpeDNmdihlLCExLHQpfX1mdW5jdGlvbiBNYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm1NYXRyaXg0ZnYoZSwhMSx0KX19ZnVuY3Rpb24gQ2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4MngzZnYoZSwhMSx0KX19ZnVuY3Rpb24gT2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4M3gyZnYoZSwhMSx0KX19ZnVuY3Rpb24gTmMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4Mng0ZnYoZSwhMSx0KX19ZnVuY3Rpb24gVWMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4NHgyZnYoZSwhMSx0KX19ZnVuY3Rpb24gQmMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4M3g0ZnYoZSwhMSx0KX19ZnVuY3Rpb24ga2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4NHgzZnYoZSwhMSx0KX19ZnVuY3Rpb24gTChyLGUsdCxuKXtjb25zdCBpPXlpKHIsZSk7cmV0dXJuIFVlKHIpP2Z1bmN0aW9uKG8pe2xldCBzLGE7b3IocixvKT8ocz1vLGE9bnVsbCk6KHM9by50ZXh0dXJlLGE9by5zYW1wbGVyKSxyLnVuaWZvcm0xaShuLHQpLHIuYWN0aXZlVGV4dHVyZSh4dCt0KSxyLmJpbmRUZXh0dXJlKGkscyksci5iaW5kU2FtcGxlcih0LGEpfTpmdW5jdGlvbihvKXtyLnVuaWZvcm0xaShuLHQpLHIuYWN0aXZlVGV4dHVyZSh4dCt0KSxyLmJpbmRUZXh0dXJlKGksbyl9fWZ1bmN0aW9uICQocixlLHQsbixpKXtjb25zdCBvPXlpKHIsZSkscz1uZXcgSW50MzJBcnJheShpKTtmb3IobGV0IGE9MDthPGk7KythKXNbYV09dCthO3JldHVybiBVZShyKT9mdW5jdGlvbihhKXtyLnVuaWZvcm0xaXYobixzKSxhLmZvckVhY2goZnVuY3Rpb24odSxmKXtyLmFjdGl2ZVRleHR1cmUoeHQrc1tmXSk7bGV0IGMsZDtvcihyLHUpPyhjPXUsZD1udWxsKTooYz11LnRleHR1cmUsZD11LnNhbXBsZXIpLHIuYmluZFNhbXBsZXIodCxkKSxyLmJpbmRUZXh0dXJlKG8sYyl9KX06ZnVuY3Rpb24oYSl7ci51bmlmb3JtMWl2KG4scyksYS5mb3JFYWNoKGZ1bmN0aW9uKHUsZil7ci5hY3RpdmVUZXh0dXJlKHh0K3NbZl0pLHIuYmluZFRleHR1cmUobyx1KX0pfX1FW2J0XT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo0LHNldHRlcjpiYyxhcnJheVNldHRlcjp2Y30sRVtlaV09e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6OCxzZXR0ZXI6RWMsY29sczoyfSxFW3RpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6VGMsY29sczozfSxFW3JpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZToxNixzZXR0ZXI6QWMsY29sczo0fSxFW2JyXT17VHlwZTpJbnQzMkFycmF5LHNpemU6NCxzZXR0ZXI6X2ksYXJyYXlTZXR0ZXI6eGl9LEVbbmldPXtUeXBlOkludDMyQXJyYXksc2l6ZTo4LHNldHRlcjpnaSxjb2xzOjJ9LEVbaWldPXtUeXBlOkludDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6YmksY29sczozfSxFW29pXT17VHlwZTpJbnQzMkFycmF5LHNpemU6MTYsc2V0dGVyOnZpLGNvbHM6NH0sRVt2cl09e1R5cGU6VWludDMyQXJyYXksc2l6ZTo0LHNldHRlcjp3YyxhcnJheVNldHRlcjpSY30sRVttaV09e1R5cGU6VWludDMyQXJyYXksc2l6ZTo4LHNldHRlcjpTYyxjb2xzOjJ9LEVbaGldPXtUeXBlOlVpbnQzMkFycmF5LHNpemU6MTIsc2V0dGVyOkljLGNvbHM6M30sRVtwaV09e1R5cGU6VWludDMyQXJyYXksc2l6ZToxNixzZXR0ZXI6RmMsY29sczo0fSxFW3NpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjQsc2V0dGVyOl9pLGFycmF5U2V0dGVyOnhpfSxFW2FpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjgsc2V0dGVyOmdpLGNvbHM6Mn0sRVt1aV09e1R5cGU6VWludDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6YmksY29sczozfSxFW2NpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjE2LHNldHRlcjp2aSxjb2xzOjR9LEVbZmldPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjMyLHNldHRlcjpQYyxyb3dzOjIsY29sczoyfSxFW2xpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo0OCxzZXR0ZXI6RGMscm93czozLGNvbHM6M30sRVtkaV09e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NjQsc2V0dGVyOk1jLHJvd3M6NCxjb2xzOjR9LEVbbmNdPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjMyLHNldHRlcjpDYyxyb3dzOjIsY29sczozfSxFW2ljXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTozMixzZXR0ZXI6TmMscm93czoyLGNvbHM6NH0sRVtvY109e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NDgsc2V0dGVyOk9jLHJvd3M6Myxjb2xzOjJ9LEVbc2NdPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjQ4LHNldHRlcjpCYyxyb3dzOjMsY29sczo0fSxFW2FjXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo2NCxzZXR0ZXI6VWMscm93czo0LGNvbHM6Mn0sRVt1Y109e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NjQsc2V0dGVyOmtjLHJvd3M6NCxjb2xzOjN9LEVbWnVdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OnZ0fSxFW2VjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpFdH0sRVt0Y109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6RXJ9LEVbcmNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OnZ0fSxFW2NjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpUdH0sRVtmY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6VHR9LEVbbGNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkV0fSxFW2RjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDp2dH0sRVttY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6RXJ9LEVbaGNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkV0fSxFW3BjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpUdH0sRVt5Y109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6dnR9LEVbX2NdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkVyfSxFW3hjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpFdH0sRVtnY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6VHR9O2Z1bmN0aW9uIEF0KHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQudmFsdWUpc3dpdGNoKHIuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLHQudmFsdWUubGVuZ3RoKXtjYXNlIDQ6ci52ZXJ0ZXhBdHRyaWI0ZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDM6ci52ZXJ0ZXhBdHRyaWIzZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDI6ci52ZXJ0ZXhBdHRyaWIyZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDE6ci52ZXJ0ZXhBdHRyaWIxZnYoZSx0LnZhbHVlKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigidGhlIGxlbmd0aCBvZiBhIGZsb2F0IGNvbnN0YW50IHZhbHVlIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA0ISIpfWVsc2Ugci5iaW5kQnVmZmVyKGd0LHQuYnVmZmVyKSxyLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLHIudmVydGV4QXR0cmliUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8YnQsdC5ub3JtYWxpemV8fCExLHQuc3RyaWRlfHwwLHQub2Zmc2V0fHwwKSxyLnZlcnRleEF0dHJpYkRpdmlzb3ImJnIudmVydGV4QXR0cmliRGl2aXNvcihlLHQuZGl2aXNvcnx8MCl9fWZ1bmN0aW9uIGxlKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQudmFsdWUpaWYoci5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoZSksdC52YWx1ZS5sZW5ndGg9PT00KXIudmVydGV4QXR0cmliNGl2KGUsdC52YWx1ZSk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIlRoZSBsZW5ndGggb2YgYW4gaW50ZWdlciBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIDQhIik7ZWxzZSByLmJpbmRCdWZmZXIoZ3QsdC5idWZmZXIpLHIuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZSksci52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8YnIsdC5zdHJpZGV8fDAsdC5vZmZzZXR8fDApLHIudmVydGV4QXR0cmliRGl2aXNvciYmci52ZXJ0ZXhBdHRyaWJEaXZpc29yKGUsdC5kaXZpc29yfHwwKX19ZnVuY3Rpb24gd3QocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYodC52YWx1ZSlpZihyLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShlKSx0LnZhbHVlLmxlbmd0aD09PTQpci52ZXJ0ZXhBdHRyaWI0dWl2KGUsdC52YWx1ZSk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIlRoZSBsZW5ndGggb2YgYW4gdW5zaWduZWQgaW50ZWdlciBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIDQhIik7ZWxzZSByLmJpbmRCdWZmZXIoZ3QsdC5idWZmZXIpLHIuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZSksci52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8dnIsdC5zdHJpZGV8fDAsdC5vZmZzZXR8fDApLHIudmVydGV4QXR0cmliRGl2aXNvciYmci52ZXJ0ZXhBdHRyaWJEaXZpc29yKGUsdC5kaXZpc29yfHwwKX19ZnVuY3Rpb24gVHIocixlLHQpe2NvbnN0IG49dC5zaXplLGk9dC5jb3VudDtyZXR1cm4gZnVuY3Rpb24obyl7ci5iaW5kQnVmZmVyKGd0LG8uYnVmZmVyKTtjb25zdCBzPW8uc2l6ZXx8by5udW1Db21wb25lbnRzfHxuLGE9cy9pLHU9by50eXBlfHxidCxjPUVbdV0uc2l6ZSpzLGQ9by5ub3JtYWxpemV8fCExLHk9by5vZmZzZXR8fDAsXz1jL2k7Zm9yKGxldCBtPTA7bTxpOysrbSlyLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGUrbSksci52ZXJ0ZXhBdHRyaWJQb2ludGVyKGUrbSxhLHUsZCxjLHkrXyptKSxyLnZlcnRleEF0dHJpYkRpdmlzb3ImJnIudmVydGV4QXR0cmliRGl2aXNvcihlK20sby5kaXZpc29yfHwwKX19Y29uc3QgRD17fTtEW2J0XT17c2l6ZTo0LHNldHRlcjpBdH0sRFtlaV09e3NpemU6OCxzZXR0ZXI6QXR9LERbdGldPXtzaXplOjEyLHNldHRlcjpBdH0sRFtyaV09e3NpemU6MTYsc2V0dGVyOkF0fSxEW2JyXT17c2l6ZTo0LHNldHRlcjpsZX0sRFtuaV09e3NpemU6OCxzZXR0ZXI6bGV9LERbaWldPXtzaXplOjEyLHNldHRlcjpsZX0sRFtvaV09e3NpemU6MTYsc2V0dGVyOmxlfSxEW3ZyXT17c2l6ZTo0LHNldHRlcjp3dH0sRFttaV09e3NpemU6OCxzZXR0ZXI6d3R9LERbaGldPXtzaXplOjEyLHNldHRlcjp3dH0sRFtwaV09e3NpemU6MTYsc2V0dGVyOnd0fSxEW3NpXT17c2l6ZTo0LHNldHRlcjpsZX0sRFthaV09e3NpemU6OCxzZXR0ZXI6bGV9LERbdWldPXtzaXplOjEyLHNldHRlcjpsZX0sRFtjaV09e3NpemU6MTYsc2V0dGVyOmxlfSxEW2ZpXT17c2l6ZTo0LHNldHRlcjpUcixjb3VudDoyfSxEW2xpXT17c2l6ZTo5LHNldHRlcjpUcixjb3VudDozfSxEW2RpXT17c2l6ZToxNixzZXR0ZXI6VHIsY291bnQ6NH07Y29uc3QgTGM9L0VSUk9SOlxzKlxkKzooXGQrKS9naTtmdW5jdGlvbiAkYyhyLGU9IiIsdD0wKXtjb25zdCBuPVsuLi5lLm1hdGNoQWxsKExjKV0saT1uZXcgTWFwKG4ubWFwKChvLHMpPT57Y29uc3QgYT1wYXJzZUludChvWzFdKSx1PW5bcysxXSxmPXU/dS5pbmRleDplLmxlbmd0aCxjPWUuc3Vic3RyaW5nKG8uaW5kZXgsZik7cmV0dXJuW2EtMSxjXX0pKTtyZXR1cm4gci5zcGxpdChgCmApLm1hcCgobyxzKT0+e2NvbnN0IGE9aS5nZXQocyk7cmV0dXJuYCR7cysxK3R9OiAke299JHthP2AKCl5eXiAke2F9YDoiIn1gfSkuam9pbihgCmApfWNvbnN0IEVpPS9eWyBcdF0qXG4vO2Z1bmN0aW9uIFRpKHIpe2xldCBlPTA7cmV0dXJuIEVpLnRlc3QocikmJihlPTEscj1yLnJlcGxhY2UoRWksIiIpKSx7bGluZU9mZnNldDplLHNoYWRlclNvdXJjZTpyfX1mdW5jdGlvbiBHYyhyLGUpe3JldHVybiByLmVycm9yQ2FsbGJhY2soZSksci5jYWxsYmFjayYmc2V0VGltZW91dCgoKT0+e3IuY2FsbGJhY2soYCR7ZX0KJHtyLmVycm9ycy5qb2luKGAKYCl9YCl9KSxudWxsfWZ1bmN0aW9uIHpjKHIsZSx0LG4pe2lmKG49bnx8Z3IsIXIuZ2V0U2hhZGVyUGFyYW1ldGVyKHQsR3UpKXtjb25zdCBvPXIuZ2V0U2hhZGVySW5mb0xvZyh0KSx7bGluZU9mZnNldDpzLHNoYWRlclNvdXJjZTphfT1UaShyLmdldFNoYWRlclNvdXJjZSh0KSksdT1gJHskYyhhLG8scyl9CkVycm9yIGNvbXBpbGluZyAke0RuKHIsZSl9OiAke299YDtyZXR1cm4gbih1KSx1fXJldHVybiIifWZ1bmN0aW9uIEFyKHIsZSx0KXtsZXQgbixpLG87aWYodHlwZW9mIGU9PSJmdW5jdGlvbiImJih0PWUsZT12b2lkIDApLHR5cGVvZiByPT0iZnVuY3Rpb24iKXQ9cixyPXZvaWQgMDtlbHNlIGlmKHImJiFBcnJheS5pc0FycmF5KHIpKXtjb25zdCBmPXI7dD1mLmVycm9yQ2FsbGJhY2sscj1mLmF0dHJpYkxvY2F0aW9ucyxuPWYudHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncyxpPWYudHJhbnNmb3JtRmVlZGJhY2tNb2RlLG89Zi5jYWxsYmFja31jb25zdCBzPXR8fGdyLGE9W10sdT17ZXJyb3JDYWxsYmFjayhmLC4uLmMpe2EucHVzaChmKSxzKGYsLi4uYyl9LHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M6bix0cmFuc2Zvcm1GZWVkYmFja01vZGU6aSxjYWxsYmFjazpvLGVycm9yczphfTt7bGV0IGY9e307QXJyYXkuaXNBcnJheShyKT9yLmZvckVhY2goZnVuY3Rpb24oYyxkKXtmW2NdPWU/ZVtkXTpkfSk6Zj1yfHx7fSx1LmF0dHJpYkxvY2F0aW9ucz1mfXJldHVybiB1fWNvbnN0IEhjPVsiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiJdO2Z1bmN0aW9uIFZjKHIsZSl7aWYoZS5pbmRleE9mKCJmcmFnIik+PTApcmV0dXJuIEh1O2lmKGUuaW5kZXhPZigidmVydCIpPj0wKXJldHVybiBWdX1mdW5jdGlvbiBXYyhyLGUsdCl7Y29uc3Qgbj1yLmdldEF0dGFjaGVkU2hhZGVycyhlKTtmb3IoY29uc3QgaSBvZiBuKXQuaGFzKGkpJiZyLmRlbGV0ZVNoYWRlcihpKTtyLmRlbGV0ZVByb2dyYW0oZSl9Y29uc3QgamM9KHI9MCk9Pm5ldyBQcm9taXNlKGU9PnNldFRpbWVvdXQoZSxyKSk7ZnVuY3Rpb24gcWMocixlLHQpe2NvbnN0IG49ci5jcmVhdGVQcm9ncmFtKCkse2F0dHJpYkxvY2F0aW9uczppLHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M6byx0cmFuc2Zvcm1GZWVkYmFja01vZGU6c309QXIodCk7Zm9yKGxldCBhPTA7YTxlLmxlbmd0aDsrK2Epe2xldCB1PWVbYV07aWYodHlwZW9mIHU9PSJzdHJpbmciKXtjb25zdCBmPUpuKHUpLGM9Zj9mLnRleHQ6dTtsZXQgZD1yW0hjW2FdXTtmJiZmLnR5cGUmJihkPVZjKHIsZi50eXBlKXx8ZCksdT1yLmNyZWF0ZVNoYWRlcihkKSxyLnNoYWRlclNvdXJjZSh1LFRpKGMpLnNoYWRlclNvdXJjZSksci5jb21waWxlU2hhZGVyKHUpLHIuYXR0YWNoU2hhZGVyKG4sdSl9fU9iamVjdC5lbnRyaWVzKGkpLmZvckVhY2goKFthLHVdKT0+ci5iaW5kQXR0cmliTG9jYXRpb24obix1LGEpKTt7bGV0IGE9bzthJiYoYS5hdHRyaWJzJiYoYT1hLmF0dHJpYnMpLEFycmF5LmlzQXJyYXkoYSl8fChhPU9iamVjdC5rZXlzKGEpKSxyLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3MobixhLHN8fFd1KSl9cmV0dXJuIHIubGlua1Byb2dyYW0obiksbn1mdW5jdGlvbiBYYyhyLGUsdCxuLGkpe2NvbnN0IG89QXIodCxuLGkpLHM9bmV3IFNldChlKSxhPXFjKHIsZSxvKTtmdW5jdGlvbiB1KGYsYyl7Y29uc3QgZD1RYyhmLGMsby5lcnJvckNhbGxiYWNrKTtyZXR1cm4gZCYmV2MoZixjLHMpLGR9aWYoby5jYWxsYmFjayl7WWMocixhKS50aGVuKCgpPT57Y29uc3QgZj11KHIsYSk7by5jYWxsYmFjayhmLGY/dm9pZCAwOmEpfSk7cmV0dXJufXJldHVybiB1KHIsYSk/dm9pZCAwOmF9YXN5bmMgZnVuY3Rpb24gWWMocixlKXtjb25zdCB0PXIuZ2V0RXh0ZW5zaW9uKCJLSFJfcGFyYWxsZWxfc2hhZGVyX2NvbXBpbGUiKSxuPXQ/KG8scyk9Pm8uZ2V0UHJvZ3JhbVBhcmFtZXRlcihzLHQuQ09NUExFVElPTl9TVEFUVVNfS0hSKTooKT0+ITA7bGV0IGk9MDtkbyBhd2FpdCBqYyhpKSxpPTFlMy82MDt3aGlsZSghbihyLGUpKX1mdW5jdGlvbiBRYyhyLGUsdCl7aWYodD10fHxnciwhci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsenUpKXtjb25zdCBpPXIuZ2V0UHJvZ3JhbUluZm9Mb2coZSk7dChgRXJyb3IgaW4gcHJvZ3JhbSBsaW5raW5nOiAke2l9YCk7Y29uc3Qgcz1yLmdldEF0dGFjaGVkU2hhZGVycyhlKS5tYXAoYT0+emMocixyLmdldFNoYWRlclBhcmFtZXRlcihhLHIuU0hBREVSX1RZUEUpLGEsdCkpO3JldHVybmAke2l9CiR7cy5maWx0ZXIoYT0+YSkuam9pbihgCmApfWB9fWZ1bmN0aW9uIEtjKHIsZSx0LG4saSl7cmV0dXJuIFhjKHIsZSx0LG4saSl9ZnVuY3Rpb24gQWkocil7Y29uc3QgZT1yLm5hbWU7cmV0dXJuIGUuc3RhcnRzV2l0aCgiZ2xfIil8fGUuc3RhcnRzV2l0aCgid2ViZ2xfIil9Y29uc3QgSmM9LyhcLnxcW3xdfFx3KykvZyxaYz1yPT5yPj0iMCImJnI8PSI5IjtmdW5jdGlvbiBlZihyLGUsdCxuKXtjb25zdCBpPXIuc3BsaXQoSmMpLmZpbHRlcihhPT5hIT09IiIpO2xldCBvPTAscz0iIjtmb3IoOzspe2NvbnN0IGE9aVtvKytdO3MrPWE7Y29uc3QgdT1aYyhhWzBdKSxmPXU/cGFyc2VJbnQoYSk6YTtpZih1JiYocys9aVtvKytdKSxvPT09aS5sZW5ndGgpe3RbZl09ZTticmVha31lbHNle2NvbnN0IGQ9aVtvKytdLHk9ZD09PSJbIixfPXRbZl18fCh5P1tdOnt9KTt0W2ZdPV8sdD1fLG5bc109bltzXXx8ZnVuY3Rpb24obSl7cmV0dXJuIGZ1bmN0aW9uKHgpe3dpKG0seCl9fShfKSxzKz1kfX19ZnVuY3Rpb24gdGYocixlKXtsZXQgdD0wO2Z1bmN0aW9uIG4oYSx1LGYpe2NvbnN0IGM9dS5uYW1lLmVuZHNXaXRoKCJbMF0iKSxkPXUudHlwZSx5PUVbZF07aWYoIXkpdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIHR5cGU6IDB4JHtkLnRvU3RyaW5nKDE2KX1gKTtsZXQgXztpZih5LmJpbmRQb2ludCl7Y29uc3QgbT10O3QrPXUuc2l6ZSxjP189eS5hcnJheVNldHRlcihyLGQsbSxmLHUuc2l6ZSk6Xz15LnNldHRlcihyLGQsbSxmLHUuc2l6ZSl9ZWxzZSB5LmFycmF5U2V0dGVyJiZjP189eS5hcnJheVNldHRlcihyLGYpOl89eS5zZXR0ZXIocixmKTtyZXR1cm4gXy5sb2NhdGlvbj1mLF99Y29uc3QgaT17fSxvPXt9LHM9ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsWm4pO2ZvcihsZXQgYT0wO2E8czsrK2Epe2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtKGUsYSk7aWYoQWkodSkpY29udGludWU7bGV0IGY9dS5uYW1lO2YuZW5kc1dpdGgoIlswXSIpJiYoZj1mLnN1YnN0cigwLGYubGVuZ3RoLTMpKTtjb25zdCBjPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsdS5uYW1lKTtpZihjKXtjb25zdCBkPW4oZSx1LGMpO2lbZl09ZCxlZihmLGQsbyxpKX19cmV0dXJuIGl9ZnVuY3Rpb24gcmYocixlKXtjb25zdCB0PXt9LG49ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUscXUpO2ZvcihsZXQgaT0wO2k8bjsrK2kpe2NvbnN0IG89ci5nZXRUcmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmcoZSxpKTt0W28ubmFtZV09e2luZGV4OmksdHlwZTpvLnR5cGUsc2l6ZTpvLnNpemV9fXJldHVybiB0fWZ1bmN0aW9uIG5mKHIsZSl7Y29uc3QgdD1yLmdldFByb2dyYW1QYXJhbWV0ZXIoZSxabiksbj1bXSxpPVtdO2ZvcihsZXQgYT0wO2E8dDsrK2Epe2kucHVzaChhKSxuLnB1c2goe30pO2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtKGUsYSk7blthXS5uYW1lPXUubmFtZX1bWyJVTklGT1JNX1RZUEUiLCJ0eXBlIl0sWyJVTklGT1JNX1NJWkUiLCJzaXplIl0sWyJVTklGT1JNX0JMT0NLX0lOREVYIiwiYmxvY2tOZHgiXSxbIlVOSUZPUk1fT0ZGU0VUIiwib2Zmc2V0Il1dLmZvckVhY2goZnVuY3Rpb24oYSl7Y29uc3QgdT1hWzBdLGY9YVsxXTtyLmdldEFjdGl2ZVVuaWZvcm1zKGUsaSxyW3VdKS5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7bltkXVtmXT1jfSl9KTtjb25zdCBvPXt9LHM9ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsWHUpO2ZvcihsZXQgYT0wO2E8czsrK2Epe2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtQmxvY2tOYW1lKGUsYSksZj17aW5kZXg6ci5nZXRVbmlmb3JtQmxvY2tJbmRleChlLHUpLHVzZWRCeVZlcnRleFNoYWRlcjpyLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihlLGEsWXUpLHVzZWRCeUZyYWdtZW50U2hhZGVyOnIuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKGUsYSxRdSksc2l6ZTpyLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihlLGEsS3UpLHVuaWZvcm1JbmRpY2VzOnIuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKGUsYSxKdSl9O2YudXNlZD1mLnVzZWRCeVZlcnRleFNoYWRlcnx8Zi51c2VkQnlGcmFnbWVudFNoYWRlcixvW3VdPWZ9cmV0dXJue2Jsb2NrU3BlY3M6byx1bmlmb3JtRGF0YTpufX1mdW5jdGlvbiB3aShyLGUpe2Zvcihjb25zdCB0IGluIGUpe2NvbnN0IG49clt0XTt0eXBlb2Ygbj09ImZ1bmN0aW9uIj9uKGVbdF0pOndpKHJbdF0sZVt0XSl9fWZ1bmN0aW9uIFJpKHIsLi4uZSl7Y29uc3QgdD1yLnVuaWZvcm1TZXR0ZXJzfHxyLG49ZS5sZW5ndGg7Zm9yKGxldCBpPTA7aTxuOysraSl7Y29uc3Qgbz1lW2ldO2lmKEFycmF5LmlzQXJyYXkobykpe2NvbnN0IHM9by5sZW5ndGg7Zm9yKGxldCBhPTA7YTxzOysrYSlSaSh0LG9bYV0pfWVsc2UgZm9yKGNvbnN0IHMgaW4gbyl7Y29uc3QgYT10W3NdO2EmJmEob1tzXSl9fX1mdW5jdGlvbiBvZihyLGUpe2NvbnN0IHQ9e30sbj1yLmdldFByb2dyYW1QYXJhbWV0ZXIoZSxqdSk7Zm9yKGxldCBpPTA7aTxuOysraSl7Y29uc3Qgbz1yLmdldEFjdGl2ZUF0dHJpYihlLGkpO2lmKEFpKG8pKWNvbnRpbnVlO2NvbnN0IHM9ci5nZXRBdHRyaWJMb2NhdGlvbihlLG8ubmFtZSksYT1EW28udHlwZV0sdT1hLnNldHRlcihyLHMsYSk7dS5sb2NhdGlvbj1zLHRbby5uYW1lXT11fXJldHVybiB0fWZ1bmN0aW9uIHNmKHIsZSl7Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3Qgbj1yW3RdO24mJm4oZVt0XSl9fWZ1bmN0aW9uIGFmKHIsZSx0KXt0LnZlcnRleEFycmF5T2JqZWN0P3IuYmluZFZlcnRleEFycmF5KHQudmVydGV4QXJyYXlPYmplY3QpOihzZihlLmF0dHJpYlNldHRlcnN8fGUsdC5hdHRyaWJzKSx0LmluZGljZXMmJnIuYmluZEJ1ZmZlcigkdSx0LmluZGljZXMpKX1mdW5jdGlvbiBTaShyLGUpe2NvbnN0IHQ9dGYocixlKSxuPW9mKHIsZSksaT17cHJvZ3JhbTplLHVuaWZvcm1TZXR0ZXJzOnQsYXR0cmliU2V0dGVyczpufTtyZXR1cm4gVWUocikmJihpLnVuaWZvcm1CbG9ja1NwZWM9bmYocixlKSxpLnRyYW5zZm9ybUZlZWRiYWNrSW5mbz1yZihyLGUpKSxpfWNvbnN0IHVmPS9cc3x7fH18Oy87ZnVuY3Rpb24gY2YocixlLHQsbixpKXtjb25zdCBvPUFyKHQsbixpKSxzPVtdO2lmKGU9ZS5tYXAoZnVuY3Rpb24oZil7aWYoIXVmLnRlc3QoZikpe2NvbnN0IGM9Sm4oZik7aWYoYylmPWMudGV4dDtlbHNle2NvbnN0IGQ9YG5vIGVsZW1lbnQgd2l0aCBpZDogJHtmfWA7by5lcnJvckNhbGxiYWNrKGQpLHMucHVzaChkKX19cmV0dXJuIGZ9KSxzLmxlbmd0aClyZXR1cm4gR2MobywiIik7Y29uc3QgYT1vLmNhbGxiYWNrO2EmJihvLmNhbGxiYWNrPShmLGMpPT57YShmLGY/dm9pZCAwOlNpKHIsYykpfSk7Y29uc3QgdT1LYyhyLGUsbyk7cmV0dXJuIHU/U2kocix1KTpudWxsfWNvbnN0IGZmPTQsSWk9NTEyMztmdW5jdGlvbiBsZihyLGUsdCxuLGksbyl7dD10PT09dm9pZCAwP2ZmOnQ7Y29uc3Qgcz1lLmluZGljZXMsYT1lLmVsZW1lbnRUeXBlLHU9bj09PXZvaWQgMD9lLm51bUVsZW1lbnRzOm47aT1pPT09dm9pZCAwPzA6aSxhfHxzP28hPT12b2lkIDA/ci5kcmF3RWxlbWVudHNJbnN0YW5jZWQodCx1LGE9PT12b2lkIDA/SWk6ZS5lbGVtZW50VHlwZSxpLG8pOnIuZHJhd0VsZW1lbnRzKHQsdSxhPT09dm9pZCAwP0lpOmUuZWxlbWVudFR5cGUsaSk6byE9PXZvaWQgMD9yLmRyYXdBcnJheXNJbnN0YW5jZWQodCxpLHUsbyk6ci5kcmF3QXJyYXlzKHQsaSx1KX1jb25zdCBGaT0zNjE2MCxSdD0zNjE2MSxkZj0zNTUzLG1mPTUxMjEsaGY9NjQwMixwZj02NDA4LHlmPTMzMTkwLF9mPTM2MDEyLHhmPTM1MDU2LGdmPTM2MDEzLGJmPTMyODU0LHZmPTMyODU1LEVmPTM2MTk0LFBpPTMzMTg5LERpPTY0MDEsTWk9MzYxNjgsd3I9MzQwNDEsUnI9MzYwNjQsU3Q9MzYwOTYsQ2k9MzYxMjgsU3I9MzMzMDYsSXI9MzMwNzEsRnI9OTcyOSxUZj1be2Zvcm1hdDpwZix0eXBlOm1mLG1pbjpGcix3cmFwOklyfSx7Zm9ybWF0OndyfV0scT17fTtxW3dyXT1TcixxW0RpXT1DaSxxW01pXT1DaSxxW2hmXT1TdCxxW1BpXT1TdCxxW3lmXT1TdCxxW19mXT1TdCxxW3hmXT1TcixxW2dmXT1TcjtmdW5jdGlvbiBBZihyLGUpe3JldHVybiBxW3JdfHxxW2VdfWNvbnN0IGRlPXt9O2RlW2JmXT0hMCxkZVt2Zl09ITAsZGVbRWZdPSEwLGRlW3dyXT0hMCxkZVtQaV09ITAsZGVbRGldPSEwLGRlW01pXT0hMDtmdW5jdGlvbiB3ZihyKXtyZXR1cm4gZGVbcl19Y29uc3QgUmY9MzI7ZnVuY3Rpb24gU2Yocil7cmV0dXJuIHI+PVJyJiZyPFJyK1JmfWZ1bmN0aW9uIEl0KHIsZSx0LG4pe2NvbnN0IGk9Rmksbz1yLmNyZWF0ZUZyYW1lYnVmZmVyKCk7ci5iaW5kRnJhbWVidWZmZXIoaSxvKSx0PXR8fHIuZHJhd2luZ0J1ZmZlcldpZHRoLG49bnx8ci5kcmF3aW5nQnVmZmVySGVpZ2h0LGU9ZXx8VGY7Y29uc3Qgcz1bXSxhPXtmcmFtZWJ1ZmZlcjpvLGF0dGFjaG1lbnRzOltdLHdpZHRoOnQsaGVpZ2h0Om59O3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odSxmKXtsZXQgYz11LmF0dGFjaG1lbnQ7Y29uc3QgZD11LnNhbXBsZXMseT11LmZvcm1hdDtsZXQgXz11LmF0dGFjaG1lbnRQb2ludHx8QWYoeSx1LmludGVybmFsRm9ybWF0KTtpZihffHwoXz1ScitmKSxTZihfKSYmcy5wdXNoKF8pLCFjKWlmKGQhPT12b2lkIDB8fHdmKHkpKWM9ci5jcmVhdGVSZW5kZXJidWZmZXIoKSxyLmJpbmRSZW5kZXJidWZmZXIoUnQsYyksZD4xP3IucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKFJ0LGQseSx0LG4pOnIucmVuZGVyYnVmZmVyU3RvcmFnZShSdCx5LHQsbik7ZWxzZXtjb25zdCBtPU9iamVjdC5hc3NpZ24oe30sdSk7bS53aWR0aD10LG0uaGVpZ2h0PW4sbS5hdXRvPT09dm9pZCAwJiYobS5hdXRvPSExLG0ubWluPW0ubWlufHxtLm1pbk1hZ3x8RnIsbS5tYWc9bS5tYWd8fG0ubWluTWFnfHxGcixtLndyYXBTPW0ud3JhcFN8fG0ud3JhcHx8SXIsbS53cmFwVD1tLndyYXBUfHxtLndyYXB8fElyKSxjPUtuKHIsbSl9aWYoQnMocixjKSlyLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGksXyxSdCxjKTtlbHNlIGlmKG9yKHIsYykpdS5sYXllciE9PXZvaWQgMD9yLmZyYW1lYnVmZmVyVGV4dHVyZUxheWVyKGksXyxjLHUubGV2ZWx8fDAsdS5sYXllcik6ci5mcmFtZWJ1ZmZlclRleHR1cmUyRChpLF8sdS50YXJnZXR8fGRmLGMsdS5sZXZlbHx8MCk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gYXR0YWNobWVudCB0eXBlIik7YS5hdHRhY2htZW50cy5wdXNoKGMpfSksci5kcmF3QnVmZmVycyYmci5kcmF3QnVmZmVycyhzKSxhfWZ1bmN0aW9uIElmKHIsZSx0KXt0PXR8fEZpLGU/KHIuYmluZEZyYW1lYnVmZmVyKHQsZS5mcmFtZWJ1ZmZlciksci52aWV3cG9ydCgwLDAsZS53aWR0aCxlLmhlaWdodCkpOihyLmJpbmRGcmFtZWJ1ZmZlcih0LG51bGwpLHIudmlld3BvcnQoMCwwLHIuZHJhd2luZ0J1ZmZlcldpZHRoLHIuZHJhd2luZ0J1ZmZlckhlaWdodCkpfWZ1bmN0aW9uIFMocixlKXtyZXR1cm4oKT0+ZSBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZT9lOktuKHIse3NyYzplLHdyYXA6ci5DTEFNUF9UT19FREdFfSl9Y29uc3QgT2k9MjtjbGFzcyBiZXtjb25zdHJ1Y3RvcihlKXtwKHRoaXMsImlkIiwiXyIpO3AodGhpcywiY29udGV4dCIpO3AodGhpcywib3V0cHV0Iik7cCh0aGlzLCJmYmkiKTtwKHRoaXMsIm9wdGlvbnMiKTtwKHRoaXMsInByb2dyYW1JbmZvIik7cCh0aGlzLCJidWZmZXJJbmZvIik7cCh0aGlzLCJwcm9maWxlciIpO3AodGhpcywibGFzdFJ1biIpO2NvbnN0e2NvbnRleHQ6dCx3aWR0aDpuLGhlaWdodDppfT1lO3RoaXMuY29udGV4dD10LHRoaXMub3B0aW9ucz1lO2NvbnN0IG89dGhpcy5idWlsZERlZmluZXMoKTt0aGlzLnByb2dyYW1JbmZvPWNmKHRoaXMuY29udGV4dCxbbyt0aGlzLmdldFZlcnRleFNoYWRlcigpLG8rdGhpcy5nZXRGcmFnbWVudFNoYWRlcigpXSksdGhpcy5idWZmZXJJbmZvPWFhKHRoaXMuY29udGV4dCx0aGlzLmdldEJ1ZmZlcnMoKSksdGhpcy5mYmk9SXQodGhpcy5jb250ZXh0LFt7Zm9ybWF0OnRoaXMuY29udGV4dC5SR0JBLHR5cGU6dGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnRoaXMuY29udGV4dC5MSU5FQVIsd3JhcDp0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLG4saSksdGhpcy5vdXRwdXQ9dGhpcy5mYmkuYXR0YWNobWVudHNbMF19cmVzaXplT3V0cHV0KGUsdCl7dGhpcy5mYmk9SXQodGhpcy5jb250ZXh0LFt7Zm9ybWF0OnRoaXMuY29udGV4dC5SR0JBLHR5cGU6dGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnRoaXMuY29udGV4dC5MSU5FQVIsd3JhcDp0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLGUsdCksdGhpcy5vcHRpb25zLndpZHRoPWUsdGhpcy5vcHRpb25zLmhlaWdodD10LHRoaXMub3V0cHV0PXRoaXMuZmJpLmF0dGFjaG1lbnRzWzBdfWdldERlZmluZXMoKXtyZXR1cm57fX1nZXRCdWZmZXJzKCl7cmV0dXJue3Bvc2l0aW9uOntudW1Db21wb25lbnRzOjIsZGF0YTpbLTEsLTEsLTEsMSwxLC0xLDEsMSwtMSwxLDEsLTFdfSx0ZXh0dXJlX2Nvb3JkOntudW1Db21wb25lbnRzOjIsZGF0YTpbMCwwLDAsMSwxLDAsMSwxLDAsMSwxLDBdfX19YnVpbGREZWZpbmVzKCl7bGV0IGU9IiI7Y29uc3QgdD10aGlzLmdldERlZmluZXMoKTtmb3IobGV0IG4gaW4gdCllKz1gI2RlZmluZSAke259ICR7dFtuXS50b0ZpeGVkKDEpfQpgO3JldHVybiBlfXJ1bihlKXt2YXIgaSxvLHMsYSx1LGY7KGk9dGhpcy5wcm9maWxlcik9PW51bGx8fGkucHVzaENvbnRleHQoYFske3RoaXMuaWR9XSBQUk9HIDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCksKG89dGhpcy5wcm9maWxlcik9PW51bGx8fG8ucHVzaENvbnRleHQoYFske3RoaXMuaWR9XSBVTklGT1JNU2ApO2Zvcihjb25zdCBjIGluIGUpdHlwZW9mIGVbY109PSJmdW5jdGlvbiImJigocz10aGlzLnByb2ZpbGVyKT09bnVsbHx8cy5wdXNoQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSSA6ICR7Y31gKSxlW2NdPWVbY10oKSwoYT10aGlzLnByb2ZpbGVyKT09bnVsbHx8YS5wb3BDb250ZXh0KGBbJHt0aGlzLmlkfV0gVU5JIDogJHtjfWApKTsodT10aGlzLnByb2ZpbGVyKT09bnVsbHx8dS5wb3BDb250ZXh0KGBbJHt0aGlzLmlkfV0gVU5JRk9STVNgKTtjb25zdCB0PURhdGUubm93KCk7bGV0IG49MDt0aGlzLmxhc3RSdW4mJihuPSh0LXRoaXMubGFzdFJ1bikvMWUzKSx0aGlzLmxhc3RSdW49dCx0aGlzLmNvbnRleHQudmlld3BvcnQoMCwwLHRoaXMuY29udGV4dC5jYW52YXMud2lkdGgsdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQpLHRoaXMuY29udGV4dC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbUluZm8ucHJvZ3JhbSksYWYodGhpcy5jb250ZXh0LHRoaXMucHJvZ3JhbUluZm8sdGhpcy5idWZmZXJJbmZvKSxSaSh0aGlzLnByb2dyYW1JbmZvLHtkZWx0YTpuLGNhbnZhczpbdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCx0aGlzLmNvbnRleHQuY2FudmFzLmhlaWdodF0sLi4uZX0pLElmKHRoaXMuY29udGV4dCx0aGlzLm9wdGlvbnMuZGlzYWJsZUZyYW1lYnVmZmVyP251bGw6dGhpcy5mYmkpLGxmKHRoaXMuY29udGV4dCx0aGlzLmJ1ZmZlckluZm8pLChmPXRoaXMucHJvZmlsZXIpPT1udWxsfHxmLnBvcENvbnRleHQoYFske3RoaXMuaWR9XSBQUk9HIDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCl9c2V0UHJvZmlsZXIoZSl7dGhpcy5wcm9maWxlcj1lfX12YXIgRmY9YHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwoKdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKdW5pZm9ybSB2ZWMyIGNhbnZhczsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKdW5pZm9ybSBzYW1wbGVyMkQgbWFzazsKCnZlYzQgbG9vcCgpOwoKdm9pZCBtYWluKCkgeyBnbF9GcmFnQ29sb3IgPSBsb29wKCk7IH0KYCxQZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgO2NsYXNzIERmIGV4dGVuZHMgYmV7Z2V0RGVmaW5lcygpe3ZhciBlO3JldHVybntSQURJVVM6KGU9dGhpcy5vcHRpb25zLnJhZGl1cykhPW51bGw/ZToxfX1nZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBGZit0aGlzLmNyZWF0ZUxvb3BGdW5jdGlvbigpfWdldFZlcnRleFNoYWRlcigpe3JldHVybiBQZn1jcmVhdGVMb29wRnVuY3Rpb24oKXt2YXIgdDtsZXQgZT0odD10aGlzLm9wdGlvbnMucmFkaXVzKSE9bnVsbD90OjE7cmV0dXJuYAoKICAgICAgICB2ZWM0IGxvb3AoKSB7IAogICAgICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMCwwLDAsMCk7CiAgICAgICAgICAgIGZsb2F0IGZhY3RvclN1bSA9IDAuOwoKICAgICAgICAgICAgdmVjMiBub3JtYWxpemVkUmFkaXVzID0gdmVjMigtJHtlfS4pIC8gY2FudmFzOwogICAgICAgICAgICB2ZWMyIG5vcm1hbGl6ZWRJbmNyZW1lbnQgPSB2ZWMyKDEuKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBkaWZmID0gbm9ybWFsaXplZFJhZGl1czsKICAgICAgICAgICAgZmxvYXQgbWF4TGVuZ3RoID0gbGVuZ3RoKG5vcm1hbGl6ZWRSYWRpdXMpOwoKICAgICAgICAgICAgZm9yKGludCB5PS0ke2V9OyB5PCR7ZSsxfTsgKyt5KSB7CiAgICAgICAgICAgICAgICBmb3IoaW50IHg9LSR7ZX07IHg8JHtlKzF9OyArK3gpIHsKICAgICAgICAgICAgICAgICAgICBmbG9hdCBmYWN0b3IgPSAoMS4tIHRleHR1cmUyRChtYXNrLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpLmEpICogKG1heExlbmd0aCAtIGxlbmd0aChkaWZmKSkgLyBtYXhMZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGZhY3RvciAqIHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpOwogICAgICAgICAgICAgICAgICAgIGZhY3RvclN1bSArPSBmYWN0b3I7CiAgICAgICAgICAgICAgICAgICAgZGlmZi54ICs9IG5vcm1hbGl6ZWRJbmNyZW1lbnQueDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRpZmYueSArPSBub3JtYWxpemVkSW5jcmVtZW50Lnk7CiAgICAgICAgICAgICAgICBkaWZmLnggPSBub3JtYWxpemVkUmFkaXVzLng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAvIGZhY3RvclN1bTsKICAgICAgICB9YH19dmFyIE1mPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCnVuaWZvcm0gc2FtcGxlcjJEIGJhY2tncm91bmQ7CnVuaWZvcm0gc2FtcGxlcjJEIGZvcmVncm91bmQ7CnVuaWZvcm0gc2FtcGxlcjJEIHRocmVzaG9sZDsKCnZvaWQgbWFpbigpIHsKICB2ZWM0IGJhY2tncm91bmRDb2xvciA9IHRleHR1cmUyRChiYWNrZ3JvdW5kLCBfdGV4dHVyZV9jb29yZCk7CiAgdmVjNCBmb3JlZ3JvdW5kQ29sb3IgPSB0ZXh0dXJlMkQoZm9yZWdyb3VuZCwgX3RleHR1cmVfY29vcmQpOwogIHZlYzQgdHJlc2hvbGRDb2xvciA9IHRleHR1cmUyRCh0aHJlc2hvbGQsIF90ZXh0dXJlX2Nvb3JkKTsKICBnbF9GcmFnQ29sb3IgPSBmb3JlZ3JvdW5kQ29sb3IgKiB0cmVzaG9sZENvbG9yLmEgKwogICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciAqICgxLiAtIHRyZXNob2xkQ29sb3IuYSk7Cn0KYCxDZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKICBfdGV4dHVyZV9jb29yZC55ID0gMS4gLSB0ZXh0dXJlX2Nvb3JkLnk7Cn0KYDtjbGFzcyBQciBleHRlbmRzIGJle2dldEZyYWdtZW50U2hhZGVyKCl7cmV0dXJuIE1mfWdldFZlcnRleFNoYWRlcigpe3JldHVybiBDZn19Y2xhc3MgRHJ7Y29uc3RydWN0b3IoKXtwKHRoaXMsInN0ZXBzIixbXSk7cCh0aGlzLCJwcm9maWxlciIpfWFkZFN0ZXAoZSl7dGhpcy5zdGVwcy5wdXNoKGUpfWFzeW5jIHJ1bigpe2Zvcihjb25zdCBlIG9mIHRoaXMuc3RlcHMpZS5wcm9ncmFtLnJ1bihlLmdldFVuaWZvcm1zKCkpfXJlc2l6ZU91dHB1dChlLHQpe3ZhciBuLGk7KG49dGhpcy5wcm9maWxlcik9PW51bGx8fG4ucHVzaENvbnRleHQoYFBJUCBbJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9XWApO2Zvcihjb25zdCBvIG9mIHRoaXMuc3RlcHMpby5wcmV2ZW50UmVzaXplfHxvLnByb2dyYW0ucmVzaXplT3V0cHV0KGUsdCk7KGk9dGhpcy5wcm9maWxlcik9PW51bGx8fGkucG9wQ29udGV4dChgUElQIFske3RoaXMuY29uc3RydWN0b3IubmFtZX1dYCl9c2V0UHJvZmlsZXIoZSl7dGhpcy5wcm9maWxlcj1lO2Zvcihjb25zdCB0IG9mIHRoaXMuc3RlcHMpdC5wcm9ncmFtLnNldFByb2ZpbGVyKGUpfXNldElkKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuc3RlcHMpdC5wcm9ncmFtLmlkPWV9fWNsYXNzIE1yIGV4dGVuZHMgRHJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3AodGhpcywicHJlY2lzZU1hc2tFbmFibGVkIiwhMSl9fWNvbnN0IE9mPTEwLE5mPTIsVWY9ODtjbGFzcyBCZiBleHRlbmRzIE1ye2NvbnN0cnVjdG9yKHQsbil7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0TWFzayIpO3AodGhpcywiYmx1ciIpO3RoaXMuY29udGV4dD10LHRoaXMucmFkaXVzPW47Y29uc3QgaT17Y29udGV4dDp0LGhlaWdodDp0LmNhbnZhcy5oZWlnaHQsd2lkdGg6dC5jYW52YXMud2lkdGh9O3RoaXMuYmx1cj1uZXcgRGYoey4uLmkscmFkaXVzOm4sLi4udGhpcy5nZXRCbHVyVGV4dHVyZVNpemUodC5jYW52YXMud2lkdGgsdC5jYW52YXMuaGVpZ2h0KX0pO2NvbnN0IG89bmV3IFByKHsuLi5pLGRpc2FibGVGcmFtZWJ1ZmZlcjohMH0pO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTp0aGlzLmJsdXIscHJldmVudFJlc2l6ZTohMCxnZXRVbmlmb3JtczooKT0+KHt0ZXh0dXJlOlModCx0aGlzLmlucHV0SW1hZ2UpLG1hc2s6Uyh0LHRoaXMuaW5wdXRNYXNrKX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOm8sZ2V0VW5pZm9ybXM6KCk9Pih7YmFja2dyb3VuZDpTKHQsdGhpcy5ibHVyLm91dHB1dCksZm9yZWdyb3VuZDpTKHQsdGhpcy5pbnB1dEltYWdlKSx0aHJlc2hvbGQ6Uyh0LHRoaXMuaW5wdXRNYXNrKX0pfSl9Z2V0Qmx1clRleHR1cmVTaXplKHQsbil7Y29uc3QgaT10aGlzLnJhZGl1cz5PZj9VZjpOZjtyZXR1cm57d2lkdGg6TWF0aC5tYXgoT2ksdC9pKSxoZWlnaHQ6TWF0aC5tYXgoT2ksbi9pKX19c2V0RGF0YSh0LG4pe3RoaXMuaW5wdXRJbWFnZT10LHRoaXMuaW5wdXRNYXNrPW59cmVzaXplT3V0cHV0KHQsbil7c3VwZXIucmVzaXplT3V0cHV0KHQsbik7Y29uc3QgaT10aGlzLmdldEJsdXJUZXh0dXJlU2l6ZSh0LG4pO3RoaXMuYmx1ci5yZXNpemVPdXRwdXQoaS53aWR0aCxpLmhlaWdodCl9fWNsYXNzIE5pIGV4dGVuZHMgTXJ7Y29uc3RydWN0b3IodCl7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0QmFja2dyb3VuZEltYWdlIik7cCh0aGlzLCJpbnB1dE1hc2siKTtwKHRoaXMsInByZWNpc2VNYXNrRW5hYmxlZCIsITApO3RoaXMuY29udGV4dD10O2NvbnN0IG49e2NvbnRleHQ6dCxoZWlnaHQ6dC5jYW52YXMuaGVpZ2h0LHdpZHRoOnQuY2FudmFzLndpZHRofSxpPW5ldyBQcih7Li4ubixkaXNhYmxlRnJhbWVidWZmZXI6ITB9KTt0aGlzLmFkZFN0ZXAoe3Byb2dyYW06aSxnZXRVbmlmb3JtczooKT0+KHtiYWNrZ3JvdW5kOlModCx0aGlzLmlucHV0QmFja2dyb3VuZEltYWdlKSxmb3JlZ3JvdW5kOlModCx0aGlzLmlucHV0SW1hZ2UpLHRocmVzaG9sZDpTKHQsdGhpcy5pbnB1dE1hc2spfSl9KX1zZXREYXRhKHQsbil7dGhpcy5pbnB1dEltYWdlPXQsdGhpcy5pbnB1dE1hc2s9bn19Y2xhc3Mga2YgZXh0ZW5kcyBOaXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyk7cCh0aGlzLCJmcmFtZVJlYWRlciIpO3AodGhpcywicHJlY2lzZU1hc2tFbmFibGVkIiwhMCl9c2V0IGlucHV0VmlkZW8odCl7dGhpcy5mcmFtZVJlYWRlcj10LmdldFJlYWRlcigpLHRoaXMucmVhZE5leHRWaWRlb0ZyYW1lKCl9YXN5bmMgcnVuKCl7dGhpcy5mcmFtZVJlYWRlciYmKGF3YWl0IHN1cGVyLnJ1bigpLHRoaXMucmVhZE5leHRWaWRlb0ZyYW1lKCkpfWFzeW5jIHJlYWROZXh0VmlkZW9GcmFtZSgpe3ZhciBuO2NvbnN0IHQ9YXdhaXQoKG49dGhpcy5mcmFtZVJlYWRlcik9PW51bGw/dm9pZCAwOm4ucmVhZCgpKTt0IT1udWxsJiZ0LnZhbHVlJiYodGhpcy5pbnB1dEJhY2tncm91bmRJbWFnZT1hd2FpdCBjcmVhdGVJbWFnZUJpdG1hcCh0LnZhbHVlKSx0LnZhbHVlLmNsb3NlKCkpfX12YXIgTGY9YHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwoKdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKdW5pZm9ybSB2ZWMyIGNhbnZhczsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKCnZlYzQgbG9vcCgpOwoKdm9pZCBtYWluKCkgeyBnbF9GcmFnQ29sb3IgPSBsb29wKCk7IH0KYCwkZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgLENyPShyPT4ocltyLkxJTkVBUj0wXT0iTElORUFSIixyW3IuR0FVU1NJQU49MV09IkdBVVNTSUFOIixyKSkoQ3J8fHt9KTtjbGFzcyBVaSBleHRlbmRzIGJle2dldERlZmluZXMoKXt2YXIgZTtyZXR1cm57UkFESVVTOihlPXRoaXMub3B0aW9ucy5yYWRpdXMpIT1udWxsP2U6MX19Z2V0RnJhZ21lbnRTaGFkZXIoKXtyZXR1cm4gTGYrdGhpcy5jcmVhdGVMb29wRnVuY3Rpb24oKX1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gJGZ9Y3JlYXRlTG9vcEZ1bmN0aW9uKCl7dmFyIHQ7bGV0IGU9KHQ9dGhpcy5vcHRpb25zLnJhZGl1cykhPW51bGw/dDoxO3JldHVybmAKCiAgICAgICAgdmVjNCBsb29wKCkgeyAKICAgICAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAsMCwwLDApOwogICAgICAgICAgICBmbG9hdCBmYWN0b3JTdW0gPSAwLjsKCiAgICAgICAgICAgIHZlYzIgbm9ybWFsaXplZFJhZGl1cyA9IHZlYzIoLSR7ZX0uKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBub3JtYWxpemVkSW5jcmVtZW50ID0gdmVjMigxLikgLyBjYW52YXM7CiAgICAgICAgICAgIHZlYzIgZGlmZiA9IG5vcm1hbGl6ZWRSYWRpdXM7CgogICAgICAgICAgICBmb3IoaW50IHk9LSR7ZX07IHk8JHtlKzF9OyArK3kpIHsKICAgICAgICAgICAgICAgIGZvcihpbnQgeD0tJHtlfTsgeDwke2UrMX07ICsreCkgewogICAgICAgICAgICAgICAgICAgIGZsb2F0IGZhY3RvciA9IDEuOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBmYWN0b3IgKiB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQgKyBkaWZmKTsKICAgICAgICAgICAgICAgICAgICBmYWN0b3JTdW0gKz0gZmFjdG9yOwogICAgICAgICAgICAgICAgICAgIGRpZmYueCArPSBub3JtYWxpemVkSW5jcmVtZW50Lng7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkaWZmLnkgKz0gbm9ybWFsaXplZEluY3JlbWVudC55OwogICAgICAgICAgICAgICAgZGlmZi54ID0gbm9ybWFsaXplZFJhZGl1cy54OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQgLyBmYWN0b3JTdW07CiAgICAgICAgfWB9Z2V0RmFjdG9yKGUsdCl7c3dpdGNoKHRoaXMub3B0aW9ucy50eXBlKXtjYXNlIDE6cmV0dXJuIHRoaXMuZ2V0TGluZWFyRmFjdG9yKGUsdCk7Y2FzZSAwOmRlZmF1bHQ6cmV0dXJuIHRoaXMuZ2V0TGluZWFyRmFjdG9yKGUsdCl9fWdldExpbmVhckZhY3RvcihlLHQpe3JldHVybiAxfWdldEdhdXNzaWFuRmFjdG9yKGUsdCl7dmFyIHU7Y29uc3Qgbj1NYXRoLlBJKjIsaT1NYXRoLm1heCgodT10aGlzLm9wdGlvbnMucmFkaXVzKSE9bnVsbD91OjEsMSksbz0xLyhuKmkqKjIpLHM9LShlKioyK3QqKjIpLGE9bypzO3JldHVybiBvKk1hdGguRSoqYX19Y2xhc3MgR2YgZXh0ZW5kcyBNcntjb25zdHJ1Y3Rvcih0LG4pe3N1cGVyKCk7cCh0aGlzLCJpbnB1dEltYWdlIik7cCh0aGlzLCJpbnB1dE1hc2siKTt0aGlzLmNvbnRleHQ9dDtjb25zdCBpPXtjb250ZXh0OnQsaGVpZ2h0OnQuY2FudmFzLmhlaWdodCx3aWR0aDp0LmNhbnZhcy53aWR0aH0sbz1uZXcgVWkoey4uLmkscmFkaXVzOm4sdHlwZTpDci5HQVVTU0lBTn0pLHM9bmV3IFByKHsuLi5pLGRpc2FibGVGcmFtZWJ1ZmZlcjohMH0pO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpvLGdldFVuaWZvcm1zOigpPT4oe3RleHR1cmU6Uyh0LHRoaXMuaW5wdXRJbWFnZSl9KX0pLHRoaXMuYWRkU3RlcCh7cHJvZ3JhbTpzLGdldFVuaWZvcm1zOigpPT4oe2JhY2tncm91bmQ6Uyh0LHRoaXMuaW5wdXRJbWFnZSksZm9yZWdyb3VuZDpTKHQsby5vdXRwdXQpLHRocmVzaG9sZDpTKHQsdGhpcy5pbnB1dE1hc2spfSl9KX1zZXREYXRhKHQsbil7dGhpcy5pbnB1dEltYWdlPXQsdGhpcy5pbnB1dE1hc2s9bn19Y2xhc3MgT3IgZXh0ZW5kcyBiZXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtwKHRoaXMsImZiaTIiKTt0aGlzLmZiaTI9SXQodC5jb250ZXh0LFt7Zm9ybWF0OnQuY29udGV4dC5SR0JBLHR5cGU6dC5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnQuY29udGV4dC5MSU5FQVIsbWFnOnQuY29udGV4dC5MSU5FQVIsd3JhcDp0LmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLHQud2lkdGgsdC5oZWlnaHQpfXJ1bih0KXtjb25zdCBuPXRoaXMuZmJpO3RoaXMuZmJpPXRoaXMuZmJpMix0aGlzLmZiaTI9bix0aGlzLm91dHB1dD10aGlzLmZiaS5hdHRhY2htZW50c1swXSxzdXBlci5ydW4oey4uLnQscHJldmlvdXNfcmVuZGVyaW5nOnRoaXMuZmJpMi5hdHRhY2htZW50c1swXX0pfXJlc2l6ZU91dHB1dCh0LG4pe3N1cGVyLnJlc2l6ZU91dHB1dCh0LG4pLHRoaXMuZmJpMj1JdCh0aGlzLmNvbnRleHQsW3tmb3JtYXQ6dGhpcy5jb250ZXh0LlJHQkEsdHlwZTp0aGlzLmNvbnRleHQuVU5TSUdORURfQllURSxtaW46dGhpcy5jb250ZXh0LkxJTkVBUix3cmFwOnRoaXMuY29udGV4dC5DTEFNUF9UT19FREdFfV0sdCxuKX19dmFyIHpmPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCi8vIHVuaWZvcm0gZmxvYXQgdHJlc2hvbGQ7CnVuaWZvcm0gc2FtcGxlcjJEIGltYWdlX25vdzsKdW5pZm9ybSBzYW1wbGVyMkQgaW1hZ2VfYmVmb3JlOwp1bmlmb3JtIHNhbXBsZXIyRCBtYXNrX25vdzsKdW5pZm9ybSBzYW1wbGVyMkQgbWFza19iZWZvcmU7CnVuaWZvcm0gc2FtcGxlcjJEIHByZXZpb3VzX3JlbmRlcmluZzsKdW5pZm9ybSB2ZWMyIGNhbnZhczsKCnVuaWZvcm0gZmxvYXQgZGVsdGE7CgpmbG9hdCBjdXJyZW50X2ZhY3RvciA9IDAuNjk7CmZsb2F0IHByZXZpb3VzX2ZhY3RvciA9IDAuNzQ7CmZsb2F0IHRocmVzaG9sZF9hY3RpdmF0aW9uID0gMC41NDsKCmZsb2F0IG1hcChmbG9hdCB2YWx1ZSwgZmxvYXQgbWluMSwgZmxvYXQgbWF4MSwgZmxvYXQgbWluMiwgZmxvYXQgbWF4MikgewogIHJldHVybiBtaW4yICsgKHZhbHVlIC0gbWluMSkgKiAobWF4MiAtIG1pbjIpIC8gKG1heDEgLSBtaW4xKTsKfQoKZmxvYXQgZ2V0VGhyZXNob2xkKCkgewogIHZlYzQgY29sb3IgPSB2ZWM0KDAuKTsKICBmb3IgKGZsb2F0IHkgPSAtNi47IHkgPCA3LjsgeSArPSAxLikgewogICAgZm9yIChmbG9hdCB4ID0gLTYuOyB4IDwgNy47IHggKz0gMS4pIHsKICAgICAgdmVjNCBpbWFnZV9ub3dfY29sb3IgPQogICAgICAgICAgdGV4dHVyZTJEKGltYWdlX25vdywgX3RleHR1cmVfY29vcmQgKyB2ZWMyKHgsIHkpIC8gY2FudmFzKTsKICAgICAgdmVjNCBpbWFnZV9iZWZvcmVfY29sb3IgPQogICAgICAgICAgdGV4dHVyZTJEKGltYWdlX2JlZm9yZSwgX3RleHR1cmVfY29vcmQgKyB2ZWMyKHgsIHkpIC8gY2FudmFzKTsKICAgICAgY29sb3IgKz0gYWJzKGltYWdlX2JlZm9yZV9jb2xvciAtIGltYWdlX25vd19jb2xvcik7CiAgICB9CiAgfQogIHJldHVybiAoY29sb3IueCArIGNvbG9yLnkgKyBjb2xvci56KSAvICgzLiAqIDkuKTsKfQoKdm9pZCBtYWluKCkgewogIGZsb2F0IHRyZXNob2xkX2lucHV0ID0gLjQ7CiAgZmxvYXQgdHJlc2hvbGRfcHJldmlvdXNfcmVuZGVyaW5nID0gLjk4OwoKICB2ZWM0IG1hc2tfbm93X2NvbG9yID0gdGV4dHVyZTJEKG1hc2tfbm93LCBfdGV4dHVyZV9jb29yZCk7CiAgdmVjNCBtYXNrX2JlZm9yZV9jb2xvciA9IHRleHR1cmUyRChtYXNrX2JlZm9yZSwgX3RleHR1cmVfY29vcmQpOwogIHZlYzQgcHJldmlvdXNfcmVuZGVyaW5nX2NvbG9yID0gdGV4dHVyZTJEKHByZXZpb3VzX3JlbmRlcmluZywgX3RleHR1cmVfY29vcmQpOwoKICB2ZWMzIG1hc2tfZGlmZiA9IGFicyhtYXNrX2JlZm9yZV9jb2xvci54eXogLSBtYXNrX25vd19jb2xvci54eXopOwogIGZsb2F0IGZsaWNrZXJpbmcgPSBtYXNrX2RpZmYueDsKICBmbG9hdCB0aHJlc2hvbGQgPSBnZXRUaHJlc2hvbGQoKTsKICBpZiAodGhyZXNob2xkIDwgdGhyZXNob2xkX2FjdGl2YXRpb24pIHsKICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoZmxpY2tlcmluZywgMC4sIDAuLCAxLikgKiBjdXJyZW50X2ZhY3RvciArCiAgICAgICAgICAgICAgICAgICBwcmV2aW91c19yZW5kZXJpbmdfY29sb3IgKiBwcmV2aW91c19mYWN0b3I7CiAgICBnbF9GcmFnQ29sb3IgKj0gKDEuIC0gdGhyZXNob2xkKTsKICB9Cn0KYCxIZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgO2NsYXNzIFZmIGV4dGVuZHMgT3J7Z2V0RnJhZ21lbnRTaGFkZXIoKXtyZXR1cm4gemZ9Z2V0VmVydGV4U2hhZGVyKCl7cmV0dXJuIEhmfX12YXIgV2Y9YCN2ZXJzaW9uIDMwMCBlcwovLyBodHRwczovL2dpdGh1Yi5jb20vVm9sY29taXgvdmlydHVhbC1iYWNrZ3JvdW5kL2Jsb2IvbWFpbi9zcmMvcGlwZWxpbmVzL3dlYmdsMi9qb2ludEJpbGF0ZXJhbEZpbHRlclN0YWdlLnRzCgpwcmVjaXNpb24gaGlnaHAgZmxvYXQ7CnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0X2ZyYW1lOwp1bmlmb3JtIHNhbXBsZXIyRCBzZWdtZW50YXRpb25fbWFzazsKdW5pZm9ybSBzYW1wbGVyMkQgdGhyZXNob2xkOwp1bmlmb3JtIHZlYzIgdGV4ZWxfc2l6ZTsKdW5pZm9ybSBmbG9hdCBzdGVwOwp1bmlmb3JtIGZsb2F0IHJhZGl1czsKdW5pZm9ybSBmbG9hdCBvZmZzZXQ7CnVuaWZvcm0gZmxvYXQgc2lnbWFfdGV4ZWw7CnVuaWZvcm0gZmxvYXQgc2lnbWFfY29sb3I7CgppbiB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwpvdXQgdmVjNCBvdXRDb2xvcjsKCmZsb2F0IGdhdXNzaWFuKGZsb2F0IHgsIGZsb2F0IHNpZ21hKSB7CiAgZmxvYXQgY29lZmYgPSAtMC41IC8gKHNpZ21hICogc2lnbWEgKiA0LjAgKyAxLjBlLTYpOwogIHJldHVybiBleHAoKHggKiB4KSAqIGNvZWZmKTsKfQoKdm9pZCBtYWluKCkgewogIHZlYzIgY2VudGVyQ29vcmQgPSBfdGV4dHVyZV9jb29yZDsKICB2ZWMzIGNlbnRlckNvbG9yID0gdGV4dHVyZShpbnB1dF9mcmFtZSwgY2VudGVyQ29vcmQpLnJnYjsKICBmbG9hdCBuZXdWYWwgPSAwLjA7CiAgZmxvYXQgc3BhY2VXZWlnaHQgPSAwLjA7CiAgZmxvYXQgY29sb3JXZWlnaHQgPSAwLjA7CiAgZmxvYXQgdG90YWxXZWlnaHQgPSAwLjA7CiAgLy8gU3Vic2FtcGxlIGtlcm5lbCBzcGFjZS4KICBmb3IgKGZsb2F0IGkgPSAtcmFkaXVzICsgb2Zmc2V0OyBpIDw9IHJhZGl1czsgaSArPSBzdGVwKSB7CiAgICBmb3IgKGZsb2F0IGogPSAtcmFkaXVzICsgb2Zmc2V0OyBqIDw9IHJhZGl1czsgaiArPSBzdGVwKSB7CiAgICAgIHZlYzIgc2hpZnQgPSB2ZWMyKGosIGkpICogdGV4ZWxfc2l6ZTsKICAgICAgdmVjMiBjb29yZCA9IHZlYzIoY2VudGVyQ29vcmQgKyBzaGlmdCk7CiAgICAgIHZlYzMgZnJhbWVDb2xvciA9IHRleHR1cmUoaW5wdXRfZnJhbWUsIGNvb3JkKS5yZ2I7CiAgICAgIGZsb2F0IHRocmVzaG9sZCA9IHRleHR1cmUodGhyZXNob2xkLCBjb29yZCkuYTsKICAgICAgZmxvYXQgb3V0VmFsID0gdGV4dHVyZShzZWdtZW50YXRpb25fbWFzaywgY29vcmQpLmE7CgogICAgICBzcGFjZVdlaWdodCA9IGdhdXNzaWFuKGRpc3RhbmNlKGNlbnRlckNvb3JkLCBjb29yZCksIHNpZ21hX3RleGVsKTsKICAgICAgY29sb3JXZWlnaHQgPSBnYXVzc2lhbihkaXN0YW5jZShjZW50ZXJDb2xvciwgZnJhbWVDb2xvciksIHNpZ21hX2NvbG9yKTsKICAgICAgdG90YWxXZWlnaHQgKz0gc3BhY2VXZWlnaHQgKiBjb2xvcldlaWdodDsKICAgICAgbmV3VmFsICs9IHNwYWNlV2VpZ2h0ICogY29sb3JXZWlnaHQgKiBvdXRWYWwgKiB0aHJlc2hvbGQ7CiAgICB9CiAgfQogIG5ld1ZhbCAvPSB0b3RhbFdlaWdodDsKICBvdXRDb2xvciA9IHZlYzQodmVjMygwLiksIG5ld1ZhbCk7Cn1gLGpmPWAjdmVyc2lvbiAzMDAgZXMKaW4gdmVjMiBwb3NpdGlvbjsKaW4gdmVjMiB0ZXh0dXJlX2Nvb3JkOwpvdXQgdmVjMiBfdGV4dHVyZV9jb29yZDsKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4wLCAxLjApOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfWA7Y2xhc3MgcWYgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBXZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gamZ9fXZhciBYZj1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHZlYzIgY2FudmFzOwp1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlOwoKdm9pZCBtYWluKCkgewogIGludCBjb3VudCA9IDA7CiAgZm9yIChmbG9hdCB5ID0gLTEuOyB5IDwgMi47IHkgKz0gMS4pIHsKICAgIGZvciAoZmxvYXQgeCA9IC0xLjsgeCA8IDIuOyB4ICs9IDEuKSB7CiAgICAgIHZlYzIgY29vcmQgPSBfdGV4dHVyZV9jb29yZCArIHZlYzIoeSwgeCkgLyBjYW52YXM7CiAgICAgIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgY29vcmQpOwogICAgICBpZiAoY29sb3IuciA+IC4xKSB7CiAgICAgICAgY291bnQrKzsKICAgICAgfQogICAgfQogIH0KICBpZiAoY291bnQgPiA1KSB7CiAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQpOwogIH0KfQpgLFlmPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKCnZvaWQgbWFpbigpIHsKICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7CiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkOwp9CmA7Y2xhc3MgUWYgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBYZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gWWZ9fXZhciBLZj1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHZlYzIgY2FudmFzOwp1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlOwoKdm9pZCBtYWluKCkgewogIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQpOwogIGZvciAoZmxvYXQgeSA9IC0yLjsgeSA8IDMuOyB5ICs9IDEuKSB7CiAgICBmb3IgKGZsb2F0IHggPSAtMi47IHggPCAzLjsgeCArPSAxLikgewogICAgICB2ZWMyIGNvb3JkID0gX3RleHR1cmVfY29vcmQ7CiAgICAgIGNvb3JkICs9IHZlYzIoeSwgeCkgLyBjYW52YXM7CiAgICAgIGNvbG9yICs9IHRleHR1cmUyRCh0ZXh0dXJlLCBjb29yZCkgKiAoMS4gLyA0Lik7CiAgICB9CiAgfQoKICBnbF9GcmFnQ29sb3IgPSBjb2xvcjsKfQpgLEpmPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKCnZvaWQgbWFpbigpIHsKICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7CiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkOwp9CmA7Y2xhc3MgWmYgZXh0ZW5kcyBPcntnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBLZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gSmZ9fXZhciBlbD1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHNhbXBsZXIyRCB0aHJlc2hvbGQ7CnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0czsKCnZvaWQgbWFpbigpIHsKICB2ZWM0IGlucHV0c19jb2xvciA9IHRleHR1cmUyRChpbnB1dHMsIF90ZXh0dXJlX2Nvb3JkKTsKICB2ZWM0IHRocmVzaG9sZF9jb2xvciA9IHRleHR1cmUyRCh0aHJlc2hvbGQsIF90ZXh0dXJlX2Nvb3JkKTsKICBpZiAodGhyZXNob2xkX2NvbG9yLnIgPCAuMSAmJiBpbnB1dHNfY29sb3IuciA+IC41KSB7CiAgICBnbF9GcmFnQ29sb3IgPSBpbnB1dHNfY29sb3I7CiAgfQp9CmAsdGw9YHZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uOwphdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkOwoKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTsKICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7Cn0KYDtjbGFzcyBybCBleHRlbmRzIE9ye2dldEZyYWdtZW50U2hhZGVyKCl7cmV0dXJuIGVsfWdldFZlcnRleFNoYWRlcigpe3JldHVybiB0bH19Y2xhc3MgbmwgZXh0ZW5kcyBEcntjb25zdHJ1Y3Rvcih0LG4saSl7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0TWFzayIpO3AodGhpcywicHJldmlvdXNJbnB1dEltYWdlIik7cCh0aGlzLCJwcmV2aW91c0lucHV0TWFzayIpO3AodGhpcywib3V0cHV0Iik7cCh0aGlzLCJvcHRpb25zIix7Y3VycmVudFRocmVzaG9sZE1pbmltdW06MCxjdXJyZW50VGhyZXNob2xkTWF4aW11bToxLHByZXZpb3VzVGhyZXNob2xkTWluaW11bTowLHByZXZpb3VzVGhyZXNob2xkTWF4aW11bToxLHRocmVzaG9sZE1pbmltdW06MCx0aHJlc2hvbGRNYXhpbXVtOjEsdGhyZXNob2xkRmFjdG9yOjF9KTt0aGlzLmNvbnRleHQ9dDtjb25zdCBvPXtjb250ZXh0OnQsaGVpZ2h0Omksd2lkdGg6bn0scz1uZXcgVmYobyksYT1uZXcgVWkoey4uLm8scmFkaXVzOjEsdHlwZTpDci5HQVVTU0lBTn0pLHU9bmV3IHJsKG8pLGY9bmV3IFpmKG8pLGM9bmV3IFFmKG8pLGQ9bmV3IHFmKHsuLi5vfSkseT0uNjYsXz02NDAsbT00ODAseD0yNTYsdj0xNDQ7bGV0IGI9MTtiKj1NYXRoLm1heChfL3gsbS92KTtjb25zdCBBPU1hdGgubWF4KDEsTWF0aC5zcXJ0KGIpKnkpLFA9MS9fLEM9MS9tO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpzLGdldFVuaWZvcm1zOigpPT4oe2ltYWdlX25vdzpTKHQsdGhpcy5pbnB1dEltYWdlKSxpbWFnZV9iZWZvcmU6Uyh0LHRoaXMucHJldmlvdXNJbnB1dEltYWdlKSxtYXNrX25vdzpTKHQsdGhpcy5pbnB1dE1hc2spLG1hc2tfYmVmb3JlOlModCx0aGlzLnByZXZpb3VzSW5wdXRNYXNrKSxjdXJyZW50X3RocmVzaG9sZF9taW5pbXVtOnRoaXMub3B0aW9ucy5jdXJyZW50VGhyZXNob2xkTWluaW11bSxjdXJyZW50X3RocmVzaG9sZF9tYXhpbXVtOnRoaXMub3B0aW9ucy5jdXJyZW50VGhyZXNob2xkTWF4aW11bSxwcmV2aW91c190aHJlc2hvbGRfbWluaW11bTp0aGlzLm9wdGlvbnMucHJldmlvdXNUaHJlc2hvbGRNaW5pbXVtLHByZXZpb3VzX3RocmVzaG9sZF9tYXhpbXVtOnRoaXMub3B0aW9ucy5wcmV2aW91c1RocmVzaG9sZE1heGltdW0sdGhyZXNob2xkX21pbmltdW06dGhpcy5vcHRpb25zLnRocmVzaG9sZE1pbmltdW0sdGhyZXNob2xkX21heGltdW06dGhpcy5vcHRpb25zLnRocmVzaG9sZE1heGltdW0sdGhyZXNob2xkX2ZhY3Rvcjp0aGlzLm9wdGlvbnMudGhyZXNob2xkRmFjdG9yfSl9KSx0aGlzLmFkZFN0ZXAoe3Byb2dyYW06dSxnZXRVbmlmb3JtczooKT0+KHtpbnB1dHM6Uyh0LHRoaXMuaW5wdXRNYXNrKSx0aHJlc2hvbGQ6Uyh0LHMub3V0cHV0KX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOmMsZ2V0VW5pZm9ybXM6KCk9Pih7dGV4dHVyZTpTKHQsdS5vdXRwdXQpfSl9KSx0aGlzLmFkZFN0ZXAoe3Byb2dyYW06ZixnZXRVbmlmb3JtczooKT0+KHt0ZXh0dXJlOlModCxjLm91dHB1dCl9KX0pLHRoaXMuYWRkU3RlcCh7cHJvZ3JhbTphLGdldFVuaWZvcm1zOigpPT4oe3RleHR1cmU6Uyh0LGYub3V0cHV0KX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOmQsZ2V0VW5pZm9ybXM6KCk9Pih7aW5wdXRfZnJhbWU6Uyh0LHRoaXMuaW5wdXRJbWFnZSksc2VnbWVudGF0aW9uX21hc2s6Uyh0LHRoaXMuaW5wdXRNYXNrKSx0aHJlc2hvbGQ6Uyh0LGEub3V0cHV0KSx0ZXhlbF9zaXplOltQLENdLHN0ZXA6QSxyYWRpdXM6YixvZmZzZXQ6QT4xP0EqLjU6MCxzaWdtYV90ZXhlbDpNYXRoLm1heChQLEMpKmIsc2lnbWFfY29sb3I6LjF9KX0pLHRoaXMub3V0cHV0PWQub3V0cHV0fXNldERhdGEodCxuKXt0aGlzLnByZXZpb3VzSW5wdXRJbWFnZT10aGlzLmlucHV0SW1hZ2U/dGhpcy5pbnB1dEltYWdlOnQsdGhpcy5wcmV2aW91c0lucHV0TWFzaz10aGlzLmlucHV0TWFzaz90aGlzLmlucHV0TWFzazpuLHRoaXMuaW5wdXRJbWFnZT10LHRoaXMuaW5wdXRNYXNrPW59c2V0T3B0aW9ucyh0KXt0aGlzLm9wdGlvbnM9dH19dmFyIGlsPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKCnZvaWQgbWFpbigpIHsgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIF90ZXh0dXJlX2Nvb3JkKTsgfQpgLG9sPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKdW5pZm9ybSBib29sIGludmVydF95OwoKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTsKICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7CiAgaWYgKGludmVydF95KSB7CiAgICBfdGV4dHVyZV9jb29yZC55ID0gMS4gLSB0ZXh0dXJlX2Nvb3JkLnk7CiAgfQp9CmA7Y2xhc3Mgc2wgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBpbH1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gb2x9fWNsYXNzIGFsIGV4dGVuZHMgRHJ7Y29uc3RydWN0b3IodCxuLGkpe3N1cGVyKCk7cCh0aGlzLCJpbnB1dEltYWdlIik7dGhpcy5jb250ZXh0PXQ7Y29uc3Qgbz17Y29udGV4dDp0LGhlaWdodDppLHdpZHRoOm59O3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpuZXcgc2woey4uLm8sZGlzYWJsZUZyYW1lYnVmZmVyOiEwfSksZ2V0VW5pZm9ybXM6KCk9Pih7dGV4dHVyZTpTKHQsdGhpcy5pbnB1dEltYWdlKSxpbnZlcnRfeTohMH0pfSl9c2V0RGF0YSh0KXt0aGlzLmlucHV0SW1hZ2U9dH19Y2xhc3MgdWx7Y29uc3RydWN0b3IoZSl7cCh0aGlzLCJyZXNpemUiKTtwKHRoaXMsImNhbnZhcyIpO3AodGhpcywiY29udGV4dCIpO3RoaXMuY2FudmFzPW5ldyBPZmZzY3JlZW5DYW52YXMoMCwwKSx0aGlzLmNvbnRleHQ9dGhpcy5jYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wyIiksdGhpcy5jYW52YXMud2lkdGg9ZS53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQ9ZS5oZWlnaHQsdGhpcy5yZXNpemU9bmV3IGFsKHRoaXMuY29udGV4dCxlLndpZHRoLGUuaGVpZ2h0KX1yZXNpemVGb3JlZ3JvdW5kKGUsdCl7dGhpcy5jYW52YXMud2lkdGg9ZSx0aGlzLmNhbnZhcy5oZWlnaHQ9dCx0aGlzLnJlc2l6ZS5yZXNpemVPdXRwdXQoZSx0KX1hc3luYyBwcm9jZXNzKGUpe3ZhciB0LG47cmV0dXJuIHRoaXMuY2FudmFzLndpZHRoPXRoaXMuY2FudmFzLndpZHRoLCh0PXRoaXMucmVzaXplKT09bnVsbHx8dC5zZXREYXRhKGUpLChuPXRoaXMucmVzaXplKT09bnVsbHx8bi5ydW4oKSx0aGlzLmNhbnZhc319Y2xhc3MgY2x7Y29uc3RydWN0b3IoZSx0KXtwKHRoaXMsImltcHJvdmVNYXNrU2VnbWVudGF0aW9uIik7cCh0aGlzLCJiYWNrZ3JvdW5kUmVzaXplciIpO3AodGhpcywiYmFja2dyb3VuZEltYWdlIik7cCh0aGlzLCJiYWNrZ3JvdW5kVmlkZW8iKTtwKHRoaXMsInByb2ZpbGVyIik7cCh0aGlzLCJhY3RpdmVQaXBlbGluZSIpO3AodGhpcywiY2FudmFzIik7cCh0aGlzLCJvcHRpb25zIik7cCh0aGlzLCJjb250ZXh0Iik7cCh0aGlzLCJ2aXJ0dWFsQkdJbWFnZSIpO3RoaXMuaWQ9ZSx0aGlzLmNhbnZhcz1uZXcgT2Zmc2NyZWVuQ2FudmFzKDAsMCksdGhpcy5jb250ZXh0PXRoaXMuY2FudmFzLmdldENvbnRleHQoIndlYmdsMiIpLHRoaXMuY2FudmFzLndpZHRoPXQuZm9yZWdyb3VuZFdpZHRoLHRoaXMuY2FudmFzLmhlaWdodD10LmZvcmVncm91bmRIZWlnaHQsdGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbj1uZXcgbmwodGhpcy5jb250ZXh0LHQubWFza1dpZHRoLHQubWFza0hlaWdodCksdGhpcy5iYWNrZ3JvdW5kSW1hZ2U9bmV3IE5pKHRoaXMuY29udGV4dCksdGhpcy5iYWNrZ3JvdW5kVmlkZW89bmV3IGtmKHRoaXMuY29udGV4dCksdGhpcy5iYWNrZ3JvdW5kUmVzaXplcj1uZXcgdWwoe3dpZHRoOnQuZm9yZWdyb3VuZFdpZHRoLGhlaWdodDp0LmZvcmVncm91bmRIZWlnaHR9KX1zZXRCYWNrZ3JvdW5kT3B0aW9ucyhlKXtzd2l0Y2goZS50cmFuc2Zvcm1lclR5cGUpe2Nhc2UiQmFja2dyb3VuZEJsdXIiOnRoaXMuYWN0aXZlUGlwZWxpbmU9bmV3IEJmKHRoaXMuY29udGV4dCx0aGlzLmdldEJsdXJTaXplKGUucmFkaXVzKSk7YnJlYWs7Y2FzZSJTaWxob3VldHRlQmx1ciI6dGhpcy5hY3RpdmVQaXBlbGluZT1uZXcgR2YodGhpcy5jb250ZXh0LHRoaXMuZ2V0Qmx1clNpemUoZS5yYWRpdXMpKTticmVhaztjYXNlIlZpZGVvQmFja2dyb3VuZCI6dGhpcy5hY3RpdmVQaXBlbGluZT10aGlzLmJhY2tncm91bmRWaWRlbzticmVhaztjYXNlIlZpcnR1YWxCYWNrZ3JvdW5kIjp0aGlzLmFjdGl2ZVBpcGVsaW5lPXRoaXMuYmFja2dyb3VuZEltYWdlO2JyZWFrfXRoaXMub3B0aW9ucz1lfXNldEZsaWNrZXJpbmdPcHRpb25zKGUpe3ZhciB0Oyh0PXRoaXMuaW1wcm92ZU1hc2tTZWdtZW50YXRpb24pPT1udWxsfHx0LnNldE9wdGlvbnMoZSl9c2V0VmlkZW9CR1JlYWRhYmxlKGUpe3RoaXMuYmFja2dyb3VuZFZpZGVvLmlucHV0VmlkZW89ZX1hc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShlKXt0aGlzLnZpcnR1YWxCR0ltYWdlPWUsdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuaW5wdXRCYWNrZ3JvdW5kSW1hZ2U9YXdhaXQgdGhpcy5iYWNrZ3JvdW5kUmVzaXplci5wcm9jZXNzKGUpfWFzeW5jIHByb2Nlc3MoZSx0KXt2YXIgbixpLG8scyxhLHUsZjtpZih0aGlzLmFjdGl2ZVBpcGVsaW5lJiZlLndpZHRoJiYodD09bnVsbD92b2lkIDA6dC53aWR0aCkpe2NvbnN0IGM9YFske3RoaXMuaWR9XSBiYWNrZ3JvdW5kLWZpbHRlcmA7KG49dGhpcy5wcm9maWxlcik9PW51bGx8fG4ucHVzaENvbnRleHQoYyk7bGV0IGQ9dDsoKChpPXRoaXMub3B0aW9ucyk9PW51bGw/dm9pZCAwOmkuc2VsZmllU2VnbWVudGF0aW9uVHlwZSkmJigobz10aGlzLm9wdGlvbnMpPT1udWxsP3ZvaWQgMDpvLnNlbGZpZVNlZ21lbnRhdGlvblR5cGUpPT09IlBSRUNJU0UifHwhKChzPXRoaXMub3B0aW9ucykhPW51bGwmJnMuc2VsZmllU2VnbWVudGF0aW9uVHlwZSkmJnRoaXMuYWN0aXZlUGlwZWxpbmUucHJlY2lzZU1hc2tFbmFibGVkKSYmKHRoaXMuaW1wcm92ZU1hc2tTZWdtZW50YXRpb24uc2V0SWQodGhpcy5pZCksdGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbi5zZXRQcm9maWxlcih0aGlzLnByb2ZpbGVyKSx0aGlzLmltcHJvdmVNYXNrU2VnbWVudGF0aW9uLnNldERhdGEoZSx0KSx0aGlzLmltcHJvdmVNYXNrU2VnbWVudGF0aW9uLnJ1bigpLGQ9dGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbi5vdXRwdXQpLHRoaXMuYWN0aXZlUGlwZWxpbmUuc2V0SWQodGhpcy5pZCksdGhpcy5hY3RpdmVQaXBlbGluZS5zZXRQcm9maWxlcih0aGlzLnByb2ZpbGVyKSwoYT10aGlzLmFjdGl2ZVBpcGVsaW5lKT09bnVsbHx8YS5zZXREYXRhKGUsZCksKHU9dGhpcy5hY3RpdmVQaXBlbGluZSk9PW51bGx8fHUucnVuKCksKGY9dGhpcy5wcm9maWxlcik9PW51bGx8fGYucG9wQ29udGV4dChjKX19YXN5bmMgcmVzaXplRm9yZWdyb3VuZChlLHQpe3ZhciBuO3RoaXMuY2FudmFzLndpZHRoPWUsdGhpcy5jYW52YXMuaGVpZ2h0PXQsdGhpcy5iYWNrZ3JvdW5kSW1hZ2UucmVzaXplT3V0cHV0KGUsdCksdGhpcy5iYWNrZ3JvdW5kVmlkZW8ucmVzaXplT3V0cHV0KGUsdCksdGhpcy5iYWNrZ3JvdW5kUmVzaXplci5yZXNpemVGb3JlZ3JvdW5kKGUsdCksKG49dGhpcy5hY3RpdmVQaXBlbGluZSk9PW51bGx8fG4ucmVzaXplT3V0cHV0KGUsdCksdGhpcy52aXJ0dWFsQkdJbWFnZSYmKHRoaXMuYmFja2dyb3VuZEltYWdlLmlucHV0QmFja2dyb3VuZEltYWdlPWF3YWl0IHRoaXMuYmFja2dyb3VuZFJlc2l6ZXIucHJvY2Vzcyh0aGlzLnZpcnR1YWxCR0ltYWdlKSl9YXN5bmMgcHJvZmlsZShlKXtjb25zdCB0PW5ldyBScyh0aGlzLmNvbnRleHQpO3JldHVybiB0aGlzLnByb2ZpbGVyPXQsdC5zdGFydCgpLGF3YWl0IGduKGUpLHRoaXMucHJvZmlsZXI9dm9pZCAwLHQuc3RvcCgpLHQuZ2V0UmVzb2x2ZWRRdWVyaWVzKCl9Z2V0Qmx1clNpemUoZT1zdC5Mb3cpe3N3aXRjaChlKXtjYXNlIHN0LkxvdzpyZXR1cm4gNTtjYXNlIHN0LkhpZ2g6cmV0dXJuIDEyfXJldHVybiBlfX12YXIgZmw9ZnVuY3Rpb24oKXt2YXIgcj10eXBlb2YgZG9jdW1lbnQ8InUiJiZkb2N1bWVudC5jdXJyZW50U2NyaXB0P2RvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjOnZvaWQgMDtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1lfHx7fTt2YXIgdD10eXBlb2YgZTwidSI/ZTp7fSxuLGk7dC5yZWFkeT1uZXcgUHJvbWlzZShmdW5jdGlvbihsLGgpe249bCxpPWh9KTt2YXIgbz17fSxzO2ZvcihzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKG9bc109dFtzXSk7dmFyIGE9Ii4vdGhpcy5wcm9ncmFtIix1PWZ1bmN0aW9uKGwsaCl7dGhyb3cgaH0sZj0hMCxjPSIiO2Z1bmN0aW9uIGQobCl7cmV0dXJuIHQubG9jYXRlRmlsZT90LmxvY2F0ZUZpbGUobCxjKTpjK2x9dmFyIHk7dHlwZW9mIGRvY3VtZW50PCJ1IiYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmKGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpLHImJihjPXIpLGMuaW5kZXhPZigiYmxvYjoiKSE9PTA/Yz1jLnN1YnN0cigwLGMucmVwbGFjZSgvWz8jXS4qLywiIikubGFzdEluZGV4T2YoIi8iKSsxKTpjPSIiO3ZhciBfPXQucHJpbnR8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksbT10LnByaW50RXJyfHxjb25zb2xlLndhcm4uYmluZChjb25zb2xlKTtmb3IocyBpbiBvKW8uaGFzT3duUHJvcGVydHkocykmJih0W3NdPW9bc10pO289bnVsbCx0LmFyZ3VtZW50cyYmdC5hcmd1bWVudHMsdC50aGlzUHJvZ3JhbSYmKGE9dC50aGlzUHJvZ3JhbSksdC5xdWl0JiYodT10LnF1aXQpO3ZhciB4O3Qud2FzbUJpbmFyeSYmKHg9dC53YXNtQmluYXJ5KTt2YXIgdj10Lm5vRXhpdFJ1bnRpbWV8fCEwO3R5cGVvZiBXZWJBc3NlbWJseSE9Im9iamVjdCImJm1lKCJubyBuYXRpdmUgd2FzbSBzdXBwb3J0IGRldGVjdGVkIik7dmFyIGIsQT0hMSxQPXR5cGVvZiBUZXh0RGVjb2RlcjwidSI/bmV3IFRleHREZWNvZGVyKCJ1dGY4Iik6dm9pZCAwO2Z1bmN0aW9uIEMobCxoLGcpe2Zvcih2YXIgdz1oK2csTT1oO2xbTV0mJiEoTT49dyk7KSsrTTtpZihNLWg+MTYmJmwuc3ViYXJyYXkmJlApcmV0dXJuIFAuZGVjb2RlKGwuc3ViYXJyYXkoaCxNKSk7Zm9yKHZhciBVPSIiO2g8TTspe3ZhciBSPWxbaCsrXTtpZighKFImMTI4KSl7VSs9U3RyaW5nLmZyb21DaGFyQ29kZShSKTtjb250aW51ZX12YXIgaz1sW2grK10mNjM7aWYoKFImMjI0KT09MTkyKXtVKz1TdHJpbmcuZnJvbUNoYXJDb2RlKChSJjMxKTw8NnxrKTtjb250aW51ZX12YXIgZWU9bFtoKytdJjYzO2lmKChSJjI0MCk9PTIyND9SPShSJjE1KTw8MTJ8azw8NnxlZTpSPShSJjcpPDwxOHxrPDwxMnxlZTw8NnxsW2grK10mNjMsUjw2NTUzNilVKz1TdHJpbmcuZnJvbUNoYXJDb2RlKFIpO2Vsc2V7dmFyIGppPVItNjU1MzY7VSs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxqaT4+MTAsNTYzMjB8amkmMTAyMyl9fXJldHVybiBVfWZ1bmN0aW9uIFcobCxoKXtyZXR1cm4gbD9DKEhlLGwsaCk6IiJ9ZnVuY3Rpb24gaWUobCxoLGcpe2Zvcih2YXIgdz0wO3c8bC5sZW5ndGg7Kyt3KUZ0W2grKz4+MF09bC5jaGFyQ29kZUF0KHcpO2d8fChGdFtoPj4wXT0wKX1mdW5jdGlvbiBYKGwsaCl7cmV0dXJuIGwlaD4wJiYobCs9aC1sJWgpLGx9dmFyIGtpLEZ0LEhlLFk7ZnVuY3Rpb24gTGkobCl7a2k9bCx0LkhFQVA4PUZ0PW5ldyBJbnQ4QXJyYXkobCksdC5IRUFQMTY9bmV3IEludDE2QXJyYXkobCksdC5IRUFQMzI9WT1uZXcgSW50MzJBcnJheShsKSx0LkhFQVBVOD1IZT1uZXcgVWludDhBcnJheShsKSx0LkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KGwpLHQuSEVBUFUzMj1uZXcgVWludDMyQXJyYXkobCksdC5IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkobCksdC5IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkobCl9dC5JTklUSUFMX01FTU9SWTt2YXIgVXIsJGk9W10sR2k9W10semk9W10sX2w9MDtmdW5jdGlvbiB4bCgpe3JldHVybiB2fHxfbD4wfWZ1bmN0aW9uIGdsKCl7aWYodC5wcmVSdW4pZm9yKHR5cGVvZiB0LnByZVJ1bj09ImZ1bmN0aW9uIiYmKHQucHJlUnVuPVt0LnByZVJ1bl0pO3QucHJlUnVuLmxlbmd0aDspRWwodC5wcmVSdW4uc2hpZnQoKSk7QnIoJGkpfWZ1bmN0aW9uIGJsKCl7QnIoR2kpfWZ1bmN0aW9uIHZsKCl7aWYodC5wb3N0UnVuKWZvcih0eXBlb2YgdC5wb3N0UnVuPT0iZnVuY3Rpb24iJiYodC5wb3N0UnVuPVt0LnBvc3RSdW5dKTt0LnBvc3RSdW4ubGVuZ3RoOylBbCh0LnBvc3RSdW4uc2hpZnQoKSk7QnIoemkpfWZ1bmN0aW9uIEVsKGwpeyRpLnVuc2hpZnQobCl9ZnVuY3Rpb24gVGwobCl7R2kudW5zaGlmdChsKX1mdW5jdGlvbiBBbChsKXt6aS51bnNoaWZ0KGwpfXZhciB2ZT0wLFZlPW51bGw7ZnVuY3Rpb24gd2wobCl7dmUrKyx0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJnQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyh2ZSl9ZnVuY3Rpb24gUmwobCl7aWYodmUtLSx0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJnQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyh2ZSksdmU9PTAmJlZlKXt2YXIgaD1WZTtWZT1udWxsLGgoKX19dC5wcmVsb2FkZWRJbWFnZXM9e30sdC5wcmVsb2FkZWRBdWRpb3M9e307ZnVuY3Rpb24gbWUobCl7dC5vbkFib3J0JiZ0Lm9uQWJvcnQobCksbD0iQWJvcnRlZCgiK2wrIikiLG0obCksQT0hMCxsKz0iLiBCdWlsZCB3aXRoIC1zIEFTU0VSVElPTlM9MSBmb3IgbW9yZSBpbmZvLiI7dmFyIGg9bmV3IFdlYkFzc2VtYmx5LlJ1bnRpbWVFcnJvcihsKTt0aHJvdyBpKGgpLGh9dmFyIFNsPSJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIjtmdW5jdGlvbiBIaShsKXtyZXR1cm4gbC5zdGFydHNXaXRoKFNsKX12YXIgUTtRPSJ0ZmxpdGUtc2ltZC53YXNtIixIaShRKXx8KFE9ZChRKSk7ZnVuY3Rpb24gVmkobCl7dHJ5e2lmKGw9PVEmJngpcmV0dXJuIG5ldyBVaW50OEFycmF5KHgpO2lmKCF5KXRocm93ImJvdGggYXN5bmMgYW5kIHN5bmMgZmV0Y2hpbmcgb2YgdGhlIHdhc20gZmFpbGVkIn1jYXRjaChoKXttZShoKX19ZnVuY3Rpb24gSWwoKXtyZXR1cm4heCYmZiYmdHlwZW9mIGZldGNoPT0iZnVuY3Rpb24iP2ZldGNoKFEse2NyZWRlbnRpYWxzOiJzYW1lLW9yaWdpbiJ9KS50aGVuKGZ1bmN0aW9uKGwpe2lmKCFsLm9rKXRocm93ImZhaWxlZCB0byBsb2FkIHdhc20gYmluYXJ5IGZpbGUgYXQgJyIrUSsiJyI7cmV0dXJuIGwuYXJyYXlCdWZmZXIoKX0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIFZpKFEpfSk6UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBWaShRKX0pfWZ1bmN0aW9uIEZsKCl7dmFyIGw9e2E6UWx9O2Z1bmN0aW9uIGgoUixrKXt2YXIgZWU9Ui5leHBvcnRzO3QuYXNtPWVlLGI9dC5hc20ucSxMaShiLmJ1ZmZlciksVXI9dC5hc20uRSxUbCh0LmFzbS5yKSxSbCgpfXdsKCk7ZnVuY3Rpb24gZyhSKXtoKFIuaW5zdGFuY2UpfWZ1bmN0aW9uIHcoUil7cmV0dXJuIElsKCkudGhlbihmdW5jdGlvbihrKXtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoayxsKX0pLnRoZW4oZnVuY3Rpb24oayl7cmV0dXJuIGt9KS50aGVuKFIsZnVuY3Rpb24oayl7bSgiZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogIitrKSxtZShrKX0pfWZ1bmN0aW9uIE0oKXtyZXR1cm4heCYmdHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nPT0iZnVuY3Rpb24iJiYhSGkoUSkmJnR5cGVvZiBmZXRjaD09ImZ1bmN0aW9uIj9mZXRjaChRLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbihmdW5jdGlvbihSKXt2YXIgaz1XZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhSLGwpO3JldHVybiBrLnRoZW4oZyxmdW5jdGlvbihlZSl7cmV0dXJuIG0oIndhc20gc3RyZWFtaW5nIGNvbXBpbGUgZmFpbGVkOiAiK2VlKSxtKCJmYWxsaW5nIGJhY2sgdG8gQXJyYXlCdWZmZXIgaW5zdGFudGlhdGlvbiIpLHcoZyl9KX0pOncoZyl9aWYodC5pbnN0YW50aWF0ZVdhc20pdHJ5e3ZhciBVPXQuaW5zdGFudGlhdGVXYXNtKGwsaCk7cmV0dXJuIFV9Y2F0Y2goUil7cmV0dXJuIG0oIk1vZHVsZS5pbnN0YW50aWF0ZVdhc20gY2FsbGJhY2sgZmFpbGVkIHdpdGggZXJyb3I6ICIrUiksITF9cmV0dXJuIE0oKS5jYXRjaChpKSx7fX1mdW5jdGlvbiBCcihsKXtmb3IoO2wubGVuZ3RoPjA7KXt2YXIgaD1sLnNoaWZ0KCk7aWYodHlwZW9mIGg9PSJmdW5jdGlvbiIpe2godCk7Y29udGludWV9dmFyIGc9aC5mdW5jO3R5cGVvZiBnPT0ibnVtYmVyIj9oLmFyZz09PXZvaWQgMD9Vci5nZXQoZykoKTpVci5nZXQoZykoaC5hcmcpOmcoaC5hcmc9PT12b2lkIDA/bnVsbDpoLmFyZyl9fWZ1bmN0aW9uIFBsKGwsaCxnLHcpe21lKCJBc3NlcnRpb24gZmFpbGVkOiAiK1cobCkrIiwgYXQ6ICIrW2g/VyhoKToidW5rbm93biBmaWxlbmFtZSIsZyx3P1codyk6InVua25vd24gZnVuY3Rpb24iXSl9ZnVuY3Rpb24gRGwobCxoKXttZSgiVG8gdXNlIGRsb3BlbiwgeW91IG5lZWQgdG8gdXNlIEVtc2NyaXB0ZW4ncyBsaW5raW5nIHN1cHBvcnQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZW1zY3JpcHRlbi1jb3JlL2Vtc2NyaXB0ZW4vd2lraS9MaW5raW5nIil9ZnVuY3Rpb24gTWwobCxoKXttZSgiVG8gdXNlIGRsb3BlbiwgeW91IG5lZWQgdG8gdXNlIEVtc2NyaXB0ZW4ncyBsaW5raW5nIHN1cHBvcnQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZW1zY3JpcHRlbi1jb3JlL2Vtc2NyaXB0ZW4vd2lraS9MaW5raW5nIil9ZnVuY3Rpb24gQ2woKXttZSgiIil9dmFyIFB0O1B0PWZ1bmN0aW9uKCl7cmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpfTt2YXIgT2w9ITA7ZnVuY3Rpb24gTmwobCl7cmV0dXJuIFlbV2koKT4+Ml09bCxsfWZ1bmN0aW9uIFVsKGwsaCl7dmFyIGc7aWYobD09PTApZz1EYXRlLm5vdygpO2Vsc2UgaWYoKGw9PT0xfHxsPT09NCkmJk9sKWc9UHQoKTtlbHNlIHJldHVybiBObCgyOCksLTE7cmV0dXJuIFlbaD4+Ml09Zy8xZTN8MCxZW2grND4+Ml09ZyUxZTMqMWUzKjFlM3wwLDB9ZnVuY3Rpb24gQmwoKXtyZXR1cm4gMjE0NzQ4MzY0OH1mdW5jdGlvbiBrbChsLGgsZyl7SGUuY29weVdpdGhpbihsLGgsaCtnKX1mdW5jdGlvbiBMbChsKXt0cnl7cmV0dXJuIGIuZ3JvdyhsLWtpLmJ5dGVMZW5ndGgrNjU1MzU+Pj4xNiksTGkoYi5idWZmZXIpLDF9Y2F0Y2h7fX1mdW5jdGlvbiAkbChsKXt2YXIgaD1IZS5sZW5ndGg7bD1sPj4+MDt2YXIgZz0yMTQ3NDgzNjQ4O2lmKGw+ZylyZXR1cm4hMTtmb3IodmFyIHc9MTt3PD00O3cqPTIpe3ZhciBNPWgqKDErLjIvdyk7TT1NYXRoLm1pbihNLGwrMTAwNjYzMjk2KTt2YXIgVT1NYXRoLm1pbihnLFgoTWF0aC5tYXgobCxNKSw2NTUzNikpLFI9TGwoVSk7aWYoUilyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBHbChsKXtmb3IodmFyIGg9UHQoKTtQdCgpLWg8bDspO312YXIga3I9e307ZnVuY3Rpb24gemwoKXtyZXR1cm4gYXx8Ii4vdGhpcy5wcm9ncmFtIn1mdW5jdGlvbiBXZSgpe2lmKCFXZS5zdHJpbmdzKXt2YXIgbD0odHlwZW9mIG5hdmlnYXRvcj09Im9iamVjdCImJm5hdmlnYXRvci5sYW5ndWFnZXMmJm5hdmlnYXRvci5sYW5ndWFnZXNbMF18fCJDIikucmVwbGFjZSgiLSIsIl8iKSsiLlVURi04IixoPXtVU0VSOiJ3ZWJfdXNlciIsTE9HTkFNRToid2ViX3VzZXIiLFBBVEg6Ii8iLFBXRDoiLyIsSE9NRToiL2hvbWUvd2ViX3VzZXIiLExBTkc6bCxfOnpsKCl9O2Zvcih2YXIgZyBpbiBrcilrcltnXT09PXZvaWQgMD9kZWxldGUgaFtnXTpoW2ddPWtyW2ddO3ZhciB3PVtdO2Zvcih2YXIgZyBpbiBoKXcucHVzaChnKyI9IitoW2ddKTtXZS5zdHJpbmdzPXd9cmV0dXJuIFdlLnN0cmluZ3N9dmFyIER0PXttYXBwaW5nczp7fSxidWZmZXJzOltudWxsLFtdLFtdXSxwcmludENoYXI6ZnVuY3Rpb24obCxoKXt2YXIgZz1EdC5idWZmZXJzW2xdO2g9PT0wfHxoPT09MTA/KChsPT09MT9fOm0pKEMoZywwKSksZy5sZW5ndGg9MCk6Zy5wdXNoKGgpfSx2YXJhcmdzOnZvaWQgMCxnZXQ6ZnVuY3Rpb24oKXtEdC52YXJhcmdzKz00O3ZhciBsPVlbRHQudmFyYXJncy00Pj4yXTtyZXR1cm4gbH0sZ2V0U3RyOmZ1bmN0aW9uKGwpe3ZhciBoPVcobCk7cmV0dXJuIGh9LGdldDY0OmZ1bmN0aW9uKGwsaCl7cmV0dXJuIGx9fTtmdW5jdGlvbiBIbChsLGgpe3ZhciBnPTA7cmV0dXJuIFdlKCkuZm9yRWFjaChmdW5jdGlvbih3LE0pe3ZhciBVPWgrZztZW2wrTSo0Pj4yXT1VLGllKHcsVSksZys9dy5sZW5ndGgrMX0pLDB9ZnVuY3Rpb24gVmwobCxoKXt2YXIgZz1XZSgpO1lbbD4+Ml09Zy5sZW5ndGg7dmFyIHc9MDtyZXR1cm4gZy5mb3JFYWNoKGZ1bmN0aW9uKE0pe3crPU0ubGVuZ3RoKzF9KSxZW2g+PjJdPXcsMH1mdW5jdGlvbiBXbChsKXtKbChsKX1mdW5jdGlvbiBqbChsKXtyZXR1cm4gMH1mdW5jdGlvbiBxbChsLGgsZyx3LE0pe31mdW5jdGlvbiBYbChsLGgsZyx3KXtmb3IodmFyIE09MCxVPTA7VTxnO1UrKyl7Zm9yKHZhciBSPVlbaCtVKjg+PjJdLGs9WVtoKyhVKjgrNCk+PjJdLGVlPTA7ZWU8aztlZSsrKUR0LnByaW50Q2hhcihsLEhlW1IrZWVdKTtNKz1rfXJldHVybiBZW3c+PjJdPU0sMH1mdW5jdGlvbiBZbCgpe2lmKHR5cGVvZiBjcnlwdG89PSJvYmplY3QiJiZ0eXBlb2YgY3J5cHRvLmdldFJhbmRvbVZhbHVlcz09ImZ1bmN0aW9uIil7dmFyIGw9bmV3IFVpbnQ4QXJyYXkoMSk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobCksbFswXX19ZWxzZSByZXR1cm4gZnVuY3Rpb24oKXttZSgicmFuZG9tRGV2aWNlIil9fWZ1bmN0aW9uIE10KGwsaCl7TXQucmFuZG9tRGV2aWNlfHwoTXQucmFuZG9tRGV2aWNlPVlsKCkpO2Zvcih2YXIgZz0wO2c8aDtnKyspRnRbbCtnPj4wXT1NdC5yYW5kb21EZXZpY2UoKTtyZXR1cm4gMH12YXIgUWw9e2E6UGwsZTpEbCxkOk1sLGI6Q2wsbjpVbCxoOkJsLGw6a2wsbTokbCxwOkdsLGY6SGwsZzpWbCxqOldsLGk6amwsazpxbCxjOlhsLG86TXR9O0ZsKCksdC5fX193YXNtX2NhbGxfY3RvcnM9ZnVuY3Rpb24oKXtyZXR1cm4odC5fX193YXNtX2NhbGxfY3RvcnM9dC5hc20ucikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldD10LmFzbS5zKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2dldElucHV0TWVtb3J5T2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2dldElucHV0TWVtb3J5T2Zmc2V0PXQuYXNtLnQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fZ2V0SW5wdXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0SW5wdXRIZWlnaHQ9dC5hc20udSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRJbnB1dFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2dldElucHV0V2lkdGg9dC5hc20udikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRJbnB1dENoYW5uZWxDb3VudD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRJbnB1dENoYW5uZWxDb3VudD10LmFzbS53KS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2dldE91dHB1dE1lbW9yeU9mZnNldD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRPdXRwdXRNZW1vcnlPZmZzZXQ9dC5hc20ueCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRPdXRwdXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0SGVpZ2h0PXQuYXNtLnkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fZ2V0T3V0cHV0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0V2lkdGg9dC5hc20ueikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRPdXRwdXRDaGFubmVsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0Q2hhbm5lbENvdW50PXQuYXNtLkEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fbG9hZE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2xvYWRNb2RlbD10LmFzbS5CKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX3J1bkluZmVyZW5jZT1mdW5jdGlvbigpe3JldHVybih0Ll9ydW5JbmZlcmVuY2U9dC5hc20uQykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9pc0dQVUVuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5faXNHUFVFbmFibGVkPXQuYXNtLkQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07dmFyIFdpPXQuX19fZXJybm9fbG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4oV2k9dC5fX19lcnJub19sb2NhdGlvbj10LmFzbS5GKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEN0O2Z1bmN0aW9uIEtsKGwpe3RoaXMubmFtZT0iRXhpdFN0YXR1cyIsdGhpcy5tZXNzYWdlPSJQcm9ncmFtIHRlcm1pbmF0ZWQgd2l0aCBleGl0KCIrbCsiKSIsdGhpcy5zdGF0dXM9bH1WZT1mdW5jdGlvbiBsKCl7Q3R8fExyKCksQ3R8fChWZT1sKX07ZnVuY3Rpb24gTHIobCl7aWYodmU+MHx8KGdsKCksdmU+MCkpcmV0dXJuO2Z1bmN0aW9uIGgoKXtDdHx8KEN0PSEwLHQuY2FsbGVkUnVuPSEwLCFBJiYoYmwoKSxuKHQpLHQub25SdW50aW1lSW5pdGlhbGl6ZWQmJnQub25SdW50aW1lSW5pdGlhbGl6ZWQoKSx2bCgpKSl9dC5zZXRTdGF0dXM/KHQuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksc2V0VGltZW91dChmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNldFN0YXR1cygiIil9LDEpLGgoKX0sMSkpOmgoKX10LnJ1bj1McjtmdW5jdGlvbiBKbChsLGgpe1psKGwpfWZ1bmN0aW9uIFpsKGwpe3hsKCl8fCh0Lm9uRXhpdCYmdC5vbkV4aXQobCksQT0hMCksdShsLG5ldyBLbChsKSl9aWYodC5wcmVJbml0KWZvcih0eXBlb2YgdC5wcmVJbml0PT0iZnVuY3Rpb24iJiYodC5wcmVJbml0PVt0LnByZUluaXRdKTt0LnByZUluaXQubGVuZ3RoPjA7KXQucHJlSW5pdC5wb3AoKSgpO3JldHVybiBMcigpLGUucmVhZHl9fSgpO2NsYXNzIGxse2NvbnN0cnVjdG9yKCl7cCh0aGlzLCJzZWxlY3RlZFRGTGl0ZSIpO3AodGhpcywiaXNTSU1EU3VwcG9ydGVkIiwhMSk7cCh0aGlzLCJpc1RocmVhZHNTdXBwb3J0ZWQiLCExKTtwKHRoaXMsImlucHV0V2lkdGgiLDApO3AodGhpcywiaW5wdXRIZWlnaHQiLDApO3AodGhpcywiaW5wdXRDaGFubmVsQ291bnQiLDApO3AodGhpcywiaW5wdXRNZW1vcnlPZmZzZXQiLDApO3AodGhpcywib3V0cHV0V2lkdGgiLDApO3AodGhpcywib3V0cHV0SGVpZ2h0IiwwKTtwKHRoaXMsIm91dHB1dENoYW5uZWxDb3VudCIsMCk7cCh0aGlzLCJvdXRwdXRNZW1vcnlPZmZzZXQiLDApfX1jb25zdCBkbD0iaHR0cHM6Ly9kM29wcWptcXp4ZjA1Ny5jbG91ZGZyb250Lm5ldC92b25hZ2UtdGVuc29yZmxvdy13YXNtL3RmbGl0ZS1zaW1kLXdhc20vMS4xLjMvIixtbD0iaHR0cHM6Ly9kM29wcWptcXp4ZjA1Ny5jbG91ZGZyb250Lm5ldC9tbC9zZWxmaWVfc2VnbWVudGF0aW9uLzQuMC4wLyI7YXN5bmMgZnVuY3Rpb24gaGwocj1kbCxlPW1sKXtsZXQgdD1uZXcgbGw7dmFyIG49bmV3IFByb21pc2UoZnVuY3Rpb24oaSxvKXthc3luYyBmdW5jdGlvbiBzKCl7cmV0dXJuIGZsKHtsb2NhdGVGaWxlOmZ1bmN0aW9uKGYpe3JldHVybiByK2Z9fSl9YXN5bmMgZnVuY3Rpb24gYSh1KXtyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMoZixjKT0+e2NvbnN0IGQ9dTtpZih0eXBlb2YgZD4idSIpcmV0dXJuIGMoIlRGTGl0ZSBiYWNrZW5kIHVuYXZhaWxhYmxlOiB3YXNtU2ltZCIpO2NvbnN0IHk9InNlbGZpZV9zZWdtZW50YXRpb25fbGFuZHNjYXBlIjtjb25zb2xlLmxvZygiTG9hZGluZyB0ZmxpdGUgbW9kZWw6Iix5KTtsZXQgXz1lK2Ake3l9LnRmbGl0ZWA7Y29uc29sZS5sb2coIlRGTGl0ZSBtb2RlbFVybDogIitfKTt0cnl7Y29uc3QgeD1hd2FpdChhd2FpdCBmZXRjaChfKSkuYXJyYXlCdWZmZXIoKTtjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIHNpemU6Iix4LmJ5dGVMZW5ndGgpO2NvbnN0IHY9ZC5fZ2V0TW9kZWxCdWZmZXJNZW1vcnlPZmZzZXQoKTtjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIG1lbW9yeSBvZmZzZXQ6Iix2KSxjb25zb2xlLmxvZygiTG9hZGluZyBtb2RlbCBidWZmZXIuLi4iKSxkLkhFQVBVOC5zZXQobmV3IFVpbnQ4QXJyYXkoeCksdik7Y29uc3QgYj1kLl9sb2FkTW9kZWwoeC5ieXRlTGVuZ3RoKTtpZihjb25zb2xlLmxvZygiTG9hZCBtb2RlbCByZXN1bHQ6IixiKSxiIT09MCl7YygiQ2Fubm90IGxvYWQgbW9kZWwiKTtyZXR1cm59dC5pbnB1dFdpZHRoPWQuX2dldElucHV0V2lkdGgoKSx0LmlucHV0SGVpZ2h0PWQuX2dldElucHV0SGVpZ2h0KCksdC5pbnB1dENoYW5uZWxDb3VudD1kLl9nZXRJbnB1dENoYW5uZWxDb3VudCgpLHQuaW5wdXRNZW1vcnlPZmZzZXQ9ZC5fZ2V0SW5wdXRNZW1vcnlPZmZzZXQoKSxjb25zb2xlLmxvZygiSW5wdXQgbWVtb3J5IG9mZnNldDoiLHQuaW5wdXRNZW1vcnlPZmZzZXQpLGNvbnNvbGUubG9nKCJJbnB1dCBoZWlnaHQ6Iix0LmlucHV0SGVpZ2h0KSxjb25zb2xlLmxvZygiSW5wdXQgd2lkdGg6Iix0LmlucHV0V2lkdGgpLGNvbnNvbGUubG9nKCJJbnB1dCBjaGFubmVsczoiLHQuaW5wdXRDaGFubmVsQ291bnQpLHQub3V0cHV0TWVtb3J5T2Zmc2V0PWQuX2dldE91dHB1dE1lbW9yeU9mZnNldCgpLHQub3V0cHV0V2lkdGg9ZC5fZ2V0T3V0cHV0V2lkdGgoKSx0Lm91dHB1dEhlaWdodD1kLl9nZXRPdXRwdXRIZWlnaHQoKSx0Lm91dHB1dENoYW5uZWxDb3VudD1kLl9nZXRPdXRwdXRDaGFubmVsQ291bnQoKSxjb25zb2xlLmxvZygiT3V0cHV0IG1lbW9yeSBvZmZzZXQ6Iix0Lm91dHB1dE1lbW9yeU9mZnNldCksY29uc29sZS5sb2coIk91dHB1dCBoZWlnaHQ6Iix0Lm91dHB1dEhlaWdodCksY29uc29sZS5sb2coIk91dHB1dCB3aWR0aDoiLHQub3V0cHV0V2lkdGgpLGNvbnNvbGUubG9nKCJPdXRwdXQgY2hhbm5lbHM6Iix0Lm91dHB1dENoYW5uZWxDb3VudCksdC5zZWxlY3RlZFRGTGl0ZT1kfWNhdGNoKG0pe2MobSk7cmV0dXJufWYoKX0pfXMoKS50aGVuKHU9PntpZih1PT09bnVsbCl0aHJvdyBjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlIG51bGwiKSwibG9hZFRGTGl0ZSBudWxsIjthKHUpLnRoZW4oZj0+e2kodCl9KS5jYXRjaChmPT57Y29uc29sZS5lcnJvcigibG9hZFRGTGl0ZU1vZGVsIGVycm9yIiksbygibG9hZFRGTGl0ZU1vZGVsIGVycm9yIil9KX0pLmNhdGNoKHU9Pntjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlIGVycm9yOiIsdSksbygibG9hZFRGTGl0ZSBlcnJvcjoiK3UpfSl9KTtyZXR1cm4gbn1jbGFzcyBwbHtjb25zdHJ1Y3Rvcigpe3AodGhpcywiY2FudmFzIixuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsMCkpO3AodGhpcywiY29udGV4dCIsdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiLHt3aWxsUmVhZEZyZXF1ZW50bHk6ITB9KSk7cCh0aGlzLCJwaXhlbENvdW50IiwwKTtwKHRoaXMsImlucHV0T2Zmc2V0IiwwKTtwKHRoaXMsIm91dHB1dE9mZnNldCIsMCk7cCh0aGlzLCJpbmZvcyIpO3AodGhpcywibWFzayIpfWFzeW5jIGluaXQoZSx0KXthd2FpdCB0aGlzLmluaXRXYXNtKGUsdCksdGhpcy5pbmZvcyYmKHRoaXMuY2FudmFzLndpZHRoPXRoaXMuaW5mb3MuaW5wdXRXaWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQ9dGhpcy5pbmZvcy5pbnB1dEhlaWdodCx0aGlzLnBpeGVsQ291bnQ9dGhpcy5pbmZvcy5pbnB1dFdpZHRoKnRoaXMuaW5mb3MuaW5wdXRIZWlnaHQsdGhpcy5tYXNrPW5ldyBJbWFnZURhdGEodGhpcy5pbmZvcy5pbnB1dFdpZHRoLHRoaXMuaW5mb3MuaW5wdXRIZWlnaHQpLHRoaXMuaW5wdXRPZmZzZXQ9dGhpcy5pbmZvcy5pbnB1dE1lbW9yeU9mZnNldC80LHRoaXMub3V0cHV0T2Zmc2V0PXRoaXMuaW5mb3Mub3V0cHV0TWVtb3J5T2Zmc2V0LzQpfWFzeW5jIGluaXRXYXNtKGUsdCl7dGhpcy5pbmZvcz1hd2FpdCBobChlLHQpfWdldE91dHB1dERpbWVuc2lvbnMoKXt2YXIgZSx0LG4saTtyZXR1cm57d2lkdGg6KHQ9KGU9dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOmUub3V0cHV0V2lkdGgpIT1udWxsP3Q6MCxoZWlnaHQ6KGk9KG49dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOm4ub3V0cHV0SGVpZ2h0KSE9bnVsbD9pOjB9fWFzeW5jIHByb2Nlc3MoZSl7aWYoIXRoaXMubWFza3x8IXRoaXMuaW5mb3MpcmV0dXJuO2NvbnN0IHQ9dGhpcy5pbmZvcy5pbnB1dFdpZHRoLG49dGhpcy5pbmZvcy5pbnB1dEhlaWdodDt0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGUsMCwwLGUud2lkdGgsZS5oZWlnaHQsMCwwLHQsbik7Y29uc3QgaT10aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsMCx0LG4pLG89dGhpcy5pbmZvcy5zZWxlY3RlZFRGTGl0ZS5IRUFQRjMyO2ZvcihsZXQgcz0wO3M8dGhpcy5waXhlbENvdW50O3MrKyl7Y29uc3QgYT10aGlzLmlucHV0T2Zmc2V0K3MqMztvW2FdPWkuZGF0YVtzKjRdLzI1NSxvW2ErMV09aS5kYXRhW3MqNCsxXS8yNTUsb1thKzJdPWkuZGF0YVtzKjQrMl0vMjU1fXRoaXMuaW5mb3Muc2VsZWN0ZWRURkxpdGUuX3J1bkluZmVyZW5jZSgpO2ZvcihsZXQgcz0wO3M8dGhpcy5waXhlbENvdW50O3MrKyl7Y29uc3QgYT10aGlzLmluZm9zLnNlbGVjdGVkVEZMaXRlLkhFQVBGMzJbdGhpcy5vdXRwdXRPZmZzZXQrc107dGhpcy5tYXNrLmRhdGFbcyo0XT10aGlzLm1hc2suZGF0YVtzKjQrM109MjU1KmF9cmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKHRoaXMubWFzayl9aXNHcHVTdXBwb3J0ZWQoKXt2YXIgZSx0LG47cmV0dXJuKG49KHQ9KGU9dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOmUuc2VsZWN0ZWRURkxpdGUpPT1udWxsP3ZvaWQgMDp0Ll9pc0dQVUVuYWJsZWQoKSkhPW51bGw/bjohMX19Y2xhc3MgeWx7Y29uc3RydWN0b3IoKXtwKHRoaXMsInNlbGZpZVNlZ21lbnRhdGlvbiIsbmV3IHBsKTtwKHRoaXMsImJhY2tncm91bmRGaWx0ZXIiKTtwKHRoaXMsInByZXZpb3VzRGltZW5zaW9ucyIse3dpZHRoOjAsaGVpZ2h0OjB9KX1hc3luYyBpbml0KGUsdCl7YXdhaXQgdGhpcy5zZWxmaWVTZWdtZW50YXRpb24uaW5pdCh0Lndhc21Bc3NldFVyaVBhdGgsdC50ZmxpdGVBc3NldFVyaVBhdGgpO2NvbnN0e3dpZHRoOm4saGVpZ2h0Oml9PXRoaXMuc2VsZmllU2VnbWVudGF0aW9uLmdldE91dHB1dERpbWVuc2lvbnMoKTt0aGlzLmJhY2tncm91bmRGaWx0ZXI9bmV3IGNsKGUse2ZvcmVncm91bmRXaWR0aDoxLGZvcmVncm91bmRIZWlnaHQ6MSxtYXNrV2lkdGg6bixtYXNrSGVpZ2h0Oml9KX1hc3luYyB0cmFuc2Zvcm0oZSx0KXt2YXIgcyxhLHUsZjtjb25zdCBuPShzPWUudGltZXN0YW1wKSE9bnVsbD9zOjAsaT1hd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChlKSxvPWF3YWl0IHRoaXMuc2VsZmllU2VnbWVudGF0aW9uLnByb2Nlc3MoaSk7bz8oKGkud2lkdGghPT10aGlzLnByZXZpb3VzRGltZW5zaW9ucy53aWR0aHx8aS5oZWlnaHQhPT10aGlzLnByZXZpb3VzRGltZW5zaW9ucy5oZWlnaHQpJiYodGhpcy5wcmV2aW91c0RpbWVuc2lvbnMud2lkdGg9aS53aWR0aCx0aGlzLnByZXZpb3VzRGltZW5zaW9ucy5oZWlnaHQ9aS5oZWlnaHQsYXdhaXQoKGE9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6YS5yZXNpemVGb3JlZ3JvdW5kKGkud2lkdGgsaS5oZWlnaHQpKSksYXdhaXQoKHU9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dS5wcm9jZXNzKGksbykpLGUuY2xvc2UoKSx0LmVucXVldWUobmV3IFZpZGVvRnJhbWUoKGY9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6Zi5jYW52YXMse3RpbWVzdGFtcDpuLGFscGhhOiJkaXNjYXJkIn0pKSk6dC5lbnF1ZXVlKGUpfWFzeW5jIHNldEJhY2tncm91bmRPcHRpb25zKGUpe3ZhciB0O2F3YWl0KCh0PXRoaXMuYmFja2dyb3VuZEZpbHRlcik9PW51bGw/dm9pZCAwOnQuc2V0QmFja2dyb3VuZE9wdGlvbnMoZSkpfWFzeW5jIHNldFZpZGVvQkdSZWFkYWJsZShlKXt2YXIgdDthd2FpdCgodD10aGlzLmJhY2tncm91bmRGaWx0ZXIpPT1udWxsP3ZvaWQgMDp0LnNldFZpZGVvQkdSZWFkYWJsZShlKSl9YXN5bmMgc2V0VmlydHVhbEJHSW1hZ2UoZSl7dmFyIHQ7YXdhaXQoKHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dC5zZXRWaXJ0dWFsQkdJbWFnZShlKSl9c2V0RmxpY2tlcmluZ09wdGlvbnMoZSl7dmFyIHQ7KHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbHx8dC5zZXRGbGlja2VyaW5nT3B0aW9ucyhlKX1hc3luYyBwcm9maWxlKGUpe3ZhciB0LG47cmV0dXJuKG49KHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dC5wcm9maWxlKGUpKSE9bnVsbD9uOltdfX1jb25zdCBOcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3AodGhpcywiYmFja2dyb3VuZFRyYW5zZm9ybWVyIixuZXcgeWwpO3AodGhpcywibWVkaWFQcm9jZXNzb3IiLG5ldyB3cyk7cCh0aGlzLCJyYXRlIiwzMCk7cCh0aGlzLCJyZXNvbHZlT25NZWRpYVByb2Nlc3NvciIpO3AodGhpcywiZXZlbnRzUXVldWUiLFtdKX1hc3luYyBpbml0KGUsdCl7YXdhaXQgdGhpcy5iYWNrZ3JvdW5kVHJhbnNmb3JtZXIuaW5pdChlLHQpLGF3YWl0IHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhbnNmb3JtZXJzKFt0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lcl0pLHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhY2tFeHBlY3RlZFJhdGUodGhpcy5yYXRlKSx0aGlzLm1lZGlhUHJvY2Vzc29yLm9uQW55KChuLGkpPT57dGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcj8odGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcih7bmFtZTpuLGRhdGE6aX0pLHRoaXMucmVzb2x2ZU9uTWVkaWFQcm9jZXNzb3I9dm9pZCAwKTp0aGlzLmV2ZW50c1F1ZXVlLnB1c2goe25hbWU6bixkYXRhOml9KX0pfWFzeW5jIG9uTWVkaWFQcm9jZXNzb3JFdmVudCgpe3JldHVybiBhd2FpdCBuZXcgUHJvbWlzZShlPT57dGhpcy5ldmVudHNRdWV1ZS5sZW5ndGg+MD9lKHRoaXMuZXZlbnRzUXVldWUuc2hpZnQoKSk6dGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcj1lfSl9YXN5bmMgc2V0VHJhY2tFeHBlY3RlZFJhdGUoZSl7dGhpcy5yYXRlPWUsdGhpcy5tZWRpYVByb2Nlc3Nvci5zZXRUcmFja0V4cGVjdGVkUmF0ZShlKX1hc3luYyB0cmFuc2Zvcm0oZSx0KXt0aGlzLm1lZGlhUHJvY2Vzc29yLnRyYW5zZm9ybShlLHQpfWFzeW5jIHNldEJhY2tncm91bmRPcHRpb25zKGUpe3ZhciB0O2F3YWl0KCh0PXRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyKT09bnVsbD92b2lkIDA6dC5zZXRCYWNrZ3JvdW5kT3B0aW9ucyhlKSl9c2V0VmlkZW9CR1JlYWRhYmxlKGUpe3RoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLnNldFZpZGVvQkdSZWFkYWJsZShlKX1hc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShlKXthd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5zZXRWaXJ0dWFsQkdJbWFnZShlKX1hc3luYyB0ZXJtaW5hdGUoKXthd2FpdCB0aGlzLm1lZGlhUHJvY2Vzc29yLmRlc3Ryb3koKX1zZXRGbGlja2VyaW5nT3B0aW9ucyhlKXt0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5zZXRGbGlja2VyaW5nT3B0aW9ucyhlKX1zZXRWb25hZ2VNZXRhZGF0YShlKXtmcyhlKX1hc3luYyBwcm9maWxlKGUpe3JldHVybiBKU09OLnN0cmluZ2lmeShhd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5wcm9maWxlKGUpKX19O2xldCBCaT1OcjsoKCk9PntYaSgiUHJvY2Vzc29yV29ya2VyIixOcil9KSgpfSkoKTsK",Zv=typeof window<"u"&&window.Blob&&new Blob([atob(Av)],{type:"text/javascript;charset=utf-8"});function $4(){const at=Zv&&(window.URL||window.webkitURL).createObjectURL(Zv);try{return at?new Worker(at):new Worker("data:application/javascript;base64,"+Av)}finally{at&&(window.URL||window.webkitURL).revokeObjectURL(at)}}const Vv=class extends $p{constructor(){super(...arguments),h(this,"rate",30),h(this,"worker")}async init(at){this.worker=await xu(Q4,$4),await this.worker.init(`worker_${Vv.initCount++}`,at),await this.worker.setVonageMetadata(ms()),await this.setBackgroundOptions(at),this.listenWorker()}async setTrackExpectedRate(at){var ot;await((ot=this.worker)==null?void 0:ot.setTrackExpectedRate(at))}async setBackgroundOptions(at){var ot,ut,Ot;const{transformerType:Gt}=at;switch(Gt){case"VideoBackground":await((ot=this.worker)==null?void 0:ot.setVideoBGReadable(await nm.createVideoReadable(at.backgroundAssetUri)));break;case"VirtualBackground":await((ut=this.worker)==null?void 0:ut.setVirtualBGImage(await nm.createImageCanvas(at.backgroundAssetUri)));break}await((Ot=this.worker)==null?void 0:Ot.setBackgroundOptions(at))}async transform(at,ot){var ut;await((ut=this.worker)==null?void 0:ut.transform(at,ot))}async destroy(){var at;await((at=this.worker)==null?void 0:at.terminate())}async setFlickeringOptions(at){var ot;await((ot=this.worker)==null?void 0:ot.setFlickeringOptions(at))}async profile(at){var ot;const ut=await((ot=this.worker)==null?void 0:ot.profile(at));return JSON.parse(ut??"[]")}async listenWorker(){for(var at,ot,ut;(at=this.worker)!=null&&at.worker;){const{name:Ot,data:Gt}=await((ot=this.worker)==null?void 0:ot.onMediaProcessorEvent());switch(Ot){case"error":case"warn":this.emit(Ot,Gt);break;case"pipelineInfo":switch(this.emit(Ot,Gt),Gt){case"pipeline_ended":case"pipeline_ended_with_error":await((ut=this.worker)==null?void 0:ut.terminate());return}break}}}};let Lv=Vv;h(Lv,"initCount",0);class _4{constructor(ot){this.queries=ot}async downloadSpeedscope(){this.download(await this.convertToSpeedscope())}download(ot){const ut=document.createElement("a");ut.href=URL.createObjectURL(new Blob([ot],{type:"application/json"})),ut.download=`profile-${+new Date}.speedscope.json`,document.body.appendChild(ut),ut.click(),document.body.removeChild(ut)}convertToSpeedscope(){const ot=[],ut={},Ot=[];let Gt=0;for(const hn of this.queries){const ln=[];for(const En of hn)ut[En.name]===void 0&&(ut[En.name]=ot.length,ot.push({name:En.name})),ln.push({type:En.action==bm.PUSH?"O":"C",frame:ut[En.name],at:En.timestamp}),Gt=Math.max(Gt,En.timestamp+En.duration);Ot.push({events:ln,type:"evented",name:"GPU Profile",unit:"nanoseconds",startValue:0,endValue:Gt})}return JSON.stringify({$schema:"https://www.speedscope.app/file-format-schema.json",shared:{frames:ot},profiles:Ot},null,2)}}class m0 extends $p{constructor(){super(),h(this,"worker",new Lv),h(this,"connector",new Ft(this.worker))}async init(ot){await this.worker.init(ot),this.worker.onAny((ut,Ot)=>this.emit(ut,Ot))}async setBackgroundOptions(ot){await this.worker.setBackgroundOptions(ot)}setTrackExpectedRate(ot){this.worker.setTrackExpectedRate(ot)}getConnector(){return this.connector}async profile(ot){return this.worker.profile(ot)}static async profile(ot){const ut=await o.all(this.instances.map(Ot=>Ot.profile(ot)));return new _4(ut)}static async create(ot){const ut=new this;return await ut.init(ot),this.instances.push(ut),ut}}h(m0,"instances",[]);function q4(){return mu}function eS(){return gu}function tS(){return Qu}function nS(){return up}function rS(){return Hp}function iS(){return kp}function oS(){return Ol}async function sS(at){return await m0.create(at)}}.call(this,i(0),i(42))},function(e,s,i){const o=i(34)().onlyLocal(),a=i(100),c=a.prependProxyToUrlIfNeeded,d=(g,b)=>{let $=g.apiUrl.includes("anvil.opentok.com")?"https://static.opentok.com":"https://www.dev.tokbox.com";return b&&(b.includes("euproxy.opentok.com")?$="https://static-eu.opentok.com":$=c($,b)),`${$}/ml-transformers/v4.0.0`},h={getConfig:function(b){b===void 0&&(b={});const j=b,_=j.staticConfig,$=_===void 0?o:_,_e=j.proxyUrl,et=d($,_e);return{mediapipeBaseAssetsUri:`${et}`,wasmAssetUriPath:`${et}/`,tfliteAssetUriPath:`${et}/`}}};e.exports=h},function(e,s,i){const o=i(16),a=i(11),c=i(723),d=i(724),h=i(725);e.exports=function(b){b===void 0&&(b={});const j=b.Errors||i(7),_=b.ExceptionCodes||i(10),$=b.logging||i(1)("publisherInit"),_e=b.otError||i(13)(),et=b.OTHelpers||i(8),ct=b.Publisher||i(168)(),dt=b.sessionObjects||i(21);return function(it,st,lt){$.debug(`OT.initPublisher(${it})`),typeof it=="string"&&!document.getElementById(it)&&(it=st,st=lt,lt=arguments[3]),typeof it=="function"?(lt=it,st=void 0,it=void 0):a(it)&&!et.isElementNode(it)&&(lt=st,st=it,it=void 0),typeof st=="function"&&(lt=st,st=void 0);let ht;st&&(a(st)?st.insertDefaultUI===!1&&it?ht="You cannot specify a target element if insertDefaultUI is false":c(st.audioSource)&&c(st.videoSource)&&(ht="You cannot specify both audioSource and videoSource as null or false"):(ht="properties argument to Publisher constructor, if provided, should be an object",st=void 0)),d(st),h(st);const Tt=new ct(st||{});dt.publishers.add(Tt);const Rt=function(){lt&&o(lt)&&(lt(...arguments),lt=void 0)};ht!==void 0&&($.error(ht),Rt(_e(j.INVALID_PARAMETER,new Error(ht),_.INVALID_PARAMETER)));const vt=function(Ct){Tt.off("publishComplete",Et),Rt(Ct)};let Et=function(Ct){Tt.off("initSuccess",vt),Ct&&Rt(Ct)};return Tt.once("initSuccess",vt),Tt.once("publishComplete",Et),Tt.publish(it),Tt}}},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5));const h=i(18),g=i(726),b=i(11),j=i(16),_=i(9),$=i(26),_e=i(6),et=i(20),ct=i(34)(),dt=i(73),nt=i(314),it=i(728),st=i(729),lt=i(730),ht=i(100),Tt=ht.prependProxyToUrlIfNeeded,Rt=i(101),vt=Rt.getProxyUrl,Et=i(731);e.exports=function(Ct){Ct===void 0&&(Ct={});const Ut=Ct.adaptIceServers||i(102).adaptIceServers,Xt=Ct.AnalyticsHelper||et,Nt=Ct.APIKEY||i(70),Jt=Ct.Capabilities||i(169),zt=Ct.convertAnvilErrorCode||i(732),nn=Ct.convertRumorError||i(321),Bt=Ct.Errors||i(7),sn=Ct.Events||i(23)(),qt=Ct.Stream||i(170),Kt=Ct.ExceptionCodes||i(10),$t=Ct.hasIceRestartsCapability||i(322),Sn=Ct.hasE2eeCapability||i(110),On=Ct.logging||i(1)("Session"),tn=Ct.otError||i(13)(),bn=Ct.OTErrorClass||i(22),dn=Ct.OTHelpers||i(8),Mn=i(733),$n=Ct.StaticConfig||ct,Un=Ct.staticConfig||$n.onlyLocal(),Fn=Ct.Publisher||i(168)(),cr=Ct.RaptorSocket||i(734).default(),or=Ct.SessionDispatcher||i(330),wr=Ct.sessionObjects||i(21),Er=Ct.sessionTag||i(329),Zr=Ct.socketCloseCodes||i(76),po=Ct.Subscriber||i(305)(),lr=Ct.systemRequirements||i(153),pr=Ct.uuid||i(15),Vn=st({otError:tn}),In=Ct.global||(typeof window!==void 0?window:commonjsGlobal),zn=Ct.getSessionInfo||i(758)(),vr=i(142),Jr=Ct.KeyStore||i(761),kn=Ct.SFrameClientStore||i(763),ir=Ct.SinglePeerConnectionController||i(765),gr=Ct.initPublisher||i(319)({Publisher:Fn});return function(eo,io,to){var Wr=this;let To=to===void 0?{}:to,no=To.iceConfig,yo=To.connectionEventsSuppressed,Pr=To.ipWhitelist,fu=Pr===void 0?!1:Pr,Zo=To.encryptionSecret,oo=To._enableSinglePeerConnection;const Xo=vt(),Zs=new Xt,Pl=Wn=>typeof Wn=="string"?this.streams.get(Wn)||{id:Wn}:Wn;_e(this),this._tag=Er,lr.check()||lr.upgrade(),io==null&&(io=eo,eo=null),Vn(no),this.id=io,this.sessionId=io,this.keyStore=new Jr,this.sFrameClientStore=new kn;let fs,Ys,hu,Tu,Zp,Pu,Fu,Mr,Fs=!1,zl=eo;const Rs=this;let Js=io,Or=pr(),Ms=On,Vp=!1;const Jl=[];let Ql=null,Do=!1,El=!1,jo,Zu,_d,Bs;const Yu=dn.statable(this,["disconnected","connecting","connected","disconnecting"],"disconnected");this.connection=null,this.connections=new dn.Collection,this.streams=new dn.Collection,this.archives=new dn.Collection;let Xu;const js=function(pn){Yu("disconnected"),pn.code||(pn.code=Kt.CONNECT_FAILED),Ms.error(`${pn.name||"Unknown Error"}: ${pn.message}`),bn.handleJsException({error:pn,target:this,analytics:Zs}),this.trigger("sessionConnectFailed",pn)},Go=function(pn){Fs=!1;const Cn=pn.reason;this.logEvent("Connect","Disconnected",{reason:pn.reason});const Dn=new sn.SessionDisconnectEvent("sessionDisconnected",Cn.replace("networkTimedout","networkDisconnected"));this.isConnected()&&this.disconnect(),Zu(),jo.call(this,Cn),setTimeout(()=>{this.dispatchEvent(Dn),_d.call(this,Dn.reason),Dn.isDefaultPrevented()||Bs.call(this,Dn.reason)})},Fl=function(pn){yo||pn.id.match(/^symphony\./)||this.dispatchEvent(new sn.ConnectionEvent($.CONNECTION_CREATED,pn))},qr=function(pn,Cn){pn.id.match(/^symphony\./)||fs&&pn.id===fs.id()||this.dispatchEvent(new sn.ConnectionEvent($.CONNECTION_DESTROYED,pn,Cn))},Bu=function(pn){pn&&pn.connection&&(!this.connection||pn.connection.id!==this.connection.id)&&this.dispatchEvent(new sn.StreamEvent($.STREAM_CREATED,pn,null,!1))},pu=function(pn){const Cn=pn.target,Dn=pn.changedProperty;let fr=pn.newValue;Dn==="videoDisableWarning"||Dn==="audioDisableWarning"||(Dn==="videoDimensions"&&(fr={width:fr.width,height:fr.height}),this.dispatchEvent(new sn.StreamPropertyChangedEvent($.STREAM_PROPERTY_CHANGED,Cn,Dn,pn.oldValue,fr)))},pp=function(pn,Cn){Cn===void 0&&(Cn="clientDisconnected");const Dn=new sn.StreamEvent("streamDestroyed",pn,Cn,!0),fr=()=>{wr.subscribers.where({streamId:pn.id}).filter(yr=>yr.session.id===this.id&&yr.stream).forEach(yr=>{yr._disconnect({reason:Cn}),Dn.isDefaultPrevented()||yr._destroy({reason:Cn,noStateTransition:!0})})};pn.connection.id===this.connection.id?wr.publishers.where({streamId:pn.id}).forEach(function(yr){yr._.unpublishStreamFromSession(pn,this,Cn)},this):this.dispatchEvent(Dn),fr()},os=function(pn){this.dispatchEvent(new sn.ArchiveEvent("archiveStarted",pn))},mp=function(pn){this.dispatchEvent(new sn.ArchiveEvent("archiveDestroyed",pn))},Mp=function(pn){const Cn=pn.target,Dn=pn.changedProperty,fr=pn.newValue;Dn==="status"&&fr==="stopped"?this.dispatchEvent(new sn.ArchiveEvent("archiveStopped",Cn)):this.dispatchEvent(new sn.ArchiveEvent("archiveUpdated",Cn))},gp=()=>wr.subscribers.forEach(Wn=>Wn._.pauseAndPlayVideoElement()),op=function(){Rs.token=null,hu=null,Yu("disconnected"),fs=null,Ys&&(Ys.stop(),Ys=null),Rs.connection=null,Rs.capabilities=new Jt([],{hasE2eeCapability:Sn}),Rs.connections.destroy(),Rs.streams.destroy(),Rs.archives.destroy()};Zu=function(){Or=pr(),op()},jo=function(pn){wr.publishers.where({session:this}).forEach(Cn=>{Cn.disconnect(pn)}),wr.subscribers.where({session:this}).forEach(Cn=>{Cn._disconnect()})},_d=function(pn){wr.publishers.where({session:this}).forEach(Cn=>{Cn._.streamDestroyed(pn)})},Bs=function(pn){wr.subscribers.where({session:this}).forEach(Cn=>{Cn._destroy({reason:pn})})};const Lp=function(){Ms.debug("OT.Session: connecting to Raptor");const pn=Tt(this.sessionInfo.messagingURL,Xo),Cn=["forceMute"];this.sessionInfo.isAdaptiveEnabled&&Cn.push("amr"),El&&Cn.push("spc"),fs=new cr({connectionId:Or,sessionId:io,messagingSocketUrl:pn,symphonyUrl:this.sessionInfo.symphonyAddress,dispatcher:or(this,{connectionEventsSuppressed:yo}),analytics:Zs,requestedCapabilities:Cn});function fr(yr,mo){let Ro;switch(yr){case"WebSocketConnection":if(Ro=g(Zr.codes,ms=>ms===mo),Ro)return Bt[`SOCKET_${Ro}`];break;case"ConnectToSession":case"GetSessionState":switch(mo){case Kt.CONNECT_FAILED:return Bt.CONNECT_FAILED;case Kt.UNEXPECTED_SERVER_RESPONSE:return Bt.UNEXPECTED_SERVER_RESPONSE;case Kt.CONNECTION_LIMIT_EXCEEDED:return Bt.CONNECTION_LIMIT_EXCEEDED}break}}fs.connect(hu,this.sessionInfo,{connectionEventsSuppressed:yo},(yr,mo)=>{if(yr){const ms={};let Ho;if(yr.reason==="ConnectToSession"||yr.reason==="GetSessionState"){const ys=nn(yr);_(ms,{originalMessage:yr.message,originalCode:yr.code}),yr.code=ys.code,yr.message=ys.message}(yr.code||yr.message||yr.reason)&&(Ho={failureCode:yr.code,failureMessage:yr.message,failureReason:yr.reason,socketId:fs.socketId}),fs=null,this.logConnectivityEvent("Failure",ms,Ho);const _o=fr(yr.reason,yr.code);_o&&(yr=tn(_o,new Error(yr.message),yr.code)),js.call(this,yr);return}Ms.debug("OT.Session: Received session state from Raptor",mo),this.connection=this.connections.get(fs.id()),this.connection&&(this.capabilities=this.connection.permissions),Yu("connected"),this.logConnectivityEvent("Success",{connectionId:this.connection.id}),this.connection.on("destroyed",Go,this),this.dispatchEvent(new sn.SessionConnectEvent($.SESSION_CONNECTED)),this.connections.on({add:Fl,remove:qr},this),this.streams.on({add:Bu,remove:pp,update:pu},this),this.archives.on({add:os,remove:mp,update:Mp},this),this.connections._triggerAddEvents(),this.streams._triggerAddEvents(),this.archives._triggerAddEvents(),dn.env.isiOS&&dn.env.iOSVersion>=13.3&&this.on("gsmCallEnded",gp)})},Ku=Wn=>this.capabilities.permittedTo(Wn),$l=(Wn,pn)=>{On.error(`${Wn.name}: ${Wn.message}`),typeof pn=="function"&&pn(Wn),bn.handleJsException({error:Wn,target:this,analytics:Zs})},Ru=Wn=>{const pn=tn(Wn.code,new Error(Wn.message),Wn.exceptionCode);return $l(pn),pn},xl=()=>this.isNot("connected")?Ru(Mn.NOT_CONNECTED):Ku("forceMute")?null:Ru(Mn.PERMISSION_DENIED),Cp=Wn=>Wn.code==="404"?Ru(Mn.NOT_FOUND):Wn.code==="403"?Ru(Mn.PERMISSION_DENIED):Ru(Mn.UNEXPECTED_SERVER_RESPONSE);this.reportIssue=Wn=>{let pn=Wn.id;return nt(Zs.logEvent.bind(Zs))({action:"ReportIssue",variation:"Event",connectionId:Or,payload:{reportIssueId:pn}},null)},this.logEvent=function(Wn,pn,Cn,Dn){let fr={action:Wn,variation:pn,payload:Cn,sessionId:Js,messagingServer:Zp,p2p:Tu,partnerId:zl,connectionId:Or};Dn&&(fr=_(Dn,fr)),Zs.logEvent(fr)},this.logConfigurationFileEvent=function(Wn,pn,Cn){if(pn===void 0&&(pn=null),Cn===void 0&&(Cn={}),Wn==="Attempt")Fu=new Date().getTime();else if(Wn==="Failure"||Wn==="Success"){const Dn=new Date().getTime()-Fu;_(Cn,{attemptDuration:Dn})}Xo&&(Cn.proxyUrl=Xo),this.logEvent("ConfigurationFile",Wn,pn,Object.assign({},Cn))},this.logConnectivityEvent=function(Wn,pn,Cn){if(pn===void 0&&(pn=null),Cn===void 0&&(Cn={}),Xo&&(Cn.proxyUrl=Xo),Wn==="Attempt"&&(Ys&&(Ys.stop(),On.error("_connectivityAttemptPinger should have been cleaned up")),Pu=new Date().getTime(),Ys=new dt(()=>{this.logEvent("Connect","Attempting",pn,Object.assign({},Cn))},1/5,6),Ys.start()),Wn==="Failure"||Wn==="Success"||Wn==="Cancel"){const Dn=fr=>{Ys&&(Ys.stop(),Ys=void 0),this.logEvent("Connect",Wn,pn,Object.assign({},Cn,{attemptDuration:new Date().getTime()-Pu,iceConfig:fr,ipWhitelist:fu}))};Wn==="Success"?this._.getIceConfig().then(fr=>{const yr={includeServers:no&&no.includeServers||"all",transportPolicy:fr.transportPolicy};yr.servers=fr.servers?fr.servers.map(mo=>({url:mo.urls})):[],Dn(yr)}):Dn()}else this.logEvent("Connect",Wn,pn,Cn)},this.connect=function(){let Wn;for(var pn=arguments.length,Cn=new Array(pn),Dn=0;Dn<pn;Dn++)Cn[Dn]=arguments[Dn];Cn.length>1&&(typeof Cn[0]=="string"||typeof Cn[0]=="number")&&typeof Cn[1]=="string"?(eo==null&&(zl=Cn[0].toString()),Wn=Cn[1]):Wn=Cn[0];const fr=Cn[Cn.length-1];if(Wr.is("connecting","connected"))return Ms.warn(`OT.Session: Cannot connect, the session is already ${Wr.currentState}`),Wr;Zs.sessionInfo=new vr,op(),Yu("connecting");const yr=Or;function mo(){const _o=Or!==yr;return _o&&On.debug("Connection was interrupted"),_o}if(Wr.token=!j(Wn)&&Wn,hu=!j(Wn)&&Wn,fr&&j(fr)){let _o;const ys=function(){_o();for(var Is=arguments.length,Cl=new Array(Is),Vs=0;Vs<Is;Vs++)Cl[Vs]=arguments[Vs];fr(void 0,...Cl)},Ps=function(){_o(),fr(...arguments)};_o=()=>{Wr.off("sessionConnected",ys),Wr.off("sessionConnectFailed",Ps)},Wr.once("sessionConnected",ys),Wr.once("sessionConnectFailed",Ps)}if(zl==null||j(zl))return setTimeout(js.bind(Wr,tn(Bt.AUTHENTICATION_ERROR,new Error("API Key is undefined. You must pass an API Key to initSession."),Kt.AUTHENTICATION_ERROR))),Wr;if(!Js||b(Js)||Array.isArray(Js)){let _o;return Js?(_o="SessionID is not a string. You must use string as the session ID passed into OT.initSession().",Js=Js.toString()):_o="SessionID is undefined. You must pass a sessionID to initSession.",setTimeout(js.bind(Wr,tn(Bt.INVALID_SESSION_ID,new Error(_o),Kt.INVALID_SESSION_ID))),Wr.logConnectivityEvent("Attempt"),Wr.logConnectivityEvent("Failure",null,{failureReason:"ConnectToSession",failureCode:Kt.INVALID_SESSION_ID,failureMessage:_o}),Wr}if(Wr.apiKey=zl.toString(),zl=zl.toString(),Zo){if(!Sn())return setTimeout(js.bind(Wr,tn(Bt.UNSUPPORTED_BROWSER,new Error("E2E Encryption is not supported in your browser.")))),Wr;try{Et(Zo),Wr.keyStore.set(io,Zo),Do=!0}catch(_o){return setTimeout(js.bind(Wr,tn(Bt.INVALID_ENCRYPTION_SECRET,new Error(`Invalid encryptionSecret: ${_o.message}`)))),Wr}}Nt.value.length===0&&(Nt.value=zl);const Ro=!!$n.onlyLocal().configUrl,ms=fu===!0&&!!$n.onlyLocal().ipWhitelistConfigUrl;return!Ro&&!ms?Wr.logConfigurationFileEvent("Event",{message:"No configUrl, using local config only"}):Wr.logConfigurationFileEvent("Attempt"),(Ro||ms?$n.get({partnerId:zl,token:Wn,useIpWhitelistConfigUrl:ms,proxyUrl:Xo}):o.resolve($n.onlyLocal())).then(_o=>((Ro||ms)&&Wr.logConfigurationFileEvent("Success"),_o),_o=>((Ro||ms)&&Wr.logConfigurationFileEvent("Failure",{failureMessage:_o.message,failureStack:_o.stack}),$n.onlyLocal())).then(_o=>{if(Wr.staticConfig=_o,Zs.staticConfig=_o,_o.apiEnabled===!1)throw tn(Bt.API_KEY_DISABLED,new Error("The API KEY has been disabled. Access to the service is currently being restricted. Please contact support."));if(mo())return;Wr.logConnectivityEvent("Attempt"),Xo?Wr.logEvent("SessionInfo","Attempt",null,{proxyUrl:Xo}):Wr.logEvent("SessionInfo","Attempt");const ys=Is=>{Is.code=zt(Is.code),Wr.logConnectivityEvent("Failure",null,{failureReason:"GetSessionInfo",failureCode:Is.code||"No code",failureMessage:Is.message,failureName:Is.name}),Is.name&&(Is=tn(Is.name,new Error(`${Is.message}${Is.code?` (${Is.code})`:""}`),Is.code)),js.call(Wr,Is)},Ps=Is=>{if(mo())return;if(Is.partnerId&&Is.partnerId!==zl){const Vs="Authentication Error: The API key does not match the token or session.";ys(tn(Bt.AUTHENTICATION_ERROR,new Error(Vs),Kt.AUTHENTICATION_ERROR));return}El=lt(Is,oo),El&&(Xu=new ir(Wr)),Zs.sessionInfo=Is;const Cl={features:{reconnection:Is.reconnection,renegotiation:$t()&&Is.renegotiation,simulcast:Is.simulcast===void 0?!1:Is.simulcast&&dn.env.name==="Chrome"}};if(Xo&&(Cl.proxyUrl=Xo),Wr.is("connecting")){Wr.sessionInfo=Is,Wr._.setIceServers(Wr.sessionInfo.iceServers),Tu=Is.p2pEnabled,Zp=Is.messagingServer,Wr.logEvent("SessionInfo","Success",null,Cl,{messagingServer:Is.messagingServer});const Vs=_o.sessionInfoOverrides;Vs!=null&&typeof Vs=="object"&&Object.keys(Vs).forEach(Xl=>{Object.defineProperty(Wr.sessionInfo,Xl,{value:Vs[Xl]})}),Lp.call(Wr)}},vp=Tt(_o.apiUrl,Xo);return zn({anvilUrl:vp,sessionId:io,token:hu,connectionId:Or,clientVersion:_o.clientVersion}).then(Ps,ys)}).catch(_o=>{js.call(Wr,_o)}),Wr},this.disconnect=function(){Xu&&(Xu.destroy(),Xu=null),fs&&fs.isNot("disconnected")?fs.isNot("disconnecting")&&(fs.isNot("connecting")||this.logConnectivityEvent("Cancel"),Yu("disconnecting"),fs.disconnect(),this.off("gsmCallEnded",gp)):Zu()},this.destroy=function(){this.streams.destroy(),this.connections.destroy(),this.archives.destroy(),this.disconnect()},this.publish=function(Wn,pn,Cn){if(typeof Wn=="function"&&(Cn=Wn,Wn=void 0),typeof pn=="function"&&(Cn=pn,pn=void 0),Cn=Cn||function(){},this.isNot("connected"))return Zs.logError(1010,"OT.exception","We need to be connected before you can publish",null,{action:"Publish",variation:"Failure",failureReason:"unconnected",failureCode:Kt.NOT_CONNECTED,failureMessage:"We need to be connected before you can publish",sessionId:Js,streamId:Wn&&Wn.stream?Wn.stream.id:null,p2p:this.sessionInfo?this.sessionInfo.p2pEnabled:void 0,messagingServer:this.sessionInfo?this.sessionInfo.messagingServer:null,partnerId:zl}),$l(tn(Bt.NOT_CONNECTED,new Error("We need to be connected before you can publish"),Kt.NOT_CONNECTED),Cn),null;if(!Ku("publish")){const Dn="This token does not allow publishing. The role must be at least `publisher` to enable this functionality",fr={failureReason:"Permission",failureCode:Kt.UNABLE_TO_PUBLISH,failureMessage:Dn};return this.logEvent("Publish","Failure",null,fr),$l(tn(Bt.PERMISSION_DENIED,new Error(Dn),Kt.UNABLE_TO_PUBLISH),Cn),null}if(!Wn||typeof Wn=="string"||dn.isElementNode(Wn))Wn=gr(Wn,pn);else if(Wn instanceof Fn)"session"in Wn&&Wn.session&&"sessionId"in Wn.session&&(Wn.session.sessionId===this.sessionId?Ms.warn(`Cannot publish ${Wn.guid()} again to ${this.sessionId}. Please call session.unpublish(publisher) first.`):Ms.warn(`Cannot publish ${Wn.guid()} publisher already attached to ${Wn.session.sessionId}. Please call session.unpublish(publisher) first.`));else{$l(tn(Bt.INVALID_PARAMETER,new Error("Session.publish :: First parameter passed in is neither a string nor an instance of the Publisher"),Kt.UNABLE_TO_PUBLISH),Cn);return}return Vp&&Wn._.forceMuteAudio(),Wn._.publishToSession(this,Zs).catch(Dn=>{throw Dn.message=`Session.publish :: ${Dn.message}`,Ms.error(Dn.code,Dn.message),Dn}).then(()=>Wn).then(function(){for(var Dn=arguments.length,fr=new Array(Dn),yr=0;yr<Dn;yr++)fr[yr]=arguments[yr];return Cn(null,...fr)},Dn=>Cn(Dn)),Wn},this.unpublish=function(Wn){if(!Wn){Ms.error("OT.Session.unpublish: publisher parameter missing.");return}Wn._.unpublishFromSession(this,"unpublished")},this.setIceConfig=function(){var Wn=(0,d.default)(c.default.mark(function pn(Cn){var Dn,fr,yr;return c.default.wrap(function(Ro){for(;;)switch(Ro.prev=Ro.next){case 0:if(Vn(Cn),Zs.logEvent({action:"setIceConfig",variation:"Attempt",payload:{newIceConfig:Cn}}),no=Object.assign({},Cn),Cn.includeServers!=="all"){Ro.next=8;break}return Ro.next=6,Rs._.getOtIceServerInfo();case 6:Dn=Ro.sent,Cn.customServers=Cn.customServers.concat(Dn.servers);case 8:return fr=ms=>({iceServers:ms.customServers,iceTransportPolicy:ms.transportPolicy}),yr=fr(Cn),Ro.prev=10,Ro.next=13,o.all(wr.publishers.map(ms=>ms._.setIceConfig(yr)).concat(wr.subscribers.map(ms=>ms._.setIceConfig(yr))));case 13:Ro.next=19;break;case 15:throw Ro.prev=15,Ro.t0=Ro.catch(10),Zs.logEvent({action:"setIceConfig",variation:"Failure",payload:{newIceConfig:Cn}}),Ro.t0;case 19:Zs.logEvent({action:"setIceConfig",variation:"Success",payload:{newIceConfig:Cn}});case 20:case"end":return Ro.stop()}},pn,null,[[10,15]])}));return function(pn){return Wn.apply(this,arguments)}}(),this.subscribe=function(Wn,pn,Cn,Dn){if(typeof pn=="function"&&(Dn=pn,pn=void 0,Cn=void 0),typeof Cn=="function"&&(Dn=Cn,Cn=void 0),Dn=Dn||function(){},!this.connection||!this.connection.connectionId){$l(tn(Bt.NOT_CONNECTED,new Error("Session.subscribe :: Connection required to subscribe"),Kt.UNABLE_TO_SUBSCRIBE),Dn);return}if(!Wn){$l(tn(Bt.INVALID_PARAMETER,new Error("Session.subscribe :: stream cannot be null"),Kt.UNABLE_TO_SUBSCRIBE),Dn);return}if(!Object.prototype.hasOwnProperty.call(Wn,"streamId")){$l(tn(Bt.INVALID_PARAMETER,new Error("Session.subscribe :: invalid stream object"),Kt.UNABLE_TO_SUBSCRIBE),Dn);return}if(Cn&&Cn.insertDefaultUI===!1&&pn){$l(tn(Bt.INVALID_PARAMETER,new Error("You cannot specify a target element if insertDefaultUI is false"),Kt.INVALID_PARAMETER),Dn);return}pn&&pn.insertDefaultUI===!1&&(Cn=pn,pn=void 0);const fr=new po(pn,_(Cn||{},{stream:Wn,session:this,analytics:Zs,_singlePeerConnectionController:Xu}),yr=>{if(yr){$l(yr,Dn);return}Dn(null,fr)});return wr.subscribers.add(fr),fr},this.unsubscribe=function(Wn){if(!Wn){const pn="OT.Session.unsubscribe: subscriber cannot be null";throw Ms.error(pn),new Error(pn)}return Wn.stream?(Ms.debug(`OT.Session.unsubscribe: subscriber ${Wn.id}`),Wn._destroy({reason:"Unsubscribe"}),!0):(Ms.warn("OT.Session.unsubscribe:: tried to unsubscribe a subscriber that had no stream"),!1)},this.getSubscribersForStream=function(Wn){return wr.subscribers.where({streamId:Wn.id})},this.getPublisherForStream=function(Wn){let pn,Cn;if(typeof Wn=="string")pn=Wn;else if(typeof Wn=="object"&&Wn&&Object.hasOwnProperty.call(Wn,"id"))pn=Wn.id;else throw Cn="Session.getPublisherForStream :: Invalid stream type",Ms.error(Cn),new Error(Cn);return wr.publishers.where({streamId:pn})[0]},this._={getProxyUrl(){return Xo},isE2ee(){return Rs.sessionInfo.e2ee&&Do&&!!Rs.capabilities.supportsE2ee},isSocketReconnecting(){return Fs},getSocket(){return fs},reconnecting:function(){Fs=!0,this.dispatchEvent(new sn.SessionReconnectingEvent)}.bind(this),reconnected:function(){Fs=!1,this.dispatchEvent(new sn.SessionReconnectedEvent),this.sessionInfo.reconnection&&(wr.publishers.where({session:this}).forEach(Wn=>{Wn._.iceRestart()}),this.sessionInfo.p2pEnabled||wr.subscribers.where({session:this}).forEach(Wn=>{Wn._.iceRestart("socket reconnected")}))}.bind(this),dispatchSignal:function(Wn,pn,Cn){const Dn=new sn.SignalEvent(pn,Cn,Wn);Dn.target=this,this.trigger($.SIGNAL,Dn),pn&&this.dispatchEvent(Dn)}.bind(this),dispatchCaption:function(Wn,pn){let Cn,Dn,fr;try{const mo=JSON.parse(pn.data);Cn=mo.caption.text,Dn=mo.streamId,fr=mo.isFinal}catch(mo){Ms.error(`Caption parsing failed: ${mo.message}`);return}const yr=new sn.CaptionReceivedEvent(Cn,Dn,fr);yr.target=this,this.trigger($.SUBSCRIBER_CAPTION_RECEIVED,yr),this.dispatchEvent(yr)}.bind(this),subscriberChannelUpdate(Wn,pn,Cn,Dn){return fs?fs.subscriberChannelUpdate(Wn.id,pn.widgetId,Cn.id,Dn):(Ms.warn("You are disconnected, cannot update subscriber properties ",Dn),null)},streamCreate(Wn,pn){let Cn=Wn===void 0?{}:Wn,Dn=Cn.name,fr=Cn.streamId,yr=Cn.subscriberAudioFallbackEnabled,mo=Cn.channels,Ro=Cn.minBitrate,ms=Cn.sourceStreamId,Ho=Cn.e2ee,_o=Cn.publisherAudioFallbackEnabled,ys=Cn.customProperties;if(!fs){Ms.warn("You are disconnected, cannot create stream ",fr);return}fs.streamCreate({name:Dn,streamId:fr,subscriberAudioFallbackEnabled:yr,channels:mo,minBitrate:Ro,maxBitrate:void 0,sourceStreamId:ms,e2ee:Ho,publisherAudioFallbackEnabled:_o,customProperties:ys},pn)},streamDestroy(Wn,pn){if(!fs){Ms.warn("You are disconnected, cannot destroy stream ",Wn);return}fs.streamDestroy(Wn,pn)},streamChannelUpdate(Wn,pn,Cn){if(!fs){Ms.warn("You are disconnected, cannot update stream properties ",Cn);return}fs.streamChannelUpdate(Wn.id,pn.id,Cn)},setSocket(Wn){fs=Wn},setLogging(Wn){Ms=Wn},setState:Yu,setIceServers(Wn){Wn&&(Mr={iceServers:Ut(Wn),timestamp:Date.now()})},getOtIceServerInfo(){const Wn=Mr?Date.now()-Mr.timestamp:1/0,Cn=24*60*60*1e3-Wn,Dn=5*60*1e3;if(Cn>Dn)return o.resolve({transportPolicy:Rs&&Rs.sessionInfo&&Rs.sessionInfo.clientCandidates,servers:Mr&&Mr.iceServers});if(!hu)return o.resolve({transportPolicy:Rs&&Rs.sessionInfo&&Rs.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0});const fr=Un.clientVersion;return zn({anvilUrl:(this.staticConfig||Un).apiUrl,sessionId:io,token:hu,connectionId:Or,clientVersion:fr}).then(yr=>(Rs._.setIceServers(yr.iceServers),Mr?{transportPolicy:Rs&&Rs.sessionInfo&&Rs.sessionInfo.clientCandidates,servers:Mr&&Mr.iceServers}:{transportPolicy:Rs.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0}))},getCodecFlags:()=>({h264:Rs.sessionInfo.h264,vp9:Rs.sessionInfo.vp9,vp8:Rs.sessionInfo.vp8}),getVideoCodecsCompatible:Wn=>it({RTCPeerConnection:In.RTCPeerConnection,env:dn.env,stream:Wn,codecFlags:Rs._.getCodecFlags()}),getIceConfig:()=>{if(!no)return Rs._.getOtIceServerInfo();const Wn=(()=>no&&no.transportPolicy==="relay"?"relay":Rs.sessionInfo.clientCandidates)();return(no.includeServers==="custom"?o.resolve({servers:[]}):Rs._.getOtIceServerInfo()).then(Cn=>_(Cn,{transportPolicy:Wn,servers:[...Cn.servers,...no.customServers]}))},forceMute:function(Wn){this.dispatchEvent(new sn.MuteForcedEvent(Wn))}.bind(this),enableMuteOnEntry:()=>{Vp=!0},addSubscriberToPeerConnectionsQueue:(Wn,pn)=>{Jl.push({pc:Wn,message:pn}),Ql||(Ql=setInterval(()=>{const Cn=Jl.shift();Cn?Cn.pc.processMessage("offer",Cn.message):(clearInterval(Ql),Ql=null)},100))},disableMuteOnEntry:()=>{Vp=!1},privateEvents:new h},this.signal=function(Wn,pn){let Cn=Wn,Dn=pn||function(){};if(j(Cn)&&(Dn=Cn,Cn=null),this.isNot("connected")){const yr="Unable to send signal - you are not connected to the session.";$l(tn(Bt.NOT_CONNECTED,new Error(yr),500),Dn);return}function fr(yr){switch(yr){case 400:case 413:return Bt.INVALID_PARAMETER;case 429:return Bt.RATE_LIMIT_EXCEEDED;case 404:return Bt.NOT_FOUND;case 500:return Bt.NOT_CONNECTED;case 403:return Bt.PERMISSION_DENIED;case 2001:return Bt.UNEXPECTED_SERVER_RESPONSE;default:return}}fs.signal(Cn,function(yr){if(yr){const Ho=fr(yr.code);Ho&&(yr=tn(Ho,new Error(yr.message),yr.code)),Dn(yr);return}for(var mo=arguments.length,Ro=new Array(mo>1?mo-1:0),ms=1;ms<mo;ms++)Ro[ms-1]=arguments[ms];Dn(yr,...Ro)},this.logEvent),Wn&&Wn.data&&typeof Wn.data!="string"&&Ms.warn("Signaling of anything other than Strings is deprecated. Please update the data property to be a string.")},this.forceDisconnect=function(Wn,pn){if(this.isNot("connected")){const yr="Cannot call forceDisconnect(). You are not connected to the session.";$l(tn(Bt.NOT_CONNECTED,new Error(yr),Kt.NOT_CONNECTED),pn);return}const Cn=typeof Wn=="string"?Wn:Wn.id,Dn="Invalid Parameter. Check that you have passed valid parameter values into the method call.";if(!Cn){$l(tn(Bt.INVALID_PARAMETER,new Error(Dn),Kt.INVALID_PARAMETER),pn);return}const fr="This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality";if(!Ku("forceDisconnect")){$l(tn(Bt.PERMISSION_DENIED,new Error(fr),Kt.UNABLE_TO_FORCE_DISCONNECT),pn);return}fs.forceDisconnect(Cn,function(yr){if(yr)$l(tn(Bt.INVALID_PARAMETER,new Error(Dn),Kt.INVALID_PARAMETER),pn);else if(pn&&j(pn)){for(var mo=arguments.length,Ro=new Array(mo>1?mo-1:0),ms=1;ms<mo;ms++)Ro[ms-1]=arguments[ms];pn(yr,...Ro)}})},this.forceUnpublish=function(Wn,pn){pn===void 0&&(pn=()=>{});const Cn=Ho=>$l(tn(Ho.name,new Error(Ho.msg),Ho.code),pn),Dn={msg:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",code:Kt.INVALID_PARAMETER,name:Bt.INVALID_PARAMETER},fr={msg:"Cannot call forceUnpublish(). You are not connected to the session.",code:Kt.NOT_CONNECTED,name:Bt.NOT_CONNECTED},yr={msg:"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",code:Kt.UNABLE_TO_FORCE_UNPUBLISH,name:Bt.PERMISSION_DENIED},mo={msg:"The stream does not exist.",name:Bt.NOT_FOUND},Ro={msg:"An unexpected error occurred.",name:Bt.UNEXPECTED_SERVER_RESPONSE,code:Kt.UNEXPECTED_SERVER_RESPONSE};if(!Wn){Cn(Dn);return}if(Wr.isNot("connected")){Cn(fr);return}const ms=Pl(Wn);if(!Ku("forceUnpublish")){Cn(yr);return}fs.forceUnpublish(ms.id,Ho=>{if(!Ho){pn(null);return}Ho.code==="404"?Cn(mo):Ho.code==="403"?Cn(yr):Cn(Ro)})},this.forceMuteStream=Wn=>new o((pn,Cn)=>{const Dn=xl();if(Dn){Cn(Dn);return}if(!Wn||!Wn.id){Cn(Ru(Mn.INVALID_PARAMETER));return}fs.forceMuteStream(Wn.id,fr=>{fr?Cn(Cp(fr)):pn()})}),this.forceMuteAll=Wn=>new o((pn,Cn)=>{const Dn=xl();if(Dn){Cn(Dn);return}if(Array.isArray(Wn)&&!Wn.every(yr=>yr instanceof qt)||Wn&&!Array.isArray(Wn)){Cn(Ru(Mn.INVALID_PARAMETER));return}const fr=(Wn||[]).map(yr=>yr.id);fs.forceMuteAll(fr,!0,yr=>{yr?Cn(Cp(yr)):pn()})}),this.disableForceMute=()=>new o((Wn,pn)=>{const Cn=xl();if(Cn){pn(Cn);return}fs.forceMuteAll([],!1,Dn=>{Dn?pn(Cp(Dn)):Wn()})}),this.setEncryptionSecret=function(){var Wn=(0,d.default)(c.default.mark(function pn(Cn){return c.default.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Zo){fr.next=3;break}return On.error("Encryption secret must first be set in initSession."),fr.abrupt("return");case 3:fr.prev=3,Et(Cn),fr.next=10;break;case 7:throw fr.prev=7,fr.t0=fr.catch(3),tn(Bt.INVALID_ENCRYPTION_SECRET,new Error(`setEncryptionSecret: ${fr.t0.message}`));case 10:return fr.prev=10,fr.next=13,Wr.keyStore.set(io,Cn);case 13:fr.next=18;break;case 15:fr.prev=15,fr.t1=fr.catch(10),Ms.error(`Error in setEncryptionSecret}: ${fr.t1.message}`);case 18:case"end":return fr.stop()}},pn,null,[[3,7],[10,15]])}));return function(pn){return Wn.apply(this,arguments)}}(),this.isConnected=()=>this.is("connected"),this.capabilities=new Jt([],{hasE2eeCapability:Sn})}}}).call(this,i(0))},function(e,s,i){const o=i(10),a=i(22),c=[400,403,409,o.CONNECTION_LIMIT_EXCEEDED],d={CONNECT:"ConnectToSession",SESSION_STATE:"GetSessionState"};e.exports=function(g){let b,j;if(g.reason===d.CONNECT&&g.code===o.CONNECT_FAILED)b=g.code,j=a.getTitleByCode(g.code);else if(g.code&&c.indexOf(Number(g.code))>-1)switch(b=o.CONNECT_FAILED,g.reason){case d.CONNECT:switch(g.code){case o.CONNECTION_LIMIT_EXCEEDED:b=g.code,j="Cannot connect -- the limit for concurrent connections to the session has been reached";break;default:j="Received error response to connection create message.";break}break;case d.SESSION_STATE:j="Received error response to session read";break;default:j="";break}else b=o.UNEXPECTED_SERVER_RESPONSE,j="Unexpected server response. Try this operation again later.";return{code:b,message:j}}},function(e,s,i){const o=i(2),a=i(51).once;e.exports=()=>a()&&(o.isChromiumEdge||["Chrome","Safari","Firefox","Opera"].includes(o.name))},function(e,s,i){e.exports=function(a){return JSON.stringify(a)}},function(e,s){function i(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}e.exports=i},function(e,s,i){s.__esModule=!0,s.default=void 0;var o=a=>{let c=a.logger,d=a.obj;a.eventNames.forEach(g=>{d.on(g,function(){for(var b=arguments.length,j=new Array(b),_=0;_<b;_++)j[_]=arguments[_];return c.spam("emitted",g,j)})})};s.default=o},function(e,s,i){const o=i(16),a=i(22),c=i(6),d=i(1)("Dispatcher"),h=i(171),g=i(749),b=function(){c(this),this.callbacks={}};e.exports=b,b.prototype.registerCallback=function(j,_){this.callbacks[j]=_},b.prototype.triggerCallback=function(j){if(!j)return;const _=this.callbacks[j];if(_&&o(_)){const $=Array.prototype.slice.call(arguments);$.shift(),_(...$)}delete this.callbacks[j]},b.prototype.onClose=function(j){this.emit("close",j)},b.prototype.onReconnected=function(){this.emit("reconnected")},b.prototype.onReconnecting=function(){this.emit("reconnecting")},b.prototype.dispatch=function(j){if(j.type===h.STATUS){var _;d.debug(j);let _e;if(j.isError){let ct;if(typeof j.data=="string")try{const dt=JSON.parse(j.data);dt&&typeof dt=="object"&&(ct=dt.reason)}catch(dt){d.warn("Failed to parse rumorMessage.data",dt)}_e=new a(j.status,ct)}const et=j.data?JSON.parse(j.data):"";et!=null&&(_=et.mute)!=null&&_.active&&this.dispatchMuteOnEntry(),this.triggerCallback(j.transactionId,_e,j);return}const $=g(j);switch(d.debug(`${$.signature}:`,$),$.resource){case"session":this.dispatchSession($);break;case"connection":this.dispatchConnection($);break;case"stream":this.dispatchStream($);break;case"stream_channel":this.dispatchStreamChannel($);break;case"subscriber":this.dispatchSubscriber($);break;case"subscriber_channel":this.dispatchSubscriberChannel($);break;case"signal":this.dispatchSignal($);break;case"data":this.dispatchCaption($);break;case"archive":this.dispatchArchive($);break;case"source":this.dispatchSource($);break;default:d.debug(`Type ${$.resource} is not currently implemented`)}},b.prototype.dispatchSession=function(j){switch(j.method){case"read":this.emit("session#read",j.content,j.transactionId);break;case"update":this.emit("session#update",j.content);break;default:d.debug(`${j.signature} is not currently implemented`)}},b.prototype.dispatchMuteOnEntry=function(){this.emit("session#muted")},b.prototype.dispatchConnection=function(j){switch(j.method){case"created":this.emit("connection#created",j.content);break;case"deleted":this.emit("connection#deleted",j.params.connection,j.reason);break;default:d.debug(`${j.signature} is not currently implemented`)}},b.prototype.dispatchStream=function(j){switch(j.method){case"created":this.emit("stream#created",j.content,j.transactionId);break;case"deleted":this.emit("stream#deleted",j.params.stream,j.reason,j.content);break;case"updated":this.emit("stream#updated",j.params.stream,j.content);break;case"update":this.emit("stream#update",j.params.stream,j.content);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(j.method,j);break;default:d.debug(`${j.signature} is not currently implemented`)}},b.prototype.dispatchStreamChannel=function(j){switch(j.method){case"updated":this.emit("streamChannel#updated",j.params.stream,j.params.channel,j.content);break;default:d.debug(`${j.signature} is not currently implemented`)}},b.prototype.dispatchJsep=function(j,_){this.emit(`jsep#${j}`,_.params.stream,_.fromAddress,_)},b.prototype.dispatchSubscriberChannel=function(j){switch(j.method){case"updated":this.emit("subscriberChannel#updated",j.params.stream,j.params.channel,j.content);break;case"update":this.emit("subscriberChannel#update",j.params.subscriber,j.params.stream,j.content);break;default:d.debug(`${j.signature} is not currently implemented`)}},b.prototype.dispatchSubscriber=function(j){switch(j.method){case"created":this.emit("subscriber#created",j.params.stream,j.fromAddress,j.content.id);break;case"deleted":this.dispatchJsep("unsubscribe",j),this.emit("subscriber#deleted",j.params.stream,j.fromAddress);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(j.method,j);break;default:d.debug(`${j.signature} is not currently implemented`)}},b.prototype.dispatchSignal=function(j){if(j.method!=="signal"){d.debug(`${j.signature} is not currently implemented`);return}this.emit("signal",j.fromAddress,j.content)},b.prototype.dispatchCaption=function(j){this.emit("caption",j.fromAddress,j.content)},b.prototype.dispatchArchive=function(j){switch(j.method){case"created":this.emit("archive#created",j.content);break;case"updated":this.emit("archive#updated",j.params.archive,j.content);break}},b.prototype.dispatchSource=function(j){switch(j.method){case"create":this.emit("source#create",j.params.source,j.params.stream,j.reason);break;case"delete":this.emit("source#delete",j.params.source,j.params.stream,j.reason);break;default:d.debug(`${j.signature} is not currently implemented`)}}},function(e,s,i){const o=i(15),a=i(8),c=i(752),d=i(753),h=i(323),g=i(754),b=i(34)().onlyLocal(),j={};e.exports=j,j.connections={},j.connections.create=function(_){const $=_.apiKey,_e=_.sessionId,et=_.connectionId,ct=_.connectionEventsSuppressed,dt=_.capabilities;return h({method:"create",uri:`/v2/partner/${$}/session/${_e}/connection/${et}`,content:{userAgent:a.env.userAgent,clientVersion:b.clientVersion,capabilities:dt||[],connectionEventsSuppressed:ct}})},j.connections.destroy=function(_){const $=_.apiKey,_e=_.sessionId,et=_.connectionId;return h({method:"delete",uri:`/v2/partner/${$}/session/${_e}/connection/${et}`,content:{}})},j.sessions={},j.sessions.get=function(_,$){return h({method:"read",uri:`/v2/partner/${_}/session/${$}`,content:{}})},j.streams={},j.streams.get=function(_,$,_e){return h({method:"read",uri:`/v2/partner/${_}/session/${$}/stream/${_e}`,content:{}})},j.streams.channelFromOTChannel=function(_){const $={id:_.id,type:_.type,active:_.active};return _.type==="video"&&($.width=_.width,$.height=_.height,$.orientation=_.orientation,$.frameRate=_.frameRate,_.source!=="default"&&($.source=_.source),$.fitMode=_.fitMode),$},j.streams.create=function(_){_===void 0&&(_={});const $=_,_e=$.apiKey,et=$.sessionId,ct=$.streamId,dt=$.name,nt=$.audioFallbackEnabled,it=$.publisherAudioFallbackEnabled,st=$.subscriberAudioFallbackEnabled,lt=$.channels,ht=$.minBitrate,Tt=$.maxBitrate,Rt=$.sourceStreamId,vt=$.e2ee,Et=$.customProperties,bt={id:ct,name:dt,audioFallbackEnabled:nt,publisherAudioFallbackEnabled:it,subscriberAudioFallbackEnabled:st,channel:lt.map(Ct=>j.streams.channelFromOTChannel(Ct)),e2ee:vt,customProperties:Et};return ht&&(bt.minBitrate=Math.round(ht)),Tt&&(bt.maxBitrate=Math.round(Tt)),Rt&&(bt.sourceStreamId=Rt),typeof vt=="boolean"&&(bt.e2ee=vt),h({method:"create",uri:`/v2/partner/${_e}/session/${et}/stream/${ct}`,content:bt})},j.streams.destroy=function(_,$,_e,et){const ct={};return et&&(ct.sourceStreamId=et),h({method:"delete",uri:`/v2/partner/${_}/session/${$}/stream/${_e}`,content:ct})},j.streamChannels={},j.streamChannels.update=function(_,$,_e,et,ct){return h({method:"update",uri:`/v2/partner/${_}/session/${$}/stream/${_e}/channel/${et}`,content:ct})},j.subscribers={},j.subscribers.create=function(_){_===void 0&&(_={});const $=_,_e=$.apiKey,et=$.sessionId,ct=$.streamId,dt=$.subscriberId,nt=$.connectionId,it=$.channelsToSubscribeTo,st=$.sourceStreamId,lt=$.e2ee,ht={id:dt,connection:nt,keyManagementMethod:g,bundleSupport:c(),rtcpMuxSupport:d(),e2ee:lt};return it&&(ht.channel=it),st&&(ht.sourceStreamId=st),h({method:"create",uri:`/v2/partner/${_e}/session/${et}/stream/${ct}/subscriber/${dt}`,content:ht})},j.subscribers.destroy=function(_,$,_e,et){return h({method:"delete",uri:`/v2/partner/${_}/session/${$}/stream/${_e}/subscriber/${et}`,content:{}})},j.subscribers.update=function(_,$,_e,et,ct){return h({method:"update",uri:`/v2/partner/${_}/session/${$}/stream/${_e}/subscriber/${et}`,content:ct})},j.subscriberChannels={},j.subscriberChannels.update=function(_,$,_e,et,ct,dt){return h({method:"update",uri:`/v2/partner/${_}/session/${$}/stream/${_e}/subscriber/${et}/channel/${ct}`,content:dt})},j.signals={},j.signals.create=function(_,$,_e,et,ct){const dt={};return et!==void 0&&(dt.type=et),ct!==void 0&&(dt.data=ct),h({method:"signal",uri:`/v2/partner/${_}/session/${$}${_e!==void 0?`/connection/${_e}`:""}/signal/${o()}`,content:dt})},j.forceMute={},j.forceMute.update=_=>{const $=_.apiKey,_e=_.sessionId,et=_.streamId,ct=_.active,dt=_.excludedStreamIds,nt={reason:"mute",channels:["audio"],active:ct,locked:!1};return dt&&(nt.exclusion=dt),h({method:"update",uri:`/v2/partner/${$}/session/${_e}${et?`/stream/${et}`:""}`,content:nt})}},function(e,s,i){const o=i(37),a=i(70),c=i(172),d=i(327),h=i(329),g=8192,b=128;e.exports=function(_,$,_e){const et=function(lt){return!/^[a-zA-Z0-9\-\._~]+$/.exec(lt)},ct=function(lt){return lt?lt instanceof c||lt._tag===h?null:{code:400,reason:"The To field was invalid"}:{code:400,reason:"The signal to field was invalid. Either set it to a OT.Connection, OT.Session, or omit it entirely"}},dt=function(lt){let ht=null;return lt==null?ht={code:400,reason:"The signal type was null or undefined. Either set it to a String value or omit it"}:lt.length>b?ht={code:413,reason:`The signal type was too long, the maximum length of it is ${b} characters`}:et(lt)&&(ht={code:400,reason:"The signal type was invalid, it can only contain letters, numbers, '-', '_', and '~'."}),ht},nt=function(lt){let ht=null;if(lt==null)ht={code:400,reason:"The signal data was null or undefined. Either set it to a String value or omit it"};else try{JSON.stringify(lt).length>g&&(ht={code:413,reason:`The data field was too long, the maximum size of it is ${g} characters`})}catch{ht={code:400,reason:"The data field was not valid JSON"}}return ht},it=function(lt){let ht=null;return lt===!0||lt===!1||(ht={code:400,reason:"The signal retryAfterReconnect was not true or false. Either set it to a Boolean value or omit it"}),ht};this.toRaptorMessage=function(){let st=this.to;return st&&typeof st!="string"&&(st=st.id),d.signals.create(a.value,_,st,this.type,this.data)},this.toHash=function(){return _e},this.error=null,this.retryAfterReconnect=!0,_e&&(_e.hasOwnProperty("data")&&(this.data=o(_e.data),this.error=nt(this.data)),_e.hasOwnProperty("to")&&(this.to=_e.to,this.error||(this.error=ct(this.to))),_e.hasOwnProperty("type")&&(this.error||(this.error=dt(_e.type)),this.type=_e.type),_e.hasOwnProperty("retryAfterReconnect")&&(this.error||(this.error=it(_e.retryAfterReconnect)),this.retryAfterReconnect=_e.retryAfterReconnect)),this.valid=this.error===null}},function(e,s,i){e.exports={}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=i(331),h=i(49),g=i(172),b=i(757),j=i(326),_=i(1)("SessionDispatcher"),$=i(21),_e=i(170),et=i(150),ct=i(167);function dt(Rt){return{id:Rt,creationTime:new Date().getTime(),data:{},capablities:{},permissions:[]}}function nt(Rt,vt){const Et=Rt.channel.map(Ct=>new et(Ct)),bt=Rt.connectionId?Rt.connectionId:Rt.connection.id;return new _e(Rt.id,Rt.name,Rt.creationTime,vt.connections.get(bt),vt,Et,Rt.customProperties&&Rt.customProperties.initials)}function it(Rt,vt){if(vt.streams.has(Rt.id))return;const Et=nt(Rt,vt);return vt.streams.add(Et),Et}function st(Rt){return new d(Rt.id,Rt.name,Rt.status)}function lt(Rt,vt){if(vt.archives.has(Rt.id))return;const Et=st(Rt);return vt.archives.add(Et),Et}const ht=function(vt){const Et={};this.enqueue=function(){const Ct=arguments[0],Ut=Array.prototype.slice.call(arguments,1);Et[Ct]||(Et[Ct]=new b(vt)),Et[Ct].enqueue.apply(Et[Ct],Ut)},this.triggerConnectionCreated=function(Ct){Et[`connectionCreated${Ct.id}`]&&Et[`connectionCreated${Ct.id}`].triggerAll()},this.triggerSessionConnected=function(Ct){Et.sessionConnected&&Et.sessionConnected.triggerAll(),Ct.forEach(function(Ut){this.triggerConnectionCreated(Ut)},this)}},Tt={};e.exports=function(vt,Et){let bt=Et===void 0?{}:Et,Ct=bt.connectionEventsSuppressed;const Ut=new j;let Xt=!1;const Nt=new ht(Ut);Ut.on("reconnecting",()=>{vt._.reconnecting()}),Ut.on("reconnected",()=>{vt._.reconnected()}),Ut.on("close",nn=>{const Bt=vt.connection;if(Bt){if(Bt.destroyedReason()){_.debug(`Socket was closed but the connection had already been destroyed. Reason: ${Bt.destroyedReason()}`);return}Bt.destroy(nn)}});const Jt=function(Bt,sn){return vt.connections.has(Bt.id)?vt.connections.get(Bt.id):(Bt=g.fromHash(Bt),(sn||vt.connection&&Bt.id!==vt.connection.id)&&(vt.connections.add(Bt),Nt.triggerConnectionCreated(Bt)),Object.keys(Tt).forEach(qt=>{const Kt=Tt[qt];if(Kt&&Bt.id===Kt.connection.id){it(Kt,vt),delete Tt[Kt.id];const $t={debug:sn?"connection came in session#read":"connection came in connection#created",streamId:Kt.id,connectionId:Bt.id};vt.logEvent("streamCreated","warning",$t)}}),Bt)};Ut.on("session#read",(nn,Bt)=>{let sn;const qt={};qt.streams=[],qt.connections=[],qt.archives=[],nn.connection.forEach(Kt=>{sn=Jt(Kt,!0),qt.connections.push(sn)}),nn.stream.forEach(Kt=>{qt.streams.push(it(Kt,vt))}),(nn.archive||nn.archives).forEach(Kt=>{qt.archives.push(lt(Kt,vt))}),Ut.triggerCallback(Bt,null,qt),Xt=!0,Nt.triggerSessionConnected(vt.connections)}),Ut.on("session#update",nn=>{if(nn.reason!=="mute"){_.debug("session#update that handle this reason is not currently implemented");return}const Bt=nn.active===!0;vt._.forceMute({active:Bt}),Bt?vt._.enableMuteOnEntry():vt._.disableMuteOnEntry()}),Ut.on("session#muted",()=>{vt._.enableMuteOnEntry(),vt._.forceMute({active:!0})}),Ut.on("connection#created",nn=>{Jt(nn)}),Ut.on("connection#deleted",(nn,Bt)=>{if(nn=vt.connections.get(nn),!nn){_.warn("A connection was deleted that we do not know about");return}nn.destroy(Bt)}),Ut.on("stream#created",(nn,Bt)=>{const sn=nn.id,qt=nn.sourceStreamId,Kt=nn.connection;let $t;if(Ct){if(Kt==null||Kt.id==null){vt.logEvent("SessionDispatcher:stream#created","Event",{connection:Kt,info:"Stream did not contain a connection object. Event ignored"});return}Jt(Kt)}const Sn=nn.connectionId||Kt.id;if(vt.connections.has(Sn))$t=it(nn,vt);else{Tt[sn]=nn;const On={debug:"eventOrderError -- streamCreated event before connectionCreated",streamId:sn,sourceStreamId:ct(qt)};vt.logEvent("streamCreated","warning",On)}$t?($t.publisher&&$t.publisher.setStream($t),Ut.triggerCallback(Bt,null,$t)):vt.sessionInfo.isAdaptiveEnabled&&qt==="P2P"&&$.subscribers.where({streamId:sn}).forEach(On=>{On._.startRoutedToRelayedTransition()})}),Ut.on("stream#deleted",(nn,Bt,sn)=>{const qt=vt.streams.get(nn),Kt=sn.sourceStreamId,$t=$.subscribers,On=vt.sessionInfo.isAdaptiveEnabled&&Kt==="P2P";!qt&&!On||(On?$t.where({streamId:nn}).forEach(tn=>{tn._.startRelayedToRoutedTransition()}):qt.destroy(Bt))}),Ut.on("stream#updated",(nn,Bt)=>{const sn=vt.streams.get(nn);if(!sn){_.error(`A stream does not exist with the id of ${nn}, for stream#updated message!`);return}sn._.update(Bt)}),Ut.on("stream#update",(nn,Bt)=>{const sn=vt.streams.get(nn),qt=Bt.reason,Kt=Bt.active;if(!sn){_.error(`A stream does not exist with the id of ${nn}, for stream#updated message!`);return}if(qt!=="mute"){_.debug("stream#update that handle this reason is not currently implemented");return}Kt&&sn._.forceMute(Bt)}),Ut.on("streamChannel#updated",(nn,Bt,sn)=>{let qt;if(!(nn&&(qt=vt.streams.get(nn)))){_.error("Unable to determine streamId, or the stream does not exist, for streamChannel message!");return}qt._.updateChannel(Bt,sn)});const zt=(nn,Bt,sn,qt)=>{let Kt,$t;const Sn={streamId:Bt},On=$.subscribers,tn=$.publishers;switch(qt.params.subscriber?Kt={widgetId:qt.params.subscriber}:Kt=Sn,nn){case"offer":$t=[].concat(On.where(Kt),tn.where(Sn)).slice(0,1);break;case"answer":case"pranswer":$t=[].concat(tn.where(Sn),On.where(Kt)).slice(0,1);break;case"generateoffer":case"unsubscribe":$t=tn.where(Sn);break;case"candidate":$t=[].concat(On.where(Kt),tn.where(Sn));break;default:_.debug(`jsep#${nn} is not currently implemented`);return}if($t.length===0)return;let bn=vt.connections.get(sn);!bn&&sn.match(/^symphony\./)&&(bn=g.fromHash({id:sn,creationTime:Math.floor(h())}),vt.connections.add(bn)),$t.forEach(function(){var dn=(0,c.default)(a.default.mark(function Mn($n){return a.default.wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return Fn.prev=0,Fn.next=3,$n.processMessage(nn,sn,qt);case 3:Fn.next=8;break;case 5:Fn.prev=5,Fn.t0=Fn.catch(0),_.error("Error occurred during processMessage",Fn.t0);case 8:case"end":return Fn.stop()}},Mn,null,[[0,5]])}));return function(Mn){return dn.apply(this,arguments)}}())};return Ut.on("jsep#offer",zt.bind(null,"offer")),Ut.on("jsep#answer",zt.bind(null,"answer")),Ut.on("jsep#pranswer",zt.bind(null,"pranswer")),Ut.on("jsep#generateoffer",zt.bind(null,"generateoffer")),Ut.on("jsep#unsubscribe",zt.bind(null,"unsubscribe")),Ut.on("jsep#candidate",zt.bind(null,"candidate")),Ut.on("subscriberChannel#updated",(nn,Bt,sn)=>{if(!nn||!vt.streams.has(nn)){_.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#updated message!");return}vt.streams.get(nn)._.updateChannel(Bt,sn)}),Ut.on("subscriberChannel#update",(nn,Bt,sn)=>{if(!Bt||!vt.streams.has(Bt)){_.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#update message!");return}if(!$.subscribers.has(nn)){_.error("Unable to determine subscriberId, or the subscriber does not exist, for subscriberChannel#update message!");return}$.subscribers.get(nn).disableVideo(sn.active)}),Ut.on("signal",(nn,Bt)=>{if(Ct){let $t=Bt.connection||Bt.fromConnection;($t==null||$t.id==null)&&($t=dt(nn),vt.logEvent("SessionDispatcher:Signal","Event",{fromAddress:nn,connection:Bt.connection,fromConnection:Bt.fromConnection,info:"Signal did not contain a connection object. One has been constructed",constructedConnection:$t})),Jt($t)}const sn=Bt.type,qt=Bt.data,Kt=vt.connections.get(nn);vt.connection&&nn===vt.connection.connectionId?Xt?vt._.dispatchSignal(Kt,sn,qt):Nt.enqueue("sessionConnected","signal",nn,sn,qt):vt.connections.get(nn)?vt._.dispatchSignal(Kt,sn,qt):nn===""?vt._.dispatchSignal(null,sn,qt):Nt.enqueue(`connectionCreated${nn}`,"signal",nn,sn,qt)}),Ut.on("caption",(nn,Bt)=>{vt._.dispatchCaption(nn,Bt)}),Ut.on("archive#created",nn=>{lt(nn,vt)}),Ut.on("archive#updated",(nn,Bt)=>{const sn=vt.archives.get(nn);if(!sn){_.error(`An archive does not exist with the id of ${nn}, for archive#updated message!`);return}sn._.update(Bt)}),Ut.on("source#create",(nn,Bt,sn)=>{const qt=ct(nn);vt.logEvent("SessionDispatcher:source#create","Event",{sourceStreamId:qt,streamId:Bt,reason:sn}),_.debug(`Received a request from RUMOR to start a transition to ${nn} for the stream ID ${Bt} with the reason: ${sn}`),$.publishers.where({streamId:Bt}).forEach(Kt=>{Kt._.startRoutedToRelayedTransition()})}),Ut.on("source#delete",(nn,Bt,sn)=>{vt.logEvent("SessionDispatcher:source#delete","Event",{sourceStreamId:ct(nn),streamId:Bt,reason:sn}),_.debug(`Received a request from RUMOR to start a transition from P2P to MANTIS for the stream ID ${Bt} with the reason: ${sn}`),$.publishers.where({streamId:Bt}).forEach(qt=>{qt._.startRelayedToRoutedTransition()})}),Ut}},function(e,s,i){const o=i(23)(),a=i(6);e.exports=function(d,h,g){this.id=d,this.name=h,this.status=g,this._={},a(this),this._.update=b=>{Object.keys(b).forEach(j=>{const _=this[j];this[j]=b[j];const $=new o.ArchiveUpdatedEvent(this,j,_,this[j]);this.dispatchEvent($)})},this.destroy=()=>{}}},function(e,s,i){const o=i(24)(),a=o.getAudioOutputMediaDevices;e.exports=()=>a()},function(e,s,i){const o=i(24)(),a=o.getActiveAudioOutputDevice;e.exports=()=>a()},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5));const h=i(21),g=i(106),b=g.setCurrentAudioOutputDeviceId,j=i(333),_=i(24)(),$=_.getDefaultAudioOutputDeviceId,_e=_.getAudioOutputMediaDevices,et=i(295),ct=i(20),dt=new ct,nt=(Tt,Rt)=>{dt.logEvent({action:"updateSubscribersSinkId",variation:Tt,payload:Rt})},it=Tt=>{const Rt=h.subscribers.map(vt=>vt._.setSinkId(Tt));return o.all(Rt)},st=function(){var Tt=(0,d.default)(c.default.mark(function Rt(vt){return c.default.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.next=2,et();case 2:return bt.prev=2,nt("Attempt",{deviceId:vt}),bt.next=6,it(vt);case 6:nt("Success",{deviceId:vt}),bt.next=13;break;case 9:throw bt.prev=9,bt.t0=bt.catch(2),nt("Failure",{deviceId:vt,error:bt.t0==null?void 0:bt.t0.message}),bt.t0;case 13:case"end":return bt.stop()}},Rt,null,[[2,9]])}));return function(vt){return Tt.apply(this,arguments)}}(),lt=function(){var Tt=(0,d.default)(c.default.mark(function Rt(){var vt,Et;return c.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.next=2,_e();case 2:return vt=Ct.sent,Et=$(vt),Ct.prev=4,Ct.next=7,st(Et);case 7:b(Et),Ct.next=12;break;case 10:Ct.prev=10,Ct.t0=Ct.catch(4);case 12:case"end":return Ct.stop()}},Rt,null,[[4,10]])}));return function(){return Tt.apply(this,arguments)}}(),ht=function(){var Tt=(0,d.default)(c.default.mark(function Rt(){var vt;return c.default.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.next=2,j();case 2:return vt=bt.sent,bt.prev=3,bt.next=6,st(vt.deviceId);case 6:bt.next=12;break;case 8:return bt.prev=8,bt.t0=bt.catch(3),bt.next=12,lt();case 12:case"end":return bt.stop()}},Rt,null,[[3,8]])}));return function(){return Tt.apply(this,arguments)}}();e.exports=function(){var Tt=(0,d.default)(c.default.mark(function Rt(vt){return c.default.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.prev=0,nt("Attempt",{deviceId:vt}),bt.next=4,it(vt);case 4:nt("Success",{deviceId:vt}),b(vt),bt.next=14;break;case 8:return bt.prev=8,bt.t0=bt.catch(0),nt("Failure",{deviceId:vt,error:bt.t0==null?void 0:bt.t0.message}),bt.next=13,ht();case 13:throw bt.t0;case 14:case"end":return bt.stop()}},Rt,null,[[0,8]])}));return function(Rt){return Tt.apply(this,arguments)}}()}).call(this,i(0))},function(e,s,i){i(336);const o=i(37),a=i(26),c=i(6),d=i(128),h=i(34)(),g=i(20),b=i(248),j=i(563),_=i(564),$=h.onlyLocal(),_e={};_e.noConflict=i(565)(),(typeof window!==void 0?window:commonjsGlobal).OT=_e,e.exports=_e,(()=>{let oo=_e;Object.defineProperty(typeof window!==void 0?window:commonjsGlobal,"TB",{get:()=>(oo===_e&&console.warn("window.TB is deprecated, and will be removed in the future. Please access via window.OT"),oo),set:Xo=>{oo=Xo},configurable:!0})})();const et=i(143)(typeof window!==void 0?window:commonjsGlobal),ct=i(8),dt=i(70),nt=i(144),it=i(251),st=i(145),lt=i(146),ht=i(252),Tt=i(147),Rt=i(7),vt=i(10),Et=i(253),bt=i(240),Ct=i(1)("OT"),Ut=i(121),Xt=i(592),Nt=i(22),Jt=i(102),zt=Jt.parseIceServers,nn=i(266),Bt=i(21),sn=i(150),qt=i(152),Kt=i(153),$t=i(71)({global:et}),Sn=i(13)({}),On=i(158)(),tn=i(280)({otError:Sn}),bn=i(281)(),dn=i(287)({global:et}),Mn=i(24)({getNativeEnumerateDevices:dn}),$n=i(23)(),Un=i(160)(),Fn=i(647)({otError:Sn,global:et}),cr=i(161)({chromeExtensionHelper:tn,otError:Sn}),or=i(652)({deviceHelpers:Mn,generateConstraintInfo:Et,getUserMediaHelper:Fn,global:et,OTHelpers:ct,screenSharing:cr}),wr=i(655)({otError:Sn,processPubOptions:or}),Er=i(162)({otError:Sn}),Zr=i(73),po=i(292)(),lr=i(293)({otError:Sn}),pr=i(294)({global:et,videoElementErrorMap:lr}),Vn=i(163)({global:et}),In=i(296)({PeerConnection:$t,setCertificates:Vn}),zn=i(300)({PeerConnection:$t,setCertificates:Vn}),vr=i(302)(),Jr=i(675)({otError:Sn}),kn=i(109)({NativeVideoElementWrapper:pr}),ir=i(151)(),gr=i(164)({VideoElementFacade:kn}),Br=i(305)({interpretPeerConnectionError:Er,otError:Sn,SubscriberPeerConnection:zn,WidgetView:gr}),vo=i(168)({APIKEY:dt,createChromeMixin:bn,deviceHelpers:Mn,EnvironmentLoader:Tt,Errors:Rt,Events:$n,ExceptionCodes:vt,calculateCapableSimulcastStreams:it,global:et,interpretPeerConnectionError:Er,IntervalRunner:Zr,Microphone:po,otError:Sn,OTErrorClass:Nt,OTHelpers:ct,parseIceServers:zt,processPubOptions:or,PUBLISH_MAX_DELAY:nn,PublisherPeerConnection:In,PublishingState:vr,StreamChannel:sn,systemRequirements:Kt,VideoOrientation:ir,WidgetView:gr}),eo=i(319)({otError:Sn,Publisher:vo}),io=i(320)({global:et,initPublisher:eo,otError:Sn,Publisher:vo,Subscriber:Br}),to=i(767)({Session:io});c(_e);const Wr=i(768),To=i(771),no=i(772);b(_e,"$",{name:"OT.$",getMessage:"Please use an external library like jQuery to select elements from the page.",value:ct}),_e.APIKEY=dt.value,_e.AnalyserAudioLevelSampler=lt,_e.Archive=i(331),_e.ArchiveEvent=$n.ArchiveEvent,_e.ArchiveUpdatedEvent=$n.ArchiveUpdatedEvent,_e.AudioLevelTransformer=nt,_e.AudioLevelUpdatedEvent=$n.AudioLevelUpdatedEvent,_e.Capabilities=i(169),_e.Chrome=st,_e.Connection=i(172),_e.ConnectionCapabilities=_e.Connection.Capabilities,_e.ConnectionEvent=$n.ConnectionEvent,Object.keys(Ut).forEach(oo=>{_e[oo.toUpperCase()]=Ut[oo].priority}),_e.NONE=0,_e.debug=Ct.debug,_e.error=Ct.error,_e.info=Ct.info,_e.log=Ct.log,_e.warn=Ct.warn,_e.DestroyedEvent=$n.DestroyedEvent,_e.EnvLoadedEvent=$n.EnvLoadedEvent,_e.Error=Nt,_e.Error.on(a.EXCEPTION,oo=>{if(oo.target===_e.Error){const Xo=o(oo);Xo.target=_e,_e.dispatchEvent(Xo)}else _e.dispatchEvent(oo)}),_e.Event=d,_e.ExceptionCodes=vt,_e.ExceptionEvent=$n.ExceptionEvent,_e.getDevices=i(773),_e.getAudioOutputDevices=i(332),_e.getActiveAudioOutputDevice=i(333),_e.setAudioOutputDevice=i(774)(),_e.GetAudioLevelSampler=ht,_e.HAS_REQUIREMENTS=1,_e.IntervalRunner=Zr,_e.IssueReportedEvent=$n.IssueReportedEvent,_e.MediaStoppedEvent=$n.MediaStoppedEvent,_e.Microphone=po,_e.NOT_HAS_REQUIREMENTS=0,_e.PeerConnection=$t,_e.PeerConnection.QOS=i(278).default,_e.Publisher=vo,_e.PublisherPeerConnection=In,_e.PublishingState=vr,_e.MuteForcedEvent=$n.MuteForcedEvent,_e.Session=io,_e.SessionConnectEvent=$n.SessionConnectEvent,_e.SessionDisconnectEvent=$n.SessionDisconnectEvent,_e.SessionDispatcher=i(330),_e.Signal=i(328),_e.SignalEvent=$n.SignalEvent,_e.Stream=i(170),_e.StreamChannel=sn,_e.StreamEvent=$n.StreamEvent,_e.StreamPropertyChangedEvent=$n.StreamPropertyChangedEvent,_e.StreamUpdatedEvent=$n.StreamUpdatedEvent,_e.StylableComponent=qt,_e.Subscriber=Br,_e.SubscriberPeerConnection=zn,_e.SubscribingState=i(308),_e.VideoDimensionsChangedEvent=$n.VideoDimensionsChangedEvent,_e.VideoDisableWarningEvent=$n.VideoDisableWarningEvent,_e.VideoElement=kn,_e.VideoEnabledChangedEvent=$n.VideoEnabledChangedEvent,_e.VideoOrientation=ir,_e.WidgetView=gr,_e.getSupportedCodecs=Wr,_e.hasMediaProcessorSupport=To,_e.hasEndToEndEncryptionSupport=no,_e._={AnalyticsHelper:g,getClientGuid:bt.get,StaticConfig:h},Object.defineProperty(_e,"version",{value:$.version});const yo={},Pr=oo=>_.includes(oo);b(yo,"version",{value:$.version,name:"OT.properties.version",getWarning:"Please use OT.version instead",warnOnSet:!0,setWarning:"Mutating version has no effect"}),j.forEach(oo=>{let Xo,Zs;if(Array.isArray(oo)){const fs=oo[0],Ys=oo[1];Zs=fs,Xo=$[Ys]||Ys}else Xo=$[oo],Zs=oo;const Pl=Pr(Zs);b(yo,Zs,{value:Xo,name:`OT.properties.${Zs}`,warnOnSet:!0,canSet:Pl,setWarning:Pl?`Mutating ${Zs} can cause side effects`:`Mutating ${Zs} has no effect`})}),_e.properties=yo,_e.audioContext=On,_e.checkScreenSharingCapability=cr.checkCapability,_e.checkSystemRequirements=Kt.check,_e.components={},_e.generateSimpleStateMachine=Un,_e.getErrorTitleByCode=Nt.getTitleByCode,_e.getLogs=Ct.getLogs,_e.getStatsAdpater=i(274),_e.getStatsHelpers=i(75),_e.getUserMedia=wr,_e.handleJsException=Nt.handleJsException,_e.initPublisher=eo,_e.setProxyUrl=i(101).setProxyUrl,_e.initSession=function(oo,Xo,Zs){return Xo==null&&(Xo=oo,oo=null),dt.value.length===0&&oo&&(dt.value=oo,_e.APIKEY=oo),to(oo,Xo,Zs)};const fu=oo=>`${oo} is deprecated and will be removed in a future version of OpenTok`,Zo=(oo,Xo)=>()=>(console.warn(fu(oo)),Xo);Object.defineProperties(_e,{isUnloaded:{get:Zo("OT.isUnloaded",Tt.isUnloaded)},onLoad:{get:Zo("OT.onLoad",Tt.onLoad)},onUnload:{get:Zo("OT.onUnload",Tt.onUnload)},overrideGuidStorage:{get:Zo("OT.overrideGuidStorage",bt.override)}}),_e.pickScreenSharingHelper=cr.pickHelper,_e.publishers=Bt.publishers,_e.registerScreenSharingExtension=cr.registerExtension,_e.registerScreenSharingExtensionHelper=cr.registerExtensionHelper,_e.reportIssue=Jr,_e.sessions=Bt.sessions,_e.setLogLevel=Xt,_e.shouldLog=Ct.shouldLog,_e.subscribers=Bt.subscribers,_e.unblockAudio=i(166),_e.upgradeSystemRequirements=Kt.upgrade,Tt.onUnload(()=>{Bt.publishers.destroy(),Bt.subscribers.destroy(),Bt.sessions.destroy("unloaded")}),i(775)()},function(e,s,i){var o=i(337);typeof o=="string"&&(o=[[e.i,o,""]]);var a,c={hmr:!0};c.transform=a,c.insertInto=void 0,i(351)(o,c),o.locals&&(e.exports=o.locals)},function(e,s,i){s=e.exports=i(338)(!1);var o=i(339),a=o(i(340)),c=o(i(341)),d=o(i(342)),h=o(i(343)),g=o(i(344)),b=o(i(345)),j=o(i(346)),_=o(i(347)),$=o(i(348)),_e=o(i(349)),et=o(i(350));s.push([e.i,`/*!
 * Copyright (c) 2017 TokBox, Inc.
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 */

/**
 * OT Base styles
 */

/* Root OT object, this is where our CSS reset happens */
.OT_root,
.OT_root * {
  color: #ffffff;
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font-family: Arial, Helvetica, sans-serif;
  vertical-align: baseline;
}

/**
 * Specific Element Reset
 */

.OT_root h1,
.OT_root h2,
.OT_root h3,
.OT_root h4,
.OT_root h5,
.OT_root h6 {
  color: #ffffff;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 100%;
  font-weight: bold;
}

.OT_root header {

}

.OT_root footer {

}

.OT_root div {

}

.OT_root section {

}

.OT_root video {

}

.OT_root button {

}

.OT_root strong {
  font-weight: bold;
}

.OT_root em {
  font-style: italic;
}

.OT_root a,
.OT_root a:link,
.OT_root a:visited,
.OT_root a:hover,
.OT_root a:active {
  font-family: Arial, Helvetica, sans-serif;
}

.OT_root ul, .OT_root ol {
  margin: 1em 1em 1em 2em;
}

.OT_root ol {
  list-style: decimal outside;
}

.OT_root ul {
  list-style: disc outside;
}

.OT_root dl {
  margin: 4px;
}

.OT_root dl dt,
.OT_root dl dd {
  float: left;
  margin: 0;
  padding: 0;
}

.OT_root dl dt {
  clear: left;
  text-align: right;
  width: 50px;
}

.OT_root dl dd {
  margin-left: 10px;
}

.OT_root img {
  border: 0 none;
}

/* Modal dialog styles */

/* Modal dialog styles */

.OT_dialog-centering {
  display: table;
  width: 100%;
  height: 100%;
}

.OT_dialog-centering-child {
  display: table-cell;
  vertical-align: middle;
}

.OT_dialog {
  position: relative;

  box-sizing: border-box;
  max-width: 576px;
  margin-right: auto;
  margin-left: auto;
  padding: 36px;
  text-align: center; /* centers all the inline content */

  background-color: #363636;
  color: #fff;
  box-shadow: 2px 4px 6px #999;
  font-family: 'Didact Gothic', sans-serif;
  font-size: 13px;
  line-height: 1.4;
}

.OT_dialog * {
  font-family: inherit;
  box-sizing: inherit;
}

.OT_closeButton {
  color: #999999;
  cursor: pointer;
  font-size: 32px;
  line-height: 36px;
  position: absolute;
  right: 18px;
  top: 0;
}

.OT_dialog-messages {
  text-align: center;
}

.OT_dialog-messages-main {
  margin-bottom: 36px;
  line-height: 36px;

  font-weight: 300;
  font-size: 24px;
}

.OT_dialog-messages-minor {
  margin-bottom: 18px;

  font-size: 13px;
  line-height: 18px;
  color: #A4A4A4;
}

.OT_dialog-messages-minor strong {
  color: #ffffff;
}

.OT_dialog-actions-card {
  display: inline-block;
}

.OT_dialog-button-title {
  margin-bottom: 18px;
  line-height: 18px;

  font-weight: 300;
  text-align: center;
  font-size: 14px;
  color: #999999;
}
.OT_dialog-button-title label {
  color: #999999;
}

.OT_dialog-button-title a,
.OT_dialog-button-title a:link,
.OT_dialog-button-title a:active {
  color: #02A1DE;
}

.OT_dialog-button-title strong {
  color: #ffffff;
  font-weight: 100;
  display: block;
}

.OT_dialog-button {
  display: inline-block;

  margin-bottom: 18px;
  padding: 0 1em;

  background-color: #1CA3DC;
  text-align: center;
  cursor: pointer;
}

.OT_dialog-button:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.OT_dialog-button-large {
  line-height: 36px;
  padding-top: 9px;
  padding-bottom: 9px;

  font-weight: 100;
  font-size: 24px;
}

.OT_dialog-button-small {
  line-height: 18px;
  padding-top: 9px;
  padding-bottom: 9px;

  background-color: #444444;
  color: #999999;
  font-size: 16px;
}

.OT_dialog-progress-bar {
  display: inline-block; /* prevents margin collapse */
  width: 100%;
  margin-top: 5px;
  margin-bottom: 41px;

  border: 1px solid #4E4E4E;
  height: 8px;
}

.OT_dialog-progress-bar-fill {
  height: 100%;

  background-color: #29A4DA;
}

/* Helpers */

.OT_centered {
  position: fixed;
  left: 50%;
  top: 50%;
  margin: 0;
}

.OT_dialog-hidden {
  display: none;
}

.OT_dialog-button-block {
  display: block;
}

.OT_dialog-no-natural-margin {
  margin-bottom: 0;
}

/* Publisher and Subscriber styles */

.OT_publisher, .OT_subscriber {
  position: relative;
  min-width: 48px;
  min-height: 48px;
}

.OT_publisher .OT_video-element,
.OT_subscriber .OT_video-element {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;

  transform-origin: 0 0;
}

/* Styles that are applied when the video element should be mirrored */
.OT_publisher.OT_mirrored .OT_video-element {
  transform: scale(-1, 1);
  transform-origin: 50% 50%;
}

.OT_subscriber_error {
  background-color: #000;
  color: #fff;
  text-align: center;
}

.OT_subscriber_error > p {
  padding: 20px;
}

/* The publisher/subscriber name/mute background */
.OT_publisher .OT_bar,
.OT_subscriber .OT_bar,
.OT_publisher .OT_name,
.OT_subscriber .OT_name,
.OT_publisher .OT_archiving,
.OT_subscriber .OT_archiving,
.OT_publisher .OT_archiving-status,
.OT_subscriber .OT_archiving-status,
.OT_publisher .OT_archiving-light-box,
.OT_subscriber .OT_archiving-light-box {
  -ms-box-sizing: border-box;
  box-sizing: border-box;
  top: 0;
  left: 0;
  right: 0;
  display: block;
  height: 34px;
  position: absolute;
}

.OT_publisher .OT_bar,
.OT_subscriber .OT_bar {
  background: rgba(0, 0, 0, 0.4);
}

.OT_publisher .OT_edge-bar-item,
.OT_subscriber .OT_edge-bar-item {
  z-index: 1; /* required to get audio level meter underneath */
}

/* The publisher/subscriber name panel/archiving status bar */
.OT_publisher .OT_name,
.OT_subscriber .OT_name {
  background-color: transparent;
  color: #ffffff;
  font-size: 15px;
  line-height: 34px;
  font-weight: normal;
  padding: 0 4px 0 36px;
  letter-spacing: normal;
}

.OT_publisher .OT_archiving-status,
.OT_subscriber .OT_archiving-status {
  background: rgba(0, 0, 0, 0.4);
  top: auto;
  bottom: 0;
  left: 34px;
  padding: 0 4px;
  color: rgba(255, 255, 255, 0.8);
  font-size: 15px;
  line-height: 34px;
  font-weight: normal;
  letter-spacing: normal;
}

.OT_micro .OT_archiving-status,
.OT_micro:hover .OT_archiving-status,
.OT_mini .OT_archiving-status,
.OT_mini:hover .OT_archiving-status {
  display: none;
}

.OT_publisher .OT_archiving-light-box,
.OT_subscriber .OT_archiving-light-box {
  background: rgba(0, 0, 0, 0.4);
  top: auto;
  bottom: 0;
  right: auto;
  width: 34px;
  height: 34px;
}

.OT_archiving-light {
  width: 7px;
  height: 7px;
  border-radius: 30px;
  position: absolute;
  top: 14px;
  left: 14px;
  background-color: #575757;
  box-shadow: 0 0 5px 1px #575757;
}

.OT_archiving-light.OT_active {
  background-color: #970d13;
  -webkit-animation: OT_pulse 1.3s ease-in;
  -moz-animation: OT_pulse 1.3s ease-in;
  -webkit-animation: OT_pulse 1.3s ease-in;
  -webkit-animation-iteration-count: infinite;
  -moz-animation-iteration-count: infinite;
  -webkit-animation-iteration-count: infinite;
}

.OT_mini .OT_bar,
.OT_bar.OT_mode-mini,
.OT_bar.OT_mode-mini-auto {
  bottom: 0;
  height: auto;
}

.OT_mini .OT_name.OT_mode-off,
.OT_mini .OT_name.OT_mode-on,
.OT_mini .OT_name.OT_mode-auto,
.OT_mini:hover .OT_name.OT_mode-auto {
  display: none;
}

.OT_publisher .OT_name,
.OT_subscriber .OT_name {
    left: 10px;
    right: 37px;
    height: 34px;
    padding-left: 0;
}

.OT_publisher .OT_mute,
.OT_subscriber .OT_mute {
    border: none;
    cursor: pointer;
    display: block;
    position: absolute;
    text-align: center;
    text-indent: -9999em;
    background-color: transparent;
    background-repeat: no-repeat;
}

.OT_publisher .OT_mute,
.OT_subscriber .OT_mute {
  right: 0;
  top: 0;
  border-left: 1px solid rgba(255, 255, 255, 0.2);
  height: 36px;
  width: 37px;
}

.OT_mini .OT_mute,
.OT_publisher.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold,
.OT_subscriber.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold {
  top: 50%;
  left: 50%;
  right: auto;
  margin-top: -18px;
  margin-left: -18.5px;
  border-left: none;
}

.OT_publisher .OT_mute {
  background-image: url(`+a+`);
  background-position: 9px 5px;
}

.OT_publisher .OT_mute.OT_active {
  background-image: url(`+c+`);
  background-position: 9px 4px;
}

.OT_subscriber .OT_mute {
  background-image: url(`+d+`);
  background-position: 8px 7px;
}

.OT_subscriber .OT_mute.OT_active {
  background-image: url(`+h+`);
  background-position: 7px 7px;
}

/**
 * Styles for display modes
 *
 * Note: It's important that these completely control the display and opacity
 * attributes, no other selectors should atempt to change them.
 */

/* Default display mode transitions for various chrome elements */
.OT_publisher .OT_edge-bar-item,
.OT_subscriber .OT_edge-bar-item {
  transition-property: top, bottom, opacity;
  transition-duration: 0.5s;
  transition-timing-function: ease-in;
}

.OT_publisher .OT_edge-bar-item.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_mode-off,
.OT_publisher .OT_edge-bar-item.OT_mode-auto,
.OT_subscriber .OT_edge-bar-item.OT_mode-auto,
.OT_publisher .OT_edge-bar-item.OT_mode-mini-auto,
.OT_subscriber .OT_edge-bar-item.OT_mode-mini-auto {
  top: -25px;
  opacity: 0;
}

.OT_publisher .OT_edge-bar-item.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_mode-off {
  display: none;
}

.OT_mini .OT_mute.OT_mode-auto,
.OT_publisher .OT_mute.OT_mode-mini-auto,
.OT_subscriber .OT_mute.OT_mode-mini-auto {
  top: 50%;
}

.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,
.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto {
  top: auto;
  bottom: -25px;
}

.OT_publisher .OT_edge-bar-item.OT_mode-on,
.OT_subscriber .OT_edge-bar-item.OT_mode-on,
.OT_publisher .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,
.OT_subscriber .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,
.OT_publisher:hover .OT_edge-bar-item.OT_mode-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_mode-auto,
.OT_publisher:hover .OT_edge-bar-item.OT_mode-mini-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_mode-mini-auto {
  top: 0;
  opacity: 1;
}

.OT_mini .OT_mute.OT_mode-on,
.OT_mini:hover .OT_mute.OT_mode-auto,
.OT_mute.OT_mode-mini,
.OT_root:hover .OT_mute.OT_mode-mini-auto {
  top: 50%;
}

.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,
.OT_publisher:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto {
  top: auto;
  bottom: 0;
  opacity: 1;
}


/* Contains the video element, used to fix video letter-boxing */
.OT_widget-container {
  position: absolute;
  background: linear-gradient(60.08deg, #333333 0%, #1A1A1A 100%);
  overflow: hidden;
}

.OT_hidden-audio {
  position: absolute !important;
  height: 1px !important;
  width: 1px !important;
}

/* Load animation */
.OT_root .OT_video-loading {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  display: none;

  background-color: rgba(0, 0, 0, .75);
}

.OT_root .OT_video-loading .OT_video-loading-spinner {
  background: url(`+g+`) no-repeat;
  position: absolute;
  width: 32px;
  height: 32px;
  left: 50%;
  top: 50%;
  margin-left: -16px;
  margin-top: -16px;
  animation: OT_spin 2s linear infinite;
}
@keyframes OT_spin {
  100% {
    transform: rotate(360deg);
  }
}

.OT_publisher.OT_loading .OT_video-loading,
.OT_subscriber.OT_loading .OT_video-loading {
  display: block;
}

.OT_publisher.OT_loading .OT_video-element,
.OT_subscriber.OT_loading .OT_video-element {
  /*display: none;*/
}

.OT_video-centering {
  display: table;
  width: 100%;
  height: 100%;
}

.OT_video-container {
  display: table-cell;
  vertical-align: middle;
}

.OT_video-poster {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  display: none;

  opacity: 1.0;

  background-repeat: no-repeat;
  background-image: url(`+b+`);
  background-size: auto 55%;
}

.OT_fit-mode-cover .OT_video-element {
  object-fit: cover;
}

/* Workaround for iOS freezing issue when cropping videos */
/* https://bugs.webkit.org/show_bug.cgi?id=176439 */
@media only screen
  and (orientation: portrait) {
  .OT_subscriber.OT_ForceContain.OT_fit-mode-cover .OT_video-element {
    object-fit: contain !important;
  }
}

.OT_fit-mode-contain .OT_video-element {
  object-fit: contain;
}

.OT_fit-mode-cover .OT_video-poster {
  background-position: center;
}

.OT_fit-mode-contain .OT_video-poster {
  background-position: center;
}

.OT_audio-level-meter {
  position: absolute;
  width: 25%;
  max-width: 224px;
  min-width: 21px;
  top: 0;
  right: 0;
  overflow: hidden;
}

.OT_audio-level-meter:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_audio-level-meter__audio-only-img {
  position: absolute;
  top: 22%;
  right: 15%;
  width: 40%;

  opacity: .7;

  background: url(`+j+`) no-repeat center;
}

.OT_audio-level-meter__audio-only-img:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_audio-level-meter__value {
  will-change: transform;
  position: absolute;
  top: -100%;
  right: -100%;
  width: 200%;
  height: 200%;
  transform: scale(0);
  border-radius: 50%;
  background-image: radial-gradient(circle, rgba(151, 206, 0, 1) 0%, rgba(151, 206, 0, 0) 100%);
}

.OT_audio-level-meter.OT_mode-off {
    display: none;
}

.OT_audio-level-meter.OT_mode-on,
.OT_audio-only .OT_audio-level-meter.OT_mode-auto {
  display: block;
}

.OT_audio-only.OT_publisher .OT_video-element,
.OT_audio-only.OT_subscriber .OT_video-element {
  display: none;
}


.OT_video-disabled-indicator {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: bottom right;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 3px;
  right: 3px;
}

.OT_video-disabled {
  background-image: url(`+_+`);
  background-size: 33px auto;
}

.OT_video-disabled-warning {
  background-image: url(`+$+`);
  background-size: 33px auto;
}

.OT_video-disabled-indicator.OT_active {
  display: block;
}

.OT_audio-blocked-indicator {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: center;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

.OT_audio-blocked {
  background-image: url(`+_e+`);
  background-size: 90px auto;
}

.OT_container-audio-blocked {
  cursor: pointer;
}

.OT_container-audio-blocked.OT_mini .OT_edge-bar-item {
  display: none;
}

.OT_container-audio-blocked .OT_mute {
  display: none;
}

.OT_audio-blocked-indicator.OT_active {
  display: block;
}

.OT_video-unsupported {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url(`+et+`);
  background-size: 58px auto;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  margin-top: -30px;
}

.OT_video-unsupported-bar {
  display: none;
  position: absolute;
  width: 192%; /* copy the size of the audio meter bar for symmetry */
  height: 192%;
  top: -96% /* half of the size */;
  left: -96%;
  border-radius: 50%;

  background-color: rgba(0, 0, 0, .8);
}

.OT_video-unsupported-img {
  display: none;
  position: absolute;
  top: 11%;
  left: 15%;
  width: 70%;
  opacity: .7;
  background-image: url(`+et+`);
  background-repeat: no-repeat;
  background-position: center;
  background-size: 100% auto;
}

.OT_video-unsupported-img:before {
  /* makes the height of the container 93% of its width (90/97 px) */
  content: '';
  display: block;
  padding-top: 93%;
}

.OT_video-unsupported-text {
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  height: 100%;
  margin-top: 40px;
}

.OT_video-unsupported.OT_active {
  display: block;
}

.OT_mini .OT_video-unsupported,
.OT_micro .OT_video-unsupported {
  position: absolute;
  width: 25%;
  max-width: 224px;
  min-width: 21px;
  top: 0;
  left: 0;
  overflow: hidden;
  background: none;
  bottom: auto;
  right: auto;
  margin: auto;
}

.OT_mini .OT_video-unsupported:before,
.OT_micro .OT_video-unsupported:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_mini .OT_video-unsupported-bar,
.OT_micro .OT_video-unsupported-bar,
.OT_mini .OT_video-unsupported-img,
.OT_micro .OT_video-unsupported-img {
  display: block;
}

.OT_mini .OT_video-unsupported-text,
.OT_micro .OT_video-unsupported-text {
  display: none;
}

.OT_hide-forced {
  display: none;
}

.OT_ModalDialog {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  z-index: 1000;
  background-color: rgba(0, 0, 0, 0.2);
}

#tb_alert {
  position: fixed;
  width: 570px;
  font-family: "Lucida Grande", Arial;
  top: 50%;
  left: 50%;
  margin-top: -75px;
  margin-left: -285px;
}

#tb_alert * {
  box-sizing: border-box;
}

#tb_alert .OT_alert {
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  background-color: #333;
  position: relative;
  padding: 30px;
  overflow: visible;
  margin-left: 70px;
  border-bottom-color: rgba(255, 255, 255, 0.1);
  border-left-color: rgba(255, 255, 255, 0.1);

  background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));

  background-image: -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));

  background-size: 4px 4px;
  background-position: 0 0, 2px 2px;
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

#tb_alert .OT_alert-exclamation {
  background-color: #9c1408;
  background-image: linear-gradient(0deg, #dd0c0a 0%, #9c1408 100%);
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);

  margin: -1px 0;

  font-family: MS Trebuchet;
  font-weight: bold;
  font-size: 60px;
  text-shadow: -1px -1px 2px rgba(0, 0, 0, 0.5);

  color: white;
  width: 65px;
  position: absolute;
  padding: 42px 0;
  text-align: center;
  left: -70px;
  top: 0;
  bottom: 0;
  border-top-left-radius: 5px;
  border-bottom-left-radius: 5px;

  border-bottom-color: transparent;
  border-left: none;
  border-right: none;
}

#tb_alert .OT_alert-exclamation:after,
#tb_alert .OT_alert-exclamation:before {
  content: " ";
  position: absolute;
  right: -24px;
  top: 40%;
  border: 12px solid transparent;
  border-left-color: #9c1408;
}

#tb_alert .OT_alert-exclamation:before {
  border-left-color: #bc3428;
  top: 39%;
}

#tb_alert .OT_alert-body {
  color: #c8c5c5;
  margin: 0;
  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
  font-size: 14px;
  line-height: 1.3em;
}

#tb_alert .continue-text {
  margin-top: 12px
}

#tb_alert > * a {
  color: #a7d8df;
  text-decoration: none;
}

#tb_alert .OT_alert-header {
  font-size: 24px;
  padding-bottom: 5px;
  color: #aaa;
  font-weight: bold;
  position: relative;
  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
  margin: 0;
}

#tb_alert .OT_alert-header::before {
  content: attr(data-text);
  position: absolute;
  left: 0;
  color: white;
  -webkit-mask-image: -webkit-gradient(
    linear,
    left top, left bottom,
    from(rgba(0, 0, 0, 1)),
    color-stop(60%, rgba(0, 0, 0, 0)),
    to(rgba(0, 0, 0, 0))
  );
}

#tb_alert .OT_alert-close-button {
  position: absolute;
  right: 8px;
  top: 5px;
  background-color: #000;
  color: #666;
  border: none;
  font-size: 20px;
  /** Hack to bring it up to the proper line top */
  line-height: 14px;
  padding: 0;
  padding-bottom: 3px;
  cursor: pointer;
}

#tb_alert #section-mobile-browser,
#tb_alert #section-supported-mobile-browser {
  width: 200px;
  top: 0px;
  left: 25%;
  margin-top: 0;
  margin-left: 0;
}

@media all and (max-height: 300px) {
  #tb_alert {
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    margin-left: 0;
    margin-top: 0;
  }
  #tb_alert #section-mobile-browser,
  #tb_alert #section-supported-mobile-browser {
    margin-left: 0;
    margin-top: 10px;
    left: 0;
  }
}

#tb_alert #section-normal-install,
#tb_alert #section-upgrade-install,
#tb_alert #section-mobile-browser,
#tb_alert #section-supported-mobile-browser {
  display: none;
}
`,""])},function(e,s,i){e.exports=function(c){var d=[];return d.toString=function(){return this.map(function(g){var b=o(g,c);return g[2]?"@media "+g[2]+"{"+b+"}":b}).join("")},d.i=function(h,g){typeof h=="string"&&(h=[[null,h,""]]);for(var b={},j=0;j<this.length;j++){var _=this[j][0];_!=null&&(b[_]=!0)}for(j=0;j<h.length;j++){var $=h[j];($[0]==null||!b[$[0]])&&(g&&!$[2]?$[2]=g:g&&($[2]="("+$[2]+") and ("+g+")"),d.push($))}},d};function o(c,d){var h=c[1]||"",g=c[3];if(!g)return h;if(d&&typeof btoa=="function"){var b=a(g),j=g.sources.map(function(_){return"/*# sourceURL="+g.sourceRoot+_+" */"});return[h].concat(j).concat([b]).join(`
`)}return[h].join(`
`)}function a(c){var d=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,"+d;return"/*# "+h+" */"}},function(e,s,i){e.exports=function(a,c){return typeof a!="string"?a:(/^['"].*['"]$/.test(a)&&(a=a.slice(1,-1)),/["'() \t\n]/.test(a)||c?'"'+a.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':a)}},function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII="},function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg=="},function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII="},function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg=="},function(e,s){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwMTAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNiKSIgZD0iTTg2LjYgNTBBMTAwIDEwMCAwIDAxMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2MpIiBkPSJNMCAxMDBhMTAwIDEwMCAwIDAxLTg2LjYtNTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2QpIiBkPSJNLTg2LjYgNTBhMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2UpIiBkPSJNLTg2LjYtNTBBMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAxODYuNiA1MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48L2c+PC9tYXNrPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSItMjAiIHk9Ii0yMCIgbWFzaz0idXJsKCNnKSIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg=="},function(e,s){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDciIGhlaWdodD0iNDciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIHI9IjIzLjUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjcuNjM0IDE4LjUwOGE0LjMwNCA0LjMwNCAwIDExLTguNjA5IDAgNC4zMDQgNC4zMDQgMCAwMTguNjA5IDB6bTQuNzEyIDEyLjgwNGMuMTIyLjUwNi0uMjc1Ljk2OS0uNzg2Ljk2OUgxNS4xYy0uNTEyIDAtLjkwOS0uNDYyLS43ODctLjk3Ljk5My00LjEzNyA0LjY1My03LjIwOCA5LjAxNi03LjIwOHM4LjAyMyAzLjA3IDkuMDE3IDcuMjA5eiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg=="},function(e,s){e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+"},function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg=="},function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC"},function(e,s){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwMTQzIDQ0YTguOTg4IDguOTg4IDAgMDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAxMTAuMzc0LS40MkM1MS43MDIgMTkuMTE0IDU0IDI5LjIwOCA1NCA0NS4yMDhjMCAxNC41MjctMi4zNDMgMjMuODgtNy4wMyAyOC4wNThhNy4yOCA3LjI4IDAgMDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwMS01LTV2LTEzYTUgNSAwIDAxNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(e,s){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMDE1IDVWNTguMThhNSA1IDAgMDEtNSA1SDkuMTFhNSA1IDAgMDEtNS01VjI1Ljk3YTUgNSAwIDAxNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwMTQuMzA0IDIuNzAydjI2LjgzNWEzIDMgMCAwMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(e,s,i){var o={},a=function(Et){var bt;return function(){return typeof bt>"u"&&(bt=Et.apply(this,arguments)),bt}},c=a(function(){return window&&document&&document.all&&!window.atob}),d=function(Et,bt){return bt?bt.querySelector(Et):document.querySelector(Et)},h=function(Et){var bt={};return function(Ct,Ut){if(typeof Ct=="function")return Ct();if(typeof bt[Ct]>"u"){var Xt=d.call(this,Ct,Ut);if(window.HTMLIFrameElement&&Xt instanceof window.HTMLIFrameElement)try{Xt=Xt.contentDocument.head}catch{Xt=null}bt[Ct]=Xt}return bt[Ct]}}(),g=null,b=0,j=[],_=i(352);e.exports=function(Et,bt){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");bt=bt||{},bt.attrs=typeof bt.attrs=="object"?bt.attrs:{},!bt.singleton&&typeof bt.singleton!="boolean"&&(bt.singleton=c()),bt.insertInto||(bt.insertInto="head"),bt.insertAt||(bt.insertAt="bottom");var Ct=_e(Et,bt);return $(Ct,bt),function(Xt){for(var Nt=[],Jt=0;Jt<Ct.length;Jt++){var zt=Ct[Jt],nn=o[zt.id];nn.refs--,Nt.push(nn)}if(Xt){var Bt=_e(Xt,bt);$(Bt,bt)}for(var Jt=0;Jt<Nt.length;Jt++){var nn=Nt[Jt];if(nn.refs===0){for(var sn=0;sn<nn.parts.length;sn++)nn.parts[sn]();delete o[nn.id]}}}};function $(Et,bt){for(var Ct=0;Ct<Et.length;Ct++){var Ut=Et[Ct],Xt=o[Ut.id];if(Xt){Xt.refs++;for(var Nt=0;Nt<Xt.parts.length;Nt++)Xt.parts[Nt](Ut.parts[Nt]);for(;Nt<Ut.parts.length;Nt++)Xt.parts.push(lt(Ut.parts[Nt],bt))}else{for(var Jt=[],Nt=0;Nt<Ut.parts.length;Nt++)Jt.push(lt(Ut.parts[Nt],bt));o[Ut.id]={id:Ut.id,refs:1,parts:Jt}}}}function _e(Et,bt){for(var Ct=[],Ut={},Xt=0;Xt<Et.length;Xt++){var Nt=Et[Xt],Jt=bt.base?Nt[0]+bt.base:Nt[0],zt=Nt[1],nn=Nt[2],Bt=Nt[3],sn={css:zt,media:nn,sourceMap:Bt};Ut[Jt]?Ut[Jt].parts.push(sn):Ct.push(Ut[Jt]={id:Jt,parts:[sn]})}return Ct}function et(Et,bt){var Ct=h(Et.insertInto);if(!Ct)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var Ut=j[j.length-1];if(Et.insertAt==="top")Ut?Ut.nextSibling?Ct.insertBefore(bt,Ut.nextSibling):Ct.appendChild(bt):Ct.insertBefore(bt,Ct.firstChild),j.push(bt);else if(Et.insertAt==="bottom")Ct.appendChild(bt);else if(typeof Et.insertAt=="object"&&Et.insertAt.before){var Xt=h(Et.insertAt.before,Ct);Ct.insertBefore(bt,Xt)}else throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`)}function ct(Et){if(Et.parentNode===null)return!1;Et.parentNode.removeChild(Et);var bt=j.indexOf(Et);bt>=0&&j.splice(bt,1)}function dt(Et){var bt=document.createElement("style");if(Et.attrs.type===void 0&&(Et.attrs.type="text/css"),Et.attrs.nonce===void 0){var Ct=st();Ct&&(Et.attrs.nonce=Ct)}return it(bt,Et.attrs),et(Et,bt),bt}function nt(Et){var bt=document.createElement("link");return Et.attrs.type===void 0&&(Et.attrs.type="text/css"),Et.attrs.rel="stylesheet",it(bt,Et.attrs),et(Et,bt),bt}function it(Et,bt){Object.keys(bt).forEach(function(Ct){Et.setAttribute(Ct,bt[Ct])})}function st(){return i.nc}function lt(Et,bt){var Ct,Ut,Xt,Nt;if(bt.transform&&Et.css)if(Nt=typeof bt.transform=="function"?bt.transform(Et.css):bt.transform.default(Et.css),Nt)Et.css=Nt;else return function(){};if(bt.singleton){var Jt=b++;Ct=g||(g=dt(bt)),Ut=Tt.bind(null,Ct,Jt,!1),Xt=Tt.bind(null,Ct,Jt,!0)}else Et.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(Ct=nt(bt),Ut=vt.bind(null,Ct,bt),Xt=function(){ct(Ct),Ct.href&&URL.revokeObjectURL(Ct.href)}):(Ct=dt(bt),Ut=Rt.bind(null,Ct),Xt=function(){ct(Ct)});return Ut(Et),function(nn){if(nn){if(nn.css===Et.css&&nn.media===Et.media&&nn.sourceMap===Et.sourceMap)return;Ut(Et=nn)}else Xt()}}var ht=function(){var Et=[];return function(bt,Ct){return Et[bt]=Ct,Et.filter(Boolean).join(`
`)}}();function Tt(Et,bt,Ct,Ut){var Xt=Ct?"":Ut.css;if(Et.styleSheet)Et.styleSheet.cssText=ht(bt,Xt);else{var Nt=document.createTextNode(Xt),Jt=Et.childNodes;Jt[bt]&&Et.removeChild(Jt[bt]),Jt.length?Et.insertBefore(Nt,Jt[bt]):Et.appendChild(Nt)}}function Rt(Et,bt){var Ct=bt.css,Ut=bt.media;if(Ut&&Et.setAttribute("media",Ut),Et.styleSheet)Et.styleSheet.cssText=Ct;else{for(;Et.firstChild;)Et.removeChild(Et.firstChild);Et.appendChild(document.createTextNode(Ct))}}function vt(Et,bt,Ct){var Ut=Ct.css,Xt=Ct.sourceMap,Nt=bt.convertToAbsoluteUrls===void 0&&Xt;(bt.convertToAbsoluteUrls||Nt)&&(Ut=_(Ut)),Xt&&(Ut+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Xt))))+" */");var Jt=new Blob([Ut],{type:"text/css"}),zt=Et.href;Et.href=URL.createObjectURL(Jt),zt&&URL.revokeObjectURL(zt)}},function(e,s){e.exports=function(i){var o=typeof window<"u"&&window.location;if(!o)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var a=o.protocol+"//"+o.host,c=a+o.pathname.replace(/\/[^\/]*$/,"/"),d=i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(h,g){var b=g.trim().replace(/^"(.*)"$/,function(_,$){return $}).replace(/^'(.*)'$/,function(_,$){return $});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(b))return h;var j;return b.indexOf("//")===0?j=b:b.indexOf("/")===0?j=a+b:j=c+b.replace(/^\.\//,""),"url("+JSON.stringify(j)+")"});return d}},function(e,s){function i(){this.__data__=[],this.size=0}e.exports=i},function(e,s,i){var o=i(80),a=Array.prototype,c=a.splice;function d(h){var g=this.__data__,b=o(g,h);if(b<0)return!1;var j=g.length-1;return b==j?g.pop():c.call(g,b,1),--this.size,!0}e.exports=d},function(e,s,i){var o=i(80);function a(c){var d=this.__data__,h=o(d,c);return h<0?void 0:d[h][1]}e.exports=a},function(e,s,i){var o=i(80);function a(c){return o(this.__data__,c)>-1}e.exports=a},function(e,s,i){var o=i(80);function a(c,d){var h=this.__data__,g=o(h,c);return g<0?(++this.size,h.push([c,d])):h[g][1]=d,this}e.exports=a},function(e,s,i){var o=i(79);function a(){this.__data__=new o,this.size=0}e.exports=a},function(e,s){function i(o){var a=this.__data__,c=a.delete(o);return this.size=a.size,c}e.exports=i},function(e,s){function i(o){return this.__data__.get(o)}e.exports=i},function(e,s){function i(o){return this.__data__.has(o)}e.exports=i},function(e,s,i){var o=i(79),a=i(111),c=i(112),d=200;function h(g,b){var j=this.__data__;if(j instanceof o){var _=j.__data__;if(!a||_.length<d-1)return _.push([g,b]),this.size=++j.size,this;j=this.__data__=new c(_)}return j.set(g,b),this.size=j.size,this}e.exports=h},function(e,s,i){var o=i(16),a=i(366),c=i(11),d=i(174),h=/[\\^$.*+?()[\]{}|]/g,g=/^\[object .+?Constructor\]$/,b=Function.prototype,j=Object.prototype,_=b.toString,$=j.hasOwnProperty,_e=RegExp("^"+_.call($).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function et(ct){if(!c(ct)||a(ct))return!1;var dt=o(ct)?_e:g;return dt.test(d(ct))}e.exports=et},function(e,s,i){var o=i(39),a=Object.prototype,c=a.hasOwnProperty,d=a.toString,h=o?o.toStringTag:void 0;function g(b){var j=c.call(b,h),_=b[h];try{b[h]=void 0;var $=!0}catch{}var _e=d.call(b);return $&&(j?b[h]=_:delete b[h]),_e}e.exports=g},function(e,s){var i=Object.prototype,o=i.toString;function a(c){return o.call(c)}e.exports=a},function(e,s,i){var o=i(367),a=function(){var d=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function c(d){return!!a&&a in d}e.exports=c},function(e,s,i){var o=i(14),a=o["__core-js_shared__"];e.exports=a},function(e,s){function i(o,a){return o==null?void 0:o[a]}e.exports=i},function(e,s,i){var o=i(370),a=i(79),c=i(111);function d(){this.size=0,this.__data__={hash:new o,map:new(c||a),string:new o}}e.exports=d},function(e,s,i){var o=i(371),a=i(372),c=i(373),d=i(374),h=i(375);function g(b){var j=-1,_=b==null?0:b.length;for(this.clear();++j<_;){var $=b[j];this.set($[0],$[1])}}g.prototype.clear=o,g.prototype.delete=a,g.prototype.get=c,g.prototype.has=d,g.prototype.set=h,e.exports=g},function(e,s,i){var o=i(81);function a(){this.__data__=o?o(null):{},this.size=0}e.exports=a},function(e,s){function i(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}e.exports=i},function(e,s,i){var o=i(81),a="__lodash_hash_undefined__",c=Object.prototype,d=c.hasOwnProperty;function h(g){var b=this.__data__;if(o){var j=b[g];return j===a?void 0:j}return d.call(b,g)?b[g]:void 0}e.exports=h},function(e,s,i){var o=i(81),a=Object.prototype,c=a.hasOwnProperty;function d(h){var g=this.__data__;return o?g[h]!==void 0:c.call(g,h)}e.exports=d},function(e,s,i){var o=i(81),a="__lodash_hash_undefined__";function c(d,h){var g=this.__data__;return this.size+=this.has(d)?0:1,g[d]=o&&h===void 0?a:h,this}e.exports=c},function(e,s,i){var o=i(82);function a(c){var d=o(this,c).delete(c);return this.size-=d?1:0,d}e.exports=a},function(e,s){function i(o){var a=typeof o;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?o!=="__proto__":o===null}e.exports=i},function(e,s,i){var o=i(82);function a(c){return o(this,c).get(c)}e.exports=a},function(e,s,i){var o=i(82);function a(c){return o(this,c).has(c)}e.exports=a},function(e,s,i){var o=i(82);function a(c,d){var h=o(this,c),g=h.size;return h.set(c,d),this.size+=h.size==g?0:1,this}e.exports=a},function(e,s){function i(o,a){for(var c=-1,d=Array(o);++c<o;)d[c]=a(c);return d}e.exports=i},function(e,s,i){var o=i(29),a=i(17),c="[object Arguments]";function d(h){return a(h)&&o(h)==c}e.exports=d},function(e,s){function i(){return!1}e.exports=i},function(e,s,i){var o=i(29),a=i(114),c=i(17),d="[object Arguments]",h="[object Array]",g="[object Boolean]",b="[object Date]",j="[object Error]",_="[object Function]",$="[object Map]",_e="[object Number]",et="[object Object]",ct="[object RegExp]",dt="[object Set]",nt="[object String]",it="[object WeakMap]",st="[object ArrayBuffer]",lt="[object DataView]",ht="[object Float32Array]",Tt="[object Float64Array]",Rt="[object Int8Array]",vt="[object Int16Array]",Et="[object Int32Array]",bt="[object Uint8Array]",Ct="[object Uint8ClampedArray]",Ut="[object Uint16Array]",Xt="[object Uint32Array]",Nt={};Nt[ht]=Nt[Tt]=Nt[Rt]=Nt[vt]=Nt[Et]=Nt[bt]=Nt[Ct]=Nt[Ut]=Nt[Xt]=!0,Nt[d]=Nt[h]=Nt[st]=Nt[g]=Nt[lt]=Nt[b]=Nt[j]=Nt[_]=Nt[$]=Nt[_e]=Nt[et]=Nt[ct]=Nt[dt]=Nt[nt]=Nt[it]=!1;function Jt(zt){return c(zt)&&a(zt.length)&&!!Nt[o(zt)]}e.exports=Jt},function(e,s,i){var o=i(178),a=o(Object.keys,Object);e.exports=a},function(e,s,i){var o=i(40),a=i(53);function c(d,h){return d&&o(h,a(h),d)}e.exports=c},function(e,s,i){var o=i(11),a=i(67),c=i(388),d=Object.prototype,h=d.hasOwnProperty;function g(b){if(!o(b))return c(b);var j=a(b),_=[];for(var $ in b)$=="constructor"&&(j||!h.call(b,$))||_.push($);return _}e.exports=g},function(e,s){function i(o){var a=[];if(o!=null)for(var c in Object(o))a.push(c);return a}e.exports=i},function(e,s,i){var o=i(40),a=i(117);function c(d,h){return o(d,a(d),h)}e.exports=c},function(e,s){function i(o,a){for(var c=-1,d=o==null?0:o.length,h=0,g=[];++c<d;){var b=o[c];a(b,c,o)&&(g[h++]=b)}return g}e.exports=i},function(e,s,i){var o=i(40),a=i(181);function c(d,h){return o(d,a(d),h)}e.exports=c},function(e,s,i){var o=i(38),a=i(14),c=o(a,"DataView");e.exports=c},function(e,s,i){var o=i(38),a=i(14),c=o(a,"Promise");e.exports=c},function(e,s){var i=Object.prototype,o=i.hasOwnProperty;function a(c){var d=c.length,h=new c.constructor(d);return d&&typeof c[0]=="string"&&o.call(c,"index")&&(h.index=c.index,h.input=c.input),h}e.exports=a},function(e,s,i){var o=i(120),a=i(396),c=i(397),d=i(398),h=i(188),g="[object Boolean]",b="[object Date]",j="[object Map]",_="[object Number]",$="[object RegExp]",_e="[object Set]",et="[object String]",ct="[object Symbol]",dt="[object ArrayBuffer]",nt="[object DataView]",it="[object Float32Array]",st="[object Float64Array]",lt="[object Int8Array]",ht="[object Int16Array]",Tt="[object Int32Array]",Rt="[object Uint8Array]",vt="[object Uint8ClampedArray]",Et="[object Uint16Array]",bt="[object Uint32Array]";function Ct(Ut,Xt,Nt){var Jt=Ut.constructor;switch(Xt){case dt:return o(Ut);case g:case b:return new Jt(+Ut);case nt:return a(Ut,Nt);case it:case st:case lt:case ht:case Tt:case Rt:case vt:case Et:case bt:return h(Ut,Nt);case j:return new Jt;case _:case et:return new Jt(Ut);case $:return c(Ut);case _e:return new Jt;case ct:return d(Ut)}}e.exports=Ct},function(e,s,i){var o=i(120);function a(c,d){var h=d?o(c.buffer):c.buffer;return new c.constructor(h,c.byteOffset,c.byteLength)}e.exports=a},function(e,s){var i=/\w*$/;function o(a){var c=new a.constructor(a.source,i.exec(a));return c.lastIndex=a.lastIndex,c}e.exports=o},function(e,s,i){var o=i(39),a=o?o.prototype:void 0,c=a?a.valueOf:void 0;function d(h){return c?Object(c.call(h)):{}}e.exports=d},function(e,s,i){var o=i(400),a=i(66),c=i(115),d=c&&c.isMap,h=d?a(d):o;e.exports=h},function(e,s,i){var o=i(41),a=i(17),c="[object Map]";function d(h){return a(h)&&o(h)==c}e.exports=d},function(e,s,i){var o=i(402),a=i(66),c=i(115),d=c&&c.isSet,h=d?a(d):o;e.exports=h},function(e,s,i){var o=i(41),a=i(17),c="[object Set]";function d(h){return a(h)&&o(h)==c}e.exports=d},function(e,s,i){(function(o){s.log=d,s.formatArgs=c,s.save=h,s.load=g,s.useColors=a,s.storage=j(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function a(){var $=b("colors");return/^(no|off|false|disabled)$/i.test($)?!1:typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:!!(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function c($){var _e=this.useColors;if($[0]=(_e?"%c":"")+this.namespace+(_e?" %c":" ")+$[0]+(_e?"%c ":" ")+"+"+e.exports.humanize(this.diff),!!_e){var et="color: "+this.color;$.splice(1,0,et,"color: inherit");var ct=0,dt=0;$[0].replace(/%[a-zA-Z%]/g,function(nt){nt!=="%%"&&(ct++,nt==="%c"&&(dt=ct))}),$.splice(dt,0,et)}}function d(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function h($){try{$==null?s.storage.removeItem("debug"):s.storage.setItem("debug",$)}catch{}}function g(){var $;try{$=s.storage.getItem("debug")}catch{}return!$&&typeof o<"u"&&"env"in o&&($={}.DEBUG),$}function b($){var _e="debug_"+$.toLowerCase();try{return s.storage.getItem(_e)}catch{return typeof o<"u"&&"env"in o?o.env[_e.toUpperCase()]:void 0}}function j(){try{return localStorage}catch{}}e.exports=i(404)(s);var _=e.exports.formatters;_.j=function($){try{return JSON.stringify($)}catch(_e){return"[UnexpectedJSONParseError]: "+_e.message}}}).call(this,i(42))},function(e,s,i){e.exports=function(a){d.debug=d.default=d,d.coerce=_,d.disable=b,d.enable=g,d.enabled=j,d.humanize=i(405),Object.keys(a).forEach(function($){d[$]=a[$]}),d.instances=[],d.names=[],d.skips=[],d.formatters={};function c($){var _e=0,et;for(et in $)_e=(_e<<5)-_e+$.charCodeAt(et),_e|=0;return d.colors[Math.abs(_e)%d.colors.length]}d.selectColor=c;function d($){var _e;function et(){if(et.enabled){var ct=et,dt=+new Date,nt=dt-(_e||dt);ct.diff=nt,ct.prev=_e,ct.curr=dt,_e=dt;for(var it=new Array(arguments.length),st=0;st<it.length;st++)it[st]=arguments[st];it[0]=d.coerce(it[0]),typeof it[0]!="string"&&it.unshift("%O");var lt=0;it[0]=it[0].replace(/%([a-zA-Z%])/g,function(Tt,Rt){if(Tt==="%%")return Tt;lt++;var vt=d.formatters[Rt];if(typeof vt=="function"){var Et=it[lt];Tt=vt.call(ct,Et),it.splice(lt,1),lt--}return Tt}),d.formatArgs.call(ct,it);var ht=ct.log||d.log;ht.apply(ct,it)}}return et.namespace=$,et.enabled=d.enabled($),et.useColors=d.useColors(),et.color=c($),et.destroy=h,typeof d.init=="function"&&d.init(et),d.instances.push(et),et}function h(){var $=d.instances.indexOf(this);return $!==-1?(d.instances.splice($,1),!0):!1}function g($){d.save($),d.names=[],d.skips=[];var _e,et=(typeof $=="string"?$:"").split(/[\s,]+/),ct=et.length;for(_e=0;_e<ct;_e++)et[_e]&&($=et[_e].replace(/\*/g,".*?"),$[0]==="-"?d.skips.push(new RegExp("^"+$.substr(1)+"$")):d.names.push(new RegExp("^"+$+"$")));for(_e=0;_e<d.instances.length;_e++){var dt=d.instances[_e];dt.enabled=d.enabled(dt.namespace)}}function b(){d.enable("")}function j($){if($[$.length-1]==="*")return!0;var _e,et;for(_e=0,et=d.skips.length;_e<et;_e++)if(d.skips[_e].test($))return!1;for(_e=0,et=d.names.length;_e<et;_e++)if(d.names[_e].test($))return!0;return!1}function _($){return $ instanceof Error?$.stack||$.message:$}return d.enable(d.load()),d}},function(e,s){var i=1e3,o=i*60,a=o*60,c=a*24,d=c*7,h=c*365.25;e.exports=function($,_e){_e=_e||{};var et=typeof $;if(et==="string"&&$.length>0)return g($);if(et==="number"&&isFinite($))return _e.long?j($):b($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function g($){if($=String($),!($.length>100)){var _e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(_e){var et=parseFloat(_e[1]),ct=(_e[2]||"ms").toLowerCase();switch(ct){case"years":case"year":case"yrs":case"yr":case"y":return et*h;case"weeks":case"week":case"w":return et*d;case"days":case"day":case"d":return et*c;case"hours":case"hour":case"hrs":case"hr":case"h":return et*a;case"minutes":case"minute":case"mins":case"min":case"m":return et*o;case"seconds":case"second":case"secs":case"sec":case"s":return et*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return et;default:return}}}}function b($){var _e=Math.abs($);return _e>=c?Math.round($/c)+"d":_e>=a?Math.round($/a)+"h":_e>=o?Math.round($/o)+"m":_e>=i?Math.round($/i)+"s":$+"ms"}function j($){var _e=Math.abs($);return _e>=c?_($,_e,c,"day"):_e>=a?_($,_e,a,"hour"):_e>=o?_($,_e,o,"minute"):_e>=i?_($,_e,i,"second"):$+" ms"}function _($,_e,et,ct){var dt=_e>=et*1.5;return Math.round($/et)+" "+ct+(dt?"s":"")}},function(e,s,i){var o=i(407),a=i(175),c=i(88),d=a?function(h,g){return a(h,"toString",{configurable:!0,enumerable:!1,value:o(g),writable:!0})}:c;e.exports=d},function(e,s){function i(o){return function(){return o}}e.exports=i},function(e,s,i){const o=i(194),a=new o;function c(d,h){if(h===void 0)return d;a.has(h)||a.set(h,new o);const g=a.get(h);return g.has(d)||g.set(d,d.bind(h)),g.get(d)}e.exports=c},function(e,s,i){e.exports=function(){var o,a;if(typeof WeakMap!="function")return!1;try{o=new WeakMap([[a={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(o)!=="[object WeakMap]"||typeof o.set!="function"||o.set({},1)!==o||typeof o.delete!="function"||typeof o.has!="function"||o.get(a)!=="one")}},function(e,s,i){var o=i(43),a=i(125),c=i(413),d=i(31),h=i(414),g=i(32),b=i(201),j=i(456),_=i(44).toStringTag,$=i(457),_e=Array.isArray,et=Object.defineProperty,ct=Object.prototype.hasOwnProperty,dt=Object.getPrototypeOf,nt;e.exports=nt=function(){var it=arguments[0],st;if(!(this instanceof nt))throw new TypeError("Constructor requires 'new'");return st=$&&a&&WeakMap!==nt?a(new WeakMap,dt(this)):this,o(it)&&(_e(it)||(it=b(it))),et(st,"__weakMapData__",g("c","$weakMap$"+h())),it&&j(it,function(lt){d(lt),st.set(lt[0],lt[1])}),st},$&&(a&&a(nt,WeakMap),nt.prototype=Object.create(WeakMap.prototype,{constructor:g(nt)})),Object.defineProperties(nt.prototype,{delete:g(function(it){return ct.call(c(it),this.__weakMapData__)?(delete it[this.__weakMapData__],!0):!1}),get:g(function(it){if(ct.call(c(it),this.__weakMapData__))return it[this.__weakMapData__]}),has:g(function(it){return ct.call(c(it),this.__weakMapData__)}),set:g(function(it,st){return et(c(it),this.__weakMapData__,g("c",st)),this}),toString:g(function(){return"[object WeakMap]"})}),et(nt.prototype,_,g("c","WeakMap"))},function(e,s,i){e.exports=function(){}},function(e,s,i){var o=Object.create,a;i(195)()||(a=i(196)),e.exports=function(){var c,d,h;return!a||a.level!==1?o:(c={},d={},h={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(g){if(g==="__proto__"){d[g]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}d[g]=h}),Object.defineProperties(c,d),Object.defineProperty(a,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:c}),function(g,b){return o(g===null?c:g,b)})}()},function(e,s,i){var o=i(197);e.exports=function(a){if(!o(a))throw new TypeError(a+" is not an Object");return a}},function(e,s,i){var o=Object.create(null),a=Math.random;e.exports=function(){var c;do c=a().toString(36).slice(2);while(o[c]);return c}},function(e,s,i){var o=i(416);e.exports=function(a){if(typeof a!="function"||!hasOwnProperty.call(a,"length"))return!1;try{if(typeof a.length!="number"||typeof a.call!="function"||typeof a.apply!="function")return!1}catch{return!1}return!o(a)}},function(e,s,i){var o=i(126);e.exports=function(a){if(!o(a))return!1;try{return a.constructor?a.constructor.prototype===a:!1}catch{return!1}}},function(e,s,i){e.exports=function(){var o=Object.assign,a;return typeof o!="function"?!1:(a={foo:"raz"},o(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},function(e,s,i){var o=i(419),a=i(31),c=Math.max;e.exports=function(d,h){var g,b,j=c(arguments.length,2),_;for(d=Object(a(d)),_=function($){try{d[$]=h[$]}catch(_e){g||(g=_e)}},b=1;b<j;++b)h=arguments[b],o(h).forEach(_);if(g!==void 0)throw g;return d}},function(e,s,i){e.exports=i(420)()?Object.keys:i(421)},function(e,s,i){e.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(e,s,i){var o=i(43),a=Object.keys;e.exports=function(c){return a(o(c)?Object(c):c)}},function(e,s,i){var o="razdwatrzy";e.exports=function(){return typeof o.contains!="function"?!1:o.contains("dwa")===!0&&o.contains("foo")===!1}},function(e,s,i){var o=String.prototype.indexOf;e.exports=function(a){return o.call(this,a,arguments[1])>-1}},function(e,s,i){var o=i(125),a=i(200),c=i(32),d=i(44),h=i(203),g=Object.defineProperty,b;b=e.exports=function(j,_){if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");h.call(this,j),_?a.call(_,"key+value")?_="key+value":a.call(_,"key")?_="key":_="value":_="value",g(this,"__kind__",c("",_))},o&&o(b,h),delete b.prototype.constructor,b.prototype=Object.create(h.prototype,{_resolve:c(function(j){return this.__kind__==="value"?this.__list__[j]:this.__kind__==="key+value"?[j,this.__list__[j]]:j})}),g(b.prototype,d.toStringTag,c("c","Array Iterator"))},function(e,s,i){var o=i(91),a={object:!0,symbol:!0};e.exports=function(){var c=o.Symbol,d;if(typeof c!="function")return!1;d=c("test symbol");try{String(d)}catch{return!1}return!(!a[typeof c.iterator]||!a[typeof c.toPrimitive]||!a[typeof c.toStringTag])}},function(e,s,i){e.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},function(e,s){var i=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return i()}try{return __global__||i()}finally{delete Object.prototype.__global__}}()},function(e,s,i){var o=i(32),a=i(202),c=i(91).Symbol,d=i(430),h=i(431),g=i(432),b=Object.create,j=Object.defineProperties,_=Object.defineProperty,$,_e,et;if(typeof c=="function")try{String(c()),et=!0}catch{}else c=null;_e=function(dt){if(this instanceof _e)throw new TypeError("Symbol is not a constructor");return $(dt)},e.exports=$=function ct(dt){var nt;if(this instanceof ct)throw new TypeError("Symbol is not a constructor");return et?c(dt):(nt=b(_e.prototype),dt=dt===void 0?"":String(dt),j(nt,{__description__:o("",dt),__name__:o("",d(dt))}))},h($),g($),j(_e.prototype,{constructor:o($),toString:o("",function(){return this.__name__})}),j($.prototype,{toString:o(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:o(function(){return a(this)})}),_($.prototype,$.toPrimitive,o("",function(){var ct=a(this);return typeof ct=="symbol"?ct:ct.toString()})),_($.prototype,$.toStringTag,o("c","Symbol")),_(_e.prototype,$.toStringTag,o("c",$.prototype[$.toStringTag])),_(_e.prototype,$.toPrimitive,o("c",$.prototype[$.toPrimitive]))},function(e,s,i){e.exports=function(o){return o?typeof o=="symbol"?!0:!o.constructor||o.constructor.name!=="Symbol"?!1:o[o.constructor.toStringTag]==="Symbol":!1}},function(e,s,i){var o=i(32),a=Object.create,c=Object.defineProperty,d=Object.prototype,h=a(null);e.exports=function(g){for(var b=0,j,_;h[g+(b||"")];)++b;return g+=b||"",h[g]=!0,j="@@"+g,c(d,j,o.gs(null,function($){_||(_=!0,c(this,j,o($)),_=!1)})),j}},function(e,s,i){var o=i(32),a=i(91).Symbol;e.exports=function(c){return Object.defineProperties(c,{hasInstance:o("",a&&a.hasInstance||c("hasInstance")),isConcatSpreadable:o("",a&&a.isConcatSpreadable||c("isConcatSpreadable")),iterator:o("",a&&a.iterator||c("iterator")),match:o("",a&&a.match||c("match")),replace:o("",a&&a.replace||c("replace")),search:o("",a&&a.search||c("search")),species:o("",a&&a.species||c("species")),split:o("",a&&a.split||c("split")),toPrimitive:o("",a&&a.toPrimitive||c("toPrimitive")),toStringTag:o("",a&&a.toStringTag||c("toStringTag")),unscopables:o("",a&&a.unscopables||c("unscopables"))})}},function(e,s,i){var o=i(32),a=i(202),c=Object.create(null);e.exports=function(d){return Object.defineProperties(d,{for:o(function(h){return c[h]?c[h]:c[h]=d(String(h))}),keyFor:o(function(h){var g;a(h);for(g in c)if(c[g]===h)return g})})}},function(e,s,i){var o=i(31);e.exports=function(){return o(this).length=0,this}},function(e,s,i){var o=i(55),a=i(435),c=i(439),d=i(440),h=i(199),g=i(450),b=Function.prototype.bind,j=Object.defineProperty,_=Object.prototype.hasOwnProperty,$;$=function(_e,et,ct){var dt=a(et)&&c(et.value),nt;return nt=d(et),delete nt.writable,delete nt.value,nt.get=function(){return!ct.overwriteDefinition&&_.call(this,_e)?dt:(et.value=b.call(dt,ct.resolveContext?ct.resolveContext(this):this),j(this,_e,et),this[_e])},nt},e.exports=function(_e){var et=h(arguments[1]);return o(et.resolveContext)&&c(et.resolveContext),g(_e,function(ct,dt){return $(dt,ct,et)})}},function(e,s,i){var o=i(204),a=i(55);e.exports=function(c){return a(c)?c:o(c,"Cannot use %v",arguments[1])}},function(e,s,i){var o=i(55),a=i(126),c=Object.prototype.toString;e.exports=function(d){if(!o(d))return null;if(a(d)){var h=d.toString;if(typeof h!="function"||h===c)return null}try{return""+d}catch{return null}}},function(e,s,i){var o=i(438),a=/[\n\r\u2028\u2029]/g;e.exports=function(c){var d=o(c);return d===null?"<Non-coercible to string value>":(d.length>100&&(d=d.slice(0,99)+""),d=d.replace(a,function(h){switch(h){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),d)}},function(e,s,i){e.exports=function(o){try{return o.toString()}catch{try{return String(o)}catch{return null}}}},function(e,s,i){var o=i(204),a=i(198);e.exports=function(c){return a(c)?c:o(c,"%v is not a plain function",arguments[1])}},function(e,s,i){var o=i(441),a=i(127),c=i(31);e.exports=function(d){var h=Object(c(d)),g=arguments[1],b=Object(arguments[2]);if(h!==d&&!g)return h;var j={};return g?o(g,function(_){(b.ensure||_ in d)&&(j[_]=d[_])}):a(j,d),j}},function(e,s,i){e.exports=i(442)()?Array.from:i(443)},function(e,s,i){e.exports=function(){var o=Array.from,a,c;return typeof o!="function"?!1:(a=["raz","dwa"],c=o(a),!!(c&&c!==a&&c[1]==="dwa"))}},function(e,s,i){var o=i(44).iterator,a=i(89),c=i(444),d=i(445),h=i(68),g=i(31),b=i(43),j=i(90),_=Array.isArray,$=Function.prototype.call,_e={configurable:!0,enumerable:!0,writable:!0,value:null},et=Object.defineProperty;e.exports=function(ct){var dt=arguments[1],nt=arguments[2],it,st,lt,ht,Tt,Rt,vt,Et,bt,Ct;if(ct=Object(g(ct)),b(dt)&&h(dt),!this||this===Array||!c(this)){if(!dt){if(a(ct))return Tt=ct.length,Tt!==1?Array.apply(null,ct):(ht=new Array(1),ht[0]=ct[0],ht);if(_(ct)){for(ht=new Array(Tt=ct.length),st=0;st<Tt;++st)ht[st]=ct[st];return ht}}ht=[]}else it=this;if(!_(ct)){if((bt=ct[o])!==void 0){for(vt=h(bt).call(ct),it&&(ht=new it),Et=vt.next(),st=0;!Et.done;)Ct=dt?$.call(dt,nt,Et.value,st):Et.value,it?(_e.value=Ct,et(ht,st,_e)):ht[st]=Ct,Et=vt.next(),++st;Tt=st}else if(j(ct)){for(Tt=ct.length,it&&(ht=new it),st=0,lt=0;st<Tt;++st)Ct=ct[st],st+1<Tt&&(Rt=Ct.charCodeAt(0),Rt>=55296&&Rt<=56319&&(Ct+=ct[++st])),Ct=dt?$.call(dt,nt,Ct,lt):Ct,it?(_e.value=Ct,et(ht,lt,_e)):ht[lt]=Ct,++lt;Tt=lt}}if(Tt===void 0)for(Tt=d(ct.length),it&&(ht=new it(Tt)),st=0;st<Tt;++st)Ct=dt?$.call(dt,nt,ct[st],st):ct[st],it?(_e.value=Ct,et(ht,st,_e)):ht[st]=Ct;return it&&(_e.value=null,ht.length=Tt),ht}},function(e,s,i){var o=Object.prototype.toString,a=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(c){return typeof c=="function"&&a(o.call(c))}},function(e,s,i){var o=i(446),a=Math.max;e.exports=function(c){return a(0,o(c))}},function(e,s,i){var o=i(447),a=Math.abs,c=Math.floor;e.exports=function(d){return isNaN(d)?0:(d=Number(d),d===0||!isFinite(d)?d:o(d)*c(a(d)))}},function(e,s,i){e.exports=i(448)()?Math.sign:i(449)},function(e,s,i){e.exports=function(){var o=Math.sign;return typeof o!="function"?!1:o(10)===1&&o(-20)===-1}},function(e,s,i){e.exports=function(o){return o=Number(o),isNaN(o)||o===0?o:o>0?1:-1}},function(e,s,i){var o=i(68),a=i(451),c=Function.prototype.call;e.exports=function(d,h){var g={},b=arguments[2];return o(h),a(d,function(j,_,$,_e){g[_]=c.call(h,b,j,_,$,_e)}),g}},function(e,s,i){e.exports=i(452)("forEach")},function(e,s,i){var o=i(68),a=i(31),c=Function.prototype.bind,d=Function.prototype.call,h=Object.keys,g=Object.prototype.propertyIsEnumerable;e.exports=function(b,j){return function(_,$){var _e,et=arguments[2],ct=arguments[3];return _=Object(a(_)),o($),_e=h(_),ct&&_e.sort(typeof ct=="function"?c.call(ct,_):void 0),typeof b!="function"&&(b=_e[b]),d.call(b,_e,function(dt,nt){return g.call(_,dt)?d.call($,et,_[dt],dt,_,nt):j})}}},function(e,s,i){var o=i(125),a=i(32),c=i(44),d=i(203),h=Object.defineProperty,g;g=e.exports=function(b){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");b=String(b),d.call(this,b),h(this,"__length__",a("",b.length))},o&&o(g,d),delete g.prototype.constructor,g.prototype=Object.create(d.prototype,{_next:a(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:a(function(b){var j=this.__list__[b],_;return this.__nextIndex__===this.__length__?j:(_=j.charCodeAt(0),_>=55296&&_<=56319?j+this.__list__[this.__nextIndex__++]:j)})}),h(g.prototype,c.toStringTag,a("c","String Iterator"))},function(e,s,i){var o=i(455);e.exports=function(a){if(!o(a))throw new TypeError(a+" is not iterable");return a}},function(e,s,i){var o=i(89),a=i(43),c=i(90),d=i(44).iterator,h=Array.isArray;e.exports=function(g){return a(g)?h(g)||c(g)||o(g)?!0:typeof g[d]=="function":!1}},function(e,s,i){var o=i(89),a=i(68),c=i(90),d=i(201),h=Array.isArray,g=Function.prototype.call,b=Array.prototype.some;e.exports=function(j,_){var $,_e=arguments[2],et,ct,dt,nt,it,st,lt;if(h(j)||o(j)?$="array":c(j)?$="string":j=d(j),a(_),ct=function(){dt=!0},$==="array"){b.call(j,function(ht){return g.call(_,_e,ht,ct),dt});return}if($==="string"){for(it=j.length,nt=0;nt<it&&(st=j[nt],nt+1<it&&(lt=st.charCodeAt(0),lt>=55296&&lt<=56319&&(st+=j[++nt])),g.call(_,_e,st,ct),!dt);++nt);return}for(et=j.next();!et.done;){if(g.call(_,_e,et.value,ct),dt)return;et=j.next()}}},function(e,s,i){e.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},function(e,s,i){var o=i(92),a=i(93),c=i(130),d=i(33),h=i(66),g=i(94),b=Math.min;function j(_,$,_e){for(var et=_e?c:a,ct=_[0].length,dt=_.length,nt=dt,it=Array(dt),st=1/0,lt=[];nt--;){var ht=_[nt];nt&&$&&(ht=d(ht,h($))),st=b(ht.length,st),it[nt]=!_e&&($||ct>=120&&ht.length>=120)?new o(nt&&ht):void 0}ht=_[0];var Tt=-1,Rt=it[0];e:for(;++Tt<ct&&lt.length<st;){var vt=ht[Tt],Et=$?$(vt):vt;if(vt=_e||vt!==0?vt:0,!(Rt?g(Rt,Et):et(lt,Et,_e))){for(nt=dt;--nt;){var bt=it[nt];if(!(bt?g(bt,Et):et(_[nt],Et,_e)))continue e}Rt&&Rt.push(Et),lt.push(vt)}}return lt}e.exports=j},function(e,s){var i="__lodash_hash_undefined__";function o(a){return this.__data__.set(a,i),this}e.exports=o},function(e,s){function i(o){return this.__data__.has(o)}e.exports=i},function(e,s,i){var o=i(205),a=i(462),c=i(463);function d(h,g,b){return g===g?c(h,g,b):o(h,a,b)}e.exports=d},function(e,s){function i(o){return o!==o}e.exports=i},function(e,s){function i(o,a,c){for(var d=c-1,h=o.length;++d<h;)if(o[d]===a)return d;return-1}e.exports=i},function(e,s,i){var o=i(131);function a(c){return o(c)?c:[]}e.exports=a},function(e,s,i){(function(o){var a=i(19),c=i(207),d=i(466),h=i(213),g=i(132);function b(_){var $=new d(_),_e=c(d.prototype.request,$);return a.extend(_e,d.prototype,$),a.extend(_e,$),_e}var j=b(g);j.Axios=d,j.create=function($){return b(h(j.defaults,$))},j.Cancel=i(214),j.CancelToken=i(480),j.isCancel=i(212),j.all=function($){return o.all($)},j.spread=i(481),j.isAxiosError=i(482),e.exports=j,e.exports.default=j}).call(this,i(0))},function(e,s,i){(function(o){var a=i(19),c=i(208),d=i(467),h=i(468),g=i(213),b=i(478),j=b.validators;function _($){this.defaults=$,this.interceptors={request:new d,response:new d}}_.prototype.request=function(_e){typeof _e=="string"?(_e=arguments[1]||{},_e.url=arguments[0]):_e=_e||{},_e=g(this.defaults,_e),_e.method?_e.method=_e.method.toLowerCase():this.defaults.method?_e.method=this.defaults.method.toLowerCase():_e.method="get";var et=_e.transitional;et!==void 0&&b.assertOptions(et,{silentJSONParsing:j.transitional(j.boolean,"1.0.0"),forcedJSONParsing:j.transitional(j.boolean,"1.0.0"),clarifyTimeoutError:j.transitional(j.boolean,"1.0.0")},!1);var ct=[],dt=!0;this.interceptors.request.forEach(function(vt){typeof vt.runWhen=="function"&&vt.runWhen(_e)===!1||(dt=dt&&vt.synchronous,ct.unshift(vt.fulfilled,vt.rejected))});var nt=[];this.interceptors.response.forEach(function(vt){nt.push(vt.fulfilled,vt.rejected)});var it;if(!dt){var st=[h,void 0];for(Array.prototype.unshift.apply(st,ct),st=st.concat(nt),it=o.resolve(_e);st.length;)it=it.then(st.shift(),st.shift());return it}for(var lt=_e;ct.length;){var ht=ct.shift(),Tt=ct.shift();try{lt=ht(lt)}catch(Rt){Tt(Rt);break}}try{it=h(lt)}catch(Rt){return o.reject(Rt)}for(;nt.length;)it=it.then(nt.shift(),nt.shift());return it},_.prototype.getUri=function(_e){return _e=g(this.defaults,_e),c(_e.url,_e.params,_e.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],function(_e){_.prototype[_e]=function(et,ct){return this.request(g(ct||{},{method:_e,url:et,data:(ct||{}).data}))}}),a.forEach(["post","put","patch"],function(_e){_.prototype[_e]=function(et,ct,dt){return this.request(g(dt||{},{method:_e,url:et,data:ct}))}}),e.exports=_}).call(this,i(0))},function(e,s,i){var o=i(19);function a(){this.handlers=[]}a.prototype.use=function(d,h,g){return this.handlers.push({fulfilled:d,rejected:h,synchronous:g?g.synchronous:!1,runWhen:g?g.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(d){this.handlers[d]&&(this.handlers[d]=null)},a.prototype.forEach=function(d){o.forEach(this.handlers,function(g){g!==null&&d(g)})},e.exports=a},function(e,s,i){(function(o){var a=i(19),c=i(469),d=i(212),h=i(132);function g(b){b.cancelToken&&b.cancelToken.throwIfRequested()}e.exports=function(j){g(j),j.headers=j.headers||{},j.data=c.call(j,j.data,j.headers,j.transformRequest),j.headers=a.merge(j.headers.common||{},j.headers[j.method]||{},j.headers),a.forEach(["delete","get","head","post","put","patch","common"],function(_e){delete j.headers[_e]});var _=j.adapter||h.adapter;return _(j).then(function(_e){return g(j),_e.data=c.call(j,_e.data,_e.headers,j.transformResponse),_e},function(_e){return d(_e)||(g(j),_e&&_e.response&&(_e.response.data=c.call(j,_e.response.data,_e.response.headers,j.transformResponse))),o.reject(_e)})}}).call(this,i(0))},function(e,s,i){var o=i(19),a=i(132);e.exports=function(d,h,g){var b=this||a;return o.forEach(g,function(_){d=_.call(b,d,h)}),d}},function(e,s,i){var o=i(19);e.exports=function(c,d){o.forEach(c,function(g,b){b!==d&&b.toUpperCase()===d.toUpperCase()&&(c[d]=g,delete c[b])})}},function(e,s,i){var o=i(211);e.exports=function(c,d,h){var g=h.config.validateStatus;!h.status||!g||g(h.status)?c(h):d(o("Request failed with status code "+h.status,h.config,null,h.request,h))}},function(e,s,i){var o=i(19);e.exports=o.isStandardBrowserEnv()?function(){return{write:function(d,h,g,b,j,_){var $=[];$.push(d+"="+encodeURIComponent(h)),o.isNumber(g)&&$.push("expires="+new Date(g).toGMTString()),o.isString(b)&&$.push("path="+b),o.isString(j)&&$.push("domain="+j),_===!0&&$.push("secure"),document.cookie=$.join("; ")},read:function(d){var h=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return h?decodeURIComponent(h[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,s,i){var o=i(474),a=i(475);e.exports=function(d,h){return d&&!o(h)?a(d,h):h}},function(e,s,i){e.exports=function(a){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)}},function(e,s,i){e.exports=function(a,c){return c?a.replace(/\/+$/,"")+"/"+c.replace(/^\/+/,""):a}},function(e,s,i){var o=i(19),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(d){var h={},g,b,j;return d&&o.forEach(d.split(`
`),function($){if(j=$.indexOf(":"),g=o.trim($.substr(0,j)).toLowerCase(),b=o.trim($.substr(j+1)),g){if(h[g]&&a.indexOf(g)>=0)return;g==="set-cookie"?h[g]=(h[g]?h[g]:[]).concat([b]):h[g]=h[g]?h[g]+", "+b:b}}),h}},function(e,s,i){var o=i(19);e.exports=o.isStandardBrowserEnv()?function(){var c=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a"),h;function g(b){var j=b;return c&&(d.setAttribute("href",j),j=d.href),d.setAttribute("href",j),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return h=g(window.location.href),function(j){var _=o.isString(j)?g(j):j;return _.protocol===h.protocol&&_.host===h.host}}():function(){return function(){return!0}}()},function(e,s,i){var o=i(479),a={};["object","boolean","number","function","string","symbol"].forEach(function(b,j){a[b]=function($){return typeof $===b||"a"+(j<1?"n ":" ")+b}});var c={},d=o.version.split(".");function h(b,j){for(var _=j?j.split("."):d,$=b.split("."),_e=0;_e<3;_e++){if(_[_e]>$[_e])return!0;if(_[_e]<$[_e])return!1}return!1}a.transitional=function(j,_,$){var _e=_&&h(_);function et(ct,dt){return"[Axios v"+o.version+"] Transitional option '"+ct+"'"+dt+($?". "+$:"")}return function(ct,dt,nt){if(j===!1)throw new Error(et(dt," has been removed in "+_));return _e&&!c[dt]&&(c[dt]=!0,console.warn(et(dt," has been deprecated since v"+_+" and will be removed in the near future"))),j?j(ct,dt,nt):!0}};function g(b,j,_){if(typeof b!="object")throw new TypeError("options must be an object");for(var $=Object.keys(b),_e=$.length;_e-- >0;){var et=$[_e],ct=j[et];if(ct){var dt=b[et],nt=dt===void 0||ct(dt,et,b);if(nt!==!0)throw new TypeError("option "+et+" must be "+nt);continue}if(_!==!0)throw Error("Unknown option "+et)}}e.exports={isOlderVersion:h,assertOptions:g,validators:a}},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(e,s,i){(function(o){var a=i(214);function c(d){if(typeof d!="function")throw new TypeError("executor must be a function.");var h;this.promise=new o(function(j){h=j});var g=this;d(function(j){g.reason||(g.reason=new a(j),h(g.reason))})}c.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},c.source=function(){var h,g=new c(function(j){h=j});return{token:g,cancel:h}},e.exports=c}).call(this,i(0))},function(e,s,i){e.exports=function(a){return function(d){return a.apply(null,d)}}},function(e,s,i){e.exports=function(a){return typeof a=="object"&&a.isAxiosError===!0}},function(e,s,i){var o=i(215),a=o("pick",i(47));a.placeholder=i(133),e.exports=a},function(e,s,i){var o=i(485),a=i(133),c=Array.prototype.push;function d(_e,et){return et==2?function(ct,dt){return _e.apply(void 0,arguments)}:function(ct){return _e.apply(void 0,arguments)}}function h(_e,et){return et==2?function(ct,dt){return _e(ct,dt)}:function(ct){return _e(ct)}}function g(_e){for(var et=_e?_e.length:0,ct=Array(et);et--;)ct[et]=_e[et];return ct}function b(_e){return function(et){return _e({},et)}}function j(_e,et){return function(){for(var ct=arguments.length,dt=ct-1,nt=Array(ct);ct--;)nt[ct]=arguments[ct];var it=nt[et],st=nt.slice(0,et);return it&&c.apply(st,it),et!=dt&&c.apply(st,nt.slice(et+1)),_e.apply(this,st)}}function _(_e,et){return function(){var ct=arguments.length;if(ct){for(var dt=Array(ct);ct--;)dt[ct]=arguments[ct];var nt=dt[0]=et.apply(void 0,dt);return _e.apply(void 0,dt),nt}}}function $(_e,et,ct,dt){var nt=typeof et=="function",it=et===Object(et);if(it&&(dt=ct,ct=et,et=void 0),ct==null)throw new TypeError;dt||(dt={});var st={cap:"cap"in dt?dt.cap:!0,curry:"curry"in dt?dt.curry:!0,fixed:"fixed"in dt?dt.fixed:!0,immutable:"immutable"in dt?dt.immutable:!0,rearg:"rearg"in dt?dt.rearg:!0},lt=nt?ct:a,ht="curry"in dt&&dt.curry,Tt="fixed"in dt&&dt.fixed,Rt="rearg"in dt&&dt.rearg,vt=nt?ct.runInContext():void 0,Et=nt?ct:{ary:_e.ary,assign:_e.assign,clone:_e.clone,curry:_e.curry,forEach:_e.forEach,isArray:_e.isArray,isError:_e.isError,isFunction:_e.isFunction,isWeakMap:_e.isWeakMap,iteratee:_e.iteratee,keys:_e.keys,rearg:_e.rearg,toInteger:_e.toInteger,toPath:_e.toPath},bt=Et.ary,Ct=Et.assign,Ut=Et.clone,Xt=Et.curry,Nt=Et.forEach,Jt=Et.isArray,zt=Et.isError,nn=Et.isFunction,Bt=Et.isWeakMap,sn=Et.keys,qt=Et.rearg,Kt=Et.toInteger,$t=Et.toPath,Sn=sn(o.aryMethod),On={castArray:function(lr){return function(){var pr=arguments[0];return Jt(pr)?lr(g(pr)):lr.apply(void 0,arguments)}},iteratee:function(lr){return function(){var pr=arguments[0],Vn=arguments[1],In=lr(pr,Vn),zn=In.length;return st.cap&&typeof Vn=="number"?(Vn=Vn>2?Vn-2:1,zn&&zn<=Vn?In:h(In,Vn)):In}},mixin:function(lr){return function(pr){var Vn=this;if(!nn(Vn))return lr(Vn,Object(pr));var In=[];return Nt(sn(pr),function(zn){nn(pr[zn])&&In.push([zn,Vn.prototype[zn]])}),lr(Vn,Object(pr)),Nt(In,function(zn){var vr=zn[1];nn(vr)?Vn.prototype[zn[0]]=vr:delete Vn.prototype[zn[0]]}),Vn}},nthArg:function(lr){return function(pr){var Vn=pr<0?1:Kt(pr)+1;return Xt(lr(pr),Vn)}},rearg:function(lr){return function(pr,Vn){var In=Vn?Vn.length:0;return Xt(lr(pr,Vn),In)}},runInContext:function(lr){return function(pr){return $(_e,lr(pr),dt)}}};function tn(lr,pr){if(st.cap){var Vn=o.iterateeRearg[lr];if(Vn)return or(pr,Vn);var In=!nt&&o.iterateeAry[lr];if(In)return cr(pr,In)}return pr}function bn(lr,pr,Vn){return ht||st.curry&&Vn>1?Xt(pr,Vn):pr}function dn(lr,pr,Vn){if(st.fixed&&(Tt||!o.skipFixed[lr])){var In=o.methodSpread[lr],zn=In&&In.start;return zn===void 0?bt(pr,Vn):j(pr,zn)}return pr}function Mn(lr,pr,Vn){return st.rearg&&Vn>1&&(Rt||!o.skipRearg[lr])?qt(pr,o.methodRearg[lr]||o.aryRearg[Vn]):pr}function $n(lr,pr){pr=$t(pr);for(var Vn=-1,In=pr.length,zn=In-1,vr=Ut(Object(lr)),Jr=vr;Jr!=null&&++Vn<In;){var kn=pr[Vn],ir=Jr[kn];ir!=null&&!(nn(ir)||zt(ir)||Bt(ir))&&(Jr[kn]=Ut(Vn==zn?ir:Object(ir))),Jr=Jr[kn]}return vr}function Un(lr){return Zr.runInContext.convert(lr)(void 0)}function Fn(lr,pr){var Vn=o.aliasToReal[lr]||lr,In=o.remap[Vn]||Vn,zn=dt;return function(vr){var Jr=nt?vt:Et,kn=nt?vt[In]:pr,ir=Ct(Ct({},zn),vr);return $(Jr,Vn,kn,ir)}}function cr(lr,pr){return wr(lr,function(Vn){return typeof Vn=="function"?h(Vn,pr):Vn})}function or(lr,pr){return wr(lr,function(Vn){var In=pr.length;return d(qt(h(Vn,In),pr),In)})}function wr(lr,pr){return function(){var Vn=arguments.length;if(!Vn)return lr();for(var In=Array(Vn);Vn--;)In[Vn]=arguments[Vn];var zn=st.rearg?0:Vn-1;return In[zn]=pr(In[zn]),lr.apply(void 0,In)}}function Er(lr,pr,Vn){var In,zn=o.aliasToReal[lr]||lr,vr=pr,Jr=On[zn];return Jr?vr=Jr(pr):st.immutable&&(o.mutate.array[zn]?vr=_(pr,g):o.mutate.object[zn]?vr=_(pr,b(pr)):o.mutate.set[zn]&&(vr=_(pr,$n))),Nt(Sn,function(kn){return Nt(o.aryMethod[kn],function(ir){if(zn==ir){var gr=o.methodSpread[zn],Br=gr&&gr.afterRearg;return In=Br?dn(zn,Mn(zn,vr,kn),kn):Mn(zn,dn(zn,vr,kn),kn),In=tn(zn,In),In=bn(zn,In,kn),!1}}),!In}),In||(In=vr),In==pr&&(In=ht?Xt(In,1):function(){return pr.apply(this,arguments)}),In.convert=Fn(zn,pr),In.placeholder=pr.placeholder=Vn,In}if(!it)return Er(et,ct,lt);var Zr=ct,po=[];return Nt(Sn,function(lr){Nt(o.aryMethod[lr],function(pr){var Vn=Zr[o.remap[pr]||pr];Vn&&po.push([pr,Er(pr,Vn,Zr)])})}),Nt(sn(Zr),function(lr){var pr=Zr[lr];if(typeof pr=="function"){for(var Vn=po.length;Vn--;)if(po[Vn][0]==lr)return;pr.convert=Fn(lr,pr),po.push([lr,pr])}}),Nt(po,function(lr){Zr[lr[0]]=lr[1]}),Zr.convert=Un,Zr.placeholder=Zr,Nt(sn(Zr),function(lr){Nt(o.realToAlias[lr]||[],function(pr){Zr[pr]=Zr[lr]})}),Zr}e.exports=$},function(e,s){s.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},s.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},s.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},s.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},s.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},s.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},s.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},s.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},s.realToAlias=function(){var i=Object.prototype.hasOwnProperty,o=s.aliasToReal,a={};for(var c in o){var d=o[c];i.call(a,d)?a[d].push(c):a[d]=[c]}return a}(),s.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},s.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},s.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(e,s,i){e.exports={ary:i(487),assign:i(176),clone:i(37),curry:i(505),forEach:i(113),isArray:i(12),isError:i(506),isFunction:i(16),isWeakMap:i(507),iteratee:i(508),keys:i(116),rearg:i(523),toInteger:i(96),toPath:i(526)}},function(e,s,i){var o=i(134),a=128;function c(d,h,g){return h=g?void 0:h,h=d&&h==null?d.length:h,o(d,a,void 0,void 0,void 0,void 0,h)}e.exports=c},function(e,s,i){var o=i(95),a=i(14),c=1;function d(h,g,b){var j=g&c,_=o(h);function $(){var _e=this&&this!==a&&this instanceof $?_:h;return _e.apply(j?b:this,arguments)}return $}e.exports=d},function(e,s,i){var o=i(122),a=i(95),c=i(218),d=i(221),h=i(227),g=i(137),b=i(14);function j(_,$,_e){var et=a(_);function ct(){for(var dt=arguments.length,nt=Array(dt),it=dt,st=h(ct);it--;)nt[it]=arguments[it];var lt=dt<3&&nt[0]!==st&&nt[dt-1]!==st?[]:g(nt,st);if(dt-=lt.length,dt<_e)return d(_,$,c,ct.placeholder,void 0,nt,lt,void 0,void 0,_e-dt);var ht=this&&this!==b&&this instanceof ct?et:_;return o(ht,this,nt)}return ct}e.exports=j},function(e,s){function i(o,a){for(var c=o.length,d=0;c--;)o[c]===a&&++d;return d}e.exports=i},function(e,s,i){var o=i(135),a=i(222),c=i(492),d=i(494);function h(g){var b=c(g),j=d[b];if(typeof j!="function"||!(b in o.prototype))return!1;if(g===j)return!0;var _=a(j);return!!_&&g===_[0]}e.exports=h},function(e,s,i){var o=i(493),a=Object.prototype,c=a.hasOwnProperty;function d(h){for(var g=h.name+"",b=o[g],j=c.call(o,g)?b.length:0;j--;){var _=b[j],$=_.func;if($==null||$==h)return _.name}return g}e.exports=d},function(e,s){var i={};e.exports=i},function(e,s,i){var o=i(135),a=i(224),c=i(136),d=i(12),h=i(17),g=i(495),b=Object.prototype,j=b.hasOwnProperty;function _($){if(h($)&&!d($)&&!($ instanceof o)){if($ instanceof a)return $;if(j.call($,"__wrapped__"))return g($)}return new a($)}_.prototype=c.prototype,_.prototype.constructor=_,e.exports=_},function(e,s,i){var o=i(135),a=i(224),c=i(54);function d(h){if(h instanceof o)return h.clone();var g=new a(h.__wrapped__,h.__chain__);return g.__actions__=c(h.__actions__),g.__index__=h.__index__,g.__values__=h.__values__,g}e.exports=d},function(e,s){var i=/\{\n\/\* \[wrapped with (.+)\] \*/,o=/,? & /;function a(c){var d=c.match(i);return d?d[1].split(o):[]}e.exports=a},function(e,s){var i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function o(a,c){var d=c.length;if(!d)return a;var h=d-1;return c[h]=(d>1?"& ":"")+c[h],c=c.join(d>2?", ":" "),a.replace(i,`{
/* [wrapped with `+c+`] */
`)}e.exports=o},function(e,s,i){var o=i(113),a=i(93),c=1,d=2,h=8,g=16,b=32,j=64,_=128,$=256,_e=512,et=[["ary",_],["bind",c],["bindKey",d],["curry",h],["curryRight",g],["flip",_e],["partial",b],["partialRight",j],["rearg",$]];function ct(dt,nt){return o(et,function(it){var st="_."+it[0];nt&it[1]&&!a(dt,st)&&dt.push(st)}),dt.sort()}e.exports=ct},function(e,s,i){var o=i(54),a=i(65),c=Math.min;function d(h,g){for(var b=h.length,j=c(g.length,b),_=o(h);j--;){var $=g[j];h[j]=a($,b)?_[$]:void 0}return h}e.exports=d},function(e,s,i){var o=i(122),a=i(95),c=i(14),d=1;function h(g,b,j,_){var $=b&d,_e=a(g);function et(){for(var ct=-1,dt=arguments.length,nt=-1,it=_.length,st=Array(it+dt),lt=this&&this!==c&&this instanceof et?_e:g;++nt<it;)st[nt]=_[nt];for(;dt--;)st[nt++]=arguments[++ct];return o(lt,$?j:this,st)}return et}e.exports=h},function(e,s,i){var o=i(219),a=i(220),c=i(137),d="__lodash_placeholder__",h=1,g=2,b=4,j=8,_=128,$=256,_e=Math.min;function et(ct,dt){var nt=ct[1],it=dt[1],st=nt|it,lt=st<(h|g|_),ht=it==_&&nt==j||it==_&&nt==$&&ct[7].length<=dt[8]||it==(_|$)&&dt[7].length<=dt[8]&&nt==j;if(!(lt||ht))return ct;it&h&&(ct[2]=dt[2],st|=nt&h?0:b);var Tt=dt[3];if(Tt){var Rt=ct[3];ct[3]=Rt?o(Rt,Tt,dt[4]):Tt,ct[4]=Rt?c(ct[3],d):dt[4]}return Tt=dt[5],Tt&&(Rt=ct[5],ct[5]=Rt?a(Rt,Tt,dt[6]):Tt,ct[6]=Rt?c(ct[5],d):dt[6]),Tt=dt[7],Tt&&(ct[7]=Tt),it&_&&(ct[8]=ct[8]==null?dt[8]:_e(ct[8],dt[8])),ct[9]==null&&(ct[9]=dt[9]),ct[0]=dt[0],ct[1]=st,ct}e.exports=et},function(e,s,i){var o=i(228),a=1/0,c=17976931348623157e292;function d(h){if(!h)return h===0?h:0;if(h=o(h),h===a||h===-a){var g=h<0?-1:1;return g*c}return h===h?h:0}e.exports=d},function(e,s,i){var o=i(504),a=/^\s+/;function c(d){return d&&d.slice(0,o(d)+1).replace(a,"")}e.exports=c},function(e,s){var i=/\s/;function o(a){for(var c=a.length;c--&&i.test(a.charAt(c)););return c}e.exports=o},function(e,s,i){var o=i(134),a=8;function c(d,h,g){h=g?void 0:h;var b=o(d,a,void 0,void 0,void 0,void 0,void 0,h);return b.placeholder=c.placeholder,b}c.placeholder={},e.exports=c},function(e,s,i){var o=i(29),a=i(17),c=i(138),d="[object DOMException]",h="[object Error]";function g(b){if(!a(b))return!1;var j=o(b);return j==h||j==d||typeof b.message=="string"&&typeof b.name=="string"&&!c(b)}e.exports=g},function(e,s,i){var o=i(41),a=i(17),c="[object WeakMap]";function d(h){return a(h)&&o(h)==c}e.exports=d},function(e,s,i){var o=i(77),a=i(35),c=1;function d(h){return a(typeof h=="function"?h:o(h,c))}e.exports=d},function(e,s,i){var o=i(510),a=i(514),c=i(234);function d(h){var g=a(h);return g.length==1&&g[0][2]?c(g[0][0],g[0][1]):function(b){return b===h||o(b,h,g)}}e.exports=d},function(e,s,i){var o=i(78),a=i(229),c=1,d=2;function h(g,b,j,_){var $=j.length,_e=$,et=!_;if(g==null)return!_e;for(g=Object(g);$--;){var ct=j[$];if(et&&ct[2]?ct[1]!==g[ct[0]]:!(ct[0]in g))return!1}for(;++$<_e;){ct=j[$];var dt=ct[0],nt=g[dt],it=ct[1];if(et&&ct[2]){if(nt===void 0&&!(dt in g))return!1}else{var st=new o;if(_)var lt=_(nt,it,dt,g,b,st);if(!(lt===void 0?a(it,nt,c|d,_,st):lt))return!1}}return!0}e.exports=h},function(e,s,i){var o=i(78),a=i(230),c=i(512),d=i(513),h=i(41),g=i(12),b=i(64),j=i(85),_=1,$="[object Arguments]",_e="[object Array]",et="[object Object]",ct=Object.prototype,dt=ct.hasOwnProperty;function nt(it,st,lt,ht,Tt,Rt){var vt=g(it),Et=g(st),bt=vt?_e:h(it),Ct=Et?_e:h(st);bt=bt==$?et:bt,Ct=Ct==$?et:Ct;var Ut=bt==et,Xt=Ct==et,Nt=bt==Ct;if(Nt&&b(it)){if(!b(st))return!1;vt=!0,Ut=!1}if(Nt&&!Ut)return Rt||(Rt=new o),vt||j(it)?a(it,st,lt,ht,Tt,Rt):c(it,st,bt,lt,ht,Tt,Rt);if(!(lt&_)){var Jt=Ut&&dt.call(it,"__wrapped__"),zt=Xt&&dt.call(st,"__wrapped__");if(Jt||zt){var nn=Jt?it.value():it,Bt=zt?st.value():st;return Rt||(Rt=new o),Tt(nn,Bt,lt,ht,Rt)}}return Nt?(Rt||(Rt=new o),d(it,st,lt,ht,Tt,Rt)):!1}e.exports=nt},function(e,s,i){var o=i(39),a=i(187),c=i(52),d=i(230),h=i(232),g=i(97),b=1,j=2,_="[object Boolean]",$="[object Date]",_e="[object Error]",et="[object Map]",ct="[object Number]",dt="[object RegExp]",nt="[object Set]",it="[object String]",st="[object Symbol]",lt="[object ArrayBuffer]",ht="[object DataView]",Tt=o?o.prototype:void 0,Rt=Tt?Tt.valueOf:void 0;function vt(Et,bt,Ct,Ut,Xt,Nt,Jt){switch(Ct){case ht:if(Et.byteLength!=bt.byteLength||Et.byteOffset!=bt.byteOffset)return!1;Et=Et.buffer,bt=bt.buffer;case lt:return!(Et.byteLength!=bt.byteLength||!Nt(new a(Et),new a(bt)));case _:case $:case ct:return c(+Et,+bt);case _e:return Et.name==bt.name&&Et.message==bt.message;case dt:case it:return Et==bt+"";case et:var zt=h;case nt:var nn=Ut&b;if(zt||(zt=g),Et.size!=bt.size&&!nn)return!1;var Bt=Jt.get(Et);if(Bt)return Bt==bt;Ut|=j,Jt.set(Et,bt);var sn=d(zt(Et),zt(bt),Ut,Xt,Nt,Jt);return Jt.delete(Et),sn;case st:if(Rt)return Rt.call(Et)==Rt.call(bt)}return!1}e.exports=vt},function(e,s,i){var o=i(182),a=1,c=Object.prototype,d=c.hasOwnProperty;function h(g,b,j,_,$,_e){var et=j&a,ct=o(g),dt=ct.length,nt=o(b),it=nt.length;if(dt!=it&&!et)return!1;for(var st=dt;st--;){var lt=ct[st];if(!(et?lt in b:d.call(b,lt)))return!1}var ht=_e.get(g),Tt=_e.get(b);if(ht&&Tt)return ht==b&&Tt==g;var Rt=!0;_e.set(g,b),_e.set(b,g);for(var vt=et;++st<dt;){lt=ct[st];var Et=g[lt],bt=b[lt];if(_)var Ct=et?_(bt,Et,lt,b,g,_e):_(Et,bt,lt,g,b,_e);if(!(Ct===void 0?Et===bt||$(Et,bt,j,_,_e):Ct)){Rt=!1;break}vt||(vt=lt=="constructor")}if(Rt&&!vt){var Ut=g.constructor,Xt=b.constructor;Ut!=Xt&&"constructor"in g&&"constructor"in b&&!(typeof Ut=="function"&&Ut instanceof Ut&&typeof Xt=="function"&&Xt instanceof Xt)&&(Rt=!1)}return _e.delete(g),_e.delete(b),Rt}e.exports=h},function(e,s,i){var o=i(233),a=i(30);function c(d){for(var h=a(d),g=h.length;g--;){var b=h[g],j=d[b];h[g]=[b,j,o(j)]}return h}e.exports=c},function(e,s,i){var o=i(229),a=i(57),c=i(236),d=i(139),h=i(233),g=i(234),b=i(46),j=1,_=2;function $(_e,et){return d(_e)&&h(et)?g(b(_e),et):function(ct){var dt=a(ct,_e);return dt===void 0&&dt===et?c(ct,_e):o(et,dt,j|_)}}e.exports=$},function(e,s,i){var o=i(190),a=500;function c(d){var h=o(d,function(b){return g.size===a&&g.clear(),b}),g=h.cache;return h}e.exports=c},function(e,s,i){var o=i(39),a=i(33),c=i(12),d=i(69),h=1/0,g=o?o.prototype:void 0,b=g?g.toString:void 0;function j(_){if(typeof _=="string")return _;if(c(_))return a(_,j)+"";if(d(_))return b?b.call(_):"";var $=_+"";return $=="0"&&1/_==-h?"-0":$}e.exports=j},function(e,s){function i(o,a){return o!=null&&a in Object(o)}e.exports=i},function(e,s,i){var o=i(58),a=i(63),c=i(12),d=i(65),h=i(114),g=i(46);function b(j,_,$){_=o(_,j);for(var _e=-1,et=_.length,ct=!1;++_e<et;){var dt=g(_[_e]);if(!(ct=j!=null&&$(j,dt)))break;j=j[dt]}return ct||++_e!=et?ct:(et=j==null?0:j.length,!!et&&h(et)&&d(dt,et)&&(c(j)||a(j)))}e.exports=b},function(e,s,i){var o=i(521),a=i(522),c=i(139),d=i(46);function h(g){return c(g)?o(d(g)):a(g)}e.exports=h},function(e,s){function i(o){return function(a){return a==null?void 0:a[o]}}e.exports=i},function(e,s,i){var o=i(98);function a(c){return function(d){return o(d,c)}}e.exports=a},function(e,s,i){var o=i(134),a=i(140),c=256,d=a(function(h,g){return o(h,c,void 0,void 0,void 0,g)});e.exports=d},function(e,s,i){var o=i(237);function a(c){var d=c==null?0:c.length;return d?o(c,1):[]}e.exports=a},function(e,s,i){var o=i(39),a=i(63),c=i(12),d=o?o.isConcatSpreadable:void 0;function h(g){return c(g)||a(g)||!!(d&&g&&g[d])}e.exports=h},function(e,s,i){var o=i(33),a=i(54),c=i(12),d=i(69),h=i(235),g=i(46),b=i(59);function j(_){return c(_)?o(_,g):d(_)?[_]:a(h(b(_)))}e.exports=j},function(e,s,i){var o=i(528),a=i(236);function c(d,h){return o(d,h,function(g,b){return a(d,b)})}e.exports=c},function(e,s,i){var o=i(98),a=i(529),c=i(58);function d(h,g,b){for(var j=-1,_=g.length,$={};++j<_;){var _e=g[j],et=o(h,_e);b(et,_e)&&a($,c(_e,h),et)}return $}e.exports=d},function(e,s,i){var o=i(83),a=i(58),c=i(65),d=i(11),h=i(46);function g(b,j,_,$){if(!d(b))return b;j=a(j,b);for(var _e=-1,et=j.length,ct=et-1,dt=b;dt!=null&&++_e<et;){var nt=h(j[_e]),it=_;if(nt==="__proto__"||nt==="constructor"||nt==="prototype")return b;if(_e!=ct){var st=dt[nt];it=$?$(st,nt,dt):void 0,it===void 0&&(it=d(st)?st:c(j[_e+1])?[]:{})}o(dt,nt,it),dt=dt[nt]}return b}e.exports=g},function(e,s,i){var o=i(215),a=o("mapKeys",i(531));a.placeholder=i(133),e.exports=a},function(e,s,i){var o=i(62),a=i(99),c=i(35);function d(h,g){var b={};return g=c(g,3),a(h,function(j,_,$){o(b,g(j,_,$),j)}),b}e.exports=d},function(e,s){function i(o){return function(a,c,d){for(var h=-1,g=Object(a),b=d(a),j=b.length;j--;){var _=b[o?j:++h];if(c(g[_],_,g)===!1)break}return a}}e.exports=i},function(e,s,i){(function(o){var a;(function(c){s&&s.nodeType,o&&o.nodeType;var d=typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal);d.global===d||d.window===d||d.self;var h,g=2147483647,b=36,j=1,_=26,$=38,_e=700,et=72,ct=128,dt="-",nt=/^xn--/,it=/[^\x20-\x7E]/,st=/[\x2E\u3002\uFF0E\uFF61]/g,lt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ht=b-j,Tt=Math.floor,Rt=String.fromCharCode;function vt(qt){throw new RangeError(lt[qt])}function Et(qt,Kt){for(var $t=qt.length,Sn=[];$t--;)Sn[$t]=Kt(qt[$t]);return Sn}function bt(qt,Kt){var $t=qt.split("@"),Sn="";$t.length>1&&(Sn=$t[0]+"@",qt=$t[1]),qt=qt.replace(st,".");var On=qt.split("."),tn=Et(On,Kt).join(".");return Sn+tn}function Ct(qt){for(var Kt=[],$t=0,Sn=qt.length,On,tn;$t<Sn;)On=qt.charCodeAt($t++),On>=55296&&On<=56319&&$t<Sn?(tn=qt.charCodeAt($t++),(tn&64512)==56320?Kt.push(((On&1023)<<10)+(tn&1023)+65536):(Kt.push(On),$t--)):Kt.push(On);return Kt}function Ut(qt){return Et(qt,function(Kt){var $t="";return Kt>65535&&(Kt-=65536,$t+=Rt(Kt>>>10&1023|55296),Kt=56320|Kt&1023),$t+=Rt(Kt),$t}).join("")}function Xt(qt){return qt-48<10?qt-22:qt-65<26?qt-65:qt-97<26?qt-97:b}function Nt(qt,Kt){return qt+22+75*(qt<26)-((Kt!=0)<<5)}function Jt(qt,Kt,$t){var Sn=0;for(qt=$t?Tt(qt/_e):qt>>1,qt+=Tt(qt/Kt);qt>ht*_>>1;Sn+=b)qt=Tt(qt/ht);return Tt(Sn+(ht+1)*qt/(qt+$))}function zt(qt){var Kt=[],$t=qt.length,Sn,On=0,tn=ct,bn=et,dn,Mn,$n,Un,Fn,cr,or,wr,Er;for(dn=qt.lastIndexOf(dt),dn<0&&(dn=0),Mn=0;Mn<dn;++Mn)qt.charCodeAt(Mn)>=128&&vt("not-basic"),Kt.push(qt.charCodeAt(Mn));for($n=dn>0?dn+1:0;$n<$t;){for(Un=On,Fn=1,cr=b;$n>=$t&&vt("invalid-input"),or=Xt(qt.charCodeAt($n++)),(or>=b||or>Tt((g-On)/Fn))&&vt("overflow"),On+=or*Fn,wr=cr<=bn?j:cr>=bn+_?_:cr-bn,!(or<wr);cr+=b)Er=b-wr,Fn>Tt(g/Er)&&vt("overflow"),Fn*=Er;Sn=Kt.length+1,bn=Jt(On-Un,Sn,Un==0),Tt(On/Sn)>g-tn&&vt("overflow"),tn+=Tt(On/Sn),On%=Sn,Kt.splice(On++,0,tn)}return Ut(Kt)}function nn(qt){var Kt,$t,Sn,On,tn,bn,dn,Mn,$n,Un,Fn,cr=[],or,wr,Er,Zr;for(qt=Ct(qt),or=qt.length,Kt=ct,$t=0,tn=et,bn=0;bn<or;++bn)Fn=qt[bn],Fn<128&&cr.push(Rt(Fn));for(Sn=On=cr.length,On&&cr.push(dt);Sn<or;){for(dn=g,bn=0;bn<or;++bn)Fn=qt[bn],Fn>=Kt&&Fn<dn&&(dn=Fn);for(wr=Sn+1,dn-Kt>Tt((g-$t)/wr)&&vt("overflow"),$t+=(dn-Kt)*wr,Kt=dn,bn=0;bn<or;++bn)if(Fn=qt[bn],Fn<Kt&&++$t>g&&vt("overflow"),Fn==Kt){for(Mn=$t,$n=b;Un=$n<=tn?j:$n>=tn+_?_:$n-tn,!(Mn<Un);$n+=b)Zr=Mn-Un,Er=b-Un,cr.push(Rt(Nt(Un+Zr%Er,0))),Mn=Tt(Zr/Er);cr.push(Rt(Nt(Mn,0))),tn=Jt($t,wr,Sn==On),$t=0,++Sn}++$t,++Kt}return cr.join("")}function Bt(qt){return bt(qt,function(Kt){return nt.test(Kt)?zt(Kt.slice(4).toLowerCase()):Kt})}function sn(qt){return bt(qt,function(Kt){return it.test(Kt)?"xn--"+nn(Kt):Kt})}h={version:"1.4.1",ucs2:{decode:Ct,encode:Ut},decode:zt,encode:nn,toASCII:sn,toUnicode:Bt},a=function(){return h}.call(s,i,s,o),a!==void 0&&(o.exports=a)})()}).call(this,i(84)(e))},function(e,s,i){e.exports={isString:function(o){return typeof o=="string"},isObject:function(o){return typeof o=="object"&&o!==null},isNull:function(o){return o===null},isNullOrUndefined:function(o){return o==null}}},function(e,s,i){s.decode=s.parse=i(536),s.encode=s.stringify=i(537)},function(e,s,i){function o(c,d){return Object.prototype.hasOwnProperty.call(c,d)}e.exports=function(c,d,h,g){d=d||"&",h=h||"=";var b={};if(typeof c!="string"||c.length===0)return b;var j=/\+/g;c=c.split(d);var _=1e3;g&&typeof g.maxKeys=="number"&&(_=g.maxKeys);var $=c.length;_>0&&$>_&&($=_);for(var _e=0;_e<$;++_e){var et=c[_e].replace(j,"%20"),ct=et.indexOf(h),dt,nt,it,st;ct>=0?(dt=et.substr(0,ct),nt=et.substr(ct+1)):(dt=et,nt=""),it=decodeURIComponent(dt),st=decodeURIComponent(nt),o(b,it)?a(b[it])?b[it].push(st):b[it]=[b[it],st]:b[it]=st}return b};var a=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"}},function(e,s,i){var o=function(h){switch(typeof h){case"string":return h;case"boolean":return h?"true":"false";case"number":return isFinite(h)?h:"";default:return""}};e.exports=function(h,g,b,j){return g=g||"&",b=b||"=",h===null&&(h=void 0),typeof h=="object"?c(d(h),function(_){var $=encodeURIComponent(o(_))+b;return a(h[_])?c(h[_],function(_e){return $+encodeURIComponent(o(_e))}).join(g):$+encodeURIComponent(o(h[_]))}).join(g):j?encodeURIComponent(o(j))+b+encodeURIComponent(o(h)):""};var a=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function c(h,g){if(h.map)return h.map(g);for(var b=[],j=0;j<h.length;j++)b.push(g(h[j],j));return b}var d=Object.keys||function(h){var g=[];for(var b in h)Object.prototype.hasOwnProperty.call(h,b)&&g.push(b);return g}},function(e,s,i){var o=function(){return this||typeof self=="object"&&self}()||Function("return this")(),a=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,c=a&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=i(539),a)o.regeneratorRuntime=c;else try{delete o.regeneratorRuntime}catch{o.regeneratorRuntime=void 0}},function(e,s,i){(function(o){(function(a){var c=Object.prototype,d=c.hasOwnProperty,h,g=typeof Symbol=="function"?Symbol:{},b=g.iterator||"@@iterator",j=g.asyncIterator||"@@asyncIterator",_=g.toStringTag||"@@toStringTag",$=typeof e=="object",_e=a.regeneratorRuntime;if(_e){$&&(e.exports=_e);return}_e=a.regeneratorRuntime=$?e.exports:{};function et(Kt,$t,Sn,On){var tn=$t&&$t.prototype instanceof ht?$t:ht,bn=Object.create(tn.prototype),dn=new Bt(On||[]);return bn._invoke=Nt(Kt,Sn,dn),bn}_e.wrap=et;function ct(Kt,$t,Sn){try{return{type:"normal",arg:Kt.call($t,Sn)}}catch(On){return{type:"throw",arg:On}}}var dt="suspendedStart",nt="suspendedYield",it="executing",st="completed",lt={};function ht(){}function Tt(){}function Rt(){}var vt={};vt[b]=function(){return this};var Et=Object.getPrototypeOf,bt=Et&&Et(Et(sn([])));bt&&bt!==c&&d.call(bt,b)&&(vt=bt);var Ct=Rt.prototype=ht.prototype=Object.create(vt);Tt.prototype=Ct.constructor=Rt,Rt.constructor=Tt,Rt[_]=Tt.displayName="GeneratorFunction";function Ut(Kt){["next","throw","return"].forEach(function($t){Kt[$t]=function(Sn){return this._invoke($t,Sn)}})}_e.isGeneratorFunction=function(Kt){var $t=typeof Kt=="function"&&Kt.constructor;return $t?$t===Tt||($t.displayName||$t.name)==="GeneratorFunction":!1},_e.mark=function(Kt){return Object.setPrototypeOf?Object.setPrototypeOf(Kt,Rt):(Kt.__proto__=Rt,_ in Kt||(Kt[_]="GeneratorFunction")),Kt.prototype=Object.create(Ct),Kt},_e.awrap=function(Kt){return{__await:Kt}};function Xt(Kt){function $t(tn,bn,dn,Mn){var $n=ct(Kt[tn],Kt,bn);if($n.type==="throw")Mn($n.arg);else{var Un=$n.arg,Fn=Un.value;return Fn&&typeof Fn=="object"&&d.call(Fn,"__await")?o.resolve(Fn.__await).then(function(cr){$t("next",cr,dn,Mn)},function(cr){$t("throw",cr,dn,Mn)}):o.resolve(Fn).then(function(cr){Un.value=cr,dn(Un)},function(cr){return $t("throw",cr,dn,Mn)})}}var Sn;function On(tn,bn){function dn(){return new o(function(Mn,$n){$t(tn,bn,Mn,$n)})}return Sn=Sn?Sn.then(dn,dn):dn()}this._invoke=On}Ut(Xt.prototype),Xt.prototype[j]=function(){return this},_e.AsyncIterator=Xt,_e.async=function(Kt,$t,Sn,On){var tn=new Xt(et(Kt,$t,Sn,On));return _e.isGeneratorFunction($t)?tn:tn.next().then(function(bn){return bn.done?bn.value:tn.next()})};function Nt(Kt,$t,Sn){var On=dt;return function(bn,dn){if(On===it)throw new Error("Generator is already running");if(On===st){if(bn==="throw")throw dn;return qt()}for(Sn.method=bn,Sn.arg=dn;;){var Mn=Sn.delegate;if(Mn){var $n=Jt(Mn,Sn);if($n){if($n===lt)continue;return $n}}if(Sn.method==="next")Sn.sent=Sn._sent=Sn.arg;else if(Sn.method==="throw"){if(On===dt)throw On=st,Sn.arg;Sn.dispatchException(Sn.arg)}else Sn.method==="return"&&Sn.abrupt("return",Sn.arg);On=it;var Un=ct(Kt,$t,Sn);if(Un.type==="normal"){if(On=Sn.done?st:nt,Un.arg===lt)continue;return{value:Un.arg,done:Sn.done}}else Un.type==="throw"&&(On=st,Sn.method="throw",Sn.arg=Un.arg)}}}function Jt(Kt,$t){var Sn=Kt.iterator[$t.method];if(Sn===h){if($t.delegate=null,$t.method==="throw"){if(Kt.iterator.return&&($t.method="return",$t.arg=h,Jt(Kt,$t),$t.method==="throw"))return lt;$t.method="throw",$t.arg=new TypeError("The iterator does not provide a 'throw' method")}return lt}var On=ct(Sn,Kt.iterator,$t.arg);if(On.type==="throw")return $t.method="throw",$t.arg=On.arg,$t.delegate=null,lt;var tn=On.arg;if(!tn)return $t.method="throw",$t.arg=new TypeError("iterator result is not an object"),$t.delegate=null,lt;if(tn.done)$t[Kt.resultName]=tn.value,$t.next=Kt.nextLoc,$t.method!=="return"&&($t.method="next",$t.arg=h);else return tn;return $t.delegate=null,lt}Ut(Ct),Ct[_]="Generator",Ct[b]=function(){return this},Ct.toString=function(){return"[object Generator]"};function zt(Kt){var $t={tryLoc:Kt[0]};1 in Kt&&($t.catchLoc=Kt[1]),2 in Kt&&($t.finallyLoc=Kt[2],$t.afterLoc=Kt[3]),this.tryEntries.push($t)}function nn(Kt){var $t=Kt.completion||{};$t.type="normal",delete $t.arg,Kt.completion=$t}function Bt(Kt){this.tryEntries=[{tryLoc:"root"}],Kt.forEach(zt,this),this.reset(!0)}_e.keys=function(Kt){var $t=[];for(var Sn in Kt)$t.push(Sn);return $t.reverse(),function On(){for(;$t.length;){var tn=$t.pop();if(tn in Kt)return On.value=tn,On.done=!1,On}return On.done=!0,On}};function sn(Kt){if(Kt){var $t=Kt[b];if($t)return $t.call(Kt);if(typeof Kt.next=="function")return Kt;if(!isNaN(Kt.length)){var Sn=-1,On=function tn(){for(;++Sn<Kt.length;)if(d.call(Kt,Sn))return tn.value=Kt[Sn],tn.done=!1,tn;return tn.value=h,tn.done=!0,tn};return On.next=On}}return{next:qt}}_e.values=sn;function qt(){return{value:h,done:!0}}Bt.prototype={constructor:Bt,reset:function(Kt){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(nn),!Kt)for(var $t in this)$t.charAt(0)==="t"&&d.call(this,$t)&&!isNaN(+$t.slice(1))&&(this[$t]=h)},stop:function(){this.done=!0;var Kt=this.tryEntries[0],$t=Kt.completion;if($t.type==="throw")throw $t.arg;return this.rval},dispatchException:function(Kt){if(this.done)throw Kt;var $t=this;function Sn($n,Un){return bn.type="throw",bn.arg=Kt,$t.next=$n,Un&&($t.method="next",$t.arg=h),!!Un}for(var On=this.tryEntries.length-1;On>=0;--On){var tn=this.tryEntries[On],bn=tn.completion;if(tn.tryLoc==="root")return Sn("end");if(tn.tryLoc<=this.prev){var dn=d.call(tn,"catchLoc"),Mn=d.call(tn,"finallyLoc");if(dn&&Mn){if(this.prev<tn.catchLoc)return Sn(tn.catchLoc,!0);if(this.prev<tn.finallyLoc)return Sn(tn.finallyLoc)}else if(dn){if(this.prev<tn.catchLoc)return Sn(tn.catchLoc,!0)}else if(Mn){if(this.prev<tn.finallyLoc)return Sn(tn.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Kt,$t){for(var Sn=this.tryEntries.length-1;Sn>=0;--Sn){var On=this.tryEntries[Sn];if(On.tryLoc<=this.prev&&d.call(On,"finallyLoc")&&this.prev<On.finallyLoc){var tn=On;break}}tn&&(Kt==="break"||Kt==="continue")&&tn.tryLoc<=$t&&$t<=tn.finallyLoc&&(tn=null);var bn=tn?tn.completion:{};return bn.type=Kt,bn.arg=$t,tn?(this.method="next",this.next=tn.finallyLoc,lt):this.complete(bn)},complete:function(Kt,$t){if(Kt.type==="throw")throw Kt.arg;return Kt.type==="break"||Kt.type==="continue"?this.next=Kt.arg:Kt.type==="return"?(this.rval=this.arg=Kt.arg,this.method="return",this.next="end"):Kt.type==="normal"&&$t&&(this.next=$t),lt},finish:function(Kt){for(var $t=this.tryEntries.length-1;$t>=0;--$t){var Sn=this.tryEntries[$t];if(Sn.finallyLoc===Kt)return this.complete(Sn.completion,Sn.afterLoc),nn(Sn),lt}},catch:function(Kt){for(var $t=this.tryEntries.length-1;$t>=0;--$t){var Sn=this.tryEntries[$t];if(Sn.tryLoc===Kt){var On=Sn.completion;if(On.type==="throw"){var tn=On.arg;nn(Sn)}return tn}}throw new Error("illegal catch attempt")},delegateYield:function(Kt,$t,Sn){return this.delegate={iterator:sn(Kt),resultName:$t,nextLoc:Sn},this.method==="next"&&(this.arg=h),lt}}})(function(){return this||typeof self=="object"&&self}()||Function("return this")())}).call(this,i(0))},function(e,s,i){var o=i(241),a=i(242),c,d,h=0,g=0;function b(j,_,$){var _e=_&&$||0,et=_||[];j=j||{};var ct=j.node||c,dt=j.clockseq!==void 0?j.clockseq:d;if(ct==null||dt==null){var nt=o();ct==null&&(ct=c=[nt[0]|1,nt[1],nt[2],nt[3],nt[4],nt[5]]),dt==null&&(dt=d=(nt[6]<<8|nt[7])&16383)}var it=j.msecs!==void 0?j.msecs:new Date().getTime(),st=j.nsecs!==void 0?j.nsecs:g+1,lt=it-h+(st-g)/1e4;if(lt<0&&j.clockseq===void 0&&(dt=dt+1&16383),(lt<0||it>h)&&j.nsecs===void 0&&(st=0),st>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=it,g=st,d=dt,it+=122192928e5;var ht=((it&268435455)*1e4+st)%4294967296;et[_e++]=ht>>>24&255,et[_e++]=ht>>>16&255,et[_e++]=ht>>>8&255,et[_e++]=ht&255;var Tt=it/4294967296*1e4&268435455;et[_e++]=Tt>>>8&255,et[_e++]=Tt&255,et[_e++]=Tt>>>24&15|16,et[_e++]=Tt>>>16&255,et[_e++]=dt>>>8|128,et[_e++]=dt&255;for(var Rt=0;Rt<6;++Rt)et[_e+Rt]=ct[Rt];return _||a(et)}e.exports=b},function(e,s,i){var o=i(241),a=i(242);function c(d,h,g){var b=h&&g||0;typeof d=="string"&&(h=d==="binary"?new Array(16):null,d=null),d=d||{};var j=d.random||(d.rng||o)();if(j[6]=j[6]&15|64,j[8]=j[8]&63|128,h)for(var _=0;_<16;++_)h[b+_]=j[_];return h||a(j)}e.exports=c},function(e,s,i){const o=i(9),a=i(1)("analytics"),c=i(543),d=i(15),h=i(243),g=i(100),b=g.prependProxyToUrlIfNeeded,j=i(101),_=j.getProxyUrl,$=d(),_e=new c;e.exports=function(ct){var dt=this;let nt=ct.loggingUrl,it=ct.queue,st=it===void 0?_e:it,lt=ct.ajax,ht=lt===void 0?h:lt;this.loggingUrl=nt,this.updateEndPoints=()=>{if(!this.proxyUrl){this.proxyUrl=_();const Et=b(this.loggingUrl,this.proxyUrl);this.loggingUrl=Et}this.endPoint=`${this.loggingUrl}/logging/ClientEvent`,this.endPointQos=`${this.loggingUrl}/logging/ClientQos`},this.updateEndPoints();const Tt={},Rt=function(bt,Ct,Ut){Ct===void 0&&(Ct=()=>{}),st.add(Xt=>{a.debug("sending analytics:",dt.loggingUrl,bt),ht.post(Ut?dt.endPointQos:dt.endPoint,{body:bt,overrideMimeType:"text/plain",headers:{Accept:"text/plain","Content-Type":"application/json"}},Nt=>{Nt&&a.debug("Failed to send ClientEvent, moving on to the next item."),Ct(Nt||void 0),Xt()})})},vt=(Et,bt,Ct)=>{if(!Ct)return!1;const Ut=[Ct,bt,Et].join("_"),Xt=100;return(Tt[Ut]||0)>=Xt};this.logError=function(Et,bt,Ct,Ut,Xt){Ut===void 0&&(Ut=null),Xt===void 0&&(Xt={});const Nt=Xt,Jt=Nt.partnerId;if(vt(Et,bt,Jt))return;const zt=[Jt,bt,Et].join("_"),nn=Ut;Tt[zt]=typeof Tt[zt]<"u"?Tt[zt]+1:1,dt.logEvent(o(Xt,{action:`${bt}.${Et}`,payload:nn}),!1)},this.logEvent=function(Et,bt,Ct,Ut){bt===void 0&&(bt=!1),Ut===void 0&&(Ut=()=>{}),dt.updateEndPoints();const Xt=Object.assign({},Et,{clientInstanceId:$});if(Ct&&!isNaN(Ct)&&Math.random()>Ct){a.debug("skipping sending analytics due to throttle:",Xt);return}a.debug("queueing analytics:",dt.loggingUrl,Xt);let Nt;try{Nt=JSON.stringify(Xt)}catch(Jt){Ut(Jt);return}Rt(Nt,Ut,bt)},this.logQOS=Et=>this.logEvent(Et,!0)}},function(e,s,i){let o=function(){function a(d){let h=d===void 0?{}:d,g=h.waitTime,b=g===void 0?50:g;this.queue=[],this.running=!1,this.waitTime=b}var c=a.prototype;return c.add=function(h){this.queue.push(h),this.run()},c.run=function(){if(this.running)return;this.running=!0;const h=()=>{if(this.queue.length===0){this.running=!1;return}this.queue.shift()(()=>{setTimeout(h,this.waitTime)})};h()},a}();e.exports=o},function(e,s,i){const o=i(11),a={for:"htmlFor",class:"className"};e.exports=function(c){c.prototype.attr=function(g,b){if(o(g)){let j;Object.keys(g).forEach(_=>{j=a[_]||_,this.first.setAttribute(j,g[_])})}else{if(b===void 0)return this.first.getAttribute(a[g]||g);this.first.setAttribute(a[g]||g,b)}return this},c.prototype.removeAttr=function(g){const b=a[g]||g;return this.forEach(j=>{j.removeAttribute(b)}),this},c.prototype.html=function(g){return g!==void 0&&(this.first.innerHTML=g),this.first.innerHTML},c.prototype.center=function(g,b){let j;return this.forEach(_=>{j=new c(_),g=g||parseInt(j.width(),10),b=b||parseInt(j.height(),10);const $=`${-.5*g}px`,_e=`${-.5*b}px`;j.css("margin",`${_e} 0 0 ${$}`).addClass("OT_centered")}),this},c._attachToOTHelpers.centerElement=function(g,b,j){return new c(g).center(b,j)};const d=function(b){return b.offsetWidth>0?`${b.offsetWidth}px`:new c(b).css("width")},h=function(b){return b.offsetHeight>0?`${b.offsetHeight}px`:new c(b).css("height")};c.prototype.width=function(g){return g?(this.css("width",g),this):this.isDisplayNone()?this.makeVisibleAndYield(b=>d(b))[0]:d(this.get(0))},c._attachToOTHelpers.width=function(g,b){const j=new c(g).width(b);return b?c._attachToOTHelpers:j},c.prototype.height=function(g){return g?(this.css("height",g),this):this.isDisplayNone()?this.makeVisibleAndYield(b=>h(b))[0]:h(this.get(0))},c._attachToOTHelpers.height=function(g,b){const j=new c(g).height(b);return b?c._attachToOTHelpers:j}}},function(e,s,i){const o=i(2),a=(typeof window!==void 0?window:commonjsGlobal).getComputedStyle,c={Firefox:"moz",Opera:"O",Chrome:"Webkit",Safari:"Webkit"};function d(){return c[o.name]}e.exports=function(h,g){const b={},j={},_=function(st){if(j[st.ownerDocument]&&j[st.ownerDocument][st.nodeName])return j[st.ownerDocument][st.nodeName];j[st.ownerDocument]||(j[st.ownerDocument]={});let lt=st.ownerDocument.createElement(st.nodeName),ht;return st.ownerDocument.body.appendChild(lt),ht=new h(lt).css("display"),j[st.ownerDocument][st.nodeName]=ht,new h(lt).remove(),lt=null,ht},$=function(st){return a(st).getPropertyValue("display")==="none"},_e=function(st,lt){if(lt in st.style)return lt;const Tt=d()+lt[0].toUpperCase()+lt.slice(1);return Tt in st.style?Tt:lt},et=function(st,lt){const ht=st.style;for(const Tt in lt)lt.hasOwnProperty(Tt)&&(ht[_e(st,Tt)]=lt[Tt])},ct=function(st,lt,ht){st.style[_e(st,lt)]=ht},dt=function(st,lt){const ht=_e(st,lt);let Rt=a(st).getPropertyValue(ht);return Rt===""&&(Rt=st.style[ht]),Rt},nt=function(st,lt,ht){const Tt=new h(st),Rt={};let vt,Et;for(vt in lt)lt.hasOwnProperty(vt)&&(Rt[vt]=st.style[vt],Tt.css(vt,lt[vt]));Et=ht(st);for(vt in lt)lt.hasOwnProperty(vt)&&Tt.css(vt,Rt[vt]||"");return Et};h.prototype.show=function(){return this.forEach(it=>{const st=it.style.display;(st===""||st==="none")&&(it.style.display=b[it]||"",delete b[it]),$(it)&&(b[it]="none",it.style.display=_(it))})},h.prototype.hide=function(){return this.forEach(it=>{it.style.display!=="none"&&(b[it]=it.style.display,it.style.display="none")})},h.prototype.css=function(it,st){if(this.length!==0)return typeof it!="string"?this.forEach(lt=>{et(lt,it)}):st!==void 0?this.forEach(lt=>{ct(lt,it,st)}):dt(this.first,it)},h.prototype.makeVisibleAndYield=function(it){const st={display:"block",visibility:"hidden"},lt=[];return this.forEach(ht=>{const Tt=g(ht);Tt?lt.push(nt(Tt,st,it)):lt.push(void 0)}),lt}}},function(e,s,i){(function(o){const a=i(547),c=a.isiPhone,d=a.isiPad,h=a.isiOS,g=i(548),b=i(549),j=nt=>{var it,st;return nt=nt||((it=typeof window!==void 0?window:commonjsGlobal)==null?void 0:it.navigator),((st=nt)==null?void 0:st.userAgent.toLowerCase().indexOf("electron"))>=0},_=()=>{var nt,it,st;return typeof((nt=typeof window!==void 0?window:commonjsGlobal)==null||(it=nt.process)==null||(st=it.versions)==null?void 0:st.node)=="string"&&!j()};let $;const _e=()=>{$={version:-1,name:"unknown"}},et=()=>{$.name="Node",$.isNode=!0,$.version=parseInt(o.versions.node,10),$.userAgent=`${$.name} ${$.version}`},ct=nt=>{if(nt=nt||(typeof window!==void 0?window:commonjsGlobal).navigator,$.userAgent=nt.userAgent.toLowerCase(),$.name="unknown",$.userAgent.indexOf("opera")>-1||$.userAgent.indexOf("opr/")>-1)$.name="Opera",$.isOpera=!0,/opr\/([0-9]{1,}[.0-9]{0,})/.exec($.userAgent)!==null&&($.version=parseFloat(RegExp.$1));else if($.userAgent.indexOf("firefox")>-1)$.name="Firefox",$.isFirefox=!0,/firefox\/([0-9]{1,}[.0-9]{0,})/.exec($.userAgent)!==null&&($.version=parseFloat(RegExp.$1));else if($.userAgent.match(/edge?\/(\d+)(?:\.\d+)+$/)){$.name="Edge",$.isEdge=!0;const it=RegExp.$1;$.version=parseInt(it,10)}else $.userAgent.indexOf("chrome")>-1?($.name="Chrome",$.isElectron=j(nt),$.isElectron?$.electronVersion=b(nt.userAgent):$.isChrome=!0,/chrome\/([0-9]{1,}[.0-9]{0,})/.exec($.userAgent)!==null&&($.version=parseFloat(RegExp.$1))):nt.vendor&&nt.vendor.toLowerCase().indexOf("apple")>-1?($.name="Safari",$.isSafari=!0,$.isiPhone=c(nt.userAgent),$.isiPad=d(nt.userAgent),$.isiOS=h(nt.userAgent),$.isiOS&&($.iOSVersion=g(nt.userAgent)),(/version\/([0-9]{1,}[.0-9]{0,})/.exec($.userAgent)!==null||/fxios\/([0-9]{1,}[.0-9]{0,})/.exec($.userAgent)!==null||/crios\/([0-9]{1,}[.0-9]{0,})/.exec($.userAgent)!==null)&&($.version=parseFloat(RegExp.$1))):$.userAgent.indexOf("applewebkit")>-1&&$.userAgent.indexOf("version")===-1&&($.isIosWebView=!0);$.isChromiumEdge=$.name==="Edge"&&$.version>=79,$.isLegacyEdge=$.name==="Edge"&&$.version<79,$.isLegacyElectron=$.isElectron&&$.electronVersion<7,$.isLegacyChrome=$.isChrome&&$.version<87,$.isChromium=!!($.isChrome||$.isChromiumEdge||$.isElectron||$.isOpera),$.isAndroid=$.userAgent.indexOf("android")>-1,$.userAgent=nt.userAgent,$.protocol=location.protocol,$.hostName=location.hostName,($.version===-1||$.name==="unknown"||$.isiOS&&!$.iOSVersion)&&($.error=!0)},dt=nt=>(_e(),_()?et():ct(nt),$);e.exports={parse:dt,isNode:_}}).call(this,i(42))},function(e,s,i){const o=h=>/iPhone/.test(h),a=h=>{try{return h.includes("Mac")&&"ontouchend"in document}catch{return!1}},c=h=>/iPad/.test(h)||a(h),d=h=>o(h)||c(h);e.exports={isiPhone:o,isiPad:c,isiOS:d}},function(e,s,i){e.exports=function(a){const c=a.match(/OS (\d+_\d+).* like Mac/);if(!(c===null||!c[1]))return parseFloat(c[1].replace("_","."))}},function(e,s,i){const o=/(Electron)\/([0-9]{1,}[.0-9]{0,})/;e.exports=a=>{const c=a.match(o);return c&&parseFloat(c[2])}},function(e,s,i){const o=i(551);function a(g,b){return b?o()?g.classList.contains(b):g.className.indexOf(b)>-1:!1}function c(g,b){if(!b||b.length===0||g.nodeType!==1)return;const j=b.length;let _=0;if(o()){for(;_<j;++_)g.classList.toggle(b[_]);return}let $=` ${g.className} `.replace(/[\s+]/," ");for(;_<j;++_)a(g,b[_])?$=$.replace(` ${b[_]} `," "):$+=`${b[_]} `;g.className=$.trim()}function d(g,b){if(!b||b.length===0||g.nodeType!==1)return;const j=b.length;let _=0;if(o()){for(;_<j;++_)g.classList.add(b[_]);return}if(!g.className&&b.length===1)g.className=b.join(" ");else{let $=` ${g.className} `;for(;_<j;++_)~$.indexOf(` ${b[_]} `)||($+=`${b[_]} `);g.className=$.trim()}}function h(g,b){if(!b||b.length===0||g.nodeType!==1)return;const j=b.length;let _=0;if(o()){for(;_<j;++_)g.classList.remove(b[_]);return}let $=` ${g.className} `.replace(/[\s+]/," ");for(;_<j;++_)$=$.replace(` ${b[_]} `," ");g.className=$.trim()}e.exports=function(g){g.prototype.addClass=function(b){if(b){const j=b.trim().split(/\s+/);this.forEach(_=>{d(_,j)})}return this},g.prototype.removeClass=function(b){if(b){const j=b.trim().split(/\s+/);this.forEach(_=>{h(_,j)})}return this},g.prototype.toggleClass=function(b){if(b){const j=b.trim().split(/\s+/);this.forEach(_=>{c(_,j)})}return this},g.prototype.hasClass=function(b){return this.some(j=>a(j,b))}}},function(e,s,i){e.exports=()=>typeof document<"u"&&"classList"in document.createElement("a")},function(e,s,i){const o=i(553);e.exports=function(a){let c=0,d=0;const h=function(_,$,_e){const et={},ct=function(it){switch(it){case"width":return new a(_).width();case"height":return new a(_).height();default:return new a(_).css(it)}};$.forEach(nt=>{et[nt]=ct(nt)});const dt=new(typeof window!==void 0?window:commonjsGlobal).MutationObserver(nt=>{const it={};nt.forEach(st=>{if(st.attributeName!=="style")return;const lt=new a(_).isDisplayNone();$.forEach(ht=>{if(lt&&(ht==="width"||ht==="height"))return;const Tt=ct(ht);Tt!==et[ht]&&(it[ht]=[et[ht],Tt],et[ht]=Tt)})}),o(it)||setTimeout(()=>{_e.call(null,it)})});return dt.observe(_,{attributes:!0,attributeFilter:["style"],childList:!1,characterData:!1,subtree:!1}),dt},g=function(_,$){const _e=new(typeof window!==void 0?window:commonjsGlobal).MutationObserver(ct=>{let dt=[];ct.forEach(nt=>{nt.removedNodes.length&&(dt=dt.concat(Array.prototype.slice.call(nt.removedNodes)))}),dt.length&&setTimeout(()=>{$(new a(dt))})});_e.observe(_,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),d++;const et=_e.disconnect;return _e.disconnect=function(){et.apply(_e,arguments),d--},_e},b=function(_,$){let _e={width:0,height:0};const et=setInterval(()=>{const ct=_.getBoundingClientRect();(_e.width!==ct.width||_e.height!==ct.height)&&($(ct,_e),_e={width:ct.width,height:ct.height})},1e3/5);return c++,{disconnect(){clearInterval(et),c--}}};a.prototype.observeStyleChanges=function(j,_){const $=[];return this.forEach(_e=>{$.push(h(_e,j,_))}),$},a.prototype.observeNodeOrChildNodeRemoval=function(j){const _=[];return this.forEach($=>{_.push(g($,j))}),_},a.prototype.observeSize=function(j){const _=[];return this.forEach($=>{_.push(b($,j))}),_},a._attachToOTHelpers.observeStyleChanges=function(j,_,$){return new a(j).observeStyleChanges(_,$)[0]},a._attachToOTHelpers.observeNodeOrChildNodeRemoval=function(j,_){return new a(j).observeNodeOrChildNodeRemoval(_)[0]},a.__testOnly||(a.__testOnly={}),a.__testOnly.sizeObserverCount=function(){return c},a.__testOnly.nodeRemovalObserverCount=function(){return d}}},function(e,s,i){var o=i(116),a=i(41),c=i(63),d=i(12),h=i(25),g=i(64),b=i(67),j=i(85),_="[object Map]",$="[object Set]",_e=Object.prototype,et=_e.hasOwnProperty;function ct(dt){if(dt==null)return!0;if(h(dt)&&(d(dt)||typeof dt=="string"||typeof dt.splice=="function"||g(dt)||j(dt)||c(dt)))return!dt.length;var nt=a(dt);if(nt==_||nt==$)return!dt.size;if(b(dt))return!o(dt).length;for(var it in dt)if(et.call(dt,it))return!1;return!0}e.exports=ct},function(e,s,i){e.exports={1004:"Authentication error",1005:"Invalid Session ID",1006:"Connect Failed",1007:"Connect Rejected",1008:"Connect Time-out",1009:"Security Error",1010:"Not Connected",1011:"Invalid Parameter",1012:"Peer-to-peer Stream Play Failed",1013:"Connection Failed",1014:"API Response Failure",1015:"PeerConnection not connected, cannot call this method",1021:"Request Timeout",1026:"Terms of Service Violation: Export Compliance",1027:"Connection Limit Exceeded",1040:"Set Video Source Failure",1041:"Invalid Video Source",1500:"Unable to Publish",1501:"Unable to Subscribe",1502:"Unsupported Video Codec",1503:"No TURN server found",1520:"Unable to Force Disconnect",1530:"Unable to Force Unpublish",1540:"Unable to Force Mute",1553:"Publisher ICEWorkflow failed",1554:"Subscriber ICEWorkflow failed",1600:"createOffer, createAnswer, setLocalDescription, setRemoteDescription",1605:"Stream Limit Exceeded",2e3:"Internal Error",2001:"Unexpected Server Response",2021:"Proxy URL Timing Error",2022:"Proxy URL Already Set Error",2031:"getRtcStatsReport is not supported in this browser",4e3:"WebSocket Connection Failed",4001:"WebSocket Network Disconnected",5001:"Unable to access media engine"}},function(e,s,i){const o=i(16);e.exports=function(c,d,h,g,b){let j,_=h;c.currentState=h;const $=function(et){if(_!==et){if(d.indexOf(et)===-1){b&&o(b)&&b("invalidState",et);return}c.previousState=_,j=_,c.currentState=et,_=et,g&&o(g)&&g(et,j)}};return c.is=function(){return Array.prototype.indexOf.call(arguments,_)!==-1},c.isNot=function(){return Array.prototype.indexOf.call(arguments,_)===-1},$}},function(e,s,i){const o=i(246),a={};e.exports=a,a.isElementNode=function(c){return c&&typeof c=="object"&&c.nodeType===1},a.createElement=function(c,d,h,g){const b=(g||document).createElement(c);d=d||{},Object.keys(d).forEach(_=>{if(typeof d[_]=="object"){b[_]||(b[_]={});const $=d[_];Object.keys($).forEach(_e=>{b[_][_e]=$[_e]})}else _==="className"?b.className=d[_]:b.setAttribute(_,d[_])});const j=function($){typeof $=="string"?b.innerHTML+=$:b.appendChild($)};return Array.isArray(h)?h.forEach(j):h&&j(h),b},o(a)},function(e,s,i){const o=i(558);e.exports=(a,c)=>{if(typeof a=="string"&&typeof c=="string"){const d=o(a),h=c.match(/(\w+:\/\/)(.*)/),g=h[1],b=h[2];return`${g}${d}/${b}`}return c}},function(e,s,i){e.exports=o=>o.replace(/\/+$/,"").replace(/^.*:\/+/,"")},function(e,s,i){const o=i(560);e.exports=function(a){a===void 0&&(a={});const c=a.isSessionProxied||i(561),d=a,h=d.sessionId;c(h)&&o.forEach(g=>{g in a&&(a[g]="")})}},function(e,s,i){e.exports=["audioLocalAddress","audioRemoteAddress","videoLocalAddress","videoRemoteAddress"]},function(e,s,i){const a=i(21).sessions;e.exports=c=>{const d=a.get(c);return d?!!d._.getProxyUrl():!1}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d={architecture:"event_ua_arch",bitness:"event_ua_bitness",model:"event_ua_model",platformVersion:"event_ua_platform_version"},h=function(){var g=(0,c.default)(a.default.mark(function b(j){var _,$;return a.default.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:if(_={},!(j!=null&&j.getHighEntropyValues)){et.next=6;break}return et.next=4,j.getHighEntropyValues(Object.keys(d));case 4:$=et.sent,$&&Object.entries(d).forEach(ct=>{let dt=ct[0],nt=ct[1];$[dt]!==void 0&&(_[nt]=$[dt])});case 6:return et.abrupt("return",_);case 7:case"end":return et.stop()}},b)}));return function(j){return g.apply(this,arguments)}}();e.exports=h},function(e,s,i){const o=["buildHash","minimumVersion","debug",["websiteURL","websiteUrl"],["cdnURL","cdnUrl"],["loggingURL","loggingUrl"],["apiURL","apiUrl"],["supportSSL",!0],["cdnURLSSL","cdnUrl"],["loggingURLSSL","loggingUrl"],["apiURLSSL","apiUrl"],["assetURL","assetUrl"]];e.exports=o},function(e,s,i){const o=["apiUrl","apiURL","apiURLSSL"];e.exports=o},function(e,s,i){e.exports=function(){const a=(typeof window!==void 0?window:commonjsGlobal).OT,c=(typeof window!==void 0?window:commonjsGlobal).TB;return()=>{const d=(typeof window!==void 0?window:commonjsGlobal).OT;return(typeof window!==void 0?window:commonjsGlobal).OT=a,(typeof window!==void 0?window:commonjsGlobal).TB=c,d}}},function(e,s,i){const o=a=>{const c={};return Object.getOwnPropertyNames(a).forEach(d=>{c[d]=Object.getOwnPropertyDescriptor(a,d)}),c};e.exports=function(c){function d(){for(var h=arguments.length,g=new Array(h),b=0;b<h;b++)g[b]=arguments[b];const j=new c(...g);return Object.setPrototypeOf(j,d.prototype),j}return d.prototype=Object.create(c.prototype),Object.defineProperties(d.prototype,o(c.prototype)),Object.keys(c).forEach(h=>{d[h]=c[h]}),d}},function(e,s,i){var o=i(27);e.exports=function(a,c){var d=a&&a.window,h={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var g in c)hasOwnProperty.call(c,g)&&(h[g]=c[g]);var b=o.log,j=o.detectBrowser(d),_=i(568)||null,$=i(570)||null,_e=i(574)||null,et=i(576)||null,ct=i(577)||null,dt={browserDetails:j,commonShim:ct,extractVersion:o.extractVersion,disableLog:o.disableLog,disableWarnings:o.disableWarnings};switch(j.browser){case"chrome":if(!_||!_.shimPeerConnection||!h.shimChrome)return b("Chrome shim is not included in this adapter release."),dt;b("adapter.js shimming chrome."),dt.browserShim=_,ct.shimCreateObjectURL(d),_.shimGetUserMedia(d),_.shimMediaStream(d),_.shimSourceObject(d),_.shimPeerConnection(d),_.shimOnTrack(d),_.shimAddTrackRemoveTrack(d),_.shimGetSendersWithDtmf(d),_.shimSenderReceiverGetStats(d),_.fixNegotiationNeeded(d),ct.shimRTCIceCandidate(d),ct.shimMaxMessageSize(d),ct.shimSendThrowTypeError(d);break;case"firefox":if(!_e||!_e.shimPeerConnection||!h.shimFirefox)return b("Firefox shim is not included in this adapter release."),dt;b("adapter.js shimming firefox."),dt.browserShim=_e,ct.shimCreateObjectURL(d),_e.shimGetUserMedia(d),_e.shimSourceObject(d),_e.shimPeerConnection(d),_e.shimOnTrack(d),_e.shimRemoveStream(d),_e.shimSenderGetStats(d),_e.shimReceiverGetStats(d),_e.shimRTCDataChannel(d),ct.shimRTCIceCandidate(d),ct.shimMaxMessageSize(d),ct.shimSendThrowTypeError(d);break;case"edge":if(!$||!$.shimPeerConnection||!h.shimEdge)return b("MS edge shim is not included in this adapter release."),dt;b("adapter.js shimming edge."),dt.browserShim=$,ct.shimCreateObjectURL(d),$.shimGetUserMedia(d),$.shimPeerConnection(d),$.shimReplaceTrack(d),$.shimGetDisplayMedia(d),ct.shimMaxMessageSize(d),ct.shimSendThrowTypeError(d);break;case"safari":if(!et||!h.shimSafari)return b("Safari shim is not included in this adapter release."),dt;b("adapter.js shimming safari."),dt.browserShim=et,ct.shimCreateObjectURL(d),et.shimRTCIceServerUrls(d),et.shimCreateOfferLegacy(d),et.shimCallbacksAPI(d),et.shimLocalStreamsAPI(d),et.shimRemoteStreamsAPI(d),et.shimTrackEventTransceiver(d),et.shimGetUserMedia(d),ct.shimRTCIceCandidate(d),ct.shimMaxMessageSize(d),ct.shimSendThrowTypeError(d);break;default:b("Unsupported browser!");break}return dt}},function(e,s,i){(function(o){var a=i(27),c=a.log;function d(g,b,j){!b||j.has(b.id)||(j.set(b.id,b),Object.keys(b).forEach(function(_){_.endsWith("Id")?d(g,g.get(b[_]),j):_.endsWith("Ids")&&b[_].forEach(function($){d(g,g.get($),j)})}))}function h(g,b,j){var _=j?"outbound-rtp":"inbound-rtp",$=new Map;if(b===null)return $;var _e=[];return g.forEach(function(et){et.type==="track"&&et.trackIdentifier===b.id&&_e.push(et)}),_e.forEach(function(et){g.forEach(function(ct){ct.type===_&&ct.trackId===et.id&&d(g,ct,$)})}),$}e.exports={shimGetUserMedia:i(569),shimMediaStream:function(g){g.MediaStream=g.MediaStream||g.webkitMediaStream},shimOnTrack:function(g){if(typeof g=="object"&&g.RTCPeerConnection&&!("ontrack"in g.RTCPeerConnection.prototype)){Object.defineProperty(g.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(j){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=j)},enumerable:!0,configurable:!0});var b=g.RTCPeerConnection.prototype.setRemoteDescription;g.RTCPeerConnection.prototype.setRemoteDescription=function(){var j=this;return j._ontrackpoly||(j._ontrackpoly=function(_){_.stream.addEventListener("addtrack",function($){var _e;g.RTCPeerConnection.prototype.getReceivers?_e=j.getReceivers().find(function(ct){return ct.track&&ct.track.id===$.track.id}):_e={track:$.track};var et=new Event("track");et.track=$.track,et.receiver=_e,et.transceiver={receiver:_e},et.streams=[_.stream],j.dispatchEvent(et)}),_.stream.getTracks().forEach(function($){var _e;g.RTCPeerConnection.prototype.getReceivers?_e=j.getReceivers().find(function(ct){return ct.track&&ct.track.id===$.id}):_e={track:$};var et=new Event("track");et.track=$,et.receiver=_e,et.transceiver={receiver:_e},et.streams=[_.stream],j.dispatchEvent(et)})},j.addEventListener("addstream",j._ontrackpoly)),b.apply(j,arguments)}}else a.wrapPeerConnectionEvent(g,"track",function(j){return j.transceiver||Object.defineProperty(j,"transceiver",{value:{receiver:j.receiver}}),j})},shimGetSendersWithDtmf:function(g){if(typeof g=="object"&&g.RTCPeerConnection&&!("getSenders"in g.RTCPeerConnection.prototype)&&"createDTMFSender"in g.RTCPeerConnection.prototype){var b=function(ct,dt){return{track:dt,get dtmf(){return this._dtmf===void 0&&(dt.kind==="audio"?this._dtmf=ct.createDTMFSender(dt):this._dtmf=null),this._dtmf},_pc:ct}};if(!g.RTCPeerConnection.prototype.getSenders){g.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var j=g.RTCPeerConnection.prototype.addTrack;g.RTCPeerConnection.prototype.addTrack=function(ct,dt){var nt=this,it=j.apply(nt,arguments);return it||(it=b(nt,ct),nt._senders.push(it)),it};var _=g.RTCPeerConnection.prototype.removeTrack;g.RTCPeerConnection.prototype.removeTrack=function(ct){var dt=this;_.apply(dt,arguments);var nt=dt._senders.indexOf(ct);nt!==-1&&dt._senders.splice(nt,1)}}var $=g.RTCPeerConnection.prototype.addStream;g.RTCPeerConnection.prototype.addStream=function(ct){var dt=this;dt._senders=dt._senders||[],$.apply(dt,[ct]),ct.getTracks().forEach(function(nt){dt._senders.push(b(dt,nt))})};var _e=g.RTCPeerConnection.prototype.removeStream;g.RTCPeerConnection.prototype.removeStream=function(ct){var dt=this;dt._senders=dt._senders||[],_e.apply(dt,[ct]),ct.getTracks().forEach(function(nt){var it=dt._senders.find(function(st){return st.track===nt});it&&dt._senders.splice(dt._senders.indexOf(it),1)})}}else if(typeof g=="object"&&g.RTCPeerConnection&&"getSenders"in g.RTCPeerConnection.prototype&&"createDTMFSender"in g.RTCPeerConnection.prototype&&g.RTCRtpSender&&!("dtmf"in g.RTCRtpSender.prototype)){var et=g.RTCPeerConnection.prototype.getSenders;g.RTCPeerConnection.prototype.getSenders=function(){var ct=this,dt=et.apply(ct,[]);return dt.forEach(function(nt){nt._pc=ct}),dt},Object.defineProperty(g.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(g){if(typeof g=="object"&&g.RTCPeerConnection&&g.RTCRtpSender&&g.RTCRtpReceiver){if(!("getStats"in g.RTCRtpSender.prototype)){var b=g.RTCPeerConnection.prototype.getSenders;b&&(g.RTCPeerConnection.prototype.getSenders=function(){var _e=this,et=b.apply(_e,[]);return et.forEach(function(ct){ct._pc=_e}),et});var j=g.RTCPeerConnection.prototype.addTrack;j&&(g.RTCPeerConnection.prototype.addTrack=function(){var _e=j.apply(this,arguments);return _e._pc=this,_e}),g.RTCRtpSender.prototype.getStats=function(){var _e=this;return this._pc.getStats().then(function(et){return h(et,_e.track,!0)})}}if(!("getStats"in g.RTCRtpReceiver.prototype)){var _=g.RTCPeerConnection.prototype.getReceivers;_&&(g.RTCPeerConnection.prototype.getReceivers=function(){var _e=this,et=_.apply(_e,[]);return et.forEach(function(ct){ct._pc=_e}),et}),a.wrapPeerConnectionEvent(g,"track",function(_e){return _e.receiver._pc=_e.srcElement,_e}),g.RTCRtpReceiver.prototype.getStats=function(){var _e=this;return this._pc.getStats().then(function(et){return h(et,_e.track,!1)})}}if("getStats"in g.RTCRtpSender.prototype&&"getStats"in g.RTCRtpReceiver.prototype){var $=g.RTCPeerConnection.prototype.getStats;g.RTCPeerConnection.prototype.getStats=function(){var _e=this;if(arguments.length>0&&arguments[0]instanceof g.MediaStreamTrack){var et=arguments[0],ct,dt,nt;return _e.getSenders().forEach(function(it){it.track===et&&(ct?nt=!0:ct=it)}),_e.getReceivers().forEach(function(it){return it.track===et&&(dt?nt=!0:dt=it),it.track===et}),nt||ct&&dt?o.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):ct?ct.getStats():dt?dt.getStats():o.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return $.apply(_e,arguments)}}}},shimSourceObject:function(g){var b=g&&g.URL;typeof g=="object"&&g.HTMLMediaElement&&!("srcObject"in g.HTMLMediaElement.prototype)&&Object.defineProperty(g.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(j){var _=this;if(this._srcObject=j,this.src&&b.revokeObjectURL(this.src),!j){this.src="";return}this.src=b.createObjectURL(j),j.addEventListener("addtrack",function(){_.src&&b.revokeObjectURL(_.src),_.src=b.createObjectURL(j)}),j.addEventListener("removetrack",function(){_.src&&b.revokeObjectURL(_.src),_.src=b.createObjectURL(j)})}})},shimAddTrackRemoveTrackWithNative:function(g){g.RTCPeerConnection.prototype.getLocalStreams=function(){var _e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(et){return _e._shimmedLocalStreams[et][0]})};var b=g.RTCPeerConnection.prototype.addTrack;g.RTCPeerConnection.prototype.addTrack=function(_e,et){if(!et)return b.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var ct=b.apply(this,arguments);return this._shimmedLocalStreams[et.id]?this._shimmedLocalStreams[et.id].indexOf(ct)===-1&&this._shimmedLocalStreams[et.id].push(ct):this._shimmedLocalStreams[et.id]=[et,ct],ct};var j=g.RTCPeerConnection.prototype.addStream;g.RTCPeerConnection.prototype.addStream=function(_e){var et=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},_e.getTracks().forEach(function(nt){var it=et.getSenders().find(function(st){return st.track===nt});if(it)throw new DOMException("Track already exists.","InvalidAccessError")});var ct=et.getSenders();j.apply(this,arguments);var dt=et.getSenders().filter(function(nt){return ct.indexOf(nt)===-1});this._shimmedLocalStreams[_e.id]=[_e].concat(dt)};var _=g.RTCPeerConnection.prototype.removeStream;g.RTCPeerConnection.prototype.removeStream=function(_e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[_e.id],_.apply(this,arguments)};var $=g.RTCPeerConnection.prototype.removeTrack;g.RTCPeerConnection.prototype.removeTrack=function(_e){var et=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},_e&&Object.keys(this._shimmedLocalStreams).forEach(function(ct){var dt=et._shimmedLocalStreams[ct].indexOf(_e);dt!==-1&&et._shimmedLocalStreams[ct].splice(dt,1),et._shimmedLocalStreams[ct].length===1&&delete et._shimmedLocalStreams[ct]}),$.apply(this,arguments)}},shimAddTrackRemoveTrack:function(g){if(!g.RTCPeerConnection)return;var b=a.detectBrowser(g);if(g.RTCPeerConnection.prototype.addTrack&&b.version>=65)return this.shimAddTrackRemoveTrackWithNative(g);var j=g.RTCPeerConnection.prototype.getLocalStreams;g.RTCPeerConnection.prototype.getLocalStreams=function(){var nt=this,it=j.apply(this);return nt._reverseStreams=nt._reverseStreams||{},it.map(function(st){return nt._reverseStreams[st.id]})};var _=g.RTCPeerConnection.prototype.addStream;g.RTCPeerConnection.prototype.addStream=function(nt){var it=this;if(it._streams=it._streams||{},it._reverseStreams=it._reverseStreams||{},nt.getTracks().forEach(function(lt){var ht=it.getSenders().find(function(Tt){return Tt.track===lt});if(ht)throw new DOMException("Track already exists.","InvalidAccessError")}),!it._reverseStreams[nt.id]){var st=new g.MediaStream(nt.getTracks());it._streams[nt.id]=st,it._reverseStreams[st.id]=nt,nt=st}_.apply(it,[nt])};var $=g.RTCPeerConnection.prototype.removeStream;g.RTCPeerConnection.prototype.removeStream=function(nt){var it=this;it._streams=it._streams||{},it._reverseStreams=it._reverseStreams||{},$.apply(it,[it._streams[nt.id]||nt]),delete it._reverseStreams[it._streams[nt.id]?it._streams[nt.id].id:nt.id],delete it._streams[nt.id]},g.RTCPeerConnection.prototype.addTrack=function(nt,it){var st=this;if(st.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var lt=[].slice.call(arguments,1);if(lt.length!==1||!lt[0].getTracks().find(function(vt){return vt===nt}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var ht=st.getSenders().find(function(vt){return vt.track===nt});if(ht)throw new DOMException("Track already exists.","InvalidAccessError");st._streams=st._streams||{},st._reverseStreams=st._reverseStreams||{};var Tt=st._streams[it.id];if(Tt)Tt.addTrack(nt),o.resolve().then(function(){st.dispatchEvent(new Event("negotiationneeded"))});else{var Rt=new g.MediaStream([nt]);st._streams[it.id]=Rt,st._reverseStreams[Rt.id]=it,st.addStream(Rt)}return st.getSenders().find(function(vt){return vt.track===nt})};function _e(nt,it){var st=it.sdp;return Object.keys(nt._reverseStreams||[]).forEach(function(lt){var ht=nt._reverseStreams[lt],Tt=nt._streams[ht.id];st=st.replace(new RegExp(Tt.id,"g"),ht.id)}),new RTCSessionDescription({type:it.type,sdp:st})}function et(nt,it){var st=it.sdp;return Object.keys(nt._reverseStreams||[]).forEach(function(lt){var ht=nt._reverseStreams[lt],Tt=nt._streams[ht.id];st=st.replace(new RegExp(ht.id,"g"),Tt.id)}),new RTCSessionDescription({type:it.type,sdp:st})}["createOffer","createAnswer"].forEach(function(nt){var it=g.RTCPeerConnection.prototype[nt];g.RTCPeerConnection.prototype[nt]=function(){var st=this,lt=arguments,ht=arguments.length&&typeof arguments[0]=="function";return ht?it.apply(st,[function(Tt){var Rt=_e(st,Tt);lt[0].apply(null,[Rt])},function(Tt){lt[1]&&lt[1].apply(null,Tt)},arguments[2]]):it.apply(st,arguments).then(function(Tt){return _e(st,Tt)})}});var ct=g.RTCPeerConnection.prototype.setLocalDescription;g.RTCPeerConnection.prototype.setLocalDescription=function(){var nt=this;return!arguments.length||!arguments[0].type||(arguments[0]=et(nt,arguments[0])),ct.apply(nt,arguments)};var dt=Object.getOwnPropertyDescriptor(g.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(g.RTCPeerConnection.prototype,"localDescription",{get:function(){var nt=this,it=dt.get.apply(this);return it.type===""?it:_e(nt,it)}}),g.RTCPeerConnection.prototype.removeTrack=function(nt){var it=this;if(it.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!nt._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var st=nt._pc===it;if(!st)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");it._streams=it._streams||{};var lt;Object.keys(it._streams).forEach(function(ht){var Tt=it._streams[ht].getTracks().find(function(Rt){return nt.track===Rt});Tt&&(lt=it._streams[ht])}),lt&&(lt.getTracks().length===1?it.removeStream(it._reverseStreams[lt.id]):lt.removeTrack(nt.track),it.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(g){var b=a.detectBrowser(g);if(!g.RTCPeerConnection&&g.webkitRTCPeerConnection&&(g.RTCPeerConnection=function($,_e){return c("PeerConnection"),$&&$.iceTransportPolicy&&($.iceTransports=$.iceTransportPolicy),new g.webkitRTCPeerConnection($,_e)},g.RTCPeerConnection.prototype=g.webkitRTCPeerConnection.prototype,g.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(g.RTCPeerConnection,"generateCertificate",{get:function(){return g.webkitRTCPeerConnection.generateCertificate}})),!!g.RTCPeerConnection){var j=g.RTCPeerConnection.prototype.getStats;g.RTCPeerConnection.prototype.getStats=function($,_e,et){var ct=this,dt=arguments;if(arguments.length>0&&typeof $=="function")return j.apply(this,arguments);if(j.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return j.apply(this,[]);var nt=function(lt){var ht={},Tt=lt.result();return Tt.forEach(function(Rt){var vt={id:Rt.id,timestamp:Rt.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[Rt.type]||Rt.type};Rt.names().forEach(function(Et){vt[Et]=Rt.stat(Et)}),ht[vt.id]=vt}),ht},it=function(lt){return new Map(Object.keys(lt).map(function(ht){return[ht,lt[ht]]}))};if(arguments.length>=2){var st=function(lt){dt[1](it(nt(lt)))};return j.apply(this,[st,arguments[0]])}return new o(function(lt,ht){j.apply(ct,[function(Tt){lt(it(nt(Tt)))},ht])}).then(_e,et)},b.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function($){var _e=g.RTCPeerConnection.prototype[$];g.RTCPeerConnection.prototype[$]=function(){var et=arguments,ct=this,dt=new o(function(nt,it){_e.apply(ct,[et[0],nt,it])});return et.length<2?dt:dt.then(function(){et[1].apply(null,[])},function(nt){et.length>=3&&et[2].apply(null,[nt])})}}),b.version<52&&["createOffer","createAnswer"].forEach(function($){var _e=g.RTCPeerConnection.prototype[$];g.RTCPeerConnection.prototype[$]=function(){var et=this;if(arguments.length<1||arguments.length===1&&typeof arguments[0]=="object"){var ct=arguments.length===1?arguments[0]:void 0;return new o(function(dt,nt){_e.apply(et,[dt,nt,ct])})}return _e.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function($){var _e=g.RTCPeerConnection.prototype[$];g.RTCPeerConnection.prototype[$]=function(){return arguments[0]=new($==="addIceCandidate"?g.RTCIceCandidate:g.RTCSessionDescription)(arguments[0]),_e.apply(this,arguments)}});var _=g.RTCPeerConnection.prototype.addIceCandidate;g.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?_.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),o.resolve())}}},fixNegotiationNeeded:function(g){a.wrapPeerConnectionEvent(g,"negotiationneeded",function(b){var j=b.target;if(j.signalingState==="stable")return b})},shimGetDisplayMedia:function(g,b){if(!(!g.navigator||!g.navigator.mediaDevices||"getDisplayMedia"in g.navigator.mediaDevices)){if(typeof b!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}g.navigator.mediaDevices.getDisplayMedia=function(j){return b(j).then(function(_){var $=j.video&&j.video.width,_e=j.video&&j.video.height,et=j.video&&j.video.frameRate;return j.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:_,maxFrameRate:et||3}},$&&(j.video.mandatory.maxWidth=$),_e&&(j.video.mandatory.maxHeight=_e),g.navigator.mediaDevices.getUserMedia(j)})},g.navigator.getDisplayMedia=function(j){return a.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),g.navigator.mediaDevices.getDisplayMedia(j)}}}}}).call(this,i(0))},function(e,s,i){(function(o){var a=i(27),c=a.log;e.exports=function(d){var h=a.detectBrowser(d),g=d&&d.navigator,b=function(ct){if(typeof ct!="object"||ct.mandatory||ct.optional)return ct;var dt={};return Object.keys(ct).forEach(function(nt){if(!(nt==="require"||nt==="advanced"||nt==="mediaSource")){var it=typeof ct[nt]=="object"?ct[nt]:{ideal:ct[nt]};it.exact!==void 0&&typeof it.exact=="number"&&(it.min=it.max=it.exact);var st=function(ht,Tt){return ht?ht+Tt.charAt(0).toUpperCase()+Tt.slice(1):Tt==="deviceId"?"sourceId":Tt};if(it.ideal!==void 0){dt.optional=dt.optional||[];var lt={};typeof it.ideal=="number"?(lt[st("min",nt)]=it.ideal,dt.optional.push(lt),lt={},lt[st("max",nt)]=it.ideal,dt.optional.push(lt)):(lt[st("",nt)]=it.ideal,dt.optional.push(lt))}it.exact!==void 0&&typeof it.exact!="number"?(dt.mandatory=dt.mandatory||{},dt.mandatory[st("",nt)]=it.exact):["min","max"].forEach(function(ht){it[ht]!==void 0&&(dt.mandatory=dt.mandatory||{},dt.mandatory[st(ht,nt)]=it[ht])})}}),ct.advanced&&(dt.optional=(dt.optional||[]).concat(ct.advanced)),dt},j=function(ct,dt){if(h.version>=61)return dt(ct);if(ct=JSON.parse(JSON.stringify(ct)),ct&&typeof ct.audio=="object"){var nt=function(ht,Tt,Rt){Tt in ht&&!(Rt in ht)&&(ht[Rt]=ht[Tt],delete ht[Tt])};ct=JSON.parse(JSON.stringify(ct)),nt(ct.audio,"autoGainControl","googAutoGainControl"),nt(ct.audio,"noiseSuppression","googNoiseSuppression"),ct.audio=b(ct.audio)}if(ct&&typeof ct.video=="object"){var it=ct.video.facingMode;it=it&&(typeof it=="object"?it:{ideal:it});var st=h.version<66;if(it&&(it.exact==="user"||it.exact==="environment"||it.ideal==="user"||it.ideal==="environment")&&!(g.mediaDevices.getSupportedConstraints&&g.mediaDevices.getSupportedConstraints().facingMode&&!st)){delete ct.video.facingMode;var lt;if(it.exact==="environment"||it.ideal==="environment"?lt=["back","rear"]:(it.exact==="user"||it.ideal==="user")&&(lt=["front"]),lt)return g.mediaDevices.enumerateDevices().then(function(ht){ht=ht.filter(function(Rt){return Rt.kind==="videoinput"});var Tt=ht.find(function(Rt){return lt.some(function(vt){return Rt.label.toLowerCase().indexOf(vt)!==-1})});return!Tt&&ht.length&&lt.indexOf("back")!==-1&&(Tt=ht[ht.length-1]),Tt&&(ct.video.deviceId=it.exact?{exact:Tt.deviceId}:{ideal:Tt.deviceId}),ct.video=b(ct.video),c("chrome: "+JSON.stringify(ct)),dt(ct)})}ct.video=b(ct.video)}return c("chrome: "+JSON.stringify(ct)),dt(ct)},_=function(ct){return h.version>=64?ct:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[ct.name]||ct.name,message:ct.message,constraint:ct.constraint||ct.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},$=function(ct,dt,nt){j(ct,function(it){g.webkitGetUserMedia(it,dt,function(st){nt&&nt(_(st))})})};g.getUserMedia=$;var _e=function(ct){return new o(function(dt,nt){g.getUserMedia(ct,dt,nt)})};if(g.mediaDevices||(g.mediaDevices={getUserMedia:_e,enumerateDevices:function(){return new o(function(ct){var dt={audio:"audioinput",video:"videoinput"};return d.MediaStreamTrack.getSources(function(nt){ct(nt.map(function(it){return{label:it.label,kind:dt[it.kind],deviceId:it.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),!g.mediaDevices.getUserMedia)g.mediaDevices.getUserMedia=function(ct){return _e(ct)};else{var et=g.mediaDevices.getUserMedia.bind(g.mediaDevices);g.mediaDevices.getUserMedia=function(ct){return j(ct,function(dt){return et(dt).then(function(nt){if(dt.audio&&!nt.getAudioTracks().length||dt.video&&!nt.getVideoTracks().length)throw nt.getTracks().forEach(function(it){it.stop()}),new DOMException("","NotFoundError");return nt},function(nt){return o.reject(_(nt))})})}}typeof g.mediaDevices.addEventListener>"u"&&(g.mediaDevices.addEventListener=function(){c("Dummy mediaDevices.addEventListener called.")}),typeof g.mediaDevices.removeEventListener>"u"&&(g.mediaDevices.removeEventListener=function(){c("Dummy mediaDevices.removeEventListener called.")})}}).call(this,i(0))},function(e,s,i){var o=i(27),a=i(571),c=i(572);e.exports={shimGetUserMedia:i(573),shimPeerConnection:function(d){var h=o.detectBrowser(d);if(d.RTCIceGatherer&&(d.RTCIceCandidate||(d.RTCIceCandidate=function(j){return j}),d.RTCSessionDescription||(d.RTCSessionDescription=function(j){return j}),h.version<15025)){var g=Object.getOwnPropertyDescriptor(d.MediaStreamTrack.prototype,"enabled");Object.defineProperty(d.MediaStreamTrack.prototype,"enabled",{set:function(j){g.set.call(this,j);var _=new Event("enabled");_.enabled=j,this.dispatchEvent(_)}})}d.RTCRtpSender&&!("dtmf"in d.RTCRtpSender.prototype)&&Object.defineProperty(d.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new d.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),d.RTCDtmfSender&&!d.RTCDTMFSender&&(d.RTCDTMFSender=d.RTCDtmfSender);var b=c(d,h.version);d.RTCPeerConnection=function(j){return j&&j.iceServers&&(j.iceServers=a(j.iceServers)),new b(j)},d.RTCPeerConnection.prototype=b.prototype},shimReplaceTrack:function(d){d.RTCRtpSender&&!("replaceTrack"in d.RTCRtpSender.prototype)&&(d.RTCRtpSender.prototype.replaceTrack=d.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(d,h){if(!(!("getDisplayMedia"in d.navigator)||!d.navigator.mediaDevices||"getDisplayMedia"in d.navigator.mediaDevices)){var g=d.navigator.getDisplayMedia;d.navigator.mediaDevices.getDisplayMedia=function(b){return g.call(d.navigator,b)},d.navigator.getDisplayMedia=function(b){return o.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),g.call(d.navigator,b)}}}}},function(e,s,i){var o=i(27);e.exports=function(a,c){var d=!1;return a=JSON.parse(JSON.stringify(a)),a.filter(function(h){if(h&&(h.urls||h.url)){var g=h.urls||h.url;h.url&&!h.urls&&o.deprecated("RTCIceServer.url","RTCIceServer.urls");var b=typeof g=="string";return b&&(g=[g]),g=g.filter(function(j){var _=j.indexOf("turn:")===0&&j.indexOf("transport=udp")!==-1&&j.indexOf("turn:[")===-1&&!d;return _?(d=!0,!0):j.indexOf("stun:")===0&&c>=14393&&j.indexOf("?transport=udp")===-1}),delete h.url,h.urls=b?g[0]:g,!!g.length}})}},function(e,s,i){(function(o){var a=i(250);function c($){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[$.type]||$.type}function d($,_e,et,ct,dt){var nt=a.writeRtpDescription($.kind,_e);if(nt+=a.writeIceParameters($.iceGatherer.getLocalParameters()),nt+=a.writeDtlsParameters($.dtlsTransport.getLocalParameters(),et==="offer"?"actpass":dt||"active"),nt+="a=mid:"+$.mid+`\r
`,$.rtpSender&&$.rtpReceiver?nt+=`a=sendrecv\r
`:$.rtpSender?nt+=`a=sendonly\r
`:$.rtpReceiver?nt+=`a=recvonly\r
`:nt+=`a=inactive\r
`,$.rtpSender){var it=$.rtpSender._initialTrackId||$.rtpSender.track.id;$.rtpSender._initialTrackId=it;var st="msid:"+(ct?ct.id:"-")+" "+it+`\r
`;nt+="a="+st,nt+="a=ssrc:"+$.sendEncodingParameters[0].ssrc+" "+st,$.sendEncodingParameters[0].rtx&&(nt+="a=ssrc:"+$.sendEncodingParameters[0].rtx.ssrc+" "+st,nt+="a=ssrc-group:FID "+$.sendEncodingParameters[0].ssrc+" "+$.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return nt+="a=ssrc:"+$.sendEncodingParameters[0].ssrc+" cname:"+a.localCName+`\r
`,$.rtpSender&&$.sendEncodingParameters[0].rtx&&(nt+="a=ssrc:"+$.sendEncodingParameters[0].rtx.ssrc+" cname:"+a.localCName+`\r
`),nt}function h($,_e){var et=!1;return $=JSON.parse(JSON.stringify($)),$.filter(function(ct){if(ct&&(ct.urls||ct.url)){var dt=ct.urls||ct.url;ct.url&&!ct.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var nt=typeof dt=="string";return nt&&(dt=[dt]),dt=dt.filter(function(it){var st=it.indexOf("turn:")===0&&it.indexOf("transport=udp")!==-1&&it.indexOf("turn:[")===-1&&!et;return st?(et=!0,!0):it.indexOf("stun:")===0&&_e>=14393&&it.indexOf("?transport=udp")===-1}),delete ct.url,ct.urls=nt?dt[0]:dt,!!dt.length}})}function g($,_e){var et={codecs:[],headerExtensions:[],fecMechanisms:[]},ct=function(nt,it){nt=parseInt(nt,10);for(var st=0;st<it.length;st++)if(it[st].payloadType===nt||it[st].preferredPayloadType===nt)return it[st]},dt=function(nt,it,st,lt){var ht=ct(nt.parameters.apt,st),Tt=ct(it.parameters.apt,lt);return ht&&Tt&&ht.name.toLowerCase()===Tt.name.toLowerCase()};return $.codecs.forEach(function(nt){for(var it=0;it<_e.codecs.length;it++){var st=_e.codecs[it];if(nt.name.toLowerCase()===st.name.toLowerCase()&&nt.clockRate===st.clockRate){if(nt.name.toLowerCase()==="rtx"&&nt.parameters&&st.parameters.apt&&!dt(nt,st,$.codecs,_e.codecs))continue;st=JSON.parse(JSON.stringify(st)),st.numChannels=Math.min(nt.numChannels,st.numChannels),et.codecs.push(st),st.rtcpFeedback=st.rtcpFeedback.filter(function(lt){for(var ht=0;ht<nt.rtcpFeedback.length;ht++)if(nt.rtcpFeedback[ht].type===lt.type&&nt.rtcpFeedback[ht].parameter===lt.parameter)return!0;return!1});break}}}),$.headerExtensions.forEach(function(nt){for(var it=0;it<_e.headerExtensions.length;it++){var st=_e.headerExtensions[it];if(nt.uri===st.uri){et.headerExtensions.push(st);break}}}),et}function b($,_e,et){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[_e][$].indexOf(et)!==-1}function j($,_e){var et=$.getRemoteCandidates().find(function(ct){return _e.foundation===ct.foundation&&_e.ip===ct.ip&&_e.port===ct.port&&_e.priority===ct.priority&&_e.protocol===ct.protocol&&_e.type===ct.type});return et||$.addRemoteCandidate(_e),!et}function _($,_e){var et=new Error(_e);return et.name=$,et.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[$],et}e.exports=function($,_e){function et(lt,ht){ht.addTrack(lt),ht.dispatchEvent(new $.MediaStreamTrackEvent("addtrack",{track:lt}))}function ct(lt,ht){ht.removeTrack(lt),ht.dispatchEvent(new $.MediaStreamTrackEvent("removetrack",{track:lt}))}function dt(lt,ht,Tt,Rt){var vt=new Event("track");vt.track=ht,vt.receiver=Tt,vt.transceiver={receiver:Tt},vt.streams=Rt,$.setTimeout(function(){lt._dispatchEvent("track",vt)})}var nt=function(lt){var ht=this,Tt=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(vt){ht[vt]=Tt[vt].bind(Tt)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",lt=JSON.parse(JSON.stringify(lt||{})),this.usingBundle=lt.bundlePolicy==="max-bundle",lt.rtcpMuxPolicy==="negotiate")throw _("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(lt.rtcpMuxPolicy||(lt.rtcpMuxPolicy="require"),lt.iceTransportPolicy){case"all":case"relay":break;default:lt.iceTransportPolicy="all";break}switch(lt.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:lt.bundlePolicy="balanced";break}if(lt.iceServers=h(lt.iceServers||[],_e),this._iceGatherers=[],lt.iceCandidatePoolSize)for(var Rt=lt.iceCandidatePoolSize;Rt>0;Rt--)this._iceGatherers.push(new $.RTCIceGatherer({iceServers:lt.iceServers,gatherPolicy:lt.iceTransportPolicy}));else lt.iceCandidatePoolSize=0;this._config=lt,this.transceivers=[],this._sdpSessionId=a.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(nt.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(nt.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),nt.prototype.onicecandidate=null,nt.prototype.onaddstream=null,nt.prototype.ontrack=null,nt.prototype.onremovestream=null,nt.prototype.onsignalingstatechange=null,nt.prototype.oniceconnectionstatechange=null,nt.prototype.onconnectionstatechange=null,nt.prototype.onicegatheringstatechange=null,nt.prototype.onnegotiationneeded=null,nt.prototype.ondatachannel=null,nt.prototype._dispatchEvent=function(lt,ht){this._isClosed||(this.dispatchEvent(ht),typeof this["on"+lt]=="function"&&this["on"+lt](ht))},nt.prototype._emitGatheringStateChange=function(){var lt=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",lt)},nt.prototype.getConfiguration=function(){return this._config},nt.prototype.getLocalStreams=function(){return this.localStreams},nt.prototype.getRemoteStreams=function(){return this.remoteStreams},nt.prototype._createTransceiver=function(lt,ht){var Tt=this.transceivers.length>0,Rt={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:lt,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&Tt)Rt.iceTransport=this.transceivers[0].iceTransport,Rt.dtlsTransport=this.transceivers[0].dtlsTransport;else{var vt=this._createIceAndDtlsTransports();Rt.iceTransport=vt.iceTransport,Rt.dtlsTransport=vt.dtlsTransport}return ht||this.transceivers.push(Rt),Rt},nt.prototype.addTrack=function(lt,ht){if(this._isClosed)throw _("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var Tt=this.transceivers.find(function(Et){return Et.track===lt});if(Tt)throw _("InvalidAccessError","Track already exists.");for(var Rt,vt=0;vt<this.transceivers.length;vt++)!this.transceivers[vt].track&&this.transceivers[vt].kind===lt.kind&&(Rt=this.transceivers[vt]);return Rt||(Rt=this._createTransceiver(lt.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(ht)===-1&&this.localStreams.push(ht),Rt.track=lt,Rt.stream=ht,Rt.rtpSender=new $.RTCRtpSender(lt,Rt.dtlsTransport),Rt.rtpSender},nt.prototype.addStream=function(lt){var ht=this;if(_e>=15025)lt.getTracks().forEach(function(Rt){ht.addTrack(Rt,lt)});else{var Tt=lt.clone();lt.getTracks().forEach(function(Rt,vt){var Et=Tt.getTracks()[vt];Rt.addEventListener("enabled",function(bt){Et.enabled=bt.enabled})}),Tt.getTracks().forEach(function(Rt){ht.addTrack(Rt,Tt)})}},nt.prototype.removeTrack=function(lt){if(this._isClosed)throw _("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(lt instanceof $.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var ht=this.transceivers.find(function(vt){return vt.rtpSender===lt});if(!ht)throw _("InvalidAccessError","Sender was not created by this connection.");var Tt=ht.stream;ht.rtpSender.stop(),ht.rtpSender=null,ht.track=null,ht.stream=null;var Rt=this.transceivers.map(function(vt){return vt.stream});Rt.indexOf(Tt)===-1&&this.localStreams.indexOf(Tt)>-1&&this.localStreams.splice(this.localStreams.indexOf(Tt),1),this._maybeFireNegotiationNeeded()},nt.prototype.removeStream=function(lt){var ht=this;lt.getTracks().forEach(function(Tt){var Rt=ht.getSenders().find(function(vt){return vt.track===Tt});Rt&&ht.removeTrack(Rt)})},nt.prototype.getSenders=function(){return this.transceivers.filter(function(lt){return!!lt.rtpSender}).map(function(lt){return lt.rtpSender})},nt.prototype.getReceivers=function(){return this.transceivers.filter(function(lt){return!!lt.rtpReceiver}).map(function(lt){return lt.rtpReceiver})},nt.prototype._createIceGatherer=function(lt,ht){var Tt=this;if(ht&&lt>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var Rt=new $.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(Rt,"state",{value:"new",writable:!0}),this.transceivers[lt].bufferedCandidateEvents=[],this.transceivers[lt].bufferCandidates=function(vt){var Et=!vt.candidate||Object.keys(vt.candidate).length===0;Rt.state=Et?"completed":"gathering",Tt.transceivers[lt].bufferedCandidateEvents!==null&&Tt.transceivers[lt].bufferedCandidateEvents.push(vt)},Rt.addEventListener("localcandidate",this.transceivers[lt].bufferCandidates),Rt},nt.prototype._gather=function(lt,ht){var Tt=this,Rt=this.transceivers[ht].iceGatherer;if(!Rt.onlocalcandidate){var vt=this.transceivers[ht].bufferedCandidateEvents;this.transceivers[ht].bufferedCandidateEvents=null,Rt.removeEventListener("localcandidate",this.transceivers[ht].bufferCandidates),Rt.onlocalcandidate=function(Et){if(!(Tt.usingBundle&&ht>0)){var bt=new Event("icecandidate");bt.candidate={sdpMid:lt,sdpMLineIndex:ht};var Ct=Et.candidate,Ut=!Ct||Object.keys(Ct).length===0;if(Ut)(Rt.state==="new"||Rt.state==="gathering")&&(Rt.state="completed");else{Rt.state==="new"&&(Rt.state="gathering"),Ct.component=1,Ct.ufrag=Rt.getLocalParameters().usernameFragment;var Xt=a.writeCandidate(Ct);bt.candidate=Object.assign(bt.candidate,a.parseCandidate(Xt)),bt.candidate.candidate=Xt,bt.candidate.toJSON=function(){return{candidate:bt.candidate.candidate,sdpMid:bt.candidate.sdpMid,sdpMLineIndex:bt.candidate.sdpMLineIndex,usernameFragment:bt.candidate.usernameFragment}}}var Nt=a.getMediaSections(Tt._localDescription.sdp);Ut?Nt[bt.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:Nt[bt.candidate.sdpMLineIndex]+="a="+bt.candidate.candidate+`\r
`,Tt._localDescription.sdp=a.getDescription(Tt._localDescription.sdp)+Nt.join("");var Jt=Tt.transceivers.every(function(zt){return zt.iceGatherer&&zt.iceGatherer.state==="completed"});Tt.iceGatheringState!=="gathering"&&(Tt.iceGatheringState="gathering",Tt._emitGatheringStateChange()),Ut||Tt._dispatchEvent("icecandidate",bt),Jt&&(Tt._dispatchEvent("icecandidate",new Event("icecandidate")),Tt.iceGatheringState="complete",Tt._emitGatheringStateChange())}},$.setTimeout(function(){vt.forEach(function(Et){Rt.onlocalcandidate(Et)})},0)}},nt.prototype._createIceAndDtlsTransports=function(){var lt=this,ht=new $.RTCIceTransport(null);ht.onicestatechange=function(){lt._updateIceConnectionState(),lt._updateConnectionState()};var Tt=new $.RTCDtlsTransport(ht);return Tt.ondtlsstatechange=function(){lt._updateConnectionState()},Tt.onerror=function(){Object.defineProperty(Tt,"state",{value:"failed",writable:!0}),lt._updateConnectionState()},{iceTransport:ht,dtlsTransport:Tt}},nt.prototype._disposeIceAndDtlsTransports=function(lt){var ht=this.transceivers[lt].iceGatherer;ht&&(delete ht.onlocalcandidate,delete this.transceivers[lt].iceGatherer);var Tt=this.transceivers[lt].iceTransport;Tt&&(delete Tt.onicestatechange,delete this.transceivers[lt].iceTransport);var Rt=this.transceivers[lt].dtlsTransport;Rt&&(delete Rt.ondtlsstatechange,delete Rt.onerror,delete this.transceivers[lt].dtlsTransport)},nt.prototype._transceive=function(lt,ht,Tt){var Rt=g(lt.localCapabilities,lt.remoteCapabilities);ht&&lt.rtpSender&&(Rt.encodings=lt.sendEncodingParameters,Rt.rtcp={cname:a.localCName,compound:lt.rtcpParameters.compound},lt.recvEncodingParameters.length&&(Rt.rtcp.ssrc=lt.recvEncodingParameters[0].ssrc),lt.rtpSender.send(Rt)),Tt&&lt.rtpReceiver&&Rt.codecs.length>0&&(lt.kind==="video"&&lt.recvEncodingParameters&&_e<15019&&lt.recvEncodingParameters.forEach(function(vt){delete vt.rtx}),lt.recvEncodingParameters.length?Rt.encodings=lt.recvEncodingParameters:Rt.encodings=[{}],Rt.rtcp={compound:lt.rtcpParameters.compound},lt.rtcpParameters.cname&&(Rt.rtcp.cname=lt.rtcpParameters.cname),lt.sendEncodingParameters.length&&(Rt.rtcp.ssrc=lt.sendEncodingParameters[0].ssrc),lt.rtpReceiver.receive(Rt))},nt.prototype.setLocalDescription=function(lt){var ht=this;if(["offer","answer"].indexOf(lt.type)===-1)return o.reject(_("TypeError",'Unsupported type "'+lt.type+'"'));if(!b("setLocalDescription",lt.type,ht.signalingState)||ht._isClosed)return o.reject(_("InvalidStateError","Can not set local "+lt.type+" in state "+ht.signalingState));var Tt,Rt;if(lt.type==="offer")Tt=a.splitSections(lt.sdp),Rt=Tt.shift(),Tt.forEach(function(Et,bt){var Ct=a.parseRtpParameters(Et);ht.transceivers[bt].localCapabilities=Ct}),ht.transceivers.forEach(function(Et,bt){ht._gather(Et.mid,bt)});else if(lt.type==="answer"){Tt=a.splitSections(ht._remoteDescription.sdp),Rt=Tt.shift();var vt=a.matchPrefix(Rt,"a=ice-lite").length>0;Tt.forEach(function(Et,bt){var Ct=ht.transceivers[bt],Ut=Ct.iceGatherer,Xt=Ct.iceTransport,Nt=Ct.dtlsTransport,Jt=Ct.localCapabilities,zt=Ct.remoteCapabilities,nn=a.isRejected(Et)&&a.matchPrefix(Et,"a=bundle-only").length===0;if(!nn&&!Ct.rejected){var Bt=a.getIceParameters(Et,Rt),sn=a.getDtlsParameters(Et,Rt);vt&&(sn.role="server"),(!ht.usingBundle||bt===0)&&(ht._gather(Ct.mid,bt),Xt.state==="new"&&Xt.start(Ut,Bt,vt?"controlling":"controlled"),Nt.state==="new"&&Nt.start(sn));var qt=g(Jt,zt);ht._transceive(Ct,qt.codecs.length>0,!1)}})}return ht._localDescription={type:lt.type,sdp:lt.sdp},lt.type==="offer"?ht._updateSignalingState("have-local-offer"):ht._updateSignalingState("stable"),o.resolve()},nt.prototype.setRemoteDescription=function(lt){var ht=this;if(["offer","answer"].indexOf(lt.type)===-1)return o.reject(_("TypeError",'Unsupported type "'+lt.type+'"'));if(!b("setRemoteDescription",lt.type,ht.signalingState)||ht._isClosed)return o.reject(_("InvalidStateError","Can not set remote "+lt.type+" in state "+ht.signalingState));var Tt={};ht.remoteStreams.forEach(function(Xt){Tt[Xt.id]=Xt});var Rt=[],vt=a.splitSections(lt.sdp),Et=vt.shift(),bt=a.matchPrefix(Et,"a=ice-lite").length>0,Ct=a.matchPrefix(Et,"a=group:BUNDLE ").length>0;ht.usingBundle=Ct;var Ut=a.matchPrefix(Et,"a=ice-options:")[0];return Ut?ht.canTrickleIceCandidates=Ut.substr(14).split(" ").indexOf("trickle")>=0:ht.canTrickleIceCandidates=!1,vt.forEach(function(Xt,Nt){var Jt=a.splitLines(Xt),zt=a.getKind(Xt),nn=a.isRejected(Xt)&&a.matchPrefix(Xt,"a=bundle-only").length===0,Bt=Jt[0].substr(2).split(" ")[2],sn=a.getDirection(Xt,Et),qt=a.parseMsid(Xt),Kt=a.getMid(Xt)||a.generateIdentifier();if(nn||zt==="application"&&(Bt==="DTLS/SCTP"||Bt==="UDP/DTLS/SCTP")){ht.transceivers[Nt]={mid:Kt,kind:zt,protocol:Bt,rejected:!0};return}!nn&&ht.transceivers[Nt]&&ht.transceivers[Nt].rejected&&(ht.transceivers[Nt]=ht._createTransceiver(zt,!0));var $t,Sn,On,tn,bn,dn,Mn,$n,Un,Fn=a.parseRtpParameters(Xt),cr,or;nn||(cr=a.getIceParameters(Xt,Et),or=a.getDtlsParameters(Xt,Et),or.role="client"),Mn=a.parseRtpEncodingParameters(Xt);var wr=a.parseRtcpParameters(Xt),Er=a.matchPrefix(Xt,"a=end-of-candidates",Et).length>0,Zr=a.matchPrefix(Xt,"a=candidate:").map(function(In){return a.parseCandidate(In)}).filter(function(In){return In.component===1});if((lt.type==="offer"||lt.type==="answer")&&!nn&&Ct&&Nt>0&&ht.transceivers[Nt]&&(ht._disposeIceAndDtlsTransports(Nt),ht.transceivers[Nt].iceGatherer=ht.transceivers[0].iceGatherer,ht.transceivers[Nt].iceTransport=ht.transceivers[0].iceTransport,ht.transceivers[Nt].dtlsTransport=ht.transceivers[0].dtlsTransport,ht.transceivers[Nt].rtpSender&&ht.transceivers[Nt].rtpSender.setTransport(ht.transceivers[0].dtlsTransport),ht.transceivers[Nt].rtpReceiver&&ht.transceivers[Nt].rtpReceiver.setTransport(ht.transceivers[0].dtlsTransport)),lt.type==="offer"&&!nn){$t=ht.transceivers[Nt]||ht._createTransceiver(zt),$t.mid=Kt,$t.iceGatherer||($t.iceGatherer=ht._createIceGatherer(Nt,Ct)),Zr.length&&$t.iceTransport.state==="new"&&(Er&&(!Ct||Nt===0)?$t.iceTransport.setRemoteCandidates(Zr):Zr.forEach(function(In){j($t.iceTransport,In)})),$n=$.RTCRtpReceiver.getCapabilities(zt),_e<15019&&($n.codecs=$n.codecs.filter(function(In){return In.name!=="rtx"})),dn=$t.sendEncodingParameters||[{ssrc:(2*Nt+2)*1001}];var po=!1;if(sn==="sendrecv"||sn==="sendonly"){if(po=!$t.rtpReceiver,bn=$t.rtpReceiver||new $.RTCRtpReceiver($t.dtlsTransport,zt),po){var lr;Un=bn.track,qt&&qt.stream==="-"||(qt?(Tt[qt.stream]||(Tt[qt.stream]=new $.MediaStream,Object.defineProperty(Tt[qt.stream],"id",{get:function(){return qt.stream}})),Object.defineProperty(Un,"id",{get:function(){return qt.track}}),lr=Tt[qt.stream]):(Tt.default||(Tt.default=new $.MediaStream),lr=Tt.default)),lr&&(et(Un,lr),$t.associatedRemoteMediaStreams.push(lr)),Rt.push([Un,bn,lr])}}else $t.rtpReceiver&&$t.rtpReceiver.track&&($t.associatedRemoteMediaStreams.forEach(function(In){var zn=In.getTracks().find(function(vr){return vr.id===$t.rtpReceiver.track.id});zn&&ct(zn,In)}),$t.associatedRemoteMediaStreams=[]);$t.localCapabilities=$n,$t.remoteCapabilities=Fn,$t.rtpReceiver=bn,$t.rtcpParameters=wr,$t.sendEncodingParameters=dn,$t.recvEncodingParameters=Mn,ht._transceive(ht.transceivers[Nt],!1,po)}else if(lt.type==="answer"&&!nn){$t=ht.transceivers[Nt],Sn=$t.iceGatherer,On=$t.iceTransport,tn=$t.dtlsTransport,bn=$t.rtpReceiver,dn=$t.sendEncodingParameters,$n=$t.localCapabilities,ht.transceivers[Nt].recvEncodingParameters=Mn,ht.transceivers[Nt].remoteCapabilities=Fn,ht.transceivers[Nt].rtcpParameters=wr,Zr.length&&On.state==="new"&&((bt||Er)&&(!Ct||Nt===0)?On.setRemoteCandidates(Zr):Zr.forEach(function(In){j($t.iceTransport,In)})),(!Ct||Nt===0)&&(On.state==="new"&&On.start(Sn,cr,"controlling"),tn.state==="new"&&tn.start(or));var pr=g($t.localCapabilities,$t.remoteCapabilities),Vn=pr.codecs.filter(function(In){return In.name.toLowerCase()==="rtx"}).length;!Vn&&$t.sendEncodingParameters[0].rtx&&delete $t.sendEncodingParameters[0].rtx,ht._transceive($t,sn==="sendrecv"||sn==="recvonly",sn==="sendrecv"||sn==="sendonly"),bn&&(sn==="sendrecv"||sn==="sendonly")?(Un=bn.track,qt?(Tt[qt.stream]||(Tt[qt.stream]=new $.MediaStream),et(Un,Tt[qt.stream]),Rt.push([Un,bn,Tt[qt.stream]])):(Tt.default||(Tt.default=new $.MediaStream),et(Un,Tt.default),Rt.push([Un,bn,Tt.default]))):delete $t.rtpReceiver}}),ht._dtlsRole===void 0&&(ht._dtlsRole=lt.type==="offer"?"active":"passive"),ht._remoteDescription={type:lt.type,sdp:lt.sdp},lt.type==="offer"?ht._updateSignalingState("have-remote-offer"):ht._updateSignalingState("stable"),Object.keys(Tt).forEach(function(Xt){var Nt=Tt[Xt];if(Nt.getTracks().length){if(ht.remoteStreams.indexOf(Nt)===-1){ht.remoteStreams.push(Nt);var Jt=new Event("addstream");Jt.stream=Nt,$.setTimeout(function(){ht._dispatchEvent("addstream",Jt)})}Rt.forEach(function(zt){var nn=zt[0],Bt=zt[1];Nt.id===zt[2].id&&dt(ht,nn,Bt,[Nt])})}}),Rt.forEach(function(Xt){Xt[2]||dt(ht,Xt[0],Xt[1],[])}),$.setTimeout(function(){ht&&ht.transceivers&&ht.transceivers.forEach(function(Xt){Xt.iceTransport&&Xt.iceTransport.state==="new"&&Xt.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Xt.iceTransport.addRemoteCandidate({}))})},4e3),o.resolve()},nt.prototype.close=function(){this.transceivers.forEach(function(lt){lt.iceTransport&&lt.iceTransport.stop(),lt.dtlsTransport&&lt.dtlsTransport.stop(),lt.rtpSender&&lt.rtpSender.stop(),lt.rtpReceiver&&lt.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},nt.prototype._updateSignalingState=function(lt){this.signalingState=lt;var ht=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",ht)},nt.prototype._maybeFireNegotiationNeeded=function(){var lt=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,$.setTimeout(function(){if(lt.needNegotiation){lt.needNegotiation=!1;var ht=new Event("negotiationneeded");lt._dispatchEvent("negotiationneeded",ht)}},0))},nt.prototype._updateIceConnectionState=function(){var lt,ht={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Rt){Rt.iceTransport&&!Rt.rejected&&ht[Rt.iceTransport.state]++}),lt="new",ht.failed>0?lt="failed":ht.checking>0?lt="checking":ht.disconnected>0?lt="disconnected":ht.new>0?lt="new":ht.connected>0?lt="connected":ht.completed>0&&(lt="completed"),lt!==this.iceConnectionState){this.iceConnectionState=lt;var Tt=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",Tt)}},nt.prototype._updateConnectionState=function(){var lt,ht={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Rt){Rt.iceTransport&&Rt.dtlsTransport&&!Rt.rejected&&(ht[Rt.iceTransport.state]++,ht[Rt.dtlsTransport.state]++)}),ht.connected+=ht.completed,lt="new",ht.failed>0?lt="failed":ht.connecting>0?lt="connecting":ht.disconnected>0?lt="disconnected":ht.new>0?lt="new":ht.connected>0&&(lt="connected"),lt!==this.connectionState){this.connectionState=lt;var Tt=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",Tt)}},nt.prototype.createOffer=function(){var lt=this;if(lt._isClosed)return o.reject(_("InvalidStateError","Can not call createOffer after close"));var ht=lt.transceivers.filter(function(bt){return bt.kind==="audio"}).length,Tt=lt.transceivers.filter(function(bt){return bt.kind==="video"}).length,Rt=arguments[0];if(Rt){if(Rt.mandatory||Rt.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");Rt.offerToReceiveAudio!==void 0&&(Rt.offerToReceiveAudio===!0?ht=1:Rt.offerToReceiveAudio===!1?ht=0:ht=Rt.offerToReceiveAudio),Rt.offerToReceiveVideo!==void 0&&(Rt.offerToReceiveVideo===!0?Tt=1:Rt.offerToReceiveVideo===!1?Tt=0:Tt=Rt.offerToReceiveVideo)}for(lt.transceivers.forEach(function(bt){bt.kind==="audio"?(ht--,ht<0&&(bt.wantReceive=!1)):bt.kind==="video"&&(Tt--,Tt<0&&(bt.wantReceive=!1))});ht>0||Tt>0;)ht>0&&(lt._createTransceiver("audio"),ht--),Tt>0&&(lt._createTransceiver("video"),Tt--);var vt=a.writeSessionBoilerplate(lt._sdpSessionId,lt._sdpSessionVersion++);lt.transceivers.forEach(function(bt,Ct){var Ut=bt.track,Xt=bt.kind,Nt=bt.mid||a.generateIdentifier();bt.mid=Nt,bt.iceGatherer||(bt.iceGatherer=lt._createIceGatherer(Ct,lt.usingBundle));var Jt=$.RTCRtpSender.getCapabilities(Xt);_e<15019&&(Jt.codecs=Jt.codecs.filter(function(nn){return nn.name!=="rtx"})),Jt.codecs.forEach(function(nn){nn.name==="H264"&&nn.parameters["level-asymmetry-allowed"]===void 0&&(nn.parameters["level-asymmetry-allowed"]="1"),bt.remoteCapabilities&&bt.remoteCapabilities.codecs&&bt.remoteCapabilities.codecs.forEach(function(Bt){nn.name.toLowerCase()===Bt.name.toLowerCase()&&nn.clockRate===Bt.clockRate&&(nn.preferredPayloadType=Bt.payloadType)})}),Jt.headerExtensions.forEach(function(nn){var Bt=bt.remoteCapabilities&&bt.remoteCapabilities.headerExtensions||[];Bt.forEach(function(sn){nn.uri===sn.uri&&(nn.id=sn.id)})});var zt=bt.sendEncodingParameters||[{ssrc:(2*Ct+1)*1001}];Ut&&_e>=15019&&Xt==="video"&&!zt[0].rtx&&(zt[0].rtx={ssrc:zt[0].ssrc+1}),bt.wantReceive&&(bt.rtpReceiver=new $.RTCRtpReceiver(bt.dtlsTransport,Xt)),bt.localCapabilities=Jt,bt.sendEncodingParameters=zt}),lt._config.bundlePolicy!=="max-compat"&&(vt+="a=group:BUNDLE "+lt.transceivers.map(function(bt){return bt.mid}).join(" ")+`\r
`),vt+=`a=ice-options:trickle\r
`,lt.transceivers.forEach(function(bt,Ct){vt+=d(bt,bt.localCapabilities,"offer",bt.stream,lt._dtlsRole),vt+=`a=rtcp-rsize\r
`,bt.iceGatherer&&lt.iceGatheringState!=="new"&&(Ct===0||!lt.usingBundle)&&(bt.iceGatherer.getLocalCandidates().forEach(function(Ut){Ut.component=1,vt+="a="+a.writeCandidate(Ut)+`\r
`}),bt.iceGatherer.state==="completed"&&(vt+=`a=end-of-candidates\r
`))});var Et=new $.RTCSessionDescription({type:"offer",sdp:vt});return o.resolve(Et)},nt.prototype.createAnswer=function(){var lt=this;if(lt._isClosed)return o.reject(_("InvalidStateError","Can not call createAnswer after close"));if(!(lt.signalingState==="have-remote-offer"||lt.signalingState==="have-local-pranswer"))return o.reject(_("InvalidStateError","Can not call createAnswer in signalingState "+lt.signalingState));var ht=a.writeSessionBoilerplate(lt._sdpSessionId,lt._sdpSessionVersion++);lt.usingBundle&&(ht+="a=group:BUNDLE "+lt.transceivers.map(function(vt){return vt.mid}).join(" ")+`\r
`),ht+=`a=ice-options:trickle\r
`;var Tt=a.getMediaSections(lt._remoteDescription.sdp).length;lt.transceivers.forEach(function(vt,Et){if(!(Et+1>Tt)){if(vt.rejected){vt.kind==="application"?vt.protocol==="DTLS/SCTP"?ht+=`m=application 0 DTLS/SCTP 5000\r
`:ht+="m=application 0 "+vt.protocol+` webrtc-datachannel\r
`:vt.kind==="audio"?ht+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:vt.kind==="video"&&(ht+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),ht+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+vt.mid+`\r
`;return}if(vt.stream){var bt;vt.kind==="audio"?bt=vt.stream.getAudioTracks()[0]:vt.kind==="video"&&(bt=vt.stream.getVideoTracks()[0]),bt&&_e>=15019&&vt.kind==="video"&&!vt.sendEncodingParameters[0].rtx&&(vt.sendEncodingParameters[0].rtx={ssrc:vt.sendEncodingParameters[0].ssrc+1})}var Ct=g(vt.localCapabilities,vt.remoteCapabilities),Ut=Ct.codecs.filter(function(Xt){return Xt.name.toLowerCase()==="rtx"}).length;!Ut&&vt.sendEncodingParameters[0].rtx&&delete vt.sendEncodingParameters[0].rtx,ht+=d(vt,Ct,"answer",vt.stream,lt._dtlsRole),vt.rtcpParameters&&vt.rtcpParameters.reducedSize&&(ht+=`a=rtcp-rsize\r
`)}});var Rt=new $.RTCSessionDescription({type:"answer",sdp:ht});return o.resolve(Rt)},nt.prototype.addIceCandidate=function(lt){var ht=this,Tt;return lt&&!(lt.sdpMLineIndex!==void 0||lt.sdpMid)?o.reject(new TypeError("sdpMLineIndex or sdpMid required")):new o(function(Rt,vt){if(ht._remoteDescription)if(!lt||lt.candidate==="")for(var Et=0;Et<ht.transceivers.length&&!(!ht.transceivers[Et].rejected&&(ht.transceivers[Et].iceTransport.addRemoteCandidate({}),Tt=a.getMediaSections(ht._remoteDescription.sdp),Tt[Et]+=`a=end-of-candidates\r
`,ht._remoteDescription.sdp=a.getDescription(ht._remoteDescription.sdp)+Tt.join(""),ht.usingBundle));Et++);else{var bt=lt.sdpMLineIndex;if(lt.sdpMid){for(var Ct=0;Ct<ht.transceivers.length;Ct++)if(ht.transceivers[Ct].mid===lt.sdpMid){bt=Ct;break}}var Ut=ht.transceivers[bt];if(Ut){if(Ut.rejected)return Rt();var Xt=Object.keys(lt.candidate).length>0?a.parseCandidate(lt.candidate):{};if(Xt.protocol==="tcp"&&(Xt.port===0||Xt.port===9)||Xt.component&&Xt.component!==1)return Rt();if((bt===0||bt>0&&Ut.iceTransport!==ht.transceivers[0].iceTransport)&&!j(Ut.iceTransport,Xt))return vt(_("OperationError","Can not add ICE candidate"));var Nt=lt.candidate.trim();Nt.indexOf("a=")===0&&(Nt=Nt.substr(2)),Tt=a.getMediaSections(ht._remoteDescription.sdp),Tt[bt]+="a="+(Xt.type?Nt:"end-of-candidates")+`\r
`,ht._remoteDescription.sdp=a.getDescription(ht._remoteDescription.sdp)+Tt.join("")}else return vt(_("OperationError","Can not add ICE candidate"))}else return vt(_("InvalidStateError","Can not add ICE candidate without a remote description"));Rt()})},nt.prototype.getStats=function(lt){if(lt&&lt instanceof $.MediaStreamTrack){var ht=null;if(this.transceivers.forEach(function(Rt){Rt.rtpSender&&Rt.rtpSender.track===lt?ht=Rt.rtpSender:Rt.rtpReceiver&&Rt.rtpReceiver.track===lt&&(ht=Rt.rtpReceiver)}),!ht)throw _("InvalidAccessError","Invalid selector.");return ht.getStats()}var Tt=[];return this.transceivers.forEach(function(Rt){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(vt){Rt[vt]&&Tt.push(Rt[vt].getStats())})}),o.all(Tt).then(function(Rt){var vt=new Map;return Rt.forEach(function(Et){Et.forEach(function(bt){vt.set(bt.id,bt)})}),vt})};var it=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];it.forEach(function(lt){var ht=$[lt];if(ht&&ht.prototype&&ht.prototype.getStats){var Tt=ht.prototype.getStats;ht.prototype.getStats=function(){return Tt.apply(this).then(function(Rt){var vt=new Map;return Object.keys(Rt).forEach(function(Et){Rt[Et].type=c(Rt[Et]),vt.set(Et,Rt[Et])}),vt})}}});var st=["createOffer","createAnswer"];return st.forEach(function(lt){var ht=nt.prototype[lt];nt.prototype[lt]=function(){var Tt=arguments;return typeof Tt[0]=="function"||typeof Tt[1]=="function"?ht.apply(this,[arguments[2]]).then(function(Rt){typeof Tt[0]=="function"&&Tt[0].apply(null,[Rt])},function(Rt){typeof Tt[1]=="function"&&Tt[1].apply(null,[Rt])}):ht.apply(this,arguments)}}),st=["setLocalDescription","setRemoteDescription","addIceCandidate"],st.forEach(function(lt){var ht=nt.prototype[lt];nt.prototype[lt]=function(){var Tt=arguments;return typeof Tt[1]=="function"||typeof Tt[2]=="function"?ht.apply(this,arguments).then(function(){typeof Tt[1]=="function"&&Tt[1].apply(null)},function(Rt){typeof Tt[2]=="function"&&Tt[2].apply(null,[Rt])}):ht.apply(this,arguments)}}),["getStats"].forEach(function(lt){var ht=nt.prototype[lt];nt.prototype[lt]=function(){var Tt=arguments;return typeof Tt[1]=="function"?ht.apply(this,arguments).then(function(){typeof Tt[1]=="function"&&Tt[1].apply(null)}):ht.apply(this,arguments)}}),nt}}).call(this,i(0))},function(e,s,i){(function(o){e.exports=function(a){var c=a&&a.navigator,d=function(g){return{name:{PermissionDeniedError:"NotAllowedError"}[g.name]||g.name,message:g.message,constraint:g.constraint,toString:function(){return this.name}}},h=c.mediaDevices.getUserMedia.bind(c.mediaDevices);c.mediaDevices.getUserMedia=function(g){return h(g).catch(function(b){return o.reject(d(b))})}}}).call(this,i(0))},function(e,s,i){(function(o){var a=i(27);e.exports={shimGetUserMedia:i(575),shimOnTrack:function(c){typeof c=="object"&&c.RTCPeerConnection&&!("ontrack"in c.RTCPeerConnection.prototype)&&Object.defineProperty(c.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(d){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=d),this.addEventListener("addstream",this._ontrackpoly=function(h){h.stream.getTracks().forEach(function(g){var b=new Event("track");b.track=g,b.receiver={track:g},b.transceiver={receiver:b.receiver},b.streams=[h.stream],this.dispatchEvent(b)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),typeof c=="object"&&c.RTCTrackEvent&&"receiver"in c.RTCTrackEvent.prototype&&!("transceiver"in c.RTCTrackEvent.prototype)&&Object.defineProperty(c.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(c){typeof c=="object"&&c.HTMLMediaElement&&!("srcObject"in c.HTMLMediaElement.prototype)&&Object.defineProperty(c.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(d){this.mozSrcObject=d}})},shimPeerConnection:function(c){var d=a.detectBrowser(c);if(!(typeof c!="object"||!(c.RTCPeerConnection||c.mozRTCPeerConnection))){c.RTCPeerConnection||(c.RTCPeerConnection=function(_,$){if(d.version<38&&_&&_.iceServers){for(var _e=[],et=0;et<_.iceServers.length;et++){var ct=_.iceServers[et];if(ct.hasOwnProperty("urls"))for(var dt=0;dt<ct.urls.length;dt++){var nt={url:ct.urls[dt]};ct.urls[dt].indexOf("turn")===0&&(nt.username=ct.username,nt.credential=ct.credential),_e.push(nt)}else _e.push(_.iceServers[et])}_.iceServers=_e}return new c.mozRTCPeerConnection(_,$)},c.RTCPeerConnection.prototype=c.mozRTCPeerConnection.prototype,c.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(c.RTCPeerConnection,"generateCertificate",{get:function(){return c.mozRTCPeerConnection.generateCertificate}}),c.RTCSessionDescription=c.mozRTCSessionDescription,c.RTCIceCandidate=c.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(_){var $=c.RTCPeerConnection.prototype[_];c.RTCPeerConnection.prototype[_]=function(){return arguments[0]=new(_==="addIceCandidate"?c.RTCIceCandidate:c.RTCSessionDescription)(arguments[0]),$.apply(this,arguments)}});var h=c.RTCPeerConnection.prototype.addIceCandidate;c.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?h.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),o.resolve())};var g=function(_){var $=new Map;return Object.keys(_).forEach(function(_e){$.set(_e,_[_e]),$[_e]=_[_e]}),$},b={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},j=c.RTCPeerConnection.prototype.getStats;c.RTCPeerConnection.prototype.getStats=function(_,$,_e){return j.apply(this,[_||null]).then(function(et){if(d.version<48&&(et=g(et)),d.version<53&&!$)try{et.forEach(function(ct){ct.type=b[ct.type]||ct.type})}catch(ct){if(ct.name!=="TypeError")throw ct;et.forEach(function(dt,nt){et.set(nt,Object.assign({},dt,{type:b[dt.type]||dt.type}))})}return et}).then($,_e)}}},shimSenderGetStats:function(c){if(typeof c=="object"&&c.RTCPeerConnection&&c.RTCRtpSender&&!(c.RTCRtpSender&&"getStats"in c.RTCRtpSender.prototype)){var d=c.RTCPeerConnection.prototype.getSenders;d&&(c.RTCPeerConnection.prototype.getSenders=function(){var g=this,b=d.apply(g,[]);return b.forEach(function(j){j._pc=g}),b});var h=c.RTCPeerConnection.prototype.addTrack;h&&(c.RTCPeerConnection.prototype.addTrack=function(){var g=h.apply(this,arguments);return g._pc=this,g}),c.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):o.resolve(new Map)}}},shimReceiverGetStats:function(c){if(typeof c=="object"&&c.RTCPeerConnection&&c.RTCRtpSender&&!(c.RTCRtpSender&&"getStats"in c.RTCRtpReceiver.prototype)){var d=c.RTCPeerConnection.prototype.getReceivers;d&&(c.RTCPeerConnection.prototype.getReceivers=function(){var h=this,g=d.apply(h,[]);return g.forEach(function(b){b._pc=h}),g}),a.wrapPeerConnectionEvent(c,"track",function(h){return h.receiver._pc=h.srcElement,h}),c.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(c){!c.RTCPeerConnection||"removeStream"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.removeStream=function(d){var h=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(g){g.track&&d.getTracks().indexOf(g.track)!==-1&&h.removeTrack(g)})})},shimRTCDataChannel:function(c){c.DataChannel&&!c.RTCDataChannel&&(c.RTCDataChannel=c.DataChannel)},shimGetDisplayMedia:function(c,d){!c.navigator||!c.navigator.mediaDevices||"getDisplayMedia"in c.navigator.mediaDevices||(c.navigator.mediaDevices.getDisplayMedia=function(h){if(!(h&&h.video)){var g=new DOMException("getDisplayMedia without video constraints is undefined");return g.name="NotFoundError",g.code=8,o.reject(g)}return h.video===!0?h.video={mediaSource:d}:h.video.mediaSource=d,c.navigator.mediaDevices.getUserMedia(h)},c.navigator.getDisplayMedia=function(h){return a.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),c.navigator.mediaDevices.getDisplayMedia(h)})}}}).call(this,i(0))},function(e,s,i){(function(o){var a=i(27),c=a.log;e.exports=function(d){var h=a.detectBrowser(d),g=d&&d.navigator,b=d&&d.MediaStreamTrack,j=function(st){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[st.name]||st.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[st.message]||st.message,constraint:st.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},_=function(st,lt,ht){var Tt=function(Rt){if(typeof Rt!="object"||Rt.require)return Rt;var vt=[];return Object.keys(Rt).forEach(function(Et){if(!(Et==="require"||Et==="advanced"||Et==="mediaSource")){var bt=Rt[Et]=typeof Rt[Et]=="object"?Rt[Et]:{ideal:Rt[Et]};if((bt.min!==void 0||bt.max!==void 0||bt.exact!==void 0)&&vt.push(Et),bt.exact!==void 0&&(typeof bt.exact=="number"?bt.min=bt.max=bt.exact:Rt[Et]=bt.exact,delete bt.exact),bt.ideal!==void 0){Rt.advanced=Rt.advanced||[];var Ct={};typeof bt.ideal=="number"?Ct[Et]={min:bt.ideal,max:bt.ideal}:Ct[Et]=bt.ideal,Rt.advanced.push(Ct),delete bt.ideal,Object.keys(bt).length||delete Rt[Et]}}}),vt.length&&(Rt.require=vt),Rt};return st=JSON.parse(JSON.stringify(st)),h.version<38&&(c("spec: "+JSON.stringify(st)),st.audio&&(st.audio=Tt(st.audio)),st.video&&(st.video=Tt(st.video)),c("ff37: "+JSON.stringify(st))),g.mozGetUserMedia(st,lt,function(Rt){ht(j(Rt))})},$=function(st){return new o(function(lt,ht){_(st,lt,ht)})};if(g.mediaDevices||(g.mediaDevices={getUserMedia:$,addEventListener:function(){},removeEventListener:function(){}}),g.mediaDevices.enumerateDevices=g.mediaDevices.enumerateDevices||function(){return new o(function(st){var lt=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];st(lt)})},h.version<41){var _e=g.mediaDevices.enumerateDevices.bind(g.mediaDevices);g.mediaDevices.enumerateDevices=function(){return _e().then(void 0,function(st){if(st.name==="NotFoundError")return[];throw st})}}if(h.version<49){var et=g.mediaDevices.getUserMedia.bind(g.mediaDevices);g.mediaDevices.getUserMedia=function(st){return et(st).then(function(lt){if(st.audio&&!lt.getAudioTracks().length||st.video&&!lt.getVideoTracks().length)throw lt.getTracks().forEach(function(ht){ht.stop()}),new DOMException("The object can not be found here.","NotFoundError");return lt},function(lt){return o.reject(j(lt))})}}if(!(h.version>55&&"autoGainControl"in g.mediaDevices.getSupportedConstraints())){var ct=function(st,lt,ht){lt in st&&!(ht in st)&&(st[ht]=st[lt],delete st[lt])},dt=g.mediaDevices.getUserMedia.bind(g.mediaDevices);if(g.mediaDevices.getUserMedia=function(st){return typeof st=="object"&&typeof st.audio=="object"&&(st=JSON.parse(JSON.stringify(st)),ct(st.audio,"autoGainControl","mozAutoGainControl"),ct(st.audio,"noiseSuppression","mozNoiseSuppression")),dt(st)},b&&b.prototype.getSettings){var nt=b.prototype.getSettings;b.prototype.getSettings=function(){var st=nt.apply(this,arguments);return ct(st,"mozAutoGainControl","autoGainControl"),ct(st,"mozNoiseSuppression","noiseSuppression"),st}}if(b&&b.prototype.applyConstraints){var it=b.prototype.applyConstraints;b.prototype.applyConstraints=function(st){return this.kind==="audio"&&typeof st=="object"&&(st=JSON.parse(JSON.stringify(st)),ct(st,"autoGainControl","mozAutoGainControl"),ct(st,"noiseSuppression","mozNoiseSuppression")),it.apply(this,[st])}}}g.getUserMedia=function(st,lt,ht){if(h.version<44)return _(st,lt,ht);a.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),g.mediaDevices.getUserMedia(st).then(lt,ht)}}}).call(this,i(0))},function(e,s,i){(function(o){var a=i(27);e.exports={shimLocalStreamsAPI:function(c){if(!(typeof c!="object"||!c.RTCPeerConnection)){if("getLocalStreams"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.getStreamById=function(h){var g=null;return this._localStreams&&this._localStreams.forEach(function(b){b.id===h&&(g=b)}),this._remoteStreams&&this._remoteStreams.forEach(function(b){b.id===h&&(g=b)}),g}),!("addStream"in c.RTCPeerConnection.prototype)){var d=c.RTCPeerConnection.prototype.addTrack;c.RTCPeerConnection.prototype.addStream=function(h){this._localStreams||(this._localStreams=[]),this._localStreams.indexOf(h)===-1&&this._localStreams.push(h);var g=this;h.getTracks().forEach(function(b){d.call(g,b,h)})},c.RTCPeerConnection.prototype.addTrack=function(h,g){return g&&(this._localStreams?this._localStreams.indexOf(g)===-1&&this._localStreams.push(g):this._localStreams=[g]),d.call(this,h,g)}}"removeStream"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.removeStream=function(h){this._localStreams||(this._localStreams=[]);var g=this._localStreams.indexOf(h);if(g!==-1){this._localStreams.splice(g,1);var b=this,j=h.getTracks();this.getSenders().forEach(function(_){j.indexOf(_.track)!==-1&&b.removeTrack(_)})}})}},shimRemoteStreamsAPI:function(c){if(!(typeof c!="object"||!c.RTCPeerConnection)&&("getRemoteStreams"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in c.RTCPeerConnection.prototype))){Object.defineProperty(c.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(h){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=h)}});var d=c.RTCPeerConnection.prototype.setRemoteDescription;c.RTCPeerConnection.prototype.setRemoteDescription=function(){var h=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(g){g.streams.forEach(function(b){if(h._remoteStreams||(h._remoteStreams=[]),!(h._remoteStreams.indexOf(b)>=0)){h._remoteStreams.push(b);var j=new Event("addstream");j.stream=b,h.dispatchEvent(j)}})}),d.apply(h,arguments)}}},shimCallbacksAPI:function(c){if(!(typeof c!="object"||!c.RTCPeerConnection)){var d=c.RTCPeerConnection.prototype,h=d.createOffer,g=d.createAnswer,b=d.setLocalDescription,j=d.setRemoteDescription,_=d.addIceCandidate;d.createOffer=function(_e,et){var ct=arguments.length>=2?arguments[2]:arguments[0],dt=h.apply(this,[ct]);return et?(dt.then(_e,et),o.resolve()):dt},d.createAnswer=function(_e,et){var ct=arguments.length>=2?arguments[2]:arguments[0],dt=g.apply(this,[ct]);return et?(dt.then(_e,et),o.resolve()):dt};var $=function(_e,et,ct){var dt=b.apply(this,[_e]);return ct?(dt.then(et,ct),o.resolve()):dt};d.setLocalDescription=$,$=function(_e,et,ct){var dt=j.apply(this,[_e]);return ct?(dt.then(et,ct),o.resolve()):dt},d.setRemoteDescription=$,$=function(_e,et,ct){var dt=_.apply(this,[_e]);return ct?(dt.then(et,ct),o.resolve()):dt},d.addIceCandidate=$}},shimGetUserMedia:function(c){var d=c&&c.navigator;d.getUserMedia||(d.webkitGetUserMedia?d.getUserMedia=d.webkitGetUserMedia.bind(d):d.mediaDevices&&d.mediaDevices.getUserMedia&&(d.getUserMedia=function(h,g,b){d.mediaDevices.getUserMedia(h).then(g,b)}.bind(d)))},shimRTCIceServerUrls:function(c){var d=c.RTCPeerConnection;c.RTCPeerConnection=function(h,g){if(h&&h.iceServers){for(var b=[],j=0;j<h.iceServers.length;j++){var _=h.iceServers[j];!_.hasOwnProperty("urls")&&_.hasOwnProperty("url")?(a.deprecated("RTCIceServer.url","RTCIceServer.urls"),_=JSON.parse(JSON.stringify(_)),_.urls=_.url,delete _.url,b.push(_)):b.push(h.iceServers[j])}h.iceServers=b}return new d(h,g)},c.RTCPeerConnection.prototype=d.prototype,"generateCertificate"in c.RTCPeerConnection&&Object.defineProperty(c.RTCPeerConnection,"generateCertificate",{get:function(){return d.generateCertificate}})},shimTrackEventTransceiver:function(c){typeof c=="object"&&c.RTCPeerConnection&&"receiver"in c.RTCTrackEvent.prototype&&!c.RTCTransceiver&&Object.defineProperty(c.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(c){var d=c.RTCPeerConnection.prototype.createOffer;c.RTCPeerConnection.prototype.createOffer=function(h){var g=this;if(h){typeof h.offerToReceiveAudio<"u"&&(h.offerToReceiveAudio=!!h.offerToReceiveAudio);var b=g.getTransceivers().find(function(_){return _.sender.track&&_.sender.track.kind==="audio"});h.offerToReceiveAudio===!1&&b?b.direction==="sendrecv"?b.setDirection?b.setDirection("sendonly"):b.direction="sendonly":b.direction==="recvonly"&&(b.setDirection?b.setDirection("inactive"):b.direction="inactive"):h.offerToReceiveAudio===!0&&!b&&g.addTransceiver("audio"),typeof h.offerToReceiveVideo<"u"&&(h.offerToReceiveVideo=!!h.offerToReceiveVideo);var j=g.getTransceivers().find(function(_){return _.sender.track&&_.sender.track.kind==="video"});h.offerToReceiveVideo===!1&&j?j.direction==="sendrecv"?j.setDirection("sendonly"):j.direction==="recvonly"&&j.setDirection("inactive"):h.offerToReceiveVideo===!0&&!j&&g.addTransceiver("video")}return d.apply(g,arguments)}}}}).call(this,i(0))},function(e,s,i){var o=i(250),a=i(27);e.exports={shimRTCIceCandidate:function(c){if(!(!c.RTCIceCandidate||c.RTCIceCandidate&&"foundation"in c.RTCIceCandidate.prototype)){var d=c.RTCIceCandidate;c.RTCIceCandidate=function(h){if(typeof h=="object"&&h.candidate&&h.candidate.indexOf("a=")===0&&(h=JSON.parse(JSON.stringify(h)),h.candidate=h.candidate.substr(2)),h.candidate&&h.candidate.length){var g=new d(h),b=o.parseCandidate(h.candidate),j=Object.assign(g,b);return j.toJSON=function(){return{candidate:j.candidate,sdpMid:j.sdpMid,sdpMLineIndex:j.sdpMLineIndex,usernameFragment:j.usernameFragment}},j}return new d(h)},c.RTCIceCandidate.prototype=d.prototype,a.wrapPeerConnectionEvent(c,"icecandidate",function(h){return h.candidate&&Object.defineProperty(h,"candidate",{value:new c.RTCIceCandidate(h.candidate),writable:"false"}),h})}},shimCreateObjectURL:function(c){var d=c&&c.URL;if(typeof c=="object"&&c.HTMLMediaElement&&"srcObject"in c.HTMLMediaElement.prototype&&d.createObjectURL&&d.revokeObjectURL){var h=d.createObjectURL.bind(d),g=d.revokeObjectURL.bind(d),b=new Map,j=0;d.createObjectURL=function(_e){if("getTracks"in _e){var et="polyblob:"+ ++j;return b.set(et,_e),a.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),et}return h(_e)},d.revokeObjectURL=function(_e){g(_e),b.delete(_e)};var _=Object.getOwnPropertyDescriptor(c.HTMLMediaElement.prototype,"src");Object.defineProperty(c.HTMLMediaElement.prototype,"src",{get:function(){return _.get.apply(this)},set:function(_e){return this.srcObject=b.get(_e)||null,_.set.apply(this,[_e])}});var $=c.HTMLMediaElement.prototype.setAttribute;c.HTMLMediaElement.prototype.setAttribute=function(){return arguments.length===2&&(""+arguments[0]).toLowerCase()==="src"&&(this.srcObject=b.get(arguments[1])||null),$.apply(this,arguments)}}},shimMaxMessageSize:function(c){if(!(c.RTCSctpTransport||!c.RTCPeerConnection)){var d=a.detectBrowser(c);"sctp"in c.RTCPeerConnection.prototype||Object.defineProperty(c.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp}});var h=function($){var _e=o.splitSections($.sdp);return _e.shift(),_e.some(function(et){var ct=o.parseMLine(et);return ct&&ct.kind==="application"&&ct.protocol.indexOf("SCTP")!==-1})},g=function($){var _e=$.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(_e===null||_e.length<2)return-1;var et=parseInt(_e[1],10);return et!==et?-1:et},b=function($){var _e=65536;return d.browser==="firefox"&&(d.version<57?$===-1?_e=16384:_e=2147483637:d.version<60?_e=d.version===57?65535:65536:_e=2147483637),_e},j=function($,_e){var et=65536;d.browser==="firefox"&&d.version===57&&(et=65535);var ct=o.matchPrefix($.sdp,"a=max-message-size:");return ct.length>0?et=parseInt(ct[0].substr(19),10):d.browser==="firefox"&&_e!==-1&&(et=2147483637),et},_=c.RTCPeerConnection.prototype.setRemoteDescription;c.RTCPeerConnection.prototype.setRemoteDescription=function(){var $=this;if($._sctp=null,h(arguments[0])){var _e=g(arguments[0]),et=b(_e),ct=j(arguments[0],_e),dt;et===0&&ct===0?dt=Number.POSITIVE_INFINITY:et===0||ct===0?dt=Math.max(et,ct):dt=Math.min(et,ct);var nt={};Object.defineProperty(nt,"maxMessageSize",{get:function(){return dt}}),$._sctp=nt}return _.apply($,arguments)}}},shimSendThrowTypeError:function(c){if(!(c.RTCPeerConnection&&"createDataChannel"in c.RTCPeerConnection.prototype))return;function d(g,b){var j=g.send;g.send=function(){var _=arguments[0],$=_.length||_.size||_.byteLength;if(g.readyState==="open"&&b.sctp&&$>b.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+b.sctp.maxMessageSize+" bytes)");return j.apply(g,arguments)}}var h=c.RTCPeerConnection.prototype.createDataChannel;c.RTCPeerConnection.prototype.createDataChannel=function(){var g=this,b=h.apply(g,arguments);return d(b,g),b},a.wrapPeerConnectionEvent(c,"datachannel",function(g){return d(g.channel,g.target),g})}}},function(e,s,i){(function(o){const a=i(6);function c(){return typeof document>"u"||document.readyState==="complete"||document.readyState==="interactive"&&document.body}let d=!1;const h={isDomLoaded:c,isDomUnloaded(){return d},whenUnloaded:new o(g=>{if(typeof window<"u"){const b=()=>{d=!0,h.emit("unload"),g()};window.addEventListener("unload",b)}}),whenLoaded:new o(g=>{if(c()){g();return}const b=()=>{document.removeEventListener("DOMContentLoaded",b),document.removeEventListener("load",b),h.emit("load"),g()};document.addEventListener("DOMContentLoaded",b),document.addEventListener("load",b)})};a(h),e.exports=h}).call(this,i(0))},function(e,s,i){var o=i(78),a=i(255),c=i(238),d=i(580),h=i(11),g=i(53),b=i(256);function j(_,$,_e,et,ct){_!==$&&c($,function(dt,nt){if(ct||(ct=new o),h(dt))d(_,$,nt,_e,j,et,ct);else{var it=et?et(b(_,nt),dt,nt+"",_,$,ct):void 0;it===void 0&&(it=dt),a(_,nt,it)}},g)}e.exports=j},function(e,s,i){var o=i(255),a=i(179),c=i(188),d=i(54),h=i(189),g=i(63),b=i(12),j=i(131),_=i(64),$=i(16),_e=i(11),et=i(138),ct=i(85),dt=i(256),nt=i(581);function it(st,lt,ht,Tt,Rt,vt,Et){var bt=dt(st,ht),Ct=dt(lt,ht),Ut=Et.get(Ct);if(Ut){o(st,ht,Ut);return}var Xt=vt?vt(bt,Ct,ht+"",st,lt,Et):void 0,Nt=Xt===void 0;if(Nt){var Jt=b(Ct),zt=!Jt&&_(Ct),nn=!Jt&&!zt&&ct(Ct);Xt=Ct,Jt||zt||nn?b(bt)?Xt=bt:j(bt)?Xt=d(bt):zt?(Nt=!1,Xt=a(Ct,!0)):nn?(Nt=!1,Xt=c(Ct,!0)):Xt=[]:et(Ct)||g(Ct)?(Xt=bt,g(bt)?Xt=nt(bt):(!_e(bt)||$(bt))&&(Xt=h(Ct))):Nt=!1}Nt&&(Et.set(Ct,Xt),Rt(Xt,Ct,Tt,vt,Et),Et.delete(Ct)),o(st,ht,Xt)}e.exports=it},function(e,s,i){var o=i(40),a=i(53);function c(d){return o(d,a(d))}e.exports=c},function(e,s,i){const o=i(148),a=i(257),c=i(258),d=i(263),h=i(1)("normalizeConstraintInput"),g={"320x240":{width:320,height:240},"320x180":{width:320,height:180},"640x480":{width:640,height:480},"640x360":{width:640,height:360},"1280x720":{width:1280,height:720},"1280x960":{width:1280,height:960},"1920x1080":{width:1920,height:1080}},b=[1,7,15,30];function j(dt){return dt._inject&&dt._inject.logging||h}function _(dt,nt,it,st,lt){if(nt===void 0)return;const ht=it(nt);return ht||lt.warn(`Invalid ${dt} passed to the Publisher. Got: ${nt}, expecting one of ${st}`),ht}function $(dt,nt){const it=j(nt),st=(()=>{const ht=nt[`publish${c(dt)}`];return ht!==void 0?!!ht:!0})();let lt=(()=>{const ht=nt[`${dt}Source`];return ht===void 0?!0:ht===null||ht===!1?!1:typeof ht=="object"?nt[`isCustom${c(dt)}Track`]?!1:typeof ht.deviceId!="string"?(it.warn(`Invalid ${dt}Source passed to Publisher. Expected either a device ID or device.`),!0):ht.deviceId:typeof ht!="string"?(it.warn(`Ignoring invalid ${dt}Source parameter`),!0):ht})();return dt==="audio"&&nt.isScreenSharing&&!d&&lt!==!1&&(nt.audioSource&&j(nt).warn("Invalid audioSource passed to Publisher - when using screen sharing no audioSource may be used"),lt=!1),{source:lt,publish:st}}function _e(dt,nt){return dt.name==="Chrome"&&dt.userAgent.indexOf("Mac OS X")!==-1&&nt===1?2:nt}const et=["user","environment","left","right"],ct=(dt,nt)=>{if(dt===void 0||et.indexOf(dt)>=0)return dt;j(nt).warn(`Invalid facingMode passed to Publisher. Expected one of: ${et.join(", ")}`)};e.exports=function(nt){const it=j(nt),st=nt.env||{},lt=nt.isScreenSharing,ht=nt.isCustomAudioTrack,Tt=nt.isCustomVideoTrack;return lt&&!a&&o(nt.usingOptionalMandatoryStyle,"Screensharing only uses optional-mandatory constraints right now"),["echoCancellation","autoGainControl","noiseSuppression"].forEach(Rt=>{nt[Rt]!==!1&&Object.assign(nt,{[Rt]:!0})}),{isScreenSharing:lt,isCustomAudioTrack:ht,isCustomVideoTrack:Tt,audio:$("audio",nt),video:$("video",nt),usingOptionalMandatoryStyle:nt.usingOptionalMandatoryStyle,enableRenegotiation:nt.enableRenegotiation,enableStereo:nt.enableStereo,noiseSuppression:nt.noiseSuppression,autoGainControl:nt.autoGainControl,echoCancellation:nt.echoCancellation,disableAudioProcessing:nt.disableAudioProcessing,videoDimensions:_("resolution",nt.resolution,Rt=>g[Rt],`"${Object.keys(g).join('", "')}"`,it),frameRate:_e(st,_("frameRate",nt.frameRate,Rt=>b.indexOf(Rt)!==-1?Rt:void 0,b.join(","),it)),maxResolution:function(){if(nt.maxResolution===void 0)return lt?{width:1920,height:1920}:void 0;const Rt={width:nt.maxResolution.width,height:nt.maxResolution.height};return Object.keys(Rt).forEach(vt=>{const Et=Rt[vt];(typeof Et!="number"||Et>1920)&&(it.warn(`Invalid maxResolution passed to the Publisher. maxResolution.${vt} must be less than or equal to 1920`),Rt[vt]=1920)}),Rt}(),facingMode:ct(nt.facingMode,nt)}}},function(e,s,i){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function d(g){if(g==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}function h(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de",Object.getOwnPropertyNames(g)[0]==="5")return!1;for(var b={},j=0;j<10;j++)b["_"+String.fromCharCode(j)]=j;var _=Object.getOwnPropertyNames(b).map(function(_e){return b[_e]});if(_.join("")!=="0123456789")return!1;var $={};return"abcdefghijklmnopqrst".split("").forEach(function(_e){$[_e]=_e}),Object.keys(Object.assign({},$)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}e.exports=h()?Object.assign:function(g,b){for(var j,_=d(g),$,_e=1;_e<arguments.length;_e++){j=Object(arguments[_e]);for(var et in j)a.call(j,et)&&(_[et]=j[et]);if(o){$=o(j);for(var ct=0;ct<$.length;ct++)c.call(j,$[ct])&&(_[$[ct]]=j[$[ct]])}}return _}},function(e,s,i){(function(o,a){var c=Object.getOwnPropertyDescriptors||function(bn){for(var dn=Object.keys(bn),Mn={},$n=0;$n<dn.length;$n++)Mn[dn[$n]]=Object.getOwnPropertyDescriptor(bn,dn[$n]);return Mn},d=/%[sdj%]/g;s.format=function(tn){if(!vt(tn)){for(var bn=[],dn=0;dn<arguments.length;dn++)bn.push(b(arguments[dn]));return bn.join(" ")}for(var dn=1,Mn=arguments,$n=Mn.length,Un=String(tn).replace(d,function(cr){if(cr==="%%")return"%";if(dn>=$n)return cr;switch(cr){case"%s":return String(Mn[dn++]);case"%d":return Number(Mn[dn++]);case"%j":try{return JSON.stringify(Mn[dn++])}catch{return"[Circular]"}default:return cr}}),Fn=Mn[dn];dn<$n;Fn=Mn[++dn])ht(Fn)||!Ut(Fn)?Un+=" "+Fn:Un+=" "+b(Fn);return Un},s.deprecate=function(tn,bn){if(typeof o<"u"&&o.noDeprecation===!0)return tn;if(typeof o>"u")return function(){return s.deprecate(tn,bn).apply(this,arguments)};var dn=!1;function Mn(){if(!dn){if(o.throwDeprecation)throw new Error(bn);o.traceDeprecation?console.trace(bn):console.error(bn),dn=!0}return tn.apply(this,arguments)}return Mn};var h={},g;s.debuglog=function(tn){if(bt(g)&&(g={}.NODE_DEBUG||""),tn=tn.toUpperCase(),!h[tn])if(new RegExp("\\b"+tn+"\\b","i").test(g)){var bn=o.pid;h[tn]=function(){var dn=s.format.apply(s,arguments);console.error("%s %d: %s",tn,bn,dn)}}else h[tn]=function(){};return h[tn]};function b(tn,bn){var dn={seen:[],stylize:_};return arguments.length>=3&&(dn.depth=arguments[2]),arguments.length>=4&&(dn.colors=arguments[3]),lt(bn)?dn.showHidden=bn:bn&&s._extend(dn,bn),bt(dn.showHidden)&&(dn.showHidden=!1),bt(dn.depth)&&(dn.depth=2),bt(dn.colors)&&(dn.colors=!1),bt(dn.customInspect)&&(dn.customInspect=!0),dn.colors&&(dn.stylize=j),_e(dn,tn,dn.depth)}s.inspect=b,b.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},b.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function j(tn,bn){var dn=b.styles[bn];return dn?"\x1B["+b.colors[dn][0]+"m"+tn+"\x1B["+b.colors[dn][1]+"m":tn}function _(tn,bn){return tn}function $(tn){var bn={};return tn.forEach(function(dn,Mn){bn[dn]=!0}),bn}function _e(tn,bn,dn){if(tn.customInspect&&bn&&Jt(bn.inspect)&&bn.inspect!==s.inspect&&!(bn.constructor&&bn.constructor.prototype===bn)){var Mn=bn.inspect(dn,tn);return vt(Mn)||(Mn=_e(tn,Mn,dn)),Mn}var $n=et(tn,bn);if($n)return $n;var Un=Object.keys(bn),Fn=$(Un);if(tn.showHidden&&(Un=Object.getOwnPropertyNames(bn)),Nt(bn)&&(Un.indexOf("message")>=0||Un.indexOf("description")>=0))return ct(bn);if(Un.length===0){if(Jt(bn)){var cr=bn.name?": "+bn.name:"";return tn.stylize("[Function"+cr+"]","special")}if(Ct(bn))return tn.stylize(RegExp.prototype.toString.call(bn),"regexp");if(Xt(bn))return tn.stylize(Date.prototype.toString.call(bn),"date");if(Nt(bn))return ct(bn)}var or="",wr=!1,Er=["{","}"];if(st(bn)&&(wr=!0,Er=["[","]"]),Jt(bn)){var Zr=bn.name?": "+bn.name:"";or=" [Function"+Zr+"]"}if(Ct(bn)&&(or=" "+RegExp.prototype.toString.call(bn)),Xt(bn)&&(or=" "+Date.prototype.toUTCString.call(bn)),Nt(bn)&&(or=" "+ct(bn)),Un.length===0&&(!wr||bn.length==0))return Er[0]+or+Er[1];if(dn<0)return Ct(bn)?tn.stylize(RegExp.prototype.toString.call(bn),"regexp"):tn.stylize("[Object]","special");tn.seen.push(bn);var po;return wr?po=dt(tn,bn,dn,Fn,Un):po=Un.map(function(lr){return nt(tn,bn,dn,Fn,lr,wr)}),tn.seen.pop(),it(po,or,Er)}function et(tn,bn){if(bt(bn))return tn.stylize("undefined","undefined");if(vt(bn)){var dn="'"+JSON.stringify(bn).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return tn.stylize(dn,"string")}if(Rt(bn))return tn.stylize(""+bn,"number");if(lt(bn))return tn.stylize(""+bn,"boolean");if(ht(bn))return tn.stylize("null","null")}function ct(tn){return"["+Error.prototype.toString.call(tn)+"]"}function dt(tn,bn,dn,Mn,$n){for(var Un=[],Fn=0,cr=bn.length;Fn<cr;++Fn)Kt(bn,String(Fn))?Un.push(nt(tn,bn,dn,Mn,String(Fn),!0)):Un.push("");return $n.forEach(function(or){or.match(/^\d+$/)||Un.push(nt(tn,bn,dn,Mn,or,!0))}),Un}function nt(tn,bn,dn,Mn,$n,Un){var Fn,cr,or;if(or=Object.getOwnPropertyDescriptor(bn,$n)||{value:bn[$n]},or.get?or.set?cr=tn.stylize("[Getter/Setter]","special"):cr=tn.stylize("[Getter]","special"):or.set&&(cr=tn.stylize("[Setter]","special")),Kt(Mn,$n)||(Fn="["+$n+"]"),cr||(tn.seen.indexOf(or.value)<0?(ht(dn)?cr=_e(tn,or.value,null):cr=_e(tn,or.value,dn-1),cr.indexOf(`
`)>-1&&(Un?cr=cr.split(`
`).map(function(wr){return"  "+wr}).join(`
`).substr(2):cr=`
`+cr.split(`
`).map(function(wr){return"   "+wr}).join(`
`))):cr=tn.stylize("[Circular]","special")),bt(Fn)){if(Un&&$n.match(/^\d+$/))return cr;Fn=JSON.stringify(""+$n),Fn.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Fn=Fn.substr(1,Fn.length-2),Fn=tn.stylize(Fn,"name")):(Fn=Fn.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Fn=tn.stylize(Fn,"string"))}return Fn+": "+cr}function it(tn,bn,dn){var Mn=tn.reduce(function($n,Un){return Un.indexOf(`
`)>=0,$n+Un.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Mn>60?dn[0]+(bn===""?"":bn+`
 `)+" "+tn.join(`,
  `)+" "+dn[1]:dn[0]+bn+" "+tn.join(", ")+" "+dn[1]}function st(tn){return Array.isArray(tn)}s.isArray=st;function lt(tn){return typeof tn=="boolean"}s.isBoolean=lt;function ht(tn){return tn===null}s.isNull=ht;function Tt(tn){return tn==null}s.isNullOrUndefined=Tt;function Rt(tn){return typeof tn=="number"}s.isNumber=Rt;function vt(tn){return typeof tn=="string"}s.isString=vt;function Et(tn){return typeof tn=="symbol"}s.isSymbol=Et;function bt(tn){return tn===void 0}s.isUndefined=bt;function Ct(tn){return Ut(tn)&&nn(tn)==="[object RegExp]"}s.isRegExp=Ct;function Ut(tn){return typeof tn=="object"&&tn!==null}s.isObject=Ut;function Xt(tn){return Ut(tn)&&nn(tn)==="[object Date]"}s.isDate=Xt;function Nt(tn){return Ut(tn)&&(nn(tn)==="[object Error]"||tn instanceof Error)}s.isError=Nt;function Jt(tn){return typeof tn=="function"}s.isFunction=Jt;function zt(tn){return tn===null||typeof tn=="boolean"||typeof tn=="number"||typeof tn=="string"||typeof tn=="symbol"||typeof tn>"u"}s.isPrimitive=zt,s.isBuffer=i(585);function nn(tn){return Object.prototype.toString.call(tn)}function Bt(tn){return tn<10?"0"+tn.toString(10):tn.toString(10)}var sn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function qt(){var tn=new Date,bn=[Bt(tn.getHours()),Bt(tn.getMinutes()),Bt(tn.getSeconds())].join(":");return[tn.getDate(),sn[tn.getMonth()],bn].join(" ")}s.log=function(){console.log("%s - %s",qt(),s.format.apply(s,arguments))},s.inherits=i(586),s._extend=function(tn,bn){if(!bn||!Ut(bn))return tn;for(var dn=Object.keys(bn),Mn=dn.length;Mn--;)tn[dn[Mn]]=bn[dn[Mn]];return tn};function Kt(tn,bn){return Object.prototype.hasOwnProperty.call(tn,bn)}var $t=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;s.promisify=function(bn){if(typeof bn!="function")throw new TypeError('The "original" argument must be of type Function');if($t&&bn[$t]){var dn=bn[$t];if(typeof dn!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(dn,$t,{value:dn,enumerable:!1,writable:!1,configurable:!0}),dn}function dn(){for(var Mn,$n,Un=new a(function(or,wr){Mn=or,$n=wr}),Fn=[],cr=0;cr<arguments.length;cr++)Fn.push(arguments[cr]);Fn.push(function(or,wr){or?$n(or):Mn(wr)});try{bn.apply(this,Fn)}catch(or){$n(or)}return Un}return Object.setPrototypeOf(dn,Object.getPrototypeOf(bn)),$t&&Object.defineProperty(dn,$t,{value:dn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(dn,c(bn))},s.promisify.custom=$t;function Sn(tn,bn){if(!tn){var dn=new Error("Promise was rejected with a falsy value");dn.reason=tn,tn=dn}return bn(tn)}function On(tn){if(typeof tn!="function")throw new TypeError('The "original" argument must be of type Function');function bn(){for(var dn=[],Mn=0;Mn<arguments.length;Mn++)dn.push(arguments[Mn]);var $n=dn.pop();if(typeof $n!="function")throw new TypeError("The last argument must be of type Function");var Un=this,Fn=function(){return $n.apply(Un,arguments)};tn.apply(this,dn).then(function(cr){o.nextTick(Fn,null,cr)},function(cr){o.nextTick(Sn,cr,Fn)})}return Object.setPrototypeOf(bn,Object.getPrototypeOf(tn)),Object.defineProperties(bn,c(tn)),bn}s.callbackify=On}).call(this,i(42),i(0))},function(e,s){e.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},function(e,s){typeof Object.create=="function"?e.exports=function(o,a){o.super_=a,o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(o,a){o.super_=a;var c=function(){};c.prototype=a.prototype,o.prototype=new c,o.prototype.constructor=o}},function(e,s,i){var o=i(588),a=i(261),c=i(262),d=i(59);function h(g){return function(b){b=d(b);var j=a(b)?c(b):void 0,_=j?j[0]:b.charAt(0),$=j?o(j,1).join(""):b.slice(1);return _[g]()+$}}e.exports=h},function(e,s,i){var o=i(260);function a(c,d,h){var g=c.length;return h=h===void 0?g:h,!d&&h>=g?c:o(c,d,h)}e.exports=a},function(e,s){function i(o){return o.split("")}e.exports=i},function(e,s){var i="\\ud800-\\udfff",o="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",d=o+a+c,h="\\ufe0e\\ufe0f",g="["+i+"]",b="["+d+"]",j="\\ud83c[\\udffb-\\udfff]",_="(?:"+b+"|"+j+")",$="[^"+i+"]",_e="(?:\\ud83c[\\udde6-\\uddff]){2}",et="[\\ud800-\\udbff][\\udc00-\\udfff]",ct="\\u200d",dt=_+"?",nt="["+h+"]?",it="(?:"+ct+"(?:"+[$,_e,et].join("|")+")"+nt+dt+")*",st=nt+dt+it,lt="(?:"+[$+b+"?",b,_e,et,g].join("|")+")",ht=RegExp(j+"(?="+j+")|"+lt+st,"g");function Tt(Rt){return Rt.match(ht)||[]}e.exports=Tt},function(e,s,i){e.exports=["screen","window","tab","browser","application"]},function(e,s,i){const o=i(1),a=i(34)(),c=i(50),d=i(121),h=i(594),g=i(597),b="/opentok/webrtc/docs/js/release-notes.html",j=a.onlyLocal(),_=o("setLogLevel"),$=`
          
   
               
               
              
                   `,_e=c(()=>{_.info(`%c${$}`,'font-family: "Fire Code", Courier, "Courier New", Consolas, "DejaVu Sans Mono"'),_.info(`OpenTok JS SDK ${j.version}`),_.info(`Release notes: ${j.websiteUrl}${b}`),_.info(`Known issues: ${j.websiteUrl}${b}l#knownIssues`)});function et(ct){if(ct===void 0||!h(d,{priority:ct})&&ct!==0){const nt=g(d,(it,st)=>`OT.${st.toUpperCase()} = ${it.priority}`).join(", ");_.error(`level must be one of: OT.NONE = 0, ${nt}`),_.warn("Using OT.WARN instead"),ct=d.warn.priority}o.setLogLevel(ct),ct>=d.debug.priority&&_e();const dt="https://www.npmjs.com/package/debug#browser-support";return _.info(`OpenTok JS SDK now uses the debug library. More info at ${dt}`),_.info(`Changed log level to: ${ct}`),ct}et(j.debug?d.debug.priority:d.warn.priority),e.exports=et},function(e,s,i){var o=i(96),a="Expected a function";function c(d,h){var g;if(typeof h!="function")throw new TypeError(a);return d=o(d),function(){return--d>0&&(g=h.apply(this,arguments)),d<=1&&(h=void 0),g}}e.exports=c},function(e,s,i){var o=i(231),a=i(35),c=i(595),d=i(12),h=i(124);function g(b,j,_){var $=d(b)?o:c;return _&&h(b,j,_)&&(j=void 0),$(b,a(j,3))}e.exports=g},function(e,s,i){var o=i(265);function a(c,d){var h;return o(c,function(g,b,j){return h=d(g,b,j),!h}),!!h}e.exports=a},function(e,s,i){var o=i(25);function a(c,d){return function(h,g){if(h==null)return h;if(!o(h))return c(h,g);for(var b=h.length,j=d?b:-1,_=Object(h);(d?j--:++j<b)&&g(_[j],j,_)!==!1;);return h}}e.exports=a},function(e,s,i){var o=i(33),a=i(35),c=i(598),d=i(12);function h(g,b){var j=d(g)?o:c;return j(g,a(b,3))}e.exports=h},function(e,s,i){var o=i(265),a=i(25);function c(d,h){var g=-1,b=a(d)?Array(d.length):[];return o(d,function(j,_,$){b[++g]=h(j,_,$)}),b}e.exports=c},function(e,s,i){e.exports=function(a){return a.substr(0,5)!=="http:"&&a.substr(0,6)!=="https:"&&a.substr(0,22)!=="data:image/png;base64,"?`data:image/png;base64,${a}`:a}},function(e,s,i){const o=i(56),a=i(1)("Style");e.exports=function(d,h){const g=this,b={},j={buttonDisplayMode:["auto","mini","mini-auto","off","on"],nameDisplayMode:["auto","off","on"],audioLevelDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showSpeakerButton:null,showMicButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showArchiveStatus:[!0,!1],archiveStatusDisplayMode:["auto","off","on"],videoDisabledDisplayMode:["auto","off","on"],audioBlockedDisplayMode:["auto","off","on"]},_=function(et,ct){const dt=j[et];return dt===void 0?!1:dt===null?!0:dt.indexOf(ct)!==-1},$=function(et){switch(et){case"true":return!0;case"false":return!1;default:return et}};g.getAll=function(){return o(b)},g.get=function(_e){return _e?b[_e]:g.getAll()},g.setAll=function(_e,et){return Object.keys(_e).forEach(ct=>{g.set(ct,_e[ct],et)}),g},g.set=function(_e,et,ct){a.debug(`setStyle: ${_e.toString()}`);let dt;const nt=$(et);return _(_e,nt)?(dt=b[_e],nt!==dt&&(b[_e]=nt,ct||h(_e,et,dt)),g):(a.warn(`Style.set::Invalid style property passed ${_e} : ${nt}`),g)},d&&g.setAll(d,!0)}},function(e,s,i){const o=i(2),a=i(269),c=()=>o.isIosWebView?!1:a()?!0:(typeof window!==void 0?window:commonjsGlobal).navigator.mediaDevices&&(typeof window!==void 0?window:commonjsGlobal).navigator.mediaDevices.getUserMedia||(typeof window!==void 0?window:commonjsGlobal).navigator.webkitGetUserMedia||(typeof window!==void 0?window:commonjsGlobal).navigator.mozGetUserMedia;e.exports=()=>!!(o.name!=="Node"&&c())},function(e,s,i){const o=i(2);e.exports=()=>o.name==="Node"?!1:typeof(typeof window!==void 0?window:commonjsGlobal).webkitRTCPeerConnection=="function"&&(typeof window!==void 0?window:commonjsGlobal).webkitRTCPeerConnection.prototype.addTrack||typeof(typeof window!==void 0?window:commonjsGlobal).RTCPeerConnection=="function"?!0:typeof(typeof window!==void 0?window:commonjsGlobal).mozRTCPeerConnection=="function"&&o.version>20},function(e,s,i){e.exports=(typeof window!==void 0?window:commonjsGlobal).WebSocket!==void 0},function(e,s){e.exports=`<div id="tb_alert"><div id="section-normal-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div></div><div id="section-upgrade-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-supported-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com.au/chrome/browser/mobile/">Google Chrome</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application is not supported on your mobile device's browser at this time.</div></div></div>`},function(e,s,i){var o=i(3),a=o(i(48));const c=i(18);e.exports=function(d){(0,a.default)(h,d);function h(b,j){var _;let $=j===void 0?{}:j,_e=$.destroyOnClose,et=_e===void 0?!0:_e;_=d.call(this)||this,_.modalDiv=document.createElement("div"),_.modalDiv.classList.add("OT_ModalDialog"),_.modalDiv.innerHTML=b;const ct=_.modalDiv.querySelectorAll("[role=OT_close]");return[].forEach.call(ct,dt=>dt.addEventListener("click",nt=>{nt.preventDefault(),_.close()})),_.close(),document.body.appendChild(_.modalDiv),et&&_.on("closed",()=>_.destroy()),_}var g=h.prototype;return g.open=function(){this.modalDiv.style.display="block",this.emit("opened")},g.close=function(){this.modalDiv.style.display="none",this.emit("closed")},g.destroy=function(){this.modalDiv.innerHTML="",this.modalDiv.parentNode.removeChild(this.modalDiv),this.emit("destroyed")},g.el=function(j){return this.modalDiv.querySelector(j)},h}(c)},function(e,s,i){const o=i(20);e.exports=function(a){a===void 0&&(a={});const c=a.env||i(2),d=a.analytics||new o;d.logEvent({action:"UserAgentParsing",variation:"Attempt",payload:{userAgent:c.userAgent}}),d.logEvent({action:"UserAgentParsing",variation:c.error?"Failure":"Success",payload:{userAgent:c.userAgent}})}},function(e,s,i){var o=i(608),a=i(270),c=i(609),d=i(610);function h(g){var b=typeof Map=="function"?new Map:void 0;return e.exports=h=function(_){if(_===null||!c(_))return _;if(typeof _!="function")throw new TypeError("Super expression must either be null or a function");if(typeof b<"u"){if(b.has(_))return b.get(_);b.set(_,$)}function $(){return d(_,arguments,o(this).constructor)}return $.prototype=Object.create(_.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),a($,_)},h(g)}e.exports=h},function(e,s){function i(o){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},i(o)}e.exports=i},function(e,s){function i(o){return Function.toString.call(o).indexOf("[native code]")!==-1}e.exports=i},function(e,s,i){var o=i(270);function a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function c(d,h,g){return a()?e.exports=c=Reflect.construct:e.exports=c=function(j,_,$){var _e=[null];_e.push.apply(_e,_);var et=Function.bind.apply(j,_e),ct=new et;return $&&o(ct,$.prototype),ct},c.apply(null,arguments)}e.exports=c},function(e,s,i){(function(o){e.exports=(a,c)=>(c=c||(()=>{}),a.then(d=>new o(h=>{h(c())}).then(()=>d),d=>new o(h=>{h(c())}).then(()=>{throw d})))}).call(this,i(0))},function(e,s,i){var o=i(58),a=i(613),c=i(614),d=i(46);function h(g,b){return b=o(b,g),g=c(g,b),g==null||delete g[d(a(b))]}e.exports=h},function(e,s){function i(o){var a=o==null?0:o.length;return a?o[a-1]:void 0}e.exports=i},function(e,s,i){var o=i(98),a=i(260);function c(d,h){return h.length<2?d:o(d,a(h,0,-1))}e.exports=c},function(e,s,i){var o=i(138);function a(c){return o(c)?void 0:c}e.exports=a},function(e,s,i){var o=i(35),a=i(25),c=i(30);function d(h){return function(g,b,j){var _=Object(g);if(!a(g)){var $=o(b,3);g=c(g),b=function(et){return $(_[et],et,_)}}var _e=h(g,b,j);return _e>-1?_[$?g[_e]:_e]:void 0}}e.exports=d},function(e,s,i){var o=i(92),a=i(93),c=i(130),d=i(94),h=i(618),g=i(97),b=200;function j(_,$,_e){var et=-1,ct=a,dt=_.length,nt=!0,it=[],st=it;if(_e)nt=!1,ct=c;else if(dt>=b){var lt=$?null:h(_);if(lt)return g(lt);nt=!1,ct=d,st=new o}else st=$?[]:it;e:for(;++et<dt;){var ht=_[et],Tt=$?$(ht):ht;if(ht=_e||ht!==0?ht:0,nt&&Tt===Tt){for(var Rt=st.length;Rt--;)if(st[Rt]===Tt)continue e;$&&st.push(Tt),it.push(ht)}else ct(st,Tt,_e)||(st!==it&&st.push(Tt),it.push(ht))}return it}e.exports=j},function(e,s,i){var o=i(185),a=i(223),c=i(97),d=1/0,h=o&&1/c(new o([,-0]))[1]==d?function(g){return new o(g)}:a;e.exports=h},function(e,s,i){const o=d=>d&&d.replace(/\D+/g,"")||"0",a=d=>d.substring(0,9),c=d=>parseInt(d,10);e.exports=d=>c(a(o(d)))},function(e,s,i){(function(o){var a=i(3),c=a(i(4)),d=a(i(5));const g=i(1)("hasValidPeerConnection");function b($){return new o(_e=>{$.addEventListener("signalingstatechange",()=>_e(!0)),$.createOffer({offerToReceiveAudio:1}).then(et=>$.setLocalDescription(et)).then(()=>setTimeout(()=>{_e(!1)},1e3))})}function j($){return _.apply(this,arguments)}function _(){return _=(0,d.default)(c.default.mark(function $(_e){var et;return c.default.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:dt.prev=0,et=new _e({iceServers:[]}),dt.next=8;break;case 4:return dt.prev=4,dt.t0=dt.catch(0),g.error("Error occurred creating PeerConnection",dt.t0),dt.abrupt("return",!1);case 8:return dt.prev=8,dt.next=11,b(et);case 11:dt.next=18;break;case 13:dt.prev=13,dt.t1=dt.catch(8),g.error("Error occurred checking the validity of the PeerConnection",dt.t1);try{et.close()}catch{}return dt.abrupt("return",!1);case 18:dt.prev=18,et.close(),dt.next=26;break;case 22:return dt.prev=22,dt.t2=dt.catch(18),g.error("Error occurred closing PeerConnection",dt.t2),dt.abrupt("return",!1);case 26:return dt.abrupt("return",!0);case 27:case"end":return dt.stop()}},$,null,[[0,4],[8,13],[18,22]])})),_.apply(this,arguments)}e.exports=j}).call(this,i(0))},function(e,s,i){(function(o){const a=i(37),c=i(2),d=i(622),h=i(72),g=i(1)("createPeerConnection");e.exports=function(j){let _=j.window,$=j.config,_e=j.constraints;g.debug("called");const et=a($);et.iceServers=d(c,et.iceServers),h()&&(et.sdpSemantics="plan-b");const ct=new _.RTCPeerConnection(et,_e);return o.resolve(ct)}}).call(this,i(0))},function(e,s,i){const o=i(9),a=i(271),c={Edge(d){let h=!1;return d.map(g=>{if(!g)return;const b=g.urls||g.url&&[g.url];if(!b)return;const j=b.filter(_=>_.indexOf("turn:")===0&&_.indexOf("transport=udp")!==-1&&_.indexOf("turn:[")===-1&&!h?(h=!0,!0):_.indexOf("stun:")===0);if(j.length!==0)return o(a(g,["url","urls"]),{urls:j})}).filter(g=>g!==void 0)},Safari(d){return d.map(h=>{if(h.urls!==void 0&&h.url===void 0)return h;const g=h.urls||h.url&&[h.url];return o(a(h,["url","urls"]),{urls:g})})}};e.exports=function(h,g){let b=h.name;h.isEdge&&(b=h.isLegacyEdge?"Edge":"ChromiumEdge");const j=c[b];return j?j(g):g}},function(e,s,i){const o=i(28),a=i(2),c={h264:{baseline:"42001f",constBaseline:"42e01f"}},d=h=>{let g=h.sdp,b=h.from,j=h.to;return g.replace(new RegExp(`^(a=fmtp:\\d+ .*profile-level-id=)${b}`,"gmi"),`$1${j}`)};e.exports={local:{offer:function(g,b){let j=g===void 0?{}:g,_=j.numSimulcastStreams,$=j.audioBitrate,_e=j.priorityVideoCodec,et=_e===void 0?"":_e,ct=j.codecFlags,dt=ct===void 0?{}:ct,nt=j.enableStereo,it=nt===void 0?!1:nt,st=j.enableDtx,lt=st===void 0?!1:st,ht=j.replaceBaselineProfile,Tt=ht===void 0?!1:ht,Rt=j.removeVideoOrientation,vt=Rt===void 0?!1:Rt,Et=o.filterExcessSSRCs(b);_>1&&(Et=o.enableSimulcast(Et,_)),$>0&&(Et=o.setAudioBitrate(Et,$)),vt&&(Et=o.removeVideoOrientation(Et)),Et=o.modifyReceiveStereo(Et,!1),Et=o.modifySendStereo(Et,!!it),Et=o.modifyDtx(Et,!!lt),a.isLegacyEdge||Object.keys(dt).filter(Ct=>dt[Ct]===!1).forEach(Ct=>{Et=o.removeVideoCodec(Et,Ct)}),et&&!a.isLegacyEdge?Et=o.reprioritizeVideoCodec(Et,et,"top"):et!=="h264"&&(Et=o.reprioritizeVideoCodec(Et,"h264","bottom"));let bt=Et;return Tt&&(bt=d({sdp:bt,from:c.h264.baseline,to:c.h264.constBaseline})),{local:Et,remote:bt}},answer:function(g,b){let j=g===void 0?{}:g,_=j.audioBitrate,$=j.codecFlags,_e=j.enableStereo,et=_e===void 0?!1:_e,ct=j.enableDtx,dt=ct===void 0?!1:ct,nt=j.replaceBaselineProfile,it=nt===void 0?!1:nt,st=j.sourceStreamId,lt=b;_>0&&(lt=o.setAudioBitrate(lt,_)),lt=o.modifyReceiveStereo(lt,!!et),lt=o.modifySendStereo(lt,!1),lt=o.modifyDtx(lt,!!dt),st==="MANTIS"&&o.getSetupRole(lt)==="passive"&&(lt=o.setSetupRole(lt,"active")),$&&Object.keys($).filter(Tt=>$[Tt]===!1).forEach(Tt=>{lt=o.removeVideoCodec(lt,Tt)});let ht=lt;return it&&(ht=d({sdp:ht,from:c.h264.baseline,to:c.h264.constBaseline})),{local:lt,remote:ht}}},remote:{offer:(h,g)=>{let b=h.replaceBaselineProfile,j=b===void 0?!1:b,_=g;if(_.indexOf("a=rtcp-fb")===-1){const $=`a=rtcp-fb:* ccm fir\r
a=rtcp-fb:* nack `;_=_.replace(/^m=video(.*)$/gmi,`m=video$1\r
${$}`)}return j&&(_=d({sdp:_,from:c.h264.constBaseline,to:c.h264.baseline})),{local:_}},answer:function(g,b){let j=g===void 0?{}:g,_=j.audioBitrate,$=j.replaceBaselineProfile,_e=$===void 0?!1:$,et=b;return _>0&&(et=o.setAudioBitrate(et,_)),_e&&(et=d({sdp:et,from:c.h264.constBaseline,to:c.h264.baseline})),{local:et}}}}},function(e,s,i){var o=i(39),a=i(54),c=i(41),d=i(25),h=i(275),g=i(625),b=i(232),j=i(97),_=i(262),$=i(276),_e="[object Map]",et="[object Set]",ct=o?o.iterator:void 0;function dt(nt){if(!nt)return[];if(d(nt))return h(nt)?_(nt):a(nt);if(ct&&nt[ct])return g(nt[ct]());var it=c(nt),st=it==_e?b:it==et?j:$;return st(nt)}e.exports=dt},function(e,s){function i(o){for(var a,c=[];!(a=o.next()).done;)c.push(a.value);return c}e.exports=i},function(e,s,i){var o=i(33);function a(c,d){return o(d,function(h){return c[h]})}e.exports=a},function(e,s,i){e.exports=(o,a)=>{let c=[],d=null;if(typeof o.getReceivers=="function"){const h=o.getReceivers().find(g=>g.track.kind==="audio");h&&(c=h.getSynchronizationSources())}else d=new Error("peerConnection does not support getReceivers function");a&&a(d,c)}},function(e,s,i){(function(o){const a=i(629),c=function(h){this.pending=[],this._processBinding=this.maybeProcessPending.bind(this),h&&this.setPeerConnection(h)};c.prototype.setPeerConnection=function(h){if(this.pc)throw new Error("Peer connection already set");this.pc=h,this._forwardIceCandidate=a(this.pc,"addIceCandidate"),this.pc.addEventListener("signalingstatechange",this._processBinding),this.maybeProcessPending()},c.prototype.canAddCandidates=function(){return!!(this.pc&&this.pc.iceConnectionState!=="closed"&&this.pc.remoteDescription&&this.pc.remoteDescription.type&&this.pc.localDescription&&this.pc.localDescription.type)},c.prototype.addIceCandidate=function(h){if(this.canAddCandidates())return this._forwardIceCandidate(h);const g=this.pending;return new o((b,j)=>{g.push({iceCandidate:h,resolve:b,reject:j})})},c.prototype.maybeProcessPending=function(){this.canAddCandidates()&&this.process()},c.prototype.process=function(){for(;this.pending.length;){const h=this.pending.shift();this._forwardIceCandidate(h.iceCandidate).then(h.resolve).catch(h.reject)}},c.prototype.destroy=function(){this.pc&&this.pc.removeEventListener("signalingstatechange",this._processBinding),this._processBinding=null,this.pc=null},e.exports=c}).call(this,i(0))},function(e,s,i){(function(o){e.exports=function(c,d){const h=c[d];return function(g){return new o((b,j)=>{const _=h.apply(c,[g,b,j]);_&&typeof _.then=="function"&&b(_)})}}}).call(this,i(0))},function(e,s,i){const o=i(156),a=i(2),c=i(1)("offerProcessor"),d=i(28),h=i(631);e.exports=function(b,j,_,$,_e,et,ct,dt,nt,it,st,lt,ht){const Tt=(Ut,Xt)=>Nt=>{c.error(Ut),c.error(Nt),it&&it(Ut,Nt,Xt)},Rt=Ut=>{const Xt=d.hasSendStereo(et.sdp),Nt=d.hasSendDtx(et.sdp),Jt=d.getAudioBitrate(et.sdp),zt=o(_e,"local","answer",{enableStereo:Xt,enableDtx:Nt,audioBitrate:Jt,replaceBaselineProfile:lt,codecFlags:ct,sourceStreamId:ht},Ut.sdp),nn=new $({type:Ut.type,sdp:zt.local}),Bt={type:Ut.type,sdp:zt.remote};return b.setLocalDescription(nn).then(()=>nt(Bt)).catch(Tt("Error while setting LocalDescription","SetLocalDescription"))},vt=()=>b.createAnswer().then(Rt).catch(Tt("Error while setting createAnswer","CreateAnswer")),Et=new $({type:et.type,sdp:o(_e,"remote","offer",{replaceBaselineProfile:lt},et.sdp).local}),bt=Tt("Error while setting RemoteDescription","SetRemoteDescription");return h(Et,dt,a,j,_).then(()=>(st(!0),Et)).catch(Ut=>{if(st(!1),!d.hasMediaType(Et.sdp,"audio"))throw new Error("Unsupported video without audio for fallback");c.debug("Couldn't set remote description",Et,Ut,", trying without video");const Xt=new $({type:et.type,sdp:d.disableMediaType(Et.sdp,"video")});return c.debug("offer without video",Xt.sdp),Xt}).then(Ut=>b.setRemoteDescription(Ut)).then(vt).catch(bt)}},function(e,s,i){(function(o){const a=i(72),c=(d,h,g,b,j)=>{if(!b)return o.resolve(!0);const _={iceServers:[]};a()&&(_.sdpSemantics="plan-b");const $=new b(_),_e=()=>{try{$.close()}catch{}};return $.setRemoteDescription(new j(d)).then(()=>{_e()}).catch(et=>{throw _e(),et})};e.exports=c}).call(this,i(0))},function(e,s,i){const o=i(60),a=i(633);e.exports=function(d){let h=[];const g={};let b={sentMessages:0,recvMessages:0};const j=function(_e){h.filter(et=>_e!==et)},_=function(_e){const et=new a(_e);return h.push(et),et.on("close",()=>{j(et)}),et};return g.add=function($,_e){return _(d.createDataChannel($,_e))},g.addMany=function($){for(const _e in $)$.hasOwnProperty(_e)&&g.add(_e,$[_e])},g.get=function($,_e){return o(h,et=>et.equals($,_e))},g.getOrAdd=function($,_e){let et=g.get($,_e);return et||(et=g.add($,_e)),et},g.getQosData=function(){const $={sentMessages:0,recvMessages:0};return h.forEach(_e=>{$.sentMessages+=_e.getQosData().sentMessages,$.recvMessages+=_e.getQosData().recvMessages}),$},g.sampleQos=function(){const $=g.getQosData(),_e={sentMessages:$.sentMessages-b.sentMessages,recvMessages:$.recvMessages-b.recvMessages};return b=$,_e},g.destroy=function(){h.forEach($=>{$.close()}),h=[]},d.addEventListener("datachannel",$=>{_($.channel)}),g}},function(e,s,i){const o=i(6),a=i(1)("DataChannel"),c=function(h){this.data=h.data,this.source=h.source,this.lastEventId=h.lastEventId,this.origin=h.origin,this.timeStamp=h.timeStamp,this.type=h.type,this.ports=h.ports,this.path=h.path};e.exports=function(h){const g={},b=[],j={sentMessages:0,recvMessages:0},_=function(st){return b.push(st),g},$=function(st){return h.send(st),j.sentMessages++,g},_e=function(){let st;for(;st=b.shift();)g.send(st)},et=function(){g.send=$,_e()},ct=function(st){g.send=_,g.trigger("close",st)},dt=function(st){a.error(st)},nt=function(st){const lt=new c(st);j.recvMessages++,g.trigger("message",lt)};return o(g,!0),g.label=h.label,g.id=h.id,g.reliable=h.reliable,g.negotiated=h.negotiated,g.ordered=h.ordered,g.protocol=h.protocol,g._channel=h,g.close=function(){h.close()},g.equals=function(it,st){if(g.label!==it)return!1;for(const lt in st)if(st.hasOwnProperty(lt)&&g[lt]!==st[lt])return!1;return!0},g.getQosData=function(){return j},g.send=_,h.addEventListener("open",et,!1),h.addEventListener("close",ct,!1),h.addEventListener("error",dt,!1),h.addEventListener("message",nt,!1),g}},function(e,s,i){const o=i(9),a=i(156),c=i(1)("subscribeProcessor"),d=i(28);e.exports=function(g){let b=g.peerConnection,j=g.NativeRTCSessionDescription,_=g.sdpTransforms,$=g.numSimulcastStreams,_e=g.offerOverrides,et=g.offerConstraints,ct=g.replaceBaselineProfile,dt=g.removeVideoOrientation,nt=g.removeUnusedCodecs;const it=(lt,ht)=>Tt=>{c.error(lt,Tt);const Rt=new Error(lt);throw Rt.reason=Tt,Rt.prefix=ht,Rt},st=lt=>{c.debug("subscribeProcessor: offer created",lt);let ht=lt.sdp;if(nt){var Tt;ht=d.removeUnusedCodecs(ht,(Tt=b.currentLocalDescription)==null?void 0:Tt.sdp)}const Rt=a(_,"local","offer",o({numSimulcastStreams:$,replaceBaselineProfile:ct,removeVideoOrientation:dt},_e),ht),vt=new j({type:lt.type,sdp:Rt.local}),Et=new j({type:lt.type,sdp:Rt.remote});return c.debug("subscribeProcessor: setting local description"),b.setLocalDescription(vt).then(()=>Et,it("Error while setting LocalDescription","SetLocalDescription"))};return c.debug("subscribeProcessor: creating offer"),b.createOffer(et).then(st,it("Error while creating Offer","CreateOffer")).then(lt=>({sdp:lt.sdp,type:lt.type}))}},function(e,s,i){const o=i(636);let a=function(){function c(h){this.state=o.RESOLVED,this.offerAnswerQueue=[],this.logAnalyticsEvent=h}var d=c.prototype;return d.setPending=function(){this.state=o.PENDING},d.setResolved=function(){this.state=o.RESOLVED;const g=this.offerAnswerQueue.shift();g&&(this.logAnalyticsEvent("dequeueOfferAnswer","Event"),this.setPending(),g())},d.isPending=function(){return this.state===o.PENDING},d.enqueueOfferAnswer=function(g){this.isPending()?(this.offerAnswerQueue.push(g),this.logAnalyticsEvent("enqueueOfferAnswer","Event")):(this.setPending(),g())},c}();e.exports=a},function(e,s,i){e.exports={PENDING:"pending",RESOLVED:"resolved"}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=i(28),h=d.mediaDirections,g=h.RECVONLY,b=h.INACTIVE,j=function(){var _=(0,c.default)(a.default.mark(function $(_e,et){var ct,dt,nt;return a.default.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(_e){st.next=2;break}return st.abrupt("return");case 2:return st.next=4,_e.createOffer();case 4:return ct=st.sent,st.next=7,_e.setLocalDescription(ct);case 7:dt=_e.remoteDescription.sdp,nt=d.changeMediaDirection(dt,et),_e.setRemoteDescription({type:_e.remoteDescription.type,sdp:nt});case 10:case"end":return st.stop()}},$)}));return function(_e,et){return _.apply(this,arguments)}}();e.exports={changeMediaDirectionToInactive:_=>j(_,b),changeMediaDirectionToRecvOnly:_=>j(_,g)}},function(e,s,i){s.__esModule=!0,s.default=lt,s.parseStatsNewAPI=st,s.parseStatsOldAPI=it;function o(Tt,Rt){var vt=typeof Symbol<"u"&&Tt[Symbol.iterator]||Tt["@@iterator"];if(vt)return(vt=vt.call(Tt)).next.bind(vt);if(Array.isArray(Tt)||(vt=a(Tt))||Rt&&Tt&&typeof Tt.length=="number"){vt&&(Tt=vt);var Et=0;return function(){return Et>=Tt.length?{done:!0}:{done:!1,value:Tt[Et++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(Tt,Rt){if(Tt){if(typeof Tt=="string")return c(Tt,Rt);var vt=Object.prototype.toString.call(Tt).slice(8,-1);if(vt==="Object"&&Tt.constructor&&(vt=Tt.constructor.name),vt==="Map"||vt==="Set")return Array.from(Tt);if(vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt))return c(Tt,Rt)}}function c(Tt,Rt){(Rt==null||Rt>Tt.length)&&(Rt=Tt.length);for(var vt=0,Et=new Array(Rt);vt<Rt;vt++)Et[vt]=Tt[vt];return Et}const d=i(2),h=i(8),g=i(1)("QoS"),b=i(28),j=i(279),_=i(639),$=i(103)(),_e=i(157),et=["audioCodec","audioSentBytes","audioSentPackets","audioSentPacketsLost","audioRtt","videoCodec","videoHeight","videoHeightInput","videoSentBytes","videoFrameRateSent","videoSentPackets","videoRtt","videoSentPacketsLost","videoWidthInput","videoWidth","srtpCipher"],ct=["audioCodec","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoCodec","videoHeight","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost","videoFrameRateReceived","videoWidth","srtpCipher"],dt=(Tt,Rt)=>g.debug(`Raw stats for peer conn ${Tt.id}:`,Rt),nt=Tt=>{const Rt=Tt.portNumber||Tt.port;return`${Tt.ipAddress||Tt.address||Tt.ip}:${Rt}`};function it(Tt,Rt,vt,Et,bt){const Ct=Nt=>(Number(Nt.stat("googFrameRateSent"))>0?(vt.videoSentBytes=Number(Nt.stat("bytesSent")),vt.videoSentPackets=Number(Nt.stat("packetsSent")),vt.videoSentPacketsLost=Number(Nt.stat("packetsLost")),vt.videoRtt=Number(Nt.stat("googRtt"))/1e3,vt.videoFrameRate=Number(Nt.stat("googFrameRateInput")),vt.videoWidth=Number(Nt.stat("googFrameWidthSent")),vt.videoHeight=Number(Nt.stat("googFrameHeightSent")),vt.videoFrameRateSent=Number(Nt.stat("googFrameRateSent")),vt.videoWidthInput=Number(Nt.stat("googFrameWidthInput")),vt.videoHeightInput=Number(Nt.stat("googFrameHeightInput")),vt.videoCodec=Nt.stat("googCodecName"),vt.videoBandwidthLimitedResolution=Nt.stat("googBandwidthLimitedResolution")==="true",vt.cpuLimitedResolution=Nt.stat("googCpuLimitedResolution")==="true"):Number(Nt.stat("googFrameRateReceived"))>0&&(vt.videoRecvBytes=Number(Nt.stat("bytesReceived")),vt.videoRecvPackets=Number(Nt.stat("packetsReceived")),vt.videoRecvPacketsLost=Number(Nt.stat("packetsLost")),vt.videoFrameRate=Number(Nt.stat("googFrameRateOutput")),vt.videoFrameRateReceived=Number(Nt.stat("googFrameRateReceived")),vt.videoFrameRateDecoded=Number(Nt.stat("googFrameRateDecoded")),vt.videoWidth=Number(Nt.stat("googFrameWidthReceived")),vt.videoHeight=Number(Nt.stat("googFrameHeightReceived")),vt.videoCodec=Nt.stat("googCodecName")),null),Ut=Nt=>{Number(Nt.stat("audioInputLevel"))>0?(vt.audioSentPackets=Number(Nt.stat("packetsSent")),vt.audioSentPacketsLost=Number(Nt.stat("packetsLost")),vt.audioSentBytes=Number(Nt.stat("bytesSent")),vt.audioCodec=Nt.stat("googCodecName"),vt.audioRtt=Number(Nt.stat("googRtt"))/1e3):Number(Nt.stat("audioOutputLevel"))>0&&(vt.audioRecvPackets=Number(Nt.stat("packetsReceived")),vt.audioRecvPacketsLost=Number(Nt.stat("packetsLost")),vt.audioRecvBytes=Number(Nt.stat("bytesReceived")),vt.audioCodec=Nt.stat("googCodecName"))},Xt=Nt=>{if(Nt.result){const Jt=Nt.result();dt(Tt,Jt);const zt=(sn,qt)=>Jt.filter(Kt=>Kt.id===qt.stat(sn))[0],nn=sn=>zt("localCandidateId",sn),Bt=sn=>zt("remoteCandidateId",sn);for(let sn=0;sn<Jt.length;sn++){const qt=Jt[sn];qt.stat&&(qt.stat("googActiveConnection")==="true"&&(qt.stat("googChannelId").indexOf("audio")>-1?(vt.audioLocalAddress=qt.stat("googLocalAddress"),vt.audioRemoteAddress=qt.stat("googRemoteAddress"),vt.audioLocalCandidateType=qt.stat("googLocalCandidateType"),vt.audioRemoteCandidateType=qt.stat("googRemoteCandidateType"),vt.audioTransportType=qt.stat("googTransportType"),vt.audioLocalRelayProtocol=j(nn(qt).stat("priority")),vt.audioRemoteRelayProtocol=j(Bt(qt).stat("priority"))):qt.stat("googChannelId").indexOf("video")>-1&&(vt.videoLocalAddress=qt.stat("googLocalAddress"),vt.videoRemoteAddress=qt.stat("googRemoteAddress"),vt.videoLocalCandidateType=qt.stat("googLocalCandidateType"),vt.videoRemoteCandidateType=qt.stat("googRemoteCandidateType"),vt.videoTransportType=qt.stat("googTransportType"),vt.videoLocalRelayProtocol=j(nn(qt).stat("priority")),vt.videoRemoteRelayProtocol=j(Bt(qt).stat("priority")))),Number(qt.stat("googAvailableSendBandwidth"))>0&&(vt.videoSentEstimatedBandwidth=Number(qt.stat("googAvailableSendBandwidth"))),Number(qt.stat("googAvailableReceiveBandwidth"))>0&&(vt.videoRecvEstimatedBandwidth=Number(qt.stat("googAvailableReceiveBandwidth"))),Ut(qt),Ct(qt))}"videoCodec"in vt&&!vt.videoLocalAddress&&["LocalAddress","RemoteAddress","LocalCandidateType","RemoteCandidateType","TransportType","LocalRelayProtocol","RemoteRelayProtocol"].forEach(sn=>{vt[`video${sn}`]=vt[`audio${sn}`]})}bt(null,vt)};Tt.getStats(Xt)}function st(Tt,Rt,vt,Et,bt){const Ct=function(zt){bt(zt)},Ut=(Jt,zt)=>{if(zt==="outboundrtp"?(vt.audioSentPackets=Jt.packetsSent,vt.audioSentPacketsLost=Jt.packetsLost,vt.audioSentBytes=Jt.bytesSent):zt==="inboundrtp"&&(vt.audioRecvPackets=Jt.packetsReceived,vt.audioRecvPacketsLost=Jt.packetsLost,vt.audioRecvBytes=Jt.bytesReceived),vt.audioCodec===void 0&&["Safari"].indexOf(h.env.name)!==-1&&Jt.codecId!==void 0){const nn=Tt.remoteDescription.type==="answer"?Tt.remoteDescription:Tt.localDescription,Bt=nn.sdp,sn=Jt.codecId.lastIndexOf("_"),qt=b.getCodecsAndCodecMap(Bt,"audio");sn!==-1&&qt!==void 0&&(vt.audioCodec=qt.codecMap[Jt.codecId.substring(sn+1)])}},Xt=Jt=>{const zt={packetsSent:"videoSentPackets",packetsLost:"videoSentPacketsLost",bytesSent:"videoSentBytes",framesPerSecond:"videoFrameRate",framesSent:"videoFrameRateSent",framesReceived:"videoFramesReceived",frameWidth:"videoWidth",frameHeight:"videoHeight"},nn=["videoSentPackets","videoSentBytes"];for(const Bt in zt)if(Bt in Jt){const sn=zt[Bt];nn.includes(sn)&&Number.isSafeInteger(vt[sn])?vt[sn]+=Jt[Bt]:vt[sn]=Jt[Bt]}},Nt=(Jt,zt)=>{const nn=()=>{if(!("videoSentBytes"in vt?vt.videoSentBytes>0:vt.videoRecvBytes>0))return 0;let sn=0;if(d.isFirefox&&d.version<96)sn=Number(Jt.framerateMean);else{const qt=zt==="outboundrtp"?"framesEncoded":"framesDecoded";vt[qt]=Jt[qt],sn=_e({currentStatFrames:Jt[qt],currentTimestamp:Jt.timestamp,prevStatFrames:Rt[qt],prevTimestamp:Rt.timeStamp||Date.now()})}return sn};if(zt==="outboundrtp"?(Jt.hasOwnProperty("qualityLimitationReason")&&(vt.videoBandwidthLimitedResolution=Jt.qualityLimitationReason==="bandwidth",vt.cpuLimitedResolution=Jt.qualityLimitationReason==="cpu"),Xt(Jt)):zt==="inboundrtp"&&(vt.videoRecvPackets=Jt.packetsReceived,vt.videoRecvPacketsLost=Jt.packetsLost,vt.videoRecvBytes=Jt.bytesReceived),(d.isFirefox&&["outboundrtp","inboundrtp"].includes(zt)||!Et&&zt==="inboundrtp")&&(vt.videoFrameRate=nn()),vt.videoCodec===void 0&&["Safari"].indexOf(h.env.name)!==-1&&Jt.codecId!==void 0){const Bt=Tt.remoteDescription.type==="answer"?Tt.remoteDescription:Tt.localDescription,sn=Bt.sdp,qt=Jt.codecId.lastIndexOf("_"),Kt=b.getCodecsAndCodecMap(sn,"video");qt!==-1&&Kt!==void 0&&(vt.videoCodec=Kt.codecMap[Jt.codecId.substring(qt+1)])}};Tt.getStats(null).then(Jt=>{let zt,nn,Bt,sn,qt,Kt,$t,Sn;const On=[],tn=()=>{if(On.length===0)return null;const Un=On.filter(or=>or>0),Fn=Un.reduce((or,wr)=>or+wr,0);return Un.length?Fn/Un.length:0},bn=Un=>Un.toLowerCase().replace(/[^a-z]/g,""),dn=Un=>{const Fn=bn(Un.type),cr=Un.id.toLowerCase();if(/(in|out)boundrtp$/.test(Fn)){const or=/rtp/.test(cr),wr=or&&/audio/.test(cr),Er=or&&/video/.test(cr),Zr=wr||Un.kind==="audio",po=Er||Un.kind==="video";if(Zr?Ut(Un,Fn):po&&Nt(Un,Fn),Un.hasOwnProperty("roundTripTime")){const lr=Un.mediaType||Un.kind;lr==="video"?On.push(Un.roundTripTime):lr==="audio"&&(vt.audioRtt=Un.roundTripTime)}if(Fn==="remoteinboundrtp"&&Un.hasOwnProperty("packetsLost")){const pr=`${Un.kind}SentPacketsLost`;vt[pr]||(vt[pr]=0),vt[pr]+=Un.packetsLost}}else if(Fn==="transport"){const or=Un.selectedCandidatePairId,wr=Un.srtpCipher;vt.srtpCipher=wr,or&&(sn=_(or,Jt))}else if(Fn==="localcandidate")zt=Un.candidateType,Bt=nt(Un),Kt=Un.protocol||Un.transport;else if(Fn==="remotecandidate")nn=Un.candidateType,qt=nt(Un);else if(Fn==="track"&&cr.indexOf("video")!==0)$t=Un.frameWidth,Sn=Un.frameHeight,Xt(Un);else if(Fn==="mediasource")Un.hasOwnProperty("framesPerSecond")&&(vt.videoFrameRate=Un.framesPerSecond),Un.hasOwnProperty("width")&&(vt.videoWidthInput=Un.width),Un.hasOwnProperty("height")&&(vt.videoHeightInput=Un.height);else if(Fn==="candidatepair"&&Un.hasOwnProperty("availableOutgoingBitrate")){const or=`video${Et?"Sent":"Recv"}EstimatedBandwidth`;vt[or]=parseInt(Un.availableOutgoingBitrate,10)}};if(typeof Jt[Symbol.iterator]=="function"){dt(Tt,Array.from(Jt));for(var Mn=o(Jt),$n;!($n=Mn()).done;){const Un=$n.value,Fn=Array.isArray(Un)?Un[1]:Un;dn(Fn)}}else{dt(Tt,Jt);for(const Un in Jt)Jt.hasOwnProperty(Un)&&dn(Jt[Un])}if(Tt.currentRemoteDescription&&(vt.useDtx=b.hasSendDtx(Tt.currentRemoteDescription.sdp)),Et&&(vt.videoRtt=tn()),(vt.audioRecvBytes||vt.audioSentBytes)&&(vt.audioLocalCandidateType=zt,vt.audioLocalAddress=Bt,vt.audioRemoteCandidateType=nn,vt.audioRemoteAddress=qt,vt.audioTransportType=Kt,vt.audioLocalRelayProtocol=sn,vt.audioCodec===void 0)){const Un=Tt.remoteDescription.type==="answer"?Tt.remoteDescription:Tt.localDescription,Fn=Un.sdp,cr=b.getCodecs(Fn,"audio");vt.audioCodec=cr[0]}if((vt.videoRecvBytes||vt.videoSentBytes)&&(vt.videoLocalCandidateType=zt,vt.videoLocalAddress=Bt,vt.videoRemoteCandidateType=nn,vt.videoRemoteAddress=qt,vt.videoTransportType=Kt,vt.videoLocalRelayProtocol=sn,vt.videoCodec===void 0)){const Un=Tt.remoteDescription.type==="answer"?Tt.remoteDescription:Tt.localDescription,Fn=Un.sdp,cr=b.getCodecs(Fn,"video");vt.videoCodec=cr[0]}ht(vt,Et),vt.videoWidth=vt.videoWidth||$t,vt.videoHeight=vt.videoHeight||Sn,bt(null,vt)}).catch(Ct)}function lt(Tt,Rt,vt,Et,bt){return $?st(Tt,Rt,vt,Et,bt):it(Tt,Rt,vt,Et,bt)}function ht(Tt,Rt){(Rt?et:ct).forEach(Et=>{Tt.hasOwnProperty(Et)||(Tt[Et]=null)})}},function(e,s,i){const o=i(279);e.exports=(a,c)=>{let d="";if(!a||!c)return d;const h=c.get(a);if(h){const g=h.localCandidateId;if(g){const b=c.get(g);if(b){const j=b.relayProtocol,_=b.priority;j?d=`TURN/${j.toUpperCase()}`:d=o(_)}}}return d}},function(e,s,i){s.__esModule=!0,s.default=void 0;let o=function(){function a(){this.value=null,this.changeCount=0}var c=a.prototype;return c.onValue=function(h){h&&h!==this.value&&(this.value&&(this.changeCount+=1),this.value=h)},a}();s.default=o},function(e,s,i){var o=i(11),a=i(642),c=i(228),d="Expected a function",h=Math.max,g=Math.min;function b(j,_,$){var _e,et,ct,dt,nt,it,st=0,lt=!1,ht=!1,Tt=!0;if(typeof j!="function")throw new TypeError(d);_=c(_)||0,o($)&&(lt=!!$.leading,ht="maxWait"in $,ct=ht?h(c($.maxWait)||0,_):ct,Tt="trailing"in $?!!$.trailing:Tt);function Rt(zt){var nn=_e,Bt=et;return _e=et=void 0,st=zt,dt=j.apply(Bt,nn),dt}function vt(zt){return st=zt,nt=setTimeout(Ct,_),lt?Rt(zt):dt}function Et(zt){var nn=zt-it,Bt=zt-st,sn=_-nn;return ht?g(sn,ct-Bt):sn}function bt(zt){var nn=zt-it,Bt=zt-st;return it===void 0||nn>=_||nn<0||ht&&Bt>=ct}function Ct(){var zt=a();if(bt(zt))return Ut(zt);nt=setTimeout(Ct,Et(zt))}function Ut(zt){return nt=void 0,Tt&&_e?Rt(zt):(_e=et=void 0,dt)}function Xt(){nt!==void 0&&clearTimeout(nt),st=0,_e=it=et=nt=void 0}function Nt(){return nt===void 0?dt:Ut(a())}function Jt(){var zt=a(),nn=bt(zt);if(_e=arguments,et=this,it=zt,nn){if(nt===void 0)return vt(it);if(ht)return clearTimeout(nt),nt=setTimeout(Ct,_),Rt(it)}return nt===void 0&&(nt=setTimeout(Ct,_)),dt}return Jt.cancel=Xt,Jt.flush=Nt,Jt}e.exports=b},function(e,s,i){var o=i(14),a=function(){return o.Date.now()};e.exports=a},function(e,s,i){const o=i(50);s.check=function(a){a===void 0&&(a={});const c=a.env||i(2);return c.name==="Chrome"&&c.userAgent.toLowerCase().indexOf("android")>-1&&c.version<65},s.once=o(()=>s.check())},function(e,s,i){const o=i(2);e.exports=function(a){a===void 0&&(a={});const c=a,d=c.env,h=d===void 0?o:d;return!!(h.isiOS&&h.iOSVersion>10)}},function(e,s,i){const o=i(36),a=i(8);e.exports=function(d){let h,g,b,j,_;const $=this;let _e=d.archiving;const et=d.archivingStarted||"Archiving on",ct=d.archivingEnded||"Archiving off";let dt=!0;const nt=function(lt){j.nodeValue=lt,h.setAttribute("title",lt)},it=function(){_&&(clearTimeout(_),_=null),_e?a.addClass(g,"OT_active"):a.removeClass(g,"OT_active"),a.removeClass($.domElement,`OT_archiving-${_e?"off":"on"}`),a.addClass($.domElement,`OT_archiving-${_e?"on":"off"}`),d.show&&_e?(nt(et),a.addClass(b,"OT_mode-on"),a.removeClass(b,"OT_mode-auto"),$.setDisplayMode("on"),_=setTimeout(()=>{a.addClass(b,"OT_mode-auto"),a.removeClass(b,"OT_mode-on")},5e3)):d.show&&!dt?(a.addClass(b,"OT_mode-on"),a.removeClass(b,"OT_mode-auto"),$.setDisplayMode("on"),nt(ct),_=setTimeout(()=>{$.setDisplayMode("off")},5e3)):$.setDisplayMode("off")};o(this,{mode:_e&&d.show&&"on"||"off",nodeName:"h1",htmlAttributes:{className:"OT_archiving OT_edge-bar-item OT_edge-bottom"},onCreate(){h=a.createElement("div",{className:"OT_archiving-light-box"},""),g=a.createElement("div",{className:"OT_archiving-light"},""),h.appendChild(g),b=a.createElement("div",{className:"OT_archiving-status OT_mode-on OT_edge-bar-item OT_edge-bottom"},""),j=document.createTextNode(""),b.appendChild(j),$.domElement.appendChild(h),$.domElement.appendChild(b),it()}}),this.setShowArchiveStatus=function(st){d.show=st,$.domElement&&it.call($)},this.setArchiving=function(st){_e=st,dt=!1,$.domElement&&it.call($)}}},function(e,s,i){e.exports=function(o){o===void 0&&(o={});const a=o.global||(typeof window!==void 0?window:commonjsGlobal);return()=>a.navigator&&a.navigator.mediaDevices}},function(e,s,i){(function(o){const a=i(9),c=i(11),d=i(107),h=i(648),g=i(20),b=i(22),j=i(6);e.exports=function($){$===void 0&&($={});const _e=$.env||i(2),et=$.Errors||i(7),ct=$.otError||i(13)(),dt=$.logging||i(1)("getUserMedia"),nt=$.screenSharing||i(161)(),it=$.getDisplayMediaExtensionHelper||i(288),st=$.customGetUserMedia,lt=$.global||(typeof window!==void 0?window:commonjsGlobal),ht=$.analytics||new g,Tt=lt.navigator,Rt=lt.location,vt=()=>{if(st)return st;if(Tt.mediaDevices){var zt;return(zt=Tt.mediaDevices).getUserMedia.bind(zt)}},Et=function(){const nn=vt();return nn?nn(...arguments):o.reject(new Error("Cannot find getUserMedia"))},bt=()=>{if(st)return st;if(Tt.mediaDevices&&Tt.getDisplayMedia)return Tt.getDisplayMedia.bind(Tt);if(Tt.mediaDevices&&Tt.mediaDevices.getDisplayMedia){var zt;return(zt=Tt.mediaDevices).getDisplayMedia.bind(zt)}},Ct=function(){const nn=bt();return nn?nn(...arguments):o.reject(new Error("Cannot find getDisplayMedia"))},Ut=(()=>{const zt={name:et.USER_MEDIA_ACCESS_DENIED,message:"End-user denied permission to hardware devices"},nn={name:et.NOT_SUPPORTED,message:"A constraint specified is not supported by the browser."},Bt={name:et.CONSTRAINTS_NOT_SATISFIED,message:"It's not possible to satisfy one or more constraints passed into the getUserMedia function"},sn={name:et.NO_DEVICES_FOUND,message:"No voice or video input devices are available on this machine."},qt={name:et.HARDWARE_UNAVAILABLE,message:"The selected voice or video devices are unavailable. Verify that the chosen devices are not in use by another application."},Kt={name:et.UNABLE_TO_CAPTURE_SCREEN,message:"Unable to capture screen. Unknown error occurred"},Sn={AbortError:{name:et.UNABLE_TO_CAPTURE_MEDIA,message:"Unable to capture media. Unknown error occurred"},NotAllowedError:zt,NotFoundError:sn,NotReadableError:qt,OverconstrainedError:Bt,SecurityError:a({},zt,{message:"End-user denied permission to hardware devices or user media support may be disabled on this page"}),TypeError:Bt,PermissionDeniedError:zt,PermissionDismissedError:zt,NotSupportedError:nn,ConstraintNotSatisfiedError:Bt,MandatoryUnsatisfiedError:Bt,OverConstrainedError:Bt,DevicesNotFoundError:sn,NoDevicesFoundError:sn,HardwareUnavailableError:qt,SourceUnavailableError:qt,TrackStartError:qt,ScreenCaptureError:Kt,TabCaptureError:Kt};return h({objectToTrack:Sn,keys:["PermissionDeniedError","PermissionDismissedError","NotSupportedError","ConstraintNotSatisfiedError","MandatoryUnsatisfiedError","OverConstrainedError","DevicesNotFoundError","NoDevicesFoundError","HardwareUnavailableError","SourceUnavailableError","TrackStartError","ScreenCaptureError","TabCaptureError"],onUsage(On){ht.logEvent({action:"DeprecatedPropertyUsage:getUserMedia:errorMap",variation:"Event",payload:{key:On}})}}),Sn})(),Xt=(zt,nn)=>{let Bt=zt;Bt==="AbortError"&&typeof nn=="string"&&nn.match(/(screen|tab).?capture/i)&&(Bt="ScreenCaptureError");const sn=Ut[Bt];let qt;return sn?qt=ct(sn.name,new Error(`${sn.message} (getUserMedia error: ${zt})`)):qt=new Error(`Unknown error while getting user media: ${zt}`),qt.originalMessage=nn,qt.originalName=zt,qt},Nt=zt=>{if(c(zt)&&zt.name){let nn=zt.name,Bt=zt.message;if((Bt==="Cannot find getUserMedia"||Bt==="Cannot find getDisplayMedia")&&(_e.name==="Chrome"&&_e.version>73&&lt.location.protocol!=="https:"?nn="NotAllowedError":nn="NotSupportedError"),_e.name==="Safari"&&nn==="Error"){const Kt=Object.prototype.toString.call(zt).match(/^\[object (\w+Error)\]$/);Kt&&(nn=Kt[1])}const sn=Xt(nn,Bt);return sn.constraintName=zt.constraint||zt.constraintName,sn instanceof b||ht.logEvent({action:"UnexpectedError:getUserMedia:parseErrorEvent",variation:"Event",payload:{name:sn.name,message:sn.message,originalMessage:sn.originalMessage}}),sn}if(typeof zt=="string"){const nn=Xt(zt);return ht.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error is string",error:zt}}),nn}return ht.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error was not string or object with name property",error:zt}}),new Error("Unknown error type while getting media")},Jt=function(nn){if(!nn||!c(nn))return!0;for(const Bt in nn)if(nn.hasOwnProperty(Bt)&&nn[Bt])return!1;return!0};return function(zt,nn){if(nn===void 0&&(nn=!1),dt.debug("getUserMedia wrapper called with",zt),Jt(zt))return dt.error("Couldn't get UserMedia: All constraints were false"),j(o.reject(ct(et.NO_VALID_CONSTRAINTS,new Error("Video and Audio was disabled, you need to enable at least one"))));const Bt=nn&&it.isSupportedInThisBrowser?Ct:Et,sn=j(Bt(zt).catch(Sn=>{const On=Nt(Sn);if(On.name===et.UNABLE_TO_CAPTURE_SCREEN)return new o((tn,bn)=>{nt.checkCapability(dn=>{if(dn.extensionRequired==="chrome"){if(dn.extensionRegistered&&!dn.extensionInstalled){const Mn=ct(et.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,On);Mn.message="Screen sharing extension not installed see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",bn(Mn)}else if(!dn.extensionRegistered){const Mn=ct(et.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,On);Mn.message="Screen sharing extension not registered see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",bn(Mn)}}else bn(On)})});throw On}).then(Sn=>(dt.debug("got stream:",{stream:Sn,tracks:Sn.getTracks(),trackLabels:Sn.getTracks().map(On=>On.label)}),Sn))),qt=Rt.protocol.indexOf("https")!==-1?500:100;let Kt=!0;const $t=()=>{Kt=!1};return sn.then($t,$t),d(qt).then(()=>{if(!Kt)return;const Sn=()=>{sn.emit("accessDialogClosed")};sn.emit("accessDialogOpened"),sn.then(Sn,Sn)}),sn}}}).call(this,i(0))},function(e,s,i){e.exports=function(o){let a=o===void 0?{}:o,c=a.objectToTrack,d=a.keys,h=a.onUsage;if(!Array.isArray(d)&&d!==void 0)throw new Error("keys must be an array, or undefined");if(typeof h!="function")throw new Error("onUsage must be a function");if(c==null)throw new Error("Expected objectToTrack to be a trackable object");Object.keys(c).forEach(g=>{if(d!==void 0&&d.indexOf(g)===-1)return;let b=c[g];Object.defineProperty(c,g,{get(){return h(g),b},set(j){b=j,h(g,b)},enumerable:!0})})}},function(e,s,i){const o=i(2),a=i(650),c=a.isCallbackBasedAPI;let d=i(264),h=null;const g=($,_e)=>{h.getSources($,_e)},b=($,_e)=>{h.getSources($).then(et=>{_e(void 0,et)},_e)},j=()=>c?g:b,_=($,_e)=>{j()({types:[$]},(ct,dt)=>{if(ct){_e(ct);return}const nt=dt[0];if(!nt){_e(new Error("Could not find Electron source for screensharing"));return}const it={audio:!1,video:{mandatory:{chromeMediaSource:$,chromeMediaSourceId:nt.id}}};_e(void 0,it)})};e.exports=function(_e){_e===void 0&&(_e={});try{const et=()=>{let dt=typeof window!==void 0?window:commonjsGlobal;for(;typeof dt.require!="function"&&dt.parent&&dt.parent!==dt;)dt=dt.parent;return dt},ct=()=>{const dt=et();return(dt.require?dt.require("electron"):dt.electron).desktopCapturer};h=_e.desktopCapturer||(o.isElectron?ct():null),d=_e.isElectronScreenSharingSource||d}catch{}return{isSupportedInThisBrowser:h!==null,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!0,window:!0,browser:!0},register:()=>({isInstalled:et=>et(!0),getConstraints(et,ct,dt){d(et)?dt(void 0,{audio:!0,video:!1}):_(et,dt)}})}}},function(e,s,i){const a=i(2).version<78,c=!a;e.exports={isCallbackBasedAPI:a,isPromiseBasedAPI:c}},function(e,s,i){const o=i(2),a=i(159).default,c=()=>o.isFirefox?!a:!1;e.exports={isSupportedInThisBrowser:c(),autoRegisters:!0,extensionRequired:!1,extensionInstalled:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:!0,browser:!1},register(){return{isInstalled(d){d(typeof OTScreenSharing=="object")},getConstraints(d,h,g){h.video={mediaSource:d},h.browserWindow&&(h.video.browserWindow=h.browserWindow,delete h.browserWindow),typeof h.scrollWithPage<"u"&&(h.video.scrollWithPage=h.scrollWithPage,delete h.scrollWithPage),g(void 0,h)}}}}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=i(653),h=d.normaliseOptions,g=i(289),b=g.isMediaStreamTrack,j=i(148),_=i(9),$=i(141),_e=i(290).default,et=i(7),ct=i(47),dt=i(13)(),nt=i(291),it=nt.isValidVideoContentHint,st=i(6),lt=i(149),ht=i(2),Tt=i(263),Rt="getUserMedia request was aborted";e.exports=function(Et){Et===void 0&&(Et={}),["deviceHelpers","getUserMediaHelper"].forEach(qt=>{j(Et[qt],`${qt} dependency must be injected into processPubOptions`)});const bt=Et.generateConstraintInfo||i(253),Ct=Et.global||(typeof window!==void 0?window:commonjsGlobal),Ut=Et.logging||i(1)("processPubOptions"),Xt=Et.navigator||Ct.navigator,Nt=Et.screenSharing||i(161)(),Jt=Et.env||ht,zt=i(654)({navigator:Xt||{}}),nn=Et,Bt=nn.deviceHelpers,sn=nn.getUserMediaHelper;return(qt,Kt,$t)=>{var Sn,On,tn;const bn=h(qt,Kt,Ut),dn=lt(bn.videoSource),Mn=b(bn.audioSource),$n=b(bn.videoSource),Un=!Mn&&bn.audioSource!==null,Fn=!$n&&bn.videoSource!==null,cr=Un||Fn,or=Vn=>typeof Vn=="boolean",wr=!dn||Mn||Tt,Er=$(bn,{mirror:!dn&&!$n,publishAudio:!0,publishVideo:!0,showControls:!0,fitMode:dn?"contain":"cover",insertDefaultUI:!0,enableRenegotiation:!1,enableStereo:!1,enableDtx:!1,disableAudioProcessing:!1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),Zr=bn.audioFallback,po=Zr===void 0?{}:Zr,lr=bn.audioFallbackEnabled;if(Er.publisherAudioFallbackEnabled=(Sn=po.publisher)!=null?Sn:!1,Er.subscriberAudioFallbackEnabled=(On=(tn=po.subscriber)!=null?tn:lr)!=null?On:!dn,Er.videoContentHint!==void 0&&!it(Er.videoContentHint)&&(Ut.warn(`${Kt}: Invalid content hint. Valid content hints are "text", "detail", "motion", or ""`),Er.videoContentHint=""),Er.name&&(Er.name=String(Er.name)),or(Er.enableDtx)||(Er.enableDtx=!1),or(Er.enableStereo)||(Er.enableStereo=!1),Er.initials&&(typeof Er.initials!="string"&&(Er.initials=""),Er.initials.length>2&&(Er.initials="",Ut.warn("Publisher initials cleared. Only one or two characters allowed for publisher initials.")),Er.initials=Er.initials.toUpperCase()),Er.constraints)Ut.warn(`${Kt}: You have passed your own constraints not using ours`);else{const Vn=bt(Object.assign({isScreenSharing:dn,isCustomAudioTrack:Mn,isCustomVideoTrack:$n},ct(Er,["audioSource","publishAudio","videoSource","publishVideo","resolution","maxResolution","frameRate","facingMode","enableRenegotiation","enableStereo","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl"]),{env:Jt,usingOptionalMandatoryStyle:zt(dn)}));_(Er,Vn)}const pr={isScreenSharing:dn,isCustomAudioTrack:Mn,isCustomVideoTrack:$n,shouldAllowAudio:wr,properties:Er};return st(pr),pr.getUserMedia=(0,c.default)(a.default.mark(function Vn(){var In,zn,vr,Jr,kn,ir,gr,Br,vo;return a.default.wrap(function(io){for(;;)switch(io.prev=io.next){case 0:if(In=function(){for(var Wr=arguments.length,To=new Array(Wr),no=0;no<Wr;no++)To[no]=arguments[no];return pr.emit("accessDialogOpened",...To)},zn=function(){for(var Wr=arguments.length,To=new Array(Wr),no=0;no<Wr;no++)To[no]=arguments[no];return pr.emit("accessDialogClosed",...To)},cr){io.next=7;break}return vr=new Ct.MediaStream,Mn&&vr.addTrack(bn.audioSource),$n&&vr.addTrack(bn.videoSource),io.abrupt("return",vr);case 7:if(!dn){io.next=15;break}return io.next=10,Nt.getConstraints({onAccessDialogOpened:In,onAccessDialogClosed:zn,videoSource:bn.videoSource,constraints:Er.constraints});case 10:if(Er.constraints=io.sent,!$t()){io.next=13;break}throw dt(et.CANCEL,new Error(Rt));case 13:io.next=25;break;case 15:return io.next=17,Bt.shouldAskForDevices();case 17:if(Jr=io.sent,!$t()){io.next=20;break}throw dt(et.CANCEL,new Error(Rt));case 20:Ut.debug(`${Kt}: shouldAskForDevices:`,Jr),Jr.video||(Ut.warn(`${Kt}: Setting video constraint to false, there are no video sources`),Er.constraints.video=!1),Jr.audio||(Ut.warn(`${Kt}: Setting audio constraint to false, there are no audio sources`),Er.constraints.audio=!1),pr.videoDevices=Jr.videoDevices,pr.audioDevices=Jr.audioDevices;case 25:if(kn=Er.constraints,Ut.debug(`${Kt}: onConstraintsFound`,kn),!$t()){io.next=29;break}throw dt(et.CANCEL,new Error(Rt));case 29:return ir="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=188088",gr="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=204106",Br=to=>to.originalName==="NotReadableError"&&to.originalMessage==="Failed starting capture of a video track",vo=function(){var to=(0,c.default)(a.default.mark(function Wr(){var To,no,yo,Pr,fu;return a.default.wrap(function(oo){for(;;)switch(oo.prev=oo.next){case 0:return To=sn(kn,dn),To.on("accessDialogOpened",In),To.on("accessDialogClosed",zn),oo.prev=3,oo.next=6,To;case 6:if(no=oo.sent,!(Jt.isiOS&&Er.publishVideo&&no.getVideoTracks().length&&no.getVideoTracks()[0].readyState==="ended")){oo.next=11;break}throw no.getTracks().forEach(Xo=>Xo.stop()),yo=new Error(ir),yo;case 11:return oo.abrupt("return",no);case 14:if(oo.prev=14,oo.t0=oo.catch(3),!Jt.isiOS){oo.next=34;break}if(!(Br(oo.t0)&&Jt.iOSVersion>=13&&Jt.iOSVersion<13.4)){oo.next=32;break}return oo.prev=18,Pr=sn({audio:!0,video:!1},!1),oo.next=22,Pr;case 22:fu=oo.sent,fu.getTracks().forEach(Xo=>Xo.stop()),oo.next=29;break;case 26:oo.prev=26,oo.t1=oo.catch(18),Ut.debug(`${Kt}: error disposing audio track`,oo.t1);case 29:throw new Error(gr);case 32:if(oo.t0.name!==et.HARDWARE_UNAVAILABLE){oo.next=34;break}throw new Error(ir);case 34:throw oo.t0;case 35:return oo.prev=35,setTimeout(()=>{To.off("accessDialogOpened",In),To.off("accessDialogClosed",zn)}),oo.finish(35);case 38:case"end":return oo.stop()}},Wr,null,[[3,14,35,38],[18,26]])}));return function(){return to.apply(this,arguments)}}(),io.next=35,_e(vo,(to,Wr)=>[ir,gr].includes(to.message)&&Wr===1&&!$t()?1e3:!1)();case 35:if(vr=io.sent,!$t()){io.next=39;break}throw vr.getTracks().forEach(to=>{to.stop()}),dt(et.CANCEL,new Error(Rt));case 39:return Mn&&vr.addTrack(bn.audioSource),$n&&vr.addTrack(bn.videoSource),io.abrupt("return",vr);case 42:case"end":return io.stop()}},Vn)})),pr}}},function(e,s,i){const o=i(289),a=o.isMediaStreamTrack,c=i(37),d=i(2),h=(g,b,j)=>{const _=g&&typeof g=="object"?c(g):{};if(_.audioSource===!1&&(_.audioSource=null),_.videoSource===!1&&(_.videoSource=null),_.minVideoBitrate!==void 0&&!(typeof _.minVideoBitrate=="number"&&_.minVideoBitrate>0)&&(j.warn(`${b}: Invalid minVideoBitrate in publisher properties. minVideoBitrate must be a positive number`),delete _.minVideoBitrate),_.audioBitrate!==void 0&&!(_.audioBitrate>=6*1e3&&_.audioBitrate<=510*1e3)&&(j.warn(`${b}: Invalid audioBitrate in publisher properties. audioBitrate must be a number between ${6*1e3} and ${510*1e3} bits per second`),delete _.audioBitrate),d.name==="Firefox"&&d.version<49){const $="Firefox 48 and below";a(_.audioSource)&&(_.audioSource=null,j.warn(`${b}: Cannot use custom tracks with ${$}. Setting audioSource to null`)),a(_.videoSource)&&(_.videoSource=null,j.warn(`${b}: Cannot use custom tracks with ${$}. Setting videoSource to null`))}return _};s.normaliseOptions=h},function(e,s,i){const o=i(2),a=o.name,c=o.version,d=i(257);e.exports=function(g){let b=g===void 0?{}:g,j=b.navigator,_=j===void 0?window.navigator:j;return function(_e){return _e&&!d||!(_.mediaDevices&&_.mediaDevices.getUserMedia)||a==="Chrome"&&c<61}}},function(e,s,i){e.exports=function(a){a===void 0&&(a={}),["processPubOptions"].forEach(b=>{if(!a[b])throw new Error(`${b} dependency must be injected into OT.getUserMedia`)});const c=a.logging||i(1)("getUserMedia"),d=a,h=d.processPubOptions;return function(j){return j===void 0&&(j={}),h(j,"OT.getUserMedia",()=>!1).getUserMedia().catch($=>{throw c.error(`OT.getUserMedia failed to getUserMedia: ${$}`),$})}}},function(e,s,i){e.exports=function(a,c){const d=(h,g)=>()=>{throw new Error(`Cannot ${h} ${g}, ${a} is destroyed`)};Object.keys(c).forEach(h=>{typeof c[h]=="function"?c[h]=d("call",h):Object.defineProperty(c,h,{get:d("get",h),set:d("set",h)})})}},function(e,s,i){e.exports=o=>{if("srcObject"in o)return;const a=window&&window.URL;"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(o,"srcObject",{get(){return this._srcObject},set(c){const d=this;if(this._srcObject=c,this.src&&a.revokeObjectURL(this.src),!c){this.src="";return}return this.src=a.createObjectURL(c),c.addEventListener("addtrack",()=>{d.src&&a.revokeObjectURL(d.src),d.src=a.createObjectURL(c)}),c.addEventListener("removetrack",()=>{d.src&&a.revokeObjectURL(d.src),d.src=a.createObjectURL(c)}),this._srcObject}})}},function(e,s,i){const o=d=>!(!d||typeof d.getBoundingClientRect!="function"),a=d=>{const h=d.getBoundingClientRect(),g=window.innerHeight||document.documentElement.clientHeight,b=window.innerWidth||document.documentElement.clientWidth,j=h.top<=g&&h.top+h.height>=0,_=h.left<=b&&h.left+h.width>=0;return j&&_},c=d=>{const h=g=>g.style&&g.style.visibility==="hidden"?!0:g.parentNode?h(g.parentNode):!1;return d.offsetParent!==null&&!h(d)};e.exports=d=>o(d)&&a(d)&&c(d)},function(e,s,i){const o=i(105),a=i(8),c={0:"rotate(0deg)",270:"rotate(90deg)",90:"rotate(-90deg)",180:"rotate(180deg)"};e.exports=function(h,g,b){let j=b;o(h,{isRotated:{get(){return this.orientation()&&(this.orientation().videoOrientation===270||this.orientation().videoOrientation===90)}},orientation:{get(){return j},set(_){j=_;const $=c[_.videoOrientation]||c.ROTATED_NORMAL;switch(a.env.name){case"Chrome":case"Safari":g().style.webkitTransform=$;break;default:g().style.transform=$}h.trigger("orientationChanged",j)}},audioChannelType:{get(){return"mozAudioChannelType"in this.domElement?this.domElement.mozAudioChannelType:"unknown"},set(_){"mozAudioChannelType"in this.domElement&&(this.domElement.mozAudioChannelType=_)}}})}},function(e,s,i){e.exports=function(){function a(c){return c.getTracks().every(d=>d.readyState==="ended")}return function(d,h,g){const b=[];function j(et){setTimeout(()=>{if(b.length)if(a(d))$(),typeof h=="function"&&h();else{const ct=et.target;_(ct),typeof g=="function"&&g(ct)}},100)}function _(et){et.onended===j&&(et.onended=null);const ct=b.indexOf(et);ct>=0&&b.splice(ct,1)}function $(){b.slice().forEach(_)}function _e(){d.getTracks().forEach(et=>{b.push(et),et.onended=j})}return _e(),{stop:$,refresh:()=>{$(),_e()}}}}},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(18)),c=o(i(1)),d=o(i(108)),h=i(74);const g=(0,c.default)("AudioFallbackState");var j=()=>{const _=new a.default;let $=h.CongestionLevels.LOW,_e=d.default.ACTIVE_VIDEO;const et=st=>{_e=st,_.emit("stateChange",{state:st})},ct=()=>{$=h.CongestionLevels.LOW,et(d.default.ACTIVE_VIDEO)},dt=()=>{$===h.CongestionLevels.LOW&&et(d.default.ACTIVE_VIDEO_WITH_WARNING),$=h.CongestionLevels.MEDIUM},nt=()=>{$=h.CongestionLevels.CRITICAL,et(d.default.SUSPENDED_VIDEO)},it={[h.CongestionLevels.LOW]:ct,[h.CongestionLevels.MEDIUM]:dt,[h.CongestionLevels.CRITICAL]:nt};return Object.assign(_,{setCongestionLevel(st){if(this.congestionLevel===st){g.warn(`Congestion level already set: ${st}`);return}const lt=it[st];lt?lt():g.warn(`Invalid congestion level: ${st}`)},getState(){return _e},reset(){$=h.CongestionLevels.LOW,_e=d.default.ACTIVE_VIDEO}})};s.default=j},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(663)),c=o(i(664)),d=o(i(665)),h=o(i(667)),g=o(i(668));const b=i(18);var _=function(_e,et){_e===void 0&&(_e={}),et===void 0&&(et={});const ct=new b,dt=_e,nt=dt.videoResolution,it=dt.getStats,st=et,lt=st.createMovingAverageTracker,ht=lt===void 0?h.default:lt,Tt=st.createTimeBasedCongestionLevel,Rt=Tt===void 0?a.default:Tt,vt=st.createBasicCongestionLevel,Et=vt===void 0?c.default:vt,bt=st.getFairQualityBandwidthForResolution,Ct=bt===void 0?g.default:bt,Ut=st.CongestionLevelStats,Xt=Ut===void 0?d.default:Ut,Nt={bandwidthFairThreshold:Ct(nt)},Jt=Rt(Nt),zt=Et(Nt),nn=ht(),Bt=ht(),sn=ht(),qt=()=>Jt.getLevel({bandwidth:sn.getMovingAverageValue(),audioPacketLoss:nn.getMovingAverageValue()}),Kt=()=>zt.getLevel({bandwidth:sn.getMovingAverageValue(),audioPacketLoss:nn.getMovingAverageValue()}),$t=()=>{const tn=qt(),bn=Kt(),dn=Math.max(tn,bn);ct.emit("congestionLevel",dn)},Sn=tn=>{let bn=tn.audioPacketLoss,dn=tn.videoPacketLoss,Mn=tn.bandwidth;nn.addValue(bn),Bt.addValue(dn),sn.addValue(Mn),$t()},On=new Xt(it);return On.on("statsAvailable",tn=>{Sn(tn)}),Object.assign(ct,{start(){On.start()},stop(){On.stop()}})};s.default=_},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(297)),c=i(74),h=function(b){b===void 0&&(b={});const j=Object.assign({},a.default,b);let _=!1,$;return{getLevel(_e){if(_e.audioPacketLoss<j.packetLossCriticalThreshold)return _=!1,c.LOW;const ct=Date.now();return _||($=ct,_=!0),ct>$+j.criticalCongestionPeriod?c.CRITICAL:ct>$+j.criticalCongestionPeriod/2?c.MEDIUM:c.LOW}}};s.default=h},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(297)),c=i(74),h=function(b){b===void 0&&(b={});const j=Object.assign({},a.default,b);return{getLevel(_){let $=_.bandwidth,_e=_.audioPacketLoss,et;if($<=0)return _e>j.packetLossCriticalThresholdMediumBw?et=c.CRITICAL:et=c.LOW,et;if($>=j.bandwidthFairThreshold?et=c.LOW:$>=j.bandwidthCriticalThreshold?$>=(j.bandwidthCriticalThreshold+j.bandwidthFairThreshold)/2?_e>j.packetLossCriticalThresholdMediumBw*2?et=c.CRITICAL:et=c.MEDIUM:_e>j.packetLossCriticalThresholdMediumBw?et=c.CRITICAL:et=c.MEDIUM:_e>j.packetLossCriticalThreshold?et=c.CRITICAL:et=c.MEDIUM,et===void 0)throw new Error("undefined congestion level");return et}}};s.default=h},function(e,s,i){s.__esModule=!0,s.default=void 0;var o=c(i(666));function a(_){if(typeof WeakMap!="function")return null;var $=new WeakMap,_e=new WeakMap;return(a=function(ct){return ct?_e:$})(_)}function c(_,$){if(!$&&_&&_.__esModule)return _;if(_===null||typeof _!="object"&&typeof _!="function")return{default:_};var _e=a($);if(_e&&_e.has(_))return _e.get(_);var et={},ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var dt in _)if(dt!=="default"&&Object.prototype.hasOwnProperty.call(_,dt)){var nt=ct?Object.getOwnPropertyDescriptor(_,dt):null;nt&&(nt.get||nt.set)?Object.defineProperty(et,dt,nt):et[dt]=_[dt]}return et.default=_,_e&&_e.set(_,et),et}const d=i(18),h=1e3,g=500;var j=function($,_e){_e===void 0&&(_e={});const et=_e.StatsUtils||o,ct=new d;let dt;const nt=lt=>{const ht=et.parseStats(lt);if(!dt){dt=ht;return}const Tt=et.getAudioPacketLoss(ht,dt),Rt=et.getVideoPacketLoss(ht,dt),vt=ht.bandwidth;dt=ht,ct.emit("statsAvailable",{audioPacketLoss:Tt,videoPacketLoss:Rt,bandwidth:vt})},it=()=>{$((lt,ht)=>{lt||nt(ht)})};let st;return Object.assign(ct,{start(){st=setTimeout(()=>{it(),st=setInterval(()=>{it()},g)},h)},stop(){clearInterval(st)}})};s.default=j},function(e,s,i){s.__esModule=!0,s.parseStats=s.getVideoResolution=s.getVideoPacketStats=s.getVideoPacketLoss=s.getBandwidth=s.getAudioPacketStats=s.getAudioPacketLoss=void 0;const o=(_e,et)=>{const ct=_e.filter(st=>{let lt=st.type,ht=st.kind;return lt==="outbound-rtp"&&ht===et}),dt=_e.filter(st=>{let lt=st.type,ht=st.kind;return lt==="remote-inbound-rtp"&&ht===et}),nt=ct.reduce((st,lt)=>st+lt.packetsSent,0),it=dt.reduce((st,lt)=>st+lt.packetsLost,0);return{packetsSent:nt,packetsLost:it}},a=_e=>_e.filter(dt=>{let nt=dt.type,it=dt.kind;return nt==="outbound-rtp"&&it==="video"}).reduce((dt,nt)=>({width:Math.max(dt.width,nt.frameWidth),height:Math.max(dt.height,nt.frameHeight)}),{width:0,height:0});s.getVideoResolution=a;const c=_e=>{const et=o(_e,"audio"),ct=et.packetsSent;return{audioPacketsLost:et.packetsLost,audioPacketsSent:ct}};s.getAudioPacketStats=c;const d=_e=>{const et=o(_e,"video"),ct=et.packetsSent;return{videoPacketsLost:et.packetsLost,videoPacketsSent:ct}};s.getVideoPacketStats=d;const h=_e=>_e.find(ct=>ct.type==="candidate-pair").availableOutgoingBitrate;s.getBandwidth=h;const g=_e=>{const et=c(_e),ct=et.audioPacketsSent,dt=et.audioPacketsLost,nt=d(_e),it=nt.videoPacketsSent,st=nt.videoPacketsLost;return{bandwidth:h(_e),audioPacketsSent:ct,audioPacketsLost:dt,videoPacketsSent:it,videoPacketsLost:st}};s.parseStats=g;const b=(_e,et)=>et===0?0:_e/et,j=(_e,et,ct)=>{const dt=et[`${_e}PacketsSent`]-ct[`${_e}PacketsSent`],nt=et[`${_e}PacketsLost`]-ct[`${_e}PacketsLost`];return b(nt,dt)},_=(_e,et)=>j("audio",_e,et);s.getAudioPacketLoss=_;const $=(_e,et)=>j("video",_e,et);s.getVideoPacketLoss=$},function(e,s,i){s.__esModule=!0,s.default=void 0;var a=function(d){d===void 0&&(d=0);let h=d,g=1e4,b;const j=()=>{const _=Date.now();if(!b)return b=_,1;const $=_-b,_e=1-Math.exp(-$/g);return b=_,_e};return{setPeriod(_){g=_},getMovingAverageValue(){return h},addValue(_){const $=j();h=_*$+h*(1-$)}}};s.default=a},function(e,s,i){const o=[{width:"320",height:"180",fairQualityBitrate:12e4},{width:"320",height:"240",fairQualityBitrate:12e4},{width:"352",height:"288",fairQualityBitrate:125e3},{width:"480",height:"270",fairQualityBitrate:125e3},{width:"640",height:"360",fairQualityBitrate:15e4},{width:"640",height:"480",fairQualityBitrate:15e4},{width:"960",height:"540",fairQualityBitrate:15e4},{width:"1280",height:"720",fairQualityBitrate:4e5},{width:"1920",height:"1080",fairQualityBitrate:5e5}].sort((h,g)=>h.fairQualityBitrate-g.fairQualityBitrate),a=25e4,c=o.reduce((h,g)=>{let b=g.fairQualityBitrate;return Math.max(h,b)},a),d=(h,g)=>{var b;return!h||!g?a:((b=o.find(_=>{let $=_.height,_e=_.width;return g*h<=$*_e}))==null?void 0:b.fairQualityBitrate)||c};e.exports=d},function(e,s,i){const o=a=>a>=15&&a<15.4;e.exports=a=>(a=a||i(2),a.isiPad?!0:a.isiPhone?o(a.iOSVersion):a.isSafari?o(a.version):!1)},function(e,s,i){const o=[{width:320,height:180,maxBitrate:3e5},{width:320,height:240,maxBitrate:4e5},{width:352,height:288,maxBitrate:5e5},{width:480,height:270,maxBitrate:55e4},{width:640,height:360,maxBitrate:8e5},{width:640,height:480,maxBitrate:8e5},{width:960,height:540,maxBitrate:11e5},{width:1280,height:720,maxBitrate:25e5},{width:1920,height:1080,maxBitrate:45e5}].sort((d,h)=>d.maxBitrate-h.maxBitrate),a=45e5,c=(d,h)=>{var g;return!d||!h?a:((g=o.find(j=>{let _=j.height,$=j.width;return h*d<=_*$}))==null?void 0:g.maxBitrate)||a};e.exports=c},function(e,s,i){var o=i(62),a=i(99),c=i(35);function d(h,g){var b={};return g=c(g,3),a(h,function(j,_,$){o(b,_,g(j,_,$))}),b}e.exports=d},function(e,s,i){e.exports=function(a,c){const d=setTimeout(()=>{a((h,g)=>{if(!h)for(let b=0;b<g.length;b+=1){const j=g[b];j.id.indexOf("_send")!==-1&&j.type==="ssrc"&&(j.kind==="audio"||j.mediaType==="audio")&&parseInt(j.bytesSent,10)===0&&c()}})},3e3);return function(){clearTimeout(d)}}},function(e,s,i){const o=i(6),a=i(301),c=i(15);e.exports=function(){return function(g,b){const j={},_=[];let $=!1,_e=!1;this._id=c();const et=()=>{this.trigger("iceConnected"),$=!0},ct=()=>this.trigger("close"),dt=vt=>this.trigger("remoteVideoSupported",vt),nt=vt=>{let Et=vt.reason,bt=vt.prefix;return this.trigger("error",Et,bt)},it=vt=>this.trigger("iceConnectionStateChange",vt),st=vt=>this.trigger("signalingStateChange",vt),lt=vt=>this.trigger("signalingStateStable",vt),ht=()=>{_e&&(_e=!1,b.removeFromSinglePeerConnection(this._id))};o(this);const Tt=b.getPeerConnection(g,this);Tt.on({iceConnected:et,close:ct,signalingStateChange:st,signalingStateStable:lt,error:nt,qos:vt=>this.trigger("qos",vt),iceConnectionStateChange:it,remoteVideoSupported:dt,negotiationNeeded:ht},this);const Rt=()=>Tt.iceConnectionStateIsConnected()&&!$;this._onTrackAdded=vt=>{const Et=vt.track,bt=vt.transceiver;j[Et.id]=bt.mid,_.push(Et),Rt()&&et(),this.trigger("trackAdded",vt)},this.disconnect=()=>{_e=!0,b.removeSubscriber(this._id,Object.values(j))},this.removeTrack=vt=>{j[vt.id]&&b.removeSubscriber(this._id,[j[vt.id]]),a(_,vt),b.removeTrack(vt,this._id)},this.remoteTracks=()=>_,this.generateOfferAndSend=()=>Tt.generateOfferAndSend(),this.getDataChannel=(vt,Et,bt)=>{Tt.getDataChannel(vt,Et,bt)},this.getSourceStreamId=()=>Tt.getSourceStreamId(),this.processMessage=(vt,Et)=>{(vt==="offer"||vt==="answer")&&b.cacheOfferAnswer(Et.content.sdp),Tt.processMessage(vt,Et)},this.remoteDescription=()=>Tt.remoteDescription(),this.getStats=vt=>{Tt.getStats(vt)},this.getSynchronizationSources=vt=>{Tt.getSynchronizationSources(vt)},this.getRtcStatsReport=vt=>{Tt.getRtcStatsReport(vt)},this.remoteStreams=()=>Tt.remoteStreams(),this.hasRelayCandidates=()=>Tt.hasRelayCandidates(),this.iceRestart=()=>Tt.iceRestart(),this.iceConnectionStateIsConnected=()=>Tt.iceConnectionStateIsConnected()}}},function(e,s,i){e.exports=function(c,d,h){h===void 0&&(h=!1);let g=null,b=0,j=null,_=h;const $=it=>it.type==="inbound-rtp"&&(it.kind||it.mediaType)==="audio",_e=it=>it.id===j&&it.type==="track"&&(it.kind||it.mediaType)==="audio",et=(it,st)=>it===g&&st===b,ct=(it,st)=>!_&&it===0&&g===0&&st>b,dt=()=>{setTimeout(()=>{_=!0},3e3)},nt=setInterval(()=>{c((it,st)=>{if(it)return;j=(st.find($)||{}).trackId;const ht=st.find(_e);if(ht){const Tt=ht.audioLevel,Rt=ht.totalSamplesReceived;if(Tt===void 0)return;et(Tt,Rt)?(clearInterval(nt),d("audioLevelStuck")):ct(Tt,Rt)&&(clearInterval(nt),d("audioLevelStuckAt0")),g=Tt,b=Rt}})},500);return h||dt(),{stop:()=>{clearInterval(nt)}}}},function(e,s,i){(function(o){const a=i(20),c=new a;e.exports=function(h){h===void 0&&(h={});const g=h.analytics||c,b=h.errors||i(7),j=h.ExceptionCodes||i(10),_=h.otError||i(13)(),$=h.sessionObjects||i(21),_e=h.uuid||i(15);return function(ct){ct===void 0&&(ct=()=>{});const dt=_e();function nt(it){it?ct(_(b.REPORT_ISSUE_FAILED,new Error("Error calling OT.reportIssue(). Check the client's network connection."),j.REPORT_ISSUE_ERROR)):ct(null,dt)}$.sessions.length()===0?g.logEvent({action:"ReportIssue",variation:"Event",payload:{reportIssueId:dt}},null,nt):o.all($.sessions.map(it=>it.reportIssue({id:dt}))).then(()=>nt(),it=>nt(it))}}}).call(this,i(0))},function(e,s,i){e.exports=o=>{let a=o.window,c=!1;try{const d=Object.defineProperty({},"passive",{get(){c=!0}});a.addEventListener("testPassive",null,d),a.removeEventListener("testPassive",null,d)}catch{}return c}},function(e,s,i){Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function j(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,et.key,et)}}return function(_,$,_e){return $&&j(_.prototype,$),_e&&j(_,_e),_}}(),a=i(303),c=d(a);function d(j){return j&&j.__esModule?j:{default:j}}function h(j,_){if(!(j instanceof _))throw new TypeError("Cannot call a class as a function")}var g=function(){},b=function(){function j(){h(this,j),this.internalIsCanceled=!1,this.listeners=[]}return o(j,[{key:"isCanceled",value:function(){return this.internalIsCanceled}},{key:"cancel",value:function(){this.internalIsCanceled||(this.internalIsCanceled=!0,this.listeners.forEach(function($){return $()}),this.listeners=null)}},{key:"throwIfCanceled",value:function(){if(this.internalIsCanceled)throw new c.default("Operation has been canceled.")}},{key:"onCancel",value:function($){var _e=this;return this.internalIsCanceled?g:(this.listeners.push($),function(){if(_e.listeners){var et=_e.listeners.indexOf($);et!==-1&&_e.listeners.splice(et,1)}})}},{key:"fork",value:function(){if(this.internalIsCanceled)return j.CANCELED;var $=new j;return this.onCancel(function(){return $.cancel()}),$}}]),j}();s.default=b,b.CANCELED=new b,b.CANCELED.internalIsCanceled=!0},function(e,s,i){(function(o){const a=i(61),c=i(304).default,d=i(154);i(109)();function h(g,b){const j=a(g),_=new o($=>{const _e=()=>{(g.videoWidth()>2||g.videoHeight()>2)&&$(!0)};j.on("videoDimensionsChanged",_e),_e()});return c(d(_,b,()=>!1),()=>j.removeAll())}e.exports=h}).call(this,i(0))},function(e,s,i){(function(o){const a=i(61),c=i(304).default,d=i(154);i(109)();function h(g,b){b===void 0&&(b=5e3);const j=a(g),_=new o($=>{j.on("timeupdate",$),j.on("loadedmetadata",$)});return c(d(_,b,()=>!1),()=>j.removeAll())}e.exports=h}).call(this,i(0))},function(e,s,i){const o=i(1)("WidgetView:fixMini"),a=128,c=128,d=64,h=64;e.exports=function(b){const j=b.clientWidth,_=b.clientHeight;b.classList.remove("OT_micro"),b.classList.remove("OT_mini"),(j<d||_<h)&&(b.classList.add("OT_micro"),o.debug("OT_micro class added",{clientWidth:j,clientHeight:_,microWidth:d,microHeight:h})),(j<a||_<c)&&(b.classList.add("OT_mini"),o.debug("OT_mini class added",{clientWidth:j,clientHeight:_,miniWidth:a,miniHeight:c}))}},function(e,s,i){const o=i(15);e.exports=function(c,d){let h,g;if(c&&c.nodeName?(h=c,(!h.getAttribute("id")||h.getAttribute("id").length===0)&&h.setAttribute("id",`OT_${o()}`),g=h.getAttribute("id")):c&&(h=document.getElementById(c),h&&(g=c)),g||(g=`OT_${o().replace(/-/g,"_")}`),!h)return h=document.createElement("div"),h.id=g,h.setAttribute("id",g),h.style.backgroundColor="#000000",document.body.appendChild(h),h;const b=document.createElement("div");switch(b.id=`OT_${o()}`,d){case"append":return h.appendChild(b),b;case"before":return h.parentNode.insertBefore(b,h),b;case"after":return h.parentNode.insertBefore(b,h.nextSibling),b;case"replace":default:for(;h.firstChild;)h.removeChild(h.firstChild);return h}}},function(e,s,i){e.exports=function(a,c){return c===void 0&&(c="px"),String(parseFloat(a,10))===String(a).trim()?`${String(a).trim()}${c}`:a}},function(e,s,i){const o=()=>{const c=document.createElementNS("http://www.w3.org/2000/svg","circle");return c.setAttribute("cx","50%"),c.setAttribute("cy","50%"),c.setAttribute("r","50%"),c.setAttribute("fill","%23000000"),c},a=c=>{const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.setAttribute("x","50%"),d.setAttribute("y","50%"),d.setAttribute("dy","5%"),d.setAttribute("line-height","133%"),d.setAttribute("font-size","108"),d.setAttribute("font-weight","500"),d.setAttribute("font-style","normal"),d.setAttribute("fill","%23FFFFFF"),d.setAttribute("font-family","spezia,sans-serif"),d.setAttribute("dominant-baseline","middle"),d.setAttribute("text-anchor","middle");const h=document.createTextNode(c);return d.appendChild(h),d};e.exports=c=>{const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 300 300"),d.setAttribute("style","width: 50%; dominant-baseline: middle; text-anchor: middle;");const h=o(),g=a(c);return d.appendChild(h),d.appendChild(g),d}},function(e,s,i){(function(o){const a=i(73);e.exports=function(d,h){let g=h===void 0?{}:h,b=g.frequency,j=b===void 0?60:b,_=g.timeout,$=_===void 0?2e3:_;return new o((_e,et)=>{let ct;const dt=new a(()=>{function nt(){try{return d()}catch{return!1}}nt()&&(clearTimeout(ct),dt.stop(),_e())},j);ct=setTimeout(()=>{dt.stop(),et(new Error("TIMEOUT"))},$),dt.start()})}}).call(this,i(0))},function(e,s,i){const o=i(13)(),a=i(7),c=i(10);e.exports=d=>String(d.code)==="404"?o(a.STREAM_NOT_FOUND,new Error("stream not found"),c.UNABLE_TO_SUBSCRIBE):String(d.code)==="409"&&d.message==="streamLimitExceeded"?o(a.STREAM_LIMIT_EXCEEDED,new Error("The limit for concurrent streams in the session has been reached"),c.STREAM_LIMIT_EXCEEDED):String(d.code)==="405"&&d.message==="IncompatibleEncryptionSettings"?o(a.UNABLE_TO_SUBSCRIBE,new Error("Tried to subscribe to an encrypted stream without enabling encryption"),c.UNABLE_TO_SUBSCRIBE):String(d.code)==="500"&&d.message==="Not connected."?o(a.UNABLE_TO_SUBSCRIBE,new Error("Tried to subscribe to a stream while disconnected."),c.UNABLE_TO_SUBSCRIBE):o(a.UNABLE_TO_SUBSCRIBE,new Error(`subscriberCreate failed with unexpected code ${d.code}: ${d.message}`),c.UNEXPECTED_SERVER_RESPONSE)},function(e,s,i){const o=i(26),a=i(49),c=i(104),d=i(23)();e.exports=h=>{let g=h.subscriber,b=h.audioLevelSampler,j=0,_=0;const $=new c(()=>{const _e=g.listenerCount(o.AUDIO_LEVEL_UPDATED);if((()=>a()-_>1e4&&_e===0)()){$.stop();return}j=b.sample(),_e>0&&g.dispatchEvent(new d.AudioLevelUpdatedEvent(j))});return Object.defineProperty(g,"loudness",{get(){return $.start(),_=a(),j},set(){throw new TypeError("Cannot set readonly property loudness")},configurable:!0}),g.listenerCount(o.AUDIO_LEVEL_UPDATED)&&$.start(),g.on("audioLevelUpdated:added",()=>{$.start()}),g.once(o.SUBSCRIBER_DESTROYED,()=>{$.stop()}),{destroy(){b.destroy(),$.stop()}}}},function(e,s,i){const o=i(252),a=i(146),c=i(688),d=i(306),h=i(307),g=i(158)(),b=i(689),j=i(1)("Subscriber");e.exports=function(_,$){$===void 0&&($={});const _e=$.hasGetSynchronizationSupport;if(_){if(c({hasGetSynchronizationSupport:_e}))return new o(_.getSynchronizationSources);if(d())return new o(_.getStats);if(h()){let et;try{et=$.audioContext||g()}catch(ct){j.warn("Failed to get AudioContext()",ct)}if(b(et))return new a(et)}}}},function(e,s,i){const a=i(2),c=()=>window.RTCRtpReceiver&&"getSynchronizationSources"in window.RTCRtpReceiver.prototype;e.exports=function(d){d===void 0&&(d={});const h=d.hasGetSynchronizationSupport||c;return(typeof d.isEnabled=="boolean"?d.isEnabled:!1)&&h()&&!a.isFirefox}},function(e,s,i){e.exports=o=>(typeof window!==void 0?window:commonjsGlobal).AudioContext&&o instanceof(typeof window!==void 0?window:commonjsGlobal).AudioContext||(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext&&o instanceof(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext},function(e,s,i){const o=i(36),a=i(8);e.exports=function(d){let h=!1;const g=j=>{const _=["auto","on"].indexOf(this.getDisplayMode())>-1;a.removeClass(j,["OT_audio-blocked","OT_active"].join(" ")),_&&(h&&a.addClass(j,"OT_audio-blocked"),a.addClass(j,"OT_active"))};this.setAudioBlocked=j=>{h=j,g(this.domElement)},o(this,{mode:d.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-blocked-indicator"}});const b=this.setDisplayMode.bind(this);this.setDisplayMode=j=>{b(j),g(this.domElement)}}},function(e,s,i){const o=i(36),a=i(8);e.exports=function(d){let h=!1;const g=j=>{const _=["auto","on"].indexOf(this.getDisplayMode())>-1;a.removeClass(j,["OT_active"].join(" ")),!(!_||!h)&&a.addClass(j,"OT_active")};this.setVideoUnsupported=j=>{h=j,g(this.domElement)},o(this,{mode:d.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-unsupported"},htmlContent:'<div class="OT_video-unsupported-bar"></div><div class="OT_video-unsupported-img"></div><span class="OT_video-unsupported-text">Video format not supported</span>'});const b=this.setDisplayMode.bind(this);this.setDisplayMode=j=>{b(j),g(this.domElement)}}},function(e,s,i){const o=i(47),a=i(9),c=i(60),d=i(75),h=i(157),g=function(j,_){_===void 0&&(_=5e3);let $,_e=!1;const et={},ct=function(it){return it===void 0&&(it=[]),c(it,st=>d.isVideoInboundRtpStat(st))},dt=()=>{_e||j((nt,it)=>{if(!_e){if(!nt){const st=ct(it);st?a(et,o(st,["timestamp","framesDecoded"])):et.timestamp||a(et,{timestamp:Date.now(),framesDecoded:0})}$=setTimeout(dt,_)}})};return dt(),{getFrameRateFromStat(nt){return h({currentStatFrames:nt.framesDecoded,currentTimestamp:nt.timestamp,prevStatFrames:et.framesDecoded,prevTimestamp:et.timestamp})},destroy(){_e=!0,$&&(clearTimeout($),$=null)}}};e.exports=g},function(e,s,i){e.exports=o=>{let a=o.connectivityState,c=o.onWarning,d=o.onTimeout,h=o.warningMs,g=o.timeoutMs;const b=[],j=()=>{b.forEach(_=>clearTimeout(_))};a.observe({onEnterConnecting(){b.push(setTimeout(c,h),setTimeout(d,g))},onEnterConnected:j,onEnterDisconnected:j})}},function(e,s,i){const o=i(310);e.exports=a=>{let c=a.onInvalidTransition;return new o({init:"disconnected",transitions:[{name:"beginConnect",from:"disconnected",to:"connecting"},{name:"connect",from:"connecting",to:"connected"},{name:"fail",from:["connecting","connected"],to:"disconnected"},{name:"cancel",from:["connecting","connected"],to:"disconnected"},{name:"disconnect",from:["connecting","connected"],to:"disconnected"}],methods:{onInvalidTransition:c}})}},function(e,s,i){const o=i(73);e.exports=a=>{let c=a.connectivityState,d=a.logAttempt;const h=new o(d,1/5,6);c.observe({onEnterConnecting(){h.start()},onEnterDisconnected(){h.stop()},onEnterConnected(){h.stop()}})}},function(e,s){function i(o){if(o==null)throw new TypeError("Cannot destructure undefined")}e.exports=i},function(e,s){function i(){return e.exports=i=Object.assign||function(o){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(o[d]=c[d])}return o},i.apply(this,arguments)}e.exports=i},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(4)),c=o(i(5)),d=o(i(18)),h=o(i(699)),g=o(i(108)),b=o(i(313)),j=i(74);const _=g.default.ACTIVE_VIDEO,$=g.default.ACTIVE_VIDEO_WITH_WARNING,_e=g.default.SUSPENDED_VIDEO;var ct=dt=>{let nt=dt.getAllPeerConnections,it=dt.setEncodersActiveState,st=it===void 0?b.default:it;const lt=new d.default,ht=(0,h.default)();ht.on("stateChange",function(){for(var vt=arguments.length,Et=new Array(vt),bt=0;bt<vt;bt++)Et[bt]=arguments[bt];return lt.emit("stateChange",...Et)});const Tt=function(){var vt=(0,c.default)(a.default.mark(function Et(){var bt,Ct;return a.default.wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:return Xt.next=2,nt();case 2:bt=Xt.sent,Ct=bt.reduce((Nt,Jt)=>Math.max(Nt,Jt.getAudioFallbackState()),_),ht.setState(Ct);case 5:case"end":return Xt.stop()}},Et)}));return function(){return vt.apply(this,arguments)}}();return Object.assign(lt,{onPeerConnectionStateChange:vt=>{let Et=vt.state,bt=vt.peerConnection,Ct=vt.publishVideo,Ut=vt.stream,Xt=vt.peerId;if(Ct){const Nt=bt.getSourceStreamId()==="MANTIS"?void 0:Xt;switch(Et){case _:st(bt,!0),Ut.setChannelActiveState("video",!0,"auto",j.LOW,Nt);break;case $:Ut.setChannelActiveState("video",!0,"auto",j.MEDIUM,Nt);break;case _e:st(bt,!1),Ut.setChannelActiveState("video",!1,"auto",j.CRITICAL,Nt);break}}Tt()},onPeerConnectionDisconnected:()=>{Tt()},reset:()=>ht.reset()})};s.default=ct},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(18)),c=o(i(108)),h=()=>{const g=new a.default;let b=c.default.ACTIVE_VIDEO;return Object.assign(g,{setState(j){if(!Object.values(c.default).includes(j))throw new Error("Invalid video state: ",j);if(j===b)return;const _=b;b=j,g.emit("stateChange",{state:b,previousState:_})},reset(){b=c.default.ACTIVE_VIDEO}})};s.default=h},function(e,s,i){var o=i(701),a=i(259),c=o(function(d,h,g){return d+(g?" ":"")+a(h)});e.exports=c},function(e,s,i){var o=i(702),a=i(703),c=i(706),d="[']",h=RegExp(d,"g");function g(b){return function(j){return o(c(a(j).replace(h,"")),b,"")}}e.exports=g},function(e,s){function i(o,a,c,d){var h=-1,g=o==null?0:o.length;for(d&&g&&(c=o[++h]);++h<g;)c=a(c,o[h],h,o);return c}e.exports=i},function(e,s,i){var o=i(704),a=i(59),c=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,d="\\u0300-\\u036f",h="\\ufe20-\\ufe2f",g="\\u20d0-\\u20ff",b=d+h+g,j="["+b+"]",_=RegExp(j,"g");function $(_e){return _e=a(_e),_e&&_e.replace(c,o).replace(_,"")}e.exports=$},function(e,s,i){var o=i(705),a={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},c=o(a);e.exports=c},function(e,s){function i(o){return function(a){return o==null?void 0:o[a]}}e.exports=i},function(e,s,i){var o=i(707),a=i(708),c=i(59),d=i(709);function h(g,b,j){return g=c(g),b=j?void 0:b,b===void 0?a(g)?d(g):o(g):g.match(b)||[]}e.exports=h},function(e,s){var i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function o(a){return a.match(i)||[]}e.exports=o},function(e,s){var i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function o(a){return i.test(a)}e.exports=o},function(e,s){var i="\\ud800-\\udfff",o="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",d=o+a+c,h="\\u2700-\\u27bf",g="a-z\\xdf-\\xf6\\xf8-\\xff",b="\\xac\\xb1\\xd7\\xf7",j="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_="\\u2000-\\u206f",$=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",et="\\ufe0e\\ufe0f",ct=b+j+_+$,dt="[']",nt="["+ct+"]",it="["+d+"]",st="\\d+",lt="["+h+"]",ht="["+g+"]",Tt="[^"+i+ct+st+h+g+_e+"]",Rt="\\ud83c[\\udffb-\\udfff]",vt="(?:"+it+"|"+Rt+")",Et="[^"+i+"]",bt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ct="[\\ud800-\\udbff][\\udc00-\\udfff]",Ut="["+_e+"]",Xt="\\u200d",Nt="(?:"+ht+"|"+Tt+")",Jt="(?:"+Ut+"|"+Tt+")",zt="(?:"+dt+"(?:d|ll|m|re|s|t|ve))?",nn="(?:"+dt+"(?:D|LL|M|RE|S|T|VE))?",Bt=vt+"?",sn="["+et+"]?",qt="(?:"+Xt+"(?:"+[Et,bt,Ct].join("|")+")"+sn+Bt+")*",Kt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$t="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sn=sn+Bt+qt,On="(?:"+[lt,bt,Ct].join("|")+")"+Sn,tn=RegExp([Ut+"?"+ht+"+"+zt+"(?="+[nt,Ut,"$"].join("|")+")",Jt+"+"+nn+"(?="+[nt,Ut+Nt,"$"].join("|")+")",Ut+"?"+Nt+"+"+zt,Ut+"+"+nn,$t,Kt,st,On].join("|"),"g");function bn(dn){return dn.match(tn)||[]}e.exports=bn},function(e,s,i){const o=i(47),a=i(268),c=i(315);e.exports=d=>{const h=o(d,["audioDeviceId","audioFallback","audioFallbackEnabled","audioSource","channels","classNames","constraints","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl","enableRenegotiation","enableStereo","facingMode","fitMode","frameRate","height","insertDefaultUI","insertMode","audioBitrate","maxResolution","minVideoBitrate","mirror","name","publishAudio","publishVideo","publishCaptions","resolution","scalableScreenshare","scalableVideo","showControls","style","videoContentHint","videoDeviceId","videoDimensions","videoFilter","videoSource","width"]);return h.style&&(h.style=a(h.style)),h.videoFilter&&(h.videoFilter=c(h.videoFilter)),h}},function(e,s,i){const o=i(26),a=i(49),c=i(104),d=i(23)();e.exports=h=>{let g=h.publisher,b=h.widgetView,j=0,_=0;const $=new c(()=>{const _e=g.listenerCount(o.AUDIO_LEVEL_UPDATED);if((()=>a()-_>1e4&&_e===0)()){$.stop();return}const ct=b&&b.video();if(ct){const dt=ct.getAudioInputLevel();j=dt,_e>0&&g.dispatchEvent(new d.AudioLevelUpdatedEvent(dt))}});Object.defineProperty(g,"loudness",{get(){return $.start(),_=a(),j},set(){throw new TypeError("Cannot set readonly property loudness")}}),g.listenerCount(o.AUDIO_LEVEL_UPDATED)&&$.start(),g.on("audioLevelUpdated:added",()=>{$.start()}),g.once(o.PUBLISHER_DESTROYED,()=>{$.stop()})}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));e.exports=function(h){let g=!1;return function(){var b=(0,c.default)(a.default.mark(function _(){var $,_e,et,ct=arguments;return a.default.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(!g){nt.next=2;break}throw new Error("The previous call to this function has not yet completed.");case 2:for(g=!0,nt.prev=3,$=ct.length,_e=new Array($),et=0;et<$;et++)_e[et]=ct[et];return nt.next=7,h.call(this,..._e);case 7:return nt.abrupt("return",nt.sent);case 8:return nt.prev=8,g=!1,nt.finish(8);case 11:case"end":return nt.stop()}},_,this,[[3,,8,11]])}));function j(){return b.apply(this,arguments)}return j}()}},function(e,s,i){const o=i(13)(),a=i(7);e.exports=function(d){const h=document.createElement("canvas");if(!h.captureStream)throw o(a.NOT_SUPPORTED,new Error("Your browser does not support HTMLCanvasElement.captureStream()"));h.width=d.width,h.height=d.height,h.getContext("2d").fillRect(0,0,1,1);const g=h.captureStream().getVideoTracks(),b=g[0];return b.isCreatedCanvas=!0,b.enabled=!1,b}},function(e,s,i){const o=h=>h.getSettings&&h.getSettings().deviceId,a=h=>{let g;return h.getConstraints&&h.getConstraints().deviceId&&(g=h.getConstraints().deviceId.exact),g},c=(h,g)=>{let b;if(g&&g.length){const j=g.find(_=>_.label===h.label);j&&(b=j.deviceId)}return b},d=(h,g)=>o(h)||a(h)||c(h,g);e.exports=(h,g)=>{if(!h)return null;const b=h.getVideoTracks(),j=b[0];return j?d(j,g):null}},function(e,s,i){const o=i(7),a=i(10),c=i(13)();e.exports=d=>{const h=["403","404","409"],g=String(d.code);return g==="405"&&d.message==="IncompatibleEncryptionSettings"?c(o.STREAM_CREATE_FAILED,new Error("IncompatibleEncryptionSettings: Tried to publish a stream to an encrypted session without enabling encryption"),a.UNABLE_TO_PUBLISH):h.includes(g)?c(o.STREAM_CREATE_FAILED,new Error(`Failed to create stream in server model: ${d.message}`),a.UNABLE_TO_PUBLISH):c(o.UNEXPECTED_SERVER_RESPONSE,new Error(`Unexpected server response: ${d.message}`),a.UNEXPECTED_SERVER_RESPONSE)}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=i(2),h=i(316),g=i(718),b=i(1)("MediaProcessor"),j=i(101),_=j.getProxyUrl;function $(_e){var et=this;_e===void 0&&(_e={});const ct=_e,dt=ct.ML,nt=dt===void 0?h:dt,it=ct.MediaTransform,st=it===void 0?g:it,lt=ct.getProxyUrl,ht=lt===void 0?_:lt;let Tt,Rt,vt,Et;this.isValidVideoFilter=bt=>{const Ct=bt.type;return st.isSupported(Ct)&&st.isValidConfig(bt)},this.canUpdateVideoFilter=bt=>["backgroundBlur","backgroundReplacement"].includes(bt),this.updateVideoFilter=function(){var bt=(0,c.default)(a.default.mark(function Ct(Ut){var Xt,Nt,Jt;return a.default.wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(Xt=Ut.type,et.canUpdateVideoFilter(Xt)){nn.next=4;break}return b.warn(`Ignoring: filter "${Xt}" doesn't support real-time updates`),nn.abrupt("return");case 4:return Nt=st.getConfigurator(Xt),Jt=Nt.getConfig(Object.assign({proxyUrl:ht()},Ut)),nn.next=8,Rt.setBackgroundOptions(Jt);case 8:vt=Ut;case 9:case"end":return nn.stop()}},Ct)}));return function(Ct){return bt.apply(this,arguments)}}(),this.setVideoFilter=function(){var bt=(0,c.default)(a.default.mark(function Ct(Ut){var Xt,Nt,Jt,zt;return a.default.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(Xt=Ut.type,Nt=st.getConfigurator(Xt),Nt){Bt.next=5;break}return b.warn(`Ignoring: filter "${Xt}" isn't supported`),Bt.abrupt("return");case 5:if(Jt=Nt.getConfig(Object.assign({proxyUrl:ht()},Ut)),Jt){Bt.next=9;break}return b.warn(`Ignoring: couldn't configure filter ${Xt}`),Bt.abrupt("return");case 9:if(zt=!!et.getVideoFilter(),!zt){Bt.next=20;break}return Bt.prev=11,Bt.next=14,et.destroy();case 14:Bt.next=20;break;case 16:return Bt.prev=16,Bt.t0=Bt.catch(11),b.warn(`Ignoring, couldn't remove previous filter: ${Bt.t0}`),Bt.abrupt("return");case 20:return Bt.next=22,nt.createProcessor(Jt);case 22:return Rt=Bt.sent,Bt.next=25,Rt.getConnector();case 25:Tt=Bt.sent,vt=Ut;case 27:case"end":return Bt.stop()}},Ct,null,[[11,16]])}));return function(Ct){return bt.apply(this,arguments)}}(),this.getVideoFilter=()=>vt,this.getOriginalVideoTrack=()=>Et,this.setMediaStream=function(){var bt=(0,c.default)(a.default.mark(function Ct(Ut){var Xt,Nt,Jt;return a.default.wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(Xt=Ut.getVideoTracks(),Nt=Xt[0],Nt){nn.next=4;break}return b.warn("Ignoring. No video track found"),nn.abrupt("return",null);case 4:return Jt=null,nn.prev=5,nn.next=8,Tt.setTrack(Nt);case 8:Jt=nn.sent,Et=Nt,nn.next=15;break;case 12:nn.prev=12,nn.t0=nn.catch(5),b.error(`Error setting media stream: ${nn.t0}`);case 15:return nn.abrupt("return",Jt);case 16:case"end":return nn.stop()}},Ct,null,[[5,12]])}));return function(Ct){return bt.apply(this,arguments)}}(),this.setVideoTrack=function(){var bt=(0,c.default)(a.default.mark(function Ct(Ut){var Xt;return a.default.wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Xt=null,Jt.prev=1,Jt.next=4,Tt.setTrack(Ut);case 4:Xt=Jt.sent,Et=Ut,Jt.next=11;break;case 8:Jt.prev=8,Jt.t0=Jt.catch(1),b.error(`Error setting video track: ${Jt.t0}`);case 11:return Jt.abrupt("return",Xt);case 12:case"end":return Jt.stop()}},Ct,null,[[1,8]])}));return function(Ct){return bt.apply(this,arguments)}}(),this._setConnector=bt=>{Tt=bt},this.destroy=(0,c.default)(a.default.mark(function bt(){return a.default.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ut.prev=0,Ut.next=3,Tt.destroy();case 3:Ut.next=8;break;case 5:Ut.prev=5,Ut.t0=Ut.catch(0),b.warn(`Error destroying connector: ${Ut.t0}`);case 8:Tt=null,vt=null,Et=null;case 11:case"end":return Ut.stop()}},bt,null,[[0,5]])})),this.enableLogging=bt=>{if(!bt){b.warn("Error enabling logging: invalid API key");return}const Ct={appId:bt,sourceType:"video"},Ut=ht();Ut&&(Ct.proxyUrl=Ut),nt.setMetadata(Ct)},this.disableLogging=()=>{nt.setMetadata()}}$.isSupported=function(_e){_e===void 0&&(_e={});const et=_e,ct=et.env,dt=ct===void 0?d:ct,nt=et.ML,it=nt===void 0?h:nt;return!!dt.isChromium&&it.isSupported()},e.exports=$},function(e,s,i){i.r(s),function(o,a){i.d(s,"ErrorFunction",function(){return Gp}),i.d(s,"MediaProcessor",function(){return qp}),i.d(s,"MediaProcessorConnector",function(){return Lu}),i.d(s,"PipelineInfoData",function(){return Up}),i.d(s,"VonageSourceType",function(){return fr}),i.d(s,"WarningType",function(){return Sp}),i.d(s,"getVonageMetadata",function(){return mo}),i.d(s,"isSupported",function(){return c}),i.d(s,"setVonageMetadata",function(){return yr});function c(){return new o((Tn,Ft)=>{typeof MediaStreamTrackProcessor>"u"||typeof MediaStreamTrackGenerator>"u"?Ft("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):Tn()})}class d{}d.updates={transformer_new:"New transformer",transformer_null:"Null transformer"},d.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"};var h={exports:{}},g=function(Ft,yn){return function(){for(var Hn=new Array(arguments.length),Xr=0;Xr<Hn.length;Xr++)Hn[Xr]=arguments[Xr];return Ft.apply(yn,Hn)}},b=g,j=Object.prototype.toString;function _(Tn){return Array.isArray(Tn)}function $(Tn){return typeof Tn>"u"}function _e(Tn){return Tn!==null&&!$(Tn)&&Tn.constructor!==null&&!$(Tn.constructor)&&typeof Tn.constructor.isBuffer=="function"&&Tn.constructor.isBuffer(Tn)}function et(Tn){return j.call(Tn)==="[object ArrayBuffer]"}function ct(Tn){return j.call(Tn)==="[object FormData]"}function dt(Tn){var Ft;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Ft=ArrayBuffer.isView(Tn):Ft=Tn&&Tn.buffer&&et(Tn.buffer),Ft}function nt(Tn){return typeof Tn=="string"}function it(Tn){return typeof Tn=="number"}function st(Tn){return Tn!==null&&typeof Tn=="object"}function lt(Tn){if(j.call(Tn)!=="[object Object]")return!1;var Ft=Object.getPrototypeOf(Tn);return Ft===null||Ft===Object.prototype}function ht(Tn){return j.call(Tn)==="[object Date]"}function Tt(Tn){return j.call(Tn)==="[object File]"}function Rt(Tn){return j.call(Tn)==="[object Blob]"}function vt(Tn){return j.call(Tn)==="[object Function]"}function Et(Tn){return st(Tn)&&vt(Tn.pipe)}function bt(Tn){return j.call(Tn)==="[object URLSearchParams]"}function Ct(Tn){return Tn.trim?Tn.trim():Tn.replace(/^\s+|\s+$/g,"")}function Ut(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Xt(Tn,Ft){if(!(Tn===null||typeof Tn>"u"))if(typeof Tn!="object"&&(Tn=[Tn]),_(Tn))for(var yn=0,jn=Tn.length;yn<jn;yn++)Ft.call(null,Tn[yn],yn,Tn);else for(var Hn in Tn)Object.prototype.hasOwnProperty.call(Tn,Hn)&&Ft.call(null,Tn[Hn],Hn,Tn)}function Nt(){var Tn={};function Ft(Hn,Xr){lt(Tn[Xr])&&lt(Hn)?Tn[Xr]=Nt(Tn[Xr],Hn):lt(Hn)?Tn[Xr]=Nt({},Hn):_(Hn)?Tn[Xr]=Hn.slice():Tn[Xr]=Hn}for(var yn=0,jn=arguments.length;yn<jn;yn++)Xt(arguments[yn],Ft);return Tn}function Jt(Tn,Ft,yn){return Xt(Ft,function(Hn,Xr){yn&&typeof Hn=="function"?Tn[Xr]=b(Hn,yn):Tn[Xr]=Hn}),Tn}function zt(Tn){return Tn.charCodeAt(0)===65279&&(Tn=Tn.slice(1)),Tn}var nn={isArray:_,isArrayBuffer:et,isBuffer:_e,isFormData:ct,isArrayBufferView:dt,isString:nt,isNumber:it,isObject:st,isPlainObject:lt,isUndefined:$,isDate:ht,isFile:Tt,isBlob:Rt,isFunction:vt,isStream:Et,isURLSearchParams:bt,isStandardBrowserEnv:Ut,forEach:Xt,merge:Nt,extend:Jt,trim:Ct,stripBOM:zt},Bt=nn;function sn(Tn){return encodeURIComponent(Tn).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var qt=function(Ft,yn,jn){if(!yn)return Ft;var Hn;if(jn)Hn=jn(yn);else if(Bt.isURLSearchParams(yn))Hn=yn.toString();else{var Xr=[];Bt.forEach(yn,function(zr,_l){zr===null||typeof zr>"u"||(Bt.isArray(zr)?_l=_l+"[]":zr=[zr],Bt.forEach(zr,function(_c){Bt.isDate(_c)?_c=_c.toISOString():Bt.isObject(_c)&&(_c=JSON.stringify(_c)),Xr.push(sn(_l)+"="+sn(_c))}))}),Hn=Xr.join("&")}if(Hn){var jr=Ft.indexOf("#");jr!==-1&&(Ft=Ft.slice(0,jr)),Ft+=(Ft.indexOf("?")===-1?"?":"&")+Hn}return Ft},Kt=nn;function $t(){this.handlers=[]}$t.prototype.use=function(Ft,yn,jn){return this.handlers.push({fulfilled:Ft,rejected:yn,synchronous:jn?jn.synchronous:!1,runWhen:jn?jn.runWhen:null}),this.handlers.length-1},$t.prototype.eject=function(Ft){this.handlers[Ft]&&(this.handlers[Ft]=null)},$t.prototype.forEach=function(Ft){Kt.forEach(this.handlers,function(jn){jn!==null&&Ft(jn)})};var Sn=$t,On=nn,tn=function(Ft,yn){On.forEach(Ft,function(Hn,Xr){Xr!==yn&&Xr.toUpperCase()===yn.toUpperCase()&&(Ft[yn]=Hn,delete Ft[Xr])})},bn=function(Ft,yn,jn,Hn,Xr){return Ft.config=yn,jn&&(Ft.code=jn),Ft.request=Hn,Ft.response=Xr,Ft.isAxiosError=!0,Ft.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},Ft},dn=bn,Mn=function(Ft,yn,jn,Hn,Xr){var jr=new Error(Ft);return dn(jr,yn,jn,Hn,Xr)},$n=Mn,Un=function(Ft,yn,jn){var Hn=jn.config.validateStatus;!jn.status||!Hn||Hn(jn.status)?Ft(jn):yn($n("Request failed with status code "+jn.status,jn.config,null,jn.request,jn))},Fn=nn,cr=Fn.isStandardBrowserEnv()?function(){return{write:function(yn,jn,Hn,Xr,jr,$r){var zr=[];zr.push(yn+"="+encodeURIComponent(jn)),Fn.isNumber(Hn)&&zr.push("expires="+new Date(Hn).toGMTString()),Fn.isString(Xr)&&zr.push("path="+Xr),Fn.isString(jr)&&zr.push("domain="+jr),$r===!0&&zr.push("secure"),document.cookie=zr.join("; ")},read:function(yn){var jn=document.cookie.match(new RegExp("(^|;\\s*)("+yn+")=([^;]*)"));return jn?decodeURIComponent(jn[3]):null},remove:function(yn){this.write(yn,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),or=function(Ft){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Ft)},wr=function(Ft,yn){return yn?Ft.replace(/\/+$/,"")+"/"+yn.replace(/^\/+/,""):Ft},Er=or,Zr=wr,po=function(Ft,yn){return Ft&&!Er(yn)?Zr(Ft,yn):yn},lr=nn,pr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Vn=function(Ft){var yn={},jn,Hn,Xr;return Ft&&lr.forEach(Ft.split(`
`),function($r){if(Xr=$r.indexOf(":"),jn=lr.trim($r.substr(0,Xr)).toLowerCase(),Hn=lr.trim($r.substr(Xr+1)),jn){if(yn[jn]&&pr.indexOf(jn)>=0)return;jn==="set-cookie"?yn[jn]=(yn[jn]?yn[jn]:[]).concat([Hn]):yn[jn]=yn[jn]?yn[jn]+", "+Hn:Hn}}),yn},In=nn,zn=In.isStandardBrowserEnv()?function(){var Ft=/(msie|trident)/i.test(navigator.userAgent),yn=document.createElement("a"),jn;function Hn(Xr){var jr=Xr;return Ft&&(yn.setAttribute("href",jr),jr=yn.href),yn.setAttribute("href",jr),{href:yn.href,protocol:yn.protocol?yn.protocol.replace(/:$/,""):"",host:yn.host,search:yn.search?yn.search.replace(/^\?/,""):"",hash:yn.hash?yn.hash.replace(/^#/,""):"",hostname:yn.hostname,port:yn.port,pathname:yn.pathname.charAt(0)==="/"?yn.pathname:"/"+yn.pathname}}return jn=Hn(window.location.href),function(jr){var $r=In.isString(jr)?Hn(jr):jr;return $r.protocol===jn.protocol&&$r.host===jn.host}}():function(){return function(){return!0}}();function vr(Tn){this.message=Tn}vr.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},vr.prototype.__CANCEL__=!0;var Jr=vr,kn=nn,ir=Un,gr=cr,Br=qt,vo=po,eo=Vn,io=zn,to=Mn,Wr=fs,To=Jr,no=function(Ft){return new o(function(jn,Hn){var Xr=Ft.data,jr=Ft.headers,$r=Ft.responseType,zr;function _l(){Ft.cancelToken&&Ft.cancelToken.unsubscribe(zr),Ft.signal&&Ft.signal.removeEventListener("abort",zr)}kn.isFormData(Xr)&&delete jr["Content-Type"];var So=new XMLHttpRequest;if(Ft.auth){var _c=Ft.auth.username||"",Rp=Ft.auth.password?unescape(encodeURIComponent(Ft.auth.password)):"";jr.Authorization="Basic "+btoa(_c+":"+Rp)}var au=vo(Ft.baseURL,Ft.url);So.open(Ft.method.toUpperCase(),Br(au,Ft.params,Ft.paramsSerializer),!0),So.timeout=Ft.timeout;function Ip(){if(So){var gu="getAllResponseHeaders"in So?eo(So.getAllResponseHeaders()):null,Qu=!$r||$r==="text"||$r==="json"?So.responseText:So.response,up={data:Qu,status:So.status,statusText:So.statusText,headers:gu,config:Ft,request:So};ir(function(kp){jn(kp),_l()},function(kp){Hn(kp),_l()},up),So=null}}if("onloadend"in So?So.onloadend=Ip:So.onreadystatechange=function(){!So||So.readyState!==4||So.status===0&&!(So.responseURL&&So.responseURL.indexOf("file:")===0)||setTimeout(Ip)},So.onabort=function(){So&&(Hn(to("Request aborted",Ft,"ECONNABORTED",So)),So=null)},So.onerror=function(){Hn(to("Network Error",Ft,null,So)),So=null},So.ontimeout=function(){var Qu=Ft.timeout?"timeout of "+Ft.timeout+"ms exceeded":"timeout exceeded",up=Ft.transitional||Wr.transitional;Ft.timeoutErrorMessage&&(Qu=Ft.timeoutErrorMessage),Hn(to(Qu,Ft,up.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",So)),So=null},kn.isStandardBrowserEnv()){var mu=(Ft.withCredentials||io(au))&&Ft.xsrfCookieName?gr.read(Ft.xsrfCookieName):void 0;mu&&(jr[Ft.xsrfHeaderName]=mu)}"setRequestHeader"in So&&kn.forEach(jr,function(Qu,up){typeof Xr>"u"&&up.toLowerCase()==="content-type"?delete jr[up]:So.setRequestHeader(up,Qu)}),kn.isUndefined(Ft.withCredentials)||(So.withCredentials=!!Ft.withCredentials),$r&&$r!=="json"&&(So.responseType=Ft.responseType),typeof Ft.onDownloadProgress=="function"&&So.addEventListener("progress",Ft.onDownloadProgress),typeof Ft.onUploadProgress=="function"&&So.upload&&So.upload.addEventListener("progress",Ft.onUploadProgress),(Ft.cancelToken||Ft.signal)&&(zr=function(gu){So&&(Hn(!gu||gu&&gu.type?new To("canceled"):gu),So.abort(),So=null)},Ft.cancelToken&&Ft.cancelToken.subscribe(zr),Ft.signal&&(Ft.signal.aborted?zr():Ft.signal.addEventListener("abort",zr))),Xr||(Xr=null),So.send(Xr)})},yo=nn,Pr=tn,fu=bn,Zo={"Content-Type":"application/x-www-form-urlencoded"};function oo(Tn,Ft){!yo.isUndefined(Tn)&&yo.isUndefined(Tn["Content-Type"])&&(Tn["Content-Type"]=Ft)}function Xo(){var Tn;return(typeof XMLHttpRequest<"u"||typeof a<"u"&&Object.prototype.toString.call(a)==="[object process]")&&(Tn=no),Tn}function Zs(Tn,Ft,yn){if(yo.isString(Tn))try{return(Ft||JSON.parse)(Tn),yo.trim(Tn)}catch(jn){if(jn.name!=="SyntaxError")throw jn}return(yn||JSON.stringify)(Tn)}var Pl={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Xo(),transformRequest:[function(Ft,yn){return Pr(yn,"Accept"),Pr(yn,"Content-Type"),yo.isFormData(Ft)||yo.isArrayBuffer(Ft)||yo.isBuffer(Ft)||yo.isStream(Ft)||yo.isFile(Ft)||yo.isBlob(Ft)?Ft:yo.isArrayBufferView(Ft)?Ft.buffer:yo.isURLSearchParams(Ft)?(oo(yn,"application/x-www-form-urlencoded;charset=utf-8"),Ft.toString()):yo.isObject(Ft)||yn&&yn["Content-Type"]==="application/json"?(oo(yn,"application/json"),Zs(Ft)):Ft}],transformResponse:[function(Ft){var yn=this.transitional||Pl.transitional,jn=yn&&yn.silentJSONParsing,Hn=yn&&yn.forcedJSONParsing,Xr=!jn&&this.responseType==="json";if(Xr||Hn&&yo.isString(Ft)&&Ft.length)try{return JSON.parse(Ft)}catch(jr){if(Xr)throw jr.name==="SyntaxError"?fu(jr,this,"E_JSON_PARSE"):jr}return Ft}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(Ft){return Ft>=200&&Ft<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};yo.forEach(["delete","get","head"],function(Ft){Pl.headers[Ft]={}}),yo.forEach(["post","put","patch"],function(Ft){Pl.headers[Ft]=yo.merge(Zo)});var fs=Pl,Ys=nn,hu=fs,Tu=function(Ft,yn,jn){var Hn=this||hu;return Ys.forEach(jn,function(jr){Ft=jr.call(Hn,Ft,yn)}),Ft},Zp=function(Ft){return!!(Ft&&Ft.__CANCEL__)},Pu=nn,Fu=Tu,Mr=Zp,Fs=fs,zl=Jr;function Rs(Tn){if(Tn.cancelToken&&Tn.cancelToken.throwIfRequested(),Tn.signal&&Tn.signal.aborted)throw new zl("canceled")}var Js=function(Ft){Rs(Ft),Ft.headers=Ft.headers||{},Ft.data=Fu.call(Ft,Ft.data,Ft.headers,Ft.transformRequest),Ft.headers=Pu.merge(Ft.headers.common||{},Ft.headers[Ft.method]||{},Ft.headers),Pu.forEach(["delete","get","head","post","put","patch","common"],function(Hn){delete Ft.headers[Hn]});var yn=Ft.adapter||Fs.adapter;return yn(Ft).then(function(Hn){return Rs(Ft),Hn.data=Fu.call(Ft,Hn.data,Hn.headers,Ft.transformResponse),Hn},function(Hn){return Mr(Hn)||(Rs(Ft),Hn&&Hn.response&&(Hn.response.data=Fu.call(Ft,Hn.response.data,Hn.response.headers,Ft.transformResponse))),o.reject(Hn)})},Or=nn,Ms=function(Ft,yn){yn=yn||{};var jn={};function Hn(So,_c){return Or.isPlainObject(So)&&Or.isPlainObject(_c)?Or.merge(So,_c):Or.isPlainObject(_c)?Or.merge({},_c):Or.isArray(_c)?_c.slice():_c}function Xr(So){if(Or.isUndefined(yn[So])){if(!Or.isUndefined(Ft[So]))return Hn(void 0,Ft[So])}else return Hn(Ft[So],yn[So])}function jr(So){if(!Or.isUndefined(yn[So]))return Hn(void 0,yn[So])}function $r(So){if(Or.isUndefined(yn[So])){if(!Or.isUndefined(Ft[So]))return Hn(void 0,Ft[So])}else return Hn(void 0,yn[So])}function zr(So){if(So in yn)return Hn(Ft[So],yn[So]);if(So in Ft)return Hn(void 0,Ft[So])}var _l={url:jr,method:jr,data:jr,baseURL:$r,transformRequest:$r,transformResponse:$r,paramsSerializer:$r,timeout:$r,timeoutMessage:$r,withCredentials:$r,adapter:$r,responseType:$r,xsrfCookieName:$r,xsrfHeaderName:$r,onUploadProgress:$r,onDownloadProgress:$r,decompress:$r,maxContentLength:$r,maxBodyLength:$r,transport:$r,httpAgent:$r,httpsAgent:$r,cancelToken:$r,socketPath:$r,responseEncoding:$r,validateStatus:zr};return Or.forEach(Object.keys(Ft).concat(Object.keys(yn)),function(_c){var Rp=_l[_c]||Xr,au=Rp(_c);Or.isUndefined(au)&&Rp!==zr||(jn[_c]=au)}),jn},Vp={version:"0.25.0"},Jl=Vp.version,Ql={};["object","boolean","number","function","string","symbol"].forEach(function(Tn,Ft){Ql[Tn]=function(jn){return typeof jn===Tn||"a"+(Ft<1?"n ":" ")+Tn}});var Do={};Ql.transitional=function(Ft,yn,jn){function Hn(Xr,jr){return"[Axios v"+Jl+"] Transitional option '"+Xr+"'"+jr+(jn?". "+jn:"")}return function(Xr,jr,$r){if(Ft===!1)throw new Error(Hn(jr," has been removed"+(yn?" in "+yn:"")));return yn&&!Do[jr]&&(Do[jr]=!0,console.warn(Hn(jr," has been deprecated since v"+yn+" and will be removed in the near future"))),Ft?Ft(Xr,jr,$r):!0}};function El(Tn,Ft,yn){if(typeof Tn!="object")throw new TypeError("options must be an object");for(var jn=Object.keys(Tn),Hn=jn.length;Hn-- >0;){var Xr=jn[Hn],jr=Ft[Xr];if(jr){var $r=Tn[Xr],zr=$r===void 0||jr($r,Xr,Tn);if(zr!==!0)throw new TypeError("option "+Xr+" must be "+zr);continue}if(yn!==!0)throw Error("Unknown option "+Xr)}}var jo={assertOptions:El,validators:Ql},Zu=nn,_d=qt,Bs=Sn,Yu=Js,Xu=Ms,js=jo,Go=js.validators;function Fl(Tn){this.defaults=Tn,this.interceptors={request:new Bs,response:new Bs}}Fl.prototype.request=function(Ft,yn){if(typeof Ft=="string"?(yn=yn||{},yn.url=Ft):yn=Ft||{},!yn.url)throw new Error("Provided config url is not valid");yn=Xu(this.defaults,yn),yn.method?yn.method=yn.method.toLowerCase():this.defaults.method?yn.method=this.defaults.method.toLowerCase():yn.method="get";var jn=yn.transitional;jn!==void 0&&js.assertOptions(jn,{silentJSONParsing:Go.transitional(Go.boolean),forcedJSONParsing:Go.transitional(Go.boolean),clarifyTimeoutError:Go.transitional(Go.boolean)},!1);var Hn=[],Xr=!0;this.interceptors.request.forEach(function(au){typeof au.runWhen=="function"&&au.runWhen(yn)===!1||(Xr=Xr&&au.synchronous,Hn.unshift(au.fulfilled,au.rejected))});var jr=[];this.interceptors.response.forEach(function(au){jr.push(au.fulfilled,au.rejected)});var $r;if(!Xr){var zr=[Yu,void 0];for(Array.prototype.unshift.apply(zr,Hn),zr=zr.concat(jr),$r=o.resolve(yn);zr.length;)$r=$r.then(zr.shift(),zr.shift());return $r}for(var _l=yn;Hn.length;){var So=Hn.shift(),_c=Hn.shift();try{_l=So(_l)}catch(Rp){_c(Rp);break}}try{$r=Yu(_l)}catch(Rp){return o.reject(Rp)}for(;jr.length;)$r=$r.then(jr.shift(),jr.shift());return $r},Fl.prototype.getUri=function(Ft){if(!Ft.url)throw new Error("Provided config url is not valid");return Ft=Xu(this.defaults,Ft),_d(Ft.url,Ft.params,Ft.paramsSerializer).replace(/^\?/,"")},Zu.forEach(["delete","get","head","options"],function(Ft){Fl.prototype[Ft]=function(yn,jn){return this.request(Xu(jn||{},{method:Ft,url:yn,data:(jn||{}).data}))}}),Zu.forEach(["post","put","patch"],function(Ft){Fl.prototype[Ft]=function(yn,jn,Hn){return this.request(Xu(Hn||{},{method:Ft,url:yn,data:jn}))}});var qr=Fl,Bu=Jr;function pu(Tn){if(typeof Tn!="function")throw new TypeError("executor must be a function.");var Ft;this.promise=new o(function(Hn){Ft=Hn});var yn=this;this.promise.then(function(jn){if(yn._listeners){var Hn,Xr=yn._listeners.length;for(Hn=0;Hn<Xr;Hn++)yn._listeners[Hn](jn);yn._listeners=null}}),this.promise.then=function(jn){var Hn,Xr=new o(function(jr){yn.subscribe(jr),Hn=jr}).then(jn);return Xr.cancel=function(){yn.unsubscribe(Hn)},Xr},Tn(function(Hn){yn.reason||(yn.reason=new Bu(Hn),Ft(yn.reason))})}pu.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},pu.prototype.subscribe=function(Ft){if(this.reason){Ft(this.reason);return}this._listeners?this._listeners.push(Ft):this._listeners=[Ft]},pu.prototype.unsubscribe=function(Ft){if(this._listeners){var yn=this._listeners.indexOf(Ft);yn!==-1&&this._listeners.splice(yn,1)}},pu.source=function(){var Ft,yn=new pu(function(Hn){Ft=Hn});return{token:yn,cancel:Ft}};var pp=pu,os=function(Ft){return function(jn){return Ft.apply(null,jn)}},mp=nn,Mp=function(Ft){return mp.isObject(Ft)&&Ft.isAxiosError===!0},gp=nn,op=g,Lp=qr,Ku=Ms,$l=fs;function Ru(Tn){var Ft=new Lp(Tn),yn=op(Lp.prototype.request,Ft);return gp.extend(yn,Lp.prototype,Ft),gp.extend(yn,Ft),yn.create=function(Hn){return Ru(Ku(Tn,Hn))},yn}var xl=Ru($l);xl.Axios=Lp,xl.Cancel=Jr,xl.CancelToken=pp,xl.isCancel=Zp,xl.VERSION=Vp.version,xl.all=function(Ft){return o.all(Ft)},xl.spread=os,xl.isAxiosError=Mp,h.exports=xl,h.exports.default=xl;var Cp=h.exports;class Wn{isEmpty(){return!this.isPresent()}static of(Ft){if(Ft!=null)return new pn(Ft);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(Ft){return Wn.of(Ft)}static ofNullable(Ft){return Ft!=null?new pn(Ft):new Cn}static empty(){return new Cn}static from(Ft){switch(Ft.kind){case"present":return Wn.of(Ft.value);case"empty":return Wn.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class pn extends Wn{constructor(Ft){super(),this.payload=Ft}isPresent(){return!0}get(){return this.payload}ifPresent(Ft){Ft(this.payload)}ifPresentOrElse(Ft,yn){Ft(this.payload)}filter(Ft){return Ft(this.payload)?this:Wn.empty()}map(Ft){const yn=Ft(this.payload);return Wn.ofNullable(yn)}flatMap(Ft){return Ft(this.payload)}or(Ft){return this}orElse(Ft){return this.payload}orElseGet(Ft){return this.payload}orElseThrow(Ft){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(Ft){return Ft.present(this.payload)}toJSON(Ft){return this.payload}}class Cn extends Wn{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(Ft){}ifPresentOrElse(Ft,yn){yn()}filter(Ft){return this}map(Ft){return Wn.empty()}flatMap(Ft){return Wn.empty()}or(Ft){return Ft()}orElse(Ft){return Ft}orElseGet(Ft){return this.orElse(Ft())}orElseThrow(Ft){throw Ft()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(Ft){return Ft.empty()}toJSON(Ft){return null}}const Dn="2.0.0";var fr=(Tn=>(Tn.automation="automation",Tn.test="test",Tn.vbc="vbc",Tn.video="video",Tn.voice="voice",Tn))(fr||{});function yr(Tn){globalThis._vonageMediaProcessorMetadata=Tn}function mo(){return globalThis._vonageMediaProcessorMetadata}class Ro{constructor(){const Ft=mo();this._report={action:Wn.empty(),applicationId:Wn.ofNullable(Ft!==void 0&&Ft!=null?Ft.appId:null),timestamp:Date.now(),fps:Wn.empty(),framesTransformed:Wn.empty(),guid:Wn.empty(),highestFrameTransformCpu:Wn.empty(),message:Wn.empty(),source:Wn.ofNullable(Ft!==void 0&&Ft!=null?Ft.sourceType:null),transformedFps:Wn.empty(),transformerType:Wn.empty(),variation:Wn.empty(),videoHeight:Wn.empty(),videoWidth:Wn.empty(),version:Dn,error:Wn.empty(),proxyUrl:Wn.ofNullable(Ft!==void 0&&Ft!=null?Ft.proxyUrl:null)}}action(Ft){return this._report.action=Wn.ofNullable(Ft),this}framesTransformed(Ft){return this._report.framesTransformed=Wn.ofNullable(Ft),this}fps(Ft){return this._report.fps=Wn.ofNullable(Ft),this}guid(Ft){return this._report.guid=Wn.ofNullable(Ft),this}message(Ft){return this._report.message=Wn.ofNullable(Ft),this}transformedFps(Ft){return this._report.transformedFps=Wn.ofNullable(Ft),this}transformerType(Ft){return this._report.transformerType=Wn.ofNullable(Ft),this}variation(Ft){return this._report.variation=Wn.ofNullable(Ft),this}videoHeight(Ft){return this._report.videoHeight=Wn.ofNullable(Ft),this}videoWidth(Ft){return this._report.videoWidth=Wn.ofNullable(Ft),this}error(Ft){return this._report.error=Wn.ofNullable(Ft),this}build(){return this._report}}const ms=Tn=>JSON.stringify(Tn,(Ft,yn)=>{if(yn!==null)return yn});class Ho{static report(Ft){return new o((yn,jn)=>{if(Ft.applicationId.isEmpty()||Ft.source.isEmpty()){yn("success");return}let Hn=Cp.create(),Xr={timeout:1e4,timeoutErrorMessage:"Request timeout",headers:{"Content-Type":"application/json"}},jr="hlg.tokbox.com/prod/logging/vcp_webrtc";if(Ft.proxyUrl.isEmpty())jr="https://"+jr;else{let $r;Ft.proxyUrl.get().slice(Ft.proxyUrl.get().length-1)!=="/"?$r=Ft.proxyUrl.get()+"/":$r=Ft.proxyUrl.get(),jr=$r+jr}Hn.post(jr,ms(Ft),Xr).then($r=>{console.log($r),yn("success")}).catch($r=>{console.log($r),jn($r)})})}}var _o,ys=new Uint8Array(16);function Ps(){if(!_o&&(_o=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _o(ys)}var vp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Is(Tn){return typeof Tn=="string"&&vp.test(Tn)}for(var Cl=[],Vs=0;Vs<256;++Vs)Cl.push((Vs+256).toString(16).substr(1));function Xl(Tn){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,yn=(Cl[Tn[Ft+0]]+Cl[Tn[Ft+1]]+Cl[Tn[Ft+2]]+Cl[Tn[Ft+3]]+"-"+Cl[Tn[Ft+4]]+Cl[Tn[Ft+5]]+"-"+Cl[Tn[Ft+6]]+Cl[Tn[Ft+7]]+"-"+Cl[Tn[Ft+8]]+Cl[Tn[Ft+9]]+"-"+Cl[Tn[Ft+10]]+Cl[Tn[Ft+11]]+Cl[Tn[Ft+12]]+Cl[Tn[Ft+13]]+Cl[Tn[Ft+14]]+Cl[Tn[Ft+15]]).toLowerCase();if(!Is(yn))throw TypeError("Stringified UUID is invalid");return yn}function cp(Tn,Ft,yn){Tn=Tn||{};var jn=Tn.random||(Tn.rng||Ps)();if(jn[6]=jn[6]&15|64,jn[8]=jn[8]&63|128,Ft){yn=yn||0;for(var Hn=0;Hn<16;++Hn)Ft[yn+Hn]=jn[Hn];return Ft}return Xl(jn)}const zu=new WeakMap,Dp=new WeakMap,Xs=new WeakMap,Vu=Symbol("anyProducer"),Ju=o.resolve(),yp=Symbol("listenerAdded"),su=Symbol("listenerRemoved");let _f=!1;function Tl(Tn){if(typeof Tn!="string"&&typeof Tn!="symbol")throw new TypeError("eventName must be a string or a symbol")}function Qr(Tn){if(typeof Tn!="function")throw new TypeError("listener must be a function")}function Fo(Tn,Ft){const yn=Dp.get(Tn);return yn.has(Ft)||yn.set(Ft,new Set),yn.get(Ft)}function _h(Tn,Ft){const yn=typeof Ft=="string"||typeof Ft=="symbol"?Ft:Vu,jn=Xs.get(Tn);return jn.has(yn)||jn.set(yn,new Set),jn.get(yn)}function Dr(Tn,Ft,yn){const jn=Xs.get(Tn);if(jn.has(Ft))for(const Hn of jn.get(Ft))Hn.enqueue(yn);if(jn.has(Vu)){const Hn=o.all([Ft,yn]);for(const Xr of jn.get(Vu))Xr.enqueue(Hn)}}function Pp(Tn,Ft){Ft=Array.isArray(Ft)?Ft:[Ft];let yn=!1,jn=()=>{},Hn=[];const Xr={enqueue(jr){Hn.push(jr),jn()},finish(){yn=!0,jn()}};for(const jr of Ft)_h(Tn,jr).add(Xr);return{async next(){return Hn?Hn.length===0?yn?(Hn=void 0,this.next()):(await new o(jr=>{jn=jr}),this.next()):{done:!1,value:await Hn.shift()}:{done:!0}},async return(jr){Hn=void 0;for(const $r of Ft)_h(Tn,$r).delete(Xr);return jn(),arguments.length>0?{done:!0,value:await jr}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Ns(Tn){if(Tn===void 0)return bo;if(!Array.isArray(Tn))throw new TypeError("`methodNames` must be an array of strings");for(const Ft of Tn)if(!bo.includes(Ft))throw typeof Ft!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${Ft} is not Emittery method`);return Tn}const ep=Tn=>Tn===yp||Tn===su;class bp{static mixin(Ft,yn){return yn=Ns(yn),jn=>{if(typeof jn!="function")throw new TypeError("`target` must be function");for(const jr of yn)if(jn.prototype[jr]!==void 0)throw new Error(`The property \`${jr}\` already exists on \`target\``);function Hn(){return Object.defineProperty(this,Ft,{enumerable:!1,value:new bp}),this[Ft]}Object.defineProperty(jn.prototype,Ft,{enumerable:!1,get:Hn});const Xr=jr=>function(...$r){return this[Ft][jr](...$r)};for(const jr of yn)Object.defineProperty(jn.prototype,jr,{enumerable:!1,value:Xr(jr)});return jn}}static get isDebugEnabled(){if(typeof a!="object")return _f;const{env:Ft}=a||{env:{}};return Ft.DEBUG==="emittery"||Ft.DEBUG==="*"||_f}static set isDebugEnabled(Ft){_f=Ft}constructor(Ft={}){zu.set(this,new Set),Dp.set(this,new Map),Xs.set(this,new Map),this.debug=Ft.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(yn,jn,Hn,Xr)=>{Xr=JSON.stringify(Xr),typeof Hn=="symbol"&&(Hn=Hn.toString());const jr=new Date,$r=`${jr.getHours()}:${jr.getMinutes()}:${jr.getSeconds()}.${jr.getMilliseconds()}`;console.log(`[${$r}][emittery:${yn}][${jn}] Event Name: ${Hn}
	data: ${Xr}`)})}logIfDebugEnabled(Ft,yn,jn){(bp.isDebugEnabled||this.debug.enabled)&&this.debug.logger(Ft,this.debug.name,yn,jn)}on(Ft,yn){Qr(yn),Ft=Array.isArray(Ft)?Ft:[Ft];for(const jn of Ft)Tl(jn),Fo(this,jn).add(yn),this.logIfDebugEnabled("subscribe",jn,void 0),ep(jn)||this.emit(yp,{eventName:jn,listener:yn});return this.off.bind(this,Ft,yn)}off(Ft,yn){Qr(yn),Ft=Array.isArray(Ft)?Ft:[Ft];for(const jn of Ft)Tl(jn),Fo(this,jn).delete(yn),this.logIfDebugEnabled("unsubscribe",jn,void 0),ep(jn)||this.emit(su,{eventName:jn,listener:yn})}once(Ft){return new o(yn=>{const jn=this.on(Ft,Hn=>{jn(),yn(Hn)})})}events(Ft){Ft=Array.isArray(Ft)?Ft:[Ft];for(const yn of Ft)Tl(yn);return Pp(this,Ft)}async emit(Ft,yn){Tl(Ft),this.logIfDebugEnabled("emit",Ft,yn),Dr(this,Ft,yn);const jn=Fo(this,Ft),Hn=zu.get(this),Xr=[...jn],jr=ep(Ft)?[]:[...Hn];await Ju,await o.all([...Xr.map(async $r=>{if(jn.has($r))return $r(yn)}),...jr.map(async $r=>{if(Hn.has($r))return $r(Ft,yn)})])}async emitSerial(Ft,yn){Tl(Ft),this.logIfDebugEnabled("emitSerial",Ft,yn);const jn=Fo(this,Ft),Hn=zu.get(this),Xr=[...jn],jr=[...Hn];await Ju;for(const $r of Xr)jn.has($r)&&await $r(yn);for(const $r of jr)Hn.has($r)&&await $r(Ft,yn)}onAny(Ft){return Qr(Ft),this.logIfDebugEnabled("subscribeAny",void 0,void 0),zu.get(this).add(Ft),this.emit(yp,{listener:Ft}),this.offAny.bind(this,Ft)}anyEvent(){return Pp(this)}offAny(Ft){Qr(Ft),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(su,{listener:Ft}),zu.get(this).delete(Ft)}clearListeners(Ft){Ft=Array.isArray(Ft)?Ft:[Ft];for(const yn of Ft)if(this.logIfDebugEnabled("clear",yn,void 0),typeof yn=="string"||typeof yn=="symbol"){Fo(this,yn).clear();const jn=_h(this,yn);for(const Hn of jn)Hn.finish();jn.clear()}else{zu.get(this).clear();for(const jn of Dp.get(this).values())jn.clear();for(const jn of Xs.get(this).values()){for(const Hn of jn)Hn.finish();jn.clear()}}}listenerCount(Ft){Ft=Array.isArray(Ft)?Ft:[Ft];let yn=0;for(const jn of Ft){if(typeof jn=="string"){yn+=zu.get(this).size+Fo(this,jn).size+_h(this,jn).size+_h(this).size;continue}typeof jn<"u"&&Tl(jn),yn+=zu.get(this).size;for(const Hn of Dp.get(this).values())yn+=Hn.size;for(const Hn of Xs.get(this).values())yn+=Hn.size}return yn}bindMethods(Ft,yn){if(typeof Ft!="object"||Ft===null)throw new TypeError("`target` must be an object");yn=Ns(yn);for(const jn of yn){if(Ft[jn]!==void 0)throw new Error(`The property \`${jn}\` already exists on \`target\``);Object.defineProperty(Ft,jn,{enumerable:!1,value:this[jn].bind(this)})}}}const bo=Object.getOwnPropertyNames(bp.prototype).filter(Tn=>Tn!=="constructor");Object.defineProperty(bp,"listenerAdded",{value:yp,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(bp,"listenerRemoved",{value:su,writable:!1,enumerable:!0,configurable:!1});var Tp=bp;function Du(Tn){return typeof Tn=="object"&&Tn!==null&&"message"in Tn&&typeof Tn.message=="string"}function jp(Tn){if(Du(Tn))return Tn;try{return new Error(JSON.stringify(Tn))}catch{return new Error(String(Tn))}}function Kp(Tn){return jp(Tn).message}var Sp=(Tn=>(Tn.FPS_DROP="fps_drop",Tn))(Sp||{}),Gp=(Tn=>(Tn.start="start",Tn.transform="transform",Tn.flush="flush",Tn))(Gp||{}),Up=(Tn=>(Tn.pipeline_ended="pipeline_ended",Tn.pipeline_ended_with_error="pipeline_ended_with_error",Tn.pipeline_started="pipeline_started",Tn.pipeline_started_with_error="pipeline_started_with_error",Tn.pipeline_restarted="pipeline_restarted",Tn.pipeline_restarted_with_error="pipeline_restarted_with_error",Tn))(Up||{});const Yo=500,lo=.8;class _p extends Tp{constructor(Ft,yn){super(),this.index_=yn,this.uuid_=cp(),this.framesTransformed_=0,this.transformer_=Ft,this.shouldStop_=!1,this.isFlashed_=!1,this.framesFromSource_=0,this.fps_=0,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in Ft&&(this.transformerType_=Ft.getTransformerType());const jn=new Ro().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Create").build();Ho.report(jn)}setTrackExpectedRate(Ft){this.trackExpectedRate_=Ft}async start(Ft){if(this.controller_=Ft,this.transformer_&&typeof this.transformer_.start=="function")try{await this.transformer_.start(Ft)}catch(yn){const jn=new Ro().action("MediaTransformer").guid(this.uuid_).message(d.errors.transformer_start).transformerType(this.transformerType_).variation("Error").error(Kp(yn)).build();Ho.report(jn);const Hn={eventMetaData:{transformerIndex:this.index_},error:yn,function:"start"};this.emit("error",Hn)}}async transform(Ft,yn){var jn,Hn,Xr,jr;if(this.mediaTransformerQosReportStartTimestamp_===0&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),Ft instanceof VideoFrame&&(this.videoHeight_=(jn=Ft==null?void 0:Ft.displayHeight)!=null?jn:0,this.videoWidth_=(Hn=Ft==null?void 0:Ft.displayWidth)!=null?Hn:0),++this.framesFromSource_,this.transformer_)if(this.shouldStop_)console.warn("[Pipeline] flush from transform"),Ft.close(),this.flush(yn),yn.terminate();else try{await((jr=(Xr=this.transformer_).transform)==null?void 0:jr.call(Xr,Ft,yn)),++this.framesTransformed_,this.framesTransformed_===Yo&&this.mediaTransformerQosReport()}catch($r){const zr=new Ro().action("MediaTransformer").guid(this.uuid_).message(d.errors.transformer_transform).transformerType(this.transformerType_).variation("Error").error(Kp($r)).build();Ho.report(zr);const _l={eventMetaData:{transformerIndex:this.index_},error:$r,function:"transform"};this.emit("error",_l)}}async flush(Ft){if(this.transformer_&&typeof this.transformer_.flush=="function"&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(Ft)}catch(jn){const Hn=new Ro().action("MediaTransformer").guid(this.uuid_).message(d.errors.transformer_flush).transformerType(this.transformerType_).variation("Error").error(Kp(jn)).build();Ho.report(Hn);const Xr={eventMetaData:{transformerIndex:this.index_},error:jn,function:"flush"};this.emit("error",Xr)}}this.mediaTransformerQosReport();const yn=new Ro().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Delete").build();Ho.report(yn)}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}mediaTransformerQosReport(){let Ft=(Date.now()-this.mediaTransformerQosReportStartTimestamp_)/1e3,yn=this.framesFromSource_/Ft,jn=this.framesTransformed_/Ft;if(this.trackExpectedRate_!=-1&&this.trackExpectedRate_*lo>yn){const Xr={eventMetaData:{transformerIndex:this.index_},warningType:"fps_drop",dropInfo:{requested:this.trackExpectedRate_,current:yn}};this.emit("warn",Xr)}const Hn=new Ro().action("MediaTransformer").fps(yn).transformedFps(jn).framesTransformed(this.framesTransformed_).guid(this.uuid_).transformerType(this.transformerType_).videoHeight(this.videoHeight_).videoWidth(this.videoWidth_).variation("QoS").build();Ho.report(Hn),this.mediaTransformerQosReportStartTimestamp_=0,this.framesFromSource_=0,this.framesTransformed_=0}}class sm extends Tp{constructor(Ft){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let yn=0;yn<Ft.length;yn++){let jn=new _p(Ft[yn],yn);jn.on("error",Hn=>{this.emit("error",Hn)}),jn.on("warn",Hn=>{this.emit("warn",Hn)}),this.transformers_.push(jn)}}setTrackExpectedRate(Ft){this.trackExpectedRate_=Ft;for(let yn of this.transformers_)yn.setTrackExpectedRate(this.trackExpectedRate_)}async start(Ft,yn){if(!this.transformers_||this.transformers_.length===0){console.log("[Pipeline] No transformers.");return}try{let jn=Ft;for(let Hn of this.transformers_)Ft=Ft.pipeThrough(new TransformStream(Hn));Ft.pipeTo(yn).then(async()=>{console.log("[Pipeline] Setup."),await yn.abort(),await jn.cancel(),this.emit("pipelineInfo","pipeline_ended")}).catch(async Hn=>{Ft.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(Xr=>{console.error("[Pipeline] Error from stream transform:",Xr)}),await yn.abort(Hn),await jn.cancel(Hn),this.emit("pipelineInfo","pipeline_ended_with_error")})}catch{this.emit("pipelineInfo","pipeline_started_with_error"),this.destroy();return}this.emit("pipelineInfo","pipeline_started"),console.log("[Pipeline] Pipeline started.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let Ft of this.transformers_)Ft.stop()}}class qp extends Tp{constructor(){super(),this.uuid_=cp(),this.trackExpectedRate_=-1;const Ft=new Ro().action("MediaProcessor").guid(this.uuid_).variation("Create").build();Ho.report(Ft)}setTrackExpectedRate(Ft){this.trackExpectedRate_=Ft,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(Ft,yn){return this.readable_=Ft,this.writable_=yn,this.transformInternal()}transformInternal(){return new o((Ft,yn)=>{if(!this.transformers_||this.transformers_.length===0){const Hn=new Ro().action("MediaProcessor").guid(this.uuid_).message(d.errors.transformer_none).variation("Error").build();Ho.report(Hn),yn("[MediaProcessor] Need to set transformers.");return}if(!this.readable_){const Hn=new Ro().action("MediaProcessor").guid(this.uuid_).message(d.errors.readable_null).variation("Error").build();Ho.report(Hn),yn("[MediaProcessor] Readable is null.");return}if(!this.writable_){const Hn=new Ro().action("MediaProcessor").guid(this.uuid_).message(d.errors.writable_null).variation("Error").build();Ho.report(Hn),yn("[MediaProcessor] Writable is null.");return}let jn=!1;this.pipeline_&&(jn=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new sm(this.transformers_),this.pipeline_.on("warn",Hn=>{this.emit("warn",Hn)}),this.pipeline_.on("error",Hn=>{this.emit("error",Hn)}),this.pipeline_.on("pipelineInfo",Hn=>{jn&&(Hn==="pipeline_started"?Hn=Up.pipeline_restarted:Hn==="pipeline_started_with_error"&&(Hn=Up.pipeline_restarted_with_error)),this.emit("pipelineInfo",Hn)}),this.trackExpectedRate_!=-1&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{Ft()}).catch(Hn=>{yn(Hn)})})}setTransformers(Ft){const yn=new Ro().action("MediaProcessor").guid(this.uuid_).message(d.updates.transformer_new).variation("Update").build();return Ho.report(yn),this.transformers_=Ft,this.readable_&&this.writable_?this.transformInternal():o.resolve()}destroy(){return new o(Ft=>{this.pipeline_&&this.pipeline_.destroy();const yn=new Ro().action("MediaProcessor").guid(this.uuid_).variation("Delete").build();Ho.report(yn),Ft()})}}class lp{constructor(){this.processor_=null,this.generator_=null}init(Ft){return new o((yn,jn)=>{try{this.processor_=new MediaStreamTrackProcessor(Ft)}catch(Hn){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${Hn}`),jn(Hn)}try{Ft.kind==="audio"?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):Ft.kind==="video"?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):jn("kind not supported")}catch(Hn){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${Hn}`),jn(Hn)}yn()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class Lu{constructor(Ft){this.insertableStreamHelper_=new lp,this.mediaProcessor_=Ft}setTrack(Ft){return new o((yn,jn)=>{this.insertableStreamHelper_.init(Ft).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{yn(this.insertableStreamHelper_.getProccesorTrack())}).catch(Hn=>{jn(Hn)})}).catch(Hn=>{jn(Hn)})})}destroy(){return new o((Ft,yn)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{Ft()}).catch(jn=>{yn(jn)}):yn("no processor")})}}}.call(this,i(0),i(42))},function(e,s,i){const o={backgroundBlur:i(719),backgroundReplacement:i(720)},a=g=>!!o[g],c=g=>a(g)?o[g]:null,h={isSupported:a,getConfigurator:c,isValidConfig:g=>{const b=g.type;return a(b)?c(b).isValidConfig(g):!1}};e.exports=h},function(e,s,i){const o=i(317).BlurRadius,a=i(318),c=o.High,d=_=>Object.assign({},a.getConfig(_),{transformerType:"BackgroundBlur",radius:c}),h=_=>_==="low"||_==="high",g=_=>_==="low"?o.Low:o.High,j={isValidConfig:_=>{if((_==null?void 0:_.type)!=="backgroundBlur")return!1;const $=_.blurStrength;return $?h($):!0},getConfig:function($){$===void 0&&($={});const _e=d($),et=$,ct=et.blurStrength;return h(ct)&&(_e.radius=g(ct)),_e}};e.exports=j},function(e,s,i){const o=i(318),a=g=>Object.assign({},o.getConfig(g),{transformerType:"VirtualBackground"}),c=g=>/^data:image\/(?:png|jpeg|bmp|gif);base64/.test(g)||/\.(?:png|jpe?g|bmp|gif)$/i.test(g),h={isValidConfig:g=>{if((g==null?void 0:g.type)!=="backgroundReplacement")return!1;const b=g.backgroundImgUrl;return c(b)},getConfig:function(b){b===void 0&&(b={});const j=a(b),_=b,$=_.backgroundImgUrl;return c($)&&(j.backgroundAssetUri=$),j}};e.exports=h},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=i(1)("MediaProcessorConnector");let h=function(b){var j=this;this.setTrack=function(){var _=(0,c.default)(a.default.mark(function $(_e){var et;return a.default.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return et=null,dt.prev=1,dt.next=4,j.connector.setTrack(_e);case 4:et=dt.sent,j.originalTrack=_e,dt.next=11;break;case 8:dt.prev=8,dt.t0=dt.catch(1),d.error(`Error setting track: ${dt.t0}`);case 11:return dt.abrupt("return",et);case 12:case"end":return dt.stop()}},$,null,[[1,8]])}));return function($){return _.apply(this,arguments)}}(),this.destroy=(0,c.default)(a.default.mark(function _(){return a.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.prev=0,_e.next=3,j.connector.destroy();case 3:_e.next=8;break;case 5:_e.prev=5,_e.t0=_e.catch(0),d.warn(`Error destroying connector: ${_e.t0}`);case 8:case"end":return _e.stop()}},_,null,[[0,5]])})),this.stopOriginalTrack=()=>{this.originalTrack&&(this.originalTrack.stop(),this.originalTrack=null)},this.connector=b};h.isValidConnector=g=>typeof(g==null?void 0:g.setTrack)=="function"&&typeof(g==null?void 0:g.destroy)=="function",e.exports=h},function(e,s,i){e.exports=o=>o?!!o.apiKey:!1},function(e,s,i){const o=a=>a===null||a===!1;e.exports=o},function(e,s,i){e.exports=o=>{var a;const c=!!(o&&(a=o.videoSource)!=null&&a.canvas),d=!!(o&&"videoContentHint"in o);c&&!d&&(o.videoContentHint="detail")}},function(e,s,i){const o=i(149),a=c=>!!(c!=null&&c.scalableScreenshare);e.exports=c=>{var d;c||(c={});const h=!!o((d=c)==null?void 0:d.videoSource);c.capableSimulcastScreenshare=h&&a(c)}},function(e,s,i){var o=i(727),a=i(99),c=i(35);function d(h,g){return o(h,c(g,3),a)}e.exports=d},function(e,s){function i(o,a,c){var d;return c(o,function(h,g,b){if(a(h,g,b))return d=g,!1}),d}e.exports=i},function(e,s,i){(function(o){const a=i(28),c=i(72);e.exports=d=>{let h=d.RTCPeerConnection,g=d.env,b=d.stream,j=d.codecFlags;if(g.isLegacyEdge)return!0;let _,$;const _e=()=>{try{_.close()}catch{}try{$.close()}catch{}_=null,$=null};try{const et={iceServers:[]};c()&&(et.sdpSemantics="plan-b"),_=new h(et),$=new h(et),b.getTracks().forEach(ct=>_.addTrack(ct,b))}catch{return _e(),o.resolve(!1)}return _.createOffer().then(et=>{const ct={type:et.type,sdp:et.sdp};return Object.keys(j).forEach(dt=>{j[dt]||(ct.sdp=a.removeVideoCodec(ct.sdp,dt))}),$.setRemoteDescription(ct)}).then(()=>!0).catch(()=>!1).then(et=>(_e(),et))}}).call(this,i(0))},function(e,s,i){const o=i(7),a=o.INVALID_PARAMETER;e.exports=c=>{let d=c.otError;return h=>{if(!h)return;const g=(b,j)=>{if(!b)throw d(a,new Error(`iceConfig invalid: ${j}`))};"includeServers"in h&&g(["all","custom"].indexOf(h.includeServers)!==-1,".includeServers must be all or custom"),"transportPolicy"in h&&g(["all","relay"].indexOf(h.transportPolicy)!==-1,".transportPolicy must be all or relay"),g(Array.isArray(h.customServers),".customServers must be an array"),h.customServers.forEach(b=>{g(b.urls||!("url"in b),"ice servers need .urls, not .url"),g(typeof b.urls=="string"||Array.isArray(b.urls),"ice server .urls must be a string or an array"),g(!b.username||typeof b.username=="string","ice server .username must be a string if present"),g(!b.credential||typeof b.credential=="string","ice server .credential must be a string if present")})}}},function(e,s,i){const o=i(2),a=()=>o.isChrome&&o.version>=98;e.exports=(c,d)=>c.p2pEnabled?!1:d===!0&&a()},function(e,s,i){const c=d=>{if(typeof d!="string")throw new Error("secret must be a string");if(d.length<8)throw new Error("secret must have at least 8 characters");if(d.length>256)throw new Error("secret must not exceed 256 characters")};e.exports=c},function(e,s,i){const o=i(10);e.exports=function(c){switch(c){case o.AUTHENTICATION_ERROR:case o.INVALID_SESSION_ID:case o.TERMS_OF_SERVICE_FAILURE:case o.UNEXPECTED_SERVER_RESPONSE:return c;case o.ANVIL_EMPTY_RESPONSE_BODY:case o.ANVIL_CONNECT_FAILED:return o.CONNECT_FAILED;case o.ANVIL_BADLY_FORMED_RESPONSE:case o.ANVIL_INVALID_HTTP_STATUS:case o.ANVIL_XDOMAIN_OR_PARSING_ERROR:case o.ANVIL_UNKNOWN_HTTP_ERROR:case o.ANVIL_UNEXPECTED_ERROR_CODE:default:return o.UNEXPECTED_SERVER_RESPONSE}}},function(e,s,i){const o=i(10),a=i(7);e.exports={NOT_CONNECTED:{code:a.NOT_CONNECTED,message:"Cannot use forceMute functionality. You are not connected to the session.",exceptionCode:o.NOT_CONNECTED},PERMISSION_DENIED:{code:a.PERMISSION_DENIED,message:"This token does not allow forceMute usage. The role must be at least `moderator` to enable this functionality",exceptionCode:o.UNABLE_TO_FORCE_MUTE},INVALID_PARAMETER:{code:a.INVALID_PARAMETER,message:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",exceptionCode:o.INVALID_PARAMETER},NOT_FOUND:{code:a.NOT_FOUND,message:"The stream does not exist."},UNEXPECTED_SERVER_RESPONSE:{code:a.UNEXPECTED_SERVER_RESPONSE,message:"An unexpected error occurred.",exceptionCode:o.UNEXPECTED_SERVER_RESPONSE}}},function(e,s,i){(function(o){var a=i(3);s.__esModule=!0,s.default=_;var c=a(i(16)),d=a(i(9)),h=a(i(50)),g=a(i(15)),b=a(i(323)),j=a(i(735));function _($){$===void 0&&($={});const _e=$.convertRumorError||i(321),et=$.Dispatcher||i(326),ct=$.ExceptionCodes||i(10),dt=$.hasIceRestartsCapability||i(322),nt=$.hasRenegotiationCapability||i(751),it=$.hasE2eeCapability||i(110),st=$.logging||i(1)("RaptorSocket"),lt=$.Message||i(327),ht=$.OTHelpers||i(8),Tt=$.RumorSocket||(0,j.default)(),Rt=$.Signal||i(328),vt=$.SignalError||i(756),Et=function bt(Ct){var Ut=this;let Xt=Ct.connectionId,Nt=Ct.sessionId,Jt=Ct.messagingSocketUrl,zt=Ct.symphonyUrl,nn=Ct.dispatcher,Bt=Ct.analytics,sn=Ct.requestedCapabilities,qt=sn===void 0?[]:sn,Kt,$t,Sn,On,tn,bn,dn,Mn;const $n=["disconnected","connecting","connected","error","disconnecting"],Un=nn||new et,Fn=ht.statable(this,$n,"disconnected"),cr=function(In){(!In.action||!In.variation)&&st.debug("Expected action and variation"),Bt.logEvent((0,d.default)({sessionId:$t,partnerId:Kt,p2p:bn,messagingServer:dn,connectionId:Xt},In))},or=function(){for(var In=arguments.length,zn=new Array(In),vr=0;vr<In;vr++)zn[vr]=arguments[vr];const Jr=zn[0];Fn(Jr?"error":"connected"),tn(...zn)},wr=Vn=>{let In="clientDisconnected";!this.is("disconnecting")&&Mn&&(In="networkDisconnected"),Vn&&Vn.code===4001&&(In="networkTimedout"),Fn("disconnected"),Un.onClose(In)},Er=Vn=>{Mn=!0,st.error(Vn)},Zr=()=>{Un.onReconnecting()},po=()=>{cr({action:"Reconnect",variation:"Success",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId}),Un.onReconnected()},lr=()=>{cr({action:"Reconnect",variation:"Attempt",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})},pr=Vn=>{Vn.message==="connectionLimitExceeded"&&(Vn.code=ct.CONNECTION_LIMIT_EXCEEDED),Vn.reason="ConnectToSession";const In=_e(Vn);cr({action:"Reconnect",variation:"Failure",failureReason:Vn.reason,failureCode:In.code,failureMessage:In.message,messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})};Object.defineProperty(this,"socketId",{get(){return this._rumor.socketID}}),this.connect=function(In,zn,vr,Jr){if(!this.is("disconnected","error")){st.warn("Cannot connect the Raptor Socket as it is currently connected. You should disconnect first.");return}Fn("connecting"),Kt=zn.partnerId,$t=zn.sessionId,bn=zn.p2pEnabled,dn=zn.messagingServer,Sn=In,tn=Jr,On={apiKey:Kt,sessionId:$t};const kn=`/v2/partner/${Kt}/session/${$t}`;this._rumor=new bt.RumorSocket({messagingURL:Jt,notifyDisconnectAddress:zt,connectionId:Xt,sessionId:Nt,enableReconnection:zn.reconnection}),this._rumor.on("close",wr),this._rumor.on("error",Er),this._rumor.on("reconnecting",Zr),this._rumor.on("reconnectAttempt",lr),this._rumor.on("reconnectFailure",pr),this._rumor.on("reconnected",po),this._rumor.on("message",Un.dispatch.bind(Un));const ir=gr=>{or({reason:"WebSocketConnection",code:gr.code,message:gr.message})};this._rumor.once("error",ir),this._rumor.once("open",()=>{this._rumor.removeListener("error",ir),st.debug(`connected. Subscribing to ${kn} on ${Jt}`),this._rumor.subscribe([kn]);const gr=qt;(bt.hasIceRestartsCapability()||bt.hasRenegotiationCapability())&&zn.renegotiation&&gr.push("renegotiation"),bt.hasE2eeCapability()&&zn.e2ee&&gr.push("e2ee");const eo=lt.connections.create({apiKey:Kt,sessionId:$t,connectionId:this._rumor.id,connectionEventsSuppressed:vr.connectionEventsSuppressed,capabilities:gr}),io=new o(to=>{const Wr=To=>{To.id===this._rumor.id&&(to(To),nn.off("connection#created",Wr))};nn.on("connection#created",Wr)});this.publish(eo,{"X-TB-TOKEN-AUTH":Sn},!0,(to,Wr)=>{if(to){to.message==="connectionLimitExceeded"&&(to.code=ct.CONNECTION_LIMIT_EXCEEDED),or({reason:"ConnectToSession",code:to.code,message:to.message,socketId:this.socketId});return}const To=Wr&&Wr.data?JSON.parse(Wr.data):null;To&&(!To.connection||To.connection.length===0)&&(To.connection=[],Array.isArray(To.stream)&&To.stream.forEach(yo=>{let Pr=yo.connection;return To.connection.push(Pr)}));const no=(yo,Pr)=>{yo?or({reason:"GetSessionState",code:yo.code,message:yo.message,socketId:this.socketId}):or(void 0,Pr)};io.then(yo=>{To.connection.some(fu=>fu.id===yo.id)||To.connection.unshift(yo);const Pr=(0,g.default)();Un.registerCallback(Pr,no),Un.emit("session#read",To,Pr)})})})},this.disconnect=function(){this.is("disconnected")||(Fn("disconnecting"),this._rumor.disconnect())},this.publish=function(Vn,In,zn,vr){vr=vr||function(){};const Jr=(0,h.default)(vr),kn=(0,g.default)();if(st.debug(`Publish (ID:${kn}) ${Vn}`),this._rumor.readyState!==Tt.OPEN||this._rumor.reconnecting&&!zn){const ir=new Error("Not connected.");ir.code=500,Jr(ir),st.error("cannot publish until the socket is connected.");return}return Un.registerCallback(kn,Jr),this._rumor.publish([zt],Vn,(0,d.default)({},In,{"Content-Type":"application/x-raptor+v2","TRANSACTION-ID":kn,"X-TB-FROM-ADDRESS":this._rumor.id}),zn,function(ir){ir&&Jr(...arguments)}),kn},this.send=function(Vn,In,zn,vr){zn===void 0&&(zn=!0),vr===void 0&&(vr=()=>{}),Ut.publish((0,b.default)(Vn),In,zn,vr)},this.streamCreate=function(Vn,In){Vn===void 0&&(Vn={}),In===void 0&&(In=()=>{});const zn=Vn,vr=zn.name,Jr=zn.streamId,kn=zn.subscriberAudioFallbackEnabled,ir=zn.channels,gr=zn.minBitrate,Br=zn.maxBitrate,vo=zn.sourceStreamId,eo=zn.e2ee,io=zn.publisherAudioFallbackEnabled,to=zn.customProperties,Wr={apiKey:Kt,sessionId:$t,streamId:Jr,name:vr,audioFallbackEnabled:kn,subscriberAudioFallbackEnabled:kn,channels:ir,minBitrate:gr,maxBitrate:Br,sourceStreamId:vo,e2ee:eo,publisherAudioFallbackEnabled:io,customProperties:to},To=lt.streams.create(Wr);this.publish(To,{},!0,(no,yo)=>{In(no,Jr,yo)})},this.streamDestroy=function(Vn,In){this.publish(lt.streams.destroy(Kt,$t,Vn,In),{},!0)},this.streamChannelUpdate=function(Vn,In,zn){this.publish(lt.streamChannels.update(Kt,$t,Vn,In,zn),{},!0)},this.subscriberCreate=function(Vn,In,zn,vr,Jr,kn){const ir={apiKey:Kt,sessionId:$t,streamId:Vn,subscriberId:In,connectionId:this._rumor.id,channelsToSubscribeTo:zn,sourceStreamId:vr,e2ee:Jr};this.publish(lt.subscribers.create(ir),{},!0,kn)},this.subscriberDestroy=function(Vn,In){this.publish(lt.subscribers.destroy(Kt,$t,Vn,In),{},!0)},this.subscriberUpdate=function(Vn,In,zn){this.publish(lt.subscribers.update(Kt,$t,Vn,In,zn),{},!0)},this.subscriberChannelUpdate=function(Vn,In,zn,vr){this.publish(lt.subscriberChannels.update(Kt,$t,Vn,In,zn,vr),{},!0)},this.forceDisconnect=function(Vn,In){this.publish(lt.connections.destroy({apiKey:Kt,sessionId:$t,connectionId:Vn}),{},!0,In)},this.forceUnpublish=function(Vn,In){this.publish(lt.streams.destroy(Kt,$t,Vn),{},!0,In)},this.forceMuteStream=function(Vn,In){const zn={streamId:Vn,active:!0};this.publish(lt.forceMute.update(Object.assign({},On,zn)),{},!0,In)},this.forceMuteAll=function(Vn,In,zn){const vr={excludedStreamIds:Vn,active:In};this.publish(lt.forceMute.update(Object.assign({},On,vr)),{},!0,zn)},this.signal=function(Vn,In,zn){const vr=new Rt($t,this._rumor.id,Vn||{});if(!vr.valid){In&&(0,c.default)(In)&&In(new vt(vr.error.code,vr.error.reason),vr.toHash());return}this.publish(vr.toRaptorMessage(),{},vr.retryAfterReconnect,Jr=>{let kn,ir,gr;const Br=[400,403,404,413,500];if(Jr){const vo=parseInt(Jr.code,10);Br.includes(vo)?(ir=vo,gr=Jr.message):(ir=ct.UNEXPECTED_SERVER_RESPONSE,gr="Unexpected server response. Try this operation again later."),kn=new vt(ir,gr)}else{const vo=vr.data?typeof vr.data:null;zn("signal","send",{type:vo})}In&&(0,c.default)(In)&&In(kn,vr.toHash())})},this.id=function(){return this._rumor&&this._rumor.id}};return Et.hasIceRestartsCapability=dt,Et.hasRenegotiationCapability=nt,Et.hasE2eeCapability=it,Et.RumorSocket=Tt,Et}}).call(this,i(0))},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=_;var a=o(i(18)),c=o(i(736)),d=o(i(1)),h=o(i(737)),g=o(i(742)),b=o(i(747)),j=o(i(20));function _($){let _e=$===void 0?{}:$,et=_e.WebSocket,ct=et===void 0?b.default:et;const dt=(0,c.default)(),nt=(0,h.default)({AnalyticsHelper:j.default,EventEmitter:a.default,WebSocket:ct,logging:d.default,allocateId:dt});return(0,g.default)({EventEmitter:a.default,ReconnectableSocket:nt,logging:d.default,allocateId:dt})}},function(e,s,i){s.__esModule=!0,s.default=o;function o(){let a=0;return()=>(a+=1,a)}},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(4)),c=o(i(5)),d=o(i(45)),h=o(i(324)),g=o(i(48)),b=o(i(325)),j=i(76),_=o(i(738)),$=o(i(61)),_e=o(i(739)),et=o(i(741));const ct=st=>function(){st(...arguments)},dt=st=>st===1e3||st>=3e3&&st<=4999,nt=j.codes.CLOSE_TIMEOUT;var it=st=>{var lt;let ht=st.AnalyticsHelper,Tt=st.EventEmitter,Rt=st.WebSocket,vt=st.logging,Et=st.allocateId,bt=st.BUFFER_DRAIN_INTERVAL,Ct=bt===void 0?100:bt,Ut=st.BUFFER_DRAIN_MAX_RETRIES,Xt=Ut===void 0?10:Ut;return lt=function(Nt){(0,g.default)(Jt,Nt);function Jt(nn){var Bt;Bt=Nt.call(this)||this,Bt._url=void 0,Bt._id=Et(),Bt._logger=vt(`ReconnectableSocket:${Bt._id}`),Bt._webSocket=void 0,Bt._connectTimer=void 0,Bt._pingTimer=void 0,Bt._pingWarningTimer=void 0,Bt._disconnectTimer=void 0,Bt._queuedMessages=[],Bt._draining=!1,Bt._analytics=new ht,Bt._logAnalyticsEvent=or=>{let wr=or.action,Er=or.variation,Zr=or.payload;Bt._analytics.logEvent({action:wr,variation:Er,payload:Zr,sessionId:Bt.sessionId,connectionId:Bt.connectionId})};const sn=nn.url,qt=nn.connectionId,Kt=nn.sessionId,$t=nn.connectTimeout,Sn=$t===void 0?15e3:$t,On=nn.pingThreshold,tn=On===void 0?3e3:On,bn=nn.pingWarningDelay,dn=bn===void 0?100:bn,Mn=nn.disconnectThreshold,$n=Mn===void 0?5900:Mn,Un=nn.reconnectMaxDuration,Fn=Un===void 0?6e4:Un;if(!sn)throw new Error("Must provide url");Bt.connectionId=qt,Bt.sessionId=Kt,Bt.readyStateMachine=(0,_e.default)({reconnectMaxDuration:Fn,CLOSED:Jt.CLOSED,CLOSING:Jt.CLOSING}),Bt._url=sn,(0,b.default)({logger:Bt._logger,obj:(0,h.default)(Bt),eventNames:["error","open","message","needsPing","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),Bt.readyStateMachine.observe("onEnterOpen",or=>{let wr=or.from;Bt._resetPingTimers(),Bt._resetDisconnectTimer(),Bt._connectTimer.clear(),wr==="reconnecting"?(Bt._queuedMessages.forEach(Er=>Bt.send(Er,!0)),Bt._queuedMessages=[],Bt.emit("reconnected"),Bt._logAnalyticsEvent({action:"WebSocket:reconnect",variation:"Success"})):(Bt.emit("open"),Bt._logAnalyticsEvent({action:"WebSocket:open"}))}),Bt.readyStateMachine.observe("onEnterClosed",(or,wr)=>{let Er=or.from,Zr=or.code,po=or.reason;Bt.emit("close",wr),Er==="reconnecting"&&Bt._logAnalyticsEvent({action:"WebSocket:reconnect",variation:"Failure",payload:{code:Zr,reason:po}})}),Bt.readyStateMachine.observe("onEnterClosing",ct(function(){var or=(0,c.default)(a.default.mark(function wr(Er,Zr){var po,lr,pr;return a.default.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:return po=Er.from,lr=Zr.code,pr=Zr.reason,Bt._clearTimers(),In.next=5,Bt._clearSocket({drain:po==="open",code:lr,reason:pr});case 5:po==="reconnecting"&&(Bt.emit("reconnectFailure",{code:lr,reason:pr}),Bt._logAnalyticsEvent({action:"WebSocket:reconnect",variation:"Failure"})),setTimeout(()=>{Bt.readyStateMachine.closed({code:lr,reason:pr})});case 7:case"end":return In.stop()}},wr)}));return function(wr,Er){return or.apply(this,arguments)}}())),Bt.readyStateMachine.observe("onEnterReconnecting",()=>{Bt.emit("reconnecting"),Bt._logAnalyticsEvent({action:"WebSocket:reconnect",variation:"Attempt"})}),Bt.readyStateMachine.observe("onDisconnect",ct(function(){var or=(0,c.default)(a.default.mark(function wr(Er,Zr){var po,lr,pr,Vn;return a.default.wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:if(po=Er.from,lr=Er.to,pr=Zr.code,Vn=Zr.reason,lr!=="reconnecting"){zn.next=12;break}if(!Bt._draining){zn.next=5;break}return zn.abrupt("return");case 5:return Bt._clearTimers(),Bt.emit("reconnectAttempt"),zn.next=9,Bt._clearSocket({drain:po==="open",code:pr,reason:Vn});case 9:Bt._createSocket(),zn.next=13;break;case 12:Bt._logAnalyticsEvent({action:"WebSocket:disconnect",payload:{code:pr,reason:Vn}});case 13:case"end":return zn.stop()}},wr)}));return function(wr,Er){return or.apply(this,arguments)}}()));const cr=(or,wr)=>new _.default({name:or,duration:wr,logger:Bt._logger});return Bt._connectTimer=cr("connect",Sn),Bt._pingTimer=cr("ping",tn),Bt._pingWarningTimer=cr("pingWarning",dn),Bt._disconnectTimer=cr("disconnect",$n),Bt._createSocket(),Bt}var zt=Jt.prototype;return zt._createSocket=function(){const Bt=new Rt(this.url);Bt.binaryType="arraybuffer";const sn=(0,$.default)(Bt);sn.on("open",()=>{this.readyStateMachine.open()}),sn.on("close",qt=>{let Kt=qt.code,$t=qt.reason;this.readyStateMachine.disconnect({code:Kt,reason:$t})}),sn.on("error",qt=>{this.emit("error",qt)}),sn.on("message",qt=>{this.readyState!==Jt.CLOSING&&this._resetDisconnectTimer(),this.emit("message",qt)}),this._webSocket=Bt,this._webSocketEvents=sn,this._connectTimer.reset(()=>{const qt={code:nt,reason:"Timeout while opening connection"},Kt=new Error(qt.reason);Kt.code=nt,this.emit("error",Kt),this.readyStateMachine.disconnect(qt)})},zt._clearSocket=function(){var nn=(0,c.default)(a.default.mark(function sn(qt){var Kt,$t,Sn,On,tn;return a.default.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:if(Kt=qt===void 0?{}:qt,$t=Kt.drain,Sn=$t===void 0?!1:$t,On=Kt.code,tn=Kt.reason,this._draining=!0,this._webSocketEvents&&this._webSocketEvents.removeAll(),this._webSocket.readyState===Jt.CLOSED){dn.next=9;break}if(!Sn){dn.next=7;break}return dn.next=7,(0,et.default)(this._webSocket,{BUFFER_DRAIN_INTERVAL:Ct,BUFFER_DRAIN_MAX_RETRIES:Xt});case 7:this._logAnalyticsEvent({action:"WebSocket:close",payload:{code:On,reason:tn},variation:"Attempt"});try{!dt(On)||On===void 0&&tn===void 0?this._webSocket.close():this._webSocket.close(On,tn),this._logAnalyticsEvent({action:"WebSocket:close",payload:{code:On,reason:tn},variation:"Success"})}catch(Mn){vt.error("Could not close websocket",Mn),this._logAnalyticsEvent({action:"WebSocket:close",payload:{err:Mn},variation:"Failure"})}case 9:this._draining=!1;case 10:case"end":return dn.stop()}},sn,this)}));function Bt(sn){return nn.apply(this,arguments)}return Bt}(),zt.send=function(Bt,sn){sn===void 0&&(sn=!0),this.readyState===Jt.OPEN&&this._resetPingTimers();const qt=()=>{try{return this._webSocket.send(Bt),"sent"}catch(Kt){if(this._webSocket.readyState===Rt.OPEN)return this._logger.debug("webSocket.send threw exception even though it was open:",Kt),"dropped";throw Kt}};if(this.readyStateMachine.state==="reconnecting"){if(this._webSocket.readyState===Rt.OPEN)try{qt()}catch{}return sn?(this._queuedMessages.push(Bt),"queued"):(this._logger.debug("Dropping message during reconnection since retryAfterReconnect is false:",Bt),"dropped")}return qt()},zt.close=function(Bt,sn){if(this.readyState===Jt.CLOSING)throw new Error("Can not call close on a closing ReconnectableSocket");if(this.readyState===Jt.CLOSED)throw new Error("Can not call close on an already closed ReconnectableSocket");this.readyStateMachine.close({code:Bt,reason:sn})},zt._resetPingTimers=function(){this._pingWarningTimer.clear(),this._pingTimer.reset(()=>{this._pingWarningTimer.reset(()=>{this._logger.warn("Did not send message after needsPing event. Other side may disconnect.")}),this.emit("needsPing")})},zt._resetDisconnectTimer=function(){this._disconnectTimer.reset(()=>this.readyStateMachine.disconnect({code:nt,reason:"No activity"}))},zt._clearTimers=function(){[this._disconnectTimer,this._connectTimer,this._pingTimer,this._pingWarningTimer].forEach(Bt=>Bt.clear())},(0,d.default)(Jt,[{key:"url",get:function(){return typeof this._url=="function"?this._url():this._url}},{key:"reconnecting",get:function(){return this.readyStateMachine.state==="reconnecting"}},{key:"binaryType",get:function(){return this._webSocket.binaryType}},{key:"bufferedAmount",get:function(){return this._webSocket.bufferedAmount}},{key:"protocol",get:function(){return this._webSocket.protocol}},{key:"extensions",get:function(){return this._webSocket.extensions}},{key:"readyState",get:function(){return{reconnecting:Jt.OPEN,open:Jt.OPEN,closing:Jt.CLOSING,closed:Jt.CLOSED,connecting:Jt.CONNECTING}[this.readyStateMachine.state]}}]),Jt}(Tt),lt.CONNECTING=Rt.CONNECTING,lt.OPEN=Rt.OPEN,lt.CLOSING=Rt.CLOSING,lt.CLOSED=Rt.CLOSED,lt};s.default=it},function(e,s,i){s.__esModule=!0,s.default=void 0;let o=function(){function a(d){let h=d.name,g=d.logger,b=d.duration;this.name=void 0,this.logger=void 0,this.duration=void 0,this.currId=void 0,this.name=h,this.logger=g,this.duration=b}var c=a.prototype;return c.reset=function(h){this.clear();const g=setTimeout(()=>{this.currId!==void 0&&(this.logger.spam(`${this.name} timer with id ${this.currId} expired, entering callback`),this.currId=void 0,h())},this.duration);this.currId=g,this.logger.spam(`Started ${this.name} timer with id ${this.currId}, expires in ${this.duration}ms`)},c.clear=function(){this.currId!==void 0&&(clearTimeout(this.currId),this.logger.spam(`Cleared ${this.name} timer with id ${this.currId}`),this.currId=void 0)},c.isRunning=function(){return this.currId!==void 0},a}();s.default=o},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(310)),c=o(i(740)),d=i(76),h=o(i(1));const g=(0,h.default)("ReconnectableSocketStateMachine"),b=d.codes.CLOSE_UNSUPPORTED,j=d.codes.CLOSE_UNEXPECTED_CONDITION;var _=$=>{let _e=$.reconnectMaxDuration,et=$.CLOSED,ct=$.CLOSING,dt;function nt(it){let st=it.code;return(this.state==="open"||!dt)&&(dt=(0,c.default)(_e)),_e>0&&!dt()&&[b,j].indexOf(st)===-1&&[et,ct].indexOf(this.readyState)===-1?"reconnecting":"closing"}return new a.default({init:"connecting",methods:{onInvalidTransition(it,st,lt){g.error("Invalid state transition",{transition:it,from:st,to:lt})}},transitions:[{name:"open",from:["connecting","reconnecting"],to:"open"},{name:"close",from:["connecting","reconnecting","open"],to:"closing"},{name:"closed",from:"closing",to:"closed"},{name:"disconnect",from:["reconnecting","open","connecting"],to:nt}]})};s.default=_},function(e,s,i){e.exports=o=>{let a=!1;return setTimeout(()=>{a=!0},o),()=>a}},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(4)),c=o(i(5)),d=o(i(107)),h=function(){var g=(0,c.default)(a.default.mark(function b(j,_){var $,_e,et,ct,dt,nt;return a.default.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:$=_===void 0?{}:_,_e=$.BUFFER_DRAIN_INTERVAL,et=_e===void 0?100:_e,ct=$.BUFFER_DRAIN_MAX_RETRIES,dt=ct===void 0?10:ct,nt=0;case 2:if(!(nt<dt)){st.next=10;break}if(j.bufferedAmount!==0){st.next=5;break}return st.abrupt("break",10);case 5:return st.next=7,(0,d.default)(et);case 7:nt+=1,st.next=2;break;case 10:case"end":return st.stop()}},b)}));return function(b,j){return g.apply(this,arguments)}}();s.default=h},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(45)),c=o(i(324)),d=o(i(48)),h=o(i(15)),g=o(i(325)),b=o(i(743)),j=et(i(171)),_=o(i(746)),$=i(76);function _e(dt){if(typeof WeakMap!="function")return null;var nt=new WeakMap,it=new WeakMap;return(_e=function(lt){return lt?it:nt})(dt)}function et(dt,nt){if(!nt&&dt&&dt.__esModule)return dt;if(dt===null||typeof dt!="object"&&typeof dt!="function")return{default:dt};var it=_e(nt);if(it&&it.has(dt))return it.get(dt);var st={},lt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ht in dt)if(ht!=="default"&&Object.prototype.hasOwnProperty.call(dt,ht)){var Tt=lt?Object.getOwnPropertyDescriptor(dt,ht):null;Tt&&(Tt.get||Tt.set)?Object.defineProperty(st,ht,Tt):st[ht]=dt[ht]}return st.default=dt,it&&it.set(dt,st),st}var ct=dt=>{var nt;let it=dt.EventEmitter,st=dt.ReconnectableSocket,lt=dt.logging,ht=dt.allocateId;return nt=function(Tt){(0,d.default)(Rt,Tt);function Rt(Et){var bt;let Ct=Et.messagingURL,Ut=Et.notifyDisconnectAddress,Xt=Et.connectionId,Nt=Et.sessionId,Jt=Et.enableReconnection,zt=Et.pingThreshold,nn=zt===void 0?2e3:zt,Bt=Et.disconnectThreshold,sn=Bt===void 0?(Jt?3:25)*nn-100:Bt,qt=Et.reconnectMaxDuration,Kt=qt===void 0?Jt?6e4:0:qt;bt=Tt.call(this)||this,bt.url=void 0,bt.id=void 0,bt._opened=!1,bt._socket=void 0,bt._reconnectAttempts=0,bt._socketID=(0,h.default)(),bt._receivedTransactionIDs=[],bt._notifyDisconnectAddress=void 0,bt._enableReconnection=void 0,bt._pendingMessages=[],bt._logger=lt(`RumorSocket:${ht()}`),(0,g.default)({logger:bt._logger,obj:(0,c.default)(bt),eventNames:["open","message","error","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),bt.url=Ct,bt.id=Xt,bt._notifyDisconnectAddress=Ut,bt._enableReconnection=Jt,bt.on("error",Sn=>{bt._logger.error(Sn.message)});try{bt._socket=new st({url:()=>bt._enableReconnection?[bt.url,bt.url.indexOf("?")>=0?"&":"?",`socketId=${bt._socketID}`,bt._socket&&bt._socket.reconnecting?"&reconnect=true":"",`&attempt=${(0,h.default)()}`].join(""):bt.url,pingThreshold:nn,disconnectThreshold:sn,reconnectMaxDuration:Kt,connectionId:Xt,sessionId:Nt})}catch(Sn){bt._logger.error(Sn),bt.emit("error",new _.default($.codes.CLOSE_CONNECT_EXCEPTION))}const $t=()=>{bt._opened=!0,bt._socket.send(b.default.Connect(bt.id,Ut).serialize()),bt.emit("open",bt.id)};return bt._socket.once("open",$t),bt._socket.on("message",Sn=>bt._receiveMessage(Sn)),bt._socket.once("close",Sn=>{bt._logger.debug(`ReconnectableSocket closed (code: ${Sn.code})`),bt._clearPendingMessages();const On=$.codes.CLOSE_NORMAL,tn=$.codes.CLOSE_GOING_AWAY,bn=$.codes.CLOSE_TIMEOUT;[On,tn,bn].indexOf(Sn.code)===-1&&bt.emit("error",new _.default(Sn.code)),bt.emit("close",Sn)}),bt._socket.on("error",Sn=>{let On=Sn.code;return bt.emit("error",new _.default(On))}),bt._socket.on("needsPing",()=>{bt._socket.send(b.default.Ping().serialize())}),bt._socket.on("reconnecting",()=>{bt._opened&&(bt._clearPendingMessagesWhichShouldntRetry(),bt.emit("reconnecting"),bt._reconnectAttempts=0)}),bt._socket.on("reconnectAttempt",()=>{bt._opened&&(bt._reconnectAttempts+=1,bt._socket.send(b.default.Disconnect("1").serialize(),!1),bt.emit("reconnectAttempt"))}),bt._socket.on("reconnected",()=>{if(!bt._opened){$t();return}bt._pendingMessages.forEach(Sn=>{bt._socket.send(Sn.rumorMessage.serialize())}),bt.emit("reconnected")}),bt._socket.on("reconnectFailure",()=>{bt._opened&&(bt._logger.debug(`Reconnecting failed as connectivity was not restored within ${Kt}ms`),bt.emit("reconnectFailure",new _.default))}),bt}var vt=Rt.prototype;return vt._clearPendingMessagesWhichShouldntRetry=function(){const bt=this._pendingMessages.filter(Ct=>!Ct.retryAfterReconnect);this._pendingMessages=this._pendingMessages.filter(Ct=>Ct.retryAfterReconnect),bt.forEach(Ct=>{const Ut=new Error("Not connected.");Ut.code=500,Ct.completion(Ut)})},vt._clearPendingMessages=function(){this._pendingMessages.forEach(bt=>{const Ct=new Error("Not connected.");Ct.code=500,bt.completion(Ct)}),this._pendingMessages=[]},vt._sendAck=function(bt){this._socket.send(b.default.Status([bt.fromAddress],{"TRANSACTION-ID":bt.headers["TRANSACTION-ID"],"X-TB-FROM-ADDRESS":this.id}).serialize())},vt._receiveMessage=function(bt){const Ct=b.default.deserialize(bt.data);if(Ct.type!==j.PONG){if(this._logger.debug("Received:",Ct),Ct.transactionId&&(this._pendingMessages=this._pendingMessages.filter(Ut=>(Ut.rumorMessage.transactionId===Ct.transactionId&&(this._logger.debug("Marking",Ct.transactionId," as received"),Ut.completion(void 0,Ct)),Ut.rumorMessage.transactionId!==Ct.transactionId))),Ct.transactionId&&Ct.type!==j.STATUS){if(this._sendAck(Ct),this._receivedTransactionIDs.indexOf(Ct.transactionId)>=0)return;this._receivedTransactionIDs.push(Ct.transactionId)}this.emit("message",Ct)}},vt.publish=function(bt,Ct,Ut,Xt,Nt){Nt===void 0&&(Nt=()=>{});const Jt=b.default.Publish(bt,Ct,Ut);if(this._socket.send(Jt.serialize(),!1)==="dropped"&&!Xt){const nn=new Error("Not connected.");nn.code=500,Nt(nn);return}this._pendingMessages.push({rumorMessage:Jt,retryAfterReconnect:Xt,completion:Nt})},vt.subscribe=function(bt){this._socket.send(b.default.Subscribe(bt).serialize())},vt.unsubscribe=function(bt){this._socket.send(b.default.Unsubscribe(bt).serialize())},vt.disconnect=function(){if(this.readyState===Rt.OPEN&&this._socket.send(b.default.Disconnect().serialize()),this._socket.readyState!==st.CLOSED&&this._socket.readyState!==st.CLOSING){const bt=$.codes.CLOSE_NORMAL;this._socket.close(bt,$.messages[bt])}},vt.status=function(bt,Ct){this._socket.send(b.default.Status(bt,{"TRANSACTION-ID":Ct,"X-TB-FROM-ADDRESS":this.id}).serialize())},vt.reconnectRetriesCount=function(){return this._reconnectAttempts},vt.messageQueueSize=function(){return this._pendingMessages.length},(0,a.default)(Rt,[{key:"readyState",get:function(){return this._socket?this._socket.readyState:st.CONNECTING}},{key:"reconnecting",get:function(){return this._opened&&this._socket&&this._socket.reconnecting}},{key:"socketID",get:function(){return this._socketID}}]),Rt}(it),nt.CONNECTING=st.CONNECTING,nt.OPEN=st.OPEN,nt.CLOSING=st.CLOSING,nt.CLOSED=st.CLOSED,nt};s.default=ct},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(15)),c=i(744),d=g(i(171));function h(_){if(typeof WeakMap!="function")return null;var $=new WeakMap,_e=new WeakMap;return(h=function(ct){return ct?_e:$})(_)}function g(_,$){if(!$&&_&&_.__esModule)return _;if(_===null||typeof _!="object"&&typeof _!="function")return{default:_};var _e=h($);if(_e&&_e.has(_))return _e.get(_);var et={},ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var dt in _)if(dt!=="default"&&Object.prototype.hasOwnProperty.call(_,dt)){var nt=ct?Object.getOwnPropertyDescriptor(_,dt):null;nt&&(nt.get||nt.set)?Object.defineProperty(et,dt,nt):et[dt]=_[dt]}return et.default=_,_e&&_e.set(_,et),et}const b=_=>{const $=new ArrayBuffer(_.length),_e=new Uint8Array($);for(let et=0;et<_.length;++et)_e[et]=_[et];return $};let j=function(){function _(_e,et,ct,dt){this.type=void 0,this.toAddress=void 0,this.headers=void 0,this.data=void 0,this.type=_e,this.toAddress=et,this.headers=ct,this.data=dt,this.fromAddress=this.headers["X-TB-FROM-ADDRESS"],this.transactionId=this.headers["TRANSACTION-ID"],this.status=this.headers.STATUS,this.isError=this.status&&this.status[0]!=="2"}var $=_.prototype;return $.serialize=function(){let et,ct,dt,nt,it=8,st=7;const lt=[],ht=[],Tt=[];for(st++,dt=0;dt<this.toAddress.length;dt++)lt.push(new c.TextEncoder("utf-8").encode(this.toAddress[dt])),st+=2,st+=lt[dt].length;st++,dt=0;for(const Et in this.headers)this.headers.hasOwnProperty(Et)&&(ht.push(new c.TextEncoder("utf-8").encode(Et)),Tt.push(new c.TextEncoder("utf-8").encode(this.headers[Et])),st+=4,st+=ht[dt].length,st+=Tt[dt].length,dt++);ct=new c.TextEncoder("utf-8").encode(this.data),st+=ct.length;const Rt=new ArrayBuffer(st),vt=new Uint8Array(Rt,0,st);for(st-=4,vt[0]=(st&4278190080)>>>24,vt[1]=(st&16711680)>>>16,vt[2]=(st&65280)>>>8,vt[3]=(st&255)>>>0,vt[4]=0,vt[5]=0,vt[6]=this.type,vt[7]=this.toAddress.length,dt=0;dt<lt.length;dt++)for(et=lt[dt],vt[it++]=et.length>>8&255,vt[it++]=et.length>>0&255,nt=0;nt<et.length;nt++)vt[it++]=et[nt];for(vt[it++]=ht.length,dt=0;dt<ht.length;dt++){for(et=ht[dt],vt[it++]=et.length>>8&255,vt[it++]=et.length>>0&255,nt=0;nt<et.length;nt++)vt[it++]=et[nt];for(et=Tt[dt],vt[it++]=et.length>>8&255,vt[it++]=et.length>>0&255,nt=0;nt<et.length;nt++)vt[it++]=et[nt]}for(dt=0;dt<ct.length;dt++)vt[it++]=ct[dt];return Rt},_.deserialize=function(et){(typeof window!==void 0?window:commonjsGlobal).Buffer&&(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer(et)&&(et=b(et));let ct,dt,nt,it,st,lt,ht,Tt,Rt=8;const vt=new Uint8Array(et);ct=vt[6];const Et=[];for(Tt=0;Tt<vt[7];Tt++)ht=vt[Rt++]<<8,ht+=vt[Rt++],dt=new Uint8Array(et,Rt,ht),Et[Tt]=new c.TextDecoder("utf-8").decode(dt),Rt+=ht;for(nt=vt[Rt++],it={},Tt=0;Tt<nt;Tt++)ht=vt[Rt++]<<8,ht+=vt[Rt++],dt=new Uint8Array(et,Rt,ht),st=new c.TextDecoder("utf-8").decode(dt),Rt+=ht,ht=vt[Rt++]<<8,ht+=vt[Rt++],dt=new Uint8Array(et,Rt,ht),lt=new c.TextDecoder("utf-8").decode(dt),it[st]=lt,Rt+=ht;const bt=new Uint8Array(et,Rt),Ct=new c.TextDecoder("utf-8").decode(bt);return new _(ct,Et,it,Ct)},_.Connect=function(et,ct){const dt={uniqueId:et,"TRANSACTION-ID":(0,a.default)(),notifyDisconnectAddress:ct};return new _(d.CONNECT,[],dt,"")},_.Disconnect=function(et){return new _(d.DISCONNECT,[],{reconnect:et},"")},_.Subscribe=function(et){return new _(d.SUBSCRIBE,et,{},"")},_.Unsubscribe=function(et){return new _(d.UNSUBSCRIBE,et,{},"")},_.Publish=function(et,ct,dt){return new _(d.MESSAGE,et,dt||{},ct||"")},_.Status=function(et,ct){return new _(d.STATUS,et,ct||{},"")},_.Ping=function(){return new _(d.PING,[],{},"")},_}();s.default=j},function(e,s,i){s.__esModule=!0,s.TextEncoder=s.TextDecoder=void 0;var o=c(i(745));function a(g){if(typeof WeakMap!="function")return null;var b=new WeakMap,j=new WeakMap;return(a=function($){return $?j:b})(g)}function c(g,b){if(!b&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var j=a(b);if(j&&j.has(g))return j.get(g);var _={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _e in g)if(_e!=="default"&&Object.prototype.hasOwnProperty.call(g,_e)){var et=$?Object.getOwnPropertyDescriptor(g,_e):null;et&&(et.get||et.set)?Object.defineProperty(_,_e,et):_[_e]=g[_e]}return _.default=g,j&&j.set(g,_),_}const d=(typeof window!==void 0?window:commonjsGlobal).TextEncoder||o.TextEncoder;s.TextEncoder=d;const h=(typeof window!==void 0?window:commonjsGlobal).TextDecoder||o.TextDecoder;s.TextDecoder=h},function(e,s,i){i.r(s),i.d(s,"TextEncoder",function(){return _e}),i.d(s,"TextDecoder",function(){return $});function o(dt,nt,it){return nt<=dt&&dt<=it}function a(dt){if(dt===void 0)return{};if(dt===Object(dt))return dt;throw TypeError("Could not convert argument to dictionary")}function c(dt){for(var nt=String(dt),it=nt.length,st=0,lt=[];st<it;){var ht=nt.charCodeAt(st);if(ht<55296||ht>57343)lt.push(ht);else if(56320<=ht&&ht<=57343)lt.push(65533);else if(55296<=ht&&ht<=56319)if(st===it-1)lt.push(65533);else{var Tt=dt.charCodeAt(st+1);if(56320<=Tt&&Tt<=57343){var Rt=ht&1023,vt=Tt&1023;lt.push(65536+(Rt<<10)+vt),st+=1}else lt.push(65533)}st+=1}return lt}function d(dt){for(var nt="",it=0;it<dt.length;++it){var st=dt[it];st<=65535?nt+=String.fromCharCode(st):(st-=65536,nt+=String.fromCharCode((st>>10)+55296,(st&1023)+56320))}return nt}var h=-1;function g(dt){this.tokens=[].slice.call(dt)}g.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():h},prepend:function(dt){if(Array.isArray(dt))for(var nt=dt;nt.length;)this.tokens.unshift(nt.pop());else this.tokens.unshift(dt)},push:function(dt){if(Array.isArray(dt))for(var nt=dt;nt.length;)this.tokens.push(nt.shift());else this.tokens.push(dt)}};var b=-1;function j(dt,nt){if(dt)throw TypeError("Decoder error");return nt||65533}var _="utf-8";function $(dt,nt){if(!(this instanceof $))return new $(dt,nt);if(dt=dt!==void 0?String(dt).toLowerCase():_,dt!==_)throw new Error("Encoding not supported. Only utf-8 is supported");nt=a(nt),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!nt.fatal,this._ignoreBOM=!!nt.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}$.prototype={decode:function(nt,it){var st;typeof nt=="object"&&nt instanceof ArrayBuffer?st=new Uint8Array(nt):typeof nt=="object"&&"buffer"in nt&&nt.buffer instanceof ArrayBuffer?st=new Uint8Array(nt.buffer,nt.byteOffset,nt.byteLength):st=new Uint8Array(0),it=a(it),this._streaming||(this._decoder=new et({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!it.stream;for(var lt=new g(st),ht=[],Tt;!lt.endOfStream()&&(Tt=this._decoder.handler(lt,lt.read()),Tt!==b);)Tt!==null&&(Array.isArray(Tt)?ht.push.apply(ht,Tt):ht.push(Tt));if(!this._streaming){do{if(Tt=this._decoder.handler(lt,lt.read()),Tt===b)break;Tt!==null&&(Array.isArray(Tt)?ht.push.apply(ht,Tt):ht.push(Tt))}while(!lt.endOfStream());this._decoder=null}return ht.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(ht[0]===65279?(this._BOMseen=!0,ht.shift()):this._BOMseen=!0),d(ht)}};function _e(dt,nt){if(!(this instanceof _e))return new _e(dt,nt);if(dt=dt!==void 0?String(dt).toLowerCase():_,dt!==_)throw new Error("Encoding not supported. Only utf-8 is supported");nt=a(nt),this._streaming=!1,this._encoder=null,this._options={fatal:!!nt.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}_e.prototype={encode:function(nt,it){nt=nt?String(nt):"",it=a(it),this._streaming||(this._encoder=new ct(this._options)),this._streaming=!!it.stream;for(var st=[],lt=new g(c(nt)),ht;!lt.endOfStream()&&(ht=this._encoder.handler(lt,lt.read()),ht!==b);)Array.isArray(ht)?st.push.apply(st,ht):st.push(ht);if(!this._streaming){for(;ht=this._encoder.handler(lt,lt.read()),ht!==b;)Array.isArray(ht)?st.push.apply(st,ht):st.push(ht);this._encoder=null}return new Uint8Array(st)}};function et(dt){var nt=dt.fatal,it=0,st=0,lt=0,ht=128,Tt=191;this.handler=function(Rt,vt){if(vt===h&&lt!==0)return lt=0,j(nt);if(vt===h)return b;if(lt===0){if(o(vt,0,127))return vt;if(o(vt,194,223))lt=1,it=vt-192;else if(o(vt,224,239))vt===224&&(ht=160),vt===237&&(Tt=159),lt=2,it=vt-224;else if(o(vt,240,244))vt===240&&(ht=144),vt===244&&(Tt=143),lt=3,it=vt-240;else return j(nt);return it=it<<6*lt,null}if(!o(vt,ht,Tt))return it=lt=st=0,ht=128,Tt=191,Rt.prepend(vt),j(nt);if(ht=128,Tt=191,st+=1,it+=vt-128<<6*(lt-st),st!==lt)return null;var Et=it;return it=lt=st=0,Et}}function ct(dt){dt.fatal,this.handler=function(nt,it){if(it===h)return b;if(o(it,0,127))return it;var st,lt;o(it,128,2047)?(st=1,lt=192):o(it,2048,65535)?(st=2,lt=224):o(it,65536,1114111)&&(st=3,lt=240);for(var ht=[(it>>6*st)+lt];st>0;){var Tt=it>>6*(st-1);ht.push(128|Tt&63),st-=1}return ht}}},function(e,s,i){s.__esModule=!0,s.default=void 0;var o=c(i(76));function a(g){if(typeof WeakMap!="function")return null;var b=new WeakMap,j=new WeakMap;return(a=function($){return $?j:b})(g)}function c(g,b){if(!b&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var j=a(b);if(j&&j.has(g))return j.get(g);var _={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _e in g)if(_e!=="default"&&Object.prototype.hasOwnProperty.call(g,_e)){var et=$?Object.getOwnPropertyDescriptor(g,_e):null;et&&(et.get||et.set)?Object.defineProperty(_,_e,et):_[_e]=g[_e]}return _.default=g,j&&j.set(g,_),_}const d=i(7);let h=function(b){if(this.code=void 0,this.message=void 0,this.name=void 0,this.code=o.codes.CLOSE_FALLBACK_CODE,Object.values(o.codes).includes(b))switch(this.code=b,this.code){case o.codes.CLOSE_GOING_AWAY:case o.codes.CLOSE_PROTOCOL_ERROR:case o.codes.CLOSE_UNSUPPORTED:case o.codes.CLOSE_NO_STATUS:case o.codes.CLOSE_ABNORMAL:case o.codes.CLOSE_INCONSISTENT_DATA:case o.codes.CLOSE_POLICY_VIOLATION:case o.codes.CLOSE_TOO_LARGE:case o.codes.CLOSE_UNEXPECTED_CONDITION:case o.codes.CLOSE_CONNECTIVITY_LOSS:case o.codes.CLOSE_CONNECT_EXCEPTION:case o.codes.CLOSE_TIMEOUT:this.name=d.DISCONNECTED,this.message="Action failed due to session disconnection.";return}this.message=o.messages[this.code]||"No message available from code."};s.default=h},function(e,s,i){var o=i(3);s.__esModule=!0,s.default=void 0;var a=o(i(748)),c=(()=>(typeof window!==void 0?window:commonjsGlobal).WebSocket?(typeof window!==void 0?window:commonjsGlobal).WebSocket:a.default)();s.default=c},function(e,s,i){e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,s,i){const o=i(750);e.exports=function(c){const d=o(c.data);return d.transactionId=c.transactionId,d.fromAddress=c.headers["X-TB-FROM-ADDRESS"],d}},function(e,s,i){e.exports=function(a){if(a.length===0)return{};const c=JSON.parse(a),d=c.uri.substr(1).split("/");d.shift(),d[d.length-1]===""&&d.pop(),c.params={};for(let h=0,g=d.length;h<g-1;h+=2)c.params[d[h]]=d[h+1];return d.length%2===0?d[d.length-2]==="channel"&&d.length>6?c.resource=`${d[d.length-4]}_${d[d.length-2]}`:c.resource=d[d.length-2]:d[d.length-1]==="channel"&&d.length>5?c.resource=`${d[d.length-3]}_${d[d.length-1]}`:c.resource=d[d.length-1],c.signature=`${c.resource}#${c.method}`,c}},function(e,s,i){const o=i(2),a=o.name,c=i(51).once;e.exports=()=>c()&&["Chrome","Firefox","Safari"].indexOf(a)>-1},function(e,s,i){const o=i(2),a=i(51).once;e.exports=()=>a()&&(o.name==="Chrome"||o.name==="Firefox"||o.name==="Node"||o.name==="Safari"||o.name==="Edge")},function(e,s,i){const o=i(51).once;e.exports=()=>o()},function(e,s,i){e.exports="DTLS_SRTP"},function(e,s,i){e.exports=function(a){let c=a.supportsWebRTC;return{supportsWebRTC:c==="true"||c===!0}}},function(e,s,i){e.exports=function(a,c){this.code=a,this.message=c,this.reason=c}},function(e,s,i){const o=function(c){const d=[];this.enqueue=function(){d.push(Array.prototype.slice.call(arguments))},this.triggerAll=function(){let g;for(;g=d.shift();)c.trigger(...g)}};e.exports=o},function(e,s,i){const o=i(206),a=i(239),c=i(57),d=i(9),h=i(142),g=i(10),b=i(759),j=i(760),_=i(290).default,$={EMPTY_RESPONSE:"Response body was empty, probably due to connectivity loss",BADLY_FORMED:"Unknown error: JSON response was badly formed",NO_ERROR:"No error message",UNEXPECTED_SERVER_RESPONSE:ct=>`Unexpected server response (${ct}). Try this operation again later.`},_e=[0,600,1200];function et(ct){let dt=ct===void 0?{}:ct,nt=dt.axios,it=nt===void 0?o:nt,st=dt.retryDelays,lt=st===void 0?_e:st;function ht(Rt){let vt=Rt.anvilUrl,Et=Rt.sessionId,bt=Rt.token,Ct=Rt.clientVersion,Ut=Rt.connectionId;const Xt=a.parse(vt,!0),Nt=a.format({protocol:Xt.protocol,auth:Xt.auth,host:Xt.host,pathname:a.resolve((Xt.pathname||"").replace(/\/?$/,"/"),`session/${Et}`),query:Object.assign({},Xt.query,{extended:!0})});return it.get(Nt,{validateStatus:Jt=>Jt>=200&&Jt<300,headers:{"X-OPENTOK-AUTH":bt,"X-TB-VERSION":1,"X-TB-CLIENT-VERSION":Ct,"X-TB-CONNECTIONID":Ut,Accept:"application/json"}}).catch(Jt=>{if(Jt.response){const zt=new Error($.UNEXPECTED_SERVER_RESPONSE(`${Jt.response.statusCode}${Jt.response.status?` ${Jt.response.status}`:""}`));throw zt.code=g.ANVIL_INVALID_HTTP_STATUS,zt.name=b(zt.code),zt}else if(Jt.request){const zt=new Error($.CONNECT_FAILED);throw zt.code=g.ANVIL_CONNECT_FAILED,zt.name=b(zt.code),zt}else{const zt=g.ANVIL_UNKNOWN_HTTP_ERROR,nn=b(Jt.code);throw d(Jt,{code:zt,name:nn}),Jt}}).then(Jt=>{let zt=Jt.data;if(typeof zt=="string"){if(zt.length>0)try{JSON.parse(zt)}catch(qt){throw qt.message=$.UNEXPECTED_SERVER_RESPONSE(qt.toString()),qt.code=g.ANVIL_XDOMAIN_OR_PARSING_ERROR,qt.name=b(qt.code),qt}const sn=new Error(zt.length===0?$.EMPTY_RESPONSE:$.BADLY_FORMED);throw sn.code=zt.length===0?g.ANVIL_EMPTY_RESPONSE_BODY:g.ANVIL_BADLY_FORMED_RESPONSE,sn.name=b(sn.code),sn}if(zt===null||zt.length===0){const sn=new Error($.EMPTY_RESPONSE);throw sn.code=g.ANVIL_EMPTY_RESPONSE_BODY,sn.name=b(sn.code),sn}const nn=zt.filter(sn=>sn.error!=null),Bt=nn[0];if(Bt){const sn=j(c(Bt,"error.code","500"));c(Bt,"error.errorMessage.message")==="Invalid token format"&&(Bt.error.errorMessage.message+=` Token: ${bt}`);const qt=new Error(c(Bt,"error.errorMessage.message",sn===void 0?`Unknown error: ${Bt.error.code}`:$.NO_ERROR));throw qt.code=sn||g.ANVIL_UNEXPECTED_ERROR_CODE,qt.name=b(qt.code),qt}return new h(zt[0])})}return _(ht,(Rt,vt)=>Rt.code&&Rt.code>=3e3&&Rt.code<=3007&&lt[vt])}e.exports=et},function(e,s,i){const o=i(10),a=i(7),c={[o.ANVIL_BADLY_FORMED_RESPONSE]:a.BADLY_FORMED_RESPONSE,[o.ANVIL_INVALID_HTTP_STATUS]:a.INVALID_HTTP_STATUS,[o.ANVIL_XDOMAIN_OR_PARSING_ERROR]:a.XDOMAIN_OR_PARSING_ERROR,[o.ANVIL_UNKNOWN_HTTP_ERROR]:a.UNKNOWN_HTTP_ERROR,[o.ANVIL_UNEXPECTED_ERROR_CODE]:a.UNEXPECTED_ERROR_CODE,[o.ANVIL_EMPTY_RESPONSE_BODY]:a.EMPTY_RESPONSE_BODY,[o.ANVIL_CONNECT_FAILED]:a.CONNECT_FAILED,[o.AUTHENTICATION_ERROR]:a.AUTHENTICATION_ERROR,[o.INVALID_SESSION_ID]:a.INVALID_SESSION_ID,[o.TERMS_OF_SERVICE_FAILURE]:a.TERMS_OF_SERVICE_FAILURE,[o.UNEXPECTED_SERVER_RESPONSE]:a.UNEXPECTED_SERVER_RESPONSE};function d(h){return c[h]}e.exports=d},function(e,s,i){const o=i(10),a={400:o.INVALID_SESSION_ID,403:o.AUTHENTICATION_ERROR,404:o.INVALID_SESSION_ID,409:o.TERMS_OF_SERVICE_FAILURE,500:o.UNEXPECTED_SERVER_RESPONSE};function c(d){return a[d]}e.exports=c},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5)),d=o(i(48));const h=i(18),g=i(762);let b=function(j){(0,d.default)(_,j);function _(_e){var et;return _e===void 0&&(_e={}),et=j.call(this)||this,et._generateKey=_e.generateKey||g,et}var $=_.prototype;return $.set=function(){var _e=(0,c.default)(a.default.mark(function ct(dt,nt){var it;return a.default.wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return this.keyPromise=this._generateKey(dt,nt),lt.next=3,this.keyPromise;case 3:it=lt.sent,this.emit("keyChanged",it);case 5:case"end":return lt.stop()}},ct,this)}));function et(ct,dt){return _e.apply(this,arguments)}return et}(),$.get=function(){var _e=(0,c.default)(a.default.mark(function ct(){var dt;return a.default.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,this.keyPromise;case 2:return dt=it.sent,it.abrupt("return",dt);case 4:case"end":return it.stop()}},ct,this)}));function et(){return _e.apply(this,arguments)}return et}(),$.clear=function(){this.keyPromise=void 0},_}(h);e.exports=b},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=function(){var h=(0,c.default)(a.default.mark(function g(b,j){var _,$,_e,et;return a.default.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return _=!1,$=!0,_e=new TextEncoder,dt.next=5,window.crypto.subtle.importKey("raw",_e.encode(j),{name:"PBKDF2"},_,["deriveBits","deriveKey"]);case 5:return et=dt.sent,dt.abrupt("return",window.crypto.subtle.deriveKey({name:"PBKDF2",salt:_e.encode(b),iterations:1e5,hash:"SHA-256"},et,{name:"AES-CTR",length:256},$,["encrypt","decrypt"]));case 7:case"end":return dt.stop()}},g)}));return function(b,j){return h.apply(this,arguments)}}();e.exports=d},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=i(2);let h={SFrame:{}};d.isNode||(h=i(764));const g=h,b=g.SFrame,j=$=>b.createClient($,{skipVp8PayloadHeader:!0});let _=function(){function $(){this._clientStore={}}var _e=$.prototype;return _e.createSender=function(){var et=(0,c.default)(a.default.mark(function dt(nt){return a.default.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(nt===void 0&&(nt=0),!this.getSender(nt)){st.next=3;break}return st.abrupt("return",this.getSender(nt));case 3:return this._clientStore[nt]||(this._clientStore[nt]={}),st.next=6,j(nt);case 6:return this._clientStore[nt].sender=st.sent,st.abrupt("return",this.getSender(nt));case 8:case"end":return st.stop()}},dt,this)}));function ct(dt){return et.apply(this,arguments)}return ct}(),_e.createReceiver=function(){var et=(0,c.default)(a.default.mark(function dt(nt){return a.default.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(!this.getReceiver(nt)){st.next=2;break}return st.abrupt("return",this.getReceiver(nt));case 2:return this._clientStore[nt]||(this._clientStore[nt]={}),st.next=5,j(nt);case 5:return this._clientStore[nt].receiver=st.sent,st.abrupt("return",this.getReceiver(nt));case 7:case"end":return st.stop()}},dt,this)}));function ct(dt){return et.apply(this,arguments)}return ct}(),_e.getSender=function(ct){var dt;return(dt=this._clientStore[ct])==null?void 0:dt.sender},_e.getReceiver=function(ct){var dt;return(dt=this._clientStore[ct])==null?void 0:dt.receiver},_e.deleteReceiver=function(ct){this.getReceiver(ct)&&(this._clientStore[ct].receiver.deleteReceiver(ct),delete this._clientStore[ct].receiver)},_e.deleteSender=function(ct){var dt;(dt=this._clientStore[ct])==null||delete dt.sender},$}();e.exports=_},function(e,s,i){(function(o){(function(c,d){e.exports=d()})(this,function(){return function(a){var c={};function d(h){if(c[h])return c[h].exports;var g=c[h]={i:h,l:!1,exports:{}};return a[h].call(g.exports,g,g.exports,d),g.l=!0,g.exports}return d.m=a,d.c=c,d.d=function(h,g,b){d.o(h,g)||Object.defineProperty(h,g,{enumerable:!0,get:b})},d.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},d.t=function(h,g){if(g&1&&(h=d(h)),g&8||g&4&&typeof h=="object"&&h&&h.__esModule)return h;var b=Object.create(null);if(d.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:h}),g&2&&typeof h!="string")for(var j in h)d.d(b,j,function(_){return h[_]}.bind(null,j));return b},d.n=function(h){var g=h&&h.__esModule?function(){return h.default}:function(){return h};return d.d(g,"a",g),g},d.o=function(h,g){return Object.prototype.hasOwnProperty.call(h,g)},d.p="",d(d.s="./index.js")}({"./Client.js":function(a,c,d){d.r(c),d.d(c,"SFrame",function(){return g});var h=d("./Worker.js");const g={createClient:async function(_,$){const _e=new j;return await _e.init(_,$),_e}};async function b(_){return _ instanceof CryptoKey&&_.type=="private"?await crypto.subtle.exportKey("pkcs8",_):_ instanceof CryptoKey?await crypto.subtle.exportKey("raw",_):_ instanceof Uint8Array?_.buffer.slice(0):_.slice(0)}class j extends EventTarget{constructor(){super(),this.worker=new h.default,this.transId=1,this.transactions=new Map,this.worker.addEventListener("message",async $=>{const _e=$.data;if(_e.transId){const et=this.transactions.get(_e.transId);this.transactions.delete(_e.transId),_e.error?et.reject(new Error(_e.error)):et.resolve(_e.result)}else if(_e.event){const et=new Event(_e.event.name);et.id=_e.event.data.id,et.senderId=_e.event.data.senderId,this.dispatchEvent(et)}}),this.postMessage=($,_e,et)=>new o((ct,dt)=>{const nt=this.transId++;this.worker.postMessage({transId:nt,cmd:$,args:_e},et),this.transactions.set(nt,{resolve:ct,reject:dt})})}async init($,_e){return this.postMessage("init",{senderId:$,config:_e})}async setSenderEncryptionKey($){const _e=await b($);return this.postMessage("setSenderEncryptionKey",[_e],[_e])}async ratchetSenderEncryptionKey(){return this.postMessage("ratchetSenderEncryptionKey")}async setSenderSigningKey($){const _e=await b($);return this.postMessage("setSenderSigningKey",[_e])}async addReceiver($){return this.postMessage("addReceiver",[$])}async setReceiverEncryptionKey($,_e){const et=await b(_e);return this.postMessage("setReceiverEncryptionKey",[$,et],[et])}async setReceiverVerifyKey($,_e){const et=await b(_e);return this.postMessage("setReceiverVerifyKey",[$,et],[et])}deleteReceiver($){return this.postMessage("deleteReceiver",[$])}async encrypt($,_e){const et=_e.track.kind,{readable:ct,writable:dt}=_e.createEncodedStreams?_e.createEncodedStreams():_e.createEncodedVideoStreams?_e.createEncodedVideoStreams():_e.createEncodedAudioStreams();return this.postMessage("encrypt",{id:$,kind:et,readableStream:ct,writableStream:dt},[ct,dt])}async decrypt($,_e){const et=_e.track.kind,{readable:ct,writable:dt}=_e.createEncodedStreams?_e.createEncodedStreams():_e.createEncodedVideoStreams?_e.createEncodedVideoStreams():_e.createEncodedAudioStreams();return this.postMessage("decrypt",{id:$,kind:et,readableStream:ct,writableStream:dt},[ct,dt])}close(){this.worker.terminate();for(let $ of this.transactions.values())$.reject(new Error("Client closed"));this.transactions.clear()}}},"./Worker.js":function(a,c,d){d.r(c),d.d(c,"default",function(){return b});var h=d("./node_modules/worker-loader/dist/runtime/inline.js"),g=d.n(h);function b(){return g()(`/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./Worker.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./Worker.js":
/*!*******************!*\\
  !*** ./Worker.js ***!
  \\*******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/debounce */ "./node_modules/lodash/debounce.js");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _lib_Context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/Context.js */ "./lib/Context.js");
/* harmony import */ var _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/VP8PayloadHeader.js */ "./lib/VP8PayloadHeader.js");
/* harmony import */ var _lib_Utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/Utils.js */ "./lib/Utils.js");
/* harmony import */ var _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/TaskQueue.js */ "./lib/TaskQueue.js");






const postDecryptStatusMessage = lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default()((message) => {
	postMessage(message)
},  1000, { leading: false, trailing: true });

let context; 

onmessage = async (event) => {
	//Get data
	const {transId,cmd,args} = event.data;
	
	try {
		let result = true;
		
		//Depending on the cmd
		switch(event.data.cmd)
		{
			case "init":
			{
				//Get info
				const {senderId, config} = args;
				//Crate context
				context = new _lib_Context_js__WEBPACK_IMPORTED_MODULE_1__["Context"](senderId, config);
				break;
			}
			case "encrypt":
			{
				//The recrypt queue
				const tasks = new _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__["TaskQueue"]();
				//Get event data
				const{id, kind, readableStream, writableStream} = args;
				//Create transform stream foo encrypting
				const transformStream = new TransformStream({
					transform: async (chunk, controller)=>{
						//Nothing in clear
						let skip = 0;
						//Check if it is video and we are skipping vp8 payload header
						if (kind=="video" && context.isSkippingVp8PayloadHeader())
						{
							//Get VP8 header
							const vp8 = _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__["VP8PayloadHeader"].parse(chunk.data);
							//Skip it
							skip = vp8.byteLength;
						}
						//Enqueue task
						tasks.enqueue (
							context.encrypt(kind, id, chunk.data, skip),
							(encrypted) => {
								//Set back encrypted payload
								chunk.data = encrypted.buffer;
								//write back
								controller.enqueue(chunk);
							},
							(error)=>{
								//TODO: handle errors
							}
						);
					}
				});
				//Encrypt
				readableStream
					.pipeThrough(transformStream)
					.pipeTo(writableStream);
				break;
			}
			case "decrypt":
			{
				//The recrypt queue
				const tasks = new _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__["TaskQueue"]();
				//Last reveiced senderId
				let senderId = -1;
				//Get event data
				const{id, kind, readableStream, writableStream} = args;
				//Create transform stream for encrypting
				const transformStream = new TransformStream({
					transform: async (chunk, controller)=>{
						//Nothing in clear
						let skip = 0;
						//Check if it is video and we are skipping vp8 payload header
						if (kind=="video" && context.isSkippingVp8PayloadHeader())
						{
							//Get VP8 header
							const vp8 = _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__["VP8PayloadHeader"].parse(chunk.data);
							//Skip it
							skip = vp8.byteLength;
						}

						//Enqueue task
						tasks.enqueue(
							context.decrypt(kind, id, chunk.data, skip),
							(decrypted) => {
								//Set back decrypted payload
								chunk.data = decrypted.buffer;
								//write back
								controller.enqueue(chunk);
								//If it is a sender
								if (decrypted.senderId!=senderId)
								{
									//Store it
									senderId = decrypted.senderId;
									//Launch event
									postMessage ({event: {
										name	: "authenticated",
										data	: {
											id	 : id,
											senderId : senderId
										}
									}});
								}
								if (decrypted.decryptionRestored) {
									postDecryptStatusMessage({
										event: {
											name: "decryptionRestored",
											data: {
												id,
												senderId,
											},
										},
									});
								}
							},
							(error) => {
								if (error.message === 'decryptFailed') {
									postDecryptStatusMessage({
										event: {
											name: "decryptFailed",
											data: {
												id,
												senderId,
											},
										},
								});
								}
							}
						);
					}
				});
				//Decrypt
				readableStream
					.pipeThrough(transformStream)
					.pipeTo(writableStream);
				break;
			}
			default:
				//Excute "cmd" method on context
				result = await context[cmd](...args || []);
		}
		//Send result back
		postMessage ({transId,result});
	} catch (error) {
		console.error(error);
		//Send error back
		postMessage({transId,error});
	}
};


/***/ }),

/***/ "./lib/AesCm128HmacSha256EncryptionKey.js":
/*!************************************************!*\\
  !*** ./lib/AesCm128HmacSha256EncryptionKey.js ***!
  \\************************************************/
/*! exports provided: AesCm128HmacSha256EncryptionKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AesCm128HmacSha256EncryptionKey", function() { return AesCm128HmacSha256EncryptionKey; });
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils.js */ "./lib/Utils.js");
/* harmony import */ var _Salts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Salts.js */ "./lib/Salts.js");
/* harmony import */ var _IV_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IV.js */ "./lib/IV.js");




const ratchetKey = (key) => 
	crypto.subtle.deriveBits(
		{
			name : "HKDF",
			hash : "SHA-256",
			salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].RatchetKey,
			info : new ArrayBuffer()
		},
		key,
		256
	);

class AesCm128HmacSha256EncryptionKey 
{
	constructor(){
		this.ratchets = [];
	}

	async setKey(key)
	{
		if (key instanceof CryptoKey)
		{
			//Check private key algorithm
			if (key.algorithm.name!="HKDF")
				//Error
				throw new Error("Invalid key");
		} else {
			//Import key
			key = await crypto.subtle.importKey(
				"raw",
				key,
				"HKDF",
				false,
				["deriveBits", "deriveKey"]
			);
		}
		this.key = key;
		
		//Get salt key
		this.saltKey = new Uint8Array(await crypto.subtle.deriveBits(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].SaltKey,
				info : new ArrayBuffer()
			},
			key,
			128
		));
	
		//Get encryption key
		this.encryptionKey = await crypto.subtle.deriveKey(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].EncryptionKey,
				info : new ArrayBuffer()
			},
			key,
			{
				name : "AES-CTR",
				length : 128
			},
			false,
			["encrypt","decrypt"]
		);
	
		//Get authentication key
		this.authKey = await crypto.subtle.deriveKey(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].AuthenticationKey,
				info : new ArrayBuffer()
			},
			key,
			{
				name : "HMAC",
				hash : "SHA-256",
				length : 256
			},
			false,
			["sign","verify"]
		);
	}

	
	async encrypt(type,header,payload,extraBytes,skip)
	{
		//Encure int
		skip = skip ? skip : 0;
		
		//Create IV
		const iv = _IV_js__WEBPACK_IMPORTED_MODULE_2__["IV"].generate(header.keyId, header.counter, this.saltKey);
		
		//Encrypt
		const encrypted = await crypto.subtle.encrypt(
			{
				name	: "AES-CTR",
				counter : iv,
				length  : 128
			},
			this.encryptionKey,
			payload
		);
	
		//Get auth tag length from media type
		const authTagLength = AesCm128HmacSha256EncryptionKey.getAuthTagLen(type);
		
		//Create encrypted frame
		const encryptedFrame = new Uint8Array(header.byteLength + payload.byteLength + authTagLength + extraBytes + skip);
		
		//Set header and encrypted payolad
		encryptedFrame.set(header, skip);
		encryptedFrame.set(new Uint8Array(encrypted), skip + header.length);
		
		//Authenticate
		const signature = new Uint8Array(await crypto.subtle.sign(
			"HMAC",
			this.authKey, 
			encryptedFrame.subarray(skip, skip + header.byteLength + encrypted.byteLength)
		));
	
		//Truncate
		const authTag = signature.subarray(0, authTagLength);
	
		//Append authentication tag
		encryptedFrame.set(authTag, skip + encrypted.byteLength + header.byteLength );
		
		//Done
		return [encryptedFrame,authTag];
		
	}
	
	async decrypt(type, header, encryptedFrame, extrabytes, skip)
	{
		//Encure int
		skip = skip ? skip : 0;
		
		//Create IV
		const iv = _IV_js__WEBPACK_IMPORTED_MODULE_2__["IV"].generate(header.keyId, header.counter, this.saltKey);
		
		//Get auth tag length from media type
		const authTagLength = AesCm128HmacSha256EncryptionKey.getAuthTagLen(type);
		
		//Get encrypted frame length (without extra bytes from signature)
		const frameLength = encryptedFrame.byteLength - extrabytes - skip;
		
		//Get authentication tag
		const authTag = encryptedFrame.subarray(skip + frameLength - authTagLength, skip + frameLength);
		
		//Get encrypted payload
		const encrypted = encryptedFrame.subarray(skip + header.byteLength, skip + frameLength - authTagLength);
		
		//Calculate signature
		const signature = new Uint8Array(await crypto.subtle.sign(
			"HMAC",
			this.authKey, 
			encryptedFrame.subarray(skip, skip + header.byteLength + encrypted.byteLength)
		));
	
		//Authenticate authTag
		let authenticated = true;
		//Avoid timimg attacks by iterating over all bytes
		for (let i=0;i<authTagLength;++i)
			//check signature
			authenticated &= authTag[i]===signature[i];
		
		//If not all where equal
		if (!authenticated)
			//Authentication error
			throw new Error("Authentication error");
		
		//Decrypt
		const payload = new Uint8Array (await crypto.subtle.decrypt(
			{
				name	: "AES-CTR",
				counter : iv,
				length  : 128
			},
			this.encryptionKey,
			encrypted
		));
		
		//Done
		return [payload, authTag];
	}
	
	async ratchet(index)
	{
		// return stored key if exists
		if (this.ratchets[index]) {
			return this.ratchets[index];
		}
		
		//Create new key
		const key = new AesCm128HmacSha256EncryptionKey();

		// Get previous ratchet
		const previousRatchetKey = index === 0 ? this.key : this.ratchets[index - 1].key;
		
		//Set ratchet key
		await key.setKey(await ratchetKey(previousRatchetKey));
		
		this.ratchets[index] = key;
		//Done
		return key;
	}
	
	static getAuthTagLen(type)
	{
		return type.toLowerCase()==="video" ? 10 : 4;
	};
	
	static async create(raw) 
	{
		//Create new key
		const key = new AesCm128HmacSha256EncryptionKey();
		//Set raw key
		await key.setKey(raw);
		//Done
		return key;
	}
};



/***/ }),

/***/ "./lib/Context.js":
/*!************************!*\\
  !*** ./lib/Context.js ***!
  \\************************/
/*! exports provided: Context */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return Context; });
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _Sender_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sender.js */ "./lib/Sender.js");
/* harmony import */ var _Receiver_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Receiver.js */ "./lib/Receiver.js");




class Context
{
	
	constructor(senderId, config)
	{
		//Store config
		this.config = Object.assign({}, config);
		//Only one sender per context
		this.sender = new _Sender_js__WEBPACK_IMPORTED_MODULE_1__["Sender"](senderId);
		
		//The map of known remote senders
		this.receivers = new Map();
	}
	
	isSkippingVp8PayloadHeader()
	{
		return !!this.config.skipVp8PayloadHeader;
	}
		
	async setSenderEncryptionKey(key)
	{
		//Set it
		return this.sender.setEncryptionKey(key);
	}
	
	async ratchetSenderEncryptionKey()
	{
		//Set it
		return this.sender.ratchetEncryptionKey();
	}
	
	async setSenderSigningKey(key)
	{
		//Set it
		return this.sender.setSigningKey(key);
	}
	
	addReceiver(receiverkKeyId)
	{
		//Check we don't have a receiver already for that id
		if(this.receivers.has(receiverkKeyId))
			//Error
			throw new Error("There was already a receiver for keyId "+receiverkKeyId);
		//Add new
		this.receivers.set(receiverkKeyId, new _Receiver_js__WEBPACK_IMPORTED_MODULE_2__["Receiver"](receiverkKeyId));
	}
	
	async setReceiverEncryptionKey(receiverkKeyId, key)
	{
		//Get receiver for the sender
		const receiver = this.receivers.get(receiverkKeyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId "+receiverkKeyId);
		
		//Rachet
		return receiver.setEncryptionKey(key);
	}
	
	async setReceiverVerifyKey(receiverkKeyId,key)
	{
		//Get receiver for the sender
		const receiver = this.receivers.get(receiverkKeyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId "+receiverkKeyId);
		
		//Rachet
		return receiver.setVerifyKey(key);
	}
	
	deleteReceiver(receiverkKeyId)
	{
		//Delete receiver
		return this.receivers.delete(receiverkKeyId);
	}
	
	async encrypt(type, ssrcId, frame, skip)
	{
		//Encrypt it
		return this.sender.encrypt(type, ssrcId, frame, skip);
	}
	
	async decrypt(type, ssrcId, encryptedFrame, skip)
	{
		//convert if needed
		if (!(encryptedFrame instanceof Uint8Array))
			encryptedFrame = new Uint8Array (encryptedFrame);
		
		//Parse encrypted payload
		const header = _Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].parse(encryptedFrame.subarray(skip));
		
		//Get receiver for the sender
		const receiver = this.receivers.get(header.keyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId " + header.keyId);
		
		//Decrypt it
		return receiver.decrypt(type, ssrcId, header, encryptedFrame, skip);
	}
	
};


/***/ }),

/***/ "./lib/EcdsaSignKey.js":
/*!*****************************!*\\
  !*** ./lib/EcdsaSignKey.js ***!
  \\*****************************/
/*! exports provided: EcdsaSignKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EcdsaSignKey", function() { return EcdsaSignKey; });
//TODO: Update to Ed25519 when available
// https://chromestatus.com/features/4913922408710144
// https://chromium.googlesource.com/chromium/src/+log/master/components/webcrypto/algorithms/ed25519.cc

class EcdsaSignKey
{
	
	async setKey(privKey)
	{
		//If it is a crypto key already
		if (privKey instanceof CryptoKey)
		{
			//Check private key algorithm
			if (privKey.algorithm.name!="ECDSA" || !privKey.usages.includes("sign"))
				//Error
				throw new Error("Invalid key");
			//Set it
			this.privKey = privKey;
		} else {
			//Import it
			this.privKey = await crypto.subtle.importKey(
				"pkcs8",
				privKey,
				{
					name		: "ECDSA",
					namedCurve	: "P-521"
				},
				false,
				["sign"]
			);
		}
	}
	
	async sign(authTags)
	{
		//Verify
		return new Uint8Array(await crypto.subtle.sign(
			{
			  name: "ECDSA",
			  hash: "SHA-512"
			},
			this.privKey,
			authTags
		));
	}
	
	static getSignatureLen()
	{
		return 64;
	}
	
	static async create(privKey)
	{
		//Craete key
		const key = new EcdsaSignKey();
		//Set key
		await key.setKey(privKey);
		//Done
		return key;
		
	}
};


/***/ }),

/***/ "./lib/EcdsaVerifyKey.js":
/*!*******************************!*\\
  !*** ./lib/EcdsaVerifyKey.js ***!
  \\*******************************/
/*! exports provided: EcdsaVerifyKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EcdsaVerifyKey", function() { return EcdsaVerifyKey; });

class EcdsaVerifyKey
{
	async setKey(pubKey)
	{
		//If it is a crypto key already
		if (pubKey instanceof CryptoKey)
		{
			//Check 
			if (pubKey.algorithm.name!="ECDSA" || !pubKey.usages.includes("verify"))
				//Error
				throw new Error("Invalid key");
			//Set it
			this.pubKey = pubKey;
		} else {
			//Import it
			this.pubKey = await crypto.subtle.importKey(
				"raw",
				pubKey,
				{
					name		: "ECDSA",
					namedCurve	: "P-521"
				},
				false,
				["verify"]
			);
		}
	}
	
	async verify(signed,signature)
	{
		//Verify
		return await window.crypto.subtle.verify(
			{
				name: "ECDSA",
				hash: "SHA-512"
			},
			this.pubKey,
			signature,
			signed
		);
	}
	
	static getSignatureLen()
	{
		return 64;
	}
	
	static async create(pubKey)
	{
		//Craete key
		const key = new EcdsaVerifyKey();
		//Set key
		await key.setKey(pubKey);
		//Done
		return key;
		
	}
};


/***/ }),

/***/ "./lib/Header.js":
/*!***********************!*\\
  !*** ./lib/Header.js ***!
  \\***********************/
/*! exports provided: Header */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Header", function() { return Header; });
/*
	0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+
	|S|LEN  |X|  K  |
	+-+-+-+-+-+-+-+-+
	SFrame header metadata

	Signature flag (S): 1 bit This field indicates the payload contains a signature of set. Counter Length (LEN): 3 bits This field indicates the length of the CTR fields in bytes. Extended Key Id Flag (X): 1 bit
	Indicates if the key field contains the key id or the key length. Key or Key Length: 3 bits This field contains the key id (KID) if the X flag is set to 0, or the key length (KLEN) if set to 1.

	If X flag is 0 then the KID is in the range of 0-7 and the frame counter (CTR) is found in the next LEN bytes:

	 0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+---------------------------------+
	|S|LEN  |0| KID |    CTR... (length=LEN)          |
	+-+-+-+-+-+-+-+-+---------------------------------+
	Key id (KID): 3 bits The key id (0-7). Frame counter (CTR): (Variable length) Frame counter value up to 8 bytes long.

	if X flag is 1 then KLEN is the length of the key (KID), that is found after the SFrame header metadata byte. After the key id (KID), the frame counter (CTR) will be found in the next LEN bytes:

	 0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+---------------------------+---------------------------+
	|S|LEN  |1|KLEN |   KID... (length=KLEN)    |    CTR... (length=LEN)    |
	+-+-+-+-+-+-+-+-+---------------------------+---------------------------+
*/
const Header = {
	
	parse : function(buffer) 
	{
		//Create uint view
		const view = new Uint8Array(buffer);
		
		//Get metadata
		const metadata = view[0];
		
		//Get values
		const s		= !!(metadata & 0x80);
		const len	= (metadata >> 4) & 0x07;
		const x		= !!(metadata & 0x08);
		const k		= metadata & 0x07;
		
		//Get key id
		let keyId = 0;
		//Check if it is the extented key format
		if (x)
		{
			//Read length
			for (let i=0;i<k;i++)
				keyId = (keyId * 256) + view[i+1];
		} else {
			//Short version
			keyId = k;
		}
		
		//Get ctr
		const ini = x ? k + 1 : 1;
		let counter = 0;
		//Read length
		for (let i=0;i<len;i++)
			counter = (counter * 256) + view[ini+i];
		
		//Get header buffer view
		const header = view.subarray(0, x ? k + len + 1 : len + 1);
		
		//Add parsed atributes
		header.signature   = s;
		header.keyId	   = keyId;
		header.counter	   = counter;
		
		//Done
		return header; 
	},
	generate: function(signature,keyId,counter)
	{
		//Check keyId
		Header.checkKeyId(keyId);
		
		//Calcultate variavle length
		const varlen = (x) => x ? parseInt(Math.log(x) / Math.log(256))+1 : 1;
		
		//Get key extension and length
		const x = keyId > 7;
		const k = x ? varlen(keyId) : keyId;
		
		//Get counter length
		const len = varlen(counter);
		
		//Ensure counter is not huge
		if (len>7)
			//Error
			throw new Error("Counter is too big");
		
		//Generate header
		const header = new Uint8Array( x ? 1 + k + len : 1 + len);
		
		//Set metadata header
		header[0] = !!signature;
		header[0] = header[0] << 3  | ( len & 0x07);
		header[0] = header[0] << 1  | x;
		header[0] = header[0] << 3  | ( k & 0x07);
		
		//Add parsed atributes
		header.signature   = !!signature;
		header.keyId	   = keyId;
		header.counter	   = counter;
		
		//If extended key
		if (x)
			//Add key id
			for (let i=0; i<k; ++i)
				header[i+1] = (keyId >> (k-1-i)*8) & 0xff;
		//The coutner init
		const ini = x ? k + 1 : 1;
		//Add counter
		for (let i=0; i<len; ++i)
			header[ini+i] = (counter >> (len-1-i)*8) & 0xff;
			
		
		//Done
		return header;
	}
};

Header.MaxKeyId = 0xFFFFFFFFFF;

Header.checkKeyId = function(keyId)
{
	//Check it is possitive
	if (keyId<0)
		//Error
		throw new Error("keyId must be possitive");
	//Check it is possitive
	if (keyId>Header.MaxKeyId)
		//Error
		throw new Error("keyId must be 5 bytes long at most");
};


/***/ }),

/***/ "./lib/IV.js":
/*!*******************!*\\
  !*** ./lib/IV.js ***!
  \\*******************/
/*! exports provided: IV */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IV", function() { return IV; });
const IV = 
{
	generate : function(keyId,counter,salt)
	{
		//128 bits
		const iv = new Uint8Array (16);
		//Get view
		const view = new DataView(iv.buffer);
		//Set keyId
		view.setBigUint64(0, BigInt(counter));
		//Set coutner
		view.setBigUint64(8, BigInt(keyId));
		//Xor with salt key
		for (let i=0; i<iv.byteLength; ++i)
			//xor
			view.setUint8(i,iv[i]^salt[i]); 
		//return buffer
		return iv;
	}
};


/***/ }),

/***/ "./lib/Receiver.js":
/*!*************************!*\\
  !*** ./lib/Receiver.js ***!
  \\*************************/
/*! exports provided: Receiver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Receiver", function() { return Receiver; });
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils.js */ "./lib/Utils.js");
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _EcdsaVerifyKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EcdsaVerifyKey.js */ "./lib/EcdsaVerifyKey.js");
/* harmony import */ var _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AesCm128HmacSha256EncryptionKey.js */ "./lib/AesCm128HmacSha256EncryptionKey.js");





const MaxRatchetAttempts = 5;
const ReplayWindow = 128;
const KeyTimeout = 1000;

class Receiver
{
	constructor(senderId)
	{
		//Check keyId
		_Header_js__WEBPACK_IMPORTED_MODULE_1__["Header"].checkKeyId(senderId);
		
		//Store sender id
		this.senderId = senderId;
		//Last received counter
		this.maxReceivedCounter = -1;
		//Number or ratchets of current key
		this.numKeyRatchets = 0;
		//Create keyring
		this.keyring = [];
		//Pending verified tags
		this.pending = new Map();
		// has failed decryption
		this.keyFailing = false;

		//Scheduled keys
		this.scheduledKeys = new WeakSet ();

		//Function to clear up keys up to given one
		this.schedulePreviousKeysTimeout = (key) =>{
			//If this is the only key
			if (this.keyring.length==1 && this.keyring[0]===key)
				//Do nothing
				return;
			//If has been already scheduled
			if (this.scheduledKeys.has(key))
				//Not do it twice
				return;
			//Add it
			this.scheduledKeys.add(key);
			//Schedule key timeout of previous keys
			setTimeout(()=>{
				//Find key index
				const i = this.keyring.findIndex(k=>k===key);
				//Remove previous keys
				this.keyring = this.keyring.splice(i);
			}, KeyTimeout);
		};
	}
	
	async decrypt(type, ssrcId, header, encryptedFrame, skip)
	{
		let authTag, payload, extrabytes = 0, signature, signed;
		const prevAuthTags = [];
		
		//convert if needed
		if (!(encryptedFrame instanceof Uint8Array))
			encryptedFrame = new Uint8Array (encryptedFrame);

		// Replay attack protection
		if (header.counter < this.maxReceivedCounter && (this.maxReceivedCounter - header.counter) > ReplayWindow) {
			//Error
			throw new Error("Replay check failed, frame counter too old");
		}
		
		//Check if frame contains signature
		if (header.signature)
		{
			//Start from the end
			let end = encryptedFrame.byteLength;
			
			//Get lengths
			const singatureLength = ECDSAVerifyKey.getSignatureLen();
			const authTagLength   = _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type);
			
			//Get signature
			signature = encryptedFrame.subarray(end - singatureLength, end);
			//Move backward
			end -= singatureLength;
			
			//Get number of tags
			const num = encryptedFrame[end--];
			
			//Read all tags
			for (let i=0; i<num; ++i)
			{
				//Get previous tag
				const prevTag = encryptedFrame.subarray(end - authTagLength, end);
				//Move backward
				end -= authTagLength;
				//Add tag to previous tags in hex
				prevAuthTags.push(_Utils_js__WEBPACK_IMPORTED_MODULE_0__["Utils"].toHex(prevTag))
			}
			//Get the extra bytes
			extrabytes = encryptedFrame.byteLength - end;
			
			//Move backward to start oth current frame auth tag
			end -= authTagLength;
			
			//Get singed part
			signed = encryptedFrame.subarray(end, encryptedFrame.byteLength - singatureLength)
		}

		//For each key in key ring
		for (let i=0;i<this.keyring.length;++i)
		{
			//Get key from ring
			const key = this.keyring[i];
			try {
				//Try to decrypt payload
				[payload, authTag] = await key.decrypt(type, header, encryptedFrame, extrabytes, skip);
				//Done
				break;
			} catch(e) {
				
			}
		}

		//If not found yet
		if (!payload)
		{
			//Get last key
			const key = this.keyring[this.keyring.length-1];
			//Try ratchet last key
			for (let i = 0; i < MaxRatchetAttempts; ++i)
			{
				//Ratchet key
				const ratchetKey = await key.ratchet(i);
				try {
					//Try to decrypt payload
					[payload, authTag] = await ratchetKey.decrypt(type, header, encryptedFrame, extrabytes, skip);
					// Set working ratchet as new key
					this.keyring.push(ratchetKey);
					this.schedulePreviousKeysTimeout(ratchetKey);
					//Done
					break;
				} catch(e) {

				}
			}
		}

		//Last check
		if (!payload) {
			//Decryption failed
			if (this.keyFailing)  {
				throw new Error('decryptStillFailing')
			} else {
				this.keyFailing = true;
				throw new Error("decryptFailed");
			}
		}

		//If we are sending part of the frame in clear
		if (skip)
			//Copy skiped payload
			payload.set(encryptedFrame.subarray(0,skip),0);

		//Check if have received anything from this ssrc before
		if (!this.pending.has(ssrcId))
			//Add it
			this.pending.set(ssrcId,new Set());

		//Get pending list
		const pending = this.pending.get(ssrcId);

		//Check if it constains signatures
		if (header.signed)
		{
			//try to verify list
			if (!await this.verifyKey.verify(signed,signature))
				//Error
				throw new Error("Could not verify signature");
			//For each signed tag
			for (const tag in prevAuthTags)
				//Delete from pending to be verified tags
				pending.delete(tag);
		} else {
			//Push this tag to
			pending.add(_Utils_js__WEBPACK_IMPORTED_MODULE_0__["Utils"].toHex(authTag));
		}

		//Set authenticated sender id and frame Id
		payload.senderId = header.keyId;
		payload.frameId  = header.counter;

		// inform that decryption is working after previously failing
		if (this.keyFailing) {
			payload.decryptionRestored = true;
			this.keyFailing = false;
		}

		//Store last received counter
		this.maxReceivedCounter = Math.max(header.counter, this.maxReceivedCounter);

		//Return decrypted payload
		return payload;
	}

	async setVerifyKey(key)
	{
		//Create new singing key
		this.verifyKey = _EcdsaVerifyKey_js__WEBPACK_IMPORTED_MODULE_2__["EcdsaVerifyKey"].create(key);
	}

	async setEncryptionKey(raw)
	{
		//Create new encryption key
		const key = await _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__["AesCm128HmacSha256EncryptionKey"].create(raw);
		//Append to the keyring
		this.keyring.push(key);
		//Restart ratchet count number
		this.numKeyRatchets = 0;
		//Activate
		this.schedulePreviousKeysTimeout(key);
	}
};


/***/ }),

/***/ "./lib/Salts.js":
/*!**********************!*\\
  !*** ./lib/Salts.js ***!
  \\**********************/
/*! exports provided: Salts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Salts", function() { return Salts; });
const textEncoder = new TextEncoder()

const Salts =  {
	"SaltKey"		: textEncoder.encode("SFrameSaltKey"),
	"EncryptionKey"		: textEncoder.encode("SFrameEncryptionKey"),
	"AuthenticationKey"	: textEncoder.encode("SFrameAuthenticationKey"),
	"RatchetKey"		: textEncoder.encode("SFrameRatchetKey")
};


/***/ }),

/***/ "./lib/Sender.js":
/*!***********************!*\\
  !*** ./lib/Sender.js ***!
  \\***********************/
/*! exports provided: Sender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sender", function() { return Sender; });
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EcdsaSignKey.js */ "./lib/EcdsaSignKey.js");
/* harmony import */ var _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AesCm128HmacSha256EncryptionKey.js */ "./lib/AesCm128HmacSha256EncryptionKey.js");





const SigningFrameInterval = 10;

class Sender
{
	constructor(senderId)
	{
		//Check keyId
		_Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].checkKeyId(senderId);
		
		//The global frame counter
		this.counter = 0;
		
		//Store senderId/keyId
		this.senderId = senderId;
		
		//Pending frames for signing
		this.pending = new Map();
	}
	
	async encrypt(type, ssrcId, payload, skip)
	{
		//Check we have a valid key
		if (!this.key)
			throw Error("Encryption key not set");
		
		//convert if needed
		if (!(payload instanceof Uint8Array))
			payload = new Uint8Array (payload);
		
		//Encure int
		skip = skip ? skip : 0;
		
		//Get counter for frame
		const counter = this.counter++;
		
		//If we don't have the ssrc
		// TODO FIX https://github.com/medooze/sframe/issues/15 and uncomment line below
		// if (!this.pending.has(ssrcId))
		//Create new pending frames array
			this.pending.set(ssrcId,[]);
		
		//Get pending frames for signature
		const pending = this.pending.get(ssrcId);		
		
		//Do we need to sign the frames?
		const signing = this.signingKey && pending.length > SigningFrameInterval;
		
		//Get auth tag len for type
		const authTagLen = _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type);
		
		//Calculae extra bytes
		const extraBytes = signing ? pending.length * _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type) + 1 + _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__["EcdsaSignKey"].getSignatureLen() : 0;
		
		//Generate header
		const header = _Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].generate(signing,this.senderId,counter);
		
		//Encrypt frame
		const [encryptedFrame,authTag] = await this.key.encrypt(type, header, payload, extraBytes, skip);
		
		//If we are sending part of the frame in clear
		if (skip)
			//Copy skiped payload
			encryptedFrame.set(payload.subarray(0,skip),0);
		
		//If we need to sign the frame
		if (signing)
		{
			//Append after auth tag
			let ini = skip + encryptedFrame.byteLength - extraBytes;
			
			//Get tag list view
			const authTags = encryptedFrame.subarray(ini - authTagLen, (pending.length + 1) * authTagLen);
			
			//Add all previous tags 
			for (const previousTag of pending)
			{
				//Append to frame
				encryptedFrame.set(previousTag, ini);
				//Move
				ini += authTagLen;
			}
			
			//Add number of bytes
			encryptedFrame[ini++] = pending.length;
			
			//Create signature with all auth tags (including this frame's one)
			const signature = await this.signingKey.sign(authTags);
			
			//Add signature
			encryptedFrame.set(signature, ini);
			
			//Empty pending list 
			this.pending.set(ssrcId,[]);
			
		//If we can sign
		} else if (this.signingKey) {
			//Append a copy of current tag at the begining
			pending.unshift(authTag.slice());
		}
		
		//Set authenticated sender id and frame Id
		encryptedFrame.senderId = header.keyId;
		encryptedFrame.frameId  = header.counter;
		
		//Done
		return encryptedFrame;
	}
	
	async setSigningKey(key)
	{
		//Create new singing key
		this.signingKey = await _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__["EcdsaSignKey"].create(key);
	}
	
	async setEncryptionKey(key)
	{
		//Create new encryption key
		this.key = await _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].create(key);
	}
	
	async ratchetEncryptionKey()
	{
		//Check we have a valid key
		if (!this.key)
			throw Error("Encryption key not set");
		
		//Rachet the key and store it
		this.key = await this.key.ratchet();
	}
};


/***/ }),

/***/ "./lib/TaskQueue.js":
/*!**************************!*\\
  !*** ./lib/TaskQueue.js ***!
  \\**************************/
/*! exports provided: TaskQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return TaskQueue; });
class TaskQueue
{
	constructor()
	{
		this.tasks = [];
		this.running = false;
	}
	
	enqueue(promise,callback,error)
	{
		//enqueue task
		this.tasks.push({promise,callback,error});
		//Try run 
		this.run();
	}
	
	async run()
	{
		//If already running 
		if (this.running)
			//Nothing
			return;
		//Running
		this.running = true;
		//Run all pending tasks
		while(this.tasks.length)
		{
			try {
				//Wait for first promise to finish
				const result = await this.tasks[0].promise;
				//Run callback
				this.tasks[0].callback(result); 
			} catch(e) {
				//Run error callback
				this.tasks[0].error(e); 
			}
			//Remove task from queue
			this.tasks.shift();
		}
		//Ended
		this.running = false;
	}
}


/***/ }),

/***/ "./lib/Utils.js":
/*!**********************!*\\
  !*** ./lib/Utils.js ***!
  \\**********************/
/*! exports provided: Utils */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Utils", function() { return Utils; });
const Utils = 
{
	toHex : function(buffer)
	{
		return Array.prototype.map.call(buffer instanceof Uint8Array ? buffer : new Uint8Array (buffer), x =>x.toString(16).padStart(2,"0")).join("");
	},
	fromHex: function(str)
	{
		const bytes = [];
		for (let i=0;i<str.length/2;++i)
			bytes.push(parseInt(str.substring(i*2, (i+1)*2), 16));

		return new Uint8Array(bytes);
	},
	equals : function(a,b)
	{
		if (a.byteLength != b.byteLength) return false;
		for (let i = 0 ; i != a.byteLength ; i++)
			if (a[i] != b[i]) return false;
		return true;
	}
};


/***/ }),

/***/ "./lib/VP8PayloadHeader.js":
/*!*********************************!*\\
  !*** ./lib/VP8PayloadHeader.js ***!
  \\*********************************/
/*! exports provided: VP8PayloadHeader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VP8PayloadHeader", function() { return VP8PayloadHeader; });

const VP8PayloadHeader = {
	
	parse : function(buffer) 
	{
		//Check size
		if (buffer.byteLength<3)
			//Invalid
			return null;
		
		//Create uint view
		const view = new Uint8Array(buffer);
		
		//Read comon 3 bytes
		//   0 1 2 3 4 5 6 7
                //  +-+-+-+-+-+-+-+-+
                //  |Size0|H| VER |P|
                //  +-+-+-+-+-+-+-+-+
                //  |     Size1     |
                //  +-+-+-+-+-+-+-+-+
                //  |     Size2     |
                //  +-+-+-+-+-+-+-+-+
		const firstPartitionSize	= view[0] >> 5;
		const showFrame			= view[0] >> 4 & 0x01;
		const version			= view[0] >> 1 & 0x07;
		const isKeyFrame		= (view[0] & 0x01) == 0;

		//check if more
		if (isKeyFrame)
		{
			//Check size
			if (buffer.byteLength<10)
				//Invalid
				return null;
			//Get size in le
			const hor = view[7]<<8 | view[6];
			const ver = view[9]<<8 | view[8];
			//Get dimensions and scale
			const width		= hor & 0x3fff;
			const horizontalScale   = hor >> 14;
			const height		= ver & 0x3fff;
			const verticalScale	= ver >> 14;
			//Key frame
			return view.subarray (0,10);
		}
		
		//No key frame
		return view.subarray (0,3);
	}
};

		


/***/ }),

/***/ "./node_modules/lodash/_Symbol.js":
/*!****************************************!*\\
  !*** ./node_modules/lodash/_Symbol.js ***!
  \\****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");

/** Built-in value references. */
var Symbol = root.Symbol;

module.exports = Symbol;


/***/ }),

/***/ "./node_modules/lodash/_baseGetTag.js":
/*!********************************************!*\\
  !*** ./node_modules/lodash/_baseGetTag.js ***!
  \\********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js"),
    getRawTag = __webpack_require__(/*! ./_getRawTag */ "./node_modules/lodash/_getRawTag.js"),
    objectToString = __webpack_require__(/*! ./_objectToString */ "./node_modules/lodash/_objectToString.js");

/** \`Object#toString\` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * The base implementation of \`getTag\` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the \`toStringTag\`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

module.exports = baseGetTag;


/***/ }),

/***/ "./node_modules/lodash/_baseTrim.js":
/*!******************************************!*\\
  !*** ./node_modules/lodash/_baseTrim.js ***!
  \\******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var trimmedEndIndex = __webpack_require__(/*! ./_trimmedEndIndex */ "./node_modules/lodash/_trimmedEndIndex.js");

/** Used to match leading whitespace. */
var reTrimStart = /^\\s+/;

/**
 * The base implementation of \`_.trim\`.
 *
 * @private
 * @param {string} string The string to trim.
 * @returns {string} Returns the trimmed string.
 */
function baseTrim(string) {
  return string
    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')
    : string;
}

module.exports = baseTrim;


/***/ }),

/***/ "./node_modules/lodash/_freeGlobal.js":
/*!********************************************!*\\
  !*** ./node_modules/lodash/_freeGlobal.js ***!
  \\********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable \`global\` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

module.exports = freeGlobal;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/lodash/_getRawTag.js":
/*!*******************************************!*\\
  !*** ./node_modules/lodash/_getRawTag.js ***!
  \\*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [\`toStringTag\`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * A specialized version of \`baseGetTag\` which ignores \`Symbol.toStringTag\` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw \`toStringTag\`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
      tag = value[symToStringTag];

  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}

module.exports = getRawTag;


/***/ }),

/***/ "./node_modules/lodash/_objectToString.js":
/*!************************************************!*\\
  !*** ./node_modules/lodash/_objectToString.js ***!
  \\************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [\`toStringTag\`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/**
 * Converts \`value\` to a string using \`Object.prototype.toString\`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

module.exports = objectToString;


/***/ }),

/***/ "./node_modules/lodash/_root.js":
/*!**************************************!*\\
  !*** ./node_modules/lodash/_root.js ***!
  \\**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var freeGlobal = __webpack_require__(/*! ./_freeGlobal */ "./node_modules/lodash/_freeGlobal.js");

/** Detect free variable \`self\`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

module.exports = root;


/***/ }),

/***/ "./node_modules/lodash/_trimmedEndIndex.js":
/*!*************************************************!*\\
  !*** ./node_modules/lodash/_trimmedEndIndex.js ***!
  \\*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/** Used to match a single whitespace character. */
var reWhitespace = /\\s/;

/**
 * Used by \`_.trim\` and \`_.trimEnd\` to get the index of the last non-whitespace
 * character of \`string\`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the last non-whitespace character.
 */
function trimmedEndIndex(string) {
  var index = string.length;

  while (index-- && reWhitespace.test(string.charAt(index))) {}
  return index;
}

module.exports = trimmedEndIndex;


/***/ }),

/***/ "./node_modules/lodash/debounce.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/debounce.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),
    now = __webpack_require__(/*! ./now */ "./node_modules/lodash/now.js"),
    toNumber = __webpack_require__(/*! ./toNumber */ "./node_modules/lodash/toNumber.js");

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Built-in method references for those with the same name as other \`lodash\` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Creates a debounced function that delays invoking \`func\` until after \`wait\`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a \`cancel\` method to cancel
 * delayed \`func\` invocations and a \`flush\` method to immediately invoke them.
 * Provide \`options\` to indicate whether \`func\` should be invoked on the
 * leading and/or trailing edge of the \`wait\` timeout. The \`func\` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last \`func\`
 * invocation.
 *
 * **Note:** If \`leading\` and \`trailing\` options are \`true\`, \`func\` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the \`wait\` timeout.
 *
 * If \`wait\` is \`0\` and \`leading\` is \`false\`, \`func\` invocation is deferred
 * until to the next tick, similar to \`setTimeout\` with a timeout of \`0\`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between \`_.debounce\` and \`_.throttle\`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time \`func\` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke \`sendMail\` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure \`batchLog\` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any \`maxWait\` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        timeWaiting = wait - timeSinceLastCall;

    return maxing
      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
      : timeWaiting;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the \`maxWait\` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have \`lastArgs\` which means \`func\` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        clearTimeout(timerId);
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

module.exports = debounce;


/***/ }),

/***/ "./node_modules/lodash/isObject.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/isObject.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Checks if \`value\` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of \`Object\`. (e.g. arrays, functions, objects, regexes, \`new Number(0)\`, and \`new String('')\`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is an object, else \`false\`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

module.exports = isObject;


/***/ }),

/***/ "./node_modules/lodash/isObjectLike.js":
/*!*********************************************!*\\
  !*** ./node_modules/lodash/isObjectLike.js ***!
  \\*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Checks if \`value\` is object-like. A value is object-like if it's not \`null\`
 * and has a \`typeof\` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is object-like, else \`false\`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

module.exports = isObjectLike;


/***/ }),

/***/ "./node_modules/lodash/isSymbol.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/isSymbol.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__(/*! ./_baseGetTag */ "./node_modules/lodash/_baseGetTag.js"),
    isObjectLike = __webpack_require__(/*! ./isObjectLike */ "./node_modules/lodash/isObjectLike.js");

/** \`Object#toString\` result references. */
var symbolTag = '[object Symbol]';

/**
 * Checks if \`value\` is classified as a \`Symbol\` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is a symbol, else \`false\`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && baseGetTag(value) == symbolTag);
}

module.exports = isSymbol;


/***/ }),

/***/ "./node_modules/lodash/now.js":
/*!************************************!*\\
  !*** ./node_modules/lodash/now.js ***!
  \\************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

module.exports = now;


/***/ }),

/***/ "./node_modules/lodash/toNumber.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/toNumber.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var baseTrim = __webpack_require__(/*! ./_baseTrim */ "./node_modules/lodash/_baseTrim.js"),
    isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),
    isSymbol = __webpack_require__(/*! ./isSymbol */ "./node_modules/lodash/isSymbol.js");

/** Used as references for various \`Number\` constants. */
var NAN = 0 / 0;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on \`root\`. */
var freeParseInt = parseInt;

/**
 * Converts \`value\` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = baseTrim(value);
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = toNumber;


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\\
  !*** (webpack)/buildin/global.js ***!
  \\***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ })

/******/ });
`,"Worker",void 0,void 0)}},"./index.js":function(a,c,d){d.r(c);var h=d("./lib/Utils.js");d.d(c,"Utils",function(){return h.Utils});var g=d("./Client.js");d.d(c,"SFrame",function(){return g.SFrame})},"./lib/Utils.js":function(a,c,d){d.r(c),d.d(c,"Utils",function(){return h});const h={toHex:function(g){return Array.prototype.map.call(g instanceof Uint8Array?g:new Uint8Array(g),b=>b.toString(16).padStart(2,"0")).join("")},fromHex:function(g){const b=[];for(let j=0;j<g.length/2;++j)b.push(parseInt(g.substring(j*2,(j+1)*2),16));return new Uint8Array(b)},equals:function(g,b){if(g.byteLength!=b.byteLength)return!1;for(let j=0;j!=g.byteLength;j++)if(g[j]!=b[j])return!1;return!0}}},"./node_modules/worker-loader/dist/runtime/inline.js":function(a,c,d){a.exports=function(h,g,b,j){var _=self||window;try{try{var $;try{$=new _.Blob([h])}catch{var _e=_.BlobBuilder||_.WebKitBlobBuilder||_.MozBlobBuilder||_.MSBlobBuilder;$=new _e,$.append(h),$=$.getBlob()}var et=_.URL||_.webkitURL,ct=et.createObjectURL($),dt=new _[g](ct,b);return et.revokeObjectURL(ct),dt}catch{return new _[g]("data:application/javascript,".concat(encodeURIComponent(h)),b)}}catch{if(!j)throw Error("Inline worker is not supported");return new _[g](j,b)}}}})})}).call(this,i(0))},function(e,s,i){const o=i(6),a=i(301),c=i(71)(),d=i(766),h=i(28);let g=function(){function b(_,$){$===void 0&&($={}),this._session=_,this.PeerConnection=$.PeerConnection||c,this._subscriberCreateQueue=new d,this._originalSendMessages={},this._tracks=[],this._subscriberPcs={},this._sendMessage=()=>{},o(this)}var j=b.prototype;return j.parseOptions=function($){return Object.assign({},$,{removeUnusedCodecs:!0,sendMessage:(_e,et)=>this.trigger("sendMessage",_e,et)})},j.addTrackAddedListener=function(){this._peerConnection&&this._peerConnection.on("trackAdded",$=>{const _e=$.track;this._tracks.includes(_e.id)||(this._subscriberPcs[this._subscriberPcToAdd._id].push(_e.id),this._tracks.push(_e.id),this._subscriberPcToAdd._onTrackAdded($))})},j.getPeerConnection=function($,_e){if(this._subscriberPcToAdd=_e,this._sendMessage=$.sendMessage,this._originalSendMessages[_e._id]=this._sendMessage,this._peerConnection)this._peerConnection.addOptions($);else{this._firstSubscriberPc=_e._id,this.on("sendMessage",(ct,dt)=>{this._sendMessage(ct,dt)});const et=this.parseOptions($);this._peerConnection=new this.PeerConnection(et),this.addTrackAddedListener()}return this._subscriberPcs[_e._id]=[],this._peerConnection},j.removeMessageSender=function($){delete this._originalSendMessages[$];const _e=Object.values(this._originalSendMessages);this._sendMessage=_e[_e.length-1]||function(){}},j.removeSubscriber=function($,_e){this.removeMessageSender($),this._peerConnection.stopTransceivers(_e)},j.removeFromSinglePeerConnection=function($){if(this._firstSubscriberPc===$)this._peerConnection.iceRestart(),this._peerConnection.generateOfferAndSend();else{const _e=et=>{this.cachedSdp=h.updateSDPWithNewOffer(this.cachedSdp,et.sdp);const ct=h.createSDP(this.cachedSdp.headers,this.cachedSdp.trackSections);this._peerConnection.processMessage("answer",{content:{sdp:ct}})};this._peerConnection.generateOfferAndAnswer(_e)}delete this._subscriberPcs[$],Object.keys(this._subscriberPcs).length||(this._peerConnection.disconnect(),this._peerConnection=null)},j.removeTrack=function($,_e){a(this._tracks,$.id),a(this._subscriberPcs[_e]||[],$.id)},j.destroy=function(){this._subscriberPcToAdd=null,this._subscriberPcs=null,this._session=null,this._tracks=null,this._peerConnection&&(this._peerConnection.disconnect(),this._peerConnection=null)},j.addSubscriber=function($){this._subscriberCreateQueue.add($)},j.subscriberComplete=function(){this._subscriberCreateQueue.next()},j.cacheOfferAnswer=function($){this.cachedSdp=h.parseSDP($)},b}();e.exports=g},function(e,s,i){let o=function(){function a(){this.queue=[],this.isAddingSubscriber=!1}var c=a.prototype;return c.add=function(h){this.isAddingSubscriber?this.queue.push(h):(this.isAddingSubscriber=!0,h())},c.next=function(){const h=this.queue.shift();h?h():this.isAddingSubscriber=!1},a}();e.exports=o},function(e,s,i){e.exports=function(a){a===void 0&&(a={});const c=a.Session||i(320)(),d=a.sessionObjects||i(21);return function(g,b,j){b==null&&(b=g,g=null),Array.isArray(b)&&b.length===1&&(b=b[0]);let _=d.sessions.get(b);return _||(_=new c(g,b,j),d.sessions.add(_)),_}}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=i(769),h=i(273),g=i(2),b=i(7),j=i(10),_=i(13)(),$=i(28),_e=i(72),et=i(143)(typeof window!==void 0?window:commonjsGlobal);function ct(nt){return h(d(nt,["AV1X","AV1","VP9","rtx","red","ulpfec","H265","X-H264UC","x-ulpfecuc"]))}const dt=function(){var nt=(0,c.default)(a.default.mark(function it(){var st,lt,ht,Tt,Rt,vt,Et;return a.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(!(typeof window>"u")){Ct.next=2;break}return Ct.abrupt("return",{videoEncoders:[],videoDecoders:[]});case 2:if(st=et.RTCPeerConnection,!(window.RTCRtpSender&&"getCapabilities"in window.RTCRtpSender)){Ct.next=7;break}return lt=window.RTCRtpSender.getCapabilities("video").codecs.map(Ut=>Ut.mimeType||Ut.name).map(Ut=>Ut.replace("video/","")),lt=ct(lt),Ct.abrupt("return",{videoEncoders:lt,videoDecoders:lt});case 7:if(!(g.name==="Chrome"&&!("captureStream"in window.HTMLCanvasElement.prototype))){Ct.next=9;break}return Ct.abrupt("return",{videoEncoders:["VP8"],videoDecoders:["VP8"]});case 9:if(!g.isLegacyEdge){Ct.next=11;break}return Ct.abrupt("return",{videoEncoders:["H264","VP8"],videoDecoders:["H264","VP8"]});case 11:return ht=window.document.createElement("canvas"),ht.getContext("2d"),Tt=ht.captureStream(),Ct.prev=14,vt={iceServers:[]},_e()&&(vt.sdpSemantics="plan-b"),Rt=new st(vt),Rt.addTrack?Rt.addTrack(Tt.getVideoTracks()[0],Tt):Rt.addStream&&Rt.addStream(Tt),Ct.next=21,Rt.createOffer();case 21:return Et=Ct.sent,lt=$.getCodecs(Et.sdp,"video")||[],lt=ct(lt),Ct.abrupt("return",{videoEncoders:lt,videoDecoders:lt});case 27:throw Ct.prev=27,Ct.t0=Ct.catch(14),_(b.UNABLE_TO_ACCESS_MEDIA_ENGINE,new Error("OT.getSupportedCodecs was not able to get the list of supported codecs"),j.UNABLE_TO_ACCESS_MEDIA_ENGINE);case 30:return Ct.prev=30,Rt.close(),Ct.finish(30);case 33:case"end":return Ct.stop()}},it,null,[[14,27,30,33]])}));return function(){return nt.apply(this,arguments)}}();e.exports=dt},function(e,s,i){var o=i(770),a=i(237),c=i(87),d=i(131),h=c(function(g,b){return d(g)?o(g,a(b,1,d,!0)):[]});e.exports=h},function(e,s,i){var o=i(92),a=i(93),c=i(130),d=i(33),h=i(66),g=i(94),b=200;function j(_,$,_e,et){var ct=-1,dt=a,nt=!0,it=_.length,st=[],lt=$.length;if(!it)return st;_e&&($=d($,h(_e))),et?(dt=c,nt=!1):$.length>=b&&(dt=g,nt=!1,$=new o($));e:for(;++ct<it;){var ht=_[ct],Tt=_e==null?ht:_e(ht);if(ht=et||ht!==0?ht:0,nt&&Tt===Tt){for(var Rt=lt;Rt--;)if($[Rt]===Tt)continue e;st.push(ht)}else dt($,Tt,et)||st.push(ht)}return st}e.exports=j},function(e,s,i){const o=i(316),a=o.isSupported;e.exports=a},function(e,s,i){const o=i(110);e.exports=o},function(e,s,i){const o=i(24)(),a=o.getInputMediaDevices;e.exports=function(d){a().then(h=>d(void 0,h),d)}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));e.exports=function(d){d===void 0&&(d={});const h=d.deviceHelpers||i(24)(),g=h.hasAudioOutputApiSupport,b=h.hasDevice,j=d.getAudioOutputDevices||i(332),_=d.updateSubscribersSinkId||i(334),$=i(13)(),_e=i(7);return function(){var ct=(0,c.default)(a.default.mark(function dt(nt){var it,st;return a.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(g()){ht.next=2;break}throw $(_e.UNSUPPORTED_BROWSER,new Error("setAudioOutputDevice is not supported in your browser."));case 2:return ht.next=4,j();case 4:if(it=ht.sent,st=b(it,nt),st){ht.next=8;break}throw $(_e.INVALID_AUDIO_OUTPUT_SOURCE,new Error("The requested device is not valid."));case 8:return ht.prev=8,ht.next=11,_(nt);case 11:ht.next=16;break;case 13:throw ht.prev=13,ht.t0=ht.catch(8),$(_e.REQUESTED_DEVICE_PERMISSION_DENIED,new Error("No permission to use the requested device."));case 16:case"end":return ht.stop()}},dt,null,[[8,13]])}));return function(nt){return ct.apply(this,arguments)}}()}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));const d=i(776)(),h=i(24)(),g=h.hasAudioOutputApiSupport,b=h.getNativeMediaDevices;e.exports=()=>{if(g()){const j=b();let _=!1;j.addEventListener("devicechange",(0,c.default)(a.default.mark(function $(){return a.default.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:if(!_){et.next=2;break}return et.abrupt("return");case 2:return _=!0,et.next=5,d();case 5:_=!1;case 6:case"end":return et.stop()}},$)})))}}},function(e,s,i){var o=i(3),a=o(i(4)),c=o(i(5));e.exports=function(d){d===void 0&&(d={});const h=d.deviceHelpers||i(24)(),g=h.getAudioOutputMediaDevices,b=h.getDefaultAudioOutputDeviceId,j=h.hasDevice,_=d.currentAudioOutputDevice||i(106),$=_.getCurrentAudioOutputDeviceId,_e=_.setCurrentAudioOutputDeviceId,et=d.updateSubscribersSinkId||i(334),ct=d.logging||i(1)("currentAudioOutputDevice");return function(){var nt=(0,c.default)(a.default.mark(function it(){var st,lt,ht;return a.default.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,g();case 2:if(st=Rt.sent,st.length!==0){Rt.next=6;break}return _e(""),Rt.abrupt("return");case 6:if(lt=j(st,$()),!lt){Rt.next=9;break}return Rt.abrupt("return");case 9:return ht=b(st),_e(ht),Rt.prev=11,Rt.next=14,et(ht);case 14:Rt.next=19;break;case 16:Rt.prev=16,Rt.t0=Rt.catch(11),ct.debug("Failed to set the default audio output device.",Rt.t0);case 19:case"end":return Rt.stop()}},it,null,[[11,16]])}));return function(){return nt.apply(this,arguments)}}()}}])})})(opentok);const OT=getDefaultExportFromCjs(opentokExports),baseURL="https://opentok-node.onrender.com",addMember=async e=>{try{if(!(await fetch(`${baseURL}/add-member`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({member:e})})).ok)throw Error("error while adding a member")}catch(s){throw s}},getMembers=async()=>{try{const e=await fetch(`${baseURL}/get-members`);if(!e.ok)throw Error("error while retrieving members");return e.json()}catch(e){throw e}},removeMember=async e=>{try{if(!(await fetch(`${baseURL}/remove-member`,{headers:{"Content-Type":"application/json"},method:"DELETE",body:JSON.stringify({member:e})})).ok)throw Error("error while removing member")}catch(s){throw s}},apiKey="45828062",sessionId="2_MX40NTgyODA2Mn5-MTY4NDg0MTE5NzEzN35WWVl6NGpqNXRueStvOURFS2lQWThsaUx-UH5-",token="T1==cGFydG5lcl9pZD00NTgyODA2MiZzaWc9ZGFkZDM2NzViYzYwZTI4YmZlODc0MDQ0YWFkYjY4MWU4ZDU4OGY5ZDpzZXNzaW9uX2lkPTJfTVg0ME5UZ3lPREEyTW41LU1UWTRORGcwTVRFNU56RXpOMzVXV1ZsNk5HcHFOWFJ1ZVN0dk9VUkZTMmxRV1Roc2FVeC1VSDUtJmNyZWF0ZV90aW1lPTE2ODQ4NTI3ODImbm9uY2U9MC42NzAyNDA0NzIwNTI2OTI5JnJvbGU9cHVibGlzaGVyJmV4cGlyZV90aW1lPTE2ODQ5MzkxODI=";function createPublisherListernerMap(){return createMapFor(["accessAllowed","accessDenied","accessDialogClosed","accessDialogOpened","destroyed","mediaStopped","streamCreated","streamDestroyed","videoDimensionsChanged","videoElementCreated","muteForced"],"publisher")}function createSubscriberListenerMap(){return createMapFor(["connected","captionReceived","destroyed","encryptionSecretMismatch","encryptionSecretMatch","videoDisabled","videoDimensionsChanged","videoDisabled","videoDisableWarning","videoDisableWarningLifted","videoElementCreated","videoEnabled"],"subscriber")}function createSessionListenersMap(){return createMapFor(["archiveStarted","archiveStopped","connectionCreated","connectionDestroyed","sessionDisconnected:","sessionConnected","sessionReconnected","sessionReconnecting","signal","streamCreated","streamDestroyed","streamPropertyChanged","muteForced"],"session")}function createMapFor(e,s){return e.reduce((i,o)=>({...i,[o]:()=>console.log(`triggered from ${s}: ${o}`)}),{})}function handleError(e){e&&alert(e.message)}const callProperties={insertMode:"append",width:"100%",height:"100%"},Call=({userId:e})=>{let s,i,o;const a=c=>s.subscribe(c,"subscriber",callProperties,handleError);return reactExports.useEffect(()=>{(async()=>{try{await addMember(e)}catch(h){console.error(h)}})(),s=OT.initSession(apiKey,sessionId),s.connect(token,h=>{console.log("session connect"),h&&handleError(h)});const d=createSessionListenersMap();return s.on({...d,sessionConnected:()=>{console.log("on session connected"),o=OT.initPublisher("publisher",callProperties,handleError);const h=createPublisherListernerMap();o.on({...h}),s.publish(o,handleError)},streamCreated:h=>{console.log("streamCreated",h),i=a(h.stream);const g=createSubscriberListenerMap();i.on({...g})}}),()=>{s.off(),i&&(s.unsubscribe(i),i.off(),console.log("session unsubscribed")),o&&(s.unpublish(o),o.destroy(),o.off(),console.log("publisher destroyed")),s.disconnect(),console.log("session disconnected")}},[]),jsxRuntimeExports.jsxs("div",{id:"videos",children:[jsxRuntimeExports.jsx("div",{id:"subscriber"}),jsxRuntimeExports.jsx("div",{id:"publisher"})]})},Member=({userId:e})=>jsxRuntimeExports.jsx(Call,{userId:e}),Therapist=({userId:e})=>jsxRuntimeExports.jsx(Call,{userId:e}),deviceSelect="",DeviceSelect=({label:e,devices:s,updateDeviceId:i})=>{const[o,a]=reactExports.useState(s[0].deviceId),c=s.map(({deviceId:d,label:h})=>jsxRuntimeExports.jsx("option",{value:d,children:h},d));return jsxRuntimeExports.jsxs("div",{className:"device-select",children:[jsxRuntimeExports.jsx("label",{children:e}),jsxRuntimeExports.jsx("select",{value:o,onChange:d=>{const h=d.target.value;a(h),i(h)},children:c})]})},useDevices=()=>{const[e,s]=reactExports.useState(),[i,o]=reactExports.useState(),[a,c]=reactExports.useState();return reactExports.useEffect(()=>{var d;if(!((d=navigator.mediaDevices)!=null&&d.enumerateDevices)){console.log("enumerateDevices() not supported.");return}navigator.mediaDevices.enumerateDevices().then(h=>{const g=[],b=[],j=[];h.forEach(_=>{switch(_.kind){case"audioinput":j.push(_);break;case"audiooutput":b.push(_);break;case"videoinput":g.push(_)}}),s(g),o(b),c(j)}).catch(h=>{console.error(`${h.name}: ${h.message}`)})},[]),{videoDevices:e,speakerDevices:i,microphoneDevices:a}},devices="",Lobby=({memberId:e,linkTo:s})=>{const{videoDevices:i,speakerDevices:o,microphoneDevices:a}=useDevices(),[c,d]=reactExports.useState(),[h,g]=reactExports.useState(),[b,j]=reactExports.useState(),[_,$]=reactExports.useState(!0),[_e,et]=reactExports.useState([]);reactExports.useEffect(()=>{$(!0);let nt;return(async()=>{await removeMember(e),nt=setInterval(async()=>{try{const{members:st}=await getMembers();et(st),$(!1)}catch(st){console.error(st)}},2e3)})(),()=>{clearInterval(nt)}},[]);const ct=_e.map(nt=>jsxRuntimeExports.jsx("li",{children:nt},nt)),dt=!!c&&!!h&&!!b;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_?jsxRuntimeExports.jsx("div",{children:"Loading data..."}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e.length?jsxRuntimeExports.jsxs("div",{children:["The following members are already in the call:",jsxRuntimeExports.jsx("ul",{children:ct})]}):jsxRuntimeExports.jsx("div",{children:"There are no connected members"})}),jsxRuntimeExports.jsxs("div",{id:"devices",children:[i&&jsxRuntimeExports.jsx(DeviceSelect,{label:"Pick your video input",devices:i,updateDeviceId:d}),o&&jsxRuntimeExports.jsx(DeviceSelect,{label:"Pick your audio output",devices:o,updateDeviceId:g}),a&&jsxRuntimeExports.jsx(DeviceSelect,{label:"Pick your audio output",devices:a,updateDeviceId:j})]}),!_&&jsxRuntimeExports.jsx(Link,{to:`/opentok-react/${s}`,children:jsxRuntimeExports.jsx("button",{disabled:dt,children:`Go to ${s}`})})]})},memberName="John Kennedy",therapistName="Nikita Khrushev",App=()=>jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/opentok-react",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/opentok-react/lobby/member",element:jsxRuntimeExports.jsx(Lobby,{memberId:memberName,linkTo:"member"})}),jsxRuntimeExports.jsx(Route,{path:"/opentok-react/lobby/therapist",element:jsxRuntimeExports.jsx(Lobby,{memberId:therapistName,linkTo:"therapist"})}),jsxRuntimeExports.jsx(Route,{path:"/opentok-react/member",element:jsxRuntimeExports.jsx(Member,{userId:memberName})}),jsxRuntimeExports.jsx(Route,{path:"/opentok-react/therapist",element:jsxRuntimeExports.jsx(Therapist,{userId:therapistName})})]}),index="";client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})}));
